globals
constant integer D=StringHash("AIDummyState")
gamecache E
integer G=0
hashtable ZCC=InitHashtable()
hashtable ZCS=InitHashtable()
hashtable Dvv=InitHashtable()
hashtable R1Y=InitHashtable()
hashtable CEe=InitHashtable()
hashtable dvv=InitHashtable()
real HEe=.015
integer GEe=0
hashtable NCC
string ZRr
real vI
boolean Ovv=false
boolean array J
integer array K
integer array M
integer array N
boolean O=false
boolean P=false
string array Q
boolean array I
timer array A
integer array T
timer array U
integer array V
timer W=null
integer array F
integer B=0
integer C=0
integer array H
integer array L
boolean D4=false
boolean E4=false
boolean O4=false
boolean P4=false
boolean R4=false
multiboard T4=null
unit V4=null
unit MH0
boolean bJ=false
unit array pI4
integer array yv
integer array Yvv
boolean Fe=false
boolean Gge=true
boolean V00=false
trigger JJe
integer Ce=0
boolean array W4
integer X4=0
boolean Y4=false
boolean A4=false
boolean C4=false
location Z=null
location vv=null
location ev=null
location ov=null
location rv=null
boolean av=false
boolean Ev=false
boolean Ov=false
boolean Rv=false
boolean Av=false
boolean Nv=false
boolean bv=false
boolean Bv=false
boolean cv=false
boolean Cv=false
boolean Dv=false
boolean fv=false
integer D7=0
integer E7=0
location Jv=null
location lv=null
location Lv=null
location mv=null
location pv=null
location qv=null
location Qv=null
location sv=null
location tv=null
location Tv=null
location Uv=null
location Wv=null
location F7=null
location G7=null
unit array M7
integer ae=0
integer ne=0
player array O7
player array P7
integer array S7
integer array T7
integer array U7
unit array W7
integer array Be
force X7=null
force Y7=null
player array Z7
player array A7
player B7=null
player C7=null
boolean ge=false
boolean XTI=false
integer Ge=0
integer he=0
integer array je
hashtable L7=null
player Le=null
unit D8=null
integer E8=0
real F8=0
real C6R=0
item array se
item array Se
item array We
item array ze
item array Ze
item array vx
boolean G8=false
integer N8=0
location array O8
unit ox=null
group R8=null
boolean V8=false
boolean AJ=false
boolean W8=false
boolean X8=false
boolean Ox=false
boolean Rx=false
boolean Nx=false
boolean bx=false
string cx=""
boolean Y8=false
integer Z8=0
item jx=null
player lx=null
boolean A8=false
boolean array mx
integer array B8
integer C8=0
force L8=null
boolean D9=false
real E9=0
unit HGI
unit HHI
unit KNI
real KSI
real KTI
unit ZII
unit Z1I
group ZOI
real Z2I
unit K4I
integer K5I
real K6I
unit K8I
unit K7I
unit K3I
real QQJ
unit K0I
unit JFI
integer JGI
group JEI
integer JVI
real JHI
real JZI
constant real JDI=1000
integer array JMI
group JQI
integer KYI
unit JUI
real KKI
integer K2I
integer KZI
constant real JPI=1200
unit JYI
unit JJI
group JKI
integer JLI
boolean JOI
real JSI
integer JTI
unit JRI
constant real JXI=800
constant real JWI=30
trigger J6I=null
unit J3I
unit J4I
integer J5I
real FI70=.35
real FJ70=.66
real FK70=.25
real FM70=2.
real FN70=.05
integer FO70=5
real FP70=.66
real FQ70=.25
integer FR70=72
integer FS70=144
real FT70=FI70/2
integer FU70=3
integer FV70=300
integer FW70=180
boolean FX70=false
boolean RZZZ=false
boolean RZZ0=false
boolean F9=false
boolean G9=false
boolean O9=false
boolean array P9
string vo=""
boolean array eo
boolean array oo
boolean S9=false
boolean T9=false
trigger U9
integer array V9
integer array W9
integer array X9
integer array YTI
integer array YRI
integer YPI=0
boolean array HSS
integer array ZSS
real array VSS
weathereffect bo=null
weathereffect Bo=null
boolean Y9=false
location Z9=null
real A9=0
string B9=""
string array C9
rect go=null
rect jo=null
rect lo=null
rect L9=null
rect Qo=null
rect to=null
rect Uo=null
rect wo=null
rect zo=null
rect er=null
rect ED=null
rect ar=null
rect Er=null
rect Xr=null
rect FD=null
rect GD=null
rect HD=null
rect MD=null
rect Br=null
rect cr=null
rect Cr=null
rect fr0=null
rect Fr=null
rect Hr=null
rect jr=null
rect Jr=null
rect lr=null
rect mr=null
rect pr=null
rect qr=null
rect ND=null
rect Sr=null
rect Ur=null
rect Wr=null
rect zr=null
rect Zr=null
rect vi=null
rect ei=null
rect xi=null
rect oi=null
rect ai=null
rect OD=null
rect PD=null
rect Ai=null
rect Ni=null
rect bi=null
rect Bi=null
rect bi0=null
rect Bi0=null
rect bi1=null
rect Bi1=null
rect QD=null
rect TD=null
rect di=null
rect fi=null
rect Fi=null
rect Gi=null
rect Ji=null
rect li=null
rect Li=null
rect pi=null
rect WD=null
rect XD=null
rect YD=null
rect ZD=null
rect AD=null
rect BD=null
rect LD=null
rect KE=null
rect RE=null
rect SE=null
rect TE=null
rect WE=null
rect YE=null
rect ZE=null
rect EF=null
rect FF=null
rect GF=null
rect HF=null
rect JF=null
rect KF=null
rect MF=null
rect NF=null
rect OF=null
rect PF=null
rect QF=null
rect RF=null
rect SF=null
rect TF=null
rect UF=null
rect WF=null
rect XF=null
rect YF=null
rect ZF=null
rect BF=null
rect CF=null
rect LF=null
rect DGg=null
rect EG=null
rect FG=null
rect GG=null
rect JG=null
rect MG=null
rect OG=null
rect PG=null
rect QG=null
rect RG=null
rect SG=null
rect TG=null
rect UG=null
rect VG=null
rect WG=null
rect XG=null
rect ZG=null
rect AG=null
rect BG=null
rect CG=null
rect LG=null
rect DH=null
rect EH=null
rect HH=null
rect OH=null
rect PH=null
rect QH=null
rect RH=null
rect TH=null
rect UH=null
rect WH=null
rect XH=null
rect YH=null
rect ZH=null
rect AH=null
rect CH=null
rect DI=null
rect EI=null
rect GI=null
rect HI=null
rect II=null
rect JI=null
rect NI=null
rect PI=null
rect SI=null
rect TI=null
rect UI=null
rect WI=null
rect XI=null
rect YI=null
rect BI=null
rect CI=null
rect LI=null
rect TJ=null
rect MK=null
rect UK=null
rect YK=null
rect SM=null
rect TM=null
rect UM=null
rect WM=null
rect YM=null
rect ZM=null
rect JN=null
rect MN=null
rect eE=null
rect oE=null
rect aE=null
rect nE=null
rect VE=null
rect EE=null
rect XE=null
rect OE=null
rect IE=null
rect AE=null
rect bE=null
rect BE=null
rect cE=null
rect CE=null
rect dE=null
rect fE=null
rect FE=null
rect gE=null
rect GE=null
rect JE=null
rect lE=null
rect LE=null
rect ME=null
rect pE=null
rect PE=null
rect qE=null
rect QE=null
rect TN=null
rect UN=null
sound yE=null
sound zE=null
sound vX=null
sound WN=null
sound YN=null
sound ZN=null
sound nX=null
sound EX=null
sound OX=null
sound AN=null
sound BN=null
sound bX=null
sound BX=null
sound cX=null
sound CX=null
sound fX=null
sound kX=null
sound LX=null
sound mX=null
sound MX=null
sound PX=null
sound qX=null
sound QX=null
sound tX=null
sound TX=null
sound CN=null
sound UX=null
sound JO=null
sound TO=null
sound oO=null
sound VO=null
sound aO=null
sound YO=null
sound EO=null
sound XO=null
sound OO=null
sound AO=null
sound NO=null
sound bO=null
sound BO=null
sound cO=null
sound CO=null
sound fO=null
sound FO=null
sound gO=null
sound hO=null
sound HO=null
sound kO=null
sound lO=null
sound mO=null
sound pO=null
sound qO=null
sound QO=null
sound tO=null
sound UO=null
sound wO=null
sound WO=null
sound zO=null
sound vR=null
sound eR=null
sound oR=null
sound rR=null
sound aR=null
sound RR=null
sound bR=null
sound BR=null
sound ZO=null
sound CR=null
sound LO=null
sound DP=null
sound hR=null
sound EP=null
sound JR=null
sound lR=null
sound LR=null
sound mR=null
sound pR=null
sound PR=null
sound qR=null
sound QR=null
sound sR=null
sound SR=null
sound UR=null
sound WR=null
sound zR=null
sound GP=null
sound IP=null
sound eI=null
sound oI=null
sound JP=null
sound KP=null
sound RI=null
sound OP=null
string RP="Sound\\Music\\mp3Music\\Undead1.mp3"
string TP="Sound\\Music\\mp3Music\\Undead2.mp3"
string VP="Sound\\Music\\mp3Music\\Undead3.mp3"
string XP="Sound\\Music\\mp3Music\\Orc1.mp3"
string YP="Sound\\Music\\mp3Music\\Orc2.mp3"
string ZP="Sound\\Music\\mp3Music\\Orc3.mp3"
string BP="Sound\\Music\\mp3Music\\NightElf1.mp3"
string CP="Sound\\Music\\mp3Music\\NightElf2.mp3"
string GQ="Sound\\Music\\mp3Music\\NightElf3.mp3"
string IQ="Sound\\Music\\mp3Music\\Human1.mp3"
string JQ="Sound\\Music\\mp3Music\\Human2.mp3"
string YQ="Sound\\Music\\mp3Music\\Human3.mp3"
string GR="Sound\\Music\\mp3Music\\BloodElfTheme.mp3"
string HR="Sound\\Music\\mp3Music\\DarkAgents.mp3"
string IR="Sound\\Music\\mp3Music\\TragicConfrontation.mp3"
string OR="Sound\\Music\\mp3Music\\SadMystery.mp3"
string XR="Sound\\Music\\mp3Music\\IllidansTheme.mp3"
string YR="Sound\\Music\\mp3Music\\PH1.mp3"
trigger ZR=null
trigger DS=null
trigger ES=null
trigger ZI=null
trigger vA=null
trigger eA=null
trigger xA=null
trigger FS=null
trigger VA=null
trigger EA=null
trigger OA=null
trigger RA=null
trigger GS=null
trigger HS=null
trigger JS=null
trigger cA=null
trigger CA=null
trigger dA=null
trigger DA=null
trigger fA=null
trigger FA=null
trigger gA=null
trigger GA=null
trigger LA=null
trigger mA=null
trigger MA=null
trigger PA=null
trigger SA=null
trigger TA=null
trigger KS=null
trigger wA=null
trigger MS=null
trigger OS=null
boolean zA=false
unit vN=null
real YS=0
integer array BS
constant real VN=1
constant real EN=4
constant real XN=4
constant real ON=$96
real CS=1.
boolean bN=false
boolean LS=false
boolean DT=false
integer array ET
real dN
unit DN
unit fN
integer FN
group gN
unit FT
integer IT
integer pN=0
real SN
real tN
unit JT
unit KT
real MT
boolean array OT
integer array vb
boolean array eb
boolean array ob
boolean array ib
boolean array ab
real array nb
integer array PT
boolean array QT
boolean array Ob
boolean array Ab
boolean array Nb
integer bb
integer Bb
integer cb
string array Cb
boolean array db
boolean array RT
boolean array fb
integer Fb=0
boolean gb=true
string array TT
integer UT=0
string Lb
boolean W3I=true
unit array R1B
real mb
real array Mb
integer array pb
integer array Qb
integer Tb=1
constant real wb=$F
boolean VT=false
boolean WT=false
boolean XT=false
boolean ZT=false
boolean AT=false
boolean BT=false
boolean CT=false
boolean LT=false
boolean EU=false
boolean FU=false
boolean DG0=false
integer array IU
player array JU
integer array MU
integer array NU
constant real OU=55
integer EB=1747990090
real OB
real AB
unit BB
unit cB
group CB=null
string dB=null
real DB
integer fB
unit FB
unit gB
real lB
unit PU
real QU
unit MB
real pB
unit PB
destructable SB=null
unit TB=null
real wB=0
constant real RU=26
constant real yB=550
constant real zB=500
group ZB
unit vc
real ec
group WXI
unit WYI
real WJI
integer xc
integer ac
unit nc=null
unit Vc=null
integer array SU
integer array ZU
integer array AU
integer array BU
string array CU
integer array LU
integer array DV
integer EV=0
integer FV
integer JV
integer MV
integer NV
integer OV
integer QV
integer SV
integer TV
integer UV
integer XV
integer AV
integer BV
integer CV
integer LV
integer EW
integer HW
integer NW
integer OW
integer QW
integer RW
integer TW
integer UW
integer VW
integer YW
integer ZW
integer GX
integer NX
integer RX
integer SX
integer WX
integer YX
integer ZX
integer AX
integer GY
integer HY
integer SY
integer UY
integer ZY
integer DZ
integer EZ
integer HZ
integer NZ
integer OZ
integer RZ
integer UZ
integer XZ
integer AZ
integer BZ
integer CZ
integer IA
integer JA
integer NA
integer QA
integer WA
integer YA
integer HJ0
integer HJ1
integer ZA
integer BA
integer GB
integer JB
integer QB
integer RB
integer VB
integer WB
integer YB
integer LB
integer EC
integer FC
integer GC
integer JC
integer NC
integer OC
integer PC
integer QC
integer TC
integer VC
integer WC
integer XC
integer YC
integer ZC
integer AC
integer BC
integer CC
integer LC
integer H3
integer M3
integer R03
integer R05
integer R06
integer R0A
integer R10
integer R11
integer R7u
integer R7t
integer N3
integer R3
integer U3
integer W3
integer Y3
integer Z3
integer B3
integer C3
integer E6
integer F6
integer FF6
integer G6
integer H6
integer N6
integer S6
integer V6
integer W6
integer A6
integer DL
integer HL
integer OL
integer RL
integer RLL
integer R00
integer R01
integer WL
integer ZL
integer AL
integer LL
integer D1
integer E1
integer F1
integer H1
integer J1
integer O1
integer P1
integer Q1
integer R1
integer T1
integer U1
integer V1
integer X1
integer A1
integer D0
integer E0
integer J0
integer N0
integer O0
integer R0
integer T0
integer X0
integer Y0
integer B0
integer C0
integer F5
integer G5
integer J5
integer M5
integer N5
integer R5
integer S5
integer T5
integer W5
integer A5
integer B5
integer C5
integer L5
integer E2
integer F2
integer H2
integer P2
integer R2
integer S2
integer T2
integer W2
integer X2
integer Z2
integer D44
integer D74
integer D84
integer D94
integer DD4
integer DE4
integer DF4
integer DG4
integer DH4
integer DI4
integer DJ4
integer DK4
integer DM4
integer DN4
integer DO4
integer DP4
integer DQ4
integer DR4
integer DS4
integer DT4
integer DU4
integer DV4
integer DW4
integer DX4
integer DY4
integer DZ4
integer DA4
integer DB4
integer DC4
integer D34
integer D64
integer DL4
integer D04
integer D54
integer D24
integer D_4
integer E44
integer EZA
integer EZB
integer EZZ
integer EZY
integer R02
integer E74
integer E84
integer E94
integer ED4
integer EE4
integer EEO
integer EF4
integer EG4
integer EH4
integer EI4
integer EJ4
integer EK4
integer EM4
integer R35
integer R41
integer EN4
integer EO4
integer EP4
integer EQ4
integer ER4
integer ES4
integer ET4
integer EU4
integer EV4
integer EW4
integer EX4
integer EY4
integer EZ4
integer EA4
integer EB4
integer EC4
integer E34
integer E64
integer EL4
integer E14
integer E04
integer E54
integer E24
integer E_4
integer F44
integer F74
integer F84
integer F94
integer FD4
integer FE4
integer FF4
integer FG4
integer FH4
integer FI4=-1
boolean J40=true
integer array FJ4
integer array FK4
integer array FM4
integer array FN4
integer array FO4
integer array FP4
integer FQ4=0
integer FR4
integer FS4
integer FT4
integer FU4
integer FV4
integer FW4
integer FX4
integer FY4
integer FZ4
integer FA4
integer FB4
integer FC4
integer F34
integer F64
integer FL4
integer F14
integer F04
integer F54
integer F24
integer F_4
integer G44
integer G74
integer G84
integer G94
integer GD4
integer GE4
integer GG4
integer GH4
integer GI4
integer GJ4
integer GK4
integer GM4
integer GN4
integer GO4
integer GP4
integer GQ4
integer GR4
integer GS4
integer GT4
integer GU4
integer GV4
integer GW4
integer GX4
integer GY4
integer GZ4
integer GA4
integer GB4
integer G34
integer G64
integer GL4
integer G14
integer G04
integer G54
integer G24
integer R12
integer R13
integer R15
integer R16
integer R1A
integer R1C
integer R1H
integer R1I
integer R1J
integer R1K
integer R1L
integer R1M
integer R1N
integer R1O
integer R1P
integer R1Q
integer R21
integer R3B
integer Rgg
player Sh
boolean Th=false
boolean Uh=false
player G_4
unit H44
unit zh
integer array Zh
integer array H74
unit eH
boolean H84=true
boolean oH=false
trigger H94
integer HD4=0
integer HE4=0
integer HF4=0
integer HG4=0
integer HH4=0
integer HI4=0
integer R4z=0
integer R6c=0
boolean NH=false
boolexpr bH=null
trigger BH
trigger cH
constant real HJ4=40
integer array dH
integer array HK4
integer FH
integer GH
integer hH
integer jH
integer JH
integer kH
integer lH
integer LH
integer MH
rect pH=null
integer array HM4
integer array HN4
integer array HO4
integer array HP4
integer array HQ4
integer array HR4
integer array HS4
integer array HT4
integer array HU4
integer array HV4
string array HW4
string array HX4
string array HY4
string array HZ4
trigger array rj
trigger array aj
trigger array nj
trigger array Vj
trigger array Ej
trigger array Rj
trigger array Aj
trigger array Nj
boolean array bj
item HA4=null
integer HB4=0
integer HC4=0
string Dj="|c00ff0303"
string fj="|c00ff0303"
string gj="|c000042ff"
string Gj="|c00646464"
string Hj="|c00ffffff"
boolean jj=false
boolean Jj=false
boolean lj=false
boolean H34=false
integer array H64
integer array HL4
integer array H14
integer array C9I
integer array CS1
trigger H04=null
trigger Tj=null
trigger Uj=null
trigger wj=null
trigger zj=null
trigger Zj=null
trigger vJ=null
trigger eJ=null
trigger xJ=null
trigger oJ=null
trigger iJ=null
trigger H54=null
trigger nJ=null
trigger do=null
trigger VJ=null
trigger dq=null
trigger H24=null
trigger dr=null
trigger dR=null
trigger dT=null
trigger du=null
trigger dU=null
trigger dX=null
trigger dY=null
trigger dZ=null
trigger d0=null
trigger H_4=null
trigger I44=null
trigger d3=null
trigger d4=null
trigger d5=null
trigger I74=null
trigger d8=null
trigger d9=null
trigger XJ=null
trigger Dc=null
trigger DC=null
trigger OJ=null
trigger DF=null
trigger RJ=null
trigger IE4=null
trigger Dk=null
trigger DK=null
trigger Dm=null
trigger NJ=null
trigger Do=null
trigger DO=null
trigger Dp=null
trigger DQ=null
unit BJ=null
unit cJ=null
unit CJ=null
unit dJ=null
unit DJ=null
unit fJ=null
unit FJ=null
unit gJ=null
unit GJ=null
unit GJJ=null
unit HJ=null
unit JJ=null
unit lJ=null
unit LJ=null
unit MJ=null
unit PJ=null
unit qJ=null
unit QJ=null
unit SJ=null
unit tJ=null
unit IF4=null
unit UJ=null
unit wJ=null
unit WJ=null
unit yJ=null
unit zJ=null
unit ZJ=null
unit vk=null
unit ek=null
unit xk=null
unit ok=null
unit ik=null
unit ak=null
unit nk=null
unit Vk=null
unit Ek=null
unit Ok=null
unit Rk=null
unit Ak=null
unit Nk=null
unit bk=null
unit Bk=null
unit ck=null
unit Ck=null
unit dk=null
unit fk=null
unit Fk=null
unit gk=null
unit Gk=null
unit jk=null
unit Jk=null
unit lk=null
unit Lk=null
unit pk=null
unit Pk=null
unit qk=null
unit Qk=null
unit Sk=null
unit tk=null
unit Uk=null
unit wk=null
unit Wk=null
unit yk=null
unit zk=null
unit vK=null
unit eK=null
unit xK=null
unit aK=null
unit VK=null
unit EK=null
unit XK=null
unit OK=null
unit OKK=null
unit AK=null
unit NK=null
unit bK=null
unit BK=null
unit cK=null
unit CK=null
unit dK=null
unit fK=null
unit FK=null
unit gK=null
unit GK=null
unit JK=null
unit lK=null
unit LK=null
unit PK=null
unit qK=null
unit QK=null
unit SK=null
unit TK=null
unit wK=null
unit WK=null
unit zK=null
unit ZK=null
unit vl=null
unit el=null
unit xl=null
unit ol=null
unit rl=null
unit al=null
unit Vl=null
unit El=null
unit Xl=null
unit Ol=null
unit Rl=null
unit Al=null
unit Nl=null
unit bl=null
unit Bl=null
unit cl=null
unit Cl=null
unit dl=null
unit array fl
unit array Fl
unit array gl
integer Hl=0
trigger array Dx
real array DX
integer Dy=0
boolean array IG4
real array Jl
integer array ll
integer array Ll
integer Ml=0
string array Pl
integer array ql
integer Ql=0
integer sl=0
integer IH4
integer tl
integer Tl
real IJ4
real IK4
real IM4
real Zl
real vL
real eL
unit IN4
unit IP4
trigger eC
group IQ4
group aL
player IR4
boolean EL
string IS4
unit IT4=null
region IU4
integer array NL
integer array bL
integer array BL
integer array cL
integer CL=0
gamecache IV4
weathereffect fL
weathereffect FL
rect IW4
constant playercolor gL=ConvertPlayerColor(0)
constant playercolor hL=ConvertPlayerColor(6)
constant playercolor JL=ConvertPlayerColor($C)
real IX4=-7168
real IY4=-7264
real ML=-6816
real PL=-7264
real QL=-7200
real SL=-6752
real tL=-7200
real TL=-6944
real UL=-6560
real wL=-7264
real zL=-6944
real vm=-6368
real em=-7328
real xm=-6368
real om=-6816
real rm=-6386
real im=-7200
real am=-6368
real Vm=-6688
real Em=-6368
real Xm=-7328
real Om=-5984
real Am=-5632
real Nm=-6144
real bm=-6112
real Bm=$620
real cm=-$5E0
real Cm=-$720
real dm=4960
real fm=-6752
real Fm=-6112
real hm=-$4E0
real Jm=-$DA0
real lm=-$CE0
real Mm=-544
real pm=-6688
real Pm=-6368
real Qm=-4256
real Tm=-4448
real Um=-4960
real wm=-$EA0
real Wm=-6816
real zm=-5600
real vM=-5728
real eM=-5280
real oM=-6112
real rM=-6080
real iM=-4480
real aM=-4416
real nM=-5312
real VM=-$FC0
real XMM=-7040
real AMM=-6656
real bM=-4480
real BMM=-4864
real cM=-4992
real dM=-$FC0
real fM=-6528
real gM=-5792
real hM=-5408
real HM=-6624
real JM=-5088
real kM=-5344
real lM=-$F60
real pM=-4832
real sM=-4384
real tM=-$F60
real wM=-5216
real zM=-5088
real vp=-5536
real ep=-4896
real op=-6240
real rp=-$E20
real ap=-5728
real Vp=-4512
real Ep=-7072
real Xp=-5472
real Rp=-4704
real Ap=-4512
real bp=-5856
real Bp=-6080
real cp=-5120
real Cp=-4544
real dp=-6528
real fp=-6400
real Fp=-5696
real gp=-5248
real Hp=-6848
unit IZ4
unit I34
unit IL4
unit I04
unit I_4
unit J44
unit J74
unit UJ74
unit J84
unit J94
unit JD4
unit JE4
unit JF4
unit JG4
unit JH4
unit JI4
unit JJ4
unit JK4
unit JM4
unit JN4
unit JO4
unit JP4
unit JQ4
unit JR4
unit JS4
unit JT4
unit JU4
unit JV4
unit JW4
unit JX4
unit fP
unit FP
unit lP
unit LP
unit MP
unit pP
unit PP
unit qP
unit QP
unit sP
unit tP
unit WP
unit zP
unit vq
unit eq
real JY4=6272
real JZ4=5504
real rq=6464
real iq=5120
real aq=5952
real Eq=5568
real Rq=6080
real Aq=5568
real Nq=6464
real bq=4736
real Bq=5920
real cq=6098
real Cq=5920
real Dq=6482
real fq=5920
real Fq=5970
real Hq=5920
real jq=6354
real Jq=5920
real Mq=5842
real qq=5920
real Qq=6226
real Sq=4992
real tq=4544
real Uq=-4704
real zq=5920
real Zq=$420
real vQ=-$A0
real eQ=6048
real xQ=-$820
real oQ=32
real iQ=5856
real aQ=$960
real EQ=$6A0
real OQ=6112
real RQ=-96
real AQ=$C60
real NQ=5920
real bQ=$E20
real BQ=$CE0
real cQ=6048
real CQ=$AE0
real fQ=4640
real FQ=4576
real hQ=5088
real HQ=4192
real lQ=$EC0
real LQ=5888
real mQ=4096
real MQ=$D40
real PQ=6208
real QQ=$CC0
real SQ=$DC0
real UQ=5376
real WQ=$EC0
real zQ=$F00
real ZQ=5696
real vs=$CC0
real es=$C60
real os=$FA0
real rs=4192
real as=5536
real ns=4128
real Vs=4512
real Es=4640
real Xs=$E60
real Rs=4832
real As=$C20
real Ns=5408
real bs=$A20
real Bs=5408
real cs=$CE0
real Cs=6112
real Ds=$FA0
real fs=$BE0
real Fs=5088
real Hs=6304
real js=$EA0
real Js=6304
real Ks=$EA0
real ls=$DC0
real Ls=4608
real ms=4096
real Ms=$A40
real ps=4096
real Ps=$A40
real Qs=4096
real Ss=$A40
unit JA4
unit JB4
unit zs
unit Zs
unit JC4
unit eS
unit oS
unit oSS
unit rS
unit aS
unit nS
unit VS
unit J34
unit J64
unit JL4
unit J14
unit J04
unit J54
unit J24
unit J_4
unit K44
unit K74
unit K84
unit K94
unit KD4
unit KE4
unit KF4
unit KG4
unit KH4
unit KI4
unit PS
unit QS
unit SS
unit tS
unit TS
unit US
unit WS
unit ZS
unit vt
unit et
unit xt
unit ot
unit rt
unit at
unit Vt
unit KJ4
unit KK4
unit KM4
unit KN4
unit KO4
unit KP4
unit KQ4
unit KR4
unit KS4
unit KT4
unit array KU4
real array KV4
real array KW4
player KX4
player KY4
string array KZ4
integer array KA4
integer array KB4
integer array KC4
integer array K34
integer array K64
integer KL4
integer K14
integer K04
integer K54
integer array K24
integer K_4
integer array M44
integer M74
integer array M84
integer M94
integer array MD4
integer ME4
integer array MF4
integer MG4
string array MH4
integer array MI4
string array MJ4
string array MK4
string array MM4
string array MN4
string array MO4
unit MP4
unit MQ4
unit MR4
unit MS4
unit MT4
unit MU4
unit MV4
unit MW4
unit MX4
unit MY4
unit MZ4
unit MA4
integer array MB4
integer MC4=0
boolean M34=false
integer M64=0
trigger ML4
boolean M14=false
trigger M04
trigger M54
trigger M24
real M_4=0
real N44=0
hashtable N74
timer array N84
integer array N94
integer array ND4
multiboard NE4
integer array NF4
integer array NG4
player array NH4
integer NI4=0
string Fx="|c00FF6600"
multiboard NJ4
trigger NK4
unit array NM4
real array NN4
boolean array NO4
integer NP4=0
unit array qu
real array Qu
boolean array Su
integer array NQ4
integer array NR4
integer array NS4
integer array NT4
integer array NU4
integer array NV4
unit NW4=null
boolean NX4=true
integer NY4=1
trigger NZ4
integer NA4=0
integer NB4
integer NC4
integer array N34
integer array N64
integer NL4
integer N14
integer array N04
boolean N54=false
unit N24=null
unit N_4=null
group KU
boolean O44=true
boolean O74=false
boolean O84=false
integer O94
player OD4
trigger OE4=null
trigger OF4=null
integer OG4
integer TU=1093683285
integer vw=1093683288
trigger OH4
region ow
region oww
integer array gD
unit array rw
unit OI4=null
unit OJ4
region Ew
integer array Rw
integer OK4=1093742918
integer OM4=1093742917
integer ON4=1093686067
integer OO4=1093742916
integer OP4=1093742919
integer OQ4=1093742920
integer OR4=1093815369
integer OS4=1093742914
integer OT4=1093742913
integer OU4=1093686066
integer OV4=1093742905
integer OW4=1093742915
integer OX4=1093742904
integer OY4=1093815368
integer OZ4=1093682777
unit Mw
group pw
unit qw
unit Qw
boolean tw=false
boolean Uw=false
boolean zw=false
boolean vW=false
boolean eW=false
boolean oW=false
boolean rW=false
boolean iW=false
unit array OA4
timer array gg
integer array FI
boolean OB4=false
real array Fj
integer gi=0
real array OC4
item array O34
integer O64=0
boolean array AW
boolean array OL4
leaderboard array gm
boolean bW=true
weathereffect BW
boolean array cW
boolean array CW
integer dW=0
integer array DW
integer array fW
integer array FW
integer array hW
integer array LW
integer array mW
integer array MW
integer array pW
integer array PW
string O14="No Mode"
unit gr
boolean O04=false
boolean O54=false
boolean Fz=false
integer array O24
constant real O_4=-6950
constant real P44=6750
boolean P74=false
boolean F0=false
boolean P84=false
boolean gH=false
boolean P94=false
integer PD4
boolean PE4=false
boolean oy=true
boolean PF4=false
boolean PG4=false
boolean PH4=false
boolean PI4=false
boolean PJ4=false
boolean Ny=false
boolean PK4=false
boolean PM4=false
unit array PN4
integer Ly=1093742670
integer my=1093686064
integer My=1093742671
integer py=1093742672
real PO4
real PP4
unit PQ4
trigger PR4
integer PS4=1093678422
boolean PT4=false
boolean uy=false
boolean vY=true
boolean Gs=false
boolean PU4=false
boolean PV4=false
boolean GT=false
boolean GU=false
boolean Gv=true
boolean Gw=true
boolean PW4=true
boolean PX4=true
boolean PY4=false
boolean array GZ
boolean array G0
integer G1=0
integer G2=0
integer G3=-1
integer G4=-1
boolean PZ4=true
boolean PA4=true
integer PB4=0
integer PC4=0
integer P34=0
integer P64=0
integer PL4=0
integer P14=0
integer P04=0
integer P54=0
integer P24=4
integer P_4=5
integer Q44=5
integer hD=0
integer hE=0
integer hF=0
integer array hG
integer array eY
integer array hj
integer xY=0
integer oY
integer rY
real aY=0
real VY=0
real EY=0
real XY=0
real OY=0
real IY=0
real AY=0
real bY=0
real BY=0
real cY=0
real CY=0
real DY=0
real fY=0
real FY=0
real JY=0
real kY=0
real lY=0
real mY=0
real MY=0
real PY=0
real QY=0
real sY=0
real tY=0
real TY=0
real uY=0
real wY=0
real YY=0
real vz=0
constant real Q74=90
boolean xz=false
boolean oz=false
boolean rz=false
boolean az=false
boolean nz=false
boolean Vz=false
boolean Ez=false
boolean Xz=false
timer Q84
boolean Q94=false
integer QD4=90
boolean QE4=false
real Bz=.0
real array hq
unit hr=null
unit hS=null
unit hx=null
unit hy=null
unit hz=null
unit hZ=null
unit h0=null
unit array h4
unit array h7
unit array h8
unit array h9
location Ha
location HA
location Hb
location HB
location Hc
location array HC
rect cz=null
real QF4
real QG4
real QH4
real QI4
real QJ4
real QK4
player QM4
rect QN4=null
rect QO4=null
rect QP4=null
rect Cz=null
rect QQ4=null
rect QR4=null
rect QS4=null
rect He=null
player QT4=null
player QU4=null
player QV4=null
player QW4=null
force QX4=CreateForce()
boolean array QY4
trigger HK=CreateTrigger()
trigger QZ4=CreateTrigger()
trigger QA4=CreateTrigger()
trigger Hn=CreateTrigger()
trigger HN=CreateTrigger()
trigger Ho=CreateTrigger()
trigger QB4=CreateTrigger()
trigger QC4=CreateTrigger()
trigger Q34
trigger Q64
trigger QL4
trigger Q14
trigger array Q04
item Hu
destructable H0
group H8=CreateGroup()
group H9=CreateGroup()
group iA=CreateGroup()
group Q54=CreateGroup()
group iC=CreateGroup()
group iE=CreateGroup()
group iF=CreateGroup()
group ig=CreateGroup()
group iG=CreateGroup()
group iH=CreateGroup()
group ii=CreateGroup()
group Uz=CreateGroup()
group ij=null
boolexpr Q24=null
boolexpr iL
boolexpr Q_4
boolexpr ip
boolexpr iP
integer R44=StringHash("PBMN|AI")
integer array R74
integer array R84
real Wz=.0
real Yz=.0
group Zz=null
unit vZ
integer R94
unit oZ
unit RD4
unit RE4
unit RF4
group RG4
real VZ
unit RH4
unit RI4
group RJ4
integer array RK4
integer array RM4
integer array RN4
integer array RO4
integer array RP4
integer array RQ4
integer array RR4
integer array aRR4
integer array RS4
integer array RSS4
integer array ARS4
integer array ARO4
integer array R5a
integer array R6d
unit RT4
real RU4
unit FZ
real gZ
integer jZ
integer JZ
unit LZ
real mZ
integer MZ
player QZ
unit sZ
integer tZ
player TZ
integer RV4
unit array wZ
integer WZ
unit array YZ
unit array zZ
integer ZZ
unit array v0
unit e0
unit o0
unit array RW4
integer n0
boolean V0=false
unit RX4
integer RY4
boolean RZ4=false
boolean array A0
boolean RA4=false
integer RB4
unit RC4
real R34
integer R64
unit RL4
real R14
real j0
real K0
integer l0
unit m0
integer M0
group p0
unit Q0
real R04
group t0
integer R54
unit U0
real R24
integer array W0
integer array z0
real Z0
unit v1
unit R_4
real o1
integer a1
integer array n1
boolean S44=false
unit S74
unit N1
integer S84
real B1
real C1
unit S94
integer SD4
integer SE4
integer m1
group M1
unit SF4
real SG4
integer SH4
integer SI4
integer SJ4
unit array SK4
boolean w1=false
boolean W1=false
unit Y1
unit z1
real Z1
real v2
real SM4
real o2
boolean a2=false
boolean SN4=false
force V2=null
integer array SO4
integer array SP4
real A2
real N2
unit b2
unit B2=null
unit C2=null
unit D2=null
unit SQ4
integer array SR4
unit array SS4
integer l2=0
integer ST4
constant real M2=6
constant real p2=600
unit SU4
trigger SV4
boolean array U2
real array SW4
real array SX4
real array SY4
unit array SZ4
integer array SA4
integer array SB4
integer a3
unit n3
integer V3
unit E3
integer X3
unit A3
region SC4
unit S34
unit S64
real SL4
real S14
unit array D3
boolean f3=false
integer F3=0
string array j3
constant real L3=8
unit S04
integer S54
boolean p3=false
player array S24
real array S_4
real array T44
real array T74
integer T84=-1
constant real e4=25
constant real o4=575
region T94
integer array TD4
integer TE4=0
integer array TF4
integer array TG4
integer array TH4
integer array N4
integer array TI4
boolean B4=false
integer TJ4
integer array TK4
boolean array TM4
group array TN4
integer TO4=0
integer TP4=0
boolean TQ4=false
unit TR4
unit TS4
real TT4
real TU4
real TV4
real array TW4
real array TX4
unit TY4
boolean TZ4=false
boolean TA4=false
boolean TB4=false
boolean TC4=false
real array T34
string array T64
boolean TL4=false
boolean T14=false
integer array T04
real array T54
real array T24
boolean array T_4
item array U44
item array U74
item array U84
item array U94
boolean array UD4
boolean array UE4
boolean array UF4
integer UG4
integer UH4=$A
boolean array UI4
boolean array UJ4
unit UK4
unit UM4
unit UN4
unit UO4
unit UP4
unit UQ4
real UR4
real US4
real UT4
real UU4
constant real UV4=300
constant real UW4=20
unit UX4
unit UY4
integer UZ4
group UA4
real UB4
real UC4
integer U34
integer U64
integer UL4
region U14
region U54
real U24
unit U_4
boolean V44=false
sound V74=null
sound V84=null
sound V94=null
sound VD4=null
sound VE4=null
unit VF4
group VG4
integer array VH4
integer array EV0
boolean VI4=false
unit VJ4
sound VK4
sound VM4=null
string VN4
string VO4
string VP4
string VQ4
sound VR4=null
sound VS4=null
unit VT4
unit VU4
unit VV4
real VW4
real VX4
real VY4
unit VZ4
real VA4
real VB4
unit VC4
real V34
real V64
real VL4
boolean V14=false
boolean array V04
destructable V54
real V24
real V_4
real W44
real W74
real W84
real W94
real WD4
real WE4
unit WF4
integer WG4
unit WH4
integer array WI4
integer array WJ4
integer array WK4
integer array WM4
integer WN4
player WO4
region WP4=null
region WQ4=null
region WR4=null
region WS4=null
trigger WT4=null
trigger WU4=null
real WV4
real WW4
trigger WX4=null
boolean WY4=false
sound WZ4=null
sound WA4=null
sound WB4=null
unit WC4=null
unit W34=null
unit W64=null
group WL4
integer W14
unit W04
constant integer W54=$578
constant real W24=$514
constant real W_4=20
constant real X44=20
constant real X74=20
integer X84
unit X94
group XD4
real XE4
real XF4
unit XG4
integer XH4
unit XI4
unit XJ4
unit XK4
integer XM4
group XN4
group XO4
unit XP4
unit XQ4
unit XR4
integer XS4
real XT4
real XU4
real XV4
integer XW4
destructable array XX4
destructable array XY4
destructable array XZ4
integer XA4=0
integer XB4=0
unit XC4
integer X34
constant real X64=6
player XL4
boolean X14=false
boolean X04=false
unit X54
boolean X24=false
player X_4=null
player Y44=null
integer array Y74
unit Y84
real Y94
integer array YD4
group YE4
group YF4
unit YG4
integer YH4
trigger YI4=null
string YJ4=""
boolean YK4=false
unit YM4
unit YN4
unit YO4
group YP4
group YQ4
group YR4
integer YS4=0
unit YT4
constant real YU4=3
unit YV4
unit YW4
unit YX4
real YY4
group YZ4
integer YA4
sound YB4=null
sound YC4=null
sound Y34=null
sound Y64=null
sound YL4=null
sound Y14=null
sound Y04=null
sound Y54=null
sound GOO=null
sound BGO=null
unit Y24
integer Y_4
group Z44
integer Z74
unit Z84
unit Z94
unit ZD4
group ZE4
integer ZF4
unit ZG4
unit ZH4
unit ZI4
unit ZJI
group ZJ4
real ZK4
integer array ZM4
integer ZN4=0
integer ZO4
constant real ZP4=20
constant real ZQ4=7
constant real ZR4=300
unit ZS4
real ZT4
unit ZU4
unit ZX4
real ZY4
unit ZZ4
real ZA4
real ZB4
real ZC4
unit Z34
real Z64
real ZL4
group Z14
unit Z04
unit Z54
real Z24
real Z_4
real A44
trigger A74
integer A84=0
boolean A94=false
integer array AD4
boolean AE4
boolean AF4=false
boolean AG4=false
integer array AH4
integer array AI4
integer AJ4
integer AK4
integer array AM4
integer array AN4
integer AO4=0
integer AP4=0
integer array AQ4
integer array AR4
integer AS4=0
integer AT4=0
integer AU4=0
multiboard AV4
image AW4
image AX4
image AY4
image AZ4
boolean AA4=false
image AB4=null
real AC4=-7030
real A34=6966
unit A64
integer AL4
player A14
boolean A04=false
constant integer A54=$D00C4
constant integer A24=$D022E
constant integer A_4=$D0277
unit B44=null
unit B74=null
unit B84=null
unit B94=null
integer BD4=0
integer aBD4=0
integer BE4=0
integer BEE4=0
integer ABE4=0
integer ABO4=0
constant real BF4=16
constant real BG4=5
constant real BH4=15
constant real BI4=4
integer BOI
unit B2I
region BKDD  
rect BKDD1  
rect BKDD2  
rect BKDD3  
rect BKDD4 
integer BJ4
integer BK4
real BM4
real BN4
unit BO4
integer array BV4
constant real BW4=7
unit array BZ4
integer array BA4
integer array BB4
integer BC4=0
integer B34=0
integer array B64
integer array BL4
unit array B14
integer B04=0
boolean B54=true
boolean array B24
boolean B_4=false
boolean CK4=false
boolean CM4=true
unit CN4=null
trigger CP4=null
trigger CQ4=null
trigger CR4=null
timer CS4=null
real array CU4
constant integer CL4=$B4
hashtable C_4
boolean L44=false
real L74=1
real L84=1
string L94=""
real LD4=0
real LE4=0
widget LF4=null
boolean LG4=false
player LH4=null
force LI4=null
item LJ4=null
item LK4=null
integer LM4=0
unit LN4=null
real LO4=0
constant real LP4=$C8
trigger LQ4=null
string LR4=""
boolean LS4=true
boolean LT4=false
integer array LU4
unit array LV4
real array LW4
boolexpr LX4=null
integer array LY4
integer LZ4=0
integer LA4=1
constant integer LB4=8-1
boolean LC4=true
boolean L34=true
real L64=.0
constant integer LL4=425+$C8
unit L14=null
constant string L04="|c00dd8dff"+"  - AI|r"
constant string L54="|c0020c060"+"经验|r"
constant string L24="|c00ffcc60"+"金钱|r"
constant real L_4=8
real D47=120.
integer D77
boolean D87=false
unit D97
integer DD7
boolean DE7=false
unit DF7
unit DG7
location DH7=Location(0,0)
unit DI7
boolean DJ7=false
boolean DK7=false
boolean DM7=false
unit DN7=null
unit DO7=null
real DP7=99999999.
trigger DQ7=null
unit DR7
integer DS7
integer DT7
unit DU7
real DV7
real DW7
real DX7
unit DY7
integer array DZ7
boolean DA7=true
unit DB7
integer DC7
unit D37
group D67
real DL7
integer array D17
integer array D07
integer D57
integer D27
integer D_7
unit E47
integer E77
integer E87
boolean E97=false
unit ED7
real EE7
group EF7
unit EG7
integer EH7
constant real EI7=300
integer EJ7
integer EK7
integer array EM7
group EP7
unit EQ7
integer ER7
group KII
unit K1I
integer KOI
unit ES7
integer ET7
unit EU7
integer EV7
leaderboard array EW7
integer EX7
integer EY7=0
integer EZ7=0
integer array EA7
integer array EB7
integer EC7=-1
integer array E37
sound E67=null
unit EL7
group E17
boolean array E07
integer E57=600
integer E27=360
integer E_7
constant real F47=5
unit F77
real F87
unit F97
unit FD7
integer FE7
group FF7
unit FG7
real FH7
integer FI7
unit FJ7
real FK7
real FM7
real FN7
unit FO7
integer FP7
integer FQ7
boolean FR7=false
real FS7
unit FT7
constant real FU7=4
group FV7
constant real FW7=20
integer FX7
unit FY7
integer FZ7
unit FA7
unit FB7
real FC7=1.35
real F37=600
group F67
trigger FL7
unit F17
unit F07=null
constant real F57=6
constant real F27=6
constant real F_7=50
integer G47
integer G77
item array G87
integer array G97
integer array GD7
boolean array GE7
player GF7=null
integer GG7=0
constant integer GH7=$7D0
string array GI7
integer array GJ7
texttag array GK7
string array GM7
integer GN7=0
timer GO7=null
timer GP7=null
unit GQ7=null
integer GR7=0
integer GS7=0
unit GT7=null
integer GU7=0
unit GV7=null
integer array GW7
unit GX7=null
unit GY7=null
boolean GZ7=true
unit GA7=null
unit GB7=null
boolean GC7=false
boolean array G37
integer G67=0
group GL7=CreateGroup()
unit G17=null
unit G07=null
unit array G57
real G27=.0
real G_7=.0
boolexpr H47=null
trigger H77=CreateTrigger()
constant integer H87=StringHash("listtop1")
constant integer H97=StringHash("listtop2")
constant integer HD7=StringHash("attack")
hashtable HE7=InitHashtable()
unit array HF7
integer array HG7
integer HH7=0
integer HI7=0
integer HJ7=0
real HK7
integer HM7=0
integer HN7=0
trigger array HO7
integer HP7=0
group HQ7=null
integer HR7=0
timer R7k=null
boolean R6A=false
endglobals
function GetLastEnumedGroup takes nothing returns group
return HQ7
endfunction
function R7i takes nothing returns nothing
set R6A=false
endfunction
function R7j takes real r returns nothing
if R7k==null then
set R7k=CreateTimer()
endif
if r>TimerGetRemaining(R7k)then
call TimerStart(R7k,r,false,function R7i)
endif
set R6A=true
endfunction
function Xav takes nothing returns nothing
local timer t=GetExpiredTimer()
call UnitRemoveAbility(LoadUnitHandle(L7,GetHandleId(t),0),'BEim')
call FlushChildHashtable(L7,GetHandleId(t))
call DestroyTimer(t)
set t=null
endfunction
function Xnv takes nothing returns nothing
local timer t=CreateTimer()
call SaveUnitHandle(L7,GetHandleId(t),0,GetTriggerUnit())
call TimerStart(t,0,false,function Xav)
set t=null
endfunction
function R3A takes unit u returns nothing
if LoadReal(L7,GetHandleId(u),'AItb')+$C<TimerGetElapsed(W)then
call UnitRemoveAbility(u,'Bdet')
endif
endfunction
function R1X takes integer OR7,integer a11,integer a22,integer a33,integer a44,integer a55 returns nothing
call SaveInteger(R1Y,OR7,1,a11)
call SaveInteger(R1Y,OR7,2,a22)
call SaveInteger(R1Y,OR7,3,a33)
call SaveInteger(R1Y,OR7,4,a44)
call SaveInteger(R1Y,OR7,5,a55)
endfunction
function R1W takes nothing returns nothing
call R1X(1214344551,1093678938,1093677402,1093809742,1096904043,1093815628)
call R1X(1214409837,0,1093742680,1093742932,1093742898,1093684818)
call R1X(1215130471,1093677361,1093678167,1093679155,1093679160,1096904043)
call R1X(1215324524,1095264354,1095263347,1095266917,1095262564,0)
call R1X(1331850337,1095726955,1095721842,1095724393,1095726967,0)
call R1X(1332109682,1093810505,1093808694,1096904043,1093678134,1093678149)
call R1X(1332963428,1093677649,1093683019,1093816137,0,1096904043)
call R1X(1333027688,1093682248,1093682252,1093686091,1093682250,1096904043)
call R1X(1164207469,1096904043,1093684057,1093677618,1095066220,1093682483)
call R1X(1164209517,1095069026,1095068013,1095066998,1095069029,0)
call R1X(1164666213,1096904043,1093677877,1093678679,1093678678,0)
call R1X(1164799855,1093682264,1093677378,1093682263,1093682265,1096904043)
call R1X(1165451634,1093687629,1093685324,1093677904,1093677905,1096904043)
call R1X(1432580716,1093744977,1093682009,1096904043,1093684300,1093681754)
call R1X(1432642913,1093684819,1093684551,1093683507,1093684550,1096904043)
call R1X(1432646245,0,1093679173,1093677899,1096904043,1093677640)
call R1X(1433168227,1096904043,1093678387,1093678918,1093679186,1093678420)
call R1X(1315074670,1093685570,1096904043,1093677625,1093677622,1093686851)
call R1X(1315988077,1093678669,1097032808,1093684568,1093684561,1096904043)
call R1X(1316252014,1093678645,1093678137,1093678405,1096904043,1093681745)
call R1X(1316122466,1095660409,1095656307,1095656807,1095660135,0)
call R1X(1315334514,1093682773,1093681746,1093810506,1093682521,1093684818)
call R1X(1164277353,1096904043,1093678929,1093751369,1093815130,1093683252)
call R1X(1164277357,1096904043,1093678929,1093751369,1093815130,1093683252)
call R1X(1164799603,1096904043,1093808453,1093677391,1095067246,1093752632)
call R1X(1214345830,1093679182,1093679190,1093682514,1093678657,1096904043)
call R1X(1214802796,1095264354,1095263347,1095266917,1095262564,0)
call R1X(1214931305,1096904043,1093748025,1093678147,1095262562,1093677906)
call R1X(1215063922,1093677895,1093677894,1096904043,1093812553,1093681996)
call R1X(1215128178,1096904043,1093677616,1093684789,1093683779,1093810503)
call R1X(1215324721,1095264354,1095263347,1095266917,1095262564,0)
call R1X(1215657064,1093750841,1093684291,1093677913,1096904043,1095657827)
call R1X(1215722344,1093684296,1093683512,1093682499,1096904043,1093684293)
call R1X(1215723364,1096904043,1093677633,1094934883,1093744463,1093683534)
call R1X(1315070563,1096904043,1093678135,1093678407,1093677131,1093684529)
call R1X(1331982964,1095722611,1095725926,1095721836,1095722353,0)
call R1X(1332179560,1093742660,'A2W7','A2W1',1093682242,1096904043)
call R1X(1332766568,1096904043,1093683510,1093686065,1093681974,1093682482)
call R1X(1332898670,1096904043,1093677136,1093685848,1093677360,1093677128)
call R1X(1432510828,1093751127,1093681985,1093681991,1093682004,1096904043)
call R1X(1433105516,1096904043,1093683511,1093744688,1093681713,1093747288)
call R1X(1433631084,1093678160,1096904043,1093677909,1093677907,1093678644)
call R1X(1315007329,1096904043,1093749073,1093678913,1093677108,1093681716)
call R1X(1162032439,1096904043,1093744435,1093684569,1093684563,1093677363)
call R1X(1162032951,1096904043,1093746995,1093679152,1093679446,1093684557)
call R1X(1311781175,1096904043,1093681733,1093808460,1093685040,1093748042)
call R1X(1429221451,1093678674,1093683248,1093678671,1093682753,1096904043)
call R1X(1313026096,1096904043,1095267426,1095721842,1096114550,1093677401)
call R1X(1430466872,1096904043,1093687349,1093684558,1093677646,1093679413)
call R1X(1162032181,1093679153,1096904043,1093682010,1093684299,1093683761)
call R1X(1311781174,1096904043,1093681733,1093808460,1093685040,1093748042)
call R1X(1430467634,1093684818,1093679412,1093742674,1093750608,1093684565)
call R1X(1211117637,1093677895,1093677894,1096904043,1093812553,1093681996)
call R1X(1429221430,1093687121,1093681739,1093681736,1096904043,1093681735)
call R1X(1160785970,1093748023,1093747792,1093748022,1093747023,1096904043)
call R1X(1211117639,1093677895,1093677894,1096904043,1093812553,1093681996)
call R1X(1211117643,1093684818,1093678664,1093678410,1093678658,1093681483)
call R1X(1429221431,1093683793,1096904043,1093678681,1093677381,1093677624)
call R1X(1212363833,1096904043,1093815125,1093809220,1093678643,1093678933)
call R1X(1430466609,1096904043,1093685559,1093684549,1093678145,1093810258)
call R1X(1212365106,1096904043,1093682266,1093684025,1093677130,1093685831)
call R1X(1429221432,1096904043,1093677893,1093687878,1093679411,1093677892)
call R1X(1311781199,1093684818,1093681461,1093681464,1093748038,1093681479)
call R1X(1429221424,1096904043,1093687351,1093679445,1093748789,1093815119)
call R1X(1311781171,1093684818,1093681461,1093681464,1093748038,1093681479)
call R1X(1211117616,1096904043,1093816142,1093677142,1093677139,1093816118)
call R1X(1328558160,1093682998,0,1093684818,1093684056,1093682766)
call R1X(1430466865,1096904043,1093677651,1093677879,1093751364,1093810508)
call R1X(1211117638,1093677895,1093677894,1096904043,1093812553,1093681996)
call R1X(1430468144,1093684818,1093679192,1093750341,1093686872,1093750337)
call R1X(1429221441,1093677903,1093677902,1093685847,1093678389,1096904043)
call R1X(1160785972,1093678161,1093677621,1093677872,1096904043,1095263841)
call R1X(1328558154,1096904043,1093750840,1093682996,1093682997,1093682515)
call R1X(1211117640,1096904043,1093679428,1093684564,'A2WJ',1093681987)
call R1X(1429221445,1093678647,1093678422,1093678640,1093677390,1096904043)
call R1X(1430468406,1093677635,1096904043,1093677645,1093685302,1093678899)
call R1X(1430468913,1096904043,1093678403,1093810507,1093683786,1093677876)
call R1X(1160785973,1093678642,1093678130,1093678388,1096904043,1093678129)
call R1X(1211117617,1096904043,1093744944,1093677387,1093814611,1093752648)
call R1X(1311781172,1093684818,1093681461,1093681464,1093748038,1093681479)
call R1X(1211117624,1093682774,1093684531,1093683024,1093682775,1096904043)
call R1X(1211117654,1093747028,1093682994,1093684560,1093747504,1096904043)
call R1X(1311781185,1093684314,1093815892,1093743692,1093684275,1096904043)
call R1X(1211117620,1096904043,1093677382,1093677623,1093744728,1093677392)
call R1X(1429221446,1093678665,1093678660,1093682764,1093678667,1096904043)
call R1X(1311781173,1093684818,1093681461,1093681464,1093748038,1093681479)
call R1X(1211117633,1093684310,1093810260,1093684308,1096904043,1093684045)
call R1X(1160786241,1093684815,1093684813,1093684820,1093684805,1096904043)
call R1X(1160786242,1093682776,1093684801,1093683287,1093683257,1096904043)
call R1X(1211117636,1093685071,1093685041,1096904043,1093681732,1093685042)
call R1X(1160786000,1093685047,1093685046,1093685048,1093685045,1096904043)
call R1X(1429221456,1096904043,1093685067,1093685066,1093685065,1093683526)
call R1X(1160786243,1093683765,1093681491,1093678672,1395667000,1096904043)
call R1X(1311781192,1096904043,0,1093683532,1093685043,1095656306)
call R1X(1311781193,1096904043,0,1093683532,1093685043,1095656306)
call R1X(1311781194,1096904043,0,1093683532,1093685043,1095656306)
call R1X(1311781204,1096904043,0,1093683532,1093685043,1095656306)
call R1X(1311781206,1093684280,1093684302,1093684054,1096904043,1093684053)
call R1X(1211117641,1096904043,1093684792,1093684802,1093684791,1093684567)
call R1X(1211117642,1096904043,1093684792,1093684802,1093684791,1093684567)
call R1X(1311781207,1093742668,1093685074,1093742673,1096904043,1093684817)
call R1X(1311781442,1096904043,1093681733,1093808460,1093685040,1093748042)
call R1X(1211117646,1093685579,1093685815,1093685575,1096904043,1093685573)
call R1X(1211117649,1093685586,1093685585,1093685582,1093685584,1096904043)
call R1X(1311780946,1096904043,1093685825,1093677385,0,1095328612)
call R1X(1211117650,1093743955,1093685813,1093743958,1093743946,1093684818)
call R1X(1211117651,1093743698,1093743696,1093743695,1096904043,1093685591)
call R1X(1160786265,1093685840,1093685839,1093748033,1096904043,1093685846)
call R1X(1311780930,1093686072,1093686083,1093686082,1093686073,1096904043)
call R1X(1429221443,1093686103,1096904043,1093686099,1093686322,1093744948)
call R1X(1211117653,1093808473,1093808472,1093808471,1093808470,0)
call R1X(1160786256,1096904043,1093684057,1093677618,1095066220,1093682483)
call R1X(1160786481,1096904043,1093684057,1093677618,1095066220,1093682483)
call R1X(1160786483,1096904043,1093684057,1093677618,1095066220,1093682483)
call R1X(1160786484,1096904043,1093684057,1093677618,1095066220,1093682483)
call R1X(1211117652,1093687864,1093687862,1093687861,1096904043,1093687860)
call R1X(1211119187,1093743414,1093743444,0,1093742923,1096904043)
call R1X(1211119191,0,1093742680,1093742932,1093742898,1093684818)
call R1X(1211119192,0,1093742680,1093742932,1093742898,1093684818)
call R1X(1211119193,0,1093742680,1093742932,1093742898,1093684818)
call R1X(1211119409,1093749069,1093748818,1096904043,1093749070,1093749303)
call R1X(1311786311,1093743184,1093743179,1093743689,1096904043,1093743178)
call R1X(1311786313,1093743184,1093743179,1093743408,1096904043,1093743178)
call R1X(1311786314,1093743184,1093743179,1093743408,1096904043,1093743178)
call R1X(1311786315,1093743184,1093743179,1093743408,1096904043,1093743178)
call R1X(1311786317,1093743184,1093743179,1093743408,1096904043,1093743178)
call R1X(1211119433,1093743955,1093743958,1093685813,1093743946,1093684818)
call R1X(1328558389,1093747524,1093747009,0,1093746993,1096904043)
call R1X(1328558390,1093748044,1093744982,1093744986,1093744975,1093684818)
call R1X(1328558391,1093748044,1093744982,1093744986,1093744975,1093684818)
call R1X(1211119668,1093747028,1093682994,1093684560,1093747504,1096904043)
call R1X(1211119682,1093747028,1093682994,1093684560,1093747504,1096904043)
call R1X(1211119683,1093747028,1093682994,1093684560,1093747504,1096904043)
call R1X(1211119684,1093747028,1093682994,1093684560,1093747504,1096904043)
call R1X(1311787088,1096904043,1093748819,1093750087,0,1093748817)
call R1X(1311787092,1096904043,0,1093683532,1093685043,1095656306)
call R1X(1211122243,0,1093742680,1093742932,1093742898,1093684818)
call R1X(1160786502,1093684818,0,1093751371,0,0)
call R1X(1160786503,1097885816,0,0,0,0)
call R1X(1160786504,1096904043,1093751604,1093751608,1093751617,1093751618)
call R1X(1160786505,1096904043,1093753167,1093753169,1093751607,1093753170)
call R1X(1160786506,1096904043,1093751637,1093751894,1093751639,1093752118)
call R1X(1160786507,1096904043,1093813065,1093813593,1093814834,1093814850)
call R1X(1160786508,1096904043,1093684057,1093677618,1095066220,1093682483)
call R1X(1160786509,1096904043,1093684057,1093677618,1095066220,1093682483)
call R1X(1160786510,1096904043,1093751631,1093751633,1093808697,1093751861)
call R1X(1328558406,1093684818,1093751864,0,1093751874,1093810257)
call R1X(1160786511,1096904043,1093751631,1093751633,1093808697,1093751861)
call R1X(1160786517,1096904043,1093678929,1093751369,1093815130,1093683252)
call R1X(1160786518,1096904043,1093678929,1093751369,1093815130,1093683252)
call R1X(1160786519,1096904043,1093678929,1093751369,1093815130,1093683252)
call R1X(1211122513,1096904043,1093744944,1093677387,1093814611,1093752648)
call R1X(1160786520,1093684818,0,1093809991,1093809992,1093810006)
call R1X(1311788336,1096904043,1093814320,1093814323,1093814355,0)
call R1X(1311788338,1096904043,1093812534,1093812536,1093812537,1093812545)
call R1X(1211122764,1096904043,1093812803,1093812788,1093812789,1093812790)
call R1X(1211122767,1096904043,1093812805,1093814350,1093812807,1093814612)
call R1X(1160786737,1096904043,1093813335,1093813336,1093813338,1093813552)
call R1X(1160786738,1096904043,1093813835,1093813555,1093813556,0)
call R1X(1311788343,1096904043,1093815361,1093815362,1093687856,1093815877)
call R1X(1311788345,1096904043,1093813573,1093813808,1093813812,1093813813)
call R1X(1311788353,1096904043,1093815361,1093815362,1093687856,1093815877)
call R1X(1311788356,1096904043,1093813844,1093813583,1093813841,1093813836)
call R1X(1311788360,1096904043,1093814320,1093814323,1093814355,0)
call R1X(1211122993,1096904043,1093814337,1093814338,1093814340,1093814343)
call R1X(1211122995,1096904043,1093814337,1093814338,1093814340,1093814343)
call R1X(1211122996,1096904043,1093814337,1093814338,1093814340,1093814343)
call R1X(1211122997,1096904043,1093814337,1093814338,1093814340,1093814343)
call R1X(1429221720,1093744977,1093682009,1096904043,1093684300,1093681754)
call R1X(1311788363,1096904043,1093815372,1093815373,1093815600,1093815601)
call R1X(1311788365,1096904043,1093815372,1093815373,1093815600,1093815601)
call R1X(1311788354,1096904043,1093815361,1093815362,1093687856,1093815877)
call R1X(1311788355,1096904043,1093815361,1093815362,1093687856,1093815877)
call R1X(1311788367,1096904043,1093815361,1093815362,1093687856,1093815877)
endfunction
function HS7 takes real HT7,location HU7,boolexpr HV7 returns group
set HQ7=CreateGroup()
call GroupEnumUnitsInRangeOfLoc(HQ7,HU7,HT7,HV7)
if HV7!=null then
call DestroyBoolExpr(HV7)
endif
return HQ7
endfunction
function HW7 takes rect r,boolexpr HV7 returns group
set HQ7=CreateGroup()
call GroupEnumUnitsInRect(HQ7,r,HV7)
if HV7!=null then
call DestroyBoolExpr(HV7)
endif
return HQ7
endfunction
function HX7 takes rect r,player HY7 returns group
set HQ7=CreateGroup()
set bj_groupEnumOwningPlayer=HY7
call GroupEnumUnitsInRect(HQ7,r,filterGetUnitsInRectOfPlayer)
return HQ7
endfunction
function HZ7 takes player HY7,boolexpr HV7 returns group
set HQ7=CreateGroup()
call GroupEnumUnitsOfPlayer(HQ7,HY7,HV7)
if HV7!=null then
call DestroyBoolExpr(HV7)
endif
return HQ7
endfunction
function HA7 takes player HY7,integer HB7 returns group
set HQ7=CreateGroup()
set bj_groupEnumTypeId=HB7
call GroupEnumUnitsOfPlayer(HQ7,HY7,filterGetUnitsOfPlayerAndTypeId)
return HQ7
endfunction
function HC7 takes string s returns boolean
if G37[GetPlayerId(GetTriggerPlayer())]then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,45,s)
endif
return true
endfunction
function H37 takes nothing returns boolean
local integer H67=LoadInteger(HE7,HM7,H97)-1
local unit HL7
local real H17
set HN7=0
loop
exitwhen HN7>H67
if HK7-LoadReal(HE7,HM7,HN7)>2.5 or IsUnit(LoadUnitHandle(HE7,HM7,HN7),null)then
set HL7=LoadUnitHandle(HE7,HM7,H67)
set H17=LoadReal(HE7,HM7,H67)
call RemoveSavedBoolean(HE7,HM7,GetHandleId(LoadUnitHandle(HE7,HM7,HN7)))
call RemoveSavedInteger(HE7,HM7,GetHandleId(LoadUnitHandle(HE7,HM7,HN7)))
call SaveUnitHandle(HE7,HM7,HN7,HL7)
call SaveReal(HE7,HM7,HN7,H17)
call RemoveSavedHandle(HE7,HM7,H67)
call RemoveSavedReal(HE7,HM7,H67)
call SaveInteger(HE7,HM7,GetHandleId(HL7),HN7)
call SaveInteger(HE7,HM7,H97,H67)
set H67=H67-1
endif
set HN7=HN7+1
endloop
set HL7=null
return H67==-1
endfunction
function H07 takes nothing returns boolean
local integer H67=LoadInteger(HE7,HM7,H87)-1
local integer H57=H67+HD7
local unit HL7
local real H17
set HN7=HD7
loop
exitwhen HN7>H57
if HK7-LoadReal(HE7,HM7,HN7)>=5 or IsUnit(LoadUnitHandle(HE7,HM7,HN7),null)then
set HL7=LoadUnitHandle(HE7,HM7,H67)
set H17=LoadReal(HE7,HM7,H67)
call RemoveSavedBoolean(HE7,HM7,HD7+GetHandleId(LoadUnitHandle(HE7,HM7,HN7)))
call RemoveSavedInteger(HE7,HM7,HD7+GetHandleId(LoadUnitHandle(HE7,HM7,HN7)))
call SaveUnitHandle(HE7,HM7,HN7,HL7)
call SaveReal(HE7,HM7,HN7,H17)
call RemoveSavedHandle(HE7,HM7,H67)
call RemoveSavedReal(HE7,HM7,H67)
call SaveInteger(HE7,HM7,GetHandleId(HL7),HN7)
call SaveInteger(HE7,HM7,H87,H67)
set H67=H67-1
endif
set HN7=HN7+1
endloop
set HL7=null
return H67==-1
endfunction
function H27 takes boolean do returns nothing
if do then
call FlushChildHashtable(HE7,HM7)
set HF7[HI7]=HF7[HH7-1]
set HG7[HI7]=HG7[HH7-1]
set HF7[HH7-1]=null
set HG7[HH7-1]=0
endif
endfunction
function H_7 takes nothing returns boolean
set HJ7=HJ7+1
set HI7=0
set HK7=TimerGetElapsed(W)
loop
exitwhen HI7>HH7
set HM7=GetHandleId(HF7[HI7])
if IsUnit(HF7[HI7],null)or GetWidgetLife(HF7[HI7])<=.405 then
call H27(true)
else
if HG7[HI7]==2 then
call H27(H37())
elseif HG7[HI7]==1 and HJ7-HJ7/2*2==0 then
call H27(H07())
endif
endif
set HI7=HI7+1
endloop
return false
endfunction
function I47 takes unit I77,unit I87 returns nothing
local integer I97=GetHandleId(I77)
local integer H67
local integer ID7=GetHandleId(I87)
if not LoadBoolean(HE7,I97,ID7+HD7)then
set H67=LoadInteger(HE7,I97,H87)
if H67==0 then
set HF7[HH7]=(I77)
set HG7[HH7]=1
set HH7=HH7+1
endif
call SaveUnitHandle(HE7,I97,HD7+H67,I87)
call SaveInteger(HE7,I97,H87,H67+1)
call SaveBoolean(HE7,I97,ID7+HD7,true)
call SaveInteger(HE7,I97,ID7+HD7,H67)
else
set H67=LoadInteger(HE7,I97,ID7+HD7)
endif
call SaveReal(HE7,I97,HD7+H67,TimerGetElapsed(W))
endfunction
function IE7 takes unit I87,unit I77 returns nothing
local integer I97=GetHandleId(I87)
local integer H67
local integer ID7=GetHandleId(I77)
if not LoadBoolean(HE7,I97,ID7)then
set H67=LoadInteger(HE7,I97,H97)
if H67==0 then
set HF7[HH7]=(I87)
set HH7=HH7+1
endif
call SaveUnitHandle(HE7,I97,H67,I87)
call SaveInteger(HE7,I97,H97,H67+1)
call SaveBoolean(HE7,I97,ID7,true)
call SaveInteger(HE7,I97,ID7,H67)
else
set H67=LoadInteger(HE7,I97,ID7)
endif
call SaveReal(HE7,I97,H67,TimerGetElapsed(W))
endfunction
function IF7 takes nothing returns boolean
local unit IG7
local unit IH7
local integer pointerid
set IG7=GetAttacker()
set IH7=GetTriggerUnit()
call I47(IH7,IG7)
call IE7(IG7,IH7)
set IG7=null
set IH7=null
return false
endfunction
function II7 takes unit IJ7 returns nothing
local trigger t=null
if IsUnit(IJ7,null)==false then
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,IJ7,EVENT_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function IF7))
set t=null
endif
endfunction
function IK7 takes unit IM7 returns integer
return LoadInteger(HE7,GetHandleId(IM7),H87)
endfunction
function IN7 takes unit IM7 returns boolean
local integer i
local integer H57
local integer ID7
if LoadInteger(HE7,GetHandleId(IM7),H87)==0 then
return false
endif
set i=HD7
set H57=HD7+LoadInteger(HE7,GetHandleId(IM7),H87)
set ID7=GetHandleId(IM7)
loop
exitwhen i>=H57
if IsUnitType(LoadUnitHandle(HE7,ID7,i),UNIT_TYPE_HERO) or IsUnitType(LoadUnitHandle(HE7,ID7,i),UNIT_TYPE_STRUCTURE) then
return true
endif
set i=i+1
endloop
return false
endfunction
function IO7 takes unit IM7 returns boolean
local integer i
local integer H57
local integer ID7
if LoadInteger(HE7,GetHandleId(IM7),H97)==0 then
return false
endif
set i=0
set H57=LoadInteger(HE7,GetHandleId(IM7),H97)
set ID7=GetHandleId(IM7)
loop
exitwhen i>=H57
if IsUnitType(LoadUnitHandle(HE7,ID7,i),UNIT_TYPE_HERO) or IsUnitType(LoadUnitHandle(HE7,ID7,i),UNIT_TYPE_STRUCTURE) then
return true
endif
set i=i+1
endloop
return false
endfunction
function IP7 takes nothing returns nothing
local integer i=0
call TriggerRegisterTimerEvent(H77,.5,true)
call TriggerAddCondition(H77,Condition(function H_7))
loop
exitwhen i>1024
set HF7[i]=null
set HG7[i]=0
set i=i+1
endloop
endfunction
function IQ7 takes nothing returns nothing
call II7(JG4)
call II7(JH4)
call II7(JI4)
call II7(JJ4)
call II7(JK4)
call II7(JM4)
call II7(JN4)
call II7(JO4)
call II7(JP4)
call II7(JQ4)
call II7(JR4)
call II7(J64)
call II7(JL4)
call II7(J14)
call II7(J04)
call II7(J54)
call II7(J24)
call II7(J_4)
call II7(K44)
call II7(K74)
call II7(K84)
call II7(K94)
endfunction
function IR7 takes integer i returns string
return I2S(i)+" "
endfunction
function IS7 takes boolean b returns string
if b then
return"T "
endif
return"F "
endfunction
function IX7 takes string IY7 returns nothing
local integer i
local integer O5
set i=0
loop
exitwhen i>6
if GM7[i]==IY7 then
return
endif
set i=i+1
endloop
set GM7[GN7]=IY7
set O5=0
loop
exitwhen O5>$B
if O5==6 then
set O5=7
endif
if GetPlayerSlotState(Player(O5))==PLAYER_SLOT_STATE_PLAYING then
set i=O5*6+GN7
call DestroyTextTag(GK7[i])
set GK7[i]=CreateTextTag()
call SetTextTagText(GK7[i]," ",.02)
call SetTextTagPosUnit(GK7[i],M7[O5],45*GN7)
call SetTextTagVisibility(GK7[i],true)
call SetTextTagPermanent(GK7[i],true)
call SetTextTagColor(GK7[i],KA4[O5]+100,KB4[O5]+100,KC4[O5]+100,$FF)
endif
set O5=O5+1
endloop
set GN7=GN7+1
if GN7>6 then
set GN7=0
endif
endfunction
function IZ7 takes nothing returns nothing
local integer i
set i=0
loop
exitwhen i>6
set GM7[i]=""
set i=i+1
endloop
set GN7=0
set i=0
loop
exitwhen i>$C*6
call DestroyTextTag(GK7[i])
set GK7[i]=null
set i=i+1
endloop
call DestroyTimer(GO7)
call DestroyTimer(GP7)
set GO7=null
set GP7=null
endfunction
function IA7 takes string IY7,integer O5 returns string
local integer IB7=0
local string IC7=""
local integer i=0
local integer j=StringLength(IY7)
loop
exitwhen i>=j
if SubString(IY7,i,i+1)==" " or SubString(IY7,i,i+1)=="[" then
set IB7=S2I(SubString(IY7,i+1,j))
set IY7=SubString(IY7,0,i)
exitwhen true
endif
set i=i+1
endloop
if i>=j then
return"-"
endif
if IY7=="eY" then
set IC7=I2S(eY[IB7+O5])
elseif IY7=="g_aiItemInt" then
set IC7=I2S(G97[IB7+O5])
elseif IY7=="hG" then
set IC7=I2S(hG[IB7+O5])
elseif IY7=="ga_rSkillCD" then
set IC7=R2S(T34[IB7+O5])
elseif IY7=="G0" then
set IC7=IS7(G0[IB7+O5])
elseif IY7=="GZ" then
set IC7=IS7(GZ[IB7+O5])
elseif IY7=="g_aiItemBool" then
set IC7=IS7(GE7[IB7+O5])
elseif IY7=="h4" then
if h4[IB7+O5]==null then
set IC7="<>"
else
set IC7=GetUnitName(h4[IB7+O5])
endif
elseif IY7=="h9" then
if h9[IB7+O5]==null then
set IC7="?"
endif
set IC7=I2S(GetUnitUserData(h9[IB7+O5]))
elseif IY7=="h8" then
if h8[IB7+O5]==null then
set IC7="?"
endif
set IC7=I2S(GetUnitUserData(h8[IB7+O5]))
elseif IY7=="debugStr" then
set IC7=GI7[IB7+O5]
endif
if IC7!="" then
return IY7+"["+I2S(IB7)+"+"+I2S(O5)+"] = "+IC7
endif
return"-"
endfunction
function I37 takes nothing returns nothing
local integer i=0
local integer O5=0
loop
exitwhen i>6
if GM7[i]!="" then
set O5=0
loop
exitwhen O5>$B
if O5==6 then
set O5=7
endif
if GK7[O5*6+i]!=null then
call SetTextTagText(GK7[O5*6+i],IA7(GM7[i],O5),.02)
endif
set O5=O5+1
endloop
endif
set i=i+1
endloop
endfunction
function I67 takes nothing returns nothing
local integer i=0
local integer O5=0
loop
exitwhen i>6
if GM7[i]!="" then
set O5=0
loop
exitwhen O5>$B
if O5==6 then
set O5=7
endif
if GK7[O5*6+i]!=null then
call SetTextTagPosUnit(GK7[O5*6+i],M7[O5],45*i)
endif
set O5=O5+1
endloop
endif
set i=i+1
endloop
endfunction
function AIDEBUG_Watcher_Request takes nothing returns nothing
local string IY7=GetEventPlayerChatString()
local integer i=StringLength(GetEventPlayerChatStringMatched())+1
if i<StringLength(IY7)then
set IY7=SubString(IY7,i,$FF)
if IA7(IY7,1)=="-" then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"Watcher parameter not yet supported: "+IY7)
return
endif
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"Watcher activated for |c00ffcc00"+IY7+"|r")
call IX7(IY7)
if GO7==null then
set GO7=CreateTimer()
call TimerStart(GO7,.3,true,function I37)
call I37()
set GP7=CreateTimer()
call TimerStart(GP7,.03,true,function I67)
endif
return
endif
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"Watcher deactivated")
call IZ7()
endfunction
function AXJ7 takes string s returns boolean
return true
endfunction
function IL7 takes string s returns nothing
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,16.,s)
endfunction
function AIDEBUGFORCEORDER2 takes nothing returns nothing
call IssueImmediateOrderById(M7[2],$D022E)
call HC7("order2")
endfunction
function I17 takes nothing returns boolean
call SetUnitState(M7[2],UNIT_STATE_LIFE,$A)
call SetUnitState(M7[1],UNIT_STATE_LIFE,$A)
return true
endfunction
function I27 takes unit I_7 returns real
return GetWidgetLife(I_7)*hq[752+GetPlayerId(GetOwningPlayer(I_7))]
endfunction
function J47 takes unit a,unit b returns real
return bj_RADTODEG*Atan2(GetUnitY(b)-GetUnitY(a),GetUnitX(b)-GetUnitX(a))
endfunction
function J77 takes real x1,real y1,real x2,real y2 returns real
return bj_RADTODEG*Atan2(y2-y1,x2-x1)
endfunction
function J87 takes player pl returns string
if(Y74[GetPlayerId(pl)]==1)then
return"E "
elseif(Y74[GetPlayerId(pl)]==3)then
return"N "
else
return"I "
endif
endfunction
function J97 takes player p returns nothing
if GetAIDifficulty(p)==AI_DIFFICULTY_NEWBIE then
set Y74[GetPlayerId(p)]=1
elseif GetAIDifficulty(p)==AI_DIFFICULTY_NORMAL then
set Y74[GetPlayerId(p)]=3
elseif GetAIDifficulty(p)==AI_DIFFICULTY_INSANE then
set Y74[GetPlayerId(p)]=5
else
set Y74[GetPlayerId(p)]=0
endif
endfunction
function JD7 takes boolean JE7,unit JF7,unit JG7 returns unit
if JE7 then
return JF7
else
return JG7
endif
return null
endfunction
function JH7 takes boolean JE7,integer JI7,integer JJ7 returns integer
if JE7 then
return JI7
else
return JJ7
endif
return 0
endfunction
function JK7 takes boolean JE7,string JM7,string JN7 returns string
if JE7 then
return JM7
else
return JN7
endif
return""
endfunction
function JO7 takes boolean JE7,real JI7,real JJ7 returns real
if JE7 then
return JI7
else
return JJ7
endif
return .0
endfunction
function JP7 takes integer JQ7 returns integer
if(JQ7==1212363833 or JQ7==1212365106 or JQ7==1311781199 or JQ7==1315070563 or JQ7==1215657064 or JQ7==1332179560 or JQ7==1160785973 or JQ7==1311781174 or JQ7==1315074670 or JQ7==1164277353 or JQ7==1429221430 or JQ7==1165451634 or JQ7==1160785972 or JQ7==1162032181 or JQ7==1162032951 or JQ7==1315334514 or JQ7==1215722344 or JQ7==1160786242 or JQ7==1211117641 or JQ7==1211119409)then
return 1
endif
if(JQ7==1215723364 or JQ7==1328558160 or JQ7==1211117617 or JQ7==1212363833 or JQ7==1212365106 or JQ7==1311781199 or JQ7==1315070563 or JQ7==1215657064 or JQ7==1332179560 or JQ7==1160785973 or JQ7==1433631084 or JQ7==1211117624 or JQ7==1315007329 or JQ7==1215063922 or JQ7==1164207469 or JQ7==1315074670 or JQ7==1211117636 or JQ7==1311781206 or JQ7==1211117649 or JQ7==1160786265 or JQ7==1211117652 or JQ7==1211119187 or JQ7==1164277353 or JQ7==1162032439 or JQ7==1430466865 or JQ7==1429221441 or JQ7==1429221432 or JQ7==1429221430 or JQ7==1211117654 or JQ7==1432646245 or JQ7==1430467634 or JQ7==1429221424 or JQ7==1430468913 or JQ7==1162032181 or JQ7==1162032951 or JQ7==1160785970 or JQ7==1429221443 or JQ7==1328558154 or JQ7==1432510828 or JQ7==1315334514 or JQ7==1429221451 or JQ7==1215722344 or JQ7==1160786242 or JQ7==1211117641 or JQ7==1211119409 or JQ7==1160786505 or JQ7==1160786510 or JQ7==1311788336 or JQ7==1160786507)then
return 2
endif
if(JQ7==1211117617 or JQ7==1214344551 or JQ7==1211117624 or JQ7==1315988077 or JQ7==1211117616 or JQ7==1215063922 or JQ7==1311781193 or JQ7==1211119187 or JQ7==1430466865 or JQ7==1429221441 or JQ7==1429221432 or JQ7==1313026096 or JQ7==1429221443 or JQ7==1332109682 or JQ7==1429221446 or JQ7==1332766568 or JQ7==1432642913 or JQ7==1211117650 or JQ7==1328558389 or JQ7==1328558406 or JQ7==1160786502 or JQ7==1160786507 or JQ7==1160786738)then
return 3
endif
if(JQ7==1164799855 or JQ7==1333027688 or JQ7==1311781185 or JQ7==1433105516 or JQ7==1214409837 or JQ7==1215130471 or JQ7==1164799603 or JQ7==1432580716 or JQ7==1211117633 or JQ7==1332898670 or JQ7==1214345830 or JQ7==1160786000 or JQ7==1311780930 or JQ7==1311786311 or JQ7==1430466872 or JQ7==1430468144 or JQ7==1430466609 or JQ7==1211117640 or JQ7==1332963428 or JQ7==1429221445 or JQ7==1160786241 or JQ7==1429221456 or JQ7==1160786243 or JQ7==1311781207 or JQ7==1311780946 or JQ7==1211117646 or JQ7==1211117653 or JQ7==1311787088 or JQ7==1328558390 or JQ7==1160786506 or JQ7==1160786504)then
return 4
endif
if(JQ7==1215128178 or JQ7==1164799855 or JQ7==1214931305 or JQ7==1211117620 or JQ7==1215130471 or JQ7==1316252014 or JQ7==1211117643 or JQ7==1160786000 or JQ7==1211117651 or JQ7==1164666213 or JQ7==1433168227 or JQ7==1430468406 or JQ7==1430466872 or JQ7==1211117640 or JQ7==1332963428 or JQ7==1160786241 or JQ7==1429221456 or JQ7==1211117653 or JQ7==1160786520 or JQ7==1432580716 or JQ7==1211122767)then
return 5
endif
if((JQ7==1215128178)or(JQ7==1211117620)or(JQ7==1215130471)or(JQ7==1316252014)or(JQ7==1332898670)or(JQ7==1160786000)or(JQ7==1433168227)or(JQ7==1430466872)or(JQ7==1430466609)or(JQ7==1211117640)or(JQ7==1211117653)or(JQ7==1311787088)or(JQ7==1211122767))then
return 6
endif
if(JQ7==1164799855)or(JQ7==1433105516)or(JQ7==1214409837)or(JQ7==1164799603)or(JQ7==1432580716)or(JQ7==1211117643)or(JQ7==1211117633)or(JQ7==1332898670)or(JQ7==1211117616)or(JQ7==1315074670)or(JQ7==1160786000)or(JQ7==1164666213)or(JQ7==1430468406)or(JQ7==1162032439)or(JQ7==1429221432)or(JQ7==1429221430)or(JQ7==1211117640)or(JQ7==1160786243)or(JQ7==1429221445)or(JQ7==1311780946)or(JQ7==1211117620)or(JQ7==1211117636)or(JQ7==1332179560)or(JQ7==1429221441)then
return 7
endif
return 0
endfunction
function JR7 takes integer JQ7,integer JS7 returns boolean
if JS7==0 then
return true
elseif JS7==1 and(JQ7==1212363833 or JQ7==1212365106 or JQ7==1311781199 or JQ7==1315070563 or JQ7==1215657064 or JQ7==1332179560 or JQ7==1160785973 or JQ7==1311781174 or JQ7==1315074670 or JQ7==1164277353 or JQ7==1429221430 or JQ7==1165451634 or JQ7==1160785972 or JQ7==1162032181 or JQ7==1162032951 or JQ7==1315334514 or JQ7==1215722344 or JQ7==1160786242 or JQ7==1211117641 or JQ7==1211119409)then
return true
elseif JS7==2 and(JQ7==1215723364 or JQ7==1328558160 or JQ7==1211117617 or JQ7==1212363833 or JQ7==1212365106 or JQ7==1311781199 or JQ7==1315070563 or JQ7==1215657064 or JQ7==1332179560 or JQ7==1160785973 or JQ7==1433631084 or JQ7==1211117624 or JQ7==1315007329 or JQ7==1215063922 or JQ7==1164207469 or JQ7==1315074670 or JQ7==1211117636 or JQ7==1311781206 or JQ7==1211117649 or JQ7==1160786265 or JQ7==1211117652 or JQ7==1211119187 or JQ7==1164277353 or JQ7==1162032439 or JQ7==1430466865 or JQ7==1429221441 or JQ7==1429221432 or JQ7==1429221430 or JQ7==1211117654 or JQ7==1432646245 or JQ7==1430467634 or JQ7==1429221424 or JQ7==1430468913 or JQ7==1162032181 or JQ7==1162032951 or JQ7==1160785970 or JQ7==1429221443 or JQ7==1328558154 or JQ7==1432510828 or JQ7==1315334514 or JQ7==1429221451 or JQ7==1215722344 or JQ7==1160786242 or JQ7==1211117641 or JQ7==1211119409 or JQ7==1160786505 or JQ7==1160786510 or JQ7==1311788336 or JQ7==1160786507)then
return true
elseif JS7==3 and(JQ7==1211117617 or JQ7==1214344551 or JQ7==1432580716 or JQ7==1211117624 or JQ7==1315988077 or JQ7==1211117616 or JQ7==1215063922 or JQ7==1311781193 or JQ7==1211119187 or JQ7==1430466865 or JQ7==1429221441 or JQ7==1429221432 or JQ7==1313026096 or JQ7==1429221443 or JQ7==1332109682 or JQ7==1429221446 or JQ7==1332766568 or JQ7==1432642913 or JQ7==1211117650 or JQ7==1328558389 or JQ7==1328558406 or JQ7==1160786502 or JQ7==1160786738)then
return true
elseif JS7==4 and(JQ7==1164799855 or JQ7==1333027688 or JQ7==1311781185 or JQ7==1433105516 or JQ7==1214409837 or JQ7==1215130471 or JQ7==1164799603 or JQ7==1432580716 or JQ7==1211117633 or JQ7==1332898670 or JQ7==1214345830 or JQ7==1160786000 or JQ7==1311780930 or JQ7==1311786311 or JQ7==1430466872 or JQ7==1430468144 or JQ7==1430466609 or JQ7==1211117640 or JQ7==1332963428 or JQ7==1429221445 or JQ7==1160786241 or JQ7==1429221456 or JQ7==1160786243 or JQ7==1311781207 or JQ7==1311780946 or JQ7==1211117646 or JQ7==1211117653 or JQ7==1311787088 or JQ7==1328558390 or JQ7==1160786506 or JQ7==1160786504)then
return true
elseif JS7==5 and(JQ7==1215128178 or JQ7==1164799855 or JQ7==1214931305 or JQ7==1211117620 or JQ7==1215130471 or JQ7==1316252014 or JQ7==1211117643 or JQ7==1160786000 or JQ7==1211117651 or JQ7==1164666213 or JQ7==1433168227 or JQ7==1430468406 or JQ7==1430466872 or JQ7==1211117640 or JQ7==1332963428 or JQ7==1160786241 or JQ7==1429221456 or JQ7==1211117653 or JQ7==1160786520 or JQ7==1432580716 or JQ7==1211122767)then
return true
elseif JS7==6 and(((JQ7==1215128178)or(JQ7==1211117620)or(JQ7==1215130471)or(JQ7==1316252014)or(JQ7==1332898670)or(JQ7==1160786000)or(JQ7==1433168227)or(JQ7==1430466872)or(JQ7==1430466609)or(JQ7==1211117640)or(JQ7==1211117653)or(JQ7==1311787088)or(JQ7==1211122767)))then
return true
elseif JS7==7 and((JQ7==1164799855)or(JQ7==1433105516)or(JQ7==1214409837)or(JQ7==1164799603)or(JQ7==1432580716)or(JQ7==1211117643)or(JQ7==1211117633)or(JQ7==1332898670)or(JQ7==1211117616)or(JQ7==1315074670)or(JQ7==1160786000)or(JQ7==1164666213)or(JQ7==1430468406)or(JQ7==1162032439)or(JQ7==1429221432)or(JQ7==1429221430)or(JQ7==1211117640)or(JQ7==1160786243)or(JQ7==1429221445)or(JQ7==1311780946)or(JQ7==1211117620)or(JQ7==1211117636)or(JQ7==1332179560)or(JQ7==1429221441))then
return true
endif
return false
endfunction
function JT7 takes integer JQ7 returns integer
if(JQ7==1211117620 or JQ7==1214409837 or JQ7==1432580716 or JQ7==1211117643 or JQ7==1160786000 or JQ7==1164666213 or JQ7==1430468406 or JQ7==1211117640 or JQ7==1332766568 or JQ7==1311780946 or JQ7==1211122767)then
return 1
endif
if(JQ7==1214931305 or JQ7==1333027688 or JQ7==1215130471 or JQ7==1316252014 or JQ7==1164799603 or JQ7==1332898670 or JQ7==1433168227 or JQ7==1430466872 or JQ7==1429221445 or JQ7==1160786241 or JQ7==1211117650 or JQ7==1211117646 or JQ7==1211117653 or JQ7==1160786506 or JQ7==1160786507)then
return 2
endif
if(JQ7==1215723364 or JQ7==1164799855 or JQ7==1212365106 or JQ7==1311781185 or JQ7==1214344551 or JQ7==1215657064 or JQ7==1211117633 or JQ7==1315007329 or JQ7==1215063922 or JQ7==1164207469 or JQ7==1315074670 or JQ7==1211117649 or JQ7==1160786265 or JQ7==1211117652 or JQ7==1429221441 or JQ7==1165451634 or JQ7==1432646245 or JQ7==1430467634 or JQ7==1332963428 or JQ7==1429221446 or JQ7==1160786243)then
return 4
endif
return 3
endfunction
function JU7 takes integer JV7,boolean JW7 returns string
if JV7==0 then
return" (中路)"
elseif JV7==1 then
return" (上路)"
elseif JV7==2 then
return" (下路)"
elseif JV7==3 and JW7 then
return" (世界之树)"
elseif JV7==4 and JW7 then
return" (冰封王座)"
endif
return""
endfunction
function JX7 takes boolean JY7 returns integer
local integer JZ7=JH7(JY7,0,24)
local integer JA7=0
local integer k=0
local integer j
local integer i=-1
loop
exitwhen JA7>3
if JA7==0 then
set j=3
else
set j=JA7-1
endif
if LU4[JZ7+8+j]>0 then
if LU4[JZ7+$C+j]==0 then
set i=j
exitwhen true
elseif LU4[JZ7+8+j]>k or(LU4[JZ7+8+j]==k and GetRandomInt(1,5-JA7)==1)then
set i=j
set k=LU4[JZ7+8+j]
endif
endif
set JA7=JA7+1
endloop
return i
endfunction
function JB7 takes unit it returns real
local integer i1=GetUnitTypeId(it)
if((i1==1211117616)or(i1==1214345830)or(i1==1315988077)or(i1==1214344551)or(i1==1211117624)or(i1==1328558154)or(i1==1429221443)or(i1==1429221432)or(i1==1432646245)or(i1==1311780946)or(i1==1430468913)or(i1==1211117650)or(i1==1164207469)or(i1==1315070563)or(i1==1212363833)or(i1==1332179560)or(i1==1211117641)or(i1==1215657064)or(i1==1215722344)or(i1==1165451634)or(i1==1164277353)or(i1==1160786242)or(i1==1215130471))then
return 100.
elseif((i1==1211117652)or(i1==1212365106))then
return 125.
elseif((i1==1211119187)or(i1==1333027688)or(i1==1311781193)or(i1==1429221451)or(i1==1429221446)or(i1==1315007329)or(i1==1162032181)or(i1==1429221424)or(i1==1328558389)or(i1==1211119409)or(i1==1160786505)or(i1==1311788336)or(i1==1160786507)or(i1==1160786738))then
return 128.
elseif((i1==1430467634)or(i1==1432642913)or(i1==1215063922))then
return 150.
elseif((i1==1211117636)or(i1==1211117617)or(i1==1432580716)or(i1==1430466865)or(i1==1332109682)or(i1==1332766568)or(i1==1429221441)or(i1==1313026096)or(i1==1211117646))then
return 200.
elseif(i1==1429221430)then
return 250.
elseif((i1==1328558160)or(i1==1215128178))then
return 350.
elseif((i1==1211117649)or(i1==1160786000))then
return 400.
elseif(i1==1432510828)then
return 425.
elseif((i1==1162032439)or(i1==1429221456))then
return 450.
elseif(i1==1160785970)then
return 475.
elseif(i1==1211117651)then
return 480.
elseif((i1==1315334514)or(i1==1316252014)or(i1==1332898670)or(i1==1311781207))then
return 500.
elseif((i1==1433631084)or(i1==1311781199)or(i1==1164799855)or(i1==1430466609)or(i1==1311780930))then
return 550.
elseif(i1==1162032951)then
return 575.
elseif((i1==1311781206)or(i1==1315074670)or((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))or(i1==1160785972)or(i1==1211117633)or(i1==1311781185)or(i1==1211117620)or(i1==1164666213)or(i1==1160786241)or(i1==1430468406)or(i1==1430466872)or(i1==1211117653)or(i1==1429221445)or(i1==1211117640)or(i1==1160786243)or(i1==1311787088)or(i1==1160786520)or(i1==1211122767))then
return 600.
else
return .0
endif
endfunction
function JC7 takes unit I_7,integer O5 returns nothing
if(IsUnitAlly(I_7,Z7[0]))then
if LU4[64+O5]==0 then
set h8[64+O5]=h7[2]
elseif LU4[64+O5]==1 then
set h8[64+O5]=h7[4]
elseif LU4[64+O5]==2 then
set h8[64+O5]=h7[3]
elseif LU4[64+O5]==3 then
set h8[64+O5]=h7[1]
endif
else
if LU4[64+O5]==0 then
set h8[64+O5]=h7[102]
elseif LU4[64+O5]==1 then
set h8[64+O5]=h7[103]
elseif LU4[64+O5]==2 then
set h8[64+O5]=h7[104]
elseif LU4[64+O5]==3 then
set h8[64+O5]=h7[101]
endif
endif
endfunction
function J37 takes group g returns boolean
return FirstOfGroup(g)==null
endfunction
function J67 takes integer JL7,unit J17,integer J07,integer J57 returns boolean
set UE4[JL7]=true
call SetPlayerAbilityAvailable(GetOwningPlayer(J17),J07,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(J17),J57,true)
return true
endfunction
function J27 takes integer JL7 returns boolean
set GZ[JL7]=true
return true
endfunction
function J_7 takes real K47 returns nothing
local real K77
local real st=TimerGetElapsed(W)
if st<=0 then
set W=CreateTimer()
call TimerStart(W,9000,false,null)
endif
if(K47>0)then
loop
set K77=K47-TimerGetElapsed(W)+st
exitwhen K77<=0
if(K77>bj_POLLED_WAIT_SKIP_THRESHOLD)then
call TriggerSleepAction(.1*K77)
else
call TriggerSleepAction(bj_POLLED_WAIT_INTERVAL)
endif
endloop
endif
endfunction
function K87 takes unit a,widget b,real K97 returns boolean
local real KD7=(GetUnitFacing(a)-bj_RADTODEG*Atan2(GetWidgetY(b)-GetUnitY(a),GetWidgetX(b)-GetUnitX(a)))
if KD7>$B4 then
set KD7=360-KD7
endif
if KD7<0 then
set KD7=-KD7
endif
return KD7<=K97
endfunction
function KE7 takes widget p5,widget m5 returns real
local real t5
local real w5
local real Y5
local real Z5
if p5!=null and m5!=null then
set t5=GetWidgetX(p5)
set w5=GetWidgetY(p5)
set Y5=GetWidgetX(m5)
set Z5=GetWidgetY(m5)
return SquareRoot((t5-Y5)*(t5-Y5)+(w5-Z5)*(w5-Z5))
endif
return 999999.
endfunction
function KF7 takes real x1,real y1,real x2,real y2 returns real
return SquareRoot(((x1-x2)*(x1-x2))+((y1-y2)*(y1-y2)))
endfunction
function KG7 takes integer O5 returns integer
local integer kc=3
if((hj[256+O5]==18)or(hj[O5]==$A)or(hj[256+O5]==118)or(hj[O5]==110))then
set kc=0
elseif((hj[256+O5]==40)or(hj[O5]==30)or(hj[256+O5]==$8C)or(hj[O5]==$82))then
set kc=1
elseif((hj[256+O5]==60)or(hj[O5]==50)or(hj[256+O5]==$A0)or(hj[O5]==$96))then
set kc=2
endif
return kc
endfunction
function KH7 takes unit it returns integer
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer UP=GetUnitUserData(h8[O5])
if((UP==0)or(UP==100)or(UP==1)or(UP==101))then
set UP=GetUnitUserData(h9[O5])
endif
return KG7(UP)
endfunction
function KI7 takes integer O5 returns integer
set eY[80+O5]=5
if IG4[O5]then
elseif(KE7(M7[O5],h7[0])<4000.)then
set eY[80+O5]=3
elseif(KE7(M7[O5],h7[100])<4000.)then
set eY[80+O5]=4
elseif IsUnitInRange(M7[O5],h8[O5],2000.)then
set eY[80+O5]=KG7(GetUnitUserData(h8[O5]))
if eY[80+O5]==3 then
set eY[80+O5]=5
endif
elseif IsUnitInRange(M7[O5],h8[80+O5],2000.)then
set eY[80+O5]=KG7(GetUnitUserData(h8[80+O5]))
if eY[80+O5]==3 then
set eY[80+O5]=5
endif
else
set eY[80+O5]=5
set GZ[400+O5]=true
endif
return eY[80+O5]
endfunction
function KJ7 takes integer KK7 returns integer
local integer KM7=0
loop
exitwhen KM7>K54
if MI4[KM7]==KK7 then
return K34[KM7]
endif
set KM7=KM7+1
endloop
return-1
endfunction
function KN7 takes unit KO7 returns integer
local integer KP7=GetHeroLevel(KO7)
if KP7==1 then
return 100
elseif KP7==2 then
return 120
elseif KP7==3 then
return $A0
elseif KP7==4 then
return $DC
else
return -$C8+100*KP7
endif
return 0
endfunction
function KQ7 takes nothing returns real
return TimerGetElapsed(W)
endfunction
function KR7 takes unit KS7 returns nothing
call PauseUnit(KS7,true)
call IssueImmediateOrder(KS7,"stop")
call PauseUnit(KS7,false)
endfunction
function KT7 takes location f4,real F4,real l4 returns location
return Location(GetLocationX(f4)+F4*Cos(l4*bj_DEGTORAD),GetLocationY(f4)+F4*Sin(l4*bj_DEGTORAD))
endfunction
function L4 takes nothing returns boolean
local real dx=GetDestructableX(GetFilterDestructable())-Wz
local real dy=GetDestructableY(GetFilterDestructable())-Yz
return(dx*dx+dy*dy<=bj_enumDestructableRadius)
endfunction
function M4 takes player p4 returns force
set V2=CreateForce()
call ForceEnumEnemies(V2,p4,bH)
return V2
endfunction
function KU7 takes unit I_7 returns boolean
local integer id=GetUnitTypeId(I_7)
return id==1848651849 or id==1848652338 or id==1848652337 or id==1848658777 or id==1848658778 or id==1848659013 or id==1848652339 or id==1848652340 or id==1848652341 or id==1848658992 or id==1848658993 or id==1848659252 or id==1848651853 or id==1848658006 or id==1848659027
endfunction
function KV7 takes unit I_7 returns boolean
local integer id=GetUnitTypeId(I_7)
return id==1697657160 or id==1697657178 or id==1697657426 or id==1697657428 or id==1697657427 or id==1697657648
endfunction
function KW7 takes unit I_7 returns boolean
return KU7(I_7)or KV7(I_7)
endfunction
function KX7 takes item Z4 returns nothing
call DisableTrigger(H94)
call RemoveItem(Z4)
call EnableTrigger(H94)
endfunction
function KY7 takes item x5 returns integer
local integer o5
local integer i=1
if x5==null then
return-2
endif
set o5=GetItemTypeId(x5)
loop
exitwhen i>EV
if SU[i]==o5 or ZU[i]==o5 or BU[i]==o5 then
return i
endif
set i=i+1
endloop
return-1
endfunction
function KZ7 takes item KA7 returns integer
local integer KB7
local integer i=1
if KA7==null then
return-2
endif
set KB7=GetItemTypeId(KA7)
loop
exitwhen i>EV
if SU[i]==KB7 or ZU[i]==KB7 then
return i
endif
set i=i+1
endloop
return-1
endfunction
function KC7 takes item KA7 returns integer
local integer KB7
local integer i=1
if KA7==null then
return-2
endif
set KB7=GetItemTypeId(KA7)
loop
exitwhen i>EV
if BU[i]==KB7 then
return i
endif
set i=i+1
endloop
return-1
endfunction
function V5 takes nothing returns nothing
set HM4[1]=1093677633
set HN4[1]=1093744463
set HO4[1]=1094934883
set HP4[1]=1093683534
set HM4[2]=1093677616
set HN4[2]='A2QB'
set HO4[2]=1093684789
set HP4[2]=1093810503
set HM4[3]=1093682263
set HN4[3]=1093682264
set HO4[3]=1093677378
set HP4[3]=1093682265
set HM4[4]=1093682766
set HN4[4]=1093682998
set HO4[4]=1093684056
set HP4[4]=1093683000
set HM4[5]=1093748025
set HN4[5]=1093678147
set HO4[5]=1095262562
set HP4[5]=1093677906
set HM4[6]=1093744944
set HN4[6]=1093677387
set HO4[6]=1093814611
set HP4[6]=1093752648
set HM4[7]=1093678643
set HN4[7]=1093681729
set HO4[7]=1093677125
set HP4[7]=1093678933
set HM4[8]=1093686091
set HN4[8]=1093682252
set HO4[8]=1093682250
set HP4[8]=1093682248
set HM4[9]=1093685831
set HN4[9]=1093684025
set HO4[9]=1093682266
set HP4[9]=1093677130
set HM4[$A]=1093681461
set HN4[$A]=1093748039
set HO4[$A]=1093681464
set HP4[$A]=1093681479
set HM4[$B]=1093677382
set HN4[$B]=1093677623
set HO4[$B]=1093744728
set HP4[$B]=1093677392
set HM4[$C]=1093678407
set HN4[$C]=1093678135
set HO4[$C]=1093677131
set HP4[$C]=1093684529
set HM4[$D]=1093743692
set HN4[$D]=1093684314
set HO4[$D]=1093815892
set HP4[$D]=1093684275
set HM4[$E]=1093677402
set HN4[$E]=1093748535
set HO4[$E]=1093677397
set HP4[$E]=1093678938
set HM4[$F]=1093747009
set HN4[$F]=1093747000
set HO4[$F]=1093747524
set HP4[$F]=1093746993
set HM4[16]=1093679157
set HN4[16]=1093742680
set HO4[16]=1093742898
set HP4[16]=1093742932
set HM4[17]=1093677913
set HN4[17]=1093750841
set HO4[17]=1093817669
set HP4[17]=1093684291
set HM4[18]=1093679172
set HN4[18]=1093677126
set HO4[18]=1093679177
set HP4[18]=1093679160
set HM4[19]=1093678137
set HN4[19]=1093678405
set HO4[19]=1093681745
set HP4[19]=1093678645
set HM4[20]=1093808453
set HN4[20]=1093677391
set HO4[20]=1095067246
set HP4[20]=1093752632
set HM4[21]=1093742660
set HN4[21]='A2W7'
set HO4[21]='A2W1'
set HP4[21]=1093682242
set HM4[22]=1093684300
set HN4[22]=1093681754
set HO4[22]=1093744977
set HP4[22]=1093682009
set HM4[23]=1093678410
set HN4[23]=1093678664
set HO4[23]=1093678658
set HP4[23]=1093681483
set HM4[24]=1093684045
set HN4[24]=1093684310
set HO4[24]=1093810260
set HP4[24]=1093684308
set HM4[25]=1093678130
set HN4[25]=1093678129
set HO4[25]=1093678642
set HP4[25]=1093678388
set HM4[26]=1093678644
set HN4[26]=1093816897
set HO4[26]=1093677909
set HP4[26]=1093678160
set HM4[27]=1093681733
set HN4[27]=1093681731
set HO4[27]=1093685040
set HP4[27]=1093748042
set HM4[28]=1093677360
set HN4[28]=1093685848
set HO4[28]=1093677136
set HP4[28]=1093677128
set HM4[29]=1093682775
set HN4[29]=1093683024
set HO4[29]=1093684531
set HP4[29]=1093682774
set HM4[30]=1093678669
set HN4[30]=1097032808
set HO4[30]=1093684568
set HP4[30]=1093684561
set HM4[31]=1093677139
set HN4[31]=1093816142
set HO4[31]=1093677142
set HP4[31]=1093816118
set HM4[32]=1093677108
set HN4[32]=1093749073
set HO4[32]=1093678913
set HP4[32]=1093681716
set HM4[33]=1093677894
set HN4[33]=1093681490
set HO4[33]=1093681996
set HP4[33]=1093677895
set HM4[34]=1093677618
set HN4[34]=1095066220
set HO4[34]=1093684057
set HP4[34]=1093682483
set HM4[35]=1093677622
set HN4[35]=1093685570
set HO4[35]=1093677625
set HP4[35]=1093686851
set HM4[36]=1093679182
set HN4[36]=1093679190
set HO4[36]=1093678657
set HP4[36]=1093682514
set HM4[37]=1093685041
set HN4[37]=1093685071
set HO4[37]=1093681732
set HP4[37]=1093685042
set HM4[38]=1093685047
set HN4[38]=1093685046
set HO4[38]=1093685048
set HP4[38]=1093685045
set HM4[39]=1093683532
set HN4[39]=1093750345
set HO4[39]=1093685043
set HP4[39]=1095656306
set HM4[40]=1093684054
set HN4[40]=1093684280
set HO4[40]=1093684302
set HP4[40]=1093684053
set HM4[41]=1093743696
set HN4[41]=1093743698
set HO4[41]=1093685591
set HP4[41]=1093743695
set HM4[42]=1093685584
set HN4[42]=1093685582
set HO4[42]=1093685585
set HP4[42]=1093685586
set HM4[43]=1093748033
set HN4[43]=1093685846
set HO4[43]=1093685839
set HP4[43]=1093685840
set HM4[44]=1093686073
set HN4[44]=1093686083
set HO4[44]=1093686082
set HP4[44]=1093686072
set HM4[45]=1093687860
set HN4[45]=1093687861
set HO4[45]=1093687862
set HP4[45]=1093687864
set HM4[46]=1093743414
set HN4[46]=1093743444
set HO4[46]=1093742926
set HP4[46]=1093742923
set HM4[47]=1093743178
set HN4[47]=1093743179
set HO4[47]=1093743689
set HP4[47]=1093743184
set HM4[48]=1093751631
set HN4[48]=1093751633
set HO4[48]=1093751895
set HP4[48]=1093751861
set HM4[49]=1093751894
set HN4[49]=1093751639
set HO4[49]=1093751637
set HP4[49]=1093752118
set HM4[50]=1093751873
set HN4[50]=1093751864
set HO4[50]=1093810257
set HP4[50]=1093751874
set HM4[51]=1093678918
set HN4[51]=1093679186
set HO4[51]=1093678387
set HP4[51]=1093678420
set HM4[52]=1093678904
set HN4[52]=1093678925
set HO4[52]=1093677635
set HP4[52]=1093678158
set HM4[53]=1093687349
set HN4[53]=1093684558
set HO4[53]=1093677646
set HP4[53]=1093679413
set HM4[54]=1093744435
set HN4[54]=1093684569
set HO4[54]=1093684563
set HP4[54]=1093677363
set HM4[55]=1093677651
set HN4[55]=1093677879
set HO4[55]=1093751364
set HP4[55]=1093810508
set HM4[56]=1093679192
set HN4[56]=1093750337
set HO4[56]=1093686872
set HP4[56]=1093678923
set HM4[57]=1093678389
set HN4[57]=1093685847
set HO4[57]=1093677902
set HP4[57]=1093677903
set HM4[111]=1093677892
set HN4[111]=1093687878
set HO4[111]=1093677893
set HP4[111]=1093679411
set HM4[112]=1093681736
set HN4[112]=1093681735
set HO4[112]=1093681739
set HP4[112]=1093687121
set HM4[60]=1093687629
set HN4[60]=1093685324
set HO4[60]=1093677904
set HP4[60]=1093677905
set HM4[61]=1093747504
set HN4[61]=1093682994
set HO4[61]=1093684560
set HP4[61]=1093747028
set HM4[62]=1093677640
set HN4[62]=1093679173
set HO4[62]=1093679158
set HP4[62]=1093677899
set HM4[63]=1095267426
set HN4[63]=1096114550
set HO4[63]=1095721842
set HP4[63]=1093677401
set HM4[64]=1093742674
set HN4[64]=1093750608
set HO4[64]=1093679412
set HP4[64]=1093684565
set HM4[65]=1093687351
set HN4[65]=1093748789
set HO4[65]=1093815119
set HP4[65]=1093679445
set HM4[66]=1093678403
set HN4[66]=1093810507
set HO4[66]=1093683786
set HP4[66]=1093677876
set HM4[67]=1093685559
set HN4[67]=1093684549
set HO4[67]=1093678145
set HP4[67]=1093810258
set HM4[68]=1093677872
set HN4[68]=1095263841
set HO4[68]=1093677621
set HP4[68]=1093678161
set HM4[69]=1093684299
set HN4[69]=1093682010
set HO4[69]=1093679153
set HP4[69]=1093683761
set HM4[70]=1093679446
set HN4[70]=1093746995
set HO4[70]=1093684557
set HP4[70]=1093679152
set HM4[71]=1093748023
set HN4[71]=1093747792
set HO4[71]=1093748022
set HP4[71]=1093747023
set HM4[72]=1093686322
set HN4[72]=1093686099
set HO4[72]=1093744948
set HP4[72]=1093686103
set HM4[73]=1093684564
set HN4[73]='A2WJ'
set HO4[73]=1093679428
set HP4[73]=1093681987
set HM4[74]=1093678134
set HN4[74]=1093678149
set HO4[74]=1093678132
set HP4[74]=1093810505
set HM4[75]=1093816137
set HN4[75]=1093683019
set HO4[75]=1093678169
set HP4[75]=1093677649
set HM4[76]=1093678422
set HN4[76]=1093677390
set HO4[76]=1093678640
set HP4[76]=1093678647
set HM4[77]=1093678665
set HN4[77]=1093678667
set HO4[77]=1093678660
set HP4[77]=1093747544
set HM4[78]=1093750840
set HN4[78]=1093682515
set HO4[78]=1093682997
set HP4[78]=1093682996
set HM4[79]=1093751127
set HN4[79]=1093681985
set HO4[79]=1093681991
set HP4[79]=1093682004
set HM4[80]=1093682521
set HN4[80]=1093681746
set HO4[80]=1093682773
set HP4[80]=1093810506
set HM4[81]=1093678671
set HN4[81]=1093683248
set HO4[81]=1093682753
set HP4[81]=1093678674
set HM4[82]=1093683510
set HN4[82]=1093686065
set HO4[82]=1093681974
set HP4[82]=1093682482
set HM4[83]=1093682499
set HN4[83]=1093684293
set HO4[83]=1093683512
set HP4[83]=1093684296
set HM4[84]=1093683507
set HN4[84]=1093684550
set HO4[84]=1093684551
set HP4[84]=1093684819
set HM4[85]=1093683287
set HN4[85]=1093682776
set HO4[85]=1093684801
set HP4[85]=1093683257
set HM4[86]=1093684813
set HN4[86]=1093684805
set HO4[86]=1093684815
set HP4[86]=1093684820
set HM4[87]=1093685065
set HN4[87]=1093685066
set HO4[87]=1093683526
set HP4[87]=1093685067
set HM4[88]=1093683765
set HN4[88]=1093681491
set HO4[88]=1093678672
set HP4[88]=1395667000
set HM4[89]=1093684802
set HN4[89]=1093684792
set HO4[89]=1093684791
set HP4[89]=1093684567
set HM4[90]=1093684817
set HN4[90]=1093742668
set HO4[90]=1093685074
set HP4[90]=1093742673
set HM4[91]=1093677385
set HN4[91]=1093685825
set HO4[91]=1093810232
set HP4[91]=1093685808
set HM4[92]=1093743955
set HN4[92]=1093685813
set HO4[92]=1093743958
set HP4[92]=1093743946
set HM4[93]=1093685573
set HN4[93]=1093685575
set HO4[93]=1093685815
set HP4[93]=1093685579
set HM4[94]=1093808471
set HN4[94]=1093808472
set HO4[94]=1093808470
set HP4[94]=1093808473
set HM4[95]=1093683511
set HN4[95]=1093744688
set HO4[95]=1093681713
set HP4[95]=1093747288
set HM4[96]=1093748044
set HN4[96]=1093744982
set HO4[96]=1093744986
set HP4[96]=1093744975
set HM4[97]=1093750087
set HN4[97]=1093748819
set HO4[97]=1093748817
set HP4[97]=1093750089
set HM4[98]=1093749069
set HN4[98]=1093749303
set HO4[98]=1093748818
set HP4[98]=1093749070
set HM4[99]=1093678156
set HN4[99]=1093683252
set HO4[99]=1093684566
set HP4[99]=1093678929
set HM4[100]=1093678679
set HN4[100]=1093677877
set HO4[100]=1093678678
set HP4[100]=1093808454
set HM4[101]=1093751608
set HN4[101]=1093751618
set HO4[101]=1093751604
set HP4[101]=1093751617
set HQ4[1]=1093747031
set HQ4[2]=1093810504
set HQ4[5]=1093681494
set HQ4[8]=1093750594
set HQ4[$B]=1093679450
set HQ4[$C]=1093747032
set HQ4[20]=1093752633
set HQ4[22]=1093752392
set HQ4[23]=1093748313
set HQ4[24]=1093747539
set HQ4[25]=1093677141
set HQ4[28]=1093681457
set HQ4[30]=1093747254
set HQ4[38]=1093747249
set HQ4[42]=1093747251
set HQ4[44]=1093751120
set HQ4[45]=1093747542
set HQ4[47]=1093747766
set HQ4[50]=1093808455
set HQ4[51]=1093679176
set HQ4[53]=1093679447
set HQ4[54]=1093681462
set HQ4[62]=1093747248
set HQ4[64]=1093681458
set HQ4[67]=1093810259
set HQ4[69]=1093747767
set HQ4[70]=1093752154
set HQ4[71]=1093752150
set HQ4[73]=1093677658
set HQ4[75]=1093747769
set HQ4[76]=1093679184
set HQ4[77]=1093747544
set HQ4[78]=1093747768
set HQ4[81]=1093747252
set HQ4[82]=1093750098
set HQ4[84]=1093747777
set HQ4[86]=1093684824
set HQ4[87]=1093752407
set HQ4[88]=1395667029
set HQ4[90]=1093747778
set HQ4[94]=1093748565
set HW4[1]="thunderbolt"
set HX4[1]="volcano"
set HY4[1]="passive"
set HZ4[1]="forkedlightning"
set HW4[2]="chainlightning"
set HX4[2]="thunderbolt"
set HY4[2]="passive"
set HZ4[2]="thunderclap"
set HW4[3]="passive"
set HX4[3]="slow"
set HY4[3]="locustswarm"
set HZ4[3]="poisonarrows"
set HW4[4]="carrionswarm"
set HX4[4]="acidbomb"
set HY4[4]="replenishmana"
set HZ4[4]="itemillusion"
set HW4[5]="blizzard"
set HX4[5]="entanglingroots"
set HY4[5]="passive"
set HZ4[5]="channel"
set HW4[6]="acidbomb"
set HX4[6]="passive"
set HY4[6]="volcano"
set HZ4[6]="chemicalrage"
set HW4[7]="mirrorimage"
set HX4[7]="ensnare"
set HY4[7]="passive"
set HZ4[7]="channel"
set HW4[8]="channel"
set HX4[8]="roar"
set HY4[8]="passive"
set HZ4[8]="fanofknives"
set HW4[9]="blizzard"
set HX4[9]="channel"
set HY4[9]="passive"
set HZ4[9]="passive"
set HW4[$A]="summongrizzly"
set HX4[$A]="fanofknives"
set HY4[$A]="passive"
set HZ4[$A]="bearform"
set HW4[$B]="shockwave"
set HX4[$B]="inferno"
set HY4[$B]="passive"
set HZ4[$B]="chainlightning"
set HW4[$C]="whirlwind"
set HX4[$C]="healingward"
set HY4[$C]="passive"
set HZ4[$C]="thunderbolt"
set HW4[$D]="blizzard"
set HX4[$D]="poisonarrows"
set HY4[$D]="passive"
set HZ4[$D]="channel"
set HW4[$E]="invisibility"
set HX4[$E]="thunderbolt"
set HY4[$E]="innerfire"
set HZ4[$E]="channel"
set HW4[$F]="charm"
set HX4[$F]="volcano"
set HY4[$F]="passive"
set HZ4[$F]="channel"
set HW4[16]="channel"
set HX4[16]="acidbomb"
set HY4[16]="acolyteharvest"
set HZ4[16]="metamorphosis"
set HW4[17]="thunderclap"
set HX4[17]="channel"
set HY4[17]="passive"
set HZ4[17]="berserk"
set HW4[18]="thunderbolt"
set HX4[18]="acidbomb"
set HY4[18]="bloodlust"
set HZ4[18]="passive"
set HW4[19]="drunkenhaze"
set HX4[19]="fanofknives"
set HY4[19]="curse"
set HZ4[19]="channel"
set HW4[20]="thunderbolt"
set HX4[20]="blink"
set HY4[20]="forceofnature"
set HZ4[20]="chainlightning"
set HW4[21]="acidbomb"
set HX4[21]="windwalk"
set HY4[21]="passive"
set HZ4[21]="passive"
set HW4[22]="blizzard"
set HX4[22]="channel"
set HY4[22]="passive"
set HZ4[22]="passive"
set HW4[23]="landmine"
set HX4[23]="stasistrap"
set HY4[23]="selfdestruct"
set HZ4[23]="summonward"
set HW4[24]="drunkenhaze"
set HX4[24]="thunderbolt"
set HY4[24]="charm"
set HZ4[24]="channel"
set HW4[25]="firebolt"
set HX4[25]="moonglaive"
set HY4[25]="passive"
set HZ4[25]="channel"
set HW4[26]="blizzard"
set HX4[26]="passive"
set HY4[26]="moonglaive"
set HZ4[26]="thunderbolt"
set HW4[27]="bearform"
set HX4[27]="curse"
set HY4[27]="passive"
set HZ4[27]="fanofknives"
set HW4[28]="forkedlightning"
set HX4[28]="hex"
set HY4[28]="magicleash"
set HZ4[28]="summonward"
set HW4[29]="channel"
set HX4[29]="fanofknives"
set HY4[29]="passive"
set HZ4[29]="passive"
set HW4[30]="thunderclap"
set HX4[30]="drunkenhaze"
set HY4[30]="passive"
set HZ4[30]="elementalfury"
set HW4[31]="stomp"
set HX4[31]="firebolt"
set HY4[31]="passive"
set HZ4[31]="passive"
set HW4[32]="thunderbolt"
set HX4[32]="passive"
set HY4[32]="windwalk"
set HZ4[32]="faeriefire"
set HW4[33]="breathoffire"
set HX4[33]="thunderbolt"
set HY4[33]="passive"
set HZ4[33]="metamorphosis"
set HW4[34]="passive"
set HX4[34]="blink"
set HY4[34]="passive"
set HZ4[34]="thunderbolt"
set HW4[35]="coldarrows"
set HX4[35]="silence"
set HY4[35]="passive"
set HZ4[35]="passive"
set HW4[36]="frostarmor"
set HX4[36]="antimagicshell"
set HY4[36]="passive"
set HZ4[36]="battleroar"
set HW4[37]="carrionswarm"
set HX4[37]="summonquillbeast"
set HY4[37]="passive"
set HZ4[37]="thunderbolt"
set HW4[38]="carrionswarm"
set HX4[38]="breathoffire"
set HY4[38]="passive"
set HZ4[38]="shockwave"
set HW4[39]="blizzard"
set HX4[39]="fanofknives"
set HY4[39]="passive"
set HZ4[39]="chemicalrage"
set HW4[40]="channel"
set HX4[40]="acidbomb"
set HY4[40]="windwalk"
set HZ4[40]="corporealform"
set HW4[41]="fanofknives"
set HX4[41]="chainlightning"
set HY4[41]="passive"
set HZ4[41]="carrionswarm"
set HW4[42]="thunderbolt"
set HX4[42]="poisonarrows"
set HY4[42]="passive"
set HZ4[42]="firebolt"
set HW4[43]="fanofknives"
set HX4[43]="windwalk"
set HY4[43]="passive"
set HZ4[43]="curse"
set HW4[44]="acidbomb"
set HX4[44]="channel"
set HY4[44]="phaseshift"
set HZ4[44]="blizzard"
set HW4[45]="channel"
set HX4[45]="charm"
set HY4[45]="blizzard"
set HZ4[45]="clusterrockets"
set HW4[46]="blizzard"
set HX4[46]="passive"
set HY4[46]="charm"
set HZ4[46]="acidbomb"
set HW4[47]="chainlightning"
set HX4[47]="acidbomb"
set HY4[47]="fanofknives"
set HZ4[47]="charm"
set HW4[48]=""
set HX4[48]=""
set HY4[48]=""
set HZ4[48]=""
set HW4[49]=""
set HX4[49]=""
set HY4[49]=""
set HZ4[49]=""
set HW4[50]=""
set HX4[50]=""
set HY4[50]=""
set HZ4[50]=""
set HW4[51]="frostnova"
set HX4[51]="frostarmor"
set HY4[51]="innerfire"
set HZ4[51]="sleep"
set HW4[52]="carrionswarm"
set HX4[52]="silence"
set HY4[52]="passive"
set HZ4[52]="locustswarm"
set HW4[53]="impale"
set HX4[53]="hex"
set HY4[53]="drain"
set HZ4[53]="chainlightning"
set HW4[54]="volcano"
set HX4[54]="passive"
set HY4[54]="summonward"
set HZ4[54]="summongrizzly"
set HW4[55]="shockwave"
set HX4[55]="innerfire"
set HY4[55]="carrionswarm"
set HZ4[55]="stomp"
set HW4[56]="cripple"
set HX4[56]="creepheal"
set HY4[56]="passive"
set HZ4[56]="fanofknives"
set HW4[57]="firebolt"
set HX4[57]="channel"
set HY4[57]="passive"
set HZ4[57]="mirrorimage"
set HW4[111]="spiritwolf"
set HX4[111]="channel"
set HY4[111]="passive"
set HZ4[111]="metamorphosis"
set HW4[112]="parasite"
set HX4[112]="inferno"
set HY4[112]="passive"
set HZ4[112]="roar"
set HW4[60]="acidbomb"
set HX4[60]="channel"
set HY4[60]="passive"
set HZ4[60]="passive"
set HW4[61]="bearform"
set HX4[61]="chainlightning"
set HY4[61]="manashield"
set HZ4[61]="charm"
set HW4[62]="thunderbolt"
set HX4[62]="drunkenhaze"
set HY4[62]="passive"
set HZ4[62]="itemchangetime"
set HW4[63]="thunderbolt"
set HX4[63]="passive"
set HY4[63]="passive"
set HZ4[63]="reincarnation"
set HW4[64]="channel"
set HX4[64]="fanofknives"
set HY4[64]="firebolt"
set HZ4[64]="doom"
set HW4[65]="impale"
set HX4[65]="creepheal"
set HY4[65]="carrionscarabsoff"
set HZ4[65]="windwalk"
set HW4[66]="berserk"
set HX4[66]="stomp"
set HY4[66]="passive"
set HZ4[66]="faeriefire"
set HW4[67]="shadowstrike"
set HX4[67]="blink"
set HY4[67]="fanofknives"
set HZ4[67]="carrionswarm"
set HW4[68]="berserk"
set HX4[68]="flamingarrows"
set HY4[68]="windwalk"
set HZ4[68]="innerfire"
set HW4[69]="carrionswarm"
set HX4[69]="passive"
set HY4[69]="passive"
set HZ4[69]="clusterrockets"
set HW4[70]="poisonarrows"
set HX4[70]="passive"
set HY4[70]="passive"
set HZ4[70]="shadowstrike"
set HW4[71]="fanofknives"
set HX4[71]="acidbomb"
set HY4[71]="passive"
set HZ4[71]="darkportal"
set HW4[72]="itemareaheal"
set HX4[72]="passive"
set HY4[72]="chainlightning"
set HZ4[72]="channel"
set HW4[73]="blizzard"
set HX4[73]="banish"
set HY4[73]="summongrizzly"
set HZ4[73]="drain"
set HW4[74]="acidbomb"
set HX4[74]="passive"
set HY4[74]="passive"
set HZ4[74]="stomp"
set HW4[75]="innerfire"
set HX4[75]="chainlightning"
set HY4[75]="sleep"
set HZ4[75]="magicleash"
set HW4[76]="fanofknives"
set HX4[76]="passive"
set HY4[76]="passive"
set HZ4[76]="thunderbolt"
set HW4[77]="channel"
set HX4[77]="immolation"
set HY4[77]="passive"
set HZ4[77]="magicleash"
set HW4[78]="channel"
set HX4[78]="passive"
set HY4[78]="passive"
set HZ4[78]="channel"
set HW4[79]="acidbomb"
set HX4[79]="windwalk"
set HY4[79]="passive"
set HZ4[79]="channel"
set HW4[80]="roar"
set HX4[80]="passive"
set HY4[80]="passive"
set HZ4[80]="stomp"
set HW4[81]="channel"
set HX4[81]="voodoo"
set HY4[81]="incinerate"
set HZ4[81]="charm"
set HW4[82]="channel"
set HX4[82]="creepheal"
set HY4[82]="passive"
set HZ4[82]="chainlightning"
set HW4[83]="soulburn"
set HX4[83]="passive"
set HY4[83]="passive"
set HZ4[83]="firebolt"
set HW4[84]="acidbomb"
set HX4[84]="chainlightning"
set HY4[84]="passive"
set HZ4[84]="windwalk"
set HW4[85]="acidbomb"
set HX4[85]="passive"
set HY4[85]="passive"
set HZ4[85]="ancestralspirit"
set HW4[86]="chainlightning"
set HX4[86]="immolation"
set HY4[86]="blizzard"
set HZ4[86]="tornado"
set HW4[87]="poisonarrows"
set HX4[87]="chainlightning"
set HY4[87]="passive"
set HZ4[87]="blizzard"
set HW4[88]="thunderbolt"
set HX4[88]="creepheal"
set HY4[88]="blizzard"
set HZ4[88]="inferno"
set HW4[89]="blizzard"
set HX4[89]="carrionscarabsoff"
set HY4[89]="passive"
set HZ4[89]="passive"
set HW4[90]="thunderbolt"
set HX4[90]="devourmagic"
set HY4[90]="darkportal"
set HZ4[90]="blizzard"
set HW4[91]="rainoffire"
set HX4[91]="flamestrike"
set HY4[91]="fanofknives"
set HZ4[91]="channel"
set HW4[92]="blizzard"
set HX4[92]="volcano"
set HY4[92]="acidbomb"
set HZ4[92]="metamorphosis"
set HW4[93]="blizzard"
set HX4[93]="thunderbolt"
set HY4[93]="bloodlust"
set HZ4[93]="curse"
set HW4[94]="roar"
set HX4[94]="fanofknives"
set HY4[94]="battleroar"
set HZ4[94]="howlofterror"
set HW4[95]="acidbomb"
set HX4[95]="thunderbolt"
set HY4[95]="channel"
set HZ4[95]="cannibalize"
set HW4[96]="blizzard"
set HX4[96]="thunderbolt"
set HY4[96]="metamorphosis"
set HZ4[96]="chainlightning"
set HW4[97]="channel"
set HX4[97]="blizzard"
set HY4[97]="berserk"
set HZ4[97]="acidbomb"
set HW4[98]="fanofknives"
set HX4[98]="channel"
set HY4[98]="passive"
set HZ4[98]="windwalk"
set HW4[99]="drain"
set HX4[99]="channel"
set HY4[99]="metamorphosis"
set HZ4[99]="cripple"
set HW4[100]="inferno"
set HX4[100]="summongrizzly"
set HY4[100]="chainlightning"
set HZ4[100]="immolation"
set HW4[101]=""
set HX4[101]=""
set HY4[101]=""
set HZ4[101]=""
set HM4[500]=1094004784
set HN4[500]=1094004785
set HO4[500]=1094004786
set HP4[500]=1094004787
set HW4[500]="humanbuild"
set HX4[500]="nightelfbuild"
set HY4[500]="orcbuild"
set HZ4[500]="undeadbuild"
set HR4[1]=1094070320
set HS4[1]=1094070321
set HT4[1]=1094070322
set HU4[1]=1094070323
set HR4[2]=1094070324
set HS4[2]=1094070325
set HT4[2]=1094070326
set HU4[2]=1094070327
set HR4[3]=1094070328
set HS4[3]=1094070329
set HT4[3]=1094070337
set HU4[3]=1094070338
set HR4[4]=1094070339
set HS4[4]=1094070340
set HU4[4]=1094070342
set HR4[5]=1094070343
set HS4[5]=1094070344
set HT4[5]=1094070345
set HU4[5]=1094070346
set HR4[6]=1094070347
set HT4[6]=1094070349
set HU4[6]=1094070350
set HR4[7]=1094070351
set HS4[7]=1094070352
set HT4[7]=1094070353
set HU4[7]=1094070354
set HR4[8]=1094070355
set HS4[8]=1094070356
set HT4[8]=1094070357
set HU4[8]=1094070358
set HR4[9]=1094070359
set HS4[9]=1094070360
set HT4[9]=1094070361
set HU4[9]=1094070362
set HR4[$A]=1094070576
set HS4[$A]=1094070577
set HR4[$B]=1094070580
set HS4[$B]=1094070581
set HT4[$B]=1094070582
set HU4[$B]=1094070583
set HR4[$C]=1094070584
set HS4[$C]=1094070585
set HT4[$C]=1094070593
set HU4[$C]=1094070594
set HR4[$D]=1094070595
set HS4[$D]=1094070596
set HT4[$D]=1094070597
set HU4[$D]=1094070598
set HR4[$E]=1094070599
set HS4[$E]=1094070600
set HT4[$E]=1094070601
set HU4[$E]=1094070602
set HR4[$F]=1094070603
set HT4[$F]=1094070605
set HU4[$F]=1094070606
set HR4[16]=1094070607
set HS4[16]=1094070608
set HT4[16]=1094070609
set HR4[17]=1094070611
set HS4[17]=1094070612
set HT4[17]=1094070613
set HU4[17]=1094070614
set HR4[18]=1094070615
set HS4[18]=1094070616
set HT4[18]=1094070617
set HR4[19]=1094070832
set HS4[19]=1094070833
set HT4[19]=1094070834
set HU4[19]=1094070835
set HR4[20]=1094070836
set HS4[20]=1094070837
set HT4[20]=1094070838
set HU4[20]=1094070839
set HR4[21]=1094070840
set HS4[21]=1094070841
set HT4[21]=1094070849
set HU4[21]=1094070850
set HR4[22]=1094070851
set HS4[22]=1094070852
set HT4[22]=1094070853
set HR4[23]=1094070855
set HS4[23]=1094070856
set HT4[23]=1094070857
set HU4[23]=1094070858
set HR4[24]=1094070859
set HS4[24]=1094070860
set HT4[24]=1094070861
set HU4[24]=1094070862
set HR4[25]=1094070863
set HT4[25]=1094070865
set HU4[25]=1094070866
set HR4[26]=1094070867
set HS4[26]=1094070868
set HU4[26]=1094070870
set HS4[27]=1094070872
set HT4[27]=1094070873
set HU4[27]=1094070874
set HR4[28]=1094071088
set HS4[28]=1094071089
set HT4[28]=1094071090
set HU4[28]=1094071091
set HR4[29]=1094071092
set HS4[29]=1094071093
set HT4[29]=1094071094
set HU4[29]=1094071095
set HR4[30]=1094071096
set HS4[30]=1094071097
set HT4[30]=1094071105
set HU4[30]=1094071106
set HR4[31]=1094071107
set HS4[31]=1094071108
set HT4[31]=1094071109
set HU4[31]=1094071110
set HR4[32]=1094071111
set HS4[32]=1094071112
set HT4[32]=1094071113
set HU4[32]=1094071114
set HR4[33]=1094071115
set HS4[33]=1094071116
set HT4[33]=1094071117
set HR4[34]=1094071119
set HS4[34]=1094071120
set HT4[34]=1094071121
set HU4[34]=1094071122
set HR4[35]=1094071123
set HS4[35]=1094071124
set HT4[35]=1094071125
set HU4[35]=1094071126
set HR4[36]=1094071127
set HS4[36]=1094071128
set HT4[36]=1094071129
set HU4[36]=1094071130
set HR4[37]=1094071344
set HS4[37]=1094071345
set HT4[37]=1094071346
set HU4[37]=1094071347
set HR4[38]=1094071348
set HS4[38]=1094071349
set HT4[38]=1094071350
set HU4[38]=1094071351
set HR4[39]=1094071352
set HT4[39]=1094071361
set HR4[40]=1094071363
set HS4[40]=1094071364
set HT4[40]=1094071365
set HU4[40]=1094071366
set HR4[41]=1094071367
set HS4[41]=1094071368
set HT4[41]=1094071369
set HU4[41]=1094071370
set HR4[42]=1094071371
set HS4[42]=1094071372
set HT4[42]=1094071373
set HU4[42]=1094071374
set HR4[43]=1094071375
set HS4[43]=1094071376
set HU4[43]=1094071378
set HR4[44]=1094071379
set HS4[44]=1094071380
set HT4[44]=1094071381
set HU4[44]=1094071382
set HR4[45]=1094071383
set HS4[45]=1094071384
set HT4[45]=1094071385
set HU4[45]=1094071386
set HR4[46]=1094071600
set HT4[46]=1094071602
set HU4[46]=1094071603
set HR4[47]=1094071604
set HS4[47]=1094071605
set HT4[47]=1094071606
set HU4[47]=1094071607
set HR4[48]=1094071608
set HS4[48]=1094071609
set HT4[48]=1094071617
set HU4[48]=1094071618
set HR4[49]=1094071619
set HS4[49]=1094071620
set HU4[49]=1094071622
set HR4[50]=1094071623
set HS4[50]=1094071624
set HT4[50]=1094071625
set HU4[50]=1094071626
set HR4[51]=1094071627
set HS4[51]=1094071628
set HT4[51]=1094071629
set HU4[51]=1094071630
set HR4[52]=1094071631
set HS4[52]=1094071632
set HU4[52]=1094071634
set HR4[53]=1094071635
set HS4[53]=1094071636
set HT4[53]=1094071637
set HU4[53]=1094071638
set HR4[54]=1094071639
set HS4[54]=1094071640
set HT4[54]=1094071641
set HU4[54]=1094071642
set HR4[55]=1094071856
set HS4[55]=1094071857
set HU4[55]=1094071859
set HR4[56]=1094071860
set HU4[56]=1094071863
set HR4[57]=1094071864
set HS4[57]=1094071865
set HT4[57]=1094071873
set HU4[57]=1094071874
set HR4[111]=1094071875
set HS4[111]=1094071876
set HT4[111]=1094071877
set HR4[112]=1094071879
set HS4[112]=1094071880
set HT4[112]=1094071881
set HR4[60]=1094071883
set HS4[60]=1094071884
set HT4[60]=1094071885
set HU4[60]=1094071886
set HS4[61]=1094071888
set HT4[61]=1094071889
set HU4[61]=1094071890
set HR4[62]=1094071891
set HS4[62]=1094071892
set HT4[62]=1094071893
set HU4[62]=1094071894
set HR4[63]=1094071895
set HS4[63]=1094071896
set HT4[63]=1094071897
set HU4[63]=1094071898
set HS4[64]=1094072113
set HT4[64]=1094072114
set HU4[64]=1094072115
set HR4[65]=1094072116
set HS4[65]=1094072117
set HT4[65]=1094072118
set HU4[65]=1094072119
set HR4[66]=1094072120
set HS4[66]=1094072121
set HT4[66]=1094072129
set HU4[66]=1094072130
set HR4[67]=1094072131
set HS4[67]=1094072132
set HT4[67]=1094072133
set HU4[67]=1094072134
set HR4[68]=1094072135
set HS4[68]=1094072136
set HT4[68]=1094072137
set HU4[68]=1094072138
set HR4[69]=1094072139
set HS4[69]=1094072140
set HT4[69]=1094072141
set HU4[69]=1094072142
set HR4[70]=1094072143
set HS4[70]=1094072144
set HT4[70]=1094072145
set HU4[70]=1094072146
set HR4[71]=1094072147
set HS4[71]=1094072148
set HT4[71]=1094072149
set HU4[71]=1094072150
set HS4[72]=1094072152
set HT4[72]=1094072153
set HR4[73]=1094072368
set HS4[73]=1094072369
set HT4[73]=1094072370
set HU4[73]=1094072371
set HR4[74]=1094072372
set HS4[74]=1094072373
set HU4[74]=1094072375
set HR4[75]=1094072376
set HS4[75]=1094072377
set HT4[75]=1094072385
set HU4[75]=1094072386
set HR4[76]=1094072387
set HS4[76]=1094072388
set HT4[76]=1094072389
set HU4[76]=1094072390
set HR4[77]=1094072391
set HS4[77]=1094072392
set HT4[77]=1094072393
set HU4[77]=1094072394
set HS4[78]=1094072396
set HT4[78]=1094072397
set HU4[78]=1094072398
set HR4[79]=1094072399
set HS4[79]=1094072400
set HT4[79]=1094072401
set HU4[79]=1094072402
set HR4[81]=1094072407
set HS4[81]=1094072408
set HT4[81]=1094072409
set HU4[81]=1094072410
set HR4[82]=1094072624
set HS4[82]=1094072625
set HT4[82]=1094072626
set HU4[82]=1094072627
set HR4[83]=1094072628
set HS4[83]=1094072629
set HT4[83]=1094072630
set HU4[83]=1094072631
set HR4[84]=1094072632
set HS4[84]=1094072633
set HT4[84]=1094072641
set HU4[84]=1094072642
set HR4[85]=1094072643
set HS4[85]=1094072644
set HT4[85]=1094072645
set HU4[85]=1094072646
set HR4[86]=1094072647
set HS4[86]=1094072648
set HT4[86]=1094072649
set HU4[86]=1094072650
set HR4[87]=1094072651
set HS4[87]=1094072652
set HT4[87]=1094072653
set HU4[87]=1094072654
set HR4[88]=1094072655
set HS4[88]=1094072656
set HT4[88]=1094072657
set HU4[88]=1094072658
set HR4[89]=1094072659
set HT4[89]=1094072661
set HR4[90]=1094072663
set HS4[90]=1094072664
set HT4[90]=1094072665
set HU4[90]=1094072666
set HR4[91]=1094074672
set HS4[91]=1094074673
set HT4[91]=1094074674
set HU4[91]=1094074675
set HR4[92]=1094074676
set HS4[92]=1094074677
set HT4[92]=1094074678
set HR4[93]=1094074680
set HS4[93]=1094074681
set HT4[93]=1094074689
set HU4[93]=1094074690
set HR4[95]=1094074695
set HS4[95]=1094074696
set HT4[95]=1094074697
set HU4[95]=1094074698
set HR4[96]=1094074699
set HS4[96]=1094074700
set HU4[96]=1094074702
set HR4[97]=1094074703
set HS4[97]=1094074704
set HT4[97]=1094074705
set HU4[97]=1094074706
set HR4[98]=1094074707
set HS4[98]=1094074708
set HT4[98]=1094074709
set HU4[98]=1094074710
set HV4[1]=1094135856
set HV4[2]=1094135857
set HV4[5]=1094135858
set HV4[8]=1094135897
set HV4[$B]=1094135859
set HV4[$C]=1094135860
set HV4[20]=1094135861
set HV4[23]=1094135862
set HV4[24]=1094135863
set HV4[25]=1094135864
set HV4[28]=1094135865
set HV4[30]=1094135873
set HV4[38]=1094135874
set HV4[42]=1094135875
set HV4[45]=1094135876
set HV4[47]=1094135877
set HV4[50]=1094135878
set HV4[51]=1094135879
set HV4[53]=1094135880
set HV4[54]=1094135881
set HV4[62]=1094135882
set HV4[64]=1094135883
set HV4[67]=1094135884
set HV4[69]=1094135885
set HV4[73]=1094135886
set HV4[75]=1094135887
set HV4[76]=1094135888
set HV4[77]=1094135889
set HV4[78]=1094135890
set HV4[81]=1094135891
set HV4[82]=1094135896
set HV4[84]=1094135892
set HV4[86]=1094135893
set HV4[90]=1094135894
endfunction
function E5 takes nothing returns nothing
set HK4[FV]=500
set HK4[JV]=500
set HK4[MV]=450
set HK4[NV]=$B9
set HK4[OV]=450
set HK4[QV]=$3E8
set HK4[SV]=450
set HK4[TV]=$4B0
set HK4[UV]=550
set HK4[XV]=$578
set HK4[AV]=$960
set HK4[BV]=$CE4
set HK4[CV]=$3E8
set HK4[LV]=$96
set HK4[EW]=700
set HK4[HW]=700
set HK4[NW]=950
set HK4[OW]=$834
set HK4[QW]=53
set HK4[RW]=$866
set HK4[TW]=$866
set HK4[UW]=$96
set HK4[VW]=900
set HK4[YW]=$C80
set HK4[ZW]=$640
set HK4[GX]=$A8C
set HK4[NX]=$3E8
set HK4[RX]=550
set HK4[SX]=$578
set HK4[WX]=$4B0
set HK4[YX]=900
set HK4[ZX]=875
set HK4[AX]=$AF
set HK4[GY]=350
set HK4[HY]=450
set HK4[SY]=$ED8
set HK4[UY]=$96
set HK4[ZY]=325
set HK4[DZ]=$3E8
set HK4[EZ]=$FA
set HK4[HZ]=$FA
set HK4[NZ]=$834
set HK4[OZ]=$44C
set HK4[RZ]=875
set HK4[UZ]=$5DC
set HK4[XZ]=600
set HK4[AZ]=600
set HK4[BZ]=600
set HK4[CZ]=600
set HK4[IA]=600
set HK4[JA]=600
set HK4[NA]=600
set HK4[QA]=600
set HK4[WA]=600
set HK4[YA]=600
set HK4[HJ0]=600
set HK4[HJ1]=600
set HK4[ZA]=$C8
set HK4[BA]=$E1
set HK4[GB]=$E1
set HK4[JB]=$708
set HK4[OC]=50
set HK4[PC]=0
set HK4[QC]=100
set HK4[TC]=125
set HK4[VC]=$C8
set HK4[WC]=$C8
set HK4[XC]=75
set HK4[YC]=75
set HK4[ZC]=$96
set HK4[AC]=$3E8
set HK4[BC]=0
set HK4[CC]=$B4
set HK4[Y3]=$6D6
set HK4[Z3]=603
set HK4[B3]=803
set HK4[C3]=500
set HK4[E6]=500
set HK4[F6]=$9C4
set HK4[FF6]=4450
set HK4[G6]=$5AA
set HK4[H6]=$5AA
set HK4[N6]=$5AA
set HK4[S6]=$76C
set HK4[W6]=$68B
set HK4[A6]=525
set HK4[DL]=485
set HK4[HL]=505
set HK4[OL]=$866
set HK4[RL]=$866
set HK4[RLL]=5100
set HK4[R00]=1900
set HK4[R01]=1900
set HK4[WL]=$B86
set HK4[ZL]=$B86
set HK4[AL]=$898
set HK4[LL]=$A8C
set HK4[D1]=$CE4
set HK4[E1]=4150
set HK4[F1]=$CE4
set HK4[H1]=4150
set HK4[J1]=$73A
set HK4[O1]=$73A
set HK4[P1]=$76C
set HK4[Q1]=$AF0
set HK4[R1]=$CE4
set HK4[T1]=$902
set HK4[U1]=4300
set HK4[V1]=3500
set HK4[X1]=4575
set HK4[A1]=$866
set HK4[D0]=$F3C
set HK4[E0]=$F3C
set HK4[J0]=$F3C
set HK4[N0]=$F3C
set HK4[O0]=$F3C
set HK4[R0]=$F3C
set HK4[X0]=0
set HK4[Y0]=4900
set HK4[B0]=4900
set HK4[C0]=$CE4
set HK4[F5]=$AF5
set HK4[G5]=4105
set HK4[J5]=5405
set HK4[M5]=6705
set HK4[N5]=8005
set HK4[R5]=$A8C
set HK4[S5]=$F6E
set HK4[T5]=5200
set HK4[W5]=5175
set HK4[A5]=5175
set HK4[B5]=6200
set HK4[L5]=5750
set HK4[E2]=5400
set HK4[F2]=5400
set HK4[H2]=5150
set HK4[P2]=5150
set HK4[R2]=5500
set HK4[T2]=6150
set HK4[W2]=5750
set HK4[X2]=5750
set HK4[Z2]=6000
set HK4[D44]=5300
set HK4[D74]=5675
set HK4[D84]=$8B1
set HK4[D94]=$8B1
set HK4[DE4]=5400
set HK4[DF4]=370
set HK4[DG4]=$802
set HK4[DH4]=5350
set HK4[DI4]=4875
set HK4[DJ4]=$84D
set HK4[DK4]=$A28
set HK4[DM4]=$A28
set HK4[DN4]=$A28
set HK4[DO4]=$A28
set HK4[DP4]=4700
set HK4[DQ4]=4700
set HK4[DR4]=4075
set HK4[DS4]=$578
set HK4[DT4]=491
set HK4[DU4]=$898
set HK4[DV4]=$E2C
set HK4[DW4]=550
set HK4[DX4]=550
set HK4[DY4]=875
set HK4[DA4]=$640
set HK4[DB4]=$C8
set HK4[DC4]=$C8
set HK4[D34]=$7D0
set HK4[D64]=0
set HK4[DL4]=$578
set HK4[D04]=$BE
set HK4[D54]=$96
set HK4[D24]=$AA
set HK4[D_4]=700
set HK4[E44]=700
set HK4[EZA]=825
set HK4[EZB]=3550
set HK4[EZZ]=600
set HK4[EZY]=125
set HK4[R02]=75
set HK4[E74]=$3E8
set HK4[E84]=800
set HK4[E94]=850
set HK4[ED4]=$3E8
set HK4[EE4]=600
set HK4[EEO]=950
set HK4[EF4]=900
set HK4[EG4]=0
set HK4[EH4]=300
set HK4[EI4]=500
set HK4[EJ4]=$514
set HK4[EK4]=650
set HK4[EM4]=1550
set HK4[R35]=235
set HK4[R41]=150
set HK4[EN4]=$514
set HK4[EO4]=$4E2
set HK4[EP4]=$52D
set HK4[EQ4]=$4B0
set HK4[ER4]=$546
set HK4[ES4]=$4B0
set HK4[ET4]=$44C
set HK4[EU4]=0
set HK4[EV4]=$753
set HK4[EX4]=$C8
set HK4[EY4]=300
set HK4[EZ4]=$514
set HK4[EA4]=700
set HK4[EB4]=600
set HK4[EC4]=$96
set HK4[E34]=300
set HK4[E64]=900
set HK4[EL4]=600
set HK4[E14]=$FA
set HK4[FD4]=$4E2
set HK4[FE4]=775
set HK4[E_4]=350
set HK4[F44]=350
set HK4[F74]=$5DC
set HK4[QB]=$5DC
set HK4[RB]=$5DC
set HK4[VB]=$6BD
set HK4[WB]=$6BD
set HK4[H3]=100
set HK4[M3]=1200
set HK4[R03]=3000
set HK4[R05]=1544
set HK4[R06]=5300
set HK4[R0A]=1950
set HK4[R10]=125
set HK4[R11]=500
set HK4[R7u]=1000
set HK4[R7t]=7195
set HK4[F94]=325
set HK4[F84]=750
set HK4[N3]=$A5A
set HK4[R3]=$F6E
set HK4[FC]=$C1C
set HK4[LB]=$401
set HK4[EC]=$401
set HK4[U3]=6400
set HK4[Rgg]=4200
set HK4[JC]=985
set HK4[NC]=985
set HK4[GC]=4200
set HK4[FS4]=4200
set HK4[FT4]=4200
set HK4[FU4]=4200
set HK4[FV4]=4200
set HK4[FW4]=4200
set HK4[FX4]=4200
set HK4[FY4]=4200
set HK4[FZ4]=4200
set HK4[FA4]=4200
set HK4[FB4]=4200
set HK4[F34]=4200
set HK4[F64]=4200
set HK4[FL4]=4200
set HK4[F14]=4200
set HK4[F04]=4200
set HK4[F54]=4200
set HK4[F24]=4200
set HK4[F_4]=4200
set HK4[G44]=4200
set HK4[G74]=4200
set HK4[G84]=4200
set HK4[G94]=4200
set HK4[GD4]=4200
set HK4[GE4]=4200
set HK4[GG4]=4200
set HK4[GH4]=4200
set HK4[GI4]=4200
set HK4[GJ4]=4200
set HK4[GK4]=4200
set HK4[GM4]=4200
set HK4[GN4]=4200
set HK4[GO4]=4200
set HK4[GP4]=4200
set HK4[GQ4]=4200
set HK4[GR4]=4200
set HK4[GS4]=4200
set HK4[GT4]=4200
set HK4[GU4]=4200
set HK4[FC4]=4200
set HK4[GV4]=4200
set HK4[GW4]=4200
set HK4[GY4]=4200
set HK4[GZ4]=4200
set HK4[GA4]=4200
set HK4[GB4]=4200
set HK4[G34]=4200
set HK4[G64]=4200
set HK4[GL4]=4200
set HK4[G14]=4200
set HK4[G04]=4200
set HK4[G54]=4200
set HK4[G24]=4200
set HK4[GX4]=4200
set HK4[R12]=4200
set HK4[R13]=4200
set HK4[R15]=4200
set HK4[R16]=4200
set HK4[R1A]=4200
set HK4[R1C]=4200
set HK4[R1H]=4200
set HK4[R1I]=4200
set HK4[R1J]=4200
set HK4[R1K]=4200
set HK4[R1L]=4200
set HK4[R1M]=4200
set HK4[R1N]=4200
set HK4[R1O]=4200
set HK4[R1P]=4200
set HK4[R21]=4200
set HK4[R3B]=4200
endfunction
function is takes unit it returns boolean
return((GetUnitCurrentOrder(it)<$D0020)and(Bz>hq[832+GetPlayerId(GetOwningPlayer(it))]))
endfunction
function K37 takes unit K67 returns boolean
local integer KL7=GetUnitCurrentOrder(K67)
return(KL7==0)or(KL7==$D0005)or(KL7==$D0007)or(KL7==$D0013)or(KL7==$D0019)
endfunction
function iU takes unit it returns boolean
local integer X5=GetUnitCurrentOrder(it)
return((X5<$D0020)and((GetUnitAbilityLevel(it,1110454618)==0))and((X5!=$D000F)or(not GZ[48+GetPlayerId(GetOwningPlayer(it))]))and(Bz>hq[832+GetPlayerId(GetOwningPlayer(it))])and(GetUnitAbilityLevel(it,1110459975)==0))
endfunction
function iy takes unit it returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(it))
return((h4[O5]==null)and((h4[$A0+O5]==null)or(GetWidgetLife(h4[$A0+O5])<=.405)or(not IsUnitInRange(h4[$A0+O5],it,1000.)))and(not G0[$90+O5]))
endfunction
function K17 takes unit it returns boolean
local integer X5=GetUnitCurrentOrder(it)
local integer i1=GetUnitTypeId(it)
local integer K07=GetHandleId(it)
if hq[832+GetPlayerId(GetOwningPlayer(it))]>Bz then
return false
elseif((X5==$D0005)or(GetWidgetLife(it)<=.405)or(IsUnitPaused(it)))then
return false
elseif(X5>$D0027)and(X5<$D002E)and((GetItemTypeId(UnitItemInSlot(it,X5-$D0027))==ZU[YC])or(GetItemTypeId(UnitItemInSlot(it,X5-$D0027))==ZU[F6])or(GetItemTypeId(UnitItemInSlot(it,X5-$D0027))==ZU[FF6]))then
return false
elseif((X5<$D0028)and((i1!=1328558154)or((LoadBoolean(L7,K07,1145131595)==false))))then
return true
elseif(GetUnitAbilityLevel(it,1110459975)!=0)then
return false
endif
return((X5>$D002D)and(X5!=$D0200)and(X5!=$D022D)and(X5!=$D0207)and(X5!=$D0275)and((i1!=1160786243)or(X5!=$D0079))and((i1!=1429221451)or(X5!=$D0265))and((X5!=$D0278)or((i1!=1214931305)and(i1!=1316252014)and(i1!=1214409837)))and(((i1!=1164277353)and(i1!=1164277357)and(i1!=1160786518)and(i1!=1160786519)and(i1!=1160786517))or(X5!=$D00DD))and((i1!=1311780946)or(X5!=$D010E))and((i1!=1311786311)or(X5!=$D02B6))and((i1!=1328558389)or(X5!=$D0265)))
endfunction
function K57 takes unit it returns boolean
local integer X5=GetUnitCurrentOrder(it)
local integer i1=GetUnitTypeId(it)
local integer K07=GetHandleId(it)
if hq[832+GetPlayerId(GetOwningPlayer(it))]>Bz then
return false
elseif((X5==$D0005)or(GetWidgetLife(it)<=.405)or(IsUnitPaused(it)))then
return false
elseif(X5>$D0027)and(X5<$D002E)and((GetItemTypeId(UnitItemInSlot(it,X5-$D0027))==ZU[YC])or(GetItemTypeId(UnitItemInSlot(it,X5-$D0027))==ZU[F6])or(GetItemTypeId(UnitItemInSlot(it,X5-$D0027))==ZU[FF6]))then
return false
elseif((X5<$D0028)and((i1!=1328558154)or((LoadBoolean(L7,K07,1145131595)==false))))then
return true
elseif(X5==$D0278)and((i1==1212363833))then
return false
elseif(GetUnitAbilityLevel(it,1110459975)!=0)then
return false
endif
return((X5>$D002D)and(X5!=$D0200)and(X5!=$D022D)and(X5!=$D0207)and(X5!=$D0275)and((i1!=1160786243)or(X5!=$D0079))and((i1!=1315334514)or(X5!=$D009F))and((i1!=1429221451)or(X5!=$D0265))and((X5!=$D0249)or((i1!=1211117641)and(i1!=1211117642)))and((X5!=$D0278)or((i1!=1214931305)and(i1!=1316252014)and(i1!=1214409837)))and(((i1!=1164277353)and(i1!=1164277357)and(i1!=1160786518)and(i1!=1160786519)and(i1!=1160786517))or(X5!=$D00DD))and((i1!=1311780946)or(X5!=$D010E))and((i1!=1311786311)or(X5!=$D02B6))and((i1!=1328558389)or(X5!=$D0265))and((i1!=1429221451)or(X5!=$D0217))and((i1!=1311780930)or(X5!=$D0222))and(((i1==1211119192)or(i1==1211119193)or(i1==1211119191))or(X5!=$D0118)))
endfunction
function i2 takes unit it returns boolean
local integer X5=GetUnitCurrentOrder(it)
local integer i1=GetUnitTypeId(it)
if(X5<$D0028)then
return false
endif
return((X5<=$D002D)or(X5==$D0200)or(X5==$D0207)or(X5==$D0275)or((i1==1328558154)and((GetUnitAbilityLevel(it,1110454618)>0)))or((i1==1160786243)and(X5==$D0079))or((i1==1315334514)and(X5==$D009F))or((i1==1429221451)and(X5==$D0265))or(((i1==1214931305)or(i1==1316252014)or(i1==1214409837))and(X5==$D0278)))
endfunction
function K27 takes integer O5 returns player
if((O5>0)and(O5<6))then
return Z7[O5]
elseif((O5>5)and(O5<$B))then
return A7[O5-5]
endif
return null
endfunction
function K_7 takes string O5 returns player
if O5=="0" then
set bj_forLoopAIndex=$A
else
set bj_forLoopAIndex=S2I(O5)
endif
if((bj_forLoopAIndex>0)and(bj_forLoopAIndex<6))then
return Z7[bj_forLoopAIndex]
elseif((bj_forLoopAIndex>5)and(bj_forLoopAIndex<$B))then
return A7[bj_forLoopAIndex-5]
endif
return null
endfunction
function i5 takes player pl returns integer
local integer O5=1
loop
exitwhen O5>5
if(pl==Z7[O5])then
return O5
elseif(pl==A7[O5])then
return O5+5
endif
set O5=O5+1
endloop
return 0
endfunction
function M47 takes unit I_7 returns boolean
if IsUnitAlly(I_7,Z7[0])then
return IsUnitVisible(I_7,Y44)
else
return IsUnitVisible(I_7,X_4)
endif
return false
endfunction
function M77 takes unit I_7 returns boolean
if IsUnitAlly(I_7,Z7[0])then
return IsVisibleToPlayer(GetUnitX(I_7),GetUnitY(I_7),Y44)
else
return IsVisibleToPlayer(GetUnitX(I_7),GetUnitY(I_7),X_4)
endif
return false
endfunction
function M87 takes unit it returns boolean
return(GetWidgetLife(it)>.405 and((not IsUnitType(it,UNIT_TYPE_HERO))or(not IG4[GetPlayerId(GetOwningPlayer(it))])))
endfunction
function M97 takes unit MD7,unit I_7 returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(I_7))
return((IsUnitType(MD7,UNIT_TYPE_HERO))and(((R2I(GetWidgetLife(MD7))<(300+(GetHeroLevel(MD7)*30)))and(GetUnitLifePercent(MD7)<40.))or((hq[624+O5]>Bz and h4[O5]==MD7)))and(M87(MD7)))
endfunction
function ME7 takes unit it returns boolean
return((IsUnitType(it,UNIT_TYPE_HERO))and(R2I(GetWidgetLife(it))<(300+(GetHeroLevel(it)*30)))and(GetUnitLifePercent(it)<40.)and(M87(it)))
endfunction
function MF7 takes integer O5 returns boolean
return(hq[624+O5]>Bz and h4[O5]!=null)and(not ME7(M7[O5]))
endfunction
function MG7 takes unit it returns boolean
return((GetUnitAbilityLevel(it,1110459472)>0)or(GetUnitAbilityLevel(it,1093687122)>0)or(GetUnitAbilityLevel(it,1110454856)>0))
endfunction
function MH7 takes unit it returns boolean
return((IsUnitType(it,UNIT_TYPE_HERO))and(R2I(GetWidgetLife(it))<(600+(GetHeroLevel(it)*30)))and(GetWidgetLife(it)>.405))
endfunction
function MI7 takes unit it,unit IB returns boolean
return((IsUnitType(it,UNIT_TYPE_HERO))and(R2I(GetWidgetLife(it))<(300+(GetHeroLevel(it)*30)))and(GetUnitLifePercent(it)<40.)and(GetWidgetLife(it)>.405)and(GetUnitState(IB,UNIT_STATE_LIFE)>(GetUnitState(it,UNIT_STATE_LIFE)-(10.*GetHeroLevel(IB)))))
endfunction
function IC takes integer O5 returns boolean
return((V[O5]-3)>=T[O5])
endfunction
function Id takes integer O5 returns boolean
return((h4[O5]!=null)and(MI7(h4[O5],M7[O5])))
endfunction
function Ie takes rect r,boolexpr Ig returns unit
call GroupClear(ig)
call GroupEnumUnitsInRect(ig,r,Ig)
set bj_groupRandomConsidered=0
set bj_groupRandomCurrentPick=null
call ForGroup(ig,function GroupPickRandomUnitEnum)
call DestroyBoolExpr(Ig)
return bj_groupRandomCurrentPick
endfunction
function MJ7 takes nothing returns nothing
set bj_groupCountUnits=bj_groupCountUnits+1
set G27=G27+GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)
endfunction
function IH takes player pl,boolexpr Ig returns integer
call GroupClear(ig)
call GroupEnumUnitsOfPlayer(ig,pl,Ig)
set bj_groupCountUnits=0
call ForGroup(ig,function CountUnitsInGroupEnum)
call DestroyBoolExpr(Ig)
return bj_groupCountUnits
endfunction
function MK7 takes real Im,location b5,boolexpr Ig returns unit
set bj_groupRandomConsidered=0
set bj_groupRandomCurrentPick=null
call GroupClear(H9)
call GroupEnumUnitsInRangeOfLoc(H9,b5,Im,Ig)
call ForGroup(H9,function GroupPickRandomUnitEnum)
call DestroyBoolExpr(Ig)
return bj_groupRandomCurrentPick
endfunction
function MM7 takes real Im,unit I_7,boolexpr Ig returns unit
set bj_groupRandomConsidered=0
set bj_groupRandomCurrentPick=null
call GroupClear(H9)
call GroupEnumUnitsInRange(H9,GetUnitX(I_7),GetUnitY(I_7),Im,Ig)
call ForGroup(H9,function GroupPickRandomUnitEnum)
call DestroyBoolExpr(Ig)
return bj_groupRandomCurrentPick
endfunction
function MN7 takes real Im,location b5,boolexpr Ig returns unit
call GroupClear(H9)
call GroupEnumUnitsInRangeOfLoc(H9,b5,Im,Ig)
call DestroyBoolExpr(Ig)
return FirstOfGroup(H9)
endfunction
function MO7 takes real Im,location b5,boolexpr Ig returns integer
call GroupClear(H8)
call GroupEnumUnitsInRangeOfLoc(H8,b5,Im,Ig)
set bj_groupCountUnits=0
call ForGroup(H8,function CountUnitsInGroupEnum)
call DestroyBoolExpr(Ig)
return bj_groupCountUnits
endfunction
function MP7 takes real Im,unit it,boolexpr Ig returns integer
call GroupClear(H8)
call GroupEnumUnitsInRange(H8,GetUnitX(it),GetUnitY(it),Im,Ig)
set bj_groupCountUnits=0
set G27=.0
call ForGroup(H8,function MJ7)
call DestroyBoolExpr(Ig)
return bj_groupCountUnits
endfunction
function IV takes real x,real y,real IW,boolexpr Ig,code IX returns nothing
call GroupClear(iF)
call GroupEnumUnitsInRange(iF,x,y,IW,Ig)
call ForGroup(iF,IX)
call DestroyBoolExpr(Ig)
endfunction
function MQ7 takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))and(GetWidgetLife(GetFilterUnit())>.405)and((i1==1697656915)or(i1==1697657137)or(i1==1697656914)or(i1==1697657145)or(i1==1966092366)or(i1==1966092356)or(i1==1966092365)or(i1==1966092372)))!=null
endfunction
function MR7 takes unit it,integer Iz returns boolean
local integer I8=0
local item ja
set bj_lastCreatedItem=null
loop
set ja=UnitItemInSlot(it,I8)
if((ja!=null)and(GetItemTypeId(ja)==Iz))then
set bj_lastCreatedItem=ja
set ja=null
return true
endif
set I8=I8+1
exitwhen I8>=bj_MAX_INVENTORY
endloop
set ja=null
return false
endfunction
function MS7 takes unit it returns boolean
local integer I8=0
loop
if(UnitItemInSlot(it,I8)==null)then
return false
endif
set I8=I8+1
exitwhen(I8>=bj_MAX_INVENTORY)
endloop
return true
endfunction
function MT7 takes unit it returns boolean
local integer I8=0
loop
if(UnitItemInSlot(it,I8)!=null)then
return false
endif
set I8=I8+1
exitwhen(I8>=bj_MAX_INVENTORY)
endloop
return true
endfunction
function MU7 takes unit S4,integer n5,item Z4 returns item
local integer D5
local item f5
set D5=0
loop
exitwhen D5>5
set f5=UnitItemInSlot(S4,D5)
if f5!=null and f5!=Z4 and GetItemTypeId(f5)==n5 then
set f5=null
return UnitItemInSlot(S4,D5)
endif
set D5=D5+1
endloop
set f5=null
return null
endfunction
function MV7 takes unit S4,integer n5 returns item
local integer D5
local item f5
set D5=0
loop
exitwhen D5>5
set f5=UnitItemInSlot(S4,D5)
if(f5!=null)and(GetItemTypeId(f5)==n5)then
set f5=null
return UnitItemInSlot(S4,D5)
endif
set D5=D5+1
endloop
set f5=null
return null
endfunction
function MW7 takes integer i1 returns boolean
return(i1==ZU[D0]or i1==ZU[E0]or i1==ZU[J0]or i1==ZU[N0]or i1==ZU[O0]or i1==ZU[R0])
endfunction
function MX7 takes integer i1,integer Iz,boolean MY7 returns boolean
if i1==Iz then
return true
elseif(i1==DW4 or i1==DX4)and(Iz==DW4 or Iz==DX4)then
return true
elseif(i1==EZ or i1==HZ)and(Iz==EZ or Iz==HZ)then
return true
elseif(i1==BA or i1==GB)and(Iz==BA or Iz==GB)then
return true
elseif(i1==WL or i1==ZL)and(Iz==WL or Iz==ZL)then
return true
elseif(i1==QB or i1==RB)and(Iz==QB or Iz==RB)then
return true
elseif(i1==Y0 or i1==B0)and(Iz==Y0 or Iz==B0)then
return true
elseif(i1==W2 or i1==X2)and(Iz==W2 or Iz==X2)then
return true
elseif(i1==D84 or i1==D94)and(Iz==D84 or Iz==D94)then
return true
elseif(i1==XZ or i1==AZ or i1==BZ or i1==CZ or i1==IA or i1==JA or i1==NA or i1==QA or i1==WA or i1==YA or i1==HJ0 or i1==HJ1)and(Iz==XZ or Iz==AZ or Iz==BZ or Iz==CZ or Iz==IA or Iz==JA or Iz==NA or Iz==QA or Iz==WA or Iz==YA or Iz==HJ0 or i1==HJ1)then
return true
elseif(i1==VB or i1==WB)and(Iz==VB or Iz==WB)then
return true
elseif(i1==G6 or i1==H6 or i1==N6)and(Iz==G6 or Iz==H6 or Iz==N6)then
return true
elseif(i1==DY4 or i1==DZ4)and(Iz==DY4 or Iz==DZ4)then
return true
elseif MY7 and((i1==D1 or i1==F1 or i1==E1 or i1==H1)and(Iz==D1 or Iz==F1 or Iz==E1 or Iz==H1))then
return true
elseif(i1==D1 or i1==F1)and(Iz==D1 or Iz==F1)then
return true
elseif(i1==E1 or i1==H1)and(Iz==E1 or Iz==H1)then
return true
elseif MY7 and((i1==F5 or i1==G5 or i1==J5 or i1==M5 or i1==N5)and(Iz==F5 or Iz==G5 or Iz==J5 or Iz==M5 or Iz==N5))then
return true
elseif MY7 and((i1==R5 or i1==S5 or i1==T5)and(Iz==R5 or Iz==S5 or Iz==T5))then
return true
elseif(i1==D0 or i1==E0 or i1==J0 or i1==N0 or i1==O0 or i1==R0)and(Iz==D0 or Iz==E0 or Iz==J0 or Iz==N0 or Iz==O0 or Iz==R0)then
return true
elseif(i1==C3 or i1==E6)and(Iz==C3 or Iz==E6)then
return true
elseif(i1==JC or i1==NC)and(Iz==JC or Iz==NC)then
return true
elseif(i1==H2 or i1==P2)and(Iz==H2 or Iz==P2)then
return true
elseif(i1==E2 or i1==F2)and(Iz==E2 or Iz==F2)then
return true
elseif(i1==R2 or i1==S2)and(Iz==R2 or Iz==S2)then
return true
elseif(i1==DK4 or i1==DM4 or i1==DN4 or i1==DO4)and(Iz==DK4 or Iz==DM4 or Iz==DN4 or Iz==DO4)then
return true
elseif(i1==XC or i1==YC)and(Iz==XC or Iz==YC)then
return true
elseif(i1==W5 or i1==A5)and(Iz==W5 or Iz==A5)then
return true
elseif(i1==B5 or i1==C5)and(Iz==B5 or Iz==C5)then
return true
elseif(i1==J1 or i1==O1)and(Iz==J1 or Iz==O1)then
return true
elseif(i1==EW or i1==HW)and(Iz==EW or Iz==HW)then
return true
elseif(i1==S6 or i1==V6)and(Iz==S6 or Iz==V6)then
return true
elseif(i1==DP4 or i1==DQ4)and(Iz==DP4 or Iz==DQ4)then
return true
endif
return false
endfunction
function MZ7 takes unit it,integer Iz returns boolean
local integer i=0
local item ja
local integer i1
local boolean MA7=false
set i=0
loop
exitwhen i>EV
if SU[i]==Iz or ZU[i]==Iz or BU[i]==Iz then
set Iz=i
exitwhen true
endif
set i=i+1
endloop
if i>EV then
return false
endif
set i=0
set bj_lastCreatedItem=null
loop
set ja=UnitItemInSlot(it,i)
if ja!=null then
set i1=KY7(ja)
if MX7(i1,Iz,true)then
set bj_lastCreatedItem=ja
set ja=null
return true
endif
endif
set i=i+1
exitwhen i>=bj_MAX_INVENTORY
endloop
set ja=null
return false
endfunction
function MB7 takes unit it returns boolean
local integer I8=0
local item ja
set bj_lastCreatedItem=null
loop
set ja=UnitItemInSlot(it,I8)
if((ja!=null)and(GetItemTypeId(ja)==ZU[DT4]or GetItemTypeId(ja)==ZU[ZA]))then
set bj_lastCreatedItem=ja
set ja=null
return true
endif
set I8=I8+1
exitwhen I8>=bj_MAX_INVENTORY
endloop
set ja=null
return false
endfunction
function MC7 takes unit j5,integer Iz returns boolean
local boolean jR=false
local integer O5
if(MZ7(j5,Iz))then
set O5=GetPlayerId(GetOwningPlayer(j5))
set GZ[$E0+O5]=true
set jR=UnitUseItem(j5,bj_lastCreatedItem)
set GZ[$E0+O5]=false
endif
return jR
endfunction
function M37 takes unit M67,unit ML7 returns boolean
local boolean M17=false
local integer O5=GetPlayerId(GetOwningPlayer(M67))
if((T14)and(not T_4[O5])and(GetUnitTypeId(M67)!=1211117642)and(not IsUnitIllusion(M67))and(Bz>T24[O5])and(ML7!=null)and(GetUnitLevel(M67)>5)and(GetUnitState(M67,UNIT_STATE_MANA)>300)and(not MR7(M67,ZU[F5]))and(not MR7(M67,ZU[G5]))and(not MR7(M67,ZU[J5]))and(not MR7(M67,ZU[M5]))and(not MR7(M67,ZU[N5]))and(GetRandomInt(1,4)!=4))then
if(GetUnitLevel(M67)>$C and GetUnitLevel(M67)<20)then
set UG4=GetRandomInt(3,5)
elseif(GetUnitLevel(M67)>19 and GetUnitLevel(M67)<25)then
set UG4=GetRandomInt(4,5)
elseif(GetUnitLevel(M67)>24)then
set UG4=5
else
set UG4=GetRandomInt(1,5)
endif
set U74[O5]=CreateItem(T04[UG4],9999,-9999)
set T_4[O5]=false
if(U74[O5]!=null)then
set U44[O5]=UnitItemInSlot(M67,5)
if(U44[O5]!=null)then
call DisableTrigger(H94)
call UnitRemoveItem(M67,U44[O5])
call SetItemPosition(U44[O5],9999,-9999)
call EnableTrigger(H94)
endif
call J_7(.2)
set T_4[O5]=(UnitAddItem(M67,U74[O5]))
call SetItemPlayer(U74[O5],GetOwningPlayer(M67),true)
endif
if(T_4[O5])then
else
if(U44[O5]!=null)then
call J_7(.2)
call UnitAddItem(M67,U44[O5])
call KX7(U74[O5])
endif
set T_4[O5]=false
set U74[O5]=null
set U44[O5]=null
endif
else
if((MR7(M67,ZU[N5]))and(not IsUnitIllusion(ML7))and(IsUnitInRange(M67,ML7,800.))and((GetUnitState(ML7,UNIT_STATE_LIFE)>10.)and(GetUnitState(ML7,UNIT_STATE_LIFE)<650.)))then
set M17=(ML7!=null)and(UnitUseItemTarget(M67,bj_lastCreatedItem,ML7))
elseif((MR7(M67,ZU[M5]))and(not IsUnitIllusion(ML7))and(IsUnitInRange(M67,ML7,750.))and((GetUnitState(ML7,UNIT_STATE_LIFE)>10.)and(GetUnitState(ML7,UNIT_STATE_LIFE)<550.)))then
set M17=(ML7!=null)and(UnitUseItemTarget(M67,bj_lastCreatedItem,ML7))
elseif((MR7(M67,ZU[J5]))and(not IsUnitIllusion(ML7))and(IsUnitInRange(M67,ML7,700.))and((GetUnitState(ML7,UNIT_STATE_LIFE)>10.)and(GetUnitState(ML7,UNIT_STATE_LIFE)<450.)))then
set M17=(ML7!=null)and(UnitUseItemTarget(M67,bj_lastCreatedItem,ML7))
elseif((MR7(M67,ZU[G5]))and(not IsUnitIllusion(ML7))and(IsUnitInRange(M67,ML7,650.))and((GetUnitState(ML7,UNIT_STATE_LIFE)>10.)and(GetUnitState(ML7,UNIT_STATE_LIFE)<350.)))then
set M17=(ML7!=null)and(UnitUseItemTarget(M67,bj_lastCreatedItem,ML7))
elseif((MR7(M67,ZU[F5]))and(not IsUnitIllusion(ML7))and(IsUnitInRange(M67,ML7,600.))and((GetUnitState(ML7,UNIT_STATE_LIFE)>10.)and(GetUnitState(ML7,UNIT_STATE_LIFE)<250.)))then
set M17=(ML7!=null)and(UnitUseItemTarget(M67,bj_lastCreatedItem,ML7))
endif
endif
return M17
endfunction
function ju takes group jU,code IX returns nothing
call ForGroup(jU,IX)
call DestroyGroup(jU)
endfunction
function M07 takes widget it returns location
call MoveLocation(HA,GetWidgetX(it),GetWidgetY(it))
return HA
endfunction
function jW takes unit u,integer X5,unit m5 returns boolean
local integer j=0
local integer O5=0
if(h7[GetUnitUserData(m5)]!=m5)or(X5!=$D000F and X5!=$D0012 and X5!=$D0003)then
return IssuePointOrderById(u,X5,GetUnitX(m5),GetUnitY(m5))
endif
set j=GetUnitUserData(m5)
if j<=0 or j>=100 then
return IssuePointOrderById(u,X5,GetUnitX(m5),GetUnitY(m5))
else
set LO4=J47(u,m5)-90
set O5=GetPlayerId(GetOwningPlayer(u))
return IssuePointOrderById(u,X5,GetUnitX(m5)+hq[864+O5]*Cos(LO4*bj_DEGTORAD),GetUnitY(m5)+hq[864+O5]*Sin(LO4*bj_DEGTORAD))
endif
endfunction
function j1 takes unit j4,rect Ja returns real
local real JD=GetRectCenterX(Ja)-GetUnitX(j4)
local real Je=GetRectCenterY(Ja)-GetUnitY(j4)
return SquareRoot(JD*JD+Je*Je)
endfunction
function M57 takes unit x6,integer X5,integer o6,unit m5 returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(x6))
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),o6,true)
call DisableTrigger(Q04[O5])
if(IssueTargetOrderById(x6,X5,m5))then
call EnableTrigger(Q04[O5])
return true
endif
call EnableTrigger(Q04[O5])
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),o6,false)
return false
endfunction
function M27 takes unit x6,integer X5,integer o6,location b5 returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(x6))
if b5==null then
return false
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),o6,true)
call DisableTrigger(Q04[O5])
if(IssuePointOrderById(x6,X5,GetLocationX(b5),GetLocationY(b5)))then
call EnableTrigger(Q04[O5])
return true
endif
call EnableTrigger(Q04[O5])
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),o6,false)
return false
endfunction
function M_7 takes unit x6,integer X5,integer o6,integer n6,unit m5 returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(x6))
if(not QY4[O5]or o6==0)then
return false
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),o6,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),n6,true)
call DisableTrigger(Q04[O5])
if(IssueTargetOrderById(x6,X5,m5))then
call EnableTrigger(Q04[O5])
return true
endif
call EnableTrigger(Q04[O5])
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),o6,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),n6,false)
return false
endfunction
function N47 takes unit x6,integer X5,integer o6,integer n6,real x,real y returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(x6))
if(not QY4[O5]or o6==0)then
return false
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),o6,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),n6,true)
call DisableTrigger(Q04[O5])
if(IssuePointOrderById(x6,X5,x,y))then
call EnableTrigger(Q04[O5])
return true
endif
call EnableTrigger(Q04[O5])
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),o6,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),n6,false)
return false
endfunction
function N77 takes unit u returns boolean
call SaveInteger(C_4,D,GetHandleId(u),1)
return true
endfunction
function N87 takes unit u,string KL7,widget I77 returns boolean
return IssueTargetOrder(u,KL7,I77)and N77(u)
endfunction
function N97 takes unit x6,integer X5,integer o6 returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(x6))
if(not QY4[O5]or o6==0)then
return false
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),o6,true)
call DisableTrigger(Q04[16+O5])
if(IssueImmediateOrderById(x6,X5))then
call EnableTrigger(Q04[16+O5])
return true
endif
call EnableTrigger(Q04[16+O5])
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),o6,false)
return false
endfunction
function ND7 takes unit NE7 returns nothing
call SaveBoolean(C_4,D,GetHandleId(NE7),true)
endfunction
function Jw takes unit it returns boolean
return((Y74[GetPlayerId(GetOwningPlayer(it))]!=1)or(GetRandomInt(1,5)<=2))
endfunction
function JW takes unit it returns unit
if(IsUnitAlly(it,Z7[0]))then
return h7[1]
else
return h7[101]
endif
endfunction
function NF7 takes unit it returns unit
if(IsUnitAlly(it,Z7[0]))then
return h7[0]
else
return h7[100]
endif
endfunction
function JX takes unit it returns unit
if(IsUnitAlly(it,A7[0]))then
return h7[0]
else
return h7[100]
endif
endfunction
function NG7 takes boolean NH7 returns integer
if(NH7)then
return HC4
else
return HB4
endif
endfunction
function NI7 takes integer O5,boolean NH7 returns player
if(NH7)then
return Z7[O5]
else
return A7[O5]
endif
endfunction
function NJ7 takes boolean NH7 returns player
if(NH7)then
return QT4
else
return QU4
endif
endfunction
function NK7 takes boolean NH7 returns player
if(NH7)then
return QV4
else
return QW4
endif
endfunction
function NM7 takes integer Gu returns nothing
call FlushChildHashtable(L7,Gu)
endfunction
function NN7 takes integer NO7,string GW returns nothing
call RemoveSavedHandle(L7,NO7,StringHash(GW))
endfunction
function NP7 takes integer Gu,string GW,integer Gy returns nothing
call SaveInteger(L7,Gu,StringHash(GW),Gy)
endfunction
function NQ7 takes integer Gu,string GW,real Gy returns nothing
call SaveReal(L7,Gu,StringHash(GW),Gy)
endfunction
function NR7 takes integer Gu,string GW,string Gy returns nothing
call SaveStr(L7,Gu,StringHash(GW),Gy)
endfunction
function NS7 takes integer Gu,string GW,boolean Gy returns nothing
call SaveBoolean(L7,Gu,StringHash(GW),Gy)
endfunction
function NT7 takes integer Gu,string GW,unit Gy returns nothing
call SaveUnitHandle(L7,Gu,StringHash(GW),Gy)
endfunction
function NU7 takes integer Gu,string GW,effect Gy returns nothing
call SaveEffectHandle(L7,Gu,StringHash(GW),Gy)
endfunction
function NV7 takes integer Gu,string GW,trigger Gy returns nothing
call SaveTriggerHandle(L7,Gu,StringHash(GW),Gy)
endfunction
function NW7 takes integer Gu,string GW,lightning Gy returns nothing
call SaveLightningHandle(L7,Gu,StringHash(GW),Gy)
endfunction
function NX7 takes integer Gu,string GW,fogmodifier Gy returns nothing
call SaveFogModifierHandle(L7,Gu,StringHash(GW),Gy)
endfunction
function NY7 takes integer Gu,string GW,destructable Gy returns nothing
call SaveDestructableHandle(L7,Gu,StringHash(GW),Gy)
endfunction
function NZ7 takes integer Gu,string GW,player Gy returns nothing
call SavePlayerHandle(L7,Gu,StringHash(GW),Gy)
endfunction
function NA7 takes integer Gu,string GW,item Gy returns nothing
call SaveItemHandle(L7,Gu,StringHash(GW),Gy)
endfunction
function NB7 takes integer Gu,string GW,group Gy returns nothing
call SaveGroupHandle(L7,Gu,StringHash(GW),Gy)
endfunction
function NC7 takes integer Gu,string GW,timer Gy returns nothing
call SaveTimerHandle(L7,Gu,StringHash(GW),Gy)
endfunction
function N37 takes integer Gu,string GW,widget Gy returns nothing
call SaveWidgetHandle(L7,Gu,StringHash(GW),Gy)
endfunction
function N67 takes integer Gu,string GW,texttag Gy returns nothing
call SaveTextTagHandle(L7,Gu,StringHash(GW),Gy)
endfunction
function NL7 takes integer Gu,string GW,location Gy returns nothing
call SaveLocationHandle(L7,Gu,StringHash(GW),Gy)
endfunction
function N17 takes integer Gu,string GW,boolexpr Gy returns nothing
call SaveBooleanExprHandle(L7,Gu,StringHash(GW),Gy)
endfunction
function N07 takes integer Gu,string GW,button Gy returns nothing
call SaveButtonHandle(L7,Gu,StringHash(GW),Gy)
endfunction
function N57 takes integer Gu,string GW,image Gy returns nothing
call SaveImageHandle(L7,Gu,StringHash(GW),Gy)
endfunction
function N27 takes integer Gu,string GW,force Gy returns nothing
call SaveForceHandle(L7,Gu,StringHash(GW),Gy)
endfunction
function N_7 takes integer Gu,string GW returns fogmodifier
return LoadFogModifierHandle(L7,Gu,StringHash(GW))
endfunction
function O47 takes integer Gu,string GW returns destructable
return LoadDestructableHandle(L7,Gu,StringHash(GW))
endfunction
function O77 takes integer Gu,string GW returns unit
return LoadUnitHandle(L7,Gu,StringHash(GW))
endfunction
function O87 takes integer Gu,string GW returns texttag
return LoadTextTagHandle(L7,Gu,StringHash(GW))
endfunction
function O97 takes integer Gu,string GW returns player
return LoadPlayerHandle(L7,Gu,StringHash(GW))
endfunction
function OD7 takes integer Gu,string GW returns timer
return LoadTimerHandle(L7,Gu,StringHash(GW))
endfunction
function OE7 takes integer Gu,string GW returns trigger
return LoadTriggerHandle(L7,Gu,StringHash(GW))
endfunction
function OF7 takes integer Gu,string GW returns group
return LoadGroupHandle(L7,Gu,StringHash(GW))
endfunction
function OG7 takes integer Gu,string GW returns effect
return LoadEffectHandle(L7,Gu,StringHash(GW))
endfunction
function OH7 takes integer Gu,string GW returns lightning
return LoadLightningHandle(L7,Gu,StringHash(GW))
endfunction
function OI7 takes integer Gu,string GW returns location
return LoadLocationHandle(L7,Gu,StringHash(GW))
endfunction
function OJ7 takes integer Gu,string GW returns item
return LoadItemHandle(L7,Gu,StringHash(GW))
endfunction
function OK7 takes integer Gu,string GW returns image
return LoadImageHandle(L7,Gu,StringHash(GW))
endfunction
function OM7 takes integer Gu,string GW returns integer
return LoadInteger(L7,Gu,StringHash(GW))
endfunction
function ON7 takes integer Gu,string GW returns real
return LoadReal(L7,Gu,StringHash(GW))
endfunction
function OO7 takes integer Gu,string GW returns boolean
return LoadBoolean(L7,Gu,StringHash(GW))
endfunction
function OP7 takes integer Gu,string GW returns string
return LoadStr(L7,Gu,StringHash(GW))
endfunction
function OQ7 takes integer ki,string kI returns button
return LoadButtonHandle(L7,ki,StringHash(kI))
endfunction
function OR7 takes integer ki,string kI returns boolexpr
return LoadBooleanExprHandle(L7,ki,StringHash(kI))
endfunction
function OS7 takes integer ki,string kI returns force
return LoadForceHandle(L7,ki,StringHash(kI))
endfunction
function OT7 takes unit hI,string Hh returns boolean
return LoadInteger(L7,GetHandleId(hI),StringHash("state"+Hh))==1
endfunction
function OU7 takes trigger hI,string Hh returns boolean
return LoadInteger(L7,GetHandleId(hI),StringHash("state"+Hh))==1
endfunction
function OV7 takes unit hI,string Hh returns nothing
call SaveInteger(L7,GetHandleId(hI),StringHash("state"+Hh),1)
endfunction
function OW7 takes trigger hI,string Hh returns nothing
call SaveInteger(L7,GetHandleId(hI),StringHash("state"+Hh),1)
endfunction
function OX7 takes unit hI,string Hh returns nothing
call SaveInteger(L7,GetHandleId(hI),StringHash("state"+Hh),2)
endfunction
function OY7 takes trigger hI,string Hh returns nothing
call SaveInteger(L7,GetHandleId(hI),StringHash("state"+Hh),2)
endfunction
function l5 takes nothing returns nothing
local integer i=0
if D9==false and PT4==false then
loop
call DisplayTimedTextToPlayer(Player(i),0,0,120,"|c00ff0303An internal checksum has failed|r")
call DisplayTimedTextToPlayer(Player(i),0,0,120,"|c00ff0303This might not be a serious glitch, but it is important for me to get it|r")
call DisplayTimedTextToPlayer(Player(i),0,0,120,"|c00ff0303Please send me the replay for this game to IceFrog@gmail.com|r")
set i=i+1
exitwhen i==$C
endloop
endif
endfunction
function OZ7 takes trigger t returns nothing
call DisableTrigger(t)
set Dy=Dy+1
set Dx[Dy]=t
set DX[Dy]=KQ7()+60
if Dy>8000 then
call l5()
endif
endfunction
function ASBI takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
call SaveInteger(L7,(GetHandleId(((LoadUnitHandle(L7,(OB7),(14)))))),(((LoadInteger(L7,(OB7),(33))))),(2))
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
set t=null
return false
endfunction
function O3O takes unit ASDI,integer AS7I,real AM5I returns nothing
local trigger t=CreateTrigger()
call TriggerAddCondition(t,Condition(function ASBI))
call TriggerRegisterTimerEvent(t,AM5I,false)
call SaveInteger(L7,(GetHandleId((ASDI))),((AS7I)),(1))
call SaveUnitHandle(L7,(GetHandleId(t)),(14),(ASDI))
call SaveInteger(L7,(GetHandleId(t)),(33),(AS7I))
set t=null
endfunction
function OA7 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
call OX7(O77(OB7,"hero"),OP7(OB7,"state"))
call NM7(OB7)
call OZ7(t)
set t=null
return false
endfunction
function OC7 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
call OY7(OE7(OB7,"hero"),OP7(OB7,"state"))
call NM7(OB7)
call OZ7(t)
set t=null
return false
endfunction
function O37 takes unit hI,string Hh,real Hk returns nothing
local trigger t=CreateTrigger()
call TriggerAddCondition(t,Condition(function OA7))
call TriggerRegisterTimerEvent(t,Hk,false)
call OV7(hI,Hh)
call NT7(GetHandleId(t),"hero",hI)
call NR7(GetHandleId(t),"state",Hh)
set t=null
endfunction
function O67 takes trigger hI,string Hh,real Hk returns nothing
local trigger t=CreateTrigger()
call TriggerAddCondition(t,Condition(function OC7))
call TriggerRegisterTimerEvent(t,Hk,false)
call OW7(hI,Hh)
call NV7(GetHandleId(t),"hero",hI)
call NR7(GetHandleId(t),"state",Hh)
set t=null
endfunction
function OL7 takes group g returns integer
set bj_groupCountUnits=0
call ForGroup(g,function CountUnitsInGroupEnum)
return bj_groupCountUnits
endfunction
function O17 takes force O07,force O57 returns force
local integer O27=0
loop
exitwhen O27>$B
if IsPlayerInForce(Player(O27),O07)then
call ForceAddPlayer(O57,Player(O27))
endif
set O27=O27+1
endloop
return O57
endfunction
function O_7 takes unit I_7,string P47,player P77 returns nothing
local integer O27=0
local integer P87=0
local unit P97=null
local real PD7=0
local string PE7=""
local string PF7=""
set O27=GetPlayerId(P77)
set P97=M7[O27]
if I_7!=null then
set P87=GetPlayerId(GetOwningPlayer(I_7))
else
set P87=$F
endif
if not(P87==0 or P87==6 or P87==$F)then
if P97!=null and GetWidgetLife(P97)>.405 and I_7!=null then
set PD7=KE7(I_7,P97)
if PD7<=$5DC then
set PE7=""
elseif PD7<=3000. then
set PE7="|c00c0c0c0"
else
set PE7="|c00a0a0a0"
endif
endif
set PF7="|r"+Q[P87]+KZ4[P87]+"|r: "+PE7+P47+"|r"
elseif P87==GetPlayerId(Z7[0])then
set PF7="[AI] "+Q[P87]+"近卫军团|r: "+P47
elseif P87==GetPlayerId(A7[0])then
set PF7="[AI] "+Q[P87]+"天灾军团|r: "+P47
elseif P87==$C then
set PF7="[AI]: "+P47+"|r"
endif
if B24[O27]and P77==GetLocalPlayer()then
call DisplayTimedTextToPlayer(P77,0,0,$A,PF7)
endif
set P97=null
set PE7=""
endfunction
function PG7 takes group PH7,string PF7,force PI7 returns nothing
local integer O27=0
local unit I_7=null
local string PJ7="|r"
local integer i=1
loop
exitwhen i>$A
set I_7=M7[GetPlayerId(K27(i))]
if IsUnitInGroup(I_7,PH7)then
call GroupRemoveUnit(PH7,I_7)
set O27=GetPlayerId(GetOwningPlayer(I_7))
if PJ7!="|r" then
set PJ7=PJ7+", "
endif
set PJ7=PJ7+Q[O27]+KZ4[O27]+"|r"
endif
set i=i+1
endloop
loop
set I_7=FirstOfGroup(PH7)
exitwhen I_7==null
call GroupRemoveUnit(PH7,I_7)
set O27=GetPlayerId(GetOwningPlayer(I_7))
if PJ7!="|r" then
set PJ7=PJ7+", "
endif
set PJ7=PJ7+Q[O27]+KZ4[O27]+"|r"
endloop
set PJ7=PJ7+": "
if(IsPlayerInForce(GetLocalPlayer(),PI7))or(false and GetLocalPlayer()==Z7[0])then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10.,PJ7)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10.,"      - "+PF7)
endif
endfunction
function PK7 takes nothing returns nothing
local timer PM7=GetExpiredTimer()
local force PN7=null
local integer O27=1
local unit I_7=null
local group PH7=null
local integer PO7=GetHandleId(PM7)
local string PF7=""
if OO7(PO7,"Personal")then
set PN7=OS7(PO7,"Target")
set PF7=OP7(PO7,"SubTag")
set I_7=O77(PO7,"Owner")
loop
exitwhen O27>$B
if IsPlayerInForce(Player(O27),PN7)then
if PF7==" " then
call DisplayTimedTextToPlayer(Player(O27),0,0,$A,PF7)
else
call O_7(I_7,PF7,Player(O27))
endif
endif
set O27=O27+1
endloop
call NM7(PO7)
call DestroyTimer(PM7)
else
set PF7=OP7(PO7,"SubTag")
set PO7=StringHash("cAI|Re"+PF7)
set PN7=OS7(PO7,"Target")
set PH7=OF7(PO7,"Owner")
if OM7(PO7,"CountDn")==0 then
call PauseTimer(PM7)
if OL7(PH7)==1 then
set I_7=FirstOfGroup(PH7)
loop
exitwhen O27>$B
if IsPlayerInForce(Player(O27),PN7)then
call O_7(I_7,PF7,Player(O27))
endif
set O27=O27+1
endloop
else
call PG7(PH7,PF7,PN7)
endif
call DestroyGroup(PH7)
call NM7(PO7)
call DestroyTimer(PM7)
else
call NP7(PO7,"CountDn",OM7(PO7,"CountDn")-1)
endif
endif
set PH7=null
set PN7=null
endfunction
function PP7 takes unit I_7,force PN7,string PF7 returns nothing
local force PQ7=null
local group PR7=null
local timer PM7=null
local integer O27=1
local boolean MA7=true
local boolean PS7=false
local integer PO7=0
if I_7==null then
set I_7=KU4[bj_forLoopAIndex]
endif
set PO7=StringHash("cAI|Re"+PF7)
set PQ7=OS7(PO7,"Target")
if PQ7==null and PF7!=" " then
set PS7=true
set PQ7=O17(PN7,CreateForce())
call N27(PO7,"Target",PQ7)
set PM7=CreateTimer()
call NR7(GetHandleId(PM7),"SubTag",PF7)
set PR7=CreateGroup()
call GroupAddUnit(PR7,I_7)
call NB7(PO7,"Owner",PR7)
else
if PF7==" " then
set MA7=false
else
set MA7=true
set O27=1
loop
exitwhen O27>$B
if IsPlayerInForce(Player(O27),PN7)then
if not IsPlayerInForce(Player(O27),PQ7)then
set MA7=false
set O27=$B
endif
endif
set O27=O27+1
endloop
endif
if MA7 then
set PR7=OF7(PO7,"Owner")
call GroupAddUnit(PR7,I_7)
else
set PS7=true
set PM7=CreateTimer()
set PO7=GetHandleId(PM7)
call NR7(PO7,"SubTag",PF7)
set PQ7=O17(PN7,CreateForce())
call N27(PO7,"Target",PQ7)
call NT7(PO7,"Owner",I_7)
call NS7(PO7,"Personal",true)
endif
endif
if PS7 then
if PF7==" " then
call TimerStart(PM7,.1,false,function PK7)
else
call TimerStart(PM7,.01,true,function PK7)
endif
endif
set PQ7=null
set PR7=null
endfunction
function PT7 takes force PN7,real x,real y,integer O5 returns nothing
if(IsPlayerInForce(GetLocalPlayer(),PN7))then
if GetAllyColorFilterState()==2 then
call PingMinimapEx(x,y,5.,48,$E6,$B9,true)
else
call PingMinimapEx(x,y,5.,KA4[O5],KB4[O5],KC4[O5],true)
endif
endif
endfunction
function PU7 takes unit I_7,force PN7 returns nothing
if I_7!=null then
if GetUnitState(I_7,UNIT_STATE_LIFE)>0 then
if(IsPlayerInForce(GetLocalPlayer(),PN7))then
call PingMinimap(GetUnitX(I_7),GetUnitY(I_7),5.)
endif
else
if IsUnitAlly(I_7,Z7[0])then
set I_7=IZ4
else
set I_7=JA4
endif
if(IsPlayerInForce(GetLocalPlayer(),PN7))then
call PingMinimap(GetUnitX(I_7),GetUnitY(I_7),5.)
endif
endif
endif
endfunction
function PV7 takes unit I_7,string PF7 returns nothing
local integer O5=1
local real KD7
set LI4=CreateForce()
loop
exitwhen O5>$B
if O5==6 then
set O5=7
endif
if IsUnitAlly(I_7,Player(O5))then
if M7[O5]==null or GetWidgetLife(M7[O5])<.405 then
call ForceAddPlayer(LI4,Player(O5))
else
set KD7=KE7(I_7,M7[O5])
if KD7<=3000. then
call ForceAddPlayer(LI4,Player(O5))
endif
endif
endif
set O5=O5+1
endloop
call PP7(I_7,LI4,PF7)
call PU7(I_7,LI4)
call DestroyForce(LI4)
set LI4=null
endfunction
function PW7 takes unit it,boolean J2 returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(it))
if((not Id(O5))or(J2))then
if(GetUnitTypeId(it)!=1211117642)then
set G0[32+O5]=true
if(not GZ[$A0+O5])and(GetUnitLifePercent(it)<30)then
if false then
call PV7(it,LR4+" Retreating")
else
call PV7(it,"正在撤退")
endif
endif
set h4[O5]=null
set hq[512+O5]=.0
set GZ[$80+O5]=false
set GZ[$A0+O5]=true
endif
if(is(it))then
call jW(it,$D0012,h9[O5])
if(MR7(it,ZU[C0]))then
call UnitUseItem(it,bj_lastCreatedItem)
endif
if(MR7(it,ZU[RLL]))then
call UnitUseItem(it,bj_lastCreatedItem)
endif
endif
endif
endfunction
function PX7 takes nothing returns boolean
local integer O5=OM7(GetHandleId(GetTriggeringTrigger()),"pID")
local integer PY7=GetPlayerId(GetOwningPlayer(h4[O5]))
if(GetWidgetLife(M7[O5])<.405)or(Bz>hq[608+O5])or(h4[O5]==null)or(GetWidgetLife(h4[O5])<.405)or(eY[32+PY7]<=0)then
call DisableTrigger(GetTriggeringTrigger())
return false
elseif(IsUnitVisible(h4[O5],Player(O5)))then
if K57(M7[O5])then
call IssueTargetOrderById(M7[O5],$D000F,h4[O5])
endif
call DisableTrigger(GetTriggeringTrigger())
return false
endif
if is(M7[O5])then
if eY[464+PY7]==$D0012 or eY[464+PY7]==$D0003 or eY[464+PY7]==$D0016 then
call IssuePointOrderById(M7[O5],$D0012,I2R(eY[480+PY7]),I2R(eY[496+PY7]))
else
call jW(M7[O5],$D0012,h4[O5])
endif
endif
return false
endfunction
function J3 takes unit it,boolean J2 returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(it))
local boolean J4=false
if(ME7(it))then
if(J2)then
if(not Id(O5))then
call PW7(it,true)
elseif((M87(h4[O5]))and(GetUnitAbilityLevel(h4[O5],1110454854)==0))then
call IssueTargetOrderById(it,$D000F,h4[O5])
endif
else
call PW7(it,false)
endif
elseif(G0[272+O5]or is(it))and((J2)or(((not GZ[$80+O5])or((GetUnitCurrentOrder(it)!=$D000F)and(GetUnitCurrentOrder(it)!=$D0019)))and(iU(it))))then
if((G0[O5])or(G0[48+O5])or(not G0[$80+O5]))then
set J4=jW(it,$D0012,h9[O5])
endif
if(h4[96+O5]!=null)and(GetUnitTypeId(h4[96+O5])==1966092371)then
set J4=IssueTargetOrderById(it,$D000F,h4[96+O5])
endif
if((not J4)and(h4[O5]!=null)and(M87(h4[O5]))and(GetUnitAbilityLevel(h4[O5],1110454854)==0))then
if IsUnitVisible(h4[O5],GetOwningPlayer(it))then
set bj_lastLoadedUnit=it
if OO7(GetHandleId(h4[O5]),"XMarked")then
call MoveLocation(HA,ON7(GetHandleId(h4[O5]),"AI|XMark|X"),ON7(GetHandleId(h4[O5]),"AI|XMark|Y"))
if(not IsUnitInRangeLoc(h4[O5],HA,600.))then
set J4=IssuePointOrderByIdLoc(it,$D0012,HA)
else
set J4=IssueTargetOrderById(it,$D000F,h4[O5])
endif
elseif OT7(it,"AI|Lasso")then
set J4=IssueTargetOrderById(it,$D0012,h9[O5])
elseif(GetUnitTypeId(it)==1164666213 and GetHeroLevel(it)>=6)and(eY[320+O5]>=0)and(not IsUnitInRange(it,h4[O5],300))and((GetUnitLifePercent(it)>80)or(GetUnitLifePercent(it)>(GetUnitLifePercent(h4[O5])+30)))and(GetUnitManaPercent(it)>20)and(h4[304+O5]==null)and(MP7(900,h4[O5],Condition(function MQ7))==0)then
set J4=IssueTargetOrderById(it,$D0012,h4[O5])
else
set J4=IssueTargetOrderById(it,$D000F,h4[O5])
endif
set hq[608+O5]=Bz+10.
elseif hq[608+O5]>Bz and eY[32+GetPlayerId(GetOwningPlayer(h4[O5]))]>0 then
if not IsVisibleToPlayer(GetUnitX(h4[O5]),GetUnitY(h4[O5]),GetOwningPlayer(it))then
call EnableTrigger(Q04[96+O5])
set J4=jW(it,$D0012,h4[O5])
endif
else
call DisableTrigger(Q04[96+O5])
endif
endif
set DN7=LoadUnitHandle(L7,(GetHandleId(it)),(652))
set DO7=O77((GetHandleId(it)),"AI|TetherSource")
if(J4)then
elseif(DN7!=null)and(not IsUnitInRange(it,DN7,700)and(IsUnitType(DN7,UNIT_TYPE_HERO)))then
call jW(it,$D0012,DN7)
elseif(DO7!=null)and(not IsUnitInRange(it,DO7,700))then
call jW(it,$D0012,DO7)
elseif((eY[O5]>=9))then
if eY[272+O5]<=2 then
if((G0[$B0+O5])or(h8[48+O5]!=h8[32+O5]))then
call jW(it,$D000F,h8[48+O5])
else
call jW(it,$D0012,h9[O5])
endif
endif
elseif((eY[O5]==3)or(eY[O5]==4))then
elseif GZ[$A0+O5]or(not G0[$80+O5])then
call jW(it,$D0012,h9[O5])
else
call jW(it,$D000F,h8[O5])
endif
endif
endfunction
function PZ7 takes unit it returns nothing
if((MR7(it,ZU[B3]))and(UnitUseItem(it,bj_lastCreatedItem)))then
call J_7(.3)
endif
if((MR7(it,ZU[T1]))and(UnitUseItem(it,bj_lastCreatedItem)))then
call J_7(.3)
endif
call IssueImmediateOrderById(it,$D0004)
endfunction
function PA7 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>0 and GetUnitAbilityLevel(GetFilterUnit(),1098085732)==0 and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)) and GetUnitTypeId(GetFilterUnit())!=1966092371 and GetUnitTypeId(GetFilterUnit())!=1852010352 and IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)!=null
endfunction
function PB7 takes unit it,unit MD7 returns boolean
local item PC7=null
local boolean P37=false
local item P67=null
local integer O5=GetPlayerId(GetOwningPlayer(it))
local boolean PL7=(GetPlayerController(GetOwningPlayer(it))==MAP_CONTROL_COMPUTER)
local boolean P17=false
local boolean P07=false
local real P57=0
local real P27=0
local real P_7=0
if O77((GetHandleId(it)),"AI|TetherSource")!=null then
return false
elseif(GetUnitTypeId(it)==1211117642)then
return false
endif
if(MD7==IZ4 or MD7==JA4)then
if G0[352+O5]or(KE7(it,MD7)<$BB8)then
return false
endif
elseif(KE7(it,MD7)<$7D0)then
return false
endif
if MD7==IZ4 or MD7==JA4 then
set P27=GetUnitX(MD7)
set P_7=GetUnitY(MD7)
else
set bj_lastLoadedUnit=NF7(it)
set P57=Atan2(GetUnitY(bj_lastLoadedUnit)-GetUnitY(MD7),GetUnitX(bj_lastLoadedUnit)-GetUnitX(MD7))+GetRandomReal(-.4,.4)
set P27=GetUnitX(MD7)+500.*Cos(P57)
set P_7=GetUnitY(MD7)+500.*Sin(P57)
endif
if((GetUnitAbilityLevel(it,1093677391)>0)and(Bz>T34[32+O5]))then
if IssuePointOrderById(it,$D022D,P27,P_7)then
return true
endif
endif
if((GetUnitAbilityLevel(it,1093685808)>0)and(Bz>T34[O5]))then
if IssuePointOrderById(it,$D0278,P27,P_7)then
return true
endif
endif
if not(eY[$E0+O5]<R2I(Bz)and GetUnitState(it,UNIT_STATE_MANA)>75)then
return false
endif
if not IsUnitType(MD7,UNIT_TYPE_STRUCTURE)then
set bj_lastLoadedUnit=it
set bj_lastLoadedUnit=MN7(2000.,M07(MD7),Condition(function PA7))
set P07=((bj_lastLoadedUnit!=null)and(KE7(it,MD7)>KE7(bj_lastLoadedUnit,MD7)))
else
set P07=true
endif
if(PL7 and T_4[O5])then
if(MR7(it,GetItemTypeId(U74[O5])))then
call DisableTrigger(H94)
call UnitRemoveItem(it,MV7(it,GetItemTypeId(U74[O5])))
call RemoveItem(U74[O5])
call EnableTrigger(H94)
endif
if(U44[O5]!=null)then
call J_7(.2)
call UnitAddItem(it,U44[O5])
endif
set T_4[O5]=false
set U74[O5]=null
set U44[O5]=null
endif
if(MR7(it,ZU[YC]))and P07 then
if((GetUnitAbilityLevel(it,1110456148)==0)and(GetUnitAbilityLevel(it,1110455864)==0)and(GetUnitAbilityLevel(it,1110454347)==0)and(GetUnitAbilityLevel(it,1110455097)==0))then
call PZ7(it)
set P17=UnitUseItemPoint(it,MV7(it,ZU[YC]),P27,P_7)
endif
elseif(MR7(it,ZU[F6]))then
call PZ7(it)
set P17=UnitUseItemPoint(it,MV7(it,ZU[F6]),GetUnitX(MD7),GetUnitY(MD7))
elseif(MR7(it,ZU[FF6]))then
call PZ7(it)
set P17=UnitUseItemPoint(it,MV7(it,ZU[FF6]),GetUnitX(MD7),GetUnitY(MD7))
elseif(not GE7[O5])then
if(GetUnitTypeId(it)==1211117642 or IsUnitIllusion(it))or(not P07)then
return false
endif
set P37=false
if((not MS7(it)))then
set P37=true
elseif(MR7(it,ZU[QC]))then
set P67=bj_lastCreatedItem
set P37=true
elseif(MR7(it,ZU[TC]))then
set P67=bj_lastCreatedItem
set P37=true
elseif(MR7(it,ZU[WC]))then
set P67=bj_lastCreatedItem
set P37=true
endif
if P37 then
if P67!=null then
call KX7(P67)
endif
set PC7=CreateItem(ZU[YC],GetUnitX(it),GetUnitY(it))
set P37=UnitAddItem(it,PC7)
call J_7(.3)
else
if(MR7(it,ZU[FV]))then
set U84[O5]=bj_lastCreatedItem
set P37=true
endif
if P37 then
call DisableTrigger(H94)
call UnitRemoveItem(it,U84[O5])
call SetItemPosition(U84[O5],9999,-9999)
call EnableTrigger(H94)
set PC7=CreateItem(ZU[YC],GetUnitX(it),GetUnitY(it))
set P37=UnitAddItem(it,PC7)
set UD4[O5]=true
call J_7(.3)
endif
endif
set P67=null
if(not P37)then
call KX7(PC7)
call J_7(.2)
if((not MS7(it)))then
call UnitAddItem(it,U84[O5])
set UD4[O5]=false
set U84[O5]=null
endif
endif
if(MR7(it,ZU[YC]))then
call PZ7(it)
set P37=UnitUseItemPoint(it,MV7(it,ZU[YC]),P27,P_7)
call J_7(.5)
set PC7=null
set P17=P37
if not P17 then
call J_7(.01)
set P17=(eY[$E0+O5]>R2I(Bz)+1)
endif
endif
endif
if P17 then
set eY[$E0+O5]=R2I(Bz)+67
set eY[$D0+O5]=0
set h8[$90+O5]=null
else
if not P37 then
set eY[$D0+O5]=0
set h8[$90+O5]=null
endif
if U84[O5]!=null then
call DisableTrigger(H94)
call RemoveItem(MV7(it,ZU[YC]))
call UnitAddItem(it,U84[O5])
call EnableTrigger(H94)
set U84[O5]=null
set UD4[O5]=false
endif
endif
return P17
endfunction
function Q47 takes integer O5,unit j5,integer o6 returns nothing
call DisableTrigger(Q04[O5])
if((not ME7(j5))and(not G0[O5])and(not G0[64+O5])and(G0[$80+O5])and(h4[O5]!=null)and(M87(h4[O5]))and(IsUnitVisible(h4[O5],GetOwningPlayer(j5))))then
call IssueTargetOrderById(j5,$D000F,h4[O5])
set GZ[48+O5]=true
else
call J3(j5,true)
endif
call EnableTrigger(Q04[O5])
if(o6!=0)then
call SetPlayerAbilityAvailable(GetOwningPlayer(j5),o6,false)
endif
endfunction
function J6 takes integer O5,unit j5,integer o6,integer n6 returns nothing
call Q47(O5,j5,o6)
call SetPlayerAbilityAvailable(GetOwningPlayer(j5),n6,false)
endfunction
function J7 takes integer O5,unit j5,integer o6 returns nothing
call DisableTrigger(Q04[O5])
if((not ME7(j5))and(not G0[O5])and(not G0[64+O5])and(G0[$80+O5])and(h4[O5]!=null)and(M87(h4[O5]))and(IsUnitVisible(h4[O5],GetOwningPlayer(j5))))then
call IssueTargetOrderById(j5,$D000F,h4[O5])
set GZ[48+O5]=true
else
call J3(j5,true)
endif
call EnableTrigger(Q04[O5])
call SetPlayerAbilityAvailable(GetOwningPlayer(j5),o6,false)
endfunction
function J8 takes integer O5,boolean J9 returns boolean
set GZ[O5]=false
return J9
endfunction
function Q77 takes unit u returns boolean
if(IsUnitAlly(u,Z7[0]))then
return(IsUnitInRange(u,IZ4,1100.))
else
return(IsUnitInRange(u,JA4,1100.))
endif
endfunction
function kA takes unit IB,unit m5,real kb returns boolean
if(IsUnitAlly(m5,Z7[0]))then
return(KE7(IB,h7[0])-KE7(m5,h7[0]))>kb
else
return(KE7(IB,h7[100])-KE7(m5,h7[100]))>kb
endif
endfunction
function kB takes boolean J4,group jU returns integer
local unit it
local integer kc=0
local boolean kC=false
local boolean kd=false
loop
set it=FirstOfGroup(jU)
exitwhen(it==null)
if(GetUnitTypeId(it)==1211117641)then
set kc=kc+1
set kd=true
elseif(GetUnitTypeId(it)!=1211117642)then
set kc=kc+1
elseif(not kC)then
set kC=true
endif
call GroupRemoveUnit(jU,it)
endloop
if((kC)and((not kd)or(J4)))then
set kc=kc+1
endif
return kc
endfunction
function kD takes unit u returns boolean
return((GetUnitAbilityLevel(u,1110456148)>0)or(GetUnitAbilityLevel(u,1110456118)>0)or(GetUnitAbilityLevel(u,1110455864)>0)or(GetUnitAbilityLevel(u,1112041075)>0)or(GetUnitAbilityLevel(u,1110454347)>0)or(GetUnitAbilityLevel(u,1110454833)>0)or(GetUnitAbilityLevel(u,1110454609)>0)or(GetUnitAbilityLevel(u,1110455097)>0)or(GetUnitAbilityLevel(u,1093677130)>0)or(GetUnitAbilityLevel(u,1093684052)>0)or(GetUnitAbilityLevel(u,1093677617)>0)or(GetUnitAbilityLevel(u,1112504171)>0))
endfunction
function ke takes unit u returns boolean
return((GetUnitAbilityLevel(u,1093685838)>0)or(GZ[256+GetPlayerId(GetOwningPlayer(u))]))
endfunction
function kE takes string kf,string kF returns integer
local integer kg=StringLength(kf)
local integer kG=0
loop
exitwhen kg<=kG
if(SubString(kf,kg,kg+1)==kF)then
return kg
endif
set kg=kg-1
endloop
return-1
endfunction
function kh takes string kf returns integer
local integer kg=0
local integer kG=StringLength(kf)
loop
exitwhen kg>=kG
if(SubString(kf,kg,kg+1)==",")then
return kg
endif
set kg=kg+1
endloop
return-1
endfunction
function kj takes nothing returns nothing
set GT=false
endfunction
function kJ takes real x,real y returns boolean
set GT=true
call SetRect(He,x-160.,y-160.,x+160.,y+160.)
call EnumDestructablesInRect(He,Q24,function kj)
return GT
endfunction
function kk takes unit it,real IW,unit r returns location
local integer kK=0
local real kl=Atan2(GetUnitY(r)-GetUnitY(it),GetUnitX(r)-GetUnitX(it))
loop
if(kJ(GetUnitX(it)+IW*Cos(kl),GetUnitY(it)+IW*Sin(kl)))then
call MoveLocation(HB,GetUnitX(it)+IW*Cos(kl),GetUnitY(it)+IW*Sin(kl))
return HB
endif
set kK=kK+1
set IW=IW-50.
exitwhen(kK>5)
endloop
return null
endfunction
function kL takes unit it,unit m5,real km returns location
local real IW=KF7(GetUnitX(it),GetUnitY(it),GetUnitX(m5),GetUnitY(m5))+km
local real kl=0
local integer kK=0
set kK=GetPlayerId(GetOwningPlayer(m5))
set kl=Atan2(GetUnitY(h9[kK])-GetUnitY(m5),GetUnitX(h9[kK])-GetUnitX(m5))
set kK=0
loop
if(kJ(GetUnitX(it)+IW*Cos(kl),GetUnitY(it)+IW*Sin(kl)))then
call MoveLocation(HB,GetUnitX(it)+IW*Cos(kl),GetUnitY(it)+IW*Sin(kl))
return HB
endif
set kK=kK+1
set IW=IW-50.
exitwhen(kK>5)
endloop
return null
endfunction
function Q87 takes unit it returns boolean
return((GetUnitAbilityLevel(it,1093678162)==0)and(GetUnitAbilityLevel(it,1097625443)==0))
endfunction
function Q97 takes unit it returns boolean
return((GetUnitAbilityLevel(it,1093678162)==0)and(GetUnitAbilityLevel(it,1097625443)==0)and(GetUnitTypeId(it)!=1970497636)and(GetUnitTypeId(it)!=1848652113)and(GetUnitTypeId(it)!=1848652114))
endfunction
function QD7 takes unit u returns boolean
return(IsUnitType(u,UNIT_TYPE_MELEE_ATTACKER))
endfunction
function QE7 takes unit x6 returns integer
return(GetItemTypeId(UnitItemInSlot(x6,GetIssuedOrderId()-$D0028)))
endfunction
function QF7 takes integer Iz returns boolean
return((Iz==1093679446)or(Iz==1095263841)or(Iz==1093681972)or(Iz==1093685065)or(Iz==1093677622)or(Iz==1093682265)or(Iz==1093684314)or(Iz==1093685582))
endfunction
function kP takes integer i1 returns boolean
return((i1==1429221424)or(i1==1160785972)or(i1==1430468144)or(i1==1430467634)or(i1==1432642913)or(i1==1432510828)or(i1==1315334514)or(i1==1332109682)or(i1==1429221456)or(i1==1311780946)or(i1==1211117624)or(i1==1160785973)or(i1==1214345830)or(i1==1315007329)or(i1==1215723364)or(i1==1164799855)or(i1==1212365106)or(i1==1432580716)or(i1==1333027688)or(i1==1311781185)or(i1==1332179560)or(i1==1214344551)or(i1==1311781206)or(JR7(i1,5)))
endfunction
function kq takes integer i1 returns boolean
return(not JR7(i1,5))
endfunction
function kQ takes unit u returns boolean
return((GetUnitAbilityLevel(u,1110455620)>0)or(GetUnitAbilityLevel(u,1110455629)>0)or(GetUnitAbilityLevel(u,1110455630)>0)or(GetUnitAbilityLevel(u,1110455631)>0))
endfunction
function kr takes unit u returns boolean
return((GetUnitAbilityLevel(u,1110456120)>0)or(GetUnitAbilityLevel(u,1113943649)>0)or(GetUnitAbilityLevel(u,1113943655)>0)or(GetUnitAbilityLevel(u,1110459185)>0))
endfunction
function QG7 takes integer Iz returns boolean
return((Iz==ZU[F5])or(Iz==ZU[G5])or(Iz==ZU[J5])or(Iz==ZU[M5])or(Iz==ZU[N5]))
endfunction
function ks takes integer Iz returns boolean
return((Iz==ZU[R5])or(Iz==ZU[S5])or(Iz==ZU[T5]))
endfunction
function kS takes unit u returns integer
local integer kt=GetUnitAbilityLevel(u,1093677635)
if(kt==4)then
return 1093678925
elseif(kt==3)then
return 1093678922
elseif(kt==2)then
return 1093678921
elseif(kt==1)then
return 1093678920
else
return 1093685302
endif
endfunction
function kT takes unit u returns integer
local integer kt=GetUnitAbilityLevel(u,1093677635)
if(kt==4)then
return 1093678904
elseif(kt==3)then
return 1093678900
elseif(kt==2)then
return 1093678898
elseif(kt==1)then
return 1093678670
else
return 1093677645
endif
endfunction
function QH7 takes unit u returns integer
local integer kt=GetUnitAbilityLevel(u,1093677635)
if(kt==4)then
return 1093678158
elseif(kt==3)then
return 1093678157
elseif(kt==2)then
return 1093678154
elseif(kt==1)then
return 1093677898
else
return 1093678899
endif
endfunction
function QI7 takes unit u returns integer
local integer kt=GetUnitAbilityLevel(u,1093679160)
if(kt==3)then
return 1093679172
elseif(kt==2)then
return 1093679169
elseif(kt==1)then
return 1093679161
else
return 1093678167
endif
endfunction
function QJ7 takes unit u returns integer
local integer kt=GetUnitAbilityLevel(u,1093679160)
if(kt==3)then
return 1093677126
elseif(kt==2)then
return 1093677396
elseif(kt==1)then
return 1093677111
else
return 1093677361
endif
endfunction
function QK7 takes unit u returns integer
local integer kt=GetUnitAbilityLevel(u,1093679160)
if(kt==3)then
return 1093679177
elseif(kt==2)then
return 1093679175
elseif(kt==1)then
return 1093679174
else
return 1093679155
endif
endfunction
function QM7 takes integer Iz returns integer
if((Iz==ZU[QW])or(Iz==ZU[QC])or(Iz==ZU[TC])or(Iz==ZU[XC])or(Iz==ZU[YC]))then
return 100
elseif((Iz==ZU[LV])or(Iz==ZU[UY])or(Iz==ZU[EZY])or(Iz==ZU[UW])or(Iz==ZU[NV])or(Iz==ZU[AX]))then
return $96
elseif((Iz==ZU[BA])or(Iz==ZU[GB]))then
return $E1
elseif((Iz==ZU[ZY])or(Iz==ZU[GY])or(Iz==ZU[WC])or(Iz==ZU[EZ]))then
return 350
elseif((Iz==ZU[FV])or(Iz==ZU[OV])or(Iz==ZU[MV])or(Iz==ZU[HY])or(Iz==ZU[A6])or(Iz==ZU[DL])or(Iz==ZU[HL])or(Iz==ZU[C3]))then
return 450
elseif((Iz==ZU[SV])or(Iz==ZU[UV])or(Iz==ZU[RX])or(Iz==ZU[JV])or(Iz==ZU[EW])or(Iz==ZU[Z3]))then
return 650
elseif((Iz==ZU[NW])or(Iz==ZU[VW])or(Iz==ZU[NX])or(Iz==ZU[QV])or(Iz==ZU[DZ])or(Iz==ZU[ZX])or(Iz==ZU[RZ])or(Iz==ZU[CV])or(Iz==ZU[B3]))then
return 950
elseif((Iz==ZU[TV])or(Iz==ZU[YX])or(Iz==ZU[WX])or(Iz==ZU[OZ]))then
return $4B0
elseif((Iz==ZU[XV])or(Iz==ZU[ZW])or(Iz==ZU[SX])or(Iz==ZU[G6])or(Iz==ZU[Y3])or(Iz==ZU[AL])or(Iz==ZU[DD4])or(Iz==ZU[F74]))then
return $5DC
elseif((Iz==ZU[RW])or(Iz==ZU[S6])or(Iz==ZU[W6])or(Iz==ZU[R00])or(Iz==ZU[P1])or(Iz==ZU[AL])or(Iz==ZU[J1])or(Iz==ZU[RL])or(Iz==ZU[OL])or(Iz==ZU[DG4])or(Iz==ZU[DJ4]))then
return $7D0
elseif((Iz==ZU[NZ])or(Iz==ZU[AV])or(Iz==ZU[OW])or(Iz==ZU[F6])or(Iz==ZU[A1])or(Iz==ZU[DG4])or(Iz==ZU[T1]))then
return $9C4
elseif((Iz==ZU[YW])or(Iz==ZU[GX])or(Iz==ZU[ZL])or(Iz==ZU[WL])or(Iz==ZU[Q1])or(Iz==ZU[D1])or(Iz==ZU[F5])or(Iz==ZU[R5]))then
return $BB8
elseif((Iz==ZU[BV])or(Iz==ZU[LL])or(Iz==ZU[R1]))then
return $DAC
elseif((Iz==ZU[V1])or(Iz==ZU[SY])or(Iz==ZU[C0])or(MW7(Iz))or(Iz==ZU[S5])or(Iz==1869375847))then
return $FA0
elseif((Iz==ZU[G5])or(Iz==ZU[FF6])or(Iz==ZU[GC])or(Iz==ZU[Rgg]))then
return 4500
elseif((Iz==ZU[U1])or(Iz==ZU[T5])or(Iz==ZU[X1])or(Iz==ZU[D74])or(Iz==ZU[DR4]))then
return 5000
elseif((Iz==ZU[Y0])or(Iz==ZU[B0])or(Iz==ZU[RLL])or(Iz==ZU[J5])or(Iz==ZU[W5])or(Iz==ZU[A5])or(Iz==ZU[R2])or(Iz==ZU[E2])or(Iz==ZU[H2])or(Iz==ZU[D44])or(Iz==ZU[DI4]))then
return 5500
elseif((Iz==ZU[DH4])or(Iz==ZU[M5])or(Iz==ZU[L5])or(Iz==ZU[Z2])or(Iz==ZU[T2])or(Iz==ZU[R1Q])or(Iz==1936683571)or(Iz==1936683572)or(Iz==1936683573)or(Iz==1936683574)or(Iz==1227895094)or(Iz==1227894838))then
return 6000
elseif((Iz==ZU[N5])or(Iz==ZU[X2])or(Iz==ZU[W2])or(Iz==ZU[DE4]))then
return 7000
elseif(Iz==ZU[B5])or(Iz==ZU[C5])or(Iz==ZU[R7t])then
return 8000
endif
return 500
endfunction
function B6 takes trigger kW,playerunitevent kx returns nothing
call TriggerRegisterPlayerUnitEvent(kW,Z7[1],kx,Q24)
call TriggerRegisterPlayerUnitEvent(kW,Z7[2],kx,Q24)
call TriggerRegisterPlayerUnitEvent(kW,Z7[3],kx,Q24)
call TriggerRegisterPlayerUnitEvent(kW,Z7[4],kx,Q24)
call TriggerRegisterPlayerUnitEvent(kW,Z7[5],kx,Q24)
endfunction
function c6 takes trigger kW,playerunitevent kx returns nothing
call TriggerRegisterPlayerUnitEvent(kW,A7[1],kx,Q24)
call TriggerRegisterPlayerUnitEvent(kW,A7[2],kx,Q24)
call TriggerRegisterPlayerUnitEvent(kW,A7[3],kx,Q24)
call TriggerRegisterPlayerUnitEvent(kW,A7[4],kx,Q24)
call TriggerRegisterPlayerUnitEvent(kW,A7[5],kx,Q24)
endfunction
function ky takes trigger kW,playerunitevent kx returns nothing
call B6(kW,kx)
call c6(kW,kx)
endfunction
function QN7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(M87(GetFilterUnit()))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))))!=null
endfunction
function QO7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))and(M87(GetFilterUnit()))and(eY[32+GetPlayerId(GetOwningPlayer(GetFilterUnit()))]>0)and(KH7(GetFilterUnit())==bj_forLoopBIndex))!=null
endfunction
function QP7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))and(M87(GetFilterUnit()))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit))))!=null
endfunction
function QQ7 takes unit QR7 returns boolean
local real x=GetUnitX(QR7)
local real y=GetUnitY(QR7)
if IsUnitAlly(QR7,Z7[0])then
return x<GetRectMaxX(HD)and x>GetRectMinX(HD)and y<GetRectMaxY(HD)and y>GetRectMinY(HD)
endif
return x<GetRectMaxX(GD)and x>GetRectMinX(GD)and y<GetRectMaxY(GD)and y>GetRectMinY(GD)
endfunction
function QS7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(M87(GetFilterUnit()))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_MAGIC_IMMUNE)==false and GetUnitAbilityLevel(GetFilterUnit(),1098282348)==0)and QQ7(GetFilterUnit())==false)!=null
endfunction
function QT7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(M87(GetFilterUnit())))!=null
endfunction
function QU7 takes nothing returns boolean
if((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(M87(GetFilterUnit())))then
if(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))then
return true
elseif(not kD(GetFilterUnit()))then
return((eY[32+GetPlayerId(GetOwningPlayer(GetFilterUnit()))]>0)or(IsUnitInRange(GetFilterUnit(),GetTriggerUnit(),600.)))
else
return(eY[32+GetPlayerId(GetOwningPlayer(GetFilterUnit()))]>2)
endif
endif
return false
endfunction
function QV7 takes nothing returns boolean
return((GetFilterUnit()!=bj_lastLoadedUnit)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))and(M87(GetFilterUnit()))and(not ME7(GetFilterUnit())))!=null
endfunction
function QW7 takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))and(GetOwningPlayer(GetFilterUnit())!=Player($C))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))and(Q97(GetFilterUnit())))!=null
endfunction
function k0 takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(GetOwningPlayer(GetFilterUnit())!=Player($C))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(Q97(GetFilterUnit())))!=null
endfunction
function QX7 takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and((i1==1697656915)or(i1==1697657137)or(i1==1697656914)or(i1==1697657145)or(i1==1966092366)or(i1==1966092356)or(i1==1966092365)or(i1==1966092372)))!=null
endfunction
function IsEnemyTowerInRangeAttacker takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetAttacker())))and(GetWidgetLife(GetFilterUnit())>.405)and((i1==1697656915)or(i1==1697657137)or(i1==1697656914)or(i1==1697657145)or(i1==1966092366)or(i1==1966092356)or(i1==1966092365)or(i1==1966092372)))!=null
endfunction
function TorrentedKillableFilter takes nothing returns boolean
return ME7(GetFilterUnit())and GetUnitAbilityLevel(GetFilterUnit(),1110456657)>0
endfunction
function k2 takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(GetOwningPlayer(GetFilterUnit())!=Player($C))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(Q97(GetFilterUnit())))
endfunction
function k3 takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(Q97(GetFilterUnit())))!=null
endfunction
function QY7 takes nothing returns boolean
return((GetWidgetLife(GetFilterUnit())>.405)and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_DEAD)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_SUMMONED)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit()))))!=null
endfunction
function QZ7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(not IsUnitIllusion(GetFilterUnit()))and(GetFilterUnit()!=GetTriggerUnit())and(GetWidgetLife(GetFilterUnit())>.405))!=null
endfunction
function k5 takes nothing returns boolean
return((IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetFilterUnit()!=GetTriggerUnit())and(GetWidgetLife(GetFilterUnit())>.405)and(Q97(GetFilterUnit())))!=null
endfunction
function QA7 takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and((i1==1697656915)or(i1==1697657137)or(i1==1697656914)or(i1==1697657145)or(i1==1966092366)or(i1==1966092356)or(i1==1966092365)or(i1==1966092372)))!=null
endfunction
function QB7 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit()))and M87(GetFilterUnit())and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit()))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0
endfunction
function QC7 takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit()))and M87(GetFilterUnit())and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit()))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0
endfunction
function Q37 takes nothing returns boolean
local integer i=GetUnitTypeId(GetFilterUnit())
return i==1848651848 or i==1848651847 or i==1848651851 or i==1848651850 or i==1848651841 or i==1848651830
endfunction
function k6 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(M87(GetFilterUnit()))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0))!=null
endfunction
function Q67 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(M87(GetFilterUnit()))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0)and MP7(300,GetFilterUnit(),Condition(function QY7))==0)!=null
endfunction
function QL7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetUnitLifePercent(GetFilterUnit())<=40.)and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(M87(GetFilterUnit()))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0))!=null
endfunction
function Q17 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetWidgetLife(GetFilterUnit())>.405))!=null
endfunction
function Q07 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405))!=null
endfunction
function Q57 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))!=null
endfunction
function Q27 takes nothing returns boolean
return(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))!=null
endfunction
function k642 takes nothing returns boolean
return((not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405))!=null
endfunction
function k65 takes nothing returns boolean
return(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_DEAD)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_SUMMONED)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)and((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))or(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))))!=null
endfunction
function Q_7 takes nothing returns boolean
return(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and(GetWidgetLife(GetFilterUnit())>.405)and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_DEAD)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_SUMMONED)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit()))))!=null
endfunction
function R47 takes nothing returns boolean
return(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and(GetWidgetLife(GetFilterUnit())>.405)and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_DEAD)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_SUMMONED)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(bj_lastCreatedUnit))))!=null
endfunction
function R77 takes nothing returns boolean
return(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and(GetWidgetLife(GetFilterUnit())>.405)and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_DEAD)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_SUMMONED)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit()))))!=null
endfunction
function k7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetUnitLifePercent(GetFilterUnit())<50.))!=null
endfunction
function R87 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetUnitLifePercent(GetFilterUnit())<30.))!=null
endfunction
function k8 takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetOwningPlayer(GetFilterUnit())!=Player($C))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(Q97(GetFilterUnit())))!=null
endfunction
function k9 takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and((GetOwningPlayer(GetFilterUnit())==Z7[0])or(GetOwningPlayer(GetFilterUnit())==A7[0]))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(Q97(GetFilterUnit()))and(GetUnitState(GetFilterUnit(),UNIT_STATE_MANA)>200.))!=null
endfunction
function Ka takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetOwningPlayer(GetFilterUnit())!=Player($C))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(Q97(GetFilterUnit())))
endfunction
function KA takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(Q97(GetFilterUnit())))!=null
endfunction
function R97 takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))and(Q97(GetFilterUnit())))!=null
endfunction
function KA_Ally takes nothing returns boolean
return((not IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(Q97(GetFilterUnit())))!=null
endfunction
function RD7 takes nothing returns boolean
if((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(not IsUnitIllusion(GetFilterUnit()))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit))))then
if KE7(GetFilterUnit(),bj_lastLoadedUnit)<=$FA then
if GetUnitLifePercent(GetFilterUnit())>LD4 then
set IN4=GetFilterUnit()
set LD4=GetUnitLifePercent(IN4)
endif
else
if GetUnitLifePercent(GetFilterUnit())>LE4 then
set IP4=GetFilterUnit()
set LE4=GetUnitLifePercent(IP4)
endif
endif
endif
return false
endfunction
function RE7 takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return(((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and((i1==1697656915)or(i1==1697657137)or(i1==1697656914)or(i1==1697657145)or(i1==1966092366)or(i1==1966092356)or(i1==1966092365)or(i1==1966092372)))and(IK7(GetFilterUnit())>=1))!=null
endfunction
function RF7 takes nothing returns boolean
return(((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(M87(GetFilterUnit())))and(IK7(GetFilterUnit())>=1))!=null
endfunction
function IsUnitAllyHeroAttacking takes nothing returns boolean
return(((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetFilterUnit()!=GetEnumUnit())and(GetWidgetLife(GetFilterUnit())>.405))and IO7(GetFilterUnit()))!=null
endfunction
function RG7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetFilterUnit()!=GetEnumUnit())and(GetWidgetLife(GetFilterUnit())>.405))!=null
endfunction
function RH7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(M87(GetFilterUnit())))!=null
endfunction
function RI7 takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_MAGIC_IMMUNE))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))))!=null
endfunction
function RJ7 takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_MAGIC_IMMUNE))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))))!=null
endfunction
function RK7 takes nothing returns nothing
local integer RM7=MP7(G_7,GetEnumUnit(),H47)
local integer RN7=MP7(G_7,G17,H47)
if(G17==null)or(RM7>RN7)then
set G17=GetEnumUnit()
endif
endfunction
function RO7 takes real RP7,real RQ7,unit IM7,integer RR7,boolexpr Ig,boolexpr RS7 returns unit
set G67=RR7
set G_7=RQ7
set H47=RS7
set G17=null
call GroupClear(GL7)
call GroupEnumUnitsInRange(GL7,GetUnitX(IM7),GetUnitY(IM7),RP7,Ig)
call GroupRemoveUnit(GL7,IM7)
call ForGroup(GL7,function RK7)
call DestroyBoolExpr(Ig)
if RS7!=null then
call DestroyBoolExpr(H47)
endif
set H47=null
set Ig=null
return G17
endfunction
function RT7 takes unit RU7,unit RV7 returns boolean
local integer RW7=GetHeroLevel(RU7)
local integer RX7=GetHeroLevel(RV7)
local integer JS7=JP7(GetUnitTypeId(RV7))
if JS7==1 or JS7==2 then
return GetUnitLifePercent(RV7)>=GetUnitLifePercent(RU7)and(RX7>$D)and(RW7>RX7 or IAbsBJ(RW7-RX7)<5)
endif
return GetUnitState(RV7,UNIT_STATE_LIFE)<=400 or GetUnitLifePercent(RV7)>=GetUnitLifePercent(RU7)
endfunction
function RY7 takes nothing returns nothing
local integer RM7=MP7(350,GetEnumUnit(),Condition(function RI7))
local integer RN7=MP7(350,G17,Condition(function RI7))
local integer RZ7=MP7(350,G17,Condition(function RH7))
local real RA7=G27
local integer RB7=MP7(350,GetEnumUnit(),Condition(function RH7))
local real RC7=G27
if(G17==null)or(RB7>RZ7)then
set G17=GetEnumUnit()
elseif RB7==RZ7 then
set G17=JD7(RC7>=RA7 or RM7>=RN7,GetEnumUnit(),G17)
endif
endfunction
function R37 takes real RP7,unit IM7,integer RR7,boolexpr Ig returns unit
set G67=RR7
set G17=null
call GroupClear(GL7)
call GroupEnumUnitsInRange(GL7,GetUnitX(IM7),GetUnitY(IM7),RP7,Ig)
call GroupRemoveUnit(GL7,IM7)
call ForGroup(GL7,function RY7)
call DestroyBoolExpr(Ig)
set Ig=null
return G17
endfunction
function R67 takes nothing returns nothing
local unit IH7=GetEnumUnit()
local unit RL7
local integer R17=0
if(hy==null)or(RT7(hy,IH7)and MP7(350,IH7,Condition(function RI7))>0)then
set RL7=R37(350,IH7,R17,Condition(function R77))
set RL7=JD7(RL7!=null,RL7,R37(350,IH7,R17,Condition(function RG7)))
if IsUnitType(RL7,UNIT_TYPE_HERO)then
set RL7=JD7(GetUnitLifePercent(RL7)>GetUnitLifePercent(IH7),RL7,IH7)
endif
set G07=JD7((RL7!=null),RL7,G07)
endif
set IH7=null
set RL7=null
endfunction
function R07 takes real R57,unit R27 returns unit
local boolexpr Ig=Condition(function k6)
set hy=null
set G07=null
set bj_lastLoadedUnit=R27
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(R27),GetUnitY(R27),R57,Ig)
call GroupRemoveUnit(iA,R27)
call ForGroup(iA,function R67)
call DestroyBoolExpr(Ig)
set Ig=null
set G57[GetPlayerId(GetOwningPlayer(R27))]=hy
return G07
endfunction
function R_7 takes unit I77 returns unit
local boolexpr Ig=Condition(function RJ7)
set G17=null
set bj_lastLoadedUnit=GetEnumUnit()
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(I77),GetUnitY(I77),350,Ig)
call GroupRemoveUnit(iA,I77)
call ForGroup(iA,function RY7)
call DestroyBoolExpr(Ig)
set Ig=null
call HC7(GetUnitName(G17))
return G17
endfunction
function S47 takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and((i1==1697656915)or(i1==1697657137)or(i1==1697656914)or(i1==1697657145)or(i1==1966092366)or(i1==1966092356)or(i1==1966092365)or(i1==1966092372)))!=null
endfunction
function S77 takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and((i1==1747993430)or(i1==1747993432)or(i1==1747993431)))
endfunction
function S87 takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and((i1==1970169187)or(i1==1966092338)or(i1==1701081721)or(i1==1697656919)))
endfunction
function S97 takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetWidgetLife(GetFilterUnit())>.405)and((i1==1697656915)or(i1==1697657137)or(i1==1697656914)or(i1==1697657145)or(i1==1966092366)or(i1==1966092356)or(i1==1966092365)or(i1==1966092372)))!=null
endfunction
function KB takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and((i1==1970496880)or(i1==1970564964)or(i1==1700884333)or(i1==1700884325)))!=null
endfunction
function Kc takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetWidgetLife(GetFilterUnit())>.405)and(Q97(GetFilterUnit()))and((GetOwningPlayer(GetFilterUnit())==Z7[0])or(GetOwningPlayer(GetFilterUnit())==A7[0]))and(GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<150.))!=null
endfunction
function SD7 takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)and(GetWidgetLife(GetFilterUnit())>.405)and(Q97(GetFilterUnit()))and((GetOwningPlayer(GetFilterUnit())==Z7[0])or(GetOwningPlayer(GetFilterUnit())==A7[0]))and(GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<250.))!=null
endfunction
function FindEnemyCreepTrig takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)and(GetWidgetLife(GetFilterUnit())>.405)and(Q97(GetFilterUnit()))and((GetOwningPlayer(GetFilterUnit())==Z7[0])or(GetOwningPlayer(GetFilterUnit())==A7[0]))and(GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<250.))!=null
endfunction
function SE7 takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)and(GetWidgetLife(GetFilterUnit())>.405)and(Q97(GetFilterUnit()))and((GetOwningPlayer(GetFilterUnit())==Z7[0])or(GetOwningPlayer(GetFilterUnit())==A7[0]))and(GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<160.))!=null
endfunction
function SF7 takes nothing returns boolean
return((IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)and(GetWidgetLife(GetFilterUnit())>.405)and(Q97(GetFilterUnit()))and((GetOwningPlayer(GetFilterUnit())==Z7[0])or(GetOwningPlayer(GetFilterUnit())==A7[0]))and(GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>200.))!=null
endfunction
function SG7 takes nothing returns boolean
return((not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)and(GetWidgetLife(GetFilterUnit())>.405)and(Q97(GetFilterUnit()))and((GetOwningPlayer(GetFilterUnit())==Z7[0])or(GetOwningPlayer(GetFilterUnit())==A7[0]))and(GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>200.))!=null
endfunction
function KC takes nothing returns boolean
return((IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetFilterUnit()!=GetEnumUnit())and(GetWidgetLife(GetFilterUnit())>.405)and(Q97(GetFilterUnit())))!=null
endfunction
function Kd takes nothing returns boolean
return((IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetWidgetLife(GetFilterUnit())>.405)and(Q97(GetFilterUnit())))!=null
endfunction
function KD takes nothing returns boolean
if((IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit()))or GetUnitTypeId(GetEnumUnit())==1433105516)and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetWidgetLife(GetFilterUnit())>.405)and(Q97(GetFilterUnit()))and((GetOwningPlayer(GetFilterUnit())==Z7[0])or(GetOwningPlayer(GetFilterUnit())==A7[0])or(GetOwningPlayer(GetFilterUnit())==Player($C))))then
if((GetUnitTypeId(GetEnumUnit())==1433105516)or(not IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)))then
return((GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<150.)or(GetUnitLifePercent(GetFilterUnit())<35.))
elseif((GetUnitTypeId(GetEnumUnit())==1433168227)or(GetUnitTypeId(GetEnumUnit())==1160785972))then
return(GetUnitLifePercent(GetFilterUnit())>70.)
endif
endif
return false
endfunction
function SH7 takes nothing returns boolean
if((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetWidgetLife(GetFilterUnit())>30.)and(Q97(GetFilterUnit()))and((GetOwningPlayer(GetFilterUnit())==Z7[0])or(GetOwningPlayer(GetFilterUnit())==A7[0])or(GetOwningPlayer(GetFilterUnit())==Player($C))))then
return(GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<LD4)
endif
return false
endfunction
function SI7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetFilterUnit()!=GetEnumUnit())and(GetWidgetLife(GetFilterUnit())>.405)and(GetUnitTypeId(GetFilterUnit())!=1211117642))!=null
endfunction
function SJ7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetFilterUnit()!=GetEnumUnit())and(GetWidgetLife(GetFilterUnit())>.405)and(GetUnitLifePercent(GetFilterUnit())>40.)and(GetUnitTypeId(GetFilterUnit())!=1211117642))!=null
endfunction
function SK7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_MELEE_ATTACKER))and(GetWidgetLife(GetFilterUnit())>.405)and(GetOwningPlayer(GetFilterUnit())!=Player($C))and(GetUnitLifePercent(GetFilterUnit())>65.)and(not IsUnitIllusion(GetFilterUnit())))!=null
endfunction
function SM7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_RANGED_ATTACKER))and(GetWidgetLife(GetFilterUnit())>.405)and(GetOwningPlayer(GetFilterUnit())!=Player($C))and(GetUnitLifePercent(GetFilterUnit())>65.)and(not IsUnitIllusion(GetFilterUnit())))!=null
endfunction
function Kf takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetFilterUnit()!=GetEnumUnit())and(GetWidgetLife(GetFilterUnit())>.405)and(K57(GetFilterUnit()))and(GetUnitTypeId(GetFilterUnit())!=1211117642))!=null
endfunction
function SN7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetFilterUnit()!=GetEnumUnit())and(GetWidgetLife(GetFilterUnit())>.405)and(GetUnitLifePercent(GetFilterUnit())<50.))!=null
endfunction
function SO7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetFilterUnit()!=GetEnumUnit())and(GetWidgetLife(GetFilterUnit())>.405)and(GetUnitLifePercent(GetFilterUnit())<30.)and(K57(GetFilterUnit())))!=null
endfunction
function IsUnitHeroAllyUnder70HPEnum takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetFilterUnit()!=GetEnumUnit())and(GetWidgetLife(GetFilterUnit())>.405)and(GetUnitLifePercent(GetFilterUnit())<70.))!=null
endfunction
function SP7 takes nothing returns boolean
return JR7(GetUnitTypeId(GetFilterUnit()),G)
endfunction
function SQ7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetFilterUnit()!=GetEnumUnit())and(GetWidgetLife(GetFilterUnit())>.405)and(GetUnitLifePercent(GetFilterUnit())<99.)and(GetUnitTypeId(GetFilterUnit())!=1211117642))!=null
endfunction
function SR7 takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and((i1==1697656915)or(i1==1697657137)or(i1==1697656914)or(i1==1697657145)or(i1==1966092366)or(i1==1966092356)or(i1==1966092365)or(i1==1966092372)))!=null
endfunction
function KG takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
if(GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetEnumUnit()))and(GetWidgetLife(GetFilterUnit())>.405)and((i1==1865429304)or(i1==1865429042)or(i1==1865429058)or(i1==1865429314))then
if(GZ[272+GetPlayerId(GetOwningPlayer(GetFilterUnit()))])then
return(GetUnitUserData(GetFilterUnit())==1)
else
return(GetUnitUserData(GetFilterUnit())==0)
endif
endif
return false
endfunction
function SS7 takes nothing returns boolean
return((GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(bj_lastLoadedUnit))and(GetWidgetLife(GetFilterUnit())>.405)and(GetUnitTypeId(GetFilterUnit())==1869901684))
endfunction
function aiIsTechiesMines takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return((GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetEnumUnit()))and(GetWidgetLife(GetFilterUnit())>.405)and((i1==1865429304)or(i1==1865429042)or(i1==1865429058)or(i1==1865429314)or(i1==1869901684)or(i1==1311780943)or(i1==1311780944)or(i1==1311780945)or(i1==1311780942)))
endfunction
function ST7 takes nothing returns boolean
if((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetFilterUnit()!=bj_lastLoadedUnit)and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))and(GetWidgetLife(GetFilterUnit())>.405)and((not LG4)or(GetUnitLifePercent(GetFilterUnit())>50)))then
set bj_forLoopAIndexEnd=T[GetPlayerId(GetOwningPlayer(GetFilterUnit()))]-V[GetPlayerId(GetOwningPlayer(GetFilterUnit()))]
if(hy==null)or(bj_forLoopAIndex<bj_forLoopAIndexEnd)then
set hy=GetFilterUnit()
set bj_forLoopAIndex=bj_forLoopAIndexEnd
endif
endif
return false
endfunction
function SU7 takes real K1,unit it,boolean SV7 returns unit
local boolexpr Ig=Condition(function ST7)
set hy=null
set bj_lastLoadedUnit=it
set bj_forLoopAIndex=0
set LG4=SV7
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(it),GetUnitY(it),K1,Ig)
call DestroyBoolExpr(Ig)
set Ig=null
return hy
endfunction
function Kh takes nothing returns boolean
return((IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and(GetUnitTypeId(GetFilterUnit())==1697657392))
endfunction
function KH takes nothing returns boolean
return((GetFilterUnit()!=GetAttacker())and(Q97(GetFilterUnit()))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitInRange(GetAttacker(),GetFilterUnit(),800.)))
endfunction
function Ki takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetAttacker())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetWidgetLife(GetFilterUnit())>.405)and(Q97(GetFilterUnit()))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetAttacker()))))!=null
endfunction
function KI takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetAttacker())))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetAttacker()))))!=null
endfunction
function Kj takes nothing returns boolean
return((IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetAttacker())))and(GetFilterUnit()!=GetAttacker())and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(Q97(GetFilterUnit()))and(GetWidgetLife(GetFilterUnit())>.405))!=null
endfunction
function KJ takes nothing returns boolean
return((IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetAttacker())))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and((GetOwningPlayer(GetFilterUnit())==Z7[0])or(GetOwningPlayer(GetFilterUnit())==A7[0]))and(GetWidgetLife(GetFilterUnit())>.405))!=null
endfunction
function Kk takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetFilterUnit()!=GetAttacker())and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetAttacker())))and(GetWidgetLife(GetFilterUnit())>.405))!=null
endfunction
function KK takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and((ME7(GetFilterUnit()))or((GetUnitLifePercent(GetEnumUnit())-GetUnitLifePercent(GetFilterUnit()))>20.)))!=null
endfunction
function Kl takes nothing returns boolean
return((IsHeroUnitId(GetUnitTypeId(GetFilterUnit())))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and((GetUnitLifePercent(GetFilterUnit())<50.)or((GetUnitLifePercent(GetEnumUnit())-GetUnitLifePercent(GetFilterUnit()))>20.)))
endfunction
function KL takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and(GetUnitTypeId(GetFilterUnit())==1211117642))!=null
endfunction
function Km takes nothing returns boolean
return(((GetUnitTypeId(GetFilterUnit())==1865429304)or(GetUnitTypeId(GetFilterUnit())==1865429042)or(GetUnitTypeId(GetFilterUnit())==1865429058))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(not IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405))
endfunction
function KM takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and((GetUnitAbilityLevel(GetFilterUnit(),1113815395)>0)or(GetUnitAbilityLevel(GetFilterUnit(),1113815346)>0)or(GetUnitCurrentOrder(GetFilterUnit())==$D0005)))!=null
endfunction
function Kn takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(UnitCountBuffsExBJ(bj_BUFF_POLARITY_NEGATIVE,bj_BUFF_RESIST_EITHER,GetFilterUnit(),false,false)==0))!=null
endfunction
function KN takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(kP(GetUnitTypeId(GetFilterUnit()))))!=null
endfunction
function Ko takes nothing returns boolean
return((GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetEnumUnit()))and(GetFilterUnit()!=GetEnumUnit())and(GetWidgetLife(GetFilterUnit())>.405)and(Q97(GetFilterUnit())))
endfunction
function KO takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(GetWidgetLife(GetFilterUnit())>.405)and(MR7(GetFilterUnit(),ZU[WC]))and(Y74[GetPlayerId(GetOwningPlayer(GetFilterUnit()))]!=1))!=null
endfunction
function KP_OLD takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(GetWidgetLife(GetFilterUnit())>.405)and(Y74[GetPlayerId(GetOwningPlayer(GetFilterUnit()))]!=1))!=null
endfunction
function SW7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(GetWidgetLife(GetFilterUnit())>.405))!=null
endfunction
function Kq takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(GetWidgetLife(GetFilterUnit())>.405)and(GetFilterUnit()!=GetTriggerUnit()))!=null
endfunction
function KQ takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetSpellTargetUnit())))and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(GetWidgetLife(GetFilterUnit())>.405)and(not ME7(GetFilterUnit())))!=null
endfunction
function Kr takes nothing returns boolean
if(QN7())then
return GetUnitAbilityLevel(GetFilterUnit(),1112560453)>0
endif
return false
endfunction
function KR takes nothing returns boolean
return(GetUnitTypeId(GetFilterUnit())==1865429043)
endfunction
function C6 takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and((GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)or(IsUnitInForce(GetTriggerUnit(),QX4)))and(not IsUnitIllusion(GetTriggerUnit()))and(IsUnitAlly(GetTriggerUnit(),Z7[0])))!=null
endfunction
function D6 takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and((GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)or(QY4[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]))and(not IsUnitIllusion(GetTriggerUnit()))and(IsUnitAlly(GetTriggerUnit(),A7[0])))!=null
endfunction
function SX7 takes nothing returns boolean
return(((GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)or(QY4[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]))and(not IsUnitIllusion(GetTriggerUnit()))and(IsUnitAlly(GetTriggerUnit(),Z7[0])))
endfunction
function SY7 takes nothing returns boolean
return(((GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)or(QY4[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]))and(not IsUnitIllusion(GetTriggerUnit()))and(IsUnitAlly(GetTriggerUnit(),A7[0])))
endfunction
function SZ7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(not IsUnitIllusion(GetFilterUnit()))and(IsUnitAlly(GetFilterUnit(),Z7[0])))!=null
endfunction
function Kt2 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(not IsUnitIllusion(GetFilterUnit()))and(IsUnitAlly(GetFilterUnit(),Z7[0]))and(eY[GetPlayerId(GetOwningPlayer(GetFilterUnit()))]==3))!=null
endfunction
function SA7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(not IsUnitIllusion(GetFilterUnit()))and(IsUnitAlly(GetFilterUnit(),A7[0])))!=null
endfunction
function KT2 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(not IsUnitIllusion(GetFilterUnit()))and(IsUnitAlly(GetFilterUnit(),A7[0]))and(eY[GetPlayerId(GetOwningPlayer(GetFilterUnit()))]==3))!=null
endfunction
function SB7 takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)and(not IsUnitIllusion(GetTriggerUnit())))!=null
endfunction
function SC7 takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(not IsUnitIllusion(GetTriggerUnit())))!=null
endfunction
function Kv takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and(GetOwningPlayer(GetFilterUnit())!=Player($C))and(Q97(GetFilterUnit()))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit()))))!=null
endfunction
function KV takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and(GetOwningPlayer(GetFilterUnit())!=Player($C))and(Q97(GetFilterUnit()))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_RANGED_ATTACKER)))!=null
endfunction
function Kw takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and(GetOwningPlayer(GetFilterUnit())!=Player($C))and(Q97(GetFilterUnit()))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_RANGED_ATTACKER))and(not IsUnitInRange(GetEnumUnit(),GetFilterUnit(),200.)))!=null
endfunction
function KW takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and((IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))or(eY[32+GetPlayerId(GetOwningPlayer(GetFilterUnit()))]>0)or((not kD(GetFilterUnit()))and(IsUnitInRange(GetFilterUnit(),GetEnumUnit(),600.))))and(GetUnitLifePercent(GetFilterUnit())>40.))!=null
endfunction
function S37 takes nothing returns boolean
if((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405))then
if(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))then
return true
elseif(not kD(GetFilterUnit()))then
return((eY[32+GetPlayerId(GetOwningPlayer(GetFilterUnit()))]>0)or(IsUnitInRange(GetFilterUnit(),GetEnumUnit(),600.)))
else
return(eY[32+GetPlayerId(GetOwningPlayer(GetFilterUnit()))]>2)
endif
endif
return false
endfunction
function KX takes nothing returns boolean
if((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetOwningPlayer(GetFilterUnit())!=Player($C))and(GetWidgetLife(GetFilterUnit())>.405)and(Q97(GetFilterUnit())))then
if((IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))or(GetOwningPlayer(GetFilterUnit())==Z7[0])or(GetOwningPlayer(GetFilterUnit())==A7[0]))then
return true
elseif(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))then
return((eY[32+GetPlayerId(GetOwningPlayer(GetFilterUnit()))]>0)or((not kD(GetFilterUnit()))and(IsUnitInRange(GetFilterUnit(),GetEnumUnit(),600.))))
endif
endif
return false
endfunction
function Ky takes nothing returns boolean
if((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetOwningPlayer(GetFilterUnit())!=Player($C))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetWidgetLife(GetFilterUnit())>.405)and(Q97(GetFilterUnit())))then
if((IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))or(GetOwningPlayer(GetFilterUnit())==Z7[0])or(GetOwningPlayer(GetFilterUnit())==A7[0]))then
return true
elseif(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))then
return((eY[32+GetPlayerId(GetOwningPlayer(GetFilterUnit()))]>0)or((not kD(GetFilterUnit()))and(IsUnitInRange(GetFilterUnit(),GetEnumUnit(),600.))))
endif
endif
return false
endfunction
function KY takes real IW,location b5 returns integer
local boolexpr Ig=Condition(function KW)
call GroupClear(H8)
call GroupEnumUnitsInRangeOfLoc(H8,b5,IW,Ig)
call DestroyBoolExpr(Ig)
set Ig=null
return kB(true,H8)
endfunction
function Kz takes real IW,location b5 returns integer
local boolexpr Ig=Condition(function k6)
call GroupClear(H8)
call GroupEnumUnitsInRangeOfLoc(H8,b5,IW,Ig)
call DestroyBoolExpr(Ig)
set Ig=null
return kB(false,H8)
endfunction
function KZ takes nothing returns nothing
if((hy==null)or(GetUnitState(hy,UNIT_STATE_LIFE)>GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)))and(GetEnumUnit()!=CN4 or CN4==null)then
set hy=GetEnumUnit()
endif
endfunction
function S67 takes nothing returns nothing
if((hy==null)or(GetUnitState(hy,UNIT_STATE_LIFE)<GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)))and(GetEnumUnit()!=CN4 or CN4==null)then
set hy=GetEnumUnit()
endif
endfunction
function S17 takes real K1,unit IB returns unit
local boolexpr Ig=Condition(function QN7)
set hy=null
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(IB),GetUnitY(IB),K1,Ig)
call ForGroup(iA,function KZ)
call DestroyBoolExpr(Ig)
set Ig=null
return hy
endfunction
function S07 takes real K1,unit IB returns unit
local boolexpr Ig=Condition(function QP7)
set hy=null
set bj_lastLoadedUnit=IB
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(IB),GetUnitY(IB),K1,Ig)
call ForGroup(iA,function KZ)
call DestroyBoolExpr(Ig)
set Ig=null
return hy
endfunction
function S57 takes real K1,unit IB,real x,real y returns unit
local boolexpr Ig=Condition(function QP7)
set hy=null
set bj_lastLoadedUnit=IB
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,x,y,K1,Ig)
call ForGroup(iA,function KZ)
call DestroyBoolExpr(Ig)
set Ig=null
return hy
endfunction
function S27 takes real K1,unit IB,boolexpr Ig returns unit
set hy=null
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(IB),GetUnitY(IB),K1,Ig)
call ForGroup(iA,function KZ)
call DestroyBoolExpr(Ig)
return hy
endfunction
function S_7 takes real K1,unit IB returns unit
local boolexpr Ig=Condition(function QS7)
set hy=null
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(IB),GetUnitY(IB),K1,Ig)
call ForGroup(iA,function KZ)
call DestroyBoolExpr(Ig)
set Ig=null
return hy
endfunction
function T47 takes real K1,unit IB returns unit
local boolexpr Ig=Condition(function QT7)
set hy=null
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(IB),GetUnitY(IB),K1,Ig)
call ForGroup(iA,function KZ)
call DestroyBoolExpr(Ig)
set Ig=null
return hy
endfunction
function T77 takes real K1,unit IB returns unit
local boolexpr Ig=Condition(function QT7)
set hy=null
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(IB),GetUnitY(IB),K1,Ig)
call ForGroup(iA,function S67)
call DestroyBoolExpr(Ig)
set Ig=null
return hy
endfunction
function T87 takes nothing returns nothing
if((hy==null)or(GetUnitState(hy,UNIT_STATE_MANA)<GetUnitState(GetEnumUnit(),UNIT_STATE_MANA)))and(GetEnumUnit()!=CN4 or CN4==null)then
set hy=GetEnumUnit()
endif
endfunction
function T97 takes real K1,unit IB returns unit
local boolexpr Ig=Condition(function QN7)
set hy=null
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(IB),GetUnitY(IB),K1,Ig)
call ForGroup(iA,function T87)
call DestroyBoolExpr(Ig)
set Ig=null
return hy
endfunction
function TD7 takes nothing returns nothing
if((hy==null)or(GetHeroLevel(hy)<GetHeroLevel(GetEnumUnit())))and(GetEnumUnit()!=CN4 or CN4==null)and(OM7(GetHandleId(GetOwningPlayer(GetEnumUnit())),"AI|Class")<=2)then
set hy=GetEnumUnit()
endif
endfunction
function TE7 takes real K1,unit IB returns unit
local boolexpr Ig=Condition(function QN7)
set hy=null
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(IB),GetUnitY(IB),K1,Ig)
call ForGroup(iA,function TD7)
call DestroyBoolExpr(Ig)
set Ig=null
return hy
endfunction
function TF7 takes nothing returns nothing
if((hy==null)or(GetUnitState(hy,UNIT_STATE_LIFE)>GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)))and(KE7(GetEnumUnit(),bj_lastLoadedUnit)>800.)and(GetEnumUnit()!=CN4 or CN4==null)then
set hy=GetEnumUnit()
endif
endfunction
function TG7 takes unit IB returns unit
local boolexpr Ig=Condition(function QP7)
set hy=null
set bj_lastLoadedUnit=IB
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(IB),GetUnitY(IB),1200.,Ig)
call ForGroup(iA,function TF7)
call DestroyBoolExpr(Ig)
set Ig=null
return hy
endfunction
function K2 takes real K1,location b5 returns unit
local boolexpr Ig=Condition(function QN7)
set hy=null
call GroupClear(iA)
call GroupEnumUnitsInRangeOfLoc(iA,b5,K1,Ig)
call ForGroup(iA,function KZ)
call DestroyBoolExpr(Ig)
set Ig=null
return hy
endfunction
function K3 takes real K1,unit IB,boolexpr Ig returns unit
set hy=null
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(IB),GetUnitY(IB),K1,Ig)
call ForGroup(iA,function KZ)
call DestroyBoolExpr(Ig)
return hy
endfunction
function K4 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(((GetHeroLevel(GetEnumUnit())>5)and(IsUnitInRange(GetFilterUnit(),GetEnumUnit(),300.)))or(KE7(GetEnumUnit(),NF7(GetEnumUnit()))>KE7(GetFilterUnit(),NF7(GetEnumUnit())))))!=null
endfunction
function TH7 takes nothing returns nothing
set GU=true
endfunction
function TI7 takes nothing returns boolean
local integer d=GetDestructableTypeId(GetFilterDestructable())
return d==1096053874 or d==1112831095 or d==1263826039 or d==1498703476 or d==1247044468 or d==1498706804 or d==1498702708 or d==1498707828 or d==1247049588 or d==1247049588 or d==1179939959 or d==1129608306 or d==1230271607 or d==1314157687 or d==1330934903 or d==1515484279 or d==1465152372 or d==1280601204 or d==1196716904 or d==1484024948 or d==1465152631 or d==1098151011 or d==1112831075 or d==1129608291 or d==1230271587 or d==1314157667 or d==1515484259
endfunction
function K5 takes nothing returns nothing
if((GetDestructableTypeId(GetEnumDestructable())==1465152372)or(GetDestructableTypeId(GetEnumDestructable())==1230271587)or(GetDestructableTypeId(GetEnumDestructable())==1230271607)or(GetDestructableTypeId(GetEnumDestructable())==1314157687)or(GetDestructableTypeId(GetEnumDestructable())==1129608306)or(GetDestructableTypeId(GetEnumDestructable())==1096053874))then
set GU=true
endif
endfunction
function K6 takes unit u returns boolean
local boolexpr b
set GU=false
call MoveLocation(Ha,GetUnitX(u),GetUnitY(u))
set bj_enumDestructableCenter=Ha
set bj_enumDestructableRadius=375.
call SetRect(He,GetUnitX(u)-375.,GetUnitY(u)-375.,GetUnitX(u)+375.,GetUnitY(u)+375.)
set b=Filter(function TI7)
call EnumDestructablesInRect(He,b,function TH7)
call DestroyBoolExpr(b)
return GU
endfunction
function TJ7 takes nothing returns nothing
local real dx=GetLocationX(bj_enumDestructableCenter)-GetDestructableX(GetEnumDestructable())
local real dy=GetLocationY(bj_enumDestructableCenter)-GetDestructableY(GetEnumDestructable())
local real r=dx*dx+dy*dy
if GetDestructableLife(GetEnumDestructable())>.405 and r<bj_enumDestructableRadius then
set V54=GetEnumDestructable()
set bj_enumDestructableRadius=r
endif
endfunction
function TK7 takes location l,real r returns boolean
local boolexpr b
set V54=null
if bj_enumDestructableCenter==null then
set bj_enumDestructableCenter=Location(GetLocationX(l),GetLocationY(l))
else
call MoveLocation(bj_enumDestructableCenter,GetLocationX(l),GetLocationY(l))
endif
set bj_enumDestructableRadius=r*r
call SetRect(He,GetLocationX(l)-r,GetLocationY(l)-r,GetLocationX(l)+r,GetLocationY(l)+r)
set b=Filter(function TI7)
call EnumDestructablesInRect(He,b,function TJ7)
call DestroyBoolExpr(b)
set b=null
return V54!=null
endfunction
function TM7 takes nothing returns nothing
local real x=GetDestructableX(GetEnumDestructable())
local real y=GetDestructableY(GetEnumDestructable())
local real dx=x-GetLocationX(bj_enumDestructableCenter)
local real dy=y-GetLocationY(bj_enumDestructableCenter)
local real r=dx*dx+dy*dy
local real r2
if r<bj_enumDestructableRadius and GetDestructableLife(GetEnumDestructable())>.405 then
set dx=x-V24
set dy=y-V_4
set r=dx*W44+dy*W74
set r2=dx*dx+dy*dy-r*r
if r<W84 then
elseif r<W94 and r2<WE4*r*r then
set bj_enumDestructableRadius=0
elseif r2<WD4*r*r then
set WD4=r2/r/r
set V54=GetEnumDestructable()
endif
endif
endfunction
function TN7 takes unit u,real RP7 returns boolean
local real x=GetLocationX(DH7)
local real y=GetLocationY(DH7)
local real dx=x-GetUnitX(u)
local real dy=y-GetUnitY(u)
local real r=SquareRoot(dx*dx+dy*dy)
local boolexpr b
set V54=null
if bj_enumDestructableCenter==null then
set bj_enumDestructableCenter=GetUnitLoc(u)
else
call MoveLocation(bj_enumDestructableCenter,GetUnitX(u),GetUnitY(u))
endif
set bj_enumDestructableRadius=RP7*RP7
set W84=r*90./225.
set W94=W84+r
set W44=dx/r
set W74=dy/r
set V24=x-W94*W44
set V_4=y-W94*W74
set WD4=1/(W94*W94/((90.+225.)*315.)-1)
set WE4=WD4
call SetRect(He,GetUnitX(u)-RP7,GetUnitY(u)-RP7,GetUnitX(u)+RP7,GetUnitY(u)+RP7)
set b=Filter(function TI7)
call EnumDestructablesInRect(He,b,function TM7)
call DestroyBoolExpr(b)
set b=null
if V54==null or bj_enumDestructableRadius==0 then
return false
endif
call MoveLocation(DH7,x+(GetDestructableX(V54)-x)*225./315.,y+(GetDestructableY(V54)-y)*225./315.)
return true
endfunction
function K7 takes nothing returns boolean
return((IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and((GetUnitAbilityLevel(GetFilterUnit(),1097102451)>0)or(GetUnitAbilityLevel(GetFilterUnit(),1097102385)>0)or(GetUnitAbilityLevel(GetFilterUnit(),1093684533)>0)or(GetUnitAbilityLevel(GetFilterUnit(),1098150517)>0)or(GetUnitAbilityLevel(GetFilterUnit(),1093683785)>0)))
endfunction
function K8 takes nothing returns boolean
return((GetDestructableTypeId(GetFilterDestructable())==1096053874)or(GetDestructableTypeId(GetFilterDestructable())==1314157687)or(GetDestructableTypeId(GetFilterDestructable())==1129608306))
endfunction
function K9 takes nothing returns nothing
if(GetDestructableMaxLife(GetEnumDestructable())==49.)then
set H0=GetEnumDestructable()
endif
endfunction
function la takes nothing returns nothing
if(GetDestructableMaxLife(GetEnumDestructable())==48.)then
set H0=GetEnumDestructable()
endif
endfunction
function lA takes unit it,boolean O6 returns boolean
call SetRect(He,GetUnitX(it)-600.,GetUnitY(it)-600.,GetUnitX(it)+600.,GetUnitY(it)+600.)
set H0=null
if(O6)then
call EnumDestructablesInRect(He,Condition(function K8),function K9)
else
call EnumDestructablesInRect(He,Condition(function K8),function la)
endif
return H0!=null
endfunction
function TO7 takes nothing returns boolean
return true
endfunction
function l6 takes multiboard L6,integer c,integer r,string M6 returns nothing
local multiboarditem p6=null
set p6=MultiboardGetItem(L6,r-1,c-1)
call MultiboardSetItemValue(p6,M6)
call MultiboardReleaseItem(p6)
set p6=null
endfunction
function P6 takes multiboard L6,integer c,integer r,string q6 returns nothing
local multiboarditem p6=null
set p6=MultiboardGetItem(L6,r-1,c-1)
call MultiboardSetItemIcon(p6,q6)
call MultiboardReleaseItem(p6)
set p6=null
endfunction
function s6 takes multiboard L6,integer c,integer r,boolean t6,boolean T6 returns nothing
local multiboarditem p6=null
set p6=MultiboardGetItem(L6,r-1,c-1)
call MultiboardSetItemStyle(p6,t6,T6)
call MultiboardReleaseItem(p6)
set p6=null
endfunction
function U6 takes multiboard L6,integer c,integer r,real w6,real Y6,real Z6,real e7 returns nothing
local multiboarditem p6=null
set p6=MultiboardGetItem(L6,r-1,c-1)
call MultiboardSetItemValueColor(p6,PercentTo255(w6),PercentTo255(Y6),PercentTo255(Z6),PercentTo255(100.-e7))
call MultiboardReleaseItem(p6)
set p6=null
endfunction
function x7 takes multiboard L6,integer c,integer r,real r7 returns nothing
local multiboarditem p6=null
set p6=MultiboardGetItem(L6,r-1,c-1)
call MultiboardSetItemWidth(p6,r7/ 100)
call MultiboardReleaseItem(p6)
set p6=null
endfunction
function TP7 takes integer i returns nothing
if i>$3E80 then
set gl[i-$3E80]=null
elseif i>8000 then
set Fl[i-8000]=null
else
set fl[i]=null
endif
endfunction
function TQ7 takes integer i returns unit
if i>$3E80 then
return gl[i-$3E80]
elseif i>8000 then
return Fl[i-8000]
else
return fl[i]
endif
return fl[i]
endfunction
function TR7 takes integer i returns destructable
if i>$3E80 then
return XX4[i-$3E80]
elseif i>8000 then
return XY4[i-8000]
else
return XZ4[i]
endif
return XZ4[i]
endfunction
function TS7 takes unit u returns integer
set Hl=Hl+1
if Hl>$3E80 then
set gl[Hl-$3E80]=u
elseif Hl>8000 then
set Fl[Hl-8000]=u
else
set fl[Hl]=u
endif
return Hl
endfunction
function TT7 takes integer i returns nothing
if i>$3E80 then
set XX4[i-$3E80]=null
elseif i>8000 then
set XY4[i-8000]=null
else
set XZ4[i]=null
endif
endfunction
function TU7 takes destructable d returns integer
set XA4=XA4+1
if XA4>$3E80 then
set XX4[XA4-$3E80]=d
elseif XA4>8000 then
set XY4[XA4-8000]=d
else
set XZ4[XA4]=d
endif
return XA4
endfunction
function TV7 takes player hd returns boolean
return((hd==Z7[0])or(hd==Z7[1])or(hd==Z7[2])or(hd==Z7[3])or(hd==Z7[4])or(hd==Z7[5]))
endfunction
function TW7 takes player hd returns boolean
return((hd==A7[0])or(hd==A7[1])or(hd==A7[2])or(hd==A7[3])or(hd==A7[4])or(hd==A7[5]))
endfunction
function TX7 takes player p returns boolean
return p==Z7[1]or p==Z7[2]or p==Z7[3]or p==Z7[4]or p==Z7[5]or p==A7[1]or p==A7[2]or p==A7[3]or p==A7[4]or p==A7[5]
endfunction
function TY7 takes player j8 returns boolean
return((GetPlayerSlotState(j8)==PLAYER_SLOT_STATE_PLAYING)and(GetPlayerController(j8)==MAP_CONTROL_USER))
endfunction
function TZ7 takes player j8 returns boolean
return((GetPlayerSlotState(j8)==PLAYER_SLOT_STATE_PLAYING)and(GetPlayerController(j8)==MAP_CONTROL_COMPUTER))
endfunction
function TA7 takes player j8 returns boolean
return((GetPlayerSlotState(j8)==PLAYER_SLOT_STATE_PLAYING)and((GetPlayerController(j8)==MAP_CONTROL_USER)or(GetPlayerController(j8)==MAP_CONTROL_COMPUTER)))
endfunction
function TB7 takes player j8 returns boolean
return((GetPlayerSlotState(j8)==PLAYER_SLOT_STATE_PLAYING)and((GetPlayerController(j8)==MAP_CONTROL_USER)or(QY4[GetPlayerId(j8)])))
endfunction
function TC7 takes integer HB7,unit T37 returns integer
local integer x=1
local integer JL7=0
loop
exitwhen x>5
if TA7(Z7[x])then
if(GetUnitTypeId(M7[x])==HB7 and IsUnitEnemy(M7[x],GetOwningPlayer(T37)))then
return GetPlayerId(Z7[x])
endif
endif
if TA7(A7[x])then
if(GetUnitTypeId(M7[6+x])==HB7 and IsUnitEnemy(M7[6+x],GetOwningPlayer(T37)))then
return GetPlayerId(A7[x])
endif
endif
set x=x+1
endloop
return JL7
endfunction
function T67 takes unit TL7 returns integer
return OM7(GetHandleId(TL7),"Invoker|Wex")
endfunction
function T17 takes unit TL7 returns integer
return OM7(GetHandleId(TL7),"Invoker|Quas")
endfunction
function T07 takes unit TL7 returns integer
return OM7(GetHandleId(TL7),"Invoker|Exort")
endfunction
function T57 takes unit TL7,integer T27 returns boolean
local integer T_7=GetHandleId(TL7)
local integer U47=OM7(T_7,"Invoker|Current1")
local integer U77=OM7(T_7,"Invoker|Current2")
if T27==U47 or T27==U77 then
return true
endif
return false
endfunction
function U87 takes unit TL7,integer U97,integer UD7,integer UE7,boolean UF7 returns boolean
local boolean J4=false
local integer O5=GetPlayerId(GetOwningPlayer(TL7))
if(UF7)then
set J4=(Bz>T34[O5])and IssueImmediateOrderById(TL7,U97)and IssueImmediateOrderById(TL7,UD7)and IssueImmediateOrderById(TL7,UE7)
else
set J4=IssueImmediateOrderById(TL7,U97)and IssueImmediateOrderById(TL7,UD7)and IssueImmediateOrderById(TL7,UE7)
endif
if(UF7 and J4)then
set J4=IssueImmediateOrderById(TL7,$D026C)
endif
return J4
endfunction
function UG7 takes unit TL7,integer U97,integer UD7,integer UE7,integer T27 returns boolean
if(T57(TL7,T27))then
return true
elseif GetUnitTypeId(TL7)==1160786520 and eY[416+GetPlayerId(GetOwningPlayer(TL7))]==T27 then
return true
else
return U87(TL7,U97,UD7,UE7,true)
endif
endfunction
function UH7 takes unit it returns unit
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer UP
local real UI7=99999.
local unit UJ7
local unit m5=null
local integer j
call GroupClear(H8)
set bj_wantDestroyGroup=false
call GroupAddGroup(ii,H8)
loop
set UJ7=FirstOfGroup(H8)
exitwhen(UJ7==null)
if((m5==null)or(KE7(it,UJ7)<UI7))then
set j=KG7(GetUnitUserData(UJ7))
if((j!=0 or(not PG4))and(j!=1 or(not PH4))and(j!=2 or(not PF4)))then
set m5=UJ7
set UI7=KE7(it,UJ7)
endif
endif
call GroupRemoveUnit(H8,UJ7)
endloop
set hr=m5
set m5=null
return hr
endfunction
function UK7 takes integer O5,integer UP,integer UM7,integer UN7 returns nothing
set h7[O5]=h7[UP]
set hj[O5]=UM7
set hj[256+O5]=UN7
set hj[512+UP]=O5
set hj[512+O5]=UP
endfunction
function UO7 takes unit it,integer UP returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(it))
if(UP==0)then
return
endif
set h8[O5]=h7[UP+1]
set h8[80+O5]=h7[UP]
set h9[O5]=h7[UP-1]
set h9[16+O5]=h7[hj[UP]]
set h8[16+O5]=h7[hj[256+UP]]
if(iU(it)and(h4[O5]==null)and(TZ7(Player(O5))))then
if(h4[O5]!=null and M87(h4[O5])and KE7(it,h4[O5])<$4B0)then
elseif(eY[O5]==1)then
if((G0[O5])or(G0[32+O5])or(G0[48+O5])or(not G0[$80+O5])or(G0[64+O5])or((ME7(it))and(not Id(O5)))or(GetUnitCurrentOrder(it)==$D0012))then
call jW(it,$D0012,h9[O5])
else
call jW(it,$D000F,h8[O5])
endif
elseif((eY[O5]==3)or(eY[O5]==4))then
if(GetUnitCurrentOrder(it)==$D0012)then
call jW(it,$D0012,h9[O5])
endif
endif
endif
if ME7(it)or h4[O5]!=null then
set hq[864+O5]=0
else
set hq[864+O5]=GetRandomReal(-LP4,LP4)
endif
endfunction
function UP7 takes unit it,unit MD7 returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer UP
local unit m5=UH7(MD7)
if(m5!=null)then
set UP=GetUnitUserData(m5)
if(IsUnitAlly(it,Z7[0]))then
call UO7(it,UP)
else
call UO7(it,hj[512+UP])
endif
endif
set m5=null
endfunction
function UQ7 takes unit it returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer UP
local unit m5=UH7(it)
if(m5!=null)then
set UP=GetUnitUserData(m5)
if(IsUnitAlly(it,Z7[0]))then
call UO7(it,UP)
else
call UO7(it,hj[512+UP])
endif
endif
set h4[96+O5]=null
set m5=null
endfunction
function M8 takes player j8 returns boolean
if(GetPlayerSlotState(j8)==PLAYER_SLOT_STATE_PLAYING or GetPlayerSlotState(j8)==PLAYER_SLOT_STATE_LEFT)then
if(GetPlayerController(j8)==MAP_CONTROL_USER or GetPlayerController(j8)==MAP_CONTROL_COMPUTER)then
return true
endif
endif
return false
endfunction
function p8 takes nothing returns nothing
if(TA7(GetEnumPlayer()))then
set bj_forceCountPlayers=bj_forceCountPlayers+1
endif
endfunction
function P8 takes force f returns integer
set bj_forceCountPlayers=0
call ForForce(f,function p8)
return bj_forceCountPlayers
endfunction
function hh takes nothing returns nothing
if GetPlayerSlotState(GetEnumPlayer())==PLAYER_SLOT_STATE_PLAYING then
if GetEnumPlayer()!=Player($D)and GetEnumPlayer()!=Player($E)then
set bj_forceCountPlayers=bj_forceCountPlayers+1
endif
endif
endfunction
function q8 takes force f returns integer
set bj_forceCountPlayers=0
call ForForce(f,function hh)
return bj_forceCountPlayers
endfunction
function hi takes integer hI,player j8 returns nothing
if H84 then
call SetPlayerTechMaxAllowed(j8,hI,0)
set J[GetUnitPointValueByType(hI)]=true
endif
endfunction
function UR7 takes integer hI returns nothing
call hi(hI,Z7[1])
call hi(hI,Z7[2])
call hi(hI,Z7[3])
call hi(hI,Z7[4])
call hi(hI,Z7[5])
call hi(hI,A7[1])
call hi(hI,A7[2])
call hi(hI,A7[3])
call hi(hI,A7[4])
call hi(hI,A7[5])
endfunction
function S8 takes integer hI returns nothing
if H84 then
call SetPlayerTechMaxAllowed(Z7[1],hI,0)
call SetPlayerTechMaxAllowed(Z7[2],hI,0)
call SetPlayerTechMaxAllowed(Z7[3],hI,0)
call SetPlayerTechMaxAllowed(Z7[4],hI,0)
call SetPlayerTechMaxAllowed(Z7[5],hI,0)
call SetPlayerTechMaxAllowed(A7[1],hI,0)
call SetPlayerTechMaxAllowed(A7[2],hI,0)
call SetPlayerTechMaxAllowed(A7[3],hI,0)
call SetPlayerTechMaxAllowed(A7[4],hI,0)
call SetPlayerTechMaxAllowed(A7[5],hI,0)
endif
endfunction
function US7 takes player j8 returns nothing
local integer T8=KL4
local integer U8=K14
if H84 then
loop
exitwhen T8>U8
call SetPlayerTechMaxAllowed(j8,K34[T8],0)
set T8=T8+1
endloop
set T8=K04
set U8=K54
loop
exitwhen T8>U8
call SetPlayerTechMaxAllowed(j8,K34[T8],0)
set T8=T8+1
endloop
endif
endfunction
function UT7 takes nothing returns nothing
call US7(Z7[1])
call US7(Z7[2])
call US7(Z7[3])
call US7(Z7[4])
call US7(Z7[5])
call US7(A7[1])
call US7(A7[2])
call US7(A7[3])
call US7(A7[4])
call US7(A7[5])
endfunction
function UU7 takes player p returns nothing
local integer i
if H84 then
set i=KL4
loop
exitwhen i>K54
if J[i]==false then
call SetPlayerTechMaxAllowed(p,K34[i],1)
endif
set i=i+1
endloop
if TV7(p)then
set i=KL4
loop
exitwhen i>K14
call SetPlayerTechMaxAllowed(p,K34[i],0)
set i=i+1
endloop
else
set i=K04
loop
exitwhen i>K54
call SetPlayerTechMaxAllowed(p,K34[i],0)
set i=i+1
endloop
endif
endif
endfunction
function UV7 takes player p returns nothing
local integer i
if H84 then
set i=KL4
loop
exitwhen i>K54
if J[i]==false then
call SetPlayerTechMaxAllowed(p,K34[i],1)
endif
set i=i+1
endloop
if TV7(p)then
set i=K04
loop
exitwhen i>K54
call SetPlayerTechMaxAllowed(p,K34[i],0)
set i=i+1
endloop
else
set i=KL4
loop
exitwhen i>K14
call SetPlayerTechMaxAllowed(p,K34[i],0)
set i=i+1
endloop
endif
endif
endfunction
function UW7 takes nothing returns nothing
local integer i
if H84 then
set i=K04
loop
exitwhen i>K54
call SetPlayerTechMaxAllowed(Z7[1],K34[i],0)
call SetPlayerTechMaxAllowed(Z7[2],K34[i],0)
call SetPlayerTechMaxAllowed(Z7[3],K34[i],0)
call SetPlayerTechMaxAllowed(Z7[4],K34[i],0)
call SetPlayerTechMaxAllowed(Z7[5],K34[i],0)
set i=i+1
endloop
set i=KL4
loop
exitwhen i>K14
call SetPlayerTechMaxAllowed(A7[1],K34[i],0)
call SetPlayerTechMaxAllowed(A7[2],K34[i],0)
call SetPlayerTechMaxAllowed(A7[3],K34[i],0)
call SetPlayerTechMaxAllowed(A7[4],K34[i],0)
call SetPlayerTechMaxAllowed(A7[5],K34[i],0)
set i=i+1
endloop
endif
endfunction
function UX7 takes nothing returns nothing
local integer T8
local integer U8
local integer UY7=0
set Ge=KL4
set T8=KL4
set U8=K14
loop
exitwhen T8>U8
set UY7=UY7+1
set je[UY7]=T8
set T8=T8+1
endloop
set T8=K04
set U8=K54
loop
exitwhen T8>U8
set UY7=UY7+1
set je[UY7]=T8
set T8=T8+1
endloop
set he=UY7
endfunction
function UZ7 takes nothing returns integer
return je[GetRandomInt(Ge,he)]
endfunction
function UA7 takes nothing returns integer
local integer UB7=GetRandomInt(Ge,he)
local integer hs=je[UB7]
set hs=je[UB7]
if(Ge==he)then
set je[UB7]=0
return hs
endif
if(UB7==he)then
set he=he-1
return hs
endif
set je[UB7]=je[he]
set he=he-1
return hs
endfunction
function UC7 takes unit I_7 returns boolean
return GetUnitAbilityLevel(I_7,1110454612)>0 or GetUnitAbilityLevel(I_7,1112437609)>0 or GetUnitAbilityLevel(I_7,1110454616)>0 or GetUnitAbilityLevel(I_7,1112433775)>0 or GetUnitAbilityLevel(I_7,1110454861)>0 or GetUnitAbilityLevel(I_7,1114137953)>0 or GetUnitAbilityLevel(I_7,1110456150)>0 or GetUnitAbilityLevel(I_7,1110458969)>0 or GetUnitAbilityLevel(I_7,1110456399)>0 or GetUnitAbilityLevel(I_7,1110456149)>0 or GetUnitAbilityLevel(I_7,1110459468)>0 or GetUnitAbilityLevel(I_7,1110456406)>0 or GetUnitAbilityLevel(I_7,1110455089)>0 or GetUnitAbilityLevel(I_7,'B0HP')>0 or GetUnitAbilityLevel(I_7,1110459988)>0 or GetUnitAbilityLevel(I_7,1110459975)>0
endfunction
function U37 takes string hT returns integer
if hT=="a"then
return $A
elseif hT=="b"then
return $B
elseif hT=="c"then
return $C
elseif hT=="d"then
return $D
elseif hT=="e"then
return $E
elseif hT=="f"then
return $F
else
return S2I(hT)
endif
endfunction
function U67 takes string hU returns integer
return U37(SubString(hU,0,1))*16+U37(SubString(hU,1,2))
endfunction
function UL7 takes integer hX returns boolean
local integer i=1
loop
exitwhen i>C8
if hX==B8[i]then
return false
endif
set i=i+1
endloop
return true
endfunction
function U17 takes unit U07 returns integer
local integer U57=GetUnitTypeId(U07)
if U57==1697656914 or U57==1966092365 then
return 1
elseif U57==1697657137 or U57==1966092356 then
return 2
elseif U57==1697656915 or U57==1966092366 then
return 3
elseif U57==1697657145 or U57==1966092372 then
return 4
endif
return 0
endfunction
function U27 takes player hV,integer hY returns nothing
local texttag t
if hY>0 then
set VH4[GetPlayerId(hV)]=VH4[GetPlayerId(hV)]+hY
set EV0[GetPlayerId(hV)]=EV0[GetPlayerId(hV)]+hY
set t=CreateTextTag()
call SetPlayerState(hV,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(hV,PLAYER_STATE_RESOURCE_GOLD)+hY)
call SetTextTagText(t,"+"+I2S(hY),.025)
call SetTextTagPosUnit(t,M7[GetPlayerId(hV)],0)
call SetTextTagColor(t,$FF,$DC,0,$FF)
call SetTextTagVelocity(t,0,.03)
if GetLocalPlayer()==hV then
call SetTextTagVisibility(t,true)
else
call SetTextTagVisibility(t,false)
endif
call SetTextTagFadepoint(t,2)
call SetTextTagLifespan(t,3)
call SetTextTagPermanent(t,false)
endif
endfunction
function lW takes player hV,integer U_7 returns nothing
local integer x=1
if IsPlayerAlly(hV,Z7[0])then
loop
exitwhen x>5
if Z7[x]!=hV then
call U27(Z7[x],U_7)
endif
set x=x+1
endloop
endif
set x=1
if IsPlayerAlly(hV,A7[0])then
loop
exitwhen x>5
if A7[x]!=hV then
call U27(A7[x],U_7)
endif
set x=x+1
endloop
endif
endfunction
function V47 takes unit hn,integer V77 returns nothing
local integer U_7
local player p=GetOwningPlayer(hn)
local integer V87=0
local integer V97
set U_7=80+20*V77
if TV7(GetOwningPlayer(hn))then
set V97=P8(X7)
else
set V97=P8(Y7)
endif
if p==Z7[0]or p==A7[0]then
set V87=R2I(((200+25*V77)+GetRandomInt(2,20))*.7)
endif
if IsUnitAlly(GetDyingUnit(),p)then
if IsUnitAlly(hn,Z7[0])then
set p=A7[0]
else
set p=Z7[0]
endif
set U_7=U_7/2+V87*0/V97
else
set U_7=U_7+V87*0/V97
endif
if GetOwningPlayer(GetDyingUnit())==Z7[0]then
call U27(A7[1],U_7)
call U27(A7[2],U_7)
call U27(A7[3],U_7)
call U27(A7[4],U_7)
call U27(A7[5],U_7)
else
call U27(Z7[1],U_7)
call U27(Z7[2],U_7)
call U27(Z7[3],U_7)
call U27(Z7[4],U_7)
call U27(Z7[5],U_7)
endif
endfunction
function R6I takes unit hn,integer V77 returns nothing
local integer U_7
local player p=GetOwningPlayer(hn)
local integer V87=0
local integer NumOfPlayers
if V77==1 then
set U_7=100
elseif V77==2 then
set U_7=175
endif
if GetOwningPlayer(GetDyingUnit())==Z7[0]then
call U27(A7[1],U_7)
call U27(A7[2],U_7)
call U27(A7[3],U_7)
call U27(A7[4],U_7)
call U27(A7[5],U_7)
else
call U27(Z7[1],U_7)
call U27(Z7[2],U_7)
call U27(Z7[3],U_7)
call U27(Z7[4],U_7)
call U27(Z7[5],U_7)
endif
endfunction
function VD7 takes integer z8 returns boolean
local integer i=1
loop
exitwhen i>M94
if M84[i]==z8 then
return true
endif
set i=i+1
endloop
return false
endfunction
function VE7 takes integer z8 returns boolean
local integer i=1
loop
exitwhen i>K_4
if K24[i]==z8 then
return true
endif
set i=i+1
endloop
return false
endfunction
function VF7 takes integer z8 returns boolean
local integer i=1
loop
exitwhen i>M74
if M44[i]==z8 then
return true
endif
set i=i+1
endloop
return false
endfunction
function VG7 takes player j8 returns nothing
local integer VH7
local integer VI7
local location VJ7
local integer UB7
local boolean GotHero=false
set W4[GetPlayerId(j8)]=true
if TV7(j8) then
set VH7=KL4
set VI7=K14
set VJ7=GetRectCenter(ED)
else
set VH7=K04
set VI7=K54
set VJ7=GetRectCenter(L9)
endif
if P4 then
if(GetRandomInt(1,2)==1)then
set VH7=KL4
set VI7=K14
else
set VH7=K04
set VI7=K54
endif
endif
loop
set UB7=GetRandomInt(VH7,VI7)
exitwhen J[UB7]==false and VD7(K34[UB7])and K34[UB7]!=1211117643
endloop
if X8==false then
call S8(K34[UB7])
set J[UB7]=true
endif
call CreateUnitAtLoc(j8,K34[UB7],VJ7,0)
call RemoveLocation(VJ7)
set VJ7=null
endfunction
function VK7 takes player j8 returns nothing
local integer VH7
local integer VI7
local location VJ7
local integer UB7
local boolean GotHero=false
set W4[GetPlayerId(j8)]=true
if TV7(j8) then
set VH7=KL4
set VI7=K14
set VJ7=GetRectCenter(ED)
else
set VH7=K04
set VI7=K54
set VJ7=GetRectCenter(L9)
endif
if P4 then
if(GetRandomInt(1,2)==1)then
set VH7=KL4
set VI7=K14
else
set VH7=K04
set VI7=K54
endif
endif
loop
set UB7=GetRandomInt(VH7,VI7)
exitwhen J[UB7]==false and VF7(K34[UB7])
endloop
if X8==false then
call S8(K34[UB7])
set J[UB7]=true
endif
call CreateUnitAtLoc(j8,K34[UB7],VJ7,0)
call RemoveLocation(VJ7)
set VJ7=null
endfunction
function VM7 takes player j8 returns nothing
local integer VH7
local integer VI7
local location VJ7
local integer UB7
local boolean GotHero=false
set W4[GetPlayerId(j8)]=true
if TV7(j8) then
set VH7=KL4
set VI7=K14
set VJ7=GetRectCenter(ED)
else
set VH7=K04
set VI7=K54
set VJ7=GetRectCenter(L9)
endif
if P4 then
if(GetRandomInt(1,2)==1)then
set VH7=KL4
set VI7=K14
else
set VH7=K04
set VI7=K54
endif
endif
loop
set UB7=GetRandomInt(VH7,VI7)
exitwhen J[UB7]==false and VE7(K34[UB7])
endloop
if X8==false then
call S8(K34[UB7])
set J[UB7]=true
endif
call CreateUnitAtLoc(j8,K34[UB7],VJ7,0)
call RemoveLocation(VJ7)
set VJ7=null
endfunction
function VN7 takes player j8 returns nothing
local integer VH7
local integer VI7
local location VJ7
local integer UB7
local boolean GotHero=false
set W4[GetPlayerId(j8)]=true
if TV7(j8) then
set VH7=KL4
set VI7=K14
set VJ7=GetRectCenter(ED)
else
set VH7=K04
set VI7=K54
set VJ7=GetRectCenter(L9)
endif
if P4 then
if(GetRandomInt(1,2)==1)then
set VH7=KL4
set VI7=K14
else
set VH7=K04
set VI7=K54
endif
endif
loop
set UB7=GetRandomInt(VH7,VI7)
exitwhen J[UB7]==false
endloop
if X8==false then
call S8(K34[UB7])
set J[UB7]=true
endif
call CreateUnitAtLoc(j8,K34[UB7],VJ7,0)
call RemoveLocation(VJ7)
set VJ7=null
endfunction
function ly takes boolean h5,boolean h6 returns integer
local integer h1
local integer h2
if h5 and h6 then
if(GetRandomInt(1,2)==1)then
set h1=KL4
set h2=K14
else
set h1=K04
set h2=K54
endif
elseif h5 then
set h1=KL4
set h2=K14
else
set h1=K04
set h2=K54
endif
return GetRandomInt(h1,h2)
endfunction
function VO7 takes destructable d returns boolean
return GetDestructableTypeId(d)==1314157667 or GetDestructableTypeId(d)==1314157687 or GetDestructableTypeId(d)==1129608306 or GetDestructableTypeId(d)==1096053874 or GetDestructableTypeId(d)==1110454322 or GetDestructableTypeId(d)==1110454323 or GetDestructableTypeId(d)==1110454325
endfunction
function VP7 takes unit u returns boolean
return GetUnitAbilityLevel(u,1113815395)>0 or GetUnitAbilityLevel(u,1113815346)>0
endfunction
function VQ7 takes integer id returns boolean
return id==1966092596 or id==1966092597 or id==1966092598 or id==1966092612 or id==1966092613 or id==1966092614
endfunction
function VR7 takes unit u returns boolean
return GetUnitAbilityLevel(u,1112500344)>0 or GetUnitAbilityLevel(u,1110454344)>0
endfunction
function VS7 takes integer U57 returns boolean
return(U57==1852862003 or U57==1852862006 or U57==1848652080 or U57==1848657754)or(U57==1852862002 or U57==1852862006 or U57==1848652082 or U57==1848657969)or(U57==1852862001 or U57==1852862004 or U57==1848652081 or U57==1848657968)
endfunction
function VT7 takes player p returns string
return KZ4[GetPlayerId(p)]
endfunction
function VU7 takes integer i returns string
return GetObjectName(i)
endfunction
function Vt7 takes nothing returns nothing
call DisplayTimedTextToPlayer(GetEnumPlayer(),0,0,vI,ZRr)
endfunction
function VV7 takes force ir,real Hk,string iR returns nothing
set ZRr=iR
set vI=Hk
call ForForce(ir,function Vt7)
endfunction
function vlv takes nothing returns group
return CreateGroup()
endfunction
function l7 takes integer i returns nothing
if i!=Dy then
set Dx[i]=Dx[Dy]
set DX[i]=DX[Dy]
endif
set Dx[Dy]=null
set DX[Dy]=0
set Dy=Dy-1
endfunction
function l8 takes nothing returns boolean
local real VW7=KQ7()
local integer i
set i=1
loop
exitwhen i>Dy
if DX[i]<VW7 then
if Dx[i]==null or IsTriggerEnabled(Dx[i])then
call l5()
else
call DestroyTrigger(Dx[i])
endif
call l7(i)
else
set i=i+1
endif
endloop
return false
endfunction
function VX7 takes trigger t returns nothing
call NM7(GetHandleId(t))
call DisableTrigger(t)
call DestroyTrigger(t)
endfunction
function FilterTreeSentinels takes nothing returns boolean
return((GetUnitTypeId(GetFilterUnit())==1747993172)or(GetUnitTypeId(GetFilterUnit())==1747993173))
endfunction
function VY7 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer VZ7=GetHandleId(t)
local unit VA7=O77(VZ7,"TreantUnit")
local unit VB7=O77(VZ7,"SentinelUnit")
local unit I77=null
local unit u=null
local group g=CreateGroup()
local integer O5=GetPlayerId(GetOwningPlayer(VA7))
if((GetTriggerEventId()==EVENT_UNIT_DEATH)and((GetUnitTypeId(VB7)==1747993172)or(GetUnitTypeId(VB7)==1747993173)))then
call FlushChildHashtable(L7,VZ7)
call OZ7(t)
call DestroyTrigger(t)
elseif((GetUnitTypeId(VB7)==1747993172)and(Bz>T34[64+O5]))then
call GroupClear(g)
call GroupEnumUnitsInRangeOfLoc(g,GetUnitLoc(VB7),500,Condition(function Q57))
if(not J37(g))then
loop
set u=FirstOfGroup(g)
call GroupRemoveUnit(g,u)
exitwhen IsUnitEnemy(u,GetOwningPlayer(VA7))
endloop
set I77=u
endif
if((GetUnitState(VA7,UNIT_STATE_LIFE)>5.)and(I77!=null)and(TZ7(GetOwningPlayer(VA7)))and(GetUnitTypeId(VB7)==1747993172)and(UC7(VA7)==false))then
call IssuePointOrderById(VA7,$D00D9,GetUnitX(VB7),GetUnitY(VB7))
set T34[64+O5]=Bz+10.
endif
endif
call DestroyGroup(g)
set t=null
set VA7=null
set VB7=null
set I77=null
set u=null
set g=null
return false
endfunction
function VC7 takes unit V37,unit V67 returns nothing
local unit VB7=V67
local unit VA7=V37
local trigger t=null
local integer VL7=0
local boolexpr b=Condition(function Q57)
if(TZ7(GetOwningPlayer(VA7)))then
set t=CreateTrigger()
set VL7=GetHandleId(t)
call NT7(VL7,"TreantUnit",VA7)
call NT7(VL7,"SentinelUnit",VB7)
if(GetUnitTypeId(VB7)==1747993172)then
call TriggerRegisterUnitInRange(t,VB7,500,b)
endif
call TriggerRegisterUnitEvent(t,VB7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function VY7))
endif
call DestroyBoolExpr(b)
set VB7=null
set VA7=null
set t=null
endfunction
function V17 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V07=GetHandleId(t)
local fogmodifier V57=(LoadFogModifierHandle(L7,(V07),(42)))
call FogModifierStop(V57)
call DestroyFogModifier(V57)
call FlushChildHashtable(L7,(V07))
call OZ7(t)
set t=null
return false
endfunction
function W47 takes integer id returns boolean
return id==YA or id==QA or id==NA or id==WA or id==JA or id==HJ0 or id==HJ1
endfunction
function W77 takes unit u returns string
if u==null then
return(GetObjectName((1848654164)))
endif
if GetUnitPointValue(u)==500 then
return"无形"
elseif GetUnitPointValue(u)==600 then
return"堡垒"
endif
return(GetObjectName((K64[GetUnitPointValue(u)])))
endfunction
function W87 takes unit I_7 returns string
local integer i=GetUnitPointValue(I_7)
if H34 then
set i=GetPlayerId(GetOwningPlayer(I_7))
if Player(i)==Z7[1]then
return"Blue"
elseif Player(i)==Z7[2]then
return"Teal"
elseif Player(i)==Z7[3]then
return"Purple"
elseif Player(i)==Z7[4]then
return"Yellow"
elseif Player(i)==Z7[5]then
return"Orange"
elseif Player(i)==A7[1]then
return"Pink"
elseif Player(i)==A7[2]then
return"Gray"
elseif Player(i)==A7[3]then
return"Light"
elseif Player(i)==A7[4]then
return"Dark"
elseif Player(i)==A7[5]then
return"Brown"
endif
return"Unknown"
endif
if(i==1)then
return"复仇之魂"
elseif(i==$F)then
return"牛头人酋长"
elseif(i==18)then
return"食人魔魔法师"
elseif(i==21)then
return"幻影长矛手"
elseif(i==29)then
return"精灵守卫"
elseif(i==33)then
return"龙骑士"
elseif(i==65)then
return"地穴刺客"
elseif(i==86)then
return"巫医"
elseif(i==91)then
return"深渊领主"
elseif(i==93)then
return"黑暗贤者"
elseif(i==97)then
return"极寒幽魂"
elseif(i==101)then
return"暗影恶魔"
endif
return W77(I_7)
endfunction
function W97 takes integer i returns string
if i==0 then
return(GetObjectName((1848654164)))
endif
return(GetObjectName((K64[i])))
endfunction
function WD7 takes unit S4 returns integer
local integer z8
local integer i=0
if S4==null then
return-2
endif
set z8=GetUnitTypeId(S4)
loop
exitwhen i>EV
if AU[i]==z8 then
return i
endif
set i=i+1
endloop
return-1
endfunction
function WE7 takes unit u returns string
if u==null then
return"UI\\Widgets\\Console\\Undead\\undead-inventory-slotfiller.blp"
endif
return MH4[GetUnitPointValue(u)]
endfunction
function WF7 takes unit u returns boolean
return GetUnitAbilityLevel(u,1093686070)>0 or GetUnitAbilityLevel(u,1093744441)>0 or GetUnitAbilityLevel(u,1094937961)>0 or GetUnitAbilityLevel(u,1093686101)>0 or GetUnitAbilityLevel(u,1110454580)>0 or GetUnitAbilityLevel(u,1093683251)>0 or OT7(u,"BladeFury|Active")
endfunction
function WG7 takes player p returns boolean
return V8 and(KX4==p or KY4==p)
endfunction
function WH7 takes unit WI7 returns integer
local integer x
local integer id=GetUnitTypeId(WI7)
set x=1
loop
exitwhen x>K_4
if id==K24[x]then
return 2
endif
set x=x+1
endloop
set x=1
loop
exitwhen x>M74
if id==M44[x]then
return 3
endif
set x=x+1
endloop
set x=1
loop
exitwhen x>M94
if id==M84[x]then
return 1
endif
set x=x+1
endloop
if id==1164277357 or id==1160786518 or id==1160786519 or id==1160786517 or id==1311781442 or id==1311911984 or id==1311911985 or id==1311781175 or id==1211119684 or id==1211119683 or id==1211119668 or id==1211119682 or id==1311781171 or id==1311781172 or id==1311781173 or id==1160786511 or id==1311788365 then
return 2
endif
if id==1311781192 or id==1311781204 or id==1311781194 or id==1211117637 or id==1211117639 or id==1211117638 or id==1211119433 or id==1160786229 or id==1211122513 or id==1211122995 or id==1211122996 or id==1211122997 or id==1429221720 then
return 3
endif
if id==1211119192 or id==1211119193 or id==1211119191 or id==1211122243 or id==1328558391 or id==1311788354 or id==1311788355 or id==1311788367 or id==1311788353 then
return 1
endif
return 0
endfunction
function WJ7 takes unit WI7 returns integer
local integer Hm=WH7(WI7)
if Hm==1 then
return GetHeroInt(WI7,true)
endif
if Hm==2 then
return GetHeroAgi(WI7,true)
endif
if Hm==3 then
return GetHeroStr(WI7,true)
endif
return 0
endfunction
function WK7 takes unit u returns boolean
return GetUnitState(u,UNIT_STATE_LIFE)<1 or IG4[GetPlayerId(GetOwningPlayer(u))]
endfunction
function WM7 takes integer z8,integer r,integer g,integer b returns nothing
set CL=CL+1
set NL[CL]=r
set bL[CL]=g
set BL[CL]=b
set cL[CL]=z8
endfunction
function WN7 takes nothing returns nothing
call PauseUnit(GetEnumUnit(),true)
endfunction
function emv takes nothing returns nothing
call DisplayTimedTextToPlayer(GetEnumPlayer(),0,E9,DB,dB)
endfunction
function WO7 takes nothing returns nothing
if eb[GetPlayerId(GetEnumPlayer())]then
call DisplayTimedTextToPlayer(GetEnumPlayer(),0,E9,mb,Lb)
endif
endfunction
function WP7 takes force ir,real Hk,string iR returns nothing
set Lb=iR
set mb=Hk
call ForForce(ir,function WO7)
endfunction
function WQ7 takes unit u returns boolean
return GetUnitAbilityLevel(u,1110458953)>0 or GetUnitAbilityLevel(u,1112437619)>0 or GetUnitAbilityLevel(u,1110459734)>0
endfunction
function WR7 takes group g returns nothing
local integer i=GetHandleId(g)-TO4
if i<0 or i>240 then
set TQ4=true
call DestroyGroup(g)
else
call GroupClear(g)
set TM4[i]=false
set TP4=i
endif
endfunction
function WS7 takes nothing returns group
local integer i=TP4
loop
exitwhen i==TP4-1
if TM4[i]==false then
set TP4=i+1
if TP4==240 then
set TP4=0
endif
set TM4[i]=true
return TN4[i]
endif
set i=i+1
if i==240 then
set i=0
endif
endloop
call WP7(L8,5.,"|c00ff0303CRITICAL ERROR: FOUND NO AVAILABLE GROUPS|r")
call WP7(L8,5.,"|c00ff0303Send this replay to IceFrog@gmail.com|r")
return CreateGroup()
endfunction
function WT7 takes real WU7,real dx,real dy,real Vx,real Vy returns real
local real a
local real b
local real d
set a=WU7*WU7-Vx*Vx-Vy*Vy
set b=Vx*dx+Vy*dy
if a==0 then
if b>0 then
return .0
endif
return(dx*dx+dy*dy)/2/b
endif
set d=b*b+a*(dx*dx+dy*dy)
if d<0 then
return .0
endif
set d=SquareRoot(d)
if b<d then
return(b+d)/a
endif
return(b-d)/a
endfunction
function WV7 takes real x,real y returns boolean
return( not(x<GetRectMinX(bj_mapInitialPlayableArea)+75))and( not(x>GetRectMaxX(bj_mapInitialPlayableArea)-75))and( not(y<GetRectMinY(bj_mapInitialPlayableArea)+75))and( not(y>GetRectMaxY(bj_mapInitialPlayableArea)-75))
endfunction
function WW7 takes unit WX7,unit IH7,real X,real Y,real r,boolexpr HV7 returns boolean
local group g=WS7()
local real Hx=GetUnitX(WX7)
local real Hy=GetUnitY(WX7)
local player p=GetOwningPlayer(WX7)
local real dx=(X-Hx)*.5
local real dy=(Y-Hy)*.5
local real R=SquareRoot(dx*dx+dy*dy)
local unit u
local real d
local real WY7=99999.
local real WZ7=.0
local real KD7
call GroupEnumUnitsInRange(g,Hx+dx,Hy+dy,R,HV7)
set bj_lastReplacedUnit=null
set bj_lastLoadedUnit=null
set bj_forLoopAIndex=0
loop
set u=FirstOfGroup(g)
exitwhen u==null
call GroupRemoveUnit(g,u)
set d=((GetUnitX(u)-Hx)*dy-(GetUnitY(u)-Hy)*dx)/R
if u!=WX7 and u!=IH7 and IsUnitVisible(u,p)and d*d<=r*r then
set KD7=KE7(WX7,u)
if KD7<WY7 then
set WY7=KD7
set bj_lastReplacedUnit=u
endif
if KD7>WZ7 then
set WZ7=KD7
set bj_lastLoadedUnit=u
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endif
endloop
call WR7(g)
set g=null
return bj_forLoopAIndex==0
endfunction
function WA7 takes unit WX7,unit IH7,real WU7,real WB7,real R57 returns location
local real dt=TimerGetElapsed(W)
local real X
local real Y
local real dx=GetUnitX(IH7)
local real dy=GetUnitY(IH7)
call J_7(.1)
set dt=TimerGetElapsed(W)-dt
set X=GetUnitX(IH7)
set Y=GetUnitY(IH7)
if X==dx and Y==dy then
call MoveLocation(DH7,X,Y)
return DH7
endif
set dx=(X-dx)/dt
set dy=(Y-dy)/dt
set dt=WT7(WU7,X+dx*WB7-GetUnitX(WX7),Y+dy*WB7-GetUnitY(WX7),dx,dy)
if dt==0 then
return null
endif
call MoveLocation(DH7,X+dx*(dt+WB7),Y+dy*(dt+WB7))
if WV7(GetLocationX(DH7),GetLocationY(DH7))then
return DH7
endif
return null
endfunction
function WC7 takes unit I_7,unit MD7,real W37,real R57 returns location
local real P27=GetUnitX(MD7)
local real P_7=GetUnitY(MD7)
local real W67=TimerGetElapsed(W)
local real WL7=0
local real W17=0
call J_7(.1)
set W67=1./(TimerGetElapsed(W)-W67)
set WL7=(GetUnitX(MD7)-P27)*W67
set W17=(GetUnitY(MD7)-P_7)*W67
if not(WL7==0 and W17==0)then
set P27=P27+WL7*W37
set P_7=P_7+W17*W37
endif
if KF7(GetUnitX(I_7),GetUnitY(I_7),P27,P_7)<=R57 then
call MoveLocation(DH7,P27,P_7)
if WV7(GetLocationX(DH7),GetLocationY(DH7))then
return DH7
endif
endif
return null
endfunction
function W07 takes location O07,real W57,real W27 returns location
local real x=GetLocationX(O07)+W57*Cos(W27*bj_DEGTORAD)
local real y=GetLocationY(O07)+W57*Sin(W27*bj_DEGTORAD)
call MoveLocation(HA,x,y)
return HA
endfunction
function W_7 takes nothing returns boolean
return((GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(bj_lastLoadedUnit))and(GetUnitTypeId(GetFilterUnit())==1212363833)and(GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>.405))
endfunction
function X47 takes unit it,unit m5 returns boolean
set bj_lastLoadedUnit=it
set bj_lastLoadedUnit=MN7(350,M07(m5),Condition(function W_7))
return(bj_lastLoadedUnit!=null)
endfunction
function X77 takes nothing returns boolean
local integer X87=0
local integer i=0
loop
exitwhen i==241
if TM4[i] then
set X87=X87+1
endif
set i=i+1
endloop
if X87>230 or TQ4 then
call WP7(L8,5.,"|c00ff0303Please send me this replay ("+I2S(X87)+")")
endif
return false
endfunction
function X97 takes nothing returns nothing
local integer i=0
set TP4=0
set TN4[i]=CreateGroup()
set TM4[i]=false
set i=i+1
set TO4=GetHandleId(TN4[0])
loop
exitwhen i==241
set TN4[i]=CreateGroup()
set TM4[i]=false
set i=i+1
endloop
endfunction
function XD7 takes nothing returns boolean
local group g=WS7()
call GroupEnumUnitsInRange(g,0,0,$3E80,Condition(function TO7))
call ForGroup(g,function WN7)
call WR7(g)
set g=null
return false
endfunction
function XE7 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1.,true)
call TriggerAddCondition(t,Condition(function XD7))
call TriggerEvaluate(t)
set t=null
endfunction
function R2K takes unit u returns boolean
return(GetUnitTypeId(u)=='o00L')or(GetUnitTypeId(u)=='o00M')or(GetUnitTypeId(u)=='o00N')or(GetUnitTypeId(u)=='o00O')
endfunction
function pWA takes unit u returns boolean
local integer id=GetUnitTypeId(u)
return id=='o00V' or id=='o00T' or id=='o00W' or id=='o00U' or id=='o01C' or id=='o01D' or id=='o01E' or id=='osp4' or id=='o008' or id=='o009' or id=='o000' or id=='o001' or id=='o00A' or id=='o00X' or id=='n00Q' or id=='n00O' or id=='n00P' or id=='n00N' or id=='n01L' or id=='o018' or id=='o002' or id=='o00B' or id=='o01B' or id=='o00M' or id=='o00N' or id=='o00O' or id=='o00L'
endfunction
function hZZ takes integer XYF returns boolean
return XYF=='H00M' or XYF=='H07G' or XYF=='H00Y' or XYF=='H0B8' or XYF=='H0DL'
endfunction
function XF7 takes unit WX7,integer XG7 returns nothing
call UnitAddAbility(WX7,XG7)
call UnitMakeAbilityPermanent(WX7,true,XG7)
endfunction
function F71 takes unit WI7,integer U9I returns boolean
local item AW8
local boolean F81=false
local boolean F91=true
set AW8=CreateItem(U9I,GetUnitX(WI7),GetUnitY(WI7))
if GetUnitAbilityLevel(WI7,1095331446)==0 then
set F81=true
call XF7(WI7,1095331446)
endif
if UnitAddItem(WI7,AW8)==false then
call RemoveItem(AW8)
set F91=false
elseif GetWidgetLife(AW8)>0 then
call RemoveItem(AW8)
set F91=false
endif
if F81 then
call UnitRemoveAbility(WI7,1095331446)
endif
set AW8=null
return F91
endfunction
function R1T takes unit u,integer id,integer V77 returns nothing
if GetUnitAbilityLevel(u,id)==0 then
call XF7(u,id)
endif
call SetUnitAbilityLevel(u,id,V77)
endfunction
function lWA takes unit u,player p returns boolean
return IsUnitVisible(u,p)and(GetUnitAbilityLevel(u,'A1HX')==0 or IsUnitAlly(u,p)or WG7(p))
endfunction
function LWA takes unit it returns boolean
return GetUnitAbilityLevel(it,'Bcyc')>0 or GetUnitAbilityLevel(it,'Bcy2')>0
endfunction
function KZA takes unit u returns boolean
return(GetUnitAbilityLevel(u,('B02F'))>0)or(GetUnitAbilityLevel(u,('BUsp'))>0)or(GetUnitAbilityLevel(u,('BUst'))>0)
endfunction
function lZA takes unit u returns boolean
return GetUnitAbilityLevel(u,'B02J')>0 or GetUnitAbilityLevel(u,'Avul')==1 or KZA(u)or LWA(u)
endfunction
function fWA takes unit it returns boolean
return IsUnitType(it,UNIT_TYPE_MAGIC_IMMUNE)
endfunction
function UC1 takes player hd returns boolean
if hd==B7 then
return true
endif
return false
endfunction
function XH7 takes unit u returns boolean
return GetUnitTypeId(u)<1 or IsUnitType(u,UNIT_TYPE_DEAD) or GetWidgetLife(u)<.405
endfunction
function BM1 takes unit u returns boolean
return((LoadInteger(L7,(GetHandleId((u))),((4420))))==1)or((LoadInteger(L7,(GetHandleId((u))),((4421))))==1)
endfunction
function XI7 takes unit XJ7,unit XK7 returns nothing
if KE7(XJ7,XK7)>$514 or(XH7(XJ7)and GetUnitTypeId(XJ7)==1211117643)then
call AddHeroXP(XJ7,KN7(XK7),true)
endif
endfunction
function yS takes integer id returns nothing
call SetPlayerAbilityAvailable(Player(1),id,false)
call SetPlayerAbilityAvailable(Player(2),id,false)
call SetPlayerAbilityAvailable(Player(3),id,false)
call SetPlayerAbilityAvailable(Player(4),id,false)
call SetPlayerAbilityAvailable(Player(5),id,false)
call SetPlayerAbilityAvailable(Player(7),id,false)
call SetPlayerAbilityAvailable(Player(8),id,false)
call SetPlayerAbilityAvailable(Player(9),id,false)
call SetPlayerAbilityAvailable(Player($A),id,false)
call SetPlayerAbilityAvailable(Player($B),id,false)
endfunction
function XM7 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
call NM7(GetHandleId(O77(OB7,"Unit")))
call ShowUnit(O77(OB7,"Unit"),false)
call RemoveUnit(O77(OB7,"Unit"))
call NM7(OB7)
call OZ7(t)
set t=null
return false
endfunction
function XN7 takes unit u,real d returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,d,false)
call TriggerAddCondition(t,Condition(function XM7))
call NT7(OB7,"Unit",u)
set t=null
endfunction
function XO7 takes integer XP7 returns nothing
local unit u=CreateUnit(Player($F),XP7,0,0,0)
call RemoveUnit(u)
set u=null
endfunction
function XQ7 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit u=O77(OB7,"u")
local real XR7=ON7(OB7,"duration")
local integer XS7=OM7(OB7,"fade")
if GetTriggerEvalCount(t)/ $A>R2I(XR7)then
call SetUnitVertexColor(u,$FF,$FF,$FF,$FF)
call NM7(OB7)
call OZ7(t)
elseif XH7(u)==false then
call SetUnitVertexColor(u,$FF,100,$FF,XS7)
endif
set t=null
set u=null
return false
endfunction
function XT7 takes unit u,real XR7,integer XS7 returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function XQ7))
call NT7(OB7,"u",u)
call NQ7(OB7,"duration",XR7)
call NP7(OB7,"fade",XS7)
set t=null
endfunction
function XU7 takes integer z8,real XV7,integer XW7 returns nothing
set Ml=Ml+1
set Jl[Ml]=XV7
set ll[Ml]=z8
set Ll[Ml]=XW7
endfunction
function XX7 takes unit u returns real
local integer z8=GetUnitTypeId(u)
local integer i=1
loop
exitwhen i>Ml
if ll[i]==z8 then
return Jl[i]
endif
set i=i+1
endloop
return 1.
endfunction
function XY7 takes integer z8,string XZ7 returns nothing
set Ql=Ql+1
set Pl[Ql]=XZ7
set ql[Ql]=z8
endfunction
function XA7 takes unit u returns string
local integer z8=GetUnitTypeId(u)
local integer i=1
loop
exitwhen i>Ql
if ql[i]==z8 then
return Pl[i]
endif
set i=i+1
endloop
return"stand"
endfunction
function XB7 takes unit u returns nothing
if GetUnitTypeId(u)==1311781193 then
call SetUnitAnimationByIndex(u,6)
else
call SetUnitAnimation(u,XA7(u))
endif
endfunction
function XC7 takes player hV,string Ht returns nothing
local sound HT=CreateSound(Ht,false,false,false,$A,$A,"DefaultEAXON")
if(GetLocalPlayer()==hV)then
call StartSound(HT)
endif
call KillSoundWhenDone(HT)
endfunction
function X37 takes player HU,string Hv returns nothing
local sound HV=CreateSoundFromLabel("InterfaceError",false,false,false,$A,$A)
if(GetLocalPlayer()==HU)then
if(Hv!="")and(Hv!=null)then
call ClearTextMessages()
call DisplayTimedTextToPlayer(HU,.5,-1.,2.,"|cffffcc00"+Hv+"|r")
endif
call StartSound(HV)
endif
call KillSoundWhenDone(HV)
endfunction
function X67 takes nothing returns boolean
if(GetTimeOfDay()>6. and GetTimeOfDay()<18.)then
return true
else
return false
endif
endfunction
function XL7 takes string H4,boolean H5 returns nothing
if H5 then
call ExecuteFunc(H4)
endif
endfunction
function X17 takes real x returns real
local real H7=GetRectMinX(bj_mapInitialPlayableArea)+50
if(x<H7)then
return H7
endif
set H7=GetRectMaxX(bj_mapInitialPlayableArea)-50
if(x>H7)then
return H7
endif
return x
endfunction
function X07 takes real y returns real
local real H7=GetRectMinY(bj_mapInitialPlayableArea)+50
if(y<H7)then
return H7
endif
set H7=GetRectMaxY(bj_mapInitialPlayableArea)-50
if(y>H7)then
return H7
endif
return y
endfunction
function X57 takes real x returns real
local real RR7=GetRectMinX(bj_mapInitialPlayableArea)+75
if(x<RR7)then
return RR7
endif
set RR7=GetRectMaxX(bj_mapInitialPlayableArea)-75
if(x>RR7)then
return RR7
endif
return x
endfunction
function X27 takes real y returns real
local real RR7=GetRectMinY(bj_mapInitialPlayableArea)+75
if(y<RR7)then
return RR7
endif
set RR7=GetRectMaxY(bj_mapInitialPlayableArea)-75
if(y>RR7)then
return RR7
endif
return y
endfunction
function X_7 takes integer Y47 returns nothing
local unit u=CreateUnit(Player($F),1211117657,0,0,270)
call UnitAddAbility(u,Y47)
call UnitRemoveAbility(u,Y47)
call RemoveUnit(u)
set u=null
endfunction
function Y77 takes unit u,integer Y47 returns nothing
call UnitAddAbility(u,Y47)
call UnitRemoveAbility(u,Y47)
endfunction
function Y87 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer ia=OM7(OB7,"abilcode")
call X_7(ia)
call NM7(OB7)
call OZ7(t)
set t=null
return false
endfunction
function Y97 takes integer ia,real YD7 returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call NP7(OB7,"abilcode",ia)
call TriggerRegisterTimerEvent(t,YD7,false)
call TriggerAddCondition(t,Condition(function Y87))
set t=null
endfunction
function Tree_Killer takes nothing returns nothing
call KillDestructable(GetEnumDestructable())
endfunction
function YE7 takes unit WI7 returns nothing
call NS7(GetHandleId(WI7),"DamageRegisterAlready",false)
call NM7(GetHandleId(WI7))
call RemoveUnit(WI7)
endfunction
function YF7 takes unit hn,integer iB,integer ic returns nothing
if GetUnitAbilityLevel(hn,iB)==0 then
call UnitAddAbility(hn,iB)
endif
call SetUnitAbilityLevel(hn,iB,ic)
endfunction
function YG7 takes integer a,integer b returns integer
if(a<b)then
return a
else
return b
endif
endfunction
function YH7 takes integer a,integer b returns integer
if(a<b)then
return b
else
return a
endif
endfunction
function YI7 takes integer ih,integer a,integer b returns integer
return YH7(YG7(ih,b),a)
endfunction
function YJ7 takes real a,real b returns real
if(a<b)then
return a
else
return b
endif
endfunction
function YK7 takes real a,real b returns real
if(a<b)then
return b
else
return a
endif
endfunction
function iI takes nothing returns nothing
local integer OB7=GetHandleId(GetExpiredTimer())
local unit hn=O77(OB7,"Unit")
call SetUnitState(hn,UNIT_STATE_LIFE,GetUnitState(hn,UNIT_STATE_LIFE)+ON7(OB7,"Damage"))
set hn=null
endfunction
function m6 takes unit hn,real YM7 returns nothing
local timer t=CreateTimer()
local integer OB7=GetHandleId(t)
call NQ7(OB7,"Damage",YM7)
call NT7(OB7,"Unit",hn)
call TimerStart(t,0,false,function iI)
set t=null
endfunction
function YN7 takes unit hn,real YM7 returns nothing
local real iK=GetUnitState(hn,UNIT_STATE_MAX_LIFE)
local real il=GetUnitState(hn,UNIT_STATE_LIFE)
if(GetUnitState(hn,UNIT_STATE_LIFE)>1)then
if YM7>(iK-il)then
if YM7>=il then
call SetUnitState(hn,UNIT_STATE_LIFE,iK)
call m6(hn,YM7-(iK-il))
else
call m6(hn,YM7)
endif
else
call SetUnitState(hn,UNIT_STATE_LIFE,GetUnitState(hn,UNIT_STATE_LIFE)+YM7)
endif
endif
endfunction
function m9 takes unit p5,unit m5,real in returns boolean
local real iN=GetUnitX(p5)
local real io=GetUnitY(p5)
local real hN=GetUnitX(m5)
local real ho=GetUnitY(m5)
return((iN-hN)*(iN-hN)+(io-ho)*(io-ho))<in*in
endfunction
function Ma takes unit p5,unit m5 returns real
local real iN=GetUnitX(p5)
local real io=GetUnitY(p5)
local real hN=GetUnitX(m5)
local real ho=GetUnitY(m5)
if p5==null or m5==null then
return I2R($540BE3FF)
else
return SquareRoot((iN-hN)*(iN-hN)+(io-ho)*(io-ho))
endif
return 1.
endfunction
function YO7 takes unit p5,location m5 returns real
local real iN=GetUnitX(p5)
local real io=GetUnitY(p5)
local real hN=GetLocationX(m5)
local real ho=GetLocationY(m5)
if p5==null then
return I2R($540BE3FF)
else
return SquareRoot((iN-hN)*(iN-hN)+(io-ho)*(io-ho))
endif
return 1.
endfunction
function YP7 takes unit hn returns nothing
call SetUnitState(hn,UNIT_STATE_MANA,GetUnitState(hn,UNIT_STATE_MAX_MANA))
endfunction
function YQ7 takes unit hn,real iS returns nothing
call SetUnitState(hn,UNIT_STATE_LIFE,GetUnitState(hn,UNIT_STATE_LIFE)+iS)
endfunction
function YR7 takes nothing returns nothing
call PauseAllUnitsBJ(true)
endfunction
function RepeatedPauseAll takes nothing returns nothing
call TimerStart(CreateTimer(),1,true,function YR7)
endfunction
function iu takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
call DestroyEffect(OG7(OB7,"fx"))
call NM7(OB7)
call OZ7(t)
set t=null
return false
endfunction
function YS7 takes string iv,unit hn,string iV,real Hk returns nothing
local effect fx=AddSpecialEffectTarget(iv,hn,iV)
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call NU7(OB7,"fx",fx)
call TriggerRegisterUnitEvent(t,hn,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,Hk,false)
call TriggerAddCondition(t,Condition(function iu))
set fx=null
set t=null
endfunction
function iw takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
call DestroyEffect(OG7(OB7,"fx"))
call NM7(OB7)
call OZ7(t)
set t=null
return false
endfunction
function YT7 takes string iv,real x,real y,real Hk returns nothing
local effect fx=AddSpecialEffect(iv,x,y)
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call NU7(I97,"fx",fx)
call TriggerRegisterTimerEvent(t,Hk,false)
call TriggerAddCondition(t,Condition(function iw))
set fx=null
set t=null
endfunction
function ix takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
local string iv=OP7(OB7,"Effect")
local string iV=OP7(OB7,"Attach")
local integer iX=OM7(OB7,"Count")
call YS7(iv,m5,iV,2)
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>iX then
call NM7(OB7)
call OZ7(t)
endif
set t=null
set m5=null
return false
endfunction
function Mv takes timer t returns nothing
call PauseTimer(t)
call NM7(GetHandleId(t))
call DestroyTimer(t)
endfunction
function YU7 takes unit it,unit m5 returns boolean
local real x=RAbsBJ(GetUnitFacing(it)-GetUnitFacing(m5))
if(x<20 or x>340)then
set x=RAbsBJ(GetUnitFacing(it)-J47(it,m5))
return(x<20 or x>340)
endif
return false
endfunction
function i4 takes nothing returns nothing
call DestroyLightning(OH7(GetHandleId(GetExpiredTimer()),"Lightning"))
endfunction
function YV7 takes string i6,real x1,real y1,real x2,real y2,real r,real g,real b,real a,real Hk returns nothing
local timer t=CreateTimer()
local lightning i7=AddLightning(i6,true,x1,y1,x2,y2)
call SetLightningColor(i7,r,g,b,a)
call NW7(GetHandleId(t),"Lightning",i7)
call TimerStart(t,Hk,false,function i4)
set t=null
endfunction
function YW7 takes string Hx,real Hk,unit HX,real Ia,integer r,integer g,integer b,integer a returns nothing
local texttag tt=CreateTextTag()
call SetTextTagText(tt,Hx,Ia)
call SetTextTagPosUnit(tt,HX,64)
call SetTextTagColor(tt,r,g,b,a)
call SetTextTagVelocity(tt,0,.0355)
call SetTextTagFadepoint(tt,2)
call SetTextTagPermanent(tt,false)
call SetTextTagLifespan(tt,Hk)
if IsUnitVisible(HX,GetLocalPlayer())or WG7(GetLocalPlayer())then
call SetTextTagVisibility(tt,true)
else
call SetTextTagVisibility(tt,false)
endif
set tt=null
endfunction
function YX7 takes player p,string YY7,real K47,unit I77,real YZ7,integer r,integer g,integer b,integer a returns nothing
local texttag tt=CreateTextTag()
call SetTextTagText(tt,YY7,YZ7)
call SetTextTagPosUnit(tt,I77,64)
call SetTextTagColor(tt,r,g,b,a)
call SetTextTagVelocity(tt,0,.0355)
call SetTextTagFadepoint(tt,2)
call SetTextTagPermanent(tt,false)
call SetTextTagLifespan(tt,K47)
if IsPlayerAlly(GetLocalPlayer(),p) or WG7(GetLocalPlayer())then
call SetTextTagVisibility(tt,true)
else
call SetTextTagVisibility(tt,false)
endif
set tt=null
endfunction
function YB7 takes trigger t,playerunitevent Ib returns nothing
local integer YC7=0
loop
call TriggerRegisterPlayerUnitEvent(t,Player(YC7),Ib,Condition(function TO7))
set YC7=YC7+1
exitwhen YC7==16
endloop
endfunction
function Y37 takes nothing returns nothing
if VO7(GetEnumDestructable())and IsDestructableAliveBJ(GetEnumDestructable())then
set sl=sl+1
call KillDestructable(GetEnumDestructable())
endif
endfunction
function Y67 takes real x,real y,real d returns integer
local rect r=Rect(x-d,y-d,x+d,y+d)
set sl=0
call EnumDestructablesInRect(r,Condition(function TO7),function Y37)
call RemoveRect(r)
set r=null
return sl
endfunction
function YL7 takes real x,real y returns boolean
return( not(IsTerrainPathable(x,y,PATHING_TYPE_WALKABILITY)))
endfunction
function Y17 takes sound Y07,real x,real y returns nothing
call SetSoundPosition(Y07,x,y,0)
call SetSoundVolume(Y07,$7F)
set bj_lastPlayedSound=Y07
if(Y07!=null)then
call StartSound(Y07)
endif
endfunction
function If takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local fogmodifier IF=N_7(OB7,"fog")
call FogModifierStop(IF)
call DestroyFogModifier(IF)
call NM7(OB7)
call OZ7(t)
set t=null
set IF=null
return false
endfunction
function Y57 takes player p,real Hk,real x,real y,real r returns nothing
local trigger t=CreateTrigger()
local fogmodifier IF=CreateFogModifierRadius(p,FOG_OF_WAR_VISIBLE,x,y,r,true,true)
call FogModifierStart(IF)
call NX7(GetHandleId(t),"fog",IF)
call TriggerRegisterTimerEvent(t,Hk,false)
call TriggerAddCondition(t,Condition(function If))
set IF=null
set t=null
endfunction
function IG takes nothing returns nothing
set bj_groupCountUnits=bj_groupCountUnits+1
endfunction
function Ih takes nothing returns nothing
if VO7(GetEnumDestructable())and GetDestructableLife(GetEnumDestructable())>0 then
set EL=true
endif
endfunction
function nA takes real x,real y,real d returns boolean
local rect r=Rect(x-d,y-d,x+d,y+d)
set EL=false
call EnumDestructablesInRect(r,null,function Ih)
call RemoveRect(r)
set r=null
return EL
endfunction
function Ii takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit IH7=O77(I97,"Target")
local real Ij=ON7(I97,"Speed")
local unit Y27=O77(I97,"Projectile")
local real x=GetUnitX(Y27)
local real y=GetUnitY(Y27)
local real Y_7=GetUnitX(IH7)
local real Z47=GetUnitY(IH7)
local real Z77=Ij*.03
local real Z87=J77(x,y,Y_7,Z47)
local real Z97=x+Z77*Cos(Z87*bj_DEGTORAD)
local real ZD7=y+Z77*Sin(Z87*bj_DEGTORAD)
local boolean ZE7=(LoadBoolean(L7,(I97),(698)))
call SetUnitX(Y27,Z97)
call SetUnitY(Y27,ZD7)
call SetUnitFacing(Y27,Z87)
if XH7(IH7)and ZE7==false then
call KillUnit(Y27)
call NM7(I97)
call OZ7(t)
elseif KF7(Y_7,Z47,Z97,ZD7)<=Z77 then
call KillUnit(Y27)
set IN4=O77(I97,"Source")
set IP4=IH7
call ExecuteFunc(OP7(I97,"Callback"))
call NM7(I97)
call OZ7(t)
endif
set t=null
set IH7=null
set Y27=null
return false
endfunction
function ZF7 takes unit p5,unit m5,integer IM,string In,real Ij returns trigger
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local real iN=GetUnitX(p5)
local real io=GetUnitY(p5)
local real IN=GetUnitFacing(p5)
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerAddCondition(t,Condition(function Ii))
call NQ7(OB7,"Speed",Ij)
call NT7(OB7,"Target",m5)
call NR7(OB7,"Callback",In)
call NT7(OB7,"Source",p5)
call NT7(OB7,"Projectile",CreateUnit(GetOwningPlayer(p5),IM,iN,io,IN))
call SaveBoolean(L7,(OB7),(698),(false))
set eC=t
set t=null
return eC
endfunction
function Io takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
call UnitAddAbility(O77(OB7,"Unit"),1097625443)
call NM7(OB7)
call OZ7(t)
set t=null
return false
endfunction
function IO takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer iX=GetTriggerEvalCount(t)
local unit WI7=O77(OB7,"Hero")
local real Ip=ON7(OB7,"curscale")
local real XV7=Ip-(Ip-XX7(WI7))*iX/40
if iX>40 or XH7(WI7)then
call NM7(OB7)
call OZ7(t)
else
call SetUnitScale(WI7,XV7,XV7,XV7)
endif
set t=null
set WI7=null
return false
endfunction
function ng takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local real Iq=ON7(OB7,"EndScale")
call NM7(OB7)
call OZ7(t)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.025,true)
call TriggerAddCondition(t,Condition(function IO))
set OB7=GetHandleId(t)
call NQ7(OB7,"curscale",Iq)
call NT7(OB7,"Hero",WI7)
set t=null
set WI7=null
return false
endfunction
function nI takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer iX=GetTriggerEvalCount(t)
local unit WI7=O77(OB7,"Hero")
local real Ir=(ON7(OB7,"scale")-XX7(WI7))*iX/40
local real XV7=XX7(WI7)+Ir
if iX>40 or XH7(WI7)then
call NM7(OB7)
call OZ7(t)
else
call SetUnitScale(WI7,XV7,XV7,XV7)
endif
set t=null
set WI7=null
return false
endfunction
function ZG7 takes unit WI7,real Hk,real XV7 returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local real Is=XV7*XX7(WI7)
local real Iq=Is
call NT7(OB7,"Hero",WI7)
call NQ7(OB7,"EndScale",Iq)
call TriggerRegisterTimerEvent(t,Hk,false)
call TriggerAddCondition(t,Condition(function ng))
if Hk>3 then
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.025,true)
call TriggerAddCondition(t,Condition(function nI))
set OB7=GetHandleId(t)
call NQ7(OB7,"scale",Is)
call NT7(OB7,"Hero",WI7)
else
call SetUnitScale(WI7,Iq,Iq,Iq)
endif
set t=null
endfunction
function IS takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local integer It=OM7(OB7,"Ability")
if WI7!=null and GetUnitAbilityLevel(WI7,It)>0 then
call UnitRemoveAbility(WI7,It)
endif
call NM7(OB7)
call OZ7(t)
set t=null
set WI7=null
return false
endfunction
function ZH7 takes unit u,integer It,real Hk returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call XF7(u,It)
call TriggerRegisterTimerEvent(t,Hk,false)
call TriggerAddCondition(t,Condition(function IS))
call NT7(OB7,"Hero",u)
call NP7(OB7,"Ability",It)
set t=null
endfunction
function Iu takes nothing returns nothing
set bj_groupCountUnits=bj_groupCountUnits+1
endfunction
function ZI7 takes group g returns integer
set bj_groupCountUnits=0
call ForGroup(g,function Iu)
return bj_groupCountUnits
endfunction
function Iv takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local fogmodifier IF=N_7(OB7,"fog")
call FogModifierStop(IF)
call DestroyFogModifier(IF)
call NM7(OB7)
call OZ7(t)
set t=null
return false
endfunction
function ZJ7 takes fogmodifier IF,real Hk returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call FogModifierStart(IF)
call NX7(OB7,"fog",IF)
call TriggerRegisterTimerEvent(t,Hk,false)
call TriggerAddCondition(t,Condition(function Iv))
set t=null
endfunction
function Iw takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer ZK7=GetHandleId(t)
local integer ZM7=(LoadInteger(L7,(ZK7),(55)))
local destructable d=TR7(ZM7)
if d!=null then
call RemoveDestructable(d)
endif
call TT7(ZM7)
call NM7(ZK7)
call OZ7(t)
set d=null
set t=null
return false
endfunction
function ZN7 takes destructable d,real ZO7 returns nothing
local trigger t=CreateTrigger()
local integer ZK7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,ZO7,false)
call TriggerAddCondition(t,Condition(function Iw))
call SaveInteger(L7,(ZK7),(55),(TU7(d)))
set t=null
endfunction
function Ix takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local integer It=OM7(OB7,"Ability")
if WI7!=null and GetUnitAbilityLevel(WI7,It)>0 then
call UnitRemoveAbility(WI7,It)
endif
call NM7(OB7)
call OZ7(t)
set t=null
set WI7=null
return false
endfunction
function nl takes unit u,integer It,real Hk returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,Hk,false)
call TriggerAddCondition(t,Condition(function Ix))
call NT7(OB7,"Hero",u)
call NP7(OB7,"Ability",It)
set t=null
endfunction
function Iy takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
call SetUnitAnimation(O77(OB7,"Unit"),"stand")
call NM7(OB7)
call OZ7(t)
set t=null
return false
endfunction
function ZP7 takes unit u,real Hk returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call NT7(OB7,"Unit",u)
call TriggerRegisterTimerEvent(t,Hk,false)
call TriggerAddCondition(t,Condition(function Iy))
set t=null
endfunction
function nm takes real Hk,boolean IZ,real x,real y,real I0,real I1,real I2,real I3,real I4 returns nothing
local real I5
local real I6
local real I7
if(I1<=0 or I4<=0 or I3<=0)then
return
endif
set I6=2.*Hk/I3
set I5=2.*I1/I4
set I7=I0/I1
call TerrainDeformRipple(x,y,I1,I2,R2I(Hk*$3E8),1,I5,I6,I7,IZ)
endfunction
function ZQ7 takes player hV,unit hn,integer hY returns nothing
local texttag t=CreateTextTag()
call SetPlayerState(hV,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(hV,PLAYER_STATE_RESOURCE_GOLD)+hY)
call SetTextTagText(t,"+"+I2S(hY),.025)
call SetTextTagPosUnit(t,hn,0)
call SetTextTagColor(t,$FF,$DC,0,$FF)
call SetTextTagVelocity(t,0,.03)
if GetLocalPlayer()==hV then
call SetTextTagVisibility(t,true)
else
call SetTextTagVisibility(t,false)
endif
call SetTextTagFadepoint(t,2)
call SetTextTagLifespan(t,3)
call SetTextTagPermanent(t,false)
endfunction
function I9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
call RemoveUnit(O77(OB7,"Unit"))
call NM7(OB7)
call OZ7(t)
set t=null
return false
endfunction
function nn takes unit u,real d returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,d,false)
call TriggerAddCondition(t,Condition(function I9))
call NT7(OB7,"Unit",u)
set t=null
endfunction
function jA takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
call RemoveUnit(O77(OB7,"Unit"))
call NM7(OB7)
call OZ7(t)
set t=null
return false
endfunction
function jb takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
call KillUnit(O77(OB7,"Unit"))
call NM7(OB7)
call OZ7(t)
set t=null
return false
endfunction
function ZR7 takes unit u,real d returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,d,false)
call TriggerAddCondition(t,Condition(function jb))
call NT7(OB7,"Unit",u)
set t=CreateTrigger()
set OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,d+.01,false)
call TriggerAddCondition(t,Condition(function jA))
call NT7(OB7,"Unit",u)
set t=null
endfunction
function ZS7 takes sound Y07 returns nothing
if Y07!=null and CW[GetPlayerId(GetLocalPlayer())]==false then
call StartSound(Y07)
endif
endfunction
function ZT7 takes sound Y07,player HU returns nothing
if GetLocalPlayer()==HU and CW[GetPlayerId(HU)]==false then
call StartSound(Y07)
endif
endfunction
function ZU7 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))==false)!=null
endfunction
function ZV7 takes nothing returns nothing
call ZT7(VK4,GetOwningPlayer(GetEnumUnit()))
endfunction
function ZW7 takes unit ZX7,sound ZY7,real x,real y,real r returns nothing
local group g=WS7()
set IN4=ZX7
set VK4=ZY7
call GroupEnumUnitsInRange(g,x,y,r,Condition(function ZU7))
call GroupRemoveUnit(g,ZX7)
call ForGroup(g,function ZV7)
call WR7(g)
set g=null
endfunction
function ZZ7 takes player p returns nothing
if GetLocalPlayer()==p then
call ClearTextMessages()
endif
endfunction
function ZA7 takes unit u,real d returns nothing
call SetUnitState(u,UNIT_STATE_LIFE,YK7(GetUnitState(u,UNIT_STATE_LIFE)-d,1))
endfunction
function ZB7 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
local integer ZC7=OM7(OB7,"AbilityID")
if UnitRemoveAbility(m5,ZC7) or GetUnitAbilityLevel(m5,ZC7)==0 then
call NM7(OB7)
call OZ7(t)
endif
set t=null
set m5=null
return false
endfunction
function Z37 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
local integer ZC7=OM7(OB7,"AbilityID")
call NM7(OB7)
call OZ7(t)
if UnitRemoveAbility(m5,ZC7)==false then
set t=CreateTrigger()
set OB7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,1.,true)
call TriggerAddCondition(t,Condition(function ZB7))
call NT7(OB7,"Target",m5)
call NP7(OB7,"AbilityID",ZC7)
endif
set t=null
set m5=null
return false
endfunction
function Z67 takes unit m5,integer ZC7,integer V77,real Hk returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call XF7(m5,ZC7)
call SetUnitAbilityLevel(m5,ZC7,V77)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,Hk,false)
call TriggerAddCondition(t,Condition(function Z37))
call NT7(OB7,"Target",m5)
call NP7(OB7,"AbilityID",ZC7)
set t=null
endfunction
function Z07 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5
local integer o6
local integer Z17
if TimerGetElapsed(W)>=LoadReal(L7,OB7,0)or GetTriggerEventId()==EVENT_WIDGET_DEATH or LoadBoolean(L7,OB7,0)then
set m5=LoadUnitHandle(L7,OB7,17)
set o6=LoadInteger(L7,OB7,59)
set Z17=LoadInteger(L7,OB7,60)
call SaveBoolean(L7,OB7,0,true)
call UnitRemoveAbility(m5,Z17)
call UnitRemoveAbility(m5,o6)
if GetUnitAbilityLevel(m5,o6)==0 then
call FlushChildHashtable(L7,OB7)
call OZ7(t)
call RemoveSavedHandle(Dvv,GetHandleId(m5),0-o6)
endif
set m5=null
endif
set t=null
return false
endfunction
function Z57 takes unit m5,integer o6,integer V77,real Z27,integer Z17 returns nothing
local trigger t
local integer OB7
local real hyy
local real Hyy=TimerGetElapsed(W)+Z27
if XH7(m5)then
return
endif
if HaveSavedHandle(Dvv,GetHandleId(m5),0-o6)then
set t=LoadTriggerHandle(Dvv,GetHandleId(m5),0-o6)
set OB7=GetHandleId(t)
else
set t=CreateTrigger()
set OB7=GetHandleId(t)
call FlushChildHashtable(L7,OB7)
call SaveUnitHandle(L7,OB7,17,m5)
call SaveInteger(L7,OB7,59,o6)
call SaveInteger(L7,OB7,60,Z17)
call SaveReal(L7,OB7,0,0)
call TriggerRegisterDeathEvent(t,m5)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function Z07))
call SaveTriggerHandle(Dvv,GetHandleId(m5),0-o6,t)
endif
call SaveBoolean(L7,OB7,0,false)
set hyy=LoadReal(L7,OB7,0)
if hyy<Hyy then
call SaveReal(L7,OB7,0,Hyy)
endif
set t=null
call R1T(m5,o6,V77)
endfunction
function Z_7 takes unit S4 returns boolean
local integer z8=GetUnitTypeId(S4)
return z8==1848651828 or z8==1848652103 or z8==1848652099 or z8==1848652088 or z8==1697656907 or z8==1697656905 or z8==1697656908 or z8==1697657162
endfunction
function A47 takes nothing returns boolean
return(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)!=null
endfunction
function GZZ takes unit u returns boolean
return IsUnitType(u,UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(u,'A04R')==0 and XH7(u)==false
endfunction
function GenericCondition_Structure takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE) and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and XH7(GetFilterUnit())==false)!=null
endfunction
function A77 takes nothing returns boolean
return(WF7(GetFilterUnit())==false and IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function GenericCondition_EnemyUnitsExNoImmuneNoInvisAndStructureWithAncient takes nothing returns boolean
return WF7(GetFilterUnit())==false and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IN4))and IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and XH7(GetFilterUnit())==false)
endfunction
function GenericCondition_EnemyUnitsExNoInvisAndStructureWithAncient takes nothing returns boolean
return IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IN4))and IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and XH7(GetFilterUnit())==false)
endfunction
function GenericCondition_EnemyUnitsExNoImmuneNoInvisWithAncient takes nothing returns boolean
return(WF7(GetFilterUnit())==false and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IN4))and IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false))!=null
endfunction
function A87 takes nothing returns boolean
return(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IN4))and IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false))!=null
endfunction
function A97 takes nothing returns boolean
return(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function AD7 takes nothing returns boolean
return(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and TX7(GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false))!=null
endfunction
function AE7 takes unit u returns boolean
return GetUnitAbilityLevel(u,1097167948)>0 or GetUnitAbilityLevel(u,1113815395)>0 or GetUnitAbilityLevel(u,1113815346)>0 or GetUnitAbilityLevel(u,1110454606)>0
endfunction
function AF7 takes unit u returns boolean
return(GetUnitAbilityLevel((u),(1110459185))>0)or(GetUnitAbilityLevel((u),(1111844210))>0)or(GetUnitAbilityLevel((u),(1113943655))>0)or(GetUnitAbilityLevel((u),(1113943649))>0)or(GetUnitAbilityLevel((u),(1110454583))>0)or(GetUnitAbilityLevel((u),(1110456120))>0)or(GetUnitAbilityLevel((u),(1110456390))>0)or(GetUnitAbilityLevel((u),(1110456389))>0)or(GetUnitAbilityLevel((u),(1110459730))>0)or(GetUnitAbilityLevel((u),(1110459982))>0)
endfunction
function AG7 takes unit u returns nothing
call UnitRemoveAbility(u,1110459185)
call UnitRemoveAbility(u,1111844210)
call UnitRemoveAbility(u,1113943655)
call UnitRemoveAbility(u,1113943649)
call UnitRemoveAbility(u,1110454583)
call UnitRemoveAbility(u,1110456120)
call UnitRemoveAbility(u,1110456390)
call UnitRemoveAbility(u,1110456389)
call UnitRemoveAbility(u,1110459730)
call UnitRemoveAbility(u,1110459982)
endfunction
function AH7 takes unit u returns boolean
return(u==J64)or(u==JL4)or(u==J14)or(u==J04)or(u==J54)or(u==J24)or(u==J_4)or(u==K44)or(u==K74)or(u==K84)or(u==K94)or(u==KD4)or(u==KE4)or(u==KF4)or(u==KG4)or(u==KH4)or(u==KI4)or(u==JG4)or(u==JH4)or(u==JI4)or(u==JJ4)or(u==JK4)or(u==JM4)or(u==JN4)or(u==JO4)or(u==JP4)or(u==JQ4)or(u==JR4)or(u==JS4)or(u==JT4)or(u==JU4)or(u==JV4)or(u==JW4)or(u==JX4)
endfunction
function AI7 takes nothing returns boolean
return AH7(GetFilterUnit())and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit()))and GetUnitLifePercent(GetFilterUnit())<=90.
endfunction
function AJ7 takes nothing returns boolean
return(IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function AJJ7 takes nothing returns boolean
return(IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function GenericCondition_EnemyUnitsExHeroesVision takes nothing returns boolean
return((IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IN4)))!=null
endfunction
function GenericCondition_EnemyUnitsExHeroes takes nothing returns boolean
return((IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))!=null
endfunction
function AK7 takes unit u returns boolean
return GetUnitAbilityLevel(u,1110455864)>0 or GetUnitAbilityLevel(u,1110456148)>0 or GetUnitAbilityLevel(u,1110456118)>0 or GetUnitAbilityLevel(u,1112504171)>0 or GetUnitAbilityLevel(u,1110455378)>0 or GetUnitAbilityLevel(u,1110458677)>0 or GetUnitAbilityLevel(u,1110454609)>0 or GetUnitAbilityLevel(u,1110454326)>0 or GetUnitAbilityLevel(u,1114205814)>0 or GetUnitAbilityLevel(u,1097886070)>0 or GetUnitAbilityLevel(u,1093677617)>0 or GetUnitAbilityLevel(u,1093684020)>0 or GetUnitAbilityLevel(u,1093687362)>0 or GetUnitAbilityLevel(u,1093687858)>0 or GetUnitAbilityLevel(u,1093748545)>0 or GetUnitAbilityLevel(u,1093748823)>0 or GetUnitAbilityLevel(u,1093748824)>0 or GetUnitAbilityLevel(u,1093677130)>0 or GetUnitAbilityLevel(u,1110456395)>0 or GetUnitAbilityLevel(u,1110456408)>0 or GetUnitAbilityLevel(u,1110455097)>0 or GetUnitAbilityLevel(u,1110454347)>0 or GetUnitAbilityLevel(u,1112041075)>0 or GetUnitAbilityLevel(u,1093743664)>0 or GetUnitAbilityLevel(u,1110454833)>0 or GetUnitAbilityLevel(u,1093687876)>0 or GetUnitAbilityLevel(u,1093684052)>0 or GetUnitAbilityLevel(u,1110460216)>0
endfunction
function AM7 takes unit u,player p returns boolean
return AK7(u)==false or IsUnitVisible(GetFilterUnit(),p)
endfunction
function GenericCondition_EnemyUnitsExHeroesNoDotaInvis takes nothing returns boolean
return(((IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and AK7(GetFilterUnit())==false)!=null
endfunction
function ANN takes nothing returns boolean
return((IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))!=null
endfunction
function AN7 takes nothing returns boolean
return(((IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(AK7(GetFilterUnit())==false or IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IN4))))!=null
endfunction
function AO7 takes nothing returns boolean
return((IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))and GetUnitAbilityLevel(GetFilterUnit(),1093751362)==0)!=null
endfunction
function AP7 takes nothing returns boolean
return(((IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IN4)))and AE7(GetFilterUnit())==false)and GetUnitTypeId(GetFilterUnit())!=1848657461
endfunction
function XMI2 takes nothing returns boolean
return(IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function AQ7 takes nothing returns boolean
return(IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false))!=null
endfunction
function AR7 takes nothing returns boolean
return(WF7(GetFilterUnit())==false and IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function AS7 takes unit K67 returns boolean
return GetUnitTypeId(K67)==1848651828 or GetUnitTypeId(K67)==1848652088 or GetUnitTypeId(K67)==1848652099 or GetUnitTypeId(K67)==1848652103
endfunction
function ASA takes unit K67 returns boolean
return GetUnitTypeId(K67)==1848651828 or GetUnitTypeId(K67)==1848652088 or GetUnitTypeId(K67)==1848652099 or GetUnitTypeId(K67)==1848652103 or GetUnitTypeId(K67)=='u014' or GetUnitTypeId(K67)=='u015' or GetUnitTypeId(K67)=='u016' or GetUnitTypeId(K67)=='u017' or GetUnitTypeId(K67)=='u018' or GetUnitTypeId(K67)=='u019' or GetUnitTypeId(K67)=='u01A' or GetUnitTypeId(K67)=='u01B' or GetUnitTypeId(K67)=='u01C' or GetUnitTypeId(K67)=='u01D' or GetUnitTypeId(K67)=='u01E' or GetUnitTypeId(K67)=='u01F' or GetUnitTypeId(K67)=='u01R' or GetUnitTypeId(K67)=='u01S' or GetUnitTypeId(K67)=='u01T' or GetUnitTypeId(K67)=='u01U' or GetUnitTypeId(K67)=='u01V' or GetUnitTypeId(K67)=='u01W' or GetUnitTypeId(K67)=='n00L'
endfunction
function AT7 takes nothing returns boolean
return IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitTypeId(GetFilterUnit())==1700946284 or GetUnitTypeId(GetFilterUnit())==1970107511)
endfunction
function AU7 takes nothing returns boolean
return(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false and VP7(GetFilterUnit())==false)!=null
endfunction
function AV7 takes nothing returns boolean
return AU7()and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))
endfunction
function jE takes nothing returns boolean
return GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and XH7(GetFilterUnit())==false and VP7(GetFilterUnit())==false
endfunction
function AW7 takes nothing returns boolean
return(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and AU7()and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function GenericCondition_EnemyUnitsVisible takes nothing returns boolean
return((IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))!=null
endfunction
function GenericCondition_EnemyUnitsAndVisibleOrWW takes nothing returns boolean
return((IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))or AK7(GetFilterUnit())))!=null
endfunction
function jF takes nothing returns boolean
return IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and AU7()
endfunction
function AX7 takes nothing returns boolean
return IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and AU7()and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IN4))
endfunction
function AY7 takes nothing returns boolean
return(WF7(GetFilterUnit())==false and IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false and(GetUnitAbilityLevel((GetFilterUnit()),1113815395)>0)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function AZ7 takes nothing returns boolean
return((IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IN4)))and WF7(GetFilterUnit())==false and IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false and(GetUnitAbilityLevel((GetFilterUnit()),1113815395)>0)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function AA7 takes nothing returns boolean
return(WF7(GetFilterUnit())==false and(IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit()))))!=null
endfunction
function AB7 takes nothing returns boolean
return(IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function AC7 takes nothing returns boolean
return((GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function A37 takes nothing returns boolean
return(WF7(GetFilterUnit())==false and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit())) and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit()))))!=null
endfunction
function A67 takes nothing returns boolean
return((IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false)!=null
endfunction
function AL7 takes nothing returns boolean
return(WF7(GetFilterUnit())==false and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IN4))and IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and AU7()and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function ALL takes nothing returns boolean
return(WF7(GetFilterUnit())==false and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IN4))and IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and AU7()and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true or Z_7(GetFilterUnit())))!=null
endfunction
function A17 takes nothing returns boolean
return(WF7(GetFilterUnit())==false and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IN4))and IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function jh takes nothing returns boolean
return IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and AU7()
endfunction
function A07 takes nothing returns boolean
return(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false))!=null
endfunction
function ji takes nothing returns boolean
return(IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))==false and AU7()and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function jI takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and AU7()and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function A57 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and AU7()and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function A27 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and AU7()and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit()))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))!=null
endfunction
function GenericCondition_EnemyHeroesEx_OLD takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and AU7()and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function A_7 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit())) and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function GenericCondition_EnemyHeroesExNoDotAInvis takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit())) and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)or AK7(GetEnumUnit()))!=null
endfunction
function B47 takes nothing returns boolean
return(AU7()and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function B77 takes nothing returns boolean
return AU7()
endfunction
function B87 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function B97 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function GenericCondition_MyUnits takes nothing returns boolean
return(GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function BD7 takes nothing returns boolean
return(AU7()and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function jL takes nothing returns boolean
return(AU7()and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)or IsUnitIllusion(GetFilterUnit()))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function jm takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)!=null)!=null
endfunction
function GenericCondition_EnemyUnitsExVisible takes nothing returns boolean
return AJ7()and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IN4))
endfunction
function GenericCondition_EnemyUnitsExNoWW takes nothing returns boolean
return((IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IN4))or(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IN4))==false and AK7(GetFilterUnit()))==false))!=null
endfunction
function jn takes nothing returns boolean
return(AU7()and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function ny takes nothing returns boolean
return jn()and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IN4))
endfunction
function BE7 takes nothing returns boolean
return(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and XH7(GetFilterUnit()) and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false and GetUnitTypeId(GetFilterUnit())!=1848657461)!=null
endfunction
function BF7 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(IN4)) and U17(GetFilterUnit())>0
endfunction
function BG7 takes nothing returns boolean
return(IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false and(GetUnitAbilityLevel((GetFilterUnit()),1113815395)>0)==false))!=null
endfunction
function BH7 takes nothing returns boolean
return(WF7(GetFilterUnit())==false and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit())) and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false and(GetUnitAbilityLevel((GetFilterUnit()),1113815395)>0)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit()))))!=null
endfunction
function BI7 takes nothing returns boolean
return(IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function BJ7 takes nothing returns boolean
return(IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function BK7 takes nothing returns boolean
return(IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))==false and(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE) and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function GenericCondition_AlliedHeroesAndCreeps takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) or GetOwningPlayer(GetFilterUnit())==Z7[0]or GetOwningPlayer(GetFilterUnit())==A7[0])and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function BM7 takes nothing returns boolean
return(IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))==false and TX7(GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false))!=null
endfunction
function BN7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) or GetOwningPlayer(GetFilterUnit())==Z7[0]or GetOwningPlayer(GetFilterUnit())==A7[0])and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false and(GetUnitAbilityLevel((GetFilterUnit()),1113815395)>0)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function BO7 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitIllusion(GetFilterUnit())==false and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false and(GetUnitAbilityLevel((GetFilterUnit()),1113815395)>0)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function BP7 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit())) and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false and(GetUnitAbilityLevel((GetFilterUnit()),1113815395)>0)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function BQ7 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(IN4)) and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)or U17(GetFilterUnit())>0))!=null
endfunction
function BR7 takes nothing returns nothing
local destructable m5=GetEnumDestructable()
local real a=Atan2(GetDestructableY(m5)-GetUnitY(IN4),GetDestructableX(m5)-GetUnitX(IN4))
local real BS7=RAbsBJ((IJ4-a)*bj_RADTODEG)
if(VO7(m5)or GetDestructableTypeId(m5)==1110454325)and GetDestructableLife(m5)>1 and BS7<wB and BS7<(RU-5)then
set wB=BS7
set SB=m5
endif
set m5=null
endfunction
function BT7 takes unit BU7,unit p5,real l4 returns destructable
local real x=GetUnitX(BU7)
local real y=GetUnitY(BU7)
local rect r=Rect(x-zB,y-zB,x+zB,y+zB)
set wB=9999
set IN4=BU7
set SB=null
call EnumDestructablesInRect(r,Condition(function TO7),function BR7)
call RemoveRect(r)
set r=null
return SB
endfunction
function BV7 takes nothing returns nothing
local unit m5=GetEnumUnit()
local real a=Atan2(GetUnitY(m5)-GetUnitY(IN4),GetUnitX(m5)-GetUnitX(IN4))
local real BS7=RAbsBJ((IJ4-a)*bj_RADTODEG)
if BS7<wB and BS7<RU and m5!=IP4 then
set wB=BS7
set TB=m5
endif
set m5=null
endfunction
function BW7 takes unit BU7,unit p5,real l4 returns unit
local group g=WS7()
set TB=null
set wB=9999
set IN4=BU7
set IJ4=Atan2(GetUnitY(p5)-WW4,GetUnitX(p5)-WV4)
set IP4=p5
call GroupEnumUnitsInRange(g,GetUnitX(p5),GetUnitY(p5),yB,Condition(function AY7))
call ForGroup(g,function BV7)
call WR7(g)
set g=null
return TB
endfunction
function BX7 takes unit BU7,unit p5,real l4 returns unit
local group g=WS7()
set TB=null
set wB=9999
set IN4=BU7
set IJ4=l4
set IP4=p5
call GroupEnumUnitsInRange(g,GetUnitX(p5),GetUnitY(p5),yB,Condition(function AZ7))
call ForGroup(g,function BV7)
call WR7(g)
set g=null
return TB
endfunction
function BY7 takes real BZ7 returns integer
if BZ7>=4. then
return 24
elseif BZ7>=3.75 then
return 23
elseif BZ7>=3.5 then
return 22
elseif BZ7>=3.25 then
return 21
elseif BZ7>=3 then
return 20
elseif BZ7>=2.8 then
return 19
elseif BZ7>=2.75 then
return 18
elseif BZ7>=2.6 then
return 17
elseif BZ7>=2.5 then
return 16
elseif BZ7>=2.4 then
return $F
elseif BZ7>=2.25 then
return $E
elseif BZ7>=2.2 then
return $D
elseif BZ7>=2 then
return $C
elseif BZ7>=1.8 then
return $B
elseif BZ7>=1.75 then
return $A
elseif BZ7>=1.65 then
return 9
elseif BZ7>=1.5 then
return 8
elseif BZ7>=1.4 then
return 7
elseif BZ7>=1.25 then
return 6
elseif BZ7>=1.2 then
return 5
elseif BZ7>=1 then
return 4
elseif BZ7>=.75 then
return 3
elseif BZ7>=.5 then
return 2
elseif BZ7>=.25 then
return 1
endif
return 1
endfunction
function BA7 takes unit p5,unit m5,real Z27 returns nothing
local unit BB7=CreateUnit(GetOwningPlayer(m5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
local integer BC7=BY7(Z27)
call UnitAddAbility(BB7,1093687350)
call SetUnitAbilityLevel(BB7,1093687350,BC7)
call IssueTargetOrderById(BB7,$D007F,m5)
set BB7=null
endfunction
function B67 takes unit p5,unit m5,integer BL7,real YM7 returns nothing
if BL7==0 then
return
endif
set Fe=true
set Ce=BL7
if BL7==1 then
call UnitDamageTarget(p5,m5,YM7,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE,WEAPON_TYPE_WHOKNOWS)
elseif BL7==2 then
call UnitDamageTarget(p5,m5,YM7,true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
elseif BL7==3 then
call UnitDamageTarget(p5,m5,YM7,true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
elseif BL7==4 then
call UnitDamageTarget(p5,m5,YM7,true,true,ATTACK_TYPE_PIERCE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
elseif BL7==5 then
call UnitDamageTarget(p5,m5,YM7,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
elseif BL7==6 then
call SetUnitState(m5,UNIT_STATE_LIFE,RMaxBJ(GetUnitState(m5,UNIT_STATE_LIFE)-YM7,1))
if GetUnitState(m5,UNIT_STATE_LIFE)<2 then
call UnitRemoveBuffs(m5,true,true)
call UnitRemoveAbility(m5,1097167980)
call UnitDamageTarget(CreateUnit(GetOwningPlayer(p5),1697656901,0,0,0),m5,100000000.00,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endif
elseif BL7==7 then
if GetUnitAbilityLevel(m5,1097167980)>0 or GetUnitAbilityLevel(m5,1110454606)>0 then
call UnitDamageTarget(p5,m5,YM7,true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(p5,m5,YM7,true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
endif
elseif BL7==8 then
call UnitDamageTarget(p5,m5,YM7,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
elseif BL7==9 then
call UnitDamageTarget(p5,m5,YM7,true,true,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
elseif BL7==10 then
call UnitDamageTarget(p5,m5,YM7,true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
elseif BL7==11 then
call UnitDamageTarget(p5,m5,YM7,true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
elseif BL7==12 then
call UnitDamageTarget(p5,m5,YM7,true,true,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
elseif BL7==13 then
call UnitDamageTarget(p5,m5,YM7,true,true,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
elseif BL7==14 then
call UnitDamageTarget(p5,m5,YM7,true,true,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
elseif BL7==15 then
call UnitDamageTarget(p5,m5,YM7,true,true,ATTACK_TYPE_SIEGE,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
elseif BL7==16 then
call UnitDamageTarget(p5,m5,YM7,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
elseif BL7==17 then
call UnitDamageTarget(p5,m5,YM7,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_DIVINE,WEAPON_TYPE_WHOKNOWS)
elseif BL7==18 then
call UnitDamageTarget(p5,m5,YM7,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNKNOWN,WEAPON_TYPE_WHOKNOWS)
elseif BL7==19 then
call UnitDamageTarget(p5,m5,YM7,true,true,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_UNKNOWN,WEAPON_TYPE_WHOKNOWS)
elseif BL7==20 then
call UnitDamageTarget(p5,m5,YM7,true,true,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
endif
set Fe=false
set Ce=0
endfunction
function B17 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local integer B07=OM7(OB7,"TargetIndex")
local unit m5=TQ7(B07)
local integer BL7=OM7(OB7,"DamageType")
local real YM7=ON7(OB7,"Damage")
call B67(p5,m5,BL7,YM7)
call TP7(B07)
call NM7(OB7)
call OZ7(t)
set t=null
set p5=null
set m5=null
return false
endfunction
function B57 takes unit p5,unit m5,integer BL7,real YM7,real Z27 returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call NT7(OB7,"Source",p5)
call NP7(OB7,"TargetIndex",TS7(m5))
call NP7(OB7,"DamageType",BL7)
call NQ7(OB7,"Damage",YM7*1.)
call TriggerRegisterTimerEvent(t,Z27,false)
call TriggerAddCondition(t,Condition(function B17))
set t=null
endfunction
function jQ takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit m5=O77(OB7,"Target")
local integer BL7=OM7(OB7,"DamageType")
local real YM7=ON7(OB7,"Damage")
call B67(p5,m5,BL7,YM7)
call NM7(OB7)
call OZ7(t)
set t=null
set p5=null
set m5=null
return false
endfunction
function B27 takes unit p5,unit m5,integer BL7,real YM7,real Hk returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call NT7(OB7,"Source",p5)
call NT7(OB7,"Target",m5)
call NP7(OB7,"DamageType",BL7)
call NQ7(OB7,"Damage",YM7)
call TriggerRegisterTimerEvent(t,Hk,false)
call TriggerAddCondition(t,Condition(function jQ))
set t=null
endfunction
function G41 takes unit u,integer d returns nothing
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer EU1
if d<1 then
call UnitRemoveAbility(u,CS1[0])
call UnitRemoveAbility(u,CS1[1])
call UnitRemoveAbility(u,CS1[2])
call UnitRemoveAbility(u,CS1[3])
call UnitRemoveAbility(u,CS1[4])
call UnitRemoveAbility(u,CS1[5])
call UnitRemoveAbility(u,CS1[6])
call UnitRemoveAbility(u,CS1[7])
call UnitRemoveAbility(u,CS1[8])
return
endif
loop
exitwhen c==0
set c=a/2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set EU1=8
set i=0
loop
exitwhen i>EU1
if b[i]==1 then
call UnitAddAbility(u,CS1[i])
else
call UnitRemoveAbility(u,CS1[i])
endif
set i=i+1
endloop
endfunction
function B_7 takes unit u,integer d returns nothing
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer C47
if d<1 then
call UnitRemoveAbility(u,H64[0])
call UnitRemoveAbility(u,H64[1])
call UnitRemoveAbility(u,H64[2])
call UnitRemoveAbility(u,H64[3])
call UnitRemoveAbility(u,H64[4])
call UnitRemoveAbility(u,H64[5])
call UnitRemoveAbility(u,H64[6])
call UnitRemoveAbility(u,H64[7])
call UnitRemoveAbility(u,H64[8])
return
endif
loop
exitwhen c==0
set c=a/2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set C47=8
set i=0
loop
exitwhen i>C47
if b[i]==1 then
call UnitAddAbility(u,H64[i])
else
call UnitRemoveAbility(u,H64[i])
endif
set i=i+1
endloop
endfunction
function C77 takes unit u,integer d returns nothing
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer C87
if d<1 then
call UnitRemoveAbility(u,TK4[0])
call UnitRemoveAbility(u,TK4[1])
call UnitRemoveAbility(u,TK4[2])
call UnitRemoveAbility(u,TK4[3])
call UnitRemoveAbility(u,TK4[4])
call UnitRemoveAbility(u,TK4[5])
call UnitRemoveAbility(u,TK4[6])
call UnitRemoveAbility(u,TK4[7])
call UnitRemoveAbility(u,TK4[8])
call UnitRemoveAbility(u,TK4[9])
call UnitRemoveAbility(u,TK4[$A])
return
endif
loop
exitwhen c==0
set c=a/2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set C87=$A
set i=0
loop
exitwhen i>C87
if b[i]==1 then
call UnitAddAbility(u,TK4[i])
else
call UnitRemoveAbility(u,TK4[i])
endif
set i=i+1
endloop
endfunction
function G81 takes unit WI7,integer YNG returns nothing
local integer i=0
loop
exitwhen i>24
if i!=YNG/4 and GetUnitAbilityLevel(WI7,C9I[i])>0 then
call UnitRemoveAbility(WI7,C9I[i])
endif
set i=i+1
endloop
if GetUnitAbilityLevel(WI7,C9I[YNG/4])==0 then
call XF7(WI7,C9I[YNG/4])
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),C9I[YNG/4],false)
endif
endfunction
function C97 takes unit u,integer d returns nothing
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer C47
if d<1 then
call UnitRemoveAbility(u,HL4[0])
call UnitRemoveAbility(u,HL4[1])
call UnitRemoveAbility(u,HL4[2])
call UnitRemoveAbility(u,HL4[3])
call UnitRemoveAbility(u,HL4[4])
call UnitRemoveAbility(u,HL4[5])
call UnitRemoveAbility(u,HL4[6])
call UnitRemoveAbility(u,HL4[7])
call UnitRemoveAbility(u,HL4[8])
return
endif
loop
exitwhen c==0
set c=a/ 2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set C47=8
set i=0
loop
exitwhen i>C47
if b[i]==1 then
call UnitAddAbility(u,HL4[i])
else
call UnitRemoveAbility(u,HL4[i])
endif
set i=i+1
endloop
endfunction
function CD7 takes unit u,integer d returns nothing
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer CE7
if d<1 then
call UnitRemoveAbility(u,H14[0])
call UnitRemoveAbility(u,H14[1])
call UnitRemoveAbility(u,H14[2])
call UnitRemoveAbility(u,H14[3])
call UnitRemoveAbility(u,H14[4])
call UnitRemoveAbility(u,H14[5])
return
endif
loop
exitwhen c==0
set c=a/ 2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set CE7=i
set i=0
loop
exitwhen i>CE7
if b[i]==1 then
call UnitAddAbility(u,H14[i])
else
call UnitRemoveAbility(u,H14[i])
endif
set i=i+1
endloop
endfunction
function CF7 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local player p=O97(OB7,"p")
local integer i=OM7(OB7,"i")
local string c="|c006699CC"
if(GetObjectName((1848657992)))=="Language: English" and(MJ4[(i)]!="")then
if GetTriggerEvalCount(t)==1 then
call DisplayTimedTextToPlayer(p,0,0,$F,"Tip 1: "+c+MJ4[i]+"|r")
call ZT7(zR,p)
elseif GetTriggerEvalCount(t)==2 then
call DisplayTimedTextToPlayer(p,0,0,$F,"Tip 2: "+c+MK4[i]+"|r")
call ZT7(zR,p)
elseif GetTriggerEvalCount(t)==3 then
call DisplayTimedTextToPlayer(p,0,0,$F,"Tip 3: "+c+MM4[i]+"|r")
call ZT7(zR,p)
elseif GetTriggerEvalCount(t)==4 then
call DisplayTimedTextToPlayer(p,0,0,$F,"Tip 4: "+c+MN4[i]+"|r")
call ZT7(zR,p)
elseif GetTriggerEvalCount(t)==5 then
call DisplayTimedTextToPlayer(p,0,0,$F,"Tip 5: "+c+MO4[i]+"|r")
call ZT7(zR,p)
endif
endif
if GetTriggerEvalCount(t)==5 then
call OZ7(t)
call NM7(OB7)
endif
set t=null
return false
endfunction
function CG7 takes player p,integer i returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,15.,false)
call TriggerRegisterTimerEvent(t,300.,true)
call TriggerAddCondition(t,Condition(function CF7))
call NZ7(OB7,"p",p)
call NP7(OB7,"i",i)
set t=null
endfunction
function CH7 takes unit ZX7 returns integer
local integer U57=GetUnitTypeId(ZX7)
local integer CI7=1865429328
if U57==1432646245 then
set CI7=1865429326
elseif U57==1164799855 or U57==1211117641 or U57==1211119409 or U57==1160785973 then
set CI7=1865429327
endif
return CI7
endfunction
function CJ7 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call KillUnit(BB7)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
call SetUnitX(BB7,GetUnitX(ZX7))
call SetUnitY(BB7,GetUnitY(ZX7))
endif
set t=null
set ZX7=null
set BB7=null
return false
endfunction
function CK7 takes unit ZX7 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),CH7(ZX7),GetUnitX(ZX7),GetUnitY(ZX7),0)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function CJ7))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(19),(BB7))
set t=null
endfunction
function CM7 takes integer CN7 returns boolean
local integer i=0
loop
exitwhen i>59
if CN7==V9[i]then
return true
endif
set i=i+1
endloop
return false
endfunction
function CO7 takes integer V77 returns integer
local real CP7=KQ7()-M_4
local real CQ7=(R2I(CP7)/ 60)-(1/ 2)
local real CR7=100+V77*V77*1.5+CQ7*$F
local integer CS7
set CS7=R2I(CR7/ 50)
set CS7=IMinBJ(CS7,59)
set CS7=IMaxBJ(CS7,0)
return CS7
endfunction
function CT7 takes player p returns nothing
local integer id=GetPlayerId(p)
local unit CU7=KU4[id]
local unit CV7=M7[id]
local integer CW7=GetHeroLevel(CV7)
local integer i=0
if D4 then
return
endif
if X14==false then
return
endif
if W9[id]==1747993652 then
return
endif
if W9[id]!=0 then
call RemoveUnitFromStock(CU7,W9[id])
endif
call AddUnitToStock(CU7,V9[CO7(CW7)],1,1)
set W9[id]=V9[CO7(CW7)]
set CV7=null
set CU7=null
endfunction
function CX7 takes nothing returns boolean
if D4 then
return false
endif
call CT7(Z7[1])
call CT7(Z7[2])
call CT7(Z7[3])
call CT7(Z7[4])
call CT7(Z7[5])
call CT7(A7[1])
call CT7(A7[2])
call CT7(A7[3])
call CT7(A7[4])
call CT7(A7[5])
return false
endfunction
function CY7 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local integer id=(LoadInteger(L7,(I97),(34)))
local unit CZ7=KU4[id]
local unit WX7=M7[id]
local integer BC7=GetHeroLevel(WX7)
local integer i=0
call UnitRemoveAbility(CZ7,1093808213)
call AddUnitToStock(CZ7,V9[CO7(BC7)],1,1)
set W9[id]=V9[CO7(BC7)]
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set WX7=null
return false
endfunction
function CA7 takes player p returns nothing
local integer id=GetPlayerId(p)
local unit CZ7=KU4[id]
local unit WX7=M7[id]
local integer BC7=GetHeroLevel(WX7)
local integer i=0
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call CK7(WX7)
loop
exitwhen i>59
call RemoveUnitFromStock(CZ7,V9[i])
set i=i+1
endloop
call TriggerAddCondition(t,Condition(function CY7))
call TriggerRegisterTimerEvent(t,300,false)
call SaveInteger(L7,(I97),(34),(id))
set W9[id]=1747993652
call UnitAddAbility(CZ7,1093808213)
call IssueImmediateOrderById(CZ7,$D022E)
set WX7=null
set CZ7=null
set t=null
endfunction
function CB7 takes nothing returns nothing
set KA4[GetPlayerId(Z7[1])]=0
set KB4[GetPlayerId(Z7[1])]=66
set KC4[GetPlayerId(Z7[1])]=$FF
set KA4[GetPlayerId(Z7[2])]=48
set KB4[GetPlayerId(Z7[2])]=$E6
set KC4[GetPlayerId(Z7[2])]=$B9
set KA4[GetPlayerId(Z7[3])]=50
set KB4[GetPlayerId(Z7[3])]=0
set KC4[GetPlayerId(Z7[3])]=$81
set KA4[GetPlayerId(Z7[4])]=$FF
set KB4[GetPlayerId(Z7[4])]=$FC
set KC4[GetPlayerId(Z7[4])]=1
set KA4[GetPlayerId(Z7[5])]=$FF
set KB4[GetPlayerId(Z7[5])]=50
set KC4[GetPlayerId(Z7[5])]=0
set KA4[GetPlayerId(A7[1])]=$DC
set KB4[GetPlayerId(A7[1])]=50
set KC4[GetPlayerId(A7[1])]=50
set KA4[GetPlayerId(A7[2])]=50
set KB4[GetPlayerId(A7[2])]=50
set KC4[GetPlayerId(A7[2])]=50
set KA4[GetPlayerId(A7[3])]=75
set KB4[GetPlayerId(A7[3])]=$96
set KC4[GetPlayerId(A7[3])]=$BE
set KA4[GetPlayerId(A7[4])]=16
set KB4[GetPlayerId(A7[4])]=60
set KC4[GetPlayerId(A7[4])]=18
set KA4[GetPlayerId(A7[5])]=68
set KB4[GetPlayerId(A7[5])]=42
set KC4[GetPlayerId(A7[5])]=4
endfunction
function CC7 takes nothing returns nothing
local integer T8
local integer U8
set Q[GetPlayerId(Z7[0])]="|c00ff0303"
set Q[GetPlayerId(Z7[1])]="|c000042ff"
set Q[GetPlayerId(Z7[2])]="|c001ce6b9"
set Q[GetPlayerId(Z7[3])]="|c00540081"
set Q[GetPlayerId(Z7[4])]="|c00fffc01"
set Q[GetPlayerId(Z7[5])]="|c00ff8000"
set Q[GetPlayerId(A7[0])]="|c0020c000"
set Q[GetPlayerId(A7[1])]="|c00e55bb0"
set Q[GetPlayerId(A7[2])]="|c00959697"
set Q[GetPlayerId(A7[3])]="|c007ebff1"
set Q[GetPlayerId(A7[4])]="|c00106246"
set Q[GetPlayerId(A7[5])]="|c004e2a04"
call SetPlayerColor(Z7[0],PLAYER_COLOR_RED)
call SetPlayerColor(Z7[1],PLAYER_COLOR_BLUE)
call SetPlayerColor(Z7[2],PLAYER_COLOR_CYAN)
call SetPlayerColor(Z7[3],PLAYER_COLOR_PURPLE)
call SetPlayerColor(Z7[4],PLAYER_COLOR_YELLOW)
call SetPlayerColor(Z7[5],PLAYER_COLOR_ORANGE)
call SetPlayerColor(A7[0],PLAYER_COLOR_GREEN)
call SetPlayerColor(A7[1],PLAYER_COLOR_PINK)
call SetPlayerColor(A7[2],PLAYER_COLOR_LIGHT_GRAY)
call SetPlayerColor(A7[3],PLAYER_COLOR_LIGHT_BLUE)
call SetPlayerColor(A7[4],PLAYER_COLOR_AQUA)
call SetPlayerColor(A7[5],PLAYER_COLOR_BROWN)
set T8=1
set U8=5
loop
call J97(Z7[T8])
if(TZ7(Z7[T8]))then
call SetPlayerName(Z7[T8],I2S(T8)+J87(Z7[T8])+"Computer")
endif
call J97(A7[T8])
if(TZ7(A7[T8]))then
call SetPlayerName(A7[T8],I2S(5+T8)+J87(A7[T8])+"Computer")
endif
set T8=T8+1
exitwhen T8>U8
endloop
endfunction
function C37 takes unit M67 returns boolean
return GetUnitAbilityLevel(M67,1093678162)>0 and TX7(GetOwningPlayer(M67))
endfunction
function C67 takes real d returns boolean
return 2<d and d<$BB8 and d<GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)
endfunction
function CL7 takes nothing returns nothing
local integer T8=1
set Le=Z7[1]
loop
exitwhen TY7(Le)or T8>5
set T8=T8+1
set Le=Z7[T8]
endloop
if TY7(Le)==false then
set Le=A7[1]
set T8=1
loop
exitwhen TY7(Le)or T8>5
set T8=T8+1
set Le=A7[T8]
endloop
endif
endfunction
function C17 takes player p,string C07,integer C57 returns nothing
local string id=I2S(GetPlayerId(p))
call StoreInteger(IV4,id,C07,C57)
if TA7(Le)==false then
call CL7()
endif
if GetLocalPlayer()==Le then
call SyncStoredInteger(IV4,id,C07)
endif
endfunction
function C27 takes string C07,integer C57 returns nothing
call StoreInteger(IV4,"Data",C07,C57)
if TA7(Le)==false then
call CL7()
endif
if GetLocalPlayer()==Le then
call SyncStoredInteger(IV4,"Data",C07)
endif
endfunction
function C_7 takes nothing returns boolean
local string s
if IsUnitIllusion(GetTriggerUnit())==false and GetUnitTypeId(GetTriggerUnit())!=1211117642 then
call C27("Learn"+I2S(GetPlayerId(GetTriggerPlayer())),GetLearnedSkill())
endif
return false
endfunction
function L47 takes nothing returns boolean
local string s
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)and IsUnitIllusion(GetTriggerUnit())==false and GetUnitTypeId(GetTriggerUnit())!=1211117642 then
call C27("Cast"+I2S(GetPlayerId(GetTriggerPlayer())),GetSpellAbilityId())
endif
return false
endfunction
function L77 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function C_7))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function L47))
set t=null
endfunction
function L87 takes string s,string L97,string LD7 returns string
local string LE7=""
local integer i=0
local integer LF7=StringLength(s)
local string LG7
local integer LH7=StringLength(L97)
local boolean LI7=false
loop
exitwhen i+1>LF7
set LG7=SubString(s,i,i+LH7)
if LG7!=L97 or LI7 then
set LE7=LE7+SubString(s,i,i+1)
set i=i+1
else
set LE7=LE7+LD7
set i=i+LH7
set LI7=true
endif
endloop
return LE7
endfunction
function LJ7 takes player LK7,player LM7 returns string
local string s=(GetObjectName((1848656696)))
set s=L87(s,"$dead",Q[GetPlayerId(LK7)]+(KZ4[GetPlayerId((LK7))])+"|r")
set s=L87(s,"$killer",Q[GetPlayerId(LM7)]+(KZ4[GetPlayerId((LM7))])+"|r")
return s
endfunction
function LN7 takes nothing returns nothing
local integer i
local integer LO7=125
call SetUnitOwner(KJ4,Z7[1],false)
set h4[512+GetPlayerId(Z7[1])]=KJ4
call SetUnitOwner(KK4,Z7[2],false)
set h4[512+GetPlayerId(Z7[2])]=KK4
call SetUnitOwner(KM4,Z7[3],false)
set h4[512+GetPlayerId(Z7[3])]=KM4
call SetUnitOwner(KN4,Z7[4],false)
set h4[512+GetPlayerId(Z7[4])]=KN4
call SetUnitOwner(KO4,Z7[5],false)
set h4[512+GetPlayerId(Z7[5])]=KO4
call SetUnitOwner(KP4,A7[1],false)
set h4[512+GetPlayerId(A7[1])]=KP4
call SetUnitOwner(KQ4,A7[2],false)
set h4[512+GetPlayerId(A7[2])]=KQ4
call SetUnitOwner(KR4,A7[3],false)
set h4[512+GetPlayerId(A7[3])]=KR4
call SetUnitOwner(KS4,A7[4],false)
set h4[512+GetPlayerId(A7[4])]=KS4
call SetUnitOwner(KT4,A7[5],false)
set h4[512+GetPlayerId(A7[5])]=KT4
set KU4[GetPlayerId(Z7[1])]=KJ4
set KU4[GetPlayerId(Z7[2])]=KK4
set KU4[GetPlayerId(Z7[3])]=KM4
set KU4[GetPlayerId(Z7[4])]=KN4
set KU4[GetPlayerId(Z7[5])]=KO4
set KU4[GetPlayerId(A7[1])]=KP4
set KU4[GetPlayerId(A7[2])]=KQ4
set KU4[GetPlayerId(A7[3])]=KR4
set KU4[GetPlayerId(A7[4])]=KS4
set KU4[GetPlayerId(A7[5])]=KT4
set i=1
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(KU4[GetPlayerId(Player(i))],$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KU4[GetPlayerId(Player(i))],$FF,$FF,$FF,LO7)
endif
set i=2
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(KU4[GetPlayerId(Player(i))],$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KU4[GetPlayerId(Player(i))],$FF,$FF,$FF,LO7)
endif
set i=3
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(KU4[GetPlayerId(Player(i))],$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KU4[GetPlayerId(Player(i))],$FF,$FF,$FF,LO7)
endif
set i=4
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(KU4[GetPlayerId(Player(i))],$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KU4[GetPlayerId(Player(i))],$FF,$FF,$FF,LO7)
endif
set i=5
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(KU4[GetPlayerId(Player(i))],$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KU4[GetPlayerId(Player(i))],$FF,$FF,$FF,LO7)
endif
set i=7
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(KU4[GetPlayerId(Player(i))],$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KU4[GetPlayerId(Player(i))],$FF,$FF,$FF,LO7)
endif
set i=8
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(KU4[GetPlayerId(Player(i))],$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KU4[GetPlayerId(Player(i))],$FF,$FF,$FF,LO7)
endif
set i=9
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(KU4[GetPlayerId(Player(i))],$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KU4[GetPlayerId(Player(i))],$FF,$FF,$FF,LO7)
endif
set i=$A
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(KU4[GetPlayerId(Player(i))],$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KU4[GetPlayerId(Player(i))],$FF,$FF,$FF,LO7)
endif
set i=$B
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(KU4[GetPlayerId(Player(i))],$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KU4[GetPlayerId(Player(i))],$FF,$FF,$FF,LO7)
endif
set KV4[GetPlayerId(Z7[1])]=GetUnitX(KU4[GetPlayerId(Z7[1])])
set KV4[GetPlayerId(Z7[2])]=GetUnitX(KU4[GetPlayerId(Z7[2])])
set KV4[GetPlayerId(Z7[3])]=GetUnitX(KU4[GetPlayerId(Z7[3])])
set KV4[GetPlayerId(Z7[4])]=GetUnitX(KU4[GetPlayerId(Z7[4])])
set KV4[GetPlayerId(Z7[5])]=GetUnitX(KU4[GetPlayerId(Z7[5])])
set KV4[GetPlayerId(A7[1])]=GetUnitX(KU4[GetPlayerId(A7[1])])
set KV4[GetPlayerId(A7[2])]=GetUnitX(KU4[GetPlayerId(A7[2])])
set KV4[GetPlayerId(A7[3])]=GetUnitX(KU4[GetPlayerId(A7[3])])
set KV4[GetPlayerId(A7[4])]=GetUnitX(KU4[GetPlayerId(A7[4])])
set KV4[GetPlayerId(A7[5])]=GetUnitX(KU4[GetPlayerId(A7[5])])
set KW4[GetPlayerId(Z7[1])]=GetUnitY(KU4[GetPlayerId(Z7[1])])
set KW4[GetPlayerId(Z7[2])]=GetUnitY(KU4[GetPlayerId(Z7[2])])
set KW4[GetPlayerId(Z7[3])]=GetUnitY(KU4[GetPlayerId(Z7[3])])
set KW4[GetPlayerId(Z7[4])]=GetUnitY(KU4[GetPlayerId(Z7[4])])
set KW4[GetPlayerId(Z7[5])]=GetUnitY(KU4[GetPlayerId(Z7[5])])
set KW4[GetPlayerId(A7[1])]=GetUnitY(KU4[GetPlayerId(A7[1])])
set KW4[GetPlayerId(A7[2])]=GetUnitY(KU4[GetPlayerId(A7[2])])
set KW4[GetPlayerId(A7[3])]=GetUnitY(KU4[GetPlayerId(A7[3])])
set KW4[GetPlayerId(A7[4])]=GetUnitY(KU4[GetPlayerId(A7[4])])
set KW4[GetPlayerId(A7[5])]=GetUnitY(KU4[GetPlayerId(A7[5])])
endfunction
function LP7 takes unit WI7 returns boolean
local integer ID=GetUnitTypeId(WI7)
return ID==1848651862 or ID==1848651863 or ID=='n2O0' or ID==1848651826 or ID==1848651825 or ID==1848651864 or ID==1849897784 or ID==1848652107 or ID==1848651833
endfunction
function jw takes nothing returns nothing
if(GetOwningPlayer(GetEnumUnit())==Player(0))then
call SetUnitOwner(GetEnumUnit(),Z7[0],false)
if LP7(GetEnumUnit())==false then
call SetUnitColor(GetEnumUnit(),ConvertPlayerColor(0))
endif
else
call SetUnitOwner(GetEnumUnit(),A7[0],false)
if LP7(GetEnumUnit())==false then
call SetUnitColor(GetEnumUnit(),ConvertPlayerColor(6))
endif
endif
endfunction
function Np takes nothing returns nothing
local group LQ7=WS7()
call GroupEnumUnitsOfPlayer(LQ7,Player(0),Condition(function TO7))
call ForGroup(LQ7,function jw)
call GroupClear(LQ7)
call GroupEnumUnitsOfPlayer(LQ7,Player(6),Condition(function TO7))
call ForGroup(LQ7,function jw)
call WR7(LQ7)
set LQ7=null
endfunction
function LR7 takes player p returns nothing
local integer i=0
local string jX=GetPlayerName(p)
local integer LF7=StringLength(jX)
local integer jY=LF7
loop
exitwhen i==LF7
if SubString(jX,i,i+1)=="("and SubString(jX,i-1,i)==" "then
set jY=i-1
call SetPlayerName(p,SubString(jX,0,jY))
set i=LF7
else
set i=i+1
endif
endloop
endfunction
function LS7 takes nothing returns nothing
local integer LT7
local integer LU7
local integer T8
local integer U8
local integer x=0
local integer y=0
local integer i
local location LV7=GetRectCenter(pr)
local location LW7=GetRectCenter(qr)
if GetPlayerState(Z7[0],PLAYER_STATE_OBSERVER)!=0 or GetPlayerState(A7[0],PLAYER_STATE_OBSERVER)!=0 then
set V8=true
set Z7[0]=Player($D)
set A7[0]=Player($E)
set KX4=Player(0)
set KY4=Player(6)
call SetAllyColorFilterState(0)
loop
exitwhen x>5
call SetPlayerAlliance(Player(0),Z7[x],ConvertAllianceType(0),true)
call SetPlayerAlliance(Player(0),Z7[x],ConvertAllianceType(4),true)
call SetPlayerAlliance(Player(0),A7[x],ConvertAllianceType(0),false)
call SetPlayerAlliance(Player(0),A7[x],ConvertAllianceType(4),false)
set x=x+1
endloop
endif
call ForceAddPlayer(X7,Z7[0])
call ForceAddPlayer(X7,Z7[1])
call ForceAddPlayer(X7,Z7[2])
call ForceAddPlayer(X7,Z7[3])
call ForceAddPlayer(X7,Z7[4])
call ForceAddPlayer(X7,Z7[5])
call ForceAddPlayer(Y7,A7[0])
call ForceAddPlayer(Y7,A7[1])
call ForceAddPlayer(Y7,A7[2])
call ForceAddPlayer(Y7,A7[3])
call ForceAddPlayer(Y7,A7[4])
call ForceAddPlayer(Y7,A7[5])
call ForceAddPlayer(L8,Z7[1])
call ForceAddPlayer(L8,Z7[2])
call ForceAddPlayer(L8,Z7[3])
call ForceAddPlayer(L8,Z7[4])
call ForceAddPlayer(L8,Z7[5])
call ForceAddPlayer(L8,A7[1])
call ForceAddPlayer(L8,A7[2])
call ForceAddPlayer(L8,A7[3])
call ForceAddPlayer(L8,A7[4])
call ForceAddPlayer(L8,A7[5])
if V8 then
call ForceAddPlayer(L8,Player(0))
call ForceAddPlayer(L8,Player(6))
endif
set x=0
set y=0
loop
exitwhen x>5
loop
exitwhen y>5
if(x!=y)then
call SetPlayerAlliance(Z7[x],Z7[y],ConvertAllianceType(0),true)
call SetPlayerAlliance(Z7[x],Z7[y],ConvertAllianceType(1),true)
call SetPlayerAlliance(Z7[x],Z7[y],ConvertAllianceType(2),true)
call SetPlayerAlliance(Z7[x],Z7[y],ConvertAllianceType(3),true)
call SetPlayerAlliance(Z7[x],Z7[y],ConvertAllianceType(4),true)
call SetPlayerAlliance(Z7[x],Z7[y],ConvertAllianceType(5),true)
call SetPlayerAlliance(Z7[x],Z7[y],ConvertAllianceType(6),false)
call SetPlayerAlliance(Z7[x],Z7[y],ConvertAllianceType(7),false)
call SetPlayerAlliance(A7[x],A7[y],ConvertAllianceType(0),true)
call SetPlayerAlliance(A7[x],A7[y],ConvertAllianceType(1),true)
call SetPlayerAlliance(A7[x],A7[y],ConvertAllianceType(2),true)
call SetPlayerAlliance(A7[x],A7[y],ConvertAllianceType(3),true)
call SetPlayerAlliance(A7[x],A7[y],ConvertAllianceType(4),true)
call SetPlayerAlliance(A7[x],A7[y],ConvertAllianceType(5),true)
call SetPlayerAlliance(A7[x],A7[y],ConvertAllianceType(6),false)
call SetPlayerAlliance(A7[x],A7[y],ConvertAllianceType(7),false)
call SetPlayerAlliance(Z7[x],A7[y],ConvertAllianceType(0),false)
call SetPlayerAlliance(Z7[x],A7[y],ConvertAllianceType(1),false)
call SetPlayerAlliance(Z7[x],A7[y],ConvertAllianceType(2),false)
call SetPlayerAlliance(Z7[x],A7[y],ConvertAllianceType(3),false)
call SetPlayerAlliance(Z7[x],A7[y],ConvertAllianceType(4),false)
call SetPlayerAlliance(Z7[x],A7[y],ConvertAllianceType(5),false)
call SetPlayerAlliance(Z7[x],A7[y],ConvertAllianceType(6),false)
call SetPlayerAlliance(Z7[x],A7[y],ConvertAllianceType(7),false)
call SetPlayerAlliance(A7[x],Z7[y],ConvertAllianceType(0),false)
call SetPlayerAlliance(A7[x],Z7[y],ConvertAllianceType(1),false)
call SetPlayerAlliance(A7[x],Z7[y],ConvertAllianceType(2),false)
call SetPlayerAlliance(A7[x],Z7[y],ConvertAllianceType(3),false)
call SetPlayerAlliance(A7[x],Z7[y],ConvertAllianceType(4),false)
call SetPlayerAlliance(A7[x],Z7[y],ConvertAllianceType(5),false)
call SetPlayerAlliance(A7[x],Z7[y],ConvertAllianceType(6),false)
call SetPlayerAlliance(A7[x],Z7[y],ConvertAllianceType(7),false)
endif
set y=y+1
endloop
set y=0
set x=x+1
endloop
call SetPlayerTeam(Z7[0],0)
call SetPlayerTeam(Z7[1],0)
call SetPlayerTeam(Z7[2],0)
call SetPlayerTeam(Z7[3],0)
call SetPlayerTeam(Z7[4],0)
call SetPlayerTeam(Z7[5],0)
call SetPlayerTeam(A7[0],1)
call SetPlayerTeam(A7[1],1)
call SetPlayerTeam(A7[2],1)
call SetPlayerTeam(A7[3],1)
call SetPlayerTeam(A7[4],1)
call SetPlayerTeam(A7[5],1)
call SetPlayerName(Z7[0],(GetObjectName((1848652622))))
call SetPlayerName(A7[0],(GetObjectName((1848652623))))
call SetPlayerName(B7,(GetObjectName((1848657208))))
call LN7()
if(Z7[0]!=Player(0)or A7[0]!=Player(6))then
call Np()
endif
call CC7()
set LU7=q8(X7)
set LT7=q8(Y7)
set T8=1
set U8=5
loop
exitwhen T8>U8
if(TA7(Z7[T8]))then
call SetPlayerState(Z7[T8],PLAYER_STATE_RESOURCE_GOLD,(875*LU7/LU7))
call SetPlayerState(Z7[T8],PLAYER_STATE_RESOURCE_LUMBER,0)
endif
if(TA7(A7[T8]))then
call SetPlayerState(A7[T8],PLAYER_STATE_RESOURCE_GOLD,(875*LT7/LT7))
call SetPlayerState(A7[T8],PLAYER_STATE_RESOURCE_LUMBER,0)
endif
set T8=T8+1
endloop
call SetPlayerHandicapXP(Z7[1],1)
call SetPlayerHandicapXP(Z7[2],1)
call SetPlayerHandicapXP(Z7[3],1)
call SetPlayerHandicapXP(Z7[4],1)
call SetPlayerHandicapXP(Z7[5],1)
call SetPlayerHandicapXP(A7[1],1)
call SetPlayerHandicapXP(A7[2],1)
call SetPlayerHandicapXP(A7[3],1)
call SetPlayerHandicapXP(A7[4],1)
call SetPlayerHandicapXP(A7[5],1)
call SetPlayerState(Z7[0],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(Z7[1],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(Z7[2],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(Z7[3],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(Z7[4],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(Z7[5],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(A7[0],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(A7[1],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(A7[2],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(A7[3],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(A7[4],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(A7[5],PLAYER_STATE_GIVES_BOUNTY,1)
call CL7()
call CB7()
call LR7(Z7[1])
call LR7(Z7[2])
call LR7(Z7[3])
call LR7(Z7[4])
call LR7(Z7[5])
call LR7(A7[1])
call LR7(A7[2])
call LR7(A7[3])
call LR7(A7[4])
call LR7(A7[5])
set x=1
loop
exitwhen x>5
if TA7(Z7[x])then
call CreateUnitAtLoc(Z7[x],1848651843,LV7,bj_UNIT_FACING)
endif
if TA7(A7[x])then
call CreateUnitAtLoc(A7[x],1848651843,LW7,bj_UNIT_FACING)
endif
set x=x+1
endloop
call RemoveLocation(LV7)
call RemoveLocation(LW7)
set i=0
loop
set KZ4[i]=GetPlayerName(Player(i))
set i=i+1
exitwhen i==16
endloop
set LV7=null
set LW7=null
endfunction
function LX7 takes nothing returns nothing
local integer i=1
set KL4=1
set K34[1]=1215723364
set MI4[1]=1747989338
set K64[1]=1848654165
set MH4[1]="ReplaceableTextures\\CommandButtons\\BTNAvengingWatcher.blp"
call XY7(K34[1],"stand 4")
call XU7(K34[1],1.35,MI4[1])
set MJ4[i]="Cheap items such as Bracers, Bottle and Magic Stick help give Vengeful Spirit what she needs to use Magic Missile and Swap safely and frequently."
set MK4[i]="By getting Magic Missile first, Vengeful Spirit should take advantage of this powerful stun by moving around the map instead of simply farming in a lane."
set MM4[i]="It sometimes a good idea to save the Command Aura for later in the game when it will give your team more damage."
set MN4[i]="Wave of Terror is used to provide sight, giving you vision over an area or providing an opportunity to use Swap."
set MO4[i]="Swap will allow you to isolate a key hero on their team, sometimes your sacrifice is needed to win the battle and maybe even the game."
set i=i+1
set K34[2]=1215128178
set MI4[2]=1747989552
set K64[2]=1848654145
set MH4[2]="ReplaceableTextures\\CommandButtons\\BTNAvatar.blp"
call XY7(K34[2],"attack slam alternate")
call XU7(K34[2],1.3,MI4[2])
set MJ4[i]="When using Arc lightning, try to kill creeps and harass your opponent at the same time"
set MK4[i]="When ganking, you can use Lightning Bolt to ensure you will not lose sight of the target quickly."
set MM4[i]="Lightning Bolt has a mini-stun that can be used against channeling spells and teleporting heroes."
set MN4[i]="Static Field is extremely powerful throughout the game: Use your spells as frequently as possible during fights."
set MO4[i]="Both Lightning Bolt and Wrath of the Thundergod reveal invisible units. Wrath will not damage invisible units."
set i=i+1
set K34[3]=1164799855
set MI4[3]=1747989553
set K64[3]=1848654137
set MH4[3]="ReplaceableTextures\\CommandButtons\\BTNDryad.blp"
call XY7(K34[3],"stand 4")
call XU7(K34[3],1,MI4[3])
set MJ4[i]="Enchant can be used on neutral creeps, meaning Enchantress can fight and use neutral creeps to engage enemy heroes effectively."
set MK4[i]="Nature's Attendants heals in an area AOE, so make sure you're far from creeps if you only want to heal yourself."
set MM4[i]="Untouchable is great against physical attacks, but it does not help you survive huge burst damage nukes."
set MN4[i]="Impetus deals negligible damage at short range; switch to normal attacks if your target gets close to save mana."
set MO4[i]="Impetus deals pure damage, making it a great tool against heroes with a lot of resistance because it is not reduced."
set i=i+1
set K34[4]=1328558160
set MI4[4]=1747989554
set K64[4]=1848654136
set MH4[4]="ReplaceableTextures\\CommandButtons\\BTNSeaElemental.blp"
call XY7(K34[4],"stand 2")
call XU7(K34[4],1,MI4[4])
set MJ4[i]="Waveform is extremely powerful: Used for damage, chasing, escaping, it even allows you to dodge some spells by casting it at the right time."
set MK4[i]="Morph allows you to manipulate your Agility and Strength. Using the Strength Morph ('F') can act as a heal to help you survive between spells."
set MM4[i]="Use Morph Replicate to take the location of your Replicated unit, making it great for a quick escape or simply as a free teleport."
set MN4[i]="Replicate is usually cast on the strongest ally or enemy to a fight. Certain hero passives or items will retain their effects, so Replicate those heroes."
set MO4[i]="Eye of Skadi and Linken's Sphere are two examples of Statistic-increasing items which give Morphling a lot of versatility and the ability to cast spells often."
set i=i+1
set K34[5]=1214931305
set MI4[5]=1747989555
set K64[5]=1848654167
set MH4[5]="ReplaceableTextures\\CommandButtons\\BTNJaina.blp"
call XY7(K34[5],"stand victory")
call XU7(K34[5],1,MI4[5])
set MJ4[i]="CM is a fragile support hero: Items like Bracers and Phase Boots will help her survive and deal with her low movement speed and armor."
set MK4[i]="A few points of Brilliance Aura early on provides your team with massive amounts of extra mana."
set MM4[i]="Enemies hit by Frostbite can still cast spells, so don't take them lightly. "
set MN4[i]="Frostbite on non-hero units will last 10 seconds. This can be useful for killing neutral creeps that are level 5 or lower as well."
set MO4[i]="There are two items that can help you with the perfect Freezing Field: Placement with Kelen's Dagger and the spell immunity of Black King Bar."
set i=i+1
set K34[6]=1211117617
set MI4[6]=1747989556
set K64[6]=1848654134
set MH4[6]="ReplaceableTextures\\CommandButtons\\BTNFelGuardBlue.tga"
call XY7(K34[6],"spell")
call XU7(K34[6],1,MI4[6])
set MJ4[i]="Storm Bolt is a skill Sven should usually get early because of its damage and stun. "
set MK4[i]="Take advantage of Storm Bolt's area of effect by hitting additional enemy creeps and heroes whenever possible. "
set MM4[i]="Try to be near your allies when you cast Warcry."
set MN4[i]="Only items that increase Strength will give you additional damage from effect of God's Strength."
set MO4[i]="Casting God's Strength before engaging in fights or casting Storm Bolt will allow you to get additional attacks on your opponent."
set i=i+1
set K34[7]=1212363833
set MI4[7]=1747989557
set K64[7]=1848654160
set MH4[7]="ReplaceableTextures\\CommandButtons\\BTNSeaWitch.blp"
call XY7(K34[7],"spell")
call XU7(K34[7],1,MI4[7])
set MJ4[i]="Opponents can attack and cast spells while Ensnared. However, it will work on magic immune units and reveal invisible heroes until the duration expires."
set MK4[i]="Mirror Image can be used defensively to avoid certain spells and dispel debuffs or channeling spells."
set MM4[i]="Items that provide attribute bonuses improve your Image's power."
set MN4[i]="Enemies caught by Song of the Siren are invulnerable while asleep. Save your attacks and spells for after the spell expires."
set MO4[i]="Use Song of the Siren to isolate a magic immune or Cycloned hero (since they will not be affected), or to demolish buildings while enemies are asleep."
set i=i+1
set K34[8]=1333027688
set MI4[8]=1747989558
set K64[8]=1848654148
set MH4[8]="ReplaceableTextures\\CommandButtons\\BTNTauren.blp"
call XY7(K34[8],"attack slam")
call XU7(K34[8],1.1,MI4[8])
set MJ4[i]="Although he's a strength hero, Earthshaker (ES) actually plays more like a caster. Damage items are not very useful, but mana items can be nice."
set MK4[i]="A good cast of Fissure can isolate an opponent and cut off their escape. Practice often to achieve devastating results."
set MM4[i]="Kelen's Dagger is an incredible item on ES, it allows you to quickly position yourself for the perfect Fissure or Echoslam."
set MN4[i]="The timing of your spells is important, by spacing them out properly you can keep a group of heroes disabled for several seconds."
set MO4[i]="Due to Raigor's ability to split up an enemy team and keep them stunned, he is great for initiating fights."
set i=i+1
set K34[9]=1212365106
set MI4[9]=1747989559
set K64[9]=1848654168
set MH4[9]="ReplaceableTextures\\CommandButtons\\BTNSatyrTrickster.blp"
call XY7(K34[9],"stand 4")
call XU7(K34[9],1,MI4[9])
set MJ4[i]="Getting at least one level of Blink Strike and Smoke Screen help you survive to level 6 when you can learn Permanent Invisibility."
set MK4[i]="Attacking or using your spells makes you visible: Consider the fade time of Permanent Invisibility before placing yourself at risk."
set MM4[i]="Try to position Smoke Screen slightly behind enemies so that they spend more time in the cloud if they retreat."
set MN4[i]="Wraith Bands and later a Yasha or a Diffusal Blade will provide Rikimaru with cheap damage and chasing power for dispatching fragile heroes quickly."
set MO4[i]="Be careful of items that render you visible, such as Dust of Appearance, Sentry Wards or a Gem of True Sight."
set i=i+1
set K34[$A]=1311781199
set MI4[$A]=1747989560
set K64[$A]=1848654169
set MH4[$A]="ReplaceableTextures\\CommandButtons\\BTNDruidOfTheClaw.blp"
call XY7(K34[$A],"spell slam")
call XU7(K34[$A],1,MI4[$A])
call XU7(1848652083,1.1,MI4[$A])
call XU7(1848652084,1.2,MI4[$A])
call XU7(1848652085,1.3,MI4[$A])
call XU7(1848651828,1,MI4[$A])
call XU7(1848652088,1.1,MI4[$A])
call XU7(1848652099,1.2,MI4[$A])
call XU7(1848652103,1.3,MI4[$A])
set MJ4[i]="Spirit Bear is great to have in the lane and allowing Syllabear to fight neutral creeps because of its high HP and damage. "
set MK4[i]="Leveling Spirit Bear also gets various bonuses that make it very powerful for fighting heroes and towers so it is usually the first thing to max out."
set MM4[i]="Your Spirit Bear might be able to handle a lot of damage, but if it dies you will also take damage (100 X its level). If you die, it dies as well."
set MN4[i]="Give items to your bear instead of Syllabear since it is usually engaging the enemy for you. Remember that stat-increasing items do not benefit the bear."
set MO4[i]="True Form gives Syllabear massive HP in his melee form, and Rabid and Battle Cry give both him and his Bear huge damage temporarily."
set i=i+1
set K34[$B]=1211117620
set MI4[$B]=1747989561
set K64[$B]=1848654170
set MH4[$B]="ReplaceableTextures\\CommandButtons\\BTNSorceress.blp"
call XY7(K34[$B],"stand victory")
call XU7(K34[$B],1.2,MI4[$B])
set MJ4[i]="Light Strike Array is usually a good skill to get at level 1 because it provides you with a stun."
set MK4[i]="Target the ground in their direction instead of clicking on enemies to maximize Dragon Slave's long range."
set MM4[i]="Cheap items will help Lina do her job: Bracers, Bottle, Phase Boots. A Point booster provides a nice HP/mana bonus for its cost."
set MN4[i]="Fiery Soul can help you maneuver better during a fight."
set MO4[i]="Try to stun as many heroes as possible during team fights"
set i=i+1
set K34[$C]=1315070563
set MI4[$C]=1747989569
set K64[$C]=1848656181
set MH4[$C]="ReplaceableTextures\\CommandButtons\\BTNChaosBlademaster.blp"
call XY7(K34[$C],"stand victory")
call XU7(K34[$C],1,MI4[$C])
set MJ4[i]="Blade Fury is your most important skill early game for getting hero kills and avoiding magic damage."
set MK4[i]="Avoid follow-command (right-clicking) heroes with Blade Fury and instead click the ground near the opponent."
set MM4[i]="Isolate enemy heroes before using Omnislash to prevent Juggernaut from attacking multiple targets and doing less damage."
set MN4[i]="Increasing your attack speed will give you 'extra attacks' during Omnislash, which are treated like a normal attack (in terms of damage and orb effects)."
set MO4[i]="Protect the 1-HP Healing Ward in battles and it can prolong and save the lives of your entire team."
set i=i+1
set K34[$D]=1311781185
set MI4[$D]=1747989570
set K64[$D]=1848654135
set MH4[$D]="ReplaceableTextures\\CommandButtons\\BTNSpellBreaker.blp"
call XY7(K34[$D],"stand ready")
call XU7(K34[$D],1,MI4[$D])
set MJ4[i]="Glaives of Wisdom is useful to get early because it is useful for killing creeps and harassing your opponent manually ('W' and then the target)."
set MK4[i]="Curse of the Silent will cause an enemy to lose HP/mana if they do not choose to use their spells, or cannot use their spells (disabled, silenced, cooldown)."
set MM4[i]="Last Word will prevent enemies from using multiple spells on you and your team at the same time provided you get close enough."
set MN4[i]="Global Silence can be used for initiating on enemies or saving allies early on. Try to pay attention to your teammates and enemies, even those not nearby."
set MO4[i]="Global Silence will also give your allies the opportunity in team battles to use their spells without repercussions - making it a powerful control spell."
set i=i+1
set K34[$E]=1214344551
set MI4[$E]=1747989571
set K64[$E]=1848654150
set MH4[$E]="ReplaceableTextures\\CommandButtons\\BTNTreant.blp"
call XY7(K34[$E],"stand 3")
call XU7(K34[$E],.72,MI4[$E])
set MJ4[i]="Thanks to his high base damage and survivability, Rooftrellen can usually obtain high-tier damage or caster items depending on the needs of the team."
set MK4[i]="Living armor adds significant defensive bonuses to an allied unit. It can even be cast on buildings to make them more resilient and provide regeneration."
set MM4[i]="Nature's Guise is more than an escape tool, it can be used offensively as well. Use it to position allies and yourself near trees before surprising the enemy."
set MN4[i]="Use Eyes in the Forest whenever you can to gain vision of key locations such as the rune spots, neutral creep camps and Roshan."
set MO4[i]="Enemies under the effect of Overgrowth can still use spells and items, so make sure your team acts quickly while enemies remain immobilized."
set i=i+1
set K34[$F]=1328558389
set MI4[$F]=1747990352
set K64[$F]=1848657731
set MH4[$F]="ReplaceableTextures\\CommandButtons\\BTNHeroTaurenChieftain.blp"
call XY7(K34[$F],"stand victory")
call XU7(K34[$F],1.1,MI4[$F])
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set MO4[i]=""
set i=i+1
set K34[16]=1214409837
set MI4[16]=1747989573
set K64[16]=1848654151
set MH4[16]="ReplaceableTextures\\CommandButtons\\BTNHeroArchMage.blp"
call XY7(K34[16],"stand victory")
call XU7(K34[16],1.2,MI4[16])
call XU7(1211119192,1.5,MI4[16])
call XU7(1211119193,1.5,MI4[16])
call XU7(1211119191,1.5,MI4[16])
set MJ4[i]="Chakra Magic is an amazing support skill that you should cast on allies as often as possible if they have powerful spells."
set MK4[i]="Illuminate can be useful for earning gold or clearing creeps quickly, but channeling the blast can leave you vulnerable. "
set MM4[i]="Mana Leak gives you the offensive: an enemy that moves loses his resources to cast spells, but if he does not, you can punish him with spells and attacks."
set MN4[i]="When in your Spirit Form, use Blinding Light to push enemies aside, and Recall for saving or calling on the assistance of an ally."
set MO4[i]="Keeper of the Light usually needs to stay back in fights and make use of the long range of his spells as a support hero when pushing and defending."
set i=i+1
set K34[17]=1215657064
set MI4[17]=1747989574
set K64[17]=1848654166
set MH4[17]="ReplaceableTextures\\CommandButtons\\BTNFurbolgTracker.blp"
call XY7(K34[17],"attack spell")
call XU7(K34[17],1.2,MI4[17])
set MJ4[i]="Get Fury Swipes and Overpower early. Fury Swipes is a very powerful orb effect on Ursa, replacing it with another is not advised."
set MK4[i]="Ursa is a very effective hero to fight neutral creeps with: Vladimir's Offering is a recommended item choice."
set MM4[i]="Thanks to Enrage, Ursa usually purchases items that increase HP or Strength over Agility and Damage items."
set MN4[i]="It is a good idea to fight the two ancient camps when you need a quick boost in experience and gold. They are marked red in your minimap."
set MO4[i]="Certain items like Kelen's Dagger and Lothar's Edge will help both close the distance on enemies and take them by surprise."
set i=i+1
set K34[18]=1215130471
set MI4[18]=1747989575
set K64[18]=1848656177
set MH4[18]="ReplaceableTextures\\CommandButtons\\BTNOgreMagi.blp"
call XY7(K34[18],"sleep")
call XU7(K34[18],1.4,MI4[18])
set MJ4[i]="Buying a few Clarity Potions, Ring of Basilius or Bottle in the beginning of the game will help you cast a few more spells."
set MK4[i]="Fireblast provides a disable, Ignite provides a slow. Both deal damage, usually making them good skills early."
set MM4[i]="Ogre Magi has a lot of survivability but he does need the ability to use his spells: an Arcane Ring might be the only item you will need all game."
set MN4[i]="Use Bloodlust to help teammates chase and escape enemies and on the hero capable of dealing the most damage before major battles."
set MO4[i]="Focus heroes that need to be shut down quickly with Fireblast: Hopefully they are repeatedly damaged and disabled by the effect of Multicast."
set i=i+1
set K34[19]=1316252014
set MI4[19]=1747989576
set K64[19]=1848656193
set MH4[19]="ReplaceableTextures\\CommandButtons\\BTNHeroTinker.blp"
call XY7(K34[19],"stand 2")
call XU7(K34[19],1,MI4[19])
set MJ4[i]="Laser and Missile give Tinker massive burst damage, so it is usually a good idea to get these two skills before Rearm, your ultimate."
set MK4[i]="Laser is not reduced by magic resistance or armor; you deal the number in the description exactly."
set MM4[i]="You can use the active effects of items indefinitely with Rearm, which makes Boots of Travel a very powerful item for Tinker."
set MN4[i]="March of the Machines can be very useful for killing creeps quickly, its large area of effect makes it useful for pushing and team fights."
set MO4[i]="Level 1 of Rearm is generally enough until much later when you have the mana pool to support levels 2 and 3."
set i=i+1
set K34[20]=1164799603
set MI4[20]=1747989577
set K64[20]=1848656180
set MH4[20]="ReplaceableTextures\\CommandButtons\\BTNFurion.blp"
call XY7(K34[20],"spell")
call XU7(K34[20],1.2,MI4[20])
set MJ4[i]="Get Force of Nature early if you plan on leaving the lane to kill neutral creeps. Start with a Ring of Basilius to provide you with mana and armor."
set MK4[i]="Invest points in Teleportation, it gives you the mobility to be anywhere in the map: Cancel the spell if you change your mind by clicking 'S'."
set MM4[i]="Sprout can be extremely useful offensively and defensively so get at least one point in it. Higher levels increase the duration but also the mana cost."
set MN4[i]="Teleportation shows allies and enemies where you intend to go, so if you want to surprise enemies, teleport where they cannot see."
set MO4[i]="Wrath of Nature is a great farming tool but also a powerful nuke on enemy heroes: Hit other units nearby to deal more damage to the intended target."
set i=i+1
set K34[21]=1332179560
set MI4[21]=1747989578
set K64[21]=1848656179
set MH4[21]="ReplaceableTextures\\CommandButtons\\BTNHellScream.blp"
call XY7(K34[21],"stand victory")
call XU7(K34[21],1,MI4[21])
set MJ4[i]="Get Spirit Lance and Doppelwalk first because Juxtapose is better when your illusions have more health and damage."
set MK4[i]="Beware of the high mana costs of your spells early game, especially for Doppelwalk, which can be an escape mechanism."
set MM4[i]="Keep your opponents guessing by controlling your illusions created by Doppelwalk and Juxtapose."
set MN4[i]="Your illusions are amazing for pushing later on. Focus creeps and heroes first because illusions will not create new ones when attacking buildings."
set MO4[i]="Diffusal Blade and Manta Style are good choices of because they make his images much stronger by adding Agility directly."
set i=i+1
set K34[22]=1432580716
set MI4[22]=1747989579
set K64[22]=1848656183
set MH4[22]="ReplaceableTextures\\CommandButtons\\BTNMountainGiant.blp"
call XY7(K34[22],"spell")
call XU7(K34[22],.5,MI4[22])
set MJ4[i]="Buy items that give you at least 3 Intelligence or 39 mana in the beginning of the game so that you can use both of your spells at level 2."
set MK4[i]="Avalanche and Toss should be the two spells you level first because they make you a force to be reckoned with early game."
set MM4[i]="You can sometimes kill a hero outright by casting Avalanche on him, and then Tossing him on the Avalanche area of effect before the animation ends."
set MN4[i]="To ensure that you Toss your desired target, isolate him by making him the only one in the area of effect. Kelen's Dagger can help you with placement."
set MO4[i]="Tiny deals most of his damage through Avalanche and Toss, so the reduced attack speed from Grow is less important than the bonuses given."
set i=i+1
set K34[23]=1211117643
set MI4[23]=1747989580
set K64[23]=1848656185
set MH4[23]="ReplaceableTextures\\CommandButtons\\BTNGoblinSapper.blp"
call XY7(K34[23],"stand 2")
call XU7(K34[23],1,MI4[23])
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set MO4[i]=""
set i=i+1
set K34[24]=1211117633
set MI4[24]=1747989581
set K64[24]=1848656194
set MH4[24]="ReplaceableTextures\\CommandButtons\\BTNHeroFarseer.blp"
call XY7(K34[24],"spell chain lightning")
call XU7(K34[24],1,MI4[24])
set MJ4[i]="Chen can take control of high level neutral creeps with Holy Persuasion, making him extremely powerful at low levels even without items."
set MK4[i]="Neutrals with special abilities usually are more useful, try to find out what has a disable or slow as this will be much better for attacking heroes with."
set MM4[i]="When preparing to attack from the forest, start with Penitence to slow enemies. Engage enemies from the side or from behind to catch them off guard."
set MN4[i]="Chen excels as a support hero, items that contribute to teammates such as Mekansm usually benefit the team more than damage items."
set MO4[i]="Hand of God is really useful early on for helping allies across the map. Later, it can be used to assist with pushing or defending."
set i=i+1
set K34[25]=1160785973
set MI4[25]=1747989582
set K64[25]=1848656453
set MH4[25]="ReplaceableTextures\\CommandButtons\\BTNHuntress.blp"
call XY7(K34[25],"spell")
call XU7(K34[25],1,MI4[25])
set MJ4[i]="The level of Lucent Beam determines the damage of Eclipse, making it the most important spell to get first. "
set MK4[i]="Moon Glaives can be useful early if you plan to kill neutral creeps. Lifesteal items like Helm of the Dominator can help you survive against neutral creeps."
set MM4[i]="Try to cast Eclipse on enemy heroes when other units are not present to maximize the damage dealt to a single target. "
set MN4[i]="Later on with some attack speed, Lunar Blessing and Moon Glaives provide you with both massive damage and pushing power."
set MO4[i]="You should also consider items that allow you to land Eclipse successfully and increase your carry potential in battles, such as a Black King Bar."
set i=i+1
set K34[26]=1433631084
set MI4[26]=1747989583
set K64[26]=1848656452
set MH4[26]="ReplaceableTextures\\CommandButtons\\BTNRifleman.blp"
call XY7(K34[26],"spell")
call XU7(K34[26],1.1,MI4[26])
set MJ4[i]="Headshot will provide you with bonus damage and a short stun, making it useful for killing creeps and harassing with his incredible attack animation."
set MK4[i]="Sniper usually needs to find a combination of damage, attack speed and survivability that allow him to deal significant damage but survive to do so."
set MM4[i]="Sniper is very fragile so he needs to maintain his range. Getting Take Aim and/or Shrapnel can help provide means of staying out of harm's way."
set MN4[i]="Shrapenl can also be used for slowing opponents, pushing or defending against large waves of creeps."
set MO4[i]="Try to use Assassinate to heavily damage an enemy before the fight even begins to give your team an advantage."
set i=i+1
set K34[27]=1311781174
set MI4[27]=1747989584
set K64[27]=1848656184
set MH4[27]="ReplaceableTextures\\CommandButtons\\BTNForestTroll.blp"
call XY7(K34[27],"stand 3")
call XU7(K34[27],1.25,MI4[27])
call XU7(1311781442,1.25,MI4[27])
call XU7(1311781175,1.25,MI4[27])
call XU7(1311911984,1.25,MI4[27])
call XU7(1311911985,1.25,MI4[27])
set MJ4[i]="Berserker's Rage gives Troll the option of melee combat, which gives him many powerful offensive bonuses at the cost of losing his ranged ability."
set MK4[i]="roll Warlord generally does not have to worry about attack speed thanks to his set of skills, go for damage or survivability items instead."
set MM4[i]="Blind will prevent your opponents from landing all their attacks, making it harder from them to harass you or kill your creeps for gold."
set MN4[i]="Play defensively and fight neutral creeps too. Switch to melee form and it will allow you to have an easier time."
set MO4[i]="In team battles, it is vital that you cast Blind on the enemy hero that deals the most damage as this will greatly reduce their damage output."
set i=i+1
set K34[28]=1332898670
set MI4[28]=1747989815
set K64[28]=1848654132
set MH4[28]="ReplaceableTextures\\CommandButtons\\BTNShadowHunter.blp"
call XY7(K34[28],"stand victory")
call XU7(K34[28],1,MI4[28])
set MJ4[i]="At least one level of Shackles is advised early on for immobilizing opponents. Remember that it is channeling so it can be interrupted or broken by yourself."
set MK4[i]="Rhasta needs survivability and the mana to use his spells: Bracers, Null Talismans, Point Booster are examples of items that will help out a lot."
set MM4[i]="Forked Lightning is your primary nuke and finisher due to its range and ability to hit multiple targets, so it more effective to get it earlier than later."
set MN4[i]="Use Shackles and Voodoo on enemy heroes when casting Mass Serpent Ward. You can even surround an enemy completely with the right timing."
set MO4[i]="Mass Serpent Wards can clear creeps quickly and deal a lot of damage over time to buildings, making them really useful for pushing and defending."
set i=i+1
set K34[29]=1328558406
set MI4[29]=1747993417
set K64[29]=1848658771
set MH4[29]="ReplaceableTextures\\CommandButtons\\BTNWispHero.blp"
call XY7(K34[29],"stand 3")
call XU7(K34[29],1.3,MI4[29])
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set MO4[i]=""
set i=i+1
set K34[30]=1315988077
set MI4[30]=1747989811
set K64[30]=1848656207
set MH4[30]="ReplaceableTextures\\CommandButtons\\BTNPandarenBrewmaster.blp"
call XY7(K34[30],"stand ready")
call XU7(K34[30],1,MI4[30])
set MJ4[i]="Thunder Clap is a great skill early game but you may need to invest in regeneration items such as a Bottle, Magic Stick, Ring of Basilius or Void Stone."
set MK4[i]="Drunken Haze works not only as a slow, but the miss chance reduces the damage severely for enemy heroes."
set MM4[i]="Primal Split is not only for escaping: Once you master your three Pandas, Earth, Storm and Fire, you can use them offensively as well."
set MN4[i]="In Primal Split form, Mangix has two useful disables that can be used against enemies: Storm's Cyclone and Earth's Hurl Boulder."
set MO4[i]="Mangix usually initiates for the team, so survivability items are helpful, investing in a Kelen's Dagger to help land Thunder Clap is often a good idea."
set i=i+1
set K34[31]=1211117616
set MI4[31]=1747989592
set K64[31]=1848656206
set MH4[31]="ReplaceableTextures\\CommandButtons\\BTNCentaurKhan.blp"
call XY7(K34[31],"stand 3")
call XU7(K34[31],1.75,MI4[31])
set MJ4[i]="Return should be leveled if Centaur plans to fight neutral creeps, otherwise Double Edge is more useful in the lane."
set MK4[i]="Thanks to a high strength gain and the bonus strength from your ultimate, Centaur is a great at heading into battle first and receiving damage."
set MM4[i]="A Hood of Defiance can prove to be just as useful as a Vanguard depending on whether the other team has a lot of magical spells."
set MN4[i]="Avoid putting yourself at risk after using Double Edge. You can use it to commit suicide if you are about to die to deny opponents experience and gold."
set MO4[i]="Kelen's Dagger is a great way of initiating on opponents and dealing with his slow casting animation of Stomp."
set i=i+1
set K34[32]=1315007329
set MI4[32]=1747989810
set K64[32]=1848656205
set MH4[32]="ReplaceableTextures\\CommandButtons\\BTNakama.blp"
call XY7(K34[32],"stand var4")
call XU7(K34[32],1.2,MI4[32])
set MJ4[i]="Shuriken Toss, Wind Walk and Track are much more useful than Jinada early on."
set MK4[i]="You're going to need mana regen: Bottle, Ring Of Basillius and Void Stone are examples of good options. "
set MM4[i]="Use Wind Walk cautiously: If you wait until the cooldown is complete before breaking out of invisibility, you can cast it again immediately afterward."
set MN4[i]="Shuriken Toss and Wind Walk deal a lot of damage quickly: Search the map often for low HP heroes to hunt. "
set MO4[i]="Use Track on a nearby enemy hero to allow you and your allies to outrun them. Also cast it on nearly dead heroes for bonus gold."
set i=i+1
set K34[33]=1215063922
set MI4[33]=1747989590
set K64[33]=1848656209
set MH4[33]="ReplaceableTextures\\CommandButtons\\BTNTheCaptain.blp"
call XY7(K34[33],"stand victory")
call XU7(K34[33],1.35,MI4[33])
call XU7(1211117638,1,MI4[33])
call XU7(1211117639,1,MI4[33])
call XU7(1211117637,1,MI4[33])
call WM7(1211117639,$FF,$FF,$C8)
call WM7(1211117638,$FF,$FF,$C8)
call WM7(1211117639,$FF,$C8,$C8)
set MJ4[i]="Breath Fire is a strong nuke and farming ability. However, against difficult opponents, Dragon's Blood is very useful."
set MK4[i]="Dragon Tail is the longest duration level 1 stun in the game. One point is usually sufficient until later on."
set MM4[i]="Thanks to the defensive bonuses on Dragon's Blood, he can often focus on other damage items instead of increasing armor and regeneration."
set MN4[i]="Level 1 of Elder Dragon Form has a special passive called Corrosive Attack, which deals significant damage over time against towers."
set MO4[i]="The ranged splash damage and slow of his Level 3 ultimate makes him extremely powerful; getting to level 16 is very important for DK."
set i=i+1
set K34[34]=1164207469
set MI4[34]=1747989588
set K64[34]=1848656210
set MH4[34]="ReplaceableTextures\\CommandButtons\\BTNHeroDemonHunter.blp"
call XY7(K34[34],"stand channel")
call XU7(K34[34],1,MI4[34])
set MJ4[i]="Blink is very versatile, allowing you to chase, escape and even avoid certain spells. It is definitely worth at least one point in the beginning."
set MK4[i]="You can also use Mana Break to prevent enemy heroes from casting spells on you, but be careful since it forces you to get in melee range to attack."
set MM4[i]="Spell Shield might be useful for reducing magic damage, but it does not prevent you from being disabled or status effects (slow, poison, etc.)."
set MN4[i]="Offensive items without orb effects such as a Battlefury, Monkey King Bar or Butterfly are usually desired over items that would override your Mana Break."
set MO4[i]="Sometimes survivability is just as important as damage, items such as Linken's Sphere or Manta Style offer a good mix of both offense and defense."
set i=i+1
set K34[35]=1315074670
set MI4[35]=1747989813
set K64[35]=1848656204
set MH4[35]="ReplaceableTextures\\CommandButtons\\BTNBansheeRanger.tga"
call XY7(K34[35],"spell")
call XU7(K34[35],1,MI4[35])
set MJ4[i]="Frost Arrows make Drow an excellent chaser early game and allow her to harass opponents safely by manually casting them (clicking 'R' and the target)."
set MK4[i]="An early level of Silence is great for preventing opponents from using multiple spells on you or your allies."
set MM4[i]="Trueshot Aura and Marksmanship provide Traxex with plenty of damage even with just a few Wraith Bands and Power Treads."
set MN4[i]="Lothar's Edge provides damage and an escape mechanism, the latter of which can help Traxex survive."
set MO4[i]="Stay out of danger in major battles, only close in on your enemies when you are chasing and finishing off heroes near the end."
set i=i+1
set K34[36]=1214345830
set MI4[36]=1747989594
set K64[36]=1848656211
set MH4[36]="ReplaceableTextures\\CommandButtons\\BTNArthas.blp"
call XY7(K34[36],"stand victory")
call XU7(K34[36],1.1,MI4[36])
set MJ4[i]="Omniknight is a powerful support hero, items that provide mana such as Arcane Ring help make sure that you can use all your spells."
set MK4[i]="Purification can be used offensively and defensively: The unit you cast it on will deal damage around it, making it a powerful heal and nuke."
set MM4[i]="Degen Aura is a very strong passive slow that is useful both to chase down enemy heroes and help you and your allies escape as well."
set MN4[i]="Repel is used to remove buffs from allies and enemies, and to prevent heroes with spells from being interrupted or damage dealers from being disabled."
set MO4[i]="Guardian Angel makes a team nearly impervious to physical damage and provides 25/sec HP regeneration, use this time wisely to survive or attack."
set i=i+1
set K34[37]=1211117636
set MI4[37]=1747989587
set K64[37]=1848656203
set MH4[37]="ReplaceableTextures\\CommandButtons\\BTNBeastMaster.blp"
call XY7(K34[37],"spell slam")
call XU7(K34[37],1,MI4[37])
set MJ4[i]="Endurance Aura is usually more useful later in the game when your team is fighting together, so get your other skills first."
set MK4[i]="Call of the Wild is very powerful: The boar gives damage and slow, while the hawk can provide vision over runes, neutral creeps and other key locations."
set MM4[i]="Wild Axes are more useful early game and against heroes with less armor. Destroy trees with Wild Axes to surprise your opponents and for escaping."
set MN4[i]="Try casting Wild Axes behind the target to compensate for their movement. You can also manipulate their return path by moving Rexxar."
set MO4[i]="Find opportunities to use Roar whenever it is available. It is useful on heroes who have an escape mechanism or are immune to magic."
set i=i+1
set K34[38]=1160786000
set MI4[38]=1747989586
set K64[38]=1848656202
set MH4[38]="ReplaceableTextures\\CommandButtons\\BTNChimaera.blp"
call XY7(K34[38],"stand 3")
call XU7(K34[38],1,MI4[38])
set MJ4[i]="Dual Breath and Ice Path help to make Jakiro a strong offensive and defensive support hero. "
set MK4[i]="Jakiro can cast his spells immediately by clicking the nearby ground in the desired direction, sometimes this is more effective than clicking on the target."
set MM4[i]="A level of Liquid Fire early on can be useful for deterring physical attacks "
set MN4[i]="Macropyre is a slow but powerful spell, combine it with other spells (yours or a teammate) to make sure the opponent is standing in the area of effect."
set MO4[i]="It is often a good idea to purchase useful support items like Mekansm or Shiva's Guard, two items that also increase his low armor significantly."
set i=i+1
set K34[39]=1311781193
set MI4[39]=1747989812
set K64[39]=1848656201
set MH4[39]="ReplaceableTextures\\CommandButtons\\BTNHeroAlchemist.blp"
call XY7(K34[39],"stand 2")
call XU7(K34[39],1,MI4[39])
call XU7(1311781194,1,MI4[39])
call XU7(1311781192,1,MI4[39])
call XU7(1311781204,1,MI4[39])
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set MO4[i]=""
set i=i+1
set K34[40]=1311781206
set MI4[40]=1747989591
set K64[40]=1848656200
set MH4[40]="ReplaceableTextures\\CommandButtons\\BTNPriestessOfTheMoon.blp"
call XY7(K34[40],"stand ready")
call XU7(K34[40],1,MI4[40])
set MJ4[i]="PotM can be extremely efficient and gank with just a few Wraith Bands, Boots of Speed and a Bottle."
set MK4[i]="Getting one level of Leap is usually sufficient early on until Starfall and Elune's Arrow are fully leveled."
set MM4[i]="Land your Elune's Arrow by coordinating with allies and predicting enemy movements. You can even hit invisible or faraway targets with practice."
set MN4[i]="Starfall hits a second time for half damage to one random enemy within 200 range, get close if you can to deal bonus damage"
set MO4[i]="Moonlight Shadow can be used to initiate or escape but sometimes it can be learned later when PotM can use it without compromising her mana pool."
set i=i+1
set K34[41]=1211117651
set MI4[41]=1747989585
set K64[41]=1848656212
set MH4[41]="ReplaceableTextures\\CommandButtons\\BTNStorm.blp"
call XY7(K34[41],"spell")
call XU7(K34[41],1,MI4[41])
set MJ4[i]="Do not get Overload at level 1 since you do not have any spells to activate its effect with."
set MK4[i]="Choosing which ability to max first can be difficult, but generally at least one point in all three skills is a good idea."
set MM4[i]="You have to wait 1 second after casting Static Remnant before it begins detecting nearby units for its explosion effect."
set MN4[i]="In addition to chasing and escaping, Lightning Ball can be used to dodge many spells with the right timing."
set MO4[i]="An item like Bloodstone is useful on Storm Spirit because the percentage-based mana cost of Lightning Ball makes regeneration an important asset."
set i=i+1
set K34[42]=1211117649
set MI4[42]=1747989593
set K64[42]=1848656199
set MH4[42]="ReplaceableTextures\\CommandButtons\\BTNHeadHunterBerserker.blp"
call XY7(K34[42],"stand alternate 3")
call XU7(K34[42],1.15,MI4[42])
set MJ4[i]="A level of Burning Spears early on is great for harassing enemy heroes. Use it manually by clicking 'R' then the desired target to avoid drawing focus fire."
set MK4[i]="Berserker's Blood makes you stronger as you take damage. The bonuses stop when you have 51% HP, so there is little point in taking additional damage."
set MM4[i]="Life Break deals damage based on the remaining health of the target, making it strongest at the beginning of a fight. "
set MN4[i]="Inner Vitality heals more when you have less than 40% of your life, but avoid making the mistake of casting it too late in battles."
set MO4[i]="Survivability while in low health is important for Huskar: Consider items such as Armlet of Mordiggan, Black King Bar, or Heart of Tarrasque."
set i=i+1
set K34[43]=1160786265
set MI4[43]=1747989816
set K64[43]=1848656198
set MH4[43]="ReplaceableTextures\\CommandButtons\\BTNAssassin.blp"
call XY7(K34[43],"stand victory")
call XU7(K34[43],1.2,MI4[43])
set MJ4[i]="Refraction is a great way of surviving in a lane, just be careful not to get hit by creeps too much."
set MK4[i]="Meld starts cooling down when you click the spell, so you can hit him twice with it if you can predict your enemy's movements."
set MM4[i]="Traps can be used for vision, most effectively in cramped areas like the end of ramps or at the rune powerup spots."
set MN4[i]="You can farm extremely fast by positioning yourself so that the Psi Blades splash on multiple creeps at once."
set MO4[i]="Placing a trap or two before engaging a fight can be a good idea, to cut off possible escape and/or chase routes."
set i=i+1
set K34[44]=1311780930
set MI4[44]=1747989808
set K64[44]=1848656197
set MH4[44]="ReplaceableTextures\\CommandButtons\\BTNFaerieDragon.blp"
call XY7(K34[44],"attack spell")
call XU7(K34[44],1.1,MI4[44])
set MJ4[i]="Illusory Orb and Jaunt are used to travel short distances quickly, but if you wait too long to Jaunt, you will lose the opportunity."
set MK4[i]="Puck is very fragile early game, some Bracers or Null Talismans and a level of Phase Shift can help you survive."
set MM4[i]="Using Phase Shift manually instead of Autocast will prevent stray attacks from triggering it on Autocast. In general you will have better control of its use."
set MN4[i]="Waning Rift deals damage and silences, but forces you to be close enough. Use Illusory Orb or Dream Coil to help you land the spell on enemies."
set MO4[i]="Puck is a great initiator in fights who offers control of the battle with his spells, allowing allies to join the battle and use their spells or attacks safely."
set i=i+1
set K34[45]=1211117652
set MI4[45]=1747989809
set K64[45]=1848656213
set MH4[45]="ReplaceableTextures\\CommandButtons\\BTNClockWerkGoblin.blp"
call XY7(K34[45],"Birth")
call XU7(K34[45],1.5,MI4[45])
set MJ4[i]="You can use Rocket Flare for harassing and killing creeps early on. With the right timing, you can even fire at enemies across the map."
set MK4[i]="Power Cogs can be used to trap an enemy, push them away while draining mana, or as an escape mechanism since Rattletrap destroys Cogs in only 1 hit."
set MM4[i]="Battery Assault adds a lot of damage and the stuns help you with chasing, use it when no other units are nearby for best results."
set MN4[i]="Hookshot's long range and high speed lets you reach enemies from out of sight. Follow up with your other spells quickly so your target cannot escape."
set MO4[i]="Rocket Flare also gives vision where it lands, making it very useful for scouting areas such as rune spots, neutral creeps, the enemy base."
set i=i+1
set K34[46]=1211119187
set MI4[46]=1747990100
set K64[46]=1848657221
set MH4[46]="ReplaceableTextures\\CommandButtons\\BTNProudmoore.blp"
call XY7(K34[46],"stand victory")
call XU7(K34[46],1.1,MI4[46])
set MJ4[i]="Tidebringer is extremely useful early game: Use the bonus damage for killing creeps and the cleave effect to harass opponents at the same time."
set MK4[i]="The bubble animation from Torrent can only be seen by your team so try to use this to your advantage."
set MM4[i]="An ally's assistance or X Marks the Spot is a great way of making sure Torrent and Ghost Ship hit your opponent."
set MN4[i]="Escaping enemy heroes is easy by casting X Marks the Spot on them. It also prevents them from getting away."
set MO4[i]="The Ghost Ship will crash 1000 range from where you stand when you cast it. Keep your distance when you use it."
set i=i+1
set K34[47]=1311786311
set MI4[47]=1747990337
set K64[47]=1848657224
set MH4[47]="ReplaceableTextures\\CommandButtons\\BTNSylvanusWindrunner.blp"
call XY7(K34[47],"stand victory")
call XU7(K34[47],1.2,MI4[47])
set MJ4[i]="Powershot deals significant damage, making it ideal to max first. Be sure not to fire through creeps if you want to deal maximum damage to your target."
set MK4[i]="An early level of Windrunner can provide you with a quick getaway and chasing tool."
set MM4[i]="Shackleshot can either be used on your intended target to bind him to a nearby unit, or to bind the designated target located BEHIND the unit that you fired it at."
set MN4[i]="Focus Fire is also a powerful spell to use on buildings and Roshan."
set MO4[i]="As long as you do not attack another target, the effect of Focus Fire will stay on. Use your spells and active items to help you fire at your target."
set i=i+1
set K34[48]=1160786510
set MI4[48]=1747993411
set K64[48]=1848658766
set MH4[48]="ReplaceableTextures\\CommandButtons\\BTNFlyingMachine.blp"
call XY7(K34[48],"stand 3")
call XU7(K34[48],1.1,MI4[48])
call XU7(1160786511,1.1,MI4[48])
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set MO4[i]=""
set i=i+1
set K34[49]=1160786506
set MI4[49]=1747993412
set K64[49]=1848658770
set MH4[49]="ReplaceableTextures\\CommandButtons\\BTNThrall.blp"
call XY7(K34[49],"stand 3")
call XU7(K34[49],1.1,MI4[49])
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set MO4[i]=""
set i=i+1
set K34[50]=1160786505
set MI4[50]=1747993401
set K64[50]=1848658763
set MH4[50]="ReplaceableTextures\\CommandButtons\\BTNTuskaarBrown.blp"
call XY7(K34[50],"stand 3")
call XU7(K34[50],1.,MI4[50])
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set MO4[i]=""
set i=i+1
set K34[51]=1160786502
set MI4[51]=1747993400
set K64[51]=1848658765
set MH4[51]="ReplaceableTextures\\CommandButtons\\BTNPhoenix.blp"
call XY7(K34[51],"stand 3")
call XU7(K34[51],1.05,MI4[51])
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set MO4[i]=""
set i=i+1
set K34[52]=1211117624
set MI4[52]=1747989589
set K64[52]=1848656195
set MH4[52]="ReplaceableTextures\\CommandButtons\\BTNRazorback.blp"
call XY7(K34[52],"stand")
call XU7(K34[52],1.65,MI4[52])
set MJ4[i]="Rigwarl is a known for punishing heroes that attack him and surviving for long times but he still needs armor, regeneration and hit points."
set MK4[i]="Quill spray doesn't initially deal much damage, but the stacking effect makes it very powerful over time in battles."
set MM4[i]="Sometimes one level of Goo can be enough to slow down an enemy hero early game."
set MN4[i]="Rigwarl needs a fair amount of mana early-game, Ring of Basilius, Magic Stick or Bottle can boost his early offensive power immensely."
set MO4[i]="You can mitigate a lot of damage if you turn your hero at the right times thanks to your passive Bristleback. Play mind games on your opponent."
set i=i+1
set K34[53]=1160786520
set MI4[53]=1747993428
set K64[53]=1848659019
set MH4[53]="ReplaceableTextures\\CommandButtons\\BTNMedivh.blp"
call XY7(K34[53],"stand 3")
call XU7(K34[53],1.15,MI4[53])
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set MO4[i]=""
set i=i+1
set K34[54]=1311788336
set MI4[54]=1747993671
set K64[54]=1848659249
set MH4[54]="ReplaceableTextures\\CommandButtons\\BTNFireBrewmaster.blp"
call XY7(K34[54],"stand 3")
call XU7(K34[54],1,MI4[54])
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set MO4[i]=""
set i=i+1
set K34[55]=1160786507
set MI4[55]=1747993409
set K64[55]=1848658762
set MH4[55]="ReplaceableTextures\\CommandButtons\\BTNGarithos.blp"
call XY7(K34[55],"stand 3")
call XU7(K34[55],1.3,MI4[55])
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set MO4[i]=""
set i=i+1
set K34[56]=1211122767
set MI4[56]=1747993672
set K64[56]=1848659254
set MH4[56]="ReplaceableTextures\\CommandButtons\\BTNDragonHawk.blp"
call XY7(K34[56],"stand 3")
call XU7(K34[56],1.1,MI4[56])
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set MO4[i]=""
set i=i+1
set K34[57]=1160786738
set MI4[57]=1747993922
set K64[57]=1848659269
set MH4[57]="ReplaceableTextures\\CommandButtons\\BTNJunkGolem.blp"
call XY7(K34[57],"stand 3")
call XU7(K34[57],1,MI4[57])
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set MO4[i]=""
set i=i+1
set K34[58]=1311788373
set MI4[58]=1747993944
set K64[58]=1848659287
set MH4[58]="ReplaceableTextures\\CommandButtons\\BTNEarthBrewmaster.blp"
call XY7(K34[58],"stand 3")
call XU7(K34[58],1,MI4[58])
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set MO4[i]=""
set i=i+1
set K34[59]=1311788356
set MI4[59]=1747993943
set K64[59]=1848659271
set MH4[59]="ReplaceableTextures\\CommandButtons\\BTNPriest.blp"
call XY7(K34[59],"stand victory")
call XU7(K34[59],1.25,MI4[59])
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set MO4[i]=""
set i=i+1
set K14=59
set i=60
set K04=60
set K34[60]=1165451634
set MI4[60]=1747989834
set K64[60]=1848656437
set MH4[60]="ReplaceableTextures\\CommandButtons\\BTNHeroWarden.blp"
call XY7(K34[60],"spell slam")
call XU7(K34[60],1,MI4[60])
set MJ4[i]="Stifling Dagger is used for creep-killing and slowing opponents; prevent enemies from escaping by using it with Blink Strike."
set MK4[i]="Try to Blink Strike to a nearby allied or enemy unit to make a quick escape when caught in a defensive situation. "
set MM4[i]="Be cautious when entering battles with Blink Strike, you could be caught outnumbered or disabled without your escape mechanism."
set MN4[i]="Blur can sometimes allow you to surprise opponents if they aren't paying attention."
set MO4[i]="Items like Battlefury are useful, but getting a Black King Bar or a Satanic afterward will help you survive long enough to deal damage."
set i=i+1
set K34[61]=1211117654
set MI4[61]=1747989835
set K64[61]=1848656438
set MH4[61]="ReplaceableTextures\\CommandButtons\\BTNNagaSeaWitch.blp"
call XY7(K34[61],"stand ready")
call XU7(K34[61],1,MI4[61])
call XU7(1211119684,1,MI4[61])
call XU7(1211119683,1,MI4[61])
call XU7(1211119668,1,MI4[61])
call XU7(1211119682,1,MI4[61])
set MJ4[i]="Mystic Snake is a smart choice to have early game: Its damage and mana drain makes it great for harassing and offsetting its own mana cost."
set MK4[i]="Mana Shield will increase your survivability drastically. Use it wisely or it can also leave you with no mana for your other spells."
set MM4[i]="Using Split Shot allows you to attack multiple units, but the extra arrows from Split Shot do not gain the properties of orb effects."
set MN4[i]="Stone Gaze is an ultimate that is used to slow opponents and remove their buffs, making it easy to escape or attack the purged enemies."
set MO4[i]="Items that increase statistics and regeneration like Linkens Sphere will always be a good choice because of Mana Shield."
set i=i+1
set K34[62]=1432646245
set MI4[62]=1747989836
set K64[62]=1848656439
set MH4[62]="ReplaceableTextures\\CommandButtons\\BTNTichondrius.blp"
call XY7(K34[62],"spell slam")
call XU7(K34[62],1,MI4[62])
set MJ4[i]="Night Stalker may be passive during the day, but at night his spells make him much more powerful and great for hunting heroes down."
set MK4[i]="Void is your primary source of damage early game and can be used to interrupt spells and teleports with its mini-stun."
set MM4[i]="While Hunter in the Night does nothing during the day, get it so that during nighttime it will give you massive movement and attack speed."
set MN4[i]="Use Crippling Fear when you are hunting heroes so that they cannot disable or slow you while you are chasing them."
set MO4[i]="Since Darkness will pause time when activated, casting it at night whenever it is on cooldown will extend the total nighttime."
set i=i+1
set K34[63]=1313026096
set MI4[63]=1747989837
set K64[63]=1848656688
set MH4[63]="ReplaceableTextures\\CommandButtons\\BTNSkeletonArcher.tga"
call XY7(K34[63],"stand victory")
call XU7(K34[63],1.8,MI4[63])
call WM7(K34[63],100,125,100)
set MJ4[i]="Skeleton King is a hero who is known for his ability to reincarnate if focused upon and dealing a lot of damage if he is ignored by opponents. "
set MK4[i]="Hellfire Blast is a great spell for the early laning phase and a few levels of Attribute Bonus can give you stat points for additional stuns."
set MM4[i]="Critical Strike is generally preferred over Vampiric Aura because its lifesteal is not very effective earlier when Leoric needs more damage."
set MN4[i]="Make sure you have enough mana for Hellfire Blasts and especially Reincarnation. Buying a Magic Stick and/or a Bottle can pay off nicely."
set MO4[i]="Get cheaper damage items like Armlet of Mordiggan and Desolator. A Black King Bar will allow you to dish out damage without being disabled."
set i=i+1
set K34[64]=1430467634
set MI4[64]=1747989838
set K64[64]=1848656470
set MH4[64]="ReplaceableTextures\\CommandButtons\\BTNDoomGuard.blp"
call XY7(K34[64],"stand victory")
call XU7(K34[64],1.1,MI4[64])
set MJ4[i]="Lucifer can obtain gold very quickly thanks to Devour, so getting regeneration items like Perseverance will help him to cast spells and survive in the lane."
set MK4[i]="Devour deals 20 damage per second, so consume creeps with low HP remaining so you can finish digesting the enemy quickly."
set MM4[i]="Use the command -iObsScoreInt1 to find your opponents' level for potential LVL? Death targets. Its mini-stun will also interrupt channeling spells and teleports."
set MN4[i]="Doom is usually used in conjunction with LVL? Death for killing enemy heroes; you can also use it on heroes to silence their spells."
set MO4[i]="When chasing or escaping with Scorched Earth, cast it in front of you so that you will experience the movement speed bonuses for a longer period of time."
set i=i+1
set K34[65]=1429221424
set MI4[65]=1747989839
set K64[65]=1848656469
set MH4[65]="ReplaceableTextures\\CommandButtons\\BTNHeroCryptLord.tga"
call XY7(K34[65],"spell throw")
call XU7(K34[65],.8,MI4[65])
set MJ4[i]="Effective use of Impale and Mana Burn early game requires you to purchase some Null Talismans or Bracers and Bottle."
set MK4[i]="Mana Burn is a devastating spell to have in the lane, force opponents to play defensively by preventing them from casting spells."
set MM4[i]="Unlike other Agility heroes, Anub'arak is a caster. Getting items like Dagon can be more useful than purchasing damage items."
set MN4[i]="Vendetta is a good initiating spell for surprising opponents. Cast it far away so that they cannot hear its sound effect upon activation."
set MO4[i]="Be careful when using Vendetta against multiple opponents and going near towers where they can see you while you are invisible."
set i=i+1
set K34[66]=1430468913
set MI4[66]=1747989840
set K64[66]=1848656689
set MH4[66]="ReplaceableTextures\\CommandButtons\\BTNNagaMyrmidon.tga"
call XY7(K34[66],"spell")
call XU7(K34[66],1,MI4[66])
call WM7(K34[66],$AF,75,$C8)
set MJ4[i]="Slithereen Crush requires good positioning, so do your best to stand next to the hero you are trying to stun."
set MK4[i]="Sprint is a great spell for both chasing and escaping but be careful when using it because you will take bonus damage."
set MM4[i]="In addition to lowering armor, Amplify Damage provides vision of enemies, even heroes that have the ability to become invisible."
set MN4[i]="Bash is usually more effective later in the game when you have more items like Armlet of Mordiggan."
set MO4[i]="Slardar's role in battles is to initiate with Slithereen Crush and focus an enemy with Bash and Amplify Damage. Pick off escapees with Sprint."
set i=i+1
set K34[67]=1430466609
set MI4[67]=1747989841
set K64[67]=1848656690
set MH4[67]="ReplaceableTextures\\CommandButtons\\BTNBlueDemoness.tga"
call XY7(K34[67],"spell slam")
call XU7(K34[67],1.3,MI4[67])
set MJ4[i]="Blink provides you with an escape mechanism and spell dodge but on higher levels it becomes a powerful chasing tool as well."
set MK4[i]="Scream of Pain is used for killing creeps and harassing opponents, making it more useful than Shadow Strike early game."
set MM4[i]="Try to hit as many targets as possible with Sonic Wave by targeting the ground instead of on an enemy hero directly."
set MN4[i]="Shadow Strike does decent damage but its primary use is for the slow it provides for chasing and outrunning opponents."
set MO4[i]="Her spell reliance, mobility and survivability allows her to buy expensive Intelligence items such as a Guinsoo's Scythe of Vyse."
set i=i+1
set K34[68]=1160785972
set MI4[68]=1747989842
set K64[68]=1848656471
set MH4[68]="ReplaceableTextures\\CommandButtons\\BTNSkeletonMage.blp"
call XY7(K34[68],"stand victory")
call XU7(K34[68],1,MI4[68])
set MJ4[i]="Searing Arrows provide damage for last hitting creeps and harassing enemy heroes by using it manually by clicking 'R' followed by the designated target."
set MK4[i]="Wind Walk is commonly used for chasing and escaping but the invisibility and movement speed can help you avoid specific spells with the right timing."
set MM4[i]="Cast Death Pact on enemy or neutral creeps instead of allied units whenever possible because it will give you the gold for killing the unit."
set MN4[i]="Regeneration items like Orchid Malevolence or a Linkens Sphere will allow liberal use of his abilities in battle and help him against spellcasters and nukers."
set MO4[i]="Strafe is usually gotten later, but combined with Searing Arrows, Clinkz can deal a lot of damage quickly, powerful against enemy heroes and buildings."
set i=i+1
set K34[69]=1162032181
set MI4[69]=1747989843
set K64[69]=1848656467
set MH4[69]="ReplaceableTextures\\CommandButtons\\BTNFacelessOne.blp"
call XY7(K34[69],"spell slam")
call XU7(K34[69],1.3,MI4[69])
call WM7(K34[69],0,$FF,$96)
set MJ4[i]="Time Walk is your escaping and chasing skill, but it will allow you to avoid spells and damage since you are invulnerable during the animation."
set MK4[i]="Get Backtrack early game if you need to play defensively, while Time Lock will allow you to be a little more aggressive."
set MM4[i]="Since Darkterror is so fragile, enter battles by using Time Walk and then cast Chronosphere to prevent yourself from being disabled or killed otherwise."
set MN4[i]="Chronosphere affects all units that are not controlled by you, including both allies and enemies. Avoid hitting teammates or it could cost them their lives."
set MO4[i]="Items such as Power Treads and Butterfly will give both damage and attack speed, which is useful if Void wants to repetitively stun with Time Lock."
set i=i+1
set K34[70]=1162032951
set MI4[70]=1747989844
set K64[70]=1848656466
set MH4[70]="ReplaceableTextures\\CommandButtons\\BTNNetherDragon.blp"
call XY7(K34[70],"spell slam")
call XU7(K34[70],1.2,MI4[70])
call WM7(K34[70],75,$FF,25)
set MJ4[i]="Poison Attack allows you to harass an opponent and permanently chase them thanks to a 0 cooldown starting at level 3."
set MK4[i]="Prevent creeps and towers from attacking you by casting Poison Attack manually by clicking 'C' and then the designated target."
set MM4[i]="Neurotoxin will add bonus damage, useful early for getting the last hit on creeps and also for dealing damage to heroes as well."
set MN4[i]="Early HP and movement speed items like Phase Boots or a Point/Vitality Booster can really make a difference."
set MO4[i]="Sometimes it is wise to invest in a Lothar's Edge or Kelen's Dagger to provide you with the ability to get in and out of combat safely."
set i=i+1
set K34[71]=1160785970
set MI4[71]=1747989845
set K64[71]=1848656473
set MH4[71]="ReplaceableTextures\\CommandButtons\\BTNRevenant.blp"
call XY7(K34[71],"spell")
call XU7(K34[71],1,MI4[71])
set MJ4[i]="Use your attack range to help gauge how far opponents need to be for Plasma Field to deal the most damage."
set MK4[i]="Unstable Current will slow opponents who cast spells on you and could be useful to help prevent yourself from being killed."
set MM4[i]="Static Link is powerful if you can stay within the range of opponents - getting Unstable Current can sometimes help with that."
set MN4[i]="Storm Seeker strikes the target with the lowest health, so use it after creeps have died or when chasing a solitary target."
set MO4[i]="Consider increasing your HP along with damage when purchasing items."
set i=i+1
set K34[72]=1429221443
set MI4[72]=1747989846
set K64[72]=1848656465
set MH4[72]="ReplaceableTextures\\CommandButtons\\BTNGhoul.blp"
call XY7(K34[72],"victory")
call XU7(K34[72],1.5,MI4[72])
call WM7(K34[72],100,100,100)
set MJ4[i]="Open Wounds is a powerful slow that nearly stops enemies in their tracks; it also lets you and your allies heal for attacking that unit.Open Wounds is a powerful slow that nearly stops enemies in their tracks; it also lets you and your allies heal for attacking that unit."
set MK4[i]="Feast deals percentage-based damage, which is useful against heroes with high HP and lets Naix fight neutral creeps with ease."
set MM4[i]="Rage can be used to avoid spells and to prevent opponents from disabling you while you are attacking them or trying to escape from them."
set MN4[i]="Infest can be used for escaping, surprising your opponents, to neutral, or to just gain significant health quickly when necessary."
set MO4[i]="Thanks to your physical damage and ability to steal life, Armlet of Mordiggan or Desolator are both solid choices for high-tier items."
set i=i+1
set K34[73]=1211117640
set MI4[73]=1747989847
set K64[73]=1848656468
set MH4[73]="ReplaceableTextures\\CommandButtons\\BTNPugna.BLP"
call XY7(K34[73],"stand ready")
call XU7(K34[73],1,MI4[73])
set MJ4[i]="Nether Blast gives you an incredible skill for killing creeps, harassing heroes and pushing. Use it to score the killing blow to a tower."
set MK4[i]="Decrepify can be used on opponents either to increase spell damage from you and your allies or to prevent them from attacking."
set MM4[i]="Nether Ward will drain mana and punish opponents for using spells. Just remember to cast it where opponents cannot destroy it easily."
set MN4[i]="Aghanim's Scepter, Linkens Sphere and Bloodstone are examples of items that offer survivability while improving his spellcasting abilities."
set MO4[i]="Life Drain deals a lot of damage unless opponents disable you or run away. With an Aghanim's Scepter, its cooldown becomes 0."
set i=i+1
set K34[74]=1332109682
set MI4[74]=1747989848
set K64[74]=1848656464
set MH4[74]="ReplaceableTextures\\CommandButtons\\BTNSeaGiantGreen.blp"
call XY7(K34[74],"attack slam")
call XU7(K34[74],1,MI4[74])
set MJ4[i]="Be sure to attack enemies slowed by Gush, the armor reduction means that your hits will deal more damage than normal."
set MK4[i]="Anchor Smash is an offensive damage spell that lets you hurt multiple units, good for killing neutral creeps and useful in team battles."
set MM4[i]="Kraken Shell gives you some protection against physical damage as well as a debuff removal against certain spells."
set MN4[i]="In fights, Tidehunter should be in the middle of the action drawing focus fire and dealing damage because of his skill set and high survivability."
set MO4[i]="Ravage has a large area of effect but Kelen's Dagger will allow you to initiate without being disabled and use it in an optimal spot."
set i=i+1
set K34[75]=1332963428
set MI4[75]=1747989849
set K64[75]=1848656463
set MH4[75]="ReplaceableTextures\\CommandButtons\\BTNVoidWalker.blp"
call XY7(K34[75],"spell")
call XU7(K34[75],1.5,MI4[75])
call WM7(K34[75],$96,0,$96)
set MJ4[i]="High costs and cooldowns give Atropos limited ability use: Cast spells intelligently and get items like Null Talismans and/or Magic Stick for your mana pool."
set MK4[i]="Brain Sap is a powerful nuke and heal and deals exact unreduced damage so get it early and always try to use it on enemy heroes when using the spell."
set MM4[i]="Use Nightmare to help teammates to aim their spells and remove an opponent from battles temporarily while you fight their allies."
set MN4[i]="Enfeeble is usually a skill to get after Brain Sap and Nightmare to use on enemy heroes with high damage to reduce their damage capabilities severely."
set MO4[i]="Fiend's Grip will work on Magic Immune units such as those under the active effect of Black King Bar, holding them in place but dealing no damage."
set i=i+1
set K34[76]=1429221445
set MI4[76]=1747989850
set K64[76]=1848656440
set MH4[76]="ReplaceableTextures\\CommandButtons\\BTNGhostOfKelThuzad.blp"
call XY7(K34[76],"stand victory")
call XU7(K34[76],1.3,MI4[76])
set MJ4[i]="Death Pulse lets you kill creeps and harass heroes simultaneously, great for pushing and healing allied units because of its low cooldown."
set MK4[i]="Sadist will provide you with some early regeneration for killing creeps, while Heartstopper Aura becomes effective as the game goes on."
set MM4[i]="Reaper's Scythe is known for its ability to kill heroes outright, allowing you to bring down even high-HP Strength heroes with ease."
set MN4[i]="Your ultimate can also be used to stun opponents in certain situations, such as interrupting channeling spells and teleports."
set MO4[i]="Items like Bloodstone or Heart of Tarrasque allow you to survive long enough in team battles to make your spells more effective."
set i=i+1
set K34[77]=1429221446
set MI4[77]=1747990064
set K64[77]=1848656693
set MH4[77]="ReplaceableTextures\\CommandButtons\\BTNAbomination.blp"
call XY7(K34[77],"stand 3")
call XU7(K34[77],1.,MI4[77])
set MJ4[i]="Pudge can known for his ability to isolate enemies with Meat Hook and using Rot and Dismember afterward, killing them outright. "
set MK4[i]="Early regeneration and movement speed items such as Bottle and Phase Boots help provide Pudge with the means to cast spells and chase his opponents."
set MM4[i]="Use Meat Hook from a location where you are not obstructed by any allied or enemy units other than your target to ensure a better chance of landing it."
set MN4[i]="A Hood of Defiance will improve your magic resistance to reduce damage from using Rot and getting hit by spells; The massive regeneration is also good."
set MO4[i]="Use your spells defensively: Rot can be used to commit suicide if necessary and Meat Hook can be used to rescue an ally from one or more enemies."
set i=i+1
set K34[78]=1328558154
set MI4[78]=1747990065
set K64[78]=1848656691
set MH4[78]="ReplaceableTextures\\CommandButtons\\BTNSpiritWalker.blp"
call XY7(K34[78],"stand ready")
call XU7(K34[78],1.2,MI4[78])
set MJ4[i]="Empowering Haste is a smart skill to level first, it gives Barathrum movement speed and significant damage for killing creeps and heroes."
set MK4[i]="A level of Greater Bash early game can be useful as an extra disable, since the 17% chance is the same for all levels.A level of Greater Bash early game can be useful as an extra disable, since the 17% chance is the same for all levels."
set MM4[i]="Get Strength Power Treads because the attack and movement speed benefits your other skills and the boost in HP helps you survive."
set MN4[i]="Charge of Darkness gives Barathrum spell immunity after 12 seconds and provides vision of the target for you and your allies."
set MO4[i]="Nether Strike puts you from the opposite side of where you were facing, push opponents backwards and into your allies."
set i=i+1
set K34[79]=1432510828
set MI4[79]=1747990066
set K64[79]=1848656472
set MH4[79]="ReplaceableTextures\\CommandButtons\\BTNNerubianQueen.blp"
call XY7(K34[79],"attack")
call XU7(K34[79],1.,MI4[79])
call WM7(K34[79],$FF,$C8,$C8)
set MJ4[i]="Take care of Weaver's HP/damage problems with Bracers or Wraith Bands and get regeneration so he can use his spells freely."
set MK4[i]="An early level of Watchers can be used to provide vision over the rune powerups. Patrol them to increase their area of detection."
set MM4[i]="Shukuchi is used for harassing and chasing opponents offensively, and escaping and avoiding certain projectile spells defensively."
set MN4[i]="If your Geminate Attack is not working, make sure that you input an attack command ('A' or right-click) and are not simply auto-attacking."
set MO4[i]="Use Time Lapse after taking a lot of recent damage to heal yourself, allowing you to pull off some dangerous moves like diving into towers."
set i=i+1
set K34[80]=1315334514
set MI4[80]=1747990067
set K64[80]=1848656462
set MH4[80]="ReplaceableTextures\\CommandButtons\\BTNShade.blp"
call XY7(K34[80],"stand channel")
call XU7(K34[80],1.15,MI4[80])
call WM7(K34[80],0,0,0)
set MJ4[i]="Necromastery is important because of its massive damage gain and because your ultimate deals damage based on the number of souls."
set MK4[i]="Shadow Raze gives you three powerful nuke spells that should be maxed out first. Gauge the distance correctly and hit multiple times."
set MM4[i]="Requiem of Souls deals more damage the closer you are: Placement items like Lothar's Edge and Kelen's Dagger can help you land it."
set MN4[i]="After maxing your other two spells, Presence of the Dark Lord will be useful by then, good for pushing and dealing more physical damage."
set MO4[i]="If you die, remember to fill up on souls again before major fights when you respawn or you will be much less effective in battles."
set i=i+1
set K34[81]=1429221451
set MI4[81]=1747990068
set K64[81]=1848656692
set MH4[81]="ReplaceableTextures\\CommandButtons\\BTNArachnathidGreen.blp"
call XY7(K34[81],"attack 3")
call XU7(K34[81],1,MI4[81])
set MJ4[i]="Burrowstrike is both versatile and powerful: It deals damage, stuns and provides you with a useful escape or chasing mechanism."
set MK4[i]="Using Sandstorm at the right time will dodge certain projectile spells and can protect you temporarily if it is necessary."
set MM4[i]="Getting Kelen's Dagger will give him increased mobility and reach, and also the ability to Blink into battle right after channeling Epicenter."
set MN4[i]="While you cannot move while Epicenter is channeling, once the pulses begin you can freely move around (mostly to chase your opponent)."
set MO4[i]="Caustic Finale might be an orb effect but it is extremely useful for killing multiple units quickly for fighting neutrals, pushing and defending."
set i=i+1
set K34[82]=1332766568
set MI4[82]=1747990069
set K64[82]=1848656461
set MH4[82]="ReplaceableTextures\\CommandButtons\\BTNChaosGrom.blp"
call XY7(K34[82],"stand victory")
call XU7(K34[82],1,MI4[82])
set MJ4[i]="Counter Helix gives Axe the flexibility to both lane and jungle. A Stout Shield will help reduce the damage from taking attacks in order to activate Helix."
set MK4[i]="A Vanguard or a Hood of Defiance offers survivability and regeneration, which are usually more useful to Axe than increasing his attack speed or damage."
set MM4[i]="Berserker's Call is used to initiate fights and draw focus fire. Using it when there are more enemy units increases the chance of activating Counter Helix."
set MN4[i]="Monitor your opponent's HP for the perfect Culling Blade opportunity to finish them off. However, if your enemy has too much HP, it will hardly do anything."
set MO4[i]="Kelen's Dagger and/or Phase Boots can help you enter the fight first and get close enough for a Berserker's Call."
set i=i+1
set K34[83]=1215722344
set MI4[83]=1747990070
set K64[83]=1848656474
set MH4[83]="ReplaceableTextures\\CommandButtons\\BTNShaman.blp"
call XY7(K34[83],"stand victory")
call XU7(K34[83],1.25,MI4[83])
call WM7(K34[83],$FA,$96,$96)
set MJ4[i]="Getting Blood Bath will allow you to take a few hits as you are killing creeps because you will recover your health immediately afterwards."
set MK4[i]="An early level of Bloodrage can be useful for silencing enemies temporarily and for dealing a little bit of damage."
set MM4[i]="Phase Boots and HP can be just as useful as damage items because they increase his survivability for chasing enemies and other longer battles."
set MN4[i]="Use Rupture when your enemy has to either run away or to prevent them from moving, such as when an ally is about to use a powerful spell."
set MO4[i]="Both allies and enemies gain the massive damage increase and are silenced from Bloodrage, which can be disastrous if used incorrectly."
set i=i+1
set K34[84]=1432642913
set MI4[84]=1747990071
set K64[84]=1848656460
set MH4[84]="ReplaceableTextures\\CommandButtons\\BTNHeroDeathKnight.blp"
call XY7(K34[84],"stand ready")
call XU7(K34[84],1,MI4[84])
set MJ4[i]="Abbadon's spells can save allies while dealing damage, so support and regeneration items like Vladmir's Offering can be more useful than damage items."
set MK4[i]="Death Coil can be used both as a nuke and a heal, just remember that it deals damage to you unless you are using Aphotic Shield or Borrowed Time."
set MM4[i]="Aphotic Shield prevents damage but can also be used to remove certain debuffs, such as removing the stun duration effect on an ally."
set MN4[i]="Frostmourne is usually gotten later but it is very useful for chasing and helping your allies outrun your opponents."
set MO4[i]="Borrowed Time can be cast manually as well. If you know you are going to receive a lot of damage sometimes it can be wiser to use it then."
set i=i+1
set K34[85]=1160786242
set MI4[85]=1747990072
set K64[85]=1848656441
set MH4[85]="ReplaceableTextures\\CommandButtons\\BTNvengeanceincarnate.blp"
call XY7(K34[85],"stand ready")
call XU7(K34[85],.8,MI4[85])
set MJ4[i]="Spectral Dagger is your utility spell. You can use it for chasing people down, scouting dangerous areas and escaping. "
set MK4[i]="You also walk through units, trees, even cliffs while you are walking on Spectral Dagger's black path, making it very handy when used properly."
set MM4[i]="Desolate is great for dealing target to isolated targets but Dispersion helps you to survive in the lane: Chose whatever combination suits you best."
set MN4[i]="Haunt lets you jump into a fight directly from anywhere in the map; just make sure that you pay attention to the actions of your team."
set MO4[i]="Getting HP will allow you to withstand and dish out more Dispersion damage, which is extremely powerful in team fights."
set i=i+1
set K34[86]=1160786241
set MI4[86]=1747990073
set K64[86]=1848656459
set MH4[86]="ReplaceableTextures\\CommandButtons\\BTNWitchDoctor.blp"
call XY7(K34[86],"stand victory")
call XU7(K34[86],1.25,MI4[86])
set MJ4[i]="Paralyzing Cask is your initiating spell for your other skills and can effectively keep two nearby units stun-locked at higher levels."
set MK4[i]="Maledict drastically reduces the damage needed to kill opponents and is an important spell to land in every fight."
set MM4[i]="An early level of Voodoo Restoration can provide a relatively cheap heal if you are forced to play defensively."
set MN4[i]="Damaging your opponent immediately after using Maledict is wise because it will deal more bonus damage overall at the 3 ticks."
set MO4[i]="Death Ward is a powerful channeling spell if not interrupted. A Black King Bar will help to prevent enemies from disabling you."
set i=i+1
set K34[87]=1429221456
set MI4[87]=1747990081
set K64[87]=1848656449
set MH4[87]="ReplaceableTextures\\CommandButtons\\BTNDestroyer.blp"
call XY7(K34[87],"stand alternate 2")
call XU7(K34[87],.85,MI4[87])
set MJ4[i]="Getting Intelligence and mana items is extremely important for Harbringer as the power of Arcane Orb and Sanity's Eclipse rely on this."
set MK4[i]="Use Astral Imprisonment to control your opponents' mana, for escaping/chasing, or on yourself and allies to avoid spells."
set MM4[i]="Cast Arcane Orb manually early on because you will have a greater chance of activating Essence Aura to use it endlessly."
set MN4[i]="Guinsoo's Scythe of Vyse is a great choice because it offers Intelligence, balanced stats and provides Harbringer with a powerful disable."
set MO4[i]="Use Sanity's Eclipse early in fights so that you drain casters with high Intelligence of their mana and cripple their ability to cast spells."
set i=i+1
set K34[88]=1160786243
set MI4[88]=1747990083
set K64[88]=1848656450
set MH4[88]="ReplaceableTextures\\CommandButtons\\BTNGuldan.blp"
call XY7(K34[88],"spell")
call XU7(K34[88],1.5,MI4[88])
set MJ4[i]="Shadow Word is either a heal or damage over time, definitely the most powerful early game spell to have."
set MK4[i]="The affordable Mekansm is a good support item for Warlock, who is not a hero who is reliant on gold and items to be effective."
set MM4[i]="Rain of Chaos creates a powerful Infernal that can take on heroes and is also great for killing creeps and pushing buildings."
set MN4[i]="Fatal Bonds can deal huge damage if you and your teammates have other area of effect (AoE) spells that would hurt multiple linked units."
set MO4[i]="The stun when using Rain of Chaos along with its huge casting range (1200) is great for interrupting spells and initiating battles."
set i=i+1
set K34[89]=1211117641
set MI4[89]=1747990084
set K64[89]=1848656458
set MH4[89]="ReplaceableTextures\\CommandButtons\\BTNKoboldGeomancer.blp"
call XY7(K34[89],"spell")
call XU7(K34[89],1.4,MI4[89])
call XU7(1211117642,1.4,MI4[89])
set MJ4[i]="Vladmir's Offering and/or Mekansm provides valuable auras and useful heals that can help support your team and keep your Meepos alive."
set MK4[i]="Poof is both a teleport and damage spell and is great against neutrals. Poof to yourself to deal double the damage (from departure and arrival).Poof is both a teleport and damage spell and is great against neutrals. Poof to yourself to deal double the damage (from departure and arrival)."
set MM4[i]="Geomancer is an advanced hero: Be sure to monitor their individual health because if one dies, they all will."
set MN4[i]="Strength Power Treads are suggested since clones will receive all of the Strength from footwear along with a 2.5 bonus (12.5 total)."
set MO4[i]="Time Earthbind with each of your clones. With 4 Meepos and Level 4 Earthbind, you can almost permanently immobilize them."
set i=i+1
set K34[90]=1311781207
set MI4[90]=1747990085
set K64[90]=1848656457
set MH4[90]="ReplaceableTextures\\CommandButtons\\BTNDarkTrollShadowPriest.blp"
call XY7(K34[90],"spell")
call XU7(K34[90],1.2,MI4[90])
set MJ4[i]="An early level of both Shadow Wave and Shallow Grave provides a lot of support before getting Poison Touch to level 3 for its added stun."
set MK4[i]="Try to use Shadow Wave to heal and damage opponents at the same time. Surround an enemy with multiple allied units for more damage."
set MM4[i]="In addition to slowing and damaging opponents, Poison Touch will allow you to interrupt channeling spells and teleports"
set MN4[i]="Dazzle generally does not need many items and can sometimes focus on increasing his spell use with regeneration and support items like Mekansm."
set MO4[i]="Weave is a powerful spell, try to hit both allies and enemies with it, and it can also be used to provide vision before major battles occur."
set i=i+1
set K34[91]=1311780946
set MI4[91]=1747990086
set K64[91]=1848656451
set MH4[91]="ReplaceableTextures\\CommandButtons\\BTNPitLord.blp"
call XY7(K34[91],"stand channel")
call XU7(K34[91],.95,MI4[91])
set MJ4[i]="Firestorm will be your main ability for killing creeps but it can deal a lot of damage to heroes if you combine it with disables or slows."
set MK4[i]="The Pit of Malice is a useful disable that lasts for 10 seconds so it will both ensnare opponents and deter opponents from entering the circle."
set MM4[i]="Expulsion is usually used after some creeps have died so the spell lasts longer and will deal damage and mini-stun enemies."
set MN4[i]="Pit Lord is played more as a caster, increase his team presence and spell use by obtaining expensive Intelligence items like Shiva's Guard."
set MO4[i]="Dark Rift is a great spell for transporting multiple allies to surprise opponents, and more importantly to defend and attack the base."
set i=i+1
set K34[92]=1211117650
set MI4[92]=1747990087
set K64[92]=1848656456
set MH4[92]="ReplaceableTextures\\CommandButtons\\BTNZombie.blp"
call XY7(K34[92],"stand")
call XU7(K34[92],2,MI4[92])
call XU7(1211119433,1.3,MI4[92])
set MJ4[i]="Decay is used to deal damage and make opponents more vulnerable, while increasing the survivability of Dirge temporarily."
set MK4[i]="Make sure Dirge is a presence who can cast his spells in fights by buying regeneration items like Vladmir's Offering and Void Stone."
set MM4[i]="Soul Rip is a powerful heal or nuke but remember that it will have almost no effect without nearby units. Cast it in crowds."
set MN4[i]="Use Tombstone when engaging the enemy because the zombies have a slowing capability and may also help block your opponents."
set MO4[i]="Tombstone Zombies become extremely powerful when your opponents have low health and attack and move much faster."
set i=i+1
set K34[93]=1211117646
set MI4[93]=1747990088
set K64[93]=1848656455
set MH4[93]="ReplaceableTextures\\CommandButtons\\BTNDranaiMage.blp"
call XY7(K34[93],"spell")
call XU7(K34[93],1.15,MI4[93])
set MJ4[i]="Ion shell is great for killing creeps and dealing damage to heroes, but it will not damage an enemy target if you cast it on them directly."
set MK4[i]="A level of Surge early game can help you and allies escape and chase enemies, and works nicely to help you close in on opponents with Ion Shell."
set MM4[i]="Vacuum is an extremely powerful skill that can be used for initiating and combining with other spells. It can also interrupt channeling and teleport spells."
set MN4[i]="Make sure they are standing closer to the edge of your targeting circle when casting Vacuum to pull your opponents further."
set MO4[i]="Use Wall of Replica where multiple heroes will touch it; try using it with Vacuum. Get your allies to run through the wall too."
set i=i+1
set K34[94]=1211117653
set MI4[94]=1747990082
set K64[94]=1848656454
set MH4[94]="ReplaceableTextures\\CommandButtons\\BTNHeroBloodElfPrince.blp"
call XY7(K34[94],"spell")
call XU7(K34[94],1.25,MI4[94])
set MJ4[i]="Having at least one level in Quas, Wex and Exort will give you a larger repertoire of spells. Type -invokelist to obtain a full list of combinations."
set MK4[i]="Ghost Walk (QQW) can be used to get yourself out of a tight situation, and also for slowing opponents so that your allies can chase/escape."
set MM4[i]="Sunstrike (EEE) is a global-ranged nuke that deals damage based on the level of Exort. When using it, you have to factor in the 1.7 casting time."
set MN4[i]="Forge Spirit (EEQ) and Cold Snap (QQQ) can be effective for pushing towers and against heroes with low armor. "
set MO4[i]="EMP (WWW) and Tornado (WWQ) can completely drain off heroes with low mana pools and have a impressive casting range."
set i=i+1
set K34[95]=1433105516
set MI4[95]=1747989572
set K64[95]=1848656182
set MH4[95]="ReplaceableTextures\\CommandButtons\\BTNSpell_Shadow_SummonVoidWalker.blp"
call XY7(K34[95],"stand")
call XU7(K34[95],1.5,MI4[95])
set MJ4[i]="Conversion allows Enigma to neutral creep effectively. Target the highest level creep possible and move your low HP Eidolons out of the way to save them."
set MK4[i]="In the lane, Conversion can be used on allied creeps to deny your opponents of experience and gold, and for making sure you last hit enemy creeps."
set MM4[i]="The multiple stuns on higher levels of Malefice make it useful for preventing an opponent from channeling spells or help you chase/escape them."
set MN4[i]="Use Midnight Pulse in conjunction with Black Hole to deal massive damage to enemies. Just make sure that you cast it before Black Hole."
set MO4[i]="Kelen's Dagger is great for Black Hole placement, and a Black King Bar will prevent most spells from stopping the channeling effect of the spell."
set i=i+1
set K34[96]=1328558390
set MI4[96]=1747990354
set K64[96]=1848657721
set MH4[96]="ReplaceableTextures\\CommandButtons\\BTNTrollBatRider.blp"
call XY7(K34[96],"stand")
call XU7(K34[96],1.2,MI4[96])
call XU7(1328558391,1.2,MI4[96])
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set MO4[i]=""
set i=i+1
set K34[97]=1311787088
set MI4[97]=1747993136
set K64[97]=1848658002
set MH4[97]="ReplaceableTextures\\CommandButtons\\BTNIcyGhost.blp"
call XY7(K34[97],"stand")
call XU7(K34[97],1.17,MI4[97])
call XU7(1311787088,1.2,MI4[97])
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set MO4[i]=""
set i=i+1
set K34[98]=1211119409
set MI4[98]=1747990322
set K64[98]=1848657222
set MH4[98]="ReplaceableTextures\\CommandButtons\\BTNMurgulShadowCaster.blp"
call XY7(K34[98],"stand 3")
call XU7(K34[98],1.25,MI4[98])
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set MO4[i]=""
set i=i+1
set K34[99]=1164277353
set MI4[99]=1747989814
set K64[99]=1848656214
set MH4[99]="ReplaceableTextures\\CommandButtons\\BTNEvilIllidan.blp"
call XY7(K34[99],"spell channel")
call XU7(K34[99],1,MI4[99])
call XU7(1164277357,1,MI4[99])
call XU7(1160786518,1,MI4[99])
call XU7(1160786519,1,MI4[99])
call XU7(1160786517,1,MI4[99])
set MJ4[i]="Get Soul Steal if you need healing in the lane."
set MK4[i]="Purchase statistic-increasing items like Wraith Bands and later items like Sange and Yasha to benefit both Terrorblade and his images."
set MM4[i]="It might be difficult to escape due to the trail you leave behind when walking, you may have to use an image to act as a block or decoy."
set MN4[i]="Sunder can turn fights around when you have low health but be careful of disables and high damage spells when trying to swap."
set MO4[i]="Creating ranged images in Metamorphosis will allow you to deal damage safely in fights as well as push down buildings very quickly."
set i=i+1
set K34[100]=1164666213
set MI4[100]=1747989817
set K64[100]=1848656215
set MH4[100]="ReplaceableTextures\\CommandButtons\\BTNKeeperGhostBlue.blp"
call XY7(K34[100],"stand victory")
call XU7(K34[100],1,MI4[100])
set MJ4[i]="Split Earth is a very useful disable while Lightning Storm is taken because of its low cooldown. Both are powerful spells that hit multiple targets."
set MK4[i]="By using Lightning Storm to finish low-health creeps with nearby opponents, you can get gold and harass enemy heroes at the same time."
set MM4[i]="Diabolic Edict is one of the most powerful spells for destroying buildings. Eliminate the creeps first so that you only have one target."
set MN4[i]="Turn off Pulse Nova when you have finished using it because the spell will continue until you have exhausted your entire mana pool."
set MO4[i]="Items like Bloodstone or Aghanim's Scepter will allow Leshrac to use his spells more liberally and survive in the midst of battle."
set i=i+1
set K34[101]=1160786504
set MI4[101]=1747993410
set K64[101]=1848658764
set MH4[101]="ReplaceableTextures\\CommandButtons\\BTNArchimonde.blp"
call XY7(K34[101],"stand 3")
call XU7(K34[101],1.25,MI4[101])
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set MO4[i]=""
set i=i+1
set K34[102]=1433168227
set MI4[102]=1747989825
set K64[102]=1848656216
set MH4[102]="ReplaceableTextures\\CommandButtons\\BTNLichVersion2.blp"
call XY7(K34[102],"stand channel")
call XU7(K34[102],1.3,MI4[51])
set MJ4[i]="Dark Ritual is useful for denying allied creeps and provides you with mana to use spells without buying regeneration items."
set MK4[i]="Frost Nova is a very powerful spell that allows you to be aggressive. Attack the enemy a few extra times while they are slowed."
set MM4[i]="Chain Frost is most effective when used against 2-3 nearby targets (ideally heroes), but will not bounce when used on a lone unit."
set MN4[i]="Frost Armor should be cast on multiple teammates when you have the mana for it later on; it works nicely against melee units."
set MO4[i]="The first target of your Chain Frost can interrupt channeling and teleport spells if absolutely necessary."
set i=i+1
set K34[103]=1430468406
set MI4[103]=1747989826
set K64[103]=1848656217
set MH4[103]="ReplaceableTextures\\CommandButtons\\BTNBanshee.blp"
call XY7(K34[103],"spell wail")
call XU7(K34[103],1.35,MI4[103])
set MJ4[i]="Carrion Swarm is your primary nuke and first skill to max. Make use of its range by casting it on the ground instead of on a unit directly."
set MK4[i]="An early level of Silence can help prevent you and your allies from being attacked by multiple spells."
set MM4[i]="The ghosts of Exorcism will attack whatever you attack, so if you want to direct all attention to a single unit simply focus them and stay nearby."
set MN4[i]="Exorcism also makes Krobelus extremely effective for quickly destroying enemy buildings, so be sure to push the enemy base when you can"
set MO4[i]="The effect of Exorcism stops if you die in combat: Invest in items that improve your survivability, such as a Bloodstone or a Heart of Tarrasque."
set i=i+1
set K34[104]=1430466872
set MI4[104]=1747989827
set K64[104]=1848656218
set MH4[104]="ReplaceableTextures\\CommandButtons\\BTNLion.BLP"
call XY7(K34[104],"spell callstorm")
call XU7(K34[104],1.3,MI4[104])
call WM7(K34[104],50,100,$FF)
set MJ4[i]="With plenty of damage and disables, Lion is quite a force to be reckoned with cheap utility items such as Bottle and Phase Boots."
set MK4[i]="Impale gives Lion the ability to disable multiple targets and deals decent damage, so it is definitely the most versatile of his three skills for the early game."
set MM4[i]="Mana Drain only works on units with mana: Using Mana Drain on enemy heroes will reduce their spell use while replenishing mana."
set MN4[i]="Avoid wasting Finger of Death on low-health enemy heroes when a few extra attacks or using another spell like Impale will deal enough damage."
set MO4[i]="Wait until the duration of your first disable wears off before using another one for maximum disable time when using Impale and Voodoo."
set i=i+1
set K34[105]=1162032439
set MI4[105]=1747989828
set K64[105]=1848656432
set MH4[105]="ReplaceableTextures\\CommandButtons\\BTNHydralisk.blp"
call XY7(K34[105],"attack")
call XU7(K34[105],1.,MI4[105])
call WM7(K34[105],$96,$C8,$FF)
set MJ4[i]="Venomous Gale is a spell that hits multiple opponents and slows them, making it very useful for getting early kills."
set MK4[i]="At least one level of Poison Sting is recommended early game for its slow effect."
set MM4[i]="Bottle and Magic Stick will help deal with his low HP/mana, while Phase Boots are a cheap way to improve his chasing capabilities."
set MN4[i]="Wards are very useful for pushing a lane and killing neutral and enemy creeps, but you can also use it to provide vision."
set MO4[i]="Poison Nova deals a lot of damage but you have to combine it with other spells and attacks because it does not deal fatal damage (stops at 1 HP)."
set i=i+1
set K34[106]=1430466865
set MI4[106]=1747989829
set K64[106]=1848656178
set MH4[106]="ReplaceableTextures\\CommandButtons\\BTNBlueMagnataur.tga"
call XY7(K34[106],"stand channel")
call XU7(K34[106],1,MI4[106])
call WM7(K34[106],$96,$96,100)
set MJ4[i]="Bottle and Perseverance help with early regeneration,. while purchasing Kelen's Dagger later will help you to land Reverse Polarity."
set MK4[i]="A few Attribute Bonus points can help you cast more spells. Save Mighty Swing for later levels when you have more damage."
set MM4[i]="By targeting the ground where you want to fire Shockwave, you can hit both creeps and opponents and make use of its long range."
set MN4[i]="Magnus should cast Empower on himself and other allies with high damage before initiating team battles with his ultimate."
set MO4[i]="The cleave of Battlefury stacks directly with Mighty Swing, making it a good damage item especially if you already have a Perseverance."
set i=i+1
set K34[107]=1430468144
set MI4[107]=1747989830
set K64[107]=1848656433
set MH4[107]="ReplaceableTextures\\CommandButtons\\BTNSpiritWyvern.blp"
call XY7(K34[107],"stand victory")
call XU7(K34[107],1,MI4[107])
call WM7(K34[107],$96,$96,$96)
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set MO4[i]=""
set i=i+1
set K34[108]=1429221441
set MI4[108]=1747989831
set K64[108]=1848656434
set MH4[108]="ReplaceableTextures\\CommandButtons\\BTNChaosWarlord.blp"
call XY7(K34[108],"stand victory")
call XU7(K34[108],1.05,MI4[108])
set MJ4[i]="Chaos Bolt and Blink Strike are active abilities that are more useful in the lane and for killing opponents than Critical Strike."
set MK4[i]="Chaos Bolt is a disable that switches between average and extremely powerful, the sooner you have max out this spell, the better."
set MM4[i]="His high natural movement speed (325 - the highest in the game) and Blink Strike make him very difficult for opponents to outrun or chase him."
set MN4[i]="If you Blink Strike and then use Chaos Bolt, you can spend more time hitting opponents and less time waiting for his slow casting animation. "
set MO4[i]="Make Nessaj and Phantasm stronger by buying Strength items like Armlet of Mordiggan (when activated) and Heart of Tarrasque."
set i=i+1
set K34[109]=1311788343
set MI4[109]=1747993687
set K64[109]=1848659256
set MH4[109]="ReplaceableTextures\\CommandButtons\\BTNFrostWyrm.blp"
call XY7(K34[109],"stand victory")
call XU7(K34[109],.9,MI4[109])
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set MO4[i]=""
set i=i+1
set K34[110]=1311788363
set MI4[110]=1747993926
set K64[110]=1848659276
set MH4[110]="ReplaceableTextures\\CommandButtons\\BTNGnollWarden.blp"
call XY7(K34[110],"stand victory")
call XU7(K34[110],1.1,MI4[110])
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set MO4[i]=""
set i=i+1
set K34[111]=1429221432
set MI4[111]=1747989832
set K64[111]=1848656435
set MH4[111]="ReplaceableTextures\\CommandButtons\\BTNKiljaedin.blp"
call XY7(K34[111],"spell")
call XU7(K34[111],1.2,MI4[111])
call XU7(1160786229,1,MI4[111])
call WM7(K34[58],$FF,$4B,$FF)
set MJ4[i]="If you want to neutral creeps, start with Summon Wolves and a Ring of Basilius, which can be used to make Vladmir's Offering later."
set MK4[i]="Spirit Wolves gain invisibility at level 4, making them difficult to kill and easy to harass heroes with in the lane."
set MM4[i]="Feral Heart make you and your wolves stronger overall, while Howl is an offensive spell used before engaging the enemy."
set MN4[i]="Shapeshift makes you incredibly powerful and gives you max movement speed. Avoid being blocked by your wolves when chasing."
set MO4[i]="A Black King Bar will prevent enemies from disabling you, making you very fearsome and almost unstoppable when attacking heroes."
set i=i+1
set K34[112]=1429221430
set MI4[112]=1747989833
set K64[112]=1848656436
set MH4[112]="ReplaceableTextures\\CommandButtons\\BTNSpiderBlack.blp"
call XY7(K34[112],"walk")
call XU7(K34[112],1.36,MI4[112])
set MJ4[i]="At least one level in Spin Web early game will increase your survivability greatly. Remember that attacking/using spells will cause you to break invisibility."
set MK4[i]="Spawn Spiderlings is both a nuke and pushing spell, so getting items like a Ring of Basilius will provide you with both mana and armor for pushing."
set MM4[i]="Incapacitating Bite makes it very difficult for enemies to get away from you, great for chasing and slowing opponents temporarily for your allies."
set MN4[i]="Try to space out your webs with least 2 seconds of walking distance so that you can benefit from its bonuses on as much ground as possible."
set MO4[i]="With the damage and lifesteal from Insatiable Hunger, sometimes it is best to get items that will prevent you from being disabled, such as a Black King Bar."
set i=i+1
set K54=112
set K34[500]=1211445296
set MH4[500]="ReplaceableTextures\\CommandButtons\\BTNWispHero.blp"
call XY7(K34[500],"stand")
call XU7(K34[500],1.5,0)
set MJ4[500]=""
set MK4[500]=""
set MM4[500]=""
set MN4[500]=""
set MO4[500]=""
set K34[600]=1211510832
set MH4[600]="ReplaceableTextures\\CommandButtons\\BTNSeaTurtleRed.blp"
call XY7(K34[600],"stand")
call XU7(K34[600],.8,0)
set MJ4[600]=""
set MK4[600]=""
set MM4[600]=""
set MN4[600]=""
set MO4[600]=""
set K24[1]=1315074670
set K24[2]=1164207469
set K24[3]=1311781174
set K24[4]=1315070563
set K24[5]=1315007329
set K24[6]=1328558160
set K24[7]=1433631084
set K24[8]=1160785973
set K24[9]=1311781199
set K24[$A]=1212365106
set K24[$B]=1215723364
set K24[$C]=1212363833
set K24[$D]=1215657064
set K24[$E]=1332179560
set K24[$F]=1429221430
set K24[16]=1162032439
set K24[17]=1164277353
set K24[18]=1432510828
set K24[19]=1160785972
set K24[20]=1162032951
set K24[21]=1215722344
set K24[22]=1315334514
set K24[23]=1160785970
set K24[24]=1162032181
set K24[25]=1165451634
set K24[26]=1429221424
set K24[27]=1211117654
set K24[28]=1160786242
set K24[29]=1311781206
set K24[30]=1211117641
set K24[31]=1160786265
set K24[32]=1211119409
set K24[33]=1160786510
set K24[34]=1311788336
set K24[35]=1311788363
set K_4=35
set M44[1]=1315988077
set M44[2]=1215063922
set M44[3]=1214345830
set M44[4]=1211117616
set M44[5]=1211117617
set M44[6]=1214344551
set M44[7]=1211117624
set M44[8]=1432580716
set M44[9]=1333027688
set M44[$A]=1313026096
set M44[$B]=1432646245
set M44[$C]=1430466865
set M44[$D]=1332109682
set M44[$E]=1429221446
set M44[$F]=1429221451
set M44[16]=1328558154
set M44[17]=1432642913
set M44[18]=1332766568
set M44[19]=1429221441
set M44[20]=1429221443
set M44[21]=1430468913
set M44[22]=1430467634
set M44[23]=1429221432
set M44[24]=1211117636
set M44[25]=1311781193
set M44[26]=1211117649
set M44[27]=1311780946
set M44[28]=1211117652
set M44[29]=1211119187
set M44[30]=1211117650
set M44[31]=1328558389
set M44[32]=1160786505
set M44[33]=1160786502
set M44[34]=1328558406
set M44[35]=1160786738
set M44[36]=1160786507
set M44[37]=1311788373
set M74=37
set M84[1]=1332898670
set M84[2]=1164799855
set M84[3]=1164799603
set M84[4]=1211117620
set M84[5]=1214931305
set M84[6]=1433105516
set M84[7]=1215128178
set M84[8]=1211117643
set M84[9]=1316252014
set M84[$A]=1215130471
set M84[$B]=1214409837
set M84[$C]=1311781185
set M84[$D]=1211117633
set M84[$E]=1433168227
set M84[$F]=1164666213
set M84[16]=1430468406
set M84[17]=1430466872
set M84[18]=1430466609
set M84[19]=1430468144
set M84[20]=1211117640
set M84[21]=1332963428
set M84[22]=1429221445
set M84[23]=1160786241
set M84[24]=1429221456
set M84[25]=1160786000
set M84[26]=1160786243
set M84[27]=1311781207
set M84[28]=1211117646
set M84[29]=1311786311
set M84[30]=1211117651
set M84[31]=1311780930
set M84[32]=1211117653
set M84[33]=1328558390
set M84[34]=1311787088
set M84[35]=1160786504
set M84[36]=1160786506
set M84[37]=1160786520
set M84[38]=1211122767
set M84[39]=1311788343
set M84[40]=1311788356
set M94=40
set MD4[1]=1332898670
set MD4[2]=1164799855
set MD4[3]=1164799603
set MD4[4]=1211117620
set MD4[5]=1214931305
set MD4[6]=1433105516
set MD4[7]=1215128178
set MD4[8]=1211117643
set MD4[9]=1316252014
set MD4[$A]=1315074670
set MD4[$B]=1214409837
set MD4[$C]=1311781185
set MD4[$D]=1211117633
set MD4[$E]=1433168227
set MD4[$F]=1164666213
set MD4[16]=1430468406
set MD4[17]=1430466872
set MD4[18]=1430466609
set MD4[19]=1430468144
set MD4[20]=1211117640
set MD4[21]=1332963428
set MD4[22]=1429221445
set MD4[23]=1160786241
set MD4[24]=1429221456
set MD4[25]=1160786000
set MD4[26]=1160786243
set MD4[27]=1311781207
set MD4[28]=1311786311
set MD4[29]=1211117651
set MD4[30]=1311780930
set MD4[31]=1211117653
set MD4[32]=1311781174
set MD4[33]=1328558160
set MD4[34]=1433631084
set MD4[35]=1160785973
set MD4[36]=1311781199
set MD4[37]=1160786265
set MD4[38]=1215723364
set MD4[39]=1162032439
set MD4[40]=1432510828
set MD4[41]=1160785972
set MD4[42]=1162032951
set MD4[43]=1315334514
set MD4[44]=1160785970
set MD4[45]=1211117654
set MD4[46]=1311781206
set MD4[47]=1211117649
set MD4[48]=1328558390
set MD4[49]=1311787088
set MD4[50]=1328558406
set MD4[51]=1160786504
set MD4[52]=1160786510
set MD4[53]=1160786506
set MD4[54]=1160786502
set MD4[55]=1160786520
set MD4[56]=1211122767
set MD4[57]=1311788363
set MD4[58]=1311788343
set MD4[59]=1311788356
set ME4=59
set MF4[1]=1215130471
set MF4[2]=1211117646
set MF4[3]=1164207469
set MF4[4]=1315070563
set MF4[5]=1315007329
set MF4[6]=1212363833
set MF4[7]=1215657064
set MF4[8]=1332179560
set MF4[9]=1429221430
set MF4[$A]=1164277353
set MF4[$B]=1215722344
set MF4[$C]=1162032181
set MF4[$D]=1165451634
set MF4[$E]=1429221424
set MF4[$F]=1160786242
set MF4[16]=1211117641
set MF4[17]=1212365106
set MF4[18]=1315988077
set MF4[19]=1215063922
set MF4[20]=1214345830
set MF4[21]=1211117616
set MF4[22]=1211117617
set MF4[23]=1214344551
set MF4[24]=1211117624
set MF4[25]=1432580716
set MF4[26]=1333027688
set MF4[27]=1313026096
set MF4[28]=1432646245
set MF4[29]=1430466865
set MF4[30]=1332109682
set MF4[31]=1429221446
set MF4[32]=1429221451
set MF4[33]=1328558154
set MF4[34]=1432642913
set MF4[35]=1332766568
set MF4[36]=1429221441
set MF4[37]=1429221443
set MF4[38]=1430468913
set MF4[39]=1430467634
set MF4[40]=1429221432
set MF4[41]=1211117636
set MF4[42]=1311781193
set MF4[43]=1311780946
set MF4[44]=1211117652
set MF4[45]=1211119187
set MF4[46]=1211117650
set MF4[47]=1328558389
set MF4[48]=1211119409
set MF4[49]=1160786505
set MF4[50]=1311788336
set MF4[51]=1160786738
set MF4[52]=1160786507
set MF4[53]=1311788373
set MG4=53
call UX7()
endfunction
function LY7 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
call DestroyFogModifier(CreateFogModifierRadius(Z7[0],FOG_OF_WAR_MASKED,GetUnitX(MR4),GetUnitY(MR4),900,false,false))
call DestroyFogModifier(CreateFogModifierRadius(A7[0],FOG_OF_WAR_MASKED,GetUnitX(MP4),GetUnitY(MP4),900,false,false))
call OZ7(t)
set t=null
return false
endfunction
function LZ7 takes item Z4 returns string
if Z4==null then
return"UI\\Widgets\\Console\\Undead\\undead-inventory-slotfiller.blp"
endif
return CU[KY7(Z4)]
endfunction
function LA7 takes nothing returns nothing
local unit a=CreateUnit(Player(0),1747990348,-6100,-5800,0)
local unit b=CreateUnit(Player(0),1747990348,-6100,-5800,0)
local item i=CreateItem(1227900749,0,0)
call UnitAddItem(a,i)
if UnitUseItem(a,i)then
endif
call UnitRemoveItem(a,i)
call UnitAddItem(b,i)
if UnitUseItem(b,i)then
set M34=true
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,$A,(GetObjectName((1848657993))))
else
set M34=false
endif
call ShowUnit(a,false)
call KillUnit(a)
call ShowUnit(b,false)
call KillUnit(b)
call RemoveItem(i)
set i=null
set b=null
set a=null
endfunction
function LB7 takes integer id returns boolean
return id==1211117642 or id==1311788365
endfunction
function LC7 takes integer id returns boolean
local integer i=0
loop
exitwhen i>EC7
if EB7[i]==id then
return true
endif
set i=i+1
endloop
return false
endfunction
function L37 takes nothing returns nothing
set EC7=EC7+1
set EB7[EC7]=1093753431
set EC7=EC7+1
set EB7[EC7]=1093681718
set EC7=EC7+1
set EB7[EC7]=1093684023
set EC7=EC7+1
set EB7[EC7]=1093686327
set EC7=EC7+1
set EB7[EC7]=1093686328
set EC7=EC7+1
set EB7[EC7]=1093742918
set EC7=EC7+1
set EB7[EC7]=1093742920
set EC7=EC7+1
set EB7[EC7]=1093742919
set EC7=EC7+1
set EB7[EC7]=1093742916
set EC7=EC7+1
set EB7[EC7]=1093686067
set EC7=EC7+1
set EB7[EC7]=1093742917
set EC7=EC7+1
set EB7[EC7]=1093743959
set EC7=EC7+1
set EB7[EC7]=1093814353
set EC7=EC7+1
set EB7[EC7]=1093808945
set EC7=EC7+1
set EB7[EC7]=1093816630
set EC7=EC7+1
set EB7[EC7]=1093814351
set EC7=EC7+1
set EB7[EC7]=1093677647
set EC7=EC7+1
set EB7[EC7]=1093679193
set EC7=EC7+1
set EB7[EC7]=1093679194
set EC7=EC7+1
set EB7[EC7]=1093679408
set EC7=EC7+1
set EB7[EC7]=1093679410
set EC7=EC7+1
set EB7[EC7]=1095331943
set EC7=EC7+1
set EB7[EC7]=1095332962
set EC7=EC7+1
set EB7[EC7]=1093683254
set EC7=EC7+1
set EB7[EC7]=1093751108
set EC7=EC7+1
set EB7[EC7]=1093751863
set EC7=EC7+1
set EB7[EC7]=1093744973
set EC7=EC7+1
set EB7[EC7]=1093747011
set EC7=EC7+1
set EB7[EC7]=1094936696
set EC7=EC7+1
set EB7[EC7]=1093810265
set EC7=EC7+1
set EB7[EC7]=1095328363
set EC7=EC7+1
set EB7[EC7]=1093748055
set EC7=EC7+1
set EB7[EC7]=1093677367
set EC7=EC7+1
set EB7[EC7]=1093816646
set EC7=EC7+1
set EB7[EC7]=1093683801
set EC7=EC7+1
set EB7[EC7]=1093682767
set EC7=EC7+1
set EB7[EC7]=1093683255
set EC7=EC7+1
set EB7[EC7]=1093681720
set EC7=EC7+1
set EB7[EC7]=1093752645
set EC7=EC7+1
set EB7[EC7]=1095333995
set EC7=EC7+1
set EB7[EC7]=1093753417
set EC7=EC7+1
set EB7[EC7]=1093681995
set EC7=EC7+1
set EB7[EC7]=1093816651
set EC7=EC7+1
set EB7[EC7]=1093683788
set EC7=EC7+1
set EB7[EC7]=1093748303
set EC7=EC7+1
set EB7[EC7]=1095328865
set EC7=EC7+1
set EB7[EC7]=1093683266
set EC7=EC7+1
set EB7[EC7]=1093682227
set EC7=EC7+1
set EB7[EC7]=1093682246
set EC7=EC7+1
set EB7[EC7]=1093682756
set EC7=EC7+1
set EB7[EC7]=1093743191
set EC7=EC7+1
set EB7[EC7]=1093743681
set EC7=EC7+1
set EB7[EC7]=1093748292
set EC7=EC7+1
set EB7[EC7]=1093749071
set EC7=EC7+1
set EB7[EC7]=1093677655
set EC7=EC7+1
set EB7[EC7]=1093809721
set EC7=EC7+1
set EB7[EC7]=1093815111
set EC7=EC7+1
set EB7[EC7]=1093748304
set EC7=EC7+1
set EB7[EC7]=1093686329
set EC7=EC7+1
set EB7[EC7]=1093751096
set EC7=EC7+1
set EB7[EC7]=1093750095
set EC7=EC7+1
set EB7[EC7]=1093810244
set EC7=EC7+1
set EB7[EC7]=1097163124
set EC7=EC7+1
set EB7[EC7]=1093684016
set EC7=EC7+1
set EB7[EC7]=1095331948
set EC7=EC7+1
set EB7[EC7]=1093683796
set EC7=EC7+1
set EB7[EC7]=1095331954
set EC7=EC7+1
set EB7[EC7]=1093677656
set EC7=EC7+1
set EB7[EC7]=1093751349
set EC7=EC7+1
set EB7[EC7]=1095332727
set EC7=EC7+1
set EB7[EC7]=1093808182
set EC7=EC7+1
set EB7[EC7]=1093753416
set EC7=EC7+1
set EB7[EC7]=1093813569
set EC7=EC7+1
set EB7[EC7]=1093815092
set EC7=EC7+1
set EB7[EC7]=1093815095
set EC7=EC7+1
set EB7[EC7]=1093815089
set EC7=EC7+1
set EB7[EC7]=1093816902
set EC7=EC7+1
set EB7[EC7]=1093816650
set EC7=EC7+1
set EB7[EC7]=1093816900
set EC7=EC7+1
set EB7[EC7]=1093816888
set EC7=EC7+1
set EB7[EC7]=1093816881
set EC7=EC7+1
set EB7[EC7]=1093816915
set EC7=EC7+1
set EB7[EC7]=1093816918
set EC7=EC7+1
set EB7[EC7]=1093816911
set EC7=EC7+1
set EB7[EC7]='A1FD'
set EC7=EC7+1
set EB7[EC7]='A2S0'
set EC7=EC7+1
set EB7[EC7]='A2RM'
set EC7=EC7+1
set EB7[EC7]='A2XM'
set EC7=EC7+1
set EB7[EC7]='A32X'
endfunction
function L67 takes integer id returns boolean
return id==1093808454 or id==1093808455 or id==1093808456 or id==1093751609 or id==1093809217 or id==1093809218 or id==1093678667 or id==1093752391 or id==1093810257 or id==1093752646 or id==1093686328 or id==1093686327 or id==1093808206 or id==1093753394 or id==1093753395 or id==1093808181 or id==1093743681 or id==1093809721 or id==1093815111 or id==1093815881 or id==1093810008 or id==1093810265 or id==1093809221 or id==1093753416 or id==1093752655 or id==1093748305 or id==1093686341 or id==1093814863 or id==1093813848 or id==1093684560 or id==1093815109 or id==1093815112 or id==1093815097 or id==1093814860 or id==1093815857 or id==1093815618 or id==1093677625 or id==1093816121 or id==1093817912
endfunction
function LL7 takes nothing returns nothing
set MC4=MC4+1
set MB4[MC4]=1093683254
set MC4=MC4+1
set MB4[MC4]=1093677362
set MC4=MC4+1
set MB4[MC4]=1093678667
set MC4=MC4+1
set MB4[MC4]=1093683513
set MC4=MC4+1
set MB4[MC4]=1093683265
set MC4=MC4+1
set MB4[MC4]=1093684021
set MC4=MC4+1
set MB4[MC4]=1093685337
set MC4=MC4+1
set MB4[MC4]=1093748303
set MC4=MC4+1
set MB4[MC4]=1093685844
set MC4=MC4+1
set MB4[MC4]=1093686081
set MC4=MC4+1
set MB4[MC4]=1093686327
set MC4=MC4+1
set MB4[MC4]=1093686328
set MC4=MC4+1
set MB4[MC4]=1093743681
set MC4=MC4+1
set MB4[MC4]=1093681733
set MC4=MC4+1
set MB4[MC4]=1093808472
set MC4=MC4+1
set MB4[MC4]=1093808471
set MC4=MC4+1
set MB4[MC4]=1093808470
set MC4=MC4+1
set MB4[MC4]=1097754673
set MC4=MC4+1
set MB4[MC4]=1093750618
set MC4=MC4+1
set MB4[MC4]=1093743428
set MC4=MC4+1
set MB4[MC4]=1093677622
set MC4=MC4+1
set MB4[MC4]=1093751096
set MC4=MC4+1
set MB4[MC4]=1093816888
endfunction
function L17 takes nothing returns nothing
set B8[1]=1095331188
set B8[2]=1095328865
set B8[3]=1095660653
set B8[4]=1094935400
set B8[5]=1095333995
set B8[6]=1093681995
set B8[7]=1093677367
set B8[8]=1093681720
set B8[9]=1093683266
set B8[$A]=1093682227
set B8[$B]=1093682246
set B8[$C]=1093677655
set B8[$D]=1095331954
set B8[$E]=1095331948
set B8[$F]=1093682767
set B8[16]=1093683255
set B8[17]=1093683254
set B8[18]=1093677656
set B8[19]=1095332727
set B8[20]=1093682008
set B8[21]=1093681718
set B8[22]=1097163124
set B8[23]=1093679180
set B8[24]=1095328633
set B8[25]=1093678426
set B8[26]=1095328363
set B8[27]=1093682265
set B8[28]=1093684314
set B8[29]=1093685065
set B8[30]=1093684056
set B8[31]=1093684055
set B8[32]=1093677622
set B8[33]=1093681972
set B8[34]=1093677362
set B8[35]=1093678667
set B8[36]=1093677652
set B8[37]=1095263841
set B8[38]=1093679446
set B8[39]=1093678425
set B8[40]=1093683513
set B8[41]=1093683265
set B8[42]=1093684021
set B8[43]=1093685337
set B8[44]=1093685582
set B8[45]=1093685844
set B8[46]=1093685840
set B8[47]=1093743191
set B8[48]=1093686081
set B8[49]=1093686327
set B8[50]=1093686328
set B8[51]=1093743681
set B8[52]=1093681733
set B8[53]=1093808472
set B8[54]=1093808471
set B8[55]=1093808470
set B8[56]=1093684560
set B8[57]=1093743428
set B8[58]=1093683801
set B8[59]=1093743959
set B8[60]=1093748303
set B8[61]=1093748292
set B8[62]=1093750618
set B8[63]=1093750095
set B8[64]=1093749071
set B8[65]=1093751096
set B8[66]=1093751361
set B8[67]=1093751126
set B8[68]=1093752645
set B8[69]=1093752642
set B8[70]=1093815111
set B8[71]=1093815859
set B8[72]=1093816651
set B8[73]=1093816646
set B8[74]=1093816650
set B8[75]=1093816900
set B8[76]=1093816888
set B8[77]=1093816881
set B8[78]=1093816915
set B8[79]=1093816918
set B8[80]=1093816911
set B8[81]='A1FD'
set B8[82]='A2S0'
set B8[83]='A2RM'
set B8[84]='A2XM'
set B8[85]='A2XO'
set C8=85
endfunction
function L07 takes nothing returns boolean
call L17()
call LL7()
call L37()
return false
endfunction
function L57 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.01,false)
call TriggerAddCondition(t,Condition(function L07))
endfunction
function L27 takes nothing returns nothing
call CreateQuestBJ(0,"About AI","TRIGSTR_49999","ReplaceableTextures\\CommandButtons\\BTNOrb of Water.blp")
call CreateQuestBJ(0,"Exp/Gold Modes","TRIGSTR_49998","ReplaceableTextures\\CommandButtons\\BTNOrb of Water.blp")
call CreateQuestBJ(0,"TRIGSTR_50004","TRIGSTR_50005","ReplaceableTextures\\CommandButtons\\BTNSpy.blp")
call CreateQuestBJ(0,"TRIGSTR_50006","TRIGSTR_50007","ReplaceableTextures\\CommandButtons\\BTNTome.blp")
call CreateQuestBJ(0,"TRIGSTR_50008","TRIGSTR_50009","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
call CreateQuestBJ(2,"TRIGSTR_50010","TRIGSTR_50011","ReplaceableTextures\\CommandButtons\\BTNScrollOfHaste.blp")
call CreateQuestBJ(2,"TRIGSTR_50012","TRIGSTR_50013","ReplaceableTextures\\CommandButtons\\BTNBansheeMaster.blp")
call CreateQuestBJ(2,"TRIGSTR_50014","TRIGSTR_50015","ReplaceableTextures\\CommandButtons\\BTNCarrionScarabs.blp")
endfunction
function L_7 takes nothing returns boolean
local string s
if IsUnitIllusion(GetTriggerUnit())==false and LB7(GetUnitTypeId(GetTriggerUnit()))==false then
set s=GetUnitName(GetTriggerUnit())+" "+(GetObjectName((1848657986)))+" "+GetObjectName(GetLearnedSkill())+" ("+(GetObjectName((1848657987)))+" "+I2S(GetUnitAbilityLevel(GetTriggerUnit(),GetLearnedSkill()))+")"
call DisplayTimedTextToPlayer(KX4,0,0,3,s)
call DisplayTimedTextToPlayer(KY4,0,0,3,s)
endif
return false
endfunction
function D48 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function L_7))
set t=null
endfunction
function D78 takes player p returns nothing
local unit WX7=M7[GetPlayerId(p)]
local integer i=0
local item D88
loop
exitwhen i>5
set D88=UnitItemInSlot(WX7,i)
call SetItemDroppable(D88,false)
set i=i+1
endloop
set WX7=null
set D88=null
endfunction
function DD8 takes nothing returns nothing
call VV7(bj_FORCE_ALL_PLAYERS,25.,(KZ4[GetPlayerId((GetTriggerPlayer()))])+"|c00ff0303 "+(GetObjectName((1848652356)))+"|r")
endfunction
function Jf takes nothing returns nothing
local player DE8=O97(GetHandleId(GetExpiredTimer()),"Leaver")
local integer T8=1
local integer Jg
local integer hY=GetPlayerState(DE8,PLAYER_STATE_RESOURCE_GOLD)
if hY>20 then
call SetPlayerState(DE8,PLAYER_STATE_RESOURCE_GOLD,0)
set VH4[GetPlayerId(DE8)]=0
if TV7(DE8)then
set Jg=P8(X7)
else
set Jg=P8(Y7)
endif
if TV7(DE8)then
loop
exitwhen T8>5
if TA7(Z7[T8])then
call SetPlayerState(Z7[T8],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Z7[T8],PLAYER_STATE_RESOURCE_GOLD)+hY/Jg)
endif
set T8=T8+1
endloop
else
loop
exitwhen T8>5
if TA7(A7[T8])then
call SetPlayerState(A7[T8],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(A7[T8],PLAYER_STATE_RESOURCE_GOLD)+hY/Jg)
endif
set T8=T8+1
endloop
endif
endif
endfunction
function DF8 takes player DE8 returns nothing
local timer t=CreateTimer()
local integer OB7=GetHandleId(t)
call NZ7(OB7,"Leaver",DE8)
call TimerStart(t,2,true,function Jf)
set t=null
endfunction
function DG8 takes player p returns nothing
local multiboarditem DH8=MultiboardGetItem(T4,ND4[GetPlayerId(p)],N94[GetPlayerId(p)])
call MultiboardSetItemValue(DH8,"|c00333333"+VT7(p)+"|r")
call MultiboardReleaseItem(DH8)
endfunction
function DI8 takes nothing returns nothing
local player p=OD4
local string id=I2S(GetPlayerId(p))
call StoreInteger(IV4,id,"8_0",(GetItemTypeId(UnitItemInSlot(M7[GetPlayerId((p))],(0)))))
call StoreInteger(IV4,id,"8_1",(GetItemTypeId(UnitItemInSlot(M7[GetPlayerId((p))],(1)))))
call StoreInteger(IV4,id,"8_2",(GetItemTypeId(UnitItemInSlot(M7[GetPlayerId((p))],(2)))))
call StoreInteger(IV4,id,"8_3",(GetItemTypeId(UnitItemInSlot(M7[GetPlayerId((p))],(3)))))
call StoreInteger(IV4,id,"8_4",(GetItemTypeId(UnitItemInSlot(M7[GetPlayerId((p))],(4)))))
call StoreInteger(IV4,id,"8_5",(GetItemTypeId(UnitItemInSlot(M7[GetPlayerId((p))],(5)))))
if GetLocalPlayer()==Le then
call SyncStoredInteger(IV4,I2S(GetPlayerId(p)),"8_0")
call SyncStoredInteger(IV4,I2S(GetPlayerId(p)),"8_1")
call SyncStoredInteger(IV4,I2S(GetPlayerId(p)),"8_2")
call SyncStoredInteger(IV4,I2S(GetPlayerId(p)),"8_3")
call SyncStoredInteger(IV4,I2S(GetPlayerId(p)),"8_4")
call SyncStoredInteger(IV4,I2S(GetPlayerId(p)),"8_5")
endif
endfunction
function DJ8 takes nothing returns nothing
local integer LU7=P8(X7)
local integer LT7=P8(Y7)
local integer T8
local integer U8
local string DK8
local string DM8
local unit WI7=M7[GetPlayerId(GetTriggerPlayer())]
if WI7==null then
set DM8=(GetObjectName((1848657239)))
else
set DM8=GetUnitName(WI7)
endif
if(C<$A)then
set DK8=I2S(B)+":0"+I2S(C)
else
set DK8=I2S(B)+":"+I2S(C)
endif
if D9==false then
set C9[GetPlayerId(GetTriggerPlayer())]="|c00555555"+DK8+"|r"
call VV7(bj_FORCE_ALL_PLAYERS,25.,Q[GetPlayerId(GetTriggerPlayer())]+(KZ4[GetPlayerId((GetTriggerPlayer()))])+" ("+DM8+")|r|c00ff0303 "+(GetObjectName((1848652356)))+"|r")
if(TV7(GetTriggerPlayer()))then
set T8=1
set U8=5
loop
exitwhen T8>U8
if(Z7[T8]!=GetTriggerPlayer())then
if(TA7(Z7[T8]))then
call SetPlayerAllianceStateBJ(GetTriggerPlayer(),Z7[T8],4)
endif
endif
set T8=T8+1
endloop
else
set T8=1
set U8=5
loop
exitwhen T8>U8
if(A7[T8]!=GetTriggerPlayer())then
if(TA7(A7[T8]))then
call SetPlayerAllianceStateBJ(GetTriggerPlayer(),A7[T8],4)
endif
endif
set T8=T8+1
endloop
endif
if TV7(GetTriggerPlayer())or TW7(GetTriggerPlayer())then
set M64=M64+1
endif
call C27("C"+"K"+I2S(T7[GetPlayerId(GetTriggerPlayer())])+"D"+I2S(U7[GetPlayerId(GetTriggerPlayer())])+"N"+I2S((LoadInteger(L7,StringHash("Stats"+I2S(GetPlayerId(GetTriggerPlayer()))),StringHash("NumOfNeutrals")))),GetPlayerId(GetTriggerPlayer()))
set OD4=GetTriggerPlayer()
call ExecuteFunc("DI8")
call D78(GetTriggerPlayer())
set U2[GetPlayerId(GetTriggerPlayer())]=true
call DG8(GetTriggerPlayer())
call DF8(GetTriggerPlayer())
if M64==2 and V8==false and Ny then
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60," ")
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60," ")
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60,"|c006699CC"+(GetObjectName((1848657495)))+"|r")
endif
if M64==3 then
set O84=true
call ExecuteFunc("DN8")
set O84=false
endif
else
set C9[GetPlayerId(GetTriggerPlayer())]="|c00555555End|r"
call ExecuteFunc("DO8")
endif
set WI7=null
endfunction
function DP8 takes unit WX7 returns nothing
if GetUnitTypeId(WX7)!=1211117642 and GetUnitTypeId(WX7)!=1211117641 then
if GetOwningPlayer(WX7)==GetLocalPlayer()then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1," ")
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1,"|c006699CC"+(GetObjectName((1848657746))))
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1," ")
endif
call ZT7(WR,GetOwningPlayer(WX7))
endif
call SetUnitInvulnerable(WX7,false)
call UnitRemoveAbility(WX7,1093681498)
call UnitRemoveAbility(WX7,1093679434)
call UnitRemoveAbility(WX7,1093816151)
call UnitRemoveAbility(WX7,1093816152)
call UnitRemoveAbility(WX7,1093816153)
call UnitRemoveAbility(WX7,1093684052)
call UnitRemoveAbility(WX7,1093684823)
call UnitRemoveAbility(WX7,1093684821)
call UnitRemoveAbility(WX7,1093685079)
call UnitRemoveAbility(WX7,1093685078)
call UnitRemoveAbility(WX7,1093685080)
call UnitRemoveAbility(WX7,1093685081)
call UnitRemoveAbility(WX7,1093685296)
call UnitRemoveAbility(WX7,1093744459)
call UnitRemoveAbility(WX7,1093685334)
call UnitRemoveAbility(WX7,1093685583)
call UnitRemoveAbility(WX7,1093685827)
call UnitRemoveAbility(WX7,1093685830)
call UnitRemoveAbility(WX7,Ly)
call UnitRemoveAbility(WX7,my)
call UnitRemoveAbility(WX7,My)
call UnitRemoveAbility(WX7,py)
call UnitRemoveAbility(WX7,1093684821)
call UnitRemoveAbility(WX7,1093684823)
call UnitRemoveAbility(WX7,1093682777)
call UnitRemoveAbility(WX7,1093683509)
call UnitRemoveAbility(WX7,1093681977)
call UnitRemoveAbility(WX7,1093683528)
call UnitRemoveAbility(WX7,1110455863)
call UnitRemoveAbility(WX7,1110456396)
call UnitRemoveAbility(WX7,1093686098)
call UnitRemoveAbility(WX7,1093687119)
call UnitRemoveAbility(WX7,1093817176)
call UnitRemoveAbility(WX7,1093687122)
call UnitRemoveAbility(WX7,1093747534)
call UnitRemoveAbility(WX7,1093686856)
call UnitRemoveAbility(WX7,1093686858)
call UnitRemoveAbility(WX7,1093742649)
call UnitRemoveAbility(WX7,1093686871)
call UnitRemoveAbility(WX7,1093687373)
call UnitRemoveAbility(WX7,1093742927)
call UnitRemoveAbility(WX7,1093742930)
call UnitRemoveAbility(WX7,1093743671)
call UnitRemoveAbility(WX7,1093743672)
call UnitRemoveAbility(WX7,1093742933)
call UnitRemoveAbility(WX7,1093743673)
call UnitRemoveAbility(WX7,1093743153)
call UnitRemoveAbility(WX7,1093743158)
call UnitRemoveAbility(WX7,1093744441)
call UnitRemoveAbility(WX7,1097167980)
call UnitRemoveAbility(WX7,n1[0])
call UnitRemoveAbility(WX7,n1[1])
call UnitRemoveAbility(WX7,n1[2])
call UnitRemoveAbility(WX7,n1[3])
call UnitRemoveAbility(WX7,n1[4])
call UnitRemoveAbility(WX7,n1[5])
call UnitRemoveAbility(WX7,1093748533)
call UnitRemoveAbility(WX7,1093748531)
call UnitRemoveAbility(WX7,1093748534)
call UnitRemoveAbility(WX7,1093748532)
call NS7(GetHandleId(WX7),"Grapple",false)
call SetUnitPathing(WX7,true)
call PauseUnit(WX7,false)
call SetUnitFlyHeight(WX7,GetUnitDefaultFlyHeight(WX7),0)
call SetUnitScale(WX7,XX7(WX7)*CS,XX7(WX7)*CS,XX7(WX7)*CS)
call UnitRemoveAbility(WX7,1093747521)
call UnitRemoveAbility(WX7,1093747513)
call UnitRemoveAbility(WX7,1093747522)
call UnitRemoveAbility(WX7,1093747523)
call UnitRemoveAbility(WX7,1093748545)
call UnitRemoveAbility(WX7,1093752627)
call UnitRemoveAbility(WX7,1110459471)
call UnitRemoveAbility(WX7,1093752136)
call UnitRemoveAbility(WX7,1093752137)
call UnitRemoveAbility(WX7,1093753396)
call UnitRemoveAbility(WX7,1093753409)
call UnitRemoveAbility(WX7,1093753410)
call UnitRemoveAbility(WX7,1093753401)
call UnitRemoveAbility(WX7,1110459478)
call UnitRemoveAbility(WX7,1093809718)
call UnitRemoveAbility(WX7,1093809717)
call UnitRemoveAbility(WX7,1093809228)
call UnitRemoveAbility(WX7,1110459716)
call UnitRemoveAbility(WX7,1093808975)
call UnitRemoveAbility(WX7,1110459705)
call CD7(WX7,0)
if GetUnitTypeId(WX7)==1160786510 or GetUnitTypeId(WX7)==1160786511 then
call UnitRemoveAbility(WX7,1093808951)
call UnitAddAbility(WX7,1093808706)
call UnitRemoveAbility(WX7,1093808706)
if MV7(WX7,ZU[G14])!=null then
call UnitAddAbility(WX7,1093808951)
endif
endif
if GetUnitTypeId(WX7)==1311788373 or GetUnitTypeId(WX7)==1311788374 then
call UnitAddAbility(WX7,1093817921)
call UnitRemoveAbility(WX7,1093817921)
endif
if GetUnitTypeId(WX7)==1211123030 then
call UnitAddAbility(WX7,1093817687)
call UnitRemoveAbility(WX7,1093817687)
endif
call UnitRemoveAbility(WX7,1093816148)
call UnitRemoveAbility(WX7,1093816149)
call UnitRemoveAbility(WX7,1093816150)
call UnitRemoveAbility(WX7,1093808966)
set IN4=WX7
call ExecuteFunc("DQ8")
endfunction
function DR8 takes nothing returns boolean
if GetPlayerAlliance(GetOwningPlayer(GetFilterUnit()),QZ,ALLIANCE_SHARED_CONTROL) and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false then
set MZ=MZ+1
endif
return false
endfunction
function DS8 takes unit u,player p,real x,real y,boolean DT8 returns nothing
local group g=WS7()
set MZ=0
set QZ=p
call GroupEnumUnitsSelected(g,p,Condition(function DR8))
if MZ==0 and GetLocalPlayer()==p then
if DT8==false then
call ClearSelection()
call SelectUnit(u,true)
endif
call PanCameraToTimed(x,y,0)
endif
set MZ=0
call WR7(g)
set g=null
endfunction
function DU8 takes unit S4 returns boolean
return GetUnitTypeId(S4)==1211117641 or GetUnitTypeId(S4)==1211117642
endfunction
function DV8 takes unit DW8 returns nothing
local integer DX8
if MV7(DW8,ZU[DI4])!=null and GetUnitTypeId(DW8)!=1211117642 then
set DX8=R2I(GetItemCharges(MV7(DW8,ZU[DI4]))*.67)
if GetItemCharges(MV7(DW8,ZU[DI4]))==1 then
set DX8=0
endif
call SetItemCharges(MV7(DW8,ZU[DI4]),DX8)
call AddHeroXP(DW8,GetHeroXP(OA4[GetPlayerId(GetOwningPlayer(DW8))]),true)
call RemoveUnit(OA4[GetPlayerId(GetOwningPlayer(DW8))])
endif
endfunction
function DY8 takes unit u returns nothing
local integer OB7=GetHandleId(GetOwningPlayer(u))
local unit DZ8=O77(OB7,"Kobold0")
local unit DA8=O77(OB7,"Kobold1")
local unit DB8=O77(OB7,"Kobold2")
local unit DC8=O77(OB7,"Kobold3")
local unit D38=O77(OB7,"Kobold4")
local unit D68
set D68=DZ8
if D68!=null then
call RemoveUnit(D68)
endif
set D68=DA8
if D68!=null then
call RemoveUnit(D68)
endif
set D68=DB8
if D68!=null then
call RemoveUnit(D68)
endif
set D68=DC8
if D68!=null then
call RemoveUnit(D68)
endif
set D68=D38
if D68!=null then
call RemoveUnit(D68)
endif
set D68=null
set D38=null
set DC8=null
set DB8=null
set DA8=null
set DZ8=null
endfunction
function DL8 takes nothing returns boolean
call OZ7(GetTriggeringTrigger())
set OB4=false
return false
endfunction
function D18 takes unit D08 returns nothing
local integer OB7=GetHandleId(GetOwningPlayer(D08))
local unit DZ8=O77(OB7,"Kobold0")
local unit DA8=O77(OB7,"Kobold1")
local unit DB8=O77(OB7,"Kobold2")
local unit DC8=O77(OB7,"Kobold3")
local unit D38=O77(OB7,"Kobold4")
local unit D68
local real x=GetUnitX(DZ8)
local real y=GetUnitY(DZ8)
local trigger t
if OB4==false then
if TV7(GetOwningPlayer(DZ8))then
set x=GetRectCenterX(ED)
set y=GetRectCenterY(ED)
else
set x=GetRectCenterX(L9)
set y=GetRectCenterY(L9)
endif
else
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,2.,false)
call TriggerAddCondition(t,Condition(function DL8))
endif
set D68=DZ8
if D68!=null and D08!=D68 then
call ReviveHero(D68,x,y,false)
call SetUnitX(D68,x)
call SetUnitY(D68,y)
call DP8(D68)
call SetUnitPathing(D68,true)
call SetUnitState(D68,UNIT_STATE_MANA,$2710)
endif
set D68=DA8
if D68!=null and D08!=D68 then
call ReviveHero(D68,x,y,false)
call SetUnitX(D68,x)
call SetUnitY(D68,y)
call DP8(D68)
call SetUnitPathing(D68,true)
call SetUnitState(D68,UNIT_STATE_MANA,$2710)
endif
set D68=DB8
if D68!=null and D08!=D68 then
call ReviveHero(D68,x,y,false)
call SetUnitX(D68,x)
call SetUnitY(D68,y)
call DP8(D68)
call SetUnitPathing(D68,true)
call SetUnitState(D68,UNIT_STATE_MANA,$2710)
endif
set D68=DC8
if D68!=null and D08!=D68 then
call ReviveHero(D68,x,y,false)
call SetUnitX(D68,x)
call SetUnitY(D68,y)
call DP8(D68)
call SetUnitPathing(D68,true)
call SetUnitState(D68,UNIT_STATE_MANA,$2710)
endif
set D68=D38
if D68!=null and D08!=D68 then
call ReviveHero(D68,x,y,false)
call SetUnitX(D68,x)
call SetUnitY(D68,y)
call DP8(D68)
call SetUnitPathing(D68,true)
call SetUnitState(D68,UNIT_STATE_MANA,$2710)
endif
set t=null
set D68=null
set DC8=null
set DB8=null
set DA8=null
set DZ8=null
endfunction
function D58 takes unit WI7 returns nothing
local integer D28=GetUnitPointValue(WI7)
local unit D_8
if(D28==34)then
call ExecuteFunc("E48")
call ExecuteFunc("E78")
call ExecuteFunc("E88")
elseif(D28==37)then
call ExecuteFunc("E98")
call ExecuteFunc("ED8")
call ExecuteFunc("EE8")
call ExecuteFunc("EF8")
elseif(D28==38)then
call ExecuteFunc("EG8")
call ExecuteFunc("EH8")
call ExecuteFunc("EJ8")
elseif(D28==32)then
call ExecuteFunc("EK8")
call ExecuteFunc("EM8")
call ExecuteFunc("EN8")
elseif(D28==52)then
call ExecuteFunc("EO8")
call ExecuteFunc("EP8")
call ExecuteFunc("EQ8")
call ExecuteFunc("ER8")
elseif(D28==31)then
call ExecuteFunc("ES8")
call ExecuteFunc("ET8")
call ExecuteFunc("EU8")
elseif(D28==24)then
call ExecuteFunc("EV8")
call ExecuteFunc("EW8")
call ExecuteFunc("EX8")
call ExecuteFunc("EY8")
elseif(D28==5)then
call ExecuteFunc("EZ8")
call ExecuteFunc("EA8")
call ExecuteFunc("EB8")
elseif(D28==8)then
call ExecuteFunc("EC8")
call ExecuteFunc("E38")
call ExecuteFunc("E68")
call ExecuteFunc("EL8")
call ExecuteFunc("E18")
elseif(D28==3)then
call ExecuteFunc("E08")
call ExecuteFunc("E58")
call ExecuteFunc("E28")
call ExecuteFunc("E_8")
elseif(D28==95)then
call ExecuteFunc("F48")
call ExecuteFunc("F78")
call ExecuteFunc("F88")
call ExecuteFunc("F98")
call ExecuteFunc("FD8")
elseif(D28==20)then
call ExecuteFunc("FE8")
call ExecuteFunc("FF8")
call ExecuteFunc("po")
call ExecuteFunc("FG8")
elseif(D28==$C)then
call ExecuteFunc("FH8")
call ExecuteFunc("FI8")
call ExecuteFunc("FJ8")
elseif(D28==16)then
call ExecuteFunc("FK8")
call ExecuteFunc("FM8")
call ExecuteFunc("FN8")
call ExecuteFunc("FO8")
call ExecuteFunc("FP8")
elseif(D28==25)then
call ExecuteFunc("FQ8")
call ExecuteFunc("FR8")
elseif(D28==4)then
call ExecuteFunc("FS8")
call ExecuteFunc("FT8")
call ExecuteFunc("pZ")
call ExecuteFunc("FU8")
call ExecuteFunc("FV8")
call ExecuteFunc("FW8")
call SetUnitPathing(WI7,false)
set O74=true
set D_8=CreateUnit(GetOwningPlayer(WI7),GetUnitTypeId(WI7),GetUnitX(WI7),GetUnitY(WI7),GetUnitFacing(WI7))
call NS7(GetHandleId(D_8),"EnteredAlready",true)
set M7[GetPlayerId(GetOwningPlayer(WI7))]=D_8
call SetUnitPathing(D_8,false)
call SetUnitPosition(D_8,GetUnitX(WI7),GetUnitY(WI7))
if D4 then
call SetHeroXP(D_8,GetHeroXP(WI7),false)
call UnitAddItem(D_8,UnitItemInSlot(WI7,0))
call UnitAddItem(D_8,UnitItemInSlot(WI7,1))
call UnitAddItem(D_8,UnitItemInSlot(WI7,2))
call UnitAddItem(D_8,UnitItemInSlot(WI7,3))
call UnitAddItem(D_8,UnitItemInSlot(WI7,4))
call UnitAddItem(D_8,UnitItemInSlot(WI7,5))
endif
call YE7(WI7)
call SetUnitPathing(D_8,true)
call ClearSelectionForPlayer(GetOwningPlayer(D_8))
call SelectUnitAddForPlayer(D_8,GetOwningPlayer(D_8))
elseif(D28==7)then
call ExecuteFunc("FX8")
call ExecuteFunc("FY8")
call ExecuteFunc("FZ8")
elseif(D28==18)then
call ExecuteFunc("FA8")
call ExecuteFunc("FB8")
elseif(D28==36)then
call ExecuteFunc("PN")
elseif(D28==21)then
call ExecuteFunc("Po")
call ExecuteFunc("PO")
call ExecuteFunc("FC8")
call ExecuteFunc("BJX")
call ExecuteFunc("F38")
elseif(D28==$E)then
call ExecuteFunc("F68")
call ExecuteFunc("FL8")
call ExecuteFunc("F18")
call ExecuteFunc("F08")
call ExecuteFunc("Pr")
call ExecuteFunc("F58")
elseif(D28==$D)then
call ExecuteFunc("F28")
call ExecuteFunc("F_8")
call ExecuteFunc("G48")
call ExecuteFunc("G78")
elseif(D28==26)then
call ExecuteFunc("G88")
call ExecuteFunc("Pv")
call ExecuteFunc("PV")
call ExecuteFunc("APV")
call ExecuteFunc("G98")
elseif(D28==9)then
call ExecuteFunc("Pw")
call ExecuteFunc("GD8")
call ExecuteFunc("GE8")
call ExecuteFunc("GF8")
elseif(D28==$A)then
call ExecuteFunc("GG8")
call ExecuteFunc("GH8")
call ExecuteFunc("GI8")
call ExecuteFunc("GJ8")
call ExecuteFunc("GK8")
call ExecuteFunc("qb")
call ExecuteFunc("qB")
call ExecuteFunc("qc")
elseif(D28==23)then
call ExecuteFunc("qC")
call ExecuteFunc("qD")
call ExecuteFunc("qe")
call ExecuteFunc("qg")
elseif(D28==19)then
call ExecuteFunc("GM8")
call ExecuteFunc("GN8")
call ExecuteFunc("GO8")
call ExecuteFunc("JE1")
elseif(D28==22)then
call ExecuteFunc("GP8")
call ExecuteFunc("GQ8")
call ExecuteFunc("GR8")
call ExecuteFunc("GS8")
elseif(D28==17)then
call ExecuteFunc("GT8")
call ExecuteFunc("GU8")
call ExecuteFunc("JK1")
elseif(D28==1)then
call ExecuteFunc("GV8")
call ExecuteFunc("GW8")
call ExecuteFunc("GX8")
call ExecuteFunc("Y61")
elseif(D28==2)then
call ExecuteFunc("GY8")
call ExecuteFunc("GZ8")
call ExecuteFunc("GA8")
call ExecuteFunc("GB8")
elseif(D28==27)then
call ExecuteFunc("GC8")
call ExecuteFunc("G38")
call ExecuteFunc("G68")
call ExecuteFunc("GL8")
call ExecuteFunc("G18")
elseif(D28==82)then
call ExecuteFunc("G08")
call ExecuteFunc("G58")
call ExecuteFunc("G28")
call ExecuteFunc("G_8")
elseif(D28==75)then
call ExecuteFunc("H48")
call ExecuteFunc("H78")
call ExecuteFunc("H88")
call ExecuteFunc("H98")
elseif(D28==83)then
call ExecuteFunc("HD8")
call ExecuteFunc("HE8")
call ExecuteFunc("HF8")
call ExecuteFunc("HG8")
elseif(D28==112)then
call ExecuteFunc("HH8")
call ExecuteFunc("HI8")
call ExecuteFunc("HJ8")
call ExecuteFunc("HK8")
elseif(D28==108)then
call ExecuteFunc("HM8")
call ExecuteFunc("HN8")
call ExecuteFunc("YP1")
elseif(D28==69)then
call ExecuteFunc("HO8")
call ExecuteFunc("HP8")
call ExecuteFunc("HQ8")
call ExecuteFunc("HR8")
call ExecuteFunc("HS8")
elseif(D28==100)then
call ExecuteFunc("HT8")
call ExecuteFunc("HU8")
call ExecuteFunc("HV8")
call ExecuteFunc("HM1")
elseif(D28==102)then
call ExecuteFunc("HW8")
call ExecuteFunc("R2U")
elseif(D28==64)then
call ExecuteFunc("HX8")
call ExecuteFunc("HY8")
call ExecuteFunc("HZ8")
call ExecuteFunc("Y91")
elseif(D28==106)then
call ExecuteFunc("HA8")
call ExecuteFunc("HB8")
call ExecuteFunc("HC8")
elseif(D28==61)then
call ExecuteFunc("H38")
call ExecuteFunc("H68")
call ExecuteFunc("HL8")
elseif(D28==76)then
call ExecuteFunc("H18")
call ExecuteFunc("H08")
call ExecuteFunc("H58")
call ExecuteFunc("H28")
elseif(D28==80)then
call ExecuteFunc("H_8")
call ExecuteFunc("I48")
call ExecuteFunc("I78")
call ExecuteFunc("RM")
elseif(D28==62)then
call ExecuteFunc("I98")
call ExecuteFunc("ID8")
call ExecuteFunc("IE8")
elseif(D28==60)then
call ExecuteFunc("IF8")
call ExecuteFunc("IG8")
call ExecuteFunc("IH8")
elseif(D28==77)then
call ExecuteFunc("II8")
call ExecuteFunc("IJ8")
call ExecuteFunc("IK8")
call ExecuteFunc("IM8")
call ExecuteFunc("IN8")
elseif(D28==73)then
call ExecuteFunc("IO8")
call ExecuteFunc("J11")
call ExecuteFunc("R2J")
elseif(D28==81)then
call ExecuteFunc("IP8")
call ExecuteFunc("IQ8")
call ExecuteFunc("sa")
call ExecuteFunc("sB")
elseif(D28==66)then
call ExecuteFunc("IR8")
elseif(D28==78)then
call ExecuteFunc("IS8")
call ExecuteFunc("IT8")
call ExecuteFunc("IU8")
call ExecuteFunc("IV8")
elseif(D28==99)then
call ExecuteFunc("IW8")
call ExecuteFunc("IX8")
call ExecuteFunc("IY8")
call ExecuteFunc("IZ8")
call ExecuteFunc("IA8")
call ExecuteFunc("IB8")
elseif(D28==74)then
call ExecuteFunc("IC8")
call ExecuteFunc("I38")
call ExecuteFunc("I68")
call ExecuteFunc("IL8")
elseif(D28==105)then
call ExecuteFunc("I18")
call ExecuteFunc("I08")
elseif(D28==70)then
call ExecuteFunc("I58")
call ExecuteFunc("I28")
call ExecuteFunc("I_8")
elseif(D28==107)then
call ExecuteFunc("J48")
call ExecuteFunc("J78")
call ExecuteFunc("J88")
call ExecuteFunc("J98")
elseif(D28==79)then
call ExecuteFunc("JD8")
call ExecuteFunc("JE8")
call ExecuteFunc("JF8")
call ExecuteFunc("JG8")
elseif(D28==68)then
call ExecuteFunc("JH8")
call ExecuteFunc("JI8")
elseif(D28==84)then
call ExecuteFunc("JJ8")
call ExecuteFunc("JK8")
call ExecuteFunc("s7")
call ExecuteFunc("JM8")
elseif(D28==85)then
call ExecuteFunc("JN8")
call ExecuteFunc("JO8")
call ExecuteFunc("JP8")
call ExecuteFunc("JQ8")
call ExecuteFunc("JR8")
elseif(D28==86)then
call ExecuteFunc("JS8")
call ExecuteFunc("JT8")
call ExecuteFunc("JU8")
call ExecuteFunc("JV8")
elseif(D28==87)then
call ExecuteFunc("JW8")
call ExecuteFunc("JX8")
call ExecuteFunc("JY8")
call ExecuteFunc("JZ8")
elseif(D28==33)then
call ExecuteFunc("JA8")
call ExecuteFunc("JB8")
call ExecuteFunc("JC8")
elseif(D28==39)then
call ExecuteFunc("J38")
call ExecuteFunc("J68")
call ExecuteFunc("JL8")
elseif(D28==88)then
call ExecuteFunc("J18")
call ExecuteFunc("J08")
call ExecuteFunc("J58")
call ExecuteFunc("J28")
elseif(D28==40)then
call ExecuteFunc("J_8")
call ExecuteFunc("K48")
call ExecuteFunc("K78")
call ExecuteFunc("K88")
elseif D28==89 then
call ExecuteFunc("K98")
call ExecuteFunc("KD8")
elseif D28==90 then
call ExecuteFunc("KE8")
call ExecuteFunc("KF8")
call ExecuteFunc("KG8")
call ExecuteFunc("KH8")
elseif D28==71 then
call ExecuteFunc("KI8")
call ExecuteFunc("KJ8")
call ExecuteFunc("KK8")
call ExecuteFunc("KM8")
elseif D28==93 then
call ExecuteFunc("KN8")
call ExecuteFunc("KO8")
call ExecuteFunc("KP8")
call ExecuteFunc("KQ8")
elseif D28==42 then
call ExecuteFunc("KR8")
call ExecuteFunc("KS8")
call ExecuteFunc("KT8")
call ExecuteFunc("KU8")
elseif D28==91 then
call ExecuteFunc("KV8")
call ExecuteFunc("KW8")
call ExecuteFunc("KX8")
call ExecuteFunc("KY8")
call ExecuteFunc("KZ8")
call ExecuteFunc("KA8")
call ExecuteFunc("KB8")
call ExecuteFunc("KC8")
elseif D28==92 then
call ExecuteFunc("K38")
call ExecuteFunc("K68")
call ExecuteFunc("KL8")
call ExecuteFunc("K18")
elseif D28==41 then
call ExecuteFunc("K08")
call ExecuteFunc("K58")
call ExecuteFunc("K28")
call ExecuteFunc("K_8")
call ExecuteFunc("M48")
elseif D28==43 then
call ExecuteFunc("M78")
call ExecuteFunc("M88")
call ExecuteFunc("M98")
call ExecuteFunc("MD8")
call ExecuteFunc("ME8")
call ExecuteFunc("MF8")
elseif D28==44 then
call ExecuteFunc("MG8")
call ExecuteFunc("MH8")
call ExecuteFunc("MI8")
call ExecuteFunc("MJ8")
elseif D28==72 then
call ExecuteFunc("MK8")
call ExecuteFunc("MM8")
call ExecuteFunc("MN8")
call ExecuteFunc("MO8")
elseif D28==94 then
call ExecuteFunc("MP8")
elseif D28==6 then
call ExecuteFunc("MQ8")
call ExecuteFunc("MR8")
call ExecuteFunc("MS8")
elseif D28==104 then
call ExecuteFunc("MT8")
call ExecuteFunc("J1X")
elseif D28==65 then
call ExecuteFunc("MV8")
call ExecuteFunc("MW8")
call ExecuteFunc("MX8")
call ExecuteFunc("MY8")
elseif D28==45 then
call ExecuteFunc("MZ8")
call ExecuteFunc("MA8")
call ExecuteFunc("MB8")
call ExecuteFunc("MC8")
elseif D28==111 then
call ExecuteFunc("M38")
call ExecuteFunc("M68")
call ExecuteFunc("ML8")
elseif D28==63 then
call ExecuteFunc("M18")
call ExecuteFunc("M08")
elseif D28==46 then
call ExecuteFunc("M58")
call ExecuteFunc("M28")
call ExecuteFunc("M_8")
call ExecuteFunc("N48")
elseif D28==47 then
call ExecuteFunc("N78")
call ExecuteFunc("N88")
call ExecuteFunc("N98")
call ExecuteFunc("ND8")
elseif D28==$B then
call ExecuteFunc("NE8")
call ExecuteFunc("NF8")
elseif D28==96 then
call ExecuteFunc("NG8")
call ExecuteFunc("NH8")
call ExecuteFunc("NI8")
call ExecuteFunc("NJ8")
elseif D28==$F then
call ExecuteFunc("NK8")
call ExecuteFunc("NM8")
call ExecuteFunc("NN8")
call ExecuteFunc("NO8")
elseif D28==97 then
call ExecuteFunc("NP8")
call ExecuteFunc("NQ8")
call ExecuteFunc("NR8")
call ExecuteFunc("NS8")
call ExecuteFunc("NT8")
elseif D28==98 then
call ExecuteFunc("NU8")
call ExecuteFunc("NV8")
call ExecuteFunc("NW8")
call ExecuteFunc("NX8")
call ExecuteFunc("NY8")
elseif D28==67 then
call ExecuteFunc("NZ8")
call ExecuteFunc("NZA")
elseif D28==28 then
call ExecuteFunc("NA8")
elseif D28==51 then
call ExecuteFunc("NB8")
call ExecuteFunc("NC8")
call ExecuteFunc("N38")
call ExecuteFunc("N68")
call ExecuteFunc("NL8")
call ExecuteFunc("N18")
call ExecuteFunc("N08")
elseif D28==100 then
elseif D28==101 then
call ExecuteFunc("N58")
call ExecuteFunc("N28")
call ExecuteFunc("N_8")
call ExecuteFunc("O48")
elseif D28==48 then
call ExecuteFunc("O78")
call ExecuteFunc("O88")
call ExecuteFunc("O98")
call ExecuteFunc("OD8")
elseif D28==49 then
call ExecuteFunc("OE8")
call ExecuteFunc("OF8")
call ExecuteFunc("OG8")
call ExecuteFunc("OH8")
elseif D28==29 then
call ExecuteFunc("OI8")
call ExecuteFunc("OJ8")
call ExecuteFunc("OK8")
call ExecuteFunc("OM8")
elseif D28==50 then
call ExecuteFunc("ON8")
call ExecuteFunc("OO8")
call ExecuteFunc("OP8")
call ExecuteFunc("OQ8")
elseif D28==30 then
call ExecuteFunc("OR8")
call ExecuteFunc("OS8")
elseif D28==53 then
call ExecuteFunc("OT8")
call ExecuteFunc("OU8")
call ExecuteFunc("OV8")
call ExecuteFunc("OW8")
elseif D28==103 then
call ExecuteFunc("OX8")
elseif D28==54 then
call ExecuteFunc("OY8")
call ExecuteFunc("OZ8")
call ExecuteFunc("OA8")
call ExecuteFunc("OB8")
call ExecuteFunc("OC8")
elseif D28==55 then
call ExecuteFunc("O38")
call ExecuteFunc("O68")
call ExecuteFunc("OL8")
call ExecuteFunc("O18")
elseif D28==56 then
call ExecuteFunc("O08")
call ExecuteFunc("O58")
call ExecuteFunc("O28")
call ExecuteFunc("O_8")
elseif D28==57 then
call ExecuteFunc("P48")
call ExecuteFunc("P78")
call ExecuteFunc("P88")
call ExecuteFunc("P98")
elseif D28==109 then
call ExecuteFunc("PD8")
call ExecuteFunc("PE8")
call ExecuteFunc("PF8")
call ExecuteFunc("PG8")
call ExecuteFunc("PH8")
call ExecuteFunc("PI8")
elseif D28==110 then
call ExecuteFunc("PJ8")
call ExecuteFunc("PK8")
call ExecuteFunc("PM8")
call ExecuteFunc("PN8")
call ExecuteFunc("PO8")
elseif D28==35 then
call ExecuteFunc("Q51")
call ExecuteFunc("PP8")
call ExecuteFunc("PQ8")
elseif D28==58 then
call ExecuteFunc("RZ1")
call ExecuteFunc("RV1")
call ExecuteFunc("RW1")
call ExecuteFunc("RX1")
call ExecuteFunc("RY1")
set IN4=WI7
call ExecuteFunc("RJ1")
elseif D28==59 then
call ExecuteFunc("RK1")
call ExecuteFunc("RL1")
call ExecuteFunc("RM1")
call ExecuteFunc("RN1")
endif
call XL7("PR8",false)
set D_8=null
endfunction
function PS8 takes unit WI7 returns nothing
local integer D28=GetUnitPointValue(WI7)
if D28==500 then
call ExecuteFunc("PT8")
call ExecuteFunc("PU8")
call ExecuteFunc("PV8")
elseif D28==600 then
call ExecuteFunc("PW8")
call ExecuteFunc("PX8")
call ExecuteFunc("PY8")
call ExecuteFunc("PZ8")
call ExecuteFunc("PA8")
endif
endfunction
function PB8 takes player HY7,string PC8 returns nothing
if IsPlayerInForce(GetLocalPlayer(),GetPlayersEnemies(HY7))then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,E9,40,Q[GetPlayerId(HY7)]+(KZ4[GetPlayerId((HY7))])+"|r "+PC8)
endif
endfunction
function P38 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
set M14=true
call OZ7(t)
call DestroyFogModifier(CreateFogModifierRadius(Z7[0],FOG_OF_WAR_MASKED,O_4,P44,700,false,false))
call DestroyFogModifier(CreateFogModifierRadius(A7[0],FOG_OF_WAR_MASKED,O_4,P44,700,false,false))
set t=null
return false
endfunction
function P68 takes unit u returns boolean
return GetUnitTypeId(u)!=1211117645 and GetUnitTypeId(u)!=1311788365 and GetUnitTypeId(u)!=1211119431 and GetUnitTypeId(u)!=1211117657 and GetUnitTypeId(u)!=1211117642 and GetUnitTypeId(u)!=1211122232
endfunction
function PL8 takes nothing returns boolean
return(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) and IsUnitIllusion(GetTriggerUnit())==false and OO7(GetHandleId(GetTriggerUnit()),"EnteredAlready")==false and P68(GetTriggerUnit()))!=null
endfunction
function P18 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==1848651843
endfunction
function P08 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function P58 takes player j8 returns nothing
local group LQ7=WS7()
local boolexpr hP=Condition(function P18)
call GroupEnumUnitsOfPlayer(LQ7,j8,hP)
call ForGroup(LQ7,function P08)
call DestroyBoolExpr(hP)
call WR7(LQ7)
set hP=null
set LQ7=null
endfunction
function P28 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==1852010352
endfunction
function P_8 takes nothing returns nothing
if VT then
call UnitRemoveAbility(KU4[GetPlayerId(GetOwningPlayer(GetEnumUnit()))],1093743686)
call UnitRemoveAbility(KU4[GetPlayerId(GetOwningPlayer(GetEnumUnit()))],1093743685)
call UnitRemoveAbility(KU4[GetPlayerId(GetOwningPlayer(GetEnumUnit()))],1093743688)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093683508)==0 then
call UnitAddAbility(GetEnumUnit(),1093683508)
endif
endfunction
function Q48 takes player p returns nothing
local group g=WS7()
call GroupEnumUnitsOfPlayer(g,p,Condition(function P28))
call ForGroup(g,function P_8)
call WR7(g)
set g=null
endfunction
function u6 takes player Ua returns player
local integer O5=1
local integer Uc=0
local boolean O6=false
loop
if((Uc>0)and(NI7(O5,O6)!=null)and(IsPlayerInForce(NI7(O5,O6),QX4)))then
return NI7(O5,O6)
endif
if(Z7[O5]==Ua)then
set O6=true
set Uc=O5
elseif(A7[O5]==Ua)then
set Uc=O5
endif
set O5=O5+1
exitwhen O5>5
endloop
return null
endfunction
function Q78 takes unit WI7,player p returns string
local string s=(GetObjectName((1848656962)))
set s=L87(s,"$hero",GetUnitName(WI7))
set s=L87(s,"$p",(KZ4[GetPlayerId((p))]))
return s
endfunction
function Q88 takes unit Q98 returns nothing
local item QD8=UnitItemInSlot(Q98,0)
local item QF8=UnitItemInSlot(Q98,1)
local item QG8=UnitItemInSlot(Q98,2)
local item QH8=UnitItemInSlot(Q98,3)
local item QI8=UnitItemInSlot(Q98,4)
local item QJ8=UnitItemInSlot(Q98,5)
local integer QK8=KZ7(QD8)
local integer QM8=KZ7(QF8)
local integer QN8=KZ7(QG8)
local integer QO8=KZ7(QH8)
local integer QP8=KZ7(QI8)
local integer QQ8=KZ7(QJ8)
local integer QR8=0
call DisableTrigger(H94)
call UnitRemoveItem(Q98,QD8)
call UnitRemoveItem(Q98,QF8)
call UnitRemoveItem(Q98,QG8)
call UnitRemoveItem(Q98,QH8)
call UnitRemoveItem(Q98,QI8)
call UnitRemoveItem(Q98,QJ8)
call RemoveItem(QD8)
call RemoveItem(QF8)
call RemoveItem(QG8)
call RemoveItem(QH8)
call RemoveItem(QI8)
call RemoveItem(QJ8)
call EnableTrigger(H94)
if QK8>-1 then
set QR8=QR8+HK4[QK8]
endif
if QM8>-1 then
set QR8=QR8+HK4[QM8]
endif
if QN8>-1 then
set QR8=QR8+HK4[QN8]
endif
if QO8>-1 then
set QR8=QR8+HK4[QO8]
endif
if QP8>-1 then
set QR8=QR8+HK4[QP8]
endif
if QQ8>-1 then
set QR8=QR8+HK4[QQ8]
endif
call SetPlayerState(GetOwningPlayer(Q98),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(GetOwningPlayer(Q98),PLAYER_STATE_RESOURCE_GOLD)+QR8)
set dH[GetPlayerId(GetOwningPlayer(Q98))]=0
set QJ8=null
set QI8=null
set QH8=null
set QG8=null
set QF8=null
set QD8=null
endfunction
function QS8 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local player j8=GetOwningPlayer(WI7)
local real x
local real y
local region r=CreateRegion()
local player QT8=j8
local item QU8
local trigger t
local player p
local string s
if((QA4!=null)and(IsTriggerEnabled(QA4)))then
if((GetOwningPlayer(GetTriggerUnit())==QT4)and(QV4!=null))then
call SetUnitOwner(GetTriggerUnit(),QV4,true)
call SetUnitOwner(h4[512+GetPlayerId(QT4)],QT4,false)
call SetUnitOwner(h4[512+GetPlayerId(QV4)],QV4,false)
if(not oo[GetPlayerId(QV4)])then
call AdjustPlayerStateBJ($FA,QT4,PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(-$FA,QV4,PLAYER_STATE_RESOURCE_GOLD)
endif
call ExecuteFunc("UD")
set QV4=u6(QV4)
if(QV4!=null)then
if(not P4)then
call SetUnitOwner(h4[512+GetPlayerId(QT4)],QV4,false)
call SetUnitOwner(h4[512+GetPlayerId(QV4)],QT4,false)
endif
set s="为 "+Q[GetPlayerId(QV4)]+GetPlayerName(QV4)+"|r选择一个英雄。 输入 "+"|c00dd8dff"+"-px|r 取消选择。"
set p=QT4
else
call RemoveUnit(nc)
call RemoveUnit(Vc)
set nc=null
set Vc=null
set s="选择结束"
set p=QT4
if not P4 then
call UV7(QT4)
endif
endif
elseif((GetOwningPlayer(GetTriggerUnit())==QU4)and(QW4!=null))then
call SetUnitOwner(GetTriggerUnit(),QW4,true)
call SetUnitOwner(h4[512+GetPlayerId(QU4)],QU4,false)
call SetUnitOwner(h4[512+GetPlayerId(QW4)],QW4,false)
if(not oo[GetPlayerId(QW4)])then
call AdjustPlayerStateBJ($FA,QU4,PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(-$FA,QW4,PLAYER_STATE_RESOURCE_GOLD)
endif
call ExecuteFunc("UD")
set QW4=u6(QW4)
if(QW4!=null)then
if(not P4)then
call SetUnitOwner(h4[512+GetPlayerId(QU4)],QW4,false)
call SetUnitOwner(h4[512+GetPlayerId(QW4)],QU4,false)
endif
set s="为 "+Q[GetPlayerId(QW4)]+GetPlayerName(QW4)+"|r选择一个英雄。 输入 "+"|c00dd8dff"+"-px|r 取消选择。"
set p=QU4
else
call RemoveUnit(nc)
call RemoveUnit(Vc)
set nc=null
set Vc=null
set s="选择结束"
set p=QU4
if not P4 then
call UV7(QU4)
endif
endif
endif
endif
set j8=GetOwningPlayer(WI7)
set QT8=j8
if D4==false then
call CT7(GetOwningPlayer(WI7))
endif
if(GetObjectName((1848657992)))=="Language: English" and(MJ4[(GetUnitPointValue(WI7))]!="")then
call DisplayTimedTextToPlayer(j8,0,0,4,"A |c006699CC-tips|r command is available if you would like some pointers for this hero")
endif
if RT[GetPlayerId(j8)] then
call CG7(j8,GetUnitPointValue(WI7))
endif
if M14==false and(M7[GetPlayerId(Z7[1])]!=null and M7[GetPlayerId(Z7[2])]!=null and M7[GetPlayerId(Z7[3])]!=null and M7[GetPlayerId(Z7[4])]!=null and M7[GetPlayerId(Z7[5])]!=null and M7[GetPlayerId(A7[1])]!=null and M7[GetPlayerId(A7[2])]!=null and M7[GetPlayerId(A7[3])]!=null and M7[GetPlayerId(A7[4])]!=null and M7[GetPlayerId(A7[5])]!=null)then
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,7.,false)
call TriggerAddCondition(t,Condition(function P38))
set t=null
endif
set IG4[GetPlayerId(GetOwningPlayer((WI7)))]=false
call RegionAddRect(r,cE)
if O9 and S9==false then
set eo[GetPlayerId(j8)]=true
set j8=O97(StringHash("Global|ReverseMode"),(KZ4[GetPlayerId((j8))]))
call SetUnitOwner(WI7,j8,true)
if(GetPlayerController(j8)==MAP_CONTROL_COMPUTER)and not D4 and not RZ4 then
call NT7(R44,"AIHSwap|U",WI7)
call ExecuteFunc("Uf")
endif
endif
if TV7(GetOwningPlayer(WI7))then
if IsUnitInRegion(r,WI7)then
set x=GetRandomReal(GetRectMinX(ED),GetRectMaxX(ED))
set y=GetRandomReal(GetRectMinY(ED),GetRectMaxY(ED))
else
set x=GetUnitX(WI7)
set y=GetUnitY(WI7)
endif
else
if IsUnitInRegion(r,WI7)then
set x=GetRandomReal(GetRectMinX(L9),GetRectMaxX(L9))
set y=GetRandomReal(GetRectMinY(L9),GetRectMaxY(L9))
else
set x=GetUnitX(WI7)
set y=GetUnitY(WI7)
endif
endif
set P9[GetPlayerId(j8)]=true
if(not O9 or S9)then
if O04==false and O54==false then
call PanCameraToTimedForPlayer(j8,x,y,0)
endif
if GetUnitTypeId(WI7)!=1311788365 then
call ClearSelectionForPlayer(j8)
endif
call SelectUnitAddForPlayer(WI7,j8)
endif
call SetUnitX(WI7,x)
call SetUnitY(WI7,y)
if GetUnitTypeId(WI7)!=1311788365 then
set M7[GetPlayerId(j8)]=WI7
endif
call C17(j8,"9",GetUnitTypeId(WI7))
if O9 and S9==false then
call US7(QT8)
else
call US7(j8)
endif
call NS7(GetHandleId(WI7),"EnteredAlready",true)
if not X8 and not RZ4 then
set J[GetUnitPointValue(WI7)]=true
call UR7(GetUnitTypeId(WI7))
endif
if D4 then
if TV7(j8)then
set S7[0]=S7[0]+1
else
set S7[1]=S7[1]+1
endif
endif
if D4 or RZ4 then
set Be[GetPlayerId(j8)]=Be[GetPlayerId(j8)]+1
if Be[GetPlayerId(GetOwningPlayer(WI7))]>1 and WI7!=W7[GetPlayerId(GetOwningPlayer(WI7))]then
call DV8(W7[GetPlayerId(GetOwningPlayer(WI7))])
call SetHeroXP(WI7,GetHeroXP(W7[GetPlayerId(GetOwningPlayer(WI7))]),false)
if GetPlayerController(GetOwningPlayer(WI7))==MAP_CONTROL_USER then
call DisableTrigger(H94)
call UnitAddItem(WI7,UnitItemInSlot(W7[GetPlayerId(GetOwningPlayer(WI7))],0))
call UnitAddItem(WI7,UnitItemInSlot(W7[GetPlayerId(GetOwningPlayer(WI7))],1))
call UnitAddItem(WI7,UnitItemInSlot(W7[GetPlayerId(GetOwningPlayer(WI7))],2))
call UnitAddItem(WI7,UnitItemInSlot(W7[GetPlayerId(GetOwningPlayer(WI7))],3))
call UnitAddItem(WI7,UnitItemInSlot(W7[GetPlayerId(GetOwningPlayer(WI7))],4))
call UnitAddItem(WI7,UnitItemInSlot(W7[GetPlayerId(GetOwningPlayer(WI7))],5))
call EnableTrigger(H94)
else
call Q88(W7[GetPlayerId(GetOwningPlayer(WI7))])
endif
if DU8(W7[GetPlayerId(GetOwningPlayer(WI7))])then
call DY8(W7[GetPlayerId(GetOwningPlayer(WI7))])
else
call YE7(W7[GetPlayerId(GetOwningPlayer(WI7))])
endif
endif
endif
if j8!=Z7[0]and j8!=A7[0]then
if O9 then
if TimerGetElapsed(W)>60 then
call PB8(j8,(GetObjectName((1848652357)))+" "+GetUnitName(WI7))
elseif W4[GetPlayerId(QT8)] then
call PB8(j8,Q78(WI7,QT8))
else
call SetPlayerState(QT8,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(QT8,PLAYER_STATE_RESOURCE_GOLD)+$FA)
call PB8(j8,(GetObjectName((1848656945)))+" "+GetUnitName(WI7)+" "+(GetObjectName((1848656944)))+" "+(KZ4[GetPlayerId((QT8))]))
endif
elseif H34==false or j8==Le then
if(I[GetPlayerId(GetOwningPlayer(WI7))] and H34==false)then
call PB8(j8,(GetObjectName((1848656949)))+" "+GetUnitName(WI7)+".")
elseif((W4[GetPlayerId(j8)] and D4==false)or E4 or O4 or A8 or RZ4)then
call PB8(j8,(GetObjectName((1848656947)))+" "+GetUnitName(WI7)+".")
else
call PB8(j8,(GetObjectName((1848656946)))+" "+GetUnitName(WI7)+".")
endif
endif
endif
if H84 then
if O9 then
call P58(QT8)
else
call P58(j8)
endif
endif
if(O04 or O54)and H84 then
call P58(j8)
endif
call Q48(j8)
if(GetUnitTypeId(WI7)==1160785973)then
call DisplayTimedTextToPlayer(j8,0,E9,60.," ")
call DisplayTimedTextToPlayer(j8,0,E9,60.,"|c00ff0303"+(GetObjectName((1848653384)))+(GetObjectName((1848656706)))+" "+(GetObjectName((1848653381)))+"|r")
elseif GetUnitTypeId(WI7)==1328558154 or GetUnitTypeId(WI7)==1311781174 or GetUnitTypeId(WI7)==1430468913 or GetUnitTypeId(WI7)==1162032181 then
call DisplayTimedTextToPlayer(j8,0,E9,10.," ")
call DisplayTimedTextToPlayer(j8,0,E9,10.,"|c00ff0303"+(GetObjectName((1848657715)))+"|r")
endif
if(GetUnitTypeId(WI7)==1160786242)then
call DisplayTimedTextToPlayer(j8,0,E9,30.," ")
call DisplayTimedTextToPlayer(j8,0,E9,30.,"|c00ff0303"+(GetObjectName((1848653392)))+" "+(GetObjectName((1848653397)))+"|r")
endif
if(W4[GetPlayerId(j8)]==false)then
if(Y8)then
call SetPlayerState(j8,PLAYER_STATE_RESOURCE_GOLD,$AF+GetPlayerState(j8,PLAYER_STATE_RESOURCE_GOLD))
endif
endif
if OO7(StringHash("HeroInit:"+I2S(GetUnitPointValue(WI7))),"Initialized")==false then
call NS7(StringHash("HeroInit:"+I2S(GetUnitPointValue(WI7))),"Initialized",true)
call D58(WI7)
call PS8(WI7)
endif
set IN4=WI7
call ExecuteFunc("QV8")
if ib[GetPlayerId(GetLocalPlayer())]==false then
if TZ7(j8)then
call SetPlayerName(j8,KZ4[GetPlayerId((j8))])
else
call SetPlayerName(j8,(KZ4[GetPlayerId((j8))])+" ("+W77(M7[GetPlayerId(j8)])+")")
endif
endif
call DisplayTimedTextToPlayer(p,0,0,10.,s)
set p=null
call RemoveRegion(r)
set WI7=null
set QU8=null
endfunction
function QW8 takes nothing returns boolean
return(IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO))!=null
endfunction
function QX8 takes nothing returns nothing
if((QA4!=null)and(IsTriggerEnabled(QA4)))then
if((GetOwningPlayer(GetSoldUnit())==QT4)and(QV4!=null))then
return
elseif((GetOwningPlayer(GetSoldUnit())==QU4)and(QW4!=null))then
return
endif
endif
call US7(GetOwningPlayer(GetSoldUnit()))
endfunction
function QY8 takes nothing returns boolean
local integer QZ8
local integer O5=1
loop
exitwhen O5>$B
if O5==6 then
set O5=7
endif
set QZ8=0
if(IsPlayerInForce(Player(O5),QX4))then
set CU4[O5]=CU4[O5]+(I2R(Y74[48+O5])/8)
set QZ8=R2I(CU4[O5])
if QZ8<0 then
set QZ8=0
endif
set CU4[O5]=CU4[O5]-I2R(QZ8)
endif
if(Y4)then
set QZ8=QZ8+2
else
set QZ8=QZ8+1
endif
call SetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD)+QZ8)
set O5=O5+1
endloop
return false
endfunction
function R7c takes nothing returns nothing
if GetUnitTypeId(GetTriggerUnit())!='N0MM' then
call UnitResetCooldown(GetTriggerUnit())
call FlushChildHashtable(ZCC,GetHandleId(GetTriggerUnit()))
if HaveSavedInteger(L7,GetHandleId(GetTriggerUnit()),4251)then
call RemoveSavedInteger(L7,GetHandleId(GetTriggerUnit()),4251)
endif
endif
endfunction
function QC8 takes nothing returns boolean
local player p
local integer i
local integer id
local integer Q38
set i=1
loop
exitwhen i>5
set p=Z7[i]
set id=GetPlayerId(p)
set Q38=GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)
if Q38<VH4[id]then
set VH4[id]=Q38
endif
set p=A7[i]
set id=GetPlayerId(p)
set Q38=GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)
if Q38<VH4[id]then
set VH4[id]=Q38
endif
set i=i+1
endloop
return false
endfunction
function PZ1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local integer id=(LoadInteger(L7,(I97),(758)))
set EV0[id]=GetPlayerState(Player(id),PLAYER_STATE_RESOURCE_GOLD)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
return false
endfunction
function PV1 takes nothing returns boolean
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local integer id=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function PZ1))
call SaveInteger(L7,(I97),(758),(id))
set t=null
return false
endfunction
function PW1 takes nothing returns boolean
local player p
local integer i
local integer id
local integer Q38
set i=1
loop
exitwhen i>5
set p=Z7[i]
set id=GetPlayerId(p)
set Q38=GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)
if VSS[id]<(TimerGetElapsed(W))then
set EV0[id]=Q38
elseif Q38>EV0[id]then
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,EV0[id])
else
set EV0[id]=Q38
endif
set p=A7[i]
set id=GetPlayerId(p)
set Q38=GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)
if VSS[id]<(TimerGetElapsed(W))then
set EV0[id]=Q38
elseif Q38>EV0[id]then
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,EV0[id])
else
set EV0[id]=Q38
endif
set i=i+1
endloop
return false
endfunction
function Q68 takes nothing returns nothing
endfunction
function QL8 takes nothing returns nothing
local integer id=GetUnitTypeId(GetTriggerUnit())
if GetOwningPlayer(GetTriggerUnit())==B7 then
set MU[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=MU[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
elseif(id==1969711215)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set U7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=U7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1970169187)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set U7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=U7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1702061422)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set U7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=U7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1701081721)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set U7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=U7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1966092337)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set U7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=U7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1966092338)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set U7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=U7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1697656918)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set U7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=U7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1697656919)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set U7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=U7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1700946284)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set U7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=U7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1697657398)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set U7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=U7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1970107511)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set U7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=U7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1966092370)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set U7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=U7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
endif
call Q68()
endfunction
function Q18 takes integer i returns nothing
local integer x=1
local integer y=1
set NM4[i]=null
set NN4[i]=0
set NO4[i]=false
loop
exitwhen y>NP4
if NN4[y]!=0 then
set qu[x]=NM4[y]
set Qu[x]=NN4[y]
set Su[x]=NO4[y]
set NM4[y]=null
set NN4[y]=0
set NO4[y]=false
set x=x+1
endif
set y=y+1
endloop
set NP4=x-1
set x=1
loop
exitwhen x>NP4
set NM4[x]=qu[x]
set NN4[x]=Qu[x]
set NO4[x]=Su[x]
set x=x+1
endloop
endfunction
function Q08 takes nothing returns nothing
local integer T8
local integer U8
local integer Q58
local integer Q28
local integer i
local player p
set xY=xY+1
set HB4=0
set HC4=0
set i=0
loop
exitwhen i>5
set p=Z7[i]
if M8(p)then
set HB4=HB4+1
endif
set p=A7[i]
if M8(p)then
set HC4=HC4+1
endif
set i=i+1
endloop
if a2==false then
set ae=HB4
set ne=HC4
endif
set T8=1
set U8=5
set Q58=1
loop
exitwhen T8>U8
set p=Z7[T8]
if M8(p)then
set O7[Q58]=p
set Q58=Q58+1
endif
set T8=T8+1
endloop
set T8=1
set U8=5
set Q58=1
loop
exitwhen T8>U8
set p=A7[T8]
if M8(p)then
set P7[Q58]=p
set Q58=Q58+1
endif
set T8=T8+1
endloop
if xY==1 then
set T4=CreateMultiboardBJ(7+6+2,3+HC4+HB4," ")
call MultiboardMinimize(T4,true)
endif
call l6(T4,2,1,"CD")
call l6(T4,3,1,"|c00838B8BL|r")
call l6(T4,4,1,Dj+"K|r")
call l6(T4,5,1,gj+"D|r")
call l6(T4,6,1,Gj+"A|r")
call l6(T4,1,2,GetObjectName(1848656971))
call l6(T4,4,2,Dj+"0|r")
call l6(T4,5,2,gj+"0|r")
call l6(T4,1,3+HB4,GetObjectName(1848656975))
call l6(T4,4,3+HB4,Dj+"0|r")
call l6(T4,5,3+HB4,gj+"0|r")
call U6(T4,1,2,(U67(SubString(Q[GetPlayerId((Z7[0]))],4,6)))/ 255.*100,(U67(SubString(Q[GetPlayerId((Z7[0]))],6,8)))/ 255.*100,(U67(SubString(Q[GetPlayerId((Z7[0]))],8,$A)))/ 255.*100,0)
call U6(T4,1,3+HB4,(U67(SubString(Q[GetPlayerId((A7[0]))],4,6)))/ 255.*100,(U67(SubString(Q[GetPlayerId((A7[0]))],6,8)))/ 255.*100,(U67(SubString(Q[GetPlayerId((A7[0]))],8,$A)))/ 255.*100,0)
set T8=1
set U8=3+HC4+HB4
loop
exitwhen T8>U8
call x7(T4,1,T8,10.8)
call x7(T4,2,T8,2)
call x7(T4,3,T8,2)
call x7(T4,4,T8,1.3)
call x7(T4,5,T8,1.3)
call x7(T4,6,T8,1.3)
call x7(T4,7,T8,2.5)
call x7(T4,8,T8,.01)
call x7(T4,9,T8,.01)
call x7(T4,$A,T8,.01)
call x7(T4,$B,T8,.01)
call x7(T4,$C,T8,.01)
call x7(T4,$D,T8,.01)
call x7(T4,$E,T8,.01)
call x7(T4,$F,T8,.01)
set T8=T8+1
endloop
set T8=1
set U8=7+6+2
loop
exitwhen T8>U8
set Q58=1
set Q28=3+HC4+HB4
loop
exitwhen Q58>Q28
call s6(T4,T8,Q58,true,false)
set Q58=Q58+1
endloop
set T8=T8+1
endloop
set T8=1
set U8=HB4
loop
exitwhen T8>U8
call s6(T4,1,T8+2,true,true)
call U6(T4,7,T8+2,$FF,$CC,0,0)
set N94[GetPlayerId(O7[T8])]=1-1
set ND4[GetPlayerId(O7[T8])]=T8+2-1
call l6(T4,1,T8+2,(KZ4[GetPlayerId((O7[T8]))]))
if TA7(O7[T8])then
call U6(T4,1,T8+2,(U67(SubString(Q[GetPlayerId((O7[T8]))],4,6)))/ 255.*100,(U67(SubString(Q[GetPlayerId((O7[T8]))],6,8)))/ 255.*100,(U67(SubString(Q[GetPlayerId((O7[T8]))],8,$A)))/ 255.*100,0)
call U6(T4,2,T8+2,(U67(SubString(Q[GetPlayerId((O7[T8]))],4,6)))/ 255.*100,(U67(SubString(Q[GetPlayerId((O7[T8]))],6,8)))/ 255.*100,(U67(SubString(Q[GetPlayerId((O7[T8]))],8,$A)))/ 255.*100,0)
else
call l6(T4,1,T8+2,"|c00333333"+(KZ4[GetPlayerId((O7[T8]))])+"|r")
endif
call l6(T4,4,(T8+2),Dj+"0|r")
call l6(T4,5,(T8+2),gj+"0|r")
call l6(T4,6,(T8+2),Gj+"0|r")
set T8=T8+1
endloop
set T8=1
set U8=HC4
loop
exitwhen T8>U8
call s6(T4,1,T8+3+HB4,true,true)
call U6(T4,7,T8+3+HB4,$FF,$CC,0,0)
set N94[GetPlayerId(P7[T8])]=1-1
set ND4[GetPlayerId(P7[T8])]=T8+3+HB4-1
call l6(T4,1,T8+3+HB4,(KZ4[GetPlayerId((P7[T8]))]))
if TA7(P7[T8])then
call U6(T4,1,T8+3+HB4,(U67(SubString(Q[GetPlayerId((P7[T8]))],4,6)))/ 255.*100,(U67(SubString(Q[GetPlayerId((P7[T8]))],6,8)))/ 255.*100,(U67(SubString(Q[GetPlayerId((P7[T8]))],8,$A)))/ 255.*100,0)
call U6(T4,2,T8+3+HB4,(U67(SubString(Q[GetPlayerId((P7[T8]))],4,6)))/ 255.*100,(U67(SubString(Q[GetPlayerId((P7[T8]))],6,8)))/ 255.*100,(U67(SubString(Q[GetPlayerId((P7[T8]))],8,$A)))/ 255.*100,0)
else
call l6(T4,1,T8+3+HB4,"|c00333333"+(KZ4[GetPlayerId((P7[T8]))])+"|r")
endif
call l6(T4,4,(T8+3+HB4),Dj+"0|r")
call l6(T4,5,(T8+3+HB4),gj+"0|r")
call l6(T4,6,(T8+3+HB4),Gj+"0|r")
set T8=T8+1
endloop
set oY=1
set rY=3+HC4+HB4-2
if V8 and(GetLocalPlayer()==KX4 or GetLocalPlayer()==KY4)and xY==1 then
call MultiboardDisplay(T4,false)
endif
call s6(T4,7,1,false,true)
call P6(T4,7,1,"UI\\Feedback\\Resources\\ResourceGold.blp")
call Q68()
if xY>1 then
call TriggerExecute(vA)
endif
endfunction
function Q_8 takes integer O5,boolean R48 returns string
if TZ4 then
endif
if not IsPlayerInForce(Player(O5),QX4)then
return" "
elseif M7[O5]==null then
return "|c00a0a0a0"+"选人|r"
elseif not M87(M7[O5])then
return "|c00a0a0a0"+"死亡|r"
elseif Bz<QD4-25. then
return "|c00a0a0a0"+"待命|r"
elseif Bz<QD4 then
return"移动"
elseif eY[O5]==1 then
if ME7(M7[O5])then
return"撤退"
elseif G0[48+O5]then
return"逃跑"
elseif h4[O5]!=null then
if R48 then
return">"+Q[GetPlayerId(GetOwningPlayer(h4[O5]))]+W87(h4[O5])+"|r"
else
return"攻击 "+Q[GetPlayerId(GetOwningPlayer(h4[O5]))]+W87(h4[O5])+"|r"
endif
elseif h9[64+O5]!=null then
return"Def Tower"+JU7(eY[80+O5],false)
elseif eY[80+O5]<=2 then
return"推进"+JU7(eY[80+O5],false)
else
return"推进"
endif
elseif eY[O5]==2 then
return"回血"
elseif eY[O5]==3 then
return"防御"+JU7(LU4[64+O5],true)
elseif eY[O5]==4 then
return"留守"+JU7(LU4[64+O5],true)
elseif eY[O5]==9 then
if eY[272+O5]==0 then
return"换线"
elseif h8[96+O5]!=null then
set bj_forLoopAIndex=GetPlayerId(GetOwningPlayer(h8[96+O5]))
return"伏击 "+Q[bj_forLoopAIndex]+I2S(bj_forLoopAIndex)+"|r"
else
return GetObjectName(1496330545)+JU7(eY[288+O5],false)
endif
elseif eY[O5]==$A then
return"打野"
elseif eY[O5]==$B then
if R48 then
return">|c00ffcc00Roshan|r"
else
return"攻击 |c00ffcc00Roshan|r"
endif
endif
return" "
endfunction
function R78 takes nothing returns nothing
local integer T8
local integer U8
local string R88
call l6(T4,4,2,Dj+I2S(T[GetPlayerId(Z7[0])])+"|r")
call l6(T4,5,2,gj+I2S(V[GetPlayerId(Z7[0])])+"|r")
call l6(T4,4,3+HB4,Dj+I2S(T[GetPlayerId(A7[0])])+"|r")
call l6(T4,5,3+HB4,gj+I2S(V[GetPlayerId(A7[0])])+"|r")
set T8=1
set U8=HB4
loop
exitwhen T8>U8
call l6(T4,4,(T8+2),Dj+I2S(T[GetPlayerId(O7[T8])])+"|r")
call l6(T4,5,(T8+2),gj+I2S(V[GetPlayerId(O7[T8])])+"|r")
call l6(T4,6,(T8+2),Gj+I2S(IU[GetPlayerId(O7[T8])])+"|r")
set R88=Q_8(GetPlayerId(O7[T8]),false)
if O7[T8]==QT4 and(not TZ4)then
set R88="|c00ffcc00- 队长 -|r"
endif
if(not B24[32+GetPlayerId(GetLocalPlayer())])then
set R88=" "
elseif(not(IsPlayerAlly(GetLocalPlayer(),Z7[0])or TZ4))then
set R88=" "
endif
call l6(T4,$F,T8+2,R88)
set R88=" "
if B24[80+GetPlayerId(GetLocalPlayer())]and TZ7(O7[T8])then
if EU then
set R88="|c0020c060"+"+"+I2S(R2I(GetPlayerHandicapXPBJ(O7[T8])-100.))+"%|r"
endif
if EU and FU then
set R88=R88+" - "
endif
if FU then
set R88=R88+"|c00ffcc60"+"+"+I2S(Y74[48+GetPlayerId(O7[T8])])+"|r"
endif
endif
call l6(T4,$E,(T8+2),R88)
set T8=T8+1
endloop
set T8=1
set U8=HC4
loop
exitwhen T8>U8
call l6(T4,4,(T8+3+HB4),Dj+I2S(T[GetPlayerId(P7[T8])])+"|r")
call l6(T4,5,(T8+3+HB4),gj+I2S(V[GetPlayerId(P7[T8])])+"|r")
call l6(T4,6,(T8+3+HB4),Gj+I2S(IU[GetPlayerId(P7[T8])])+"|r")
set R88=Q_8(GetPlayerId(P7[T8]),false)
if P7[T8]==QU4 and(not TZ4)then
set R88="|c00ffcc00- 队长 -|r"
endif
if(not B24[32+GetPlayerId(GetLocalPlayer())])then
set R88=" "
elseif(not(IsPlayerAlly(GetLocalPlayer(),A7[0])or TZ4))then
set R88=" "
endif
call l6(T4,$F,(T8+3+HB4),R88)
set R88=" "
if B24[80+GetPlayerId(GetLocalPlayer())]and TZ7(P7[T8])then
if EU then
set R88="|c0020c060"+"+"+I2S(R2I(GetPlayerHandicapXPBJ(P7[T8])-100.))+"%|r"
endif
if EU and FU then
set R88=R88+" - "
endif
if FU then
set R88=R88+"|c00ffcc60"+"+"+I2S(Y74[48+GetPlayerId(P7[T8])])+"|r"
endif
endif
call l6(T4,$E,(T8+3+HB4),R88)
set T8=T8+1
endloop
endfunction
function R98 takes nothing returns boolean
return(GetUnitTypeId(GetTriggerUnit())==1697656914)or(GetUnitTypeId(GetTriggerUnit())==1697657137)or(GetUnitTypeId(GetTriggerUnit())==1697656915)or(GetUnitTypeId(GetTriggerUnit())==1697657145)
endfunction
function RD8 takes nothing returns nothing
set F[1]=(F[1]+1)
endfunction
function RE8 takes nothing returns boolean
return(GetUnitTypeId(GetTriggerUnit())==1966092365)or(GetUnitTypeId(GetTriggerUnit())==1966092356)or(GetUnitTypeId(GetTriggerUnit())==1966092366)or(GetUnitTypeId(GetTriggerUnit())==1966092372)
endfunction
function RF8 takes nothing returns nothing
set F[2]=(F[2]+1)
endfunction
function RG8 takes integer a returns integer
local integer i=0
local integer x=0
local string s=I2S(a)
loop
exitwhen i>StringLength(s)
if SubString(s,i,i+1)=="1" then
set x=x+1
endif
set i=i+1
endloop
return x
endfunction
function RH8 takes player RI8,integer RJ8 returns string
if IsPlayerAlly(GetLocalPlayer(),RI8) then
return LZ7(UnitItemInSlot(M7[GetPlayerId(RI8)],RJ8-1))
else
return"UI\\Widgets\\Console\\Undead\\undead-inventory-slotfiller.blp"
endif
endfunction
function RK8 takes nothing returns nothing
local integer T8
local integer U8
local string CP7
local real RM8
local integer r
local integer i
local integer array time_1a
local string array color_1a
local integer index_1a=0
local integer array time_1b
local string array color_1b
local integer index_1b=0
local integer x=0
local integer id
local string RN8
local string RO8
local string RP8
local string RQ8
local string RR8
local string s2=" "
local string s
local real RS8
local string spacer
local integer RT8=0
local string RU8=""
local string RV8=""
local integer RW8=0
local integer RX8=0
local string RY8=""
local string R88
if T4==null then
return
endif
set i=1
loop
exitwhen i>5
set r=R2I(TimerGetRemaining(U[GetPlayerId(Z7[i])]))
if r>0 then
set RT8=RT8+RG8(r)
if RW8==0 then
if r<$A then
set RU8=Q[GetPlayerId(Z7[i])]+"0"+I2S(r)+" |r"
else
set RU8=Q[GetPlayerId(Z7[i])]+I2S(r)+" |r"
endif
else
if r<$A then
set RU8=RU8+Hj+"| |r"+Q[GetPlayerId(Z7[i])]+"0"+I2S(r)+" |r"
else
set RU8=RU8+Hj+"| |r"+Q[GetPlayerId(Z7[i])]+I2S(r)+" |r"
endif
endif
set RW8=RW8+1
endif
set i=i+1
endloop
if RW8>0 then
if IsPlayerAlly(GetLocalPlayer(),Z7[0]) then
set RU8=Hj+"["+GetObjectName(1848658515)+" |r"+RU8+Hj+"]|r"
else
set RU8=fj+"["+GetObjectName(1848658514)+" |r"+RU8+fj+"]|r"
endif
endif
set i=1
loop
exitwhen i>5
set r=R2I(TimerGetRemaining(U[GetPlayerId(A7[i])]))
if r>0 then
set RT8=RT8+RG8(r)
if RX8==0 then
if r<$A then
set RV8=Q[GetPlayerId(A7[i])]+"0"+I2S(r)+" |r"
else
set RV8=Q[GetPlayerId(A7[i])]+I2S(r)+" |r"
endif
else
if r<$A then
set RV8=RV8+Hj+"| |r"+Q[GetPlayerId(A7[i])]+"0"+I2S(r)+" |r"
else
set RV8=RV8+Hj+"| |r"+Q[GetPlayerId(A7[i])]+I2S(r)+" |r"
endif
endif
set RX8=RX8+1
endif
set i=i+1
endloop
if RX8>0 then
if IsPlayerAlly(GetLocalPlayer(),A7[0]) then
set RV8=Hj+"["+GetObjectName(1848658515)+" |r"+RV8+Hj+"]|r"
else
set RV8=fj+"["+GetObjectName(1848658514)+" |r"+RV8+fj+"]|r"
endif
endif
if T4!=null then
set id=GetPlayerId(GetLocalPlayer())
if id>=0 and id<16 then
if AW[x]then
set RN8=I2S(T[id])
set RO8=I2S(V[id])
set RP8=I2S(IU[id])
set RQ8=I2S(T7[id])
set RR8=I2S(U7[id])
set s2=" |c00838B8B("+RN8+"/"+RO8+"/"+RP8+" - "+RQ8+"/"+RR8+" - |r|c00FFDC00"+I2S(VH4[id])+"|r |c00838B8B)|r"
endif
endif
endif
if RX8==0 and RW8==0 then
call MultiboardSetTitleText(T4,s2)
else
if IsPlayerAlly(GetLocalPlayer(),Z7[0]) then
call MultiboardSetTitleText(T4,RV8+" "+RU8+" "+s2)
else
call MultiboardSetTitleText(T4,RU8+" "+RV8+" "+s2)
endif
endif
if(V8 and(GetLocalPlayer()==KX4 or GetLocalPlayer()==KY4))==false then
call MultiboardDisplay(T4,true)
endif
if Nb[GetPlayerId(GetLocalPlayer())]==false then
call SetWaterBaseColor(0,0,$FF,$FF)
endif
set R88=" "
if B24[32+GetPlayerId(GetLocalPlayer())]then
set R88=L04
endif
call l6(T4,$F,1,R88)
set R88=" "
if B24[80+GetPlayerId(GetLocalPlayer())]then
set R88="   "
if EU then
set R88=R88+L54
endif
if EU and FU then
set R88=R88+" - "
endif
if FU then
set R88=R88+L24
endif
endif
call l6(T4,$E,1,R88)
set T8=1
set U8=HB4
loop
exitwhen T8>U8
call P6(T4,1,T8+2,WE7(M7[GetPlayerId(O7[T8])]))
call l6(T4,3,T8+2,"|c00838B8B"+I2S(GetHeroLevel(M7[GetPlayerId(O7[T8])]))+"|r")
if ab[GetPlayerId(GetLocalPlayer())]then
call x7(T4,7,1,3)
call x7(T4,8,1,2.8)
call x7(T4,9,1,.8)
call x7(T4,$A,1,.8)
call x7(T4,$B,1,.8)
call x7(T4,$C,1,.8)
call x7(T4,$D,1,JO7(B24[32+GetPlayerId(GetLocalPlayer())],1.5,.1))
call x7(T4,7,T8+2,3)
call x7(T4,8,T8+2,1.1)
call x7(T4,9,T8+2,1.1)
call x7(T4,$A,T8+2,1.1)
call x7(T4,$B,T8+2,1.1)
call x7(T4,$C,T8+2,1.1)
call x7(T4,$D,T8+2,JO7(B24[32+GetPlayerId(GetLocalPlayer())],1.5,.1))
call s6(T4,8,T8+2,false,true)
call s6(T4,9,T8+2,false,true)
call s6(T4,$A,T8+2,false,true)
call s6(T4,$B,T8+2,false,true)
call s6(T4,$C,T8+2,false,true)
call s6(T4,$D,T8+2,false,true)
call l6(T4,8,1,"装备")
else
call x7(T4,7,1,3)
call x7(T4,8,1,2.8)
call x7(T4,9,1,.8)
call x7(T4,$A,1,.8)
call x7(T4,$B,1,.8)
call x7(T4,$C,1,.8)
call x7(T4,$D,1,JO7(B24[32+GetPlayerId(GetLocalPlayer())],1.5,.1))
call x7(T4,7,T8+2,3)
call x7(T4,8,T8+2,1.1)
call x7(T4,9,T8+2,1.1)
call x7(T4,$A,T8+2,1.1)
call x7(T4,$B,T8+2,1.1)
call x7(T4,$C,T8+2,1.1)
call x7(T4,$D,T8+2,JO7(B24[32+GetPlayerId(GetLocalPlayer())],1.5,.1))
call s6(T4,8,T8+2,false,true)
call s6(T4,9,T8+2,false,true)
call s6(T4,$A,T8+2,false,true)
call s6(T4,$B,T8+2,false,true)
call s6(T4,$C,T8+2,false,true)
call s6(T4,$D,T8+2,false,true)
call l6(T4,8,1,"装备")
endif
call P6(T4,8,T8+2,RH8(O7[T8],1))
call P6(T4,9,T8+2,RH8(O7[T8],2))
call P6(T4,$A,T8+2,RH8(O7[T8],3))
call P6(T4,$B,T8+2,RH8(O7[T8],4))
call P6(T4,$C,T8+2,RH8(O7[T8],5))
call P6(T4,$D,T8+2,RH8(O7[T8],6))
if(WK7(M7[GetPlayerId(O7[T8])])and M7[GetPlayerId(O7[T8])]!=null and TimerGetRemaining(U[GetPlayerId(O7[T8])])>0)then
if IsPlayerAlly(GetLocalPlayer(),O7[T8])then
set RY8=Hj+" ("+(I2S(R2I(TimerGetRemaining(U[GetPlayerId(O7[T8])]))))+")|r"
else
set RY8=fj+" ("+(I2S(R2I(TimerGetRemaining(U[GetPlayerId(O7[T8])]))))+")|r"
endif
else
set RY8="  "
endif
if U2[GetPlayerId(O7[T8])]then
call l6(T4,1,T8+2,"|c00333333"+(KZ4[GetPlayerId((O7[T8]))])+"|r"+RY8)
else
call l6(T4,1,T8+2,(KZ4[GetPlayerId((O7[T8]))])+RY8)
endif
set RS8=(TimerGetRemaining(N84[GetPlayerId((O7[T8]))]))
if RS8>0 then
set s=I2S(R2I(RS8))
else
set s=" "
endif
if IsPlayerAlly(GetLocalPlayer(),O7[T8])==false then
call l6(T4,7,T8+2," ")
set s=" "
else
call l6(T4,7,T8+2,"|cffffcc00"+I2S(R2I(GetPlayerState(O7[T8],PLAYER_STATE_RESOURCE_GOLD)))+"|r")
endif
call l6(T4,2,T8+2,s)
set R88=Q_8(GetPlayerId(O7[T8]),false)
if O7[T8]==QT4 and(not TZ4)then
set R88="|c00ffcc00- 队长 -|r"
endif
if(not B24[32+GetPlayerId(GetLocalPlayer())])then
set R88=" "
elseif(not(IsPlayerAlly(GetLocalPlayer(),Z7[0])or TZ4))then
set R88=" "
endif
call l6(T4,$F,T8+2,R88)
set R88=" "
if B24[80+GetPlayerId(GetLocalPlayer())]and TZ7(O7[T8])then
if EU then
set R88="|c0020c060"+"+"+I2S(R2I(GetPlayerHandicapXPBJ(O7[T8])-100.))+"%|r"
endif
if EU and FU then
set R88=R88+" - "
endif
if FU then
set R88=R88+"|c00ffcc60"+"+"+I2S(Y74[48+GetPlayerId(O7[T8])])+"|r"
endif
endif
call l6(T4,$E,T8+2,R88)
set T8=T8+1
endloop
set T8=1
set U8=HC4
loop
exitwhen T8>U8
call P6(T4,1,T8+3+HB4,WE7(M7[GetPlayerId(P7[T8])]))
call l6(T4,3,T8+3+HB4,"|c00838B8B"+I2S(GetHeroLevel(M7[GetPlayerId(P7[T8])]))+"|r")
if ab[GetPlayerId(GetLocalPlayer())]then
call x7(T4,7,1,3)
call x7(T4,8,1,2.8)
call x7(T4,9,1,.8)
call x7(T4,$A,1,.8)
call x7(T4,$B,1,.8)
call x7(T4,$C,1,.8)
call x7(T4,$D,1,JO7(B24[32+GetPlayerId(GetLocalPlayer())],1.5,.1))
call x7(T4,7,T8+3+HB4,3)
call x7(T4,8,T8+3+HB4,1.1)
call x7(T4,9,T8+3+HB4,1.1)
call x7(T4,$A,T8+3+HB4,1.1)
call x7(T4,$B,T8+3+HB4,1.1)
call x7(T4,$C,T8+3+HB4,1.1)
call x7(T4,$D,T8+3+HB4,JO7(B24[32+GetPlayerId(GetLocalPlayer())],1.5,.1))
call s6(T4,8,T8+3+HB4,false,true)
call s6(T4,9,T8+3+HB4,false,true)
call s6(T4,$A,T8+3+HB4,false,true)
call s6(T4,$B,T8+3+HB4,false,true)
call s6(T4,$C,T8+3+HB4,false,true)
call s6(T4,$D,T8+3+HB4,false,true)
call l6(T4,8,1,"装备")
else
call x7(T4,7,1,3)
call x7(T4,8,1,2.8)
call x7(T4,9,1,.8)
call x7(T4,$A,1,.8)
call x7(T4,$B,1,.8)
call x7(T4,$C,1,.8)
call x7(T4,$D,1,JO7(B24[32+GetPlayerId(GetLocalPlayer())],1.5,.1))
call x7(T4,7,T8+3+HB4,3)
call x7(T4,8,T8+3+HB4,1.1)
call x7(T4,9,T8+3+HB4,1.1)
call x7(T4,$A,T8+3+HB4,1.1)
call x7(T4,$B,T8+3+HB4,1.1)
call x7(T4,$C,T8+3+HB4,1.1)
call x7(T4,$D,T8+3+HB4,JO7(B24[32+GetPlayerId(GetLocalPlayer())],1.5,.1))
call s6(T4,8,T8+3+HB4,false,true)
call s6(T4,9,T8+3+HB4,false,true)
call s6(T4,$A,T8+3+HB4,false,true)
call s6(T4,$B,T8+3+HB4,false,true)
call s6(T4,$C,T8+3+HB4,false,true)
call s6(T4,$D,T8+3+HB4,false,true)
call l6(T4,8,1,"装备")
endif
call P6(T4,8,T8+3+HB4,RH8(P7[T8],1))
call P6(T4,9,T8+3+HB4,RH8(P7[T8],2))
call P6(T4,$A,T8+3+HB4,RH8(P7[T8],3))
call P6(T4,$B,T8+3+HB4,RH8(P7[T8],4))
call P6(T4,$C,T8+3+HB4,RH8(P7[T8],5))
call P6(T4,$D,T8+3+HB4,RH8(P7[T8],6))
if(WK7(M7[GetPlayerId(P7[T8])])and M7[GetPlayerId(P7[T8])]!=null and TimerGetRemaining(U[GetPlayerId(P7[T8])])>0)then
if IsPlayerAlly(GetLocalPlayer(),P7[T8])then
set RY8=Hj+" ("+(I2S(R2I(TimerGetRemaining(U[GetPlayerId(P7[T8])]))))+")|r"
else
set RY8=fj+" ("+(I2S(R2I(TimerGetRemaining(U[GetPlayerId(P7[T8])]))))+")|r"
endif
else
set RY8="  "
endif
if U2[GetPlayerId(P7[T8])]then
call l6(T4,1,T8+3+HB4,"|c00333333"+(KZ4[GetPlayerId((P7[T8]))])+"|r"+RY8)
else
call l6(T4,1,T8+3+HB4,(KZ4[GetPlayerId((P7[T8]))])+RY8)
endif
set RS8=(TimerGetRemaining(N84[GetPlayerId((P7[T8]))]))
if RS8>0 then
set s=I2S(R2I(RS8))
else
set s=" "
endif
if IsPlayerAlly(GetLocalPlayer(),P7[T8])==false then
call l6(T4,7,T8+3+HB4," ")
set s=" "
else
call l6(T4,7,T8+3+HB4,"|cffffcc00"+I2S(R2I(GetPlayerState(P7[T8],PLAYER_STATE_RESOURCE_GOLD)))+"|r")
endif
call l6(T4,2,T8+3+HB4,s)
set R88=Q_8(GetPlayerId(P7[T8]),false)
if P7[T8]==QU4 and(not TZ4)then
set R88="|c00ffcc00- 队长 -|r"
endif
if(not B24[32+GetPlayerId(GetLocalPlayer())])then
set R88=" "
elseif(not(IsPlayerAlly(GetLocalPlayer(),A7[0])or TZ4))then
set R88=" "
endif
call l6(T4,$F,T8+3+HB4,R88)
set R88=" "
if B24[80+GetPlayerId(GetLocalPlayer())]and TZ7(P7[T8])then
if EU then
set R88="|c0020c060"+"+"+I2S(R2I(GetPlayerHandicapXPBJ(P7[T8])-100.))+"%|r"
endif
if EU and FU then
set R88=R88+" - "
endif
if FU then
set R88=R88+"|c00ffcc60"+"+"+I2S(Y74[48+GetPlayerId(P7[T8])])+"|r"
endif
endif
call l6(T4,$E,T8+3+HB4,R88)
set T8=T8+1
endloop
endfunction
function RZ8 takes nothing returns boolean
local real RA8
local real RB8
local unit u
if Vz==false then
set u=JJ4
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-aY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
endif
if Ez==false then
set u=JK4
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-VY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
endif
if Xz==false then
set u=JM4
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-EY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
endif
if nz==false then
set u=JN4
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-XY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
set u=JO4
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-OY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
set u=JP4
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-IY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
set u=JQ4
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-AY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
set u=JR4
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-bY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
set u=JS4
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-BY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
set u=JT4
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-cY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
set u=JU4
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-CY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
set u=JV4
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-DY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
set u=JW4
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-fY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
set u=JX4
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-FY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
endif
if oz==false then
set u=J04
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-JY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
endif
if rz==false then
set u=J54
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-kY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
endif
if az==false then
set u=J24
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-lY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
endif
if xz==false then
set u=J_4
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-mY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
set u=K44
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-MY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
set u=K74
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-PY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
set u=K84
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-QY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
set u=K94
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-sY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
set u=KD4
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-tY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
set u=KE4
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-TY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
set u=KF4
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-uY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
set u=KG4
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-wY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
set u=KH4
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-YY)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
set u=KI4
if u!=null then
set RA8=GetUnitState(u,UNIT_STATE_LIFE)
set RB8=RA8+Q74
if RB8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-vz)then
call SetUnitState(u,UNIT_STATE_LIFE,RB8)
endif
endif
endif
set u=null
return false
endfunction
function RC8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if oz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set JY=JY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function R38 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if rz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set kY=kY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function R68 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if az or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set lY=lY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function RL8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if xz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set mY=mY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function R18 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if xz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set MY=MY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function R08 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if xz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set PY=PY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function R58 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if xz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set QY=QY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function R28 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if xz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set sY=sY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function R_8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if xz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set tY=tY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function S48 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if xz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set TY=TY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function S78 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if xz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set uY=uY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function S88 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if xz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set wY=wY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function S98 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if xz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set YY=YY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function SD8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if xz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set vz=vz+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function SE8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if Vz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set aY=aY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function SF8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if Ez or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set VY=VY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function SG8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if Xz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set EY=EY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function SH8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if nz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set XY=XY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function SI8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if nz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set OY=OY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function SJ8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if nz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set IY=IY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function SK8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if nz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set AY=AY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function SM8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if nz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set bY=bY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function SN8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if nz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set BY=BY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function SO8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if nz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set cY=cY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function SP8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if nz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set CY=CY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function SQ8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if nz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set DY=DY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function SR8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if nz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set fY=fY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function SS8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if nz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set FY=FY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function ST8 takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==A7[0]then
set nz=true
endif
return false
endfunction
function SU8 takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==A7[0]then
set Vz=true
endif
return false
endfunction
function SV8 takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==A7[0]then
set Ez=true
endif
return false
endfunction
function SW8 takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==A7[0]then
set Xz=true
endif
return false
endfunction
function SX8 takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==Z7[0]then
set xz=true
endif
return false
endfunction
function SY8 takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==Z7[0]then
set oz=true
endif
return false
endfunction
function SZ8 takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==Z7[0]then
set rz=true
endif
return false
endfunction
function SA8 takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==Z7[0]then
set az=true
endif
return false
endfunction
function SB8 takes nothing returns boolean
local group g=WS7()
set xz=false
set oz=false
set rz=false
set az=false
set nz=false
set Vz=false
set Ez=false
set Xz=false
call GroupEnumUnitsInRect(g,WD,Condition(function ST8))
call GroupEnumUnitsInRect(g,XD,Condition(function ST8))
call GroupEnumUnitsInRect(g,YD,Condition(function ST8))
call GroupEnumUnitsInRect(g,lE,Condition(function ST8))
call GroupEnumUnitsInRect(g,LE,Condition(function ST8))
call GroupEnumUnitsInRect(g,ME,Condition(function ST8))
call GroupEnumUnitsInRect(g,GE,Condition(function SU8))
call GroupEnumUnitsInRect(g,QE,Condition(function SV8))
call GroupEnumUnitsInRect(g,JE,Condition(function SW8))
call GroupEnumUnitsInRect(g,ZD,Condition(function SX8))
call GroupEnumUnitsInRect(g,AD,Condition(function SX8))
call GroupEnumUnitsInRect(g,BD,Condition(function SX8))
call GroupEnumUnitsInRect(g,qE,Condition(function SX8))
call GroupEnumUnitsInRect(g,pE,Condition(function SX8))
call GroupEnumUnitsInRect(g,PE,Condition(function SX8))
call GroupEnumUnitsInRect(g,fE,Condition(function SY8))
call GroupEnumUnitsInRect(g,FE,Condition(function SZ8))
call GroupEnumUnitsInRect(g,gE,Condition(function SA8))
call WR7(g)
set g=null
return false
endfunction
function SC8 takes nothing returns boolean
if IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetAttacker()))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetAttacker()))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1 and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false and GetOwningPlayer(GetFilterUnit())!=B7 then
if IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE) then
set N24=GetFilterUnit()
else
set N_4=GetFilterUnit()
endif
endif
return false
endfunction
function S38 takes nothing returns nothing
local unit S68=GetAttacker()
local unit m5=GetTriggerUnit()
local group g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(S68),GetUnitY(S68),900,Condition(function SC8))
call WR7(g)
call DisableTrigger(GetTriggeringTrigger())
if N24!=null then
call IssueTargetOrderById(S68,$D000F,N24)
call GroupAddUnit(KU,S68)
elseif IsUnitType(m5,UNIT_TYPE_HERO) and N_4!=null then
call IssueTargetOrderById(S68,$D000F,N_4)
call GroupAddUnit(KU,S68)
endif
call EnableTrigger(GetTriggeringTrigger())
set N24=null
set N_4=null
set S68=null
set m5=null
set g=null
endfunction
function SL8 takes nothing returns nothing
if GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)<1 then
call GroupRemoveUnit(KU,GetEnumUnit())
endif
if GetUnitCurrentOrder(GetEnumUnit())!=851983then
call GroupRemoveUnit(KU,GetEnumUnit())
call IssuePointOrderByIdLoc(GetEnumUnit(),$D000F,O8[GetUnitAbilityLevel(GetEnumUnit(),N8)])
endif
endfunction
function S18 takes nothing returns boolean
call ForGroup(KU,function SL8)
return false
endfunction
function S08 takes string s returns nothing
set F3=F3+1
set j3[F3]=s
endfunction
function S58 takes nothing returns boolean
local integer i=1
loop
exitwhen i>F3
call ExecuteFunc(j3[i])
set i=i+1
endloop
call ExecuteFunc("S28")
call ExecuteFunc("S_8")
return false
endfunction
function T48 takes unit WI7 returns nothing
local trigger t=CreateTrigger()
call NS7(GetHandleId(GetTriggerUnit()),"DamageRegisterAlready",true)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function S58))
set t=null
endfunction
function T78 takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())!=1211117645 and GetUnitTypeId(GetTriggerUnit())!=1211119431 and GetUnitTypeId(GetTriggerUnit())!=1211117657 and GetUnitTypeId(GetTriggerUnit())!=1211122232 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) and IsUnitIllusion(GetTriggerUnit())==false and OO7(GetHandleId(GetTriggerUnit()),"DamageRegisterAlready")==false then
if O44 and(GetUnitTypeId(GetTriggerUnit())!=1328558160 or(GetUnitTypeId(GetTriggerUnit())==1328558160 and O74))then
call T48(GetTriggerUnit())
endif
endif
return false
endfunction
function T88 takes nothing returns boolean
local unit u
local real T98
local boolean TD8=X67()
set u=fP
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set T98=GetUnitState(u,UNIT_STATE_MANA)
if TD8 then
set T98=YK7(T98-25,0)
else
set T98=YJ7(T98+5,300)
endif
endif
set u=FP
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set T98=GetUnitState(u,UNIT_STATE_MANA)
if TD8 then
set T98=YK7(T98-25,0)
else
set T98=YJ7(T98+5,300)
endif
endif
set u=lP
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set T98=GetUnitState(u,UNIT_STATE_MANA)
if TD8 then
set T98=YK7(T98-25,0)
else
set T98=YJ7(T98+5,300)
endif
endif
set u=LP
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set T98=GetUnitState(u,UNIT_STATE_MANA)
if TD8 then
set T98=YK7(T98-25,0)
else
set T98=YJ7(T98+5,300)
endif
endif
set u=MP
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set T98=GetUnitState(u,UNIT_STATE_MANA)
if TD8 then
set T98=YK7(T98-25,0)
else
set T98=YJ7(T98+5,300)
endif
endif
set u=pP
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set T98=GetUnitState(u,UNIT_STATE_MANA)
if TD8 then
set T98=YK7(T98-25,0)
else
set T98=YJ7(T98+5,300)
endif
endif
set u=PP
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set T98=GetUnitState(u,UNIT_STATE_MANA)
if TD8 then
set T98=YK7(T98-25,0)
else
set T98=YJ7(T98+5,300)
endif
endif
set u=qP
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set T98=GetUnitState(u,UNIT_STATE_MANA)
if TD8 then
set T98=YK7(T98-25,0)
else
set T98=YJ7(T98+5,300)
endif
endif
set u=QP
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set T98=GetUnitState(u,UNIT_STATE_MANA)
if TD8 then
set T98=YK7(T98-25,0)
else
set T98=YJ7(T98+5,300)
endif
endif
set u=sP
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set T98=GetUnitState(u,UNIT_STATE_MANA)
if TD8 then
set T98=YK7(T98-25,0)
else
set T98=YJ7(T98+5,300)
endif
endif
set u=tP
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set T98=GetUnitState(u,UNIT_STATE_MANA)
if TD8 then
set T98=YK7(T98-25,0)
else
set T98=YJ7(T98+5,300)
endif
endif
set u=null
return false
endfunction
function Ln takes nothing returns string
return O14
endfunction
function LN takes nothing returns string
return B9
endfunction
function TE8 takes player j8 returns string
return Q[GetPlayerId(j8)]+VT7(j8)+"|r"
endfunction
function TF8 takes player TG8 returns string
local string TH8=I2S(N64[GetPlayerId(TG8)])
local string TI8=TH8
if TG8==GetLocalPlayer()then
set TI8=Fx+TH8+"|r"
endif
return TI8
endfunction
function TJ8 takes player TG8 returns string
local string TH8=I2S(N34[GetPlayerId(TG8)])
local string TI8=TH8
if TG8==GetLocalPlayer()then
set TI8=Fx+TH8+"|r"
endif
return TI8
endfunction
function Lq takes player j8 returns string
return C9[GetPlayerId(j8)]
endfunction
function DO8 takes nothing returns nothing
local integer i=1
local multiboarditem DH8
loop
exitwhen i>NI4
if Lq(NH4[i])!="Here"then
set DH8=MultiboardGetItem(NE4,NF4[i],NG4[i])
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,"|c00555555"+Lq(NH4[i])+"|r")
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
endif
set i=i+1
endloop
endfunction
function TK8 takes player j8 returns string
local string GV=I2S(GetPlayerState(j8,PLAYER_STATE_RESOURCE_GOLD))
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function TM8 takes player j8 returns string
local string GV=I2S(Zh[GetPlayerId(j8)])
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function TN8 takes player j8 returns string
local string GV=I2S(GetUnitLevel(M7[GetPlayerId(j8)]))
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function TO8 takes player j8 returns string
local string GV=I2S(H74[GetPlayerId(j8)])
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function TP8 takes player j8 returns string
local string GV=I2S(NV4[GetPlayerId(j8)])
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function TQ8 takes player j8 returns string
local string GV=I2S(NQ4[GetPlayerId(j8)])
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function TR8 takes player j8 returns string
local string GV=I2S(IU[GetPlayerId(j8)])
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function TS8 takes player j8 returns string
local string GV=I2S(T[GetPlayerId(j8)])
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function TT8 takes player j8 returns string
local string GV=I2S(V[GetPlayerId(j8)])
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function TU8 takes player j8 returns string
local string GV=I2S(T7[GetPlayerId(j8)])
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function TV8 takes player j8 returns string
local string GV=I2S(U7[GetPlayerId(j8)])
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function TW8 takes player j8 returns string
local string GV=I2S(OM7(StringHash("Stats"+I2S(GetPlayerId(j8))),"NumOfNeutrals"))
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function TX8 takes player j8 returns string
local string GV=I2S(NS4[GetPlayerId(j8)])
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function TY8 takes player j8 returns string
local string GV=I2S(NT4[GetPlayerId(j8)])
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function TZ8 takes player j8 returns string
local string GV=I2S(NR4[GetPlayerId(j8)])
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function TA8 takes player j8 returns string
local string LY
local string Lz
local string Lr
local integer k=gD[GetPlayerId(j8)]
local integer d=N04[GetPlayerId(j8)]
if k<1 then
set k=0
endif
if d<1 then
set d=0
endif
set LY=I2S(k)
set Lz=I2S(d)
set Lr=LY+"/"+Lz
if j8==GetLocalPlayer()then
set Lr=Fx+LY+"|r/"+Fx+Lz+"|r"
endif
return Lr
endfunction
function TB8 takes player j8 returns string
local integer L0=NU4[GetPlayerId(j8)]
local string DK8
local integer L1
local integer L2
set L1=(L0/60)-(1/2)
set L2=ModuloInteger(L0,60)
if(L2<$A)then
set DK8=I2S(L1)+":0"+I2S(L2)
else
set DK8=I2S(L1)+":"+I2S(L2)
endif
if j8==GetLocalPlayer()then
set DK8=Fx+DK8+"|r"
endif
return DK8
endfunction
function TC8 takes player p5,player m5 returns string
local string LY
local string Lz
local string Lr
local integer k=OM7(StringHash("Stats"+I2S(GetPlayerId(p5))),"Killed "+I2S(GetPlayerId(m5)))
local integer d=OM7(StringHash("Stats"+I2S(GetPlayerId(p5))),"Died To "+I2S(GetPlayerId(m5)))
if k<1 then
set k=0
endif
if d<1 then
set d=0
endif
set LY=I2S(k)
set Lz=I2S(d)
set Lr=LY+"/"+Lz
if p5==GetLocalPlayer()then
set Lr=Fx+LY+"|r/"+Fx+Lz+"|r"
endif
return Lr
endfunction
function T38 takes boolean JY7 returns nothing
local integer O5=1
local integer i=0
local integer j=1
local item KA7=null
loop
exitwhen j>5
if JY7 then
set O5=GetPlayerId(Z7[j])
else
set O5=GetPlayerId(A7[j])
endif
if M7[O5]!=null then
set i=0
loop
exitwhen i>5
set KA7=UnitItemInSlot(M7[O5],i)
if KA7!=null then
set GW7[O5*6+i]=KY7(KA7)
else
set GW7[O5*6+i]=-1
endif
set i=i+1
endloop
else
set i=0
loop
exitwhen i>5
set GW7[O5*6+i]=-1
set i=i+1
endloop
endif
set j=j+1
endloop
set KA7=null
endfunction
function T68 takes nothing returns nothing
call T38(true)
endfunction
function TL8 takes nothing returns nothing
call T38(false)
endfunction
function T18 takes integer O5,integer i returns string
if GW7[O5*6+i]<0 then
return"UI\\Widgets\\Console\\Undead\\undead-inventory-slotfiller.blp"
endif
return CU[GW7[O5*6+i]]
endfunction
function T08 takes nothing returns nothing
local integer T58=HB4
local integer T28=HC4
local player array T_8
local player array U48
local integer U78
local integer U88
local integer U98=21+YH7(T58,T28)+1
local integer UD8=1+(T58+T28)*2
local multiboarditem UE8
local integer i
local integer x
local integer curRow1
local integer curRow2
local string e="|r"
local string c0="|cff99ccff"
local integer UF8
local integer UG8
call ExecuteFunc("T68")
call ExecuteFunc("TL8")
call DisableTrigger(FS)
call DestroyMultiboard(T4)
call TriggerSleepAction(.0)
if T58>0 and T28>0 then
set U98=U98+2
endif
set NE4=CreateMultiboard()
call MultiboardSetItemsWidth(NE4,0)
call MultiboardSetRowCount(NE4,U98)
call MultiboardSetColumnCount(NE4,UD8)
call MultiboardSetTitleText(NE4,(GetObjectName((1848657203)))+" "+" - "+(O14))
call MultiboardMinimize(NE4,true)
call MultiboardSetItemsStyle(NE4,false,false)
call MultiboardDisplay(NE4,true)
call MultiboardMinimize(NE4,false)
call MultiboardSetTitleText(NE4,(GetObjectName((1848657203)))+" "+" - "+(O14)+" - "+("|c00ff0303"+I2S(T[GetPlayerId(Z7[0])])+"|r/|c0020c000"+I2S(V[GetPlayerId(Z7[0])])+"|r"))
set x=1
set i=1
loop
exitwhen i>5
if TB7(Z7[i])or GetPlayerSlotState(Z7[i])==PLAYER_SLOT_STATE_LEFT then
set T_8[x]=Z7[i]
set x=x+1
endif
set i=i+1
endloop
set x=1
set i=1
loop
exitwhen i>5
if TB7(A7[i])or GetPlayerSlotState(A7[i])==PLAYER_SLOT_STATE_LEFT then
set U48[x]=A7[i]
set x=x+1
endif
set i=i+1
endloop
set i=0
set U88=0
loop
exitwhen i>U98
set UE8=MultiboardGetItem(NE4,i,U88)
call MultiboardSetItemWidth(UE8,.075)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set U78=0
set U88=0
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8," ")
call MultiboardReleaseItem(UE8)
set U88=0
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,false,false)
call MultiboardReleaseItem(UE8)
set U88=0
set i=1
loop
exitwhen i>T58
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TE8(T_8[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set i=1
loop
exitwhen i>T28
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TE8(U48[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set U78=U78+1
set U88=0
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,false,false)
call MultiboardReleaseItem(UE8)
set i=1
loop
exitwhen i>T58
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,true)
call MultiboardSetItemValue(UE8,TN8(T_8[i]))
call MultiboardSetItemIcon(UE8,(WE7(M7[GetPlayerId((T_8[i]))])))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set i=1
loop
exitwhen i>T28
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,true)
call MultiboardSetItemValue(UE8,TN8(U48[i]))
call MultiboardSetItemIcon(UE8,(WE7(M7[GetPlayerId((U48[i]))])))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set U78=U78+1
set U88=0
set U78=U78+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,c0+(GetObjectName((1848657218)))+e)
call MultiboardReleaseItem(UE8)
set U88=0
set i=1
loop
exitwhen i>T58
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,false,true)
call MultiboardSetItemIcon(UE8,(T18(GetPlayerId((T_8[i])),(1)-1)))
call MultiboardSetItemWidth(UE8,.015)
call MultiboardReleaseItem(UE8)
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,false,true)
call MultiboardSetItemIcon(UE8,(T18(GetPlayerId((T_8[i])),(2)-1)))
call MultiboardSetItemWidth(UE8,.054)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set i=1
loop
exitwhen i>T28
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,false,true)
call MultiboardSetItemIcon(UE8,(T18(GetPlayerId((U48[i])),(1)-1)))
call MultiboardSetItemWidth(UE8,.015)
call MultiboardReleaseItem(UE8)
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,false,true)
call MultiboardSetItemIcon(UE8,(T18(GetPlayerId((U48[i])),(2)-1)))
call MultiboardSetItemWidth(UE8,.054)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set U78=U78+1
set U88=0
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,c0+" "+e)
call MultiboardReleaseItem(UE8)
set i=1
loop
exitwhen i>T58
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,false,true)
call MultiboardSetItemIcon(UE8,(T18(GetPlayerId((T_8[i])),(3)-1)))
call MultiboardSetItemWidth(UE8,.015)
call MultiboardReleaseItem(UE8)
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,false,true)
call MultiboardSetItemIcon(UE8,(T18(GetPlayerId((T_8[i])),(4)-1)))
call MultiboardSetItemWidth(UE8,.054)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set i=1
loop
exitwhen i>T28
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,false,true)
call MultiboardSetItemIcon(UE8,(T18(GetPlayerId((U48[i])),(3)-1)))
call MultiboardSetItemWidth(UE8,.015)
call MultiboardReleaseItem(UE8)
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,false,true)
call MultiboardSetItemIcon(UE8,(T18(GetPlayerId((U48[i])),(4)-1)))
call MultiboardSetItemWidth(UE8,.054)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set U78=U78+1
set U88=0
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,c0+" "+e)
call MultiboardReleaseItem(UE8)
set i=1
loop
exitwhen i>T58
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,false,true)
call MultiboardSetItemIcon(UE8,(T18(GetPlayerId((T_8[i])),(5)-1)))
call MultiboardSetItemWidth(UE8,.015)
call MultiboardReleaseItem(UE8)
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,false,true)
call MultiboardSetItemIcon(UE8,(T18(GetPlayerId((T_8[i])),(6)-1)))
call MultiboardSetItemWidth(UE8,.054)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set i=1
loop
exitwhen i>T28
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,false,true)
call MultiboardSetItemIcon(UE8,(T18(GetPlayerId((U48[i])),(5)-1)))
call MultiboardSetItemWidth(UE8,.015)
call MultiboardReleaseItem(UE8)
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,false,true)
call MultiboardSetItemIcon(UE8,(T18(GetPlayerId((U48[i])),(6)-1)))
call MultiboardSetItemWidth(UE8,.054)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set U88=0
set U78=U78+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,c0+(GetObjectName((1848657202)))+e)
call MultiboardReleaseItem(UE8)
set U88=0
set i=1
loop
exitwhen i>T58
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TK8(T_8[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set i=1
loop
exitwhen i>T28
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TK8(U48[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set U88=0
set U78=U78+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,c0+(GetObjectName((1848657201)))+e)
call MultiboardReleaseItem(UE8)
set U88=0
set i=1
loop
exitwhen i>T58
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TS8(T_8[i])+"/"+TT8(T_8[i])+"/"+TR8(T_8[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set i=1
loop
exitwhen i>T28
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TS8(U48[i])+"/"+TT8(U48[i])+"/"+TR8(U48[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set U88=0
set U78=U78+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,c0+GetObjectName(1848658517)+e)
call MultiboardReleaseItem(UE8)
set U88=0
set i=1
loop
exitwhen i>T58
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TF8(T_8[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set i=1
loop
exitwhen i>T28
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TF8(U48[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set U88=0
set U78=U78+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,c0+GetObjectName(1848658758)+e)
call MultiboardReleaseItem(UE8)
set U88=0
set i=1
loop
exitwhen i>T58
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TJ8(T_8[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set i=1
loop
exitwhen i>T28
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TJ8(U48[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set U88=0
set U78=U78+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,c0+(GetObjectName((1848657200)))+e)
call MultiboardReleaseItem(UE8)
set U88=0
set i=1
loop
exitwhen i>T58
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TO8(T_8[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set i=1
loop
exitwhen i>T28
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TO8(U48[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set U88=0
set U78=U78+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,c0+(GetObjectName((1848656980)))+e)
call MultiboardReleaseItem(UE8)
set U88=0
set i=1
loop
exitwhen i>T58
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TA8(T_8[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set i=1
loop
exitwhen i>T28
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TA8(U48[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set U88=0
set U78=U78+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,c0+(GetObjectName((1848656986)))+e)
call MultiboardReleaseItem(UE8)
set U88=0
set i=1
loop
exitwhen i>T58
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TU8(T_8[i])+"/"+TV8(T_8[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set i=1
loop
exitwhen i>T28
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TU8(U48[i])+"/"+TV8(U48[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set U88=0
set U78=U78+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,c0+(GetObjectName((1848656985)))+e)
call MultiboardReleaseItem(UE8)
set U88=0
set i=1
loop
exitwhen i>T58
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TW8(T_8[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set i=1
loop
exitwhen i>T28
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TW8(U48[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set U88=0
set U78=U78+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,c0+(GetObjectName((1848656981)))+e)
call MultiboardReleaseItem(UE8)
set U88=0
set i=1
loop
exitwhen i>T58
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TP8(T_8[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set i=1
loop
exitwhen i>T28
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TP8(U48[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set U88=0
set U78=U78+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,c0+(GetObjectName((1848656982)))+e)
call MultiboardReleaseItem(UE8)
set U88=0
set i=1
loop
exitwhen i>T58
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TB8(T_8[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set i=1
loop
exitwhen i>T28
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TB8(U48[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set U88=0
set U78=U78+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,c0+(GetObjectName((1848656983)))+e)
call MultiboardReleaseItem(UE8)
set U88=0
set i=1
loop
exitwhen i>T58
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TQ8(T_8[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set i=1
loop
exitwhen i>T28
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TQ8(U48[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set U88=0
set U78=U78+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,c0+(GetObjectName((1848656974)))+e)
call MultiboardReleaseItem(UE8)
set U88=0
set i=1
loop
exitwhen i>T58
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TM8(T_8[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set i=1
loop
exitwhen i>T28
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TM8(U48[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set U88=0
set U78=U78+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,c0+(GetObjectName((1848656952)))+e)
call MultiboardReleaseItem(UE8)
set U88=0
set i=1
loop
exitwhen i>T58
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TX8(T_8[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set i=1
loop
exitwhen i>T28
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TX8(U48[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set U88=0
set U78=U78+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,c0+(GetObjectName((1848656969)))+e)
call MultiboardReleaseItem(UE8)
set U88=0
set i=1
loop
exitwhen i>T58
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TY8(T_8[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set i=1
loop
exitwhen i>T28
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TY8(U48[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set U88=0
set U78=U78+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,c0+(GetObjectName((1848656973)))+e)
call MultiboardReleaseItem(UE8)
set U88=0
set i=1
loop
exitwhen i>T58
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TZ8(T_8[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set i=1
loop
exitwhen i>T28
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,TZ8(U48[i]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
if T58>0 and T28>0 then
set U88=0
set UF8=U78
set UG8=U88
set U78=U78+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,c0+(GetObjectName((1848656972)))+e)
call MultiboardReleaseItem(UE8)
set U78=UF8
set x=1
loop
exitwhen x>T58
set U88=0
set U78=UF8
set i=1
loop
exitwhen i>T28
set U88=x+(x-1)
set U78=U78+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,false,true)
call MultiboardSetItemIcon(UE8,(WE7(M7[GetPlayerId((T_8[x]))])))
call MultiboardSetItemWidth(UE8,.01)
call MultiboardReleaseItem(UE8)
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,true)
call MultiboardSetItemIcon(UE8,(WE7(M7[GetPlayerId((U48[i]))])))
call MultiboardSetItemValue(UE8," "+TC8(T_8[x],U48[i]))
call MultiboardSetItemWidth(UE8,.059)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set x=x+1
endloop
set x=T58+1
loop
exitwhen x>(T28+T58)
set U88=0
set U78=UF8
set i=1
loop
exitwhen i>T58
set U88=x+(x-1)
set U78=U78+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,false,true)
call MultiboardSetItemIcon(UE8,(WE7(M7[GetPlayerId((U48[x-T58]))])))
call MultiboardSetItemWidth(UE8,.01)
call MultiboardReleaseItem(UE8)
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,true)
call MultiboardSetItemIcon(UE8,(WE7(M7[GetPlayerId((T_8[i]))])))
call MultiboardSetItemValue(UE8," "+TC8(U48[x-T58],T_8[i]))
call MultiboardSetItemWidth(UE8,.059)
call MultiboardReleaseItem(UE8)
set i=i+1
endloop
set x=x+1
endloop
endif
set U78=U78+1
set U88=0
set U78=U78+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,c0+(GetObjectName((1848656730)))+e)
call MultiboardReleaseItem(UE8)
set U88=0
set i=1
loop
exitwhen i>T58
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,(C9[GetPlayerId((T_8[i]))]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set NI4=NI4+1
set NF4[NI4]=U78
set NG4[NI4]=U88
set NH4[NI4]=T_8[i]
set i=i+1
endloop
set i=1
loop
exitwhen i>T28
set U88=U88+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,(C9[GetPlayerId((U48[i]))]))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
set NI4=NI4+1
set NF4[NI4]=U78
set NG4[NI4]=U88
set NH4[NI4]=U48[i]
set i=i+1
endloop
set U88=0
set U78=U78+1
set UE8=MultiboardGetItem(NE4,U78,U88)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,c0+(GetObjectName((1848656953)))+e)
call MultiboardReleaseItem(UE8)
set UE8=MultiboardGetItem(NE4,U78,U88+1)
call MultiboardSetItemStyle(UE8,true,false)
call MultiboardSetItemValue(UE8,(B9))
call MultiboardSetItemWidth(UE8,.07)
call MultiboardReleaseItem(UE8)
call MultiboardMinimize(NE4,true)
call MultiboardMinimize(NE4,false)
endfunction
function UH8 takes nothing returns string
return O14
endfunction
function mD takes player j8 returns string
return WE7(M7[GetPlayerId(j8)])
endfunction
function me takes player j8,integer Lp returns string
return LZ7(UnitItemInSlot(M7[GetPlayerId(j8)],Lp-1))
endfunction
function mE takes player j8 returns string
return Q[GetPlayerId(j8)]+VT7(j8)+"|r"
endfunction
function mf takes player j8 returns string
return I2S(GetPlayerState(j8,PLAYER_STATE_RESOURCE_GOLD))
endfunction
function mF takes player p returns string
return I2S(Zh[GetPlayerId(p)])
endfunction
function mg takes player p returns string
return I2S(GetUnitLevel(M7[GetPlayerId(p)]))
endfunction
function mG takes player p returns string
return I2S(OM7(StringHash("Stats"+I2S(GetPlayerId(p))),"NumOfWards"))
endfunction
function mh takes player j8 returns string
return I2S(NV4[GetPlayerId(j8)])
endfunction
function mH takes player j8 returns string
return I2S(NQ4[GetPlayerId(j8)])
endfunction
function mi takes player j8 returns string
return I2S(T[GetPlayerId(j8)])
endfunction
function mI takes player j8 returns string
return I2S(V[GetPlayerId(j8)])
endfunction
function mj takes player j8 returns string
return I2S(T7[GetPlayerId(j8)])
endfunction
function mJ takes player j8 returns string
return I2S(U7[GetPlayerId(j8)])
endfunction
function mk takes player p returns string
return I2S(OM7(StringHash("Stats"+I2S(GetPlayerId(p))),"NumOfNeutrals"))
endfunction
function mK takes player j8 returns string
return I2S(NS4[GetPlayerId(j8)])
endfunction
function ml takes player j8 returns string
return I2S(NT4[GetPlayerId(j8)])
endfunction
function mL takes player j8 returns string
return I2S(NR4[GetPlayerId(j8)])
endfunction
function mm takes player j8 returns string
local integer k=gD[GetPlayerId(j8)]
local integer d=N04[GetPlayerId(j8)]
if k<1 then
set k=0
endif
if d<1 then
set d=0
endif
return I2S(k)+"/"+I2S(d)
endfunction
function mM takes player j8 returns string
local integer L0=NU4[GetPlayerId(j8)]
local string DK8
local integer L1
local integer L2
set L1=(L0/60)-(1/2)
set L2=ModuloInteger(L0,60)
if(L2<$A)then
set DK8=I2S(L1)+":0"+I2S(L2)
else
set DK8=I2S(L1)+":"+I2S(L2)
endif
return DK8
endfunction
function mn takes player p5,player m5 returns string
local integer k=OM7(StringHash("Stats"+I2S(GetPlayerId(p5))),"Killed "+I2S(GetPlayerId(m5)))
local integer d=OM7(StringHash("Stats"+I2S(GetPlayerId(p5))),"Died To "+I2S(GetPlayerId(m5)))
if k<1 then
set k=0
endif
if d<1 then
set d=0
endif
return I2S(k)+"/"+I2S(d)
endfunction
function mN takes player p5 returns string
local string mo
if XH7(M7[GetPlayerId(p5)])then
set mo=I2S(R2I(TimerGetRemaining(U[GetPlayerId(p5)])))
else
set mo=" "
endif
return mo
endfunction
function UI8 takes player p5 returns string
local real r=(TimerGetRemaining(N84[GetPlayerId((p5))]))
local string UJ8
if r>0 then
set UJ8=I2S(R2I(r))
else
set UJ8=" "
endif
return UJ8
endfunction
function UK8 takes integer mp,integer mP returns nothing
set NJ4=CreateMultiboard()
call MultiboardSetItemsWidth(NJ4,0)
call MultiboardSetRowCount(NJ4,mp)
call MultiboardSetColumnCount(NJ4,mP)
call MultiboardSetTitleText(NJ4,(GetObjectName((1848657203)))+" "+" - "+UH8())
call MultiboardMinimize(NJ4,true)
call MultiboardSetItemsStyle(NJ4,false,false)
if GetLocalPlayer()==KX4 or GetLocalPlayer()==KY4 then
call MultiboardDisplay(NJ4,true)
endif
endfunction
function mq takes nothing returns string
return"|c00ff0303"+I2S(T[GetPlayerId(Z7[0])])+"|r/|c0020c000"+I2S(V[GetPlayerId(Z7[0])])+"|r"
endfunction
function UM8 takes player UN8 returns string
return I2S(IU[GetPlayerId(UN8)])
endfunction
function UO8 takes nothing returns nothing
local integer LU7=HB4
local integer LT7=HC4
local player array UP8
local player array UQ8
local integer UR8
local integer US8
local integer UT8=1+19+YH7(LU7,LT7)+2
local integer UU8=1+(LU7+LT7)*2
local multiboarditem DH8
local integer i
local integer x
local integer curRow1
local integer curRow2
local string e="|r"
local string c0="|cff99ccff"
local integer UV8
local integer UW8
local integer UX8=$83
local integer UY8=$8B
local integer UZ8=$8B
local integer UA8=$FF
local integer RT8=0
local string RU8=""
local string RV8=""
local integer RW8=0
local integer RX8=0
local integer r
local string R88
if LU7>0 and LT7>0 then
set UT8=UT8+2
endif
if GetTriggerExecCount(GetTriggeringTrigger())==1 then
call UK8(UT8,UU8)
endif
if GetLocalPlayer()==KX4 or GetLocalPlayer()==KY4 then
call MultiboardDisplay(NJ4,true)
endif
set i=1
loop
exitwhen i>5
set r=R2I(TimerGetRemaining(U[GetPlayerId(Z7[i])]))
if r>0 then
set RT8=RT8+RG8(r)
if RW8==0 then
if r<$A then
set RU8=Q[GetPlayerId(Z7[i])]+"0"+I2S(r)+" |r"
else
set RU8=Q[GetPlayerId(Z7[i])]+I2S(r)+" |r"
endif
else
if r<$A then
set RU8=RU8+Hj+"| |r"+Q[GetPlayerId(Z7[i])]+"0"+I2S(r)+" |r"
else
set RU8=RU8+Hj+"| |r"+Q[GetPlayerId(Z7[i])]+I2S(r)+" |r"
endif
endif
set RW8=RW8+1
endif
set i=i+1
endloop
if RW8>0 then
set RU8=Hj+"[Sentinel: |r"+RU8+Hj+"]|r"
endif
set i=1
loop
exitwhen i>5
set r=R2I(TimerGetRemaining(U[GetPlayerId(A7[i])]))
if r>0 then
set RT8=RT8+RG8(r)
if RX8==0 then
if r<$A then
set RV8=Q[GetPlayerId(A7[i])]+"0"+I2S(r)+" |r"
else
set RV8=Q[GetPlayerId(A7[i])]+I2S(r)+" |r"
endif
else
if r<$A then
set RV8=RV8+Hj+"| |r"+Q[GetPlayerId(A7[i])]+"0"+I2S(r)+" |r"
else
set RV8=RV8+Hj+"| |r"+Q[GetPlayerId(A7[i])]+I2S(r)+" |r"
endif
endif
set RX8=RX8+1
endif
set i=i+1
endloop
if RX8>0 then
set RV8=Hj+"[Scourge: |r"+RV8+Hj+"]|r"
endif
call MultiboardSetTitleText(NJ4,RU8+" "+RV8+" "+GetObjectName(1848657203)+" "+" - "+(O14)+" - "+("|c00ff0303"+I2S(T[GetPlayerId(Z7[0])])+"|r/|c0020c000"+I2S(V[GetPlayerId(Z7[0])])+"|r"))
set x=1
set i=1
loop
exitwhen i>5
if TB7(Z7[i])or GetPlayerSlotState(Z7[i])==PLAYER_SLOT_STATE_LEFT then
set UP8[x]=Z7[i]
set x=x+1
endif
set i=i+1
endloop
set x=1
set i=1
loop
exitwhen i>5
if TB7(A7[i])or GetPlayerSlotState(A7[i])==PLAYER_SLOT_STATE_LEFT then
set UQ8[x]=A7[i]
set x=x+1
endif
set i=i+1
endloop
set i=0
set US8=0
loop
exitwhen i>UT8
set DH8=MultiboardGetItem(NJ4,i,US8)
call MultiboardSetItemWidth(DH8,.075)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set UR8=0
set US8=0
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8," ")
call MultiboardReleaseItem(DH8)
set US8=0
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,false,false)
call MultiboardReleaseItem(DH8)
set US8=0
set i=1
loop
exitwhen i>LU7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,mE(UP8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set i=1
loop
exitwhen i>LT7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,mE(UQ8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set UR8=UR8+1
set US8=0
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,false,false)
call MultiboardReleaseItem(DH8)
set i=1
loop
exitwhen i>LU7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,true)
call MultiboardSetItemValue(DH8,"("+mg(UP8[i])+")")
call MultiboardSetItemIcon(DH8,mD(UP8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set i=1
loop
exitwhen i>LT7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,true)
call MultiboardSetItemValue(DH8,"("+mg(UQ8[i])+")")
call MultiboardSetItemIcon(DH8,mD(UQ8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set UR8=UR8+1
set US8=0
set UR8=UR8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,c0+"Items"+e)
call MultiboardReleaseItem(DH8)
set US8=0
set i=1
loop
exitwhen i>LU7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,false,true)
call MultiboardSetItemIcon(DH8,me(UP8[i],1))
call MultiboardSetItemWidth(DH8,.015)
call MultiboardReleaseItem(DH8)
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,false,true)
call MultiboardSetItemIcon(DH8,me(UP8[i],2))
call MultiboardSetItemWidth(DH8,.054)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set i=1
loop
exitwhen i>LT7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,false,true)
call MultiboardSetItemIcon(DH8,me(UQ8[i],1))
call MultiboardSetItemWidth(DH8,.015)
call MultiboardReleaseItem(DH8)
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,false,true)
call MultiboardSetItemIcon(DH8,me(UQ8[i],2))
call MultiboardSetItemWidth(DH8,.054)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set UR8=UR8+1
set US8=0
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,c0+" "+e)
call MultiboardReleaseItem(DH8)
set i=1
loop
exitwhen i>LU7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,false,true)
call MultiboardSetItemIcon(DH8,me(UP8[i],3))
call MultiboardSetItemWidth(DH8,.015)
call MultiboardReleaseItem(DH8)
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,false,true)
call MultiboardSetItemIcon(DH8,me(UP8[i],4))
call MultiboardSetItemWidth(DH8,.054)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set i=1
loop
exitwhen i>LT7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,false,true)
call MultiboardSetItemIcon(DH8,me(UQ8[i],3))
call MultiboardSetItemWidth(DH8,.015)
call MultiboardReleaseItem(DH8)
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,false,true)
call MultiboardSetItemIcon(DH8,me(UQ8[i],4))
call MultiboardSetItemWidth(DH8,.054)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set UR8=UR8+1
set US8=0
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,c0+" "+e)
call MultiboardReleaseItem(DH8)
set i=1
loop
exitwhen i>LU7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,false,true)
call MultiboardSetItemIcon(DH8,me(UP8[i],5))
call MultiboardSetItemWidth(DH8,.015)
call MultiboardReleaseItem(DH8)
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,false,true)
call MultiboardSetItemIcon(DH8,me(UP8[i],6))
call MultiboardSetItemWidth(DH8,.054)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set i=1
loop
exitwhen i>LT7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,false,true)
call MultiboardSetItemIcon(DH8,me(UQ8[i],5))
call MultiboardSetItemWidth(DH8,.015)
call MultiboardReleaseItem(DH8)
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,false,true)
call MultiboardSetItemIcon(DH8,me(UQ8[i],6))
call MultiboardSetItemWidth(DH8,.054)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set US8=0
set UR8=UR8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,c0+"Current Gold"+e)
call MultiboardReleaseItem(DH8)
set US8=0
set i=1
loop
exitwhen i>LU7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,mf(UP8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set i=1
loop
exitwhen i>LT7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,mf(UQ8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set US8=0
set UR8=UR8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,c0+"Hero K/D/A"+e)
call MultiboardReleaseItem(DH8)
set US8=0
set i=1
loop
exitwhen i>LU7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,mi(UP8[i])+"/"+mI(UP8[i])+"/"+UM8(UP8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set i=1
loop
exitwhen i>LT7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,mi(UQ8[i])+"/"+mI(UQ8[i])+"/"+UM8(UQ8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set US8=0
set UR8=UR8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,c0+"Wards"+e)
call MultiboardReleaseItem(DH8)
set US8=0
set i=1
loop
exitwhen i>LU7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,mG(UP8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set i=1
loop
exitwhen i>LT7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,mG(UQ8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set US8=0
set UR8=UR8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,c0+"Towers Kills"+e)
call MultiboardReleaseItem(DH8)
set US8=0
set i=1
loop
exitwhen i>LU7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,mm(UP8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set i=1
loop
exitwhen i>LT7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,mm(UQ8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set US8=0
set UR8=UR8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,c0+"Creep Stats"+e)
call MultiboardReleaseItem(DH8)
set US8=0
set i=1
loop
exitwhen i>LU7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,mj(UP8[i])+"/"+mJ(UP8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set i=1
loop
exitwhen i>LT7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,mj(UQ8[i])+"/"+mJ(UQ8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set US8=0
set UR8=UR8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,c0+"Neutral Kills"+e)
call MultiboardReleaseItem(DH8)
set US8=0
set i=1
loop
exitwhen i>LU7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,mk(UP8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set i=1
loop
exitwhen i>LT7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,mk(UQ8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set US8=0
set UR8=UR8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,c0+"Hero Kill Gold"+e)
call MultiboardReleaseItem(DH8)
set US8=0
set i=1
loop
exitwhen i>LU7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,mh(UP8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set i=1
loop
exitwhen i>LT7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,mh(UQ8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set US8=0
set UR8=UR8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,c0+"Time Dead"+e)
call MultiboardReleaseItem(DH8)
set US8=0
set i=1
loop
exitwhen i>LU7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,mM(UP8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set i=1
loop
exitwhen i>LT7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,mM(UQ8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set US8=0
set UR8=UR8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,c0+"Gold Lost"+e)
call MultiboardReleaseItem(DH8)
set US8=0
set i=1
loop
exitwhen i>LU7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,mH(UP8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set i=1
loop
exitwhen i>LT7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,mH(UQ8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set US8=0
set UR8=UR8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,c0+"Consumables"+e)
call MultiboardReleaseItem(DH8)
set US8=0
set i=1
loop
exitwhen i>LU7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,mF(UP8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set i=1
loop
exitwhen i>LT7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,mF(UQ8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set US8=0
set UR8=UR8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,c0+"Double Kills"+e)
call MultiboardReleaseItem(DH8)
set US8=0
set i=1
loop
exitwhen i>LU7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,mK(UP8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set i=1
loop
exitwhen i>LT7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,mK(UQ8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set US8=0
set UR8=UR8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,c0+"Triple Kills"+e)
call MultiboardReleaseItem(DH8)
set US8=0
set i=1
loop
exitwhen i>LU7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,ml(UP8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set i=1
loop
exitwhen i>LT7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,ml(UQ8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set US8=0
set UR8=UR8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,c0+"Best Spree"+e)
call MultiboardReleaseItem(DH8)
set US8=0
set i=1
loop
exitwhen i>LU7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,mL(UP8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set i=1
loop
exitwhen i>LT7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,mL(UQ8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
if LU7>0 and LT7>0 then
set US8=0
set UV8=UR8
set UW8=US8
set UR8=UR8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,c0+"Kill Details"+e)
call MultiboardReleaseItem(DH8)
set UR8=UV8
set x=1
loop
exitwhen x>LU7
set US8=0
set UR8=UV8
set i=1
loop
exitwhen i>LT7
set US8=x+(x-1)
set UR8=UR8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,false,true)
call MultiboardSetItemIcon(DH8,mD(UP8[x]))
call MultiboardSetItemWidth(DH8,.01)
call MultiboardReleaseItem(DH8)
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,true)
call MultiboardSetItemIcon(DH8,mD(UQ8[i]))
call MultiboardSetItemValue(DH8," "+mn(UP8[x],UQ8[i]))
call MultiboardSetItemWidth(DH8,.059)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set x=x+1
endloop
set x=LU7+1
loop
exitwhen x>(LT7+LU7)
set US8=0
set UR8=UV8
set i=1
loop
exitwhen i>LU7
set US8=x+(x-1)
set UR8=UR8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,false,true)
call MultiboardSetItemIcon(DH8,mD(UQ8[x-LU7]))
call MultiboardSetItemWidth(DH8,.01)
call MultiboardReleaseItem(DH8)
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,true)
call MultiboardSetItemIcon(DH8,mD(UP8[i]))
call MultiboardSetItemValue(DH8," "+mn(UQ8[x-LU7],UP8[i]))
call MultiboardSetItemWidth(DH8,.059)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set x=x+1
endloop
endif
set UR8=UR8+1
set US8=0
set UR8=UR8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,c0+GetObjectName(1848658003)+e)
call MultiboardReleaseItem(DH8)
set US8=0
set i=1
loop
exitwhen i>LU7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemValueColor(DH8,UX8,UY8,UZ8,UA8)
if mN(UP8[i])==" " then
call MultiboardSetItemStyle(DH8,true,false)
else
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemIcon(DH8,(WE7(M7[GetPlayerId((UP8[i]))])))
endif
call MultiboardSetItemValue(DH8,UI8(UP8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set i=1
loop
exitwhen i>LT7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemValueColor(DH8,UX8,UY8,UZ8,UA8)
if mN(UQ8[i])==" " then
call MultiboardSetItemStyle(DH8,true,false)
else
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemIcon(DH8,(WE7(M7[GetPlayerId((UQ8[i]))])))
endif
call MultiboardSetItemValue(DH8,UI8(UQ8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set US8=0
set UR8=UR8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,c0+"Respawn"+e)
call MultiboardReleaseItem(DH8)
set US8=0
set i=1
loop
exitwhen i>LU7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
if mN(UP8[i])==" "then
call MultiboardSetItemStyle(DH8,true,false)
else
call MultiboardSetItemStyle(DH8,true,true)
call MultiboardSetItemIcon(DH8,mD(UP8[i]))
endif
call MultiboardSetItemValue(DH8,mN(UP8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set i=1
loop
exitwhen i>LT7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
if mN(UQ8[i])==" "then
call MultiboardSetItemStyle(DH8,true,false)
else
call MultiboardSetItemStyle(DH8,true,true)
call MultiboardSetItemIcon(DH8,mD(UQ8[i]))
endif
call MultiboardSetItemValue(DH8,mN(UQ8[i]))
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set US8=0
set UR8=UR8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,"|c00dd8dff"+"AI Actions"+e)
call MultiboardReleaseItem(DH8)
set US8=0
set i=1
loop
exitwhen i>LU7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
set R88=Q_8(GetPlayerId(UP8[i]),true)
if UP8[i]==QT4 then
set R88="|c00ffcc00- 队长 -|r"
endif
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,R88)
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set i=1
loop
exitwhen i>LT7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
set R88=Q_8(GetPlayerId(UQ8[i]),true)
if UQ8[i]==QU4 then
set R88="|c00ffcc00- 队长 -|r"
endif
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,R88)
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set US8=0
set UR8=UR8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,"|c0020c060"+"Exp.|r - "+"|c00ffcc60"+"金钱|r"+e)
call MultiboardReleaseItem(DH8)
set US8=0
set i=1
loop
exitwhen i>LU7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
set R88="|c0020c060"+"+"+I2S(R2I(GetPlayerHandicapXPBJ(UP8[i])-100.))+"%|r - "+"|c00ffcc60"+"+"+I2S(Y74[48+GetPlayerId(UP8[i])])+"|r"
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,R88)
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
set i=1
loop
exitwhen i>LT7
set US8=US8+1
set DH8=MultiboardGetItem(NJ4,UR8,US8)
set R88="|c0020c060"+"+"+I2S(R2I(GetPlayerHandicapXPBJ(UQ8[i])-100.))+"%|r - "+"|c00ffcc60"+"+"+I2S(Y74[48+GetPlayerId(UQ8[i])])+"|r"
call MultiboardSetItemStyle(DH8,true,false)
call MultiboardSetItemValue(DH8,R88)
call MultiboardSetItemWidth(DH8,.07)
call MultiboardReleaseItem(DH8)
set i=i+1
endloop
endfunction
function UB8 takes integer p5,integer m5 returns boolean
local integer i=Tb-1
local real UC8=0
local real VW7=(TimerGetElapsed(W))
local integer U38=0
loop
exitwhen i==Tb or UC8>wb or U38>$C8
if i==0 then
set i=8000-1
endif
set U38=U38+1
set UC8=VW7-Mb[i]
if pb[i]==p5 and Qb[i]==m5 and UC8<wb then
set pb[i]=0
set Qb[i]=0
return true
endif
set i=i-1
endloop
return false
endfunction
function S28 takes nothing returns nothing
local integer p5=GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
local integer m5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
local real YM7=GetEventDamage()
set Mb[Tb]=(TimerGetElapsed(W))
set pb[Tb]=p5
set Qb[Tb]=m5
set Tb=Tb+1
if Tb==8000 then
set Tb=1
endif
endfunction
function U68 takes unit S4,unit UL8 returns string
local integer i=1
local integer U18=GetPlayerId(GetOwningPlayer(S4))
local integer U08=GetPlayerId(GetOwningPlayer(UL8))
local integer U58
local string U28=" "+GetObjectName(1848658521)+" "
local boolean U_8=false
loop
exitwhen i>5
if TV7(GetOwningPlayer(UL8))then
set U58=GetPlayerId(Z7[i])
else
set U58=GetPlayerId(A7[i])
endif
if U08!=U58 and UB8(U58,U18)then
set IU[U58]=IU[U58]+1
call C27("Assist"+I2S(U58),U18)
if U_8 then
set U28=U28+"/"+Q[U58]+(KZ4[GetPlayerId((Player(U58)))])+"|r"
else
set U28=U28+Q[U58]+(KZ4[GetPlayerId((Player(U58)))])+"|r"
endif
set U_8=true
endif
set i=i+1
endloop
if U_8 then
return U28
endif
return" "
endfunction
function V48 takes integer p5,integer m5 returns boolean
local integer i=Tb-1
local real UC8=0
local real VW7=(TimerGetElapsed(W))
local integer U38=0
loop
exitwhen i==Tb or UC8>wb or U38>$C8
if i==0 then
set i=8000-1
endif
set U38=U38+1
set UC8=VW7-Mb[i]
if pb[i]==p5 and Qb[i]==m5 and UC8<wb then
return true
endif
set i=i-1
endloop
return false
endfunction
function V78 takes unit S4,unit UL8 returns boolean
local integer i=1
local integer U18=GetPlayerId(GetOwningPlayer(S4))
local integer U08=GetPlayerId(GetOwningPlayer(UL8))
local integer U58
local string U28=" Assists: "
local boolean U_8=false
local integer x=1
set JU[1]=null
set JU[2]=null
set JU[3]=null
set JU[4]=null
set JU[5]=null
loop
exitwhen i>5
if TV7(GetOwningPlayer(UL8))then
set U58=GetPlayerId(Z7[i])
else
set U58=GetPlayerId(A7[i])
endif
if U08!=U58 and V48(U58,U18)then
set JU[x]=Player(U58)
set x=x+1
set U_8=true
endif
set i=i+1
endloop
return U_8
endfunction
function V88 takes unit S4,unit UL8 returns string
local integer i=1
local integer U18=GetPlayerId(GetOwningPlayer(S4))
local integer U08=GetPlayerId(GetOwningPlayer(UL8))
local integer U58
local string U28=""
local boolean U_8=false
loop
exitwhen i>5
if TV7(GetOwningPlayer(UL8))then
set U58=GetPlayerId(Z7[i])
else
set U58=GetPlayerId(A7[i])
endif
if U08!=U58 and V48(U58,U18)then
if U_8 then
set U28=U28+"/"+Q[U58]+(KZ4[GetPlayerId((Player(U58)))])+"|r"
else
set U28=U28+Q[U58]+(KZ4[GetPlayerId((Player(U58)))])+"|r"
endif
set U_8=true
endif
set i=i+1
endloop
if U_8 then
return U28
endif
return" "
endfunction
function V98 takes unit S4,unit UL8 returns integer
local integer i=1
local integer U18=GetPlayerId(GetOwningPlayer(S4))
local integer U08=GetPlayerId(GetOwningPlayer(UL8))
local integer U58
local integer U38=0
loop
exitwhen i>5
if TV7(GetOwningPlayer(UL8))then
set U58=GetPlayerId(Z7[i])
else
set U58=GetPlayerId(A7[i])
endif
if U08!=U58 and V48(U58,U18)then
set U38=U38+1
endif
set i=i+1
endloop
return U38
endfunction
function VD8 takes unit VE8 returns boolean
return GetUnitTypeId(VE8)==1211117641 or GetUnitTypeId(VE8)==1211117642
endfunction
function VF8 takes unit VE8 returns boolean
local integer OB7=GetHandleId(GetOwningPlayer(VE8))
local unit DZ8=O77(OB7,"Kobold0")
local unit DA8=O77(OB7,"Kobold1")
local unit DB8=O77(OB7,"Kobold2")
local unit DC8=O77(OB7,"Kobold3")
local unit D38=O77(OB7,"Kobold4")
if GetUnitAbilityLevel(DZ8,1093685078)!=0 or GetUnitAbilityLevel(DA8,1093685078)!=0 or GetUnitAbilityLevel(DB8,1093685078)!=0 or GetUnitAbilityLevel(DC8,1093685078)!=0 or GetUnitAbilityLevel(D38,1093685078)!=0 then
return true
endif
set DZ8=null
set DA8=null
set DB8=null
set DC8=null
set D38=null
return false
endfunction
function VG8 takes unit VE8 returns boolean
local integer i=0
local integer OB7=GetHandleId(GetOwningPlayer(VE8))
local unit VH8=O77(OB7,"Kobold0")
loop
exitwhen i>5
if GetItemTypeId(UnitItemInSlot(VH8,i))==ZU[X0]and GetItemCharges(UnitItemInSlot(VH8,i))>0 then
set VH8=null
return true
endif
set i=i+1
endloop
set VH8=null
return false
endfunction
function VI8 takes unit VE8,location VJ8 returns nothing
local integer OB7=GetHandleId(GetOwningPlayer(VE8))
local unit DZ8=O77(OB7,"Kobold0")
local unit DA8=O77(OB7,"Kobold1")
local unit DB8=O77(OB7,"Kobold2")
local unit DC8=O77(OB7,"Kobold3")
local unit D38=O77(OB7,"Kobold4")
if DZ8!=null then
call ReviveHeroLoc(DZ8,VJ8,true)
call DP8(DZ8)
endif
if DA8!=null then
call ReviveHeroLoc(DA8,VJ8,true)
call DP8(DA8)
endif
if DB8!=null then
call ReviveHeroLoc(DB8,VJ8,true)
call DP8(DB8)
endif
if DC8!=null then
call ReviveHeroLoc(DC8,VJ8,true)
call DP8(DC8)
endif
if D38!=null then
call ReviveHeroLoc(D38,VJ8,true)
call DP8(D38)
endif
set D38=null
set DC8=null
set DB8=null
set DA8=null
set DZ8=null
endfunction
function VK8 takes unit WX7,real VM8,boolean VN8 returns nothing
set NP4=NP4+1
set NM4[NP4]=WX7
set NN4[NP4]=KQ7()+VM8
set NO4[NP4]=VN8
endfunction
function VO8 takes integer i returns nothing
local unit VE8=NM4[i]
local player p4=GetOwningPlayer(VE8)
local location VJ8
if TW7(p4)then
set VJ8=GetRectCenter(L9)
else
set VJ8=GetRectCenter(ED)
endif
if D9==false and XH7(VE8)then
call DS8(VE8,p4,GetLocationX(VJ8),GetLocationY(VJ8),true)
if DU8(VE8)==false or GetUnitAbilityLevel(VE8,1093684567)==0 then
call ReviveHeroLoc(VE8,VJ8,true)
else
call VI8(VE8,VJ8)
endif
call SetUnitState(VE8,UNIT_STATE_MANA,GetUnitState(VE8,UNIT_STATE_MAX_MANA))
endif
call RemoveLocation(VJ8)
call Q18(i)
set VE8=null
set p4=null
set VJ8=null
endfunction
function VP8 takes nothing returns boolean
local real VW7=KQ7()
local integer i
set i=1
loop
exitwhen i>NP4
if NN4[i]<VW7 and NN4[i]!=0 then
call VO8(i)
endif
if NN4[i]!=0 and XH7(NM4[i])==false then
set NM4[i]=null
set NN4[i]=0
set NO4[i]=false
endif
set i=i+1
endloop
return false
endfunction
function VQ8 takes unit u returns string
local string s=GetObjectName(1848657487)
set s=L87(s,"$hero",Q[GetPlayerId(GetOwningPlayer(u))]+GetUnitName(u)+"|r")
return s
endfunction
function VR8 takes unit ZX7 returns boolean
if GetOwningPlayer(ZX7)!=GetLocalPlayer()then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,$F,VQ8(M7[GetPlayerId(GetOwningPlayer(ZX7))]))
endif
return false
endfunction
function VS8 takes nothing returns nothing
if MV7(GetEnumUnit(),ZU[DI4])!=null then
call SetItemCharges(MV7(GetEnumUnit(),ZU[DI4]),GetItemCharges(MV7(GetEnumUnit(),ZU[DI4]))+1)
endif
endfunction
function VT8 takes nothing returns boolean
if(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitIllusion(GetFilterUnit())==false then
if IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(SQ4))and MV7(GetFilterUnit(),ZU[DI4])!=null then
return true
endif
endif
return false
endfunction
function VU8 takes nothing returns boolean
local item i
local integer VV8
if S54==0 and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitIllusion(GetFilterUnit())==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(S04))then
if MV7(GetFilterUnit(),ZU[DY4])!=null then
set S54=S54+1
set VV8=GetItemCharges(MV7(GetFilterUnit(),ZU[DY4]))
if VV8==0 then
set VV8=2
else
set VV8=VV8+1
endif
call SetItemCharges(MV7(GetFilterUnit(),ZU[DY4]),VV8)
endif
endif
set i=null
return false
endfunction
function VW8 takes unit u,unit VX8 returns nothing
local group g=WS7()
set SQ4=u
call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),1700,Condition(function VT8))
if IsUnitAlly(u,GetOwningPlayer(VX8))==false then
call GroupAddUnit(g,VX8)
endif
call ForGroup(g,function VS8)
call WR7(g)
set g=null
endfunction
function VY8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit VZ8=(LoadUnitHandle(L7,(I97),(335)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local real x
local real y
local real a
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if GetTriggerUnit()!=VZ8 then
call KillUnit(VZ8)
endif
else
set a=GetUnitFacing(IH7)*bj_RADTODEG
set x=GetUnitX(IH7)+75
set y=GetUnitY(IH7)+75
call SetUnitX(VZ8,x)
call SetUnitY(VZ8,y)
call IssueTargetOrderById(VZ8,$D000F,IH7)
endif
set t=null
set VZ8=null
set IH7=null
return false
endfunction
function VA8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
local unit VZ8
if GetSummoningUnit()==BB7 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set VZ8=GetSummonedUnit()
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterDeathEvent(t,VZ8)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function VY8))
call SaveUnitHandle(L7,(I97),(335),(VZ8))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call UnitAddAbility(VZ8,1097625443)
call SetUnitPosition(VZ8,GetUnitX(IH7)+100,GetUnitY(IH7)+100)
call IssueTargetOrderById(VZ8,$D000F,IH7)
call SetUnitMoveSpeed(VZ8,522)
endif
set t=null
set IH7=null
set ZX7=null
set BB7=null
return false
endfunction
function VB8 takes unit ZX7,unit VX8 returns nothing
local unit IH7=VX8
local unit BB7
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
if C37(IH7)then
set IH7=(M7[GetPlayerId(GetOwningPlayer((IH7)))])
endif
set BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
call YB7(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function VA8))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveUnitHandle(L7,(I97),(19),(BB7))
call XF7(BB7,1093813559)
call IssueTargetOrderById(BB7,$D0132,IH7)
set t=null
set IH7=null
set BB7=null
endfunction
function VC8 takes nothing returns boolean
if(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitIllusion(GetFilterUnit())==false then
if IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(SQ4))==false and MV7(GetFilterUnit(),ZU[YB])!=null then
endif
endif
return false
endfunction
function V38 takes unit u returns nothing
local group g=WS7()
set SQ4=u
call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),$659,Condition(function VC8))
call WR7(g)
set g=null
endfunction
function V68 takes unit u returns nothing
local group g=WS7()
set S54=0
set S04=u
call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),$591,Condition(function VU8))
call WR7(g)
set S54=0
set g=null
endfunction
function VL8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer V18=OM7(OB7,"side")
local integer i=1
local player p
local string M6
loop
exitwhen i>5
if V18==0 then
set p=Z7[i]
set M6=Q[GetPlayerId(Z7[0])]+(GetObjectName((1848652622)))+"|r "+(GetObjectName((1848652624)))+" "+Q[GetPlayerId(Z7[0])]+(GetObjectName((1848652625)))+"|r"
else
set p=A7[i]
set M6=Q[GetPlayerId(A7[0])]+(GetObjectName((1848652623)))+"|r "+(GetObjectName((1848652624)))+" "+Q[GetPlayerId(A7[0])]+(GetObjectName((1848652625)))+"|r"
endif
call DisplayTimedTextToPlayer(p,0,0,$A,M6)
call ZT7(XO,p)
set i=i+1
endloop
call NM7(OB7)
call OZ7(t)
set t=null
return false
endfunction
function V08 takes integer V18 returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1.5,false)
call TriggerAddCondition(t,Condition(function VL8))
call NP7(OB7,"side",V18)
set t=null
endfunction
function V58 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer V28=OM7(OB7,"soundIndex")
local string M6=OP7(OB7,"msg")
if V28==1 then
call ZS7(nX)
elseif V28==2 then
call ZS7(CR)
elseif V28==3 then
call ZS7(GP)
elseif V28==4 then
call ZS7(IP)
endif
call VV7(L8,10.,M6)
call NM7(OB7)
call OZ7(t)
set t=null
return false
endfunction
function V_8 takes string M6,integer V28 returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1.5,false)
call TriggerAddCondition(t,Condition(function V58))
call NR7(OB7,"msg",M6)
call NP7(OB7,"soundIndex",V28)
set t=null
endfunction
function W48 takes player W78,integer W88,unit VE8 returns nothing
local texttag t=CreateTextTag()
local string s
call SetPlayerState(W78,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(W78,PLAYER_STATE_RESOURCE_GOLD)+W88)
call SetTextTagText(t,"+"+I2S(W88),.025)
call SetTextTagPosUnit(t,VE8,0)
call SetTextTagColor(t,$FF,$DC,0,$FF)
call SetTextTagVelocity(t,0,.03)
if GetLocalPlayer()==W78 then
call SetTextTagVisibility(t,true)
set s="UI\\Feedback\\GoldCredit\\GoldCredit.mdl"
else
call SetTextTagVisibility(t,false)
set s=""
endif
if GetUnitState(VE8,UNIT_STATE_LIFE)>.5 then
call DestroyEffect(AddSpecialEffectTarget(s,VE8,"overhead"))
endif
call SetTextTagFadepoint(t,2)
call SetTextTagLifespan(t,3)
call SetTextTagPermanent(t,false)
endfunction
function W98 takes unit VE8,unit WD8,real WE8 returns nothing
local integer i=1
local integer WF8=0
call V78(VE8,WD8)
loop
exitwhen i>5
if JU[i]!=null then
set WF8=WF8+1
endif
set i=i+1
endloop
set i=1
loop
exitwhen i>5
if JU[i]!=null then
set VH4[GetPlayerId(JU[i])]=VH4[GetPlayerId(JU[i])]+R2I(WE8/WF8)
set EV0[GetPlayerId(JU[i])]=EV0[GetPlayerId(JU[i])]+R2I(WE8/WF8)
call W48(JU[i],R2I(WE8/WF8),M7[GetPlayerId(JU[i])])
endif
set i=i+1
endloop
endfunction
function WG8 takes player WH8,integer W88 returns nothing
local integer T8=1
local integer Jg
if TV7(WH8)then
set Jg=P8(X7)
else
set Jg=P8(Y7)
endif
if TV7(WH8)then
loop
exitwhen T8>5
if TA7(Z7[T8])then
set VH4[GetPlayerId(Z7[T8])]=VH4[GetPlayerId(Z7[T8])]+W88/Jg
set EV0[GetPlayerId(Z7[T8])]=EV0[GetPlayerId(Z7[T8])]+W88/Jg
call W48(Z7[T8],W88/Jg,M7[GetPlayerId(Z7[T8])])
endif
set T8=T8+1
endloop
else
loop
exitwhen T8>5
if TA7(A7[T8])then
set VH4[GetPlayerId(A7[T8])]=VH4[GetPlayerId(A7[T8])]+W88/Jg
set EV0[GetPlayerId(A7[T8])]=EV0[GetPlayerId(A7[T8])]+W88/Jg
call W48(A7[T8],W88/Jg,M7[GetPlayerId(A7[T8])])
endif
set T8=T8+1
endloop
endif
endfunction
function WI8 takes unit VE8,integer WJ8 returns nothing
local player p4=GetOwningPlayer(VE8)
call SetPlayerState(p4,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p4,PLAYER_STATE_RESOURCE_GOLD)-WJ8)
endfunction
function m4 takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==1865429043 then
call KillUnit(GetFilterUnit())
return true
endif
return false
endfunction
function WK8 takes nothing returns nothing
local boolexpr hP=Condition(function m4)
local group LQ7=WS7()
call GroupEnumUnitsInRect(LQ7,bj_mapInitialPlayableArea,hP)
call WR7(LQ7)
set LQ7=null
endfunction
function WM8 takes nothing returns boolean
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) and GetUnitTypeId(GetTriggerUnit())!=1311788365 then
if GetUnitTypeId(GetTriggerUnit())==1211117642 and VG8(GetTriggerUnit())then
return false
endif
return true
endif
return false
endfunction
function WN8 takes player WO8,player W78,unit WD8 returns boolean
return WD8==null or GetKillingUnit()==null or(TV7(WO8)and TV7(W78))or(TW7(WO8)and TW7(W78))
endfunction
function WP8 takes nothing returns nothing
if LB7(GetUnitTypeId(GetEnumUnit()))==false then
set NL4=NL4+1
if GetOwningPlayer(GetKillingUnit())!=GetOwningPlayer(GetEnumUnit())then
set N14=N14+1
endif
endif
endfunction
function WQ8 takes nothing returns nothing
if(GetUnitTypeId((GetEnumUnit()))==1211117642)==false and LB7(GetUnitTypeId(GetFilterUnit()))==false then
call AddHeroXP(GetEnumUnit(),NC4,true)
set N34[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=N34[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]+NC4
if GetOwningPlayer(GetKillingUnit())!=GetOwningPlayer(GetEnumUnit())then
set N64[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=N64[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]+NB4
set VH4[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=VH4[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]+NB4
set EV0[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=EV0[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]+NB4
call W48(GetOwningPlayer(GetEnumUnit()),NB4,GetEnumUnit())
endif
endif
endfunction
function WR8 takes nothing returns boolean
local integer BC7
local integer WS8=0
local integer WT8=0
local group g
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) and IsUnitIllusion(GetTriggerUnit())==false and(GetUnitTypeId((GetTriggerUnit()))==1211117642)==false and LB7(GetUnitTypeId(GetTriggerUnit()))==false then
set BC7=GetHeroLevel(GetTriggerUnit())
set NC4=0
set NB4=0
set g=WS7()
set NL4=0
set N14=0
call GroupEnumUnitsInRange(g,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),$401,Condition(function A57))
call ForGroup(g,function WP8)
if NL4==1 then
set WS8=20*BC7+120
elseif NL4==2 then
set WS8=$F*BC7+90
elseif NL4==3 then
set WS8=7*BC7+30
elseif NL4==4 then
set WS8=6*BC7+$F
elseif NL4==5 then
set WS8=5*BC7+$A
endif
if N14==1 then
set WT8=$C*BC7+125
elseif N14==2 then
set WT8=$A*BC7+40
elseif N14==3 then
set WT8=6*BC7
elseif N14==4 then
set WT8=6*BC7
elseif N14==5 then
set WT8=6*BC7
endif
if Y4 then
endif
set NC4=WS8
set NB4=WT8
call ForGroup(g,function WQ8)
call WR7(g)
set g=null
endif
return false
endfunction
function WU8 takes nothing returns nothing
local boolean WV8=false
local unit VE8=GetDyingUnit()
local unit WD8=GetKillingUnit()
local player W78=GetOwningPlayer(WD8)
local player WO8=GetOwningPlayer(VE8)
local integer W88=0
local integer WW8=0
local boolean WX8=false
local string WY8=""
local string WZ8=""
local string WA8=""
local string MidText
local integer x
local string WB8
local string WC8
local string W38
local string W68
local boolean VN8=false
local real WL8=1
local real W18=1
local real W08=1
local real W58=1
local real W28=0
local trigger t
local integer W_8
local integer X48
local item X78
local integer id
local integer X88=GetPlayerState(WO8,PLAYER_STATE_RESOURCE_GOLD)
local integer X98=X88-VH4[GetPlayerId(WO8)]
local unit XD8
local unit XE8
local boolean AHO=((LoadInteger(L7,(GetHandleId((VE8))),((4418))))==1)
if IsPlayerAlly(W78,WO8)==false and UC1(W78)==false then
call WR8()
endif
if AHO then
set HSS[GetPlayerId((WO8))]=true
endif
if WD8==null and GetUnitTypeId(VE8)==1315988077 then
set WD8=YM4
set W78=GetOwningPlayer(WD8)
endif
if IsPlayerAlly(W78,WO8) and OT7(WD8,"4328") and F07!=null then
set WD8=F07
set W78=GetOwningPlayer(WD8)
endif
if IsPlayerAlly(W78,WO8)and GetUnitAbilityLevel(VE8,'A0CC')+GetUnitAbilityLevel(VE8,'A02Z')>0 and LoadUnitHandle(L7,GetHandleId(VE8),'A0CC')==WD8 then
set W78=WO8
set WD8=VE8
call RemoveSavedHandle(L7,GetHandleId(VE8),'A0CC')
endif
if OT7(VE8,"4333") then
set WD8=ZJI
set W78=GetOwningPlayer(WD8)
endif
set X48=V98(VE8,WD8)
if WD8!=null then
set id=GetUnitTypeId(WD8)
call XI7(M7[GetPlayerId(GetOwningPlayer(WD8))],VE8)
endif
if WN8(WO8,W78,WD8)==false and X48==1 and TX7(W78)==false and W78!=B7 then
call V78(VE8,WD8)
set W78=JU[1]
set WD8=M7[GetPlayerId(W78)]
endif
set IG4[GetPlayerId(GetOwningPlayer((VE8)))]=true
if GetUnitAbilityLevel(VE8,1093685078)!=0 or(VD8(VE8)and VF8(VE8))then
set VN8=true
call UnitRemoveAbility(VE8,1093685078)
set D8=VE8
set ox=WD8
if IsUnitType(WD8,UNIT_TYPE_STRUCTURE)==false then
endif
endif
if W78==null then
set W78=WO8
endif
if R4 and GetUnitTypeId(VE8)!=1211117642 then
if(GetPlayerController(GetOwningPlayer(GetDyingUnit()))==MAP_CONTROL_USER)then
set jx=UnitRemoveItemFromSlot(VE8,GetRandomInt(0,5))
if GetItemTypeId(jx)==1227894859 then
call CreateItem(1227894855,GetItemX(jx),GetItemY(jx))
call RemoveItem(jx)
endif
elseif(IsUnitInForce(GetDyingUnit(),QX4))then
set jx=UnitItemInSlot(GetDyingUnit(),GetRandomInt(0,5))
if(jx==null)then
elseif(GetItemType(jx)==ITEM_TYPE_PURCHASABLE)then
call UnitRemoveItem(GetDyingUnit(),jx)
else
set X78=CreateItem(GetItemTypeId(jx),GetUnitX(GetDyingUnit()),GetUnitY(GetDyingUnit()))
call SetItemPlayer(X78,GetOwningPlayer(GetDyingUnit()),false)
set hG[$80+GetPlayerId(GetOwningPlayer(GetDyingUnit()))]=hG[$80+GetPlayerId(GetOwningPlayer(GetDyingUnit()))]+QM7(GetItemTypeId(jx))
if((GetItemTypeId(jx)==ZU[Q1])or(GetItemTypeId(jx)==ZU[D1]))then
call SetItemCharges(X78,GetItemCharges(jx))
endif
endif
endif
endif
if TV7(WO8)then
if TV7(W78)then
set WV8=true
if(W78==WO8)then
call VV7(L8,10.,(Q[GetPlayerId(WO8)]+(KZ4[GetPlayerId((WO8))])+"|r "+(GetObjectName((1848652626)))))
else
call VV7(L8,10.,LJ7(WO8,W78))
endif
elseif TW7(W78)then
set WX8=true
set V[GetPlayerId(Z7[0])]=V[GetPlayerId(Z7[0])]+1
set T[GetPlayerId(A7[0])]=T[GetPlayerId(A7[0])]+1
set N[2]=N[2]+1
set N[1]=0
if W78!=A7[0]then
set T[GetPlayerId(W78)]=T[GetPlayerId(W78)]+1
set K[GetPlayerId(W78)]=K[GetPlayerId(W78)]+1
endif
endif
endif
if TW7(WO8)then
if TW7(W78)then
set WV8=true
if(W78==WO8)then
call VV7(L8,10.,(Q[GetPlayerId(WO8)]+(KZ4[GetPlayerId((WO8))])+"|r "+(GetObjectName((1848652626)))))
else
call VV7(L8,10.,LJ7(WO8,W78))
endif
elseif TV7(W78)then
set WX8=true
set V[GetPlayerId(A7[0])]=V[GetPlayerId(A7[0])]+1
set T[GetPlayerId(Z7[0])]=T[GetPlayerId(Z7[0])]+1
set N[1]=N[1]+1
set N[2]=0
if W78!=Z7[0]then
set T[GetPlayerId(W78)]=T[GetPlayerId(W78)]+1
set K[GetPlayerId(W78)]=K[GetPlayerId(W78)]+1
endif
endif
endif
if W78==B7 then
set WX8=false
if GetUnitTypeId(WD8)==1848651852 then
call VV7(L8,10.,(Q[GetPlayerId(WO8)]+(KZ4[GetPlayerId((WO8))])+"|r "+(GetObjectName((1848652628)))))
else
call VV7(L8,10.,(Q[GetPlayerId(WO8)]+(KZ4[GetPlayerId((WO8))])+"|r "+(GetObjectName((1848652629)))))
endif
set WV8=true
endif
if RA4 then
call Y17(AN,GetUnitX(VE8),GetUnitY(VE8))
endif
call C27("Hero"+I2S(GetPlayerId(WO8)),GetPlayerId(W78))
set x=K[GetPlayerId(WO8)]
if x>2 and WV8==false then
if x==3 then
set W88=125
set WY8="|c0000ff40"+(GetObjectName((1848652876)))+"|r"
elseif x==4 then
set W88=250
set WY8="|c00400080"+(GetObjectName((1848652878)))+"|r"
elseif x==5 then
set W88=375
set WY8="|c00ff0080"+(GetObjectName((1848652877)))+"|r"
elseif x==6 then
set W88=500
set WY8="|c00ff8000"+(GetObjectName((1848652874)))+"|r"
elseif x==7 then
set W88=625
set WY8="|c00808000"+(GetObjectName((1848652873)))+"|r"
elseif x==8 then
set W88=750
set WY8="|c00ff80ff"+(GetObjectName((1848652630)))+"|r"
elseif x==9 then
set W88=875
set WY8="|c00ff0000"+(GetObjectName((1848652631)))+"|r"
else
set W88=1000
set WY8="|c00ff8000"+(GetObjectName((1848652632)))+"|r"
endif
endif
set x=K[GetPlayerId(W78)]
if x>NR4[GetPlayerId(W78)]then
set NR4[GetPlayerId(W78)]=x
endif
set XD8=WD8
if IsUnitType(XD8,UNIT_TYPE_HERO)==false then
set XD8=M7[GetPlayerId(GetOwningPlayer(XD8))]
endif
if x>2 and GetUnitTypeId(XD8)!=1429221446 and O24[GetPlayerId(GetOwningPlayer(XD8))]==0 then
endif
set XE8=VE8
if IsUnitType(XE8,UNIT_TYPE_HERO)==false then
set XE8=M7[GetPlayerId(GetOwningPlayer(XE8))]
endif
if WV8==false and WX8 then
endif
if x>2 and WV8==false then
if x==3 then
call ZS7(TO)
set WZ8=" "+(GetObjectName((1848652875)))+" |c0000ff40"+(GetObjectName((1848652876)))+"|r"+(GetObjectName((1848652857)))
elseif x==4 then
call ZS7(ZN)
set WZ8=" "+(GetObjectName((1848652872)))+" |c00400080"+(GetObjectName((1848652878)))+"|r"+(GetObjectName((1848652857)))
elseif x==5 then
call ZS7(VO)
set WZ8=" "+(GetObjectName((1848652871)))+" |c00ff0080"+(GetObjectName((1848652877)))+"|r"+(GetObjectName((1848652857)))
elseif x==6 then
call ZS7(LO)
set WZ8=" "+(GetObjectName((1848652872)))+" |c00ff8000"+(GetObjectName((1848652874)))+"|r"+(GetObjectName((1848652865)))
elseif x==7 then
call ZS7(EP)
set WZ8=" "+(GetObjectName((1848652872)))+" |c00808000"+(GetObjectName((1848652873)))+"|r"+(GetObjectName((1848652865)))
elseif x==8 then
call ZS7(YO)
set WZ8=" "+(GetObjectName((1848652871)))+" |c00ff80ff"+(GetObjectName((1848652630)))+"|r"+(GetObjectName((1848652865)))
elseif x==9 then
call ZS7(BN)
set WZ8=" "+(GetObjectName((1848652872)))+" |c00ff0000"+(GetObjectName((1848652631)))+"|r"+(GetObjectName((1848652866)))
else
call ZS7(CN)
set WZ8=" "+(GetObjectName((1848652872)))+" |c00ff8000"+(GetObjectName((1848652632)))+"|r. "+(GetObjectName((1848652870)))+(GetObjectName((1848652866)))
endif
endif
if WV8==false then
set W88=W88+200+GetHeroLevel(VE8)*9
set WB8=Q[GetPlayerId(WO8)]+(KZ4[GetPlayerId((WO8))])+"|r"
set WC8=Q[GetPlayerId(W78)]+(KZ4[GetPlayerId((W78))])+"|r"
set W68="|c00FFDC00"+I2S(W88)+"|r"
if W78==Z7[0]or W78==A7[0]then
if X48==0 then
if W78==Z7[0]then
set W38=WC8+" "+(GetObjectName((1848652850)))+" "+WB8+(GetObjectName((1848652851)))+(GetObjectName((1848652857)))+" "+W68+" "+(GetObjectName((1848652852)))+"."
call WG8(W78,W88)
elseif W78==A7[0]then
set W38=WC8+" "+(GetObjectName((1848652850)))+" "+WB8+(GetObjectName((1848652851)))+(GetObjectName((1848652857)))+" "+W68+" "+(GetObjectName((1848652852)))+"."
call WG8(W78,W88)
endif
elseif X48>1 then
set W38=WC8+" "+(GetObjectName((1848652850)))+" "+WB8+(GetObjectName((1848652851)))+(GetObjectName((1848652857)))+" "+W68+" "+(GetObjectName((1848652852)))+"."
call W98(VE8,WD8,W88)
endif
elseif WY8=="" and WZ8=="" then
set W38=WC8+" "+(GetObjectName((1848652850)))+" "+WB8+(GetObjectName((1848652851)))+" "+(GetObjectName((1848652867)))+" "+W68+" "+(GetObjectName((1848652853)))+(GetObjectName((1848652857)))
elseif WY8=="" and WZ8!="" then
set W38=WC8+" "+(GetObjectName((1848652850)))+" "+WB8+(GetObjectName((1848652851)))+" "+(GetObjectName((1848652867)))+" "+W68+" "+(GetObjectName((1848652853)))+(GetObjectName((1848652857)))
elseif WY8!="" and WZ8=="" then
set W38=WC8+" "+(GetObjectName((1848652856)))+" "+WB8+(GetObjectName((1848652855)))+" "+WY8+" "+(GetObjectName((1848652854)))+" "+W68+" "+(GetObjectName((1848652853)))+(GetObjectName((1848652857)))
elseif WY8!="" and WZ8!="" then
set W38=WC8+" "+(GetObjectName((1848652856)))+" "+WB8+(GetObjectName((1848652855)))+" "+WY8+" "+(GetObjectName((1848652854)))+" "+W68+" "+(GetObjectName((1848652853)))+(GetObjectName((1848652857)))
endif
if WX8 then
set WA8=U68(VE8,WD8)
endif
call VV7(L8,$A,W38+WA8)
if WZ8!="" then
call VV7(L8,$A,WC8+WZ8)
endif
set VH4[GetPlayerId(W78)]=VH4[GetPlayerId(W78)]+W88
set EV0[GetPlayerId(W78)]=EV0[GetPlayerId(W78)]+W88
call W48(W78,W88,VE8)
set NV4[GetPlayerId(W78)]=NV4[GetPlayerId(W78)]+W88
if N[1]>4 then
call V08(0)
endif
if N[2]>4 then
call V08(1)
endif
endif
set WW8=125+GetHeroLevel(VE8)*25
if MV7(VE8,ZU[DI4])!=null then
if GetItemCharges(MV7(VE8,ZU[DI4]))>0 then
set W28=-1*(3*GetItemCharges(MV7(VE8,ZU[DI4])))
set WW8=IMaxBJ(R2I(WW8-0*GetItemCharges(MV7(VE8,ZU[DI4]))),0)
endif
endif
if WV8 and GetUnitTypeId(VE8)==1211117643 then
set WW8=0
if MV7(VE8,ZU[DI4])!=null then
if GetItemCharges(MV7(VE8,ZU[DI4]))>1 then
call SetItemCharges(MV7(VE8,ZU[DI4]),R2I(GetItemCharges(MV7(VE8,ZU[DI4]))*1.5))
else
call SetItemCharges(MV7(VE8,ZU[DI4]),R2I(GetItemCharges(MV7(VE8,ZU[DI4]))+1))
endif
endif
endif
if WW8>X98 then
set WW8=X98
endif
call VW8(VE8,XD8)
call V68(VE8)
call V38(VE8)
if VN8==false then
set NQ4[GetPlayerId(WO8)]=NQ4[GetPlayerId(WO8)]+WW8
call WI8(VE8,WW8)
endif
call SaveInteger(L7,StringHash("Stats"+I2S(GetPlayerId(W78))),StringHash("Killed "+I2S(GetPlayerId(WO8))),((LoadInteger(L7,StringHash("Stats"+I2S(GetPlayerId(W78))),StringHash("Killed "+I2S(GetPlayerId(WO8)))))+1))
call SaveInteger(L7,StringHash("Stats"+I2S(GetPlayerId(WO8))),StringHash("Died To "+I2S(GetPlayerId(W78))),((LoadInteger(L7,StringHash("Stats"+I2S(GetPlayerId(WO8))),StringHash("Died To "+I2S(GetPlayerId(W78)))))+1))
call StartTimerBJ(A[GetPlayerId(W78)],false,18)
if WV8==false and W78!=Z7[0]and W78!=A7[0]and W78!=B7 then
set M[GetPlayerId(W78)]=M[GetPlayerId(W78)]+1
if M[GetPlayerId(W78)]==2 then
set NS4[GetPlayerId(W78)]=NS4[GetPlayerId(W78)]+1
call V_8(Q[GetPlayerId(W78)]+(KZ4[GetPlayerId((W78))])+"|r "+(GetObjectName((1848652868)))+" |c000000ff"+(GetObjectName((1848652883)))+"|r"+(GetObjectName((1848652857))),1)
endif
if M[GetPlayerId(W78)]==3 then
set NT4[GetPlayerId(W78)]=NT4[GetPlayerId(W78)]+1
call V_8(Q[GetPlayerId(W78)]+(KZ4[GetPlayerId((W78))])+"|r "+(GetObjectName((1848652868)))+" |c0000ff40"+(GetObjectName((1848652869)))+"|r"+(GetObjectName((1848652866))),2)
endif
if M[GetPlayerId(W78)]==4 then
set NT4[GetPlayerId(W78)]=NT4[GetPlayerId(W78)]+1
call V_8(Q[GetPlayerId(W78)]+(KZ4[GetPlayerId((W78))])+"|r "+(GetObjectName((1848652868)))+" |c0000FFFF"+(GetObjectName((1848657994)))+"|r"+(GetObjectName((1848652866))),3)
endif
if M[GetPlayerId(W78)]>4 then
set NT4[GetPlayerId(W78)]=NT4[GetPlayerId(W78)]+1
call V_8(Q[GetPlayerId(W78)]+(KZ4[GetPlayerId((W78))])+"|r "+(GetObjectName((1848652875)))+" |c0000AAFF"+(GetObjectName((1848657995)))+"|r"+(GetObjectName((1848652866))),4)
endif
endif
if(WV8==false)then
set K[GetPlayerId(WO8)]=0
endif
set K[0]=0
set K[6]=0
set V[GetPlayerId(WO8)]=V[GetPlayerId(WO8)]+1
if VN8 then
set WL8=.4
endif
if WV8 and GetUnitTypeId(VE8)==1211117643 then
set W58=1.
set W_8=R2I(GetHeroLevel(VE8)+5)
else
set W_8=R2I((GetHeroLevel(VE8)*3.8+5)*WL8*W18*W08*W58)+R2I(W28)
endif
if LS then
set W_8=R2I(W_8*.5)
if GetPlayerController(WO8)==MAP_CONTROL_COMPUTER then
set W_8=R2I(W_8*.5)
endif
endif 
if OT7(VE8,"4333") then
set W_8=R2I(W_8+30)
endif
if P94 then
set NU4[GetPlayerId(WO8)]=0
if GetPlayerController(WO8)==MAP_CONTROL_COMPUTER then
call TimerStart(U[GetPlayerId(WO8)],2.,false,null)
else
call TimerStart(U[GetPlayerId(WO8)],1.,false,null)
endif
else
set NU4[GetPlayerId(WO8)]=NU4[GetPlayerId(WO8)]+W_8
call TimerStart(U[GetPlayerId(WO8)],W_8,false,null)
endif
call TriggerExecute(vA)
if D4==false and RZ4==false then
call VK8(VE8,W_8,VN8)
elseif RZ4 and GetPlayerController(WO8)==MAP_CONTROL_USER then
call VK8(VE8,1,false)
else
if(TV7(WO8))then
set L[0]=L[0]+1
endif
if TW7(WO8)then
set L[1]=L[1]+1
endif
set W7[GetPlayerId(WO8)]=VE8
if GetUnitTypeId(VE8)==1211117642 then
set W7[GetPlayerId(WO8)]=O77(GetHandleId(GetOwningPlayer(VE8)),"Kobold0")
endif
if L[0]==PD4 then
call TriggerExecute(OF4)
endif
if L[1]==PD4 then
call TriggerExecute(OE4)
endif
if(GetUnitTypeId(VE8)==1429221430)then
call ExecuteFunc("WK8")
elseif GetUnitTypeId(VE8)==1429221432 or GetUnitTypeId(VE8)==1160786229 then
set IT4=VE8
call ExecuteFunc("XF8")
elseif GetUnitTypeId(VE8)==1432580716 then
set IT4=VE8
call ExecuteFunc("XG8")
endif
endif
set X78=null
set t=null
set WD8=null
set VE8=null
endfunction
function XH8 takes nothing returns boolean
local unit VZ8=GetSummonedUnit()
local integer x
if IsUnitIllusion(VZ8) then
set x=K[GetPlayerId(GetOwningPlayer(VZ8))]
if x>2 and O24[GetPlayerId(GetOwningPlayer(VZ8))]==0 then
call XF7(VZ8,1093815114)
else
call UnitRemoveAbility(VZ8,1093815114)
endif
endif
set VZ8=null
return false
endfunction
function InitTrig_Image_Enters takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function XH8))
set t=null
endfunction
function XI8 takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local player W78=GetOwningPlayer(GetKillingUnit())
local player WO8=GetOwningPlayer(GetTriggerUnit())
local string XJ8
local integer X48=V98(GetTriggerUnit(),GetKillingUnit())
if W78==Z7[0]or W78==A7[0]then
call W98(GetTriggerUnit(),GetKillingUnit(),$96)
set XJ8=V88(GetTriggerUnit(),GetKillingUnit())+" "+(GetObjectName((1848652887)))+" |c00ff0303"+(GetObjectName((1848652889)))+(GetObjectName((1848652857)))+"|r "
if X48>1 then
set XJ8=XJ8+"(+150 "+(GetObjectName((1848652852)))+")"
else
set XJ8=XJ8+"(+150 "+(GetObjectName((1848652853)))+")"
endif
else
set XJ8=Q[GetPlayerId(W78)]+(KZ4[GetPlayerId((W78))])+"|r "+(GetObjectName((1848652887)))+" |c00ff0303"+(GetObjectName((1848652889)))+(GetObjectName((1848652857)))+"|r "
set XJ8=XJ8+"(+150 "+(GetObjectName((1848652853)))+")"
call W48(W78,$96,M7[GetPlayerId(W78)])
set VH4[GetPlayerId(W78)]=VH4[GetPlayerId(W78)]+$96
set EV0[GetPlayerId(W78)]=EV0[GetPlayerId(W78)]+$96
endif
call VV7(L8,$A,XJ8)
call ZS7(EX)
call OZ7(t)
set t=null
endfunction
function XK8 takes nothing returns boolean
if GetOwningPlayer(GetKillingUnit())!=B7 and GetKillingUnit()!=null and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) and IsPlayerEnemy(GetOwningPlayer(GetTriggerUnit()),GetOwningPlayer(GetKillingUnit())) then
if GetOwningPlayer(GetKillingUnit())==Z7[0]or GetOwningPlayer(GetKillingUnit())==A7[0]then
if V98(GetTriggerUnit(),GetKillingUnit())>0 then
call XI8()
endif
else
call XI8()
endif
endif
return false
endfunction
function I5O takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local integer M4I=(LoadInteger(L7,(I97),(34)))
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
set M4I=M4I+1
call SaveInteger(L7,(I97),(34),(M4I))
endif
if M4I>4 or(GetTriggerEventId()==EVENT_UNIT_DAMAGED and GetEventDamage()>0)then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
call SetUnitState(ZX7,UNIT_STATE_LIFE,GetUnitState(ZX7,UNIT_STATE_LIFE)+0.2*GetUnitState(ZX7,UNIT_STATE_MAX_LIFE))
call SetUnitState(ZX7,UNIT_STATE_MANA,GetUnitState(ZX7,UNIT_STATE_MANA)+0.2*GetUnitState(ZX7,UNIT_STATE_MAX_MANA))
set t=null
set ZX7=null
return false
endfunction
function I6O takes unit ZX7 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1.0,true)
call TriggerAddCondition(t,Condition(function I5O))
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DAMAGED)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set t=null
endfunction
function XM8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit u
local region r
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call NM7(OB7)
call OZ7(t)
else
set u=O77(OB7,"u")
set r=CreateRegion()
call RegionAddRect(r,CE)
call RegionAddRect(r,dE)
if IsUnitInRegion(r,u)==false then
if OO7(OB7,"safe") then
call NS7(OB7,"safe",false)
else
call SetUnitX(u,GetRectCenterX(ND))
call SetUnitY(u,GetRectCenterY(ND))
call NS7(OB7,"safe",true)
endif
endif
call RemoveRegion(r)
set u=null
set r=null
endif
set t=null
return false
endfunction
function XN8 takes unit u returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,10.,true)
call TriggerAddCondition(t,Condition(function XM8))
call NT7(OB7,"u",u)
call NS7(OB7,"safe",true)
set t=null
endfunction
function XO8 takes nothing returns boolean
local item QU8
local integer WF8=GetTriggerEvalCount(GetTriggeringTrigger())
if WF8==E27 then
call OZ7(GetTriggeringTrigger())
endif
if WF8==E27-$B4 or WF8==E27-60 then
if NW4!=null then
set QU8=MV7(NW4,ZU[X0])
if QU8!=null then
if WF8==E27-$B4 then
if TV7(GetOwningPlayer(NW4))then
call VV7(X7,$F,(GetObjectName((1848657209)))+" |c00ff0303"+(GetObjectName((1848657207)))+"|r")
else
call VV7(Y7,$F,(GetObjectName((1848657209)))+" |c00ff0303"+(GetObjectName((1848657207)))+"|r")
endif
else
if TV7(GetOwningPlayer(NW4))then
call VV7(X7,$F,(GetObjectName((1848657209)))+" |c00ff0303"+(GetObjectName((1848656984)))+"|r")
else
call VV7(Y7,$F,(GetObjectName((1848657209)))+" |c00ff0303"+(GetObjectName((1848656984)))+"|r")
endif
endif
endif
endif
endif
set QU8=null
return false
endfunction
function XP8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1.,true)
call TriggerAddCondition(t,Condition(function XO8))
call TriggerEvaluate(t)
set t=null
endfunction
function XQ8 takes nothing returns boolean
set NY4=GetTriggerEvalCount(GetTriggeringTrigger())
if V4!=null and GetUnitState(V4,UNIT_STATE_LIFE)>1 then
call SetPlayerTechResearched(GetOwningPlayer(V4),1378889798,NY4)
if GetUnitAbilityLevel(V4,1093743666)==0 then
call UnitAddAbility(V4,1093743666)
endif
call SetUnitAbilityLevel(V4,1093743666,NY4+1)
endif
return false
endfunction
function XR8 takes nothing returns nothing
local integer i=1
local unit WI7
set NW4=null
loop
exitwhen i>5
set WI7=M7[GetPlayerId(Z7[i])]
if WI7!=null and MV7(WI7,ZU[X0])!=null then
call DisableTrigger(H94)
call C27("AegisOff",GetPlayerId(GetOwningPlayer(WI7)))
call RemoveItem(MV7(WI7,ZU[X0]))
call I6O(WI7)
call EnableTrigger(H94)
endif
set WI7=M7[GetPlayerId(A7[i])]
if WI7!=null and MV7(WI7,ZU[X0])!=null then
call DisableTrigger(H94)
call C27("AegisOff",GetPlayerId(GetOwningPlayer(WI7)))
call RemoveItem(MV7(WI7,ZU[X0]))
call I6O(WI7)
call EnableTrigger(H94)
endif
set i=i+1
endloop
set WI7=null
endfunction
function XS8 takes string XT8,string XU8 returns string
local string s=(GetObjectName((1848656705)))
set s=L87(s,"$team",XT8)
set s=L87(s,"$team",XU8)
return s
endfunction
function XV8 takes nothing returns boolean
return GetUnitTypeId(GetDyingUnit())==1848651852
endfunction
function IsHero takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))!=null
endfunction
function XW8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local location XX8
local real XV7
if GetTriggerEvalCount(t)==E57 or X24 then
set X24=false
set XX8=GetRectCenter(ND)
call XR8()
set NA4=NA4+1
set V4=CreateUnit(Player($C),'n00L',GetRectCenterX(ND),GetRectCenterY(ND),180.)
call SetUnitAcquireRange(V4,$96)
call XN8(V4)
call UnitAddAbility(V4,1093743666)
call SetPlayerTechResearched(GetOwningPlayer(V4),1378889798,NY4)
call SetUnitAbilityLevel(V4,1093743666,NY4+1)
call RemoveLocation(XX8)
if NA4>1 then
call UnitRemoveAbility(V4,1093684018)
call UnitAddAbility(V4,1093685558)
call UnitAddItem(V4,CreateItem(ZU[AC],0,0))
endif
call UnitAddItem(V4,CreateItem(ZU[X0],0,0))
call OZ7(t)
set DP7=99999999.
elseif GetTriggerEvalCount(t)==E27 then
call XR8()
set DP7=99999999.
endif
set t=null
set XX8=null
return false
endfunction
function XY8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function XW8))
set X24=false
set E57=GetRandomInt(360,660)
call XP8()
set NX4=false
if(TV7(GetOwningPlayer(GetKillingUnit())))then
call C27("Roshan",0)
call VV7(bj_FORCE_ALL_PLAYERS,10.,XS8("|c00ff0000"+(GetObjectName((1848653365)))+"|r",(GetObjectName((1848653365)))))
call AdjustPlayerStateBJ($C8,Z7[1],PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ($C8,Z7[2],PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ($C8,Z7[3],PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ($C8,Z7[4],PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ($C8,Z7[5],PLAYER_STATE_RESOURCE_GOLD)
endif
if(TW7(GetOwningPlayer(GetKillingUnit())))then
call C27("Roshan",1)
call VV7(bj_FORCE_ALL_PLAYERS,10.,XS8("|c00004000"+(GetObjectName((1848653379)))+"|r",(GetObjectName((1848653379)))))
call AdjustPlayerStateBJ($C8,A7[1],PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ($C8,A7[2],PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ($C8,A7[3],PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ($C8,A7[4],PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ($C8,A7[5],PLAYER_STATE_RESOURCE_GOLD)
endif
set t=null
endfunction
function XZ8 takes nothing returns nothing
local texttag t=CreateTextTag()
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(GetKillingUnit())
call SetTextTagText(t,"$",.027)
call SetTextTagPosUnit(t,u,0)
call SetTextTagColorBJ(t,KA4[GetPlayerId(p)],KB4[GetPlayerId(p)],KC4[GetPlayerId(p)],$F)
call SetTextTagVelocity(t,0,.035)
call SetTextTagFadepoint(t,3)
call SetTextTagLifespan(t,1.5)
call SetTextTagPermanent(t,false)
call SetTextTagVisibility(t,false)
if GetLocalPlayer()==KX4 or GetLocalPlayer()==KY4 then
call SetTextTagVisibility(t,true)
endif
set t=null
set u=null
set p=null
endfunction
function XA8 takes unit u,player p returns nothing
local texttag t=CreateTextTag()
call SetTextTagText(t,"!",.03)
call SetTextTagPosUnit(t,u,0)
call SetTextTagColorBJ(t,KA4[GetPlayerId(p)],KB4[GetPlayerId(p)],KC4[GetPlayerId(p)],$F)
call SetTextTagVelocity(t,0,.035)
call SetTextTagFadepoint(t,3)
call SetTextTagLifespan(t,1.5)
call SetTextTagPermanent(t,false)
call SetTextTagVisibility(t,false)
if ob[GetPlayerId(GetLocalPlayer())] or(V8 and(GetLocalPlayer()==KX4 or GetLocalPlayer()==KY4))then
call SetTextTagVisibility(t,true)
endif
set t=null
endfunction
function XB8 takes nothing returns nothing
if IsUnitType(GetEnumUnit(),UNIT_TYPE_MELEE_ATTACKER) then
call AddHeroXP(GetEnumUnit(),Tl/IH4,true)
else
call AddHeroXP(GetEnumUnit(),tl/IH4,true)
endif
endfunction
function XC8 takes nothing returns nothing
local group g=WS7()
local integer UY7
local integer X38=36
local integer X68=X38/2
call GroupEnumUnitsInRange(g,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),$52D,Condition(function A57))
set UY7=ZI7(g)
set IH4=UY7
set tl=X38
set Tl=X68
call ForGroup(g,function XB8)
call WR7(g)
call XA8(GetDyingUnit(),GetOwningPlayer(GetKillingUnit()))
set g=null
endfunction
function XL8 takes nothing returns boolean
if IsUnitAlly(GetKillingUnit(),GetOwningPlayer(GetTriggerUnit())) and Ovv==false then
call XC8()
else
if V8 and TX7(GetOwningPlayer(GetKillingUnit()))then
call XZ8()
endif
set Ovv=false
endif
return false
endfunction
function X18 takes player LK7,player LM7 returns string
local string s=(GetObjectName((1848656208)))
set s=L87(s,"$dead",(KZ4[GetPlayerId((LK7))]))
return s
endfunction
function X08 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local real x=(LoadReal(L7,(I97),(6)))
local real y=(LoadReal(L7,(I97),(7)))
call SetTerrainPathable(x,y,PATHING_TYPE_WALKABILITY,false)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
return false
endfunction
function X58 takes unit ZX7 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local real x=GetUnitX(ZX7)
local real y=GetUnitY(ZX7)
call SetTerrainPathable(x,y,PATHING_TYPE_WALKABILITY,true)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function X08))
call SaveReal(L7,(I97),(6),((x)*1.))
call SaveReal(L7,(I97),(7),((y)*1.))
set ZX7=null
set t=null
endfunction
function X28 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit X_8=(LoadUnitHandle(L7,(I97),(2)))
local integer WF8=GetTriggerEvalCount(t)
local integer Y48=$B4-WF8
local integer i=1
local integer id
local real x=(LoadReal(L7,(I97),(6)))
local real y=(LoadReal(L7,(I97),(7)))
loop
exitwhen i>5
if IsPlayerAlly(GetOwningPlayer(X_8),Z7[0])then
set id=GetPlayerId(Z7[i])
else
set id=GetPlayerId(A7[i])
endif
set i=i+1
if Y48==0 then
call LeaderboardDisplay(EW7[id],false)
if IsPlayerAlly(Z7[0],Player(id))then
set E07[GetPlayerId(Z7[0])]=false
endif
if IsPlayerAlly(A7[0],Player(id))then
set E07[GetPlayerId(A7[0])]=false
endif
else
if XH7(M7[id])==false then
call PlayerSetLeaderboard(Player(id),EW7[id])
call LeaderboardDisplay(EW7[id],true)
call LeaderboardSetLabel(EW7[id],"    "+GetObjectName(1848659034)+" "+I2S(Y48))
endif
endif
endloop
if Y48==2 then
call SetUnitPosition(X_8,x,y)
endif
if Y48==0 then
call NS7(GetHandleId(X_8),"aiCrow|Alive",true)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set X_8=null
return false
endfunction
function Y78 takes player HY7,integer WE8 returns nothing
local texttag t
if WE8>0 then
set t=CreateTextTag()
call SetPlayerState(HY7,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(HY7,PLAYER_STATE_RESOURCE_GOLD)+WE8)
call SetTextTagText(t,"+"+I2S(WE8),.025)
call SetTextTagPosUnit(t,M7[GetPlayerId(HY7)],0)
call SetTextTagColor(t,$FF,$DC,0,$FF)
call SetTextTagVelocity(t,0,.03)
if GetLocalPlayer()==HY7 then
call SetTextTagVisibility(t,true)
else
call SetTextTagVisibility(t,false)
endif
call SetTextTagFadepoint(t,2)
call SetTextTagLifespan(t,3)
call SetTextTagPermanent(t,false)
endif
endfunction
function Y88 takes nothing returns boolean
local real x
local real y
local unit X_8=GetTriggerUnit()
local integer i=1
local integer Y98=$AF
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call NS7(GetHandleId(X_8),"aiCrow|Alive",false)
call C27("Courier"+I2S(GetPlayerId(GetOwningPlayer(GetTriggerUnit()))),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call VV7(L8,10.,X18(GetOwningPlayer(GetTriggerUnit()),GetOwningPlayer(GetKillingUnit())))
call PingMinimapEx(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),6,$FF,0,0,false)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function X28))
call SaveUnitHandle(L7,(I97),(2),(X_8))
if IsPlayerAlly(GetOwningPlayer(X_8),Z7[0])and E07[GetPlayerId(Z7[0])]==false then
set E07[GetPlayerId(Z7[0])]=true
loop
exitwhen i>5
call Y78(A7[i],Y98)
set i=i+1
endloop
endif
set i=1
if IsPlayerAlly(GetOwningPlayer(X_8),A7[0])and E07[GetPlayerId(A7[0])]==false then
set E07[GetPlayerId(A7[0])]=true
loop
exitwhen i>5
call Y78(Z7[i],Y98)
set i=i+1
endloop
endif
if TV7(GetOwningPlayer(X_8))then
set x=GetRectCenterX(ED)
set y=GetRectCenterY(ED)
else
set x=GetRectCenterX(L9)
set y=GetRectCenterY(L9)
endif
call SaveReal(L7,(I97),(6),((x)*1.))
call SaveReal(L7,(I97),(7),((y)*1.))
if IsTerrainPathable(GetUnitX(X_8),GetUnitY(X_8),PATHING_TYPE_WALKABILITY)then
call X58(X_8)
endif
set t=null
return false
endfunction
function YD8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real x=IX4
local real y=IY4
if TW7(GetOwningPlayer(ZX7))then
set x=JY4
set y=JZ4
endif
if XH7(ZX7)==false then
if KF7(GetUnitX(ZX7),GetUnitY(ZX7),x,y)<800 then
call XF7(ZX7,1098282348)
else
call UnitRemoveAbility(ZX7,1098282348)
endif
endif
set t=null
set ZX7=null
return false
endfunction
function YE8 takes unit X_8 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call SetPlayerAbilityAvailable(GetOwningPlayer(X_8),1093810510,false)
call UnitMakeAbilityPermanent(X_8,true,1093810509)
call TriggerRegisterDeathEvent(t,X_8)
call TriggerAddCondition(t,Condition(function Y88))
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function YD8))
call SaveUnitHandle(L7,(I97),(2),(X_8))
set t=null
endfunction
function YF8 takes nothing returns nothing
if KW7(GetTriggerUnit())and IsUnitIllusion(GetTriggerUnit())==false then
call C27("Courier"+I2S(GetPlayerId(GetOwningPlayer(GetTriggerUnit()))),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call VV7(L8,10.,X18(GetOwningPlayer(GetTriggerUnit()),GetOwningPlayer(GetKillingUnit())))
call PingMinimapEx(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),6,$FF,0,0,false)
endif
endfunction
function YG8 takes nothing returns boolean
call OZ7(GetTriggeringTrigger())
set E07[GetPlayerId(Z7[0])]=false
set E07[GetPlayerId(A7[0])]=false
set EW7[GetPlayerId(Z7[1])]=CreateLeaderboard()
set EW7[GetPlayerId(Z7[2])]=CreateLeaderboard()
set EW7[GetPlayerId(Z7[3])]=CreateLeaderboard()
set EW7[GetPlayerId(Z7[4])]=CreateLeaderboard()
set EW7[GetPlayerId(Z7[5])]=CreateLeaderboard()
set EW7[GetPlayerId(A7[1])]=CreateLeaderboard()
set EW7[GetPlayerId(A7[2])]=CreateLeaderboard()
set EW7[GetPlayerId(A7[3])]=CreateLeaderboard()
set EW7[GetPlayerId(A7[4])]=CreateLeaderboard()
set EW7[GetPlayerId(A7[5])]=CreateLeaderboard()
call PlayerSetLeaderboard(Z7[1],EW7[GetPlayerId(Z7[1])])
call PlayerSetLeaderboard(Z7[2],EW7[GetPlayerId(Z7[2])])
call PlayerSetLeaderboard(Z7[3],EW7[GetPlayerId(Z7[3])])
call PlayerSetLeaderboard(Z7[4],EW7[GetPlayerId(Z7[4])])
call PlayerSetLeaderboard(Z7[5],EW7[GetPlayerId(Z7[5])])
call PlayerSetLeaderboard(A7[1],EW7[GetPlayerId(A7[1])])
call PlayerSetLeaderboard(A7[2],EW7[GetPlayerId(A7[2])])
call PlayerSetLeaderboard(A7[3],EW7[GetPlayerId(A7[3])])
call PlayerSetLeaderboard(A7[4],EW7[GetPlayerId(A7[4])])
call PlayerSetLeaderboard(A7[5],EW7[GetPlayerId(A7[5])])
call LeaderboardDisplay(EW7[GetPlayerId(Z7[1])],false)
call LeaderboardDisplay(EW7[GetPlayerId(Z7[2])],false)
call LeaderboardDisplay(EW7[GetPlayerId(Z7[3])],false)
call LeaderboardDisplay(EW7[GetPlayerId(Z7[4])],false)
call LeaderboardDisplay(EW7[GetPlayerId(Z7[5])],false)
call LeaderboardDisplay(EW7[GetPlayerId(A7[1])],false)
call LeaderboardDisplay(EW7[GetPlayerId(A7[2])],false)
call LeaderboardDisplay(EW7[GetPlayerId(A7[3])],false)
call LeaderboardDisplay(EW7[GetPlayerId(A7[4])],false)
call LeaderboardDisplay(EW7[GetPlayerId(A7[5])],false)
call LeaderboardSetLabelBJ(EW7[GetPlayerId(Z7[1])]," ")
call LeaderboardSetLabelBJ(EW7[GetPlayerId(Z7[2])]," ")
call LeaderboardSetLabelBJ(EW7[GetPlayerId(Z7[3])]," ")
call LeaderboardSetLabelBJ(EW7[GetPlayerId(Z7[4])]," ")
call LeaderboardSetLabelBJ(EW7[GetPlayerId(Z7[5])]," ")
call LeaderboardSetLabelBJ(EW7[GetPlayerId(A7[1])]," ")
call LeaderboardSetLabelBJ(EW7[GetPlayerId(A7[2])]," ")
call LeaderboardSetLabelBJ(EW7[GetPlayerId(A7[3])]," ")
call LeaderboardSetLabelBJ(EW7[GetPlayerId(A7[4])]," ")
call LeaderboardSetLabelBJ(EW7[GetPlayerId(A7[5])]," ")
return false
endfunction
function YH8 takes nothing returns nothing
local integer id=GetUnitTypeId(GetTriggerUnit())
if id==1697656914 or id==1697657137 or id==1697656915 or id==1697657145 or id==1966092365 or id==1966092356 or id==1966092366 or id==1966092372 then
if IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit()))then
set N04[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=N04[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
call VV7(L8,$A,Q[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+(KZ4[GetPlayerId((GetOwningPlayer(GetKillingUnit())))])+"|r "+(GetObjectName((1848652880)))+".")
else
call VV7(L8,$A,Q[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+(KZ4[GetPlayerId((GetOwningPlayer(GetKillingUnit())))])+"|r "+(GetObjectName((1848657230)))+".")
endif
endif
endfunction
function YI8 takes nothing returns nothing
if KW7(GetEnumUnit())and IsUnitAlly(GetEnumUnit(),Z7[0])==false and GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)>.5 then
call UnitRemoveAbility(GetEnumUnit(),1110456392)
call B67(IZ4,GetEnumUnit(),2,500)
endif
endfunction
function YJ8 takes nothing returns nothing
if KW7(GetEnumUnit())and IsUnitAlly(GetEnumUnit(),A7[0])==false and GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)>.5 then
call UnitRemoveAbility(GetEnumUnit(),1110456392)
call B67(JA4,GetEnumUnit(),2,500)
endif
endfunction
function YK8 takes nothing returns boolean
local group g=WS7()
call GroupEnumUnitsInRect(g,OD,Condition(function TO7))
call ForGroup(g,function YI8)
call WR7(g)
set g=WS7()
call GroupEnumUnitsInRect(g,PD,Condition(function TO7))
call ForGroup(g,function YJ8)
call WR7(g)
set g=null
return false
endfunction
function YM8 takes unit u returns boolean
return(GetUnitAbilityLevel((u),(1110454344))>0)or(GetUnitAbilityLevel((u),(1112500344))>0)or(GetUnitAbilityLevel((u),(1112560453))>0)or(GetUnitAbilityLevel((u),(1110456633))>0)or(GetUnitAbilityLevel((u),(1112757326))>0)or(GetUnitAbilityLevel((u),(1110459206))>0)or(GetUnitAbilityLevel((u),(1110458957))>0)or(GetUnitAbilityLevel((u),(1110455885))>0)or(GetUnitAbilityLevel((u),(1110456142))>0)or(GetUnitAbilityLevel((u),(1110456403))>0)or(GetUnitAbilityLevel((u),(1110454353))>0)or(GetUnitAbilityLevel((u),(1110455382))>0)or(GetUnitAbilityLevel((u),(1110456114))>0)or(GetUnitAbilityLevel((u),(1112891758))>0)or(GetUnitAbilityLevel((u),(1110456629))>0)or(GetUnitAbilityLevel((u),(1110455113))>0)or(GetUnitAbilityLevel((u),(1110458692))>0)or(GetUnitAbilityLevel((u),(1110458693))>0)or(GetUnitAbilityLevel((u),(1110458949))>0)or(GetUnitAbilityLevel((u),(1110458950))>0)or(GetUnitAbilityLevel((u),(1110454328))>0)or(GetUnitAbilityLevel((u),(1110455362))>0)or(GetUnitAbilityLevel((u),(1110454854))>0)or(GetUnitAbilityLevel((u),(1112896368))>0)or(GetUnitAbilityLevel((u),(1112896372))>0)or(GetUnitAbilityLevel((u),(1110459460))>0)or(OT7(u,"DisruptionState"))or(OT7(u,"AstralImprisonmentState"))or(GetUnitAbilityLevel((u),(1110459186))>0)or(GetUnitAbilityLevel((u),(1110455891))>0)or(GetUnitAbilityLevel((u),(1110454867))>0)or(GetUnitAbilityLevel((u),(1110456133))>0)
endfunction
function YN8 takes unit u returns boolean
return YM8(u)or AF7(u)or IsUnitPaused(u)or VP7(u)
endfunction
function YO8 takes unit I_7 returns boolean
return(IsUnitType(I_7,UNIT_TYPE_STUNNED)or IsUnitType(I_7,UNIT_TYPE_SNARED)or IsUnitType(I_7,UNIT_TYPE_POLYMORPHED)or GetUnitMoveSpeed(I_7)<290 or IsUnitPaused(I_7))or YM8(I_7)or AF7(I_7)
endfunction
function YP8 takes integer YQ8,integer YR8,boolean extraColor returns nothing
local integer x=0
loop
exitwhen x>$F
call SetPlayerState(Player(x),PLAYER_STATE_RESOURCE_LUMBER,YQ8)
call SetPlayerState(Player(x),PLAYER_STATE_RESOURCE_FOOD_USED,YR8)
set x=x+1
endloop
endfunction
function YS8 takes unit u returns boolean
local integer id=GetUnitTypeId(u)
return id==1848652343 or id==1966092596 or id==1966092597 or id==1966092598 or id==1966092612 or id==1966092613 or id==1966092614 or id==1966092599 or id==1966092601 or id==1966092600 or id==1966092609 or id==1966092610 or id==1966092611
endfunction
function YT8 takes unit u,boolean b returns nothing
call SetUnitInvulnerable(u,b)
call SaveBoolean(L7,(GetHandleId(u)),(509),(b))
endfunction
function YU8 takes unit u returns boolean
return(LoadBoolean(L7,(GetHandleId(u)),(509)))or GetUnitAbilityLevel(u,1098282348)>0
endfunction
function YV8 takes real x,real y returns location
local real Z97
local real ZD7
local integer i=0
loop
exitwhen i>40
set Z97=x+i*20
set ZD7=y+i*20
if IsPointInRegion(IU4,Z97,ZD7)==false then
return Location(Z97,ZD7)
endif
set Z97=x+i*20
set ZD7=y-i*20
if IsPointInRegion(IU4,Z97,ZD7)==false then
return Location(Z97,ZD7)
endif
set Z97=x-i*20
set ZD7=y+i*20
if IsPointInRegion(IU4,Z97,ZD7)==false then
return Location(Z97,ZD7)
endif
set Z97=x-i*20
set ZD7=y-i*20
if IsPointInRegion(IU4,Z97,ZD7)==false then
return Location(Z97,ZD7)
endif
set i=i+1
endloop
return Location(x,y)
endfunction
function YW8 takes unit ZX7,integer BC7,integer YX8 returns nothing
local integer i
if WI4[1]==0 then
return
endif
set i=1
loop
exitwhen i>$A
call UnitRemoveAbility(ZX7,WI4[i])
set i=i+1
endloop
set i=1
loop
exitwhen i>$A
call UnitRemoveAbility(ZX7,WJ4[i])
set i=i+1
endloop
set i=1
loop
exitwhen i>$A
call UnitRemoveAbility(ZX7,WK4[i])
set i=i+1
endloop
set i=1
loop
exitwhen i>$A
call UnitRemoveAbility(ZX7,WM4[i])
set i=i+1
endloop
call UnitRemoveAbility(ZX7,1110458963)
if BC7==1 then
call UnitAddAbility(ZX7,WI4[YX8])
elseif BC7==2 then
call UnitAddAbility(ZX7,WJ4[YX8])
elseif BC7==3 then
call UnitAddAbility(ZX7,WK4[YX8])
elseif BC7==4 then
call UnitAddAbility(ZX7,WM4[YX8])
endif
endfunction
function YY8 takes integer Z17 returns nothing
set TE4=TE4+1
set TD4[TE4]=Z17
endfunction
function YZ8 takes unit u returns nothing
local integer i=1
loop
exitwhen i>TE4
call UnitRemoveAbility(u,TD4[i])
set i=i+1
endloop
endfunction
function YA8 takes integer o6 returns boolean
return o6==1095331943 or o6==1093677654 or o6==1094938741 or o6==1093744708 or o6==1093750613 or o6==1095328633 or o6==1093751617
endfunction
function YB8 takes unit m5 returns nothing
call UnitRemoveAbility(m5,1093749313)
call UnitRemoveAbility(m5,1110459204)
call UnitRemoveAbility(m5,1093749828)
call UnitRemoveAbility(m5,1097167980)
call YW8(m5,0,0)
endfunction
function YC8 takes nothing returns boolean
if YA8(GetSpellAbilityId())then
call YB8(GetSpellTargetUnit())
endif
return false
endfunction
function Y38 takes integer Y68 returns integer
if DV[Y68]==0 then
return Y68
else
return DV[Y68]
endif
endfunction
function YL8 takes nothing returns nothing
local integer Y18=R2I(TimerGetElapsed(W)-M_4)
local integer YQ8=Y18/60-1/2
local integer YR8=ModuloInteger(Y18,60)
if X14 then
call YP8(YQ8,YR8,false)
elseif Q94==false then
set Y18=R2I(16-TimerGetElapsed(W))
set YQ8=Y18/60-1/2
set YR8=ModuloInteger(Y18,60)
call YP8(YQ8,YR8,true)
endif
set Bz=R2I(TimerGetElapsed(W)-N44)
set B=YQ8
set C=YR8
if false then
set Y18=0
loop
exitwhen Y18>$B
set GJ7[16+Y18]=0
set Y18=Y18+1
endloop
endif
endfunction
function Y08 takes unit Y58,integer Y28 returns integer
local integer i
if Y28==1 then
if GetUnitAbilityLevel(Y58,1094004784)>0 then
return 500
endif
set i=KL4
loop
exitwhen i>K54
if GetUnitAbilityLevel(Y58,HM4[i])>0 then
return i
endif
set i=i+1
endloop
return 0
elseif Y28==2 then
if GetUnitAbilityLevel(Y58,1094004785)>0 then
return 500
endif
set i=KL4
loop
exitwhen i>K54
if GetUnitAbilityLevel(Y58,HN4[i])>0 then
return i
endif
set i=i+1
endloop
return 0
elseif Y28==3 then
if GetUnitAbilityLevel(Y58,1094004786)>0 then
return 500
endif
set i=KL4
loop
exitwhen i>K54
if GetUnitAbilityLevel(Y58,HO4[i])>0 then
return i
endif
set i=i+1
endloop
return 0
elseif Y28==4 then
if GetUnitAbilityLevel(Y58,1094004787)>0 then
return 500
endif
set i=KL4
loop
exitwhen i>K54
if GetUnitAbilityLevel(Y58,HP4[i])>0 or GetUnitAbilityLevel(Y58,HQ4[i])>0 then
return i
endif
set i=i+1
endloop
return 0
endif
return 0
endfunction
function Y_8 takes item KA7 returns boolean
local integer Z48=KY7(KA7)
if Z48==FR4 or Z48==FS4 or Z48==FT4 or Z48==FU4 or Z48==FV4 or Z48==FW4 or Z48==FX4 or Z48==FY4 or Z48==FZ4 or Z48==FA4 or Z48==FB4 or Z48==F34 or Z48==F64 or Z48==FL4 or Z48==F14 or Z48==F04 or Z48==F54 or Z48==F24 or Z48==G44 or Z48==G74 or Z48==G84 or Z48==GD4 or Z48==GE4 or Z48==GG4 or Z48==GH4 or Z48==GI4 or Z48==GJ4 or Z48==GM4 or Z48==GN4 or Z48==GO4 or Z48==GP4 or Z48==GQ4 or Z48==GR4 or Z48==GS4 or Z48==GT4 or Z48==GK4 or Z48==GU4 or Z48==FC4 or Z48==GV4 or Z48==GW4 or Z48==GY4 or Z48==GZ4 or Z48==GA4 or Z48==G34 or Z48==GB4 or Z48==G64 or Z48==GX4 or Z48==GL4 or Z48==G14 or Z48==G04 or Z48==G54 or Z48==G24 or Z48==R12 then
return true
elseif Z48==R13 or Z48==R15 or Z48==R16 or Z48==R1A or Z48==R1C or Z48==R1H or Z48==R1I or Z48==R1J or Z48==R1K or Z48==R1L or Z48==R1M or Z48==R1N or Z48==R1O or Z48==R1P or Z48==R21 or Z48==R3B then
return true
endif
return false
endfunction
function Z78 takes integer Z48 returns boolean
return Z48==DF4 or Z48==AC or Z48==OC or Z48==QC or Z48==TC or Z48==VC or Z48==WC or Z48==XC or Z48==YC or Z48==PC or Z48==LC or Z48==H3
endfunction
function Z88 takes integer Z48 returns boolean
return Z48==DY4 or Z48==VB or Z48==D1 or Z48==E1 or Z48==DI4 or Z48==X0 or Z48==CC or Z48==ZA or Z48==DT4 or Z48==YB
endfunction
function Z98 takes integer Y68 returns integer
if TC==Y68 then
return 4
endif
if VC==Y68 or WC==Y68 or BC==Y68 or PC==Y68 or LC==Y68 then
return 2
endif
return 1
endfunction
function ZD8 takes string winner returns nothing
local integer i
local player p
local string id
local integer D5=R2I(TimerGetElapsed(W)-M_4)
local integer ZE8=D5/60-1/2
local integer YR8=ModuloInteger(D5,60)
call CL7()
set i=1
loop
exitwhen i>5
set p=Z7[i]
set id=I2S(GetPlayerId(p))
call StoreInteger(IV4,id,"1",(T[GetPlayerId((p))]))
call StoreInteger(IV4,id,"2",(V[GetPlayerId((p))]))
call StoreInteger(IV4,id,"3",(T7[GetPlayerId((p))]))
call StoreInteger(IV4,id,"4",(U7[GetPlayerId((p))]))
call StoreInteger(IV4,id,"5",(IU[GetPlayerId((p))]))
call StoreInteger(IV4,id,"6",(GetPlayerState((p),PLAYER_STATE_RESOURCE_GOLD)))
call StoreInteger(IV4,id,"7",(LoadInteger(L7,StringHash("Stats"+I2S(GetPlayerId((p)))),StringHash("NumOfNeutrals"))))
call StoreInteger(IV4,id,"8_0",(GetItemTypeId(UnitItemInSlot(M7[GetPlayerId((p))],(0)))))
call StoreInteger(IV4,id,"8_1",(GetItemTypeId(UnitItemInSlot(M7[GetPlayerId((p))],(1)))))
call StoreInteger(IV4,id,"8_2",(GetItemTypeId(UnitItemInSlot(M7[GetPlayerId((p))],(2)))))
call StoreInteger(IV4,id,"8_3",(GetItemTypeId(UnitItemInSlot(M7[GetPlayerId((p))],(3)))))
call StoreInteger(IV4,id,"8_4",(GetItemTypeId(UnitItemInSlot(M7[GetPlayerId((p))],(4)))))
call StoreInteger(IV4,id,"8_5",(GetItemTypeId(UnitItemInSlot(M7[GetPlayerId((p))],(5)))))
call StoreInteger(IV4,id,"9",(GetUnitTypeId(M7[GetPlayerId((p))])))
call StoreInteger(IV4,id,"id",i)
set p=A7[i]
set id=I2S(GetPlayerId(p))
call StoreInteger(IV4,id,"1",(T[GetPlayerId((p))]))
call StoreInteger(IV4,id,"2",(V[GetPlayerId((p))]))
call StoreInteger(IV4,id,"3",(T7[GetPlayerId((p))]))
call StoreInteger(IV4,id,"4",(U7[GetPlayerId((p))]))
call StoreInteger(IV4,id,"5",(IU[GetPlayerId((p))]))
call StoreInteger(IV4,id,"6",(GetPlayerState((p),PLAYER_STATE_RESOURCE_GOLD)))
call StoreInteger(IV4,id,"7",(LoadInteger(L7,StringHash("Stats"+I2S(GetPlayerId((p)))),StringHash("NumOfNeutrals"))))
call StoreInteger(IV4,id,"8_0",(GetItemTypeId(UnitItemInSlot(M7[GetPlayerId((p))],(0)))))
call StoreInteger(IV4,id,"8_1",(GetItemTypeId(UnitItemInSlot(M7[GetPlayerId((p))],(1)))))
call StoreInteger(IV4,id,"8_2",(GetItemTypeId(UnitItemInSlot(M7[GetPlayerId((p))],(2)))))
call StoreInteger(IV4,id,"8_3",(GetItemTypeId(UnitItemInSlot(M7[GetPlayerId((p))],(3)))))
call StoreInteger(IV4,id,"8_4",(GetItemTypeId(UnitItemInSlot(M7[GetPlayerId((p))],(4)))))
call StoreInteger(IV4,id,"8_5",(GetItemTypeId(UnitItemInSlot(M7[GetPlayerId((p))],(5)))))
call StoreInteger(IV4,id,"9",(GetUnitTypeId(M7[GetPlayerId((p))])))
call StoreInteger(IV4,id,"id",i+5)
if GetLocalPlayer()==Le then
call SyncStoredInteger(IV4,I2S(GetPlayerId(Z7[i])),"1")
call SyncStoredInteger(IV4,I2S(GetPlayerId(Z7[i])),"2")
call SyncStoredInteger(IV4,I2S(GetPlayerId(Z7[i])),"3")
call SyncStoredInteger(IV4,I2S(GetPlayerId(Z7[i])),"4")
call SyncStoredInteger(IV4,I2S(GetPlayerId(Z7[i])),"5")
call SyncStoredInteger(IV4,I2S(GetPlayerId(Z7[i])),"6")
call SyncStoredInteger(IV4,I2S(GetPlayerId(Z7[i])),"7")
call SyncStoredInteger(IV4,I2S(GetPlayerId(Z7[i])),"8_0")
call SyncStoredInteger(IV4,I2S(GetPlayerId(Z7[i])),"8_1")
call SyncStoredInteger(IV4,I2S(GetPlayerId(Z7[i])),"8_2")
call SyncStoredInteger(IV4,I2S(GetPlayerId(Z7[i])),"8_3")
call SyncStoredInteger(IV4,I2S(GetPlayerId(Z7[i])),"8_4")
call SyncStoredInteger(IV4,I2S(GetPlayerId(Z7[i])),"8_5")
call SyncStoredInteger(IV4,I2S(GetPlayerId(Z7[i])),"9")
call SyncStoredInteger(IV4,I2S(GetPlayerId(Z7[i])),"id")
call SyncStoredInteger(IV4,I2S(GetPlayerId(A7[i])),"1")
call SyncStoredInteger(IV4,I2S(GetPlayerId(A7[i])),"2")
call SyncStoredInteger(IV4,I2S(GetPlayerId(A7[i])),"3")
call SyncStoredInteger(IV4,I2S(GetPlayerId(A7[i])),"4")
call SyncStoredInteger(IV4,I2S(GetPlayerId(A7[i])),"5")
call SyncStoredInteger(IV4,I2S(GetPlayerId(A7[i])),"6")
call SyncStoredInteger(IV4,I2S(GetPlayerId(A7[i])),"7")
call SyncStoredInteger(IV4,I2S(GetPlayerId(A7[i])),"8_0")
call SyncStoredInteger(IV4,I2S(GetPlayerId(A7[i])),"8_1")
call SyncStoredInteger(IV4,I2S(GetPlayerId(A7[i])),"8_2")
call SyncStoredInteger(IV4,I2S(GetPlayerId(A7[i])),"8_3")
call SyncStoredInteger(IV4,I2S(GetPlayerId(A7[i])),"8_4")
call SyncStoredInteger(IV4,I2S(GetPlayerId(A7[i])),"8_5")
call SyncStoredInteger(IV4,I2S(GetPlayerId(A7[i])),"9")
call SyncStoredInteger(IV4,I2S(GetPlayerId(A7[i])),"id")
endif
set i=i+1
endloop
if O84==false then
call StoreInteger(IV4,"Global","Winner",O94)
call StoreInteger(IV4,"Global","m",ZE8)
call StoreInteger(IV4,"Global","s",YR8)
if GetLocalPlayer()==Le then
call SyncStoredInteger(IV4,"Global","Winner")
call SyncStoredInteger(IV4,"Global","m")
call SyncStoredInteger(IV4,"Global","s")
endif
endif
endfunction
function DN8 takes nothing returns nothing
call ZD8("1")
endfunction
function ZF8 takes nothing returns boolean
call ExecuteFunc("T08")
return false
endfunction
function ZG8 takes nothing returns nothing
call XB7(GetEnumUnit())
endfunction
function ZH8 takes nothing returns nothing
local group g=WS7()
call GroupEnumUnitsInRange(g,0,0,$2EE0,Condition(function AW7))
call ForGroup(g,function ZG8)
call WR7(g)
set g=null
endfunction
function ZI8 takes nothing returns nothing
call DisableTrigger(Q34)
call DisableTrigger(Q64)
call DisableTrigger(QL4)
call DisableTrigger(Q14)
call DisableTrigger(QZ4)
call DisableTrigger(DQ7)
call DisableTrigger(QB4)
call DisableTrigger(LQ4)
call DisableTrigger(Hn)
endfunction
function ZJ8 takes nothing returns nothing
set bj_changeLevelShowScores=true
call DisableTrigger(OE4)
call DisableTrigger(OF4)
call ExecuteFunc("ZK8")
if V8 then
call DisableTrigger(NK4)
endif
call DisableTrigger(M24)
call ClearTextMessages()
call VV7(bj_FORCE_ALL_PLAYERS,60,B9+" "+(GetObjectName((1848653108)))+" www.getdota.com.")
set D9=true
call XE7()
call DisableTrigger(JS)
call DisableTrigger(FS)
call DisableTrigger(M54)
call X77()
call ZI8()
endfunction
function ZM8 takes nothing returns nothing
local trigger t=CreateTrigger()
call PanCameraToTimed(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)
call TriggerRegisterTimerEvent(t,6.5,false)
call TriggerAddCondition(t,Condition(function ZF8))
set O94=2
set B9="|c0020c000"+(GetObjectName((1848652623)))+"|r"
call ZJ8()
call ZH8()
call ZD8("2")
set t=null
endfunction
function ZN8 takes nothing returns boolean
call SetUnitVertexColorBJ(J34,100,100,100,GetTriggerEvalCount(GetTriggeringTrigger()))
if GetTriggerEvalCount(GetTriggeringTrigger())==100 then
call ShowUnit(J34,false)
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function ZO8 takes nothing returns nothing
local trigger t=CreateTrigger()
call PanCameraToTimed(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)
call TriggerRegisterTimerEvent(t,3.5,false)
call TriggerAddCondition(t,Condition(function ZF8))
set O94=1
set B9="|c00ff0303"+(GetObjectName((1848652622)))+"|r"
call ZJ8()
call ZH8()
call ZD8("1")
call AddSpecialEffect("war3mapImported\\FrozenThronesDeath2.mdx",GetUnitX(J34)+$96,GetUnitY(J34)+100)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function ZN8))
set t=null
endfunction
function ZP8 takes unit ZQ8 returns boolean
local unit ZR8=M7[GetPlayerId(GetOwningPlayer(ZQ8))]
if((GetUnitX(ZR8)-GetUnitX(ZQ8))*(GetUnitX(ZR8)-GetUnitX(ZQ8))+(GetUnitY(ZR8)-GetUnitY(ZQ8))*(GetUnitY(ZR8)-GetUnitY(ZQ8))>=$D0E49)then
set ZR8=null
return true
endif
set ZR8=null
return false
endfunction
function ZS8 takes nothing returns nothing
local unit S68=GetAttacker()
local integer ZT8=UnitInventorySize(S68)
local integer x=0
local item i
loop
exitwhen x>ZT8
set i=UnitItemInSlot(S68,x)
if KZ7(i)==UZ and GetRandomReal(0,1)<=.25 and AK7(S68)==false then
if AS7(S68)then
if ZP8(S68)==false then
if GetUnitAbilityLevel(GetTriggerUnit(),1093678162)==0 then
call B67(S68,GetTriggerUnit(),2,85)
endif
endif
else
if GetUnitAbilityLevel(GetTriggerUnit(),1093678162)==0 then
call B67(S68,GetTriggerUnit(),2,85)
endif
endif
endif
set x=x+1
endloop
set i=null
set S68=null
endfunction
function ZU8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real ZV8=(LoadReal(L7,(GetHandleId(ZX7)),(692)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH or ZV8<(TimerGetElapsed(W))then
call UnitRemoveAbility(ZX7,1093809717)
call UnitRemoveAbility(ZX7,1110456398)
call UnitRemoveAbility(ZX7,1093809731)
call SaveReal(L7,(GetHandleId(ZX7)),(692),((0)*1.))
endif
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set ZX7=null
return false
endfunction
function ZW8 takes unit ZX7 returns nothing
local trigger t
local integer I97
local real ZV8=(LoadReal(L7,(GetHandleId(ZX7)),(692)))
call SaveReal(L7,(GetHandleId(ZX7)),(692),(((TimerGetElapsed(W))+BG4)*1.))
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,BG4+.01,false)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerAddCondition(t,Condition(function ZU8))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call XF7(ZX7,1093809717)
call XF7(ZX7,1093809731)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093809717,false)
set t=null
endfunction
function ZX8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
if GetEventDamageSource()==ZX7 and GetEventDamage()>0 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if YS8(IH7)==false then
call ZW8(IH7)
endif
endif
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function ZY8 takes nothing returns nothing
local unit ZX7=GetAttacker()
local unit IH7=GetTriggerUnit()
local trigger t
local integer I97
if OT7(ZX7,"4309")==false then
call O37(ZX7,"4309",.2)
if GetRandomReal(0,100)<=BF4 then
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function ZX8))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
endif
endif
set ZX7=null
set IH7=null
endfunction
function aZU8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real ZV8=(LoadReal(L7,(GetHandleId(ZX7)),(6920)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH or ZV8<(TimerGetElapsed(W))then
call UnitRemoveAbility(ZX7,'A32Y')
call UnitRemoveAbility(ZX7,'A32Z')
call UnitRemoveAbility(ZX7,'B0HQ')
call SaveReal(L7,(GetHandleId(ZX7)),(6920),((0)*1.))
endif
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set ZX7=null
return false
endfunction
function aZW8 takes unit ZX7 returns nothing
local trigger t
local integer I97
local real Zz68
local real ZV8=(LoadReal(L7,(GetHandleId(ZX7)),(6920)))
if(IsUnitType(GetAttacker(),UNIT_TYPE_MELEE_ATTACKER))then
set Zz68=5
else
set Zz68=2.5
endif
call SaveReal(L7,(GetHandleId(ZX7)),(6920),(((TimerGetElapsed(W))+Zz68)*1.))
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,Zz68+.01,false)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerAddCondition(t,Condition(function aZU8))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call XF7(ZX7,'A32Y')
call XF7(ZX7,'A32Z')
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),'A32Y',false)
set t=null
endfunction
function aZX8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
if GetEventDamageSource()==ZX7 and GetEventDamage()>0 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if YS8(IH7)==false then
call aZW8(IH7)
endif
endif
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function aZY8 takes nothing returns nothing
local unit ZX7=GetAttacker()
local unit IH7=GetTriggerUnit()
local trigger t
local integer I97
if OT7(ZX7,"4334")==false then
call O37(ZX7,"4334",.2)
if GetRandomReal(0,100)<=100 then
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.,false)
call TriggerAddCondition(t,Condition(function aZX8))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
endif
endif
set ZX7=null
set IH7=null
endfunction
function ZZ8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real ZV8=(LoadReal(L7,(GetHandleId(ZX7)),(693)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH or ZV8<(TimerGetElapsed(W))then
call UnitRemoveAbility(ZX7,1093809718)
call UnitRemoveAbility(ZX7,1110454857)
call UnitRemoveAbility(ZX7,1093809731)
call SaveReal(L7,(GetHandleId(ZX7)),(693),((0)*1.))
endif
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set ZX7=null
return false
endfunction
function ZA8 takes unit ZX7 returns nothing
local trigger t
local integer I97
local real ZV8=(LoadReal(L7,(GetHandleId(ZX7)),(693)))
call SaveReal(L7,(GetHandleId(ZX7)),(693),(((TimerGetElapsed(W))+BI4)*1.))
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,BI4+.01,false)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerAddCondition(t,Condition(function ZZ8))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call XF7(ZX7,1093809718)
call XF7(ZX7,1093809731)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093809718,false)
set t=null
endfunction
function ZB8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
if GetEventDamageSource()==ZX7 and GetEventDamage()>0 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if YS8(IH7)==false then
call ZA8(IH7)
endif
endif
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function ZC8 takes nothing returns nothing
local unit ZX7=GetAttacker()
local unit IH7=GetTriggerUnit()
local trigger t
local integer I97
if OT7(ZX7,"4309")==false then
call O37(ZX7,"4309",.2)
if GetRandomReal(0,100)<=BH4 then
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function ZB8))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
endif
endif
set ZX7=null
set IH7=null
endfunction
function ZZZ8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real ZV8=(LoadReal(L7,(GetHandleId(ZX7)),(694)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH or ZV8<(TimerGetElapsed(W))then
call UnitRemoveAbility(ZX7,1093816648)
call UnitRemoveAbility(ZX7,1110460244)
call UnitRemoveAbility(ZX7,1110460240)
call UnitRemoveAbility(ZX7,1093816409)
call SaveReal(L7,(GetHandleId(ZX7)),(694),((0)*1.))
endif
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set ZX7=null
return false
endfunction
function ZAA8 takes unit ZX7 returns nothing
local trigger t
local integer I97
local real ZV8=(LoadReal(L7,(GetHandleId(ZX7)),(694)))
call SaveReal(L7,(GetHandleId(ZX7)),(694),(((TimerGetElapsed(W))+5)*1.))
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,5+.01,false)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerAddCondition(t,Condition(function ZZZ8))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call XF7(ZX7,1093816648)
call XF7(ZX7,1093816409)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093816648,false)
set t=null
endfunction
function ZBB8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
if GetEventDamageSource()==ZX7 and GetEventDamage()>0 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if YS8(IH7)==false then
call ZAA8(IH7)
endif
endif
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function ZCC8 takes nothing returns nothing
local unit ZX7=GetAttacker()
local unit IH7=GetTriggerUnit()
local trigger t
local integer I97
if OT7(ZX7,"4311")==false then
call O37(ZX7,"4311",.2)
if GetRandomReal(0,100)<=15 then
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function ZBB8))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
endif
endif
set ZX7=null
set IH7=null
endfunction
function AZBO takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
if GetEventDamageSource()==ZX7 and GetEventDamage()>0 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if(IsUnitType(ZX7,UNIT_TYPE_MELEE_ATTACKER))then
if MR7(ZX7,ZU[X1]) then
call B67(ZX7,IH7,10,GetEventDamage()*0.6)
else
call B67(ZX7,IH7,10,GetEventDamage()*0.4)
endif
else
if MR7(ZX7,ZU[X1]) then
call B67(ZX7,IH7,10,GetEventDamage()*0.25)
else
call B67(ZX7,IH7,10,GetEventDamage()*0.15)
endif
endif
endif
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function AZC8 takes nothing returns nothing
local unit ZX7=GetAttacker()
local unit IH7=GetTriggerUnit()
local trigger t
local integer I97
if((LoadInteger(L7,(GetHandleId((ZX7))),((4339))))==1)==false and XH7(IH7)==false then
call O3O(ZX7,4339,0.2)
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function AZBO))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
endif
set ZX7=null
set IH7=null
endfunction
function ZBO takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local real ZCO
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
if GetEventDamageSource()==ZX7 and GetEventDamage()>0 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if GetUnitAbilityLevel(ZX7,1093677618)==0 then
if IsUnitType(ZX7,UNIT_TYPE_MELEE_ATTACKER)==false and IsUnitIllusion(ZX7) then
set ZCO=RMinBJ(10,GetUnitState(IH7,UNIT_STATE_MANA))
elseif IsUnitType(ZX7,UNIT_TYPE_MELEE_ATTACKER)==true and IsUnitIllusion(ZX7) then
set ZCO=RMinBJ(20,GetUnitState(IH7,UNIT_STATE_MANA))
else
set ZCO=RMinBJ(40,GetUnitState(IH7,UNIT_STATE_MANA))
endif
call SetUnitState(IH7,UNIT_STATE_MANA,GetUnitState(IH7,UNIT_STATE_MANA)-ZCO)
call B67(ZX7,IH7,2,ZCO)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl",IH7,"origin"))
endif
endif
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function ZDO takes nothing returns nothing
local unit ZX7=GetAttacker()
local unit IH7=GetTriggerUnit()
local trigger t
local integer I97
if((LoadInteger(L7,(GetHandleId((ZX7))),((4340))))==1)==false and GetUnitState(IH7,UNIT_STATE_MANA)>0 then
call O3O(ZX7,4340,0.2)
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function ZBO))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
endif
set ZX7=null
set IH7=null
endfunction
function Z38 takes nothing returns nothing
local unit S68=GetAttacker()
local integer Z68=25
local integer id=GetPlayerId(GetOwningPlayer(GetAttacker()))
local integer OB7=GetHandleId(S68)
local real VW7=TimerGetElapsed(W)
local real ZL8=ON7(OB7,"bashertime")
local boolean Z18=OO7(OB7,"basheractive")
local boolean Z08=OO7(OB7,"basherremove")
local boolean Z58=VW7<ZL8
local boolean Z28=false
if IsUnitType(S68,UNIT_TYPE_MELEE_ATTACKER)==false then
set Z68=$A
endif
if GetRandomInt(0,100)<=Z68 then
set Z28=true
endif
if GetUnitAbilityLevel(S68,1093683786)>0 or GetUnitAbilityLevel(S68,1093679153)>0 or GetUnitAbilityLevel(S68,1093682997)>0 or GetUnitAbilityLevel(S68,1093679429)>0 then
call UnitRemoveAbility(S68,1093744436)
call UnitRemoveAbility(S68,1093744437)
set S68=null
return
endif
if Z18 and Z58==false and Z08==false then
call NQ7(OB7,"bashertime",(VW7+2)*1.)
if Z28==false then
call NS7(OB7,"basherremove",true)
endif
elseif Z58 or Z08 then
call UnitRemoveAbility(S68,1093744436)
call UnitRemoveAbility(S68,1093744437)
call NS7(OB7,"basheractive",false)
call NS7(OB7,"basherremove",false)
endif
if Z28 then
call XF7(S68,1093744436)
call UnitMakeAbilityPermanent(S68,true,1093744437)
call NS7(OB7,"basheractive",true)
endif
set S68=null
endfunction
function Z_8 takes real C57 returns boolean
return(100*GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)/ GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE))<C57
endfunction
function AntiTK_Building takes nothing returns boolean
return(Z_8($A)and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE) and GetUnitTypeId(GetTriggerUnit())!=1702129516 and GetUnitTypeId(GetTriggerUnit())!=1970172012)!=null
endfunction
function AntiTK_Hero takes nothing returns boolean
return Z_8(25)and(GetUnitAbilityLevel(GetTriggerUnit(),1112433775)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1111847784)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110454321)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110458705)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110458704)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455620)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455629)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455630)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455631)>0)
endfunction
function AntiTK_Creep takes nothing returns boolean
return(Z_8(50)and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==false and(IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false or GetUnitTypeId(GetTriggerUnit())==1700946284 or GetUnitTypeId(GetTriggerUnit())==1697657398 or GetUnitTypeId(GetTriggerUnit())==1970107511 or GetUnitTypeId(GetTriggerUnit())==1966092370))!=null
endfunction
function AntiTK_Exception takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit())==1966092371 or GetUnitTypeId(GetTriggerUnit())==1865429334 or OT7(GetAttacker(),"4328")
endfunction
function A48 takes nothing returns nothing
if not((Z_8($A)and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE) and GetUnitTypeId(GetTriggerUnit())!=1702129516 and GetUnitTypeId(GetTriggerUnit())!=1970172012)or(Z_8(25)and(GetUnitAbilityLevel(GetTriggerUnit(),1112433775)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1111847784)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110454321)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110458705)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110458704)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455620)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455629)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455630)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455631)>0))or(Z_8(50)and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==false and(IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false or GetUnitTypeId(GetTriggerUnit())==1700946284 or GetUnitTypeId(GetTriggerUnit())==1697657398 or GetUnitTypeId(GetTriggerUnit())==1970107511 or GetUnitTypeId(GetTriggerUnit())==1966092370))or(GetUnitTypeId(GetTriggerUnit())==1966092371 or GetUnitTypeId(GetTriggerUnit())==1865429334 or OT7(GetAttacker(),"4328")))then
call IssueImmediateOrderById(GetAttacker(),$D0004)
endif
endfunction
function A78 takes nothing returns boolean
if IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))then
call A48()
elseif IsUnitType(GetAttacker(),UNIT_TYPE_HERO) or AS7(GetAttacker())or IsUnitIllusion(GetAttacker())==true then
set OG4=GetPlayerId(GetOwningPlayer(GetAttacker()))
if IsUnitIllusion(GetAttacker())==false then
if RK4[OG4]>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitIllusion(GetAttacker())==false and MR7(GetAttacker(),ZU[UZ]) then
call ZS8()
endif
if RO4[OG4]>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitIllusion(GetAttacker())==false and(MR7(GetAttacker(),ZU[ZL]) or MR7(GetAttacker(),ZU[WL]) or MR7(GetAttacker(),ZU[U3]))then
call Z38()
endif
if RR4[OG4]>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitIllusion(GetAttacker())==false and MR7(GetAttacker(),ZU[U1]) then
call ZY8()
elseif(RS4[OG4]>0 or EA7[OG4]>0)and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitIllusion(GetAttacker())==false and(MR7(GetAttacker(),ZU[RL]) or MR7(GetAttacker(),ZU[R3]))then
call ZC8()
endif
if aRR4[OG4]>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitIllusion(GetAttacker())==false and(MR7(GetAttacker(),ZU[X2]) or MR7(GetAttacker(),ZU[W2]))then
call aZY8()
endif
if RSS4[OG4]>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitIllusion(GetAttacker())==false and MR7(GetAttacker(),ZU[RLL]) then
call ZCC8()
endif
if ARS4[OG4]>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==false and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitIllusion(GetAttacker())==false and(MR7(GetAttacker(),ZU[X1]) or MR7(GetAttacker(),ZU[GB]) or MR7(GetAttacker(),ZU[BA]) or MR7(GetAttacker(),ZU[R11]))then
call AZC8()
endif
endif
if ARO4[OG4]>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and(MR7(GetAttacker(),ZU[D1]) or MR7(GetAttacker(),ZU[E1]) or MR7(GetAttacker(),ZU[F1]) or MR7(GetAttacker(),ZU[H1]))then
call ZDO()
endif
elseif GetUnitAbilityLevel(GetAttacker(),1093744467)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false then
call S38()
endif
return false
endfunction
function A88 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local real x=ON7(OB7,"x")
local real y=ON7(OB7,"y")
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT or OO7(GetHandleId(WI7),"PendingUnfreeze") then
if OO7(GetHandleId(WI7),"PendingUnfreeze") then
call NS7(GetHandleId(WI7),"PendingUnfreeze",false)
call OX7(WI7,"Frozen")
call UnitRemoveAbility(WI7,1093678162)
call YT8(WI7,false)
call PauseUnit(WI7,false)
call NM7(OB7)
call OZ7(t)
elseif GetSpellTargetUnit()==WI7 and GetSpellAbilityId()==vw and(GetPlayerSlotState(GetOwningPlayer((WI7)))==PLAYER_SLOT_STATE_LEFT)and OT7(WI7,"Frozen") then
call OX7(WI7,"Frozen")
call UnitRemoveAbility(WI7,1093678162)
call YT8(WI7,false)
call PauseUnit(WI7,false)
call NM7(OB7)
call OZ7(t)
endif
elseif XH7(WI7)==false then
call SetUnitX(WI7,x)
call SetUnitY(WI7,y)
call OV7(WI7,"Frozen")
call UnitAddAbility(WI7,1093678162)
call YT8(WI7,true)
call PauseUnit(WI7,true)
endif
set WI7=null
set t=null
return false
endfunction
function A98 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=GetSpellTargetUnit()
call NS7(GetHandleId(WI7),"PendingUnfreeze",false)
call OV7(WI7,"Frozen")
call UnitAddAbility(WI7,1093678162)
call YT8(WI7,true)
call PauseUnit(WI7,true)
call NT7(OB7,"Hero",WI7)
call NQ7(OB7,"x",GetUnitX(WI7)*1.)
call NQ7(OB7,"y",GetUnitY(WI7)*1.)
call TriggerRegisterTimerEvent(t,1.,true)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function A88))
set t=null
set WI7=null
endfunction
function AD8 takes nothing returns boolean
if GetSpellAbilityId()==TU and(GetPlayerSlotState(GetOwningPlayer((GetSpellTargetUnit())))==PLAYER_SLOT_STATE_LEFT)and OT7(GetSpellTargetUnit(),"Frozen")==false then
call A98()
elseif(GetSpellAbilityId()==vw or GetSpellAbilityId()==TU)and(GetPlayerSlotState(GetOwningPlayer((GetSpellTargetUnit())))==PLAYER_SLOT_STATE_LEFT)==false then
call X37(GetOwningPlayer(GetTriggerUnit()),(GetObjectName((1848652366))))
endif
return false
endfunction
function AE8 takes destructable d returns boolean
local real x=GetDestructableX(d)
local real y=GetDestructableY(d)
local group g=WS7()
local boolean AF8
call GroupEnumUnitsInRange(g,x,y,$FA,Condition(function BD7))
set AF8=FirstOfGroup(g)!=null
call WR7(g)
set g=null
return AF8
endfunction
function AG8 takes nothing returns nothing
if VO7(GetEnumDestructable())and GetDestructableLife(GetEnumDestructable())<1 and GetDestructableTypeId(GetEnumDestructable())!=1110454322 and GetDestructableTypeId(GetEnumDestructable())!=1110454323 then
if AE8(GetEnumDestructable())==false then
call DestructableRestoreLife(GetEnumDestructable(),GetDestructableMaxLife(GetEnumDestructable()),false)
if PW[GetPlayerId(GetLocalPlayer())]==1 and GetDestructableTypeId(GetEnumDestructable())==1096053874 then
call SetDestructableAnimation(GetEnumDestructable(),"stand alternate")
endif
endif
endif
endfunction
function AH8 takes nothing returns nothing
call EnumDestructablesInRectAll(bj_mapInitialPlayableArea,function AG8)
endfunction
function AI8 takes unit it,unit m5 returns boolean
local integer i=GetUnitAbilityLevel(it,1093742674)
local integer j=GetUnitLevel(m5)
return(i>0)and((j<=2)or(i>1 and j<=i+2))
endfunction
function AJ8 takes nothing returns boolean
local unit AK8=GetAttacker()
local unit AM8=GetTriggerUnit()
local integer i1=GetUnitTypeId(AK8)
local integer O5=GetPlayerId(GetOwningPlayer(AK8))
if GetUnitTypeId(AM8)==1848651852 then
if IsUnitIllusion(AK8) then
call KillUnit(AK8)
elseif IsUnitInRegion(ow,AK8)==false then
call X37(GetOwningPlayer(AK8),(GetObjectName((1848652597))))
call IssueImmediateOrderById(AK8,$D0004)
endif
elseif((i1==1430467634)and(Bz>T34[16+O5])and((GetUnitTypeId(AM8)==1852010091)or(GetUnitTypeId(AM8)==1852534636))and TZ7(GetOwningPlayer(AK8)))then
if AI8(AK8,AM8)then
call M57(AK8,$D0278,1093742674,AM8)
endif
elseif((i1==1430467634)and(Bz>T34[16+O5])and TZ7(GetOwningPlayer(AK8))and(GetRandomInt(1,4)==1)and(not IsUnitType(AM8,UNIT_TYPE_MECHANICAL))and(not IsUnitType(AM8,UNIT_TYPE_ANCIENT))and GetUnitTypeId(AM8)!=1848658008 and GetUnitTypeId(AM8)!=1852796263 and GetUnitTypeId(AM8)!=1852207221 and GetUnitTypeId(AM8)!=1853060204 and GetUnitTypeId(AM8)!=1853055348 and GetUnitTypeId(AM8)!=1853060200 and GetUnitTypeId(AM8)!=1848651859 and GetUnitTypeId(AM8)!=1852207976 and GetUnitTypeId(AM8)!=1852272243 and GetUnitTypeId(AM8)!=1852270641 and GetUnitTypeId(AM8)!=1852798821 and GetUnitTypeId(AM8)!=1852077175 and GetUnitTypeId(AM8)!=1853320295)then
if AI8(AK8,AM8)then
call M57(AK8,$D0278,1093742674,AM8)
endif
elseif((i1==1429221443)and TZ7(GetOwningPlayer(AK8))and(not IsUnitType(AM8,UNIT_TYPE_MECHANICAL))and(not IsUnitType(AM8,UNIT_TYPE_ANCIENT))and(GetUnitTypeId(AM8)==1852010091)or(GetUnitTypeId(AM8)==1852534636)or GetUnitTypeId(AM8)==1848658008 or GetUnitTypeId(AM8)==1852796263 or GetUnitTypeId(AM8)==1852207221 or GetUnitTypeId(AM8)==1853060204 or GetUnitTypeId(AM8)==1853055348 or GetUnitTypeId(AM8)==1853060200 or GetUnitTypeId(AM8)==1848651859 or GetUnitTypeId(AM8)==1852207976 or GetUnitTypeId(AM8)==1852272243 or GetUnitTypeId(AM8)==1852270641 or GetUnitTypeId(AM8)==1852798821 or GetUnitTypeId(AM8)==1852077175 or GetUnitTypeId(AM8)==1853320295)then
if(GetUnitAbilityLevel(AK8,1093686103)>1)then
call M57(AK8,$D0278,1093686103,AM8)
endif
elseif((i1==1211117653)and TZ7(GetOwningPlayer(AK8)))then
if((Bz>T34[$80+O5])and(UG7(AK8,A24,A24,A_4,1093686865)))then
call M57(AK8,$D020A,1093686865,AK8)
elseif(Bz>T34[64+O5])and(UG7(AK8,A_4,A_4,A54,1093686863))then
call IssueImmediateOrderById(AK8,$D00A4)
endif
endif
set AK8=null
set AM8=null
return false
endfunction
function AN8 takes nothing returns nothing
local unit AO8=GetSummonedUnit()
local unit ZX7=GetSummoningUnit()
local string fx=""
if IsPlayerEnemy(GetLocalPlayer(),GetOwningPlayer(ZX7))and WG7(GetLocalPlayer())==false then
set fx="war3mapImported\\WardMark_T2.mdx"
endif
call AddSpecialEffectTarget(fx,AO8,"origin")
set AO8=null
set ZX7=null
endfunction
function AP8 takes nothing returns boolean
return true
endfunction
function AQ8 takes unit WI7,unit AR8 returns nothing
local integer AS8
local item AT8
if GetUnitTypeId(GetSummonedUnit())==1865429044 then
set AS8=ZU[VC]
else
set AS8=ZU[WC]
endif
call DisableTrigger(H94)
set AT8=MV7(WI7,AS8)
if AT8==null then
set IR4=GetOwningPlayer(WI7)
set HA4=CreateItem(AS8,0,0)
call UnitAddItem(WI7,HA4)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
else
call SetItemCharges(AT8,GetItemCharges(AT8)+1)
endif
call EnableTrigger(H94)
set AT8=null
endfunction
function AU8 takes nothing returns nothing
local unit AR8=GetSummonedUnit()
local unit WI7=GetSummoningUnit()
if GetUnitTypeId(GetSummonedUnit())==1865429044 or GetUnitTypeId(GetSummonedUnit())==1868921189 then
if IsUnitInRegion(oww,AR8)then
call AQ8(WI7,AR8)
call RemoveUnit(AR8)
elseif KW7(WI7)then
call AQ8(WI7,AR8)
call X37(GetOwningPlayer(AR8),"Couriers cannot place wards")
call RemoveUnit(AR8)
else
call AN8()
endif
elseif GetUnitTypeId(AR8)==1869836340 or GetUnitTypeId(AR8)==1865429048 or GetUnitTypeId(AR8)==1865429049 or GetUnitTypeId(AR8)==1865429315 or GetUnitTypeId(AR8)==1865429316 or GetUnitTypeId(AR8)==1865429317 then
call SelectUnitAddForPlayer(AR8,GetOwningPlayer(AR8))
elseif GetUnitTypeId(AR8)==1865429040 or GetUnitTypeId(AR8)==1865429041 or GetUnitTypeId(AR8)==1865429057 or GetUnitTypeId(AR8)==1865429080 then
call SelectUnitAddForPlayer(AR8,GetOwningPlayer(AR8))
endif
set WI7=null
set AR8=null
endfunction
function AV8 takes unit WI7 returns real
local real AW8
if TV7(GetOwningPlayer(WI7))then
set AW8=GetRectCenterX(ED)
else
set AW8=GetRectCenterX(L9)
endif
return AW8
endfunction
function AX8 takes unit WI7 returns real
local real AW8
if TV7(GetOwningPlayer(WI7))then
set AW8=GetRectCenterY(ED)
else
set AW8=GetRectCenterY(L9)
endif
return AW8
endfunction
function AY8 takes unit WI7,integer n5,integer AZ8 returns item
local real x=AV8(WI7)
local real y=AX8(WI7)
local item QU8=CreateItem(n5,x,y)
local integer i=0
local boolean array AA8
local item Z4
set GF7=IR4
call DisableTrigger(H94)
if n5>0 then
loop
exitwhen i>(UnitInventorySize(WI7)-1)
if UnitItemInSlot(WI7,i)==null and i!=AZ8 then
set Z4=CreateItem(1227895373,x,y)
call UnitAddItem(WI7,Z4)
set AA8[i]=true
else
set AA8[i]=false
endif
if i==AZ8 then
call EnableTrigger(H94)
call UnitAddItem(WI7,QU8)
call DisableTrigger(H94)
endif
set i=i+1
endloop
set i=0
loop
exitwhen i>5
if AA8[i] then
call RemoveItem(UnitItemInSlot(WI7,i))
endif
set i=i+1
endloop
endif
call EnableTrigger(H94)
set HA4=QU8
set QU8=null
set Z4=null
return HA4
endfunction
function AB8 takes unit ZX7 returns boolean
local integer I97=GetHandleId(ZX7)
local integer i=0
local real VM8=(TimerGetElapsed(W))
local real AC8=$A
loop
exitwhen i>2
if(LoadReal(L7,(I97),(730+i)))<VM8-AC8 then
return false
endif
set i=i+1
endloop
return true
endfunction
function A38 takes unit ZX7 returns nothing
local integer I97=GetHandleId(ZX7)
local integer A68=(LoadInteger(L7,(I97),(729)))
call SaveReal(L7,(I97),(730+A68),(((TimerGetElapsed(W)))*1.))
set A68=A68+1
if A68==3 then
set A68=0
endif
call SaveInteger(L7,(I97),(729),(A68))
endfunction
function AL8 takes unit WX7 returns nothing
local integer i=0
local item A18
local integer Z48
local boolean A08=false
if AB8(WX7)then
set A08=true
endif
loop
exitwhen i>5
set A18=UnitItemInSlot(WX7,i)
set Z48=KZ7(A18)
if Z48==LB and A08 then
call DisableTrigger(H94)
set IR4=GetItemPlayer(A18)
call RemoveItem(A18)
set HA4=AY8(WX7,ZU[EC],i)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
call EnableTrigger(H94)
endif
if Z48==EC and A08==false then
call DisableTrigger(H94)
set IR4=GetItemPlayer(A18)
call RemoveItem(A18)
set HA4=AY8(WX7,ZU[LB],i)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
call EnableTrigger(H94)
endif
set i=i+1
endloop
set WX7=null
set A18=null
endfunction
function S_8 takes nothing returns nothing
if GetEventDamage()>2 and GetEventDamageSource()!=GetTriggerUnit()and(TX7(GetOwningPlayer(GetEventDamageSource()))or GetUnitTypeId(GetEventDamageSource())==1848651852)then
if V04[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]==false then
call SaveReal(L7,(GetHandleId(GetTriggerUnit())),(785),(((TimerGetElapsed(W)))*1.))
if GetEventDamage()>20 then
call A38(GetTriggerUnit())
endif
endif
endif
endfunction
function A58 takes unit WI7 returns nothing
local integer i=0
local item A28
local integer Y68
local boolean A_8=false
if(LoadReal(L7,(GetHandleId(WI7)),(785)))+3>(TimerGetElapsed(W))then
set A_8=true
endif
loop
exitwhen i>5
set A28=UnitItemInSlot(WI7,i)
set Y68=KZ7(A28)
if Y68==RW and A_8 then
call DisableTrigger(H94)
set IR4=GetItemPlayer(A28)
call RemoveItem(A28)
set HA4=AY8(WI7,ZU[TW],i)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
call EnableTrigger(H94)
endif
if Y68==TW and A_8==false then
call DisableTrigger(H94)
set IR4=GetItemPlayer(A28)
call RemoveItem(A28)
set HA4=AY8(WI7,ZU[RW],i)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
call EnableTrigger(H94)
endif
set i=i+1
endloop
set WI7=null
set A28=null
endfunction
function B48 takes unit WI7 returns nothing
local integer i=0
local item B78
local integer Y68
local boolean B88=false
local real B98=4
if IsUnitType(WI7,UNIT_TYPE_MELEE_ATTACKER)==false then
set B98=6
endif
if(LoadReal(L7,(GetHandleId(WI7)),(785)))+B98>(TimerGetElapsed(W))then
set B88=true
endif
loop
exitwhen i>5
set B78=UnitItemInSlot(WI7,i)
set Y68=KZ7(B78)
if Y68==R2 and B88 then
call DisableTrigger(H94)
set IR4=GetItemPlayer(B78)
call RemoveItem(B78)
set HA4=AY8(WI7,ZU[S2],i)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
call EnableTrigger(H94)
endif
if Y68==S2 and B88==false then
call DisableTrigger(H94)
set IR4=GetItemPlayer(B78)
call RemoveItem(B78)
set HA4=AY8(WI7,ZU[R2],i)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
call EnableTrigger(H94)
endif
set i=i+1
endloop
set WI7=null
set B78=null
endfunction
function BD8 takes nothing returns nothing
local unit WX7=GetEnumUnit()
local integer id=GetPlayerId(GetOwningPlayer(WX7))
if RM4[id]>0 and WX7!=null and GetUnitTypeId(WX7)>1 and IsUnitType(WX7,UNIT_TYPE_DEAD)==false then
call A58(WX7)
endif
if RQ4[id]>0 and WX7!=null and GetUnitTypeId(WX7)>1 and IsUnitType(WX7,UNIT_TYPE_DEAD)==false then
call B48(WX7)
endif
if E37[id]>0 and WX7!=null and GetUnitTypeId(WX7)>1 and IsUnitType(WX7,UNIT_TYPE_DEAD)==false then
call AL8(WX7)
endif
set WX7=null
endfunction
function BE8 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and GetUnitTypeId(GetFilterUnit())!=1211117642 and GetUnitTypeId(GetFilterUnit())!=1211122232)!=null
endfunction
function BF8 takes nothing returns boolean
local integer i=1
local unit WX7
local integer id
local group g
if HF4>0 or HI4>0 or EZ7>0 then
set g=WS7()
call GroupEnumUnitsInRange(g,0,0,9999,Condition(function BE8))
loop
exitwhen i>5
set id=GetPlayerId(Z7[i])
set WX7=M7[id]
call GroupAddUnit(g,WX7)
set id=GetPlayerId(A7[i])
set WX7=M7[id]
call GroupAddUnit(g,WX7)
set i=i+1
endloop
call ForGroup(g,function BD8)
call WR7(g)
set g=null
endif
set WX7=null
return false
endfunction
function BG8 takes nothing returns nothing
local unit WI7=GetFilterUnit()
local integer i=0
local item QU8
local integer Y68
loop
exitwhen i>5
set QU8=UnitItemInSlot(WI7,i)
set Y68=KY7(QU8)
if(Y68==AZ or Y68==BZ or Y68==CZ)and GetItemUserData(QU8)>0 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",WI7,"overhead"))
call XC7(GetOwningPlayer(WI7),"Abilities\\Spells\\Human\\Heal\\HealTarget.wav")
set IR4=GetItemPlayer(QU8)
call KX7(QU8)
set HA4=AY8(WI7,ZU[IA],i)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
endif
set i=i+1
endloop
set WI7=null
set QU8=null
endfunction
function BH8 takes nothing returns boolean
if UnitInventorySize(GetFilterUnit())>0 and TV7(GetOwningPlayer(GetFilterUnit()))and IsUnitIllusion(GetFilterUnit())==false and XH7(GetFilterUnit())==false then
call BG8()
endif
return false
endfunction
function BI8 takes nothing returns boolean
if UnitInventorySize(GetFilterUnit())>0 and TW7(GetOwningPlayer(GetFilterUnit()))and IsUnitIllusion(GetFilterUnit())==false and XH7(GetFilterUnit())==false then
call BG8()
endif
return false
endfunction
function BJ8 takes nothing returns boolean
local group g=WS7()
call GroupEnumUnitsInRange(g,IX4,IY4,750,Condition(function BH8))
call WR7(g)
set g=WS7()
call GroupEnumUnitsInRange(g,JY4,JZ4,750,Condition(function BI8))
call WR7(g)
set g=null
return false
endfunction
function BK8 takes unit u returns unit
if IsUnitType(u,UNIT_TYPE_HERO)or GetUnitAbilityLevel(u,1093678162)==0 then
return u
else
return M7[GetPlayerId(GetOwningPlayer(u))]
endif
endfunction
function BM8 takes nothing returns boolean
if IsUnitType(GetKillingUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitAlly(GetDyingUnit(),GetOwningPlayer(GetKillingUnit()))==false then
if GetUnitTypeId(GetTriggerUnit())==1848651850 then
call B67(GetDyingUnit(),BK8(GetKillingUnit()),3,400)
elseif GetUnitTypeId(GetTriggerUnit())==1848651841 then
call B67(GetDyingUnit(),BK8(GetKillingUnit()),3,500)
elseif GetUnitTypeId(GetTriggerUnit())==1848651830 then
call B67(GetDyingUnit(),BK8(GetKillingUnit()),3,600)
endif
endif
return false
endfunction
function BN8 takes nothing returns boolean
return GetUnitTypeId(GetEnteringUnit())==1697656901 or GetUnitTypeId(GetEnteringUnit())==1697657394
endfunction
function BO8 takes nothing returns nothing
call ShowUnitHide(GetEnteringUnit())
call SetUnitPathing(GetEnteringUnit(),false)
call SetUnitInvulnerable(GetEnteringUnit(),true)
if(GetPlayerController(GetOwningPlayer(GetEnteringUnit()))==MAP_CONTROL_USER)then
call UnitApplyTimedLifeBJ(20.,1112820806,GetEnteringUnit())
else
call TriggerSleepAction(10.)
if((GetUnitTypeId(GetEnteringUnit())==1697656901)or(GetUnitTypeId(GetEnteringUnit())==1697657394))then
call UnitApplyTimedLifeBJ(10.,1112820806,GetEnteringUnit())
endif
endif
endfunction
function BP8 takes nothing returns boolean
return((GetUnitTypeId(GetDyingUnit())==1697656914)or(GetUnitTypeId(GetDyingUnit())==1697657137)or(GetUnitTypeId(GetDyingUnit())==1697656915)or(GetUnitTypeId(GetDyingUnit())==1697657145))
endfunction
function AX2 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==1852010352 and IsPlayerAlly(GetOwningPlayer(GetFilterUnit()),IR4)==true
endfunction
function AY2 takes player p returns nothing
local group g=WS7()
local unit u
set IR4=p
call GroupEnumUnitsInRange(g,0,0,99999,Condition(function AX2))
loop
set u=FirstOfGroup(g)
exitwhen FirstOfGroup(g)==null
if GetUnitAbilityLevel(u,1093743665)>0 then
call UnitRemoveAbility(u,1093743665)
call UnitAddAbility(u,1093743665)
else
call UnitRemoveAbility(u,1093752649)
call UnitAddAbility(u,1093752649)
endif
call GroupRemoveUnit(g,u)
endloop
call WR7(g)
set g=null
set u=null
endfunction
function BQ8 takes nothing returns nothing
if IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit()))then
set gD[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=gD[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
if(GetDyingUnit()==JG4)then
call C27("Tower"+I2S(0)+I2S(1)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call YT8(JJ4,false)
call V47(GetKillingUnit(),1)
call AY2(GetOwningPlayer(GetTriggerUnit()))
set P64=1
elseif(GetDyingUnit()==JH4)then
call C27("Tower"+I2S(0)+I2S(1)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call YT8(JK4,false)
call V47(GetKillingUnit(),1)
call AY2(GetOwningPlayer(GetTriggerUnit()))
set P34=1
elseif(GetDyingUnit()==JI4)then
call C27("Tower"+I2S(0)+I2S(1)+I2S(2),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call YT8(JM4,false)
call V47(GetKillingUnit(),1)
call AY2(GetOwningPlayer(GetTriggerUnit()))
set PL4=1
elseif(GetDyingUnit()==JJ4)then
call C27("Tower"+I2S(0)+I2S(2)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call YT8(JN4,false)
call V47(GetKillingUnit(),2)
call AY2(GetOwningPlayer(GetTriggerUnit()))
set P64=2
elseif(GetDyingUnit()==JK4)then
call C27("Tower"+I2S(0)+I2S(2)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call YT8(JO4,false)
call V47(GetKillingUnit(),2)
call AY2(GetOwningPlayer(GetTriggerUnit()))
set P34=2
elseif(GetDyingUnit()==JM4)then
call C27("Tower"+I2S(0)+I2S(2)+I2S(2),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call YT8(JP4,false)
call V47(GetKillingUnit(),2)
call AY2(GetOwningPlayer(GetTriggerUnit()))
set PL4=2
elseif(GetDyingUnit()==JN4)then
call C27("Tower"+I2S(0)+I2S(3)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call V47(GetKillingUnit(),3)
call AY2(GetOwningPlayer(GetTriggerUnit()))
call YT8(JS4,false)
call YT8(JV4,false)
call YT8(JQ4,false)
call YT8(JR4,false)
call YT8(WP,false)
call YT8(zP,false)
call YT8(vq,false)
call YT8(eq,false)
call YT8(fP,false)
call YT8(FP,false)
call YT8(lP,false)
call YT8(LP,false)
call YT8(MP,false)
call YT8(pP,false)
call YT8(PP,false)
call YT8(qP,false)
call YT8(QP,false)
call YT8(sP,false)
call YT8(tP,false)
set P64=3
elseif(GetDyingUnit()==JO4)then
call C27("Tower"+I2S(0)+I2S(3)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call V47(GetKillingUnit(),3)
call AY2(GetOwningPlayer(GetTriggerUnit()))
call YT8(JT4,false)
call YT8(JW4,false)
call YT8(JQ4,false)
call YT8(JR4,false)
call YT8(WP,false)
call YT8(zP,false)
call YT8(vq,false)
call YT8(eq,false)
call YT8(fP,false)
call YT8(FP,false)
call YT8(lP,false)
call YT8(LP,false)
call YT8(MP,false)
call YT8(pP,false)
call YT8(PP,false)
call YT8(qP,false)
call YT8(QP,false)
call YT8(sP,false)
call YT8(tP,false)
set P34=3
elseif(GetDyingUnit()==JP4)then
call C27("Tower"+I2S(0)+I2S(3)+I2S(2),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call V47(GetKillingUnit(),3)
call AY2(GetOwningPlayer(GetTriggerUnit()))
call YT8(JU4,false)
call YT8(JX4,false)
call YT8(JQ4,false)
call YT8(JR4,false)
call YT8(WP,false)
call YT8(zP,false)
call YT8(vq,false)
call YT8(eq,false)
call YT8(fP,false)
call YT8(FP,false)
call YT8(lP,false)
call YT8(LP,false)
call YT8(MP,false)
call YT8(pP,false)
call YT8(PP,false)
call YT8(qP,false)
call YT8(QP,false)
call YT8(sP,false)
call YT8(tP,false)
set PL4=3
endif
if GetDyingUnit()==JQ4 or GetDyingUnit()==JR4 then
call C27("Tower"+I2S(0)+I2S(4)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call V47(GetKillingUnit(),4)
call AY2(GetOwningPlayer(GetTriggerUnit()))
endif
if(((GetDyingUnit()==JQ4)and(IsUnitDeadBJ(JR4)))or((GetDyingUnit()==JR4)and(IsUnitDeadBJ(JQ4))))then
call YT8(JF4,false)
set PW4=false
endif
endfunction
function BR8 takes nothing returns boolean
return((GetUnitTypeId(GetDyingUnit())==1966092365)or(GetUnitTypeId(GetDyingUnit())==1966092356)or(GetUnitTypeId(GetDyingUnit())==1966092366)or(GetUnitTypeId(GetDyingUnit())==1966092372))
endfunction
function BS8 takes nothing returns nothing
if IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit()))then
set gD[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=gD[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
if(GetDyingUnit()==J64)then
call C27("Tower"+I2S(1)+I2S(1)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call YT8(J04,false)
call V47(GetKillingUnit(),1)
call AY2(GetOwningPlayer(GetTriggerUnit()))
set P04=1
elseif(GetDyingUnit()==JL4)then
call C27("Tower"+I2S(1)+I2S(1)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call YT8(J54,false)
call V47(GetKillingUnit(),1)
call AY2(GetOwningPlayer(GetTriggerUnit()))
set P14=1
elseif(GetDyingUnit()==J14)then
call C27("Tower"+I2S(1)+I2S(1)+I2S(2),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call YT8(J24,false)
call V47(GetKillingUnit(),1)
call AY2(GetOwningPlayer(GetTriggerUnit()))
set P54=1
elseif(GetDyingUnit()==J04)then
call C27("Tower"+I2S(1)+I2S(2)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call YT8(J_4,false)
call V47(GetKillingUnit(),2)
call AY2(GetOwningPlayer(GetTriggerUnit()))
set P04=2
elseif(GetDyingUnit()==J54)then
call C27("Tower"+I2S(1)+I2S(2)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call YT8(K44,false)
call V47(GetKillingUnit(),2)
call AY2(GetOwningPlayer(GetTriggerUnit()))
set P14=2
elseif(GetDyingUnit()==J24)then
call C27("Tower"+I2S(1)+I2S(2)+I2S(2),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call YT8(K74,false)
call V47(GetKillingUnit(),2)
call AY2(GetOwningPlayer(GetTriggerUnit()))
set P54=2
elseif(GetDyingUnit()==J_4)then
call C27("Tower"+I2S(1)+I2S(3)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call V47(GetKillingUnit(),3)
call AY2(GetOwningPlayer(GetTriggerUnit()))
call YT8(KD4,false)
call YT8(KG4,false)
call YT8(K84,false)
call YT8(K94,false)
call YT8(ot,false)
call YT8(rt,false)
call YT8(at,false)
call YT8(Vt,false)
call YT8(PS,false)
call YT8(QS,false)
call YT8(SS,false)
call YT8(tS,false)
call YT8(TS,false)
call YT8(US,false)
call YT8(WS,false)
call YT8(ZS,false)
call YT8(vt,false)
call YT8(et,false)
call YT8(xt,false)
set P04=3
elseif(GetDyingUnit()==K44)then
call C27("Tower"+I2S(1)+I2S(3)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call V47(GetKillingUnit(),3)
call AY2(GetOwningPlayer(GetTriggerUnit()))
call YT8(KE4,false)
call YT8(KH4,false)
call YT8(K84,false)
call YT8(K94,false)
call YT8(ot,false)
call YT8(rt,false)
call YT8(at,false)
call YT8(Vt,false)
call YT8(PS,false)
call YT8(QS,false)
call YT8(SS,false)
call YT8(tS,false)
call YT8(TS,false)
call YT8(US,false)
call YT8(WS,false)
call YT8(ZS,false)
call YT8(vt,false)
call YT8(et,false)
call YT8(xt,false)
set P14=3
elseif(GetDyingUnit()==K74)then
call C27("Tower"+I2S(1)+I2S(3)+I2S(2),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call V47(GetKillingUnit(),3)
call AY2(GetOwningPlayer(GetTriggerUnit()))
call YT8(KF4,false)
call YT8(KI4,false)
call YT8(K84,false)
call YT8(K94,false)
call YT8(ot,false)
call YT8(rt,false)
call YT8(at,false)
call YT8(Vt,false)
call YT8(PS,false)
call YT8(QS,false)
call YT8(SS,false)
call YT8(tS,false)
call YT8(TS,false)
call YT8(US,false)
call YT8(WS,false)
call YT8(ZS,false)
call YT8(vt,false)
call YT8(et,false)
call YT8(xt,false)
set P54=3
endif
if GetDyingUnit()==K84 or GetDyingUnit()==K94 then
call C27("Tower"+I2S(1)+I2S(4)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call V47(GetKillingUnit(),4)
call AY2(GetOwningPlayer(GetTriggerUnit()))
endif
if(((GetDyingUnit()==K94)and(IsUnitDeadBJ(K84)))or((GetDyingUnit()==K84)and(IsUnitDeadBJ(K94))))then
call YT8(J34,false)
set PX4=false
endif
endfunction
function BT8 takes nothing returns boolean
local integer x=0
if GetPlayerSlotState(Z7[1])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(Z7[2])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(Z7[3])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(Z7[4])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(Z7[5])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(A7[1])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(A7[2])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(A7[3])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(A7[4])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(A7[5])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
return x==9
endfunction
function Ve takes nothing returns boolean
return bj_isSinglePlayer and BT8()
endfunction
function BU8 takes nothing returns nothing
set X24=true
endfunction
function BV8 takes nothing returns nothing
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,$A,("选择英雄不受限制"))
set H84=false
endfunction
function BW8 takes nothing returns boolean
if IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false then
call KillUnit(GetFilterUnit())
endif
return false
endfunction
function BX8 takes nothing returns nothing
local group g=WS7()
call GroupEnumUnitsOfPlayer(g,A7[0],Condition(function BW8))
call WR7(g)
set g=null
set Y9=true
endfunction
function BY8 takes nothing returns nothing
local group g=WS7()
call GroupEnumUnitsOfPlayer(g,Z7[0],Condition(function BW8))
call WR7(g)
set g=null
set Y9=true
endfunction
function BZ8 takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==1865429044 or GetUnitTypeId(GetFilterUnit())==1868921189 then
call KillUnit(GetFilterUnit())
endif
return false
endfunction
function BA8 takes nothing returns nothing
local group g=WS7()
call GroupEnumUnitsInRange(g,0,0,9999,Condition(function BZ8))
call WR7(g)
set g=null
set Y9=true
endfunction
function BB8 takes nothing returns nothing
set B4=false
endfunction
function BC8 takes nothing returns nothing
set B4=true
endfunction
function B38 takes nothing returns nothing
call BY8()
call BX8()
set Y9=true
endfunction
function B68 takes nothing returns nothing
local string BL8=SubString(GetEventPlayerChatString(),5,StringLength(GetEventPlayerChatString()))
local integer B18=S2I(BL8)
if B18<0 or B18>24 then
set B18=0
endif
call SetFloatGameState(GAME_STATE_TIME_OF_DAY,B18)
set Y9=true
endfunction
function B08 takes nothing returns boolean
if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) then
call SetHeroLevel(GetFilterUnit(),GetHeroLevel(GetFilterUnit())+YH7(IH4,1),true)
endif
return false
endfunction
function B58 takes nothing returns nothing
local string B28=SubString(GetEventPlayerChatString(),6,StringLength(GetEventPlayerChatString()))
local integer B_8=S2I(B28)
local group g=WS7()
if SubString(GetEventPlayerChatString(),0,9)!="-lvlupall" and SubString(GetEventPlayerChatString(),0,9)!="-lvlupfor" then
if B_8<1 then
set B_8=1
endif
set IH4=B_8
call GroupEnumUnitsOfPlayer(g,GetTriggerPlayer(),Condition(function B08))
endif
call WR7(g)
set g=null
set Y9=true
endfunction
function C48 takes nothing returns nothing
call TriggerExecute(JS)
set Y9=true
endfunction
function C78 takes nothing returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(GetFilterUnit()))
if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) then
set hq[O5]=.0
set hq[16+O5]=.0
set hq[32+O5]=.0
set T34[O5]=.0
set T34[16+O5]=.0
set T34[32+O5]=.0
set T34[48+O5]=.0
call UnitResetCooldown(GetFilterUnit())
call TimerStart(N84[GetPlayerId((GetOwningPlayer(GetFilterUnit())))],0,false,null)
call SetUnitState(GetFilterUnit(),UNIT_STATE_LIFE,GetUnitState(GetFilterUnit(),UNIT_STATE_MAX_LIFE))
call SetUnitState(GetFilterUnit(),UNIT_STATE_MANA,GetUnitState(GetFilterUnit(),UNIT_STATE_MAX_MANA))
endif
return false
endfunction
function C88 takes nothing returns nothing
local group g=WS7()
call GroupEnumUnitsOfPlayer(g,GetTriggerPlayer(),Condition(function C78))
call WR7(g)
set g=null
set Y9=true
endfunction
function C98 takes nothing returns nothing
if X04 then
return
endif
call KillUnit(M7[GetPlayerId(GetTriggerPlayer())])
set Y9=true
endfunction
function CD8 takes nothing returns nothing
local string nQ=SubString(GetEventPlayerChatString(),5,StringLength(GetEventPlayerChatString()))
local integer hY=S2I(nQ)
call SetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)+hY)
set Y9=true
endfunction
function CE8 takes nothing returns nothing
local unit VE8=M7[GetPlayerId(GetTriggerPlayer())]
local player WO8=GetTriggerPlayer()
local location VJ8
if TW7(WO8)then
set VJ8=GetRectCenter(L9)
else
set VJ8=GetRectCenter(ED)
endif
if D9==false and XH7(VE8)then
call DS8(VE8,WO8,GetLocationX(VJ8),GetLocationY(VJ8),true)
if VD8(VE8)==false or GetUnitAbilityLevel(VE8,1093684567)==0 then
call ReviveHeroLoc(VE8,VJ8,true)
else
call VI8(VE8,VJ8)
endif
endif
call RemoveLocation(VJ8)
set VE8=null
set WO8=null
set VJ8=null
endfunction
function CF8 takes nothing returns nothing
local unit ZX7=M7[GetPlayerId(GetTriggerPlayer())]
local player CG8
local unit CH8
local real x=GetRectCenterX(QD)
local real y=GetRectCenterX(QD)
if TW7(GetOwningPlayer(ZX7))then
set CG8=Z7[1]
else
set CG8=A7[1]
endif
set CH8=CreateUnit(CG8,1211117616,x,y,0)
call SetHeroLevel(CH8,$A,false)
set ZX7=null
set CH8=null
set CG8=null
endfunction
function CI8 takes nothing returns nothing
call TriggerEvaluate(H04)
endfunction
function CJ8 takes nothing returns nothing
call TriggerEvaluate(MS)
endfunction
function CK8 takes nothing returns nothing
call AH8()
endfunction
function CM8 takes nothing returns nothing
local string VH=GetEventPlayerChatString()
local integer UP
local integer O5
local player pl
local group g
if(VH=="-testhelp")then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,"Commands (XX = 2-digit Player Number, ##### = Amount): -gold #####, -goldall #####, -goldforXX #####, -lvlup ##, -lvlupall ##, -lvlupforXX, -spawncreeps, -powerup, -neutrals, -refresh, -refreshall, -kill, -kill XX, -killsent, -killscourge, -killall, -rechoose, -fog, -time ##, -noherolimit, -trees, -killwards, -spawnoff, -spawnon")
elseif(VH=="-rechoose")then
if((not A8)and(not D4)and(not RZ4)and(not O04)and(not W8)and(not O9)and(not H34))then
set G9=true
set I[GetPlayerId(GetTriggerPlayer())]=false
set T9=false
set F9=true
set W4[GetPlayerId(GetTriggerPlayer())]=false
set oo[GetPlayerId(GetTriggerPlayer())]=false
set P9[GetPlayerId(GetTriggerPlayer())]=false
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,"一些重选/随机的限制已经移除。 你现在可以使用 -repick/-random")
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,"不能启用重选/随机。")
endif
elseif(SubString(VH,0,9)=="-goldall ")then
set UP=S2I(SubString(VH,9,StringLength(VH)))
set O5=1
loop
call SetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD)+UP)
set O5=O5+1
exitwhen O5>$B
endloop
elseif(SubString(VH,0,8)=="-goldfor")then
set pl=K27(S2I(SubString(VH,8,StringLength(VH))))
if((pl!=null)and(TA7(pl)))then
set UP=S2I(SubString(VH,$A,StringLength(VH)))
call SetPlayerState(pl,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(pl,PLAYER_STATE_RESOURCE_GOLD)+UP)
endif
elseif(SubString(VH,0,9)=="-lvlupall")then
set O5=S2I(SubString(GetEventPlayerChatString(),9,StringLength(GetEventPlayerChatString())))
if O5<1 then
set O5=1
endif
set IH4=O5
set g=WS7()
call GroupEnumUnitsInRect(g,bj_mapInitialPlayableArea,Condition(function B08))
call WR7(g)
elseif(SubString(VH,0,9)=="-lvlupfor")then
set pl=K27(S2I(SubString(VH,9,StringLength(VH))))
if((pl!=null)and(TA7(pl)))then
call SetHeroLevel(M7[GetPlayerId(pl)],GetHeroLevel(M7[GetPlayerId(pl)])+1,true)
endif
elseif(VH=="-refreshall")then
set g=WS7()
call GroupEnumUnitsInRect(g,bj_mapInitialPlayableArea,Condition(function C78))
call WR7(g)
elseif(SubString(VH,0,6)=="-kill ")then
set pl=K27(S2I(SubString(VH,6,StringLength(VH))))
if((pl!=null)and(TA7(pl)))then
call KillUnit(M7[GetPlayerId(pl)])
endif
elseif(VH=="-fog")then
call FogEnable(not IsFogEnabled())
call FogMaskEnable(not IsFogMaskEnabled())
endif
set g=null
set pl=null
endfunction
function CN8 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer O5=1
if false then
set O5=0
endif
loop
if(TY7(Player(O5)))then
call TriggerRegisterPlayerChatEvent(t,Player(O5),"-",false)
endif
set O5=O5+1
exitwhen O5>$B
endloop
call TriggerAddAction(t,function CM8)
set t=null
endfunction
function CO8 takes nothing returns boolean
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60,"**** 提醒 ****")
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60,"单机模式指令开启。 你可以使用以下指令: -lvlup xx, -refresh, -spawncreeps, -powerup, -neutrals, -kill, -gold xxxx, -time xx, -killsent, -killscourge, -killall, -noherolimit, -trees, -killwards, -spawnoff, -spawnon, -roshan, -respawn, -dummy")
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60,"**** 提醒 ****")
return false
endfunction
function CP8 takes nothing returns nothing
local player OnlyPlayer=Le
local trigger t
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60,"单机模式指令开启。 你可以使用以下指令: -lvlup xx, -refresh, -spawncreeps, -powerup, -neutrals, -kill, -gold xxxx, -time xx, -killsent, -killscourge, -killall, -noherolimit, -trees, -killwards, -spawnoff, -spawnon, -roshan, -respawn, -dummy")
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60.,"想要了解更多游戏信息， 输入 -testhelp.
    
    ")
set t=CreateTrigger()
call TriggerAddCondition(t,Condition(function CO8))
call TriggerRegisterTimerEvent(t,GetRandomReal(60,100),false)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-lvlup",false)
call TriggerAddAction(t,function B58)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-spawncreeps",true)
if false then
call TriggerRegisterPlayerChatEvent(t,Player(0),"-spawncreeps",false)
endif
call TriggerAddAction(t,function C48)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-refresh",true)
call TriggerAddAction(t,function C88)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-kill",true)
call TriggerAddAction(t,function C98)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-gold",false)
call TriggerAddAction(t,function CD8)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-time",false)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-time",false)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-time",false)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-time",false)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-time",false)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-time",false)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-time",false)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-time",false)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-time",false)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-time",false)
call TriggerAddAction(t,function B68)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-powerup",false)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-powerup",false)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-powerup",false)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-powerup",false)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-powerup",false)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-powerup",false)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-powerup",false)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-powerup",false)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-powerup",false)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-powerup",false)
call TriggerAddAction(t,function CI8)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-killall",true)
if false then
call TriggerRegisterPlayerChatEvent(t,Player(0),"-killall",false)
endif
call TriggerAddAction(t,function B38)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-killsent",true)
if false then
call TriggerRegisterPlayerChatEvent(t,Player(0),"-killsent",false)
endif
call TriggerAddAction(t,function BY8)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-killscourge",true)
if false then
call TriggerRegisterPlayerChatEvent(t,Player(0),"-killscourge",false)
endif
call TriggerAddAction(t,function BX8)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-neutrals",false)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-neutrals",false)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-neutrals",false)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-neutrals",false)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-neutrals",false)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-neutrals",false)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-neutrals",false)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-neutrals",false)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-neutrals",false)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-neutrals",false)
if false then
call TriggerRegisterPlayerChatEvent(t,Player(0),"-neutrals",false)
endif
call TriggerAddAction(t,function CJ8)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-noherolimit",true)
call TriggerAddAction(t,function BV8)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-trees",true)
if false then
call TriggerRegisterPlayerChatEvent(t,Player(0),"-trees",false)
endif
call TriggerAddAction(t,function CK8)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-killwards",true)
call TriggerAddAction(t,function BA8)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-spawnoff",true)
call TriggerAddAction(t,function BC8)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-spawnon",true)
call TriggerAddAction(t,function BB8)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-roshan",true)
if false then
call TriggerRegisterPlayerChatEvent(t,Player(0),"-roshan",false)
endif
call TriggerAddAction(t,function BU8)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-respawn",true)
call TriggerAddAction(t,function CE8)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-dummy",true)
call TriggerAddAction(t,function CF8)
call CN8()
set uy=true
set t=null
endfunction
function PR8 takes nothing returns nothing
call TimerStart(CreateTimer(),5,not uy,function PR8)
endfunction
function CQ8 takes nothing returns boolean
return not P
endfunction
function nt takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit nT=O77(OB7,"Unit")
local integer O5=GetPlayerId(GetOwningPlayer(nT))
set hq[O5]=.0
set hq[16+O5]=.0
set hq[32+O5]=.0
set T34[O5]=.0
set T34[16+O5]=.0
set T34[32+O5]=.0
set T34[48+O5]=.0
if GetUnitTypeId(nT)!=1852010352 then
call UnitResetCooldown(nT)
call SetUnitManaPercentBJ(nT,100)
endif
call NM7(OB7)
call OZ7(t)
set t=null
set nT=null
return false
endfunction
function nu takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function nt))
call NT7(OB7,"Unit",GetTriggerUnit())
set t=null
endfunction
function CR8 takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer nv=P8(X7)+P8(Y7)
local integer NumRequired=YG7(nv,nv/2+1)
local integer OB7=GetHandleId(t)
local integer nV=OM7(OB7,"ExecCount")
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60.," ")
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,90.,"WTF模式已激活。 在此模式下技能没有冷却时间和魔法消耗。")
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,90.,"此模式仅供娱乐。")
set PT4=true
set t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(t,function nu)
set t=null
endfunction
function CS8 takes nothing returns boolean
if P68(GetTriggerUnit())and IsUnitIllusion(GetTriggerUnit())==false then
call CT7(GetOwningPlayer(GetTriggerUnit()))
call C27("Level"+I2S(GetHeroLevel(GetTriggerUnit())),GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
endif
return false
endfunction
function nw takes nothing returns nothing
call CP8()
call OZ7(GetTriggeringTrigger())
endfunction
function CT8 takes nothing returns boolean
if P==false and Ve()==false then
call nw()
endif
return false
endfunction
function CU8 takes nothing returns boolean
return GetOwningPlayer(GetTriggerUnit())==B7
endfunction
function CV8 takes nothing returns nothing
call SaveInteger(L7,StringHash("Stats"+I2S(GetPlayerId(GetOwningPlayer(GetKillingUnit())))),StringHash("NumOfNeutrals"),((LoadInteger(L7,StringHash("Stats"+I2S(GetPlayerId(GetOwningPlayer(GetKillingUnit())))),StringHash("NumOfNeutrals")))+1))
endfunction
function CW8 takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==Z7[0]then
call IssuePointOrderByIdLoc(GetTriggerUnit(),$D000F,Z)
elseif GetOwningPlayer(GetTriggerUnit())==A7[0]then
call IssuePointOrderByIdLoc(GetTriggerUnit(),$D000F,vv)
endif
return false
endfunction
function CX8 takes nothing returns nothing
set E7=E7+1
endfunction
function CY8 takes nothing returns nothing
set D7=D7+1
endfunction
function CZ8 takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==Z7[0]then
call IssuePointOrderByIdLoc(GetTriggerUnit(),$D000F,ev)
endif
return false
endfunction
function CA8 takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==A7[0]then
call IssuePointOrderByIdLoc(GetTriggerUnit(),$D000F,ev)
endif
return false
endfunction
function CB8 takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==Z7[0]then
call IssuePointOrderByIdLoc(GetTriggerUnit(),$D000F,ov)
endif
return false
endfunction
function CC8 takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==A7[0]then
call IssuePointOrderByIdLoc(GetTriggerUnit(),$D000F,ov)
endif
return false
endfunction
function C38 takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==Z7[0]then
call IssuePointOrderByIdLoc(GetTriggerUnit(),$D000F,rv)
endif
return false
endfunction
function C68 takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==A7[0]then
call IssuePointOrderByIdLoc(GetTriggerUnit(),$D000F,rv)
endif
return false
endfunction
function CL8 takes nothing returns nothing
local integer i=1
local integer id
loop
exitwhen i>5
set id=GetPlayerId(Z7[i])
call C27("CSK"+I2S(id),T7[id])
call C27("CSD"+I2S(id),U7[id])
set id=GetPlayerId(A7[i])
call C27("CSK"+I2S(id),T7[id])
call C27("CSD"+I2S(id),U7[id])
set i=i+1
endloop
endfunction
function C18 takes boolean Z18 returns nothing
local unit u
local string C08="stand work alternate"
local string C58="stand work"
local string C28="stand alternate"
local string C_8="stand"
set u=JS4
if XH7(u)==false then
if Z18 then
call SetUnitAnimation(u,C08)
else
call SetUnitAnimation(u,C28)
endif
endif
set u=JT4
if XH7(u)==false then
if Z18 then
call SetUnitAnimation(u,C08)
else
call SetUnitAnimation(u,C28)
endif
endif
set u=JU4
if XH7(u)==false then
if Z18 then
call SetUnitAnimation(u,C08)
else
call SetUnitAnimation(u,C28)
endif
endif
set u=JV4
if XH7(u)==false then
if Z18 then
call SetUnitAnimation(u,C08)
else
call SetUnitAnimation(u,C28)
endif
endif
set u=JW4
if XH7(u)==false then
if Z18 then
call SetUnitAnimation(u,C08)
else
call SetUnitAnimation(u,C28)
endif
endif
set u=JX4
if XH7(u)==false then
if Z18 then
call SetUnitAnimation(u,C08)
else
call SetUnitAnimation(u,C28)
endif
endif
set u=KD4
if XH7(u)==false then
if Z18 then
call SetUnitAnimation(u,C58)
else
call SetUnitAnimation(u,C_8)
endif
endif
set u=KE4
if XH7(u)==false then
if Z18 then
call SetUnitAnimation(u,C58)
else
call SetUnitAnimation(u,C_8)
endif
endif
set u=KF4
if XH7(u)==false then
if Z18 then
call SetUnitAnimation(u,C58)
else
call SetUnitAnimation(u,C_8)
endif
endif
set u=KG4
if XH7(u)==false then
if Z18 then
call SetUnitAnimation(u,C58)
else
call SetUnitAnimation(u,C_8)
endif
endif
set u=KH4
if XH7(u)==false then
if Z18 then
call SetUnitAnimation(u,C58)
else
call SetUnitAnimation(u,C_8)
endif
endif
set u=KI4
if XH7(u)==false then
if Z18 then
call SetUnitAnimation(u,C58)
else
call SetUnitAnimation(u,C_8)
endif
endif
set u=null
endfunction
function L48 takes nothing returns boolean
call C18(true)
return false
endfunction
function Trig_Spawn_Conditions takes nothing returns boolean
if(P74)then
return F0
elseif(P84)then
return gH
elseif O04 then
return Fz
elseif(P4 or VT)then
return oH
endif
return O
endfunction
function L78 takes group L88,integer L98 returns nothing
local unit u
loop
set u=FirstOfGroup(L88)
exitwhen(u==null)
call GroupRemoveUnit(L88,u)
call SetUnitAbilityLevel(u,N8,L98)
endloop
endfunction
function LD8 takes nothing returns nothing
local boolean LE8=ModuloInteger(GetTriggerExecCount(JS),7)==0
if B4 then
return
endif
call C18(false)
if LE8 then
call CL8()
endif
if GetTriggerExecCount(JS)==1 and PE4==false then
call UnitResetCooldown(KU4[1])
call UnitResetCooldown(KU4[2])
call UnitResetCooldown(KU4[3])
call UnitResetCooldown(KU4[4])
call UnitResetCooldown(KU4[5])
call UnitResetCooldown(KU4[7])
call UnitResetCooldown(KU4[8])
call UnitResetCooldown(KU4[9])
call UnitResetCooldown(KU4[$A])
call UnitResetCooldown(KU4[$B])
call YT8(JG4,false)
call YT8(JH4,false)
call YT8(JI4,false)
call YT8(J64,false)
call YT8(JL4,false)
call YT8(J14,false)
elseif GetTriggerExecCount(JS)==1 and PE4 then
call YT8(JH4,false)
call YT8(JL4,false)
endif
if GetTriggerExecCount(JS)==1 then
call EnableTrigger(M54)
endif
if PE4==false and PH4==false then
if(Rv)then
call CreateNUnitsAtLoc(D7,1969711215,A7[0],lv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(D7,1966092337,A7[0],lv,bj_UNIT_FACING)
endif
call L78(bj_lastCreatedGroup,2)
endif
if PG4==false then
if(Av)then
call CreateNUnitsAtLoc(D7,1969711215,A7[0],Jv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(D7,1966092337,A7[0],Jv,bj_UNIT_FACING)
endif
call L78(bj_lastCreatedGroup,3)
endif
if PE4==false and PF4==false then
if(Nv)then
call CreateNUnitsAtLoc(D7,1969711215,A7[0],Lv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(D7,1966092337,A7[0],Lv,bj_UNIT_FACING)
endif
call L78(bj_lastCreatedGroup,4)
endif
if PE4==false and PH4==false then
if(av)then
call CreateNUnitsAtLoc(E7,1970169187,A7[0],qv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(E7,1966092338,A7[0],qv,bj_UNIT_FACING)
endif
call L78(bj_lastCreatedGroup,2)
endif
if PG4==false then
if(Ev)then
call CreateNUnitsAtLoc(E7,1970169187,A7[0],mv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(E7,1966092338,A7[0],mv,bj_UNIT_FACING)
endif
call L78(bj_lastCreatedGroup,3)
endif
if PE4==false and PF4==false then
if(Ov)then
call CreateNUnitsAtLoc(E7,1970169187,A7[0],pv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(E7,1966092338,A7[0],pv,bj_UNIT_FACING)
endif
call L78(bj_lastCreatedGroup,4)
endif
if LE8 then
if PE4==false and PH4==false then
if(av)then
call CreateNUnitsAtLoc(E7,1970107511,A7[0],qv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(E7,1966092370,A7[0],qv,bj_UNIT_FACING)
endif
call L78(bj_lastCreatedGroup,2)
endif
if PG4==false then
if(Ev)then
call CreateNUnitsAtLoc(E7,1970107511,A7[0],mv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(E7,1966092370,A7[0],mv,bj_UNIT_FACING)
endif
call L78(bj_lastCreatedGroup,3)
endif
if PE4==false and PF4==false then
if(Ov)then
call CreateNUnitsAtLoc(E7,1970107511,A7[0],pv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(E7,1966092370,A7[0],pv,bj_UNIT_FACING)
endif
call L78(bj_lastCreatedGroup,4)
endif
endif
if PE4==false and PH4==false then
if(Cv)then
call CreateNUnitsAtLoc(D7,1702061422,Z7[0],tv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(D7,1697656918,Z7[0],tv,bj_UNIT_FACING)
endif
call L78(bj_lastCreatedGroup,2)
endif
if PG4==false then
if(Dv)then
call CreateNUnitsAtLoc(D7,1702061422,Z7[0],Qv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(D7,1697656918,Z7[0],Qv,bj_UNIT_FACING)
endif
call L78(bj_lastCreatedGroup,3)
endif
if PE4==false and PF4==false then
if(fv)then
call CreateNUnitsAtLoc(D7,1702061422,Z7[0],sv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(D7,1697656918,Z7[0],sv,bj_UNIT_FACING)
endif
call L78(bj_lastCreatedGroup,4)
endif
if PE4==false and PH4==false then
if(bv)then
call CreateNUnitsAtLoc(E7,1701081721,Z7[0],Wv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(E7,1697656919,Z7[0],Wv,bj_UNIT_FACING)
endif
call L78(bj_lastCreatedGroup,2)
endif
if PG4==false then
if(Bv)then
call CreateNUnitsAtLoc(E7,1701081721,Z7[0],Tv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(E7,1697656919,Z7[0],Tv,bj_UNIT_FACING)
endif
call L78(bj_lastCreatedGroup,3)
endif
if PE4==false and PF4==false then
if(cv)then
call CreateNUnitsAtLoc(E7,1701081721,Z7[0],Uv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(E7,1697656919,Z7[0],Uv,bj_UNIT_FACING)
endif
call L78(bj_lastCreatedGroup,4)
endif
if LE8 then
if PE4==false and PH4==false then
if(cv)then
call CreateNUnitsAtLoc(E7,1700946284,Z7[0],Wv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(E7,1697657398,Z7[0],Wv,bj_UNIT_FACING)
endif
call L78(bj_lastCreatedGroup,2)
endif
if PG4==false then
if(Bv)then
call CreateNUnitsAtLoc(E7,1700946284,Z7[0],Tv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(E7,1697657398,Z7[0],Tv,bj_UNIT_FACING)
endif
call L78(bj_lastCreatedGroup,3)
endif
if PE4==false and PF4==false then
if(cv)then
call CreateNUnitsAtLoc(E7,1700946284,Z7[0],Uv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(E7,1697657398,Z7[0],Uv,bj_UNIT_FACING)
endif
call L78(bj_lastCreatedGroup,4)
endif
endif
endfunction
function LF8 takes nothing returns nothing
set av=false
call DisableTrigger(cA)
call C27("Rax"+I2S(0)+I2S(0)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call R6I(GetKillingUnit(),1)
endfunction
function LG8 takes nothing returns nothing
set Ev=false
call DisableTrigger(CA)
call C27("Rax"+I2S(0)+I2S(1)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call R6I(GetKillingUnit(),1)
endfunction
function LH8 takes nothing returns nothing
set Ov=false
call DisableTrigger(dA)
call C27("Rax"+I2S(0)+I2S(2)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call R6I(GetKillingUnit(),1)
endfunction
function LI8 takes nothing returns nothing
set Rv=false
call DisableTrigger(DA)
call C27("Rax"+I2S(0)+I2S(0)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call R6I(GetKillingUnit(),2)
endfunction
function LJ8 takes nothing returns nothing
set Av=false
call DisableTrigger(fA)
call C27("Rax"+I2S(0)+I2S(1)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call R6I(GetKillingUnit(),2)
endfunction
function LK8 takes nothing returns nothing
set Nv=false
call DisableTrigger(FA)
call C27("Rax"+I2S(0)+I2S(2)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call R6I(GetKillingUnit(),2)
endfunction
function LM8 takes nothing returns nothing
set bv=false
call DisableTrigger(gA)
call C27("Rax"+I2S(1)+I2S(0)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call R6I(GetKillingUnit(),1)
endfunction
function LN8 takes nothing returns nothing
set Bv=false
call DisableTrigger(GA)
call C27("Rax"+I2S(1)+I2S(1)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call R6I(GetKillingUnit(),1)
endfunction
function LO8 takes nothing returns nothing
set cv=false
call DisableTrigger(LA)
call C27("Rax"+I2S(1)+I2S(2)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call R6I(GetKillingUnit(),1)
endfunction
function LP8 takes nothing returns nothing
set Cv=false
call DisableTrigger(mA)
call C27("Rax"+I2S(1)+I2S(0)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call R6I(GetKillingUnit(),2)
endfunction
function LQ8 takes nothing returns nothing
set Dv=false
call DisableTrigger(MA)
call C27("Rax"+I2S(1)+I2S(1)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call R6I(GetKillingUnit(),2)
endfunction
function LR8 takes nothing returns nothing
set fv=false
call DisableTrigger(PA)
call C27("Rax"+I2S(1)+I2S(2)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call R6I(GetKillingUnit(),2)
endfunction
function LS8 takes nothing returns boolean
local real LT8=GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)/ GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)
if LT8<.75 and iW==false then
set iW=true
call C27("Tree",75)
endif
if LT8<.5 and rW==false then
set rW=true
call C27("Tree",50)
endif
if LT8<.25 and oW==false then
set oW=true
call C27("Tree",25)
endif
if LT8<.1 and eW==false then
set eW=true
call C27("Tree",$A)
endif
return false
endfunction
function LU8 takes nothing returns boolean
local real LT8=GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)/ GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)
if LT8<.75 and vW==false then
set vW=true
call C27("Throne",75)
endif
if LT8<.5 and zw==false then
set zw=true
call C27("Throne",50)
endif
if LT8<.25 and Uw==false then
set Uw=true
call C27("Throne",25)
endif
if LT8<.1 and tw==false then
set tw=true
call C27("Throne",$A)
endif
return false
endfunction
function LV8 takes nothing returns boolean
return( not(Cv or Dv or fv or bv or Bv or cv))
endfunction
function LW8 takes nothing returns nothing
call VV7(bj_FORCE_ALL_PLAYERS,20.,(GetObjectName((1848652879)))+" "+(GetObjectName((1848656695))))
call SetPlayerTechResearchedSwap(1378889796,(GetPlayerTechCountSimple(1378889796,Z7[0])+30),Z7[0])
call SetPlayerTechResearchedSwap(1378889795,(GetPlayerTechCountSimple(1378889795,Z7[0])+30),Z7[0])
call DisableTrigger(SA)
endfunction
function LX8 takes nothing returns boolean
return( not(Rv or Av or Nv or av or Ev or Ov))
endfunction
function LY8 takes nothing returns nothing
call VV7(bj_FORCE_ALL_PLAYERS,20.,(GetObjectName((1848652888)))+" "+(GetObjectName((1848656697))))
call SetPlayerTechResearchedSwap(1378889785,(GetPlayerTechCountSimple(1378889785,A7[0])+30),A7[0])
call SetPlayerTechResearchedSwap(1378889794,(GetPlayerTechCountSimple(1378889794,A7[0])+30),A7[0])
call DisableTrigger(TA)
endfunction
function LZ8 takes nothing returns nothing
call SetPlayerTechResearchedSwap(1378889783,(GetPlayerTechCountSimple(1378889783,Z7[0])+1),Z7[0])
call SetPlayerTechResearchedSwap(1378889795,(GetPlayerTechCountSimple(1378889795,Z7[0])+1),Z7[0])
call SetPlayerTechResearchedSwap(1378889784,(GetPlayerTechCountSimple(1378889784,Z7[0])+1),Z7[0])
call SetPlayerTechResearchedSwap(1378889796,(GetPlayerTechCountSimple(1378889796,Z7[0])+1),Z7[0])
call SetPlayerTechResearchedSwap(1378889785,(GetPlayerTechCountSimple(1378889785,A7[0])+1),A7[0])
call SetPlayerTechResearchedSwap(1378889779,(GetPlayerTechCountSimple(1378889779,A7[0])+1),A7[0])
call SetPlayerTechResearchedSwap(1378889793,(GetPlayerTechCountSimple(1378889793,A7[0])+1),A7[0])
call SetPlayerTechResearchedSwap(1378889794,(GetPlayerTechCountSimple(1378889794,A7[0])+1),A7[0])
endfunction
function LA8 takes nothing returns nothing
local location LB8=GetRectCenter(QD)
call RemoveUnit(CreateUnitAtLoc(B7,1851941999,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1851942003,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1852273524,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1848652342,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1852270450,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1851941995,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1851946861,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1852794733,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1852796263,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1852207203,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1852207221,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1853060200,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1853060204,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1853055348,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1853320295,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1852534636,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1852534626,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1852534644,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1852010091,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1852007790,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1852272243,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1852208226,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1852207976,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1852270641,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1852860012,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1852798821,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1852798818,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1852666477,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1852666482,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1852666476,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1852077170,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1852077175,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1848659011,LB8,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(B7,1848659012,LB8,bj_UNIT_FACING))
call RemoveLocation(LB8)
set LB8=null
endfunction
function LC8 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(B7,1848658007,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1848658008,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1848658007,x,y,0),x,y)
endfunction
function L38 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(B7,1852466993,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1852466993,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1852467041,x,y,0),x,y)
endfunction
function L68 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(B7,1851941999,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1851941999,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1851942003,x,y,0),x,y)
endfunction
function LL8 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(B7,1851941995,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1851941995,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1851946861,x,y,0),x,y)
endfunction
function L18 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(B7,1852273524,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1852273524,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1852270450,x,y,0),x,y)
endfunction
function AncientLizards_AI takes nothing returns boolean
call OZ7(GetTriggeringTrigger())
call IssueTargetOrderById(GetTriggerUnit(),$D00F1,GetTriggerUnit())
return false
endfunction
function L08 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(B7,1848659011,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1848659012,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1848659012,x,y,0),x,y)
endfunction
function L58 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(B7,1852794733,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1852794733,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1852796263,x,y,0),x,y)
endfunction
function L28 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(B7,1852207203,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1852207221,x,y,0),x,y)
endfunction
function L_8 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(B7,1853060200,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1853060204,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1853055348,x,y,0),x,y)
endfunction
function D49 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(B7,1853060204,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1853060204,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1853055348,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1853055348,x,y,0),x,y)
endfunction
function D79 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(B7,1853320295,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1853320295,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1848651859,x,y,0),x,y)
endfunction
function D89 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(B7,1848652342,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1848652342,x,y,0),x,y)
endfunction
function D99 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(B7,1852534636,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1852534626,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1852534626,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1852534626,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1852534644,x,y,0),x,y)
endfunction
function DD9 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(B7,1852208226,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1852208226,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1852207976,x,y,0),x,y)
endfunction
function DE9 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(B7,1852007790,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1852010091,x,y,0),x,y)
endfunction
function DF9 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(B7,1852272243,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1852272243,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1852272243,x,y,0),x,y)
endfunction
function DG9 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(B7,1852208226,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1852208226,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1852534636,x,y,0),x,y)
endfunction
function DH9 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(B7,1852270641,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1852860012,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1852860012,x,y,0),x,y)
endfunction
function DI9 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(B7,1852798821,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1852798818,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1852798818,x,y,0),x,y)
endfunction
function DJ9 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(B7,1852077170,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1852077170,x,y,0),x,y)
call SetUnitPosition(CreateUnit(B7,1852077175,x,y,0),x,y)
endfunction
function DK9 takes real x,real y returns nothing
local integer D5=GetRandomInt(1,5)
if D5==1 then
call L28(x,y)
elseif D5==2 then
call L_8(x,y)
elseif D5==3 then
call DI9(x,y)
elseif D5==4 then
call DJ9(x,y)
elseif D5==5 then
call DE9(x,y)
endif
endfunction
function DM9 takes real x,real y returns nothing
local integer D5=GetRandomInt(1,5)
if D5==1 then
call L28(x,y)
elseif D5==2 then
call L_8(x,y)
elseif D5==3 then
call DI9(x,y)
elseif D5==4 then
call DJ9(x,y)
elseif D5==5 then
call DE9(x,y)
endif
endfunction
function DN9 takes real x,real y returns nothing
local integer D5=GetRandomInt(1,5)
if D5==1 then
call L28(x,y)
elseif D5==2 then
call L_8(x,y)
elseif D5==3 then
call DI9(x,y)
elseif D5==4 then
call DJ9(x,y)
elseif D5==5 then
call DE9(x,y)
endif
endfunction
function DMM9 takes real x,real y returns nothing
local integer D5=GetRandomInt(1,5)
if D5==1 then
call L28(x,y)
elseif D5==2 then
call L_8(x,y)
elseif D5==3 then
call DI9(x,y)
elseif D5==4 then
call DJ9(x,y)
elseif D5==5 then
call DE9(x,y)
endif
endfunction
function DM99 takes real x,real y returns nothing
local integer D5=GetRandomInt(1,5)
if D5==1 then
call L28(x,y)
elseif D5==2 then
call L_8(x,y)
elseif D5==3 then
call DI9(x,y)
elseif D5==4 then
call DJ9(x,y)
elseif D5==5 then
call DE9(x,y)
endif
endfunction
function DO9 takes real x,real y returns nothing
local integer D5=GetRandomInt(1,5)
if D5==1 then
call L28(x,y)
elseif D5==2 then
call L_8(x,y)
elseif D5==3 then
call DI9(x,y)
elseif D5==4 then
call DJ9(x,y)
elseif D5==5 then
call DE9(x,y)
endif
endfunction
function DP9 takes real x,real y returns nothing
local integer D5=GetRandomInt(1,5)
if D5==1 then
call D89(x,y)
elseif D5==2 then
call L58(x,y)
elseif D5==3 then
call D49(x,y)
elseif D5==4 then
call D79(x,y)
elseif D5==5 then
call DE9(x,y)
endif
endfunction
function DQ9 takes real x,real y returns nothing
local integer D5=GetRandomInt(1,5)
if D5==1 then
call D89(x,y)
elseif D5==2 then
call L58(x,y)
elseif D5==3 then
call D49(x,y)
elseif D5==4 then
call D79(x,y)
elseif D5==5 then
call DE9(x,y)
endif
endfunction
function DR9 takes real x,real y returns nothing
local integer D5=GetRandomInt(1,5)
if D5==1 then
call D89(x,y)
elseif D5==2 then
call L58(x,y)
elseif D5==3 then
call D49(x,y)
elseif D5==4 then
call D79(x,y)
elseif D5==5 then
call DE9(x,y)
endif
endfunction
function DS9 takes real x,real y returns nothing
local integer D5=GetRandomInt(1,5)
if D5==1 then
call D89(x,y)
elseif D5==2 then
call L58(x,y)
elseif D5==3 then
call D49(x,y)
elseif D5==4 then
call D79(x,y)
elseif D5==5 then
call DE9(x,y)
endif
endfunction
function DT9 takes real x,real y returns nothing
local integer D5=GetRandomInt(1,6)
if D5==1 then
call DH9(x,y)
elseif D5==2 then
call DG9(x,y)
elseif D5==3 then
call DF9(x,y)
elseif D5==4 then
call D99(x,y)
elseif D5==5 then
call DD9(x,y)
elseif D5==6 then
call LC8(x,y)
endif
endfunction
function DU9 takes real x,real y returns nothing
local integer D5=GetRandomInt(1,6)
if D5==1 then
call DH9(x,y)
elseif D5==2 then
call DG9(x,y)
elseif D5==3 then
call DF9(x,y)
elseif D5==4 then
call D99(x,y)
elseif D5==5 then
call DD9(x,y)
elseif D5==6 then
call LC8(x,y)
endif
endfunction
function DV9 takes real x,real y returns nothing
local integer D5=GetRandomInt(1,5)
if D5==1 then
call L38(x,y)
elseif D5==2 then
call L68(x,y)
elseif D5==3 then
call LL8(x,y)
elseif D5==4 then
call L18(x,y)
elseif D5==5 then
call L08(x,y)
endif
endfunction
function DW9 takes real x,real y returns nothing
local integer D5=GetRandomInt(1,5)
if D5==1 then
call L38(x,y)
elseif D5==2 then
call L68(x,y)
elseif D5==3 then
call LL8(x,y)
elseif D5==4 then
call L18(x,y)
elseif D5==5 then
call L08(x,y)
endif
endfunction
function DX9 takes nothing returns nothing
if GetUnitAbilityLevel(GetEnumUnit(),1093685300)!=0 then
call GroupRemoveUnit(R8,GetEnumUnit())
endif
if GetUnitTypeId(GetEnumUnit())==1865429043 then
call GroupRemoveUnit(R8,GetEnumUnit())
endif
if XH7(GetEnumUnit()) then
call GroupRemoveUnit(R8,GetEnumUnit())
endif
endfunction
function DY9 takes group g returns boolean
set R8=g
call ForGroup(g,function DX9)
return FirstOfGroup(g)==null
endfunction
function DZ9 takes nothing returns boolean
local group g
local rect r1
local rect r2
if oy==false then
return false
endif
set r1=Sr
set r2=Br
set g=WS7()
call GroupEnumUnitsInRect(g,r1,Condition(function TO7))
if DY9(g)then
call DV9(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call WR7(g)
set r1=Ur
set r2=cr
set g=WS7()
call GroupEnumUnitsInRect(g,r1,Condition(function TO7))
if DY9(g)then
call DW9(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call WR7(g)
set r1=Wr
set r2=Cr
set g=WS7()
call GroupEnumUnitsInRect(g,r1,Condition(function TO7))
if DY9(g)then
call DK9(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call WR7(g)
set r1=zr
set r2=fr0
set g=WS7()
call GroupEnumUnitsInRect(g,r1,Condition(function TO7))
if DY9(g)then
call DN9(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call WR7(g)
set r1=Zr
set r2=Fr
set g=WS7()
call GroupEnumUnitsInRect(g,r1,Condition(function TO7))
if DY9(g)then
call DU9(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call WR7(g)
set r1=vi
set r2=Hr
set g=WS7()
call GroupEnumUnitsInRect(g,r1,Condition(function TO7))
if DY9(g)then
call DT9(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call WR7(g)
set r1=ei
set r2=jr
set g=WS7()
call GroupEnumUnitsInRect(g,r1,Condition(function TO7))
if DY9(g)then
call DR9(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call WR7(g)
set r1=oi
set r2=Jr
set g=WS7()
call GroupEnumUnitsInRect(g,r1,Condition(function TO7))
if DY9(g)then
call DS9(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call WR7(g)
set r1=xi
set r2=lr
set g=WS7()
call GroupEnumUnitsInRect(g,r1,Condition(function TO7))
if DY9(g)then
call DO9(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call WR7(g)
set r1=ai
set r2=mr
set g=WS7()
call GroupEnumUnitsInRect(g,r1,Condition(function TO7))
if DY9(g)then
call DP9(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call WR7(g)
set r1=Ai
set r2=Ni
set g=WS7()
call GroupEnumUnitsInRect(g,r1,Condition(function TO7))
if DY9(g)then
call DQ9(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call WR7(g)
set r1=bi
set r2=Bi
set g=WS7()
call GroupEnumUnitsInRect(g,r1,Condition(function TO7))
if DY9(g)then
call DM9(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call WR7(g)
set r1=bi0
set r2=Bi0
set g=WS7()
call GroupEnumUnitsInRect(g,r1,Condition(function TO7))
if DY9(g)then
call DMM9(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call WR7(g)
set r1=bi1
set r2=Bi1
set g=WS7()
call GroupEnumUnitsInRect(g,r1,Condition(function TO7))
if DY9(g)then
call DM99(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call WR7(g)
set r1=null
set r2=null
set g=null
return false
endfunction
function DA9 takes nothing returns nothing
local integer UB7=GetRandomInt(1,9)
local location l
if PE4 then
set UB7=GetRandomInt(1,3)
if UB7==1 then
set UB7=2
endif
if UB7==2 then
set UB7=5
endif
if UB7==3 then
set UB7=8
endif
endif
if(UB7==1)then
set l=GetRectCenter(BE)
call CreateNUnitsAtLoc(1,1848651827,Z7[0],l,bj_UNIT_FACING)
call VV7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848653105))))
call L78(bj_lastCreatedGroup,4)
call RemoveLocation(l)
endif
if(UB7==2)then
set l=GetRectCenter(bE)
call CreateNUnitsAtLoc(1,1848651827,Z7[0],l,bj_UNIT_FACING)
call VV7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848653106))))
call L78(bj_lastCreatedGroup,2)
call RemoveLocation(l)
endif
if(UB7==3)then
set l=GetRectCenter(AE)
call CreateNUnitsAtLoc(1,1848651827,Z7[0],l,bj_UNIT_FACING)
call VV7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848653107))))
call L78(bj_lastCreatedGroup,3)
call RemoveLocation(l)
endif
if(UB7==4)then
set l=GetRectCenter(BE)
call CreateNUnitsAtLoc(1,1848651845,Z7[0],l,bj_UNIT_FACING)
call VV7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848653112))))
call L78(bj_lastCreatedGroup,4)
call RemoveLocation(l)
endif
if(UB7==5)then
set l=GetRectCenter(bE)
call CreateNUnitsAtLoc(1,1848651845,Z7[0],l,bj_UNIT_FACING)
call VV7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848652890))))
call L78(bj_lastCreatedGroup,2)
call RemoveLocation(l)
endif
if(UB7==6)then
set l=GetRectCenter(AE)
call CreateNUnitsAtLoc(1,1848651845,Z7[0],l,bj_UNIT_FACING)
call VV7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848653111))))
call L78(bj_lastCreatedGroup,3)
call RemoveLocation(l)
endif
if(UB7==7)and PE4==false then
set l=GetRectCenter(BE)
call CreateNUnitsAtLoc(1,1848651844,Z7[0],l,bj_UNIT_FACING)
call VV7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848653110))))
call L78(bj_lastCreatedGroup,4)
call RemoveLocation(l)
endif
if(UB7==8)and PE4==false then
set l=GetRectCenter(bE)
call CreateNUnitsAtLoc(1,1848651844,Z7[0],l,bj_UNIT_FACING)
call VV7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848652884))))
call L78(bj_lastCreatedGroup,2)
call RemoveLocation(l)
endif
if(UB7==9)then
set l=GetRectCenter(AE)
call CreateNUnitsAtLoc(1,1848651844,Z7[0],l,bj_UNIT_FACING)
call VV7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848653123))))
call L78(bj_lastCreatedGroup,3)
call RemoveLocation(l)
endif
if(UB7==1)then
set l=GetRectCenter(OE)
call CreateNUnitsAtLoc(1,1848651827,A7[0],l,bj_UNIT_FACING)
call VV7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848656708))))
call L78(bj_lastCreatedGroup,4)
call RemoveLocation(l)
endif
if(UB7==2)then
set l=GetRectCenter(XE)
call CreateNUnitsAtLoc(1,1848651827,A7[0],l,bj_UNIT_FACING)
call VV7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848656709))))
call L78(bj_lastCreatedGroup,2)
call RemoveLocation(l)
endif
if(UB7==3)then
set l=GetRectCenter(IE)
call CreateNUnitsAtLoc(1,1848651827,A7[0],l,bj_UNIT_FACING)
call VV7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848656707))))
call L78(bj_lastCreatedGroup,3)
call RemoveLocation(l)
endif
if(UB7==4)then
set l=GetRectCenter(OE)
call CreateNUnitsAtLoc(1,1848651845,A7[0],l,bj_UNIT_FACING)
call VV7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848656711))))
call L78(bj_lastCreatedGroup,4)
call RemoveLocation(l)
endif
if(UB7==5)then
set l=GetRectCenter(XE)
call CreateNUnitsAtLoc(1,1848651845,A7[0],l,bj_UNIT_FACING)
call VV7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848656712))))
call L78(bj_lastCreatedGroup,2)
call RemoveLocation(l)
endif
if(UB7==6)then
set l=GetRectCenter(IE)
call CreateNUnitsAtLoc(1,1848651845,A7[0],l,bj_UNIT_FACING)
call VV7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848656710))))
call L78(bj_lastCreatedGroup,3)
call RemoveLocation(l)
endif
if(UB7==7)then
set l=GetRectCenter(OE)
call CreateNUnitsAtLoc(1,1848651844,A7[0],l,bj_UNIT_FACING)
call VV7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848656714))))
call L78(bj_lastCreatedGroup,4)
call RemoveLocation(l)
endif
if(UB7==8)then
set l=GetRectCenter(XE)
call CreateNUnitsAtLoc(1,1848651844,A7[0],l,bj_UNIT_FACING)
call VV7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848656715))))
call L78(bj_lastCreatedGroup,2)
call RemoveLocation(l)
endif
if(UB7==9)then
set l=GetRectCenter(IE)
call CreateNUnitsAtLoc(1,1848651844,A7[0],l,bj_UNIT_FACING)
call VV7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848656713))))
call L78(bj_lastCreatedGroup,3)
call RemoveLocation(l)
endif
set l=null
endfunction
function N9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
if XH7(WI7)==false and WI7!=null then
call SetUnitScale(WI7,XX7(WI7)*CS,XX7(WI7)*CS,XX7(WI7)*CS)
endif
call NM7(OB7)
call OZ7(t)
set t=null
set WI7=null
return false
endfunction
function ZK8 takes nothing returns nothing
local integer x=1
local player p
loop
exitwhen x>16
if MV7(M7[x],ZU[DI4])!=null then
call RemoveUnit(OA4[GetPlayerId(GetOwningPlayer(M7[x]))])
endif
set x=x+1
endloop
endfunction
function DB9 takes nothing returns boolean
return(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) and LB7(GetUnitTypeId(GetFilterUnit()))==false and MV7(GetTriggerUnit(),ZU[DI4])!=null)!=null
endfunction
function DC9 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)!=1 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1)!=null
endfunction
function D39 takes nothing returns nothing
call SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+F8)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\BloodstoneHealTarget.mdx",GetEnumUnit(),"origin"))
endfunction
function D69 takes nothing returns nothing
local group g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),1700,Condition(function DC9))
set F8=500+30*GetItemCharges(MV7(GetTriggerUnit(),ZU[DI4]))
call ForGroup(g,function D39)
call WR7(g)
set g=null
endfunction
function DL9 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit BB7=CreateUnit(GetOwningPlayer(WI7),1211117645,GetUnitX(WI7),GetUnitY(WI7),GetUnitFacing(WI7))
set OA4[GetPlayerId(GetOwningPlayer(WI7))]=BB7
call D69()
set BB7=null
set WI7=null
endfunction
function D19 takes unit u returns nothing
local integer D09=GetItemCharges(MV7(u,ZU[DI4]))
if D09>0 then
call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)+D09*0.)
call SetUnitState(u,UNIT_STATE_MANA,GetUnitState(u,UNIT_STATE_MANA)+D09)
endif
endfunction
function D59 takes nothing returns boolean
local integer i=1
local unit WI7
local integer id
if HG4>0 then
loop
exitwhen i>5
set id=GetPlayerId(Z7[i])
set WI7=M7[id]
if RN4[id]>0 and WI7!=null and GetUnitTypeId(WI7)>1 and IsUnitType(WI7,UNIT_TYPE_DEAD)==false then
call D19(WI7)
endif
set id=GetPlayerId(A7[i])
set WI7=M7[id]
if RN4[id]>0 and WI7!=null and GetUnitTypeId(WI7)>1 and IsUnitType(WI7,UNIT_TYPE_DEAD)==false then
call D19(WI7)
endif
set i=i+1
endloop
endif
set WI7=null
return false
endfunction
function oK takes nothing returns nothing
set gg[0]=CreateTimer()
set gg[1]=CreateTimer()
set gg[2]=CreateTimer()
set gg[3]=CreateTimer()
set gg[4]=CreateTimer()
set gg[5]=CreateTimer()
set gg[6]=CreateTimer()
set gg[7]=CreateTimer()
set gg[8]=CreateTimer()
set gg[9]=CreateTimer()
set gg[$A]=CreateTimer()
set gg[$B]=CreateTimer()
set gg[$C]=CreateTimer()
set gg[$D]=CreateTimer()
set gg[$E]=CreateTimer()
set gg[$F]=CreateTimer()
endfunction
function D29 takes unit u,real d returns boolean
if IsUnitType(u,UNIT_TYPE_HERO)or GetUnitAbilityLevel(u,1093678162)>0 then
return d>5
endif
return true
endfunction
function D_9 takes unit u returns unit
local group g
if GetUnitAbilityLevel(u,1093678162)==0 then
return u
endif
set IN4=VU4
set g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),900,Condition(function AJ7))
set VT4=FirstOfGroup(g)
call WR7(g)
return VT4
endfunction
function E49 takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit BB7
local unit p5
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call DestroyEffect(OG7(OB7,"FX"))
call NM7(OB7)
call OZ7(t)
else
set p5=O77(OB7,"Source")
set BB7=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)
call UnitAddAbility(BB7,1093684022)
set VU4=p5
if IssueTargetOrderById(BB7,$D026B,D_9(GetEventDamageSource()))then
call O37(GetTriggerUnit(),"E79",1)
endif
endif
set t=null
set BB7=null
set p5=null
endfunction
function E89 takes nothing returns boolean
if(GetTriggerEventId()==EVENT_UNIT_DAMAGED and D29(GetEventDamageSource(),GetEventDamage())and GetRandomInt(1,100)<21 and OT7(GetTriggerUnit(),"E79")==false)or GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call E49()
endif
return false
endfunction
function E79 takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
if m5==null then
set m5=p5
endif
call O37(m5,"StaticChargeActive",20)
call TriggerRegisterTimerEvent(t,20.,false)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function E89))
call NU7(OB7,"FX",AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldTarget.mdl",m5,"origin"))
call NT7(OB7,"Source",p5)
set t=null
set p5=null
set m5=null
endfunction
function E99 takes nothing returns nothing
if GetSpellAbilityId()==1093683788 and(OM7(GetHandleId(GetSpellTargetUnit()),"StaticChargeActive")==1)==false then
call E79()
endif
endfunction
function ED9 takes integer i returns boolean
return i==1227894838 or i==1227894840 or i==1227894858 or i==1227894859 or i==1227894839 or i==1227903050 or i==1227903285
endfunction
function EE9 takes nothing returns boolean
if GetIssuedOrderId()==$D0003 then
if GetOrderTargetItem()!=null and ED9(GetItemTypeId(GetOrderTargetItem()))then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848659029))
endif
endif
return false
endfunction
function EF9 takes unit EG9 returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterUnitEvent(t,EG9,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(t,Condition(function EE9))
set t=null
endfunction
function EH9 takes player p returns integer
local integer r=GetRandomInt(1,6)
if TV7(p)then
if r==1 then
return 1848651849
elseif r==2 then
return 1848652338
elseif r==3 then
return 1848652337
elseif r==4 then
return 1848658777
elseif r==5 then
return 1848658778
else
return 1848659013
endif
else
if r==1 then
return 1848652339
elseif r==2 then
return 1848652340
elseif r==3 then
return 1848652341
elseif r==4 then
return 1848658992
elseif r==5 then
return 1848658993
else
return 1848659252
endif
endif
return 0
endfunction
function EI9 takes player p returns integer
if GetRandomInt(1,3)==1 then
return 1697657426
elseif TV7(p)then
return 1697657160
else
return 1697657178
endif
return 0
endfunction
function EJ9 takes nothing returns nothing
local unit EK9=CreateUnit(GetOwningPlayer(GetTriggerUnit()),EH9(GetOwningPlayer(GetTriggerUnit())),GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),GetUnitFacing(GetTriggerUnit()))
local real x=GetUnitX(GetTriggerUnit())
local real y=GetUnitY(GetTriggerUnit())
local real a=GetUnitFacing(GetTriggerUnit())
call YE8(EK9)
call SetUnitPosition(EK9,x+25*Cos(a*bj_DEGTORAD),y+25*Sin(a*bj_DEGTORAD))
if OT[GetPlayerId(GetOwningPlayer(EK9))]==false then
call UnitRemoveType(EK9,UNIT_TYPE_PEON)
else
call UnitAddType(EK9,UNIT_TYPE_PEON)
endif
set EK9=null
endfunction
function EM9 takes unit X_8 returns nothing
local integer i=0
local integer I97=GetHandleId(X_8)
local integer O5=OM7(I97,"aiCrow|CurrentOwner")
set LJ4=null
call DisableTrigger(H94)
loop
exitwhen i>5
set LJ4=UnitItemInSlot(KU4[16+O5],i)
if LJ4!=null then
call UnitAddItem(KU4[O5],LJ4)
endif
set i=i+1
endloop
call EnableTrigger(H94)
set GE7[$E0+O5]=false
call NP7(I97,"aiCrow|CurrentOwner",OM7(I97,"aiCrow|TrueOwner"))
call NS7(I97,"aiCrow|Active",false)
call NV7(I97,"aiCrow|DeliverTrigger",null)
set hq[896+O5]=Bz+$F
if(true)then
call SetUnitOwner(KU4[16+O5],Player(OM7(I97,"aiCrow|TrueOwner")),false)
endif
endfunction
function EN9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local unit ZX7=(LoadUnitHandle(L7,GetHandleId(t),(2)))
local integer I97=GetHandleId(ZX7)
local real x=0
local real y=0
if XH7(ZX7)==false then
if(not OO7(I97,"aiCrow|Alive"))then
call NS7(I97,"aiCrow|Alive",true)
endif
if TW7(GetOwningPlayer(ZX7))then
set x=JY4
set y=JZ4
else
set x=IX4
set y=IY4
endif
if KF7(GetUnitX(ZX7),GetUnitY(ZX7),x,y)<800 then
if not false then
call XF7(ZX7,1098282348)
endif
if OO7(I97,"aiCrow|Active")then
if IG4[OM7(I97,"aiCrow|CurrentOwner")]or OO7(I97,"aiCrow|Away")==false then
call EM9(ZX7)
call IssuePointOrderById(ZX7,$D0012,x,y)
else
if GetUnitCurrentOrder(ZX7)!=$D0012 then
call IssueNeutralImmediateOrderById(Player(OM7(I97,"aiCrow|CurrentOwner")),ZX7,1747990581)
endif
endif
endif
else
if not false then
call UnitRemoveAbility(ZX7,1098282348)
endif
if OO7(I97,"aiCrow|Active")and GetUnitCurrentOrder(ZX7)!=$D0012 then
if OO7(I97,"aiCrow|Away")then
call IssueNeutralImmediateOrderById(Player(OM7(I97,"aiCrow|CurrentOwner")),ZX7,1747990581)
else
call IssueImmediateOrderById(ZX7,$D0117)
endif
endif
endif
else
if(OO7(I97,"aiCrow|Alive"))then
call NS7(I97,"aiCrow|Alive",false)
endif
endif
set t=null
set ZX7=null
return false
endfunction
function EO9 takes integer O5,unit EK9 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local integer i=GetHandleId(EK9)
call NP7(i,"aiCrow|TrueOwner",O5)
call NP7(i,"aiCrow|CurrentOwner",O5)
call NS7(i,"aiCrow|Alive",true)
call NS7(i,"aiCrow|Active",false)
call SetPlayerAbilityAvailable(Player(O5),1093810510,false)
call UnitMakeAbilityPermanent(EK9,true,1093810509)
call TriggerRegisterDeathEvent(t,EK9)
call TriggerAddCondition(t,Condition(function Y88))
if false then
call XF7(EK9,1098282348)
endif
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function EN9))
call SaveUnitHandle(L7,(I97),(2),(EK9))
set t=null
endfunction
function EP9 takes nothing returns nothing
local unit EK9=CreateUnit(GetOwningPlayer(GetTriggerUnit()),EI9(GetOwningPlayer(GetTriggerUnit())),GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),GetUnitFacing(GetTriggerUnit()))
call YE8(EK9)
if OT[GetPlayerId(GetOwningPlayer(EK9))]==false then
call UnitRemoveType(EK9,UNIT_TYPE_PEON)
else
call UnitAddType(EK9,UNIT_TYPE_PEON)
endif
call EF9(EK9)
set EK9=null
endfunction
function EQ9 takes nothing returns boolean
if GetSpellAbilityId()==1093681718 then
call EJ9()
endif
if GetSpellAbilityId()==1093683796 then
call EP9()
endif
return false
endfunction
function ER9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit EK9=O77(OB7,"chicken")
local integer ES9=OM7(OB7,"newability")
local integer ET9=OM7(OB7,"itemId0")
local integer EU9=OM7(OB7,"itemId1")
local integer EV9=OM7(OB7,"itemId2")
local integer EW9=OM7(OB7,"itemId3")
local integer EX9=OM7(OB7,"itemId4")
local integer EY9=OM7(OB7,"itemId5")
local player EZ9=O97(OB7,"pPlayer0")
local player EA9=O97(OB7,"pPlayer1")
local player EB9=O97(OB7,"pPlayer2")
local player EC9=O97(OB7,"pPlayer3")
local player E39=O97(OB7,"pPlayer4")
local player E69=O97(OB7,"pPlayer5")
local integer EL9=OM7(OB7,"charges0")
local integer E19=OM7(OB7,"charges1")
local integer E09=OM7(OB7,"charges2")
local integer E59=OM7(OB7,"charges3")
local integer E29=OM7(OB7,"charges4")
local integer E_9=OM7(OB7,"charges5")
call DisableTrigger(H94)
if GetTriggerEvalCount(t)==1 then
call UnitAddAbility(EK9,ES9)
if OT[GetPlayerId(GetOwningPlayer(EK9))]==false then
call UnitRemoveType(EK9,UNIT_TYPE_PEON)
else
call UnitAddType(EK9,UNIT_TYPE_PEON)
endif
else
if ET9>0 then
set HA4=CreateItem(ET9,GetUnitX(EK9),GetUnitY(EK9))
call UnitAddItem(EK9,HA4)
call SetItemPlayer(HA4,EZ9,false)
call SetItemUserData(HA4,1)
endif
if EL9>0 then
call SetItemCharges(HA4,EL9)
endif
if EU9>0 then
set HA4=CreateItem(EU9,GetUnitX(EK9),GetUnitY(EK9))
call UnitAddItem(EK9,HA4)
call SetItemPlayer(HA4,EA9,false)
call SetItemUserData(HA4,1)
endif
if E19>0 then
call SetItemCharges(HA4,E19)
endif
if EV9>0 then
set HA4=CreateItem(EV9,GetUnitX(EK9),GetUnitY(EK9))
call UnitAddItem(EK9,HA4)
call SetItemPlayer(HA4,EB9,false)
call SetItemUserData(HA4,1)
endif
if E09>0 then
call SetItemCharges(HA4,E09)
endif
if EW9>0 then
set HA4=CreateItem(EW9,GetUnitX(EK9),GetUnitY(EK9))
call UnitAddItem(EK9,HA4)
call SetItemPlayer(HA4,EC9,false)
call SetItemUserData(HA4,1)
endif
if E59>0 then
call SetItemCharges(HA4,E59)
endif
if EX9>0 then
set HA4=CreateItem(EX9,GetUnitX(EK9),GetUnitY(EK9))
call UnitAddItem(EK9,HA4)
call SetItemPlayer(HA4,E39,false)
call SetItemUserData(HA4,1)
endif
if E29>0 then
call SetItemCharges(HA4,E29)
endif
if EY9>0 then
set HA4=CreateItem(EY9,GetUnitX(EK9),GetUnitY(EK9))
call UnitAddItem(EK9,HA4)
call SetItemPlayer(HA4,E69,false)
call SetItemUserData(HA4,1)
endif
if E_9>0 then
call SetItemCharges(HA4,E_9)
endif
if OT[GetPlayerId(GetOwningPlayer(EK9))]==false then
call UnitRemoveType(EK9,UNIT_TYPE_PEON)
else
call UnitAddType(EK9,UNIT_TYPE_PEON)
endif
call NM7(OB7)
call OZ7(t)
endif
call EnableTrigger(H94)
set t=null
set EK9=null
set EZ9=null
set EA9=null
set EB9=null
set EC9=null
set E39=null
set E69=null
return false
endfunction
function F49 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit EK9=(LoadUnitHandle(L7,(OB7),(2)))
local integer F79=GetUnitTypeId(EK9)
local real x=GetUnitX(EK9)
local real y=GetUnitY(EK9)
local item F89
local item F99
local item FD9
local item FE9
local item FF9
local item FG9
local player EZ9
local player EA9
local player EB9
local player EC9
local player E39
local player E69
local integer ET9
local integer EU9
local integer EV9
local integer EW9
local integer EX9
local integer EY9
local integer EL9=-1
local integer E19=-1
local integer E09=-1
local integer E59=-1
local integer E29=-1
local integer E_9=-1
local integer ES9
local item QU8
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
if EK9==null or XH7(EK9)then
return false
endif
set t=CreateTrigger()
set OB7=GetHandleId(t)
set F89=UnitItemInSlot(EK9,0)
set F99=UnitItemInSlot(EK9,1)
set FD9=UnitItemInSlot(EK9,2)
set FE9=UnitItemInSlot(EK9,3)
set FF9=UnitItemInSlot(EK9,4)
set FG9=UnitItemInSlot(EK9,5)
set ET9=GetItemTypeId(F89)
set EU9=GetItemTypeId(F99)
set EV9=GetItemTypeId(FD9)
set EW9=GetItemTypeId(FE9)
set EX9=GetItemTypeId(FF9)
set EY9=GetItemTypeId(FG9)
set EZ9=GetItemPlayer(F89)
set EA9=GetItemPlayer(F99)
set EB9=GetItemPlayer(FD9)
set EC9=GetItemPlayer(FE9)
set E39=GetItemPlayer(FF9)
set E69=GetItemPlayer(FG9)
set QU8=F89
if GetItemType(QU8)==ITEM_TYPE_ARTIFACT or Z88(KY7(QU8))then
set EL9=GetItemCharges(QU8)
endif
set QU8=F99
if GetItemType(QU8)==ITEM_TYPE_ARTIFACT or Z88(KY7(QU8))then
set E19=GetItemCharges(QU8)
endif
set QU8=FD9
if GetItemType(QU8)==ITEM_TYPE_ARTIFACT or Z88(KY7(QU8))then
set E09=GetItemCharges(QU8)
endif
set QU8=FE9
if GetItemType(QU8)==ITEM_TYPE_ARTIFACT or Z88(KY7(QU8))then
set E59=GetItemCharges(QU8)
endif
set QU8=FF9
if GetItemType(QU8)==ITEM_TYPE_ARTIFACT or Z88(KY7(QU8))then
set E29=GetItemCharges(QU8)
endif
set QU8=FG9
if GetItemType(QU8)==ITEM_TYPE_ARTIFACT or Z88(KY7(QU8))then
set E_9=GetItemCharges(QU8)
endif
call KX7(F89)
call KX7(F99)
call KX7(FD9)
call KX7(FE9)
call KX7(FF9)
call KX7(FG9)
if F79==1848651849 then
set ES9=1395667001
elseif F79==1848652338 then
set ES9=1395667012
elseif F79==1848652337 then
set ES9=1395667011
elseif F79==1848652339 then
set ES9=1395667013
elseif F79==1848652340 then
set ES9=1395667010
elseif F79==1848652341 then
set ES9=1395667014
elseif F79==1848658777 then
set ES9=1395667031
elseif F79==1848658778 then
set ES9=1395667033
elseif F79==1848658992 then
set ES9=1395667032
elseif F79==1848658993 then
set ES9=1395667012
elseif F79==1848659013 then
set ES9=1395667270
elseif F79==1848659252 then
set ES9=1395667253
endif
if GetRandomInt(1,$A)==1 then
set ES9=1395667015
endif
if GetRandomInt(1,$A)<3 then
set ES9=1395667254
endif
if F79==1848651853 then
set ES9=1395667020
elseif F79==1848659027 then
set ES9=1395667020
elseif F79==1848658006 then
set ES9=1395667014
endif
if F79==1697657160 then
set ES9=1395667250
elseif F79==1697657178 then
set ES9=1395667248
elseif F79==1697657426 then
set ES9=1395667252
elseif F79==1697657428 then
set ES9=1395667249
elseif F79==1697657427 then
set ES9=1395667255
elseif F79==1697657648 then
set ES9=1395667251
endif
call NZ7(OB7,"pPlayer0",EZ9)
call NZ7(OB7,"pPlayer1",EA9)
call NZ7(OB7,"pPlayer2",EB9)
call NZ7(OB7,"pPlayer3",EC9)
call NZ7(OB7,"pPlayer4",E39)
call NZ7(OB7,"pPlayer5",E69)
call NP7(OB7,"itemId0",ET9)
call NP7(OB7,"itemId1",EU9)
call NP7(OB7,"itemId2",EV9)
call NP7(OB7,"itemId3",EW9)
call NP7(OB7,"itemId4",EX9)
call NP7(OB7,"itemId5",EY9)
call NP7(OB7,"charges0",EL9)
call NP7(OB7,"charges1",E19)
call NP7(OB7,"charges2",E09)
call NP7(OB7,"charges3",E59)
call NP7(OB7,"charges4",E29)
call NP7(OB7,"charges5",E_9)
call NT7(OB7,"chicken",EK9)
call NP7(OB7,"newability",ES9)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function ER9))
set QU8=null
set t=null
set EK9=null
set F89=null
set F99=null
set FD9=null
set FE9=null
set FF9=null
set FG9=null
set EZ9=null
set EA9=null
set EB9=null
set EC9=null
set E39=null
set E69=null
return false
endfunction
function FH9 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.05,false)
call TriggerAddCondition(t,Condition(function F49))
call SaveUnitHandle(L7,(I97),(2),(GetTriggerUnit()))
set t=null
endfunction
function FI9 takes nothing returns boolean
if GetSpellAbilityId()==1093685076 then
call FH9()
endif
return false
endfunction
function V7 takes nothing returns boolean
local integer x=0
loop
exitwhen x>5
if UnitItemInSlot(GetTriggerUnit(),x)==null then
return true
endif
set x=x+1
endloop
return false
endfunction
function wD takes nothing returns nothing
if GetItemTypeId(GetManipulatedItem())==ZU[C3]then
call RemoveItem(GetManipulatedItem())
call UnitAddItem(GetTriggerUnit(),CreateItem(ZU[E6],0,0))
endif
if GetItemTypeId(GetManipulatedItem())==ZU[E6]then
call RemoveItem(GetManipulatedItem())
call UnitAddItem(GetTriggerUnit(),CreateItem(ZU[C3],0,0))
endif
endfunction
function FJ9 takes nothing returns nothing
if OT7(GetEnumUnit(),"FK9") then
call X37(GetOwningPlayer(GetEnumUnit()),(GetObjectName((1848652365)))+" "+GetUnitName(GetEnumUnit())+" "+(GetObjectName((1848652371))))
else
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO) then
call O37(GetEnumUnit(),"FK9",25)
endif
call SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+$FA)
endif
endfunction
function FK9 takes nothing returns nothing
local unit p5=GetTriggerUnit()
local group g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(p5),GetUnitY(p5),925,Condition(function A07))
call ForGroup(g,function FJ9)
call WR7(g)
set p5=null
set g=null
endfunction
function FM9 takes nothing returns nothing
if GetSpellAbilityId()==1093681995 then
call FK9()
endif
endfunction
function FJJ9 takes nothing returns nothing
if OT7(GetEnumUnit(),"FK9") then
call X37(GetOwningPlayer(GetEnumUnit()),(GetObjectName((1848652365)))+" "+GetUnitName(GetEnumUnit())+" "+(GetObjectName((1848652371))))
else
if OT7(GetEnumUnit(),"FK9")==false and IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO) then
call O37(GetEnumUnit(),"FK9",25)
call DestroyEffect(AddSpecialEffectTarget("War3MapImported\\Unleash.mdx",GetEnumUnit(),"chest"))
if GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)<GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIre\\AIreTarget.mdl",GetEnumUnit(),"origin"))
call SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+$FA)
endif
if GetUnitState(GetEnumUnit(),UNIT_STATE_MANA)<GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_MANA) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl",GetEnumUnit(),"origin"))
call SetUnitState(GetEnumUnit(),UNIT_STATE_MANA,GetUnitState(GetEnumUnit(),UNIT_STATE_MANA)+160)
endif
endif
endif
endfunction
function FKK9 takes nothing returns nothing
local unit p5=GetTriggerUnit()
local group g=WS7()
call YW8(p5,0,0)
call GroupEnumUnitsInRange(g,GetUnitX(p5),GetUnitY(p5),925,Condition(function A07))
call ForGroup(g,function FJJ9)
call WR7(g)
set p5=null
set g=null
endfunction
function FMM9 takes nothing returns nothing
if GetSpellAbilityId()==1093816915 and GetUnitTypeId(GetTriggerUnit())!=1211117642 then
call FKK9()
endif
endfunction
function MIO takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
if GetUnitAbilityLevel(ZX7,1113875828)==0 then
call UnitRemoveAbility(ZX7,1093817396)
call UnitRemoveAbility(ZX7,1110460464)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
if AK7(ZX7)==true then
if GetUnitAbilityLevel(ZX7,1110460464)==0 then
call XF7(ZX7,1093817396)
endif
else
if GetUnitAbilityLevel(ZX7,1110460464)>0 then
call UnitRemoveAbility(ZX7,1093817396)
call UnitRemoveAbility(ZX7,1110460464)
endif
endif
endif
set ZX7=null
set t=null
return false
endfunction
function M1O takes nothing returns nothing
local unit ZX7=GetEnumUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerAddCondition(t,Condition(function MIO))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set t=null
set ZX7=null
endfunction
function MOO takes nothing returns nothing
local group g=WS7()
local unit ZX7=GetTriggerUnit()
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),1050+25,Condition(function A57))
call ForGroup(g,function M1O)
call WR7(g)
set g=null
set ZX7=null
endfunction
function M2O takes nothing returns nothing
if GetSpellAbilityId()==1095332962 then
call MOO()
endif
endfunction
function GT1 takes unit WI7 returns nothing
local real GR1=1
local integer GP1=UnitInventorySize(WI7)
local integer i=0
local item it
local integer BC7=GetUnitAbilityLevel(WI7,'A03P')
local integer AA2=LoadInteger(L7,GetHandleId(WI7),'BFLY')
if BC7>0 then
if BC7==1 then
set GR1=GR1*.8
elseif BC7==2 then
set GR1=GR1*.7
elseif BC7==3 then
set GR1=GR1*.6
elseif BC7==4 then
set GR1=GR1*.5
endif
endif
set BC7=GetUnitAbilityLevel(WI7,'A0MX')
if BC7>0 then
set GR1=GR1*(1-(.05+.05*BC7))
endif
loop
exitwhen i>GP1
set it=UnitItemInSlot(WI7,i)
if it!=null then
if KZ7(it)==Z2 then
if AA2<=0 then
set GR1=GR1*.65
else
set AA2=AA2-1
endif
elseif KZ7(it)==JB or KZ7(it)==R3 then
set GR1=GR1*.75
endif
endif
set i=i+1
endloop
if GetUnitAbilityLevel(WI7,'A2RK')==1 then
set GR1=GR1*.25
endif
if GetUnitAbilityLevel(WI7,'A2T5')==1 then
set GR1=GR1*.75
endif
set BC7=R2I((1-GR1)/.05)
if BC7>0 then
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),'A2RT',false)
call XF7(WI7,'A2RT')
call UnitMakeAbilityPermanent(WI7,true,'A2RU')
call SetUnitAbilityLevel(WI7,'A2RU',BC7)
else
call UnitRemoveAbility(WI7,'A2RT')
endif
set it=null
endfunction
function GQ1 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit WI7=(LoadUnitHandle(L7,(I97),$E))
call GT1(WI7)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set WI7=null
return false
endfunction
function GU1 takes unit WI7 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerAddCondition(t,Condition(function GQ1))
call TriggerRegisterTimerEvent(t,0,false)
call SaveUnitHandle(L7,(I97),$E,(WI7))
set t=null
endfunction
function H01 takes nothing returns boolean
if GetItemType(GetManipulatedItem())==ITEM_TYPE_PERMANENT and(KZ7(GetManipulatedItem())==Z2 or KZ7(GetManipulatedItem())==JB or KZ7(GetManipulatedItem())==R3)then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM then
call GT1(GetTriggerUnit())
else
call GU1(GetTriggerUnit())
endif
endif
return false
endfunction
function OHv takes nothing returns boolean
return IsUnitAlly(IN4,GetOwningPlayer(GetFilterUnit()))and GZZ(GetFilterUnit())
endfunction
function Ojv takes nothing returns nothing
call UnitRemoveAbility(GetEnumUnit(),'A2VT')
call UnitRemoveAbility(GetEnumUnit(),'A2VU')
endfunction
function OJv takes nothing returns nothing
if GetWidgetLife(GetEnumUnit())/GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)<=.2 then
call XF7(GetEnumUnit(),'A2VT')
call XF7(GetEnumUnit(),'A2VU')
else
call UnitRemoveAbility(GetEnumUnit(),'A2VT')
call UnitRemoveAbility(GetEnumUnit(),'A2VU')
endif
endfunction
function Okv takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local group g=(LoadGroupHandle(L7,(I97),(340)))
local real x=GetUnitX(ZX7)
local real y=GetUnitY(ZX7)
local group g2
if ZX7==null or(GetTriggerEventId()==EVENT_UNIT_DROP_ITEM and GetManipulatedItem()==LoadItemHandle(L7,(I97),(96)))then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call ForGroup(g,function Ojv)
call WR7(g)
set t=null
return false
endif
set g2=WS7()
set IN4=ZX7
if XH7(ZX7)==false then
set IN4=ZX7
call GroupEnumUnitsInRange(g2,x,y,925,Condition(function OHv))
endif
call GroupRemoveGroup(g2,g)
call ForGroup(g,function Ojv)
if XH7(ZX7)==false then
call ForGroup(g2,function OJv)
endif
call SaveGroupHandle(L7,(I97),(340),(g2))
call WR7(g)
set t=null
set ZX7=null
set g=null
set g2=null
return false
endfunction
function OKv takes unit ZX7 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.3,true)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DROP_ITEM)
call TriggerAddCondition(t,Condition(function Okv))
call SaveItemHandle(L7,(I97),(96),(GetManipulatedItem()))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveGroupHandle(L7,(I97),(340),(WS7()))
set t=null
endfunction
function Ogv takes nothing returns nothing
local unit ZX7=MH0
local unit IH7=GetEnumUnit()
if((LoadInteger(L7,(GetHandleId((IH7))),((4341))))==1)==false then
call O3O(IH7,4341,.99)
set bJ=true
call B67(ZX7,IH7,1,50)
set bJ=false
call YS7("Abilities\\Spells\\Items\\HealingSalve\\HealingSalveTarget.mdl",IH7,"origin",.9)
endif
if GetUnitAbilityLevel(IH7,'B00C')==0 then
call SetUnitOwner(bj_makeUnitRescuableUnit,GetOwningPlayer(IH7),false)
call SetUnitX(bj_makeUnitRescuableUnit,GetUnitX(IH7))
call SetUnitY(bj_makeUnitRescuableUnit,GetUnitY(IH7))
call IssueTargetOrderById(bj_makeUnitRescuableUnit,$D00DE,IH7)
endif
set ZX7=null
set IH7=null
endfunction
function OGv takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),($E)))
local item ja=(LoadItemHandle(L7,(I97),(96)))
local group g
if ZX7==null or(GetTriggerEventId()==EVENT_UNIT_DROP_ITEM and GetManipulatedItem()==ja)then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif GetTriggerEventId()!=EVENT_UNIT_DROP_ITEM then
if XH7(ZX7)==false then
set g=WS7()
set IN4=ZX7
set MH0=ZX7
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),725,Condition(function AJ7))
set bj_makeUnitRescuableUnit=CreateUnit(GetOwningPlayer(ZX7),'e00E',0,0,0)
call UnitAddAbility(bj_makeUnitRescuableUnit,'A2Q8')
call ForGroup(g,function Ogv)
call UnitRemoveAbility(bj_makeUnitRescuableUnit,'A2Q8')
call WR7(g)
set g=null
endif
endif
set t=null
set ZX7=null
set ja=null
return false
endfunction
function Ohv takes unit ZX7 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DROP_ITEM)
call TriggerAddCondition(t,Condition(function OGv))
call SaveUnitHandle(L7,(I97),($E),(ZX7))
call SaveItemHandle(L7,(I97),(96),(GetManipulatedItem()))
set t=null
endfunction
function OPv takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM and GetItemType(GetManipulatedItem())==ITEM_TYPE_PERMANENT and KZ7(GetManipulatedItem())==H2 then
call Ohv(GetTriggerUnit())
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SUMMON and UnitInventorySize(GetSummonedUnit())>0 and MV7(GetSummonedUnit(),ZU[H2])!=null then
call Ohv(GetSummonedUnit())
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM and GetItemType(GetManipulatedItem())==ITEM_TYPE_PERMANENT and KZ7(GetManipulatedItem())==R06 then
call OKv(GetTriggerUnit())
endif
return false
endfunction
function YKO takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=(LoadUnitHandle(L7,(OB7),(2)))
call UnitRemoveAbility(p5,1093816658)
call UnitRemoveAbility(p5,1093816657)
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
set t=null
set p5=null
return false
endfunction
function YLO takes nothing returns nothing
local trigger t
local integer OB7
if((LoadInteger(L7,(GetHandleId((GetEnumUnit()))),((4346))))==1)==true then
call X37(GetOwningPlayer(GetEnumUnit()),GetObjectName(1747993934)+" "+GetUnitName(GetEnumUnit()))
else
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true then
call O3O(GetEnumUnit(),4346,55)
endif
set t=CreateTrigger()
set OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,10,false)
call TriggerRegisterDeathEvent(t,GetEnumUnit())
call TriggerAddCondition(t,Condition(function YKO))
call SaveUnitHandle(L7,(OB7),(2),(GetEnumUnit()))
call XF7(GetEnumUnit(),1093816658)
call XF7(GetEnumUnit(),1093816657)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093816658,false)
set t=null
endif
endfunction
function YMO takes nothing returns nothing
local unit p5=GetTriggerUnit()
local group g=WS7()
call PlaySoundOnUnitBJ(BGO,100,p5)
call GroupEnumUnitsInRange(g,GetUnitX(p5),GetUnitY(p5),925,Condition(function A07))
call ForGroup(g,function YLO)
call WR7(g)
set p5=null
set g=null
endfunction
function YNO takes nothing returns nothing
if GetSpellAbilityId()==1093816651 then
call YMO()
endif
endfunction
function FN9 takes unit WI7,integer FO9,boolean FP9 returns nothing
local string FQ9
local string s
local player p=GetOwningPlayer(WI7)
local real d=2
local string FR9="Use"
if FP9 then
set FR9="Store"
endif
if FO9==1227894838 then
set FQ9="|c00ff0000"+GetObjectName(1848658513)+"|r"
call C27("Rune"+FR9+"1",GetPlayerId(p))
elseif FO9==1227894840 then
set FQ9="|c0000ff00"+GetObjectName(1848658510)+"|r"
call C27("Rune"+FR9+"2",GetPlayerId(p))
elseif FO9==1227894859 then
set FQ9="|c000000ff"+GetObjectName(1848658739)+"|r"
call C27("Rune"+FR9+"3",GetPlayerId(p))
elseif FO9==1227894839 then
set FQ9="|c00afaf00"+GetObjectName(1848658738)+"|r"
call C27("Rune"+FR9+"4",GetPlayerId(p))
elseif FO9==1227894858 then
set FQ9="|c00652DC1"+GetObjectName(1848658740)+"|r"
call C27("Rune"+FR9+"5",GetPlayerId(p))
elseif FO9==1227903050 or FO9==1227903285 then
set FQ9="|c00FFD700"+GetObjectName(1848659284)+"|r"
call C27("Rune"+FR9+"6",GetPlayerId(p))
endif
if FP9 then
set s=Q[GetPlayerId(p)]+GetUnitName(WI7)+"|r "+GetObjectName(1848657749)+"|r "+FQ9+" "+GetObjectName(1848657751)
set d=1
else
if NH then
set s=Q[GetPlayerId(p)]+GetUnitName(WI7)+"|r "+GetObjectName(1848657750)+"|r "+FQ9+" "+GetObjectName(1848657751)
else
set s=Q[GetPlayerId(p)]+GetUnitName(WI7)+"|r "+GetObjectName(1848657748)+"|r "+FQ9+" "+GetObjectName(1848657751)
endif
endif
if(IsPlayerAlly(GetLocalPlayer(),p)and GetLocalPlayer()!=p)or WG7(GetLocalPlayer())then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,d,s)
endif
endfunction
function FS9 takes nothing returns boolean
if GetSpellAbilityId()==1093683254 then
call NT7(GetHandleId(GetTriggerUnit()),"BottleTargetUnit",null)
call NP7(GetHandleId(GetTriggerUnit()),"BottleTargetItemId",0)
if(MV7(GetTriggerUnit(),ZU[AZ])!=null or MV7(GetTriggerUnit(),BU[AZ])!=null)and(GetUnitTypeId(GetSpellTargetUnit())==1852206952 or GetUnitTypeId(GetSpellTargetUnit())==1852073580)then
call NT7(GetHandleId(GetTriggerUnit()),"BottleTargetUnit",GetSpellTargetUnit())
elseif ED9(GetItemTypeId(GetSpellTargetItem()))then
call FN9(GetTriggerUnit(),GetItemTypeId(GetSpellTargetItem()),true)
call NP7(GetHandleId(GetTriggerUnit()),"BottleTargetItemId",GetItemTypeId(GetSpellTargetItem()))
call KX7(GetSpellTargetItem())
endif
endif
return false
endfunction
function FT9 takes unit WX7 returns nothing
call SetUnitState(WX7,UNIT_STATE_LIFE,GetUnitState(WX7,UNIT_STATE_MAX_LIFE))
call SetUnitState(WX7,UNIT_STATE_MANA,GetUnitState(WX7,UNIT_STATE_MAX_MANA))
endfunction
function FU9 takes unit WX7,real x,real y returns nothing
local integer I97=GetHandleId(GetOwningPlayer(WX7))
local unit DA8=O77(I97,"Kobold1")
local unit DB8=O77(I97,"Kobold2")
local unit DC8=O77(I97,"Kobold3")
local unit D38=O77(I97,"Kobold4")
set OB4=true
if DA8!=null then
call ReviveHero(DA8,x,y,true)
call FT9(DA8)
call DP8(DA8)
call SetUnitX(DA8,x)
call SetUnitY(DA8,y)
endif
if DB8!=null then
call ReviveHero(DB8,x,y,true)
call FT9(DB8)
call DP8(DB8)
call SetUnitX(DB8,x)
call SetUnitY(DB8,y)
endif
if DC8!=null then
call ReviveHero(DC8,x,y,true)
call FT9(DC8)
call DP8(DC8)
call SetUnitX(DC8,x)
call SetUnitY(DC8,y)
endif
if D38!=null then
call ReviveHero(D38,x,y,true)
call FT9(D38)
call DP8(D38)
call SetUnitX(D38,x)
call SetUnitY(D38,y)
endif
set DA8=null
set DB8=null
set DC8=null
set D38=null
endfunction
function FV9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit WX7=O77(I97,"Hero")
call FT9(WX7)
call DP8(WX7)
call ClearSelectionForPlayer(GetOwningPlayer(WX7))
call SelectUnitAddForPlayer(WX7,GetOwningPlayer(WX7))
if GetUnitTypeId(WX7)==1211117641 then
call FU9(WX7,GetUnitX(WX7),GetUnitY(WX7))
endif
call NM7(I97)
call OZ7(t)
set t=null
set WX7=null
return false
endfunction
function FW9 takes unit WX7,real x,real y returns nothing
local integer I97=GetHandleId(GetOwningPlayer(WX7))
local unit DA8=O77(I97,"Kobold1")
local unit DB8=O77(I97,"Kobold2")
local unit DC8=O77(I97,"Kobold3")
local unit D38=O77(I97,"Kobold4")
call DisableTrigger(ES)
if DA8!=null then
call SetUnitX(DA8,x)
call SetUnitY(DA8,y)
call KillUnit(DA8)
endif
if DB8!=null then
call SetUnitX(DB8,x)
call SetUnitY(DB8,y)
call KillUnit(DB8)
endif
if DC8!=null then
call SetUnitX(DC8,x)
call SetUnitY(DC8,y)
call KillUnit(DC8)
endif
if D38!=null then
call SetUnitX(D38,x)
call SetUnitY(D38,y)
call KillUnit(D38)
endif
call EnableTrigger(ES)
set DA8=null
set DB8=null
set DC8=null
set D38=null
endfunction
function FX9 takes nothing returns nothing
local unit WX7=GetTriggerUnit()
local real x
local real y
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call C27("AegisOff",GetPlayerId(GetOwningPlayer(WX7)))
if GetUnitTypeId(WX7)==1211117641 then
call FW9(WX7,GetUnitX(WX7),GetUnitY(WX7))
endif
set NW4=null
call TriggerRegisterTimerEvent(t,5.,false)
call TriggerAddCondition(t,Condition(function FV9))
call NT7(I97,"Hero",WX7)
call O37(WX7,"JustUseAegis",5)
set t=null
set WX7=null
endfunction
function FY9 takes nothing returns nothing
if KZ7(GetManipulatedItem())==X0 then
call FX9()
endif
endfunction
function Trig_MultipleNecro_Func001002001 takes nothing returns boolean
return(GetUnitTypeId(GetEnumUnit())==1848651848)
endfunction
function FZ9 takes nothing returns nothing
if GetWidgetLife(GetEnumItem())>0 and ED9(GetItemTypeId(GetEnumItem()))then
set HA4=GetEnumItem()
endif
endfunction
function FA9 takes nothing returns integer
local integer i=GetRandomInt(1,5)
loop
exitwhen i!=FI4
set i=GetRandomInt(1,5)
endloop
set FI4=i
return i
endfunction
function FB9 takes nothing returns boolean
local real x
local real y
local real x1
local real y1
local real x2
local real y2
local integer F69
local item FC9
local item F39
if GetRandomInt(1,2)==1 then
set x1=GetLocationX(F7)
set y1=GetLocationY(F7)
set x2=GetLocationX(G7)
set y2=GetLocationY(G7)
else
set x1=GetLocationX(G7)
set y1=GetLocationY(G7)
set x2=GetLocationX(F7)
set y2=GetLocationY(F7)
endif
set HA4=null
call EnumItemsInRect(MD,Condition(function TO7),function FZ9)
set FC9=HA4
set HA4=null
call EnumItemsInRect(FD,Condition(function TO7),function FZ9)
set F39=HA4
call RemoveItem(FC9)
call RemoveItem(F39)
if J40==false then
set F69=FA9()
if F69==1 then
call CreateItem(1227894839,x1,y1)
elseif F69==2 then
call CreateItem(1227894838,x1,y1)
elseif F69==3 then
call CreateItem(1227894859,x1,y1)
elseif F69==4 then
call CreateItem(1227894840,x1,y1)
elseif F69==5 then
call CreateItem(1227894858,x1,y1)
endif
set HA4=CreateItem(1227903050,x2,y2)
call SaveBoolean(L7,(GetHandleId(HA4)),(835),(false))
else
set J40=false
set HA4=CreateItem(1227903285,x1,y1)
call SaveBoolean(L7,(GetHandleId(HA4)),(835),(true))
set HA4=CreateItem(1227903285,x2,y2)
call SaveBoolean(L7,(GetHandleId(HA4)),(835),(true))
endif
return false
endfunction
function O2 takes integer Ou,real O3 returns nothing
set FI[gi]=Ou
set Fj[gi]=O3
set gi=gi+1
endfunction
function Wq takes nothing returns nothing
call O2(1752134252,30)
call O2(1870030190,$D2)
call O2(1835955060,45)
call O2(1227894834,60)
call O2(1667786099,60)
call O2(1885628790,100)
call O2(1227894833,60)
call O2(1650878578,50)
call O2(2004055908,$C)
call O2(1919248946,30)
call O2(1819177582,36)
call O2(1936749157,20)
call O2(1919906931,300)
call O2(1953265005,60)
call O2(1936093031,$F)
call O2(1835955046,28)
call O2(1937012592,65)
call O2(1935894636,70)
call O2(1919248945,28)
call O2(1803117164,20)
call O2(1919248949,40)
call O2(1667460452,26)
call O2(1835823988,32)
call O2(1684370275,30)
call O2(1227894851,25)
call O2(1227894865,45)
call O2(1227894868,30)
call O2(1868984943,85)
call O2(1227895120,$A)
call O2(1227895125,30)
call O2(1227960368,45)
call O2(1227960369,90)
endfunction
function FL9 takes nothing returns boolean
local integer i
if O64>0 and OC4[1]<1 then
set i=2
loop
exitwhen i>O64
set OC4[i-1]=OC4[i]
set O34[i-1]=O34[i]
set i=i+1
endloop
set O64=O64-1
endif
set i=1
loop
exitwhen i>O64
if OC4[i]>=1 then
set OC4[i]=OC4[i]-1
if OC4[i]<1 then
call SetItemDroppable(O34[i],true)
endif
endif
set i=i+1
endloop
return false
endfunction
function F19 takes item QU8 returns nothing
set O64=O64+1
set O34[O64]=QU8
set OC4[O64]=(LU[(KZ7(QU8))])
call SetItemDroppable(QU8,false)
endfunction
function R9O takes nothing returns nothing
call RemoveItem(GetManipulatedItem())
call XF7(GetTriggerUnit(),1093816629)
endfunction
function F09 takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())!=1697656901 and(LU[(KZ7(GetManipulatedItem()))])>0 and(GetUnitAbilityLevel(GetTriggerUnit(),1093681461)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1093817167)>0 or AS7(GetTriggerUnit())or GetPlayerSlotState(GetTriggerPlayer())==PLAYER_SLOT_STATE_LEFT)then
call F19(GetManipulatedItem())
endif
if GetItemTypeId(GetManipulatedItem())==ZU[GC]and GetUnitAbilityLevel(GetTriggerUnit(),1093816629)==0 and AS7(GetTriggerUnit())==false then
call R9O()
endif
if GetItemTypeId(GetManipulatedItem())==ZU[EZY]then
call RemoveItem(GetManipulatedItem())
endif
if GetItemTypeId(GetManipulatedItem())==ZU[QW]then
call RemoveItem(GetManipulatedItem())
endif
if GetItemTypeId(GetManipulatedItem())==ZU[R02]then
call RemoveItem(GetManipulatedItem())
endif
if GetItemTypeId(GetManipulatedItem())==ZU[R41]then
call RemoveItem(GetManipulatedItem())
endif
return false
endfunction
function F59 takes unit I_7 returns integer
local integer CN7
if I_7==null then
return-2
endif
set CN7=GetUnitTypeId(I_7)
if CN7==1211117620 then
return FW4
elseif CN7==1430466872 then
return FX4
elseif CN7==1215130471 then
return FB4
elseif CN7==1432580716 or CN7==1429221720 then
return GB4
elseif CN7==1211117640 then
return F34
elseif CN7==1430466609 then
return F64
elseif CN7==1332898670 then
return FL4
elseif CN7==1215128178 then
return F24
elseif CN7==1214931305 then
return F14
elseif CN7==1433168227 then
return FV4
elseif CN7==1164666213 then
return FU4
elseif CN7==1164799603 then
return FS4
elseif CN7==1162032439 then
return F04
elseif CN7==1429221445 then
return FA4
elseif CN7==1160785973 then
return FZ4
elseif CN7==1160786241 then
return F54
elseif CN7==1430467634 then
return FY4
elseif CN7==1315988077 then
return GK4
elseif CN7==1211117652 then
return G44
elseif CN7==1215723364 then
return G74
elseif CN7==1315070563 then
return G84
elseif CN7==1211117633 then
return GD4
elseif CN7==1432646245 then
return GE4
elseif CN7==1160786000 then
return GG4
elseif CN7==1429221451 then
return GH4
elseif CN7==1211117649 then
return GI4
elseif CN7==1211117653 then
return GJ4
elseif CN7==1429221446 then
return GM4
elseif CN7==1311786311 then
return GN4
elseif CN7==1162032181 then
return GO4
elseif CN7==1328558154 then
return GP4
elseif CN7==1332963428 then
return GQ4
elseif CN7==1432642913 then
return GR4
elseif CN7==1311781207 then
return GS4
elseif CN7==1211117643 then
return GT4
elseif CN7==1332766568 then
return GU4
elseif CN7==1333027688 then
return GV4
elseif CN7==1211117650 then
return FC4
elseif CN7==1211119433 then
return FC4
elseif CN7==1311780930 then
return GW4
elseif CN7==1160786243 then
return GY4
elseif CN7==1160785970 then
return GZ4
elseif CN7==1162032951 then
return GA4
elseif CN7==1429221456 then
return G34
elseif CN7==1164799855 then
return G64
elseif CN7==1211117646 then
return GL4
elseif CN7==1160786510 or CN7==1160786511 then
return G14
elseif CN7==1211117641 then
return G04
elseif CN7==1211117636 then
return G54
elseif CN7==1430468144 then
return G24
elseif CN7==1211122767 then
return R12
elseif CN7==1160786507 then
return R13
elseif CN7==1311787088 then
return R15
elseif CN7==1160786738 then
return R16
elseif CN7==1433105516 then
return R1A
elseif CN7==1311781199 or CN7==1311781171 or CN7==1311781172 or CN7==1311781173 then
return R1C
elseif CN7==1212363833 then
return R1H
elseif CN7==1311781185 then
return R1I
elseif CN7==1211117617 or CN7==1211122513 then
return R1J
elseif CN7==1160786520 then
return R1K
elseif CN7==1214345830 then
return R1L
elseif CN7==1332109682 then
return R1M
elseif CN7==1160786506 then
return R1N
elseif CN7==1316252014 then
return R1O
elseif CN7==1432510828 then
return R1P
elseif CN7=='O016' or CN7=='O017' then
return R21
elseif CN7=='N0MD' then
return R3B
elseif GetUnitPointValue(I_7)==500 then
return GX4
endif
return FR4
endfunction
function F29 takes unit I_7 returns integer
local integer CN7
if I_7==null then
return-2
endif
set CN7=GetUnitTypeId(I_7)
if CN7==1211117620 then
return 1093686352
elseif CN7==1430466872 then
return 1093686354
elseif CN7==1215130471 then
return 1093815124
elseif CN7==1432580716 or CN7==1429221720 then
return 0
elseif CN7==1211117640 then
return 1093686358
elseif CN7==1430466609 then
return 1093686360
elseif CN7==1332898670 then
return 1093686362
elseif CN7==1215128178 then
return 1093686577
elseif CN7==1214931305 then
return 1093686579
elseif CN7==1433168227 then
return 1093686581
elseif CN7==1164666213 then
return 1093686583
elseif CN7==1164799603 then
return 1093686585
elseif CN7==1162032439 then
return 1093686594
elseif CN7==1429221445 then
return 1093686596
elseif CN7==1160785973 then
return 1093686598
elseif CN7==1160786241 then
return 1093686600
elseif CN7==1430467634 then
return 1093686602
elseif CN7==1315988077 then
return 1093747269
elseif CN7==1211117652 then
return 1093747257
elseif CN7==1215723364 then
return 1093747265
elseif CN7==1315070563 then
return 1093747266
elseif CN7==1211117633 then
return 1093747541
elseif CN7==1432646245 then
return 1093747271
elseif CN7==1160786000 then
return 1093747274
elseif CN7==1429221451 then
return 1093747267
elseif CN7==1211117649 then
return 1093747273
elseif CN7==1211117653 then
return 1093747268
elseif CN7==1429221446 then
return 1093747545
elseif CN7==1311786311 then
return 1093747762
elseif CN7==1162032181 then
return 1093747761
elseif CN7==1328558154 then
return 1093747546
elseif CN7==1332963428 then
return 1093747760
elseif CN7==1432642913 then
return 1093747763
elseif CN7==1311781207 then
return 1093747764
elseif CN7==1211117643 then
return 1093748529
elseif CN7==1332766568 then
return 1093750100
elseif CN7==1333027688 then
return 1093750320
elseif CN7==1311780930 then
return 1093751123
elseif CN7==1160786243 then
return 1093752148
elseif CN7==1160785970 then
return 1093752149
elseif CN7==1162032951 then
return 1093752369
elseif CN7==1429221456 then
return 1093752409
elseif CN7==1164799855 then
return 1093752644
elseif CN7==1211117646 then
return 1093808467
elseif CN7==1160786510 or CN7==1160786511 then
return 1093808951
elseif CN7==1211117641 then
return 1093809989
elseif CN7==1211117636 then
return 1093810241
elseif CN7==1430468144 then
return 1093814600
elseif CN7==1211122767 then
return 1093817144
elseif CN7==1160786507 then
return 1093817155
elseif CN7==1311787088 then
return 1093817158
elseif CN7==1160786738 then
return 1093817162
elseif CN7==1433105516 then
return 1093817165
elseif CN7==1311781199 or CN7==1311781171 or CN7==1311781172 or CN7==1311781173 then
return 0
elseif CN7==1212363833 then
return 1093817171
elseif CN7==1311781185 then
return 1093817174
elseif CN7==1211117617 or CN7==1211122513 then
return 1093817392
elseif CN7==1160786520 then
return 1093817649
elseif CN7==1214345830 then
return 1093817651
elseif CN7==1332109682 then
return 1093817677
elseif CN7==1160786506 then
return 1093817680
elseif CN7==1316252014 then
return 1093817685
elseif CN7==1432510828 then
return 1093817690
elseif CN7=='O016' or CN7=='O017' then
return 'A1MW'
elseif CN7=='N0MD' then
return 'A2XR'
endif
return 0
endfunction
function F_9 takes item D88 returns boolean
local integer i=1
loop
exitwhen i>O64
if D88==O34[i]then
return true
endif
set i=i+1
endloop
return false
endfunction
function G49 takes unit I_7 returns location
return O8[GetUnitAbilityLevel(I_7,N8)]
endfunction
function G79 takes unit I_7 returns boolean
return(GetOwningPlayer(I_7)==Z7[0])or(GetOwningPlayer(I_7)==A7[0])
endfunction
function G89 takes nothing returns nothing
call SetUnitUserData(GetEnumUnit(),0)
call IssuePointOrderByIdLoc(GetEnumUnit(),$D000F,G49(GetEnumUnit()))
endfunction
function G99 takes nothing returns nothing
call IssueTargetOrderById(GetEnumUnit(),$D000F,D8)
call GroupAddUnit(R8,GetEnumUnit())
call SetUnitUserData(GetEnumUnit(),ST4)
endfunction
function GD9 takes nothing returns boolean
local integer id=GetUnitTypeId(GetFilterUnit())
if id==1700946284 or id==1697657398 or id==1970107511 or id==1966092370 then
return false
endif
if IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(D8))and(GetOwningPlayer(GetFilterUnit())==Z7[0]or GetOwningPlayer(GetFilterUnit())==A7[0])and GetUnitUserData(GetFilterUnit())==0 then
return true
endif
return false
endfunction
function GE9 takes nothing returns nothing
if GetUnitCurrentOrder(GetEnumUnit())==0 and IsUnitInRange(GetEnumUnit(),D8,GetUnitAcquireRange(GetEnumUnit()))==false then
call GroupRemoveUnit(R8,GetEnumUnit())
call SetUnitUserData(GetEnumUnit(),0)
call IssuePointOrderByIdLoc(GetEnumUnit(),$D000F,G49(GetEnumUnit()))
endif
endfunction
function GF9 takes nothing returns nothing
local integer OB7=GetHandleId(O77(GetHandleId(GetExpiredTimer()),"Source"))
local integer GG9=OM7(OB7,"Attacker")
local group GH9=OF7(OB7,"Defenders")
set SS4[GG9]=null
call ForGroup(GH9,function G89)
call GroupClear(GH9)
set GH9=null
endfunction
function GI9 takes unit WI7,unit S68 returns nothing
local integer OB7=GetHandleId(WI7)
local group GH9=OF7(OB7,"Defenders")
local integer GG9=OM7(OB7,"Attacker")
local unit GJ9=SS4[GG9]
local group g
if GJ9!=null and GJ9!=S68 then
call ForGroup(GH9,function G89)
call GroupClear(GH9)
endif
set SS4[GG9]=S68
set R8=GH9
set D8=S68
set ST4=GG9
call ForGroup(GH9,function GE9)
set g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(S68),GetUnitY(S68),500,Condition(function GD9))
call ForGroup(g,function G99)
call WR7(g)
call TimerStart(OD7(OB7,"DefendTimer"),2,false,function GF9)
set g=null
set GJ9=null
set GH9=null
endfunction
function GK9 takes integer U57 returns boolean
return U57==1162032951 or U57==1160785972 or U57==1315074670 or U57==1429221456 or U57==1164799855 or U57==1311781185 or U57==1211117649
endfunction
function GM9 takes nothing returns boolean
local unit WI7=GetAttacker()
local unit m5=GetTriggerUnit()
local integer X5=GetIssuedOrderId()
local integer GN9
local integer i1
call I47(m5,WI7)
call IE7(WI7,m5)
if G79(WI7)==false then
set GN9=OM7(GetHandleId(m5),"Attacker")
if SS4[GN9]==null or SS4[GN9]==m5 or XH7(SS4[GN9])then
if GN9!=0 then
if((GetPlayerController(GetOwningPlayer(GetAttacker()))!=MAP_CONTROL_COMPUTER)or(not IsUnitType(GetAttacker(),UNIT_TYPE_HERO)))then
call GI9(GetTriggerUnit(),GetAttacker())
else
set i1=GetUnitTypeId(GetAttacker())
if((i1!=1162032951)and(i1!=1160785972)and(i1!=1430468144)and(i1!=1315074670)and(i1!=1429221456)and(i1!=1164799855)and(i1!=1311781185)and(i1!=1211117649))then
call GI9(GetTriggerUnit(),GetAttacker())
else
call TriggerSleepAction(.01)
if(not GZ[304+GetPlayerId(GetOwningPlayer(GetAttacker()))])then
call GI9(GetTriggerUnit(),GetAttacker())
endif
endif
endif
if(not IsUnitType(WI7,UNIT_TYPE_HERO))or(GetPlayerController(GetOwningPlayer(WI7))!=MAP_CONTROL_COMPUTER)or(not GK9(GetUnitTypeId(WI7)))or(not GZ[304+GetPlayerId(GetOwningPlayer(WI7))])then
call GI9(GetTriggerUnit(),GetAttacker())
endif
endif
endif
endif
set WI7=null
set m5=null
return false
endfunction
function GO9 takes nothing returns boolean
local unit WI7=GetTriggerUnit()
local unit m5=GetOrderTargetUnit()
local integer X5=GetIssuedOrderId()
local integer GP9
if IsUnitType(m5,UNIT_TYPE_HERO) and IsUnitIllusion(m5)==false and(X5==$D000F or X5==$D0003)and IsUnitEnemy(m5,GetOwningPlayer(WI7))and IsUnitVisible(WI7,GetOwningPlayer(m5))then
set GP9=OM7(GetHandleId(m5),"Attacker")
if SS4[GP9]==null or SS4[GP9]==m5 or XH7(SS4[GP9])then
if GP9!=0 then
call GI9(m5,WI7)
endif
endif
endif
set WI7=null
set m5=null
return false
endfunction
function Wy takes unit WI7 returns boolean
return OO7(GetHandleId(WI7),"HeroAIManager")
endfunction
function GQ9 takes unit WI7 returns nothing
local group g
local trigger t
local timer tm
local integer OB7=GetHandleId(WI7)
set l2=l2+1
call NS7(OB7,"HeroAIManager",true)
call NP7(OB7,"Attacker",l2)
set g=WS7()
call NB7(OB7,"Defenders",g)
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(t,Condition(function GO9))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function GM9))
set tm=CreateTimer()
call NC7(GetHandleId(WI7),"DefendTimer",tm)
call NT7(GetHandleId(tm),"Source",WI7)
set g=null
set t=null
set tm=null
endfunction
function GR9 takes nothing returns nothing
local unit S4=GetTriggerUnit()
local unit m5=rw[GetUnitUserData(S4)]
call SetUnitPosition(S4,GetUnitX(S4),GetUnitY(S4))
if m5!=null and XH7(m5)==false and IsUnitVisible(m5,GetOwningPlayer(m5))then
call IssueTargetOrderById(S4,$D000F,m5)
else
call DisableTrigger(GetTriggeringTrigger())
call IssuePointOrderByIdLoc(S4,$D000F,(O8[GetUnitAbilityLevel((S4),N8)]))
call EnableTrigger(GetTriggeringTrigger())
endif
set S4=null
set m5=null
endfunction
function GS9 takes nothing returns boolean
if G79(GetTriggerUnit())then
call GR9()
endif
return false
endfunction
function GT9 takes nothing returns nothing
local unit S4=GetTriggerUnit()
local unit m5=rw[GetUnitUserData(S4)]
call SetUnitPosition(S4,GetUnitX(S4),GetUnitY(S4))
if m5!=null and XH7(m5)==false and IsUnitVisible(m5,GetOwningPlayer(m5))then
call IssueTargetOrderById(S4,$D000F,m5)
else
call DisableTrigger(GetTriggeringTrigger())
call IssuePointOrderByIdLoc(S4,$D000F,(O8[GetUnitAbilityLevel((S4),N8)]))
call EnableTrigger(GetTriggeringTrigger())
endif
set S4=null
set m5=null
endfunction
function GU9 takes nothing returns boolean
if GetIssuedOrderId()==$D0012 then
call GT9()
endif
return false
endfunction
function GV9 takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==Z7[0]then
if IsUnitFogged(GetAttacker(),Z7[1])or IsUnitFogged(GetAttacker(),A7[1])then
call ZJ7(CreateFogModifierRadius(Z7[1],FOG_OF_WAR_VISIBLE,GetUnitX(GetAttacker()),GetUnitY(GetAttacker()),$80,true,false),1)
endif
elseif GetOwningPlayer(GetTriggerUnit())==A7[0]then
if IsUnitFogged(GetAttacker(),Z7[1])or IsUnitFogged(GetAttacker(),A7[1])then
call ZJ7(CreateFogModifierRadius(A7[1],FOG_OF_WAR_VISIBLE,GetUnitX(GetAttacker()),GetUnitY(GetAttacker()),$80,true,false),1)
endif
endif
return false
endfunction
function GW9 takes nothing returns boolean
local trigger t
local group g
local unit u
set Ew=CreateRegion()
call RegionAddRect(Ew,HD)
call RegionAddRect(Ew,GD)
if V8 then
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,Z7[0],EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER,Condition(function TO7))
call TriggerRegisterPlayerUnitEvent(t,A7[0],EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER,Condition(function TO7))
call TriggerAddCondition(t,Condition(function GU9))
set t=CreateTrigger()
set g=WS7()
call GroupEnumUnitsOfPlayer(g,Z7[0],Condition(function TO7))
loop
set u=FirstOfGroup(g)
exitwhen u==null
call GroupRemoveUnit(g,u)
if GetUnitAcquireRange(u)!=0 then
call TriggerRegisterUnitInRange(t,u,600,Condition(function TO7))
endif
endloop
call WR7(g)
set g=WS7()
call GroupEnumUnitsOfPlayer(g,A7[0],Condition(function TO7))
loop
set u=FirstOfGroup(g)
exitwhen u==null
call GroupRemoveUnit(g,u)
if GetUnitAcquireRange(u)!=0 and IsUnitType(u,UNIT_TYPE_STRUCTURE)then
call TriggerRegisterUnitInRange(t,u,600,Condition(function TO7))
endif
endloop
call WR7(g)
call TriggerAddCondition(t,Condition(function GS9))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function GV9))
endif
call OZ7(GetTriggeringTrigger())
set u=null
set g=null
set t=null
return false
endfunction
function GX9 takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(not IsUnitIllusion(GetTriggerUnit()))and(not Wy(GetTriggerUnit()))and GetUnitTypeId(GetTriggerUnit())!=1211117645 and GetUnitTypeId(GetTriggerUnit())!=1311788365 and GetUnitTypeId(GetTriggerUnit())!=1211117657 and GetUnitTypeId(GetTriggerUnit())!=1211119431 and GetUnitTypeId(GetTriggerUnit())!=1211122232 and(not A04))!=null
endfunction
function GY9 takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==Z7[0]then
call SetUnitAbilityLevel(GetTriggerUnit(),N8,5)
if rw[GetUnitUserData(GetTriggerUnit())]==null then
call SetUnitUserData(GetTriggerUnit(),0)
call IssuePointOrderByIdLoc(GetTriggerUnit(),$D000F,(O8[GetUnitAbilityLevel((GetTriggerUnit()),N8)]))
endif
elseif GetOwningPlayer(GetTriggerUnit())==A7[0]then
call SetUnitAbilityLevel(GetTriggerUnit(),N8,1)
if rw[GetUnitUserData(GetTriggerUnit())]==null then
call SetUnitUserData(GetTriggerUnit(),0)
call IssuePointOrderByIdLoc(GetTriggerUnit(),$D000F,(O8[GetUnitAbilityLevel((GetTriggerUnit()),N8)]))
endif
endif
return false
endfunction
function GZ9 takes unit S4 returns nothing
local integer i=0
loop
exitwhen(i==16)
if IsUnitAlly(S4,Player(i))then
call UnitShareVision(S4,Player(i),true)
endif
set i=i+1
endloop
endfunction
function GA9 takes nothing returns nothing
call GZ9(GetEnumUnit())
endfunction
function GB9 takes nothing returns nothing
local integer x
local group g
set x=1
loop
exitwhen x>5
call SetPlayerAlliance(Z7[0],Z7[x],ConvertAllianceType(5),false)
call SetPlayerAlliance(A7[0],A7[x],ConvertAllianceType(5),false)
set x=x+1
endloop
set g=WS7()
call GroupEnumUnitsOfPlayer(g,Z7[0],Condition(function TO7))
call ForGroup(g,function GA9)
call WR7(g)
set g=WS7()
call GroupEnumUnitsOfPlayer(g,A7[0],Condition(function TO7))
call ForGroup(g,function GA9)
call WR7(g)
set g=null
endfunction
function GC9 takes nothing returns nothing
local integer x
set x=0
loop
exitwhen x>5
call SetPlayerAlliance(Z7[x],B7,ConvertAllianceType(0),false)
call SetPlayerAlliance(Z7[x],B7,ConvertAllianceType(1),false)
call SetPlayerAlliance(Z7[x],B7,ConvertAllianceType(2),false)
call SetPlayerAlliance(Z7[x],B7,ConvertAllianceType(3),false)
call SetPlayerAlliance(Z7[x],B7,ConvertAllianceType(4),false)
call SetPlayerAlliance(Z7[x],B7,ConvertAllianceType(5),false)
call SetPlayerAlliance(Z7[x],B7,ConvertAllianceType(6),false)
call SetPlayerAlliance(Z7[x],B7,ConvertAllianceType(7),false)
call SetPlayerAlliance(A7[x],B7,ConvertAllianceType(0),false)
call SetPlayerAlliance(A7[x],B7,ConvertAllianceType(1),false)
call SetPlayerAlliance(A7[x],B7,ConvertAllianceType(2),false)
call SetPlayerAlliance(A7[x],B7,ConvertAllianceType(3),false)
call SetPlayerAlliance(A7[x],B7,ConvertAllianceType(4),false)
call SetPlayerAlliance(A7[x],B7,ConvertAllianceType(5),false)
call SetPlayerAlliance(A7[x],B7,ConvertAllianceType(6),false)
call SetPlayerAlliance(A7[x],B7,ConvertAllianceType(7),false)
call SetPlayerAlliance(B7,Z7[x],ConvertAllianceType(0),false)
call SetPlayerAlliance(B7,Z7[x],ConvertAllianceType(1),false)
call SetPlayerAlliance(B7,Z7[x],ConvertAllianceType(2),false)
call SetPlayerAlliance(B7,Z7[x],ConvertAllianceType(3),false)
call SetPlayerAlliance(B7,Z7[x],ConvertAllianceType(4),false)
call SetPlayerAlliance(B7,Z7[x],ConvertAllianceType(5),false)
call SetPlayerAlliance(B7,Z7[x],ConvertAllianceType(6),false)
call SetPlayerAlliance(B7,Z7[x],ConvertAllianceType(7),false)
call SetPlayerAlliance(B7,A7[x],ConvertAllianceType(0),false)
call SetPlayerAlliance(B7,A7[x],ConvertAllianceType(1),false)
call SetPlayerAlliance(B7,A7[x],ConvertAllianceType(2),false)
call SetPlayerAlliance(B7,A7[x],ConvertAllianceType(3),false)
call SetPlayerAlliance(B7,A7[x],ConvertAllianceType(4),false)
call SetPlayerAlliance(B7,A7[x],ConvertAllianceType(5),false)
call SetPlayerAlliance(B7,A7[x],ConvertAllianceType(6),false)
call SetPlayerAlliance(B7,A7[x],ConvertAllianceType(7),false)
set x=x+1
endloop
endfunction
function G39 takes nothing returns boolean
return G79(GetTriggerUnit())
endfunction
function G69 takes nothing returns nothing
call GZ9(GetTriggerUnit())
endfunction
function GL9 takes nothing returns nothing
local trigger t
if not V8 then
return
endif
call GB9()
call GC9()
set t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,GetWorldBounds())
call TriggerAddCondition(t,Condition(function G39))
call TriggerAddAction(t,function G69)
set t=null
endfunction
function G19 takes nothing returns nothing
call RemoveUnit(O77(GetHandleId(GetTriggerUnit()),"Locust"))
endfunction
function G09 takes nothing returns nothing
local group g
local unit S4
local unit G59
local trigger t
local integer i
set t=CreateTrigger()
call TriggerAddAction(t,function G19)
set g=WS7()
call GroupEnumUnitsOfPlayer(g,Z7[0],Condition(function TO7))
loop
set S4=FirstOfGroup(g)
exitwhen S4==null
call GroupRemoveUnit(g,S4)
if GetUnitAbilityLevel(S4,1097102451)>0 or GetUnitAbilityLevel(S4,1098150517)>0 then
call TriggerRegisterUnitEvent(t,S4,EVENT_UNIT_DEATH)
set G59=CreateUnit(Z7[1],(1966092354),-5000,-5100,0)
call SetUnitScale(G59,0,0,0)
call SetUnitPathing(G59,false)
call SetUnitInvulnerable(G59,true)
call SetUnitX(G59,GetUnitX(S4))
call SetUnitY(G59,GetUnitY(S4))
call NT7(GetHandleId(S4),"Locust",G59)
endif
endloop
call WR7(g)
set g=WS7()
call GroupEnumUnitsOfPlayer(g,A7[0],Condition(function TO7))
loop
set S4=FirstOfGroup(g)
exitwhen S4==null
call GroupRemoveUnit(g,S4)
if GetUnitAbilityLevel(S4,1097102451)>0 or GetUnitAbilityLevel(S4,1098150517)>0 then
call TriggerRegisterUnitEvent(t,S4,EVENT_UNIT_DEATH)
set G59=CreateUnit(A7[1],(1966092354),$D48,4400,0)
call SetUnitScale(G59,0,0,0)
call SetUnitPathing(G59,false)
call SetUnitInvulnerable(G59,true)
call SetUnitX(G59,GetUnitX(S4))
call SetUnitY(G59,GetUnitY(S4))
call NT7(GetHandleId(S4),"Locust",G59)
endif
endloop
call WR7(g)
set t=null
set G59=null
set S4=null
set g=null
endfunction
function G29 takes nothing returns nothing
if V8 then
set NK4=CreateTrigger()
call TriggerRegisterTimerEvent(NK4,1.,true)
call TriggerAddAction(NK4,function UO8)
endif
endfunction
function G_9 takes nothing returns boolean
call OZ7(GetTriggeringTrigger())
call TriggerEvaluate(MS)
return false
endfunction
function H49 takes nothing returns boolean
local real r=TimerGetRemaining(Q84)
local real Y48=r
local integer D5=R2I(Y48)
local integer YQ8=D5/ 60-1/ 2
local integer YR8=ModuloInteger(D5,60)
local trigger t
if r==0 then
set X14=true
call C27("GameStart",1)
call YP8(YQ8,YR8,true)
set N54=true
set M_4=TimerGetElapsed(W)
call OZ7(GetTriggeringTrigger())
set IW4=Rect(-7040,-7680,7040,7168)
call SetFloatGameState(GAME_STATE_TIME_OF_DAY,6.)
call SuspendTimeOfDay(false)
call SetTimeOfDayScale(.625)
if A4==false then
if DT then
call TriggerRegisterTimerEvent(H04,120.,true)
else
call TriggerRegisterTimerEvent(H04,120.,true)
endif
call TriggerEvaluate(H04)
endif
call TriggerRegisterTimerEvent(MS,60.,true)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,30.,false)
call TriggerAddCondition(t,Condition(function G_9))
set t=null
call TriggerRegisterTimerEventPeriodic(JS,30.)
call TriggerExecute(JS)
call TriggerRegisterTimerEventPeriodic(KS,450.)
call TriggerRegisterTimerEventSingle(GS,2699.)
call TriggerRegisterTimerEventSingle(HS,999.)
call TriggerRegisterTimerEventSingle(HS,1999.)
call TriggerRegisterTimerEventSingle(HS,2999.)
call TriggerRegisterTimerEvent(NZ4,300.,true)
call TriggerRegisterTimerEvent(OH4,300.,true)
call TriggerRegisterTimerEvent(U9,30.,true)
call TriggerEvaluate(U9)
if C4 then
call TriggerRegisterTimerEvent(OS,600.,true)
endif
elseif r==7 then
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,30.,true)
call TriggerAddCondition(t,Condition(function L48))
elseif Y48<$C and QE4==false then
set QE4=true
call PlaySoundBJ(ZO)
call YP8(YQ8,YR8,true)
elseif Y48==20 then
if GetRandomInt(0,$A)<6 then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,6,"|c006699CC"+GetObjectName(1848659015)+"|r")
endif
elseif Y48==30 then
else
call YP8(YQ8,YR8,true)
endif
return false
endfunction
function H79 takes nothing returns nothing
local trigger t
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerAddCondition(t,Condition(function H49))
set Q84=CreateTimer()
call TimerStart(Q84,QD4+1,false,null)
set t=null
set N44=TimerGetElapsed(W)+1
endfunction
function H89 takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())!=Z7[0]and GetOwningPlayer(GetTriggerUnit())!=A7[0]then
set PT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=PT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]+1
if GetIssuedOrderId()!=851983then
set nb[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=(TimerGetElapsed(W))
set QT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
endif
if(GetIssuedOrderId()==851983or GetIssuedOrderId()==$D0003)and GetOrderTargetItem()!=null then
if GetIssuedOrderId()==851983or(GetIssuedOrderId()==$D0003 and OO7(GetHandleId(GetItemPlayer(GetOrderTargetItem())),"DisableHelp"))then
if GetItemPlayer(GetOrderTargetItem())!=GetOwningPlayer(GetTriggerUnit())and IsPointInRegion(Ew,GetItemX(GetOrderTargetItem()),GetItemY(GetOrderTargetItem())) then
call DisableTrigger(GetTriggeringTrigger())
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),(GetObjectName((1848657719))))
call EnableTrigger(GetTriggeringTrigger())
endif
endif
endif
endif
return false
endfunction
function H99 takes nothing returns nothing
local string HD9=StringCase(GetEventPlayerChatString(),false)
local boolean HE9=HD9=="-random" or HD9=="-random int" or HD9=="-random agi" or HD9=="-random str"
local boolean HF9=HD9=="-repick"
local boolean HG9=HD9=="-gameinfo"
local boolean HH9=SubString(HD9,0,5)=="-swap"
local boolean HI9=HD9=="-recreate"
local boolean HJ9=HD9=="-unstuck"
local boolean HK9=HD9=="-matchup" or HD9=="-ma"
local boolean HM9=HD9=="-movespeed" or HD9=="-ms"
local boolean HN9=HD9=="-msa"
local boolean HO9=HD9=="-disablehelp"
local boolean HP9=HD9=="-enablehelp"
local boolean HQ9=HD9=="-creepstats" or HD9=="-cs"
local boolean HR9=HD9=="-cson" or HD9=="-csoff"
local boolean HS9=HD9=="-hidemsg"
local boolean HT9=HD9=="-showmsg"
local boolean HU9=HD9=="-weather snow" or HD9=="-weather rain" or HD9=="-weather off" or HD9=="-weather random" or HD9=="-weather wind" or HD9=="-weather moonlight"
local boolean HV9=HD9=="-showdeny" or HD9=="-hidedeny"
local boolean HW9=HD9=="-denyinfo" or HD9=="-di"
local boolean HX9=HD9=="-don" or HD9=="-deathon" or HD9=="-doff" or HD9=="-deathoff"
local boolean HY9=SubString(HD9,0,5)=="-roll" and HD9!="-rollhero"
local boolean HZ9=HD9=="-hhn" or HD9=="-hideheronames"
local boolean HA9=HD9=="-mute"
local boolean HB9=HD9=="-apm"
local boolean HC9=HD9=="-clear"
local boolean H39=HD9=="-courier"
local boolean H69=HD9=="-invokelist" or HD9=="-il"
local boolean bListCommand=HD9=="-list"
local boolean HL9=HD9=="-rolloff"
local boolean H19=HD9=="-rollon"
local boolean H09=SubString(HD9,0,6)=="-music"
local boolean H59=SubString(HD9,0,6)=="-water"
local boolean H29=SubString(HD9,0,6)=="-quote"
local boolean H_9=SubString(HD9,0,3)=="-cm"
local boolean I49=SubString(HD9,0,9)=="-itemswap"
local boolean I79=HD9=="-bonus"
local boolean I89=HD9=="-rollhero" or HD9=="-rh"
local boolean I99=SubString(HD9,0,9)=="-rickroll"
local boolean NoSwitch=HD9=="-noswitch"
local boolean Switch=SubString(HD9,0,7)=="-switch"or HD9=="-ok"or HD9=="-no"
local boolean Terrain=HD9=="-terrain" or HD9=="-terrain default" or HD9=="-terrain snow"
local boolean ID9=HD9=="-tips"
local boolean IE9=HD9=="-ii" or HD9=="-iteminfo"
local boolean IF9=HD9=="-center" or HD9=="-centeroff" or HD9=="-c" or HD9=="-co"
local boolean Unlock=HD9=="-unlock"
local boolean IG9=HD9=="-disableselection"or HD9=="-ds"
local boolean IH9=HD9=="-enableselection"or HD9=="-es"
local boolean II9=HD9=="-sleep"
local boolean IJ9=HD9=="-calm"
local boolean R7e=HD9=="-st"
local boolean NoHat=HD9=="-nosanta"
local boolean IK9=SubString(HD9,0,$A)=="-aiunstuck"
local boolean IM9=StringLength(HD9)>3 and SubString(HD9,0,3)=="-cs"
local boolean IN9=StringLength(HD9)>3 and SubString(HD9,0,3)=="-ms"
local boolean IO9=HD9=="-aid"
local boolean IP9=HD9=="-override"
local boolean IQ9=HD9=="-formless"
local boolean IR9=HD9=="-bastion"
local boolean IS9=HD9=="-aimsg"
local boolean IT9=HD9=="-aimsgmiss"
local boolean IU9=(HD9=="-aiboard")
local boolean IV9=HD9=="-aiglyph"
local boolean IW9=((HD9=="-aishowde")or(HD9=="-aishowdg")or(HD9=="-aishowdedg")or(HD9=="-aishowdynamic"))
call XL7("IX9",HE9)
call XL7("IY9",HF9)
call XL7("IZ9",HG9)
call XL7("IA9",HH9)
call XL7("IB9",HI9)
call XL7("IC9",HJ9)
call XL7("I39",HK9)
call XL7("I69",HM9)
call XL7("IL9",HN9)
call XL7("I19",HO9)
call XL7("I09",HP9)
call XL7("I59",HQ9)
call XL7("I29",HR9)
call XL7("I_9",HS9)
call XL7("J49",HT9)
call XL7("J79",HU9)
call XL7("J89",HV9)
call XL7("J99",HW9)
call XL7("JD9",HX9)
call XL7("JE9",HY9)
call XL7("JF9",HZ9)
call XL7("JG9",HA9)
call XL7("JH9",HB9)
call XL7("JI9",HC9)
call XL7("JJ9",H39)
call XL7("JK9",H69)
call XL7("JM9",HL9)
call XL7("JN9",H19)
call XL7("JO9",H09)
call XL7("JP9",H59)
call XL7("JQ9",H29)
call XL7("JR9",H_9)
call XL7("JS9",I49)
call XL7("JT9",I79)
call XL7("JU9",I89)
call XL7("JV9",I99)
call XL7("JW9",IE9)
call XL7("JX9",ID9)
call XL7("JY9",IF9)
call XL7("JZ9",IG9)
call XL7("JA9",IH9)
call XL7("JB9",II9)
call XL7("JC9",R7e)
call XL7("J39",IJ9)
call XL7("J69",IM9)
call XL7("JL9",IN9)
call XL7("J19",IO9)
call XL7("J09",IK9)
call XL7("J59",IP9)
call XL7("J29",IQ9)
call XL7("J_9",IR9)
call XL7("K49",IS9)
call XL7("K79",IT9)
call XL7("K89",IU9)
call XL7("K99",IV9)
call XL7("KD9",IW9)
endfunction
function K49 takes nothing returns nothing
local integer O5=GetPlayerId(GetTriggerPlayer())
set B24[O5]=(not B24[O5])
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,"AI信息系统已经"+JK7(B24[O5],GetObjectName(1496403790),GetObjectName(1498369862)))
endfunction
function K79 takes nothing returns nothing
local integer O5=GetPlayerId(GetTriggerPlayer())
set B24[16+O5]=(not B24[16+O5])
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,"AI报告miss英雄系统已经"+JK7(B24[16+O5],GetObjectName(1496403790),GetObjectName(1498369862)))
if(B24[16+O5])and(not B24[O5])then
call K49()
endif
endfunction
function KE9 takes player p returns nothing
local integer O5=GetPlayerId(p)
if p==QT4 then
set LC4=not LC4
call DisplayTimedTextToForce(X7,10.,"AI自动防御符文系统已经"+JK7(LC4,GetObjectName(1496403790),GetObjectName(1498369862)))
if not LC4 then
call DisplayTimedTextToForce(X7,10.,GetObjectName(1496332080))
endif
call DisplayTimedTextToForce(X7,10.," ")
elseif p==QU4 then
set L34=not L34
call DisplayTimedTextToForce(Y7,10.,"AI自动防御符文系统已经"+JK7(L34,GetObjectName(1496403790),GetObjectName(1498369862)))
if not L34 then
call DisplayTimedTextToForce(Y7,10.,GetObjectName(1496332080))
endif
call DisplayTimedTextToForce(Y7,10.," ")
endif
set p=null
endfunction
function K99 takes nothing returns nothing
call KE9(GetTriggerPlayer())
endfunction
function JV9 takes nothing returns nothing
local integer a=S2I(SubString(GetEventPlayerChatString(),$A,StringLength(GetEventPlayerChatString())))
local integer D5=GetPlayerId(GetTriggerPlayer())
set Rw[D5]=Rw[D5]+1
if Rw[D5]>$A then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,$A,(GetObjectName((1848656977))))
return
endif
if a<1 or a>8 then
set a=GetRandomInt(1,8)
endif
if a==1 then
call VV7(L8,5,Q[GetPlayerId(GetTriggerPlayer())]+(KZ4[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna give you up")
elseif a==2 then
call VV7(L8,5,Q[GetPlayerId(GetTriggerPlayer())]+(KZ4[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna let you down")
elseif a==3 then
call VV7(L8,5,Q[GetPlayerId(GetTriggerPlayer())]+(KZ4[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna run around")
elseif a==4 then
call VV7(L8,5,Q[GetPlayerId(GetTriggerPlayer())]+(KZ4[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna desert you")
elseif a==5 then
call VV7(L8,5,Q[GetPlayerId(GetTriggerPlayer())]+(KZ4[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna make you cry")
elseif a==6 then
call VV7(L8,5,Q[GetPlayerId(GetTriggerPlayer())]+(KZ4[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna say goodbye")
elseif a==7 then
call VV7(L8,5,Q[GetPlayerId(GetTriggerPlayer())]+(KZ4[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna tell a lie")
elseif a==8 then
call VV7(L8,5,Q[GetPlayerId(GetTriggerPlayer())]+(KZ4[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna hurt you")
endif
endfunction
function KF9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
set t=null
return false
endfunction
function JB9 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=M7[GetPlayerId(GetTriggerPlayer())]
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Sleep\\SleepTarget.mdl",ZX7,"overhead")))
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_ISSUED_ORDER)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerAddCondition(t,Condition(function KF9))
call SetUnitAnimation(ZX7,"sleep")
set t=null
set ZX7=null
endfunction
function J39 takes nothing returns nothing
call SetUnitAnimationByIndex(M7[GetPlayerId(GetTriggerPlayer())],23)
endfunction
function JX9 takes nothing returns nothing
if RT[GetPlayerId(GetTriggerPlayer())]==false then
set RT[GetPlayerId(GetTriggerPlayer())]=true
if(GetObjectName((1848657992)))=="Language: English" then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,$A,"你已经激活了小贴士系统。")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,$A,"请记住这些只是介绍性的建议，并不是该英雄的唯一玩法。")
endif
if M7[GetPlayerId(GetTriggerPlayer())]!=null then
call CG7(GetTriggerPlayer(),GetUnitPointValue(M7[GetPlayerId(GetTriggerPlayer())]))
endif
endif
endfunction
function KG9 takes nothing returns boolean
return( not(F9==false))and( not(W4[GetPlayerId(lx)]))and( not(P==false))and( not(M7[GetPlayerId(lx)]!=null and O9==false))and( not(I[GetPlayerId(lx)]))and( not(P9[GetPlayerId(lx)]and O9==false))and( not(O9 and eo[GetPlayerId(lx)]))
endfunction
function KH9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local player p=O97(OB7,"p")
local string KI9=OP7(OB7,"string")
set lx=p
if KG9()then
set W4[GetPlayerId(p)]=true
if KI9=="-random int" then
call VG7(p)
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-100)
elseif KI9=="-random str" then
call VK7(p)
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-100)
elseif KI9=="-random agi" then
call VM7(p)
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-100)
else
call VN7(p)
endif
else
call DisplayTimedTextToPlayer(p,0,E9,$A,(GetObjectName((1848653625))))
endif
set t=null
set p=null
return false
endfunction
function IX9 takes nothing returns nothing
local player j8=GetTriggerPlayer()
local trigger t
set lx=j8
if KG9()and oo[GetPlayerId(j8)]==false then
set oo[GetPlayerId(j8)]=true
call US7(j8)
call DisplayTimedTextToPlayer(j8,0,E9,$A,(GetObjectName((1848653633))))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,6.,false)
call TriggerAddCondition(t,Condition(function KH9))
call NZ7(GetHandleId(t),"p",j8)
call NR7(GetHandleId(t),"string",StringCase(GetEventPlayerChatString(),false))
endif
set t=null
endfunction
function KJ9 takes nothing returns boolean
local unit WI7=M7[GetPlayerId(GetTriggerPlayer())]
if PJ4 then
call X37(GetTriggerPlayer(),(GetObjectName((1848652592))))
return false
endif
if G9==false then
if VT==false and A8==false and O04==false and O54==false and P74==false and P84==false and O9==false and W8==false then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,"-repick "+(GetObjectName((1848653122))))
endif
return false
endif
if(I[GetPlayerId(GetTriggerPlayer())])then
return false
endif
if(M7[GetPlayerId(GetTriggerPlayer())]==null)then
return false
endif
if D4 or A8 or O9 or RZ4 then
return false
endif
if(T9)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,(GetObjectName((1848653104))))
return false
endif
if(GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)<X4)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,(GetObjectName((1848653113))))
return false
endif
if GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)<350 and P4 or Y8 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,(GetObjectName((1848653141))))
return false
endif
if GetUnitState(WI7,UNIT_STATE_MANA)!=GetUnitState(WI7,UNIT_STATE_MAX_MANA)or GetUnitState(WI7,UNIT_STATE_LIFE)!=GetUnitState(WI7,UNIT_STATE_MAX_LIFE)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,(GetObjectName((1848653130))))
return false
endif
return true
endfunction
function KK9 takes nothing returns nothing
if(IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO))then
if(GetUnitTypeId(GetEnumUnit())==1429221430)then
call ExecuteFunc("WK8")
elseif GetUnitTypeId(GetEnumUnit())==1429221432 or GetUnitTypeId(GetEnumUnit())==1160786229 then
set IT4=GetEnumUnit()
call ExecuteFunc("XF8")
endif
call VV7(M4(GetTriggerPlayer()),10.,(GetObjectName((1848653132)))+" "+W77(GetEnumUnit())+".")
endif
if(GetUnitTypeId(GetEnumUnit())==1848651828)then
call RemoveUnit(GetEnumUnit())
endif
if(GetUnitTypeId(GetEnumUnit())==1848652088)then
call RemoveUnit(GetEnumUnit())
endif
if(GetUnitTypeId(GetEnumUnit())==1848652099)then
call RemoveUnit(GetEnumUnit())
endif
if(GetUnitTypeId(GetEnumUnit())==1848652103)then
call RemoveUnit(GetEnumUnit())
endif
endfunction
function KM9 takes nothing returns nothing
local player j8=GetTriggerPlayer()
local group LQ7=WS7()
local integer VH7
local integer VI7
local location VJ7
local integer UB7
local integer T8
local integer U8
local unit KN9
local location LV7=GetRectCenter(pr)
local location LW7=GetRectCenter(qr)
set bj_groupEnumOwningPlayer=j8
call GroupEnumUnitsInRect(LQ7,GetWorldBounds(),filterGetUnitsInRectOfPlayer)
if(TV7(j8))then
set VH7=KL4
set VI7=K14
set VJ7=GetRectCenter(HD)
else
set VH7=K04
set VI7=K54
set VJ7=GetRectCenter(GD)
endif
if E4 then
if(GetRandomInt(1,2)==1)then
set VH7=KL4
set VI7=K14
else
set VH7=K04
set VI7=K54
endif
endif
if P4 or Y8 then
set X4=100
endif
set KN9=O77(GetHandleId(GetTriggerPlayer()),"ChargeUnit")
if KN9!=null and GetUnitTypeId(KN9)==1697656899 then
call RemoveUnit(KN9)
set KN9=null
endif
call AdjustPlayerStateBJ(-1*X4,j8,PLAYER_STATE_RESOURCE_GOLD)
set I[GetPlayerId(j8)]=true
call ForGroup(LQ7,function KK9)
call YE7(M7[GetPlayerId(j8)])
set M7[GetPlayerId(GetTriggerPlayer())]=null
if P4 or Y8 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60,(GetObjectName((1311782233))))
if P4 then
set T8=KL4
set U8=K54
endif
if TV7(j8)then
if Y8 then
set T8=KL4
set U8=K14
call CreateUnitAtLoc(j8,1848651843,LV7,bj_UNIT_FACING)
else
call CreateUnitAtLoc(j8,1848651843,LV7,bj_UNIT_FACING)
call CreateUnitAtLoc(j8,1848651843,LW7,bj_UNIT_FACING)
endif
call PanCameraToTimedLocForPlayer(j8,LV7,0)
else
if Y8 then
set T8=K04
set U8=K54
call CreateUnitAtLoc(j8,1848651843,LW7,bj_UNIT_FACING)
else
call CreateUnitAtLoc(j8,1848651843,LV7,bj_UNIT_FACING)
call CreateUnitAtLoc(j8,1848651843,LW7,bj_UNIT_FACING)
endif
call PanCameraToTimedLocForPlayer(j8,LW7,0)
endif
loop
exitwhen T8>U8
if J[T8]==false then
call SetPlayerTechMaxAllowed(j8,K34[T8],1)
endif
set T8=T8+1
endloop
call WR7(LQ7)
set LQ7=null
call RemoveLocation(VJ7)
set VJ7=null
call RemoveLocation(LV7)
set LV7=null
call RemoveLocation(LW7)
set LW7=null
return
endif
loop
set UB7=GetRandomInt(VH7,VI7)
if(J[UB7]==false)then
set J[UB7]=true
set M7[GetPlayerId(j8)]=CreateUnitAtLoc(j8,K34[UB7],VJ7,bj_UNIT_FACING)
call UR7(K34[UB7])
endif
exitwhen M7[GetPlayerId(GetTriggerPlayer())]!=null
endloop
call WR7(LQ7)
set LQ7=null
call RemoveLocation(VJ7)
set VJ7=null
call RemoveLocation(LV7)
set LV7=null
call RemoveLocation(LW7)
set LW7=null
endfunction
function IY9 takes nothing returns nothing
if KJ9()then
call KM9()
endif
endfunction
function IZ9 takes nothing returns nothing
local player j8=GetTriggerPlayer()
local string KO9="|c006699CC"
if P74 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"联赛模式"+"|r:      "+(GetObjectName((1848653621))))
endif
if P84 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"扩展联赛模式"+"|r:      "+(GetObjectName((1848653634))))
call DisplayTimedTextToPlayer(j8,0,E9,20,"                                 "+(GetObjectName((1848653616))))
endif
if D4 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"死亡模式"+"|r:        "+(GetObjectName((1848653402))))
call DisplayTimedTextToPlayer(j8,0,E9,20,"                              "+(GetObjectName((1848653401)))+" "+I2S(YG7(K14,K54-K04+1))+" "+(GetObjectName((1848653635))))
endif
if W8 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"镜像模式"+"|r:       "+(GetObjectName((1848653399))))
endif
if P4 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"全阵营模式"+"|r:                 "+(GetObjectName((1848653398))))
endif
if O04 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"随机征召模式"+"|r:                 "+(GetObjectName((1848653618))))
endif
if VT then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"单选方案模式"+"|r:                 "+(GetObjectName((1848653639))))
endif
if E4 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"全体随机模式"+"|r:          "+(GetObjectName((1848653617))))
endif
if A8 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"随机阵容选举模式"+"|r:         "+(GetObjectName((1848653620))))
endif
if O4 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"团队随机模式"+"|r:     "+(GetObjectName((1848653389))))
endif
if O9 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"反转模式"+"|r:                 "+(GetObjectName((1848653619))))
endif
if ge then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"洗牌模式"+"|r:     "+(GetObjectName((1848653640))))
endif
if Rx then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"全敏捷英雄"+"|r:             "+(GetObjectName((1848653644))))
endif
if bx then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"全力量英雄"+"|r:         "+(GetObjectName((1848653643))))
endif
if Nx then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"全智力英雄"+"|r:    "+(GetObjectName((1848653642))))
endif
if Jj then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"全远程英雄"+"|r:    "+(GetObjectName((1848657716))))
endif
if lj then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"全近程英雄"+"|r:    "+(GetObjectName((1848657717))))
endif
if X8 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"复选模式"+"|r:   "+(GetObjectName((1848653641))))
endif
if R4 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"物品掉落模式"+"|r:             "+(GetObjectName((1848653638))))
endif
if A4 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"无神符模式"+"|r:        "+(GetObjectName((1848653645))))
endif
if C4 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"超级兵模式"+"|r:        "+(GetObjectName((1848653646))))
call DisplayTimedTextToPlayer(j8,0,E9,20,"                             "+(GetObjectName((1848653647))))
endif
if Y4 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"简单模式"+"|r:           "+(GetObjectName((1848653652))))
endif
if H34 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"相同英雄模式"+"|r:           "+(GetObjectName((1848653653)))+" "+(KZ4[GetPlayerId((Le))])+"|r"+" "+(GetObjectName((1848653655))))
endif
if PE4 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"中路出兵模式"+"|r:           "+(GetObjectName((1848653872))))
endif
if PF4 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"下路禁兵模式"+"|r:           "+(GetObjectName((1848653654))))
endif
if PG4 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"中路禁兵模式"+"|r:           "+(GetObjectName((1848653651))))
endif
if PH4 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"上路禁兵模式"+"|r:           "+(GetObjectName((1848653650))))
endif
if PI4 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"禁止交换"+"|r:           "+(GetObjectName((1848653656))))
endif
if PJ4 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"禁止重选"+"|r:           "+(GetObjectName((1848653649))))
endif
if PK4 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"养人模式"+"|r:           "+(GetObjectName((1848653657))))
endif
if PM4 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"观察者信息"+"|r:           "+(GetObjectName((1848653658))))
endif
if bN then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"迷你英雄模式"+"|r:           "+(GetObjectName((1848657219))))
endif
if LS then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"快速复活模式"+"|r:           "+(GetObjectName((1848656976))))
endif
if SN4 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"队长征召模式"+"|r:           "+(GetObjectName((1848657220))))
endif
if DT then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"实验神符模式"+"|r:           "+(GetObjectName((1848657718))))
endif
if O54 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"队长随机模式"+"|r:           "+(GetObjectName((1848657734))))
endif
if Y8 then
call DisplayTimedTextToPlayer(j8,0,E9,20,KO9+"普通模式"+"|r:        "+(GetObjectName((1848653648))))
endif
if ZT then
call DisplayTimedTextToPlayer(j8,0,E9,20,"|c00dd8dff"+"超级塔模式|r: 防御塔会回血")
endif
if AT then
call DisplayTimedTextToPlayer(j8,0,E9,20,"|c00dd8dff"+"增强超级兵|r:一个增强的超级兵模式")
endif
if BT then
call DisplayTimedTextToPlayer(j8,0,E9,20,"|c00dd8dff"+"高经验AI|r:电脑会得到额外经验")
endif
if LT then
call DisplayTimedTextToPlayer(j8,0,E9,20,"|c00dd8dff"+"普通经验AI|r:电脑会得到正常经验")
endif
if EU then
call DisplayTimedTextToPlayer(j8,0,E9,20,"|c00dd8dff"+"动态经验AI|r: AI获取经验依据死亡/杀人/助攻的情况。杀人或助攻会减少，被杀则会有加成")
endif
if CT then
call DisplayTimedTextToPlayer(j8,0,E9,20,"|c00dd8dff"+"高金钱AI|r:电脑会得到额外金钱")
endif
if WT then
call DisplayTimedTextToPlayer(j8,0,E9,20,"|c00dd8dff"+"普通金钱AI|r:电脑会得到正常金钱")
endif
if FU then
call DisplayTimedTextToPlayer(j8,0,E9,20,"|c00dd8dff"+"动态金钱AI|r:AI获取金钱依据死亡/杀人/助攻的情况。杀人或助攻会减少，被杀则会有加成")
endif
if FX70 or DG0 then
call DisplayTimedTextToPlayer(j8,0,E9,20,"|c00dd8dff"+"动态金钱经验AI|r:AI获取金钱经验依据死亡/杀人/助攻的情况。杀人或助攻会减少，被杀则会有加成")
endif
if TL4 then
call DisplayTimedTextToPlayer(j8,0,E9,20,"|c00dd8dff"+"酷名模式|r:电脑会随机得到一个酷酷的名字！")
endif
if T14 then
call DisplayTimedTextToPlayer(j8,0,E9,20,"|c00dd8dff"+"全红杖模式|r:AI会随机获取不同等级的红杖")
endif
if XT then
call DisplayTimedTextToPlayer(j8,0,E9,20,"|c00dd8dff"+"无死灵书模式|r:该模式下电脑不会合成死灵书")
endif
endfunction
function P5 takes nothing returns nothing
if((GetUnitTypeId(GetEnumUnit())==1848651828)or(GetUnitTypeId(GetEnumUnit())==1865429043))then
call RemoveUnit(GetEnumUnit())
endif
endfunction
function KP9 takes unit u1,unit u2 returns nothing
local player KQ9=GetOwningPlayer(u1)
local player KR9=GetOwningPlayer(u2)
local unit KS9=CreateUnit(KQ9,1697657158,0,0,0)
local group g
local item KT9
local integer KU9
set KU9=VH4[GetPlayerId(KQ9)]
set VH4[GetPlayerId(KQ9)]=VH4[GetPlayerId(KR9)]
set VH4[GetPlayerId(KR9)]=KU9
call DisableTrigger(H94)
if GetUnitAbilityLevel(u1,1093677893)>0 then
set B2=u1
set C2=u2
call ExecuteFunc("KV9")
elseif GetUnitAbilityLevel(u2,1093677893)>0 then
set B2=u2
set C2=u1
call ExecuteFunc("KV9")
endif
if GetUnitAbilityLevel(u1,1093682009)>0 then
set B2=u1
set C2=u2
call ExecuteFunc("KW9")
elseif GetUnitAbilityLevel(u2,1093682009)>0 then
set B2=u2
set C2=u1
call ExecuteFunc("KW9")
endif
if GetUnitAbilityLevel(u1,1093743444)>0 then
set B2=u1
set C2=u2
call ExecuteFunc("KX9")
elseif GetUnitAbilityLevel(u2,1093743444)>0 then
set B2=u2
set C2=u1
call ExecuteFunc("KX9")
endif
call NM7(StringHash("SwapHero|"+I2S(GetPlayerId(GetOwningPlayer(u1)))))
call NM7(StringHash("SwapHero|"+I2S(GetPlayerId(GetOwningPlayer(u2)))))
set g=WS7()
set bj_groupEnumOwningPlayer=KQ9
call GroupEnumUnitsInRect(g,GetWorldBounds(),filterGetUnitsInRectOfPlayer)
call ForGroup(g,function P5)
call WR7(g)
set g=WS7()
set bj_groupEnumOwningPlayer=KR9
call GroupEnumUnitsInRect(g,GetWorldBounds(),filterGetUnitsInRectOfPlayer)
call ForGroup(g,function P5)
call WR7(g)
call SetUnitOwner(u2,KQ9,true)
call SetUnitOwner(u1,KR9,true)
set M7[GetPlayerId(KQ9)]=u2
set M7[GetPlayerId(KR9)]=u1
if TZ7(KQ9)then
call SetPlayerName(KQ9,VT7(KQ9))
else
call SetPlayerName(KQ9,VT7(KQ9)+" ("+W77(M7[GetPlayerId(KQ9)])+")")
endif
if TZ7(KR9)then
call SetPlayerName(KR9,VT7(KR9))
else
call SetPlayerName(KR9,VT7(KR9)+" ("+W77(M7[GetPlayerId(KR9)])+")")
endif
call UnitAddItem(KS9,UnitItemInSlot(u2,0))
call UnitAddItem(KS9,UnitItemInSlot(u2,1))
call UnitAddItem(KS9,UnitItemInSlot(u2,2))
call UnitAddItem(KS9,UnitItemInSlot(u2,3))
call UnitAddItem(KS9,UnitItemInSlot(u2,4))
call UnitAddItem(KS9,UnitItemInSlot(u2,5))
set KT9=UnitItemInSlot(u1,0)
if KT9!=null then
call SetItemPlayer(KT9,KQ9,false)
call SetItemUserData(KT9,1)
call UnitAddItem(u2,KT9)
endif
set KT9=UnitItemInSlot(u1,1)
if KT9!=null then
call SetItemPlayer(KT9,KQ9,false)
call SetItemUserData(KT9,1)
call UnitAddItem(u2,KT9)
endif
set KT9=UnitItemInSlot(u1,2)
if KT9!=null then
call SetItemPlayer(KT9,KQ9,false)
call SetItemUserData(KT9,1)
call UnitAddItem(u2,KT9)
endif
set KT9=UnitItemInSlot(u1,3)
if KT9!=null then
call SetItemPlayer(KT9,KQ9,false)
call SetItemUserData(KT9,1)
call UnitAddItem(u2,KT9)
endif
set KT9=UnitItemInSlot(u1,4)
if KT9!=null then
call SetItemPlayer(KT9,KQ9,false)
call SetItemUserData(KT9,1)
call UnitAddItem(u2,KT9)
endif
set KT9=UnitItemInSlot(u1,5)
if KT9!=null then
call SetItemPlayer(KT9,KQ9,false)
call SetItemUserData(KT9,1)
call UnitAddItem(u2,KT9)
endif
set KT9=UnitItemInSlot(KS9,0)
if KT9!=null then
call SetItemPlayer(KT9,KR9,false)
call SetItemUserData(KT9,1)
call UnitAddItem(u1,KT9)
endif
set KT9=UnitItemInSlot(KS9,1)
if KT9!=null then
call SetItemPlayer(KT9,KR9,false)
call SetItemUserData(KT9,1)
call UnitAddItem(u1,KT9)
endif
set KT9=UnitItemInSlot(KS9,2)
if KT9!=null then
call SetItemPlayer(KT9,KR9,false)
call SetItemUserData(KT9,1)
call UnitAddItem(u1,KT9)
endif
set KT9=UnitItemInSlot(KS9,3)
if KT9!=null then
call SetItemPlayer(KT9,KR9,false)
call SetItemUserData(KT9,1)
call UnitAddItem(u1,KT9)
endif
set KT9=UnitItemInSlot(KS9,4)
if KT9!=null then
call SetItemPlayer(KT9,KR9,false)
call SetItemUserData(KT9,1)
call UnitAddItem(u1,KT9)
endif
set KT9=UnitItemInSlot(KS9,5)
if KT9!=null then
call SetItemPlayer(KT9,KR9,false)
call SetItemUserData(KT9,1)
call UnitAddItem(u1,KT9)
endif
call RemoveUnit(KS9)
call EnableTrigger(H94)
if(IsUnitType(u1,UNIT_TYPE_MELEE_ATTACKER) or GetUnitTypeId(u1)==12111191870)and MV7(u1,ZU[GB])!=null then
call UnitRemoveItem(u1,MV7(u1,ZU[GB]))
elseif(IsUnitType(u1,UNIT_TYPE_RANGED_ATTACKER) or GetUnitTypeId(u1)==12111191870)and MV7(u1,ZU[BA])!=null then
call UnitRemoveItem(u1,MV7(u1,ZU[BA]))
endif
if(IsUnitType(u2,UNIT_TYPE_MELEE_ATTACKER) or GetUnitTypeId(u1)==12111191870)and MV7(u2,ZU[GB])!=null then
call UnitRemoveItem(u1,MV7(u2,ZU[GB]))
elseif(IsUnitType(u2,UNIT_TYPE_RANGED_ATTACKER) or GetUnitTypeId(u1)==12111191870)and MV7(u2,ZU[BA])!=null then
call UnitRemoveItem(u1,MV7(u2,ZU[BA]))
endif
if GetUnitTypeId(u1)==12111191870 and MV7(u1,ZU[BA])!=null then
call UnitRemoveItem(u1,MV7(u1,ZU[BA]))
elseif GetUnitTypeId(u1)==12111191870 and MV7(u1,ZU[GB])!=null then
call UnitRemoveItem(u1,MV7(u1,ZU[GB]))
endif
if GetUnitTypeId(u2)==12111191870 and MV7(u2,ZU[BA])!=null then
call UnitRemoveItem(u2,MV7(u2,ZU[BA]))
elseif GetUnitTypeId(u2)==12111191870 and MV7(u2,ZU[GB])!=null then
call UnitRemoveItem(u2,MV7(u2,ZU[GB]))
endif
if GetUnitTypeId(u1)==12111191870 and MV7(u1,ZU[X1])!=null then
call UnitRemoveItem(u1,MV7(u1,ZU[X1]))
endif
if GetUnitTypeId(u2)==12111191870 and MV7(u2,ZU[X1])!=null then
call UnitRemoveItem(u2,MV7(u2,ZU[X1]))
endif
if(IsUnitType(u1,UNIT_TYPE_MELEE_ATTACKER))and MV7(u1,ZU[DX4])!=null then
call UnitRemoveItem(u1,MV7(u1,ZU[DX4]))
elseif(IsUnitType(u1,UNIT_TYPE_RANGED_ATTACKER))and MV7(u1,ZU[DW4])!=null then
call UnitRemoveItem(u1,MV7(u1,ZU[DW4]))
endif
if(IsUnitType(u2,UNIT_TYPE_MELEE_ATTACKER))and MV7(u2,ZU[DX4])!=null then
call UnitRemoveItem(u1,MV7(u2,ZU[DX4]))
elseif(IsUnitType(u2,UNIT_TYPE_RANGED_ATTACKER))and MV7(u2,ZU[DW4])!=null then
call UnitRemoveItem(u1,MV7(u2,ZU[DW4]))
endif
call ClearSelectionForPlayer(KQ9)
call SelectUnitAddForPlayer(u2,KQ9)
call ClearSelectionForPlayer(KR9)
call SelectUnitAddForPlayer(u1,KR9)
call NM7(StringHash("SwapHero|"+I2S(GetPlayerId(KQ9))))
call NM7(StringHash("SwapHero|"+I2S(GetPlayerId(KR9))))
set IN4=u1
call ExecuteFunc("QV8")
set IN4=u2
call ExecuteFunc("QV8")
call CT7(KQ9)
call CT7(KR9)
if(GetPlayerController(KR9)==MAP_CONTROL_COMPUTER)then
call NT7(R44,"AIHSwap|U",u1)
call ExecuteFunc("Uf")
endif
set KQ9=null
set KR9=null
set g=null
set KS9=null
set KT9=null
endfunction
function yM takes unit u1,unit u2 returns boolean
return OO7(StringHash("SwapHero|"+I2S(GetPlayerId(GetOwningPlayer(u2)))),I2S(GetUnitTypeId(u2))+"|"+I2S(GetUnitTypeId(u1)))
endfunction
function YL takes nothing returns nothing
call NM7(StringHash("SwapHero|"+I2S(GetPlayerId(GetTriggerPlayer()))))
endfunction
function qA takes player p returns integer
local integer i=1
loop
exitwhen i>5
if Z7[i]==p or A7[i]==p then
return i
endif
set i=i+1
endloop
return-1
endfunction
function YT takes unit u1,unit u2 returns boolean
call NS7(StringHash("SwapHero|"+I2S(GetPlayerId(GetOwningPlayer(u1)))),I2S(GetUnitTypeId(u1))+"|"+I2S(GetUnitTypeId(u2)),true)
if yM(u1,u2)then
call KP9(u1,u2)
else
call DisplayTimedTextToPlayer(GetOwningPlayer(u1),0,E9,30,"  ")
call DisplayTimedTextToPlayer(GetOwningPlayer(u1),0,E9,30,"|cff99ccff你要求和以下玩家交换英雄 |r"+Q[GetPlayerId(GetOwningPlayer(u2))]+GetUnitName(u2)+"|r")
call DisplayTimedTextToPlayer(GetOwningPlayer(u1),0,E9,30,"  ")
if(GetPlayerController(GetOwningPlayer(u2))==MAP_CONTROL_USER)then
call DisplayTimedTextToPlayer(GetOwningPlayer(u2),0,E9,30,"  ")
call DisplayTimedTextToPlayer(GetOwningPlayer(u2),0,E9,30,"                         "+Q[GetPlayerId(GetOwningPlayer(u1))]+GetUnitName(u1)+"|r |cff99ccff想要和你交换英雄，输入|r |c00ff0303-swap "+I2S(qA(GetOwningPlayer(u1)))+"|r |cff99ccff接受交换|r")
call DisplayTimedTextToPlayer(GetOwningPlayer(u2),0,E9,30,"  ")
else
if(GetHeroSkillPoints(u1)!=GetHeroLevel(u1))then
call DisplayTimedTextToPlayer(GetOwningPlayer(u1),0,E9,$A,"
                |cff99ccf你对 |r"+Q[GetPlayerId(GetOwningPlayer(u2))]+GetUnitName(u2)+"|r的交换请求被拒绝，因为你已经升级了技能")
elseif(Bz>QD4)then
call DisplayTimedTextToPlayer(GetOwningPlayer(u1),0,E9,$A,"
                |cff99ccf你对 |r"+Q[GetPlayerId(GetOwningPlayer(u2))]+GetUnitName(u2)+"|r的交换请求被拒绝，因为太迟了")
elseif((hG[GetPlayerId(GetOwningPlayer(u2))]>0)or(not MT7(u2)))then
call DisplayTimedTextToPlayer(GetOwningPlayer(u1),0,E9,$A,"
                |cff99ccf你对 |r"+Q[GetPlayerId(GetOwningPlayer(u2))]+GetUnitName(u2)+"|r的交换请求被拒绝，因为他已经拥有了物品")
elseif(not MT7(u1))then
call DisplayTimedTextToPlayer(GetOwningPlayer(u1),0,E9,$A,"
                |cff99ccf你对 |r"+Q[GetPlayerId(GetOwningPlayer(u2))]+GetUnitName(u2)+"|r的交换请求被拒绝，因为你已经拥有了物品")
else
call KP9(u1,u2)
endif
endif
endif
return false
endfunction
function YV takes nothing returns nothing
local integer i=S2I(SubString(GetEventPlayerChatString(),6,StringLength(GetEventPlayerChatString())))
if GetEventPlayerChatString()=="-swapall" then
set i=1
set IP4=M7[GetPlayerId(GetTriggerPlayer())]
loop
exitwhen i>5
if TV7(GetTriggerPlayer())then
set IR4=Z7[i]
else
set IR4=A7[i]
endif
set IN4=M7[GetPlayerId(IR4)]
if not(IP4==null or GetOwningPlayer(IP4)!=GetTriggerPlayer()or IN4==null or GetOwningPlayer(IN4)!=IR4 or IR4==GetTriggerPlayer())then
if YT(IP4,IN4)then
return
endif
endif
set i=i+1
endloop
return
elseif i<1 or i>5 then
call X37(GetTriggerPlayer(),"无效的交换选择")
return
endif
set IP4=M7[GetPlayerId(GetTriggerPlayer())]
if TV7(GetTriggerPlayer())then
set IR4=Z7[i]
else
set IR4=A7[i]
endif
set IN4=M7[GetPlayerId(IR4)]
if IP4==null or GetOwningPlayer(IP4)!=GetTriggerPlayer()or IN4==null or GetOwningPlayer(IN4)!=IR4 or IR4==GetTriggerPlayer()then
call X37(GetTriggerPlayer(),"无效的交换选择")
return
endif
call YT(IP4,IN4)
endfunction
function Y2 takes nothing returns nothing
local integer i
local player p
local unit u
local string s
if GetLocalPlayer()==GetTriggerPlayer()then
call ClearTextMessages()
endif
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,45,"|cff99ccff交换英雄选项:|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,45," ")
set i=1
loop
exitwhen i>5
set p=Z7[i]
set u=M7[GetPlayerId(p)]
if IsPlayerAlly(GetTriggerPlayer(),p)and GetTriggerPlayer()!=p and u!=null and GetOwningPlayer(u)==p then
set s=" "
if yM(M7[GetPlayerId(GetTriggerPlayer())],u)then
set s=" |c00ff0303(向你提出了交换请求)|r"
endif
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,45,Q[GetPlayerId(p)]+I2S(i)+"|r"+" - "+"|cff99ccff"+GetUnitName(u)+"|r"+s)
endif
set p=A7[i]
set u=M7[GetPlayerId(p)]
if IsPlayerAlly(GetTriggerPlayer(),p)and GetTriggerPlayer()!=p and u!=null and GetOwningPlayer(u)==p then
set s=" "
if yM(M7[GetPlayerId(GetTriggerPlayer())],u)then
set s=" |c00ff0303(向你提出了交换请求)|r"
endif
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,45,Q[GetPlayerId(p)]+I2S(i)+"|r"+" - "+"|cff99ccff"+GetUnitName(u)+"|r"+s)
endif
set i=i+1
endloop
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,45," ")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,45,"|cff99ccff输入|r |c00ff0303-swap #|r |cff99ccff来交换或者输入-swapcancel取消交换|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,45," ")
endfunction
function KY9 takes player HY7 returns boolean
local integer KZ9=1
local integer KA9=0
loop
exitwhen KZ9>5
if TV7(HY7)then
if M7[GetPlayerId(Z7[KZ9])]!=null and Z7[KZ9]!=HY7 and GetHeroLevel(M7[GetPlayerId(Z7[KZ9])])==1 then
set KA9=KA9+1
endif
else
if M7[GetPlayerId(A7[KZ9])]!=null and A7[KZ9]!=HY7 and GetHeroLevel(M7[GetPlayerId(A7[KZ9])])==1 then
set KA9=KA9+1
endif
endif
set KZ9=KZ9+1
endloop
if KA9>0 then
return true
else
return false
endif
endfunction
function KB9 takes nothing returns boolean
if PI4 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,"-swaphero "+(GetObjectName((1848653880))))
return false
endif
if GetUnitState(M7[GetPlayerId(GetTriggerPlayer())],UNIT_STATE_LIFE)<1 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,(GetObjectName((1848653894))))
return false
endif
if N54 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,(GetObjectName((1848653895)))+" -swaphero.")
return false
endif
if KY9(GetTriggerPlayer())==false then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,(GetObjectName((1848653896))))
return false
endif
return true
endfunction
function IA9 takes nothing returns nothing
if KB9()then
if GetEventPlayerChatString()=="-swap"or GetEventPlayerChatString()=="-swaphero"then
call Y2()
elseif GetEventPlayerChatString()=="-swapcancel"then
call YL()
else
call YV()
endif
endif
endfunction
function KC9 takes nothing returns boolean
return GetSpellAbilityId()==1093682761
endfunction
function K39 takes integer o6,unit K69,unit KL9 returns nothing
local integer T8=1
local integer U8=GetUnitAbilityLevel(K69,o6)
loop
exitwhen T8>U8
call SelectHeroSkill(KL9,o6)
set T8=T8+1
endloop
endfunction
function K19 takes nothing returns nothing
local integer T8
local integer U8
local unit S4
local location LB8=GetUnitLoc(GetTriggerUnit())
set S4=CreateUnitAtLoc(GetOwningPlayer(GetTriggerUnit()),GetUnitTypeId(GetTriggerUnit()),LB8,bj_UNIT_FACING)
call SetHeroXP(S4,GetHeroXP(GetTriggerUnit()),false)
set T8=1
set U8=GetUnitAbilityLevel(GetTriggerUnit(),1096904043)
loop
exitwhen T8>U8
call SelectHeroSkill(bj_lastCreatedUnit,1096904043)
set T8=T8+1
endloop
set T8=0
set U8=5
loop
exitwhen T8>U8
call UnitAddItem(S4,UnitItemInSlot(GetTriggerUnit(),T8))
set T8=T8+1
endloop
if(GetUnitTypeId(GetTriggerUnit())==1164277353)then
call K39(1093815130,GetTriggerUnit(),S4)
call K39(1093683252,GetTriggerUnit(),S4)
call K39(1093751369,GetTriggerUnit(),S4)
call K39(1093678929,GetTriggerUnit(),S4)
endif
if(GetUnitTypeId(GetTriggerUnit())==1429221432)then
call K39(1093677892,GetTriggerUnit(),S4)
call K39(1093677639,GetTriggerUnit(),S4)
call K39(1093677893,GetTriggerUnit(),S4)
call K39(1093679411,GetTriggerUnit(),S4)
endif
if(GetUnitTypeId(GetTriggerUnit())==1429221431)then
call K39(1093682745,GetTriggerUnit(),S4)
call K39(1093678681,GetTriggerUnit(),S4)
call K39(1093677381,GetTriggerUnit(),S4)
call K39(1093677624,GetTriggerUnit(),S4)
endif
if(GetUnitTypeId(GetTriggerUnit())==1215063922)then
call K39(1093677895,GetTriggerUnit(),S4)
call K39(1093677894,GetTriggerUnit(),S4)
call K39(1093685043,GetTriggerUnit(),S4)
call K39(1095068013,GetTriggerUnit(),S4)
endif
if(GetUnitTypeId(GetTriggerUnit())==1164666213)then
call K39(1093677877,GetTriggerUnit(),S4)
call K39(1093678679,GetTriggerUnit(),S4)
call K39(1093678678,GetTriggerUnit(),S4)
call K39(1093808454,GetTriggerUnit(),S4)
endif
call YE7(GetTriggerUnit())
call RemoveLocation(LB8)
set LB8=null
set M7[GetPlayerId(GetOwningPlayer(S4))]=S4
endfunction
function K09 takes nothing returns boolean
local integer K59=GetUnitTypeId(M7[GetPlayerId(GetTriggerPlayer())])
return(K59==1429221432 or K59==1429221431 or K59==1215063922 or K59==1164277353 or K59==1164666213)and(RectContainsUnit(OD,M7[GetPlayerId(GetTriggerPlayer())])or RectContainsUnit(PD,M7[GetPlayerId(GetTriggerPlayer())]))
endfunction
function K29 takes nothing returns nothing
local unit WI7=M7[GetPlayerId(GetTriggerPlayer())]
call UnitAddAbility(WI7,1093682761)
call IssueImmediateOrderById(WI7,$D02B7)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,120.,"|c00ff0303"+(GetObjectName((1848653897)))+" "+W77(GetEnumUnit())+". "+(GetObjectName((1848653898)))+"|r")
endfunction
function IB9 takes nothing returns nothing
if K09()then
call K29()
endif
endfunction
function K_9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local integer U38=GetTriggerEvalCount(t)
local real x
local real y
if GetTriggerEventId()==EVENT_UNIT_DEATH or U38>60 then
if OT7(WI7,"Frozen")==false then
if TV7(GetOwningPlayer(WI7))then
set x=GetRectCenterX(ED)
set y=GetRectCenterY(ED)
else
set x=GetRectCenterX(L9)
set y=GetRectCenterY(L9)
endif
call SetUnitPosition(WI7,x,y)
call PauseUnit(WI7,false)
endif
call NM7(OB7)
call OZ7(t)
else
call PauseUnit(WI7,true)
endif
set t=null
set WI7=null
return false
endfunction
function M49 takes player p returns nothing
local unit WI7=M7[GetPlayerId(p)]
local trigger t
if XH7(WI7)==false then
set t=CreateTrigger()
call DisplayTimedTextToPlayer(p,0,E9,30.,(GetObjectName((1848653899))))
call UnitRemoveBuffs(WI7,true,false)
call UnitRemoveAbility(WI7,1113815395)
call UnitRemoveAbility(WI7,1113815346)
call UnitRemoveAbility(WI7,1110454858)
call UnitRemoveAbility(WI7,1112896368)
call UnitRemoveAbility(WI7,1114993524)
call UnitRemoveAbility(WI7,1110454854)
call PauseUnit(WI7,true)
call TriggerRegisterTimerEvent(t,1.,true)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function K_9))
call NT7(GetHandleId(t),"Hero",WI7)
endif
set p=null
set WI7=null
set t=null
endfunction
function M79 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local player p=O97(OB7,"p")
call NM7(OB7)
call OZ7(t)
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call M49(p)
endif
set t=null
return false
endfunction
function IC9 takes nothing returns nothing
local player p=GetTriggerPlayer()
local unit WI7=M7[GetPlayerId(p)]
local trigger t
if XH7(WI7)==false then
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,3.5,false)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function M79))
call NZ7(GetHandleId(t),"p",p)
endif
set p=null
set WI7=null
set t=null
endfunction
function M89 takes player p returns nothing
local unit WI7=M7[GetPlayerId(p)]
local trigger t
if XH7(WI7)==false then
set t=CreateTrigger()
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,30.,Q[GetPlayerId(p)]+GetPlayerName(p)+"|r is being unstuck. It will be sent to its base in 60 seconds.")
call UnitRemoveBuffs(WI7,true,false)
call UnitRemoveAbility(WI7,1113815395)
call UnitRemoveAbility(WI7,1113815346)
call UnitRemoveAbility(WI7,1110454858)
call UnitRemoveAbility(WI7,1112896368)
call UnitRemoveAbility(WI7,1114993524)
call UnitRemoveAbility(WI7,1110454854)
call PauseUnit(WI7,true)
call TriggerRegisterTimerEvent(t,1.,true)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function K_9))
call NT7(GetHandleId(t),"Hero",WI7)
endif
set p=null
set WI7=null
set t=null
endfunction
function J09 takes nothing returns nothing
local string VH=GetEventPlayerChatString()
local player pl=K27(S2I(SubString(VH,$A,StringLength(VH))))
if((pl!=null)and(TA7(pl))and(IsPlayerInForce(pl,QX4)))then
if(M7[GetPlayerId(pl)]==null)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,Q[GetPlayerId(pl)]+GetPlayerName(pl)+"|r 没有英雄")
else
call M89(pl)
endif
endif
set pl=null
endfunction
function M99 takes player p returns string
local string s=C9[GetPlayerId(p)]
if C9[GetPlayerId(p)]!="Here" then
return" |c00ff0303("+(GetObjectName((1848653881)))+" at "+SubString(s,$A,StringLength(s))+"|c00ff0303)|r"
endif
return" "
endfunction
function I39 takes nothing returns nothing
local integer T8=1
local integer U8=5
local integer D5
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,20," ")
if(TW7(GetTriggerPlayer()))then
loop
exitwhen T8>U8
set D5=GetPlayerId(Z7[T8])
if(M7[D5]!=null)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,20,Q[D5]+(KZ4[GetPlayerId((Z7[T8]))])+"|r "+(GetObjectName((1848653901)))+" "+GetUnitName(M7[D5])+" ("+(GetObjectName((1848653900)))+" "+I2S(GetUnitLevel(M7[D5]))+")"+M99(Z7[T8]))
endif
set T8=T8+1
endloop
else
loop
exitwhen T8>U8
set D5=GetPlayerId(A7[T8])
if(M7[D5]!=null)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,20,Q[D5]+(KZ4[GetPlayerId((A7[T8]))])+"|r "+(GetObjectName((1848653901)))+" "+GetUnitName(M7[D5])+" ("+(GetObjectName((1848653900)))+" "+I2S(GetUnitLevel(M7[D5]))+")"+M99(A7[T8]))
endif
set T8=T8+1
endloop
endif
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,20," ")
endfunction
function MD9 takes unit u returns boolean
return GetUnitTypeId(u)==1311781199 or GetUnitTypeId(u)==1311781171 or GetUnitTypeId(u)==1311781172 or GetUnitTypeId(u)==1311781173
endfunction
function ME9 takes unit u returns unit
local integer I97=GetHandleId(GetOwningPlayer(u))
return(O77(I97,"MyBear"))
endfunction
function I69 takes nothing returns nothing
local unit u
local integer i=0
if X04 then
return
endif
if(M7[GetPlayerId(GetTriggerPlayer())]==null)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,10.,(GetObjectName((1848653889))))
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,10.,GetUnitName(M7[GetPlayerId(GetTriggerPlayer())])+" "+(GetObjectName((1848653902)))+" "+I2S(R2I(.5+GetUnitMoveSpeed(M7[GetPlayerId(GetTriggerPlayer())]))))
if MD9(M7[GetPlayerId(GetTriggerPlayer())])then
set u=ME9(M7[GetPlayerId(GetTriggerPlayer())])
if u!=null then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,10.,GetUnitName(u)+" "+(GetObjectName((1848653902)))+" "+I2S(R2I(.5+GetUnitMoveSpeed(u))))
endif
endif
endif
endfunction
function IL9 takes nothing returns nothing
local unit u
local integer i=0
if X04 then
return
endif
if(M7[GetPlayerId(GetTriggerPlayer())]==null)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,10.,(GetObjectName((1848653889))))
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,10.,GetUnitName(M7[GetPlayerId(GetTriggerPlayer())])+" "+(GetObjectName((1848653902)))+" "+I2S(R2I(.5+GetUnitMoveSpeed(M7[GetPlayerId(GetTriggerPlayer())]))))
if MD9(M7[GetPlayerId(GetTriggerPlayer())])then
set u=ME9(M7[GetPlayerId(GetTriggerPlayer())])
if u!=null then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,10.,GetUnitName(u)+" "+GetObjectName(1848653902)+" "+I2S(R2I(.5+GetUnitMoveSpeed(u))))
endif
endif
endif
loop
exitwhen i>16
set u=M7[i]
if u!=null and u!=M7[GetPlayerId(GetTriggerPlayer())]and IsUnitAlly(u,GetTriggerPlayer()) then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,10.,GetUnitName(u)+" "+GetObjectName(1848653902)+" "+I2S(R2I(.5+GetUnitMoveSpeed(u))))
endif
set i=i+1
endloop
endfunction
function I19 takes nothing returns nothing
call NS7(GetHandleId(GetTriggerPlayer()),"DisableHelp",true)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,(GetObjectName((1848653906))))
endfunction
function I09 takes nothing returns nothing
call NS7(GetHandleId(GetTriggerPlayer()),"DisableHelp",false)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,(GetObjectName((1848653903))))
endfunction
function I59 takes nothing returns nothing
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,10.,"   "+(GetObjectName((1848653904)))+" "+I2S(T7[GetPlayerId(GetTriggerPlayer())])+" "+(GetObjectName((1848653905)))+" "+I2S(U7[GetPlayerId(GetTriggerPlayer())])+" "+(GetObjectName((1848653907)))+" "+I2S(MU[GetPlayerId(GetTriggerPlayer())]))
endfunction
function I29 takes nothing returns nothing
local integer x=GetPlayerId(GetTriggerPlayer())
if(GetEventPlayerChatString()=="-cson")then
set AW[x]=true
set ob[x]=true
else
set AW[x]=false
set ob[x]=false
endif
call Q68()
endfunction
function MF9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer i=(LoadInteger(L7,(OB7),(34)))
local real x
local real y
if Ob[i]==false then
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
elseif M7[i]!=null and XH7(M7[i])==false then
set x=GetUnitX(M7[i])
set y=GetUnitY(M7[i])
call PanCameraToTimedForPlayer(Player(i),x,y,0)
endif
set t=null
return false
endfunction
function JY9 takes nothing returns nothing
local integer x=GetPlayerId(GetTriggerPlayer())
local trigger t
local integer OB7
local integer i
if Ob[x]==false and(GetEventPlayerChatString()=="-center" or GetEventPlayerChatString()=="-c")then
set Ob[x]=true
set t=CreateTrigger()
set OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.01,true)
call TriggerAddCondition(t,Condition(function MF9))
call SaveInteger(L7,(OB7),(34),(x))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,$A,GetObjectName(1848658519))
elseif GetEventPlayerChatString()=="-centeroff" or GetEventPlayerChatString()=="-co" then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,$A,GetObjectName(1848658520))
set Ob[x]=false
endif
endfunction
function JZ9 takes nothing returns nothing
set Ab[GetPlayerId(GetTriggerPlayer())]=false
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,5,GetObjectName(1848658522))
endfunction
function JA9 takes nothing returns nothing
set Ab[GetPlayerId(GetTriggerPlayer())]=true
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,5,GetObjectName(1848658736))
endfunction
function qL takes nothing returns nothing
local integer i=1
local integer B98
local integer JL7
loop
exitwhen i>5
set JL7=GetPlayerId(Z7[i])
set B98=R2I(TimerGetRemaining(U[JL7]))
if B98>0 and OL4[JL7]and P94==false and D9==false then
call PlayerSetLeaderboard(Z7[i],gm[JL7])
call LeaderboardDisplay(gm[JL7],true)
call LeaderboardSetLabel(gm[JL7],"复活剩余"+I2S(B98)+"秒")
else
call LeaderboardDisplay(gm[JL7],false)
endif
set JL7=GetPlayerId(A7[i])
set B98=R2I(TimerGetRemaining(U[JL7]))
if B98>0 and OL4[JL7]and P94==false and D9==false then
call PlayerSetLeaderboard(A7[i],gm[JL7])
call LeaderboardDisplay(gm[JL7],true)
call LeaderboardSetLabel(gm[JL7],"复活剩余"+I2S(B98)+"秒")
else
call LeaderboardDisplay(gm[JL7],false)
endif
set i=i+1
endloop
endfunction
function qM takes nothing returns nothing
local integer x=0
set x=x+1
set gm[GetPlayerId(Z7[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(Z7[x],gm[GetPlayerId(Z7[x])])
call LeaderboardDisplay(gm[GetPlayerId(Z7[x])],false)
call LeaderboardSetLabel(gm[GetPlayerId(Z7[x])],"复活: ")
set gm[GetPlayerId(A7[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(A7[x],gm[GetPlayerId(A7[x])])
call LeaderboardDisplay(gm[GetPlayerId(A7[x])],false)
call LeaderboardSetLabel(gm[GetPlayerId(A7[x])],"复活: ")
set x=x+1
set gm[GetPlayerId(Z7[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(Z7[x],gm[GetPlayerId(Z7[x])])
call LeaderboardDisplay(gm[GetPlayerId(Z7[x])],false)
call LeaderboardSetLabel(gm[GetPlayerId(Z7[x])],"复活: ")
set gm[GetPlayerId(A7[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(A7[x],gm[GetPlayerId(A7[x])])
call LeaderboardDisplay(gm[GetPlayerId(A7[x])],false)
call LeaderboardSetLabel(gm[GetPlayerId(A7[x])],"复活: ")
set x=x+1
set gm[GetPlayerId(Z7[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(Z7[x],gm[GetPlayerId(Z7[x])])
call LeaderboardDisplay(gm[GetPlayerId(Z7[x])],false)
call LeaderboardSetLabel(gm[GetPlayerId(Z7[x])],"复活: ")
set gm[GetPlayerId(A7[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(A7[x],gm[GetPlayerId(A7[x])])
call LeaderboardDisplay(gm[GetPlayerId(A7[x])],false)
call LeaderboardSetLabel(gm[GetPlayerId(A7[x])],"复活: ")
set x=x+1
set gm[GetPlayerId(Z7[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(Z7[x],gm[GetPlayerId(Z7[x])])
call LeaderboardDisplay(gm[GetPlayerId(Z7[x])],false)
call LeaderboardSetLabel(gm[GetPlayerId(Z7[x])],"复活: ")
set gm[GetPlayerId(A7[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(A7[x],gm[GetPlayerId(A7[x])])
call LeaderboardDisplay(gm[GetPlayerId(A7[x])],false)
call LeaderboardSetLabel(gm[GetPlayerId(A7[x])],"复活: ")
set x=x+1
set gm[GetPlayerId(Z7[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(Z7[x],gm[GetPlayerId(Z7[x])])
call LeaderboardDisplay(gm[GetPlayerId(Z7[x])],false)
call LeaderboardSetLabel(gm[GetPlayerId(Z7[x])],"复活: ")
set gm[GetPlayerId(A7[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(A7[x],gm[GetPlayerId(A7[x])])
call LeaderboardDisplay(gm[GetPlayerId(A7[x])],false)
call LeaderboardSetLabel(gm[GetPlayerId(A7[x])],"复活: ")
endfunction
function JD9 takes nothing returns nothing
local integer x=GetPlayerId(GetTriggerPlayer())
if GetEventPlayerChatString()=="-don" or GetEventPlayerChatString()=="-deathon" then
set OL4[x]=true
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,(GetObjectName((1848653911))))
else
set OL4[x]=false
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,(GetObjectName((1848653912))))
endif
endfunction
function MG9 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerAddAction(t,function qM)
call TriggerRegisterTimerEvent(t,.5,false)
set t=CreateTrigger()
call TriggerAddAction(t,function qL)
call TriggerRegisterTimerEvent(t,1.,true)
endfunction
function J89 takes nothing returns nothing
if(GetEventPlayerChatString()=="-showdeny")then
set ob[GetPlayerId(GetTriggerPlayer())]=true
else
set ob[GetPlayerId(GetTriggerPlayer())]=false
endif
endfunction
function J99 takes nothing returns nothing
call X37(GetTriggerPlayer(),(GetObjectName((1848657991))))
endfunction
function MH9 takes nothing returns nothing
local integer i=0
loop
exitwhen i>16
set ob[i]=true
set AW[i]=true
set i=i+1
endloop
endfunction
function I_9 takes nothing returns nothing
call ForceRemovePlayer(L8,GetTriggerPlayer())
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,(GetObjectName((1848653909))))
endfunction
function J49 takes nothing returns nothing
call ForceAddPlayer(L8,GetTriggerPlayer())
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,(GetObjectName((1848653914))))
endfunction
function qN takes nothing returns boolean
local integer x=GetRandomInt(1,4)
if x==1 then
set BW=bo
elseif x==2 then
set BW=Bo
elseif x==3 then
set BW=fL
elseif x==4 then
set BW=FL
endif
if cW[GetPlayerId(GetLocalPlayer())]then
call EnableWeatherEffect(bo,false)
call EnableWeatherEffect(Bo,false)
call EnableWeatherEffect(fL,false)
call EnableWeatherEffect(FL,false)
call EnableWeatherEffect(BW,true)
endif
return false
endfunction
function qo takes nothing returns nothing
local integer x=GetRandomInt(1,4)
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,300.,true)
call TriggerAddCondition(t,Condition(function qN))
set cW[GetPlayerId(Z7[1])]=false
set cW[GetPlayerId(Z7[2])]=false
set cW[GetPlayerId(Z7[3])]=false
set cW[GetPlayerId(Z7[4])]=false
set cW[GetPlayerId(Z7[5])]=false
set cW[GetPlayerId(A7[1])]=false
set cW[GetPlayerId(A7[2])]=false
set cW[GetPlayerId(A7[3])]=false
set cW[GetPlayerId(A7[4])]=false
set cW[GetPlayerId(A7[5])]=false
if V8 then
set cW[GetPlayerId(KX4)]=false
set cW[GetPlayerId(KY4)]=false
endif
if x==1 then
set BW=bo
elseif x==2 then
set BW=Bo
elseif x==3 then
set BW=fL
elseif x==4 then
set BW=FL
endif
set t=null
endfunction
function J79 takes nothing returns nothing
local string MI9=StringCase(GetEventPlayerChatString(),false)
if bW then
set bW=false
call qo()
endif
if MI9=="-weather snow" and GetLocalPlayer()==GetTriggerPlayer()then
set cW[GetPlayerId(GetTriggerPlayer())]=false
call EnableWeatherEffect(bo,true)
call EnableWeatherEffect(Bo,false)
call EnableWeatherEffect(fL,false)
call EnableWeatherEffect(FL,false)
endif
if MI9=="-weather rain" and GetLocalPlayer()==GetTriggerPlayer()then
set cW[GetPlayerId(GetTriggerPlayer())]=false
call EnableWeatherEffect(bo,false)
call EnableWeatherEffect(Bo,true)
call EnableWeatherEffect(fL,false)
call EnableWeatherEffect(FL,false)
endif
if MI9=="-weather moonlight" and GetLocalPlayer()==GetTriggerPlayer()then
set cW[GetPlayerId(GetTriggerPlayer())]=false
call EnableWeatherEffect(bo,false)
call EnableWeatherEffect(Bo,false)
call EnableWeatherEffect(fL,true)
call EnableWeatherEffect(FL,false)
endif
if MI9=="-weather wind" and GetLocalPlayer()==GetTriggerPlayer()then
set cW[GetPlayerId(GetTriggerPlayer())]=false
call EnableWeatherEffect(bo,false)
call EnableWeatherEffect(Bo,false)
call EnableWeatherEffect(fL,false)
call EnableWeatherEffect(FL,true)
endif
if MI9=="-weather off" and GetLocalPlayer()==GetTriggerPlayer()then
set cW[GetPlayerId(GetTriggerPlayer())]=false
call EnableWeatherEffect(bo,false)
call EnableWeatherEffect(Bo,false)
call EnableWeatherEffect(fL,false)
call EnableWeatherEffect(FL,false)
endif
if MI9=="-weather random" then
set cW[GetPlayerId(GetTriggerPlayer())]=true
if GetLocalPlayer()==GetTriggerPlayer()then
call EnableWeatherEffect(bo,false)
call EnableWeatherEffect(Bo,false)
call EnableWeatherEffect(fL,false)
call EnableWeatherEffect(FL,false)
call EnableWeatherEffect(BW,true)
endif
endif
endfunction
function JE9 takes nothing returns nothing
local integer a=S2I(SubString(GetEventPlayerChatString(),6,StringLength(GetEventPlayerChatString())))
local integer D5=GetPlayerId(GetTriggerPlayer())
set vb[D5]=vb[D5]+1
if vb[D5]>20 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,$A,(GetObjectName((1848656977))))
return
endif
if GetEventPlayerChatString()=="-rollon" or GetEventPlayerChatString()=="-rolloff" then
return
endif
if a==0 then
set a=100
endif
if a>0 and a<$7D1 then
call WP7(L8,5,Q[GetPlayerId(GetTriggerPlayer())]+(KZ4[GetPlayerId((GetTriggerPlayer()))])+"|r "+(GetObjectName((1848653129)))+" "+I2S(GetRandomInt(1,a))+" "+(GetObjectName((1848653133)))+" "+I2S(a))
else
call X37(GetTriggerPlayer(),(GetObjectName((1848652377))))
endif
endfunction
function JU9 takes nothing returns nothing
local integer a
if GetRandomInt(1,2)==1 then
set a=GetRandomInt(K04,K54)
else
set a=GetRandomInt(KL4,K14)
endif
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,$A,(GetObjectName((1848657747)))+" "+W97(a))
endfunction
function JR9 takes nothing returns nothing
local integer a=S2I(SubString(GetEventPlayerChatString(),4,StringLength(GetEventPlayerChatString())))
if GetTriggerPlayer()!=Z7[1]or a>2 or a<1 or SN4==false or TimerGetElapsed(W)>$E or AF4 then
return
endif
set AJ4=a
set AK4=a
set AE4=true
if a==1 then
call VV7(bj_FORCE_ALL_PLAYERS,15.,Q[GetPlayerId(Z7[1])]+(KZ4[GetPlayerId((Z7[1]))])+"|r "+GetObjectName(1848656979))
else
call VV7(bj_FORCE_ALL_PLAYERS,15.,Q[GetPlayerId(A7[1])]+(KZ4[GetPlayerId((A7[1]))])+"|r "+GetObjectName(1848656979))
endif
endfunction
function JM9 takes nothing returns nothing
set eb[GetPlayerId(GetTriggerPlayer())]=false
endfunction
function JN9 takes nothing returns nothing
set eb[GetPlayerId(GetTriggerPlayer())]=true
endfunction
function JF9 takes nothing returns nothing
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,(GetObjectName((1848654128))))
set ib[GetPlayerId(GetTriggerPlayer())]=true
if GetLocalPlayer()==GetTriggerPlayer()then
call SetPlayerName(Z7[1],(KZ4[GetPlayerId((Z7[1]))]))
call SetPlayerName(Z7[2],(KZ4[GetPlayerId((Z7[2]))]))
call SetPlayerName(Z7[3],(KZ4[GetPlayerId((Z7[3]))]))
call SetPlayerName(Z7[4],(KZ4[GetPlayerId((Z7[4]))]))
call SetPlayerName(Z7[5],(KZ4[GetPlayerId((Z7[5]))]))
call SetPlayerName(A7[1],(KZ4[GetPlayerId((A7[1]))]))
call SetPlayerName(A7[2],(KZ4[GetPlayerId((A7[2]))]))
call SetPlayerName(A7[3],(KZ4[GetPlayerId((A7[3]))]))
call SetPlayerName(A7[4],(KZ4[GetPlayerId((A7[4]))]))
call SetPlayerName(A7[5],(KZ4[GetPlayerId((A7[5]))]))
endif
endfunction
function JG9 takes nothing returns nothing
local integer id=GetPlayerId(GetTriggerPlayer())
if CW[id] then
set CW[id]=false
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,$A,(GetObjectName((1848653908))))
else
set CW[id]=true
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,$A,(GetObjectName((1848654129))))
endif
endfunction
function JW9 takes nothing returns nothing
local integer id=GetPlayerId(GetTriggerPlayer())
set ab[id]=true
endfunction
function JH9 takes nothing returns nothing
local integer i=1
local player p
local real MJ9
loop
exitwhen i>5
set p=Z7[i]
if TA7(p)then
set MJ9=PT[GetPlayerId(p)]/(TimerGetElapsed(W))*60
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,15.,Q[GetPlayerId(p)]+(KZ4[GetPlayerId((p))])+"|r"+" "+(GetObjectName((1848653876)))+" "+R2S(MJ9))
endif
set p=A7[i]
if TA7(p)then
set MJ9=PT[GetPlayerId(p)]/(TimerGetElapsed(W))*60
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,15.,Q[GetPlayerId(p)]+(KZ4[GetPlayerId((p))])+"|r"+" "+(GetObjectName((1848653876)))+" "+R2S(MJ9))
endif
set i=i+1
endloop
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,15.," ")
set p=null
endfunction
function JI9 takes nothing returns nothing
call ZZ7(GetTriggerPlayer())
endfunction
function MK9 takes nothing returns boolean
return KW7(GetFilterUnit())and GetOwningPlayer(GetFilterUnit())==GetTriggerPlayer()
endfunction
function Courier_Add takes nothing returns nothing
call UnitAddType(GetEnumUnit(),UNIT_TYPE_PEON)
endfunction
function Courier_Remove takes nothing returns nothing
call UnitRemoveType(GetEnumUnit(),UNIT_TYPE_PEON)
endfunction
function JJ9 takes nothing returns nothing
local group g=WS7()
call GroupEnumUnitsInRange(g,0,0,$2EE0,Condition(function MK9))
call WR7(g)
set g=null
endfunction
function JK9 takes nothing returns nothing
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,(GetObjectName((1848656726)))+" [|cffff0000E|r|cffff0000E|r|cffff0000E|r] - [|cffffcc00T|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,(GetObjectName((1848656725)))+" [|cffff0000E|r|cffff0000E|r|cff00ffffW|r] - [|cffffcc00D|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,(GetObjectName((1848656724)))+" [|cffff0000E|r|cffff0000E|r|cff0000ffQ|r] - [|cffffcc00F|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,(GetObjectName((1848656694)))+" [|cff0000ffQ|r|cff0000ffQ|r|cff0000ffQ|r] - [|cffffcc00Y|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,(GetObjectName((1848656716)))+" [|cff0000ffQ|r|cff0000ffQ|r|cff00ffffW|r] - [|cffffcc00V|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,(GetObjectName((1848656718)))+" [|cff0000ffQ|r|cff0000ffQ|r|cffff0000E|r] - [|cffffcc00G|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,(GetObjectName((1848656723)))+" [|cff00ffffW|r|cff00ffffW|r|cffff0000E|r] - [|cffffcc00Z|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,(GetObjectName((1848656719)))+" [|cff00ffffW|r|cff00ffffW|r|cff0000ffQ|r] - [|cffffcc00X|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,(GetObjectName((1848656720)))+" [|cff00ffffW|r|cff00ffffW|r|cff00ffffW|r] - [|cffffcc00C|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,(GetObjectName((1848656721)))+" [|cff0000ffQ|r|cff00ffffW|r|cffff0000E|r] - [|cffffcc00B|r]")
endfunction
function MM9 takes string s returns nothing
call StopMusic(true)
call PlayMusic(s)
endfunction
function JO9 takes nothing returns nothing
local string s=GetEventPlayerChatString()
local integer UB7=GetRandomInt(1,UT)
if GetLocalPlayer()==GetTriggerPlayer()then
if s=="-music off" then
call StopMusic(false)
elseif s=="-music random" then
call MM9(TT[UB7])
elseif s=="-music nightelf1" then
call MM9(BP)
elseif s=="-music nightelf2" then
call MM9(CP)
elseif s=="-music nightelf3" then
call MM9(GQ)
elseif s=="-music human1" then
call MM9(IQ)
elseif s=="-music human2" then
call MM9(JQ)
elseif s=="-music human3" then
call MM9(YQ)
elseif s=="-music orc1" then
call MM9(XP)
elseif s=="-music orc2" then
call MM9(YP)
elseif s=="-music orc3" then
call MM9(ZP)
elseif s=="-music undead1" then
call MM9(RP)
elseif s=="-music undead2" then
call MM9(TP)
elseif s=="-music undead3" then
call MM9(VP)
elseif s=="-music other1" then
call MM9(GR)
elseif s=="-music other2" then
call MM9(HR)
elseif s=="-music other3" then
call MM9(IR)
elseif s=="-music other4" then
call MM9(OR)
elseif s=="-music other5" then
call MM9(XR)
elseif s=="-music other6"then
call MM9(VN4)
elseif s=="-music other7"then
call MM9(VO4)
elseif s=="-music other8"then
call MM9(VP4)
elseif s=="-music other9"then
call MM9(VQ4)
elseif s=="-music special" then
call MM9(YR)
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,(GetObjectName((1848656727)))+" ")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,"off, random, nightelf1, nightelf2, nightelf3, human1, human2, human3, orc1, orc2, orc3, undead1, undead2, undead3, other1, other2, other3, other4, other5, other6, other7, other8, other9, special")
endif
endif
endfunction
function MN9 takes nothing returns boolean
set UT=UT+1
set TT[UT]=BP
set UT=UT+1
set TT[UT]=CP
set UT=UT+1
set TT[UT]=GQ
set UT=UT+1
set TT[UT]=IQ
set UT=UT+1
set TT[UT]=JQ
set UT=UT+1
set TT[UT]=YQ
set UT=UT+1
set TT[UT]=XP
set UT=UT+1
set TT[UT]=YP
set UT=UT+1
set TT[UT]=ZP
set UT=UT+1
set TT[UT]=RP
set UT=UT+1
set TT[UT]=TP
set UT=UT+1
set TT[UT]=VP
set UT=UT+1
set TT[UT]=GR
set UT=UT+1
set TT[UT]=HR
set UT=UT+1
set TT[UT]=IR
set UT=UT+1
set TT[UT]=OR
set UT=UT+1
set TT[UT]=XR
set UT=UT+1
set TT[UT]=VN4
set UT=UT+1
set TT[UT]=VO4
set UT=UT+1
set TT[UT]=VP4
set UT=UT+1
set TT[UT]=VQ4
set UT=UT+1
set TT[UT]=YR
return false
endfunction
function MO9 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.01,false)
call TriggerAddCondition(t,Condition(function MN9))
endfunction
function MP9 takes player p,integer r,integer g,integer b,integer a returns nothing
if GetLocalPlayer()==p then
call SetWaterBaseColor(r,g,b,a)
endif
endfunction
function MQ9 takes string s returns nothing
local string MR9=""
local string MS9=""
local string MT9=""
local integer i=0
local integer CE7=StringLength(s)
local integer MU9=1
loop
exitwhen i>CE7
if SubString(s,i,i+1)==" " then
set MU9=MU9+1
else
if MU9==1 then
set MR9=MR9+SubString(s,i,i+1)
elseif MU9==2 then
set MS9=MS9+SubString(s,i,i+1)
else
set MT9=MT9+SubString(s,i,i+1)
endif
endif
set i=i+1
endloop
set bb=S2I(MR9)
set Bb=S2I(MS9)
set cb=S2I(MT9)
endfunction
function JP9 takes nothing returns nothing
local string MV9=SubString(GetEventPlayerChatString(),7,StringLength(GetEventPlayerChatString()))
local player p=GetTriggerPlayer()
local integer r
local integer g
local integer b
set Nb[GetPlayerId(p)]=true
if MV9=="red" then
call MP9(p,$FF,0,0,$FF)
elseif MV9=="blue" then
call MP9(p,0,0,$FF,$FF)
elseif MV9=="green" then
call MP9(p,0,$FF,0,$FF)
elseif MV9=="default" then
call MP9(p,0,0,$FF,$FF)
elseif MV9=="random" then
set r=GetRandomInt(0,$FF)
set g=GetRandomInt(0,$FF)
set b=GetRandomInt(0,$FF)
call MP9(p,r,g,b,$FF)
call DisplayTimedTextToPlayer(p,0,0,5,(GetObjectName((1848657988)))+" r="+I2S(r)+" g="+I2S(g)+" b="+I2S(b))
else
call MQ9(MV9)
set r=bb
set g=Bb
set b=cb
if r>=0 and r<=$FF and g>=0 and g<=$FF and b>=0 and b<=$FF then
call MP9(p,r,g,b,$FF)
endif
endif
endfunction
function JS9 takes nothing returns nothing
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,15.,"该命令已被暂时停用")
endfunction
function JT9 takes nothing returns boolean
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,10.,"总经验/金钱奖励:"+I2S(N34[GetPlayerId(GetTriggerPlayer())])+"/"+I2S(N64[GetPlayerId(GetTriggerPlayer())]))
return false
endfunction
function JC9 takes nothing returns boolean
if XB4>0 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,10.,GetObjectName(1848659023)+": "+I2S(XB4))
endif
return false
endfunction
function MW9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer MX9=OM7(OB7,"u1Index")
local integer MY9=OM7(OB7,"u2Index")
local unit u1=TQ7(MX9)
local unit u2=TQ7(MY9)
local real Z27=ON7(OB7,"Duration")
local lightning MZ9=OH7(OB7,"Lightning")
if I2R(GetTriggerEvalCount(t))*.025>Z27 then
call DestroyLightning(MZ9)
call TP7(MX9)
call TP7(MY9)
call NM7(OB7)
call OZ7(t)
else
call MoveLightning(MZ9,true,GetUnitX(u1),GetUnitY(u1),GetUnitX(u2),GetUnitY(u2))
endif
set t=null
set u1=null
set u2=null
set MZ9=null
return false
endfunction
function MA9 takes string MB9,unit u1,unit u2,real r,real g,real b,real a,real Z27 returns nothing
local real x1=GetUnitX(u1)
local real y1=GetUnitY(u1)
local real x2=GetUnitX(u2)
local real y2=GetUnitY(u2)
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local lightning MZ9=AddLightning(MB9,true,x1,y1,x2,y2)
call SetLightningColor(MZ9,r,g,b,a)
call NW7(OB7,"Lightning",MZ9)
call NP7(OB7,"u1Index",TS7(u1))
call NP7(OB7,"u2Index",TS7(u2))
call NQ7(OB7,"Duration",Z27)
call TriggerRegisterTimerEvent(t,.025,true)
call TriggerAddCondition(t,Condition(function MW9))
set t=null
set MZ9=null
endfunction
function MC9 takes string M39 returns nothing
local sound Y07=CreateSound(M39,false,false,false,$A,$A,"")
call SetSoundVolume(Y07,0)
call StartSound(Y07)
call KillSoundWhenDone(Y07)
set Y07=null
endfunction
function M69 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local ubersplat ML9=(LoadUbersplatHandle(L7,(I97),($83)))
call DestroyUbersplat(ML9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set ML9=null
return false
endfunction
function M19 takes ubersplat ML9,real d returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call SaveUbersplatHandle(L7,(I97),($83),(ML9))
call TriggerRegisterTimerEvent(t,d,false)
call TriggerAddCondition(t,Condition(function M69))
set t=null
endfunction
function M09 takes nothing returns nothing
local real d=KF7(GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),ZB4,ZC4)
if d<ZA4 then
set ZA4=d
set ZZ4=GetEnumUnit()
endif
endfunction
function M59 takes group g,real x,real y returns unit
set ZA4=$F423F
set ZZ4=null
set ZB4=x
set ZC4=y
call ForGroup(g,function M09)
return ZZ4
endfunction
function M29 takes integer XG7 returns nothing
local integer i=0
loop
exitwhen i>5
call SetPlayerAbilityAvailable(Z7[i],XG7,false)
call SetPlayerAbilityAvailable(A7[i],XG7,false)
set i=i+1
endloop
endfunction
function M_9 takes integer id returns nothing
local integer i=0
loop
exitwhen i>$C
call SetPlayerAbilityAvailable(Player(i),id,false)
set i=i+1
endloop
endfunction
function JQ9 takes nothing returns nothing
local string s=GetEventPlayerChatString()
local trigger t
local integer x=S2I(SubString(GetEventPlayerChatString(),7,StringLength(GetEventPlayerChatString())))
local integer i=1
if x<1 or x>Fb then
set x=GetRandomInt(1,Fb)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,$A,(GetObjectName((1848657205)))+" "+I2S(x))
endif
if gb then
loop
exitwhen i>Fb
call MC9(Cb[i])
set i=i+1
endloop
set gb=false
endif
if db[x]==false then
endif
call XC7(GetTriggerPlayer(),Cb[x])
endfunction
function J59 takes nothing returns nothing
if bj[GetPlayerId(GetTriggerPlayer())]==false then
set bj[GetPlayerId(GetTriggerPlayer())]=true
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,15.,"Override is now on for Formless")
else
set bj[GetPlayerId(GetTriggerPlayer())]=false
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,15.,"Override is now off for Formless")
endif
endfunction
function N49 takes nothing returns nothing
local timer t=GetExpiredTimer()
local player p=O97(GetHandleId(t),"FormlessPlayer")
if M7[GetPlayerId(p)]!=null and H84 then
call X37(p,"Already have a hero.")
else
if TV7(p)then
call CreateUnitAtLoc(p,1211445296,GetRectCenter(ED),0)
else
call CreateUnitAtLoc(p,1211445296,GetRectCenter(L9),0)
endif
endif
call NM7(GetHandleId(t))
call DestroyTimer(t)
set p=null
set t=null
endfunction
function J29 takes nothing returns nothing
local player p=GetTriggerPlayer()
local timer t
if(M7[GetPlayerId(p)]==null or H84==false)and P and E4==false and O4==false and A8==false and D4==false and RZ4==false then
call US7(p)
call DisplayTimedTextToPlayer(p,0,E9,$A,"Formless will be created for you shortly.")
set t=CreateTimer()
call NZ7(GetHandleId(t),"FormlessPlayer",p)
call TimerStart(t,6,false,function N49)
endif
set p=null
set t=null
endfunction
function N79 takes nothing returns nothing
local timer t=GetExpiredTimer()
local player p=O97(GetHandleId(t),"BastionPlayer")
if M7[GetPlayerId(p)]!=null and H84 then
call X37(p,"Already have a hero.")
else
if TV7(p)then
call CreateUnitAtLoc(p,1211510832,GetRectCenter(ED),0)
else
call CreateUnitAtLoc(p,1211510832,GetRectCenter(L9),0)
endif
endif
call NM7(GetHandleId(t))
call DestroyTimer(t)
set p=null
set t=null
endfunction
function J_9 takes nothing returns nothing
local player p=GetTriggerPlayer()
local timer t
if(M7[GetPlayerId(p)]==null or H84==false)and P and E4==false and O4==false and A8==false and D4==false and RZ4==false then
call US7(p)
call DisplayTimedTextToPlayer(p,0,E9,$A,"Bastion will be created for you shortly.")
set t=CreateTimer()
call NZ7(GetHandleId(t),"BastionPlayer",p)
call TimerStart(t,6,false,function N79)
endif
set p=null
set t=null
endfunction
function N89 takes nothing returns nothing
local integer i=1
if zA==false then
set zA=true
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60," ")
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,90,"你可以选择娱乐酒馆里面的英雄了")
if false then
loop
exitwhen i==6
call FogModifierStart(CreateFogModifierRadiusLoc(Z7[i],FOG_OF_WAR_VISIBLE,GetUnitLoc(vN),$C8,true,true))
call FogModifierStart(CreateFogModifierRadiusLoc(A7[i],FOG_OF_WAR_VISIBLE,GetUnitLoc(vN),$C8,true,true))
set i=i+1
endloop
set i=1
endif
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,90,"此模式仅供娱乐")
loop
exitwhen i==6
call CreateUnit(Z7[i],1848651843,7225,-7475,270)
call CreateUnit(A7[i],1848651843,7225,-7475,270)
set i=i+1
endloop
endif
if false then
set EV=EV+1
set SU[EV]=1227960882
set ZU[EV]=1227960368
set AU[EV]=0
set BU[EV]=1227961139
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNArcaniteMelee.blp"
set LU[EV]=45
set HK4[EV]=$3E1C
set FH=EV
set EV=EV+1
set SU[EV]=1227960883
set ZU[EV]=1227960369
set AU[EV]=0
set BU[EV]=1227961140
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNHumanArmorUpThree.blp"
set LU[EV]=90
set HK4[EV]=$3B47
set GH=EV
set EV=EV+1
set SU[EV]=1227960884
set ZU[EV]=1227960632
set AU[EV]=0
set BU[EV]=1227961141
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNImprovedBows.blp"
set LU[EV]=40
set HK4[EV]=$36B0
set hH=EV
set EV=EV+1
set SU[EV]=1227960885
set ZU[EV]=1227960880
set AU[EV]=0
set BU[EV]=1227961142
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNOrcMeleeUpTwo.blp"
set LU[EV]=40
set HK4[EV]=$2D00
set jH=EV
set EV=EV+1
set SU[EV]=1227960886
set ZU[EV]=1227960372
set AU[EV]=0
set BU[EV]=1227961143
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNStaffOfSanctuary.blp"
set LU[EV]=30
set HK4[EV]=7500
set JH=EV
set EV=EV+1
set SU[EV]=1227960888
set ZU[EV]=1227960376
set AU[EV]=0
set BU[EV]=1227961145
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNThoriumRanged.blp"
set LU[EV]=0
set HK4[EV]=$283C
set LH=EV
set EV=EV+1
set SU[EV]=1227961136
set ZU[EV]=1227960626
set AU[EV]=0
set BU[EV]=1227961393
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNAdvancedUnholyStrength.blp"
set LU[EV]=0
set HK4[EV]=$2A94
set kH=EV
set EV=EV+1
set SU[EV]=1227961137
set ZU[EV]=1227960628
set AU[EV]=0
set BU[EV]=1227961394
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNStarWand.blp"
set LU[EV]=0
set HK4[EV]=9975
set lH=EV
set EV=EV+1
set SU[EV]=1227960887
set ZU[EV]=1227960374
set AU[EV]=0
set BU[EV]=1227961144
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNOrb.blp"
set LU[EV]=45
set HK4[EV]=$2C24
set MH=EV
set FQ4=FQ4+1
set FJ4[FQ4]=T2
set FK4[FQ4]=L5
set FM4[FQ4]=SY
set FP4[FQ4]=FH
set FQ4=FQ4+1
set FJ4[FQ4]=D84
set FK4[FQ4]=DJ4
set FM4[FQ4]=R2
set FN4[FQ4]=DI4
set FP4[FQ4]=GH
set FQ4=FQ4+1
set FJ4[FQ4]=Z2
set FK4[FQ4]=BV
set FM4[FQ4]=AV
set FN4[FQ4]=OW
set FP4[FQ4]=hH
set FQ4=FQ4+1
set FJ4[FQ4]=GX
set FK4[FQ4]=D1
set FM4[FQ4]=V1
set FN4[FQ4]=XV
set FP4[FQ4]=jH
set FQ4=FQ4+1
set FJ4[FQ4]=GX
set FK4[FQ4]=F1
set FM4[FQ4]=V1
set FN4[FQ4]=XV
set FP4[FQ4]=jH
set FQ4=FQ4+1
set FJ4[FQ4]=F6
set FK4[FQ4]=FV
set FM4[FQ4]=RW
set FN4[FQ4]=FF6
set FP4[FQ4]=JH
set FQ4=FQ4+1
set FJ4[FQ4]=LV
set FK4[FQ4]=OV
set FM4[FQ4]=NX
set FN4[FQ4]=YW
set FO4[FQ4]=R2
set FP4[FQ4]=LH
set FQ4=FQ4+1
set FJ4[FQ4]=UY
set FK4[FQ4]=MV
set FM4[FQ4]=QV
set FN4[FQ4]=BV
set FO4[FQ4]=Z2
set FP4[FQ4]=kH
set FQ4=FQ4+1
set FJ4[FQ4]=UW
set FK4[FQ4]=HY
set FM4[FQ4]=DZ
set FN4[FQ4]=GX
set FO4[FQ4]=D74
set FP4[FQ4]=lH
set FQ4=FQ4+1
set FJ4[FQ4]=YW
set FK4[FQ4]=BV
set FM4[FQ4]=GX
set FN4[FQ4]=NZ
set FP4[FQ4]=MH
endif
endfunction
function N99 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local real ND9=ON7(OB7,"T_CurrentX")
local real NE9=ON7(OB7,"T_CurrentY")
local real NF9=ON7(OB7,"T_MaxX")
local real NG9=$80
local real x
local real y
loop
exitwhen ND9>NF9
loop
exitwhen NE9>8192
set dW=dW+1
set x=ND9
set y=NE9
if IsPointBlighted(x,y)==false then
set DW[dW]=GetTerrainType(x,y)
set LW[dW]=GetTerrainVariance(x,y)
endif
set x=-ND9
set y=NE9
if IsPointBlighted(x,y)==false then
set fW[dW]=GetTerrainType(x,y)
set mW[dW]=GetTerrainVariance(x,y)
endif
set x=-ND9
set y=-NE9
if IsPointBlighted(x,y)==false then
set FW[dW]=GetTerrainType(x,y)
set MW[dW]=GetTerrainVariance(x,y)
endif
set x=ND9
set y=-NE9
if IsPointBlighted(x,y)==false then
set hW[dW]=GetTerrainType(x,y)
set pW[dW]=GetTerrainVariance(x,y)
endif
set NE9=NE9+NG9
endloop
set NE9=0
set ND9=ND9+NG9
endloop
set NF9=NF9+256
call NQ7(OB7,"T_CurrentX",ND9*1.)
call NQ7(OB7,"T_CurrentY",NE9*1.)
call NQ7(OB7,"T_MaxX",NF9*1.)
if NF9>8192 then
call NM7(OB7)
call OZ7(t)
endif
set t=null
return false
endfunction
function NH9 takes string KI9 returns boolean
if KI9=="-ma" or KI9=="-ms" or KI9=="-cs" or KI9=="-cson" or KI9=="-disablehelp" or KI9=="-enablehelp" or KI9=="-unstuck" or KI9=="-recreate" then
return true
elseif KI9=="-swaphero" or KI9=="-showmsg" or KI9=="-hidemsg" or KI9=="-showdeny" or KI9=="-hidedeny" or KI9=="-weather rain" or KI9=="-weather snow" or KI9=="-weather moonlight" or KI9=="-weather wind" or KI9=="-weather random" or KI9=="-weather off" or KI9=="-denyinfo" or KI9=="-di" or KI9=="-deathon" or KI9=="-don" or KI9=="-deathoff" or KI9=="-doff" or KI9=="-roll" or KI9=="-hideheronames" or KI9=="-hhn" or KI9=="-test" or KI9=="-mute" or KI9=="-wtf" or KI9=="-fun" or KI9=="-fleshstr" or KI9=="-fs" or KI9=="-switchon" then
return true
elseif KI9=="-override" or KI9=="-formless" then
return true
endif
return false
endfunction
function NI9 takes nothing returns boolean
return not P
endfunction
function NJ9 takes string qQ returns nothing
if cx==""then
set cx="|c006699CC"+qQ+"|r"
else
set cx=cx+"/|c006699CC"+qQ+"|r"
endif
endfunction
function NK9 takes string qQ returns nothing
if cx==""then
set cx="|c00dd8dff"+qQ+"|r"
else
set cx=cx+"/"+"|c00dd8dff"+qQ+"|r"
endif
endfunction
function NM9 takes string MI9,integer qs,integer qS returns string
return SubString(MI9,0,qs)+SubString(MI9,qS,StringLength(MI9))
endfunction
function NN9 takes string MI9 returns string
local integer LF7=StringLength(MI9)
local string qT
local string M9=""
local integer i=0
loop
exitwhen(i==LF7)
set qT=StringCase(SubString(MI9,i,i+1),false)
if not(qT==StringCase(qT,true))then
set M9=M9+qT
endif
set i=i+1
endloop
return M9
endfunction
function NO9 takes nothing returns boolean
local integer i=1
local boolean b1=false
local boolean b2=false
local integer JL7=0
loop
exitwhen i>5
if(not b1)and GetPlayerController(Z7[i])==MAP_CONTROL_USER and GetPlayerSlotState(Z7[i])==PLAYER_SLOT_STATE_PLAYING then
set b1=true
set JL7=i
elseif GetPlayerController(Z7[i])!=MAP_CONTROL_USER and GetPlayerSlotState(Z7[i])==PLAYER_SLOT_STATE_PLAYING then
set b2=true
endif
set i=i+1
endloop
if b1 and b2 then
set JL7=GetPlayerId(Z7[JL7])
call SetItemPawnable(CreateItem(12278961300,GetUnitX(KU4[JL7]),GetUnitY(KU4[JL7])),false)
set JL7=1
loop
exitwhen JL7>5
call O_7(IZ4,GetObjectName(1496332594),Z7[JL7])
set JL7=JL7+1
endloop
endif
set i=1
set b1=false
set b2=false
set JL7=0
loop
exitwhen i>5
if(not b1)and GetPlayerController(A7[i])==MAP_CONTROL_USER and GetPlayerSlotState(A7[i])==PLAYER_SLOT_STATE_PLAYING then
set b1=true
set JL7=i
elseif GetPlayerController(A7[i])!=MAP_CONTROL_USER and GetPlayerSlotState(A7[i])==PLAYER_SLOT_STATE_PLAYING then
set b2=true
endif
set i=i+1
endloop
if b1 and b2 then
set JL7=GetPlayerId(A7[JL7])
call SetItemPawnable(CreateItem(12278961300,GetUnitX(KU4[JL7]),GetUnitY(KU4[JL7])),false)
set JL7=1
loop
exitwhen JL7>5
call O_7(JA4,GetObjectName(1496332594),A7[JL7])
set JL7=JL7+1
endloop
endif
call DestroyTrigger(GetTriggeringTrigger())
return false
endfunction
function NP9 takes string NQ9,integer NR9 returns nothing
local string MI9=NN9(NQ9)
local string array NS9
local string array NT9
local boolean array NU9
local integer NV9
local integer NW9
local integer LF7=StringLength(MI9)
local integer x=0
local integer y=0
local integer z=0
local boolean AP
local boolean AR
local boolean LM
local boolean MM
local boolean TR
local boolean DM
local boolean MR
local boolean SP
local boolean AA
local boolean AI
local boolean AS
local boolean ID
local boolean NP
local boolean SC
local boolean EM
local boolean DU
local boolean SH
local boolean VR
local boolean RV
local boolean RD
local boolean OM
local boolean NT
local boolean NB
local boolean NM
local boolean NS
local boolean SO
local boolean NR
local boolean XL
local boolean SD
local boolean PM
local boolean OI
local boolean MI
local boolean CM
local boolean FR
local boolean MO
local boolean RO
local boolean ER
local boolean CD
local boolean RS
local boolean ST
local boolean MC
local boolean HE
local boolean NE
local boolean HG
local boolean NG
local boolean DE
local boolean DG
local boolean NN
local boolean FM
local boolean NY9
local boolean NZ9
local boolean AM
local boolean BM
local boolean XM
local trigger t
set NS9[1]="allpick"
set NT9[1]="ap"
set NS9[2]="allrandom"
set NT9[2]="ar"
set NS9[3]="leaguemode"
set NT9[3]="lm"
set NS9[4]="mirrormatch"
set NT9[4]="mm"
set NS9[5]="teamrandom"
set NT9[5]="tr"
set NS9[6]="deathmatch"
set NT9[6]="dm"
set NS9[7]="moderandom"
set NT9[7]="mr"
set NS9[8]="shuffleplayers"
set NT9[8]="sp"
set NS9[9]="allagility"
set NT9[9]="aa"
set NS9[$A]="allintelligence"
set NT9[$A]="ai"
set NS9[$B]="allstrength"
set NT9[$B]="as"
set NS9[$C]="itemdrop"
set NT9[$C]="id"
set NS9[$D]="nopowerups"
set NT9[$D]="np"
set NS9[$E]="supercreeps"
set NT9[$E]="sc"
set NS9[$F]="easymode"
set NT9[$F]="em"
set NS9[16]="duplicatemode"
set NT9[16]="du"
set NS9[17]="samehero"
set NT9[17]="sh"
set NS9[18]="voterandom"
set NT9[18]="vr"
set NS9[19]="reverse"
set NT9[19]="rv"
set NS9[20]="randomdraft"
set NT9[20]="rd"
set NS9[21]="onlymid"
set NT9[21]="om"
set NS9[22]="extendedleague"
set NT9[22]="xl"
set NS9[23]="nomid"
set NT9[23]="nm"
set NS9[24]="notop"
set NT9[24]="nt"
set NS9[25]="nobot"
set NT9[25]="nb"
set NS9[26]="noswap"
set NT9[26]="ns"
set NS9[27]="norepick"
set NT9[27]="nr"
set NS9[28]="captainsdraft"
set NT9[28]="cd"
set NS9[29]="singledraft"
set NT9[29]="sd"
set NS9[30]="poolingmode"
set NT9[30]="pm"
set NS9[31]="observerinfo"
set NT9[31]="oi"
set NS9[32]="miniheroes"
set NT9[32]="mi"
set NS9[33]="captainsmode"
set NT9[33]="cm"
set NS9[34]="fastrespawn"
set NT9[34]="fr"
set NS9[35]="meleeonly"
set NT9[35]="mo"
set NS9[36]="rangeonly"
set NT9[36]="ro"
set NS9[37]="experimentalrunes"
set NT9[37]="er"
set NS9[38]="randomside"
set NT9[38]="rs"
set NS9[39]="switchon"
set NT9[39]="so"
set NS9[40]="zoommode"
set NT9[40]="zm"
set NS9[41]="capturepoint"
set NT9[41]="cp"
set NS9[42]="supertower"
set NT9[42]="st"
set NS9[43]="highexp"
set NT9[43]="he"
set NS9[44]="normexp"
set NT9[44]="ne"
set NS9[45]="highgold"
set NT9[45]="hg"
set NS9[46]="normgold"
set NT9[46]="ng"
set NS9[47]="xtrememode"
set NT9[47]="xm"
set NS9[48]="dynaexp"
set NT9[48]="de"
set NS9[49]="dynagold"
set NT9[49]="dg"
set NS9[50]="advancedmode"
set NT9[50]="am"
set NS9[51]="beginnermode"
set NT9[51]="bm"
set NV9=51
set NW9=51
set NV9=NV9+1
set NS9[NV9]="msupercreeps"
set NT9[NV9]="mc"
set NV9=NV9+1
set NS9[NV9]="nonecronomicon"
set NT9[NV9]="nn"
set NV9=NV9+1
set NS9[NV9]="formlessmode"
set NT9[NV9]="fm"
set NV9=NV9+1
set NS9[NV9]="coolnames"
set NT9[NV9]="cn"
set NV9=NV9+1
set NS9[NV9]="alldagons"
set NT9[NV9]="ad"
set x=-1
loop
exitwhen x==LF7-1
set x=x+1
set y=x
loop
exitwhen y==LF7
set y=y+1
set z=1
loop
exitwhen z>NV9
if NS9[z]==SubString(MI9,x,y)then
set NU9[z]=true
set z=NV9+1
set MI9=NM9(MI9,x,y)
set x=-1
set LF7=StringLength(MI9)
set y=LF7
else
set z=z+1
endif
endloop
endloop
endloop
set x=-1
loop
exitwhen x==LF7-1
set x=x+1
set y=x
loop
exitwhen y==LF7
set y=y+1
set z=1
loop
exitwhen z>NV9
if NT9[z]==SubString(MI9,x,y)then
set NU9[z]=true
if(z<=NW9)then
set vY=false
endif
set z=NV9+1
set MI9=NM9(MI9,x,y)
set x=-1
set LF7=StringLength(MI9)
set y=LF7
else
set z=z+1
endif
endloop
endloop
endloop
set AP=NU9[1]
set AR=NU9[2]
set LM=NU9[3]
set MM=NU9[4]
set TR=NU9[5]
set DM=NU9[6]
set MR=NU9[7]
set SP=NU9[8]
set AA=NU9[9]
set AI=NU9[$A]
set AS=NU9[$B]
set ID=NU9[$C]
set NP=NU9[$D]
set SC=NU9[$E]
set EM=NU9[$F]
set DU=NU9[16]
set SH=NU9[17]
set VR=NU9[18]
set RV=NU9[19]
set RD=NU9[20]
set OM=NU9[21]
set XL=NU9[22]
set NM=NU9[23]
set NT=NU9[24]
set NB=NU9[25]
set NS=NU9[26]
set NR=NU9[27]
set CD=NU9[28]
set SD=NU9[29]
set PM=NU9[30]
set OI=NU9[31]
set MI=NU9[32]
set CM=NU9[33]
set FR=NU9[34]
set MO=NU9[35]
set RO=NU9[36]
set ER=NU9[37]
set RS=NU9[38]
set SO=NU9[39]
set ST=NU9[42]
set HE=NU9[43]
set NE=NU9[44]
set HG=NU9[45]
set NG=NU9[46]
set XM=NU9[47]
set DE=NU9[48]
set DG=NU9[49]
set AM=NU9[50]
set BM=NU9[51]
set MC=NU9[NW9+1]
set NN=NU9[NW9+2]
set FM=NU9[NW9+3]
set NY9=NU9[NW9+4]
set NZ9=NU9[NW9+5]
if MI9!=""or NH9(GetEventPlayerChatString())then
return
elseif(LM or VR or RV or RD or XL or CD or SO)then
call X37(Le,"此版AI以下模式被禁用: -lm, -vr, -rv, -rd, -xl, -cd, -so")
return
elseif FM and(AP or AR or LM or MM or TR or DM or MR or SP or AA or AI or AS or DU or SH or VR or RV or RD or XL or SD or MO or RO)then
call X37(Le,(GetObjectName((1848652373))))
return
elseif(AR and(CM or AP or TR or LM or MR or RV or RD or CD or SD))or(AP and(TR or MR))or(TR and(LM or MR))or(LM and MR)or(MM and SH)then
call X37(Le,(GetObjectName((1848652373))))
return
elseif(AA and(AI or AS or DM))or(AS and(AI or DM))or(AI and DM)then
call X37(Le,(GetObjectName((1848652373))))
return
elseif(RO and(MO or DM))or(MO and DM)then
call X37(Le,(GetObjectName((1848652373))))
return
elseif RV and(CM or AR or TR or MR or LM or DM or SH)then
call X37(Le,(GetObjectName((1848652373))))
return
elseif(DM and(CM or TR or LM or MR or SH or RV or RD or CD or SD))or(MM and DM)or(SH and DM)then
call X37(Le,(GetObjectName((1848652372))))
return
elseif LM and(CM or AP or RD or CD or AR or SD or MM or TR or DM or MR or AA or AI or AS or ID or NP or SC or EM or DU or SH or RV or OM or NB or NM or NT or XL or MO or RO)then
call X37(Le,(GetObjectName((1848652593))))
return
elseif XL and(CM or AP or RD or CD or AR or SD or MM or TR or DM or MR or AA or AI or AS or ID or NP or SC or EM or DU or SH or RV or OM or NB or NM or NT or LM or RO or MO)then
call X37(Le,(GetObjectName((1848652594))))
return
elseif CM and(SP or XL or AP or RD or CD or AR or SD or MM or TR or DM or MR or AA or AI or AS or ID or NP or SC or EM or DU or SH or RV or OM or NB or NM or NT or LM or MO or RO)then
call X37(Le,(GetObjectName((1848652594))))
return
elseif RD and(CD or CM or AP or LM or AR or SD or MM or TR or DM or MR or AA or AI or AS or SH or RV or RO or MO)then
call X37(Le,(GetObjectName((1848652373))))
return
elseif CD and(RD or CM or AP or LM or AR or SD or MM or TR or DM or MR or AA or AI or AS or SH or RV or RO or MO)then
call X37(Le,(GetObjectName((1848652373))))
return
elseif MR and(CM or AP or LM or AR or SD or MM or TR or DM or AA or AI or AS or SH or RV or RO or MO)then
call X37(Le,(GetObjectName((1848652373))))
return
elseif SD and(CM or AP or LM or AR or RD or CD or MM or TR or DM or MR or AA or AI or AS or SH or RV or RO or MO)then
call X37(Le,(GetObjectName((1848652373))))
return
elseif VR and(CM or LM or RD or CD or SD or AR or MM or TR or DM or MR or AA or AI or AS or SH or RV or RO or MO)then
call X37(Le,(GetObjectName((1848652373))))
return
elseif MM and P8(X7)!=P8(Y7)then
call X37(Le,(GetObjectName((1848652596))))
return
elseif VR and P8(X7)!=P8(Y7)then
call X37(Le,(GetObjectName((1848652596))))
return
elseif RV and P8(X7)!=P8(Y7)then
call X37(Le,(GetObjectName((1848652596))))
return
elseif(LM or XL)and(TZ7(Z7[1])or TZ7(Z7[2])or TZ7(Z7[3])or TZ7(Z7[4])or TZ7(Z7[5])or TZ7(A7[1])or TZ7(A7[2])or TZ7(A7[3])or TZ7(A7[4])or TZ7(A7[5]))then
call X37(Le,"不支持联赛模式")
return
elseif(BM and AM)or(BM and XM)or(AM and XM)or(NE and HE)or(HG and NG)or((AM or BM or XM)and(NE or HE or DE or HG or NG or DG))then
call X37(Le,"无效的游戏模式组合！")
return
endif
if FR or CM or AP or AR or LM or MM or TR or DM or MR or SP or AA or AI or AS or ID or NP or SC or DU or EM or SH or VR or RV or RD or CD or OM or NB or NM or NT or NS or NR or XL or SD or PM or OI or MI or MO or RO or ER or RS or SO or ST or MC or(HE or NE or HG or DE or NG or DG)or NN or FM or(AM or BM or XM)then
call DisableTrigger(GetTriggeringTrigger())
else
return
endif
if CM==false then
call Q08()
call G29()
endif
if LM==false and XL==false then
call MG9()
endif
set O14=NN9(GetEventPlayerChatString())
if(YK4)then
call C27("Mode"+O14,0)
else
call C27("Mode"+O14,GetPlayerId(Le))
endif
set Y8=false
if LM then
set vo="Leaguemode"
elseif XL then
set vo="Extended League"
elseif RD then
set vo="Randomdraft"
elseif CD then
set vo="Captainsdraft"
elseif MM then
set vo="Mirrormatch"
elseif DM then
set vo="Deathmatch"
elseif RV then
set vo="Reverse"
elseif AP then
set vo="Allpick"
elseif AR then
set vo="Allrandom"
elseif TR then
set vo="Teamrandom"
elseif MR then
set vo="Moderandom"
elseif VR then
set vo="Voterandom"
elseif SD then
set vo="Singledraft"
elseif CM then
set vo="Captainsmode"
endif
if CM then
call NJ9("队长征召模式(|cFFFF0000CM|r)")
endif
if LM then
call NJ9("联赛模式(|cFFFF0000LM|r)")
endif
if XL then
call NJ9("扩展联赛模式(|cFFFF0000XL|r)")
endif
if RD then
call NJ9("随机征召模式(|cFFFF0000RD|r)")
endif
if CD then
call NJ9("队长随机模式(|cFFFF0000CD|r)")
endif
if DM then
call NJ9("死亡模式(|cFFFF0000DM|r)")
endif
if MM then
call NJ9("镜像模式(|cFFFF0000MM|r)")
endif
if AP then
call NJ9("全阵营模式(|cFFFF0000AP|r)")
endif
if AR then
call NJ9("全体随机(|cFFFF0000AR|r)")
endif
if VR then
call NJ9("随机阵容选举模式(|cFFFF0000VR|r)")
endif
if MR then
call NJ9("模式随机(|cFFFF0000MR|r)")
endif
if TR then
call NJ9("团队随机模式(|cFFFF0000TR|r)")
endif
if SP then
call NJ9("洗牌模式(|cFFFF0000SP|r)")
endif
if AA then
call NJ9("全敏捷英雄模式(|cFFFF0000AA|r)")
endif
if AS then
call NJ9("全力量英雄模式(|cFFFF0000AS|r)")
endif
if AI then
call NJ9("全智力英雄模式(|cFFFF0000AI|r)")
endif
if RO then
call NJ9("全远程模式(|cFFFF0000RO|r)")
endif
if MO then
call NJ9("全近战模式(|cFFFF0000MO|r)")
endif
if DU then
call NJ9("复选模式(|cFFFF0000DU|r)")
endif
if ID then
call NJ9("物品掉落模式(|cFFFF0000ID|r)")
endif
if NP then
call NJ9("无神符模式(|cFFFF0000NP|r)")
endif
if SC then
call NJ9("超级兵模式(|cFFFF0000SC|r)")
endif
if EM then
call NJ9("简单模式(|cFFFF0000EM|r)")
endif
if SH then
call NJ9("相同英雄模式(|cFFFF0000SH|r)")
endif
if RV then
call NJ9("反转模式(|cFFFF0000RV|r)")
endif
if OM then
call NJ9("中路出兵模式(|cFFFF0000OM|r)")
endif
if NM then
call NJ9("中路禁兵模式(|cFFFF0000NM|r)")
endif
if NB then
call NJ9("下路禁兵模式(|cFFFF0000NB|r)")
endif
if NT then
call NJ9("上路禁兵模式(|cFFFF0000NT|r)")
endif
if NS then
call NJ9("交换禁止模式(|cFFFF0000NS|r)")
endif
if NR then
call NJ9("禁止重选模式(|cFFFF0000NR|r)")
endif
if SD then
call NJ9("单选方案模式(|cFFFF0000SD|r)")
endif
if PM then
call NJ9("养人模式(|cFFFF0000PM|r)")
endif
if OI then
call NJ9("裁判模式(|cFFFF0000OI|r)")
endif
if MI then
call NJ9("迷你模式(|cFFFF0000MI|r)")
endif
if FR then
call NJ9("快速复活模式(|cFFFF0000FR|r)")
endif
if ER then
call NJ9("实验神符模式(|cFFFF0000ER|r)")
endif
if RS then
call NJ9("随机选择权模式(|cFFFF0000RS|r)")
endif
if SO then
call NJ9("换位模式(|cFFFF0000SO|r)")
endif
if ST then
call NK9("超级塔模式(|cFFFF0000ST|r)")
endif
if MC then
call NK9("增强超级兵(|cFFFF0000MC|r)")
endif
if BM then
call NK9("初级玩家模式(|cFFFF0000BM|r)")
endif
if AM then
call NK9("普通玩家模式(|cFFFF0000AM|r)")
endif
if XM then
call NK9("高级玩家模式(|cFFFF0000XM|r)")
endif
if HE then
call NK9("高经验(|cFFFF0000HE|r)")
endif
if NE then
call NK9("普通经验(|cFFFF0000NE|r)")
endif
if DE then
call NK9("动态经验(|cFFFF0000DE|r)")
endif
if HG then
call NK9("高金钱(|cFFFF0000HG|r)")
endif
if NG then
call NK9("普通金钱(|cFFFF0000NG|r)")
endif
if DG then
call NK9("动态金钱(|cFFFF0000DG|r)")
endif
if NN then
call NK9("无死灵书模式(|cFFFF0000NN|r)")
endif
if FM then
call NK9("无形模式(|cFFFF0000FM|r)")
endif
if NY9 then
call NK9("酷名模式(|cFFFF0000CN|r)")
endif
if NZ9 then
call NK9("全红杖模式(|cFFFF0000AD|r)")
endif
call VV7(bj_FORCE_ALL_PLAYERS,20.," ")
if NR9==1 then
call VV7(bj_FORCE_ALL_PLAYERS,20.,Q[GetPlayerId(Le)]+(KZ4[GetPlayerId(Le)])+"|r"+" "+GetObjectName(1848653361)+" "+cx)
else
call VV7(bj_FORCE_ALL_PLAYERS,20.,GetObjectName(1848657998)+" "+cx)
endif
call VV7(bj_FORCE_ALL_PLAYERS,20.,(GetObjectName((1848653363)))+" -gameinfo.")
call VV7(bj_FORCE_ALL_PLAYERS,20.," ")
call XL7("N39",SP)
call XL7("N69",RS)
call XL7("NL9",DM)
call XL7("N19",MM)
call XL7("N09",SH)
call XL7("N59",AA)
call XL7("N29",AI)
call XL7("N_9",AS)
call XL7("O49",RO)
call XL7("O79",MO)
call XL7("O89",DU)
call XL7("O99",AR)
call XL7("OD9",AP)
call XL7("OE9",TR)
call XL7("OF9",SD)
call XL7("OG9",MR)
call XL7("OH9",ID)
call XL7("OI9",NP)
call XL7("OJ9",SC)
call XL7("OK9",EM)
call XL7("OM9",OM)
call XL7("ON9",NB)
call XL7("OO9",NT)
call XL7("OP9",NM)
call XL7("OQ9",NS)
call XL7("StartSwitchOn",SO)
call XL7("OR9",NR)
call XL7("OS9",PM)
call XL7("OT9",OI)
call XL7("OU9",MI)
call XL7("OV9",FR)
call XL7("OW9",ER)
call XL7("OX9",ST)
call XL7("OY9",MC)
if AP then
set RZZZ=true
endif
if CM then
set RZZ0=true
endif
if BM then
set NE=true
set NG=true
set DE=false
set DG=false
endif
if AM then
set NG=true
set DE=true
set DG=true
set FX70=true
endif
if XM then
set HG=true
set DE=true
set DG=true
set DG0=true
call ExecuteFunc("C0FD")
endif
call XL7("OZ9",DE)
call XL7("OA9",DG)
call XL7("OB9",FM)
call XL7("OC9",NY9)
call XL7("O39",NZ9)
call XL7("O69",CM)
set BT=HE
set LT=NE
set CT=HG
set WT=NG
set XT=NN
set Q94=true
call YP8(0,0,false)
if SN4==false and O54==false then
call H79()
endif
call Q68()
endfunction
function OL9 takes nothing returns nothing
call NP9(GetEventPlayerChatString(),1)
endfunction
function O19 takes nothing returns boolean
if YJ4!="" and Q94==false then
set YK4=true
call NP9("-"+(YJ4),2)
else
call TriggerRegisterPlayerChatEvent(YI4,Le,"-",false)
endif
return false
endfunction
function OD9 takes nothing returns nothing
local location LV7=GetRectCenter(pr)
local location LW7=GetRectCenter(qr)
local integer x=1
set P4=true
set QD4=120
loop
exitwhen x>5
if TA7(Z7[x])then
call CreateUnitAtLoc(Z7[x],1848651843,LW7,bj_UNIT_FACING)
endif
if TA7(A7[x])then
call CreateUnitAtLoc(A7[x],1848651843,LV7,bj_UNIT_FACING)
endif
set x=x+1
endloop
call RemoveLocation(LV7)
call RemoveLocation(LW7)
set LV7=null
set LW7=null
endfunction
function O09 takes integer VL7,boolean O59 returns boolean
local boolean O29=false
local integer i
local integer j=1
if(O59)then
if(BC4==1)then
return false
endif
set i=BC4-1
loop
if(VL7==B64[j])then
return true
endif
set j=j+1
exitwhen(j>i)
endloop
else
if(B34==1)then
return false
endif
set i=B34-1
loop
if(VL7==BL4[j])then
return true
endif
set j=j+1
exitwhen(j>i)
endloop
endif
return O29
endfunction
function O_9 takes integer VL7,boolean O59 returns nothing
if(O59)then
set B64[BC4]=VL7
set BC4=BC4+1
else
set BL4[B34]=VL7
set B34=B34+1
endif
endfunction
function P49 takes integer VL7 returns nothing
local integer i=1
local boolean P79=false
loop
if(VL7==BB4[i])then
set BB4[i]=0
call O_9(VL7,false)
set P79=true
endif
set i=i+1
exitwhen(i>34 or P79)
endloop
endfunction
function P89 takes nothing returns integer
local integer ID7=0
local integer VL7=0
loop
set ID7=GetRandomInt(1,34)
exitwhen(BB4[ID7]>0 and O09(BB4[ID7],false)==false)
endloop
set VL7=BB4[ID7]
call O_9(VL7,false)
set BB4[ID7]=0
return VL7
endfunction
function P99 takes integer VL7 returns nothing
local integer i=1
local boolean P79=false
loop
if(VL7==BA4[i])then
set BA4[i]=0
call O_9(VL7,true)
set P79=true
endif
set i=i+1
exitwhen(i>20 or P79)
endloop
endfunction
function PD9 takes nothing returns integer
local integer ID7=0
local integer VL7=0
loop
set ID7=GetRandomInt(1,20)
exitwhen(BA4[ID7]>0 and O09(BB4[ID7],true)==false)
endloop
set VL7=BA4[ID7]
call O_9(VL7,true)
set BA4[ID7]=0
return VL7
endfunction
function PE9 takes nothing returns boolean
local integer i=1
local integer PF9=0
local integer VL7=0
if not A04 then
call OZ7(GetTriggeringTrigger())
return false
endif
if TZ7(A14)then
if GetPlayerState(A14,PLAYER_STATE_RESOURCE_GOLD)>0 then
set B04=B04+1
if B04>2 then
if B54 then
set VL7=PD9()
else
set VL7=P89()
endif
loop
exitwhen(IssueNeutralImmediateOrderById(A14,BZ4[i],VL7)or GetPlayerState(A14,PLAYER_STATE_RESOURCE_GOLD)==0)
set i=i+1
if(i>$C)then
if B54 then
set VL7=PD9()
else
set VL7=P89()
endif
set i=1
set PF9=PF9+1
if(PF9>5)then
exitwhen true
endif
endif
endloop
set B04=0
endif
endif
endif
return true
endfunction
function PG9 takes nothing returns nothing
call UR7(1160786502)
call UR7(1311780946)
call UR7(1311788336)
call UR7(1160786507)
call UR7(1311788343)
call UR7(1311788363)
call UR7(1211117616)
call UR7(1311788373)
call UR7(1429221430)
call UR7(1311788356)
endfunction
function PH9 takes nothing returns nothing
set BB4[1]=1211117653
set BB4[2]=1162032951
set BB4[3]=1211117617
set BB4[4]=1212363833
set BB4[5]=1215657064
set BB4[6]=1432580716
set BB4[7]=1433631084
set BB4[8]=1315988077
set BB4[9]=1215063922
set BB4[$A]=1315074670
set BB4[$B]=1211117636
set BB4[$C]=1430466872
set BB4[$D]=1430468144
set BB4[$E]=1429221441
set BB4[$F]=1429221430
set BB4[16]=1313026096
set BB4[17]=1430467634
set BB4[18]=1429221424
set BB4[19]=1430468913
set BB4[20]=1160785972
set BB4[21]=1162032181
set BB4[22]=1162032951
set BB4[23]=1160785970
set BB4[24]=1429221443
set BB4[25]=1211117640
set BB4[26]=1429221445
set BB4[27]=1328558154
set BB4[28]=1432510828
set BB4[29]=1332766568
set BB4[30]=1429221456
set BB4[31]=1315007329
set BB4[32]=1211117653
set BB4[33]=1311787088
set BB4[34]=1164207469
endfunction
function PI9 takes nothing returns nothing
set BA4[1]=1211117653
set BA4[2]=1214931305
set BA4[3]=1215657064
set BA4[4]=1311781174
set BA4[5]=1315074670
set BA4[6]=1430466872
set BA4[7]=1162032951
set BA4[8]=1311787088
set BA4[9]=1211119409
set BA4[$A]=1328558390
set BA4[$B]=1332766568
set BA4[$C]=1433168227
set BA4[$D]=1433631084
set BA4[$E]=1333027688
set BA4[$F]=1328558160
set BA4[16]=1215723364
set BA4[17]=1211117654
set BA4[18]=1432510828
set BA4[19]=1315334514
set BA4[20]=1162032181
endfunction
function PJ9 takes nothing returns boolean
local integer i=1
local integer PK9=0
loop
exitwhen i>5
if TZ7(Z7[i])then
if(IssueNeutralImmediateOrderById(Z7[i],B14[i],1747990094)==false)then
set PK9=1
loop
exitwhen(PK9>5)or IssueNeutralImmediateOrderById(Z7[i],B14[PK9],1747990094)
set PK9=PK9+1
endloop
endif
endif
if TZ7(A7[i])then
if(IssueNeutralImmediateOrderById(A7[i],B14[6+i],1747990094)==false)then
set PK9=1
loop
exitwhen(PK9>5)or IssueNeutralImmediateOrderById(A7[i],B14[6+PK9],1747990094)
set PK9=PK9+1
endloop
endif
endif
set i=i+1
endloop
call OZ7(GetTriggeringTrigger())
return false
endfunction
function PM9 takes string S,real PN9,real PO9,real PP9,real PQ9,real PR9,boolean PS9,integer r,integer g,integer b returns image
set AB4=CreateImage(S,PN9,PO9,0,PP9-(PN9/2),PQ9-(PO9/2),PR9,0,0,0,2)
call SetImageRenderAlways(AB4,true)
call ShowImage(AB4,PS9)
call SetImageColor(AB4,r,g,b,$FF)
return AB4
endfunction
function PT9 takes image i returns nothing
call ShowImage(i,false)
call DestroyImage(i)
endfunction
function PU9 takes integer PV9 returns nothing
local real x=AC4+40
local real y=A34-50
local integer PW9=$FF
local integer PX9=0
local integer PY9=0
local integer PZ9=0
local integer PA9=0
local integer PB9=$FF
local integer r
local integer g
local integer b
if PV9==1 then
set r=PW9
set g=PX9
set b=PY9
set AW4=PM9("Fonts\\B.blp",90,90,x-40,y,0,true,r,g,b)
set AX4=PM9("Fonts\\A.blp",90,90,x,y,0,true,r,g,b)
set AY4=PM9("Fonts\\N.blp",90,90,x+50,y,0,true,r,g,b)
elseif PV9==2 then
set r=PZ9
set g=PA9
set b=PB9
call PT9(AW4)
call PT9(AX4)
call PT9(AY4)
set AW4=PM9("Fonts\\P.blp",90,90,x-60,y,0,true,r,g,b)
set AX4=PM9("Fonts\\I.blp",90,90,x-20,y,0,true,r,g,b)
set AY4=PM9("Fonts\\C.blp",90,90,x,y,0,true,r,g,b)
set AZ4=PM9("Fonts\\K.blp",90,90,x+45,y,0,true,r,g,b)
elseif PV9==3 then
set r=PW9
set g=PX9
set b=PY9
call PT9(AW4)
call PT9(AX4)
call PT9(AY4)
call PT9(AZ4)
set AW4=PM9("Fonts\\B.blp",90,90,x-40,y,0,true,r,g,b)
set AX4=PM9("Fonts\\A.blp",90,90,x,y,0,true,r,g,b)
set AY4=PM9("Fonts\\N.blp",90,90,x+50,y,0,true,r,g,b)
elseif PV9==4 then
set r=PZ9
set g=PA9
set b=PB9
call PT9(AW4)
call PT9(AX4)
call PT9(AY4)
set AW4=PM9("Fonts\\P.blp",90,90,x-60,y,0,true,r,g,b)
set AX4=PM9("Fonts\\I.blp",90,90,x-20,y,0,true,r,g,b)
set AY4=PM9("Fonts\\C.blp",90,90,x,y,0,true,r,g,b)
set AZ4=PM9("Fonts\\K.blp",90,90,x+45,y,0,true,r,g,b)
elseif PV9==5 then
call PT9(AW4)
call PT9(AX4)
call PT9(AY4)
call PT9(AZ4)
endif
endfunction
function PC9 takes integer i,integer P39 returns string
if i<0 then
set i=0
endif
if TimerGetElapsed(W)<$F then
return "|c00555555"+I2S(i)
endif
if AK4==3 then
return "|c00555555"+I2S(i)
endif
if AK4==1 and P39!=1 then
return "|c00555555"+I2S(i)
elseif AK4==2 and P39!=2 then
return "|c00555555"+I2S(i)
elseif i==0 then
return "|c00555555"+I2S(i)
elseif i<6 then
return "|c00ff0303"+I2S(i)
else
return I2S(i)
endif
endfunction
function P69 takes nothing returns boolean
local multiboarditem PL9
local integer i
local integer P19
local integer P09
local integer P59=7
local integer P29=0
set P19=1
set P09=P29
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemStyle(PL9,true,false)
call MultiboardSetItemWidth(PL9,.5)
call MultiboardSetItemValue(PL9,Q[GetPlayerId(Z7[1])]+(KZ4[GetPlayerId((Z7[1]))])+"|r")
call MultiboardReleaseItem(PL9)
set P19=P19+2
set P09=P29
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemStyle(PL9,true,false)
call MultiboardSetItemValue(PL9,"|c006699CC"+GetObjectName(1848657238))
call MultiboardSetItemWidth(PL9,.035)
call MultiboardReleaseItem(PL9)
set i=0
set P19=P19
set P09=P29+i+1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemWidth(PL9,.015)
if AM4[i]>0 then
call MultiboardSetItemStyle(PL9,false,true)
call MultiboardSetItemIcon(PL9,MH4[AM4[i]])
endif
call MultiboardReleaseItem(PL9)
set i=1
set P09=P29+i+1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemWidth(PL9,.015)
if AM4[i]>0 then
call MultiboardSetItemStyle(PL9,false,true)
call MultiboardSetItemIcon(PL9,MH4[AM4[i]])
endif
call MultiboardReleaseItem(PL9)
set i=2
set P09=P29+i+1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemWidth(PL9,.015)
if AM4[i]>0 then
call MultiboardSetItemStyle(PL9,false,true)
call MultiboardSetItemIcon(PL9,MH4[AM4[i]])
endif
call MultiboardReleaseItem(PL9)
set i=3
set P09=P29+i+1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemWidth(PL9,.015)
if AM4[i]>0 then
call MultiboardSetItemStyle(PL9,false,true)
call MultiboardSetItemIcon(PL9,MH4[AM4[i]])
endif
call MultiboardReleaseItem(PL9)
set i=4
set P09=P29+i+1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemWidth(PL9,.015)
if AM4[i]>0 then
call MultiboardSetItemStyle(PL9,false,true)
call MultiboardSetItemIcon(PL9,MH4[AM4[i]])
endif
call MultiboardReleaseItem(PL9)
set P19=P19+2
set P09=P29
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemStyle(PL9,true,false)
call MultiboardSetItemValue(PL9,"|c006699CC"+GetObjectName(1848657240))
call MultiboardSetItemWidth(PL9,.035)
call MultiboardReleaseItem(PL9)
set i=0
set P19=P19
set P09=P29+i+1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemWidth(PL9,.015)
if AQ4[i]>0 then
call MultiboardSetItemStyle(PL9,false,true)
call MultiboardSetItemIcon(PL9,MH4[AQ4[i]])
endif
call MultiboardReleaseItem(PL9)
set i=1
set P09=P29+i+1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemWidth(PL9,.015)
if AQ4[i]>0 then
call MultiboardSetItemStyle(PL9,false,true)
call MultiboardSetItemIcon(PL9,MH4[AQ4[i]])
endif
call MultiboardReleaseItem(PL9)
set i=2
set P09=P29+i+1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemWidth(PL9,.015)
if AQ4[i]>0 then
call MultiboardSetItemStyle(PL9,false,true)
call MultiboardSetItemIcon(PL9,MH4[AQ4[i]])
endif
call MultiboardReleaseItem(PL9)
set i=3
set P09=P29+i+1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemWidth(PL9,.015)
if AQ4[i]>0 then
call MultiboardSetItemStyle(PL9,false,true)
call MultiboardSetItemIcon(PL9,MH4[AQ4[i]])
endif
call MultiboardReleaseItem(PL9)
set i=4
set P09=P29+i+1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemWidth(PL9,.015)
if AQ4[i]>0 then
call MultiboardSetItemStyle(PL9,false,true)
call MultiboardSetItemIcon(PL9,MH4[AQ4[i]])
endif
call MultiboardReleaseItem(PL9)
set P19=P19+2
set P09=P29
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemStyle(PL9,true,false)
call MultiboardSetItemValue(PL9,"|c006699CC"+GetObjectName(1848657237))
call MultiboardSetItemWidth(PL9,.035)
call MultiboardReleaseItem(PL9)
set P09=P29+1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemStyle(PL9,true,false)
call MultiboardSetItemValue(PL9,PC9(AI4[1],1))
call MultiboardSetItemWidth(PL9,.035)
call MultiboardReleaseItem(PL9)
set P19=P19+1
set P09=P29
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemStyle(PL9,true,false)
call MultiboardSetItemValue(PL9,"|c006699CC"+GetObjectName(1848657236))
call MultiboardSetItemWidth(PL9,.035)
call MultiboardReleaseItem(PL9)
set P09=P29+1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemStyle(PL9,true,false)
call MultiboardSetItemValue(PL9,PC9(AH4[1],1))
call MultiboardSetItemWidth(PL9,.035)
call MultiboardReleaseItem(PL9)
set P19=P19+2
set P09=P29
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemStyle(PL9,true,false)
call MultiboardSetItemValue(PL9,"|c006699CC"+GetObjectName(1848657241))
call MultiboardSetItemWidth(PL9,.035)
call MultiboardReleaseItem(PL9)
set P09=P29+1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemStyle(PL9,true,false)
if TimerGetElapsed(W)<$F then
call MultiboardSetItemValue(PL9,"|c00555555"+GetObjectName(1848657457))
elseif AK4==1 then
call MultiboardSetItemValue(PL9,GetObjectName(1848657460))
elseif AK4==2 then
call MultiboardSetItemValue(PL9,"|c00555555"+GetObjectName(1848657457))
else
call MultiboardSetItemValue(PL9,"|c00555555"+GetObjectName(1848657458))
endif
call MultiboardSetItemWidth(PL9,.035)
call MultiboardReleaseItem(PL9)
set P19=1
set P09=P59
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemStyle(PL9,true,false)
call MultiboardSetItemWidth(PL9,1.5)
call MultiboardSetItemValue(PL9,"   "+Q[GetPlayerId(A7[1])]+(KZ4[GetPlayerId((A7[1]))])+"|r")
call MultiboardReleaseItem(PL9)
set P19=P19+2
set P09=P59-1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemStyle(PL9,true,false)
call MultiboardSetItemValue(PL9,"|c006699CC"+" "+GetObjectName(1848657238))
call MultiboardSetItemWidth(PL9,.035)
call MultiboardReleaseItem(PL9)
set i=0
set P09=P59+i+1-1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemWidth(PL9,.015)
if AN4[i]>0 then
call MultiboardSetItemStyle(PL9,false,true)
call MultiboardSetItemIcon(PL9,MH4[AN4[i]])
endif
call MultiboardReleaseItem(PL9)
set i=1
set P09=P59+i+1-1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemWidth(PL9,.015)
if AN4[i]>0 then
call MultiboardSetItemStyle(PL9,false,true)
call MultiboardSetItemIcon(PL9,MH4[AN4[i]])
endif
call MultiboardReleaseItem(PL9)
set i=2
set P09=P59+i+1-1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemWidth(PL9,.015)
if AN4[i]>0 then
call MultiboardSetItemStyle(PL9,false,true)
call MultiboardSetItemIcon(PL9,MH4[AN4[i]])
endif
call MultiboardReleaseItem(PL9)
set i=3
set P09=P59+i+1-1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemWidth(PL9,.015)
if AN4[i]>0 then
call MultiboardSetItemStyle(PL9,false,true)
call MultiboardSetItemIcon(PL9,MH4[AN4[i]])
endif
call MultiboardReleaseItem(PL9)
set i=4
set P09=P59+i+1-1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemWidth(PL9,.015)
if AN4[i]>0 then
call MultiboardSetItemStyle(PL9,false,true)
call MultiboardSetItemIcon(PL9,MH4[AN4[i]])
endif
call MultiboardReleaseItem(PL9)
set P19=P19+2
set P09=P59-1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemStyle(PL9,true,false)
call MultiboardSetItemValue(PL9,"|c006699CC"+" "+GetObjectName(1848657240))
call MultiboardSetItemWidth(PL9,.035)
call MultiboardReleaseItem(PL9)
set i=0
set P09=P59+i+1-1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemWidth(PL9,.015)
if AR4[i]>0 then
call MultiboardSetItemStyle(PL9,false,true)
call MultiboardSetItemIcon(PL9,MH4[AR4[i]])
endif
call MultiboardReleaseItem(PL9)
set i=1
set P09=P59+i+1-1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemWidth(PL9,.015)
if AR4[i]>0 then
call MultiboardSetItemStyle(PL9,false,true)
call MultiboardSetItemIcon(PL9,MH4[AR4[i]])
endif
call MultiboardReleaseItem(PL9)
set i=2
set P09=P59+i+1-1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemWidth(PL9,.015)
if AR4[i]>0 then
call MultiboardSetItemStyle(PL9,false,true)
call MultiboardSetItemIcon(PL9,MH4[AR4[i]])
endif
call MultiboardReleaseItem(PL9)
set i=3
set P09=P59+i+1-1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemWidth(PL9,.015)
if AR4[i]>0 then
call MultiboardSetItemStyle(PL9,false,true)
call MultiboardSetItemIcon(PL9,MH4[AR4[i]])
endif
call MultiboardReleaseItem(PL9)
set i=4
set P09=P59+i+1-1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemWidth(PL9,.015)
if AR4[i]>0 then
call MultiboardSetItemStyle(PL9,false,true)
call MultiboardSetItemIcon(PL9,MH4[AR4[i]])
endif
call MultiboardReleaseItem(PL9)
set P19=P19+2
set P09=P59-2
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemStyle(PL9,true,false)
call MultiboardSetItemValue(PL9,"|c006699CC"+GetObjectName(1848657237))
call MultiboardSetItemWidth(PL9,.035)
call MultiboardReleaseItem(PL9)
set P09=P59-1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemStyle(PL9,true,false)
call MultiboardSetItemValue(PL9,PC9(AI4[2],2))
call MultiboardSetItemWidth(PL9,.035)
call MultiboardReleaseItem(PL9)
set P19=P19+1
set P09=P59-2
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemStyle(PL9,true,false)
call MultiboardSetItemValue(PL9,"|c006699CC"+GetObjectName(1848657236))
call MultiboardSetItemWidth(PL9,.035)
call MultiboardReleaseItem(PL9)
set P09=P59-1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemStyle(PL9,true,false)
call MultiboardSetItemValue(PL9,PC9(AH4[2],2))
call MultiboardSetItemWidth(PL9,.035)
call MultiboardReleaseItem(PL9)
set P19=P19+2
set P09=P59-2
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemStyle(PL9,true,false)
call MultiboardSetItemValue(PL9,"|c006699CC"+GetObjectName(1848657241))
call MultiboardSetItemWidth(PL9,.035)
call MultiboardReleaseItem(PL9)
set P09=P59-1
set PL9=MultiboardGetItem(AV4,P19,P09)
call MultiboardSetItemStyle(PL9,true,false)
if TimerGetElapsed(W)<$F then
call MultiboardSetItemValue(PL9,"|c00555555"+GetObjectName(1848657457))
elseif AK4==2 then
call MultiboardSetItemValue(PL9,GetObjectName(1848657460))
elseif AK4==1 then
call MultiboardSetItemValue(PL9,"|c00555555"+GetObjectName(1848657457))
else
call MultiboardSetItemValue(PL9,"|c00555555"+GetObjectName(1848657458))
endif
call MultiboardSetItemWidth(PL9,.035)
call MultiboardReleaseItem(PL9)
return false
endfunction
function P_9 takes nothing returns nothing
local integer Q49=$C
local integer Q79=$E
local trigger t=CreateTrigger()
local integer i
local multiboarditem PL9
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function P69))
set AV4=CreateMultiboard()
call MultiboardSetItemsWidth(AV4,.015)
call MultiboardSetRowCount(AV4,Q49)
call MultiboardSetColumnCount(AV4,Q79)
call MultiboardSetTitleText(AV4,GetObjectName(1848658742))
call MultiboardSetItemsStyle(AV4,false,false)
call MultiboardMinimize(AV4,false)
call MultiboardDisplay(AV4,true)
set i=0
loop
exitwhen i>Q79
set PL9=MultiboardGetItem(AV4,0,i)
call MultiboardSetItemWidth(PL9,.015)
call MultiboardReleaseItem(PL9)
set i=i+1
endloop
set t=null
set PL9=null
endfunction
function Q89 takes nothing returns boolean
local unit Q99=GetSoldUnit()
local player p=GetOwningPlayer(Q99)
local integer i
local real x
local real y
local real a
if GetUnitTypeId(Q99)==1747990094 and IsPlayerAlly(GetOwningPlayer(Q99),GetOwningPlayer(GetSellingUnit()))then
if M7[GetPlayerId(p)]!=null then
call X37(p,GetObjectName(1848657459))
call KillUnit(Q99)
set Q99=null
set p=null
return false
endif
set x=GetUnitX(GetSellingUnit())
set y=GetUnitY(GetSellingUnit())
set i=KJ7(GetUnitTypeId(GetSellingUnit()))
set a=GetUnitFacing(GetSellingUnit())
call RemoveUnit(GetSellingUnit())
call CreateUnit(p,i,x,y,a)
endif
if GetUnitTypeId(Q99)==1747990094 then
call KillUnit(Q99)
endif
if M7[GetPlayerId(Z7[1])]!=null and M7[GetPlayerId(Z7[2])]!=null and M7[GetPlayerId(Z7[3])]!=null and M7[GetPlayerId(Z7[4])]!=null and M7[GetPlayerId(Z7[5])]!=null and M7[GetPlayerId(A7[1])]!=null and M7[GetPlayerId(A7[2])]!=null and M7[GetPlayerId(A7[3])]!=null and M7[GetPlayerId(A7[4])]!=null and M7[GetPlayerId(A7[5])]!=null then
call OZ7(GetTriggeringTrigger())
endif
set Q99=null
set p=null
return false
endfunction
function QD9 takes player pl,boolean J4 returns nothing
local integer O5=GetPlayerId(pl)
local integer T8
local integer U8
if not J4 then
set B24[64+O5]=(not B24[64+O5])
call DisplayTimedTextToPlayer(pl,0,0,10.,"AI面板已经"+JK7(B24[64+O5],GetObjectName(1496403790),GetObjectName(1498369862)))
if not B24[48+O5]then
return
endif
else
set B24[48+O5]=true
endif
set B24[32+O5]=(B24[64+O5]and B24[48+O5])
set O5=GetPlayerId(GetLocalPlayer())
set T8=1
set U8=3+HC4+HB4
loop
exitwhen T8>U8
call x7(T4,$F,T8,JO7(B24[32+O5],L_4,.01))
set T8=T8+1
endloop
if(pl==GetLocalPlayer())then
set LG4=IsMultiboardMinimized(T4)
call MultiboardMinimize(T4,true)
endif
call RK8()
if(pl==GetLocalPlayer())then
call MultiboardMinimize(T4,LG4)
endif
endfunction
function K89 takes nothing returns nothing
call QD9(GetTriggerPlayer(),false)
endfunction
function QE9 takes player pl,boolean J4 returns nothing
local integer O5=GetPlayerId(pl)
local integer T8
local integer U8
local real KD7
if not(EU or FU)then
return
endif
if not J4 then
set B24[112+O5]=(not B24[112+O5])
call DisplayTimedTextToPlayer(pl,0,0,10.,"AI动态经验/金钱面板已经"+JK7(B24[112+O5],GetObjectName(1496403790),GetObjectName(1498369862)))
if not B24[96+O5]then
return
endif
else
set B24[96+O5]=true
endif
set B24[80+O5]=(B24[112+O5]and B24[96+O5])
set O5=GetPlayerId(GetLocalPlayer())
set KD7=0
if(EU)then
set KD7=KD7+L_4/2
endif
if(FU)then
set KD7=KD7+L_4/2
endif
set T8=1
set U8=3+HC4+HB4
loop
exitwhen T8>U8
call x7(T4,$E,T8,JO7(B24[80+O5],KD7,.01))
set T8=T8+1
endloop
if(pl==GetLocalPlayer())then
set LG4=IsMultiboardMinimized(T4)
call MultiboardMinimize(T4,true)
endif
call RK8()
if(pl==GetLocalPlayer())then
call MultiboardMinimize(T4,LG4)
endif
endfunction
function KD9 takes nothing returns nothing
call QE9(GetTriggerPlayer(),false)
endfunction
function QF9 takes nothing returns boolean
local integer O5=1
set AG4=true
call OZ7(GetTriggeringTrigger())
call DestroyMultiboard(AV4)
call Q08()
call G29()
call Q68()
loop
exitwhen O5>$B
if GetPlayerController(Player(O5))==MAP_CONTROL_USER then
call QD9(Player(O5),true)
call QE9(Player(O5),true)
endif
set O5=O5+1
endloop
return false
endfunction
function ModeCM_SpawnSound takes nothing returns boolean
call OZ7(GetTriggeringTrigger())
call PlaySoundBJ(ZO)
return false
endfunction
function QG9 takes nothing returns boolean
local trigger t=CreateTrigger()
local integer YR8
local integer YQ8
local string VM8
local unit u
local real x
local real y
local integer i
local real d
local real QH9=GetRectCenterX(ED)
local real QI9=GetRectCenterY(ED)
local real QJ9=GetRectCenterX(L9)
local real QK9=GetRectCenterY(L9)
set AK4=3
set O44=true
call OZ7(GetTriggeringTrigger())
set i=0
loop
exitwhen i==5
set x=QH9-300+i*$96
set y=QI9
set u=CreateUnit(Z7[0],MI4[AQ4[i]],x,y,270)
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_SELL)
call PanCameraToTimedForPlayer(Z7[i+1],QH9,QI9,0)
call CreateUnit(Z7[i+1],1848651843,QH9,QI9,bj_UNIT_FACING)
call SetPlayerState(Z7[i+1],PLAYER_STATE_RESOURCE_GOLD,AD4[GetPlayerId(Z7[i+1])]-$FA)
set B14[1+i]=u
set i=i+1
endloop
set i=0
loop
exitwhen i==5
set x=QJ9-300+i*$96
set y=QK9
set u=CreateUnit(A7[0],MI4[AR4[i]],x,y,270)
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_SELL)
call PanCameraToTimedForPlayer(A7[i+1],QJ9,QK9,0)
call CreateUnit(A7[i+1],1848651843,QJ9,QK9,bj_UNIT_FACING)
call SetPlayerState(A7[i+1],PLAYER_STATE_RESOURCE_GOLD,AD4[GetPlayerId(A7[i+1])]-$FA)
set B14[7+i]=u
set i=i+1
endloop
call TriggerAddCondition(t,Condition(function Q89))
call SuspendTimeOfDay(false)
call EnableTrigger(M04)
call EnableTrigger(ML4)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$A,false)
call TriggerAddCondition(t,Condition(function QF9))
set QD4=90
call UT7()
set A04=false
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,30,false)
call TriggerAddCondition(t,Condition(function PJ9))
call ExecuteFunc("QM9")
call H79()
set t=null
set u=null
return false
endfunction
function QN9 takes integer i returns nothing
call UR7(K34[i])
if AK4==1 then
set AQ4[AS4]=i
set AS4=AS4+1
else
set AR4[AT4]=i
set AT4=AT4+1
endif
endfunction
function QO9 takes nothing returns nothing
local integer i=UA7()
loop
if J[i]==false then
set J[i]=true
call QN9(i)
return
endif
endloop
endfunction
function QP9 takes integer i returns nothing
call C27("Ban"+I2S(GetPlayerId(GetOwningPlayer(GetSoldUnit()))),K34[i])
call UR7(K34[i])
if AK4==1 then
set AM4[AO4]=i
set AO4=AO4+1
else
set AN4[AP4]=i
set AP4=AP4+1
endif
endfunction
function QQ9 takes nothing returns nothing
call QP9(-1)
endfunction
function QR9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local player p=null
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
set t=null
return false
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
call QN9(GetUnitPointValue(GetSoldUnit()))
call RemoveUnit(GetSoldUnit())
call P49(GetUnitTypeId(GetSoldUnit()))
if AU4==0 then
set AU4=AU4+1
call OZ7(t)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QR9))
if AK4==1 then
set AK4=2
set AI4[AK4]=50
set p=A7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call XC7(p,"Sound\\Interface\\Rescue.wav")
else
set AK4=1
set AI4[AK4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call XC7(p,"Sound\\Interface\\Rescue.wav")
endif
set A14=p
elseif AU4==1 then
if AK4==1 and AS4==4 then
set AU4=AU4+1
call OZ7(t)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QR9))
set AK4=2
set AI4[AK4]=50
set p=A7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call XC7(p,"Sound\\Interface\\Rescue.wav")
elseif AK4==2 and AT4==4 then
set AU4=AU4+1
call OZ7(t)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QR9))
set AK4=1
set AI4[AK4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call XC7(p,"Sound\\Interface\\Rescue.wav")
endif
if p!=null then
set A14=p
endif
elseif AU4==2 then
if AK4==1 and AS4==5 then
set AU4=AU4+1
call OZ7(t)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QR9))
set AK4=2
set AI4[AK4]=50
set p=A7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call XC7(p,"Sound\\Interface\\Rescue.wav")
elseif AK4==2 and AT4==5 then
set AU4=AU4+1
call OZ7(t)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QR9))
set AK4=1
set AI4[AK4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call XC7(p,"Sound\\Interface\\Rescue.wav")
endif
if p!=null then
set A14=p
endif
elseif AU4==3 then
set AU4=AU4+1
call OZ7(t)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1,false)
call TriggerAddCondition(t,Condition(function QG9))
call PU9(5)
call MultiboardSetTitleText(AV4,GetObjectName(1848658742))
endif
else
if GetTriggerEvalCount(t)>50 then
if AH4[AK4]>0 then
set AH4[AK4]=AH4[AK4]-1
else
if AK4==1 then
call QO9()
else
call QO9()
endif
if AU4==0 then
set AU4=AU4+1
call OZ7(t)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QR9))
if AK4==1 then
set AK4=2
set AI4[AK4]=50
set p=A7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call SetPlayerState(Z7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call XC7(p,"Sound\\Interface\\Rescue.wav")
else
set AK4=1
set AI4[AK4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call SetPlayerState(A7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call XC7(p,"Sound\\Interface\\Rescue.wav")
endif
set A14=p
elseif AU4==1 then
if AK4==1 and AS4==4 then
set AU4=AU4+1
call OZ7(t)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QR9))
set AK4=2
set AI4[AK4]=50
set p=A7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call SetPlayerState(Z7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call XC7(p,"Sound\\Interface\\Rescue.wav")
elseif AK4==2 and AT4==4 then
set AU4=AU4+1
call OZ7(t)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QR9))
set AK4=1
set AI4[AK4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call SetPlayerState(A7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call XC7(p,"Sound\\Interface\\Rescue.wav")
endif
if p!=null then
set A14=p
endif
elseif AU4==2 then
if AK4==1 and AS4==5 then
set AU4=AU4+1
call OZ7(t)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QR9))
set AK4=2
set AI4[AK4]=50
set p=A7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call SetPlayerState(Z7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call XC7(p,"Sound\\Interface\\Rescue.wav")
elseif AK4==2 and AT4==5 then
set AU4=AU4+1
call OZ7(t)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QR9))
set AK4=1
set AI4[AK4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call SetPlayerState(A7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call XC7(p,"Sound\\Interface\\Rescue.wav")
endif
if p!=null then
set A14=p
endif
elseif AU4==3 then
set AU4=AU4+1
call OZ7(t)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1,false)
call TriggerAddCondition(t,Condition(function QG9))
call PU9(5)
call MultiboardSetTitleText(AV4,GetObjectName(1848658742))
call SetPlayerState(Z7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(A7[1],PLAYER_STATE_RESOURCE_GOLD,0)
endif
endif
else
if AK4==1 then
set AI4[1]=AI4[1]-1
else
set AI4[2]=AI4[2]-1
endif
endif
endif
set t=null
set p=null
return false
endfunction
function QS9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local player p
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
set t=null
return false
endif
if AO4==(2+3)and AP4==(2+3)then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
call RemoveUnit(GetSoldUnit())
endif
call OZ7(t)
set AU4=0
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QR9))
call PU9(4)
call VV7(GetPlayersAll(),15.,"|c006699CC"+GetObjectName(1848658995)+"|r")
call MultiboardSetTitleText(AV4,GetObjectName(1848658742)+" - |c00ffffff"+GetObjectName(1848659000))
if AK4==1 then
set AI4[AK4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call XC7(p,"Sound\\Interface\\Rescue.wav")
else
set AI4[AK4]=50
set p=A7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call XC7(p,"Sound\\Interface\\Rescue.wav")
endif
set B54=false
set A14=p
set t=null
set p=null
return false
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
call QP9(GetUnitPointValue(GetSoldUnit()))
call RemoveUnit(GetSoldUnit())
call P99(GetUnitTypeId(GetSoldUnit()))
call OZ7(t)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QS9))
if AK4==1 then
set AK4=2
set AI4[AK4]=50
set p=A7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call XC7(p,"Sound\\Interface\\Rescue.wav")
else
set AK4=1
set AI4[AK4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call XC7(p,"Sound\\Interface\\Rescue.wav")
endif
set A14=p
else
if GetTriggerEvalCount(t)>50 then
if AH4[AK4]>0 then
set AH4[AK4]=AH4[AK4]-1
else
call QQ9()
call OZ7(t)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QS9))
if AK4==1 then
set AK4=2
set AI4[AK4]=50
set p=A7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call SetPlayerState(Z7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call XC7(p,"Sound\\Interface\\Rescue.wav")
else
set AK4=1
set AI4[AK4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call SetPlayerState(A7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call XC7(p,"Sound\\Interface\\Rescue.wav")
endif
set A14=p
endif
else
if AK4==1 then
set AI4[1]=AI4[1]-1
else
set AI4[2]=AI4[2]-1
endif
endif
endif
set t=null
set p=null
return false
endfunction
function QT9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local player p=null
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
set t=null
return false
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
call QN9(GetUnitPointValue(GetSoldUnit()))
call RemoveUnit(GetSoldUnit())
call P49(GetUnitTypeId(GetSoldUnit()))
if AU4==0 then
set AU4=AU4+1
call OZ7(t)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QT9))
if AK4==1 then
set AK4=2
set AI4[AK4]=50
set p=A7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,500)
call XC7(p,"Sound\\Interface\\Rescue.wav")
else
set AK4=1
set AI4[AK4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,500)
call XC7(p,"Sound\\Interface\\Rescue.wav")
endif
set A14=p
elseif AU4==1 then
if AK4==1 and AS4==2 then
set AU4=AU4+1
call OZ7(t)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QT9))
set AK4=2
set AI4[AK4]=50
set p=A7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,500)
call XC7(p,"Sound\\Interface\\Rescue.wav")
elseif AK4==2 and AT4==2 then
set AU4=AU4+1
call OZ7(t)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QT9))
set AK4=1
set AI4[AK4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,500)
call XC7(p,"Sound\\Interface\\Rescue.wav")
endif
if p!=null then
set A14=p
endif
elseif AU4==2 then
if AK4==1 and AS4==3 then
set AU4=AU4+1
call OZ7(t)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QT9))
set AK4=2
set AI4[AK4]=50
set p=A7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call XC7(p,"Sound\\Interface\\Rescue.wav")
elseif AK4==2 and AT4==3 then
set AU4=AU4+1
call OZ7(t)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QT9))
set AK4=1
set AI4[AK4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call XC7(p,"Sound\\Interface\\Rescue.wav")
endif
if p!=null then
set A14=p
endif
elseif AU4==3 then
set AU4=AU4+1
call OZ7(t)
if AJ4==1 then
set AK4=1
set AI4[AK4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call XC7(p,"Sound\\Interface\\Rescue.wav")
else
set AK4=2
set p=A7[1]
set AI4[AK4]=50
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call XC7(p,"Sound\\Interface\\Rescue.wav")
endif
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QS9))
call PU9(3)
call VV7(GetPlayersAll(),15.,"|c006699CC"+GetObjectName(1848658996)+"|r")
call MultiboardSetTitleText(AV4,GetObjectName(1848658742)+" - |c00ffffff"+GetObjectName(1848658999))
set A14=p
set B54=true
endif
else
if GetTriggerEvalCount(t)>50 then
if AH4[AK4]>0 then
set AH4[AK4]=AH4[AK4]-1
else
if AK4==1 then
call QO9()
else
call QO9()
endif
if AU4==0 then
set AU4=AU4+1
call OZ7(t)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QT9))
if AK4==1 then
set AK4=2
set AI4[AK4]=50
set p=A7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,500)
call SetPlayerState(Z7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call XC7(p,"Sound\\Interface\\Rescue.wav")
else
set AK4=1
set AI4[AK4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,500)
call SetPlayerState(A7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call XC7(p,"Sound\\Interface\\Rescue.wav")
endif
set A14=p
elseif AU4==1 then
if AK4==1 and AS4==2 then
set AU4=AU4+1
call OZ7(t)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QT9))
set AK4=2
set AI4[AK4]=50
set p=A7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,500)
call SetPlayerState(Z7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call XC7(p,"Sound\\Interface\\Rescue.wav")
elseif AK4==2 and AT4==2 then
set AU4=AU4+1
call OZ7(t)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QT9))
set AK4=1
set AI4[AK4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,500)
call SetPlayerState(A7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call XC7(p,"Sound\\Interface\\Rescue.wav")
endif
if p!=null then
set A14=p
endif
elseif AU4==2 then
if AK4==1 and AS4==3 then
set AU4=AU4+1
call OZ7(t)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QT9))
set AK4=2
set AI4[AK4]=50
set p=A7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call SetPlayerState(Z7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call XC7(p,"Sound\\Interface\\Rescue.wav")
elseif AK4==2 and AT4==3 then
set AU4=AU4+1
call OZ7(t)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QT9))
set AK4=1
set AI4[AK4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call SetPlayerState(A7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call XC7(p,"Sound\\Interface\\Rescue.wav")
endif
if p!=null then
set A14=p
endif
elseif AU4==3 then
set AU4=AU4+1
call OZ7(t)
if AJ4==1 then
set AK4=1
set AI4[AK4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call XC7(p,"Sound\\Interface\\Rescue.wav")
else
set AK4=2
set p=A7[1]
set AI4[AK4]=50
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call XC7(p,"Sound\\Interface\\Rescue.wav")
endif
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QS9))
call PU9(3)
call VV7(GetPlayersAll(),15.,"|c006699CC"+GetObjectName(1848658996)+"|r")
call MultiboardSetTitleText(AV4,GetObjectName(1848658742)+" - |c00ffffff"+GetObjectName(1848658999))
set A14=p
set B54=true
endif
endif
else
if AK4==1 then
set AI4[1]=AI4[1]-1
else
set AI4[2]=AI4[2]-1
endif
endif
endif
set t=null
set p=null
return false
endfunction
function QU9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local trigger t2
local player p
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
set t=null
return false
endif
if AO4==2 and AP4==2 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
call RemoveUnit(GetSoldUnit())
endif
call OZ7(t)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QT9))
call PU9(2)
call VV7(bj_FORCE_ALL_PLAYERS,15.,"|c006699CC"+GetObjectName(1848658997)+"|r")
call MultiboardSetTitleText(AV4,GetObjectName(1848658742)+" - |c00ffffff"+GetObjectName(1848659001))
if AK4==1 then
set AI4[AK4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call XC7(p,"Sound\\Interface\\Rescue.wav")
else
set AI4[AK4]=50
set p=A7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call XC7(p,"Sound\\Interface\\Rescue.wav")
endif
set A14=p
set B54=false
set t=null
set p=null
return false
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
call QP9(GetUnitPointValue(GetSoldUnit()))
call RemoveUnit(GetSoldUnit())
call P99(GetUnitTypeId(GetSoldUnit()))
call OZ7(t)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QU9))
if AK4==1 then
set AK4=2
set AI4[AK4]=40
set p=A7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call XC7(p,"Sound\\Interface\\Rescue.wav")
else
set AK4=1
set AI4[AK4]=40
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call XC7(p,"Sound\\Interface\\Rescue.wav")
endif
set A14=p
else
if GetTriggerEvalCount(t)>40 then
if AH4[AK4]>0 then
set AH4[AK4]=AH4[AK4]-1
else
call QQ9()
call OZ7(t)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QU9))
if AK4==1 then
set AK4=2
set AI4[AK4]=40
set p=A7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call SetPlayerState(Z7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call XC7(p,"Sound\\Interface\\Rescue.wav")
else
set AK4=1
set AI4[AK4]=40
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call SetPlayerState(A7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call XC7(p,"Sound\\Interface\\Rescue.wav")
endif
set A14=p
endif
else
if AK4==1 then
set AI4[1]=AI4[1]-1
else
set AI4[2]=AI4[2]-1
endif
endif
endif
set t=null
set p=null
return false
endfunction
function QV9 takes nothing returns boolean
local trigger t=CreateTrigger()
local trigger t2
local player p
set AF4=true
call OZ7(GetTriggeringTrigger())
if AE4==false then
if AJ4==1 then
call VV7(bj_FORCE_ALL_PLAYERS,15.,Q[GetPlayerId(Z7[1])]+(KZ4[GetPlayerId((Z7[1]))])+"|r "+GetObjectName(1848657217))
else
call VV7(bj_FORCE_ALL_PLAYERS,15.,Q[GetPlayerId(A7[1])]+(KZ4[GetPlayerId((A7[1]))])+"|r "+GetObjectName(1848657217))
endif
endif
if AJ4==1 then
set AK4=1
set AI4[AK4]=40
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call XC7(p,"Sound\\Interface\\Rescue.wav")
else
set AK4=2
set p=A7[1]
set AI4[AK4]=40
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call XC7(p,"Sound\\Interface\\Rescue.wav")
endif
call PU9(1)
call VV7(GetPlayersAll(),15.,"|c006699CC"+GetObjectName(1848658998)+"|r")
call MultiboardSetTitleText(AV4,GetObjectName(1848658742)+" - |c00ffffff"+GetObjectName(1848659009))
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QU9))
set A04=true
set B54=true
set A14=p
set t2=CreateTrigger()
call TriggerRegisterTimerEvent(t2,1,true)
call TriggerAddCondition(t2,Condition(function PE9))
set t2=null
set t=null
set p=null
return false
endfunction
function O69 takes nothing returns nothing
local trigger t
local location QW9=GetRectCenter(pr)
local location QX9=GetRectCenter(qr)
local integer x=1
local player p
call DisableTrigger(QA4)
loop
exitwhen x>5
if TY7(Z7[x])then
call CreateUnitAtLoc(Z7[x],1848651843,QX9,bj_UNIT_FACING)
endif
if TY7(A7[x])then
call CreateUnitAtLoc(A7[x],1848651843,QW9,bj_UNIT_FACING)
endif
set x=x+1
endloop
call RemoveLocation(QW9)
call RemoveLocation(QX9)
set SN4=true
set G9=false
set F9=false
set O44=false
call SuspendTimeOfDay(true)
call DisableTrigger(M04)
call DisableTrigger(ML4)
if AA4==false then
call PG9()
endif
set AD4[GetPlayerId(Z7[1])]=GetPlayerState(Z7[1],PLAYER_STATE_RESOURCE_GOLD)
set AD4[GetPlayerId(Z7[2])]=GetPlayerState(Z7[2],PLAYER_STATE_RESOURCE_GOLD)
set AD4[GetPlayerId(Z7[3])]=GetPlayerState(Z7[3],PLAYER_STATE_RESOURCE_GOLD)
set AD4[GetPlayerId(Z7[4])]=GetPlayerState(Z7[4],PLAYER_STATE_RESOURCE_GOLD)
set AD4[GetPlayerId(Z7[5])]=GetPlayerState(Z7[5],PLAYER_STATE_RESOURCE_GOLD)
set AD4[GetPlayerId(A7[1])]=GetPlayerState(A7[1],PLAYER_STATE_RESOURCE_GOLD)
set AD4[GetPlayerId(A7[2])]=GetPlayerState(A7[2],PLAYER_STATE_RESOURCE_GOLD)
set AD4[GetPlayerId(A7[3])]=GetPlayerState(A7[3],PLAYER_STATE_RESOURCE_GOLD)
set AD4[GetPlayerId(A7[4])]=GetPlayerState(A7[4],PLAYER_STATE_RESOURCE_GOLD)
set AD4[GetPlayerId(A7[5])]=GetPlayerState(A7[5],PLAYER_STATE_RESOURCE_GOLD)
call SetPlayerState(Z7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(Z7[2],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(Z7[3],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(Z7[4],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(Z7[5],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(A7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(A7[2],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(A7[3],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(A7[4],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(A7[5],PLAYER_STATE_RESOURCE_GOLD,0)
set AH4[1]=90
set AH4[2]=90
set AJ4=GetRandomInt(1,2)
set AE4=false
set AK4=AJ4
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$F-TimerGetElapsed(W),false)
call TriggerAddCondition(t,Condition(function QV9))
call P_9()
call VV7(GetPlayersAll(),4.,GetObjectName(1848657235))
call VV7(GetPlayersAll(),4.,GetObjectName(1848657234))
set t=null
set QW9=null
set QX9=null
set p=null
endfunction
function QY9 takes player p,integer z8 returns nothing
local integer i=1
loop
exitwhen i>5
if p!=Z7[i]then
call SetPlayerTechMaxAllowed(Z7[i],z8,0)
endif
if p!=A7[i]then
call SetPlayerTechMaxAllowed(A7[i],z8,0)
endif
set i=i+1
endloop
endfunction
function QZ9 takes integer QA9 returns integer
local integer QB9
if QA9==1 then
set QB9=GetUnitPointValueByType(K24[GetRandomInt(1,K_4)])
elseif QA9==2 then
set QB9=GetUnitPointValueByType(M44[GetRandomInt(1,M74)])
elseif QA9==3 then
set QB9=GetUnitPointValueByType(M84[GetRandomInt(1,M94)])
endif
return QB9
endfunction
function QC9 takes integer Q39,integer Q69,integer QA9 returns integer
local integer QB9
set QB9=QZ9(QA9)
if X8 and Q39!=QB9 and Q69!=QB9 then
return QB9
endif
loop
exitwhen J[QB9]==false and Q39!=QB9 and Q69!=QB9
set QB9=QZ9(QA9)
endloop
set J[QB9]=true
return QB9
endfunction
function OF9 takes nothing returns nothing
local player p
local integer i=1
local integer Q39
local integer Q69
local integer QL9
local trigger t
local integer OB7
set VT=true
set QD4=120
set F9=false
set G9=false
call PauseUnit(MP4,true)
call PauseUnit(MQ4,true)
call PauseUnit(MR4,true)
call PauseUnit(MS4,true)
call PauseUnit(MT4,true)
call PauseUnit(MU4,true)
call PauseUnit(MV4,true)
call PauseUnit(MW4,true)
call PauseUnit(MX4,true)
call PauseUnit(MY4,true)
call PauseUnit(MZ4,true)
call PauseUnit(MA4,true)
call DisableTrigger(QA4)
loop
exitwhen i>5
set p=Z7[i]
set Q39=0
set Q69=0
set QL9=0
if TA7(p)then
call UnitAddAbility(KU4[GetPlayerId(p)],1093743686)
call UnitAddAbility(KU4[GetPlayerId(p)],1093743685)
call UnitAddAbility(KU4[GetPlayerId(p)],1093743688)
set Q39=QC9(Q39,Q69,1)
set Q69=QC9(Q39,Q69,2)
set QL9=QC9(Q39,Q69,3)
call AddUnitToStock(KU4[GetPlayerId(p)],K34[Q39],1,1)
call QY9(p,K34[Q39])
call AddUnitToStock(KU4[GetPlayerId(p)],K34[Q69],1,1)
call QY9(p,K34[Q69])
call AddUnitToStock(KU4[GetPlayerId(p)],K34[QL9],1,1)
call QY9(p,K34[QL9])
call ClearSelectionForPlayer(p)
call SelectUnitAddForPlayer(KU4[GetPlayerId(p)],p)
call PanCameraToTimedForPlayer(p,GetRectCenterX(ED),GetRectCenterY(ED),0)
call DisplayTimedTextToPlayer(p,0,E9,$F," ")
call DisplayTimedTextToPlayer(p,0,E9,$F," ")
call DisplayTimedTextToPlayer(p,0,E9,$F," ")
call DisplayTimedTextToPlayer(p,0,E9,$F,"|cff99ccff"+(GetObjectName((1848657206)))+"|r")
call DisplayTimedTextToPlayer(p,0,E9,$F," ")
endif
set p=A7[i]
set Q39=0
set Q69=0
set QL9=0
if TA7(p)then
call UnitAddAbility(KU4[GetPlayerId(p)],1093743686)
call UnitAddAbility(KU4[GetPlayerId(p)],1093743685)
call UnitAddAbility(KU4[GetPlayerId(p)],1093743688)
set Q39=QC9(Q39,Q69,1)
set Q69=QC9(Q39,Q69,2)
set QL9=QC9(Q39,Q69,3)
call AddUnitToStock(KU4[GetPlayerId(p)],K34[Q39],1,1)
call QY9(p,K34[Q39])
call AddUnitToStock(KU4[GetPlayerId(p)],K34[Q69],1,1)
call QY9(p,K34[Q69])
call AddUnitToStock(KU4[GetPlayerId(p)],K34[QL9],1,1)
call QY9(p,K34[QL9])
call ClearSelectionForPlayer(p)
call SelectUnitAddForPlayer(KU4[GetPlayerId(p)],p)
call PanCameraToTimedForPlayer(p,GetRectCenterX(L9),GetRectCenterY(L9),0)
call DisplayTimedTextToPlayer(p,0,E9,$F," ")
call DisplayTimedTextToPlayer(p,0,E9,$F," ")
call DisplayTimedTextToPlayer(p,0,E9,$F," ")
call DisplayTimedTextToPlayer(p,0,E9,$F,"|cff99ccff"+(GetObjectName((1848657206)))+"|r")
call DisplayTimedTextToPlayer(p,0,E9,$F," ")
endif
set i=i+1
endloop
set p=null
set t=null
endfunction
function Q19 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer U58=OM7(OB7,"Index")
local player p
local integer UB7
local location LV7=GetRectCenter(ED)
local location LW7=GetRectCenter(L9)
if U58<6 then
set p=Z7[U58]
elseif U58<$B then
set p=A7[U58-5]
endif
if U58>$A then
call NM7(OB7)
call OZ7(t)
if D4==false and RZ4==false then
set G9=true
endif
elseif U58<6 then
call NP7(OB7,"Index",U58+1)
set M7[GetPlayerId(p)]=null
if TA7(p)then
loop
exitwhen M7[GetPlayerId(p)]!=null
if GetPlayerController(p)==MAP_CONTROL_USER and RZ4 then
set UB7=500
elseif RZ4 then
set UB7=UZ7()
else
set UB7=UA7()
endif
if J[UB7]==false then
if not X8 and not RZ4 then
set J[UB7]=true
endif
set M7[GetPlayerId(p)]=CreateUnitAtLoc(p,K34[UB7],LV7,bj_UNIT_FACING)
endif
endloop
endif
elseif U58<$B then
call NP7(OB7,"Index",U58+1)
set M7[GetPlayerId(p)]=null
if TA7(p)then
loop
exitwhen M7[GetPlayerId(p)]!=null
if p==Le and RZ4 then
set UB7=500
elseif RZ4 then
set UB7=UZ7()
else
set UB7=UA7()
endif
if J[UB7]==false then
if not X8 then
set J[UB7]=true
endif
set M7[GetPlayerId(p)]=CreateUnitAtLoc(p,K34[UB7],LW7,bj_UNIT_FACING)
endif
endloop
endif
endif
call RemoveLocation(LV7)
call RemoveLocation(LW7)
set LV7=null
set LW7=null
set p=null
set t=null
return false
endfunction
function O99 takes nothing returns nothing
local location LV7=GetRectCenter(ED)
local location LW7=GetRectCenter(L9)
local location Q09=GetRectCenter(ED)
local location Q59=GetRectCenter(L9)
local integer T8=1
local integer U8=5
local integer UB7
local trigger t
set E4=true
set F9=false
if not X8 then
call UT7()
endif
call DisableTrigger(QA4)
set X4=400
call PanCameraToTimedLocForPlayer(Z7[1],Q09,0)
call PanCameraToTimedLocForPlayer(Z7[2],Q09,0)
call PanCameraToTimedLocForPlayer(Z7[3],Q09,0)
call PanCameraToTimedLocForPlayer(Z7[4],Q09,0)
call PanCameraToTimedLocForPlayer(Z7[5],Q09,0)
call PanCameraToTimedLocForPlayer(A7[1],Q59,0)
call PanCameraToTimedLocForPlayer(A7[2],Q59,0)
call PanCameraToTimedLocForPlayer(A7[3],Q59,0)
call PanCameraToTimedLocForPlayer(A7[4],Q59,0)
call PanCameraToTimedLocForPlayer(A7[5],Q59,0)
if H34 then
loop
set UB7=UA7()
exitwhen J[UB7]==false
endloop
if TV7(Le)then
set M7[GetPlayerId(Le)]=CreateUnit(Le,K34[UB7],GetLocationX(LV7),GetLocationY(LV7),270)
else
set M7[GetPlayerId(Le)]=CreateUnit(Le,K34[UB7],GetLocationX(LW7),GetLocationY(LW7),270)
endif
call RemoveLocation(LV7)
call RemoveLocation(LW7)
call RemoveLocation(Q09)
call RemoveLocation(Q59)
set LV7=null
set LW7=null
set Q09=null
set Q59=null
set t=null
return
endif
set G9=false
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function Q19))
call NP7(GetHandleId(t),"Index",1)
call RemoveLocation(LV7)
call RemoveLocation(LW7)
call RemoveLocation(Q09)
call RemoveLocation(Q59)
set LV7=null
set LW7=null
set Q09=null
set Q59=null
set t=null
endfunction
function Q2 takes nothing returns nothing
call YE7(GetEnumUnit())
endfunction
function Q3 takes unit WI7 returns nothing
local integer Q4=GetPlayerId(GetOwningPlayer(WI7))
set se[Q4]=UnitItemInSlot(WI7,0)
set Se[Q4]=UnitItemInSlot(WI7,1)
set We[Q4]=UnitItemInSlot(WI7,2)
set ze[Q4]=UnitItemInSlot(WI7,3)
set Ze[Q4]=UnitItemInSlot(WI7,4)
set vx[Q4]=UnitItemInSlot(WI7,5)
endfunction
function Q5 takes player h5,player h6 returns integer
local unit Q6=M7[GetPlayerId(h5)]
local unit Q7=M7[GetPlayerId(h6)]
call UnitRemoveBuffs(Q6,true,true)
call UnitRemoveBuffs(Q7,true,true)
if Q6==null and Q7==null then
call VV7(bj_FORCE_ALL_PLAYERS,$F,Q[GetPlayerId(Z7[0])]+VT7(h5)+"并且"+VT7(h6)+"没有选择英雄所以他们没有英雄分配|r。")
elseif GetRandomInt(1,2)==1 then
if(Q6!=null)then
return GetUnitTypeId(Q6)
else
return GetUnitTypeId(Q7)
endif
else
if(Q7!=null)then
return GetUnitTypeId(Q7)
else
return GetUnitTypeId(Q6)
endif
endif
call VV7(bj_FORCE_ALL_PLAYERS,$F,Q[GetPlayerId(Z7[0])]+VT7(h5)+"并且"+VT7(h6)+"没有选择英雄，因此会得到一个随机的英雄!")
return UA7()
endfunction
function Q8 takes nothing returns nothing
if(GetUnitTypeId(GetEnumUnit())==1848651828)then
call RemoveUnit(GetEnumUnit())
endif
if(GetUnitTypeId(GetEnumUnit())==1865429043)then
call RemoveUnit(GetEnumUnit())
endif
endfunction
function Q9 takes nothing returns boolean
local integer T8
local group ra=WS7()
local unit rA
local location Q09=GetRectCenter(ED)
local location Q59=GetRectCenter(L9)
local integer rb=P8(X7)
local player array rB
local player array rc
local integer x
local integer y
local real rC
local real rd
local real rD
local integer re
local group LQ7=HW7(GetWorldBounds(),null)
call ForGroup(LQ7,function Q8)
call WR7(LQ7)
set T8=1
set x=1
set y=1
loop
exitwhen T8>5
if(TA7(Z7[T8]))then
call Q3(M7[GetPlayerId(Z7[T8])])
call GroupAddUnit(ra,M7[GetPlayerId(Z7[T8])])
set rB[x]=Z7[T8]
set x=x+1
endif
if(TA7(A7[T8]))then
call Q3(M7[GetPlayerId(A7[T8])])
call GroupAddUnit(ra,M7[GetPlayerId(A7[T8])])
set rc[y]=A7[T8]
set y=y+1
endif
set T8=T8+1
endloop
set x=1
loop
exitwhen x>rb
set re=Q5(rB[x],rc[x])
if(M7[GetPlayerId(rB[x])]==null)then
set rC=GetLocationX(Q09)+GetRandomReal(1,40)
set rd=GetLocationY(Q09)+GetRandomReal(1,40)
set rD=270
else
set rC=GetUnitX(M7[GetPlayerId(rB[x])])
set rd=GetUnitY(M7[GetPlayerId(rB[x])])
set rD=GetUnitFacing(M7[GetPlayerId(rB[x])])
call SetUnitPathing(M7[GetPlayerId(rB[x])],false)
endif
set M7[GetPlayerId(rB[x])]=CreateUnit(rB[x],re,rC,rd,rD)
call SetUnitPathing(M7[GetPlayerId(rB[x])],false)
call SetUnitPosition(M7[GetPlayerId(rB[x])],rC,rd)
call UnitAddItem(M7[GetPlayerId(rB[x])],se[GetPlayerId(rB[x])])
call UnitAddItem(M7[GetPlayerId(rB[x])],Se[GetPlayerId(rB[x])])
call UnitAddItem(M7[GetPlayerId(rB[x])],We[GetPlayerId(rB[x])])
call UnitAddItem(M7[GetPlayerId(rB[x])],ze[GetPlayerId(rB[x])])
call UnitAddItem(M7[GetPlayerId(rB[x])],Ze[GetPlayerId(rB[x])])
call UnitAddItem(M7[GetPlayerId(rB[x])],vx[GetPlayerId(rB[x])])
call ClearSelectionForPlayer(rB[x])
call SelectUnitAddForPlayer(M7[GetPlayerId(rB[x])],rB[x])
call PanCameraToTimedForPlayer(rB[x],rC,rd,0)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Awaken\\Awaken.mdl",rC,rd))
if(M7[GetPlayerId(rc[x])]==null)then
set rC=GetLocationX(Q59)
set rd=GetLocationY(Q59)
set rD=270
else
set rC=GetUnitX(M7[GetPlayerId(rc[x])])
set rd=GetUnitY(M7[GetPlayerId(rc[x])])
set rD=GetUnitFacing(M7[GetPlayerId(rc[x])])
call SetUnitPathing(M7[GetPlayerId(rc[x])],false)
endif
set M7[GetPlayerId(rc[x])]=CreateUnit(rc[x],re,rC,rd,rD)
call SetUnitPathing(M7[GetPlayerId(rc[x])],false)
call SetUnitPosition(M7[GetPlayerId(rc[x])],rC,rd)
call UnitAddItem(M7[GetPlayerId(rc[x])],se[GetPlayerId(rc[x])])
call UnitAddItem(M7[GetPlayerId(rc[x])],Se[GetPlayerId(rc[x])])
call UnitAddItem(M7[GetPlayerId(rc[x])],We[GetPlayerId(rc[x])])
call UnitAddItem(M7[GetPlayerId(rc[x])],ze[GetPlayerId(rc[x])])
call UnitAddItem(M7[GetPlayerId(rc[x])],Ze[GetPlayerId(rc[x])])
call UnitAddItem(M7[GetPlayerId(rc[x])],vx[GetPlayerId(rc[x])])
call ClearSelectionForPlayer(rc[x])
call SelectUnitAddForPlayer(M7[GetPlayerId(rc[x])],rc[x])
call PanCameraToTimedForPlayer(rc[x],rC,rd,0)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Awaken\\Awaken.mdl",rC,rd))
set x=x+1
endloop
call ForGroup(ra,function Q2)
call WR7(ra)
set x=1
loop
exitwhen x>rb
call SetUnitPathing(M7[GetPlayerId(rB[x])],true)
call SetUnitPathing(M7[GetPlayerId(rc[x])],true)
set x=x+1
endloop
call RemoveLocation(Q09)
call RemoveLocation(Q59)
set ra=null
set rA=null
set Q09=null
set Q59=null
set LQ7=null
return false
endfunction
function rE takes nothing returns boolean
set AJ=true
return false
endfunction
function rf takes nothing returns boolean
set G9=false
set F9=false
call UT7()
return false
endfunction
function N19 takes nothing returns nothing
local trigger t=CreateTrigger()
call VV7(L8,$A,"你的英雄60秒后可能会被替换。")
call VV7(L8,$A,"建议在那之前不要购买物品。")
set W8=true
call UR7(1211117641)
call TriggerRegisterTimerEvent(t,60-TimerGetElapsed(W),false)
call TriggerAddCondition(t,Condition(function Q9))
set t=CreateTrigger()
call TriggerAddCondition(t,Condition(function rf))
call TriggerRegisterTimerEvent(t,57-TimerGetElapsed(W),false)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,55+60-TimerGetElapsed(W),false)
call TriggerAddCondition(t,Condition(function rE))
set t=null
endfunction
function OE9 takes nothing returns nothing
local location LV7=GetRectCenter(HD)
local location LW7=GetRectCenter(GD)
local location Q09=GetRectCenter(ED)
local location Q59=GetRectCenter(L9)
local integer T8
local integer U8
local integer UB7
if not X8 then
call UT7()
endif
call DisableTrigger(QA4)
set O4=true
set X4=400
set F9=false
call PanCameraToTimedLocForPlayer(Z7[1],Q09,0)
call PanCameraToTimedLocForPlayer(Z7[2],Q09,0)
call PanCameraToTimedLocForPlayer(Z7[3],Q09,0)
call PanCameraToTimedLocForPlayer(Z7[4],Q09,0)
call PanCameraToTimedLocForPlayer(Z7[5],Q09,0)
call PanCameraToTimedLocForPlayer(A7[1],Q59,0)
call PanCameraToTimedLocForPlayer(A7[2],Q59,0)
call PanCameraToTimedLocForPlayer(A7[3],Q59,0)
call PanCameraToTimedLocForPlayer(A7[4],Q59,0)
call PanCameraToTimedLocForPlayer(A7[5],Q59,0)
if H34 then
if TV7(Le)then
loop
set UB7=GetRandomInt(KL4,K14)
exitwhen J[UB7]==false
endloop
set M7[GetPlayerId(Le)]=CreateUnit(Le,K34[UB7],GetLocationX(LV7),GetLocationY(LV7),270)
else
loop
set UB7=GetRandomInt(K04,K54)
exitwhen J[UB7]==false
endloop
set M7[GetPlayerId(Le)]=CreateUnit(Le,K34[UB7],GetLocationX(LW7),GetLocationY(LW7),270)
endif
call RemoveLocation(LV7)
call RemoveLocation(LW7)
call RemoveLocation(Q09)
call RemoveLocation(Q59)
return
endif
set G9=false
set T8=1
set U8=5
loop
exitwhen T8>U8
set M7[GetPlayerId(Z7[T8])]=null
if(TA7(Z7[T8]))then
loop
set UB7=GetRandomInt(KL4,K14)
if(J[UB7]==false)then
if not X8 then
set J[UB7]=true
endif
set M7[GetPlayerId(Z7[T8])]=CreateUnitAtLoc(Z7[T8],K34[UB7],LV7,bj_UNIT_FACING)
endif
exitwhen(M7[GetPlayerId(Z7[T8])]!=null)
endloop
endif
set T8=T8+1
endloop
set T8=1
set U8=5
loop
exitwhen T8>U8
set M7[GetPlayerId(A7[T8])]=null
if(TA7(A7[T8]))then
loop
set UB7=GetRandomInt(K04,K54)
if(J[UB7]==false)then
if not X8 then
set J[UB7]=true
endif
set M7[GetPlayerId(A7[T8])]=CreateUnitAtLoc(A7[T8],K34[UB7],LW7,bj_UNIT_FACING)
endif
exitwhen(M7[GetPlayerId(A7[T8])]!=null)
endloop
endif
set T8=T8+1
endloop
set G9=true
call RemoveLocation(LV7)
call RemoveLocation(LW7)
call RemoveLocation(Q09)
call RemoveLocation(Q59)
set LV7=null
set LW7=null
set Q09=null
set Q59=null
endfunction
function rF takes nothing returns nothing
set P94=true
call VV7(bj_FORCE_ALL_PLAYERS,$A,"无死亡时间开启。英雄死亡后不需要复活时间。")
call DisableTrigger(GetTriggeringTrigger())
endfunction
function rg takes nothing returns nothing
local integer rG=S2I(SubString(GetEventPlayerChatString(),6,StringLength(GetEventPlayerChatString())))
if rG>PD4 then
call X37(Le,"生命数太多")
elseif rG<$A then
call X37(Le,"生命数太少")
else
set PD4=rG
call VV7(bj_FORCE_ALL_PLAYERS,$A,"每队拥有"+I2S(PD4)+"条命，用完之后就输掉比赛。")
call DisableTrigger(GetTriggeringTrigger())
endif
endfunction
function rh takes nothing returns nothing
call DisableTrigger(OE7(GetHandleId(GetTriggeringTrigger()),"nd"))
call DisableTrigger(OE7(GetHandleId(GetTriggeringTrigger()),"lives"))
call DisableTrigger(GetTriggeringTrigger())
endfunction
function Q29 takes nothing returns nothing
local trigger ri=CreateTrigger()
local trigger rI=CreateTrigger()
local trigger nd=CreateTrigger()
set PD4=YG7(K14,K54-K04+1)
call VV7(bj_FORCE_ALL_PLAYERS,10.," ")
call VV7(bj_FORCE_ALL_PLAYERS,10.,"额外命令: 接下来可以输入 -nd 与 -lives xx 。")
call VV7(bj_FORCE_ALL_PLAYERS,10.,"现在死亡模式生命数是 "+I2S(PD4))
call TriggerRegisterTimerEvent(ri,15.,false)
call TriggerAddAction(ri,function rh)
call NV7(GetHandleId(ri),"nd",nd)
call NV7(GetHandleId(ri),"lives",rI)
call TriggerRegisterPlayerChatEvent(nd,Le,"-nd",true)
call TriggerAddAction(nd,function rF)
call TriggerRegisterPlayerChatEvent(rI,Le,"-lives",false)
call TriggerAddAction(rI,function rg)
endfunction
function Q_9 takes nothing returns nothing
local integer rJ=OM7(GetHandleId(GetTriggeringTrigger()),"PlayerId")
local integer T8
local integer U8
local integer UB7
local integer QM
local location LV7=GetRectCenter(pr)
local location LW7=GetRectCenter(qr)
if D9 then
return
endif
if TV7(Player(rJ))then
set T8=KL4
set U8=K14
set QM=0
else
set T8=K04
set U8=K54
set QM=1
endif
if P4 then
set T8=KL4
set U8=K54
if TV7(Player(rJ))then
call CreateUnitAtLoc(Player(rJ),1848651843,LV7,bj_UNIT_FACING)
call CreateUnitAtLoc(Player(rJ),1848651843,LW7,bj_UNIT_FACING)
else
call CreateUnitAtLoc(Player(rJ),1848651843,LV7,bj_UNIT_FACING)
call CreateUnitAtLoc(Player(rJ),1848651843,LW7,bj_UNIT_FACING)
endif
endif
if((not E4)and(GetPlayerController(Player(rJ))==MAP_CONTROL_USER))then
loop
exitwhen T8>U8
if J[T8]==false then
call SetPlayerTechMaxAllowed(Player(rJ),K34[T8],1)
endif
set T8=T8+1
endloop
if(GetPlayerState(Player(rJ),PLAYER_STATE_RESOURCE_GOLD)<$FA)then
call SetPlayerState(Player(rJ),PLAYER_STATE_RESOURCE_GOLD,$FA)
endif
elseif(S7[QM]<PD4)then
set M7[rJ]=null
if TA7(Player(rJ))then
loop
if(E4)then
set UB7=UA7()
elseif RZ4 then
set UB7=UZ7()
elseif(((not P4)and(TV7(Player(rJ))))or((P4)and(GetRandomInt(1,2)==1)))then
set UB7=GetRandomInt(KL4,K14)
else
set UB7=GetRandomInt(K04,K54)
endif
if J[UB7]==false then
if RZ4==false then
set J[UB7]=true
endif
if TV7(Player(rJ))then
set M7[rJ]=CreateUnitAtLoc(Player(rJ),K34[UB7],LV7,bj_UNIT_FACING)
else
set M7[rJ]=CreateUnitAtLoc(Player(rJ),K34[UB7],LW7,bj_UNIT_FACING)
endif
endif
exitwhen M7[rJ]!=null
endloop
endif
endif
call RemoveLocation(LV7)
call RemoveLocation(LW7)
set LV7=null
set LW7=null
if not E4 then
endif
endfunction
function NL9 takes nothing returns nothing
local location Mk
local real CPv
local trigger t
local integer rk
local integer x
set D4=true
call UR7(1211117641)
call UR7(1311781207)
set x=1
loop
exitwhen x>5
set rk=GetPlayerId(Z7[x])
set t=CreateTrigger()
call TriggerRegisterTimerExpireEvent(t,U[rk])
call TriggerAddAction(t,function Q_9)
call NP7(GetHandleId(t),"PlayerId",rk)
set rk=GetPlayerId(A7[x])
set t=CreateTrigger()
call TriggerRegisterTimerExpireEvent(t,U[rk])
call TriggerAddAction(t,function Q_9)
call NP7(GetHandleId(t),"PlayerId",rk)
set x=x+1
endloop
call UnitRemoveAbility(KJ4,1096906593)
call UnitRemoveAbility(KK4,1096906593)
call UnitRemoveAbility(KM4,1096906593)
call UnitRemoveAbility(KN4,1096906593)
call UnitRemoveAbility(KO4,1096906593)
call UnitRemoveAbility(KP4,1096906593)
call UnitRemoveAbility(KQ4,1096906593)
call UnitRemoveAbility(KR4,1096906593)
call UnitRemoveAbility(KS4,1096906593)
call UnitRemoveAbility(KT4,1096906593)
call ExecuteFunc("Q29")
endfunction
function OB9 takes nothing returns nothing
local location P0=GetRectCenter(HD)
local location P3=GetRectCenter(GD)
local location Qn=GetRectCenter(ED)
local location QN=GetRectCenter(L9)
local integer hK=1
local integer hl=5
local trigger t
local integer rk
local integer x
set RZ4=true
set PD4=$98967F
call UR7(1211117641)
call UR7(1311781207)
call UR7(1211117653)
call UR7(1315334514)
set x=KL4
loop
exitwhen x>K54
set A0[x]=false
set x=x+1
endloop
set x=1
loop
exitwhen x>5
if GetPlayerController(Z7[x])==MAP_CONTROL_COMPUTER then
set rk=GetPlayerId(Z7[x])
set t=CreateTrigger()
call TriggerRegisterTimerExpireEvent(t,U[rk])
call TriggerAddAction(t,function Q_9)
call NP7(GetHandleId(t),"PlayerId",rk)
endif
if GetPlayerController(A7[x])==MAP_CONTROL_COMPUTER then
set rk=GetPlayerId(A7[x])
set t=CreateTrigger()
call TriggerRegisterTimerExpireEvent(t,U[rk])
call TriggerAddAction(t,function Q_9)
call NP7(GetHandleId(t),"PlayerId",rk)
endif
set x=x+1
endloop
call DisableTrigger(QA4)
set F9=false
call UT7()
set X4=400
set G9=false
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function Q19))
call NP7(GetHandleId(t),"Index",1)
call RemoveLocation(P0)
call RemoveLocation(P3)
call RemoveLocation(Qn)
call RemoveLocation(QN)
set P0=null
set P3=null
set Qn=null
set QN=null
set t=null
endfunction
function OG9 takes nothing returns nothing
local integer rK=GetRandomInt(1,4)
set Ox=true
if(rK==1)then
call VV7(bj_FORCE_ALL_PLAYERS,20.,"AP被随机选择为游戏模式!")
call VV7(bj_FORCE_ALL_PLAYERS,20.," ")
call ExecuteFunc("OD9")
elseif(rK==2)then
call VV7(bj_FORCE_ALL_PLAYERS,20.,"AR被随机选择为游戏模式!")
call VV7(bj_FORCE_ALL_PLAYERS,20.," ")
call ExecuteFunc("O99")
elseif(rK==3)then
call VV7(bj_FORCE_ALL_PLAYERS,20.,"TR被随机选择为游戏模式!")
call VV7(bj_FORCE_ALL_PLAYERS,20.," ")
call ExecuteFunc("OE9")
elseif(rK==4)then
call VV7(bj_FORCE_ALL_PLAYERS,20.,"Normal被随机选择为游戏模式!")
call VV7(bj_FORCE_ALL_PLAYERS,20.," ")
endif
endfunction
function O89 takes nothing returns nothing
set X8=true
call UR7(1211117641)
call UR7(1311788373)
endfunction
function N39 takes nothing returns nothing
local integer LU7=P8(X7)
local integer LT7=P8(Y7)
local integer D5=LU7+LT7
local integer T8
local integer R49
local integer x
local integer y
local integer z
local player array R79
local player array R89
local integer w
local integer R99
local integer RD9
local location Q09=GetRectCenter(ED)
local location Q59=GetRectCenter(L9)
local location LV7=GetRectCenter(pr)
local location LW7=GetRectCenter(qr)
set ge=true
call P58(Z7[1])
call P58(Z7[2])
call P58(Z7[3])
call P58(Z7[4])
call P58(Z7[5])
call P58(A7[1])
call P58(A7[2])
call P58(A7[3])
call P58(A7[4])
call P58(A7[5])
set x=1
loop
exitwhen x>5
if TA7(Z7[x])then
call CreateUnitAtLoc(Z7[x],1848651843,LV7,bj_UNIT_FACING)
call CreateUnitAtLoc(Z7[x],1848651843,LW7,bj_UNIT_FACING)
endif
if TA7(A7[x])then
call CreateUnitAtLoc(A7[x],1848651843,LV7,bj_UNIT_FACING)
call CreateUnitAtLoc(A7[x],1848651843,LW7,bj_UNIT_FACING)
endif
set x=x+1
endloop
call RemoveLocation(LV7)
call RemoveLocation(LW7)
set R99=GetPlayerState(Z7[1],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Z7[2],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Z7[3],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Z7[4],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Z7[5],PLAYER_STATE_RESOURCE_GOLD)
set RD9=GetPlayerState(A7[1],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(A7[2],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(A7[3],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(A7[4],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(A7[5],PLAYER_STATE_RESOURCE_GOLD)
set R79[1]=null
set R79[2]=null
set R79[3]=null
set R79[4]=null
set R79[5]=null
set R79[6]=null
set R79[7]=null
set R79[8]=null
set R79[9]=null
set R79[$A]=null
set z=1
set w=1
set T8=1
loop
exitwhen T8>5
if(TA7(Z7[T8]))then
set R79[w]=Z7[T8]
set w=w+1
else
set R89[z]=Z7[T8]
set z=z+1
endif
set T8=T8+1
endloop
set T8=1
loop
exitwhen T8>5
if(TA7(A7[T8]))then
set R79[w]=A7[T8]
set w=w+1
else
set R89[z]=A7[T8]
set z=z+1
endif
set T8=T8+1
endloop
set Z7[1]=null
set Z7[2]=null
set Z7[3]=null
set Z7[4]=null
set Z7[5]=null
set A7[1]=null
set A7[2]=null
set A7[3]=null
set A7[4]=null
set A7[5]=null
set T8=1
loop
exitwhen T8>(D5/ 2)
set R49=GetRandomInt(1,D5)
if(R79[R49]!=null)then
set Z7[T8]=R79[R49]
set R79[R49]=null
set T8=T8+1
endif
endloop
set x=T8
set T8=1
loop
exitwhen T8>D5-x+1
set R49=GetRandomInt(1,D5)
if(R79[R49]!=null)then
set A7[T8]=R79[R49]
set R79[R49]=null
set T8=T8+1
endif
endloop
set z=T8
set T8=x
set y=1
loop
exitwhen T8>5
set Z7[T8]=R89[y]
set y=y+1
set T8=T8+1
endloop
set T8=z
loop
exitwhen T8>5
set A7[T8]=R89[y]
set y=y+1
set T8=T8+1
endloop
set T8=0
loop
exitwhen T8>5
set T8=T8+1
endloop
call SetPlayerTeam(Z7[0],0)
call SetPlayerTeam(Z7[1],0)
call SetPlayerTeam(Z7[2],0)
call SetPlayerTeam(Z7[3],0)
call SetPlayerTeam(Z7[4],0)
call SetPlayerTeam(Z7[5],0)
call SetPlayerTeam(A7[0],1)
call SetPlayerTeam(A7[1],1)
call SetPlayerTeam(A7[2],1)
call SetPlayerTeam(A7[3],1)
call SetPlayerTeam(A7[4],1)
call SetPlayerTeam(A7[5],1)
call CC7()
set x=0
set y=0
loop
exitwhen x>5
loop
exitwhen y>5
call SetPlayerAllianceStateBJ(Z7[x],Z7[y],3)
call SetPlayerAllianceStateBJ(A7[x],A7[y],3)
call SetPlayerAllianceStateBJ(Z7[x],A7[y],0)
call SetPlayerAllianceStateBJ(A7[x],Z7[y],0)
set y=y+1
endloop
set y=0
set x=x+1
endloop
call ForceClear(X7)
call ForceClear(Y7)
call ForceAddPlayer(X7,Z7[0])
call ForceAddPlayer(X7,Z7[1])
call ForceAddPlayer(X7,Z7[2])
call ForceAddPlayer(X7,Z7[3])
call ForceAddPlayer(X7,Z7[4])
call ForceAddPlayer(X7,Z7[5])
call ForceAddPlayer(Y7,A7[0])
call ForceAddPlayer(Y7,A7[1])
call ForceAddPlayer(Y7,A7[2])
call ForceAddPlayer(Y7,A7[3])
call ForceAddPlayer(Y7,A7[4])
call ForceAddPlayer(Y7,A7[5])
call ExecuteFunc("LN7")
call Q08()
set LU7=P8(X7)
set LT7=P8(Y7)
set T8=1
loop
exitwhen T8>5
if(TA7(Z7[T8]))then
call SetPlayerStateBJ(Z7[T8],PLAYER_STATE_RESOURCE_GOLD,(4375/ LU7))
call SetPlayerStateBJ(Z7[T8],PLAYER_STATE_RESOURCE_LUMBER,0)
endif
if(TA7(A7[T8]))then
call SetPlayerStateBJ(A7[T8],PLAYER_STATE_RESOURCE_GOLD,(4375/ LT7))
call SetPlayerStateBJ(A7[T8],PLAYER_STATE_RESOURCE_LUMBER,0)
endif
set T8=T8+1
endloop
if V8 then
set x=0
loop
exitwhen x>5
call SetPlayerAlliance(Player(0),Z7[x],ConvertAllianceType(0),true)
call SetPlayerAlliance(Player(0),Z7[x],ConvertAllianceType(4),true)
call SetPlayerAlliance(Player(0),A7[x],ConvertAllianceType(0),false)
call SetPlayerAlliance(Player(0),A7[x],ConvertAllianceType(4),false)
set x=x+1
endloop
endif
call CB7()
set Q09=null
set Q59=null
set LV7=null
set LW7=null
endfunction
function N69 takes nothing returns nothing
local integer LU7=P8(X7)
local integer LT7=P8(Y7)
local integer D5=LU7+LT7
local integer T8
local integer R49
local integer x
local integer y
local integer z
local player array R79
local player array R89
local integer w
local integer R99
local integer RD9
local location Q09
local location Q59
local location LV7
local location LW7
local integer RE9
set RE9=GetRandomInt(1,2)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,$A,(GetObjectName((1848657753))))
if RE9==1 then
return
endif
set jj=true
set Q09=GetRectCenter(ED)
set Q59=GetRectCenter(L9)
set LV7=GetRectCenter(pr)
set LW7=GetRectCenter(qr)
call P58(Z7[1])
call P58(Z7[2])
call P58(Z7[3])
call P58(Z7[4])
call P58(Z7[5])
call P58(A7[1])
call P58(A7[2])
call P58(A7[3])
call P58(A7[4])
call P58(A7[5])
set x=1
loop
exitwhen x>5
if TA7(Z7[x])then
call CreateUnitAtLoc(Z7[x],1848651843,LV7,bj_UNIT_FACING)
call CreateUnitAtLoc(Z7[x],1848651843,LW7,bj_UNIT_FACING)
endif
if TA7(A7[x])then
call CreateUnitAtLoc(A7[x],1848651843,LV7,bj_UNIT_FACING)
call CreateUnitAtLoc(A7[x],1848651843,LW7,bj_UNIT_FACING)
endif
set x=x+1
endloop
call RemoveLocation(LV7)
call RemoveLocation(LW7)
set R99=GetPlayerState(Z7[1],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Z7[2],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Z7[3],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Z7[4],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Z7[5],PLAYER_STATE_RESOURCE_GOLD)
set RD9=GetPlayerState(A7[1],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(A7[2],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(A7[3],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(A7[4],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(A7[5],PLAYER_STATE_RESOURCE_GOLD)
set R79[1]=Z7[1]
set R79[2]=Z7[2]
set R79[3]=Z7[3]
set R79[4]=Z7[4]
set R79[5]=Z7[5]
set R79[6]=A7[1]
set R79[7]=A7[2]
set R79[8]=A7[3]
set R79[9]=A7[4]
set R79[$A]=A7[5]
set Z7[1]=R79[6]
set Z7[2]=R79[7]
set Z7[3]=R79[8]
set Z7[4]=R79[9]
set Z7[5]=R79[$A]
set A7[1]=R79[1]
set A7[2]=R79[2]
set A7[3]=R79[3]
set A7[4]=R79[4]
set A7[5]=R79[5]
call SetPlayerTeam(Z7[0],0)
call SetPlayerTeam(Z7[1],0)
call SetPlayerTeam(Z7[2],0)
call SetPlayerTeam(Z7[3],0)
call SetPlayerTeam(Z7[4],0)
call SetPlayerTeam(Z7[5],0)
call SetPlayerTeam(A7[0],1)
call SetPlayerTeam(A7[1],1)
call SetPlayerTeam(A7[2],1)
call SetPlayerTeam(A7[3],1)
call SetPlayerTeam(A7[4],1)
call SetPlayerTeam(A7[5],1)
call CC7()
set x=0
set y=0
loop
exitwhen x>5
loop
exitwhen y>5
call SetPlayerAllianceStateBJ(Z7[x],Z7[y],3)
call SetPlayerAllianceStateBJ(A7[x],A7[y],3)
call SetPlayerAllianceStateBJ(Z7[x],A7[y],0)
call SetPlayerAllianceStateBJ(A7[x],Z7[y],0)
set y=y+1
endloop
set y=0
set x=x+1
endloop
call ForceClear(X7)
call ForceClear(Y7)
call ForceAddPlayer(X7,Z7[0])
call ForceAddPlayer(X7,Z7[1])
call ForceAddPlayer(X7,Z7[2])
call ForceAddPlayer(X7,Z7[3])
call ForceAddPlayer(X7,Z7[4])
call ForceAddPlayer(X7,Z7[5])
call ForceAddPlayer(Y7,A7[0])
call ForceAddPlayer(Y7,A7[1])
call ForceAddPlayer(Y7,A7[2])
call ForceAddPlayer(Y7,A7[3])
call ForceAddPlayer(Y7,A7[4])
call ForceAddPlayer(Y7,A7[5])
call ExecuteFunc("LN7")
set LU7=P8(X7)
set LT7=P8(Y7)
set T8=1
loop
exitwhen T8>5
if(TA7(Z7[T8]))then
call SetPlayerStateBJ(Z7[T8],PLAYER_STATE_RESOURCE_GOLD,(4375/ LU7))
call SetPlayerStateBJ(Z7[T8],PLAYER_STATE_RESOURCE_LUMBER,0)
endif
if(TA7(A7[T8]))then
call SetPlayerStateBJ(A7[T8],PLAYER_STATE_RESOURCE_GOLD,(4375/ LT7))
call SetPlayerStateBJ(A7[T8],PLAYER_STATE_RESOURCE_LUMBER,0)
endif
set T8=T8+1
endloop
call PanCameraToTimedLocForPlayer(Z7[1],Q09,0)
call PanCameraToTimedLocForPlayer(Z7[2],Q09,0)
call PanCameraToTimedLocForPlayer(Z7[3],Q09,0)
call PanCameraToTimedLocForPlayer(Z7[4],Q09,0)
call PanCameraToTimedLocForPlayer(Z7[5],Q09,0)
call PanCameraToTimedLocForPlayer(A7[1],Q59,0)
call PanCameraToTimedLocForPlayer(A7[2],Q59,0)
call PanCameraToTimedLocForPlayer(A7[3],Q59,0)
call PanCameraToTimedLocForPlayer(A7[4],Q59,0)
call PanCameraToTimedLocForPlayer(A7[5],Q59,0)
call DestroyFogModifier(CreateFogModifierRectBJ(true,Z7[1],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,Z7[2],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,Z7[3],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,Z7[4],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,Z7[5],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,A7[1],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,A7[2],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,A7[3],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,A7[4],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,A7[5],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
if V8 then
set x=0
loop
exitwhen x>5
call SetPlayerAlliance(Player(0),Z7[x],ConvertAllianceType(0),true)
call SetPlayerAlliance(Player(0),Z7[x],ConvertAllianceType(4),true)
call SetPlayerAlliance(Player(0),A7[x],ConvertAllianceType(0),false)
call SetPlayerAlliance(Player(0),A7[x],ConvertAllianceType(4),false)
set x=x+1
endloop
endif
call CB7()
call Q08()
set Q09=null
set Q59=null
set LV7=null
set LW7=null
endfunction
function rN takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer Hm=OM7(OB7,"HeroType")
local player j8
local integer x=1
loop
exitwhen x>5
set j8=Z7[x]
if TA7(j8)and j8!=Le then
set M7[GetPlayerId(j8)]=CreateUnit(j8,Hm,GetRectCenterX(ED),GetRectCenterY(ED),270)
endif
set j8=A7[x]
if TA7(j8)and j8!=Le then
set M7[GetPlayerId(j8)]=CreateUnit(j8,Hm,GetRectCenterX(L9),GetRectCenterY(L9),270)
endif
set x=x+1
endloop
call NM7(OB7)
call OZ7(t)
set t=null
set j8=null
return false
endfunction
function ro takes nothing returns nothing
local integer x=1
local player j8
local unit WI7=GetTriggerUnit()
local integer Hm=GetUnitTypeId(WI7)
local trigger t
local integer OB7
if(GetOwningPlayer(WI7)==Le and IsUnitType(WI7,UNIT_TYPE_HERO))then
call DisableTrigger(GetTriggeringTrigger())
if W4[GetPlayerId(Le)]==false and E4==false and O4==false then
call SetPlayerState(Le,PLAYER_STATE_RESOURCE_GOLD,$FA+GetPlayerState(Le,PLAYER_STATE_RESOURCE_GOLD))
endif
set I[GetPlayerId(Le)]=true
set t=CreateTrigger()
set OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.01,false)
call TriggerAddCondition(t,Condition(function rN))
call NP7(OB7,"HeroType",Hm)
endif
set j8=null
set WI7=null
set t=null
endfunction
function N09 takes nothing returns nothing
local integer x=1
local trigger t=CreateTrigger()
local region r=CreateRegion()
set H34=true
call DisableTrigger(QA4)
call UR7(1211117641)
call UR7(1311788373)
loop
exitwhen x>5
if(Z7[x]!=Le)then
call US7(Z7[x])
set W4[GetPlayerId(Z7[x])]=true
set I[GetPlayerId(Z7[x])]=true
endif
if(A7[x]!=Le)then
call US7(A7[x])
set W4[GetPlayerId(A7[x])]=true
set I[GetPlayerId(A7[x])]=true
endif
set x=x+1
endloop
call RegionAddRect(r,bj_mapInitialPlayableArea)
call TriggerRegisterEnterRegion(t,r,null)
call TriggerAddAction(t,function ro)
endfunction
function N59 takes nothing returns nothing
local integer T8
local integer U8
set Rx=true
set T8=1
set U8=M94
loop
exitwhen T8>U8
call UR7(M84[T8])
set T8=T8+1
endloop
set T8=1
set U8=M74
loop
exitwhen T8>U8
call UR7(M44[T8])
set T8=T8+1
endloop
endfunction
function N_9 takes nothing returns nothing
local integer T8
local integer U8
set bx=true
set T8=1
set U8=M94
loop
exitwhen T8>U8
call UR7(M84[T8])
set T8=T8+1
endloop
set T8=1
set U8=K_4
loop
exitwhen T8>U8
call UR7(K24[T8])
set T8=T8+1
endloop
endfunction
function N29 takes nothing returns nothing
local integer T8
local integer U8
set Nx=true
set T8=1
set U8=K_4
loop
exitwhen T8>U8
call UR7(K24[T8])
set T8=T8+1
endloop
set T8=1
set U8=M74
loop
exitwhen T8>U8
call UR7(M44[T8])
set T8=T8+1
endloop
endfunction
function O79 takes nothing returns nothing
local integer T8
local integer U8
set lj=true
set T8=1
set U8=ME4
loop
exitwhen T8>U8
call UR7(MD4[T8])
set T8=T8+1
endloop
endfunction
function O49 takes nothing returns nothing
local integer T8
local integer U8
set Jj=true
set T8=1
set U8=MG4
loop
exitwhen T8>U8
call UR7(MF4[T8])
set T8=T8+1
endloop
endfunction
function OH9 takes nothing returns nothing
set R4=true
endfunction
function OK9 takes nothing returns nothing
set Y4=true
call SetPlayerTechResearched(Z7[0],1378889780,1)
call SetPlayerTechResearched(A7[0],1378889780,1)
call SetPlayerHandicapXP(Z7[1],1.5)
call SetPlayerHandicapXP(Z7[2],1.5)
call SetPlayerHandicapXP(Z7[3],1.5)
call SetPlayerHandicapXP(Z7[4],1.5)
call SetPlayerHandicapXP(Z7[5],1.5)
call SetPlayerHandicapXP(A7[1],1.5)
call SetPlayerHandicapXP(A7[2],1.5)
call SetPlayerHandicapXP(A7[3],1.5)
call SetPlayerHandicapXP(A7[4],1.5)
call SetPlayerHandicapXP(A7[5],1.5)
endfunction
function OI9 takes nothing returns nothing
set A4=true
call DisableTrigger(H04)
endfunction
function OJ9 takes nothing returns nothing
set C4=true
endfunction
function RF9 takes nothing returns nothing
set oy=false
call VV7(bj_FORCE_ALL_PLAYERS,$A,(GetObjectName((1848657985))))
call DisableTrigger(GetTriggeringTrigger())
endfunction
function RG9 takes nothing returns nothing
call DisableTrigger(OE7(GetHandleId(GetTriggeringTrigger()),"nn"))
call DisableTrigger(GetTriggeringTrigger())
endfunction
function RH9 takes nothing returns nothing
local trigger RI9=CreateTrigger()
local trigger RJ9=CreateTrigger()
call VV7(bj_FORCE_ALL_PLAYERS,10.," ")
call VV7(bj_FORCE_ALL_PLAYERS,10.,"额外命令: 接下来15秒内可以输入 -noneutrals（禁止刷野）。")
call TriggerRegisterTimerEvent(RI9,15.,false)
call TriggerAddAction(RI9,function RG9)
call NV7(GetHandleId(RI9),"nn",RJ9)
call TriggerRegisterPlayerChatEvent(RJ9,Le,"-noneutrals",true)
call TriggerAddAction(RJ9,function RF9)
endfunction
function OM9 takes nothing returns nothing
set PE4=true
call ExecuteFunc("RH9")
endfunction
function ON9 takes nothing returns nothing
set PF4=true
endfunction
function OP9 takes nothing returns nothing
set PG4=true
endfunction
function OO9 takes nothing returns nothing
set PH4=true
endfunction
function OQ9 takes nothing returns nothing
set PI4=true
endfunction
function OR9 takes nothing returns nothing
set PJ4=true
endfunction
function OS9 takes nothing returns nothing
set PK4=true
endfunction
function OC9 takes nothing returns nothing
set TL4=true
endfunction
function O39 takes nothing returns nothing
set T14=true
endfunction
function RK9 takes nothing returns nothing
local integer i=0
loop
exitwhen i>5
call SetPlayerName(Z7[i],(KZ4[GetPlayerId((Z7[i]))])+" ("+I2S(T[GetPlayerId(Z7[i])])+"/"+I2S(V[GetPlayerId(Z7[i])])+" | "+I2S(T7[GetPlayerId(Z7[i])])+"-"+I2S(U7[GetPlayerId(Z7[i])])+")")
call SetPlayerName(A7[i],(KZ4[GetPlayerId((A7[i]))])+" ("+I2S(T[GetPlayerId(A7[i])])+"/"+I2S(V[GetPlayerId(A7[i])])+" | "+I2S(T7[GetPlayerId(A7[i])])+"-"+I2S(U7[GetPlayerId(A7[i])])+")")
set i=i+1
endloop
endfunction
function RM9 takes nothing returns boolean
if PM4==false then
if GetLocalPlayer()==KX4 or GetLocalPlayer()==KY4 then
call RK9()
endif
endif
return false
endfunction
function RN9 takes nothing returns boolean
local integer id=GetUnitTypeId(GetTriggerUnit())
local string RO9
if GetLocalPlayer()==GetTriggerPlayer()then
if id==1749236021 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1848652107 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1849897784 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1701078382 then
elseif id==1848651862 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1848651863 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id=='n2O0' then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1848651826 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1848651864 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1848651833 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1848657989 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1849897781 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1966092369 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1967339316 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1966092592 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1966092378 then
call ResetUnitAnimation(GetTriggerUnit())
endif
endif
return false
endfunction
function RP9 takes nothing returns boolean
local integer id=GetUnitTypeId(GetTriggerUnit())
local string RO9
if GetLocalPlayer()==GetTriggerPlayer()then
if id==1749236021 then
set RO9="stand work"
elseif id==1848652107 then
set RO9="stand third"
elseif id==1849897784 then
call SetUnitAnimationByIndex(GetTriggerUnit(),3)
elseif id==1701078382 then
elseif id==1848651862 then
set RO9="spell attack"
elseif id==1848651863 then
set RO9="spell"
elseif id=='n2O0' then
set RO9="spell"
elseif id==1848651826 then
call SetUnitAnimationByIndex(GetTriggerUnit(),3)
elseif id==1848651864 then
set RO9="stand work"
elseif id==1848651833 then
set RO9="stand work"
elseif id==1848657989 then
set RO9="stand victory"
elseif id==1849897781 then
set RO9="stand work"
elseif id==1966092369 then
set RO9="stand work"
elseif id==1967339316 then
set RO9="stand work gold"
elseif id==1966092592 then
set RO9="stand work"
elseif id==1966092378 then
set RO9="stand work"
endif
if RO9!="" then
call SetUnitAnimation(GetTriggerUnit(),RO9)
call QueueUnitAnimationBJ(GetTriggerUnit(),RO9)
endif
endif
return false
endfunction
function OT9 takes nothing returns nothing
set PM4=true
endfunction
function RQ9 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
call SetUnitScale(WI7,XX7(WI7)*CS,XX7(WI7)*CS,XX7(WI7)*CS)
set WI7=null
endfunction
function RR9 takes nothing returns boolean
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) then
call RQ9()
endif
return false
endfunction
function OU9 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,bj_mapInitialPlayableArea)
call TriggerAddCondition(t,Condition(function RR9))
set bN=true
set CS=.5
endfunction
function OV9 takes nothing returns nothing
set LS=true
endfunction
function OW9 takes nothing returns nothing
set DT=true
endfunction
function RS9 takes nothing returns nothing
set M[1]=0
endfunction
function RT9 takes nothing returns nothing
set M[2]=0
endfunction
function RU9 takes nothing returns nothing
set M[3]=0
endfunction
function RV9 takes nothing returns nothing
set M[4]=0
endfunction
function RW9 takes nothing returns nothing
set M[5]=0
endfunction
function RX9 takes nothing returns nothing
set M[7]=0
endfunction
function RY9 takes nothing returns nothing
set M[8]=0
endfunction
function RZ9 takes nothing returns nothing
set M[9]=0
endfunction
function RA9 takes nothing returns nothing
set M[$A]=0
endfunction
function RB9 takes nothing returns nothing
set M[$B]=0
endfunction
function RC9 takes nothing returns nothing
local integer i=1
local string id
local player p
loop
exitwhen i>5
set p=Z7[i]
set id=I2S(GetPlayerId(p))
call StoreInteger(IV4,id,"id",i)
set p=A7[i]
set id=I2S(GetPlayerId(p))
call StoreInteger(IV4,id,"id",i+5)
if GetLocalPlayer()==Le then
call SyncStoredInteger(IV4,I2S(GetPlayerId(Z7[i])),"id")
call SyncStoredInteger(IV4,I2S(GetPlayerId(A7[i])),"id")
endif
set i=i+1
endloop
endfunction
function R39 takes nothing returns boolean
local boolean R69=Y8
if(vY and(not R69))then
set Y8=true
endif
if R69 then
call UW7()
call VV7(bj_FORCE_ALL_PLAYERS,20.,Q[GetPlayerId(Le)]+(KZ4[GetPlayerId((Le))])+"|r"+" "+(GetObjectName((1848656717))))
call VV7(bj_FORCE_ALL_PLAYERS,20.," ")
set Q94=true
call H79()
call MG9()
call Q08()
call G29()
call Q68()
elseif vY then
call VV7(bj_FORCE_ALL_PLAYERS,20.,"此模式是无用的，系统默认选为|c006699CCNormal Mode|r（普通模式）。 在你选择英雄后，你将得到175金钱返还。")
call VV7(bj_FORCE_ALL_PLAYERS,20.," ")
endif
call RC9()
call OZ7(GetTriggeringTrigger())
return false
endfunction
function RL9 takes nothing returns boolean
set P=true
call OZ7(GetTriggeringTrigger())
return false
endfunction
function R19 takes nothing returns nothing
set O=true
endfunction
function R09 takes nothing returns nothing
set G8=true
endfunction
function R59 takes nothing returns nothing
set T9=true
endfunction
function R29 takes nothing returns boolean
return(GetUnitAbilityLevel(GetKillingUnit(),1093685043)>0 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit()))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitIllusion(GetTriggerUnit())==false)!=null
endfunction
function R_9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit u=O77(OB7,"Unit")
call NP7(GetHandleId(u),"PreviousKills",OM7(GetHandleId(u),"PreviousKills")-1)
call NM7(OB7)
call OZ7(t)
set u=null
set t=null
return false
endfunction
function S49 takes nothing returns nothing
local unit S79=GetKillingUnit()
local unit S89=GetTriggerUnit()
local integer I97=GetHandleId(S79)
local integer S99=OM7(I97,"PreviousKills")
local integer BC7=GetUnitAbilityLevel(S79,1093685043)
local integer SD9=S99*3
local integer SE9=YG7(SD9+BC7*2+4,BC7*8+4)
local texttag tt=CreateTextTag()
local player p=GetOwningPlayer(S79)
local trigger t=CreateTrigger()
set ET[GetPlayerId(p)]=ET[GetPlayerId(p)]+SE9
call TriggerRegisterTimerEvent(t,30.,false)
call TriggerAddCondition(t,Condition(function R_9))
call NT7(GetHandleId(t),"Unit",S79)
call NP7(I97,"PreviousKills",S99+1)
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,SE9+GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD))
call SetTextTagText(tt,"+"+I2S(SE9),.025)
call SetTextTagPosUnit(tt,S89,0)
call SetTextTagColor(tt,$FF,$DC,0,$FF)
call SetTextTagVelocity(tt,0,.03)
if GetLocalPlayer()==p then
call SetTextTagVisibility(tt,true)
else
call SetTextTagVisibility(tt,false)
endif
call SetTextTagFadepoint(tt,2)
call SetTextTagLifespan(tt,3)
call SetTextTagPermanent(tt,false)
set t=null
set S79=null
set S89=null
set p=null
endfunction
function SF9 takes nothing returns boolean
local integer SG9=ET[GetPlayerId(GetTriggerPlayer())]
if SG9>0 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,10.,(GetObjectName((1848657745)))+" "+I2S(SG9))
endif
return false
endfunction
function J38 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function R29))
call TriggerAddAction(t,function S49)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-st",true)
call TriggerAddCondition(t,Condition(function SF9))
set t=null
endfunction
function SH9 takes nothing returns nothing
call B67(S34,GetEnumUnit(),2,S14)
call BA7(S34,GetEnumUnit(),SL4)
endfunction
function SI9 takes unit ZX7,unit IH7,real SJ9 returns nothing
local group g
local integer V77=GetUnitAbilityLevel(ZX7,1093750345)
local real x
local real y
set S34=ZX7
set S14=(80+70*V77)*SJ9/5.
set SL4=(1+.75*V77)*SJ9/5.
set S64=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
call XF7(S64,1093687350)
call SetUnitAbilityLevel(S64,1093687350,BY7(SL4))
set IN4=ZX7
set g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(IH7),GetUnitY(IH7),$E1+25,Condition(function AJ7))
if GetUnitTypeId(IH7)!=1747993156 then
call GroupAddUnit(g,IH7)
endif
call ForGroup(g,function SH9)
call WR7(g)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\DemolisherFireMissile\\DemolisherFireMissile.mdl",GetUnitX(IH7),GetUnitY(IH7)))
set g=null
endfunction
function SK9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit m5=O77(OB7,"Target")
local unit BU7=O77(OB7,"Projectile")
local real SJ9=ON7(OB7,"Elapsed")
local real SM9=ON7(OB7,"OriginalTime")
local real l4=J77(GetUnitX(BU7),GetUnitY(BU7),GetUnitX(m5),GetUnitY(m5))
local real x=GetUnitX(BU7)+18*Cos(l4*bj_DEGTORAD)
local real y=GetUnitY(BU7)+18*Sin(l4*bj_DEGTORAD)
call SetUnitX(BU7,x)
call SetUnitY(BU7,y)
if KF7(x,y,GetUnitX(m5),GetUnitY(m5))<=18 then
call KillUnit(BU7)
call SI9(p5,m5,SJ9)
call NM7(OB7)
call OZ7(t)
elseif(TimerGetElapsed(W))-SM9>(5.+2.)then
call KillUnit(BU7)
call SI9(p5,BU7,SJ9)
call NM7(OB7)
call OZ7(t)
endif
set t=null
set p5=null
set m5=null
set BU7=null
return false
endfunction
function SN9 takes unit p5,unit m5,real SJ9,real SM9 returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit BU7=CreateUnit(GetOwningPlayer(p5),1747993156,GetUnitX(p5),GetUnitY(p5),GetUnitFacing(p5))
call NT7(OB7,"Source",p5)
call NT7(OB7,"Target",m5)
call NT7(OB7,"Projectile",BU7)
call NQ7(OB7,"Elapsed",SJ9*1.)
call NQ7(OB7,"OriginalTime",SM9*1.)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function SK9))
set t=null
set BU7=null
endfunction
function SO9 takes string SP9,unit m5,unit SQ9 returns nothing
local texttag tt=CreateTextTag()
call SetTextTagText(tt,SP9,.033)
call SetTextTagPosUnit(tt,m5,64)
call SetTextTagColor(tt,$FF,0,0,$FF)
call SetTextTagVelocity(tt,0,.0355)
call SetTextTagFadepoint(tt,.15)
call SetTextTagPermanent(tt,false)
call SetTextTagLifespan(tt,.65)
if IsUnitAlly(SQ9,GetLocalPlayer())or WG7(GetLocalPlayer())then
call SetTextTagVisibility(tt,true)
else
call SetTextTagVisibility(tt,false)
endif
set tt=null
endfunction
function SR9 takes real SS9 returns string
if SS9>4.5 then
return"5.0"
elseif SS9>4. then
return"4.5"
elseif SS9>3.5 then
return"4.0"
elseif SS9>3. then
return"3.5"
elseif SS9>2.5 then
return"3.0"
elseif SS9>2. then
return"2.5"
elseif SS9>1.5 then
return"2.0"
elseif SS9>1. then
return"1.5"
elseif SS9>.5 then
return"1.0"
elseif SS9>.0 then
return"0.5"
else
return"0.0"
endif
return" "
endfunction
function ST9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local real SM9=ON7(OB7,"OriginalTime")
local real CP7=(TimerGetElapsed(W))
local real SU9=5.-(CP7-SM9)
local real RM8=YJ7(CP7-SM9,5.)
local integer SV9=OM7(OB7,"Count")+1
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call SI9(p5,p5,5.)
if(LoadInteger(L7,(GetHandleId(p5)),(704)))==0 or(LoadInteger(L7,(GetHandleId(p5)),(704)))==1093750345 then
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750345,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750344,false)
call SetUnitVertexColor(p5,$FF,$FF,$FF,$FF)
call DestroyEffect((LoadEffectHandle(L7,(OB7),(32))))
call NM7(OB7)
call OZ7(t)
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093750344 then
if WQ7(GetSpellTargetUnit())==false then
call SN9(p5,GetSpellTargetUnit(),RM8,SM9)
endif
if(LoadInteger(L7,(GetHandleId(p5)),(704)))==0 or(LoadInteger(L7,(GetHandleId(p5)),(704)))==1093750345 then
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750345,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750344,false)
call SetUnitVertexColor(p5,$FF,$FF,$FF,$FF)
call DestroyEffect((LoadEffectHandle(L7,(OB7),(32))))
call NM7(OB7)
call OZ7(t)
endif
else
call SaveInteger(L7,(OB7),StringHash("Count"),(SV9))
if SU9>=0 then
call SO9(SR9(SU9),p5,p5)
if ModuloInteger(SV9,2)==0 then
call SetUnitVertexColor(p5,$FF,125,125,$FF)
else
call SetUnitVertexColor(p5,$FF,$AF,$AF,$FF)
endif
else
call SetUnitVertexColor(p5,$FF,0,0,$FF)
endif
if CP7-SM9>(5.+2.)then
call SI9(p5,p5,5.)
if(LoadInteger(L7,(GetHandleId(p5)),(704)))==0 or(LoadInteger(L7,(GetHandleId(p5)),(704)))==1093750345 then
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750345,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750344,false)
call SetUnitVertexColor(p5,$FF,$FF,$FF,$FF)
call DestroyEffect((LoadEffectHandle(L7,(OB7),(32))))
call NM7(OB7)
call OZ7(t)
endif
endif
set t=null
set p5=null
return false
endfunction
function SW9 takes nothing returns nothing
local unit p5=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local string st="war3mapImported\\UnstableConcoctionRangeDisplay3.mdx"
if GetLocalPlayer()!=GetOwningPlayer(p5)then
set st=""
endif
call NT7(OB7,"Source",p5)
call NQ7(OB7,"OriginalTime",TimerGetElapsed(W)*1.)
call SaveEffectHandle(L7,(OB7),(32),(AddSpecialEffectTarget(st,p5,"origin")))
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function ST9))
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750345,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750344,true)
call XF7(p5,1093750344)
call UnitMakeAbilityPermanent(p5,true,1093750344)
call TriggerEvaluate(t)
set p5=null
set t=null
endfunction
function SX9 takes nothing returns boolean
if GetSpellAbilityId()==1093750345 then
call SW9()
endif
return false
endfunction
function J68 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SX9))
call X_7(1093687350)
set t=null
endfunction
function ZV takes nothing returns boolean
return GetSpellAbilityId()==1093683532
endfunction
function SY9 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(D8))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitTypeId(GetFilterUnit())!=1848657461)!=null
endfunction
function SZ9 takes nothing returns nothing
call UnitDamageTarget(D8,GetEnumUnit(),F8,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endfunction
function RC takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local unit oA=O77(OB7,"Caster")
local integer Rd=OM7(OB7,"Counter")
local real x=GetUnitX(oA)
local real y=GetUnitY(oA)
local boolexpr hP
local group LQ7
if Rd>$C then
call KillUnit(oA)
call PauseTimer(t)
call NM7(OB7)
call DestroyTimer(t)
else
set D8=WI7
set F8=8+GetUnitAbilityLevel(WI7,1093683532)*10
set hP=Condition(function SY9)
set LQ7=WS7()
call GroupEnumUnitsInRange(LQ7,x,y,650,hP)
call ForGroup(LQ7,function SZ9)
call WR7(LQ7)
call DestroyBoolExpr(hP)
set Rd=Rd+1
call NP7(OB7,"Counter",Rd)
set LQ7=null
set hP=null
endif
set t=null
set WI7=null
set oA=null
endfunction
function SA9 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local location Mk=GetSpellTargetLoc()
local real x=GetLocationX(Mk)
local real y=GetLocationY(Mk)
local unit oA=CreateUnit(GetOwningPlayer(WI7),1697657157,x,y,0)
local timer t=CreateTimer()
local integer OB7=GetHandleId(t)
call RemoveLocation(Mk)
call XF7(oA,1093683764)
call SetUnitAbilityLevel(oA,1093683764,GetUnitAbilityLevel(WI7,1093683532))
call XF7(oA,1097625443)
call NT7(OB7,"Hero",WI7)
call NT7(OB7,"Caster",oA)
call NP7(OB7,"Counter",0)
call TimerStart(t,1,true,function RC)
set WI7=null
set Mk=null
set oA=null
set t=null
endfunction
function JL8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(t,function SA9)
call TriggerAddCondition(t,Condition(function ZV))
call X_7(1093683764)
set t=null
endfunction
function SB9 takes nothing returns nothing
call B67(DN,GetEnumUnit(),11,dN)
endfunction
function SC9 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer V77=GetUnitAbilityLevel(WI7,1093682483)
local real YM7=(.35+.25*V77)*(GetUnitState(m5,UNIT_STATE_MAX_MANA)-GetUnitState(m5,UNIT_STATE_MANA))
local group g=WS7()
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl",m5,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl",m5,"chest"))
call DestroyEffect(AddSpecialEffect("war3mapImported\\Enchantment.mdx",GetUnitX(m5),GetUnitY(m5)))
call GroupEnumUnitsInRange(g,GetUnitX(m5),GetUnitY(m5),525,Condition(function AW7))
set dN=YM7
set DN=WI7
call ForGroup(g,function SB9)
call PlaySoundOnUnitBJ(oO,100,m5)
call WR7(g)
set WI7=null
set m5=null
set g=null
endfunction
function S39 takes nothing returns boolean
if GetSpellAbilityId()==1093682483 and WQ7(GetSpellTargetUnit())==false then
call SC9()
endif
return false
endfunction
function E48 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function S39))
set t=null
endfunction
function S69 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit BB7=O77(OB7,"Caster")
local integer U38=GetTriggerEvalCount(t)
local integer SL9=R2I(((.9-.3)/ .5)/ .03)
local integer S19=R2I(($AF/ SL9))
local integer S09=R2I(($FF/ SL9)*1.75)
local unit WI7=O77(OB7,"Hero")
local real x=ON7(OB7,"x")
local real y=ON7(OB7,"y")
if U38>SL9 then
call SetUnitVertexColor(BB7,$FF,$FF,$FF,0)
call SetUnitVertexColor(WI7,$FF,$FF,$FF,$FF)
call ShowUnit(BB7,false)
call NM7(OB7)
call OZ7(t)
else
call SetUnitVertexColor(BB7,$FF,$FF,$FF,$AF-S19*U38)
call SetUnitX(BB7,x)
call SetUnitY(BB7,y)
call SetUnitVertexColor(WI7,$FF,$FF,$FF,S09*U38)
endif
set t=null
set BB7=null
set WI7=null
return false
endfunction
function S59 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit BB7=O77(GetHandleId(WI7),"BlinkAM_Caster")
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local real x=GetUnitX(WI7)
local real y=GetUnitY(WI7)
call SetUnitX(BB7,x)
call SetUnitY(BB7,y)
call SetUnitX(WI7,x)
call SetUnitY(WI7,y)
call SetUnitVertexColor(WI7,$FF,$FF,$FF,0)
call SetUnitVertexColor(BB7,$FF,$FF,$FF,$AF)
call SetUnitTimeScale(BB7,.5)
call NT7(OB7,"Caster",BB7)
call NT7(OB7,"Hero",WI7)
call NQ7(OB7,"x",x*1.)
call NQ7(OB7,"y",y*1.)
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerAddCondition(t,Condition(function S69))
set WI7=null
set BB7=null
set t=null
endfunction
function S29 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit BB7
local integer OB7=GetHandleId(WI7)
local real a=J77(GetUnitX(WI7),GetUnitY(WI7),GetSpellTargetX(),GetSpellTargetY())
local real x=GetUnitX(WI7)
local real y=GetUnitY(WI7)
call SetUnitPathing(WI7,false)
call XF7(WI7,1097167976)
set BB7=CreateUnit(GetOwningPlayer(WI7),1747990091,GetUnitX(WI7),GetUnitY(WI7),a)
call XN7(BB7,5)
call SetUnitPathing(BB7,false)
call XF7(BB7,1097167976)
call XF7(BB7,1097625443)
call XF7(BB7,1093678162)
call SetUnitVertexColor(BB7,$FF,$FF,$FF,0)
call SetUnitX(BB7,x)
call SetUnitY(BB7,y)
call SetUnitX(WI7,x)
call SetUnitY(WI7,y)
call SetUnitAnimation(BB7,"Spell Throw")
call SetUnitPathing(WI7,true)
call UnitRemoveAbility(WI7,1097167976)
call NT7(OB7,"BlinkAM_Caster",BB7)
set WI7=null
set BB7=null
endfunction
function S_9 takes nothing returns boolean
if GetSpellAbilityId()==1095066220 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
call S59()
else
call S29()
endif
endif
return false
endfunction
function E78 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function S_9))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function S_9))
set t=null
call XO7(1747990091)
endfunction
function T49 takes unit ZX7,unit IH7 returns nothing
local integer BC7=GetUnitAbilityLevel(ZX7,1093752374)
local real T79=16+$C*BC7
local real T89=GetUnitState(IH7,UNIT_STATE_MANA)
local real T99=RMinBJ(T79,T89)
if T99>0 then
call SetUnitState(IH7,UNIT_STATE_MANA,T89-T99)
call B67(ZX7,IH7,2,T99*.6)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\SpellBreakerAttack.mdl",IH7,"origin"))
endif
endfunction
function TD9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local integer TE9=(LoadInteger(L7,(I97),(30)))
local unit IH7=TQ7(TE9)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==ZX7 then
call DisableTrigger(t)
call T49(ZX7,IH7)
call TP7(TE9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
else
call TP7(TE9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function TF9 takes nothing returns nothing
local trigger t=CreateTrigger()
local unit IH7=GetTriggerUnit()
local unit ZX7=GetAttacker()
local integer I97=GetHandleId(t)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,.4,false)
call TriggerAddCondition(t,Condition(function TD9))
call SaveInteger(L7,(I97),(30),(TS7(IH7)))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set IH7=null
set ZX7=null
set t=null
endfunction
function TG9 takes nothing returns nothing
local unit ZX7=GetAttacker()
if OT7(ZX7,"CooldownState")==false then
call O37(ZX7,"CooldownState",.4)
call TF9()
endif
set ZX7=null
endfunction
function TH9 takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093752374)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(L7,(GetHandleId(GetTriggeringTrigger())),($E)))and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))and WF7(GetTriggerUnit())==false then
call TG9()
endif
return false
endfunction
function TI9 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function TH9))
call SaveUnitHandle(L7,(GetHandleId(t)),($E),(GetTriggerUnit()))
set t=null
endfunction
function TJ9 takes nothing returns boolean
if GetLearnedSkill()==1093752374 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093752374)==1 then
call TI9()
endif
return false
endfunction
function E88 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function TJ9))
set t=null
endfunction
function TK9 takes nothing returns boolean
return GetSpellAbilityId()==1093685071
endfunction
function TM9 takes nothing returns nothing
if(GetUnitTypeId(GetEnumUnit())==1848652113 or GetUnitTypeId(GetEnumUnit())==1848652109 or GetUnitTypeId(GetEnumUnit())==1848652114 or GetUnitTypeId(GetEnumUnit())==1848652115)then
call KillUnit(GetEnumUnit())
endif
endfunction
function TN9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit TO9=(LoadUnitHandle(L7,(I97),(2)))
local real TP9=(LoadReal(L7,(I97),(6)))
local real TQ9=(LoadReal(L7,(I97),(7)))
local real TR9=GetUnitX(TO9)
local real TS9=GetUnitY(TO9)
call SaveReal(L7,(I97),(6),((TR9)*1.))
call SaveReal(L7,(I97),(7),((TS9)*1.))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
if TP9==TR9 and TQ9==TS9 then
if GetUnitAbilityLevel(TO9,1093752647)==0 then
call XF7(TO9,1093752647)
endif
else
if GetUnitAbilityLevel(TO9,1093752647)>0 then
call UnitRemoveAbility(TO9,1093752647)
endif
endif
endif
set t=null
set TO9=null
return false
endfunction
function TT9 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local player j8=GetOwningPlayer(WI7)
local integer V77=GetUnitAbilityLevel(WI7,1093685071)
local real x=GetUnitX(WI7)
local real y=GetUnitY(WI7)
local group LQ7=WS7()
local unit TO9
local trigger t
local integer I97
call GroupEnumUnitsOfPlayer(LQ7,j8,Condition(function TO7))
call ForGroup(LQ7,function TM9)
call WR7(LQ7)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl",x,y))
if(V77==1)then
set TO9=CreateUnit(j8,1848652113,x,y,270)
call UnitApplyTimedLife(TO9,1112820806,60)
elseif(V77==2)then
set TO9=CreateUnit(j8,1848652113,x,y,270)
call UnitApplyTimedLife(TO9,1112820806,70)
call UnitApplyTimedLife(CreateUnit(j8,1848652109,x,y,270),1112820806,70)
elseif(V77==3)then
set TO9=CreateUnit(j8,1848652114,x,y,270)
call UnitApplyTimedLife(TO9,1112820806,80)
call UnitApplyTimedLife(CreateUnit(j8,1848652109,x,y,270),1112820806,80)
elseif(V77==4)then
set TO9=CreateUnit(j8,1848652114,x,y,270)
call UnitApplyTimedLife(TO9,1112820806,80)
call UnitApplyTimedLife(CreateUnit(j8,1848652115,x,y,270),1112820806,90)
endif
if V77==3 or V77==4 then
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterUnitEvent(t,TO9,EVENT_UNIT_DEATH)
call SaveReal(L7,(I97),(6),((GetUnitX(TO9))*1.))
call SaveReal(L7,(I97),(7),((GetUnitY(TO9))*1.))
call SaveUnitHandle(L7,(I97),(2),(TO9))
call TriggerAddCondition(t,Condition(function TN9))
endif
set WI7=null
set j8=null
set LQ7=null
set TO9=null
set t=null
endfunction
function EE8 takes nothing returns nothing
set nJ=CreateTrigger()
call YB7(nJ,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(nJ,Condition(function TK9))
call TriggerAddAction(nJ,function TT9)
endfunction
function TU9 takes nothing returns nothing
local real x=GetUnitX(GetEnumUnit())
local real y=GetUnitY(GetEnumUnit())
local real a=bj_RADTODEG*Atan2(y-IK4,x-IJ4)
local real TV9
local real TW9
if Sin((a-IM4)*bj_DEGTORAD)<0 then
set TV9=GetUnitX(GetEnumUnit())+$F*Cos((IM4-90)*bj_DEGTORAD)
set TW9=GetUnitY(GetEnumUnit())+$F*Sin((IM4-90)*bj_DEGTORAD)
call SetUnitPosition(GetEnumUnit(),TV9,TW9)
call SetUnitFacingTimed(GetEnumUnit(),IM4+90,.3)
else
set TV9=GetUnitX(GetEnumUnit())+$F*Cos((IM4+90)*bj_DEGTORAD)
set TW9=GetUnitY(GetEnumUnit())+$F*Sin((IM4+90)*bj_DEGTORAD)
call SetUnitPosition(GetEnumUnit(),TV9,TW9)
call SetUnitFacingTimed(GetEnumUnit(),IM4-90,.3)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",GetEnumUnit(),"origin"))
endfunction
function TX9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local real l4=ON7(OB7,"Angle")
local real x=ON7(OB7,"x")
local real y=ON7(OB7,"y")
local group g=OF7(OB7,"g")
if GetTriggerEvalCount(t)>16 then
call WR7(g)
call NM7(OB7)
call OZ7(t)
else
set IJ4=x
set IK4=y
set IM4=l4
call ForGroup(g,function TU9)
endif
set t=null
set g=null
return false
endfunction
function TY9 takes nothing returns nothing
call B67(IN4,GetEnumUnit(),1,IJ4)
endfunction
function TZ9 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit WX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local integer BC7=GetUnitAbilityLevel(WX7,1093685042)
local unit BB7
local real TA9=bj_RADTODEG*Atan2(GetUnitY(IH7)-GetUnitY(WX7),GetUnitX(IH7)-GetUnitX(WX7))
local real x
local real y
local group g=WS7()
local group g2=WS7()
if BC7==0 then
set BC7=GetUnitAbilityLevel(WX7,1093810233)
endif
call NB7(OB7,"g",g)
call NQ7(OB7,"Angle",TA9*1.)
call NQ7(OB7,"x",GetUnitX(WX7)*1.)
call NQ7(OB7,"y",GetUnitY(WX7)*1.)
call TriggerRegisterTimerEvent(t,.025,true)
call TriggerAddCondition(t,Condition(function TX9))
set x=GetUnitX(WX7)+50*Cos(TA9*bj_DEGTORAD)
set y=GetUnitY(WX7)+50*Sin(TA9*bj_DEGTORAD)
call GroupEnumUnitsInRange(g2,x,y,$FA,Condition(function AW7))
call GroupAddGroup(g2,g)
call GroupClear(g2)
set BB7=CreateUnit(GetOwningPlayer(WX7),1865429081,x,y,TA9)
call UnitApplyTimedLife(BB7,1112820806,1)
call XF7(BB7,1093684825)
call SetUnitAbilityLevel(BB7,1093684825,BC7)
call IssueImmediateOrderById(BB7,$D0080)
set x=GetUnitX(WX7)+$FA*Cos(TA9*bj_DEGTORAD)
set y=GetUnitY(WX7)+$FA*Sin(TA9*bj_DEGTORAD)
call GroupEnumUnitsInRange(g2,x,y,$FA,Condition(function AW7))
call GroupAddGroup(g2,g)
call GroupClear(g2)
set BB7=CreateUnit(GetOwningPlayer(WX7),1865429081,x,y,TA9)
call UnitApplyTimedLife(BB7,1112820806,1)
call XF7(BB7,1093684825)
call SetUnitAbilityLevel(BB7,1093684825,BC7)
call IssueImmediateOrderById(BB7,$D0080)
set x=GetUnitX(WX7)+450*Cos(TA9*bj_DEGTORAD)
set y=GetUnitY(WX7)+450*Sin(TA9*bj_DEGTORAD)
call GroupEnumUnitsInRange(g2,x,y,$FA,Condition(function AW7))
call GroupAddGroup(g2,g)
call GroupClear(g2)
set BB7=CreateUnit(GetOwningPlayer(WX7),1865429081,x,y,TA9)
call UnitApplyTimedLife(BB7,1112820806,1)
call XF7(BB7,1093684825)
call SetUnitAbilityLevel(BB7,1093684825,BC7)
call IssueImmediateOrderById(BB7,$D0080)
if GetUnitAbilityLevel(WX7,1093685042)==0 then
set x=GetUnitX(WX7)+650*Cos(TA9*bj_DEGTORAD)
set y=GetUnitY(WX7)+650*Sin(TA9*bj_DEGTORAD)
call GroupEnumUnitsInRange(g2,x,y,$FA,Condition(function AW7))
call GroupAddGroup(g2,g)
call GroupClear(g2)
set BB7=CreateUnit(GetOwningPlayer(WX7),1865429081,x,y,TA9)
call UnitApplyTimedLife(BB7,1112820806,1)
call XF7(BB7,1093684825)
call SetUnitAbilityLevel(BB7,1093684825,BC7)
call IssueImmediateOrderById(BB7,$D0080)
endif
call WR7(g2)
call GroupRemoveUnit(g,IH7)
set IJ4=100+50*BC7
set IN4=WX7
call ForGroup(g,function TY9)
set t=null
set WX7=null
set IH7=null
set BB7=null
set g=null
set g2=null
endfunction
function TB9 takes nothing returns boolean
if(GetSpellAbilityId()==1093685042 or GetSpellAbilityId()==1093810233)and WQ7(GetSpellTargetUnit())==false then
call TZ9()
endif
return false
endfunction
function E98 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TB9))
set t=null
endfunction
function TC9 takes nothing returns boolean
return GetSpellAbilityId()==1093685041
endfunction
function T39 takes unit WI7,real x,real y,group T69 returns nothing
local group LQ7=WS7()
local unit D_8
call Y67(x,y,$96)
call GroupEnumUnitsInRange(LQ7,x,y,150,Condition(function TO7))
loop
set D_8=FirstOfGroup(LQ7)
exitwhen D_8==null
if IsUnitInGroup(D_8,T69)==false and IsUnitEnemy(D_8,GetOwningPlayer(WI7))then
if(GetUnitAbilityLevel(D_8,1093678162)!=1 and GetUnitState(D_8,UNIT_STATE_LIFE)>0 and IsUnitType(D_8,UNIT_TYPE_STRUCTURE)==false)then
call GroupAddUnit(T69,D_8)
call UnitDamageTarget(WI7,D_8,60+GetUnitAbilityLevel(WI7,1093685041)*30,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_METAL_HEAVY_SLICE)
call AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",D_8,"overhead")
endif
endif
call GroupRemoveUnit(LQ7,D_8)
endloop
call WR7(LQ7)
set LQ7=null
set D_8=null
endfunction
function TL9 takes nothing returns nothing
local integer I97=GetHandleId(GetExpiredTimer())
local unit T19=O77(I97,"Axe")
local unit WX7=O77(I97,"Hero")
local real Ax=ON7(I97,"Ax")
local real Ay=ON7(I97,"Ay")
local real Cx=ON7(I97,"Cx")
local real Cy=ON7(I97,"Cy")
local real Bx=ON7(I97,"Bx")
local real By=ON7(I97,"By")
local real a=ON7(I97,"a")
local real b=1-a
local boolean T09=OO7(I97,"FirstPass")
local group T59=OF7(I97,"AlreadyDamaged")
local real T29=RMaxBJ(KF7(Ax,Ay,Cx,Cy)/$514,.4)
call SetUnitX(T19,X17(Ax*a*a+Bx*2*a*b+Cx*b*b))
call SetUnitY(T19,X07(Ay*a*a+By*2*a*b+Cy*b*b))
call T39(WX7,GetUnitX(T19),GetUnitY(T19),T59)
if(T09)then
call NQ7(I97,"a",(a-.02/T29)*1.)
else
call NQ7(I97,"a",(a+.02/T29)*1.)
call NQ7(I97,"Ax",GetUnitX(WX7)*1.)
call NQ7(I97,"Ay",GetUnitY(WX7)*1.)
endif
if(a<0 and T09)then
call NS7(I97,"FirstPass",false)
call NQ7(I97,"Bx",(Ax+300*Cos(Atan2(Cy-Ay,Cx-Ax)+(ON7(I97,"AngleOffset"))))*1.)
call NQ7(I97,"By",(Ay+300*Sin(Atan2(Cy-Ay,Cx-Ax)+(ON7(I97,"AngleOffset"))))*1.)
endif
if(a>1 and T09==false)then
call PauseTimer(GetExpiredTimer())
call WR7(T59)
call NM7(I97)
call RemoveUnit(T19)
call DestroyTimer(GetExpiredTimer())
endif
set T19=null
set WX7=null
set T59=null
endfunction
function T_9 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local real Ax=GetUnitX(WI7)
local real Ay=GetUnitY(WI7)
local real Cx=GetLocationX(GetSpellTargetLoc())
local real Cy=GetLocationY(GetSpellTargetLoc())
local unit U49=CreateUnit(GetOwningPlayer(WI7),1697657172,Ax,Ay,270.)
local unit U79=CreateUnit(GetOwningPlayer(WI7),1697657172,Ax,Ay,270.)
local integer U89
local integer U99
local timer UD9=CreateTimer()
local timer UE9=CreateTimer()
if GetSpellTargetUnit()!=null then
set Cx=GetUnitX(GetSpellTargetUnit())
set Cy=GetUnitY(GetSpellTargetUnit())
endif
call XF7(U49,1097691750)
call UnitRemoveAbility(U49,1097691750)
call SetUnitFlyHeight(U49,$96,0)
call XF7(U79,1097691750)
call UnitRemoveAbility(U79,1097691750)
call SetUnitFlyHeight(U79,$96,0)
set U89=GetHandleId(UD9)
call NT7(U89,"Hero",WI7)
call NT7(U89,"Axe",U49)
call NB7(U89,"AlreadyDamaged",WS7())
call NQ7(U89,"Ax",(Ax)*1.)
call NQ7(U89,"Ay",(Ay)*1.)
call NQ7(U89,"Cx",(Cx)*1.)
call NQ7(U89,"Cy",(Cy)*1.)
call NQ7(U89,"Bx",(Ax+300*Cos(Atan2(Cy-Ay,Cx-Ax)+45))*1.)
call NQ7(U89,"By",(Ay+300*Sin(Atan2(Cy-Ay,Cx-Ax)+45))*1.)
call NQ7(U89,"a",(1)*1.)
call NQ7(U89,"AngleOffset",(-45)*1.)
call NS7(U89,"FirstPass",true)
set U99=GetHandleId(UE9)
call NT7(U99,"Hero",WI7)
call NT7(U99,"Axe",U79)
call NB7(U99,"AlreadyDamaged",WS7())
call NQ7(U99,"Ax",(Ax)*1.)
call NQ7(U99,"Ay",(Ay)*1.)
call NQ7(U99,"Cx",(Cx)*1.)
call NQ7(U99,"Cy",(Cy)*1.)
call NQ7(U99,"Bx",(Ax+300*Cos(Atan2(Cy-Ay,Cx-Ax)-45))*1.)
call NQ7(U99,"By",(Ay+300*Sin(Atan2(Cy-Ay,Cx-Ax)-45))*1.)
call NQ7(U99,"a",(1)*1.)
call NQ7(U99,"AngleOffset",(45)*1.)
call NS7(U99,"FirstPass",true)
call TimerStart(UD9,.025,true,function TL9)
call TimerStart(UE9,.025,true,function TL9)
set WI7=null
set U49=null
set U79=null
set UD9=null
set UE9=null
endfunction
function ED8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TC9))
call TriggerAddAction(t,function T_9)
set t=null
endfunction
function UF9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
call UnitRemoveAbility(p5,1093743664)
call NM7(OB7)
call OZ7(t)
set t=null
set p5=null
return false
endfunction
function UG9 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit p5=GetTriggerUnit()
call XF7(p5,1093743664)
call TriggerRegisterTimerEvent(t,6.,false)
call TriggerAddCondition(t,Condition(function UF9))
call NT7(OB7,"Source",p5)
set t=null
set p5=null
endfunction
function UH9 takes nothing returns boolean
if GetSpellAbilityId()==1093743450 then
call UG9()
endif
return false
endfunction
function EF8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function UH9))
set t=null
endfunction
function UI9 takes nothing returns nothing
local unit p5=GetTriggerUnit()
local integer OB7=GetHandleId(p5)
local player p=O97(OB7,"Track|SourcePlayer")
local integer BC7=OM7(OB7,"Track|Level")
local texttag tt=CreateTextTag()
local integer WE8
local integer i=1
local unit UJ9
local player UK9
if BC7==1 then
set WE8=$96
elseif BC7==2 then
set WE8=250
else
set WE8=350
endif
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)+WE8)
call SetTextTagText(tt,"+"+I2S(WE8),.025)
call SetTextTagPosUnit(tt,M7[GetPlayerId(p)],100)
call SetTextTagColor(tt,$FF,$DC,0,$FF)
call SetTextTagVelocity(tt,0,.03)
call SetTextTagVisibility(tt,false)
if GetLocalPlayer()==p then
call SetTextTagVisibility(tt,true)
endif
call SetTextTagFadepoint(tt,2)
call SetTextTagLifespan(tt,3)
call SetTextTagPermanent(tt,false)
set VH4[GetPlayerId(p)]=VH4[GetPlayerId(p)]+WE8
set XB4=XB4+WE8
if BC7==1 then
set WE8=40
elseif BC7==2 then
set WE8=80
else
set WE8=120
endif
loop
exitwhen i>5
if TV7(p)then
set UK9=Z7[i]
else
set UK9=A7[i]
endif
if UK9!=p then
set UJ9=M7[GetPlayerId(UK9)]
if KE7(UJ9,p5)<900 then
set tt=CreateTextTag()
call SetPlayerState(UK9,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(UK9,PLAYER_STATE_RESOURCE_GOLD)+WE8)
call SetTextTagText(tt,"+"+I2S(WE8),.025)
call SetTextTagPosUnit(tt,UJ9,100)
call SetTextTagColor(tt,$FF,$DC,0,$FF)
call SetTextTagVelocity(tt,0,.03)
call SetTextTagVisibility(tt,false)
if GetLocalPlayer()==UK9 then
call SetTextTagVisibility(tt,true)
endif
call SetTextTagFadepoint(tt,2)
call SetTextTagLifespan(tt,3)
call SetTextTagPermanent(tt,false)
set VH4[GetPlayerId(UK9)]=VH4[GetPlayerId(UK9)]+WE8
set XB4=XB4+WE8
endif
endif
set i=i+1
endloop
set p5=null
set p=null
set tt=null
set UJ9=null
set UK9=null
endfunction
function UM9 takes nothing returns boolean
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) and ON7(GetHandleId(GetTriggerUnit()),"Track|Time")>KQ7()then
call UI9()
endif
return false
endfunction
function UN9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
local unit oA=O77(OB7,"Caster")
call SetUnitX(oA,GetUnitX(m5))
call SetUnitY(oA,GetUnitY(m5))
if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEvalCount(t)>$A and GetUnitAbilityLevel(m5,1110454348)==0)then
call DestroyEffect(OG7(OB7,"FX"))
call KillUnit(oA)
call NM7(OB7)
call OZ7(t)
endif
set t=null
set m5=null
set oA=null
return false
endfunction
function UO9 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit m5=GetSpellTargetUnit()
local unit p5=GetTriggerUnit()
local unit oA=CreateUnit(GetOwningPlayer(m5),1697657174,GetUnitX(m5),GetUnitY(m5),0)
local string UP9="war3mapImported\\TrackBuff.mdx"
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(m5))and WG7(GetLocalPlayer())==false then
set UP9=""
endif
call XF7(oA,1093742901)
call SetUnitAbilityLevel(oA,1093742901,GetUnitAbilityLevel(p5,1093681716))
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterUnitEvent(t,GetSpellTargetUnit(),EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function UN9))
call NT7(OB7,"Target",m5)
call NT7(OB7,"Caster",oA)
call NU7(OB7,"FX",AddSpecialEffectTarget(UP9,m5,"overhead"))
call NQ7(GetHandleId(GetSpellTargetUnit()),"Track|Time",(((KQ7())+30)*1.))
call NZ7(GetHandleId(GetSpellTargetUnit()),"Track|SourcePlayer",GetOwningPlayer(GetTriggerUnit()))
call NP7(GetHandleId(GetSpellTargetUnit()),"Track|Level",GetUnitAbilityLevel(GetTriggerUnit(),1093681716))
set t=null
set m5=null
set p5=null
set oA=null
endfunction
function UQ9 takes nothing returns boolean
if GetSpellAbilityId()==1093681716 then
call UO9()
endif
return false
endfunction
function EK8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function UQ9))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function UM9))
set t=null
endfunction
function UR9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
call UnitRemoveAbility(m5,1093749079)
call UnitRemoveAbility(m5,1110459201)
call NM7(OB7)
call OZ7(t)
set t=null
set m5=null
return false
endfunction
function US9 takes unit p5,unit m5 returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,3.,false)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function UR9))
call NT7(OB7,"Target",m5)
call XF7(m5,1093749079)
call UnitMakeAbilityPermanent(m5,true,1093749079)
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093749079,false)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl",m5,"chest"))
set t=null
endfunction
function UT9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer B07=OM7(OB7,"TargetIndex")
local unit m5=TQ7(B07)
local unit p5=O77(OB7,"Source")
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==p5 and(GetEventDamage()>40 or IsUnitType(m5,UNIT_TYPE_STRUCTURE) or GetUnitTypeId(m5)==1970107511 or GetUnitTypeId(m5)==1700946284)and OO7(GetHandleId(p5),"JinadaActive") then
call US9(p5,m5)
call NS7(GetHandleId(p5),"JinadaActive",false)
call NQ7(GetHandleId(p5),"LastUsed",TimerGetElapsed(W)*1.)
call UnitRemoveAbility(p5,1093749075)
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749301)
call UnitRemoveAbility(p5,1093749077)
call TP7(B07)
call NM7(OB7)
call OZ7(t)
endif
else
call TP7(B07)
call NM7(OB7)
call OZ7(t)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function UU9 takes nothing returns boolean
local trigger t
local integer OB7
local unit m5
local unit p5
local integer V77
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call NS7(GetHandleId(GetTriggerUnit()),"JinadaActive",false)
call NQ7(GetHandleId(GetTriggerUnit()),"LastUsed",TimerGetElapsed(W)*1.)
call UnitRemoveAbility(GetTriggerUnit(),1093749075)
call UnitRemoveAbility(GetTriggerUnit(),1093749300)
call UnitRemoveAbility(GetTriggerUnit(),1093749299)
call UnitRemoveAbility(GetTriggerUnit(),1093749301)
call UnitRemoveAbility(GetTriggerUnit(),1093749077)
elseif GetAttacker()==O77(GetHandleId(GetTriggeringTrigger()),"JinadaHero")then
if IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and OO7(GetHandleId(GetAttacker()),"JinadaActive") then
set t=CreateTrigger()
set OB7=GetHandleId(t)
set m5=GetTriggerUnit()
set p5=GetAttacker()
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function UT9))
call NP7(OB7,"TargetIndex",TS7(m5))
call NT7(OB7,"Source",p5)
set V77=GetUnitAbilityLevel(p5,1093749073)
if V77==0 then
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749301)
call UnitRemoveAbility(p5,1093749077)
elseif V77==1 then
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749301)
call UnitRemoveAbility(p5,1093749077)
elseif V77==2 then
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749301)
call UnitRemoveAbility(p5,1093749077)
elseif V77==3 then
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749077)
elseif V77==4 then
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749301)
endif
set m5=null
set p5=null
set t=null
endif
endif
return false
endfunction
function UV9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local real UW9=TimerGetElapsed(W)
local integer V77=GetUnitAbilityLevel(WI7,1093749073)
local real UX9=ON7(GetHandleId(WI7),"LastUsed")
local boolean UY9=OO7(GetHandleId(WI7),"JinadaActive")
if UW9-UX9>$E-V77*2 and UY9==false and XH7(WI7)==false then
call NS7(GetHandleId(WI7),"JinadaActive",true)
call XF7(WI7,1093749075)
if GetUnitAbilityLevel(WI7,1110455864)==0 then
if V77==1 then
call XF7(WI7,1093749300)
elseif V77==2 then
call XF7(WI7,1093749299)
elseif V77==3 then
call XF7(WI7,1093749301)
elseif V77==4 then
call XF7(WI7,1093749077)
endif
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),1093749300,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),1093749299,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),1093749301,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),1093749077,false)
elseif UY9==false and GetUnitAbilityLevel(WI7,1110455864)==0 then
call UnitRemoveAbility(WI7,1093749075)
call UnitRemoveAbility(WI7,1093749300)
call UnitRemoveAbility(WI7,1093749299)
call UnitRemoveAbility(WI7,1093749301)
call UnitRemoveAbility(WI7,1093749077)
endif
set t=null
set WI7=null
return false
endfunction
function UZ9 takes unit WI7,boolean UA9 returns nothing
local trigger t=CreateTrigger()
local trigger t2=CreateTrigger()
local integer OB7=GetHandleId(t)
local integer UB9=GetHandleId(t2)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function UV9))
call YB7(t2,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t2,WI7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t2,Condition(function UU9))
call NT7(OB7,"Hero",WI7)
call NT7(UB9,"JinadaHero",WI7)
if UA9 then
set aj[GetPlayerId(GetOwningPlayer(WI7))]=t
set Rj[GetPlayerId(GetOwningPlayer(WI7))]=t2
endif
set WI7=null
set t=null
set t2=null
endfunction
function UC9 takes nothing returns boolean
if GetLearnedSkill()==1093749073 and GetUnitAbilityLevel(GetTriggerUnit(),1093749073)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call UZ9(GetTriggerUnit(),false)
endif
return false
endfunction
function EM8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function UC9))
set t=null
endfunction
function U39 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
local unit p5=O77(OB7,"Source")
local integer V77=GetUnitAbilityLevel(p5,1093678913)
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==p5 then
call NM7(OB7)
call OZ7(t)
if OT7(p5,"WindWalk|CD")==false then
call O37(p5,"WindWalk|CD",.5)
if IsUnitType(m5,UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(m5,GetOwningPlayer(p5))then
call B67(p5,m5,2,30*V77)
call YW7(I2S(R2I(30*V77)),1,p5,.027,$D8,0,0,$D8)
call OX7(p5,"WindWalkBH|Active")
set t=OE7(GetHandleId(p5),"ai|WWTrigger")
call NM7(GetHandleId(t))
call OZ7(t)
endif
endif
endif
else
call NM7(OB7)
call OZ7(t)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function U69 takes nothing returns boolean
local trigger t=null
local unit m5=null
local unit p5=null
local integer OB7
local integer V77
if OT7(GetAttacker(),"WindWalkBH|Active")then
set t=CreateTrigger()
set m5=GetTriggerUnit()
set p5=GetAttacker()
set OB7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.,false)
call TriggerAddCondition(t,Condition(function U39))
call NT7(OB7,"Target",m5)
call NT7(OB7,"Source",p5)
if OO7(GetHandleId(p5),"JinadaActive")then
set V77=GetUnitAbilityLevel(p5,1093749073)
if V77==0 then
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749301)
call UnitRemoveAbility(p5,1093749077)
elseif V77==1 then
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749301)
call UnitRemoveAbility(p5,1093749077)
elseif V77==2 then
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749301)
call UnitRemoveAbility(p5,1093749077)
elseif V77==3 then
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749077)
elseif V77==4 then
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749301)
endif
else
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749301)
call UnitRemoveAbility(p5,1093749077)
endif
set m5=null
set p5=null
set t=null
endif
return false
endfunction
function UL9 takes nothing returns boolean
local integer OB7=GetHandleId(GetTriggeringTrigger())
local unit p5=O77(OB7,"Hero")
local integer V77
call OX7(p5,"WindWalkBH|Active")
if GetTriggerEventId()==EVENT_UNIT_SPELL_CAST or GetTriggerEventId()==EVENT_UNIT_DEATH then
if OO7(GetHandleId(p5),"JinadaActive")then
set V77=GetUnitAbilityLevel(p5,1093749073)
if V77==0 then
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749301)
call UnitRemoveAbility(p5,1093749077)
elseif V77==1 then
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749301)
call UnitRemoveAbility(p5,1093749077)
elseif V77==2 then
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749301)
call UnitRemoveAbility(p5,1093749077)
elseif V77==3 then
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749077)
elseif V77==4 then
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749301)
endif
else
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749301)
call UnitRemoveAbility(p5,1093749077)
endif
else
if not OO7(GetHandleId(p5),"JinadaActive")then
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749301)
call UnitRemoveAbility(p5,1093749077)
endif
endif
call NM7(OB7)
call OZ7(GetTriggeringTrigger())
set p5=null
return false
endfunction
function U19 takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Hero")
if IsTriggerEnabled(OE7(OB7,"CancelTr"))then
call OV7(p5,"WindWalkBH|Active")
endif
call NM7(OB7)
call OZ7(t)
set p5=null
set t=null
endfunction
function U09 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local integer V77=GetUnitAbilityLevel(p5,1093678913)
call TriggerRegisterTimerEvent(t,1.25-.25*V77-.01,false)
call TriggerAddAction(t,function U19)
call NT7(OB7,"Hero",p5)
set t=CreateTrigger()
call NV7(OB7,"CancelTr",t)
set OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,$A+5*V77,false)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_CAST)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function UL9))
call NT7(OB7,"Hero",p5)
call NV7(GetHandleId(p5),"ai|WWTrigger",t)
call XF7(p5,1093749300)
call XF7(p5,1093749299)
call XF7(p5,1093749301)
call XF7(p5,1093749077)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093749300,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093749299,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093749301,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093749077,false)
set t=null
set p5=null
endfunction
function U59 takes nothing returns boolean
if GetSpellAbilityId()==1093678913 then
call U09()
endif
return false
endfunction
function EN8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function U59))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function U69))
set t=null
endfunction
function U29 takes nothing returns boolean
return GetSpellAbilityId()==1093683024 or GetSpellAbilityId()==1093682775
endfunction
function U_9 takes integer V77,integer a returns integer
if a==0 then
return 1
else
return(V77-1)*5+1+a
endif
endfunction
function Ry takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==1697656920
endfunction
function RY takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function V49 takes player p returns nothing
local group g=WS7()
call GroupEnumUnitsOfPlayer(g,p,Condition(function Ry))
call ForGroup(g,function RY)
call WR7(g)
set g=null
endfunction
function V79 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local unit WX7=O77(GetHandleId(t),"Hero")
local integer I97=GetHandleId(WX7)
local integer BC7=GetUnitAbilityLevel(WX7,1093682774)
local integer V89=(OM7(I97,"Warpath|Level")-1)
local integer V99=YI7(V89,0,4+BC7)
local unit BB7=O77(I97,"Warpath|Caster")
local integer VD9
if BC7==1 then
set VD9=V99*20
elseif BC7==2 then
set VD9=V99*25
elseif BC7==3 then
set VD9=V99*30
endif
if V89==0 then
set VD9=0
endif
call B_7(WX7,VD9)
if GetUnitTypeId(BB7)==1697656920 then
call SetUnitAbilityLevel(BB7,1093682502,U_9(BC7,V99))
call NP7(I97,"Warpath|Level",V89)
else
call V49(O97(GetHandleId(t),"p"))
endif
call NM7(GetHandleId(t))
call OZ7(t)
set t=null
set WX7=null
set BB7=null
return false
endfunction
function VE9 takes nothing returns nothing
local unit WX7=GetTriggerUnit()
local integer I97=GetHandleId(WX7)
local unit BB7=O77(I97,"Warpath|Caster")
local integer BC7=GetUnitAbilityLevel(WX7,1093682774)
local integer V89=(OM7(I97,"Warpath|Level")+1)
local integer V99=YI7(V89,0,4+BC7)
local integer VF9=U_9(BC7,V99)
local trigger t=CreateTrigger()
local integer VD9
if BC7==1 then
set VD9=V99*20
elseif BC7==2 then
set VD9=V99*25
elseif BC7==3 then
set VD9=V99*30
endif
call B_7(WX7,VD9)
call SetUnitAbilityLevel(BB7,1093682502,VF9)
call NP7(I97,"Warpath|Level",V89)
call NT7(GetHandleId(t),"Hero",WX7)
call NZ7(GetHandleId(t),"p",GetOwningPlayer(WX7))
call TriggerRegisterTimerEvent(t,14.,false)
call TriggerAddCondition(t,Condition(function V79))
set t=null
set WX7=null
set BB7=null
endfunction
function VG9 takes unit WI7,boolean UA9 returns nothing
local integer BC7=GetUnitAbilityLevel(WI7,1093682774)
local unit oA=CreateUnit(GetOwningPlayer(WI7),1697656920,0,0,0)
local trigger t=CreateTrigger()
call XF7(oA,1093682502)
call NT7(GetHandleId(WI7),"Warpath|Caster",oA)
call SetUnitInvulnerable(oA,true)
call XF7(oA,1097625443)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function U29))
call TriggerAddAction(t,function VE9)
if UA9 then
set Vj[GetPlayerId(GetOwningPlayer(WI7))]=t
endif
set oA=null
set t=null
endfunction
function VH9 takes nothing returns boolean
if GetLearnedSkill()==1093682774 and GetUnitAbilityLevel(GetTriggerUnit(),1093682774)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call VG9(GetTriggerUnit(),false)
endif
return false
endfunction
function EO8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function VH9))
call X_7(1093682502)
set t=null
endfunction
function VI9 takes nothing returns boolean
return(GetSpellAbilityId()=='A0FW')and WQ7(GetSpellTargetUnit())==false
endfunction
function R6 takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function R7 takes nothing returns boolean
return(GetUnitTypeId(GetFilterUnit())==1697656901)
endfunction
function R9 takes nothing returns nothing
local location Mk=GetUnitLoc(GetTriggerUnit())
call SetUnitPositionLoc(GetEnumUnit(),Mk)
if GetUnitUserData(GetEnumUnit())==4 then
call IssueTargetOrderById(GetEnumUnit(),852662,GetSpellTargetUnit())
else
call IncUnitAbilityLevel(GetEnumUnit(),'A0FZ')
call IssueTargetOrderById(GetEnumUnit(),852662,GetSpellTargetUnit())
call SetUnitUserData(GetEnumUnit(),(GetUnitUserData(GetEnumUnit())+1))
endif
call RemoveLocation(Mk)
set Mk=null
endfunction
function VJ9 takes nothing returns nothing
local location Mk=GetUnitLoc(GetTriggerUnit())
local location sA=GetUnitLoc(GetSpellTargetUnit())
local group sb=WS7()
if(UnitHasBuffBJ(GetSpellTargetUnit(),'B02U'))then
call GroupEnumUnitsOfPlayer(sb,GetOwningPlayer(GetSpellTargetUnit()),Condition(function R7))
call ForGroupBJ(sb,function R9)
else
call GroupEnumUnitsOfPlayer(sb,GetOwningPlayer(GetSpellTargetUnit()),Condition(function R7))
call ForGroupBJ(sb,function R6)
call DisableTrigger(EA)
call CreateNUnitsAtLocFacingLocBJ(1,1697656901,GetOwningPlayer(GetSpellTargetUnit()),Mk,sA)
call EnableTrigger(EA)
call UnitAddAbility(bj_lastCreatedUnit,'A0FZ')
call SetUnitAbilityLevelSwapped('A0FZ',bj_lastCreatedUnit,((GetUnitAbilityLevelSwapped('A0FW',GetTriggerUnit())*4)-3))
call IssueTargetOrderById(bj_lastCreatedUnit,852662,GetSpellTargetUnit())
call SetUnitUserData(bj_lastCreatedUnit,1)
endif
call WR7(sb)
call RemoveLocation(Mk)
call RemoveLocation(sA)
set Mk=null
set sA=null
set sb=null
endfunction
function EP8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VI9))
call TriggerAddAction(t,function VJ9)
set t=null
endfunction
function VK9 takes nothing returns boolean
return(IsUnitType(GetEventDamageSource(),UNIT_TYPE_STRUCTURE)==false)!=null
endfunction
function VM9 takes unit WI7 returns nothing
local unit BB7=CreateUnit(GetOwningPlayer(WI7),1697656901,GetUnitX(WI7),GetUnitY(WI7),0)
call XF7(BB7,1093683024)
call SetUnitAbilityLevel(BB7,1093683024,GetUnitAbilityLevel(WI7,1093683024))
call IssueImmediateOrderById(BB7,$D022E)
set BB7=null
endfunction
function VN9 takes unit WI7,real YM7 returns nothing
local integer OB7=GetHandleId(WI7)
local real sD=ON7(OB7,"Bristleback_DamageStack")
if sD+YM7>=$C8 then
call NQ7(OB7,"Bristleback_DamageStack",((0)*1.))
call VM9(WI7)
else
call NQ7(OB7,"Bristleback_DamageStack",((sD+YM7)*1.))
endif
endfunction
function VO9 takes nothing returns nothing
local unit sE=GetTriggerUnit()
local unit S68=GetEventDamageSource()
local real sf=J47(S68,sE)
local real sF=GetUnitFacing(sE)
local real sg
local real YM7=GetEventDamage()
local real sG
local real RK
if(YM7>5)and GetUnitState(sE,UNIT_STATE_LIFE)>1 and(GetUnitState(sE,UNIT_STATE_LIFE)>YM7)then
if((sF-sf)<(-180.))then
set sg=(sF-sf+360)
else
if((sF-sf)>180.)then
set sg=(sF-sf-360)
else
set sg=(sF-sf)
endif
endif
set RK=RAbsBJ(sg)
if RK<=70 then
set sG=(GetUnitAbilityLevel(sE,1093684531)*.08+.08)*YM7
call VN9(sE,YM7-sG)
call SetUnitState(sE,UNIT_STATE_LIFE,GetUnitState(sE,UNIT_STATE_LIFE)+sG)
elseif RK<=110 then
set sG=(GetUnitAbilityLevel(sE,1093684531)*.04+.04)*YM7
call SetUnitState(sE,UNIT_STATE_LIFE,GetUnitState(sE,UNIT_STATE_LIFE)+sG)
endif
endif
set sE=null
set S68=null
endfunction
function VP9 takes unit WI7,boolean UA9 returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function VK9))
call TriggerAddAction(t,function VO9)
if UA9 then
set nj[GetPlayerId(GetOwningPlayer(WI7))]=t
endif
set t=null
endfunction
function VQ9 takes nothing returns boolean
if GetLearnedSkill()==1093684531 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093684531)==1 then
call VP9(GetTriggerUnit(),false)
endif
return false
endfunction
function EQ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function VQ9))
set t=null
endfunction
function VR9 takes nothing returns boolean
return GetSpellAbilityId()==1093683024
endfunction
function VS9 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)!=1)!=null
endfunction
function VT9 takes nothing returns nothing
local integer VU9=GetHandleId(GetEnumUnit())
local integer VV9=LoadInteger(L7,Z8,VU9)
local real VW9=YJ7(F8+VV9*C6R,400)
call UnitDamageTarget(D8,GetEnumUnit(),VW9,false,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
call SaveInteger(L7,Z8,VU9,VV9+1)
endfunction
function VX9 takes nothing returns nothing
local integer VU9=GetHandleId(GetEnumUnit())
local integer VV9=LoadInteger(L7,Z8,VU9)
call SaveInteger(L7,Z8,VU9,VV9-1)
endfunction
function VY9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"UnitVar")
local group LQ7=OF7(OB7,"GroupVar")
set Z8=GetHandleId(WI7)
call ForGroup(LQ7,function VX9)
call WR7(LQ7)
call NM7(OB7)
call OZ7(t)
set t=null
set WI7=null
set LQ7=null
return false
endfunction
function VZ9 takes nothing returns nothing
local unit S79=GetTriggerUnit()
local group VA9=WS7()
local trigger t=CreateTrigger()
if IsUnitType(S79,UNIT_TYPE_HERO)==false then
set S79=M7[GetPlayerId(GetOwningPlayer(S79))]
endif
call GroupEnumUnitsInRange(VA9,GetUnitX(S79),GetUnitY(S79),725,Condition(function VS9))
set D8=CreateUnit(GetOwningPlayer(S79),1697656901,GetUnitX(S79),GetUnitY(S79),0)
set F8=GetUnitAbilityLevel(S79,1093683024)*20
set C6R=GetUnitAbilityLevel(S79,1093683024)*2+28
set Z8=GetHandleId(S79)
call ForGroup(VA9,function VT9)
call NT7(GetHandleId(t),"UnitVar",S79)
call NB7(GetHandleId(t),"GroupVar",VA9)
call TriggerRegisterTimerEvent(t,14.,false)
call TriggerAddCondition(t,Condition(function VY9))
set t=null
set S79=null
set VA9=null
endfunction
function ER8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VR9))
call TriggerAddAction(t,function VZ9)
set t=null
endfunction
function VB9 takes nothing returns nothing
call B67(F77,GetEnumUnit(),1,F87)
endfunction
function VC9 takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer BC7=GetUnitAbilityLevel(p5,1093816142)
local real V39
local group g=WS7()
set F87=100+BC7*75
set F77=p5
set IN4=p5
call GroupEnumUnitsInRange(g,GetUnitX(m5),GetUnitY(m5),265+25,Condition(function AR7))
call ForGroup(g,function VB9)
set V39=100+75*BC7
if GetUnitState(p5,UNIT_STATE_LIFE)<=V39*.75 then
set V39=GetUnitState(p5,UNIT_STATE_LIFE)/ .75-$A
endif
call B67(p5,p5,1,V39)
call DestroyEffect(AddSpecialEffect("war3mapImported\\DoubleEdgeTarget.mdx",GetUnitX(m5),GetUnitY(m5)))
set p5=null
set m5=null
endfunction
function V69 takes nothing returns boolean
if GetSpellAbilityId()==1093816142 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
call VC9()
else
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\DoubleEdgeCaster.mdx",GetTriggerUnit(),"hand, right"))
endif
endif
return false
endfunction
function ES8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function V69))
set t=null
endfunction
function VL9 takes nothing returns boolean
return GetUnitAbilityLevel(GetTriggerUnit(),1093677142)>0 and GetUnitAbilityLevel(GetAttacker(),1093678162)!=1 and IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))==false and GetUnitTypeId(GetAttacker())!=1848657461
endfunction
function V19 takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetAttacker()
local integer BC7=GetUnitAbilityLevel(ZX7,1093677142)
local integer V09=GetHeroStr(ZX7,true)
local real VW9=($E+2*BC7)+(.18+.08*BC7)*V09
call B67(ZX7,IH7,2,VW9)
set ZX7=null
set IH7=null
endfunction
function ET8 takes nothing returns nothing
local trigger t=CreateTrigger()
call ky(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function VL9))
call TriggerAddAction(t,function V19)
set t=null
endfunction
function V59 takes nothing returns nothing
local integer V29
local unit V_9=GetEnumUnit()
if WF7(V_9)==false and OT7(V_9,"Stampede|4332")==false then
call O37(V_9,"Stampede|4332",4)
set V29=FE7
call B67(FD7,V_9,1,(V29)*GetHeroStr(F97,true))
call Z57(V_9,1093816140,1,1.8,1110460230)
endif
set V_9=null
endfunction
function W49 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
local integer BC7=(LoadInteger(L7,(I97),(5)))
local group g
if GetTriggerEvalCount(t)>=R2I(20*4)or GetTriggerEventId()==EVENT_WIDGET_DEATH then
call DestroyEffect((LoadEffectHandle(L7,(I97),($AF))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call SetUnitPathing(ZX7,true)
call UnitRemoveAbility(ZX7,1093816116)
call UnitRemoveAbility(ZX7,1110460226)
else
set g=WS7()
set IN4=ZX7
set F97=BB7
set FD7=ZX7
set FE7=BC7
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),105+25,Condition(function AJ7))
call ForGroup(g,function V59)
call WR7(g)
endif
set t=null
set ZX7=null
set g=null
return false
endfunction
function W79 takes nothing returns nothing
local unit ZX7=GetEnumUnit()
local integer BC7=GetUnitAbilityLevel(F97,1093816118)
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call SetUnitPathing(ZX7,false)
call XF7(ZX7,1093816116)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerAddCondition(t,Condition(function W49))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(19),(F97))
call SaveInteger(L7,(I97),(5),(BC7))
call SaveEffectHandle(L7,(I97),($AF),(AddSpecialEffectTarget("war3mapImported\\SandBreathDamageSmall.mdx",ZX7,"foot, left")))
call SaveEffectHandle(L7,(I97),($B0),(AddSpecialEffectTarget("war3mapImported\\SandBreathDamageSmall.mdx",ZX7,"foot, right")))
set ZX7=null
set t=null
endfunction
function W89 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local group g=WS7()
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set F97=ZX7
set IN4=ZX7
call GroupEnumUnitsInRange(g,0,0,99999,Condition(function BM7))
call ForGroup(g,function W79)
call WR7(g)
set t=null
set ZX7=null
set g=null
return false
endfunction
function W99 takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local sound WD9=CreateSound("abilities\\Spells\\Other\\Stampede\\StampedeCaster1.wav",false,false,false,$A,$A,"DefaultEAXON")
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call StartSound(WD9)
call KillSoundWhenDone(WD9)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function W89))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set ZX7=null
set WD9=null
endfunction
function WE9 takes nothing returns boolean
if GetSpellAbilityId()==1093816118 then
call W99()
endif
return false
endfunction
function EU8 takes nothing returns nothing
local trigger t=CreateTrigger()
call X_7(1093816116)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WE9))
call CreateSound("abilities\\Spells\\Other\\Stampede\\StampedeCaster1.wav",false,false,false,$A,$A,"DefaultEAXON")
set t=null
endfunction
function WF9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer V77=OM7(OB7,"Level")
local real so
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamage()>$A then
set so=GetEventDamage()*(.05*V77+.1)
call DisableTrigger(t)
call B67(GetEventDamageSource(),GetTriggerUnit(),11,so)
call EnableTrigger(t)
endif
else
call NM7(OB7)
call OZ7(t)
endif
set t=null
return false
endfunction
function WG9 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit m5=GetSpellTargetUnit()
local unit p5=GetTriggerUnit()
local integer V77=GetUnitAbilityLevel(p5,1093684045)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl",p5,"chest"))
call NP7(OB7,"Level",V77)
call TriggerRegisterTimerEvent(t,8.+0*V77,false)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function WF9))
set t=null
set m5=null
set p5=null
endfunction
function WH9 takes nothing returns boolean
if GetSpellAbilityId()==1093684045 then
call WG9()
endif
return false
endfunction
function EV8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WH9))
set t=null
endfunction
function WI9 takes nothing returns boolean
return GetSpellAbilityId()==1093684308 or GetSpellAbilityId()==1093747539
endfunction
function sq takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1)!=null
endfunction
function WJ9 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local integer sr=GetUnitAbilityLevel(WI7,1093684308)
local group LQ7=HW7(bj_mapInitialPlayableArea,Condition(function sq))
local unit PZ
if sr==0 then
set sr=GetUnitAbilityLevel(WI7,1093747539)
endif
loop
set PZ=FirstOfGroup(LQ7)
exitwhen PZ==null
if(IsUnitAlly(PZ,GetOwningPlayer(WI7)))then
call SetWidgetLife(PZ,(GetUnitStateSwap(UNIT_STATE_LIFE,PZ)+100+(100*sr)))
call DestroyEffect(AddSpecialEffectTargetUnitBJ("chest",PZ,"Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl"))
endif
call GroupRemoveUnit(LQ7,PZ)
endloop
call DestroyGroup(LQ7)
set LQ7=HX7(bj_mapInitialPlayableArea,GetOwningPlayer(WI7))
loop
set PZ=FirstOfGroup(LQ7)
exitwhen PZ==null
if(IsUnitType(PZ,UNIT_TYPE_HERO)==false and GetUnitTypeId(PZ)!=1848651843)then
call SetUnitLifePercentBJ(PZ,100)
call DestroyEffect(AddSpecialEffectTargetUnitBJ("chest",PZ,"Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl"))
endif
call GroupRemoveUnit(LQ7,PZ)
endloop
call DestroyGroup(LQ7)
set WI7=null
set LQ7=null
set PZ=null
endfunction
function EW8 takes nothing returns nothing
set do=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(do,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(do,Condition(function WI9))
call TriggerAddAction(do,function WJ9)
endfunction
function WK9 takes nothing returns boolean
return GetSpellAbilityId()==1093684310 or GetSpellAbilityId()==1093815619
endfunction
function DWR takes nothing returns boolean
if(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false)then
if(IsUnitAliveBJ(GetFilterUnit()))then
if KW7(GetFilterUnit())==false then
if(GetUnitTypeId(GetFilterUnit())!=1852010352)then
if(GetUnitAbilityLevel(GetFilterUnit(),1097167976)==1)then
if((GetUnitAbilityLevel(GetFilterUnit(),1093684047)==1)or(GetUnitAbilityLevel(GetFilterUnit(),1093684049)==1)or(GetUnitAbilityLevel(GetFilterUnit(),1093684050)==1)or(GetUnitAbilityLevel(GetFilterUnit(),1093684048)==1))then
return true
endif
endif
endif
endif
endif
endif
return false
endfunction
function WM9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit st=O77(OB7,"Chen")
local unit u=O77(OB7,"Unit")
local real x=ON7(OB7,"x")
local real y=ON7(OB7,"y")
local boolean AX3=(LoadBoolean(L7,(OB7),(95)))
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
if YA8(GetSpellAbilityId())and GetSpellTargetUnit()==u then
call DestroyEffect((LoadEffectHandle(L7,(OB7),(32))))
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
set t=null
set st=null
set u=null
endif
return false
endif
call DestroyEffect(OG7(OB7,"FX"))
if OO7(GetHandleId(u),"Grapple")==false and GetUnitAbilityLevel(u,1093678162)==0 then
call O37(u,"4409",1)
if AX3 then
call SetUnitPosition(u,GetUnitX(st),GetUnitY(st))
else
call SetUnitPosition(u,x,y)
endif
endif
if OO7(GetHandleId(u),"Grapple")then
call X37(GetOwningPlayer(st),GetObjectName(1848652598))
endif
call NM7(OB7)
call OZ7(t)
set t=null
set st=null
set u=null
return false
endfunction
function WN9 takes unit u,unit WO9,integer WP9,real x,real y returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
if IsUnitOwnedByPlayer(u,GetOwningPlayer(WO9))then
call TriggerRegisterTimerEvent(t,.1,false)
else
call TriggerRegisterTimerEvent(t,7-WP9,false)
endif
call TriggerAddCondition(t,Condition(function WM9))
call NU7(I97,"FX",AddSpecialEffectTarget("effects\\Test_of_Faith_FX.mdx",u,"overhead"))
call NT7(I97,"Unit",u)
call NT7(I97,"Chen",WO9)
call NQ7(I97,"x",x)
call NQ7(I97,"y",y)
set t=null
endfunction
function WNN9 takes unit u,unit WO9,integer WP9,real x,real y,boolean AX3 returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
if IsUnitOwnedByPlayer(u,GetOwningPlayer(WO9))and AX3==false then
call TriggerRegisterTimerEvent(t,0.1,false)
else
call TriggerRegisterTimerEvent(t,7-WP9,false)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
endif
call TriggerAddCondition(t,Condition(function WM9))
call NU7(OB7,"FX",AddSpecialEffectTarget("effects\\Test_of_Faith_FX.mdx",u,"overhead"))
call NT7(OB7,"Unit",u)
call NT7(OB7,"Chen",WO9)
call NQ7(OB7,"x",x)
call NQ7(OB7,"y",y)
call SaveBoolean(L7,(OB7),(95),(AX3))
set t=null
endfunction
function WQ9 takes nothing returns nothing
local unit m5=GetSpellTargetUnit()
local unit st=GetTriggerUnit()
local location Mk=GetUnitLoc(st)
local unit oA
local integer sr=GetUnitAbilityLevel(st,'A0LV')
local real sX
local location sy
local effect fx
local group AZ51
local unit AGB2
if(TV7(GetOwningPlayer(st)))then
set sy=GetRectCenter(ED)
else
set sy=GetRectCenter(L9)
endif
if m5==st then
set AZ51=WS7()
call GroupEnumUnitsOfPlayer(AZ51,GetOwningPlayer(st),Condition(function DWR))
loop
exitwhen CountUnitsInGroup(AZ51)==0
set AGB2=GroupPickRandomUnit(AZ51)
call GroupRemoveUnit(AZ51,AGB2)
call WNN9(AGB2,st,sr,GetLocationX(sy),GetLocationY(sy),true)
endloop
call WR7(AZ51)
elseif(IsUnitAlly(m5,GetOwningPlayer(st))==false)then
if WQ7(GetSpellTargetUnit())==false then
set sX=GetRandomInt(50*sr,100*sr)
call YW7(I2S(R2I(sX)),1,m5,.023,255,255,0,216)
call UnitDamageTargetBJ(st,m5,sX,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC)
set fx=AddSpecialEffectTargetUnitBJ("chest",m5,"Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl")
call DestroyEffect(fx)
endif
else
if(IsUnitType(m5,UNIT_TYPE_HERO))then
if(OO7(GetHandleId(GetOwningPlayer(m5)),"DisableHelp")==false)then
call WNN9(m5,st,sr,GetLocationX(sy),GetLocationY(sy),false)
endif
elseif(IsUnitOwnedByPlayer(m5,GetOwningPlayer(st)))then
call SetUnitPositionLoc(m5,sy)
endif
endif
call RemoveLocation(Mk)
call RemoveLocation(sy)
set m5=null
set st=null
set Mk=null
set oA=null
set sy=null
set fx=null
endfunction
function WR9 takes nothing returns boolean
if GetLearnedSkill()==1093684310 and IsUnitIllusion(GetTriggerUnit())==false then
call XF7(GetTriggerUnit(),1093815619)
call SetUnitAbilityLevel(GetTriggerUnit(),1093815619,GetUnitAbilityLevel(GetTriggerUnit(),1093684310))
endif
return false
endfunction
function EY8 takes nothing returns nothing
local trigger t
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WK9))
call TriggerAddAction(t,function WQ9)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function WR9))
set t=null
endfunction
function WS9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local integer BC7=GetUnitAbilityLevel(ZX7,1095262562)
if XH7(ZX7)==false then
if BC7==1 or BC7==2 then
call SetUnitState(ZX7,UNIT_STATE_MANA,GetUnitState(ZX7,UNIT_STATE_MANA)+(.5+.5*BC7)*.25)
elseif BC7==3 then
call SetUnitState(ZX7,UNIT_STATE_MANA,GetUnitState(ZX7,UNIT_STATE_MANA)+.5)
elseif BC7==4 then
call SetUnitState(ZX7,UNIT_STATE_MANA,GetUnitState(ZX7,UNIT_STATE_MANA)+1)
endif
endif
set ZX7=null
set t=null
return false
endfunction
function WT9 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerAddCondition(t,Condition(function WS9))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set t=null
set ZX7=null
endfunction
function WU9 takes nothing returns boolean
if GetLearnedSkill()==1095262562 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1095262562)==1 then
call WT9()
endif
return false
endfunction
function EZ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function WU9))
set t=null
endfunction
function WV9 takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local integer BC7=GetUnitAbilityLevel(ZX7,'A1E9')
local group g=WS7()
local unit u2
set IN4=ZX7
call GroupEnumUnitsInRange(g,x,y,425,Condition(function AY7))
loop
set u2=FirstOfGroup(g)
exitwhen u2==null
call B67(ZX7,u2,1,50+50*BC7)
call Z57(u2,'A2WA'-1+BC7,1,4.5,'B0HD')
call GroupRemoveUnit(g,u2)
endloop
call WR7(g)
call DestroyEffect(AddSpecialEffect("war3mapImported\\IceNova.mdx",x,y))
call RemoveLocation(l)
set ZX7=null
set l=null
endfunction
function WW9 takes nothing returns boolean
if GetSpellAbilityId()==1093748025 then
call WV9()
endif
return false
endfunction
function EA8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WW9))
set t=null
endfunction
function WY9 takes nothing returns boolean
return((not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAliveBJ(GetFilterUnit()))and(not KW7(GetFilterUnit()))and(GetUnitTypeId(GetFilterUnit())!=1852010352)and(GetUnitAbilityLevel(GetFilterUnit(),1097167976)==1)and((GetUnitAbilityLevel(GetFilterUnit(),1093684047)==1)or(GetUnitAbilityLevel(GetFilterUnit(),1093684049)==1)or(GetUnitAbilityLevel(GetFilterUnit(),1093684050)==1)or(GetUnitAbilityLevel(GetFilterUnit(),1093684048)==1)))!=null
endfunction
function WX9 takes nothing returns boolean
if(not(GetSpellAbilityId()==1093678649))then
return false
endif
return true
endfunction
function sS takes nothing returns boolean
return(DWR()and IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT))!=null
endfunction
function WZ9 takes unit IH7 returns nothing
local unit ZX7=GetTriggerUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,'A28T')+GetUnitAbilityLevel(ZX7,'A2S2')
local integer sT=BC7
local integer i
local integer D8R
local group g=WS7()
local integer D9R
if IsUnitType(IH7,UNIT_TYPE_ANCIENT)then
call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(ZX7),Condition(function sS))
set D8R=CountUnitsInGroup(g)
set D9R=YG7(GetUnitAbilityLevel(ZX7,'A0LT')+GetUnitAbilityLevel(ZX7,'A1CS'),3)
if D8R>=D9R then
call KillUnit(FirstOfGroup(g))
endif
endif
call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(ZX7),Condition(function DWR))
set i=CountUnitsInGroup(g)
if i==sT then
call KillUnit(GroupPickRandomUnit(g))
endif
call WR7(g)
call YP7(IH7)
if(BC7==1)then
call XF7(IH7,'A0KO')
elseif(BC7==2)then
call XF7(IH7,'A0KQ')
elseif(BC7==3)then
call XF7(IH7,'A0KR')
elseif(BC7==4)then
call XF7(IH7,'A0KP')
endif
call XF7(IH7,'Aeth')
call XF7(IH7,'A12G')
set ZX7=null
set g=null
endfunction
function WA9 takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local unit BB7
local real x
local real y
set BB7=CreateUnit(GetOwningPlayer(p5),'e00E',GetUnitX(m5),GetUnitY(m5),0)
call YF7(BB7,'A069',GetUnitAbilityLevel(p5,'A28T')+GetUnitAbilityLevel(p5,'A2S2'))
call IssueTargetOrderById(BB7,$D0265,m5)
call WZ9(m5)
set p5=null
set m5=null
set BB7=null
endfunction
function WB9 takes nothing returns boolean
if(GetSpellAbilityId()==1093810260 or GetSpellAbilityId()==1093817138)and WQ7(GetSpellTargetUnit())==false then
call WA9()
endif
return false
endfunction
function WC9 takes nothing returns boolean
local unit u=GetSpellTargetUnit()
if GetSpellAbilityId()==1093810260 or GetSpellAbilityId()==1093817138 then
if IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==true then
if IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO)==true or IsUnitIllusion(GetSpellTargetUnit())then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848658745))
elseif IsUnitType(u,UNIT_TYPE_ANCIENT)then
if GetUnitAbilityLevel(GetTriggerUnit(),'A1CS')==0 then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848658745))
endif
endif
endif
endif
set u=null
return false
endfunction
function EX8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function WC9))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WB9))
set t=null
endfunction
function W39 takes nothing returns nothing
call B67(FB,GetEnumUnit(),1,fB)
endfunction
function W69 takes unit p5,real x,real y,integer V77 returns nothing
local group g=WS7()
if V77==1 then
set fB=105
elseif V77==2 then
set fB=170
elseif V77==3 then
set fB=250
elseif V77==4 then
set fB=310
endif
set FB=p5
set IN4=p5
call GroupEnumUnitsInRange(g,x,y,325,Condition(function AJ7))
call ForGroup(g,function W39)
call WR7(g)
set g=null
endfunction
function WL9 takes nothing returns nothing
local unit oA=CreateUnit(GetOwningPlayer(IN4),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
if GetUnitAbilityLevel(IN4,'A03R')>0 then
call XF7(oA,'A10T')
else
call XF7(oA,'A2WH')
endif
call IssueTargetOrderById(oA,$D006B,GetEnumUnit())
set oA=null
endfunction
function W19 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local integer V77=OM7(OB7,"Level")
local integer W09=ModuloInteger(GetTriggerEvalCount(t),4)+1
local real a
local real d
local real x
local real y
local group g=WS7()
set IN4=WI7
call GroupEnumUnitsInRange(g,GetUnitX(WI7),GetUnitY(WI7),860,Condition(function AJ7))
call ForGroup(g,function WL9)
if W09==1 then
set a=GetRandomReal(0,120)
elseif W09==2 then
set a=GetRandomReal(120,$F0)
elseif W09==3 then
set a=GetRandomReal($F0,360)
else
set a=GetRandomReal(360,480)
endif
set d=GetRandomReal($A0,825)
if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and(GetSpellAbilityId()==1093677906 or GetSpellAbilityId()==1093681494)then
call NM7(OB7)
call OZ7(t)
call StopSound(vX,false,true)
else
set x=GetUnitX(WI7)+d*Cos(a*bj_DEGTORAD)
set y=GetUnitY(WI7)+d*Sin(a*bj_DEGTORAD)
call DestroyEffect(AddSpecialEffect("effects\\SnowyBlizzardTarget.mdx",x,y))
call W69(WI7,x,y,V77)
endif
call WR7(g)
set t=null
set g=null
set WI7=null
return false
endfunction
function W59 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local integer V77
call Y17(vX,GetUnitX(WI7),GetUnitY(WI7))
if GetSpellAbilityId()==1093677906 then
set V77=GetUnitAbilityLevel(WI7,1093677906)
else
set V77=GetUnitAbilityLevel(WI7,1093681494)+1
endif
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function W19))
call NT7(OB7,"Hero",WI7)
call NP7(OB7,"Level",V77)
set t=null
set WI7=null
endfunction
function R22 takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer I97=GetHandleId(t)
local unit ZX7=LoadUnitHandle(L7,I97,0)
local unit IH7=LoadUnitHandle(L7,I97,1)
if GetUnitAbilityLevel(IH7,'B017')>0 then
call B67(ZX7,IH7,1,50)
else
call UnitRemoveAbility(IH7,'A2WG')
call FlushChildHashtable(L7,I97)
call PauseTimer(t)
call DestroyTimer(t)
endif
set ZX7=null
set IH7=null
set t=null
endfunction
function R23 takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local timer t=CreateTimer()
local unit IH7=GetSpellTargetUnit()
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),'e00E',GetUnitX(IH7),GetUnitY(IH7),0)
local integer BC7=GetUnitAbilityLevel(ZX7,'A04C')
call UnitAddAbility(BB7,'A2WE')
call SetUnitAbilityLevel(BB7,'A2WE',BC7)
if IssueTargetOrderById(BB7,$D00CB,IH7)==false then
call UnitAddAbility(BB7,'A2WF')
call SetUnitAbilityLevel(BB7,'A2WF',BC7)
if IssueTargetOrderById(BB7,$D008A,IH7)then
call XF7(IH7,'A2WG')
endif
endif
call TimerStart(t,.5,true,function R22)
call SaveUnitHandle(L7,GetHandleId(t),0,ZX7)
call SaveUnitHandle(L7,GetHandleId(t),1,IH7)
call B67(ZX7,GetSpellTargetUnit(),1,50)
set t=null
set IH7=null
set BB7=null
set ZX7=null
endfunction
function W29 takes nothing returns boolean
if GetSpellAbilityId()==1093677906 or GetSpellAbilityId()==1093681494 then
call W59()
endif
if GetSpellAbilityId()=='A04C' then
call R23()
endif
return false
endfunction
function EB8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function W29))
call X_7(1093677912)
set t=null
endfunction
function W_9 takes unit ZX7 returns nothing
local integer BC7=GetUnitAbilityLevel(ZX7,1093812553)
if GetUnitTypeId(ZX7)==1215063922 then
call SetUnitAbilityLevel(ZX7,1093681490,BC7)
else
call SetUnitAbilityLevel(ZX7,1093681490,BC7+4)
endif
endfunction
function X49 takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093812553)
if BC7==1 then
call XF7(ZX7,1093681490)
endif
call W_9(ZX7)
set ZX7=null
endfunction
function X79 takes nothing returns boolean
if GetLearnedSkill()==1093812553 and IsUnitIllusion(GetTriggerUnit())==false then
call X49()
endif
return false
endfunction
function X89 takes nothing returns nothing
local unit u=GetTriggerUnit()
if GetUnitTypeId(u)==1211117639 or GetUnitTypeId(u)==1211117638 or GetUnitTypeId(u)==1211117637 then
call SetUnitAnimation(u,"stand")
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Defend\\DefendCaster.mdl",u,"head"))
elseif GetUnitTypeId(u)==1215063922 then
call SetUnitAnimation(u,"stand defend")
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Defend\\DefendCaster.mdl",u,"origin"))
endif
set u=null
endfunction
function R1R takes unit u returns nothing
if GetUnitAbilityLevel(GetEventDamageSource(),1093817944)>0 then
call Z57(u,1093817945,1,8,1110460472)
call SetUnitAbilityLevel(u,1093817946,GetUnitAbilityLevel(GetEventDamageSource(),1093817944))
call UnitMakeAbilityPermanent(u,true,1093817946)
endif
endfunction
function R1S takes nothing returns nothing
local unit u=GetTriggerUnit()
local unit BB7=CreateUnit(GetOwningPlayer(u),1697656901,GetUnitX(u),GetUnitY(u),0)
call UnitAddAbility(BB7,1093817944)
call SetUnitAbilityLevel(BB7,1093817944,GetUnitAbilityLevel(u,GetSpellAbilityId()))
if IssuePointOrderById(BB7,$D0264,GetSpellTargetX(),GetSpellTargetY())or IssueTargetOrderById(BB7,$D0264,GetSpellTargetUnit())then
call SetUnitX(BB7,GetUnitX(u))
call SetUnitY(BB7,GetUnitY(u))
if IssuePointOrderById(BB7,$D0264,GetSpellTargetX(),GetSpellTargetY())or IssueTargetOrderById(BB7,$D0264,GetSpellTargetUnit())then
endif
endif
set u=null
set BB7=null
endfunction
function X99 takes nothing returns boolean
if GetSpellAbilityId()==1093681490 then
call X89()
elseif GetSpellAbilityId()==1093677894 then
call R1S()
endif
return false
endfunction
function JB8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function X99))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function X79))
call X_7(1093681490)
call yS(1093817945)
set t=null
endfunction
function XD9 takes nothing returns boolean
return GetLearnedSkill()==1093681996 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function XE9 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
call SetPlayerTechResearched(GetOwningPlayer(WI7),1378889782,GetPlayerTechCount(GetOwningPlayer(WI7),1378889782,true)+1)
set WI7=null
endfunction
function JA8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function XD9))
call TriggerAddAction(t,function XE9)
set t=null
endfunction
function AF3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local real DK8=(LoadReal(L7,(GetHandleId(IH7)),(805)))
local real QC2=0.75
local real YM7=20
if IsUnitType(IH7,UNIT_TYPE_HERO)==false then
set QC2=1
endif
call B67(ZX7,IH7,1,YM7)
if(TimerGetElapsed(W))>=DK8 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function AG3 takes unit ZX7,unit IH7 returns nothing
local trigger t
local integer I97
local real DK8=(LoadReal(L7,(GetHandleId(IH7)),(805)))
if DK8>(TimerGetElapsed(W))then
call SaveReal(L7,(GetHandleId(IH7)),(805),(((TimerGetElapsed(W))+5)*1.0))
else
call SaveReal(L7,(GetHandleId(IH7)),(805),(((TimerGetElapsed(W))+5)*1.0))
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function AF3))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
endif
set t=null
endfunction
function AH3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==ZX7 then
call DisableTrigger(t)
call AG3(ZX7,IH7)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
else
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set IH7=null
set ZX7=null
return false
endfunction
function AZ3 takes nothing returns nothing
local trigger t=CreateTrigger()
local unit IH7=GetTriggerUnit()
local unit ZX7=GetAttacker()
local integer I97=GetHandleId(t)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function AH3))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
set t=null
set IH7=null
set ZX7=null
endfunction
function AV3 takes nothing returns boolean
if GetAttacker()==(LoadUnitHandle(L7,(GetHandleId(GetTriggeringTrigger())),(2)))and IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false and GetUnitAbilityLevel(GetAttacker(),1093685044)>0 then
call AZ3()
endif
return false
endfunction
function AW3 takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function AV3))
call SaveUnitHandle(L7,(GetHandleId(t)),(2),(ZX7))
set ZX7=null
set t=null
endfunction
function XF9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
call W_9(ZX7)
call OZ7(t)
call FlushChildHashtable(L7,(I97))
set t=null
set ZX7=null
return false
endfunction
function XG9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
call W_9(ZX7)
call OZ7(t)
call FlushChildHashtable(L7,(I97))
set t=null
set ZX7=null
return false
endfunction
function DQ8 takes nothing returns nothing
if GetUnitAbilityLevel(IN4,1093681490)>0 then
call W_9(IN4)
endif
endfunction
function XH9 takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.01,false)
call TriggerAddCondition(t,Condition(function XF9))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerAddCondition(t,Condition(function XG9))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set ZX7=null
set t=null
endfunction
function XI9 takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093677895 then
call XH9()
endif
else
if GetLearnedSkill()==1093677895 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093677895)==1 then
call AW3()
endif
endif
return false
endfunction
function JC8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function XI9))
set t=null
endfunction
function XJ9 takes nothing returns nothing
local real x=GetUnitX(GetEnumUnit())
local real y=GetUnitY(GetEnumUnit())
local integer id=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
call SetUnitX(YZ[id],x)
call SetUnitY(YZ[id],y)
if GetPlayerController(GetOwningPlayer(YZ[id]))==MAP_CONTROL_COMPUTER then
call UnitAddAbility(YZ[id],1093682253)
call SetUnitAbilityLevel(YZ[id],1093682253,ZZ)
endif
call IssueImmediateOrderById(YZ[id],$D022E)
endfunction
function XK9 takes nothing returns nothing
local real x=GetUnitX(GetEnumUnit())
local real y=GetUnitY(GetEnumUnit())
local integer id=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO) or IsUnitIllusion(GetEnumUnit())==true then
call SetUnitX(YZ[id],x)
call SetUnitY(YZ[id],y)
if GetPlayerController(GetOwningPlayer(YZ[id]))==MAP_CONTROL_COMPUTER then
call UnitAddAbility(YZ[id],1093682253)
call SetUnitAbilityLevel(YZ[id],1093682253,ZZ)
endif
call IssueImmediateOrderById(YZ[id],$D022E)
endif
endfunction
function XM9 takes nothing returns boolean
return(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())) and XH7(GetFilterUnit())==false)!=null
endfunction
function XN9 takes nothing returns nothing
local unit p5=GetTriggerUnit()
local real x=GetUnitX(p5)
local real y=GetUnitY(p5)
local group g=WS7()
local integer id=GetPlayerId(GetOwningPlayer(p5))
local integer V77=GetUnitAbilityLevel(p5,1093682248)+GetUnitAbilityLevel(p5,1093750594)
set YZ[id]=CreateUnit(GetOwningPlayer(p5),1697656901,x,y,0)
set zZ[id]=CreateUnit(GetOwningPlayer(p5),1697656901,x,y,0)
set ZZ=V77
call SetUnitScale(YZ[id],.25,.25,.25)
call XF7(YZ[id],1093682253)
call XF7(zZ[id],1093748784)
call SetUnitAbilityLevel(YZ[id],1093682253,V77)
call SetUnitAbilityLevel(zZ[id],1093748784,V77)
call GroupEnumUnitsInRange(g,x,y,600,Condition(function XM9))
call ForGroup(g,function XJ9)
if GetUnitAbilityLevel(p5,1093750594)>0 then
call ForGroup(g,function XK9)
endif
call WR7(g)
set p5=null
set g=null
endfunction
function XO9 takes nothing returns boolean
if GetSpellAbilityId()==1093682248 or GetSpellAbilityId()==1093750594 then
call XN9()
endif
return false
endfunction
function EC8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function XO9))
set t=null
call X_7(1093682253)
endfunction
function XP9 takes nothing returns nothing
local unit oA=CreateUnit(GetOwningPlayer(GetEnumUnit()),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
call XF7(oA,1093686090)
call SetUnitAbilityLevel(oA,1093686090,IH4)
call IssueTargetOrderById(oA,$D007F,GetEnumUnit())
call B67(GetTriggerUnit(),GetEnumUnit(),1,IJ4)
set oA=null
endfunction
function XQ9 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local location l=GetSpellTargetLoc()
local integer i=1
local real iN=GetUnitX(WI7)
local real io=GetUnitY(WI7)
local real hN
local real ho
local real x
local real y
local real a
local group g=WS7()
local group g2=WS7()
if m5==null then
set hN=GetLocationX(l)
set ho=GetLocationY(l)
else
set hN=GetUnitX(m5)
set ho=GetUnitY(m5)
endif
set a=bj_DEGTORAD*J77(iN,io,hN,ho)
call RemoveLocation(l)
loop
exitwhen i>24
set x=X17(iN+i*60*Cos(a))
set y=X07(io+i*60*Sin(a))
call GroupEnumUnitsInRange(g2,x,y,$FA,Condition(function AW7))
call GroupAddGroup(g2,g)
call GroupClear(g2)
call ZN7(CreateDestructable(1110454320,x,y,GetRandomReal(0,360),.5,GetRandomInt(0,2)),8)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl",x,y))
set i=i+1
endloop
set IH4=GetUnitAbilityLevel(WI7,1093686091)
set IJ4=IH4*50+60
call ForGroup(g,function XP9)
call WR7(g)
call WR7(g2)
set WI7=null
set l=null
set m5=null
set g=null
set g2=null
endfunction
function XR9 takes nothing returns boolean
if GetSpellAbilityId()==1093686091 then
call XQ9()
endif
return false
endfunction
function E38 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function XR9))
call X_7(1093686090)
set t=null
endfunction
function XS9 takes nothing returns boolean
return((GetUnitAbilityLevel(GetSpellAbilityUnit(),1093682250)>0)and(((GetSpellAbilityId()==1093686091)or(GetSpellAbilityId()==1093682252)or(GetSpellAbilityId()==1093682248)or(GetSpellAbilityId()==1093750594)))or(GetUnitPointValue(GetTriggerUnit())==500)and UL7(GetSpellAbilityId()))
endfunction
function XT9 takes nothing returns nothing
local location sb=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,1697656901,GetOwningPlayer(GetTriggerUnit()),sb,bj_UNIT_FACING)
call UnitAddAbility(bj_lastCreatedUnit,1093682249)
call SetUnitAbilityLevelSwapped(1093682249,bj_lastCreatedUnit,GetUnitAbilityLevelSwapped(1093682250,GetSpellAbilityUnit()))
call IssueImmediateOrderById(bj_lastCreatedUnit,$D009F)
call RemoveLocation(sb)
set sb=null
endfunction
function E68 takes nothing returns nothing
set dq=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dq,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(dq,Condition(function XS9))
call TriggerAddAction(dq,function XT9)
endfunction
function XU9 takes nothing returns boolean
return((GetItemTypeId(GetManipulatedItem())==1227894859)and(GetUnitTypeId(GetTriggerUnit())==1333027688))
endfunction
function XV9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local unit oA=CreateUnit(GetOwningPlayer(WI7),1697656901,GetUnitX(WI7),GetUnitY(WI7),0)
call XF7(oA,1095332466)
call IssueImmediateOrderById(oA,$D00C4)
call NM7(OB7)
call OZ7(t)
set t=null
set WI7=null
set oA=null
return false
endfunction
function XW9 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call UnitRemoveAbility(WI7,1110454608)
call NT7(OB7,"Hero",WI7)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function XV9))
set t=null
set WI7=null
endfunction
function EL8 takes nothing returns nothing
set H24=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(H24,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(H24,Condition(function XU9))
call TriggerAddAction(H24,function XW9)
endfunction
function XX9 takes nothing returns boolean
return(UnitHasBuffBJ(GetAttacker(),1114795873))
endfunction
function XY9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==ZX7 then
call UnitRemoveAbility(ZX7,1114795873)
endif
else
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function XZ9 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit IH7=GetTriggerUnit()
local unit ZX7=GetAttacker()
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,1.5,false)
call TriggerAddCondition(t,Condition(function XY9))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
set t=null
set ZX7=null
set IH7=null
endfunction
function E18 takes nothing returns nothing
set dr=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dr,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(dr,Condition(function XX9))
call TriggerAddAction(dr,function XZ9)
endfunction
function XA9 takes unit u returns boolean
return IsUnitType(u,UNIT_TYPE_HERO)==false and IsUnitType(u,UNIT_TYPE_ANCIENT)==false and GetUnitTypeId(u)!=1848652101 and GetUnitTypeId(u)!=1848652089
endfunction
function XB9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
call UnitRemoveAbility(IH7,1114860655)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set IH7=null
return false
endfunction
function XC9 takes nothing returns nothing
local unit m5=GetSpellTargetUnit()
local unit p5=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.01,false)
call TriggerAddCondition(t,Condition(function XB9))
call SaveUnitHandle(L7,(I97),(17),(m5))
call SetUnitOwner(m5,GetOwningPlayer(p5),true)
call UnitApplyTimedLife(m5,1112820806,80)
call XF7(m5,1097167976)
call XF7(m5,1093743175)
call YP7(m5)
set m5=null
set p5=null
set t=null
endfunction
function X39 takes nothing returns boolean
if GetSpellAbilityId()==1093682264 and XA9(GetSpellTargetUnit())then
call XC9()
endif
return false
endfunction
function E08 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function X39))
set t=null
endfunction
function X69 takes nothing returns boolean
return ji()and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)!=GetUnitState(GetFilterUnit(),UNIT_STATE_MAX_LIFE)
endfunction
function XL9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local integer Rd=OM7(OB7,"Counter")
local group g
local unit D_8
if Rd>$A then
call NM7(OB7)
call OZ7(t)
else
call NP7(OB7,"Counter",Rd+1)
set IN4=p5
set g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(p5),GetUnitY(p5),400,Condition(function X69))
set D_8=GroupPickRandomUnit(g)
call WR7(g)
call SetUnitState(D_8,UNIT_STATE_LIFE,GetUnitState(D_8,UNIT_STATE_LIFE)+$A)
endif
set t=null
set p5=null
set g=null
set D_8=null
return false
endfunction
function X19 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
call AddUnitAnimationProperties(ZX7,"alternate",false)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set ZX7=null
return false
endfunction
function X09 takes nothing returns nothing
local unit p5=GetTriggerUnit()
local integer i=1
local trigger t
local integer I97
loop
exitwhen i>(2+2*GetUnitAbilityLevel(p5,1093677378))
set t=CreateTrigger()
call NT7(GetHandleId(t),"Source",p5)
call NP7(GetHandleId(t),"Counter",0)
call TriggerRegisterTimerEvent(t,1.,true)
call TriggerAddCondition(t,Condition(function XL9))
set i=i+1
endloop
if GetUnitTypeId(p5)==1160786520 then
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function X19))
call SaveUnitHandle(L7,(I97),(2),(p5))
set t=null
endif
set t=null
set p5=null
endfunction
function X59 takes nothing returns boolean
if GetSpellAbilityId()==1093677378 then
call X09()
endif
return false
endfunction
function E58 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function X59))
set t=null
endfunction
function X29 takes real x1,real y1,real x2,real y2 returns real
return SquareRoot(((x1-x2)*(x1-x2))+((y1-y2)*(y1-y2)))
endfunction
function X_9 takes unit u returns integer
local integer BC7=GetUnitAbilityLevel(u,1093682265)
if BC7>0 then
return BC7
endif
set BC7=GetUnitAbilityLevel(u,1093752642)
return BC7
endfunction
function Y49 takes nothing returns boolean
local real d
local real Y79
if GetUnitAbilityLevel(GetTriggerUnit(),1110455125)>0 and X_9(GetEventDamageSource())>0 and O77(GetHandleId(GetTriggeringTrigger()),"Source")==GetEventDamageSource()then
call UnitRemoveAbility(GetTriggerUnit(),1110455125)
set Y79=RMinBJ(X29(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),GetUnitX(GetEventDamageSource()),GetUnitY(GetEventDamageSource())),$1869F)
if GetRandomReal(0,100)<=30 and MR7(GetEventDamageSource(),ZU[L5]) then
set d=(.1+.05*I2R(X_9(GetEventDamageSource())))*Y79*2.2
call YW7("+"+I2S(R2I(d))+"!",3,GetTriggerUnit(),0.02,192,0,192,255)
elseif GetRandomReal(0,100)<=20 and MR7(GetEventDamageSource(),ZU[A1]) and MR7(GetEventDamageSource(),ZU[L5])==null then
set d=(.1+.05*I2R(X_9(GetEventDamageSource())))*Y79*1.75
call YW7("+"+I2S(R2I(d))+"!",3,GetTriggerUnit(),0.02,192,0,192,255)
else
set d=(.1+.05*I2R(X_9(GetEventDamageSource())))*Y79
call YW7("+"+I2S(R2I(d)),1,GetTriggerUnit(),.023,3,$D8,$D8,$D8)
endif
call DisableTrigger(GetTriggeringTrigger())
call B67(GetEventDamageSource(),GetTriggerUnit(),11,d)
call NM7(GetHandleId(GetTriggeringTrigger()))
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function Y89 takes nothing returns nothing
local trigger t
local unit m5
local unit p5
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
set m5=GetSpellTargetUnit()
set p5=GetTriggerUnit()
else
set m5=GetTriggerUnit()
set p5=GetAttacker()
endif
if IsUnitIllusion(p5)==false then
set t=CreateTrigger()
call NT7(GetHandleId(t),"Source",p5)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function Y49))
endif
set t=null
set m5=null
set p5=null
endfunction
function Sn takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if X_9(GetAttacker())>0 and(OO7(GetHandleId(GetTriggeringTrigger()),"OrbOn")or(GZ[304+GetPlayerId(GetOwningPlayer(GetAttacker()))]))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==O77(GetHandleId(GetTriggeringTrigger()),"Hero")then
call Y89()
endif
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if(GetIssuedOrderId()==$D011F)then
call NS7(GetHandleId(GetTriggeringTrigger()),"OrbOn",true)
elseif(GetIssuedOrderId()==$D0120)then
call NS7(GetHandleId(GetTriggeringTrigger()),"OrbOn",false)
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and(GetSpellAbilityId()==1093682265 or GetSpellAbilityId()==1093752642)then
call Y89()
endif
return false
endfunction
function Y99 takes unit WI7,boolean UA9 returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function Sn))
call NT7(GetHandleId(t),"Hero",WI7)
if UA9 then
set Vj[GetPlayerId(GetOwningPlayer(WI7))]=t
endif
set t=null
endfunction
function YD9 takes nothing returns boolean
if(GetLearnedSkill()==1093682265 or GetLearnedSkill()==1093752642)and IsUnitIllusion(GetTriggerUnit())==false and X_9(GetTriggerUnit())==1 then
call Y99(GetTriggerUnit(),false)
endif
return false
endfunction
function E28 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function YD9))
set t=null
endfunction
function YE9 takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
return GetUnitAbilityLevel(GetSpellTargetUnit(),1093682263)>0
else
return GetUnitAbilityLevel(GetTriggerUnit(),1093682263)>0
endif
endfunction
function YF9 takes nothing returns nothing
local unit p5
local unit m5
local unit oA
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
set p5=GetSpellTargetUnit()
set m5=GetTriggerUnit()
else
set p5=GetTriggerUnit()
set m5=GetAttacker()
endif
set oA=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
call XF7(oA,1093681712)
call SetUnitAbilityLevel(oA,1093681712,GetUnitAbilityLevel(p5,1093682263))
call IssueTargetOrderById(oA,$D02B6,m5)
set p5=null
set m5=null
set oA=null
endfunction
function E_8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YE9))
call TriggerAddAction(t,function YF9)
set t=null
endfunction
function YG9 takes real x returns real
local real H7=GetRectMinX(bj_mapInitialPlayableArea)+$96
if(x<H7)then
return H7
endif
set H7=GetRectMaxX(bj_mapInitialPlayableArea)-$96
if(x>H7)then
return H7
endif
return x
endfunction
function YH9 takes real y returns real
local real H7=GetRectMinY(bj_mapInitialPlayableArea)+$96
if(y<H7)then
return H7
endif
set H7=GetRectMaxY(bj_mapInitialPlayableArea)-$96
if(y>H7)then
return H7
endif
return y
endfunction
function YI9 takes unit u returns boolean
local integer id=GetUnitTypeId(u)
return id==1852862003 or id==1852862006 or id==1848652080 or id==1848657754 or id==1852862001 or id==1852862004 or id==1848652081 or id==1848657968 or id==1852862002 or id==1852862005 or id==1848652082 or id==1848657969
endfunction
function YJ9 takes nothing returns boolean
return(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or YI9(GetFilterUnit())or Z_7(GetFilterUnit())or GetUnitTypeId(GetFilterUnit())==1848651861 or GetUnitTypeId(GetFilterUnit())==1848651865 or GetUnitTypeId(GetFilterUnit())==1848651866 or GetUnitTypeId(GetFilterUnit())==1848658773 or GetUnitTypeId(GetFilterUnit())==1848658774 or GetUnitTypeId(GetFilterUnit())==1848658775 or VQ7(GetUnitTypeId(GetFilterUnit())))and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(O77(GetHandleId(GetTriggeringTrigger()),"BlackHole"))))!=null
endfunction
function YK9 takes nothing returns nothing
local location YM9=GetUnitLoc(GetEnumUnit())
local location YN9=GetUnitLoc(O77(GetHandleId(GetTriggeringTrigger()),"BlackHole"))
local location YO9=KT7(YN9,DistanceBetweenPoints(YN9,YM9)-2,AngleBetweenPoints(YN9,YM9))
call SetUnitPositionLoc(GetEnumUnit(),YO9)
call RemoveLocation(YM9)
call RemoveLocation(YN9)
call RemoveLocation(YO9)
if BOI>0 then
call B67(B2I,GetEnumUnit(),8,GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)*(0.0225+0.0075*BOI))
endif
set YM9=null
set YN9=null
set YO9=null
endfunction
function YP9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local group LQ7
local integer OB7=GetHandleId(t)
local unit YQ9=O77(OB7,"BlackHole")
local unit p5=O77(OB7,"Source")
local unit BB7
local real x
local real y
if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and(GetSpellAbilityId()==1093747288 or GetSpellAbilityId()==1093817164)then
call KillUnit(YQ9)
set BB7=O77(OB7,"Caster")
call UnitApplyTimedLife(O77(OB7,"Shadow1"),1112820806,1)
call UnitApplyTimedLife(O77(OB7,"Shadow2"),1112820806,1)
call UnitApplyTimedLife(O77(OB7,"Shadow3"),1112820806,1)
call UnitApplyTimedLife(O77(OB7,"Shadow4"),1112820806,1)
call NM7(OB7)
call OZ7(t)
call KillUnit(BB7)
elseif GetTriggerEvalCount(t)>90 then
set BB7=O77(OB7,"Caster")
call UnitApplyTimedLife(O77(OB7,"Shadow1"),1112820806,1)
call UnitApplyTimedLife(O77(OB7,"Shadow2"),1112820806,1)
call UnitApplyTimedLife(O77(OB7,"Shadow3"),1112820806,1)
call UnitApplyTimedLife(O77(OB7,"Shadow4"),1112820806,1)
call NM7(OB7)
call OZ7(t)
call KillUnit(YQ9)
call KillUnit(BB7)
call KR7(O77(OB7,"Source"))
else
set BOI=0
if GetTriggerEvalCount(t)==20 or GetTriggerEvalCount(t)==40 or GetTriggerEvalCount(t)==60 or GetTriggerEvalCount(t)==80 then
if GetUnitAbilityLevel(p5,1093817164)>0 then
set B2I=p5
set BOI=GetUnitAbilityLevel(p5,1093681713)
endif
endif
set x=GetUnitX(YQ9)
set y=GetUnitY(YQ9)
set LQ7=WS7()
call GroupEnumUnitsInRange(LQ7,x,y,445,Condition(function YJ9))
call ForGroup(LQ7,function YK9)
call WR7(LQ7)
endif
set BB7=null
set YQ9=null
set t=null
set LQ7=null
return false
endfunction
function YR9 takes nothing returns nothing
local unit p5=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit BB7=CreateUnit(GetOwningPlayer(p5),1697656901,x,y,0)
local unit YQ9=CreateUnit(GetOwningPlayer(p5),1966092340,x,y,0)
local integer BC7=GetUnitAbilityLevel(p5,'A1BX')+GetUnitAbilityLevel(p5,'A2SL')
call RemoveLocation(l)
call SetUnitAbilityLevel(YQ9,'A0C0',BC7)
if TW7(GetOwningPlayer(p5))then
call XF7(BB7,1093687348)
else
call XF7(BB7,1093687347)
endif
call IssuePointOrderById(BB7,$D01F9,x,y)
call NT7(OB7,"Caster",BB7)
call NT7(OB7,"Shadow1",CreateUnit(GetOwningPlayer(p5),1747990098,x,y,0))
call NT7(OB7,"Shadow2",CreateUnit(GetOwningPlayer(p5),1747990098,x,y,0))
call NT7(OB7,"Shadow3",CreateUnit(GetOwningPlayer(p5),1747990098,x,y,0))
call NT7(OB7,"Shadow4",CreateUnit(GetOwningPlayer(p5),1747990098,x,y,0))
call NT7(OB7,"BlackHole",YQ9)
call NT7(OB7,"Source",p5)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_ENDCAST)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function YP9))
set p5=null
set YQ9=null
set t=null
set l=null
set BB7=null
endfunction
function YS9 takes nothing returns boolean
if GetSpellAbilityId()==1093747288 or GetSpellAbilityId()==1093817164 then
call YR9()
endif
return false
endfunction
function YT9 takes nothing returns boolean
local location l
local real x
local real y
if GetSpellAbilityId()==1093747288 or GetSpellAbilityId()==1093817164 then
set l=GetSpellTargetLoc()
set x=GetLocationX(l)
set y=GetLocationY(l)
call RemoveLocation(l)
set l=null
if(x!=YG9(x)and y!=YH9(y))or RectContainsCoords(eE,x,y)or RectContainsCoords(oE,x,y)or RectContainsCoords(aE,x,y)or RectContainsCoords(nE,x,y)or RectContainsCoords(VE,x,y)or RectContainsCoords(EE,x,y)then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),"Cannot cast Blackhole here")
endif
endif
return false
endfunction
function F48 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YS9))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function YT9))
call X_7(1093681968)
set t=null
endfunction
function YU9 takes unit p5,unit m5,integer V77 returns nothing
local real YM7
local real ySS
if V77==1 then
set YM7=30
set ySS=.25
elseif V77==2 then
set YM7=50
set ySS=.5
elseif V77==3 then
set YM7=70
set ySS=.75
else
set YM7=90
set ySS=1
endif
call BA7(m5,m5,ySS)
call B67(p5,m5,1,YM7)
endfunction
function YV9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit m5=O77(OB7,"Target")
local integer V77=OM7(OB7,"Level")
call YU9(p5,m5,V77)
call NM7(OB7)
call OZ7(t)
set t=null
set p5=null
set m5=null
return false
endfunction
function SW takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local trigger t
local integer OB7
local integer V77=GetUnitAbilityLevel(p5,1093683511)
call YU9(p5,m5,V77)
set t=CreateTrigger()
set OB7=GetHandleId(t)
call NT7(OB7,"Source",p5)
call NT7(OB7,"Target",m5)
call NP7(OB7,"Level",V77)
call TriggerRegisterTimerEvent(t,2,false)
call TriggerAddCondition(t,Condition(function YV9))
set t=CreateTrigger()
set OB7=GetHandleId(t)
call NT7(OB7,"Source",p5)
call NT7(OB7,"Target",m5)
call NP7(OB7,"Level",V77)
call TriggerRegisterTimerEvent(t,4,false)
call TriggerAddCondition(t,Condition(function YV9))
set t=null
set p5=null
set m5=null
endfunction
function YW9 takes nothing returns boolean
if GetSpellAbilityId()==1093683511 and WQ7(GetSpellTargetUnit())==false then
call SW()
endif
return false
endfunction
function F78 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YW9))
set t=null
endfunction
function YX9 takes nothing returns boolean
return(GetSpellAbilityId()==1093681713)
endfunction
function YY9 takes nothing returns nothing
local location sb=GetUnitLoc(GetTriggerUnit())
local location Sa=GetSpellTargetLoc()
local integer kt=GetUnitAbilityLevel(GetTriggerUnit(),1093681713)
local unit YZ9
call CreateNUnitsAtLocFacingLocBJ(1,1697656901,GetOwningPlayer(GetTriggerUnit()),Sa,Sa)
call ShowUnitHide(bj_lastCreatedUnit)
call UnitApplyTimedLifeBJ(8.,1112820806,bj_lastCreatedUnit)
call UnitAddAbility(bj_lastCreatedUnit,1093681714)
call SetUnitAbilityLevelSwapped(1093681714,bj_lastCreatedUnit,kt)
call IssuePointOrderByIdLoc(bj_lastCreatedUnit,$D00FD,Sa)
if(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_USER)then
set YZ9=bj_lastCreatedUnit
loop
call J_7(.9)
exitwhen(IsUnitDeadBJ(YZ9))
if(GetUnitCurrentOrder(YZ9)!=$D00FD)then
call UnitRemoveAbility(YZ9,1093681714)
call UnitAddAbility(YZ9,1093681714)
call SetUnitAbilityLevelSwapped(1093681714,YZ9,kt)
call IssuePointOrderByIdLoc(YZ9,$D00FD,Sa)
endif
endloop
endif
call RemoveLocation(sb)
call RemoveLocation(Sa)
set YZ9=null
set sb=null
set Sa=null
endfunction
function F88 takes nothing returns nothing
set dR=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dR,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(dR,Condition(function YX9))
call TriggerAddAction(dR,function YY9)
endfunction
function YA9 takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local real x=GetUnitX(m5)
local real y=GetUnitY(m5)
local integer V77=GetUnitAbilityLevel(p5,1093744688)
local unit oA=CreateUnit(GetOwningPlayer(p5),1697656901,x,y,0)
call SetUnitState(m5,UNIT_STATE_LIFE,1)
call B67(p5,m5,2,20)
call B67(p5,m5,1,20)
call B67(p5,m5,3,20)
call XF7(oA,1093744474)
call SetUnitAbilityLevel(oA,1093744474,V77)
call IssueImmediateOrderById(oA,$D02BB)
set p5=null
set m5=null
set oA=null
endfunction
function YB9 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer YC9=GetUnitLevel(m5)
if GetOwningPlayer(m5)!=Z7[0]and GetOwningPlayer(m5)!=A7[0]and YC9>4 then
call KR7(WI7)
call X37(GetOwningPlayer(WI7),(GetObjectName((1848656728))))
endif
set WI7=null
set m5=null
endfunction
function Y39 takes nothing returns boolean
if GetSpellAbilityId()==1093744688 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
call YA9()
else
call YB9()
endif
endif
return false
endfunction
function F98 takes nothing returns nothing
local trigger t=CreateTrigger()
local region regDemonicConversion=CreateRegion()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function Y39))
set t=null
endfunction
function SZ takes nothing returns nothing
local integer O5=0
if IsUnitInGroup(GetEnumUnit(),IQ4)==false then
call GroupAddUnit(IQ4,GetEnumUnit())
call B67(IN4,GetEnumUnit(),1,IJ4)
if((IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO))and(IsUnitInForce(IN4,QX4)))then
set O5=GetPlayerId(GetOwningPlayer(IN4))
if((hq[$F0+O5]>Bz)and(h4[16+O5]==GetEnumUnit())and(M87(M7[O5]))and(K57(M7[O5]))and(GetUnitLifePercent(M7[O5])>65.)and(G0[$80+O5])and(not IsUnitInRange(M7[O5],GetEnumUnit(),450.))and(kJ(GetUnitX(IN4),GetUnitY(IN4))))then
set PN4[16+O5]=GetEnumUnit()
endif
endif
endif
endfunction
function S0 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local group g=OF7(OB7,"g")
local unit oA=O77(OB7,"Caster")
local integer V77=OM7(OB7,"Level")
local real RK=ON7(OB7,"Angle")
local group S1
local real x
local real y
if GetTriggerEventId()==EVENT_UNIT_DEATH then
set IN4=CreateUnit(GetOwningPlayer(oA),1747990095,GetUnitX(O77(OB7,"Hero")),GetUnitY(O77(OB7,"Hero")),0)
call SetUnitScale(IN4,2.5,2.5,2.5)
call KillUnit(IN4)
call SetUnitPosition(O77(OB7,"Hero"),GetUnitX(oA),GetUnitY(oA))
call ShowUnit((O77(OB7,"Hero")),false)
call ShowUnit((O77(OB7,"Hero")),true)
call SelectUnitAddForPlayer((O77(OB7,"Hero")),GetOwningPlayer((O77(OB7,"Hero"))))
set PN4[GetPlayerId(GetOwningPlayer(oA))]=null
call WR7(g)
call NM7(OB7)
call OZ7(t)
elseif GetTriggerEvalCount(t)>120 then
set PN4[GetPlayerId(GetOwningPlayer(oA))]=null
call WR7(g)
call NM7(OB7)
call OZ7(t)
call SetUnitScale(oA,2.5,2.5,2.5)
call KillUnit(oA)
else
set x=GetUnitX(oA)
set y=GetUnitY(oA)
set S1=WS7()
set IQ4=g
set PN4[16+GetPlayerId(GetOwningPlayer(oA))]=null
set IN4=oA
set IJ4=V77*70
call GroupEnumUnitsInRange(S1,x,y,$E1+25,Condition(function jh))
call ForGroup(S1,function SZ)
call WR7(S1)
call SetUnitX(oA,X17(x+$F*Cos(RK*bj_DEGTORAD)))
call SetUnitY(oA,X07(y+$F*Sin(RK*bj_DEGTORAD)))
if(IsUnitInForce(oA,QX4))then
if(PN4[16+GetPlayerId(GetOwningPlayer(oA))]!=null)then
call IssueImmediateOrderById(M7[GetPlayerId(GetOwningPlayer(oA))],$D00D9)
set hq[512+GetPlayerId(GetOwningPlayer(oA))]=Bz+1.
elseif((h4[16+GetPlayerId(GetOwningPlayer(oA))]==M7[GetPlayerId(GetOwningPlayer(oA))])and(M87(M7[GetPlayerId(GetOwningPlayer(oA))]))and(not IsUnitInRange(M7[GetPlayerId(GetOwningPlayer(oA))],oA,550.))and(kJ(GetUnitX(oA),GetUnitY(oA)))and(K57(M7[GetPlayerId(GetOwningPlayer(oA))])))then
call IssueImmediateOrderById(M7[GetPlayerId(GetOwningPlayer(oA))],$D00D9)
endif
endif
endif
set t=null
set g=null
set S1=null
set oA=null
return false
endfunction
function Y69 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local group g=WS7()
local unit WI7=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x1=GetUnitX(WI7)
local real y1=GetUnitY(WI7)
local real x2=GetLocationX(l)
local real y2=GetLocationY(l)
local real RK=J77(x1,y1,x2,y2)
local integer V77=GetUnitAbilityLevel(WI7,1093686073)
local unit oA=CreateUnit(GetOwningPlayer(WI7),1747990095,x1,y1,RK)
call Y17(UX,x1,y1)
call XF7(GetTriggerUnit(),1093686081)
set PN4[GetPlayerId(GetOwningPlayer(WI7))]=oA
call SetUnitScale(oA,3.5,3.5,3.5)
call NT7(OB7,"Caster",oA)
call NP7(OB7,"Level",V77)
call NB7(OB7,"g",g)
call NQ7(OB7,"Angle",RK)
call NT7(OB7,"Hero",WI7)
call TriggerRegisterTimerEvent(t,.025,true)
call TriggerRegisterUnitEvent(t,oA,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function S0))
call RemoveLocation(l)
set t=null
set oA=null
set g=null
set WI7=null
set l=null
endfunction
function S3 takes nothing returns nothing
local integer i=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
if PN4[i]==null then
call X37(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652599))
else
call SetUnitScale(PN4[i],2.5,2.5,2.5)
call KillUnit(PN4[i])
endif
endfunction
function YL9 takes nothing returns boolean
if GetSpellAbilityId()==1093686073 then
call Y69()
endif
if GetSpellAbilityId()==1093686081 then
call S3()
endif
return false
endfunction
function fwv takes nothing returns boolean
if GetLearnedSkill()==1093686073 and GetUnitAbilityLevel(GetTriggerUnit(),1093686073)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call XF7(GetTriggerUnit(),1093686081)
endif
return false
endfunction
function MG8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YL9))
set t=null
endfunction
function Y19 takes nothing returns nothing
call B67(GetTriggerUnit(),GetEnumUnit(),1,IJ4)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\StaffOfPurification\\PurificationTarget.mdx",GetEnumUnit(),"chest"))
endfunction
function Y09 takes nothing returns nothing
local group g=WS7()
local unit WI7=GetTriggerUnit()
local real x=GetUnitX(WI7)
local real y=GetUnitY(WI7)
local integer V77=GetUnitAbilityLevel(WI7,1093686083)
local unit oA=CreateUnit(GetOwningPlayer(WI7),1697656901,x,y,0)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\StaffOfPurification\\PurificationCaster.mdx",x,y))
call XF7(oA,1093686084)
call SetUnitAbilityLevel(oA,1093686084,V77)
call IssuePointOrderById(oA,$D0270,x,y)
set IJ4=V77*70
call GroupEnumUnitsInRange(g,x,y,425,Condition(function jF))
call ForGroup(g,function Y19)
call WR7(g)
set oA=null
set g=null
set WI7=null
endfunction
function Y59 takes nothing returns boolean
if GetSpellAbilityId()==1093686083 then
call Y09()
endif
return false
endfunction
function MH8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Y59))
set t=null
endfunction
function Y29 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local integer BC7
local integer Y_9
local integer Z49
if(GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER and GetIssuedOrderId()!=$D0222)or GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER or GetTriggerEventId()==EVENT_UNIT_DEATH then
call SetUnitInvulnerable(WI7,false)
call UnitRemoveAbility(WI7,1093678162)
call NM7(OB7)
call OZ7(t)
else
set BC7=(OM7(OB7,"Level"))
set Y_9=(OM7(OB7,"Counter"))+1
call NP7(OB7,"Counter",(Y_9))
set Z49=3*BC7
if BC7==4 then
set Z49=Z49+1
endif
if Y_9>Z49 or KF7(GetUnitX(WI7),GetUnitY(WI7),(ON7(OB7,"x")),(ON7(OB7,"y")))>125 then
call SetUnitInvulnerable(WI7,false)
call UnitRemoveAbility(WI7,1093678162)
call NM7(OB7)
call OZ7(t)
endif
endif
set t=null
set WI7=null
return false
endfunction
function Z79 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call SetUnitInvulnerable(WI7,true)
call XF7(WI7,1093678162)
call NT7(OB7,"Hero",WI7)
call NP7(OB7,"Level",GetUnitAbilityLevel(WI7,1093686082))
call NP7(OB7,"Counter",0)
call NQ7(OB7,"x",((GetUnitX(WI7))*1.))
call NQ7(OB7,"y",((GetUnitY(WI7))*1.))
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_ISSUED_ORDER)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function Y29))
call O37(WI7,"4266",5.9)
set t=null
set WI7=null
endfunction
function Z89 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit WX7=(LoadUnitHandle(L7,(I97),($E)))
call IssueImmediateOrderById(WX7,$D0224)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set WX7=null
return false
endfunction
function Z99 takes nothing returns nothing
local unit WX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call SaveUnitHandle(L7,(I97),($E),(WX7))
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function Z89))
set t=null
set WX7=null
endfunction
function ZD9 takes nothing returns boolean
if GetIssuedOrderId()==852514and IsUnitIllusion(GetTriggerUnit())==false and OT7(GetTriggerUnit(),"4266")==false then
call Z79()
elseif GetIssuedOrderId()==852515then
call Z99()
endif
return false
endfunction
function MI8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function ZD9))
set t=null
endfunction
function ZE9 takes unit p5,unit m5,integer V77,integer ZF9 returns nothing
if ZF9==1 then
call BA7(p5,m5,.75+.75*V77)
call B67(p5,m5,20,V77*100+50)
else
call BA7(p5,m5,1.+1.*V77)
call B67(p5,m5,20,V77*125+125)
endif
endfunction
function ZG9 takes unit p5,unit m5 returns nothing
local unit oA=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
call UnitAddAbility(oA,1093686086)
call IssueTargetOrderById(oA,$D007F,m5)
set oA=null
endfunction
function ZH9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer V77=(LoadInteger(L7,(OB7),(5)))
local integer ZF9=(LoadInteger(L7,(OB7),($98)))
local unit p5=(LoadUnitHandle(L7,(OB7),(2)))
local integer ZI9=(LoadInteger(L7,(OB7),(30)))
local unit m5=TQ7(ZI9)
local lightning i7=(LoadLightningHandle(L7,(OB7),($C4)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call DestroyLightning(i7)
call TP7(ZI9)
call NM7(OB7)
call OZ7(t)
else
call MoveLightning(i7,false,GetUnitX(p5),GetUnitY(p5),GetUnitX(m5),GetUnitY(m5))
if KF7(GetUnitX(p5),GetUnitY(p5),GetUnitX(m5),GetUnitY(m5))>450 then
call DestroyLightning(i7)
call TP7(ZI9)
call NM7(OB7)
call OZ7(t)
call ZE9(p5,m5,V77,ZF9)
endif
endif
set t=null
set p5=null
set m5=null
set i7=null
return false
endfunction
function ZJ9 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local lightning i7=AddLightning("HWPB",false,GetUnitX(BO4),GetUnitY(BO4),GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()))
call SetLightningColor(i7,0,.7,1,1)
call SaveLightningHandle(L7,(OB7),($C4),(i7))
call SaveUnitHandle(L7,(OB7),(2),(BO4))
call SaveInteger(L7,(OB7),(30),(TS7(GetEnumUnit())))
call SaveInteger(L7,(OB7),(5),(BJ4))
call SaveInteger(L7,(OB7),($98),(BK4))
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerRegisterUnitEvent(t,GetEnumUnit(),EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,BO4,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function ZH9))
call B67(GetTriggerUnit(),GetEnumUnit(),1,BM4)
call ZG9(GetTriggerUnit(),GetEnumUnit())
set t=null
set i7=null
endfunction
function ZK9 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local unit oA=CreateUnit(GetOwningPlayer(WI7),1697656917,x,y,0)
local group g=WS7()
local integer V77=GetUnitAbilityLevel(WI7,1093686072)
local real ZM9=6
local integer ZN9=1
if V77==0 then
set V77=GetUnitAbilityLevel(WI7,1093751120)
set ZM9=8
set ZN9=2
endif
call RemoveLocation(l)
call SetUnitAnimation(oA,"channel")
call ZR7(oA,ZM9)
set BO4=oA
set BN4=ZM9
set BM4=V77*50+50
set BJ4=V77
set BK4=ZN9
set IN4=WI7
call GroupEnumUnitsInRange(g,x,y,425,Condition(function AN7))
call ForGroup(g,function ZJ9)
call WR7(g)
set g=null
set oA=null
set WI7=null
set l=null
endfunction
function ZO9 takes nothing returns boolean
if GetSpellAbilityId()==1093686072 or GetSpellAbilityId()==1093751120 then
call ZK9()
endif
return false
endfunction
function MJ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZO9))
set t=null
endfunction
function ZP9 takes nothing returns boolean
return GetSpellAbilityId()==1093808453
endfunction
function ZQ9 takes nothing returns nothing
call SetUnitX(GetEnumUnit(),VA4)
call SetUnitY(GetEnumUnit(),VB4)
endfunction
function ZR9 takes nothing returns nothing
local destructable array dx
local integer KZ9
local integer ZS9
local fogmodifier ZT9
local unit BB7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local location ZU9
local real x
local real y
local group g=WS7()
if IH7==null then
set ZU9=GetSpellTargetLoc()
else
set ZU9=GetUnitLoc(IH7)
endif
set x=GetLocationX(ZU9)
set y=GetLocationY(ZU9)
set VA4=x
set VB4=y
if IsUnitAlly(BB7,GetOwningPlayer(IH7)) or WQ7(GetSpellTargetUnit())==false then
set IN4=BB7
call GroupEnumUnitsInRange(g,x,y,$96,Condition(function AJ7))
call ZJ7(CreateFogModifierRadiusLocBJ(true,GetOwningPlayer(BB7),FOG_OF_WAR_VISIBLE,ZU9,1000.),2+1*GetUnitAbilityLevel(BB7,1093808453))
set KZ9=1
set ZS9=8
loop
exitwhen KZ9>ZS9
call ZN7(CreateDestructableLoc(1110454325,KT7(ZU9,150.,(I2R(KZ9)*45.)),GetRandomReal(0,360),1,0),2+1*GetUnitAbilityLevel(BB7,1093808453))
call NY7(GetHandleId(BB7),"AI|SproutTree"+I2S(KZ9),bj_lastCreatedDestructable)
set KZ9=KZ9+1
endloop
endif
call RemoveLocation(ZU9)
call ForGroup(g,function ZQ9)
call WR7(g)
set ZT9=null
set BB7=null
set IH7=null
set ZU9=null
set g=null
endfunction
function ZV9 takes nothing returns nothing
if GetSpellAbilityId()==1093808453 and IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and(OO7(GetHandleId(GetOwningPlayer(GetSpellTargetUnit())),"DisableHelp"))then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652600))
endif
endfunction
function FE8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZP9))
call TriggerAddAction(t,function ZR9)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddAction(t,function ZV9)
set t=null
endfunction
function ZW9 takes nothing returns boolean
return GetSpellAbilityId()==1093677391
endfunction
function ZX9 takes nothing returns nothing
local location Mk=GetSpellTargetLoc()
local real x=GetLocationX(Mk)
local real y=GetLocationY(Mk)
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(GetTriggerUnit()))then
call PingMinimapEx(x,y,3,$FF,$FF,$FF,false)
endif
call DestroyEffect(AddSpecialEffect("war3mapImported\\FurionTeleportTarget.mdx",x,y))
call DestroyEffect(AddSpecialEffect("war3mapImported\\FurionTeleportTarget.mdx",GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call RemoveLocation(Mk)
set Mk=null
endfunction
function FF8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_CHANNEL)
call TriggerAddCondition(t,Condition(function ZW9))
call TriggerAddAction(t,function ZX9)
set t=null
endfunction
function ZY9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V07=GetHandleId(t)
local integer KP7=(LoadInteger(L7,(V07),(5)))
local unit ZZ9=(LoadUnitHandle(L7,(V07),(17)))
local integer ZA9=WJ7(ZZ9)
local real ZX7=GetUnitState(ZZ9,UNIT_STATE_LIFE)
local real ZB9=GetUnitState(ZZ9,UNIT_STATE_MAX_LIFE)
local real ZC9
if ZX7/ZB9>.4 then
set ZC9=I2R(KP7)/4*.2*ZA9+10
else
set ZC9=KP7*0.2*ZA9+10
endif
set ZC9=ZC9/8.
if GetTriggerEvalCount(t)>16*8. then
call DestroyEffect((LoadEffectHandle(L7,(V07),(31))))
call UnitRemoveAbility(ZZ9,1093685583)
call FlushChildHashtable(L7,(V07))
call OZ7(t)
else
call SetUnitState(ZZ9,UNIT_STATE_LIFE,ZX7+ZC9)
endif
set ZZ9=null
set t=null
return false
endfunction
function Z39 takes nothing returns nothing
local unit ZZ9=GetSpellTargetUnit()
local unit Z69=GetTriggerUnit()
local integer KP7=GetUnitAbilityLevel(Z69,1093685584)
local trigger t=CreateTrigger()
local integer V07=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1/8.,true)
call TriggerAddCondition(t,Condition(function ZY9))
call SaveInteger(L7,(V07),(5),(KP7))
call SaveUnitHandle(L7,(V07),(17),(ZZ9))
call SaveEffectHandle(L7,(V07),(31),(AddSpecialEffectTarget("InnerVitality.mdx",ZZ9,"chest")))
call XF7(ZZ9,1093685583)
call SetUnitAbilityLevel(ZZ9,1093685583,KP7)
set ZZ9=null
set Z69=null
set t=null
endfunction
function ZL9 takes nothing returns boolean
if GetSpellAbilityId()==1093685584 then
call Z39()
endif
return false
endfunction
function KR8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZL9))
set t=null
endfunction
function Z19 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer UB9
local string Z09
local integer Z59
local integer B07=OM7(OB7,"TargetIndex")
local unit m5=TQ7(B07)
local unit p5=O77(OB7,"Source")
if GetTriggerEvalCount(t)>7 or XH7(m5)then
call DestroyEffect(OG7(OB7,"Effect"))
call NM7(OB7)
set UB9=GetHandleId(p5)
set Z09=I2S(GetHandleId(m5))+"NumOfSpears"
set Z59=OM7(UB9,Z09)
set Z59=Z59-1
if Z59==0 then
call NP7(UB9,Z09,0)
else
call NP7(UB9,Z09,Z59)
endif
call TP7(B07)
call OZ7(t)
else
call B67(p5,m5,16,5*GetUnitAbilityLevel(p5,1093685582))
endif
set t=null
set m5=null
set p5=null
return false
endfunction
function Z29 takes unit p5,unit m5 returns nothing
local integer OB7=GetHandleId(p5)
local integer UB9
local trigger t
local integer Z09=OM7(OB7,I2S(GetHandleId(m5))+"NumOfSpears")
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function Z19))
set UB9=GetHandleId(t)
call NT7(UB9,"Source",p5)
call NP7(UB9,"TargetIndex",TS7(m5))
call NP7(OB7,I2S(GetHandleId(m5))+"NumOfSpears",Z09+1)
call NU7(UB9,"Effect",AddSpecialEffectTarget("Abilities\\Spells\\Other\\BreathOfFire\\BreathOfFireDamage.mdl",m5,"chest"))
set t=null
endfunction
function Z_9 takes nothing returns boolean
local real d
if GetUnitAbilityLevel(GetTriggerUnit(),1110456369)>0 and GetUnitAbilityLevel(GetEventDamageSource(),1093685582)>0 and O77(GetHandleId(GetTriggeringTrigger()),"Source")==GetEventDamageSource()then
call SetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE,YK7(GetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE)-15,1))
call UnitRemoveAbility(GetTriggerUnit(),1110456369)
call Z29(GetEventDamageSource(),GetTriggerUnit())
call DisableTrigger(GetTriggeringTrigger())
call NM7(GetHandleId(GetTriggeringTrigger()))
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function A49 takes nothing returns nothing
local trigger t
local unit m5
local unit p5
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
set m5=GetSpellTargetUnit()
set p5=GetTriggerUnit()
else
set m5=GetTriggerUnit()
set p5=GetAttacker()
endif
if IsUnitIllusion(p5)==false then
set t=CreateTrigger()
call NT7(GetHandleId(t),"Source",p5)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function Z_9))
endif
set t=null
set m5=null
set p5=null
endfunction
function A79 takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if GetUnitAbilityLevel(GetAttacker(),1093685582)>0 and(OO7(GetHandleId(GetTriggeringTrigger()),"OrbOn")or(GZ[304+GetPlayerId(GetOwningPlayer(GetAttacker()))]))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==O77(GetHandleId(GetTriggeringTrigger()),"Hero")then
call A49()
endif
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if(GetIssuedOrderId()==$D011F)then
call NS7(GetHandleId(GetTriggeringTrigger()),"OrbOn",true)
elseif(GetIssuedOrderId()==$D0120)then
call NS7(GetHandleId(GetTriggeringTrigger()),"OrbOn",false)
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093685582 then
call A49()
endif
return false
endfunction
function A89 takes unit WI7,boolean UA9 returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function A79))
call NT7(GetHandleId(t),"Hero",WI7)
if UA9 then
set aj[GetPlayerId(GetOwningPlayer(WI7))]=t
endif
set t=null
endfunction
function A99 takes nothing returns boolean
if GetLearnedSkill()==1093685582 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093685582)==1 then
call A89(GetTriggerUnit(),false)
endif
return false
endfunction
function KS8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function A99))
set t=null
endfunction
function tQ takes nothing returns boolean
local integer OB7=GetHandleId(GetTriggeringTrigger())
local unit WI7=O77(OB7,"Hero")
local real AD9=GetUnitState(WI7,UNIT_STATE_LIFE)
local real MaxHealth=GetUnitState(WI7,UNIT_STATE_MAX_LIFE)
local integer AE9
local integer AF9
local integer V77=GetUnitAbilityLevel(WI7,1093685585)
local boolean AG9=OO7(OB7,"HasFX")
if IsUnitType(WI7,UNIT_TYPE_HERO)and V77>0 then
set AE9=R2I(100*GetUnitState(WI7,UNIT_STATE_LIFE)/GetUnitState(WI7,UNIT_STATE_MAX_LIFE))
set AF9=YH7(YG7(R2I(100-AE9)/9,$A),1)
if XH7(WI7)==false then
if(GetUnitAbilityLevel(WI7,1112433775)>0)then
set AE9=100
set AF9=0
endif
call G81(WI7,(1+V77)*AF9)
call C97(WI7,(16+V77*3)*AF9)
if AE9<40 then
if AG9==false then
call NS7(OB7,"HasFX",true)
call NU7(OB7,"FX1",AddSpecialEffectTarget("Abilities\\Spells\\Orc\\TrollBerserk\\HeadhunterWEAPONSLeft.mdl",WI7,"left weapon"))
call NU7(OB7,"FX2",AddSpecialEffectTarget("effects\\HeadhunterWEAPONSRight_NoSound.mdx",WI7,"right weapon"))
endif
else
if AG9 then
call NS7(OB7,"HasFX",false)
call DestroyEffect(OG7(OB7,"FX1"))
call DestroyEffect(OG7(OB7,"FX2"))
endif
endif
endif
endif
set WI7=null
return false
endfunction
function AH9 takes unit WI7,boolean UA9 returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function tQ))
call NT7(GetHandleId(t),"Hero",WI7)
call NS7(GetHandleId(t),"HasFX",false)
if UA9 then
set nj[GetPlayerId(GetOwningPlayer(WI7))]=t
endif
set t=null
endfunction
function AI9 takes nothing returns boolean
if GetLearnedSkill()==1093685585 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093685585)==1 then
call AH9(GetTriggerUnit(),false)
endif
return false
endfunction
function KT8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function AI9))
set C9I[1]='A2TA'
set C9I[2]='A2TB'
set C9I[3]='A2TC'
set C9I[4]='A2TD'
set C9I[5]='A2TE'
set C9I[6]='A2TF'
set C9I[7]='A2TG'
set C9I[8]='A2TH'
set C9I[9]='A2TI'
set C9I[$A]='A2TJ'
set C9I[$B]='A2TK'
set C9I[$C]='A2TL'
set C9I[$D]='A2TM'
set C9I[$E]='A2TN'
set C9I[$F]='A2TO'
set C9I[16]='A2TP'
set C9I[17]='A2TQ'
set C9I[18]='A2TR'
set C9I[19]='A2TS'
set C9I[20]='A2TT'
set C9I[21]='A2TU'
set C9I[22]='A2TV'
set C9I[23]='A2TW'
set C9I[24]='A2TX'
call yS(C9I[1])
call yS(C9I[2])
call yS(C9I[3])
call yS(C9I[4])
call yS(C9I[5])
call yS(C9I[6])
call yS(C9I[7])
call yS(C9I[8])
call yS(C9I[9])
call yS(C9I[$A])
call yS(C9I[$B])
call yS(C9I[$C])
call yS(C9I[$D])
call yS(C9I[$E])
call yS(C9I[$F])
call yS(C9I[16])
call yS(C9I[17])
call yS(C9I[18])
call yS(C9I[19])
call yS(C9I[20])
call yS(C9I[21])
call yS(C9I[22])
call yS(C9I[23])
call yS(C9I[24])
set t=null
endfunction
function AJ9 takes nothing returns nothing
local unit p5=GetEnumUnit()
local real l4=KF7(GetUnitX(p5),GetUnitY(p5),VX4,VY4)
if l4<VW4 and IsUnitVisible(p5,GetOwningPlayer(VZ4)) then
set VV4=GetEnumUnit()
set VW4=l4
endif
set p5=null
endfunction
function AK9 takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer OB7=GetUnitAbilityLevel(GetTriggerUnit(),1093752632)
local integer SV9=1093678936
local group g
local unit q5
if OB7==0 then
set OB7=GetUnitAbilityLevel(GetTriggerUnit(),1093752633)
set SV9=1093681484
endif
if m5==null then
set VV4=null
set VZ4=p5
set VW4=$F423F
set VX4=GetSpellTargetX()
set VY4=GetSpellTargetY()
set IN4=p5
set g=WS7()
call GroupEnumUnitsInRange(g,0,0,9999,Condition(function AJ7))
call ForGroup(g,function AJ9)
call WR7(g)
set m5=VV4
set g=null
endif
if m5!=null then
set q5=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(p5),GetUnitY(p5),0)
call XF7(q5,SV9)
call SetUnitAbilityLevel(q5,SV9,OB7)
call IssueTargetOrderById(q5,$D0097,m5)
set q5=null
endif
set p5=null
set m5=null
endfunction
function AM9 takes nothing returns boolean
if GetSpellAbilityId()==1093752632 or GetSpellAbilityId()==1093752633 then
call AK9()
endif
return false
endfunction
function FG8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AM9))
set t=null
endfunction
function AN9 takes unit ZX7,unit IH7 returns nothing
local unit BB7=CreateUnit(GetOwningPlayer(IH7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
local integer BC7=GetUnitAbilityLevel(ZX7,1093685586)
local real V29=.35
local real AO9=.35
if BC7==0 then
set BC7=GetUnitAbilityLevel(ZX7,1093747251)
set AO9=.65
endif
if TX7(GetOwningPlayer(IH7))then
set BB7=CreateUnit(GetOwningPlayer(IH7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
else
set BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
endif
call XF7(BB7,1093685589)
call SetUnitAbilityLevel(BB7,1093685589,BC7)
call IssueTargetOrderById(BB7,$D006B,IH7)
call B67(ZX7,ZX7,1,GetUnitState(ZX7,UNIT_STATE_LIFE)*V29)
call B67(ZX7,IH7,1,GetUnitState(IH7,UNIT_STATE_LIFE)*AO9)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",ZX7,"chest"))
call DestroyEffect(AddSpecialEffectTarget("effects\\LifeBreak.mdx",IH7,"chest"))
set ZX7=null
set IH7=null
set BB7=null
endfunction
function AP9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local real TP9=(LoadReal(L7,(I97),(23)))
local real TQ9=(LoadReal(L7,(I97),(24)))
local real x
local real y
local real AQ9=GetUnitX(ZX7)
local real AR9=GetUnitY(ZX7)
local real Y_7=GetUnitX(IH7)
local real Z47=GetUnitY(IH7)
local real TA9=Atan2(Z47-AR9,Y_7-AQ9)
if GetUnitTypeId(ZX7)==1160786520 then
call SetUnitAnimationByIndex(ZX7,1)
else
call SetUnitAnimationByIndex(ZX7,17)
endif
if GetTriggerEventId()==EVENT_WIDGET_DEATH or KF7(TP9,TQ9,Y_7,Z47)>$578 or YM8(ZX7)then
call SetUnitPathing(ZX7,true)
call DestroyEffect((LoadEffectHandle(L7,(I97),($AF))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
call UnitRemoveAbility(ZX7,1093686100)
call SetUnitTimeScale(ZX7,1.)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif KF7(AQ9,AR9,Y_7,Z47)<125 then
call SetUnitPathing(ZX7,true)
call DestroyEffect((LoadEffectHandle(L7,(I97),($AF))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
call UnitRemoveAbility(ZX7,1093686100)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call SetUnitTimeScale(ZX7,1.)
if IH7!=null and XH7(IH7)==false then
call IssueTargetOrderById(ZX7,$D000F,IH7)
call AN9(ZX7,IH7)
endif
else
call SetUnitPathing(ZX7,false)
set TP9=Y_7
set TQ9=Z47
call SaveReal(L7,(I97),(23),((TP9)*1.))
call SaveReal(L7,(I97),(24),((TQ9)*1.))
set x=AQ9+$F*Cos(TA9)
set y=AR9+$F*Sin(TA9)
call SetUnitPosition(ZX7,x,y)
call SetUnitFacing(ZX7,TA9*bj_RADTODEG)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function AS9 takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.015,true)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerAddCondition(t,Condition(function AP9))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveReal(L7,(I97),(23),((GetUnitX(IH7))*1.))
call SaveReal(L7,(I97),(24),((GetUnitY(IH7))*1.))
call SaveEffectHandle(L7,(I97),($AF),(AddSpecialEffectTarget("war3mapImported\\LifeBreakCharge.mdx",ZX7,"hand right alternate")))
call SaveEffectHandle(L7,(I97),($B0),(AddSpecialEffectTarget("war3mapImported\\LifeBreakCharge.mdx",ZX7,"hand left alternate")))
call SetUnitPathing(ZX7,false)
call XF7(ZX7,1093686100)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093686100,false)
call SetUnitAnimationByIndex(ZX7,17)
call SetUnitTimeScale(ZX7,3.)
set ZX7=null
set IH7=null
set t=null
endfunction
function AT9 takes nothing returns boolean
if(GetSpellAbilityId()==1093685586 or GetSpellAbilityId()==1093747251)and WQ7(GetSpellTargetUnit())==false then
call AS9()
endif
return false
endfunction
function KU8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AT9))
set t=null
call X_7(1093685589)
endfunction
function AU9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local integer BC7=(LoadInteger(L7,(I97),(5)))
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetUnitAbilityLevel(IH7,LoadInteger(L7,I97,0))==0 or LoadReal(L7,I97,0)<TimerGetElapsed(W)then
if GetHandleId(IH7)<1 then
call FlushChildHashtable(L7,LoadInteger(L7,I97,1))
else
call RemoveSavedHandle(L7,GetHandleId(IH7),'A0O8')
call UnitRemoveAbility(IH7,LoadInteger(L7,I97,0))
endif
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
call B67(ZX7,IH7,1,(BC7*4+8)/2)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function AV9 takes nothing returns nothing
local trigger t
local integer I97
local integer BC7=FN
local unit ZX7=fN
local unit IH7=GetEnumUnit()
local integer OB7=GetHandleId(IH7)
local integer id
if BC7==1 then
set id='A1G5'
elseif BC7==2 then
set id='A1G3'
elseif BC7==3 then
set id='A1G6'
elseif BC7==4 then
set id='A1G4'
endif
if HaveSavedHandle(L7,OB7,'A0O8')then
set t=LoadTriggerHandle(L7,OB7,'A0O8')
set I97=GetHandleId(t)
if id!=LoadInteger(L7,I97,0)then
call UnitRemoveAbility(IH7,LoadInteger(L7,I97,0))
call XF7(IH7,id)
call SaveInteger(L7,(I97),(5),(BC7))
call SaveInteger(L7,(I97),0,id)
endif
else
set t=CreateTrigger()
set I97=GetHandleId(t)
call SaveTriggerHandle(L7,OB7,'A0O8',t)
call XF7(IH7,id)
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\BreathOfFire\\BreathOfFireDamage.mdl",IH7,"chest")))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveInteger(L7,(I97),(5),(BC7))
call SaveInteger(L7,(I97),0,id)
call SaveInteger(L7,I97,1,OB7)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function AU9))
endif
call SaveReal(L7,I97,0,TimerGetElapsed(W)+5.)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl",GetUnitX(IH7),GetUnitY(IH7)))
set t=null
set ZX7=null
set IH7=null
endfunction
function AW9 takes nothing returns boolean
return IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and XH7(GetFilterUnit())==false and fWA(GetFilterUnit())==false
endfunction
function AX9 takes unit ZX7,unit WI7 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local integer BC7=GetUnitAbilityLevel(ZX7,'A0O8')
local real x=GetUnitX(WI7)
local real y=GetUnitY(WI7)
local group g=WS7()
set FN=BC7
set fN=ZX7
set IN4=ZX7
call GroupEnumUnitsInRange(g,x,y,325,Condition(function AW9))
call ForGroup(g,function AV9)
call WR7(g)
set t=null
endfunction
function AY9 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetUnitAbilityLevel(GetTriggerUnit(),'B0HK')>0 and GetUnitAbilityLevel(GetEventDamageSource(),'A2XO')>0 and(LoadUnitHandle(L7,(GetHandleId(GetTriggeringTrigger())),(2)))==GetEventDamageSource()then
call UnitRemoveAbility(GetTriggerUnit(),'B0HK')
call FlushChildHashtable(L7,(GetHandleId(GetTriggeringTrigger())))
call OZ7(GetTriggeringTrigger())
call AX9(GetEventDamageSource(),GetTriggerUnit())
endif
else
call FlushChildHashtable(L7,(GetHandleId(GetTriggeringTrigger())))
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function AZ9 takes unit u,unit WI7 returns nothing
local trigger t=CreateTrigger()
call SaveUnitHandle(L7,(GetHandleId(t)),(2),(u))
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function AY9))
call TriggerRegisterTimerEvent(t,4,false)
set t=null
endfunction
function AA9 takes nothing returns boolean
local unit IH7
local trigger t
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
set IH7=GetAttacker()
if GetUnitAbilityLevel(IH7,'A2XO')>0 and(LoadBoolean(L7,(GetHandleId(GetTriggeringTrigger())),(263)))and IH7==(LoadUnitHandle(L7,(GetHandleId(GetTriggeringTrigger())),($E)))then
if GetUnitCurrentOrder(IH7)==0 then
call IssueTargetOrderById(IH7,$D000F,GetTriggerUnit())
endif
call AZ9(IH7,GetTriggerUnit())
endif
set IH7=null
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if(GetIssuedOrderId()==$D011F)then
call SaveBoolean(L7,(GetHandleId(GetTriggeringTrigger())),(263),(true))
elseif(GetIssuedOrderId()==$D0120)then
call SaveBoolean(L7,(GetHandleId(GetTriggeringTrigger())),(263),(false))
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()=='A2XO' then
call AZ9(GetTriggerUnit(),GetSpellTargetUnit())
endif
return false
endfunction
function AB9 takes nothing returns nothing
local trigger t
if GetUnitAbilityLevel(GetTriggerUnit(),'A0O8')==1 then
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_ISSUED_ORDER)
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function AA9))
call SaveUnitHandle(L7,GetHandleId(t),$E,GetTriggerUnit())
set t=null
endif
if GetUnitAbilityLevel(GetTriggerUnit(),'A2XO')==0 then
call XF7(GetTriggerUnit(),'A2XO')
endif
call SetUnitAbilityLevel(GetTriggerUnit(),'A2XO',GetUnitAbilityLevel(GetTriggerUnit(),'A0O8'))
endfunction
function AC9 takes nothing returns boolean
if GetLearnedSkill()=='A0O8' and IsUnitIllusion(GetTriggerUnit())==false then
call AB9()
endif
return false
endfunction
function EH8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function AC9))
set t=null
endfunction
function A39 takes real x1,real y1,real x2,real y2,real x3,real y3,real x,real y returns boolean
local real A69=(y-y1)*(x2-x1)-(x-x1)*(y2-y1)
local real AL9=(y-y3)*(x1-x3)-(x-x3)*(y1-y3)
local real A19=(y-y2)*(x3-x2)-(x-x2)*(y3-y2)
return(A69*AL9>0)and(A19*AL9>0)
endfunction
function A09 takes nothing returns boolean
local real A59=IJ4
local real A29=IK4
local real A_9=IM4
local real B49=Zl
local real B79=vL
local real B89=eL
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and A39(A59,A29,A_9,B49,B79,B89,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))
endfunction
function B99 takes real BD9,real A69,real AL9 returns nothing
local real A19=550
local real BE9=$C8
local real BF9=$FA
local real BG9=Asin((BF9-BE9)/ A19)
local real x=BE9/ Sin(BG9)
local real y=(A19+BF9+x)*Tan(BG9)
local real A59=A69+x*Cos((BD9-$B4)*bj_DEGTORAD)
local real A29=AL9+x*Sin((BD9-$B4)*bj_DEGTORAD)
local real A_9=(A69+(A19+BF9)*Cos(BD9*bj_DEGTORAD))+y*Cos((BD9-90)*bj_DEGTORAD)
local real B49=(AL9+(A19+BF9)*Sin(BD9*bj_DEGTORAD))+y*Sin((BD9-90)*bj_DEGTORAD)
local real B79=(A69+(A19+BF9)*Cos(BD9*bj_DEGTORAD))+y*Cos((BD9+90)*bj_DEGTORAD)
local real B89=(AL9+(A19+BF9)*Sin(BD9*bj_DEGTORAD))+y*Sin((BD9+90)*bj_DEGTORAD)
set IJ4=A59
set IK4=A29
set IM4=A_9
set Zl=B49
set vL=B79
set eL=B89
endfunction
function BH9 takes nothing returns nothing
local unit BB7=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
call XF7(BB7,1093685057)
call IssueTargetOrderById(BB7,$D0102,GetEnumUnit())
set BB7=null
endfunction
function BI9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local player p=O97(OB7,"p")
local unit WI7=O77(OB7,"Hero")
local real x=ON7(OB7,"x")
local real y=ON7(OB7,"y")
local real Y5=ON7(OB7,"TargetX")
local real Z5=ON7(OB7,"TargetY")
local integer V77=OM7(OB7,"Level")
local unit BB7
if GetTriggerEvalCount(t)>1 then
call SetUnitAnimation(WI7,"stand")
call NM7(OB7)
call OZ7(t)
else
call SetUnitAnimation(WI7,"spell")
set BB7=CreateUnit(p,1697656901,x,y,0)
call XF7(BB7,1093685059)
call SetUnitAbilityLevel(BB7,1093685059,V77)
call IssuePointOrderById(BB7,$D0250,Y5,Z5)
endif
set t=null
set p=null
set WI7=null
set BB7=null
return false
endfunction
function BJ9 takes unit u,player p,integer V77,location l,real x,real y returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call NZ7(OB7,"p",p)
call NQ7(OB7,"x",(x)*1.)
call NQ7(OB7,"y",(y)*1.)
call NQ7(OB7,"TargetX",GetLocationX(l)*1.)
call NQ7(OB7,"TargetY",GetLocationY(l)*1.)
call NP7(OB7,"Level",V77)
call NT7(OB7,"Hero",u)
call TriggerRegisterTimerEvent(t,.3,true)
call TriggerAddCondition(t,Condition(function BI9))
set t=null
endfunction
function BK9 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local integer V77=GetUnitAbilityLevel(WI7,1093685047)
local real x=GetUnitX(WI7)
local real y=GetUnitY(WI7)
local location l
local unit BB7
local group g=WS7()
if GetSpellTargetUnit()==null then
set l=GetSpellTargetLoc()
else
set l=GetUnitLoc(GetSpellTargetUnit())
endif
call B99(bj_RADTODEG*Atan2(GetLocationY(l)-y,GetLocationX(l)-x),x,y)
call GroupEnumUnitsInRange(g,x,y,$7D0,Condition(function A09))
call ForGroup(g,function BH9)
call WR7(g)
set BB7=CreateUnit(GetOwningPlayer(WI7),1697656901,x,y,0)
call XF7(BB7,1093685058)
call SetUnitAbilityLevel(BB7,1093685058,V77)
call IssuePointOrderById(BB7,$D0264,GetLocationX(l),GetLocationY(l))
call BJ9(WI7,GetOwningPlayer(WI7),V77,l,x+50*Cos(Atan2(GetLocationY(l)-y,GetLocationX(l)-x)),y+50*Sin(Atan2(GetLocationY(l)-y,GetLocationX(l)-x)))
call RemoveLocation(l)
set WI7=null
set l=null
set g=null
set BB7=null
endfunction
function BM9 takes nothing returns boolean
if GetSpellAbilityId()==1093685047 then
call BK9()
endif
return false
endfunction
function EG8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BM9))
call X_7(1093685058)
call X_7(1093685059)
call X_7(1093685057)
set t=null
endfunction
function BN9 takes nothing returns nothing
local unit ZX7=FG7
local unit IH7=GetEnumUnit()
if IsUnitInGroup(IH7,FF7)==false and LWA(IH7)==false then
call GroupAddUnit(FF7,IH7)
call BA7(ZX7,IH7,FH7)
call B67(ZX7,IH7,1,50)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl",GetUnitX(IH7),GetUnitY(IH7)))
endif
set ZX7=null
set IH7=null
endfunction
function BP9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local real x0=(LoadReal(L7,(I97),6))
local real y0=(LoadReal(L7,(I97),7))
local real a=(LoadReal(L7,(I97),$89))
local unit ZX7=(LoadUnitHandle(L7,(I97),2))
local integer WF8=GetTriggerEvalCount(t)
local real x
local real y
local group g
local integer i
local group BQ9=(LoadGroupHandle(L7,(I97),$BB))
local integer BC7=GetUnitAbilityLevel(ZX7,'A0O6')
set i=0
loop
exitwhen i>$B
set x=x0+'d'*i*Cos(a*bj_DEGTORAD)
set y=y0+'d'*i*Sin(a*bj_DEGTORAD)
if ModuloInteger(WF8,$A)==0 then
endif
set IN4=ZX7
set FG7=ZX7
set FF7=BQ9
set FH7=(.6+.4*BC7)-(WF8*.05)
set g=WS7()
call GroupEnumUnitsInRange(g,x,y,$AF,Condition(function AJ7))
call ForGroup(g,function BN9)
call WR7(g)
set i=i+1
endloop
if WF8==20*(.6+.4*BC7)then
call WR7(BQ9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
set g=null
set BQ9=null
return false
endfunction
function BR9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local real x0=(LoadReal(L7,I97,6))
local real y0=(LoadReal(L7,I97,7))
local real a=(LoadReal(L7,I97,$89))
local integer WF8=GetTriggerEvalCount(t)
local real x=x0+'d'*WF8*Cos(a*bj_DEGTORAD)
local real y=y0+'d'*WF8*Sin(a*bj_DEGTORAD)
local unit ZX7=(LoadUnitHandle(L7,I97,2))
local integer BC7=GetUnitAbilityLevel(ZX7,'A0O6')
local ubersplat ML9
local integer i
if WF8<$B then
call SaveEffectHandle(L7,I97,(609+WF8),(AddSpecialEffect("effects\\IcePath.mdx",x,y)))
set ML9=CreateUbersplat(x,y,"IPTH",$FF,$FF,$FF,$FF,false,false)
call SetUbersplatRenderAlways(ML9,true)
call SaveUbersplatHandle(L7,I97,(760+WF8),(ML9))
call SaveReal(L7,I97,760+WF8,x)
call SaveReal(L7,I97,960+WF8,y)
endif
if WF8==$B then
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function BP9))
call SaveReal(L7,I97,6,((x0)*1.))
call SaveReal(L7,I97,7,((y0)*1.))
call SaveReal(L7,I97,$89,((a)*1.))
call SaveUnitHandle(L7,I97,2,(ZX7))
call SaveGroupHandle(L7,I97,$BB,(WS7()))
call TriggerEvaluate(t)
elseif WF8>=(.4+.6+.4*BC7)/.05 then
set i=0
loop
exitwhen i==$B
call DestroyEffect((LoadEffectHandle(L7,I97,(609+i))))
call DestroyUbersplat((LoadUbersplatHandle(L7,I97,(760+i))))
set i=i+1
endloop
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
set i=0
loop
call SetUbersplatRenderAlways(LoadUbersplatHandle(L7,I97,760+i),IsVisibleToPlayer(LoadReal(L7,I97,760+i),LoadReal(L7,I97,960+i),GetLocalPlayer()))
set i=i+1
exitwhen i==$B
endloop
endif
set t=null
set ZX7=null
return false
endfunction
function EI8 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local real x0=GetUnitX(ZX7)
local real y0=GetUnitY(ZX7)
local real a=J77(x0,y0,GetSpellTargetX(),GetSpellTargetY())
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function BR9))
call SaveReal(L7,(I97),6,((x0)*1.))
call SaveReal(L7,(I97),7,((y0)*1.))
call SaveReal(L7,(I97),$89,((a)*1.))
call SaveUnitHandle(L7,(I97),2,(ZX7))
call TriggerEvaluate(t)
set t=null
set ZX7=null
endfunction
function BU9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local integer V77=OM7(OB7,"Level")
local real a=ON7(OB7,"a")
local real x=ON7(OB7,"x")
local real y=ON7(OB7,"y")
local integer id=GetPlayerId(GetOwningPlayer(p5))
local integer U38=GetTriggerEvalCount(t)
local real BV9=x+$96*U38*Cos(a)
local real BW9=y+$96*U38*Sin(a)
local integer BX9=8
if GetUnitAbilityLevel(p5,1093685045)==0 then
set BX9=13
endif
if GetPlayerController(GetOwningPlayer(RW4[id]))==MAP_CONTROL_COMPUTER then
call UnitAddAbility(RW4[GetPlayerId(GetOwningPlayer(p5))],1093685061)
call SetUnitAbilityLevel(RW4[GetPlayerId(GetOwningPlayer(p5))],1093685061,V77)
endif
call IssuePointOrderById(RW4[id],$D0208,BV9,BW9)
if U38==(BX9)then
call NM7(OB7)
call OZ7(t)
call SetUnitAnimation(p5,"stand")
endif
set t=null
set p5=null
return false
endfunction
function BY9 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=Atan2(y-GetUnitY(p5),x-GetUnitX(p5))
local integer V77=GetUnitAbilityLevel(p5,1093685045)
local integer o6=1093685061
if V77==0 then
set V77=GetUnitAbilityLevel(p5,1093747249)
set o6=1093747250
endif
call RemoveLocation(l)
call SetUnitAnimation(p5,"spell")
set RW4[GetPlayerId(GetOwningPlayer(p5))]=CreateUnit(GetOwningPlayer(p5),1697656901,x,y,0)
call XF7(RW4[GetPlayerId(GetOwningPlayer(p5))],o6)
call SetUnitAbilityLevel(RW4[GetPlayerId(GetOwningPlayer(p5))],o6,V77)
call NP7(OB7,"Level",V77)
call NQ7(OB7,"x",(GetUnitX(p5))*1.)
call NQ7(OB7,"y",(GetUnitY(p5))*1.)
call NQ7(OB7,"a",(a)*1.)
call NT7(OB7,"Source",p5)
if o6==1093685061 then
call TriggerRegisterTimerEvent(t,.1,true)
else
call TriggerRegisterTimerEvent(t,.05,true)
endif
call TriggerAddCondition(t,Condition(function BU9))
set t=null
set p5=null
set l=null
endfunction
function BZ9 takes nothing returns boolean
if GetSpellAbilityId()==1093685045 or GetSpellAbilityId()==1093747249 then
call BY9()
endif
return false
endfunction
function EJ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BZ9))
call X_7(1093685061)
set t=null
endfunction
function BA9 takes nothing returns boolean
return GetUnitTypeId(GetSummonedUnit())==1865429059 or GetUnitTypeId(GetSummonedUnit())==1865429319 or GetUnitTypeId(GetSummonedUnit())==1865429320 or GetUnitTypeId(GetSummonedUnit())==1865429321
endfunction
function BB9 takes nothing returns nothing
call SetUnitAbilityLevelSwapped(1093678392,GetSummonedUnit(),GetUnitAbilityLevelSwapped(1093678135,GetSummoningUnit()))
endfunction
function FH8 takes nothing returns nothing
set dT=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dT,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(dT,Condition(function BA9))
call TriggerAddAction(dT,function BB9)
endfunction
function BC9 takes unit WI7,unit m5 returns nothing
local real a=GetRandomReal(0,360)
local real x=GetUnitX(m5)+50*Cos(a*bj_DEGTORAD)
local real y=GetUnitY(m5)+50*Sin(a*bj_DEGTORAD)
local real B39=GetRandomReal(200,225)
if((LoadInteger(L7,(GetHandleId((WI7))),((4256))))==1)==false then
call SetUnitPosition(WI7,x,y)
else
call SetUnitX(WI7,x)
call SetUnitY(WI7,y)
endif
call SetUnitFacing(WI7,bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(WI7),GetUnitX(m5)-GetUnitX(WI7)))
call SetUnitAnimation(WI7,"Attack")
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl",WI7,"chest"))
if TX7(GetOwningPlayer(m5))==false and IsUnitType(m5,UNIT_TYPE_ANCIENT)==false then
set B39=9999999
endif
call B67(WI7,m5,9,B39)
if((LoadInteger(L7,(GetHandleId((WI7))),((4256))))==1)==false then
call IssueTargetOrder(WI7,"attack",m5)
endif
endfunction
function B69 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local unit m5=O77(OB7,"Target")
call BC9(WI7,m5)
call NM7(OB7)
call OZ7(t)
set t=null
set WI7=null
set m5=null
return false
endfunction
function BL9 takes unit WI7 returns nothing
local group g=WS7()
set IN4=WI7
call GroupEnumUnitsInRange(g,GetUnitX(WI7),GetUnitY(WI7),450,Condition(function AP7))
set IN4=GroupPickRandomUnit(g)
if IN4!=null then
call BC9(WI7,IN4)
endif
call WR7(g)
set g=null
endfunction
function B19 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local unit BB7=O77(OB7,"Caster")
local integer Tq=OM7(OB7,"Limit")
local integer TQ=OM7(OB7,"BFLevel")
local integer Rd=OM7(OB7,"Counter")
local unit Tr
call SetUnitPosition(BB7,GetUnitX(WI7),GetUnitY(WI7))
if Rd>Tq then
call KillUnit(BB7)
call DestroyEffect(OG7(OB7,"FX"))
call NM7(OB7)
call OZ7(t)
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),1093678407,true)
call SetUnitPathing(WI7,true)
call SetUnitInvulnerable(WI7,false)
call OX7(WI7,"Omnislashing")
call SetUnitVertexColor(WI7,$FF,$FF,$FF,$FF)
else
call NP7(OB7,"Counter",Rd+1)
call BL9(WI7)
if IN4==null then
call KillUnit(BB7)
call DestroyEffect(OG7(OB7,"FX"))
call NM7(OB7)
call OZ7(t)
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),1093678407,true)
call SetUnitPathing(WI7,true)
call SetUnitInvulnerable(WI7,false)
call OX7(WI7,"Omnislashing")
call SetUnitVertexColor(WI7,$FF,$FF,$FF,$FF)
endif
endif
set t=null
set WI7=null
set Tr=null
set BB7=null
return false
endfunction
function B09 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer V77=GetUnitAbilityLevel(WI7,1093684529)
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local integer TQ=GetUnitAbilityLevel(WI7,1093678407)
local player p=GetOwningPlayer(WI7)
local integer R17=3
local unit BB7=CreateUnit(GetOwningPlayer(WI7),1865429060,GetUnitX(WI7),GetUnitY(WI7),0)
if V77==0 then
set V77=GetUnitAbilityLevel(WI7,1093747032)
if V77==1 then
set R17=6
elseif V77==2 then
set R17=9
elseif V77==3 then
set R17=$C
endif
elseif V77==2 then
set R17=6
elseif V77==3 then
set R17=9
endif
call SetPlayerAbilityAvailable(p,1093678407,false)
call SetUnitVertexColor(WI7,$FF,$FF,$FF,125)
call SetUnitPathing(WI7,false)
call SetUnitInvulnerable(WI7,true)
call OV7(WI7,"Omnislashing")
call NT7(OB7,"Hero",WI7)
call NT7(OB7,"Target",m5)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function B69))
set t=CreateTrigger()
set OB7=GetHandleId(t)
call NT7(OB7,"Hero",WI7)
call NT7(OB7,"Caster",BB7)
call NP7(OB7,"Limit",R17)
call NP7(OB7,"BFLevel",TQ)
call NP7(OB7,"Counter",2)
call NU7(OB7,"FX",AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",WI7,"weapon"))
call TriggerRegisterTimerEvent(t,.4,true)
call TriggerAddCondition(t,Condition(function B19))
set WI7=null
set m5=null
set t=null
set p=null
endfunction
function B59 takes nothing returns boolean
if GetSpellAbilityId()==1093684529 or GetSpellAbilityId()==1093747032 then
call B09()
endif
return false
endfunction
function B29 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call SetUnitAnimationByIndex(ZX7,4)
set t=null
set ZX7=null
return false
endfunction
function B_9 takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.01,false)
call TriggerAddCondition(t,Condition(function B29))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set t=null
set ZX7=null
endfunction
function C49 takes nothing returns boolean
if GetSpellAbilityId()==1093684529 or GetSpellAbilityId()==1093747032 then
call B_9()
endif
return false
endfunction
function FI8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function B59))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function C49))
set t=null
endfunction
function C79 takes integer V77 returns integer
if V77==1 then
return 1093742682
elseif V77==2 then
return 1093742897
elseif V77==3 then
return 1093742681
elseif V77==4 then
return 1093742896
endif
return 0
endfunction
function C89 takes integer V77 returns integer
if V77==1 then
return 1110456653
elseif V77==2 then
return 1110456654
elseif V77==3 then
return 1110456655
elseif V77==4 then
return 1110456652
endif
return 0
endfunction
function C99 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
local integer V77=OM7(OB7,"Level")
local real xN=ON7(OB7,"LastX")
local real xo=ON7(OB7,"LastY")
local real x=GetUnitX(m5)
local real y=GetUnitY(m5)
local real d=SquareRoot((xN-x)*(xN-x)+(xo-y)*(xo-y))
local real vB=(.0003+V77*.00005)*d*GetUnitState(m5,UNIT_STATE_MAX_MANA)
local integer QI=GetTriggerEvalCount(t)
local unit BB7
if WF7(m5) then
set vB=0
endif
if d>300 then
set vB=0
endif
if vB>1 and ModuloInteger(GetTriggerEvalCount(t),3)==0 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl",m5,"chest"))
endif
if vB>0 then
call SetUnitState(m5,UNIT_STATE_MANA,GetUnitState(m5,UNIT_STATE_MANA)-vB)
endif
call NQ7(OB7,"LastX",x)
call NQ7(OB7,"LastY",y)
if GetTriggerEventId()==EVENT_UNIT_DEATH or QI==(V77+3)*$A then
call UnitRemoveAbility(m5,C79(V77))
call UnitRemoveAbility(m5,C89(V77))
call DestroyEffect(OG7(OB7,"FX"))
call NM7(OB7)
call OZ7(t)
elseif GetUnitState(m5,UNIT_STATE_MANA)<1 then
call BA7(O77(OB7,"Source"),m5,1+.5*V77)
set BB7=null
call UnitRemoveAbility(m5,C79(V77))
call UnitRemoveAbility(m5,C89(V77))
call DestroyEffect(OG7(OB7,"FX"))
call NM7(OB7)
call OZ7(t)
endif
set t=null
set m5=null
return false
endfunction
function CD9 takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local integer V77=GetUnitAbilityLevel(p5,1093742680)
call XF7(m5,C79(V77))
call NT7(OB7,"Target",m5)
call NT7(OB7,"Source",p5)
call NP7(OB7,"Level",V77)
call NQ7(OB7,"LastX",GetUnitX(m5))
call NQ7(OB7,"LastY",GetUnitY(m5))
call NU7(OB7,"FX",AddSpecialEffectTarget("effects\\BasicWaterFlash.mdx",m5,"chest"))
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function C99))
set p5=null
set m5=null
set t=null
endfunction
function CE9 takes nothing returns boolean
if GetSpellAbilityId()==1093742680 and WQ7(GetSpellTargetUnit())==false then
call CD9()
endif
return false
endfunction
function FK8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CE9))
set t=null
endfunction
function CF9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
local real Tw=ON7(OB7,"Mana")
call SetUnitState(m5,UNIT_STATE_MANA,GetUnitState(m5,UNIT_STATE_MANA)+Tw)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl",m5,"origin"))
call NM7(OB7)
call OZ7(t)
set m5=null
set t=null
return false
endfunction
function CG9 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call NT7(OB7,"Target",m5)
call NQ7(OB7,"Mana",75*GetUnitAbilityLevel(WI7,1093742898))
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function CF9))
set t=null
set WI7=null
set m5=null
endfunction
function CH9 takes nothing returns boolean
if GetSpellAbilityId()==1093742898 then
call CG9()
endif
return false
endfunction
function FM8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CH9))
set t=null
endfunction
function CI9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit CJ9=(LoadUnitHandle(L7,(I97),(19)))
local real TA9=(LoadReal(L7,(I97),($D)))
local integer CK9=(LoadInteger(L7,(I97),(34)))
local real CM9=GetUnitX(CJ9)-50*Cos(TA9)
local real CN9=GetUnitY(CJ9)-50*Sin(TA9)
local unit BB7=CreateUnit(GetOwningPlayer(CJ9),1697656901,CM9,CN9,0)
local real x=GetUnitX(BB7)+50*Cos(TA9)
local real y=GetUnitY(BB7)+50*Sin(TA9)
local real x2=x+(300+50*CK9)*Cos(TA9)
local real y2=y+(300+50*CK9)*Sin(TA9)
call XF7(BB7,1093679159)
call SetUnitAbilityLevel(BB7,1093679159,CK9)
call IssuePointOrderById(BB7,$D0264,x,y)
call KillUnit(CJ9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set BB7=null
set t=null
return false
endfunction
function CO9 takes unit CJ9,integer CK9,real TA9 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function CI9))
call SaveUnitHandle(L7,(I97),(19),(CJ9))
call SaveReal(L7,(I97),($D),((TA9)*1.))
call SaveInteger(L7,(I97),(34),(CK9))
set t=null
endfunction
function CP9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer iX=OM7(OB7,"Count")
local integer CQ9=iX-1
local real RK=ON7(OB7,"Angle")
local unit oA=O77(OB7,"Caster")
local unit WI7=O77(OB7,"Hero")
local integer V77=OM7(OB7,"Level")
local integer CR9=2+V77*2
local boolean CS9=OO7(OB7,"SpiritCast")
local unit CT9
if GetTriggerEventId()!=EVENT_UNIT_SPELL_ENDCAST then
call NP7(OB7,"Count",iX+1)
endif
call SetUnitScale(oA,I2R(100+20*CQ9)/ 100,I2R(100+20*CQ9)/ 100,I2R(100+20*CQ9)/ 100)
if(GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and CS9==false)or(GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and GetSpellAbilityId()==1093743153)or CQ9==CR9 then
if CS9 then
set CT9=O77(OB7,"Dummy")
call ShowUnit(CT9,false)
call UnitApplyTimedLife(CT9,1112820806,1)
endif
call NM7(OB7)
call OZ7(t)
if(LoadInteger(L7,(GetHandleId(WI7)),(704)))==0 or(LoadInteger(L7,(GetHandleId(WI7)),(704)))==1093679157 then
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),1093679157,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),1093743153,false)
call UnitRemoveAbility(WI7,1093743153)
call CO9(oA,CQ9,RK)
endif
set oA=CreateUnit(GetOwningPlayer(oA),1747990093,GetUnitX(oA)+$96*(CQ9)*Cos(RK),GetUnitY(oA)+$96*(CQ9)*Sin(RK),0)
call UnitApplyTimedLife(oA,1112820806,7)
set t=null
set oA=null
set WI7=null
set CT9=null
return false
endfunction
function CU9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
call IssueImmediateOrderById(WI7,$D0004)
call NM7(OB7)
call OZ7(t)
set t=null
set WI7=null
return false
endfunction
function CV9 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real RK=Atan2(GetLocationY(l)-GetUnitY(WI7),GetLocationX(l)-GetUnitX(WI7))
local real x
local real y
local unit oA
local unit CT9
local boolean CS9=false
if GetLocationY(l)==GetUnitY(WI7)and GetLocationX(l)==GetUnitX(WI7)then
set RK=GetUnitFacing(WI7)*bj_DEGTORAD
endif
set x=GetUnitX(WI7)+$96*Cos(RK)
set y=GetUnitY(WI7)+$96*Sin(RK)
set oA=CreateUnit(GetOwningPlayer(WI7),1966092362,x,y,RK*bj_RADTODEG)
call RemoveLocation(l)
if GetUnitTypeId(WI7)==1211119192 or GetUnitTypeId(WI7)==1211119193 or GetUnitTypeId(WI7)==1211119191 then
set CS9=true
endif
call NS7(OB7,"SpiritCast",CS9)
call NT7(OB7,"Hero",WI7)
call NT7(OB7,"Caster",oA)
call NP7(OB7,"Count",1)
call NP7(OB7,"Level",GetUnitAbilityLevel(WI7,1093679157))
call NQ7(OB7,"Angle",RK)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function CP9))
if CS9 then
set CT9=CreateUnit(GetOwningPlayer(WI7),1747990106,GetUnitX(WI7),GetUnitY(WI7),RK*bj_RADTODEG)
call SetUnitX(CT9,GetUnitX(WI7))
call SetUnitY(CT9,GetUnitY(WI7))
call SetUnitAnimation(CT9,"spell")
call QueueUnitAnimation(CT9,"spell")
call QueueUnitAnimation(CT9,"spell")
call SetUnitVertexColor(CT9,$FF,$FF,$FF,75)
call NT7(OB7,"Dummy",CT9)
set t=CreateTrigger()
set OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function CU9))
call NT7(OB7,"Hero",WI7)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),1093679157,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),1093743153,true)
call Z67(WI7,1093743153,1,6)
set t=null
set WI7=null
set oA=null
set CT9=null
set l=null
endfunction
function CW9 takes nothing returns boolean
if GetSpellAbilityId()==1093679157 then
call CV9()
endif
return false
endfunction
function FN8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CW9))
set t=null
endfunction
function CX9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit m5=O77(OB7,"Target")
local real x1
local real y1
local real x2
local real y2
if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_DAMAGED and GetEventDamage()>2 and TX7(GetOwningPlayer(GetEventDamageSource())))then
call DestroyEffect(OG7(OB7,"FX1"))
call DestroyEffect(OG7(OB7,"FX2"))
call NM7(OB7)
call OZ7(t)
elseif GetTriggerEventId()!=EVENT_UNIT_DAMAGED and GetTriggerEventId()!=EVENT_UNIT_DEATH then
set x1=GetUnitX(p5)
set y1=GetUnitY(p5)
set x2=GetUnitX(m5)
set y2=GetUnitY(m5)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportCaster.mdl",x1,y1))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",x2,y2))
call O37(m5,"4410",1)
call SetUnitPosition(m5,GetUnitX(p5),GetUnitY(p5))
call DestroyEffect(OG7(OB7,"FX1"))
call DestroyEffect(OG7(OB7,"FX2"))
call NM7(OB7)
call OZ7(t)
call UQ7(m5)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function CY9 takes nothing returns nothing
local unit p5=GetEnumUnit()
local real l4=KF7(GetUnitX(p5),GetUnitY(p5),V64,VL4)
if l4<V34 then
set VC4=GetEnumUnit()
set V34=l4
endif
set p5=null
endfunction
function CZ9 takes nothing returns nothing
local unit m5=GetSpellTargetUnit()
local unit p5=GetTriggerUnit()
local trigger t
local integer OB7
local real Hk
local group g
if m5==null then
set VC4=null
set V34=$F423F
set V64=GetSpellTargetX()
set VL4=GetSpellTargetY()
set IN4=p5
set g=WS7()
call GroupEnumUnitsInRange(g,0,0,9999,Condition(function B87))
call GroupRemoveUnit(g,p5)
call ForGroup(g,function CY9)
call WR7(g)
set m5=VC4
set g=null
endif
if GetSpellAbilityId()==1093742677 then
set Hk=5
elseif GetSpellAbilityId()==1093742937 then
set Hk=4
elseif GetSpellAbilityId()==1093742938 then
set Hk=3
elseif GetSpellAbilityId()==1093750321 then
set Hk=3
endif
if m5!=null then
set t=CreateTrigger()
set OB7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,Hk,false)
call TriggerAddCondition(t,Condition(function CX9))
call NT7(OB7,"Source",p5)
call NT7(OB7,"Target",m5)
call NU7(OB7,"FX1",AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",p5,"origin"))
call NU7(OB7,"FX2",AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",m5,"origin"))
endif
set m5=null
set p5=null
set t=null
endfunction
function CA9 takes nothing returns boolean
if GetSpellAbilityId()==1093742677 or GetSpellAbilityId()==1093742937 or GetSpellAbilityId()==1093742938 then
call CZ9()
endif
return false
endfunction
function CB9 takes nothing returns boolean
if GetSpellAbilityId()==1093742677 or GetSpellAbilityId()==1093742937 or GetSpellAbilityId()==1093742938 then
if GetSpellTargetUnit()!=null and OO7(GetHandleId(GetOwningPlayer(GetSpellTargetUnit())),"DisableHelp")then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),VU7(1848652600))
endif
endif
return false
endfunction
function FO8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CA9))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function CB9))
set t=null
endfunction
function CC9 takes nothing returns nothing
local unit m5=GetEnumUnit()
local real x=GetUnitX(m5)
local real y=GetUnitY(m5)
local real a=Atan2(y-tN,x-SN)
set x=X17(x+25*Cos(a))
set y=X07(y+25*Sin(a))
call Y67(x,y,$96)
call SetUnitX(m5,x)
call SetUnitY(m5,y)
set m5=null
endfunction
function C39 takes nothing returns nothing
local unit m5=GetEnumUnit()
local unit BB7=CreateUnit(IR4,1697656901,GetUnitX(m5),GetUnitY(m5),0)
call XF7(BB7,1093742679)
call SetUnitAbilityLevel(BB7,1093742679,pN)
call IssueTargetOrderById(BB7,$D0269,m5)
set m5=null
set BB7=null
endfunction
function C69 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local player p=O97(OB7,"p")
local real t5=ON7(OB7,"SourceX")
local real w5=ON7(OB7,"SourceY")
local integer o6=OM7(OB7,"AbilityID")
local group g=OF7(OB7,"g")
local integer U38=GetTriggerEvalCount(t)
set SN=t5
set tN=w5
call ForGroup(g,function CC9)
if U38==$A then
if o6==1093742936 then
set pN=1
elseif o6==1093742934 then
set pN=2
else
set pN=3
endif
set IR4=p
call ForGroup(g,function C39)
call WR7(g)
call NM7(OB7)
call OZ7(t)
endif
set t=null
set p=null
set g=null
return false
endfunction
function CL9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local player p=O97(OB7,"p")
local real t5=ON7(OB7,"SourceX")
local real w5=ON7(OB7,"SourceY")
local integer o6=OM7(OB7,"AbilityID")
local group g=OF7(OB7,"g")
call OZ7(t)
call NM7(OB7)
set t=CreateTrigger()
set OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.04,true)
call TriggerAddCondition(t,Condition(function C69))
call NZ7(OB7,"p",p)
call NQ7(OB7,"SourceX",t5*1.)
call NQ7(OB7,"SourceY",w5*1.)
call NB7(OB7,"g",g)
call NP7(OB7,"AbilityID",o6)
set t=null
set p=null
set g=null
return false
endfunction
function C19 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local group g=WS7()
local unit p5=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
call KillUnit(CreateUnit(GetOwningPlayer(p5),1747990096,x,y,0))
set IN4=p5
call GroupEnumUnitsInRange(g,x,y,700,Condition(function AY7))
call TriggerRegisterTimerEvent(t,.4,false)
call TriggerAddCondition(t,Condition(function CL9))
call NZ7(OB7,"p",GetOwningPlayer(GetTriggerUnit()))
call NQ7(OB7,"SourceX",(x)*1.)
call NQ7(OB7,"SourceY",(y)*1.)
call NB7(OB7,"g",g)
call NP7(OB7,"AbilityID",GetSpellAbilityId())
call RemoveLocation(l)
set l=null
set t=null
set g=null
set p5=null
endfunction
function C09 takes nothing returns boolean
if GetSpellAbilityId()==1093742936 or GetSpellAbilityId()==1093742934 or GetSpellAbilityId()==1093742935 then
call C19()
endif
return false
endfunction
function FP8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function C09))
set t=null
endfunction
function R43 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,I97,2))
local unit IH7=LoadUnitHandle(L7,I97,3)
local real r=LoadReal(L7,I97,0)-.1
local unit BB7
if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
call R3A(IH7)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif r<=0 then
call R3A(IH7)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call KR7(ZX7)
else
call SaveReal(L7,I97,0,r)
call B67(ZX7,IH7,1,LoadReal(L7,I97,1))
if GetUnitAbilityLevel(IH7,'Bdet')==0 then
set BB7=CreateUnit(GetOwningPlayer(ZX7),'e00E',GetUnitX(IH7),GetUnitY(IH7),0)
call UnitAddAbility(BB7,'A2XN')
call IssueImmediateOrderById(BB7,$D0291)
set BB7=null
endif
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function R45 takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local integer BC7=GetUnitAbilityLevel(ZX7,'A00P')
local unit IH7=GetSpellTargetUnit()
local real YM7=(40.+80.*BC7)/(2.+.75*BC7)/10.
local unit BB7
call TriggerRegisterTimerEvent(t,.1,true)
call SaveReal(L7,I97,0,2.75+.75*BC7)
call SaveReal(L7,I97,1,YM7)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function R43))
call SaveUnitHandle(L7,I97,2,(ZX7))
call SaveUnitHandle(L7,I97,3,IH7)
set BB7=CreateUnit(GetOwningPlayer(ZX7),'e00E',GetUnitX(IH7),GetUnitY(IH7),0)
call UnitAddAbility(BB7,'A2XN')
call IssueImmediateOrderById(BB7,$D0291)
set BB7=null
set IH7=null
set ZX7=null
set t=null
endfunction
function C59 takes unit u returns boolean
return GetUnitTypeId(u)==1966092345
endfunction
function C29 takes nothing returns boolean
if C59(GetFilterUnit())or ALL()then
if LoadInteger(L7,tl,GetHandleId(GetFilterUnit()))<IH4 then
return true
endif
endif
return false
endfunction
function C_9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local integer L49=OM7(OB7,"LucentLevel")
local integer Tq=OM7(OB7,"Limit")
local integer L79=OM7(OB7,"TargetLimit")
local group g=WS7()
local real x=GetUnitX(WI7)
local real y=GetUnitY(WI7)
local unit m5
local real r1=GetRandomInt($C8,350)
local real r2=GetRandomInt($C8,350)
if GetRandomInt(1,2)==1 then
set r1=-1*r1
set r2=-1*r2
endif
set IN4=WI7
set IH4=L79
set tl=GetHandleId(t)
call GroupEnumUnitsInRange(g,x,y,725,Condition(function C29))
set m5=GroupPickRandomUnit(g)
call WR7(g)
if XH7(WI7)==false and m5!=null and C59(m5)==false then
call SaveInteger(L7,tl,GetHandleId(m5),LoadInteger(L7,tl,GetHandleId(m5))+1)
call YS7("effects\\Eclipse.mdx",m5,"origin",3)
if GetPlayerController(GetOwningPlayer(WI7))==MAP_CONTROL_COMPUTER then
call B67(WI7,m5,1,L49*75)
else
call B67(WI7,m5,7,L49*75)
endif
elseif XH7(WI7)==false then
set x=x+GetRandomInt(-350,350)
set y=y+GetRandomInt(-350,350)
call YT7("effects\\Eclipse.mdx",x,y,1.5)
endif
if(GetTriggerEvalCount(t)+1)==Tq then
call NM7(OB7)
call OZ7(t)
endif
set t=null
set WI7=null
set g=null
set m5=null
return false
endfunction
function L89 takes nothing returns nothing
local unit WX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local integer Tq
local integer L49=GetUnitAbilityLevel(WX7,1093678130)
local integer L79
local unit BB7=CreateUnit(GetOwningPlayer(WX7),1697656901,GetUnitX(WX7),GetUnitY(WX7),0)
if L49==0 and GetUnitTypeId(WX7)!=1160785973 then
set L49=4
endif
call XF7(BB7,1093751862)
if GetSpellAbilityId()==1093678388 then
set Tq=3+2*GetUnitAbilityLevel(WX7,1093678388)
set L79=4
else
set Tq=3+3*GetUnitAbilityLevel(WX7,1093677141)
set L79=60
endif
call NP7(OB7,"LucentLevel",L49)
call NP7(OB7,"Limit",Tq)
call NP7(OB7,"TargetLimit",L79)
call NT7(OB7,"Hero",WX7)
call TriggerRegisterTimerEvent(t,.6,true)
call TriggerAddCondition(t,Condition(function C_9))
call TriggerEvaluate(t)
call IssueImmediateOrderById(BB7,$D028D)
set t=null
set WX7=null
set BB7=null
endfunction
function LD9 takes nothing returns boolean
if GetSpellAbilityId()==1093678388 or GetSpellAbilityId()==1093677141 then
call L89()
endif
return false
endfunction
function FQ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function LD9))
set t=null
endfunction
function ZOM6 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
call SetUnitAnimationByIndex(ZX7,8)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set ZX7=null
return false
endfunction
function ZON6 takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call SetUnitAnimationByIndex(ZX7,7)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function ZOM6))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set t=null
set ZX7=null
endfunction
function ZOS6 takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==1311788373 or GetUnitTypeId(GetTriggerUnit())==1311788374 then
call ZON6()
endif
return false
endfunction
function RZ1 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function ZOS6))
set t=null
endfunction
function ZOB6 takes nothing returns nothing
local integer id
if K5I==1 then
set id=1093817934
elseif K5I==2 then
set id=1093817935
elseif K5I==3 then
set id=1093817936
elseif K5I==4 then
set id=1093817937
endif
call B67(K4I,GetEnumUnit(),1,K6I)
endfunction
function ZOC6 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
local group g
local integer BC7=GetUnitAbilityLevel(ZX7,1093817933)
local boolean OD6=false
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if(GetSpellAbilityId()==1093817912 or GetSpellAbilityId()==1093817926 or GetSpellAbilityId()==1093817927 or GetSpellAbilityId()==1093817928 or GetSpellAbilityId()==1093817929 or GetSpellAbilityId()==1093817930 or GetSpellAbilityId()==1093817931)and GetSpellTargetUnit()==BB7 then
set OD6=true
endif
endif
if OD6==true or GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT then
set g=WS7()
call SetUnitX(IH7,GetUnitX(BB7))
call SetUnitY(IH7,GetUnitY(BB7))
call KillUnit(BB7)
call SetUnitInvulnerable(IH7,false)
call PauseUnit(IH7,false)
call ShowUnit(IH7,true)
call ClearSelectionForPlayer(GetOwningPlayer(IH7))
call SelectUnitAddForPlayer(IH7,GetOwningPlayer(IH7))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set K5I=BC7+1
set IN4=ZX7
set K4I=ZX7
set K6I=50*GetUnitAbilityLevel(K4I,1093817933)
if OD6 then
set K6I=K6I+150
endif
call GroupEnumUnitsInRange(g,GetUnitX(IH7),GetUnitY(IH7),350+25,Condition(function AJ7))
call ForGroup(g,function ZOB6)
call WR7(g)
endif
set g=null
set t=null
set ZX7=null
set IH7=null
set BB7=null
return false
endfunction
function ZOE6 takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093817933)
local trigger t
local integer I97
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1865429337,GetUnitX(IH7),GetUnitY(IH7),0)
local integer N5E=(LoadInteger(L7,(GetHandleId(GetTriggerUnit())),(800)))
if(IsUnitEnemy(IH7,GetOwningPlayer(ZX7)))==false or WQ7(GetSpellTargetUnit())==false then
set t=CreateTrigger()
set I97=GetHandleId(t)
call SelectUnitRemoveForPlayer(IH7,GetOwningPlayer(IH7))
call SetUnitInvulnerable(IH7,true)
call PauseUnit(IH7,true)
call ShowUnit(IH7,false)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveUnitHandle(L7,(I97),(19),(BB7))
call TriggerRegisterTimerEvent(t,3,false)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZOC6))
endif
set BB7=CreateUnit(GetOwningPlayer(IH7),1865429338,GetUnitX(IH7),GetUnitY(IH7),0)
call UnitApplyTimedLife(BB7,1112820806,3)
set ZX7=null
set IH7=null
set BB7=null
set t=null
endfunction
function ZOF6 takes nothing returns boolean
if GetSpellAbilityId()==1093817933 then
call ZOE6()
endif
return false
endfunction
function ZOG6 takes nothing returns nothing
if IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and(LoadBoolean(L7,(GetHandleId(GetOwningPlayer(GetSpellTargetUnit()))),(139)))and GetSpellTargetUnit()!=GetTriggerUnit()then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652600))
else
return
if(LoadInteger(L7,(GetHandleId(GetTriggerUnit())),(800)))<=0 then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848659288))
elseif WF7(GetSpellTargetUnit())==true then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848659026))
endif
endif
endfunction
function ZOH6 takes nothing returns boolean
if GetSpellAbilityId()==1093817933 then
call ZOG6()
endif
return false
endfunction
function Register_Petrify takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZOF6))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function ZOH6))
set t=null
endfunction
function ZOZ6 takes nothing returns nothing
set K8I=GetEnumUnit()
call ExecuteFunc("ZOV6")
endfunction
function ZOW6 takes nothing returns boolean
return XH7(GetFilterUnit())==false and GetUnitTypeId(GetFilterUnit())==1865429336 and((LoadInteger(L7,(GetHandleId((GetFilterUnit()))),((4335))))==1)==false and((LoadInteger(L7,(GetHandleId((GetFilterUnit()))),((4337))))==1)==false
endfunction
function ZOX6 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local real x=GetUnitX(IH7)
local real y=GetUnitY(IH7)
local group g=WS7()
local integer X87=GetTriggerEvalCount(t)
local integer BC7=GetUnitAbilityLevel(ZX7,1093817911)
local real GKD=(LoadReal(L7,(GetHandleId(IH7)),(807)))
if ModuloInteger(X87,5)==0 then
call B67(ZX7,IH7,1,(25+25*BC7)/2)
endif
set K7I=ZX7
set IN4=ZX7
call GroupEnumUnitsInRange(g,x,y,400+25,Condition(function ZOW6))
call ForGroup(g,function ZOZ6)
call WR7(g)
if(TimerGetElapsed(W))>GKD or XH7(IH7)then
call SaveInteger(L7,(GetHandleId((IH7))),((809)),(2))
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function ZOY6 takes unit ZX7,unit IH7 returns nothing
local trigger t
local integer I97
local real GKD=(LoadReal(L7,(GetHandleId(IH7)),(807)))
call SaveReal(L7,(GetHandleId(IH7)),(807),(((TimerGetElapsed(W))+6)*1.0))
if GKD<(TimerGetElapsed(W))then
call SaveInteger(L7,(GetHandleId((IH7))),((809)),(1))
set t=CreateTrigger()
set I97=GetHandleId(t)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("war3mapImported\\MagnetizeTargetOverhead.mdx",IH7,"origin")))
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerAddCondition(t,Condition(function ZOX6))
endif
set t=null
endfunction
function ZOJ6 takes nothing returns nothing
call ZOY6(K7I,GetEnumUnit())
endfunction
function ZOK6 takes unit ZX7,unit IH7 returns nothing
local group g=WS7()
local real x=GetUnitX(IH7)
local real y=GetUnitY(IH7)
local real FR3=300
if GetUnitTypeId(IH7)==1865429336 then
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\DemolisherMissile\\DemolisherMissile.mdx",GetUnitX(IH7),GetUnitY(IH7)))
call UnitApplyTimedLife(IH7,1112820806,5)
call SaveInteger(L7,(GetHandleId((IH7))),((4337)),(1))
call SetUnitVertexColor(IH7,0,0,0,100)
set FR3=600
else
call DestroyEffect(AddSpecialEffect("war3mapImported\\MagnetizeCastAoE.mdx",GetUnitX(IH7),GetUnitY(IH7)))
endif
set IN4=ZX7
set K7I=ZX7
set K8I=IH7
call GroupEnumUnitsInRange(g,x,y,FR3+25,Condition(function AJ7))
call ForGroup(g,function ZOJ6)
call WR7(g)
set ZX7=null
set g=null
endfunction
function ZOV6 takes nothing returns nothing
call ZOK6(K7I,K8I)
endfunction
function ZOL6 takes nothing returns boolean
if GetSpellAbilityId()==1093817911 then
call ZOK6(GetTriggerUnit(),GetTriggerUnit())
endif
return false
endfunction
function RV1 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZOL6))
set t=null
endfunction
function BoulderSmash_FindClosestMagnetizedTarget takes nothing returns nothing
local real d=Ma(GetEnumUnit(),K3I)
if d<QQJ then
set QQJ=d
set K0I=GetEnumUnit()
endif
endfunction
function ZI36 takes nothing returns boolean
return XH7(GetFilterUnit())==false and IsUnitEnemy(JFI,GetOwningPlayer(GetFilterUnit()))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and((LoadInteger(L7,(GetHandleId((GetFilterUnit()))),((809))))==1)
endfunction
function ZI46 takes unit IH7 returns nothing
local unit BB7=CreateUnit(GetOwningPlayer(IH7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
call UnitAddAbility(BB7,1093817922)
call SetUnitAbilityLevel(BB7,1093817922,JGI)
call IssueTargetOrder(BB7,"soulburn",IH7)
set BB7=null
endfunction
function ZI56 takes nothing returns nothing
call ZI46(GetEnumUnit())
endfunction
function ZI66 takes unit IH7 returns nothing
local group g=WS7()
if((LoadInteger(L7,(GetHandleId((IH7))),((809))))==1)==true then
call GroupEnumUnitsInRange(g,0,0,99999,Condition(function ZI36))
endif
call GroupAddUnit(g,IH7)
call ForGroup(g,function ZI56)
call WR7(g)
set g=null
endfunction
function ZI76 takes nothing returns nothing
local unit IH7=GetEnumUnit()
if GetUnitTypeId(IH7)!=1865429336 then
call SetUnitPathing(IH7,true)
endif
call SaveInteger(L7,(GetHandleId((IH7))),((4336)),(2))
set IH7=null
endfunction
function ZI86 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),JEI)==false then
call GroupAddUnit(JEI,GetEnumUnit())
call ZI66(GetEnumUnit())
if JVI==1 then
call B67(JFI,GetEnumUnit(),1,50*JGI)
endif
endif
endfunction
function ZI96 takes nothing returns nothing
local unit IH7=GetEnumUnit()
local real a=(LoadReal(L7,(GetHandleId(IH7)),(801)))
local real d=(LoadReal(L7,(GetHandleId(IH7)),(802)))
local real x=JHI+d*Cos(a)
local real y=JZI+d*Sin(a)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",x,y))
if GetUnitTypeId(IH7)==1865429336 or GetUnitTypeId(IH7)==1865429337 then
set JVI=1
call SetUnitPosition(IH7,x,y)
call SetUnitX(IH7,x)
call SetUnitY(IH7,y)
else
call SetUnitX(IH7,x)
call SetUnitY(IH7,y)
call Y67(x,y,100)
endif
set IH7=null
endfunction
function ZIA6 takes nothing returns nothing
local unit IH7=GetEnumUnit()
if XH7(IH7)==true or((LoadInteger(L7,(GetHandleId((IH7))),((4306))))==1)==true or GetUnitAbilityLevel(IH7,1110456406)>0 or((LoadInteger(L7,(GetHandleId((IH7))),((4335))))==1)==true then
call GroupRemoveUnit(JEI,IH7)
call SaveInteger(L7,(GetHandleId((IH7))),((4336)),(2))
if GetUnitTypeId(IH7)!=1865429336 then
call SetUnitPathing(IH7,true)
endif
endif
set IH7=null
endfunction
function ZIB6 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local group IC6=(LoadGroupHandle(L7,(I97),(803)))
local real hN=(LoadReal(L7,(I97),(6)))
local real ho=(LoadReal(L7,(I97),(7)))
local real TP9=(LoadReal(L7,(I97),(23)))
local real TQ9=(LoadReal(L7,(I97),(24)))
local real a=bj_DEGTORAD*J77(TP9,TQ9,hN,ho)
local real x
local real y
local boolean ID6=false
local group BQ9=(LoadGroupHandle(L7,(I97),(187)))
local group g
set JVI=0
set JEI=IC6
call ForGroup(IC6,function ZIA6)
if GetTriggerEvalCount(t)>200 or FirstOfGroup(IC6)==null then
set ID6=true
else
set x=TP9+JDI*0.03*Cos(a)
set y=TQ9+JDI*0.03*Sin(a)
if KF7(x,y,hN,ho)<30 then
set x=hN
set y=ho
set ID6=true
endif
set x=X17(x)
set y=X07(y)
set JEI=IC6
set JHI=x
set JZI=y
call ForGroup(IC6,function ZI96)
call SaveReal(L7,(I97),(23),((x)*1.0))
call SaveReal(L7,(I97),(24),((y)*1.0))
set g=WS7()
set IN4=ZX7
set JEI=BQ9
set JFI=ZX7
set JGI=GetUnitAbilityLevel(ZX7,1093817909)
call GroupEnumUnitsInRange(g,x,y,180+25,Condition(function AJ7))
call ForGroup(g,function ZI86)
call WR7(g)
set g=null
endif
if ID6 then
call ForGroup(IC6,function ZI76)
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call WR7(BQ9)
call WR7(IC6)
endif
set ZX7=null
set t=null
set BQ9=null
set IC6=null
return false
endfunction
function MagneticGrip_PullableTargetsFilter takes nothing returns boolean
return((GetUnitTypeId(GetFilterUnit())==1865429336 or GetUnitTypeId(GetFilterUnit())==1865429337)or(IsUnitEnemy(JFI,GetOwningPlayer(GetFilterUnit()))==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0))and XH7(GetFilterUnit())==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and((LoadInteger(L7,(GetHandleId((GetFilterUnit()))),((4336))))==1)==false
endfunction
function ZIE6 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==1865429336
endfunction
function ZIF6 takes nothing returns nothing
local unit IH7=GetEnumUnit()
call SetUnitPathing(IH7,false)
call SaveInteger(L7,(GetHandleId((IH7))),((4336)),(1))
call SaveReal(L7,(GetHandleId(IH7)),(801),((bj_DEGTORAD*J77(JHI,JZI,GetUnitX(IH7),GetUnitY(IH7)))*1.0))
call SaveReal(L7,(GetHandleId(IH7)),(802),((KF7(JHI,JZI,GetUnitX(IH7),GetUnitY(IH7)))*1.0))
set IH7=null
endfunction
function ZIG6 takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t
local integer I97
local real hN=GetUnitX(GetSpellTargetUnit())
local real ho=GetUnitY(GetSpellTargetUnit())
local real x=GetUnitX(ZX7)
local real y=GetUnitY(ZX7)
local real a=J77(x,y,hN,ho)
local unit IH7=GetSpellTargetUnit()
local group g
if IH7==null then
set g=WS7()
call GroupEnumUnitsInRange(g,GetSpellTargetX(),GetSpellTargetY(),240+25,Condition(function ZIE6))
if FirstOfGroup(g)==null then
call WR7(g)
set ZX7=null
set g=null
return
endif
set IH7=FirstOfGroup(g)
call WR7(g)
endif
set g=WS7()
call GroupAddUnit(g,IH7)
set hN=GetUnitX(IH7)
set ho=GetUnitY(IH7)
set a=J77(x,y,hN,ho)
set t=CreateTrigger()
set I97=GetHandleId(t)
set JHI=hN
set JZI=ho
call ForGroup(g,function ZIF6)
set x=x+100*Cos(a*bj_DEGTORAD)
set y=y+100*Sin(a*bj_DEGTORAD)
call TriggerRegisterTimerEvent(t,0.03,true)
call TriggerAddCondition(t,Condition(function ZIB6))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveReal(L7,(I97),(6),((x)*1.0))
call SaveReal(L7,(I97),(7),((y)*1.0))
call SaveReal(L7,(I97),(23),((hN)*1.0))
call SaveReal(L7,(I97),(24),((ho)*1.0))
call SaveGroupHandle(L7,(I97),(187),(WS7()))
call SaveGroupHandle(L7,(I97),(803),(g))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("war3mapImported\\MagneticGripTarget.mdx",IH7,"chest")))
set ZX7=null
set t=null
set g=null
endfunction
function ZIH6 takes nothing returns nothing
local unit IH7=GetSpellTargetUnit()
local group g
if IH7==null then
set g=WS7()
call GroupEnumUnitsInRange(g,GetSpellTargetX(),GetSpellTargetY(),240+25,Condition(function ZIE6))
if FirstOfGroup(g)==null then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848659289))
endif
call WR7(g)
endif
set g=null
set IH7=null
endfunction
function ZIZ6 takes nothing returns boolean
if GetSpellAbilityId()==1093817909 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
call ZIH6()
else
call ZIG6()
endif
endif
return false
endfunction
function RW1 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function ZIZ6))
set t=null
endfunction
function ZO06 takes unit OI6 returns nothing
local unit ZX7=M7[GetPlayerId(GetOwningPlayer(OI6))]
local integer I97=GetHandleId(ZX7)
local integer O16=(LoadInteger(L7,(I97),(279)))
local integer i=1
local integer x=1
local unit IT6
loop
exitwhen i>O16
set IT6=(LoadUnitHandle(L7,(I97),(1400+i)))
if XH7(IT6)==false then
call SaveUnitHandle(L7,(I97),(1400+x),(IT6))
set x=x+1
endif
set i=i+1
endloop
set O16=O16-1
call SaveInteger(L7,(I97),(279),(O16))
set IT6=null
set ZX7=null
endfunction
function ZOO6 takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==1865429336 then
call ZO06(GetTriggerUnit())
endif
return false
endfunction
function ZO26 takes nothing returns nothing
local unit IT6
local unit ZX7=GetTriggerUnit()
local integer I97=GetHandleId(ZX7)
local integer O16=(LoadInteger(L7,(I97),(279)))
local unit O36=(LoadUnitHandle(L7,(I97),(1400+1)))
local real x
local real y
local integer N5E=(LoadInteger(L7,(GetHandleId(ZX7)),(800)))
if N5E>0 then
if GetSpellTargetUnit()==null then
set x=GetSpellTargetX()
set y=GetSpellTargetY()
else
set x=GetUnitX(GetSpellTargetUnit())
set y=GetUnitY(GetSpellTargetUnit())
endif
call UnitRemoveAbility(ZX7,JMI[N5E])
set N5E=IMaxBJ(0,N5E-1)
call XF7(ZX7,JMI[N5E])
call SaveInteger(L7,(GetHandleId(ZX7)),(800),(N5E))
set IT6=CreateUnit(GetOwningPlayer(ZX7),1865429336,x,y,0)
call UnitApplyTimedLife(IT6,1112820806,120)
call SetUnitPathing(IT6,false)
set O16=O16+1
call SaveUnitHandle(L7,(I97),(1400+O16),(IT6))
call SaveInteger(L7,(I97),(279),(O16))
if(O16>6)then
call KillUnit(O36)
endif
endif
set IT6=null
set ZX7=null
set O36=null
endfunction
function ZO46 takes nothing returns boolean
if(GetSpellAbilityId()==1093817912 or GetSpellAbilityId()==1093817926 or GetSpellAbilityId()==1093817927 or GetSpellAbilityId()==1093817928 or GetSpellAbilityId()==1093817929 or GetSpellAbilityId()==1093817930 or GetSpellAbilityId()==1093817931)then
call ZO26()
endif
return false
endfunction
function RX1 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZO46))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function ZOO6))
set JMI[0]=1093817926
set JMI[1]=1093817927
set JMI[2]=1093817928
set JMI[3]=1093817912
set JMI[4]=1093817929
set JMI[5]=1093817930
set JMI[6]=1093817931
set t=null
endfunction
function BoulderSmash_FindRock takes nothing returns boolean
if IsUnitInGroup(GetFilterUnit(),JQI)==false and(GetUnitTypeId(GetFilterUnit())==1865429336 or GetUnitTypeId(GetFilterUnit())==1865429337)and GetFilterUnit()!=K0I then
call GroupAddUnit(JQI,GetFilterUnit())
set KYI=KYI+1
if GetUnitTypeId(GetFilterUnit())==1865429336 then
call KillUnit(GetFilterUnit())
endif
endif
return false
endfunction
function ZO56 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),JQI)==false then
call GroupAddUnit(JQI,GetEnumUnit())
call B67(JUI,GetEnumUnit(),1,KKI)
if K2I==1 then
call BA7(JUI,GetEnumUnit(),0.25+0.5*KZI)
endif
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true and((LoadInteger(L7,(GetHandleId((GetEnumUnit()))),((809))))==1)then
set K3I=GetEnumUnit()
endif
endif
endfunction
function ZO66 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local real hN=(LoadReal(L7,(I97),(6)))
local real ho=(LoadReal(L7,(I97),(7)))
local real a
local real TP9=(LoadReal(L7,(I97),(23)))
local real TQ9=(LoadReal(L7,(I97),(24)))
local real x
local real y
local boolean ID6=false
local group BQ9=(LoadGroupHandle(L7,(I97),(187)))
local group g
local integer RockBonusCount=(LoadInteger(L7,(I97),(34)))
local integer HeroSTR=GetHeroStr(ZX7,true)
local unit IN6=(LoadUnitHandle(L7,(I97),(810)))
if IN6!=null then
set hN=GetUnitX(IN6)
set ho=GetUnitY(IN6)
endif
set a=bj_DEGTORAD*J77(GetUnitX(IH7),GetUnitY(IH7),hN,ho)
set x=TP9+(JPI)*0.03*Cos(a)
set y=TQ9+(JPI)*0.03*Sin(a)
if KF7(x,y,hN,ho)<(5+(JPI)*0.03)then
set x=hN
set y=ho
set ID6=true
endif
set x=X17(x)
set y=X07(y)
set JQI=BQ9
set JUI=ZX7
set KZI=GetUnitAbilityLevel(ZX7,1093817910)
set KKI=125
set K3I=null
if((LoadInteger(L7,(GetHandleId((IH7))),((4306))))==1)==true or GetTriggerEventId()==EVENT_UNIT_DEATH or GetUnitAbilityLevel(IH7,1110456406)>0 or((LoadInteger(L7,(GetHandleId((IH7))),((4336))))==1)==true or(IN6==null and GetTriggerEvalCount(t)>200)then
set ID6=true
else
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",x,y))
if GetUnitTypeId(IH7)==1865429336 or GetUnitTypeId(IH7)==1865429337 then
set K2I=1
call SetUnitPosition(IH7,x,y)
call SetUnitX(IH7,X17(x))
call SetUnitY(IH7,X07(y))
else
set K2I=0
call SetUnitX(IH7,X17(x))
call SetUnitY(IH7,X07(y))
endif
call Y67(x,y,150)
call SaveReal(L7,(I97),(23),((x)*1.0))
call SaveReal(L7,(I97),(24),((y)*1.0))
set g=WS7()
set IN4=ZX7
call GroupEnumUnitsInRange(g,x,y,200+25,Condition(function AJ7))
call GroupRemoveUnit(g,IH7)
call ForGroup(g,function ZO56)
call WR7(g)
if K3I!=null and K2I==1 then
set g=WS7()
set K0I=null
set QQJ=9999
call GroupEnumUnitsInRange(g,GetUnitX(K3I),GetUnitY(K3I),600+25,Condition(function ZI36))
call WR7(g)
if K0I!=null then
set IN6=K0I
call SaveUnitHandle(L7,(I97),(810),(IN6))
set ID6=false
endif
endif
set g=null
endif
if ID6 then
if GetUnitTypeId(IH7)!=1865429336 then
call SetUnitPathing(IH7,true)
endif
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call WR7(BQ9)
call SaveInteger(L7,(GetHandleId((IH7))),((4335)),(2))
if GetTriggerEventId()!=EVENT_UNIT_DEATH then
if IsPlayerAlly(GetOwningPlayer(ZX7),GetOwningPlayer(IH7))==false then
call B67(JUI,IH7,1,KKI)
endif
endif
endif
set IH7=null
set t=null
set BQ9=null
set ZX7=null
return false
endfunction
function ZO76 takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==1865429336 then
return true
endif
return false
endfunction
function ZO86 takes nothing returns nothing
local unit IH7=GetSpellTargetUnit()
local unit ZX7=GetTriggerUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093817910)
local trigger t
local integer I97
local real a
local real x
local real y
local integer i=-1
local boolean LQF=false
local real d=400+100*BC7
local group g
if IH7==null then
set g=WS7()
call GroupEnumUnitsInRange(g,GetSpellTargetX(),GetSpellTargetY(),180+25,Condition(function ZO76))
set IH7=FirstOfGroup(g)
call WR7(g)
set g=null
set a=GetUnitFacing(ZX7)
else
set a=J47(ZX7,IH7)
endif
if IH7==null then
return
endif
set t=CreateTrigger()
set I97=GetHandleId(t)
if ZX7==IH7 then
set a=GetUnitFacing(ZX7)
endif
if GetUnitTypeId(IH7)==1865429336 then
set d=2000
endif
loop
exitwhen LQF or i==23
set i=i+1
set x=X17(GetUnitX(IH7)+(d-i*25)*Cos(a*bj_DEGTORAD))
set y=X07(GetUnitY(IH7)+(d-i*25)*Sin(a*bj_DEGTORAD))
if(IsPointInRegion(IU4,((x)*1.0),((y)*1.0)))==false then
set LQF=true
endif
endloop
call SetUnitPathing(IH7,false)
call TriggerRegisterTimerEvent(t,0.03,true)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function ZO66))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveReal(L7,(I97),(6),((x)*1.0))
call SaveReal(L7,(I97),(7),((y)*1.0))
call SaveReal(L7,(I97),(23),((GetUnitX(IH7))*1.0))
call SaveReal(L7,(I97),(24),((GetUnitY(IH7))*1.0))
call SaveInteger(L7,(I97),(34),(0))
call SaveGroupHandle(L7,(I97),(187),(WS7()))
call SaveUnitHandle(L7,(I97),(810),(null))
call SaveInteger(L7,(GetHandleId((IH7))),((4335)),(1))
set IH7=null
set ZX7=null
set t=null
endfunction
function ZO96 takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local group g
if GetUnitTypeId(IH7)==1848651852 then
call KR7(ZX7)
call X37(GetOwningPlayer(ZX7),GetObjectName(1848658745))
elseif IH7==null then
set g=WS7()
call GroupEnumUnitsInRange(g,GetSpellTargetX(),GetSpellTargetY(),180+25,Condition(function ZO76))
if FirstOfGroup(g)==null then
call KR7(ZX7)
call X37(GetOwningPlayer(ZX7),GetObjectName(1848658745))
endif
call WR7(g)
set g=null
endif
set ZX7=null
set IH7=null
endfunction
function ZOA6 takes nothing returns boolean
if GetSpellAbilityId()==1093817910 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
if IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==false or WQ7(GetSpellTargetUnit())==false then
call ZO86()
endif
else
call ZO96()
endif
endif
return false
endfunction
function RY1 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function ZOA6))
set t=null
endfunction
function ZIV6 takes nothing returns boolean
return XH7(GetFilterUnit())==false and IsUnitEnemy(JYI,GetOwningPlayer(GetFilterUnit()))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and((LoadInteger(L7,(GetHandleId((GetFilterUnit()))),((809))))==1)
endfunction
function ZIW6 takes nothing returns nothing
call Z57((GetEnumUnit()),1093817923,1,2,1110460469)
endfunction
function ZIX6 takes unit IH7 returns nothing
local group g=WS7()
if((LoadInteger(L7,(GetHandleId((IH7))),((809))))==1)==true then
call GroupEnumUnitsInRange(g,0,0,99999,Condition(function ZIV6))
endif
call GroupAddUnit(g,IH7)
call ForGroup(g,function ZIW6)
call WR7(g)
set g=null
endfunction
function RollingBoulder_FindClosestMagnetizedTarget takes nothing returns nothing
local real d=Ma(GetEnumUnit(),JRI)
if d<QQJ then
set QQJ=d
set JJI=GetEnumUnit()
endif
endfunction
function ZIY6 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),JKI)==false then
call GroupAddUnit(JKI,GetEnumUnit())
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true then
set JOI=true
set JJI=GetEnumUnit()
if((LoadInteger(L7,(GetHandleId((GetEnumUnit()))),((809))))==1)then
set JRI=GetEnumUnit()
endif
if JTI==1 then
call B67(JYI,GetEnumUnit(),1,JSI*1.5)
call ZIX6(GetEnumUnit())
else
call B67(JYI,GetEnumUnit(),1,JSI)
endif
else
if JTI==1 then
call B67(JYI,GetEnumUnit(),1,JSI*1.5)
else
call B67(JYI,GetEnumUnit(),1,JSI)
endif
endif
endif
endfunction
function ZIJ6 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==1865429336
endfunction
function ZIK6 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local group BQ9=(LoadGroupHandle(L7,(I97),(187)))
local group g
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
local real H71=(LoadReal(L7,(I97),(6)))
local real H81=(LoadReal(L7,(I97),(7)))
local real Y_D=GetUnitX(ZX7)
local real Z4D=GetUnitY(ZX7)
local real d=KF7(H71,H81,Y_D,Z4D)
local real x
local real y
local real a=(LoadReal(L7,(I97),(137)))
local real r=JXI
local integer IL6=(LoadInteger(L7,(I97),(34)))
local real AR3=(LoadReal(L7,(I97),(138)))
local boolean IM6=false
local unit IN6=(LoadUnitHandle(L7,(I97),(810)))
set JOI=false
call SetUnitTimeScale(ZX7,3)
call SetUnitFacing(ZX7,a)
call SetUnitAnimationByIndex(ZX7,0)
if GetTriggerEvalCount(t)>30 then
if IL6==0 then
set g=WS7()
call GroupEnumUnitsInRange(g,Y_D,Z4D,150+25,Condition(function ZIJ6))
if FirstOfGroup(g)!=null then
call KillUnit(FirstOfGroup(g))
set IL6=1
call SaveInteger(L7,(I97),(34),(IL6))
endif
call WR7(g)
endif
if IL6==1 then
set r=r*2
endif
if IN6!=null then
set a=J47(ZX7,IN6)
call SaveReal(L7,(I97),(137),((a)*1.0))
endif
set x=H71+0.02*r*Cos(a*bj_DEGTORAD)
set y=H81+0.02*r*Sin(a*bj_DEGTORAD)
call SetUnitX(ZX7,X17(x))
call SetUnitY(ZX7,X07(y))
call SaveReal(L7,(I97),(6),((GetUnitX(ZX7))*1.0))
call SaveReal(L7,(I97),(7),((GetUnitY(ZX7))*1.0))
call SetUnitX(BB7,GetUnitX(ZX7))
call SetUnitY(BB7,GetUnitY(ZX7))
call Y67(GetUnitX(ZX7),GetUnitY(ZX7),100)
set d=KF7(H71,H81,GetUnitX(ZX7),GetUnitY(ZX7))
set AR3=AR3+d
call SaveReal(L7,(I97),(138),((AR3)*1.0))
set g=WS7()
set IN4=ZX7
set JYI=ZX7
set JKI=BQ9
set JLI=1
set JJI=null
set JSI=60+30
set JTI=IL6
set JRI=null
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),150+25,Condition(function AJ7))
call ForGroup(g,function ZIY6)
call WR7(g)
if JRI!=null then
set g=WS7()
set JJI=null
set QQJ=9999
call GroupEnumUnitsInRange(g,GetUnitX(JRI),GetUnitY(JRI),600+25,Condition(function ZIV6))
call WR7(g)
if JJI==null then
set IM6=true
set JJI=JRI
else
set IN6=JJI
call SaveUnitHandle(L7,(I97),(810),(IN6))
endif
endif
else
call SetUnitX(ZX7,H71)
call SetUnitY(ZX7,H81)
if YM8(ZX7)then
set IM6=true
endif
endif
if YM8(ZX7)or GetTriggerEventId()==EVENT_WIDGET_DEATH or IM6 or(IN6==null and(GetTriggerEvalCount(t)>130 or JOI or(IL6==0 and AR3>800)or(IL6==1 and AR3>1600)))then
call KillUnit(BB7)
call WR7(BQ9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call UnitAddAbility(ZX7,1093817921)
call UnitRemoveAbility(ZX7,1093817921)
call SetUnitTimeScale(ZX7,1)
if JOI==true then
set x=GetUnitX(JJI)+50*Cos(a*bj_DEGTORAD)
set y=GetUnitY(JJI)+50*Sin(a*bj_DEGTORAD)
call SetUnitX(ZX7,X17(x))
call SetUnitY(ZX7,X07(y))
call IssueTargetOrder(ZX7,"attack",JJI)
endif
endif
set ZX7=null
set t=null
set g=null
set BQ9=null
return false
endfunction
function ZIS6 takes unit ZX7,unit IT6 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1865429328,GetUnitX(ZX7),GetUnitY(ZX7),0)
local real a=J77(GetUnitX(ZX7),GetUnitY(ZX7),GetSpellTargetX(),GetSpellTargetY())
call UnitAddAbility(ZX7,1093817913)
call UnitRemoveAbility(ZX7,1093817913)
call SetUnitTimeScale(ZX7,3)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerAddCondition(t,Condition(function ZIK6))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveGroupHandle(L7,(I97),(187),(WS7()))
call SaveUnitHandle(L7,(I97),(19),(BB7))
call SaveReal(L7,(I97),(6),((GetUnitX(ZX7))*1.0))
call SaveReal(L7,(I97),(7),((GetUnitY(ZX7))*1.0))
call SaveReal(L7,(I97),(137),((a)*1.0))
call SaveInteger(L7,(I97),(34),(0))
call SaveReal(L7,(I97),(138),((0)*1.0))
call SaveUnitHandle(L7,(I97),(810),(null))
if IT6!=null and GetUnitTypeId(IT6)==1865429336 then
call KillUnit(IT6)
endif
set t=null
endfunction
function ZIR6 takes nothing returns boolean
return((GetUnitTypeId(GetFilterUnit())==1865429336 and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(JYI))or(0==1 and(GetUnitTypeId((GetFilterUnit()))==1865429337)and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(JYI))))and XH7(GetFilterUnit())==false
endfunction
function RollingBoulder_Loop takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local group g
if GetUnitTypeId(ZX7)==1311788373 and XH7(ZX7)==false then
set g=WS7()
set JYI=ZX7
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),150+25,Condition(function ZIR6))
if FirstOfGroup(g)!=null then
endif
call WR7(g)
set g=null
endif
set ZX7=null
set t=null
return false
endfunction
function ZIP6 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==1311788373 and IsUnitIllusion(GetFilterUnit())==false
endfunction
function ZIQ6 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real B18=(LoadReal(L7,(I97),(442)))
local integer N5E=(LoadInteger(L7,(GetHandleId(ZX7)),(800)))
local group g
if ZX7==null then
set g=WS7()
call GroupEnumUnitsInRange(g,0,0,99999,Condition(function ZIP6))
set ZX7=FirstOfGroup(g)
call WR7(g)
set g=null
if ZX7!=null then
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveInteger(L7,(GetHandleId(ZX7)),(800),(6))
call XF7(ZX7,JMI[6])
endif
endif
if GetTriggerEventId()==EVENT_UNIT_SPELL_CAST then
if(GetSpellAbilityId()==1093817912 or GetSpellAbilityId()==1093817926 or GetSpellAbilityId()==1093817927 or GetSpellAbilityId()==1093817928 or GetSpellAbilityId()==1093817929 or GetSpellAbilityId()==1093817930 or GetSpellAbilityId()==1093817931)and N5E<=0 then
call KR7(ZX7)
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if(GetSpellAbilityId()==1093817912 or GetSpellAbilityId()==1093817926 or GetSpellAbilityId()==1093817927 or GetSpellAbilityId()==1093817928 or GetSpellAbilityId()==1093817929 or GetSpellAbilityId()==1093817930 or GetSpellAbilityId()==1093817931)or GetSpellAbilityId()==1093817908 then
if GetSpellAbilityId()==1093817908 then
call ZIS6(ZX7,null)
endif
endif
elseif N5E<6 then
set B18=B18-0.2
call SaveReal(L7,(I97),(442),((B18)*1.0))
if B18<=0. then
call UnitRemoveAbility(ZX7,JMI[N5E])
set N5E=N5E+1
call XF7(ZX7,JMI[N5E])
call SaveInteger(L7,(GetHandleId(ZX7)),(800),(N5E))
call SaveReal(L7,(I97),(442),((JWI)*1.0))
endif
endif
set ZX7=null
set t=null
return false
endfunction
function ZIU6 takes unit ZX7 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.2,true)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_SPELL_CAST)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZIQ6))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveReal(L7,(I97),(442),((JWI)*1.0))
call SaveInteger(L7,(GetHandleId(ZX7)),(800),(6))
call XF7(ZX7,JMI[6])
set t=null
endfunction
function RJ1 takes nothing returns nothing
call ZIU6(IN4)
endfunction
function ZQK5 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
call DisableTrigger(t)
call B67(GetEventDamageSource(),IH7,3,0.5*GetEventDamage())
call EnableTrigger(t)
endif
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED or XH7(IH7)then
call DestroyEffect((LoadEffectHandle(L7,(I97),(175))))
call DestroyEffect((LoadEffectHandle(L7,(I97),(176))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call UnitRemoveAbility(IH7,1096971630)
call UnitRemoveAbility(IH7,1093817924)
set J6I=null
endif
set t=null
set IH7=null
return false
endfunction
function ZQL5 takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093817906)
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
set J6I=t
call XF7(IH7,1096971630)
call XF7(IH7,1093817924)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093817924,false)
call TriggerRegisterTimerEvent(t,2.5+0.5*BC7,false)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerAddCondition(t,Condition(function ZQK5))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveEffectHandle(L7,(I97),(175),(AddSpecialEffectTarget("war3mapImported\\FatesEdict.mdx",IH7,"origin")))
call SaveEffectHandle(L7,(I97),(176),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl",IH7,"overhead")))
set ZX7=null
set IH7=null
set t=null
endfunction
function ZQM5 takes nothing returns boolean
if GetSpellAbilityId()==1093817906 then
if IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==false or WQ7(GetSpellTargetUnit())==false then
call ZQL5()
endif
endif
return false
endfunction
function RK1 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZQM5))
set t=null
endfunction
function ZQH5 takes nothing returns nothing
call YS7("war3mapImported\\FortunesEndTarget.mdx",GetEnumUnit(),"origin",3)
call IssueTargetOrder(J4I,"purge",GetEnumUnit())
if J6I!=null and GetUnitAbilityLevel(GetEnumUnit(),1093817924)>0 then
call TriggerEvaluate(J6I)
endif
if IsPlayerAlly(GetOwningPlayer(GetEnumUnit()),GetOwningPlayer(J3I))==false then
call B67(J3I,GetEnumUnit(),1,60+30*J5I)
endif
endfunction
function ZQZ5 takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=(LoadUnitHandle(L7,(GetHandleId(ZX7)),(796)))
local real RFE=YJ7((TimerGetElapsed(W))-(LoadReal(L7,(GetHandleId(ZX7)),(358))),2.5)
local integer BC7=GetUnitAbilityLevel(ZX7,1093817905)
local integer QV5=R2I(2.0*RFE)
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(ZX7),GetUnitY(ZX7),GetUnitFacing(ZX7))
local unit QW5
local group g
local integer R3C=1093818451
if QV5>3 then
set R3C=R3C+1
set QV5=QV5-3
endif
if IH7!=null then
set QW5=CreateUnit(GetOwningPlayer(ZX7),1865429082,GetUnitX(IH7),GetUnitY(IH7),0)
call UnitApplyTimedLife(QW5,1112820806,0.5)
call UnitAddAbility(BB7,R3C)
call SetUnitAbilityLevel(BB7,R3C,QV5)
set IN4=ZX7
set J3I=ZX7
set J4I=BB7
set J5I=BC7
set g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(IH7),GetUnitY(IH7),325,Condition(function AJ7))
call ForGroup(g,function ZQH5)
call WR7(g)
endif
set ZX7=null
set IH7=null
set BB7=null
set QW5=null
set g=null
endfunction
function ZQX5 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit WX7=(LoadUnitHandle(L7,(I97),(14)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call SaveReal(L7,(GetHandleId(WX7)),(356),((GetUnitX(IH7))*1.0))
call SaveReal(L7,(GetHandleId(WX7)),(357),((GetUnitY(IH7))*1.0))
endif
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set WX7=null
return false
endfunction
function ZQY5 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit WX7=GetTriggerUnit()
call SaveReal(L7,(GetHandleId(WX7)),(358),(((TimerGetElapsed(W)))*1.0))
call SaveUnitHandle(L7,(GetHandleId(WX7)),(796),(GetSpellTargetUnit()))
call DestroyEffect(AddSpecialEffect("war3mapImported\\CleanseTargetArea.mdx",GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit())))
call SaveUnitHandle(L7,(I97),(14),(WX7))
call SaveUnitHandle(L7,(I97),(17),(GetSpellTargetUnit()))
call TriggerRegisterTimerEvent(t,10,false)
call TriggerRegisterDeathEvent(t,GetSpellTargetUnit())
call TriggerAddCondition(t,Condition(function ZQX5))
set t=null
set WX7=null
endfunction
function ZQJ5 takes nothing returns boolean
if GetSpellAbilityId()==1093817905 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
call SaveBoolean(L7,(GetHandleId(GetTriggerUnit())),(360),(false))
call ZQY5()
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
if WQ7(GetSpellTargetUnit())==false then
call SaveBoolean(L7,(GetHandleId(GetTriggerUnit())),(360),(true))
endif
elseif(LoadBoolean(L7,(GetHandleId(GetTriggerUnit())),(360)))==true then
call ZQZ5()
endif
endif
return false
endfunction
function RL1 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_ENDCAST)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZQJ5))
set t=null
endfunction
function ZQN5 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093817907)+GetUnitAbilityLevel(ZX7,1093818448)
local integer X87=(LoadInteger(L7,(I97),(34)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH or X87>9 then
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093817925 and GetSpellTargetUnit()==IH7 then
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
else
set X87=X87+1
call SaveInteger(L7,(I97),(34),(X87))
call SetUnitState(IH7,UNIT_STATE_LIFE,GetUnitState(IH7,UNIT_STATE_LIFE)+11*BC7)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function ZQS5 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093817907)+GetUnitAbilityLevel(ZX7,1093818448)
local real YM7=BC7*90
local real D3E=0.75
call TriggerRegisterDeathEvent(t,IH7)
call TriggerRegisterTimerEvent(t,1,true)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZQN5))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveInteger(L7,(I97),(5),(BC7))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("war3mapImported\\DarkMending.mdx",IH7,"origin")))
if IsUnitType(IH7,UNIT_TYPE_HERO)==false then
set D3E=1.0
endif
if GetUnitState(IH7,UNIT_STATE_LIFE)<=YM7*D3E and IsUnitAlly(IH7,GetOwningPlayer(ZX7))==true then
set YM7=GetUnitState(IH7,UNIT_STATE_LIFE)/0.75-10
endif
call B67(ZX7,IH7,1,YM7)
set t=null
set ZX7=null
set IH7=null
endfunction
function ZQT5 takes nothing returns boolean
if GetSpellAbilityId()==1093817907 or GetSpellAbilityId()==1093818448 then
if IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==false or WQ7(GetSpellTargetUnit())==false then
call ZQS5()
endif
endif
return false
endfunction
function RM1 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZQT5))
set t=null
endfunction
function ZQR5 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer X87=(LoadInteger(L7,(I97),(34)))
local integer QI=(LoadInteger(L7,(I97),(25)))
local integer BC7=(LoadInteger(L7,(I97),(5)))
local integer i=0
local real QP5=(LoadReal(L7,(I97),(697)))
local real QQ5=(LoadReal(L7,(I97),(811)))
local real YIO=GetUnitState(IH7,UNIT_STATE_LIFE)
local real QU5=GetUnitState(IH7,UNIT_STATE_MAX_LIFE)
local real UI5=(LoadReal(L7,(I97),(808)))
local real U15
local real YM7
if QI>(BC7+6)*50 or GetTriggerEventId()==EVENT_WIDGET_DEATH then
call DisableTrigger(t)
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call UnitRemoveAbility(IH7,1093817939)
call UnitRemoveAbility(IH7,1093817938)
if GetTriggerEventId()!=EVENT_WIDGET_DEATH then
set UI5=UI5*2
loop
exitwhen i>X87
set i=i+1
set YIO=GetUnitState(IH7,UNIT_STATE_LIFE)
set U15=RMinBJ(QU5-YIO,UI5)
call SetUnitState(IH7,UNIT_STATE_LIFE,YIO+U15)
set UI5=UI5-U15
set YM7=(LoadReal(L7,(I97),(20000+i)))
if(LoadUnitHandle(L7,(I97),(22000+i)))==ZX7 or((LoadInteger(L7,(GetHandleId((IH7))),((2485))))==1)then
if GetUnitState(IH7,UNIT_STATE_LIFE)<=YM7+2 then
set YM7=GetUnitState(IH7,UNIT_STATE_LIFE)-2
endif
endif
call B67((LoadUnitHandle(L7,(I97),(22000+i))),IH7,6,YM7)
endloop
set YIO=GetUnitState(IH7,UNIT_STATE_LIFE)
set U15=RMinBJ(QU5-YIO,UI5)
call SetUnitState(IH7,UNIT_STATE_LIFE,YIO+U15)
set UI5=UI5-U15
endif
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED and C67(GetEventDamage())then
set X87=X87+1
call SaveInteger(L7,(I97),(34),(X87))
call SaveUnitHandle(L7,(I97),(22000+X87),(GetEventDamageSource()))
call SaveReal(L7,(I97),(20000+X87),((GetEventDamage())*1.0))
call YN7(IH7,GetEventDamage())
elseif GetTriggerEventId()!=EVENT_UNIT_DAMAGED and GetTriggerEventId()!=EVENT_WIDGET_DEATH then
set QI=QI+1
call SaveInteger(L7,(I97),(25),(QI))
if QU5!=QQ5 then
set QQ5=QU5
set QP5=YIO
call SaveReal(L7,(I97),(697),((QP5)*1.0))
call SaveReal(L7,(I97),(811),((QQ5)*1.0))
endif
if YIO>QP5 then
if((LoadInteger(L7,(GetHandleId((IH7))),((4298))))==1)==false then
set UI5=UI5+YIO-QP5
call SaveReal(L7,(I97),(808),((UI5)*1.0))
else
call SetUnitState(IH7,UNIT_STATE_LIFE,YIO)
endif
endif
call SetUnitState(IH7,UNIT_STATE_LIFE,QP5)
endif
set t=null
set IH7=null
set ZX7=null
return false
endfunction
function ZUO5 takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local integer BC7=GetUnitAbilityLevel(ZX7,1093817904)
call UnitRemoveAbility(IH7,1110456665)
call XF7(IH7,1093817939)
call XF7(IH7,1093817938)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerAddCondition(t,Condition(function ZQR5))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveInteger(L7,(I97),(34),(0))
call SaveInteger(L7,(I97),(25),(0))
call SaveInteger(L7,(I97),(5),(BC7))
call SaveReal(L7,(I97),(808),((0)*1.0))
call SaveReal(L7,(I97),(697),((GetUnitState(IH7,UNIT_STATE_LIFE))*1.0))
call SaveReal(L7,(I97),(811),((GetUnitState(IH7,UNIT_STATE_MAX_LIFE))*1.0))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("war3mapImported\\FalsePromise.mdx",IH7,"chest")))
call YZ8(IH7)
call YW8(IH7,0,0)
set ZX7=null
set IH7=null
set t=null
endfunction
function ZU25 takes nothing returns boolean
if GetSpellAbilityId()==1093817904 then
call ZUO5()
endif
return false
endfunction
function RN1 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZU25))
set t=null
endfunction
function LE9 takes nothing returns boolean
if GetLearnedSkill()==1093678129 then
if GetUnitAbilityLevel(GetTriggerUnit(),1093678129)==4 then
call SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1382378855,4)
else
call SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1382378855,GetUnitAbilityLevel(GetTriggerUnit(),1093678129))
endif
elseif GetLearnedSkill()==1093678642 then
call SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1378889801,1)
endif
return false
endfunction
function FR8 takes nothing returns nothing
set du=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(du,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(du,Condition(function LE9))
endfunction
function LF9 takes nothing returns boolean
return GetSpellAbilityId()==1093684053
endfunction
function LG9 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))!=null
endfunction
function LH9 takes nothing returns nothing
call XF7(GetEnumUnit(),1093684052)
call SetUnitAbilityLevel(GetEnumUnit(),1093684052,E8)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl",GetEnumUnit(),"chest"))
endfunction
function LI9 takes nothing returns nothing
call UnitRemoveAbility(GetEnumUnit(),1093684052)
endfunction
function LJ9 takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer OB7=GetHandleId(t)
local group LQ7=OF7(OB7,"Group")
call ForGroup(LQ7,function LI9)
call WR7(LQ7)
call Mv(t)
set t=null
set LQ7=null
endfunction
function LK9 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local boolexpr hP=Condition(function LG9)
local group LQ7=WS7()
local timer t=CreateTimer()
local integer OB7=GetHandleId(t)
local integer V77=GetUnitAbilityLevel(WI7,1093684053)
local real ZM9=$F
set E8=V77
call GroupEnumUnitsInRange(LQ7,0,0,9999,hP)
call ForGroup(LQ7,function LH9)
call DestroyBoolExpr(hP)
call NB7(OB7,"Group",LQ7)
call TimerStart(t,ZM9,false,function LJ9)
set WI7=null
set hP=null
set LQ7=null
set t=null
endfunction
function J_8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function LF9))
call TriggerAddAction(t,function LK9)
set t=null
endfunction
function LM9 takes nothing returns nothing
if GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)>0 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Starfall\\StarfallTarget.mdl",GetEnumUnit(),"origin"))
endif
endfunction
function LN9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local unit m5=O77(OB7,"Target")
call B67(WI7,m5,1,.75*GetUnitAbilityLevel(WI7,1093684054)*75)
call NM7(OB7)
call OZ7(t)
set t=null
set WI7=null
set m5=null
return false
endfunction
function LO9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local group g
local unit m5=O77(OB7,"Target")
if XH7(m5)then
set g=WS7()
set IN4=WI7
call GroupEnumUnitsInRange(g,GetUnitX(WI7),GetUnitY(WI7),500,Condition(function AX7))
set m5=GroupPickRandomUnit(g)
call WR7(g)
set g=null
endif
call DestroyEffect(OG7(OB7,"FX"))
call NM7(OB7)
call OZ7(t)
if m5!=null then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Starfall\\StarfallTarget.mdl",m5,"origin"))
set t=CreateTrigger()
set OB7=GetHandleId(t)
call NT7(OB7,"Hero",WI7)
call NT7(OB7,"Target",m5)
call TriggerRegisterTimerEvent(t,.5,false)
call TriggerAddCondition(t,Condition(function LN9))
endif
set t=null
set WI7=null
set m5=null
return false
endfunction
function ug takes nothing returns nothing
call B67(IN4,GetEnumUnit(),1,IJ4)
endfunction
function uG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local group g=OF7(OB7,"g")
set IJ4=GetUnitAbilityLevel(WI7,1093684054)*75
set IN4=WI7
call ForGroup(g,function ug)
call WR7(g)
call NM7(OB7)
call OZ7(t)
set t=null
set WI7=null
set g=null
return false
endfunction
function uh takes nothing returns nothing
local real in=Ma(GetTriggerUnit(),GetEnumUnit())
if in>775 then
else
call GroupAddUnit(IQ4,GetEnumUnit())
endif
endfunction
function LP9 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=GetTriggerUnit()
local group g=WS7()
local unit m5
set IN4=WI7
set IQ4=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(WI7),GetUnitY(WI7),900,Condition(function AX7))
call ForGroup(g,function uh)
call WR7(g)
set g=IQ4
call ForGroup(g,function LM9)
call NB7(OB7,"g",g)
call NT7(OB7,"Hero",WI7)
call TriggerRegisterTimerEvent(t,.5,false)
call TriggerAddCondition(t,Condition(function uG))
set IN4=WI7
set g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(WI7),GetUnitY(WI7),500,Condition(function AX7))
set m5=GroupPickRandomUnit(g)
call WR7(g)
set t=CreateTrigger()
set OB7=GetHandleId(t)
call NT7(OB7,"Hero",WI7)
call NT7(OB7,"Target",m5)
call NU7(OB7,"FX",AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Starfall\\StarfallCaster.mdl",WI7,"origin"))
call TriggerRegisterTimerEvent(t,1,false)
call TriggerAddCondition(t,Condition(function LO9))
set t=null
set g=null
set WI7=null
set m5=null
endfunction
function LQ9 takes nothing returns boolean
if GetSpellAbilityId()==1093684054 then
call LP9()
endif
return false
endfunction
function K48 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function LQ9))
set t=null
endfunction
function LR9 takes nothing returns boolean
return GetSpellAbilityId()==1093684280
endfunction
function uj takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(D8))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)!=null
endfunction
function uJ takes real uk,real uK,real iN,real io returns integer
local real in=SquareRoot((iN-uk)*(iN-uk)+(io-uK)*(io-uK))
return YG7(R2I(in/$96),$B)
endfunction
function ul takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local unit IJ=O77(OB7,"Projectile")
local real hN=ON7(OB7,"TargetX")
local real ho=ON7(OB7,"TargetY")
local real RK=ON7(OB7,"Angle")
local real iN=GetUnitX(IJ)
local real io=GetUnitY(IJ)
local real Il=X17(GetUnitX(IJ)+40*Cos(RK))
local real IL=X07(GetUnitY(IJ)+40*Sin(RK))
local boolexpr hP=Condition(function uj)
local group LQ7=WS7()
local unit oA
local unit m5
local real uk
local real uK
call SetUnitX(IJ,Il)
call SetUnitY(IJ,IL)
set D8=WI7
call GroupEnumUnitsInRange(LQ7,Il,IL,155,hP)
set m5=FirstOfGroup(LQ7)
call WR7(LQ7)
call DestroyBoolExpr(hP)
if m5!=null then
if IsUnitType(m5,UNIT_TYPE_HERO) then
set SO4[GetPlayerId(GetOwningPlayer(WI7))]=SO4[GetPlayerId(GetOwningPlayer(WI7))]+1
call C27("AA_Hits"+I2S(GetPlayerId(GetOwningPlayer(WI7))),SO4[GetPlayerId(GetOwningPlayer(WI7))])
endif
set uk=ON7(OB7,"OriginalX")
set uK=ON7(OB7,"OriginalY")
set oA=CreateUnit(GetOwningPlayer(m5),1697656901,iN,io,0)
call XF7(oA,1093684279)
call SetUnitAbilityLevel(oA,1093684279,uJ(uk,uK,iN,io))
call IssueTargetOrderById(oA,$D007F,m5)
call UnitDamageTarget(WI7,m5,90*GetUnitAbilityLevel(WI7,1093684280)-40,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call UnitDamageTarget(WI7,m5,(uJ(uk,uK,iN,io)-1)*14,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call KillUnit(IJ)
call Mv(t)
set oA=null
elseif(Il-hN)*(Il-hN)+(IL-ho)*(IL-ho)<$640 then
call KillUnit(IJ)
call Mv(t)
endif
set WI7=null
set IJ=null
set t=null
set hP=null
set LQ7=null
set m5=null
endfunction
function LS9 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local real iN=X17(GetUnitX(WI7))
local real io=X07(GetUnitY(WI7))
local location sy=GetSpellTargetLoc()
local real hN=GetLocationX(sy)
local real ho=GetLocationY(sy)
local real RK=Atan2(ho-io,hN-iN)
local timer t=CreateTimer()
local integer OB7=GetHandleId(t)
local unit IJ=CreateUnit(GetOwningPlayer(WI7),1747988533,iN,io,RK*bj_RADTODEG)
set SP4[GetPlayerId(GetOwningPlayer(WI7))]=SP4[GetPlayerId(GetOwningPlayer(WI7))]+1
call C27("AA_Total"+I2S(GetPlayerId(GetOwningPlayer(WI7))),SP4[GetPlayerId(GetOwningPlayer(WI7))])
call RemoveLocation(sy)
call SetUnitFacing(IJ,RK*bj_RADTODEG)
call SetUnitPathing(IJ,false)
set hN=X17(iN+$BB8*Cos(RK))
set ho=X07(io+$BB8*Sin(RK))
call NQ7(OB7,"OriginalX",iN)
call NQ7(OB7,"OriginalY",io)
call NQ7(OB7,"TargetX",hN)
call NQ7(OB7,"TargetY",ho)
call NQ7(OB7,"Angle",RK)
call NT7(OB7,"Hero",WI7)
call NT7(OB7,"Projectile",IJ)
call TimerStart(t,.035,true,function ul)
set WI7=null
set sy=null
set t=null
set IJ=null
endfunction
function LT9 takes nothing returns boolean
local integer LU9=SO4[GetPlayerId(GetTriggerPlayer())]
local integer D5=SP4[GetPlayerId(GetTriggerPlayer())]
if GetUnitTypeId(M7[GetPlayerId(GetTriggerPlayer())])==1311781206 and D5>0 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,10.,(GetObjectName((1848657741)))+" "+R2S(I2R(LU9)/ I2R(D5)*100)+"% ("+I2S(LU9)+"/"+I2S(D5)+")")
endif
return false
endfunction
function K78 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function LR9))
call TriggerAddAction(t,function LS9)
call X_7(1093684279)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-st",true)
call TriggerAddCondition(t,Condition(function LT9))
set t=null
endfunction
function LV9 takes nothing returns boolean
return GetSpellAbilityId()==1093684302
endfunction
function uM takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(D8)))!=null
endfunction
function un takes nothing returns nothing
local unit WI7=GetEnumUnit()
local unit oA=CreateUnit(GetOwningPlayer(WI7),1697657170,0,0,0)
call XF7(oA,1093684303)
call SetUnitAbilityLevel(oA,1093684303,GetUnitAbilityLevel(D8,1093684302))
call UnitApplyTimedLife(oA,1112820806,$A)
set WI7=null
set oA=null
endfunction
function uN takes unit WI7 returns nothing
local group LQ7=WS7()
local boolexpr hP=Condition(function uM)
set D8=WI7
call GroupEnumUnitsInRange(LQ7,GetUnitX(WI7),GetUnitY(WI7),800,hP)
call ForGroup(LQ7,function un)
call DestroyBoolExpr(hP)
call WR7(LQ7)
set LQ7=null
set hP=null
endfunction
function uo takes unit WI7 returns nothing
local integer OB7=GetHandleId(WI7)
local string uO=OP7(OB7,"OrderType")
local string up=OrderId2String(OM7(OB7,"OrderId"))
local real hN
local real ho
local unit m5
local trigger t=OE7(OB7,"Trigger_TrackOrder")
local boolean uP=not OO7(OB7,"Idle")
local boolean uq=OO7(OB7,"SuperOrder")
call DisableTrigger(t)
call IssueImmediateOrderById(WI7,$D0004)
if uO=="Target"and(uP or uq)then
set m5=O77(OB7,"OrderTarget")
call IssueTargetOrder(WI7,up,m5)
elseif uO=="Point"and(uP or uq)then
set hN=ON7(OB7,"OrderPointX")
set ho=ON7(OB7,"OrderPointY")
call IssuePointOrder(WI7,up,hN,ho)
elseif(uP or uq)then
call IssueImmediateOrder(WI7,"OrderString")
endif
call NS7(OB7,"SuperOrder",false)
call EnableTrigger(t)
set m5=null
set t=null
endfunction
function uQ takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local real ur=ON7(OB7,"DistanceRemaining")
local real uR=ON7(OB7,"OriginalDistance")
local real RK=ON7(OB7,"Angle")
local real Il=GetUnitX(WI7)+30*Cos(RK*bj_DEGTORAD)
local real IL=GetUnitY(WI7)+30*Sin(RK*bj_DEGTORAD)
local real us=$C8
local real uS=(1-ur/uR)*us*2
if uS>us then
set uS=us*2-uS
endif
call SetUnitFlyHeight(WI7,YK7(uS,0),0)
call SetUnitX(WI7,X17(Il))
call SetUnitY(WI7,X07(IL))
call SetUnitFacing(WI7,RK)
call NQ7(OB7,"DistanceRemaining",ur-20)
if uS<1 and ur-uR!=0 then
call NS7(GetHandleId(WI7),"InAir",false)
call SetUnitFacing(WI7,RK)
call SetUnitAnimation(WI7,"stand")
call SetUnitPathing(WI7,true)
call uo(WI7)
call uN(WI7)
call PauseTimer(t)
call NM7(OB7)
call DestroyTimer(t)
endif
set t=null
set WI7=null
endfunction
function LW9 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local integer V77=GetUnitAbilityLevel(WI7,1093684302)
local real in=300+100*V77
local real RK=GetUnitFacing(WI7)
local real iN=GetUnitX(WI7)
local real io=GetUnitY(WI7)
local real hN=X17(iN+in*Cos(RK*bj_DEGTORAD))
local real ho=X07(io+in*Sin(RK*bj_DEGTORAD))
local timer t=CreateTimer()
local integer OB7=GetHandleId(t)
local trigger uT=OE7(GetHandleId(WI7),"Trigger_TrackOrder")
set in=SquareRoot((iN-hN)*(iN-hN)+(io-ho)*(io-ho))
if in>100 then
call XF7(WI7,1097691750)
call UnitRemoveAbility(WI7,1097691750)
call SetUnitPathing(WI7,false)
call SetUnitAnimationByIndex(WI7,6)
call DisableTrigger(uT)
call IssueImmediateOrderById(WI7,$D0004)
call EnableTrigger(uT)
call NQ7(OB7,"DistanceRemaining",in)
call NQ7(OB7,"OriginalDistance",in)
call NQ7(OB7,"Angle",RK)
call NT7(OB7,"Hero",WI7)
call TimerStart(t,.025,true,function uQ)
call NS7(GetHandleId(WI7),"Leap_InAir",true)
call NS7(GetHandleId(WI7),"SuperOrder",false)
endif
set WI7=null
set t=null
set uT=null
endfunction
function uu takes nothing returns boolean
return OrderId2String(GetIssuedOrderId())!="windwalk"
endfunction
function uU takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local integer OB7=GetHandleId(WI7)
local boolean uv=OO7(OB7,"Leap_InAir")
call NP7(OB7,"OrderId",GetIssuedOrderId())
call NS7(OB7,"Idle",false)
if GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER then
call NR7(OB7,"OrderType","Target")
call N37(OB7,"OrderTarget",GetOrderTarget())
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER then
if uv or KF7(GetUnitX(WI7),GetUnitY(WI7),GetOrderPointX(),GetOrderPointY())>800 then
call NR7(OB7,"OrderType","Point")
call NQ7(OB7,"OrderPointX",GetOrderPointX())
call NQ7(OB7,"OrderPointY",GetOrderPointY())
else
call NS7(OB7,"Idle",true)
endif
else
call NR7(OB7,"OrderType","Instant")
endif
if uv then
call NS7(OB7,"SuperOrder",true)
endif
set WI7=null
endfunction
function uV takes nothing returns nothing
local unit WI7=O77(GetHandleId(GetExpiredTimer()),"Hero")
local integer OB7=GetHandleId(WI7)
local real x=GetUnitX(WI7)
local real y=GetUnitY(WI7)
local string uO=OP7(OB7,"OrderType")
if uO=="Point"and KF7(GetUnitX(WI7),GetUnitY(WI7),ON7(OB7,"OrderPointX"),ON7(OB7,"OrderPointY"))<100 then
call NS7(OB7,"Idle",true)
endif
set WI7=null
endfunction
function uw takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local trigger t=CreateTrigger()
local timer t2
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_ISSUED_ORDER)
call TriggerAddAction(t,function uU)
call TriggerAddCondition(t,Condition(function uu))
call NV7(GetHandleId(WI7),"Trigger_TrackOrder",t)
set t2=CreateTimer()
call NT7(GetHandleId(t2),"Hero",WI7)
call TimerStart(t2,.3,true,function uV)
call NC7(GetHandleId(WI7),"Timer_CheckIdle",t2)
set WI7=null
set t=null
set t2=null
endfunction
function uW takes nothing returns nothing
if GetUnitAbilityLevel(GetTriggerUnit(),1093684302)==1 then
call uw()
endif
endfunction
function K88 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function LV9))
call TriggerAddAction(t,function LW9)
set t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddAction(t,function uW)
set t=null
endfunction
function ux takes nothing returns nothing
local unit WI7=O77(GetHandleId(GetTriggeringTrigger()),"Morphling")
local real r
local real g
local real b
local integer LX9
local integer LY9
local real LZ9
local real rStr2Agi
if GetUnitTypeId(WI7)!=1328558160 then
call DisableTrigger(GetTriggeringTrigger())
elseif XH7(WI7)==false and OO7(GetHandleId(WI7),"Waveforming")==false then
set LX9=GetHeroAgi(WI7,true)
set LY9=GetHeroStr(WI7,true)
set LZ9=RMaxBJ(75+2*(LX9-LY9),35)
set r=LZ9
set g=LZ9
set b=LZ9
call SetUnitVertexColorBJ(WI7,r,g,b,GetRandomReal(.0,10.))
endif
set WI7=null
endfunction
function LA9 takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit())==1328558160 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function LB9 takes nothing returns nothing
local trigger t
if(OO7(GetHandleId(GetTriggerUnit()),"HasMorphling")==false)then
set t=CreateTrigger()
call NT7(GetHandleId(t),"Morphling",GetTriggerUnit())
call NV7(GetHandleId(GetTriggerUnit()),"ColorTrigger",t)
call TriggerAddAction(t,function ux)
call TriggerRegisterTimerEvent(t,1.,true)
call NS7(GetHandleId(GetTriggerUnit()),"HasMorphling",true)
call UnitAddItem(GetTriggerUnit(),CreateItem(1227894853,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
endif
set t=null
endfunction
function FS8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,bj_mapInitialPlayableArea)
call TriggerAddCondition(t,Condition(function LA9))
call TriggerAddAction(t,function LB9)
set t=null
endfunction
function LC9 takes nothing returns boolean
return GetSpellAbilityId()==1093682766
endfunction
function L39 takes nothing returns boolean
local unit T3=GetFilterUnit()
if IsUnitInGroup(T3,R8)then
set T3=null
return false
endif
if IsUnitEnemy(T3,GetOwningPlayer(D8))and GetUnitAbilityLevel(T3,1093678162)!=1 and GetUnitState(T3,UNIT_STATE_LIFE)>0 and IsUnitType(T3,UNIT_TYPE_STRUCTURE)==false then
set T3=null
return true
endif
set T3=null
return false
endfunction
function uZ takes nothing returns nothing
call UnitDamageTarget(D8,GetEnumUnit(),F8,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
endfunction
function L69 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"UnitVar")
local real RK=ON7(OB7,"Angle")
local integer u3=OM7(OB7,"Remaining")
local group Ro=OF7(OB7,"AlreadyDamaged")
local real u4=GetUnitX(WI7)
local real u5=GetUnitY(WI7)
local real TP9=(LoadReal(L7,(OB7),(23)))
local real TQ9=(LoadReal(L7,(OB7),(24)))
local real Z97=TP9+$3E8*.05*Cos(RK)
local real ZD7=TQ9+$3E8*.05*Sin(RK)
local group LQ7=WS7()
local unit BO9=O77(OB7,"Dummy")
call SaveReal(L7,(OB7),(23),((Z97)*1.))
call SaveReal(L7,(OB7),(24),((ZD7)*1.))
set D8=WI7
set F8=GetUnitAbilityLevel(WI7,1093682766)*75+25
set R8=Ro
call GroupEnumUnitsInRange(LQ7,u4,u5,$C8+25,Condition(function L39))
call ForGroup(LQ7,function uZ)
call GroupAddGroup(LQ7,Ro)
call WR7(LQ7)
set u3=u3-1
call NP7(OB7,"Remaining",u3)
call SetUnitX(WI7,X17(Z97))
call SetUnitY(WI7,X07(ZD7))
call SetUnitX(BO9,GetUnitX(WI7))
call SetUnitY(BO9,GetUnitY(WI7))
call IssueTargetOrderById(BO9,$D007F,WI7)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",u4,u5))
if u3==0 then
call RemoveUnit(BO9)
call SetUnitVertexColor(WI7,$FF,$FF,$FF,$FF)
call NS7(GetHandleId(WI7),"Waveforming",false)
call SetUnitInvulnerable(WI7,false)
call SetUnitPathing(WI7,true)
call ClearSelectionForPlayer(GetOwningPlayer(WI7))
call SelectUnitAddForPlayer(WI7,GetOwningPlayer(WI7))
call NM7(OB7)
call OZ7(t)
endif
set WI7=null
set Ro=null
set LQ7=null
set t=null
return false
endfunction
function LL9 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local real iN=GetUnitX(WI7)
local real io=GetUnitY(WI7)
local location sy=GetSpellTargetLoc()
local real hN=GetLocationX(sy)
local real ho=GetLocationY(sy)
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local group Ro=WS7()
local integer JL7=GetPlayerId(GetOwningPlayer(WI7))
local unit BO9=CreateUnit(GetOwningPlayer(WI7),1697656901,iN,io,0)
call UnitAddAbility(BO9,1093815860)
call RemoveLocation(sy)
if GetSpellTargetUnit()!=null then
set hN=GetUnitX(GetSpellTargetUnit())
set ho=GetUnitY(GetSpellTargetUnit())
endif
call SetUnitVertexColor(WI7,$FF,$FF,$FF,0)
call NS7(GetHandleId(WI7),"Waveforming",true)
call SetUnitInvulnerable(WI7,true)
call SetUnitPathing(WI7,false)
call NT7(OB7,"UnitVar",WI7)
call SaveReal(L7,(OB7),(23),((iN)*1.))
call SaveReal(L7,(OB7),(24),((io)*1.))
call NB7(OB7,"AlreadyDamaged",Ro)
call NQ7(OB7,"Angle",Atan2(ho-io,hN-iN))
call NP7(OB7,"Remaining",YH7(R2I(SquareRoot((hN-iN)*(hN-iN)+(ho-io)*(ho-io))/50),1))
call NT7(OB7,"Dummy",BO9)
call TriggerRegisterTimerEvent(t,.04,true)
call TriggerAddCondition(t,Condition(function L69))
call ShowUnit(WI7,false)
call ShowUnit(WI7,true)
call SelectUnitAddForPlayer(WI7,GetOwningPlayer(WI7))
set t=null
set WI7=null
set sy=null
set Ro=null
endfunction
function FT8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function LC9))
call TriggerAddAction(t,function LL9)
set t=null
endfunction
function u7 takes nothing returns nothing
local unit u8=O77(GetHandleId(GetTriggeringTrigger()),"Morphling")
if GetHeroStatBJ(1,u8,false)>2*GetUnitAbilityLevel(u8,1093684056)and GetUnitState(u8,UNIT_STATE_MANA)>=20. and GetUnitState(u8,UNIT_STATE_LIFE)>1. then
call SetUnitManaBJ(u8,GetUnitState(u8,UNIT_STATE_MANA)-20)
call ModifyHeroStat(1,u8,1,2*GetUnitAbilityLevel(u8,1093684056))
call ModifyHeroStat(0,u8,0,2*GetUnitAbilityLevel(u8,1093684056))
endif
set u8=null
endfunction
function u9 takes nothing returns nothing
local unit u8=O77(GetHandleId(GetTriggeringTrigger()),"Morphling")
if GetHeroStatBJ(0,u8,false)>2*GetUnitAbilityLevel(u8,1093684056)and GetUnitState(u8,UNIT_STATE_MANA)>=20. and GetUnitState(u8,UNIT_STATE_LIFE)>1. then
call SetUnitManaBJ(u8,GetUnitState(u8,UNIT_STATE_MANA)-20)
call ModifyHeroStat(0,u8,1,2*GetUnitAbilityLevel(u8,1093684056))
call ModifyHeroStat(1,u8,0,2*GetUnitAbilityLevel(u8,1093684056))
endif
set u8=null
endfunction
function L19 takes nothing returns boolean
return(((GetIssuedOrderId()==$D0246)or(GetIssuedOrderId()==$D0243))and(GetTriggerUnit()==O77(GetHandleId(GetTriggeringTrigger()),"Morphling")))
endfunction
function UA takes nothing returns nothing
local integer OB7=GetHandleId(GetTriggeringTrigger())
local trigger Ub=OE7(OB7,"MorphStr")
local trigger UB=OE7(OB7,"MorphAgi")
if(GetIssuedOrderId()==$D0243)then
call DisableTrigger(Ub)
elseif(GetIssuedOrderId()==$D0246)then
call DisableTrigger(UB)
endif
set Ub=null
set UB=null
endfunction
function L09 takes nothing returns boolean
return(((GetIssuedOrderId()==$D0245)or(GetIssuedOrderId()==$D0242))and(GetTriggerUnit()==O77(GetHandleId(GetTriggeringTrigger()),"Morphling")))
endfunction
function UC takes nothing returns nothing
local integer OB7=GetHandleId(GetTriggeringTrigger())
local trigger Ub=OE7(OB7,"MorphStr")
local trigger UB=OE7(OB7,"MorphAgi")
if(GetIssuedOrderId()==$D0242)then
call EnableTrigger(Ub)
call DisableTrigger(UB)
elseif(GetIssuedOrderId()==$D0245)then
call DisableTrigger(Ub)
call EnableTrigger(UB)
endif
set Ub=null
set UB=null
endfunction
function L59 takes nothing returns boolean
return GetLearnedSkill()==1093684056 and IsUnitIllusion(GetTriggerUnit())==false and GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_COMPUTER
endfunction
function L29 takes unit WX7,integer L_9,real D4D returns nothing
local integer D7D=GetHeroAgi(WX7,false)
local integer D8D=GetHeroStr(WX7,false)
local real D9D=GetUnitState(WX7,UNIT_STATE_MANA)
if L_9==0 then
if D9D>=D4D and D7D>2 and XH7(WX7)==false then
call SetUnitState(WX7,UNIT_STATE_MANA,D9D-D4D)
call SetHeroAgi(WX7,D7D-2,true)
call SetHeroStr(WX7,D8D+2,true)
endif
elseif L_9==1 then
if D9D>=D4D and D8D>2 and XH7(WX7)==false then
call SetUnitState(WX7,UNIT_STATE_MANA,D9D-D4D)
call SetHeroAgi(WX7,D7D+2,true)
call SetHeroStr(WX7,D8D-2,true)
endif
endif
endfunction
function DDD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local integer DED=GetUnitAbilityLevel(WI7,1093684056)
call L29(WI7,1,30./DED)
set t=null
set WI7=null
return false
endfunction
function DFD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local integer DED=GetUnitAbilityLevel(WI7,1093684056)
call L29(WI7,0,30./DED)
set t=null
set WI7=null
return false
endfunction
function DGD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=GetTriggerUnit()
local trigger DHD=OE7(OB7,"Iterate")
local integer DED=GetUnitAbilityLevel(WI7,1093684056)
local integer DID=OM7(OB7,"LastOrder")
local real DJD=1./DED
if GetIssuedOrderId()==$D0245 then
if DHD!=null then
call NM7(GetHandleId(DHD))
call OZ7(DHD)
endif
set DHD=CreateTrigger()
call TriggerRegisterTimerEvent(DHD,DJD,true)
call TriggerAddCondition(DHD,Condition(function DDD))
call NT7(GetHandleId(DHD),"Hero",WI7)
call NV7(OB7,"Iterate",DHD)
call NP7(OB7,"LastOrder",GetIssuedOrderId())
call UnitAddAbility(WI7,1093808716)
call UnitRemoveAbility(WI7,1093808724)
elseif GetIssuedOrderId()==$D0242 then
if DHD!=null then
call NM7(GetHandleId(DHD))
call OZ7(DHD)
endif
set DHD=CreateTrigger()
call TriggerRegisterTimerEvent(DHD,DJD,true)
call TriggerAddCondition(DHD,Condition(function DFD))
call NT7(GetHandleId(DHD),"Hero",WI7)
call NV7(OB7,"Iterate",DHD)
call NP7(OB7,"LastOrder",GetIssuedOrderId())
call UnitAddAbility(WI7,1093808724)
call UnitRemoveAbility(WI7,1093808716)
elseif GetIssuedOrderId()==$D0246 then
if DHD!=null then
call NM7(GetHandleId(DHD))
call OZ7(DHD)
endif
call NT7(OB7,"Iterate",null)
call NP7(OB7,"LastOrder",GetIssuedOrderId())
call UnitRemoveAbility(WI7,1093808716)
call UnitRemoveAbility(WI7,1093808724)
elseif GetIssuedOrderId()==$D0243 then
if DHD!=null then
call NM7(GetHandleId(DHD))
call OZ7(DHD)
endif
call NT7(OB7,"Iterate",null)
call NP7(OB7,"LastOrder",GetIssuedOrderId())
call UnitRemoveAbility(WI7,1093808716)
call UnitRemoveAbility(WI7,1093808724)
elseif GetIssuedOrderId()==$D0244 and DID!=$D0242 and DID!=$D0242 then
call L29(WI7,1,30./ DED)
elseif GetIssuedOrderId()==$D0241 and DID!=$D0242 and DID!=$D0242 then
call L29(WI7,0,30./ DED)
endif
set t=null
set WI7=null
set DHD=null
return false
endfunction
function DKD takes nothing returns nothing
local unit WX7=GetTriggerUnit()
local trigger t
local integer I97
local integer BC7=GetUnitAbilityLevel(GetTriggerUnit(),1093684056)
if BC7==1 then
call SetHeroAgi(WX7,GetHeroAgi(WX7,false)+3,true)
call SetHeroStr(WX7,GetHeroStr(WX7,false)+3,true)
else
call SetHeroAgi(WX7,GetHeroAgi(WX7,false)+1,true)
call SetHeroStr(WX7,GetHeroStr(WX7,false)+1,true)
endif
if BC7==1 then
set t=CreateTrigger()
set I97=GetHandleId(t)
call XF7(WX7,1093684055)
call TriggerRegisterUnitEvent(t,WX7,EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function DGD))
call NT7(I97,"Iterate",null)
else
call SetUnitAbilityLevel(WX7,1093684055,BC7)
endif
set t=null
set WX7=null
endfunction
function DMD takes nothing returns boolean
return GetLearnedSkill()==1093684056 and IsUnitIllusion(GetTriggerUnit())==false and GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER
endfunction
function DND takes nothing returns nothing
local unit u8=GetTriggerUnit()
local trigger Ue
local trigger UE
local trigger Ub
local trigger UB
if(GetUnitAbilityLevel(u8,1093684056)==1)then
call XF7(u8,1093684055)
set UB=CreateTrigger()
call DisableTrigger(UB)
call TriggerRegisterTimerEventPeriodic(UB,1.)
call TriggerAddAction(UB,function u9)
call NT7(GetHandleId(UB),"Morphling",u8)
set Ub=CreateTrigger()
call DisableTrigger(Ub)
call TriggerRegisterTimerEventPeriodic(Ub,1.)
call TriggerAddAction(Ub,function u7)
call NT7(GetHandleId(Ub),"Morphling",u8)
set Ue=CreateTrigger()
call ky(Ue,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(Ue,Condition(function L09))
call TriggerAddAction(Ue,function UC)
call NV7(GetHandleId(Ue),"MorphAgi",UB)
call NV7(GetHandleId(Ue),"MorphStr",Ub)
call NT7(GetHandleId(Ue),"Morphling",u8)
set UE=CreateTrigger()
call ky(UE,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(UE,Condition(function L19))
call TriggerAddAction(UE,function UA)
call NV7(GetHandleId(UE),"MorphAgi",UB)
call NV7(GetHandleId(UE),"MorphStr",Ub)
call NT7(GetHandleId(UE),"Morphling",u8)
if(GetPlayerController(GetOwningPlayer(u8))!=MAP_CONTROL_USER)then
call NV7(GetHandleId(GetOwningPlayer(u8)),"MorphAgi",UB)
call NV7(GetHandleId(GetOwningPlayer(u8)),"MorphStr",Ub)
endif
else
call SetUnitAbilityLevel(u8,1093684055,GetUnitAbilityLevel(u8,1093684056))
endif
set u8=null
set Ue=null
set UE=null
set Ub=null
set UB=null
endfunction
function pZ takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function L59))
call TriggerAddAction(t,function DKD)
set t=null
endfunction
function FW8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function DMD))
call TriggerAddAction(t,function DND)
set t=null
endfunction
function DOD takes nothing returns boolean
return GetSpellAbilityId()==1093682998 and GetUnitTypeId(GetSpellTargetUnit())!=1848651852 and WQ7(GetSpellTargetUnit())==false
endfunction
function DPD takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer V77=GetUnitAbilityLevel(WI7,1093682998)
local unit BB7
local location LB8
local real l4
local integer LX9=GetHeroAgi(WI7,true)
local integer LY9=GetHeroStr(WI7,true)
local real DQD=I2R(LX9)/ I2R(LY9)
local real DRD=I2R(LY9)/ I2R(LX9)
local real DSD
local real DTD
local real DUD
local real DVD
local real YM7
local real DWD
local integer DXD
local integer DYD
local integer DZD
local string DAD
local string DBD
local string DCD
if DQD<.5 then
set DSD=.25
set DTD=20*V77
elseif DQD>1.5 then
set DSD=.5*V77
set DTD=20*V77
else
set DSD=.25+(DQD-.5)*(.5*V77-.25)
set DTD=20*V77
endif
if DRD<.5 then
set DUD=1.25
set DVD=100
elseif DRD>1.5 then
set DUD=1*(V77-.25)+1.25
set DVD=600
else
set DVD=100+(DRD-.5)*500
set DUD=1.25+(DRD-.5)*(1*V77-.25)
endif
set YM7=DTD+DSD*LX9
set DWD=DUD
set DXD=R2I(DWD)
set DYD=R2I($A*DWD-DXD*$A)
set DZD=R2I(100*DWD-DYD*$A-DXD*100)
set DAD=I2S(DXD)
set DBD=I2S(DYD)
set DCD=I2S(DZD)
set l4=Atan2(GetUnitY(m5)-GetUnitY(WI7),GetUnitX(m5)-GetUnitX(WI7))
set LB8=Location(GetUnitX(m5)+DVD*Cos(l4),GetUnitY(m5)+DVD*Sin(l4))
call SetUnitPositionLoc(m5,LB8)
call Y67(GetLocationX(LB8),GetLocationY(LB8),$C8)
call RemoveLocation(LB8)
call YW7("|c001ce6b9+"+I2S(R2I(YM7))+"|r |c00ff0303+"+DAD+"."+DBD+DCD+"|r",1,m5,.023,$FF,$FF,$FF,$D8)
call B67(WI7,m5,1,YM7)
call BA7(WI7,m5,DWD)
set WI7=null
set m5=null
set BB7=null
set LB8=null
endfunction
function FU8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DOD))
call TriggerAddAction(t,function DPD)
set t=null
call X_7(1093687350)
endfunction
function D3D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer WF8=(LoadInteger(L7,(I97),(34)))-1
local texttag tt
call SaveInteger(L7,(I97),(34),(WF8))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
set tt=CreateTextTag()
call SetTextTagText(tt,I2S(WF8),.03)
call SetTextTagPosUnit(tt,ZX7,0)
call SetTextTagColorBJ(tt,0,29,$FF,$F)
call SetTextTagVelocity(tt,0,.035)
call SetTextTagFadepoint(tt,3)
call SetTextTagLifespan(tt,.9)
call SetTextTagPermanent(tt,false)
call SetTextTagVisibility(tt,false)
if GetOwningPlayer(ZX7)==GetLocalPlayer()then
call SetTextTagVisibility(tt,true)
endif
set tt=CreateTextTag()
call SetTextTagText(tt,I2S(WF8),.03)
call SetTextTagPosUnit(tt,IH7,0)
call SetTextTagColorBJ(tt,0,29,$FF,$F)
call SetTextTagVelocity(tt,0,.035)
call SetTextTagFadepoint(tt,3)
call SetTextTagLifespan(tt,.9)
call SetTextTagPermanent(tt,false)
call SetTextTagVisibility(tt,false)
if GetOwningPlayer(ZX7)==GetLocalPlayer()then
call SetTextTagVisibility(tt,true)
endif
endif
set t=null
set tt=null
set ZX7=null
set IH7=null
return false
endfunction
function D6D takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local unit WX7=(LoadUnitHandle(L7,(GetHandleId(t)),($E)))
local unit DLD=(LoadUnitHandle(L7,(GetHandleId(WX7)),($E5)))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",GetUnitX(DLD),GetUnitY(DLD)))
call RemoveUnit(DLD)
call UnitRemoveAbility(WX7,(1093683011))
if(LoadInteger(L7,(GetHandleId(WX7)),(704)))==0 or(LoadInteger(L7,(GetHandleId(WX7)),(704)))==(1093683000)then
call SetPlayerAbilityAvailable(GetOwningPlayer(WX7),(1093683000),true)
endif
call FlushChildHashtable(L7,(GetHandleId(t)))
call OZ7((t))
set WX7=null
set DLD=null
set t=null
endfunction
function D1D takes nothing returns boolean
return(GetSpellAbilityId()==(1093683011))
endfunction
function D0D takes nothing returns nothing
local unit WX7=GetTriggerUnit()
local integer I97=GetHandleId(WX7)
local unit DLD=(LoadUnitHandle(L7,(I97),($E5)))
local real x=GetUnitX(DLD)
local real y=GetUnitY(DLD)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",GetUnitX(WX7),GetUnitY(WX7)))
call KillUnit(DLD)
call SetUnitX(WX7,x)
call SetUnitY(WX7,y)
call PanCameraToTimedForPlayer(GetOwningPlayer(WX7),x,y,0)
call IssueImmediateOrderById(WX7,$D0004)
set WX7=null
set DLD=null
endfunction
function D5D takes nothing returns boolean
return GetUnitAbilityLevel(GetSummonedUnit(),(1110455088))>0 and GetUnitState(GetSummonedUnit(),UNIT_STATE_LIFE)>0
endfunction
function D2D takes nothing returns nothing
local unit WX7=GetSummoningUnit()
local integer I97=GetHandleId(WX7)
local unit IH7=(LoadUnitHandle(L7,(I97),($E4)))
local unit DLD=GetSummonedUnit()
local trigger t
call SetPlayerAbilityAvailable(GetOwningPlayer(WX7),(1093683000),false)
call XF7(WX7,(1093683011))
call SetUnitColor(DLD,GetPlayerColor(GetOwningPlayer(IH7)))
call SaveUnitHandle(L7,(I97),($E5),(DLD))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,WX7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,DLD,EVENT_UNIT_DEATH)
call TriggerAddAction(t,function D6D)
call SaveUnitHandle(L7,(GetHandleId(t)),($E),(WX7))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,WX7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,DLD,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function D3D))
call SaveUnitHandle(L7,(GetHandleId(t)),(2),(WX7))
call SaveUnitHandle(L7,(GetHandleId(t)),(17),(DLD))
call SaveInteger(L7,(GetHandleId(t)),(34),(GetUnitAbilityLevel(WX7,(1093683000))*$F+$F-1))
set WX7=null
set IH7=null
set DLD=null
set t=null
endfunction
function D_D takes nothing returns boolean
return GetSpellAbilityId()==(1093683000)
endfunction
function E4D takes nothing returns nothing
local unit WX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
call SaveUnitHandle(L7,(GetHandleId(WX7)),($E4),(IH7))
set WX7=null
set IH7=null
endfunction
function E7D takes nothing returns boolean
if GetSpellAbilityId()==(1093683000)then
if GetOwningPlayer(GetSpellTargetUnit())==GetOwningPlayer(GetTriggerUnit())then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848659014))
endif
endif
return false
endfunction
function FV8 takes nothing returns nothing
local trigger t
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function D_D))
call TriggerAddAction(t,function E4D)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function D5D))
call TriggerAddAction(t,function D2D)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function D1D))
call TriggerAddAction(t,function D0D)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function E7D))
set t=null
endfunction
function E8D takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),YQ4)==false then
call GroupAddUnit(YR4,GetEnumUnit())
call UnitRemoveAbility(GetEnumUnit(),1110454858)
call UnitRemoveAbility(GetEnumUnit(),1112896368)
call UnitRemoveAbility(GetEnumUnit(),1114993524)
endif
endfunction
function E9D takes nothing returns nothing
call UnitRemoveAbility(GetEnumUnit(),1110454858)
call UnitRemoveAbility(GetEnumUnit(),1112896368)
call UnitRemoveAbility(GetEnumUnit(),1114993524)
endfunction
function EDD takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),YP4)==false then
call GroupAddUnit(YP4,GetEnumUnit())
call SetUnitOwner(YO4,GetOwningPlayer(GetEnumUnit()),false)
call IssueTargetOrderById(YO4,$D0103,GetEnumUnit())
endif
endfunction
function XWI takes nothing returns nothing
call SetWidgetLife(GetEnumUnit(),GetWidgetLife(GetEnumUnit())+.1*.05*GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE))
endfunction
function XYI takes nothing returns boolean
return(IsUnitAlly(IN4,GetOwningPlayer(GetFilterUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)!=null
endfunction
function EED takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real x=GetUnitX(ZX7)
local real y=GetUnitY(ZX7)
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
local group g
local group BQ9=(LoadGroupHandle(L7,(I97),($BB)))
if GetTriggerEvalCount(t)==$A then
call XF7(ZX7,1093809221)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093678933,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093817170,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093809221,true)
endif
if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetTriggerEvalCount(t)>$8C or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093809221)then
if(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==0 or(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==1093678933 then
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093678933,true)
endif
if(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==0 or(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==1093817170 then
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093817170,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093809221,false)
call ForGroup(BQ9,function E9D)
call WR7(BQ9)
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
set g=WS7()
set IN4=ZX7
set YN4=ZX7
set YO4=BB7
set YP4=BQ9
call GroupEnumUnitsInRange(g,x,y,$4E2+25,Condition(function A77))
call ForGroup(g,function EDD)
set YQ4=g
set YR4=WS7()
call ForGroup(BQ9,function E8D)
call GroupRemoveGroup(YR4,BQ9)
if GetUnitAbilityLevel(ZX7,1093817170)>0 then
call GroupEnumUnitsInRange(g,x,y,$4E2+25,Condition(function XYI))
call ForGroup(g,function XWI)
endif
call WR7(g)
call WR7(YR4)
endif
set t=null
set g=null
set ZX7=null
set BQ9=null
set BB7=null
return false
endfunction
function EFD takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local real x=GetUnitX(ZX7)
local real y=GetUnitY(ZX7)
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,x,y,0)
call UnitAddAbility(BB7,1093678932)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function EED))
call SaveGroupHandle(L7,(I97),($BB),(WS7()))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(19),(BB7))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("war3mapImported\\SongOfTheSiren_2.mdx",ZX7,"origin")))
set t=null
set ZX7=null
endfunction
function EGD takes nothing returns boolean
if GetSpellAbilityId()==1093678933 or GetSpellAbilityId()==1093817170 then
call EFD()
endif
return false
endfunction
function FX8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function EGD))
set t=null
endfunction
function EHD takes unit ZX7,unit IH7 returns nothing
local integer BC7=GetUnitAbilityLevel(ZX7,1093815125)
local integer id=1093809204
call B67(ZX7,IH7,19,60+40*BC7)
if BC7==2 then
set id=1093809205
elseif BC7==3 then
set id=1093809206
elseif BC7==4 then
set id=1093809207
endif
if YS8(IH7)==false then
call Z67(IH7,id,1,8)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),id,false)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl",IH7,"chest"))
set ZX7=null
set IH7=null
endfunction
function EID takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),E17)==false then
call GroupAddUnit(E17,GetEnumUnit())
call EHD(EL7,GetEnumUnit())
endif
endfunction
function EJD takes nothing returns nothing
local unit ZX7=GetEnumUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local real x=GetUnitX(ZX7)
local real y=GetUnitY(ZX7)
local group g=WS7()
call DestroyEffect(AddSpecialEffect("war3mapImported\\RipTide09.mdx",x,y))
set IN4=ZX7
call GroupEnumUnitsInRange(g,x,y,345,Condition(function AJ7))
call ForGroup(g,function EID)
call WR7(g)
set t=null
set g=null
endfunction
function EKD takes nothing returns boolean
return IsUnitIllusion(GetFilterUnit())and XH7(GetFilterUnit())==false
endfunction
function EMD takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local real x=GetUnitX(ZX7)
local real y=GetUnitY(ZX7)
local group g=WS7()
local integer i=0
set E17=WS7()
set EL7=ZX7
call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(ZX7),Condition(function EKD))
call GroupAddUnit(g,ZX7)
call ForGroup(g,function EJD)
call WR7(g)
call WR7(E17)
set ZX7=null
set g=null
endfunction
function END takes nothing returns boolean
if GetSpellAbilityId()==1093815125 then
call EMD()
endif
return false
endfunction
function FY8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function END))
set t=null
endfunction
function EOD takes unit ZX7,unit IH7,integer BC7 returns nothing
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(ZX7),GetUnitY(ZX7),0)
call UnitAddAbility(BB7,1093681729)
call SetUnitAbilityLevel(BB7,1093681729,BC7)
call IssueTargetOrderById(BB7,$D008A,IH7)
set BB7=null
endfunction
function EPD takes nothing returns boolean
if IsUnitIllusion(GetFilterUnit()) and GetUnitTypeId(GetFilterUnit())==1212363833 and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())then
call EOD(GetFilterUnit(),YT4,GetUnitAbilityLevel(GetTriggerUnit(),1093809220))
endif
return false
endfunction
function EQD takes nothing returns boolean
if IsUnitIllusion(GetFilterUnit()) and GetUnitTypeId(GetFilterUnit())==1212363833 and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())then
call SetUnitFacing(GetFilterUnit(),IJ4)
call SetUnitAnimation(GetFilterUnit(),"spell")
endif
return false
endfunction
function ERD takes nothing returns nothing
local unit WX7=GetTriggerUnit()
local group g=WS7()
set IJ4=J77(GetUnitX(WX7),GetUnitY(WX7),GetUnitX(YT4),GetUnitY(YT4))
call GroupEnumUnitsInRange(g,GetUnitX(WX7),GetUnitY(WX7),700,Condition(function EQD))
call WR7(g)
set WX7=null
set g=null
endfunction
function ESD takes nothing returns nothing
local unit WX7=GetTriggerUnit()
local unit IH7=YT4
local group g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(WX7),GetUnitY(WX7),700,Condition(function EPD))
call WR7(g)
set WX7=null
set g=null
endfunction
function ETD takes nothing returns boolean
if GetSpellAbilityId()==1093809220 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
if WQ7(GetSpellTargetUnit())==false then
set YS4=0
set YT4=GetSpellTargetUnit()
call EOD(GetTriggerUnit(),YT4,GetUnitAbilityLevel(GetTriggerUnit(),1093809220))
call ESD()
endif
else
call ERD()
endif
endif
return false
endfunction
function FZ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function ETD))
set t=null
endfunction
function EUD takes unit EVD returns integer
local real r=GetRandomReal(0,100)
local integer V77=GetUnitAbilityLevel(EVD,1093679160)
local boolean EWD=MV7(EVD,ZU[FB4])!=null
local integer EXD=0
local integer id=GetPlayerId(GetOwningPlayer(EVD))
set EWD=false
if V77==1 then
set TI4[id]=TI4[id]+1
if EWD then
if r<30 then
set TG4[id]=TG4[id]+1
set EXD=3
elseif r<60 then
set TF4[id]=TF4[id]+1
set EXD=2
endif
else
if r<25 then
set EXD=2
set TF4[id]=TF4[id]+1
endif
endif
elseif V77==2 then
set TI4[id]=TI4[id]+1
if EWD then
if r<17.5 then
set EXD=4
set TH4[id]=TH4[id]+1
elseif r<35 then
set EXD=3
set TG4[id]=TG4[id]+1
elseif r<70 then
set EXD=2
set TF4[id]=TF4[id]+1
endif
else
if r<20 then
set EXD=3
set TG4[id]=TG4[id]+1
elseif r<40 then
set EXD=2
set TF4[id]=TF4[id]+1
endif
endif
elseif V77==3 then
set TI4[id]=TI4[id]+1
if EWD then
if r<$A then
set EXD=5
set N4[id]=N4[id]+1
elseif r<20 then
set EXD=4
set TH4[id]=TH4[id]+1
elseif r<40 then
set EXD=3
set TG4[id]=TG4[id]+1
elseif r<80 then
set EXD=2
set TF4[id]=TF4[id]+1
endif
else
if r<12.5 then
set EXD=4
set TH4[id]=TH4[id]+1
elseif r<25 then
set EXD=3
set TG4[id]=TG4[id]+1
elseif r<50 then
set EXD=2
set TF4[id]=TF4[id]+1
endif
endif
endif
return EXD
endfunction
function EYD takes nothing returns boolean
local unit m5=GetFilterUnit()
local unit WI7=GetTriggerUnit()
if IsUnitAlly(m5,GetOwningPlayer(WI7))and GetUnitState(m5,UNIT_STATE_LIFE)>0 and GetUnitAbilityLevel(m5,1113746543)==0 then
if(GetOwningPlayer(m5)==Z7[0]or GetOwningPlayer(m5)==A7[0])then
if(GetUnitTypeId(m5)==1969711215 or GetUnitTypeId(m5)==1966092337 or GetUnitTypeId(m5)==1970169187 or GetUnitTypeId(m5)==1966092338)then
set m5=null
set WI7=null
return true
endif
if(GetUnitTypeId(m5)==1702061422 or GetUnitTypeId(m5)==1697656918 or GetUnitTypeId(m5)==1701081721 or GetUnitTypeId(m5)==1697656919)then
set m5=null
set WI7=null
return true
endif
return false
elseif IsUnitType(m5,UNIT_TYPE_HERO) then
set m5=null
set WI7=null
return true
elseif GetOwningPlayer(m5)==GetOwningPlayer(WI7)then
set m5=null
set WI7=null
return true
endif
endif
set m5=null
set WI7=null
return false
endfunction
function EZD takes integer r returns nothing
local unit WI7=GetTriggerUnit()
local integer V77=r
local group LQ7=WS7()
local unit BB7
local unit D_8
local integer EAD=GetSpellAbilityId()
local integer T8=1
if r==2 then
call YW7(GetObjectName(1848658743),5,GetTriggerUnit(),.03,$FF,0,0,$FF)
elseif r==3 then
call YW7(GetObjectName(1848658516),5,GetTriggerUnit(),.03,$FF,0,0,$FF)
elseif r==4 then
call YW7(GetObjectName(1848658744),5,GetTriggerUnit(),.03,$FF,0,0,$FF)
elseif r==5 then
call YW7(GetObjectName(1848658511),5,GetTriggerUnit(),.03,$FF,0,0,$FF)
endif
set r=r-1
call GroupEnumUnitsInRange(LQ7,GetUnitX(WI7),GetUnitY(WI7),600,Condition(function EYD))
if WI7!=GetSpellTargetUnit()then
call GroupAddUnit(LQ7,WI7)
endif
loop
exitwhen T8>V77
set T8=T8+1
set BB7=CreateUnit(GetOwningPlayer(WI7),1697656899,GetUnitX(WI7),GetUnitY(WI7),270)
call ND7(BB7)
call XF7(BB7,EAD)
call SetUnitAbilityLevel(BB7,EAD,GetUnitAbilityLevel(WI7,EAD))
call UnitApplyTimedLife(BB7,1112820806,1.)
set D_8=GroupPickRandomUnit(LQ7)
call N87(BB7,"bloodlust",D_8)
call SetUnitPathing(BB7,false)
call SetUnitInvulnerable(BB7,true)
call XF7(BB7,1097625443)
call GroupRemoveUnit(LQ7,D_8)
endloop
call WR7(LQ7)
set WI7=null
set LQ7=null
set BB7=null
set D_8=null
endfunction
function EBD takes nothing returns boolean
local integer r
if GetUnitAbilityLevel(GetTriggerUnit(),1093679160)>0 and(GetSpellAbilityId()==1093679155 or GetSpellAbilityId()==1093679177 or GetSpellAbilityId()==1093679175 or GetSpellAbilityId()==1093679174)then
set r=EUD(GetTriggerUnit())
if r>0 then
call EZD(r)
endif
endif
return false
endfunction
function FB8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function EBD))
set t=null
endfunction
function ECD takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
call XF7(BB7,1093815122)
call IssueTargetOrderById(BB7,$D007F,IH7)
set ZX7=null
set IH7=null
set BB7=null
endfunction
function E3D takes nothing returns nothing
local unit ZX7=IN4
call XF7(ZX7,1093815121)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093815121,true)
call NS7(GetHandleId(ZX7),"AI|Magi2Blast",true)
set ZX7=null
endfunction
function E6D takes nothing returns nothing
local unit ZX7=IN4
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093815121,false)
set ZX7=null
endfunction
function ELD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
local unit p5=O77(OB7,"Source")
local integer E1D=OM7(OB7,"Iterations")
local integer V77=OM7(OB7,"Level")
local integer E0D=OM7(OB7,"Spell")
local unit BB7
if GetTriggerEvalCount(t)>E1D then
call NM7(OB7)
call OZ7(t)
else
set BB7=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
if E0D==1093815121 then
set E0D=1093815122
endif
call XF7(BB7,E0D)
call SetUnitAbilityLevel(BB7,E0D,V77)
call IssueTargetOrderById(BB7,$D007F,m5)
endif
set t=null
set m5=null
set p5=null
set BB7=null
return false
endfunction
function E5D takes integer r returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer E0D=GetSpellAbilityId()
local integer V77=GetUnitAbilityLevel(p5,E0D)
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
if r==2 then
call YW7(GetObjectName(1848658743),5,GetTriggerUnit(),.03,$FF,0,0,$FF)
elseif r==3 then
call YW7(GetObjectName(1848658516),5,GetTriggerUnit(),.03,$FF,0,0,$FF)
elseif r==4 then
call YW7(GetObjectName(1848658744),5,GetTriggerUnit(),.03,$FF,0,0,$FF)
elseif r==5 then
call YW7(GetObjectName(1848658511),5,GetTriggerUnit(),.03,$FF,0,0,$FF)
endif
set r=r-1
call NT7(OB7,"Target",m5)
call NT7(OB7,"Source",p5)
call NP7(OB7,"Iterations",r)
call NP7(OB7,"Level",V77)
call NP7(OB7,"Spell",E0D)
call TriggerRegisterTimerEvent(t,.3,true)
call TriggerAddCondition(t,Condition(function ELD))
set t=null
set m5=null
set p5=null
endfunction
function E2D takes nothing returns boolean
local integer r
if GetUnitAbilityLevel(GetTriggerUnit(),1093679160)>0 and WQ7(GetSpellTargetUnit())==false and(GetSpellAbilityId()==1093678167 or GetSpellAbilityId()==1093679172 or GetSpellAbilityId()==1093679169 or GetSpellAbilityId()==1093679161 or GetSpellAbilityId()==1093815121)then
set r=EUD(GetTriggerUnit())
if r>1 and((LoadInteger(L7,(GetHandleId((GetSpellTargetUnit()))),((4322))))==1)==false then
call E5D(r)
endif
endif
if WQ7(GetSpellTargetUnit())==false and GetSpellAbilityId()==1093815121 then
call ECD()
endif
return false
endfunction
function E_D takes nothing returns boolean
local integer id=GetPlayerId(GetTriggerPlayer())
local string DAD
local string DBD
local string DCD
local string F4D
local string F7D
local string str6
if TI4[id]>0 then
set DAD=GetObjectName(1848658504)+" "+I2S(TI4[id])
set DBD=GetObjectName(1848658509)+" "+I2S(TF4[id]+TG4[id]+TH4[id]+N4[id])+" ("+I2S((TF4[id]+TG4[id]+TH4[id]+N4[id])*100/ TI4[id])+"%)"
set DCD=GetObjectName(1848658508)+" "+I2S(TF4[id])+" ("+I2S(100*TF4[id]/ TI4[id])+"%)"
set F4D=GetObjectName(1848658507)+" "+I2S(TG4[id])+" ("+I2S(100*TG4[id]/ TI4[id])+"%)"
set F7D=GetObjectName(1848658506)+" "+I2S(TH4[id])+" ("+I2S(100*TH4[id]/ TI4[id])+"%)"
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,10.,DAD)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,10.,DBD)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,10.,DCD)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,10.,F4D)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,10.,F7D)
endif
return false
endfunction
function FA8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function E2D))
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-st",true)
call TriggerAddCondition(t,Condition(function E_D))
set t=null
endfunction
function F8D takes nothing returns boolean
return GetSpellAbilityId()==1093679182
endfunction
function Uu takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)!=1 and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))!=null
endfunction
function UU takes nothing returns nothing
call B67(GetTriggerUnit(),GetEnumUnit(),3,F8)
endfunction
function F9D takes nothing returns nothing
local boolexpr hP=Condition(function Uu)
local group LQ7=WS7()
local real x=GetUnitX(GetSpellTargetUnit())
local real y=GetUnitY(GetSpellTargetUnit())
set F8=90*GetUnitAbilityLevel(GetTriggerUnit(),1093679182)
call GroupEnumUnitsInRange(LQ7,x,y,285,hP)
call ForGroup(LQ7,function UU)
if GetUnitState(GetSpellTargetUnit(),UNIT_STATE_LIFE)>1 then
call SetUnitState(GetSpellTargetUnit(),UNIT_STATE_LIFE,GetUnitState(GetSpellTargetUnit(),UNIT_STATE_LIFE)+F8)
endif
call WR7(LQ7)
call DestroyBoolExpr(hP)
set LQ7=null
set hP=null
endfunction
function PN takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function F8D))
call TriggerAddAction(t,function F9D)
set t=null
endfunction
function FDD takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==K34[21]and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())and IsUnitIllusion(GetFilterUnit())==false then
set IN4=GetFilterUnit()
endif
return false
endfunction
function FED takes nothing returns nothing
local unit FFD=GetTriggerUnit()
local unit p5
local group g=WS7()
local real x
local real y
set IN4=null
call GroupEnumUnitsInRange(g,GetUnitX(FFD),GetUnitY(FFD),$3E8,Condition(function FDD))
call WR7(g)
set p5=IN4
if p5!=null then
set x=GetUnitX(p5)
set y=GetUnitY(p5)
call SetUnitPosition(FFD,x,y)
endif
set x=GetUnitX(FFD)+600*Cos(GetUnitFacing(FFD)*bj_DEGTORAD)
set y=GetUnitY(FFD)+600*Sin(GetUnitFacing(FFD)*bj_DEGTORAD)
call IssuePointOrderById(FFD,$D0012,x,y)
set FFD=null
set p5=null
set g=null
endfunction
function FGD takes nothing returns boolean
if GetUnitAbilityLevel(GetTriggerUnit(),1110455105)>0 then
call FED()
endif
return false
endfunction
function Po takes nothing returns nothing
local trigger t=CreateTrigger()
local region r=CreateRegion()
call RegionAddRect(r,bj_mapInitialPlayableArea)
call TriggerRegisterEnterRegion(t,r,Condition(function TO7))
call TriggerAddCondition(t,Condition(function FGD))
set t=null
set r=null
endfunction
function FHD takes nothing returns boolean
return((IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker())))and(not IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE))and(UnitHasBuffBJ(GetAttacker(),1110455106))and(not IsUnitType(GetTriggerUnit(),UNIT_TYPE_ANCIENT)))!=null
endfunction
function FID takes nothing returns boolean
if GetUnitAbilityLevel(GetFilterUnit(),1110455106)>0 then
set IH4=IH4+1
endif
return false
endfunction
function FJD takes nothing returns nothing
local unit FKD=GetAttacker()
local group g=WS7()
local integer FMD=GetRandomInt(1,100)
local integer FND=GetUnitAbilityLevel(FKD,1093682242)
local integer FOD=GetUnitAbilityLevel(FKD,1093687627)
local unit BB7
local integer FPD=3+2*FND
local integer FQD=35+5*FND
set IH4=0
call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(FKD),Condition(function FID))
call WR7(g)
if IH4<FPD then
if IsUnitIllusion(FKD)==false and FMD<=FQD then
set BB7=CreateUnit(GetOwningPlayer(FKD),1697656901,GetUnitX(FKD),GetUnitY(FKD),0)
call XF7(BB7,1093682244)
call IssueTargetOrderById(BB7,$D0132,FKD)
endif
if IsUnitIllusion(FKD) and FMD<=(8+0*FOD) then
set BB7=CreateUnit(GetOwningPlayer(FKD),1697656901,GetUnitX(FKD),GetUnitY(FKD),0)
call XF7(BB7,1093816887)
call IssueTargetOrderById(BB7,$D0132,FKD)
endif
endif
set FKD=null
set g=null
set BB7=null
endfunction
function PO takes nothing returns nothing
set dU=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dU,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(dU,Condition(function FHD))
call TriggerAddAction(dU,function FJD)
endfunction
function FRD takes nothing returns boolean
local unit FSD=GetSummonedUnit()
local unit oA
local unit m5
if GetUnitAbilityLevel(FSD,1110456632)>0 then
set oA=GetSummoningUnit()
set m5=O77(GetHandleId(oA),"SpiritTarget")
call SetUnitX(FSD,GetUnitX(m5))
call SetUnitY(FSD,GetUnitY(m5))
call IssueTargetOrderById(FSD,$D000F,m5)
endif
set FSD=null
set oA=null
set m5=null
return false
endfunction
function FTD takes player p,unit m5,integer V77 returns nothing
local unit oA=CreateUnit(p,1697656901,GetUnitX(m5),GetUnitX(m5),0)
local integer FUD
call NT7(GetHandleId(oA),"SpiritTarget",m5)
if V77==1 then
set FUD=1093742664
elseif V77==2 then
set FUD=1093742663
elseif V77==3 then
set FUD=1093742665
else
set FUD=1093742662
endif
call XF7(oA,FUD)
call IssueTargetOrderById(oA,$D0132,M7[GetPlayerId(p)])
set oA=null
endfunction
function FVD takes player p,unit IH7,integer V77,boolean FWD,boolean FXD returns nothing
local real VW9=50+50*V77
local unit BB7
if FXD then
set BB7=CreateUnit(GetOwningPlayer(IH7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
call XF7(BB7,1093742659)
call SetUnitAbilityLevel(BB7,1093742659,V77)
call IssueTargetOrderById(BB7,$D00DD,IH7)
call B67(M7[GetPlayerId(p)],IH7,1,VW9)
if FWD then
call FTD(p,IH7,V77)
endif
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\IllidanMissile\\IllidanMissile.mdl",IH7,"origin"))
set BB7=null
endfunction
function FYD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local player p=O97(OB7,"SourcePlayer")
local unit m5=O77(OB7,"Target")
local integer V77=OM7(OB7,"Level")
local boolean FXD=OO7(OB7,"damage")
local unit IJ=O77(OB7,"Projectile")
local real x=GetUnitX(IJ)
local real y=GetUnitY(IJ)
local real hN=GetUnitX(m5)
local real ho=GetUnitY(m5)
local real Ik=$3E8*.035
local real IK=J77(x,y,hN,ho)
local real Il=x+Ik*Cos(IK*bj_DEGTORAD)
local real IL=y+Ik*Sin(IK*bj_DEGTORAD)
call SetUnitX(IJ,Il)
call SetUnitY(IJ,IL)
call SetUnitFacing(IJ,IK)
if KF7(hN,ho,Il,IL)<=Ik then
call FVD(p,m5,V77,true,FXD)
call KillUnit(IJ)
call NM7(OB7)
call OZ7(t)
endif
set t=null
set m5=null
set IJ=null
return false
endfunction
function FZD takes unit p5,integer V77,unit m5,boolean FXD returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit IJ=CreateUnit(GetOwningPlayer(p5),1747990092,GetUnitX(p5),GetUnitY(p5),J77(GetUnitX(p5),GetUnitY(p5),GetUnitX(m5),GetUnitY(m5)))
call NZ7(OB7,"SourcePlayer",GetOwningPlayer(p5))
call NT7(OB7,"Target",m5)
call NS7(OB7,"damage",FXD)
call NT7(OB7,"Projectile",IJ)
call NP7(OB7,"Level",V77)
call TriggerRegisterTimerEvent(t,.035,true)
call TriggerAddCondition(t,Condition(function FYD))
set t=null
set IJ=null
endfunction
function FAD takes nothing returns boolean
if IsUnitIllusion(GetFilterUnit()) and GetUnitTypeId(GetFilterUnit())==1332179560 and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())then
call FZD(GetFilterUnit(),GetUnitAbilityLevel(GetTriggerUnit(),1093742660),GetSpellTargetUnit(),false)
endif
return false
endfunction
function FBD takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local integer V77=GetUnitAbilityLevel(WI7,1093742660)
local unit m5=GetSpellTargetUnit()
local group g=WS7()
local boolean FCD=WQ7(GetSpellTargetUnit())
call GroupEnumUnitsInRange(g,GetUnitX(WI7),GetUnitY(WI7),750,Condition(function FAD))
if FCD then
call FZD(WI7,V77,m5,false)
else
call FZD(WI7,V77,m5,true)
endif
call WR7(g)
set WI7=null
set m5=null
set g=null
endfunction
function F3D takes nothing returns boolean
if IsUnitIllusion(GetFilterUnit()) and GetUnitTypeId(GetFilterUnit())==1332179560 and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())then
call SetUnitFacing(GetFilterUnit(),IJ4)
call SetUnitAnimation(GetFilterUnit(),"spell")
endif
return false
endfunction
function F6D takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local group g=WS7()
set IJ4=J77(GetUnitX(WI7),GetUnitY(WI7),GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()))
call GroupEnumUnitsInRange(g,GetUnitX(WI7),GetUnitY(WI7),750,Condition(function F3D))
call WR7(g)
set WI7=null
set g=null
endfunction
function FLD takes nothing returns boolean
if GetSpellAbilityId()==1093742660 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
call FBD()
else
call F6D()
endif
endif
return false
endfunction
function FC8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FLD))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function FLD))
call X_7(1093742659)
call X_7(1093742664)
call X_7(1093742663)
call X_7(1093742665)
call X_7(1093742662)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function FRD))
set t=null
endfunction
function F1D takes nothing returns nothing
local unit u=GetTriggerUnit()
local unit oA=CreateUnit(GetOwningPlayer(u),1697656901,GetUnitX(u),GetUnitY(u),0)
call XF7(oA,1093682243)
call IssueTargetOrderById(oA,$D0132,u)
set u=null
set oA=null
endfunction
function F0D takes nothing returns boolean
if GetSpellAbilityId()==1093682231 then
call F1D()
endif
return false
endfunction
function F38 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function F0D))
set t=null
endfunction
function F5D takes nothing returns boolean
return GetSpellAbilityId()==1093678938
endfunction
function U4 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>0)!=null
endfunction
function U5 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit oA=CreateUnit(GetOwningPlayer(WI7),1697657394,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),270)
call XF7(oA,1093678676)
call SetUnitAbilityLevel(oA,1093678676,GetUnitAbilityLevel(WI7,1093678938))
call IssueTargetOrderById(oA,$D00CB,GetEnumUnit())
set WI7=null
set oA=null
endfunction
function F2D takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local group LQ7=WS7()
local boolexpr hP=Condition(function U4)
call GroupEnumUnitsInRange(LQ7,GetUnitX(WI7),GetUnitY(WI7),750,hP)
call ForGroup(LQ7,function U5)
call DestroyBoolExpr(hP)
call WR7(LQ7)
set WI7=null
set LQ7=null
endfunction
function F68 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function F5D))
call TriggerAddAction(t,function F2D)
set t=null
endfunction
function F_D takes unit p5,integer V77 returns nothing
local unit BB7=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(p5),GetUnitY(p5),0)
call XF7(BB7,1093748546)
call SetUnitAbilityLevel(BB7,1093748546,V77)
call IssueTargetOrderById(BB7,$D0065,p5)
call XF7(p5,1093808975)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093808975,false)
set BB7=null
endfunction
function G4D takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==1747993172
endfunction
function G7D takes unit G8D returns boolean
local group g=WS7()
local boolean G9D=false
call GroupEnumUnitsInRange(g,GetUnitX(G8D),GetUnitY(G8D),375,Condition(function G4D))
if FirstOfGroup(g)!=null then
set G9D=true
endif
call WR7(g)
set g=null
return G9D
endfunction
function GDD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer B07=OM7(OB7,"TargetIndex")
local unit T37=TQ7(B07)
local integer SV9=OM7(OB7,"Count")
local integer V77=OM7(OB7,"Level")
local real ZV8=(LoadReal(L7,(OB7),(442)))
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED and GetTriggerEventId()!=EVENT_PLAYER_UNIT_SPELL_EFFECT then
set SV9=SV9+1
call NP7(OB7,"Count",SV9)
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093677402 and GetTriggerUnit()==T37 then
call SaveReal(L7,(OB7),(442),(((TimerGetElapsed(W))+1.)*1.))
call DisableTrigger(GetTriggeringTrigger())
call F_D(T37,V77)
call EnableTrigger(GetTriggeringTrigger())
call NP7(OB7,"Count",0)
endif
if nA(GetUnitX(T37),GetUnitY(T37),375)==false and G7D(T37)==false then
if ZV8<(TimerGetElapsed(W))or GetTriggerEvalCount(t)==1 then
call UnitRemoveAbility(T37,1110454833)
call UnitRemoveAbility(T37,1093748545)
call UnitRemoveAbility(T37,1093808975)
call UnitRemoveAbility(T37,1110459705)
call NM7(OB7)
call OZ7(t)
endif
elseif(OO7(OB7,"NaturesGuise|Special")and SV9>($96*V77))then
call UnitRemoveAbility(T37,1110454833)
call UnitRemoveAbility(T37,1093748545)
call UnitRemoveAbility(T37,1093808975)
call UnitRemoveAbility(T37,1110459705)
call NM7(OB7)
call OZ7(t)
elseif OO7(OB7,"NaturesGuise|Special")and GetUnitAbilityLevel(T37,1110454833)==0 and GetUnitAbilityLevel(T37,1093748545)>0 then
call SaveReal(L7,(OB7),(442),(((TimerGetElapsed(W))+1.)*1.))
call DisableTrigger(GetTriggeringTrigger())
call F_D(T37,V77)
call EnableTrigger(GetTriggeringTrigger())
elseif GetUnitAbilityLevel(T37,1110454833)==0 then
call UnitRemoveAbility(T37,1110454833)
call UnitRemoveAbility(T37,1093748545)
call UnitRemoveAbility(T37,1093808975)
call UnitRemoveAbility(T37,1110459705)
call NM7(OB7)
call OZ7(t)
else
call SaveReal(L7,(OB7),(442),(((TimerGetElapsed(W))+1.)*1.))
endif
set t=null
set T37=null
return false
endfunction
function GED takes nothing returns nothing
local unit T37=GetAttacker()
local integer T_7=GetHandleId(T37)
local trigger t=OE7(T_7,"Nature|Trg")
local integer VZ7=GetHandleId(t)
if OO7(VZ7,"NaturesGuise|Special")and GetAttacker()==T37 then
call UnitRemoveAbility(T37,1110454833)
call UnitRemoveAbility(T37,1093748545)
call NM7(VZ7)
call OZ7(t)
endif
set T37=null
set t=null
endfunction
function GFD takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1110454833)>0 or GetUnitAbilityLevel(GetAttacker(),1093748545)>0 then
call GED()
endif
return false
endfunction
function GGD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
if GetTriggerEventId()!=EVENT_WIDGET_DEATH then
if GetUnitAbilityLevel(ZX7,1110454833)>0 then
call XF7(ZX7,1093748545)
endif
endif
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set ZX7=null
return false
endfunction
function GHD takes nothing returns nothing
local trigger t
local integer OB7
set t=CreateTrigger()
set OB7=GetHandleId(t)
call NP7(OB7,"TargetIndex",TS7(GetSpellTargetUnit()))
call NP7(OB7,"Level",GetUnitAbilityLevel(GetTriggerUnit(),1093677402))
call NP7(OB7,"Count",0)
call SaveReal(L7,(OB7),(442),(((TimerGetElapsed(W))+1.)*1.))
call TriggerAddCondition(t,Condition(function GDD))
call TriggerRegisterTimerEvent(t,.1,true)
call XF7(GetSpellTargetUnit(),1093808975)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetSpellTargetUnit()),1093808975,false)
if GetTriggerUnit()==GetSpellTargetUnit()then
call NS7(OB7,"NaturesGuise|Special",true)
call NV7(GetHandleId(GetSpellTargetUnit()),"Nature|Trg",t)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
set t=CreateTrigger()
call SaveUnitHandle(L7,(GetHandleId(t)),(2),(GetTriggerUnit()))
call TriggerAddCondition(t,Condition(function GGD))
call TriggerRegisterTimerEvent(t,2,false)
call TriggerRegisterDeathEvent(t,GetTriggerUnit())
endif
set t=null
endfunction
function GID takes nothing returns boolean
if GetSpellAbilityId()==1093677402 then
call GHD()
endif
return false
endfunction
function FL8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function GID))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function GFD))
set t=null
endfunction
function GJD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=(LoadInteger(L7,(I97),(5)))
local real GKD=(LoadReal(L7,(GetHandleId(IH7)),(686)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH or GKD<(TimerGetElapsed(W))or WF7(IH7)then
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call SaveReal(L7,(GetHandleId(IH7)),(686),((0)*1.))
call UnitRemoveAbility(IH7,1093809232)
call UnitRemoveAbility(IH7,1093809232)
call UnitRemoveAbility(IH7,1093809232)
call UnitRemoveAbility(IH7,1093809232)
call UnitRemoveAbility(IH7,1110459719)
else
call B67(ZX7,IH7,1,$F+$F*BC7)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function GMD takes unit ZX7,unit IH7 returns nothing
local trigger t
local integer I97
local real GKD=(LoadReal(L7,(GetHandleId(IH7)),(686)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093748535)
if GKD>(TimerGetElapsed(W))then
call SaveReal(L7,(GetHandleId(IH7)),(686),(((TimerGetElapsed(W))+4)*1.))
else
set t=CreateTrigger()
set I97=GetHandleId(t)
call SaveReal(L7,(GetHandleId(IH7)),(686),(((TimerGetElapsed(W))+4)*1.))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerAddCondition(t,Condition(function GJD))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveInteger(L7,(I97),(5),(BC7))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\AcidBomb\\BottleImpact.mdl",IH7,"overhead")))
if BC7==1 then
call XF7(IH7,1093809232)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093809232,false)
elseif BC7==2 then
call XF7(IH7,1093809232)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093809232,false)
elseif BC7==3 then
call XF7(IH7,1093809232)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093809232,false)
elseif BC7==4 then
call XF7(IH7,1093809232)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093809232,false)
endif
endif
set t=null
endfunction
function Sentinel_FindClosest takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(TS4)and(GetUnitTypeId(GetFilterUnit())==1747993172 or GetUnitTypeId(GetFilterUnit())==1747993173)then
if KF7(GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()),TT4,TU4)<TV4 then
set TR4=GetFilterUnit()
set TV4=KF7(GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()),TT4,TU4)
endif
endif
return false
endfunction
function GND takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7
local group g
local real VM8=(LoadReal(L7,(I97),(442)))
local real x
local real y
local integer U57
local real hp
local integer WF8=(LoadInteger(L7,(I97),(34)))
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_DEATH then
set WF8=WF8+1
call SaveInteger(L7,(I97),(34),(WF8))
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_DEATH then
if GetTriggerUnit()==BB7 then
call UnitRemoveAbility(BB7,1097886070)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
elseif GetUnitTypeId(BB7)==1747993172 then
set IN4=BB7
set g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(BB7),GetUnitY(BB7),110,Condition(function AJ7))
set IH7=M59(g,GetUnitX(BB7),GetUnitY(BB7))
call WR7(g)
if IH7!=null then
call GMD(ZX7,IH7)
set x=GetUnitX(BB7)
set y=GetUnitY(BB7)
set hp=GetUnitState(BB7,UNIT_STATE_LIFE)
call ShowUnit(BB7,false)
call DisableTrigger(t)
call KillUnit(BB7)
call EnableTrigger(t)
set BB7=CreateUnit(GetOwningPlayer(ZX7),1747993173,x,y,0)
call SetUnitState(BB7,UNIT_STATE_LIFE,hp)
call UnitApplyTimedLife(BB7,1112820806,480-((TimerGetElapsed(W))-VM8))
call SaveUnitHandle(L7,(I97),(19),(BB7))
call SaveReal(L7,(I97),(411),(((TimerGetElapsed(W))+4)*1.))
endif
elseif GetUnitTypeId(BB7)==1747993173 and(LoadReal(L7,(I97),(411)))<(TimerGetElapsed(W))then
set x=GetUnitX(BB7)
set y=GetUnitY(BB7)
set hp=GetUnitState(BB7,UNIT_STATE_LIFE)
call ShowUnit(BB7,false)
call DisableTrigger(t)
call KillUnit(BB7)
call EnableTrigger(t)
set BB7=CreateUnit(GetOwningPlayer(ZX7),1747993172,x,y,0)
call SetUnitState(BB7,UNIT_STATE_LIFE,hp)
call UnitApplyTimedLife(BB7,1112820806,480-((TimerGetElapsed(W))-VM8))
call SaveUnitHandle(L7,(I97),(19),(BB7))
endif
set t=null
set ZX7=null
set IH7=null
set BB7=null
set g=null
return false
endfunction
function GOD takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093748535)
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1747993172,x,y,0)
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call UnitApplyTimedLife(BB7,1112820806,480)
call YB7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function GND))
call SaveUnitHandle(L7,(I97),(19),(BB7))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveReal(L7,(I97),(442),(((TimerGetElapsed(W)))*1.))
call SaveInteger(L7,(I97),(34),(0))
set t=null
set ZX7=null
set BB7=null
endfunction
function GPD takes nothing returns boolean
if GetSpellAbilityId()==1093748535 then
call GOD()
endif
return false
endfunction
function F08 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function GPD))
set t=null
endfunction
function GQD takes nothing returns nothing
local unit Z69=GetTriggerUnit()
local integer KP7=GetUnitAbilityLevel(Z69,1093748535)
local real x=.0
local real y=.0
local unit GRD=null
local trigger t=null
local integer V07=0
local unit I77=null
local unit u=null
local group g=null
local boolexpr b=Condition(function Q57)
if((TZ7(GetOwningPlayer(Z69))))then
set t=CreateTrigger()
set V07=GetHandleId(t)
set g=CreateGroup()
call GroupClear(g)
call GroupEnumUnitsInRangeOfLoc(g,GetUnitLoc(Z69),800,Condition(function Q57))
if(not J37(g))then
loop
set u=FirstOfGroup(g)
call GroupRemoveUnit(g,u)
exitwhen IsUnitEnemy(u,GetOwningPlayer(Z69))
endloop
set I77=u
endif
call DestroyGroup(g)
if(I77!=null)then
set x=GetUnitX(I77)+GetRandomReal(-10.,10.)
set y=GetUnitY(I77)+GetRandomReal(-10.,10.)
else
set x=GetUnitX(Z69)+GetRandomReal(-10.,10.)
set y=GetUnitY(Z69)+GetRandomReal(-10.,10.)
endif
set GRD=CreateUnit(GetOwningPlayer(Z69),1747993172,x,y,0)
call UnitApplyTimedLife(GRD,1112820806,480)
call TriggerRegisterUnitEvent(t,GRD,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,Z69,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterTimerEvent(t,.2,true)
call TriggerAddCondition(t,Condition(function GND))
call SaveUnitHandle(L7,(V07),(19),(GRD))
call SaveUnitHandle(L7,(V07),(2),(Z69))
call SaveReal(L7,(V07),(442),(((TimerGetElapsed(W)))*1.))
call UnitAddAbility(Z69,1093751126)
call VC7(Z69,GRD)
endif
set t=null
set Z69=null
set GRD=null
call DestroyBoolExpr(b)
set I77=null
set g=null
set u=null
endfunction
function GSD takes nothing returns nothing
local unit IH7=GetEnumUnit()
local real d=KF7(GetUnitX(IH7),GetUnitY(IH7),FM7,FN7)
if d<FK7 and IsUnitVisible(IH7,GetOwningPlayer(FO7)) and(IsUnitType(IH7,UNIT_TYPE_HERO) or(IsUnitType(IH7,UNIT_TYPE_STRUCTURE) and AH7(IH7)))then
set FJ7=GetEnumUnit()
set FK7=d
endif
set IH7=null
endfunction
function GTD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer WF8=(LoadInteger(L7,(I97),(34)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamage()>5 then
set WF8=WF8+1
call SaveInteger(L7,(I97),(34),(WF8))
endif
endif
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED or WF8>6 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call UnitRemoveAbility(IH7,1093815640)
call UnitRemoveAbility(IH7,1093815641)
call UnitRemoveAbility(IH7,1093815639)
call UnitRemoveAbility(IH7,1093815638)
call UnitRemoveAbility(IH7,1110460213)
endif
set t=null
set IH7=null
return false
endfunction
function GUD takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local integer GVD=1093815640
local integer BC7=GetUnitAbilityLevel(ZX7,1093815628)
local group g
if IH7==null then
set FJ7=null
set FO7=ZX7
set FK7=$F423F
set FM7=GetSpellTargetX()
set FN7=GetSpellTargetY()
set IN4=ZX7
set g=WS7()
call GroupEnumUnitsInRange(g,0,0,9999,Condition(function BJ7))
call ForGroup(g,function GSD)
call WR7(g)
set IH7=FJ7
set g=null
endif
if BC7==2 then
set GVD=1093815641
elseif BC7==3 then
set GVD=1093815639
elseif BC7==4 then
set GVD=1093815638
endif
call XF7(IH7,GVD)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),GVD,false)
call TriggerRegisterTimerEvent(t,$F,false)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function GTD))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveInteger(L7,(I97),(34),(0))
set t=null
set ZX7=null
endfunction
function GWD takes nothing returns boolean
if GetSpellAbilityId()==1093815628 then
call GUD()
endif
return false
endfunction
function F18 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function GWD))
set t=null
endfunction
function GXD takes nothing returns nothing
local integer I97=GetHandleId(GetTriggeringTrigger())
local unit ZX7=IN4
local unit IH7=IP4
local real GYD=(LoadReal(L7,(I97),(21)))
call SetUnitState(IH7,UNIT_STATE_LIFE,GetUnitState(IH7,UNIT_STATE_LIFE)+GYD)
set ZX7=null
set IH7=null
endfunction
function GZD takes nothing returns nothing
local trigger t=ZF7(Z34,GetEnumUnit(),1747993656,"GXD",400)
local integer I97=GetHandleId(t)
call SaveReal(L7,(I97),(21),((Z64)*1.))
set t=null
endfunction
function GAD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=(LoadInteger(L7,(I97),(5)))
local group g
local integer WF8=(LoadInteger(L7,(I97),(34)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call UnitRemoveAbility(IH7,1093809971)
call UnitRemoveAbility(IH7,1093816400)
call UnitRemoveAbility(IH7,1093816401)
call UnitRemoveAbility(IH7,1093816402)
call UnitRemoveAbility(IH7,1110459724)
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
else
set WF8=WF8+1
call SaveInteger(L7,(I97),(34),(WF8))
if WF8>3 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call UnitRemoveAbility(IH7,1093809971)
call UnitRemoveAbility(IH7,1093816400)
call UnitRemoveAbility(IH7,1093816401)
call UnitRemoveAbility(IH7,1093816402)
call UnitRemoveAbility(IH7,1110459724)
endif
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\NightElf\\EntBirthTarget\\EntBirthTarget.mdl",IH7,"origin"))
set IN4=ZX7
set g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(IH7),GetUnitY(IH7),525,Condition(function AB7))
set Z34=IH7
set Z64=$F+$F*BC7
call ForGroup(g,function GZD)
call WR7(g)
call B67(ZX7,IH7,3,Z64)
endif
set t=null
set ZX7=null
set IH7=null
set g=null
return false
endfunction
function GBD takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093809742)
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
if BC7==1 then 
call XF7(IH7,1093809971)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093809971,false)
elseif BC7==2 then
call XF7(IH7,1093816400)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093816400,false)
elseif BC7==3 then
call XF7(IH7,1093816401)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093816401,false)
elseif BC7==4 then
call XF7(IH7,1093816402)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093816402,false)
endif
call TriggerRegisterDeathEvent(t,IH7)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function GAD))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveReal(L7,(I97),(442),(((TimerGetElapsed(W)))*1.))
call SaveInteger(L7,(I97),(5),(BC7))
call SaveInteger(L7,(I97),(34),(0))
set t=null
set ZX7=null
endfunction
function GCD takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
call ZF7(ZX7,IH7,1747993657,"GBD",600)
set ZX7=null
set IH7=null
endfunction
function G3D takes nothing returns boolean
if GetSpellAbilityId()==1093809742 and WQ7(GetSpellTargetUnit())==false then
call GBD()
endif
return false
endfunction
function F58 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function G3D))
set t=null
endfunction
function G66D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit m5=O77(OB7,"Target")
local integer V77=OM7(OB7,"Level")
local integer SV9=OM7(OB7,"Count")
if GetTriggerEventId()!=EVENT_UNIT_DEATH and SV9<(6)then
set SV9=SV9+1
call NP7(OB7,"Count",SV9)
call SetUnitState(m5,UNIT_STATE_MANA,GetUnitState(m5,UNIT_STATE_MANA)-8*V77)
call B67(p5,m5,20,$F*V77+10)
elseif SV9>=(6)or GetTriggerEventId()==EVENT_UNIT_DEATH then
call DestroyEffect(OG7(OB7,"FX"))
call UnitRemoveAbility(m5,1093750867)
call UnitRemoveAbility(m5,1110459217)
call NM7(OB7)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function GLLD takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetEnumUnit()
local integer V77=GetUnitAbilityLevel(p5,1093743692)
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call XF7(m5,1093750867)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function G66D))
call NT7(OB7,"Source",p5)
call NT7(OB7,"Target",m5)
call NU7(OB7,"FX",AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareTarget.mdl",m5,"overhead"))
call NP7(OB7,"Level",V77)
call NP7(OB7,"Count",0)
set p5=null
set m5=null
set t=null
endfunction
function G6D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit m5=O77(OB7,"Target")
local integer V77=OM7(OB7,"Level")
local integer SV9=OM7(OB7,"Count")
if GetTriggerEventId()!=EVENT_UNIT_DEATH and GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT and SV9<(6)then
set SV9=SV9+1
call NP7(OB7,"Count",SV9)
call SetUnitState(m5,UNIT_STATE_MANA,GetUnitState(m5,UNIT_STATE_MANA)-8*V77)
call B67(p5,m5,2,$F*V77+10)
elseif SV9>=(6)or GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()!=1093743191 and GetSpellAbilityId()!=1093682767 and GetSpellAbilityId()!=1093750095 and GetSpellAbilityId()!=1093747504 and GetSpellAbilityId()!=1093753417 and GetSpellAbilityId()!=1093816902 and GetSpellAbilityId()!=1093810265 and L67(GetSpellAbilityId())==false and(UL7(GetSpellAbilityId())or GetSpellAbilityId()==1093678667))then
call DestroyEffect(OG7(OB7,"FX"))
call UnitRemoveAbility(m5,1093750867)
call UnitRemoveAbility(m5,1110459217)
call NM7(OB7)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function GLD takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetEnumUnit()
local integer V77=GetUnitAbilityLevel(p5,1093743692)
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call XF7(m5,1093750867)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function G6D))
call NT7(OB7,"Source",p5)
call NT7(OB7,"Target",m5)
call NU7(OB7,"FX",AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareTarget.mdl",m5,"overhead"))
call NP7(OB7,"Level",V77)
call NP7(OB7,"Count",0)
set p5=null
set m5=null
set t=null
endfunction
function DZZ takes nothing returns nothing
local group g
local integer V77=GetUnitAbilityLevel(GetTriggerUnit(),1093743692)
if V77>0 then
set g=WS7()
set IN4=GetTriggerUnit()
set oZ=GetTriggerUnit()
call GroupEnumUnitsInRange(g,0,0,99999,Condition(function BH7))
call ForGroup(g,function GLLD)
call WR7(g)
endif
set g=null
endfunction
function G1D takes nothing returns nothing
local group g=WS7()
local location l=GetSpellTargetLoc()
set IN4=GetTriggerUnit()
set oZ=GetTriggerUnit()
call GroupEnumUnitsInRange(g,GetLocationX(l),GetLocationY(l),375,Condition(function jF))
call ForGroup(g,function GLD)
call YT7("war3mapImported\\CotS.mdx",GetLocationX(l),GetLocationY(l),5)
call WR7(g)
call RemoveLocation(l)
set g=null
set l=null
endfunction
function G0D takes nothing returns boolean
if GetSpellAbilityId()==1093743692 then
call G1D()
endif
return false
endfunction
function F28 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function G0D))
set t=null
endfunction
function G5D takes nothing returns boolean
local real d
if GetUnitAbilityLevel(GetTriggerUnit(),1110455640)>0 and GetUnitAbilityLevel(GetEventDamageSource(),1093684314)>0 and O77(GetHandleId(GetTriggeringTrigger()),"Source")==GetEventDamageSource()then
call UnitRemoveAbility(GetTriggerUnit(),1110455640)
set d=(.15+.15*I2R(GetUnitAbilityLevel(GetEventDamageSource(),1093684314)))*GetHeroInt(GetEventDamageSource(),true)
call YW7("+"+I2S(R2I(d)),1,GetTriggerUnit(),.023,3,$D8,$D8,$D8)
call DisableTrigger(GetTriggeringTrigger())
call B67(GetEventDamageSource(),GetTriggerUnit(),3,d)
call NM7(GetHandleId(GetTriggeringTrigger()))
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function G2D takes nothing returns nothing
local trigger t
local unit IH7
local unit ZX7
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
set IH7=GetSpellTargetUnit()
set ZX7=GetTriggerUnit()
else
set IH7=GetTriggerUnit()
set ZX7=GetAttacker()
endif
if IsUnitIllusion(ZX7)==false then
set t=CreateTrigger()
call NT7(GetHandleId(t),"Source",ZX7)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function G5D))
endif
set t=null
set IH7=null
set ZX7=null
endfunction
function ve takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if GetUnitAbilityLevel(GetAttacker(),1093684314)>0 and(OO7(GetHandleId(GetTriggeringTrigger()),"OrbOn")or(GZ[304+GetPlayerId(GetOwningPlayer(GetAttacker()))]))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==O77(GetHandleId(GetTriggeringTrigger()),"Hero")then
call G2D()
endif
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if(GetIssuedOrderId()==$D011F)then
call NS7(GetHandleId(GetTriggeringTrigger()),"OrbOn",true)
elseif(GetIssuedOrderId()==$D0120)then
call NS7(GetHandleId(GetTriggeringTrigger()),"OrbOn",false)
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093684314 then
call G2D()
endif
return false
endfunction
function G_D takes unit WI7,boolean UA9 returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function ve))
call NT7(GetHandleId(t),"Hero",WI7)
if UA9 then
set aj[GetPlayerId(GetOwningPlayer(WI7))]=t
endif
set t=null
endfunction
function H4D takes nothing returns boolean
if GetLearnedSkill()==1093684314 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093684314)==1 then
call G_D(GetTriggerUnit(),false)
endif
return false
endfunction
function F_8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function H4D))
set t=null
endfunction
function H7D takes nothing returns boolean
return GetSpellAbilityId()==1093684275 or GetSpellAbilityId()==1093817173
endfunction
function H8D takes nothing returns boolean
call OZ7(GetTriggeringTrigger())
call VolumeGroupReset()
return false
endfunction
function H9D takes nothing returns nothing
local location XX8=GetUnitLoc(GetTriggerUnit())
local trigger t=CreateTrigger()
if GetUnitAbilityLevel(GetTriggerUnit(),1093817173)>0 then
call DZZ()
endif
call TriggerRegisterTimerEvent(t,GetUnitAbilityLevel(GetTriggerUnit(),1093684275)+GetUnitAbilityLevel(GetTriggerUnit(),1093817173)+3,false)
call TriggerAddCondition(t,Condition(function H8D))
call CreateNUnitsAtLoc(1,1697656901,GetOwningPlayer(GetTriggerUnit()),XX8,bj_UNIT_FACING)
call ShowUnitHide(bj_lastCreatedUnit)
call UnitApplyTimedLifeBJ(5.,1112820806,bj_lastCreatedUnit)
call UnitAddAbility(bj_lastCreatedUnit,1093684274)
call SetUnitAbilityLevelSwapped(1093684274,bj_lastCreatedUnit,GetUnitAbilityLevel(GetTriggerUnit(),1093684275)+GetUnitAbilityLevel(GetTriggerUnit(),1093817173))
call IssuePointOrderByIdLoc(bj_lastCreatedUnit,$D0270,XX8)
call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_UNITSOUNDS,.0)
call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_COMBAT,.0)
call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_SPELLS,.0)
call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_MUSIC,.0)
call RemoveLocation(XX8)
set t=null
set XX8=null
endfunction
function G48 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function H7D))
call TriggerAddAction(t,function H9D)
set t=null
endfunction
function HDD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093815892)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call B67(ZX7,IH7,1,100+50*BC7)
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function HED takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local unit BB7=CreateUnit(GetOwningPlayer(IH7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
local integer BC7=GetUnitAbilityLevel(ZX7,1093815892)
local boolean HFD=(LoadBoolean(L7,(I97),(95)))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call XF7(BB7,1093684307)
call SetUnitAbilityLevel(BB7,1093684307,BC7)
call IssueTargetOrderById(BB7,$D02BC,IH7)
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerAddCondition(t,Condition(function HDD))
call TriggerRegisterTimerEvent(t,.01,false)
call SaveUnitHandle(L7,(GetHandleId(t)),(2),(ZX7))
call SaveUnitHandle(L7,(GetHandleId(t)),(17),(IH7))
call SaveInteger(L7,(GetHandleId(t)),(5),(BC7))
if HFD then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\LastWordDamageSpell.mdx",IH7,"overhead"))
endif
set t=null
set ZX7=null
set IH7=null
set BB7=null
return false
endfunction
function HGD takes integer id returns boolean
return id==1093682265 or id==1093752642 or id==1093677622 or id==1093679446 or id==1095263841 or id==1093684314 or id==1093685582 or id==1093685065 or id=='A2XO'
endfunction
function HHD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local unit BB7
local integer BC7=GetUnitAbilityLevel(ZX7,1093815892)
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call UnitRemoveAbility(IH7,1093815893)
call UnitRemoveAbility(IH7,1110455638)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT then
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call UnitRemoveAbility(IH7,1093815893)
call UnitRemoveAbility(IH7,1110455638)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerAddCondition(t,Condition(function HED))
call TriggerRegisterTimerEvent(t,.01,false)
call SaveUnitHandle(L7,(GetHandleId(t)),(2),(ZX7))
call SaveUnitHandle(L7,(GetHandleId(t)),(17),(IH7))
call SaveInteger(L7,(GetHandleId(t)),(5),(BC7))
call SaveBoolean(L7,(I97),(95),(false))
set BB7=CreateUnit(GetOwningPlayer(IH7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
call XF7(BB7,1093815895)
call SetUnitAbilityLevel(BB7,1093815895,BC7)
call IssueTargetOrderById(BB7,$D0269,IH7)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\LastWordDamageDuration.mdx",IH7,"overhead"))
set BB7=null
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and LC7(GetSpellAbilityId())==false and L67(GetSpellAbilityId())==false and GetSpellAbilityId()!=1095328363 and GetSpellAbilityId()!=1093678426 and GetSpellAbilityId()!=1093682768 and GetSpellAbilityId()!=1093685593 and GetSpellAbilityId()!=1093678680 and GetSpellAbilityId()!=1093681489 and GetSpellAbilityId()!=1093808472 and GetSpellAbilityId()!=1093808471 and GetSpellAbilityId()!=1093808470 and GetSpellAbilityId()!=1093743191 and GetSpellAbilityId()!=1093678667 and GetSpellAbilityId()!=1097163124 and GetSpellAbilityId()!=1093683801 and GetSpellAbilityId()!=1093682767 and GetSpellAbilityId()!=1093750345 and GetSpellAbilityId()!=1093750089 and GetSpellAbilityId()!=1093817157 and GetSpellAbilityId()!=1093751096 and GetSpellAbilityId()!=1093816888 and GetSpellAbilityId()!=1093751361 and GetSpellAbilityId()!=1093751126 and GetSpellAbilityId()!=1093808473 and GetSpellAbilityId()!=1093748565 and GetSpellAbilityId()!=1093753177 and HGD(GetSpellAbilityId())==false then
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call UnitRemoveAbility(IH7,1093815893)
call UnitRemoveAbility(IH7,1110455638)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=CreateTrigger()
set I97=GetHandleId(t)
if GetSpellAbilityId()==1093685846 or GetSpellAbilityId()==1093684302 then
call TriggerRegisterTimerEvent(t,.01,false)
else
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_SPELL_ENDCAST)
endif
call TriggerAddCondition(t,Condition(function HED))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveBoolean(L7,(I97),(95),(true))
endif
set IH7=null
set ZX7=null
set t=null
return false
endfunction
function HID takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
if GetUnitAbilityLevel(IH7,1093815893)==0 or GetTriggerEvalCount(t)>$FA then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call KillUnit(BB7)
else
call SetUnitX(BB7,GetUnitX(IH7))
call SetUnitY(BB7,GetUnitY(IH7))
endif
set t=null
set BB7=null
set IH7=null
return false
endfunction
function HJD takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1865429305,GetUnitX(IH7),GetUnitY(IH7),0)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterTimerEvent(t,5,false)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerAddCondition(t,Condition(function HHD))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call XF7(IH7,1093815893)
call UnitMakeAbilityPermanent(IH7,true,1093815894)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093815893,false)
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("war3mapImported\\LastWordDebuff_6.mdx",IH7,"overhead")))
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function HID))
call SaveUnitHandle(L7,(I97),(19),(BB7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
set ZX7=null
set IH7=null
set t=null
endfunction
function HKD takes nothing returns boolean
if GetSpellAbilityId()==1093815892 and WQ7(GetSpellTargetUnit())==false then
call HJD()
endif
return false
endfunction
function HMD takes nothing returns nothing
local integer I97=GetHandleId(GetTriggeringTrigger())
local unit ZX7=IP4
local real VW9=(LoadReal(L7,(I97),(20)))
call SetHeroInt(ZX7,GetHeroInt(ZX7,false)+1,true)
call YW7("+1 "+GetObjectName(1848658512),3,ZX7,.023,0,$FF,0,$E6)
set ZX7=null
endfunction
function HND takes nothing returns nothing
local integer I97=GetHandleId(GetTriggeringTrigger())
local unit ZX7=IP4
local real VW9=(LoadReal(L7,(I97),(20)))
call SetHeroInt(ZX7,GetHeroInt(ZX7,false)+2,true)
call YW7("+2 "+GetObjectName(1848658512),3,ZX7,.023,0,$FF,0,$E6)
set ZX7=null
endfunction
function HOD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit XK7=GetTriggerUnit()
if IsUnitType(XK7,UNIT_TYPE_HERO)and GetHeroInt(XK7,false)>=1 and LB7(GetUnitTypeId(XK7))==false and IsUnitIllusion(XK7)==false and IsUnitInRange(ZX7,XK7,1200)and XH7(ZX7)==false and IsUnitAlly(ZX7,GetOwningPlayer(XK7))==false then
if GetHeroInt(XK7,false)<2 then
set SR4[GetPlayerId(GetOwningPlayer(ZX7))]=SR4[GetPlayerId(GetOwningPlayer(ZX7))]+1
call YW7("-1 "+GetObjectName(1848658512),3,XK7,.023,$FF,0,0,$E6)
call SetHeroInt(XK7,GetHeroInt(XK7,false)-1,true)
call ZF7(XK7,ZX7,1747993424,"HMD",900)
else
set SR4[GetPlayerId(GetOwningPlayer(ZX7))]=SR4[GetPlayerId(GetOwningPlayer(ZX7))]+2
call YW7("-2 "+GetObjectName(1848658512),3,XK7,.023,$FF,0,0,$E6)
call SetHeroInt(XK7,GetHeroInt(XK7,false)-2,true)
call ZF7(XK7,ZX7,1747993424,"HND",900)
endif
endif
set t=null
set ZX7=null
set XK7=null
return false
endfunction
function HPD takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call YB7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function HOD))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set ZX7=null
set t=null
endfunction
function HQD takes nothing returns boolean
if GetLearnedSkill()==1093684314 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093684314)==1 then
call HPD()
endif
return false
endfunction
function HRD takes nothing returns boolean
local integer HSD=SR4[GetPlayerId(GetTriggerPlayer())]
if GetUnitTypeId(M7[GetPlayerId(GetTriggerPlayer())])==1311781185 and HSD>0 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,10.,GetObjectName(1848657997)+" "+I2S(HSD))
endif
return false
endfunction
function G78 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function HKD))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function HQD))
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-st",true)
call TriggerAddCondition(t,Condition(function HRD))
set t=null
endfunction
function HTD takes nothing returns nothing
if IsUnitType(GetEnumUnit(),UNIT_TYPE_STRUCTURE)==false then
call B67(JT,GetEnumUnit(),1,MT)
call IssueTargetOrderById(KT,$D006B,GetEnumUnit())
else
call B67(JT,GetEnumUnit(),1,MT/ 3)
call IssueTargetOrderById(KT,$D006B,GetEnumUnit())
endif
endfunction
function HUD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=O77(I97,"Source")
local unit BB7=O77(I97,"Caster")
local integer BC7=OM7(I97,"Level")
local real x=ON7(I97,"x")
local real y=ON7(I97,"y")
local group g=WS7()
local real d
local real a
local real x2
local real y2
set IN4=ZX7
call GroupEnumUnitsInRange(g,x,y,360+25,Condition(function BI7))
set JT=ZX7
set MT=BC7*$C
set KT=BB7
call ForGroup(g,function HTD)
call WR7(g)
call DestroyEffect(OG7(I97,"FX0"))
call DestroyEffect(OG7(I97,"FX1"))
call DestroyEffect(OG7(I97,"FX2"))
call DestroyEffect(OG7(I97,"FX3"))
call DestroyEffect(OG7(I97,"FX4"))
call DestroyEffect(OG7(I97,"FX5"))
call DestroyEffect(OG7(I97,"FX6"))
call DestroyEffect(OG7(I97,"FX7"))
call DestroyEffect(OG7(I97,"FX8"))
if GetTriggerEvalCount(t)==9 then
call NM7(I97)
call OZ7(t)
else
set d=0
set a=0
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call NU7(I97,"FX0",AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2))
set d=$96
set a=45
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call NU7(I97,"FX1",AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2))
set d=275
set a=90
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call NU7(I97,"FX2",AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2))
set d=$96
set a=$87
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call NU7(I97,"FX3",AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2))
set d=275
set a=$B4
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call NU7(I97,"FX4",AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2))
set d=$96
set a=$E1
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call NU7(I97,"FX5",AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2))
set d=275
set a=270
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call NU7(I97,"FX6",AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2))
set d=$96
set a=305
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call NU7(I97,"FX7",AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2))
set d=275
set a=360
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call NU7(I97,"FX8",AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2))
endif
set t=null
set ZX7=null
set BB7=null
set g=null
return false
endfunction
function HVD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local integer V77=GetUnitAbilityLevel(p5,1093678644)
local real x1=ON7(OB7,"x")
local real y1=ON7(OB7,"y")
local unit BB7=CreateUnit(GetOwningPlayer(p5),1697656901,x1,y1,0)
local real x2
local real y2
local real d
local real a
local integer i
call XF7(BB7,1093744966)
call SetUnitAbilityLevel(BB7,1093744966,V77)
if GetTriggerEvalCount(t)==1 then
set i=1
loop
exitwhen i>$A
set d=GetRandomReal(0,450)
set a=GetRandomReal(0,360)
set x2=x1+d*Cos(a*bj_DEGTORAD)
set y2=y1+d*Sin(a*bj_DEGTORAD)
set BB7=CreateUnit(GetOwningPlayer(p5),1697656906,GetUnitX(p5),GetUnitY(p5),90)
call IssuePointOrderById(BB7,$D0010,x2,y2)
call UnitApplyTimedLife(BB7,1112820806,.5)
set i=i+1
endloop
else
call NM7(OB7)
call OZ7(t)
set t=CreateTrigger()
set OB7=GetHandleId(t)
call NT7(OB7,"Source",p5)
call NT7(OB7,"Caster",BB7)
call NQ7(OB7,"x",(x1)*1.)
call NQ7(OB7,"y",(y1)*1.)
call NP7(OB7,"Level",V77)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function HUD))
call TriggerEvaluate(t)
endif
set p5=null
set BB7=null
set t=null
return false
endfunction
function HWD takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
call Y57(GetOwningPlayer(p5),9.4,x,y,360)
call TriggerRegisterTimerEvent(t,.4,true)
call TriggerAddCondition(t,Condition(function HVD))
call NT7(OB7,"Source",p5)
call NQ7(OB7,"x",(x)*1.)
call NQ7(OB7,"y",(y)*1.)
call RemoveLocation(l)
set t=null
set p5=null
set l=null
endfunction
function HXD takes nothing returns boolean
if GetSpellAbilityId()==1093678644 then
call HWD()
endif
return false
endfunction
function G88 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function HXD))
call X_7(1093744966)
set t=null
endfunction
function HYD takes nothing returns boolean
return GetLearnedSkill()==1093677909
endfunction
function HZD takes nothing returns nothing
call SetPlayerTechResearchedSwap(1378889781,GetUnitAbilityLevelSwapped(1093677909,GetTriggerUnit()),GetOwningPlayer(GetLearningUnit()))
endfunction
function Pv takes nothing returns nothing
set dX=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dX,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(dX,Condition(function HYD))
call TriggerAddAction(dX,function HZD)
endfunction
function HAD takes nothing returns boolean
return GetLearnedSkill()==1093677130 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function HBD takes nothing returns nothing
if(GetUnitAbilityLevel(GetTriggerUnit(),1093684546)==0)then
call XF7(GetTriggerUnit(),1093684546)
endif
call SetUnitAbilityLevel(GetTriggerUnit(),1093684546,GetUnitAbilityLevel(GetTriggerUnit(),1093677130))
endfunction
function Pw takes nothing returns nothing
set dY=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dY,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(dY,Condition(function HAD))
call TriggerAddAction(dY,function HBD)
endfunction
function HCD takes nothing returns nothing
local unit ZX7=GetAttacker()
local unit IH7=GetTriggerUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093682266)
local boolean H3D=OO7(GetHandleId(ZX7),"Backstab|Free")
local real d=RAbsBJ(GetUnitFacing(IH7)-GetUnitFacing(ZX7))
if d>$B4 then
set d=360-d
endif
if d<=105 or H3D then
call NS7(GetHandleId(ZX7),"Backstab|Free",false)
if GetUnitAbilityLevel(IH7,1093678162)==0 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",IH7,"chest"))
call B67(ZX7,IH7,2,GetHeroAgi(ZX7,true)*(.25*BC7+.25))
endif
endif
set ZX7=null
set IH7=null
endfunction
function H6D takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093682266)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))==false then
call HCD()
endif
return false
endfunction
function GD8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function H6D))
set t=null
endfunction
function HLD takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local unit oA=CreateUnit(GetOwningPlayer(WI7),1697656883,x,y,0)
local integer V77=GetUnitAbilityLevel(WI7,1093685831)
local real vr=(83+17*V77)*.01
call SetUnitVertexColor(oA,$FF,$FF,$FF,$96)
call UnitApplyTimedLife(oA,1112820806,6)
call SetUnitScale(oA,vr,vr,vr)
if TW7(GetOwningPlayer(WI7))then
call XF7(oA,1093677369)
call SetUnitAbilityLevel(oA,1093677369,V77)
else
call XF7(oA,1093682487)
call SetUnitAbilityLevel(oA,1093682487,V77)
endif
call IssuePointOrderById(oA,$D01F9,x,y)
call RemoveLocation(l)
set WI7=null
set l=null
set oA=null
endfunction
function H1D takes nothing returns boolean
if GetSpellAbilityId()==1093685831 then
call HLD()
endif
return false
endfunction
function GE8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function H1D))
set t=null
endfunction
function H0D takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local real YM7=30*GetUnitAbilityLevel(p5,1093684025)
local trigger t
local integer OB7
local real x=GetUnitX(m5)-75*Cos(GetUnitFacing(m5)*bj_DEGTORAD)
local real y=GetUnitY(m5)-75*Sin(GetUnitFacing(m5)*bj_DEGTORAD)
call SetUnitX(p5,x)
call SetUnitY(p5,y)
call SetUnitFacing(p5,GetUnitFacing(m5))
call DestroyEffect(AddSpecialEffect("war3mapImported\\BlinkStrike.mdx",x,y))
if IsUnitEnemy(m5,GetOwningPlayer(p5))then
call B67(p5,m5,1,YM7)
call NS7(GetHandleId(p5),"Backstab|Free",true)
call IssueTargetOrderById(p5,$D000F,m5)
if(GetPlayerController(GetOwningPlayer(p5))!=MAP_CONTROL_USER)then
call J_7(.01)
call IssueTargetOrderById(p5,$D000F,m5)
endif
endif
set p5=null
set m5=null
set t=null
endfunction
function H5D takes nothing returns boolean
if GetSpellAbilityId()==1093684025 then
call H0D()
endif
return false
endfunction
function H2D takes nothing returns boolean
if GetSpellAbilityId()==1093684025 then
call DestroyEffect(AddSpecialEffect("war3mapImported\\BlinkStrike.mdx",GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
endif
return false
endfunction
function GF8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function H5D))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function H2D))
set t=null
endfunction
function H_D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
call SetUnitAnimationByIndex(ZX7,8)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set ZX7=null
return false
endfunction
function I7D takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call SetUnitAnimationByIndex(ZX7,7)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function H_D))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set t=null
set ZX7=null
endfunction
function I8D takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==1311788336 then
call I7D()
endif
return false
endfunction
function OC8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function I8D))
set t=null
endfunction
function I9D takes nothing returns nothing
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\ChimaeraLightningMissile\\ChimaeraLightningMissile.mdl",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))
call B67(RT4,GetEnumUnit(),1,RU4)
endfunction
function IDD takes nothing returns boolean
local trigger t2=GetTriggeringTrigger()
local integer IED=GetHandleId(t2)
local trigger t1=OE7(IED,"t1")
local integer IFD=GetHandleId(t1)
local unit IGD=O77(IED,"Remnant")
local group g
local integer BC7=OM7(IED,"Level")
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call ShowUnit(IGD,false)
call KillUnit(IGD)
call NM7(IFD)
call OZ7(t1)
call NM7(IED)
call OZ7(t2)
elseif IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(IGD)) and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetTriggerUnit(),1093678162)==0 then
set g=WS7()
set IN4=IGD
set RT4=IGD
set RU4=100+40*BC7
call GroupEnumUnitsInRange(g,GetUnitX(IGD),GetUnitY(IGD),285,Condition(function AJ7))
call ForGroup(g,function I9D)
call WR7(g)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\Bolt\\BoltImpact.mdl",GetUnitX(IGD),GetUnitY(IGD)))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\Bolt\\BoltImpact.mdl",GetUnitX(IGD),GetUnitY(IGD)))
call ShowUnit(IGD,false)
call KillUnit(IGD)
call NM7(IFD)
call OZ7(t1)
call NM7(IED)
call OZ7(t2)
endif
set t1=null
set t2=null
set IGD=null
set g=null
return false
endfunction
function IHD takes nothing returns boolean
local trigger t1=GetTriggeringTrigger()
local integer IID=GetHandleId(t1)
local trigger t2
local integer UB9
local unit IJD
local integer V77
local real x=ON7(IID,"x")
local real y=ON7(IID,"y")
local real IKD
local integer U38=GetTriggerEvalCount(t1)
if U38==1 then
call DestroyEffect(OG7(IID,"FX1"))
elseif U38==2 then
call DestroyEffect(OG7(IID,"FX2"))
set t2=CreateTrigger()
set UB9=GetHandleId(t2)
set V77=OM7(IID,"Level")
set IKD=ON7(IID,"Facing")
set IJD=CreateUnit(GetOwningPlayer(O77(IID,"Source")),1747990342,x,y,IKD)
call SetUnitVertexColor(IJD,$FF,$FF,$FF,100)
call UnitApplyTimedLife(IJD,1112820806,$C)
call NT7(IID,"Remnant",IJD)
call NT7(UB9,"Remnant",IJD)
call NV7(UB9,"t1",t1)
call NP7(UB9,"Level",V77)
call TriggerRegisterUnitInRange(t2,IJD,$EB,Condition(function TO7))
call TriggerRegisterUnitEvent(t2,IJD,EVENT_UNIT_DEATH)
call TriggerAddCondition(t2,Condition(function IDD))
call DestroyEffect(AddSpecialEffectTarget("effects\\ManaFlareBoltImpact_NoSound.mdx",IJD,"origin"))
elseif U38>2 then
set IJD=O77(IID,"Remnant")
call DestroyEffect(AddSpecialEffectTarget("effects\\ManaFlareBoltImpact_NoSound.mdx",IJD,"origin"))
endif
set t1=null
set t2=null
set IJD=null
return false
endfunction
function IMD takes nothing returns nothing
local unit p5=GetTriggerUnit()
local trigger t1=CreateTrigger()
local integer IID=GetHandleId(t1)
local real x=GetUnitX(p5)
local real y=GetUnitY(p5)
call TriggerRegisterTimerEvent(t1,.5,true)
call TriggerAddCondition(t1,Condition(function IHD))
call NQ7(IID,"x",(x)*1.)
call NQ7(IID,"y",(y)*1.)
call NP7(IID,"Level",GetUnitAbilityLevel(p5,1093743696))
call NT7(IID,"Source",p5)
call NQ7(IID,"Facing",GetUnitFacing(p5)*1.)
call NU7(IID,"FX1",AddSpecialEffect("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldTarget.mdl",x,y))
call NU7(IID,"FX2",AddSpecialEffect("effects\\Static_Remnant_FX.mdx",x,y))
set p5=null
set t1=null
endfunction
function IND takes nothing returns boolean
if GetSpellAbilityId()==1093743696 then
call IMD()
endif
return false
endfunction
function K08 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function IND))
set t=null
endfunction
function IOD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
local real RK=ON7(OB7,"Angle")
local real x=GetUnitX(m5)-5*Cos(RK)
local real y=GetUnitY(m5)-5*Sin(RK)
local integer V77=OM7(OB7,"Level")
local real IPD=ON7(OB7,"x")
local real IQD=ON7(OB7,"y")
if((IPD-x)*(IPD-x))+((IQD-y)*(IQD-y))<100 then
set x=IPD
set y=IQD
endif
call SetUnitX(m5,x)
call SetUnitY(m5,y)
if GetTriggerEvalCount(t)==(20+$A*V77)then
call NM7(OB7)
call OZ7(t)
endif
set t=null
set m5=null
return false
endfunction
function IRD takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local unit oA=CreateUnit(GetOwningPlayer(p5),1966092376,GetUnitX(p5),GetUnitY(p5),GetUnitFacing(p5))
local integer V77=GetUnitAbilityLevel(p5,1093743698)
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function IOD))
call NT7(OB7,"Target",m5)
call NQ7(OB7,"Angle",Atan2(GetUnitY(m5)-GetUnitY(p5),GetUnitX(m5)-GetUnitX(p5)))
call NP7(OB7,"Level",V77)
call NQ7(OB7,"x",GetUnitX(p5))
call NQ7(OB7,"y",GetUnitY(p5))
call XF7(oA,1093743697)
call SetUnitAbilityLevel(oA,1093743697,V77)
call IssueTargetOrderById(oA,$D0200,m5)
if not TZ7(GetOwningPlayer(p5))then
call UnitApplyTimedLife(oA,1112820806,1+.5*V77)
endif
set oA=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(p5),GetUnitY(p5),GetUnitFacing(p5))
call XF7(oA,1093743699)
call IssueTargetOrderById(oA,$D006B,p5)
set p5=null
set m5=null
set oA=null
set t=null
endfunction
function ISD takes nothing returns boolean
if GetSpellAbilityId()==1093743698 and GetUnitTypeId(GetSpellTargetUnit())!=1848651852 and WQ7(GetSpellTargetUnit())==false then
call IRD()
endif
return false
endfunction
function K58 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ISD))
set t=null
endfunction
function ITD takes nothing returns nothing
local unit oA=CreateUnit(GetOwningPlayer(FZ),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
call XF7(oA,1093686069)
call IssueTargetOrderById(oA,$D006B,GetEnumUnit())
call B67(FZ,GetEnumUnit(),1,gZ)
set oA=null
endfunction
function IUD takes unit p5,unit m5 returns nothing
local integer OB7=GetHandleId(p5)
local group g=WS7()
call DestroyEffect(OG7(OB7,"OverloadFX1"))
call DestroyEffect(OG7(OB7,"OverloadFX2"))
call OX7(p5,"OverloadActive")
set IN4=p5
set FZ=p5
set gZ=GetUnitAbilityLevel(p5,1093685591)*20+$A
call GroupEnumUnitsInRange(g,GetUnitX(m5),GetUnitY(m5),300,Condition(function AJ7))
call ForGroup(g,function ITD)
call WR7(g)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",GetUnitX(m5),GetUnitY(m5)))
set g=null
endfunction
function IVD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
local unit p5=O77(OB7,"Source")
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==p5 and OT7(p5,"OverloadActive")then
call DisableTrigger(t)
call IUD(p5,m5)
call NM7(OB7)
call OZ7(t)
endif
else
call NM7(OB7)
call OZ7(t)
endif
set t=null
set m5=null
set p5=null
return false
endfunction
function IWD takes nothing returns nothing
local trigger t=CreateTrigger()
local unit m5=GetTriggerUnit()
local unit p5=GetAttacker()
local integer OB7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function IVD))
call NT7(OB7,"Target",m5)
call NT7(OB7,"Source",p5)
set t=null
set m5=null
set p5=null
endfunction
function IXD takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093685591)>0 and OT7(GetAttacker(),"OverloadActive")and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false then
call IWD()
endif
return false
endfunction
function IYD takes nothing returns nothing
local trigger t=CreateTrigger()
local unit p5=GetTriggerUnit()
local integer OB7=GetHandleId(p5)
local string fx=""
if IsUnitAlly(p5,GetLocalPlayer())or WG7(GetLocalPlayer())then
set fx="Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl"
endif
call NU7(OB7,"OverloadFX1",AddSpecialEffectTarget(fx,p5,"right hand"))
call NU7(OB7,"OverloadFX2",AddSpecialEffectTarget(fx,p5,"left hand"))
set t=null
set p5=null
endfunction
function IZD takes nothing returns boolean
if((GetSpellAbilityId()==1093743695 or GetSpellAbilityId()==1093743696 or GetSpellAbilityId()==1093743698)or(GetUnitPointValue(GetTriggerUnit())==500)and UL7(GetSpellAbilityId()))and OT7(GetTriggerUnit(),"OverloadActive")==false then
call OV7(GetTriggerUnit(),"OverloadActive")
call IYD()
endif
return false
endfunction
function IAD takes unit p5,boolean UA9 returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function IZD))
if UA9 then
set nj[GetPlayerId(GetOwningPlayer(p5))]=t
endif
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function IXD))
if UA9 then
set Aj[GetPlayerId(GetOwningPlayer(p5))]=t
endif
set p5=null
set t=null
endfunction
function IBD takes nothing returns boolean
if GetLearnedSkill()==1093685591 and GetUnitAbilityLevel(GetTriggerUnit(),1093685591)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call IAD(GetTriggerUnit(),false)
endif
return false
endfunction
function K28 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function IBD))
set t=null
endfunction
function ICD takes nothing returns nothing
if(LoadBoolean(L7,jZ,GetHandleId(GetEnumUnit()))==false)then
call SaveBoolean(L7,jZ,GetHandleId(GetEnumUnit()),true)
call B67(LZ,GetEnumUnit(),1,mZ*(JZ*4+4)/100)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",GetEnumUnit(),"origin"))
endif
endfunction
function I3D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer V77=OM7(OB7,"Level")
local unit oA=O77(OB7,"Caster")
local unit p5=O77(OB7,"Source")
local unit I6D=O77(OB7,"Fake")
local integer u3=OM7(OB7,"Remaining")
local real hN=ON7(OB7,"x")
local real ho=ON7(OB7,"y")
local real u4=GetUnitX(p5)
local real u5=GetUnitY(p5)
local real RK=Atan2(ho-u5,hN-u4)
local real Il=u4+(25+25*V77)*Cos(RK)
local real IL=u5+(25+25*V77)*Sin(RK)
local lightning MZ9=OH7(OB7,"Light")
local real ILD=ON7(OB7,"lx")
local real I1D=ON7(OB7,"ly")
local real T98=GetUnitState(p5,UNIT_STATE_MANA)
local real I0D=(25+25*V77)*(12+.007*GetUnitState(p5,UNIT_STATE_MAX_MANA))/100
local group g=WS7()
local real I5D=ON7(OB7,"Traveled")
set I5D=I5D+25+25*V77
call NQ7(OB7,"Traveled",I5D)
if GetTriggerEvalCount(t)>25 then
set ILD=ILD+(25+25*V77)*Cos(RK)
set I1D=I1D+(25+25*V77)*Sin(RK)
call NQ7(OB7,"lx",ILD)
call NQ7(OB7,"ly",I1D)
endif
call SetUnitState(p5,UNIT_STATE_MANA,RMaxBJ(T98-I0D,0))
call MoveLightning(MZ9,true,ILD,I1D,Il,IL)
call SetUnitX(p5,Il)
call SetUnitY(p5,IL)
call SetUnitPosition(oA,Il,IL)
call SetUnitPosition(I6D,Il,IL)
set IN4=p5
set LZ=p5
set jZ=OB7
set JZ=V77
set mZ=I5D
call GroupEnumUnitsInRange(g,Il,IL,75+75*V77,Condition(function AJ7))
call ForGroup(g,function ICD)
call WR7(g)
set u3=u3-1
call NP7(OB7,"Remaining",u3)
call SetUnitVertexColor(p5,$FF,$FF,$FF,$FF)
if u3==0 or GetUnitState(p5,UNIT_STATE_MANA)<1 then
call DestroyLightning(MZ9)
call Y67(Il,IL,75)
call DestroyEffect(OG7(OB7,"FX"))
call RemoveUnit(oA)
call RemoveUnit(I6D)
call SetUnitVertexColor(p5,$FF,$FF,$FF,$FF)
call SetUnitPathing(p5,true)
call SetUnitInvulnerable(p5,false)
call NM7(OB7)
call OZ7(t)
else
call Y67(Il,IL,75)
endif
set t=null
set oA=null
set p5=null
set MZ9=null
set g=null
set I6D=null
return false
endfunction
function I2D takes nothing returns nothing
local unit p5=GetTriggerUnit()
local real iN=GetUnitX(p5)
local real io=GetUnitY(p5)
local unit oA
local unit I6D
local location l
local real x
local real y
local trigger t
local integer OB7
local lightning MZ9
local integer V77=GetUnitAbilityLevel(p5,1093743695)
local real T98=GetUnitState(p5,UNIT_STATE_MANA)
local real I0D=30+.08*GetUnitState(p5,UNIT_STATE_MAX_MANA)
call SetUnitState(p5,UNIT_STATE_MANA,RMaxBJ(T98-I0D,0))
if GetUnitState(p5,UNIT_STATE_MANA)>$A then
set t=CreateTrigger()
set OB7=GetHandleId(t)
set oA=CreateUnit(GetOwningPlayer(p5),1865429296,iN,io,0)
set I6D=CreateUnit(GetOwningPlayer(p5),1211119431,iN,io,0)
set MZ9=AddLightning("FORK",true,iN,io,iN,io)
if GetSpellTargetUnit()==null then
set l=GetSpellTargetLoc()
set x=GetLocationX(l)
set y=GetLocationY(l)
call RemoveLocation(l)
else
set x=GetUnitX(GetSpellTargetUnit())
set y=GetUnitY(GetSpellTargetUnit())
endif
call SetUnitVertexColor(p5,$FF,$FF,$FF,0)
call SetUnitVertexColor(I6D,$FF,$FF,$FF,0)
call SetUnitPathing(p5,false)
call SetUnitPathing(oA,false)
call SetUnitInvulnerable(p5,true)
call NT7(OB7,"Caster",oA)
call NT7(OB7,"Source",p5)
call NT7(OB7,"Fake",I6D)
call NW7(OB7,"Light",MZ9)
call NP7(OB7,"Level",V77)
call NQ7(OB7,"x",x)
call NQ7(OB7,"y",y)
call NQ7(OB7,"lx",iN)
call NQ7(OB7,"ly",io)
call NQ7(OB7,"Traveled",0)
call NP7(OB7,"Remaining",YH7(R2I(SquareRoot((x-iN)*(x-iN)+(y-io)*(y-io))/(25+25*V77)),1))
call NU7(OB7,"FX",AddSpecialEffectTarget("effects\\Lightning_Ball_Tail_FX.mdx",I6D,"origin"))
call TriggerRegisterTimerEvent(t,.04,true)
call TriggerAddCondition(t,Condition(function I3D))
call ShowUnit(p5,false)
call ShowUnit(p5,true)
call SelectUnitAddForPlayer(p5,GetOwningPlayer(p5))
endif
set p5=null
set oA=null
set I6D=null
set l=null
set t=null
set MZ9=null
endfunction
function I_D takes nothing returns boolean
if GetSpellAbilityId()==1093743695 then
call I2D()
endif
return false
endfunction
function J4D takes nothing returns boolean
if GetSpellAbilityId()==1093743695 then
if GetUnitState(GetTriggerUnit(),UNIT_STATE_MANA)<($F+.07*GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_MANA))then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848657720))
endif
endif
return false
endfunction
function K_8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function I_D))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function J4D))
set t=null
endfunction
function RYX takes unit u returns integer
local integer BC7=GetUnitAbilityLevel(u,'EUL1')
local integer V77=GetUnitAbilityLevel(u,'EUL2')
local integer R_X
if GetUnitAbilityLevel(u,'A33W')>0 then
return $3E8
endif
if BC7>0 then
if BC7==1 then
set R_X=40
elseif BC7==2 then
set R_X=90
elseif BC7==4 then
set R_X=95
else
set R_X=100
endif
endif
if V77>0 then
if V77==1 then
set R_X=$82
elseif V77==2 then
set R_X=$8C
endif
endif
if BC7+V77>0 then
return R_X
endif
if GetUnitAbilityLevel(u,'A00D')>0 then
return 100
elseif GetUnitAbilityLevel(u,'A2HR')>0 then
return 90
elseif GetUnitAbilityLevel(u,'A1VR')>0 then
return 55
elseif GetUnitAbilityLevel(u,'A05U')>0 or GetUnitAbilityLevel(u,'A12V')>0 then
return 50
elseif GetUnitAbilityLevel(u,'AIms')>0 then
return 50
elseif GetUnitAbilityLevel(u,'A2I9')>0 then
return 60
endif
return 0
endfunction
function R0X takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer I97=GetHandleId(t)
local unit u=LoadUnitHandle(L7,I97,0)
local real RXX=I2R(LoadInteger(L7,I97,0))
local integer sT=LoadInteger(L7,I97,1)
local real x
local real y
local real dx
local real dy
local real R2X
local real ms
local real d
local real R3X=GetUnitDefaultMoveSpeed(u)+I2R(RYX(u))
local real R4X
local integer R5X
local integer c=LoadInteger(L7,I97,-1)+1
if sT==0 then
set sT=9999
endif
set R4X=YJ7(R3X*(100.+RXX)/100.,sT)-GetUnitMoveSpeed(u)
call SaveInteger(L7,I97,-1,c)
call SaveReal(CEe,GetHandleId(u),99,R2I(R4X))
if R4X>0 and XH7(u)==false then
set x=GetUnitX(u)
set y=GetUnitY(u)
set dx=LoadReal(L7,I97,$A)
set dy=LoadReal(L7,I97,$B)
set d=KF7(dx,dy,x,y)
if LoadBoolean(CEe,GetHandleId(u),99)==false then
set R5X=GetUnitCurrentOrder(u)
if(d<100 and d>1)and R5X!=$D0019 and R5X!=$D0004 and R5X!=$D0005 then
set R2X=Atan2(y-dy,x-dx)
set ms=R4X*HEe
call SaveReal(CEe,GetHandleId(u),99,R2I(ms/HEe))
call SetUnitX(u,X17(x+ms*Cos(R2X)))
call SetUnitY(u,X07(y+ms*Sin(R2X)))
endif
else
call SaveBoolean(CEe,GetHandleId(u),99,false)
endif
call SaveReal(L7,I97,$A,GetUnitX(u))
call SaveReal(L7,I97,$B,GetUnitY(u))
endif
set t=null
set u=null
endfunction
function R6X takes unit u,integer RXX,integer sT returns nothing
local timer t
local integer I97
if HaveSavedHandle(CEe,GetHandleId(u),'MVSP')==false then
set t=CreateTimer()
set I97=GetHandleId(t)
call TimerStart(t,HEe,true,function R0X)
set GEe=GEe+1
call SaveUnitHandle(L7,I97,0,u)
call SaveReal(L7,I97,$A,GetUnitX(u))
call SaveReal(L7,I97,$B,GetUnitY(u))
call SaveBoolean(L7,I97,100,true)
call SaveTimerHandle(CEe,GetHandleId(u),'MVSP',t)
else
set t=LoadTimerHandle(CEe,GetHandleId(u),'MVSP')
set I97=GetHandleId(t)
endif
if RXX==LoadInteger(L7,I97,0)and sT==LoadInteger(L7,I97,1)then
set t=null
return
endif
call SaveInteger(L7,I97,1,sT)
call SaveInteger(L7,I97,0,RXX)
if RXX==0 then
call PauseTimer(t)
set GEe=GEe-1
call SaveReal(CEe,GetHandleId(u),99,0)
call SaveBoolean(L7,I97,100,false)
if IsUnitIllusion(u)then
call DestroyTimer(t)
call FlushChildHashtable(L7,I97)
call FlushChildHashtable(CEe,GetHandleId(u))
endif
elseif LoadBoolean(L7,I97,100)==false then
call TimerStart(t,HEe,true,function R0X)
set GEe=GEe+1
call SaveBoolean(L7,I97,100,true)
endif
set t=null
endfunction
function UTR takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(L7,GetHandleId(t),0)
call UnitRemoveAbility(u,'A2W3')
call XF7(u,'A2W4')
call SetUnitAbilityLevel(u,'A2W4',GetUnitAbilityLevel(u,'A2W1'))
call FlushChildHashtable(L7,GetHandleId(t))
call DestroyTimer(t)
set u=null
set t=null
endfunction
function UUR takes unit u,real cd returns nothing
local timer t=CreateTimer()
call TimerStart(t,cd,false,function UTR)
call SaveUnitHandle(L7,GetHandleId(t),0,u)
set t=null
endfunction
function UWS takes unit u returns nothing
local unit BB7
local boolean bb0
if IsUnitIllusion(u)==false and XH7(u)==false then
call UnitRemoveAbility(u,'A2W4')
set BB7=CreateUnit(Player($E),'e00E',GetUnitX(u),GetUnitY(u),0)
call XF7(u,'A2W3')
call SetUnitAbilityLevel(u,'A2W3',GetUnitAbilityLevel(u,'A2W1'))
call UnitAddAbility(BB7,'A2W5')
call UnitAddAbility(u,'A04R')
call UnitShareVision(u,Player($E),true)
set bb0=UnitRemoveAbility(u,'B0BI')
call IssueTargetOrderById(BB7,$D0118,u)
call UnitShareVision(u,Player($E),false)
call UnitRemoveAbility(u,'A04R')
if bb0 then
call F71(u,1227901005)
endif
set BB7=null
endif
call UUR(u,20-4*GetUnitAbilityLevel(u,'A2W1'))
endfunction
function UWR takes unit u,integer OB7,trigger t returns nothing
local integer I97=GetHandleId(t)
if LoadBoolean(L7,I97,5)then
call R6X(u,0,0)
call SetUnitPathing(u,true)
endif
call UnitRemoveAbility(u,'A2W2')
call UnitRemoveAbility(u,'B0H9')
if GetHandleId(u)>0 then
call RemoveSavedHandle(L7,GetHandleId(u),'A2W1')
else
call RemoveSavedHandle(L7,LoadInteger(L7,I97,0),'A2W1')
endif
call OZ7(t)
call FlushChildHashtable(L7,I97)
endfunction
function UYR takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit u=LoadUnitHandle(L7,I97,0)
local integer OB7=LoadInteger(L7,I97,0)
local unit IH7=LoadUnitHandle(L7,I97,1)
local real UFe
local real UZR=LoadReal(L7,I97,0)
local boolean disabled=false
local real x
local real y
if GetTriggerEventId()==EVENT_UNIT_DEATH then
if GetTriggerUnit()==u then
call UWR(u,OB7,t)
else
if GetUnitCurrentOrder(u)!=$D0012 then
call DisableTrigger(t)
call IssuePointOrderById(u,$D0012,LoadReal(L7,I97,$A),LoadReal(L7,I97,$B))
call EnableTrigger(t)
endif
endif
elseif GetTriggerEventId()==EVENT_UNIT_ATTACKED then
if GetAttacker()==u then
call UWR(u,OB7,t)
endif
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER then
if GetIssuedOrderId()!=$D000F and not(GetIssuedOrderId()==$D0003 and GetOrderTargetUnit()!=null and IsUnitEnemy(GetOrderTargetUnit(),GetOwningPlayer(u)))then
call UWR(u,OB7,t)
endif
else
if YN8(u)or(LoadBoolean(L7,I97,5)and GetUnitAbilityLevel(u,'A2W2')==0)then
call UWR(u,OB7,t)
else
set UFe=KE7(u,IH7)
if LoadBoolean(L7,I97,5)and(UFe>UZR+$96 or IsUnitVisible(IH7,GetOwningPlayer(u))==false or GetUnitAbilityLevel(IH7,'Avul')>0)then
if GetUnitCurrentOrder(u)!=$D0012 then
if LoadBoolean(L7,I97,0)then
call UWR(u,OB7,t)
else
call DisableTrigger(t)
call SaveBoolean(L7,I97,0,true)
call IssuePointOrderById(u,$D0012,LoadReal(L7,I97,$A),LoadReal(L7,I97,$B))
call EnableTrigger(t)
endif
elseif KF7(GetUnitX(u),GetUnitY(u),LoadReal(L7,I97,$A),LoadReal(L7,I97,$B))<='x' then
call UWR(u,OB7,t)
endif
elseif LoadBoolean(L7,I97,5)==false then
if LoadBoolean(L7,I97,0)==false and GetUnitAbilityLevel(u,'A2W2')==0 and UFe<=UZR and GetUnitAbilityLevel(u,'A2W4')>0 then
call XF7(u,'A2W2')
call R6X(u,999,800)
if GetUnitAbilityLevel(u,'A2W4')>0 then
call UWS(u)
endif
call SetUnitPathing(u,false)
call SaveBoolean(L7,I97,5,true)
endif
elseif KF7(GetUnitX(u),GetUnitY(u),LoadReal(L7,I97,$A),LoadReal(L7,I97,$B))<=100 then
call UWR(u,OB7,t)
else
call SaveReal(L7,I97,$A,GetUnitX(IH7))
call SaveReal(L7,I97,$B,GetUnitY(IH7))
call SaveBoolean(L7,I97,0,false)
endif
endif
endif
set t=null
return false
endfunction
function U_R takes nothing returns nothing
local trigger t
local integer I97
local unit u=GetTriggerUnit()
local integer OB7=GetHandleId(u)
local integer BC7=GetUnitAbilityLevel(u,'A2W1')
local unit IH7=GetOrderTargetUnit()
local real UFe=KE7(u,IH7)
local real UZR=500+100*BC7
local unit U0R
if UFe>300 then
if HaveSavedHandle(L7,OB7,'A2W1')then
set t=LoadTriggerHandle(L7,OB7,'A2W1')
set I97=GetHandleId(t)
set U0R=LoadUnitHandle(L7,I97,1)
if U0R!=IH7 then
call UWR(u,OB7,t)
endif
else
set t=CreateTrigger()
set I97=GetHandleId(t)
call SaveTriggerHandle(L7,OB7,'A2W1',t)
call SaveUnitHandle(L7,I97,0,u)
call SaveInteger(L7,I97,0,OB7)
call SaveUnitHandle(L7,I97,1,IH7)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_ORDER)
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(t,Condition(function UYR))
endif
call SaveReal(L7,I97,0,UZR)
call SaveReal(L7,I97,$A,GetUnitX(IH7))
call SaveReal(L7,I97,$B,GetUnitY(IH7))
endif
set u=null
set IH7=null
set t=null
endfunction
function U1R takes nothing returns boolean
if GetOrderTargetUnit()!=null and IsUnitEnemy(GetOrderTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and(GetIssuedOrderId()==$D000F or GetIssuedOrderId()==$D0003)then
if GetUnitAbilityLevel(GetTriggerUnit(),'A2W1')>0 then
call U_R()
endif
endif
return false
endfunction
function U2R takes nothing returns boolean
if GetUnitAbilityLevel(GetTriggerUnit(),'A2W1')>0 then
call XF7(GetTriggerUnit(),'A2W4')
call SetUnitAbilityLevel(GetTriggerUnit(),'A2W4',GetUnitAbilityLevel(GetTriggerUnit(),'A2W1'))
endif
return false
endfunction
function U3R takes nothing returns boolean
if GetLearnedSkill()=='A2W1' then
if GetLearnedSkillLevel()==1 then
call XF7(GetTriggerUnit(),'A2W4')
else
call SetUnitAbilityLevel(GetTriggerUnit(),'A2W4',GetLearnedSkillLevel())
endif
endif
return false
endfunction
function U4R takes nothing returns boolean
return GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(IN4)and IsUnitIllusion(GetFilterUnit())and GetUnitTypeId(GetFilterUnit())=='Ogrh' and XH7(GetFilterUnit())==false
endfunction
function U5R takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer I97=GetHandleId(t)
local unit u
local unit u2
local integer i=1
local real OXO
local real U6R=325
local real x=LoadReal(L7,I97,$A)
local real y=LoadReal(L7,I97,$B)
local real x2
local real y2
local real R2X
local real UFe
local integer c=LoadInteger(L7,I97,0)+1
local real U7R
local unit U8R
local unit U9R
local string fx
if c==50 then
call ClearSelectionForPlayer(GetOwningPlayer(LoadUnitHandle(L7,I97,0)))
set U8R=null
set U9R=null
loop
exitwhen HaveSavedHandle(L7,I97,i)==false
set u=LoadUnitHandle(L7,I97,i)
call ShowUnit(u,true)
call PauseUnit(u,false)
call IssueImmediateOrderById(u,$D0004)
call UnitRemoveAbility(u,'Avul')
set x2=LoadReal(L7,I97,100*i)
set y2=LoadReal(L7,I97,100*i+1)
call Y67(x2,y2,$C8)
call SetUnitPosition(u,x2,y2)
if IsUnitIllusion(u)==false or GetUnitAbilityLevel(u,'B0HA')>0 or GetUnitAbilityLevel(u,'B0HB')>0 then
call SetUnitFacing(u,LoadReal(L7,I97,0))
if IsUnitIllusion(u)==false then
call SelectUnitAddForPlayer(u,GetOwningPlayer(u))
elseif U8R==null then
set U8R=u
elseif U9R==null then
set U9R=u
endif
if GetUnitAbilityLevel(u,'B0HB')>0 then
set fx=""
if IsUnitAlly(u,GetLocalPlayer())or(WG7(GetLocalPlayer()))then
set fx="Abilities\\Spells\\Items\\AIda\\AIdaTarget.mdl"
endif
call YS7(fx,u,"head",8)
endif
if GetUnitAbilityLevel(u,'B0HA')>0 then
set fx=""
if IsUnitAlly(u,GetLocalPlayer())or(WG7(GetLocalPlayer()))then
set fx="war3mapImported\\PLPower.mdx"
endif
call YS7(fx,u,"overhead",8)
endif
endif
call KillUnit(LoadUnitHandle(L7,I97,300+i))
set i=i+1
endloop
call SelectUnitAddForPlayer(U8R,GetOwningPlayer(u))
call SelectUnitAddForPlayer(U9R,GetOwningPlayer(u))
set U8R=null
set U9R=null
call RemoveUnit(LoadUnitHandle(L7,I97,-100))
call FlushChildHashtable(L7,I97)
call DestroyTimer(t)
else
if c==1 then
loop
exitwhen HaveSavedHandle(L7,I97,i)==false
set u=LoadUnitHandle(L7,I97,300+i)
call PauseUnit(u,true)
set i=i+1
endloop
elseif c>=30 then
loop
exitwhen HaveSavedHandle(L7,I97,i)==false
set u=LoadUnitHandle(L7,I97,300+i)
set U7R=LoadReal(L7,I97,100*i+2)
set R2X=LoadReal(L7,I97,100*i+3)
set x2=X17(GetUnitX(u)+U7R*Cos(R2X))
set y2=X07(GetUnitY(u)+U7R*Sin(R2X))
call SetUnitAnimation(u,"walk")
call SetUnitX(u,x2)
call SetUnitY(u,y2)
set i=i+1
endloop
endif
call SaveInteger(L7,I97,0,c)
endif
set u=null
set u2=null
set t=null
endfunction
function WVR takes nothing returns nothing
local timer t=CreateTimer()
local integer I97=GetHandleId(t)
local unit u=GetTriggerUnit()
local group g=WS7()
local integer i=0
local unit u2
local real OXO=GetUnitFacing(u)
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local unit BB7=CreateUnit(GetOwningPlayer(u),'e00E',GetUnitX(u),GetUnitY(u),0)
local real R2X
local real UFe
local real x2
local real y2
call UnitAddAbility(BB7,'A2W6')
call IssueTargetOrderById(BB7,$D0132,u)
call SetUnitAbilityLevel(BB7,'A2W6',2)
call IssueTargetOrderById(BB7,$D0132,u)
set BB7=null
set IN4=u
call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),925,Condition(function U4R))
call GroupAddUnit(g,u)
loop
set u2=FirstOfGroup(g)
exitwhen u2==null
set i=i+1
call SaveUnitHandle(L7,I97,i,u2)
call UnitAddAbility(u2,'Avul')
call ShowUnit(u2,false)
set BB7=CreateUnit(GetOwningPlayer(u2),'h07W',GetUnitX(u2),GetUnitY(u2),GetUnitFacing(u2))
call SaveUnitHandle(L7,I97,300+i,BB7)
set R2X=GetRandomReal(0,360)*bj_DEGTORAD
set UFe=GetRandomReal($A,325)
set x2=X17(x+UFe*Cos(R2X))
set y2=X07(y+UFe*Sin(R2X))
call SaveReal(L7,I97,100*i+0,x2)
call SaveReal(L7,I97,100*i+1,y2)
call SaveReal(L7,I97,100*i+2,KF7(GetUnitX(BB7),GetUnitY(BB7),x2,y2)/.4*.02)
call SaveReal(L7,I97,100*i+3,J77(GetUnitX(BB7),GetUnitY(BB7),x2,y2)*bj_DEGTORAD)
call GroupRemoveUnit(g,u2)
endloop
set BB7=null
call SaveUnitHandle(L7,I97,-100,CreateUnit(GetOwningPlayer(u),'o020',GetUnitX(u),GetUnitY(u),0))
call SaveReal(L7,I97,0,OXO)
call SaveUnitHandle(L7,I97,0,u)
call TimerStart(t,.02,true,function U5R)
call SaveReal(L7,I97,$A,x)
call SaveReal(L7,I97,$B,y)
call WR7(g)
set t=null
set u=null
endfunction
function WER takes nothing returns boolean
if GetSpellAbilityId()=='A2W7' then
call WVR()
endif
return false
endfunction
function BJX takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(t,Condition(function U1R))
set t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,GetWorldBounds())
call TriggerAddCondition(t,Condition(function U2R))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function U3R))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WER))
set t=null
endfunction
function J7D takes nothing returns nothing
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",GetTriggerUnit(),"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",GetTriggerUnit(),"origin"))
endfunction
function J8D takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==1211117651 then
call J7D()
endif
return false
endfunction
function M48 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function J8D))
set t=null
endfunction
function J9D takes nothing returns nothing
local integer OB7=GetHandleId(GetOwningPlayer(GetTriggerUnit()))
local unit JDD=O77(OB7,"BearItemHolder")
local unit JED=O77(OB7,"MyBear")
if JDD!=null and D4==false and RZ4==false then
call UnitAddItem(JED,UnitRemoveItemFromSlot(JDD,0))
call UnitAddItem(JED,UnitRemoveItemFromSlot(JDD,1))
call UnitAddItem(JED,UnitRemoveItemFromSlot(JDD,2))
call UnitAddItem(JED,UnitRemoveItemFromSlot(JDD,3))
call UnitAddItem(JED,UnitRemoveItemFromSlot(JDD,4))
call UnitAddItem(JED,UnitRemoveItemFromSlot(JDD,5))
endif
set JDD=null
set JED=null
endfunction
function JFD takes nothing returns boolean
return GetSpellAbilityId()==1093681461 or GetSpellAbilityId()==1093817167
endfunction
function JGD takes nothing returns boolean
if XH7(GetFilterUnit())then
return false
endif
if((GetUnitTypeId(GetFilterUnit())==1848652103))then
return true
endif
if((GetUnitTypeId(GetFilterUnit())==1848652099))then
return true
endif
if((GetUnitTypeId(GetFilterUnit())==1848652088))then
return true
endif
if((GetUnitTypeId(GetFilterUnit())==1848651828))then
return true
endif
return false
endfunction
function JHD takes nothing returns nothing
local unit S79=GetTriggerUnit()
local player JID=GetOwningPlayer(S79)
local location XX8=GetUnitLoc(S79)
local boolexpr JJD=Condition(function JGD)
local group VA9=WS7()
local integer BC7=GetUnitAbilityLevel(S79,1093681461)+GetUnitAbilityLevel(S79,1093817167)
local integer I97=GetHandleId(JID)
local boolean JKD
local unit ZQ8
call GroupEnumUnitsOfPlayer(VA9,GetOwningPlayer(S79),JJD)
if CountUnitsInGroup(VA9)!=0 then
set ZQ8=FirstOfGroup(VA9)
if ZQ8!=null and OT7(ZQ8,"4327") then
call KR7(S79)
call X37(JID,GetObjectName(1848659278))
endif
endif
call WR7(VA9)
call RemoveLocation(XX8)
call DestroyBoolExpr(JJD)
set S79=null
set JID=null
set VA9=null
set JJD=null
set XX8=null
endfunction
function JMD takes nothing returns boolean
return(GetUnitTypeId(GetFilterUnit())==1848652103)or(GetUnitTypeId(GetFilterUnit())==1848652099)or(GetUnitTypeId(GetFilterUnit())==1848652088)or(GetUnitTypeId(GetFilterUnit())==1848651828)
endfunction
function JND takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit JED
local unit BB7=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(p5),GetUnitY(p5),0)
local integer V77=GetUnitAbilityLevel(p5,GetSpellAbilityId())
local group g=WS7()
call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(p5),Condition(function JMD))
set JED=FirstOfGroup(g)
call WR7(g)
if GetSpellAbilityId()==1093748038 then
call XF7(BB7,1093681473)
call SetUnitAbilityLevel(BB7,1093681473,V77)
elseif GetSpellAbilityId()==1093748037 then
call XF7(BB7,1093681474)
call SetUnitAbilityLevel(BB7,1093681474,V77)
elseif GetSpellAbilityId()==1093748040 then
call XF7(BB7,1093681475)
call SetUnitAbilityLevel(BB7,1093681475,V77)
elseif GetSpellAbilityId()==1093748041 then
call XF7(BB7,1093681476)
call SetUnitAbilityLevel(BB7,1093681476,V77)
elseif GetSpellAbilityId()==1093748039 then
call XF7(BB7,1093681477)
call SetUnitAbilityLevel(BB7,1093681477,V77)
endif
call IssueTargetOrderById(BB7,$D0085,p5)
if JED!=null and XH7(JED)==false then
call IssueTargetOrderById(BB7,$D0085,JED)
endif
set g=null
set p5=null
set JED=null
set BB7=null
endfunction
function JOD takes nothing returns boolean
if GetSpellAbilityId()==1093748038 or GetSpellAbilityId()==1093748037 or GetSpellAbilityId()==1093748040 or GetSpellAbilityId()==1093748041 or GetSpellAbilityId()==1093748039 then
call JND()
endif
return false
endfunction
function GG8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function JOD))
set t=null
endfunction
function JPD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZQ8=(LoadUnitHandle(L7,(I97),(2)))
local real JQD
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamage()>2 and GetEventDamageSource()!=GetTriggerUnit()and TX7(GetOwningPlayer(GetEventDamageSource()))then
call SaveReal(L7,(I97),(714),(((TimerGetElapsed(W)))*1.))
endif
endif
set JQD=(LoadReal(L7,(I97),(714)))
if JQD+3<(TimerGetElapsed(W))then
if(LoadInteger(L7,(I97),(34)))==2 then
call SaveInteger(L7,(I97),(34),(1))
call OX7(ZQ8,"4327")
call SetPlayerAbilityAvailable(GetOwningPlayer(ZQ8),1093681463,true)
endif
else
if(LoadInteger(L7,(I97),(34)))==1 then
call SaveInteger(L7,(I97),(34),(2))
call OV7(ZQ8,"4327")
call SetPlayerAbilityAvailable(GetOwningPlayer(ZQ8),1093681463,false)
endif
endif
set t=null
set ZQ8=null
return false
endfunction
function JRD takes unit ZQ8 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.2,true)
call TriggerRegisterUnitEvent(t,ZQ8,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,ZQ8,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function JPD))
call SaveUnitHandle(L7,(I97),(2),(ZQ8))
call SaveReal(L7,(I97),(714),((0)*1.))
call SaveInteger(L7,(I97),(34),(1))
call SetPlayerAbilityAvailable(GetOwningPlayer(ZQ8),1093681463,true)
set t=null
endfunction
function JSD takes nothing returns nothing
local unit S79=GetTriggerUnit()
local player JID=GetOwningPlayer(S79)
local location XX8=GetUnitLoc(S79)
local boolexpr JJD=Condition(function JGD)
local group VA9=WS7()
local integer BC7=GetUnitAbilityLevel(S79,1093681461)+GetUnitAbilityLevel(S79,1093817167)
local integer I97=GetHandleId(JID)
local boolean JKD
local unit ZQ8
call GroupEnumUnitsOfPlayer(VA9,GetOwningPlayer(S79),JJD)
set JKD=CountUnitsInGroup(VA9)==0
if(BC7==1 and JKD)then
call CreateNUnitsAtLoc(1,1848651828,GetOwningPlayer(GetTriggerUnit()),XX8,bj_UNIT_FACING)
call NT7(I97,"MyBear",bj_lastCreatedUnit)
call J9D()
call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")
call JRD(bj_lastCreatedUnit)
elseif(BC7==2 and JKD)then
call CreateNUnitsAtLoc(1,1848652088,GetOwningPlayer(GetTriggerUnit()),XX8,bj_UNIT_FACING)
call NT7(I97,"MyBear",bj_lastCreatedUnit)
call J9D()
call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")
call JRD(bj_lastCreatedUnit)
elseif(BC7==3 and JKD)then
call CreateNUnitsAtLoc(1,1848652099,GetOwningPlayer(GetTriggerUnit()),XX8,bj_UNIT_FACING)
call NT7(I97,"MyBear",bj_lastCreatedUnit)
call J9D()
call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")
call JRD(bj_lastCreatedUnit)
elseif(BC7==4 and JKD)then
call CreateNUnitsAtLoc(1,1848652103,GetOwningPlayer(GetTriggerUnit()),XX8,bj_UNIT_FACING)
call NT7(I97,"MyBear",bj_lastCreatedUnit)
call J9D()
call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")
call JRD(bj_lastCreatedUnit)
elseif JKD==false then
set ZQ8=FirstOfGroup(VA9)
call AddSpecialEffectTargetUnitBJ("chest",ZQ8,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")
call SetUnitState(ZQ8,UNIT_STATE_LIFE,GetUnitState(ZQ8,UNIT_STATE_MAX_LIFE))
call SetUnitPosition(ZQ8,GetUnitX(S79),GetUnitY(S79))
set ZQ8=null
endif
call SetUnitAbilityLevel(bj_lastCreatedUnit,1093679449,BC7)
call WR7(VA9)
call RemoveLocation(XX8)
call DestroyBoolExpr(JJD)
set JJD=null
set S79=null
set JID=null
set XX8=null
set VA9=null
set ZQ8=null
endfunction
function GI8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function JFD))
call TriggerAddAction(t,function JSD)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function JFD))
call TriggerAddAction(t,function JHD)
set t=null
endfunction
function JTD takes nothing returns boolean
return((IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))and GetUnitAbilityLevel(GetFilterUnit(),1110459185)>0)!=null
endfunction
function JUD takes nothing returns nothing
call B67(D2,GetEnumUnit(),2,30)
endfunction
function JVD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit JWD=O77(OB7,"Bear")
local group g=WS7()
set IN4=JWD
set D2=JWD
call GroupEnumUnitsInRange(g,GetUnitX(JWD),GetUnitY(JWD),$7D0,Condition(function JTD))
call ForGroup(g,function JUD)
call WR7(g)
set t=null
set g=null
set JWD=null
return false
endfunction
function JXD takes nothing returns nothing
local unit JWD=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function JVD))
call NT7(OB7,"Bear",JWD)
set JWD=null
set t=null
endfunction
function VF takes nothing returns boolean
return(GetLearnedSkill()==1093681461 or GetLearnedSkill()==1093817167)and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function Vg takes nothing returns boolean
if XH7(GetFilterUnit())then
return false
endif
if((GetUnitTypeId(GetFilterUnit())==1848652099))then
return true
endif
if((GetUnitTypeId(GetFilterUnit())==1848652088))then
return true
endif
if((GetUnitTypeId(GetFilterUnit())==1848651828))then
return true
endif
return false
endfunction
function JYD takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local player j8=GetOwningPlayer(WI7)
local location XX8=GetUnitLoc(WI7)
local boolexpr hP=Condition(function Vg)
local group LQ7=WS7()
local integer BC7=GetUnitAbilityLevel(WI7,1093681461)+GetUnitAbilityLevel(WI7,1093817167)
local integer I97=GetHandleId(j8)
local integer Vh
local unit ZQ8
local real AE9
call GroupEnumUnitsOfPlayer(LQ7,GetOwningPlayer(WI7),hP)
call DestroyBoolExpr(hP)
if(BC7==1)then
call JXD()
endif
set Vh=CountUnitsInGroup(LQ7)
if(Vh==1)then
set ZQ8=FirstOfGroup(LQ7)
set AE9=GetUnitLifePercent(ZQ8)
set XX8=GetUnitLoc(ZQ8)
call ShowUnit(ZQ8,false)
call KillUnit(ZQ8)
if(BC7==2)then
call CreateNUnitsAtLoc(1,1848652088,GetOwningPlayer(GetTriggerUnit()),XX8,bj_UNIT_FACING)
call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")
call JRD(bj_lastCreatedUnit)
elseif(BC7==3)then
call CreateNUnitsAtLoc(1,1848652099,GetOwningPlayer(GetTriggerUnit()),XX8,bj_UNIT_FACING)
call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")
call JRD(bj_lastCreatedUnit)
elseif(BC7==4)then
call CreateNUnitsAtLoc(1,1848652103,GetOwningPlayer(GetTriggerUnit()),XX8,bj_UNIT_FACING)
call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")
call JRD(bj_lastCreatedUnit)
endif
call SetUnitLifePercentBJ(bj_lastCreatedUnit,AE9)
call NT7(I97,"MyBear",bj_lastCreatedUnit)
call J9D()
endif
call WR7(LQ7)
set WI7=null
set j8=null
set XX8=null
set hP=null
set LQ7=null
set ZQ8=null
endfunction
function GK8 takes nothing returns nothing
set dZ=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dZ,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(dZ,Condition(function VF))
call TriggerAddAction(dZ,function JYD)
endfunction
function JZD takes nothing returns boolean
return GetUnitTypeId(GetAttacker())==1848652103 or GetUnitTypeId(GetAttacker())==1848652099 or GetUnitTypeId(GetAttacker())==1848652088 or GetUnitTypeId(GetAttacker())==1848651828
endfunction
function JAD takes nothing returns nothing
local unit VD=GetAttacker()
local unit VI=M7[GetPlayerId(GetOwningPlayer(VD))]
if KE7(VI,VD)>=1100 and(R6c==0)then
call IssueImmediateOrderById(VD,$D0004)
elseif(GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER)then
if((GetHeroLevel(VI)<$C)and(not IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(not IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE))and(GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)>150.)and((GetOwningPlayer(GetTriggerUnit())==Z7[0])or(GetOwningPlayer(GetTriggerUnit())==A7[0]))and(eY[GetPlayerId(GetOwningPlayer(GetAttacker()))]==1)and(Bz>hq[$F0+GetPlayerId(GetOwningPlayer(GetAttacker()))]))then
call TriggerSleepAction(.1)
call jW(GetAttacker(),$D0012,h9[GetPlayerId(GetOwningPlayer(GetAttacker()))])
endif
endif
set VD=null
set VI=null
endfunction
function GH8 takes nothing returns nothing
set d0=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(d0,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(d0,Condition(function JZD))
call TriggerAddAction(d0,function JAD)
endfunction
function JBD takes nothing returns boolean
return GetSpellAbilityId()==1093681463
endfunction
function JCD takes nothing returns nothing
local unit VD=GetTriggerUnit()
local unit VI=M7[GetPlayerId(GetOwningPlayer(VD))]
call SetUnitX(VD,GetUnitX(VI)+GetRandomReal(25,50)*Cos(GetRandomReal(0,360)))
call SetUnitY(VD,GetUnitY(VI)+GetRandomReal(25,50)*Sin(GetRandomReal(0,360)))
set VD=null
set VI=null
endfunction
function GJ8 takes nothing returns nothing
set H_4=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(H_4,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(H_4,Condition(function JBD))
call TriggerAddAction(H_4,function JCD)
endfunction
function J3D takes nothing returns boolean
return GetLearnedSkill()==1093681464 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function J6D takes nothing returns nothing
call SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1378889776,GetPlayerTechCount(GetOwningPlayer(GetTriggerUnit()),1378889776,true)+1)
call SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1378889777,GetPlayerTechCount(GetOwningPlayer(GetTriggerUnit()),1378889777,true)+1)
endfunction
function qb takes nothing returns nothing
set I44=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(I44,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(I44,Condition(function J3D))
call TriggerAddAction(I44,function J6D)
endfunction
function JLD takes item KA7 returns boolean
return KY7(KA7)==B5 or KY7(KA7)==C5 or KY7(KA7)==EW or KY7(KA7)==HW
endfunction
function J1D takes nothing returns boolean
return(GetUnitTypeId(GetTriggerUnit())==1848652103 or GetUnitTypeId(GetTriggerUnit())==1848652099 or GetUnitTypeId(GetTriggerUnit())==1848652088 or GetUnitTypeId(GetTriggerUnit())==1848651828)and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function J0D takes nothing returns nothing
local location J5D
if TV7(GetOwningPlayer(GetTriggerUnit()))then
set J5D=GetRectCenter(ED)
else
set J5D=GetRectCenter(L9)
endif
if JLD(GetEnumItem())==false then
call SetItemPositionLoc(GetEnumItem(),J5D)
endif
call RemoveLocation(J5D)
set J5D=null
endfunction
function J2D takes nothing returns nothing
local integer OB7=GetHandleId(GetOwningPlayer(GetTriggerUnit()))
local unit m7=O77(OB7,"BearItemHolder")
local unit VD=O77(OB7,"MyBear")
local integer x
local integer y
if m7==null then
if TV7(GetOwningPlayer(VD))then
set x=-7500
set y=-7170
else
set x=7070
set y=6500
endif
set m7=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697657158,x,y,0)
call NT7(OB7,"BearItemHolder",m7)
endif
if JLD(GetEnumItem())==false then
call UnitAddItem(m7,GetEnumItem())
endif
call ShowUnit(m7,true)
set m7=null
set VD=null
endfunction
function VL takes nothing returns nothing
local integer Z48=KY7(GetEnumItem())
if GetWidgetLife(GetEnumItem())>0 and Z48!=X0 then
if D4 or RZ4 then
call J0D()
else
call J2D()
endif
endif
endfunction
function J_D takes nothing returns nothing
local location Mk=GetUnitLoc(GetTriggerUnit())
local rect K4D=RectFromCenterSizeBJ(Mk,400.,400.)
local unit VI=M7[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]
call SetHeroXP(VI,(GetHeroXP(VI)-(GetHeroXP(VI)/(125-(25*(GetUnitAbilityLevel(VI,1093681461)+GetUnitAbilityLevel(VI,1093817167)))))),false)
if(R6c==0)then
call UnitDamageTargetBJ(GetKillingUnit(),VI,GetUnitState(VI,UNIT_STATE_MAX_LIFE)*.1,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_ENHANCED)
endif
call EnumItemsInRectBJ(K4D,function VL)
call RemoveLocation(Mk)
call RemoveRect(K4D)
set Mk=null
set VI=null
set K4D=null
endfunction
function qB takes nothing returns nothing
set d3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(d3,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(d3,Condition(function J1D))
call TriggerAddAction(d3,function J_D)
endfunction
function K7D takes nothing returns boolean
return(GetUnitTypeId(GetTriggerUnit())==1311781171 or GetUnitTypeId(GetTriggerUnit())==1311781199 or GetUnitTypeId(GetTriggerUnit())==1311781173 or GetUnitTypeId(GetTriggerUnit())==1311781172)and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function K8D takes nothing returns nothing
local unit VD=O77(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"MyBear")
local unit VI=M7[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]
if(R6c==0)then
call KillUnit(VD)
endif
set VD=null
set VI=null
endfunction
function qc takes nothing returns nothing
set d4=CreateTrigger()
call ky(d4,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(d4,Condition(function K7D))
call TriggerAddAction(d4,function K8D)
endfunction
function K9D takes nothing returns boolean
return(GetLearnedSkill()==1093681483 or GetLearnedSkill()==1093748313)and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function KDD takes nothing returns nothing
if(GetUnitAbilityLevel(GetTriggerUnit(),1093681483)==1 or GetUnitAbilityLevel(GetTriggerUnit(),1093748313)==1)then
call XF7(GetTriggerUnit(),1093752646)
endif
endfunction
function qC takes nothing returns nothing
set d5=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(d5,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(d5,Condition(function K9D))
call TriggerAddAction(d5,function KDD)
endfunction
function KED takes nothing returns boolean
if(GetSpellAbilityId()==1093681485 or GetSpellAbilityId()==1093681459 or GetSpellAbilityId()==1093681460 or GetSpellAbilityId()==1093677652 or GetSpellAbilityId()==1093748314 or GetSpellAbilityId()==1093752646)then
return true
elseif GetSpellAbilityId()==1093681483 or GetSpellAbilityId()==1093748313 then
if GetUnitAbilityLevel(GetTriggerUnit(),1093752646)==0 then
call XF7(GetTriggerUnit(),1093752646)
endif
endif
return false
endfunction
function KFD takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0))!=null
endfunction
function KGD takes nothing returns nothing
call IssueImmediateOrderById(GetEnumUnit(),$D024C)
endfunction
function Vq takes nothing returns nothing
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO) and GetPlayerController(GetOwningPlayer(GetEnumUnit()))==MAP_CONTROL_COMPUTER then
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),125.,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
else
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),300.,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE)
endif
endfunction
function VQ takes nothing returns nothing
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO) and GetPlayerController(GetOwningPlayer(GetEnumUnit()))==MAP_CONTROL_COMPUTER then
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),150.,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
else
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),450.,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE)
endif
endfunction
function Vr takes nothing returns nothing
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO) and GetPlayerController(GetOwningPlayer(GetEnumUnit()))==MAP_CONTROL_COMPUTER then
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),175.,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
else
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),600.,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE)
endif
endfunction
function KHD takes nothing returns nothing
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO) and GetPlayerController(GetOwningPlayer(GetEnumUnit()))==MAP_CONTROL_COMPUTER then
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),200.,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
else
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),750.,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE)
endif
endfunction
function KID takes nothing returns boolean
return GetOwningPlayer(GetFilterUnit())==WO4 and GetUnitTypeId(GetFilterUnit())==WN4 and XH7(GetFilterUnit())==false
endfunction
function KJD takes player p,integer U57,real x,real y returns nothing
local group g=WS7()
set WO4=p
set WN4=U57
call GroupEnumUnitsInRange(g,x,y,725,Condition(function KID))
call ForGroup(g,function KGD)
call WR7(g)
set g=null
endfunction
function KKD takes nothing returns nothing
local real x=GetUnitX(GetTriggerUnit())
local real y=GetUnitY(GetTriggerUnit())
local group LQ7
call DisableTrigger(I74)
set V0=true
if(GetSpellAbilityId()==1093681485)then
call YT7("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)
call Y57(GetOwningPlayer(GetTriggerUnit()),3,x,y,500)
set LQ7=WS7()
call GroupEnumUnitsInRange(LQ7,x,y,475,Condition(function KFD))
call ForGroup(LQ7,function Vq)
call RemoveUnit(GetTriggerUnit())
call WR7(LQ7)
elseif(GetSpellAbilityId()==1093681459)then
call YT7("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)
call Y57(GetOwningPlayer(GetTriggerUnit()),3,x,y,500)
set LQ7=WS7()
call GroupEnumUnitsInRange(LQ7,x,y,475,Condition(function KFD))
call ForGroup(LQ7,function VQ)
call RemoveUnit(GetTriggerUnit())
call WR7(LQ7)
elseif(GetSpellAbilityId()==1093681460)then
call YT7("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)
call Y57(GetOwningPlayer(GetTriggerUnit()),3,x,y,500)
set LQ7=WS7()
call GroupEnumUnitsInRange(LQ7,x,y,475,Condition(function KFD))
call ForGroup(LQ7,function Vr)
call RemoveUnit(GetTriggerUnit())
call WR7(LQ7)
elseif(GetSpellAbilityId()==1093748314)then
call YT7("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)
call Y57(GetOwningPlayer(GetTriggerUnit()),3,x,y,500)
set LQ7=WS7()
call GroupEnumUnitsInRange(LQ7,x,y,475,Condition(function KFD))
call ForGroup(LQ7,function KHD)
call RemoveUnit(GetTriggerUnit())
call WR7(LQ7)
elseif(GetSpellAbilityId()==1093677652)then
set LQ7=HA7(GetOwningPlayer(GetTriggerUnit()),1865429304)
call ForGroup(LQ7,function KGD)
call DestroyGroup(LQ7)
set LQ7=HA7(GetOwningPlayer(GetTriggerUnit()),1865429042)
call ForGroup(LQ7,function KGD)
call DestroyGroup(LQ7)
set LQ7=HA7(GetOwningPlayer(GetTriggerUnit()),1865429058)
call ForGroup(LQ7,function KGD)
call DestroyGroup(LQ7)
set LQ7=HA7(GetOwningPlayer(GetTriggerUnit()),1865429314)
call ForGroup(LQ7,function KGD)
call DestroyGroup(LQ7)
endif
if(GetSpellAbilityId()==1093752646)then
set x=GetSpellTargetX()
set y=GetSpellTargetY()
call KJD(GetOwningPlayer(GetTriggerUnit()),1865429304,x,y)
call KJD(GetOwningPlayer(GetTriggerUnit()),1865429042,x,y)
call KJD(GetOwningPlayer(GetTriggerUnit()),1865429058,x,y)
call KJD(GetOwningPlayer(GetTriggerUnit()),1865429314,x,y)
endif
set V0=false
call EnableTrigger(I74)
set LQ7=null
endfunction
function KMD takes nothing returns nothing
local integer id=GetUnitTypeId(GetTriggerUnit())
local real x=GetUnitX(GetTriggerUnit())
local real y=GetUnitY(GetTriggerUnit())
local group LQ7
if id==1865429304 then
call YT7("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)
set LQ7=WS7()
call GroupEnumUnitsInRange(LQ7,x,y,475,Condition(function KFD))
call ForGroup(LQ7,function Vq)
call WR7(LQ7)
endif
if id==1865429042 then
call YT7("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)
set LQ7=WS7()
call GroupEnumUnitsInRange(LQ7,x,y,475,Condition(function KFD))
call ForGroup(LQ7,function VQ)
call WR7(LQ7)
endif
if id==1865429058 then
call YT7("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)
set LQ7=WS7()
call GroupEnumUnitsInRange(LQ7,x,y,475,Condition(function KFD))
call ForGroup(LQ7,function Vr)
call WR7(LQ7)
endif
if id==1865429314 then
call YT7("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)
set LQ7=WS7()
call GroupEnumUnitsInRange(LQ7,x,y,475,Condition(function KFD))
call ForGroup(LQ7,function KHD)
call WR7(LQ7)
endif
set LQ7=null
endfunction
function KND takes nothing returns boolean
local integer id=GetUnitTypeId(GetTriggerUnit())
if id==1865429304 or id==1865429042 or id==1865429058 or id==1865429314 then
call KMD()
endif
return false
endfunction
function qD takes nothing returns nothing
local trigger t=CreateTrigger()
call MC9("Units\\Creeps\\GoblinSapper\\GoblinSapperYesAttack1.wav")
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddAction(t,function KKD)
call TriggerAddCondition(t,Condition(function KED))
set I74=CreateTrigger()
call YB7(I74,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(I74,Condition(function KND))
set t=null
endfunction
function KOD takes nothing returns boolean
if((GetUnitTypeId(GetTriggerUnit())==1848651855))then
return true
endif
if((GetUnitTypeId(GetTriggerUnit())==1848651856))then
return true
endif
if((GetUnitTypeId(GetTriggerUnit())==1848651857))then
return true
endif
if((GetUnitTypeId(GetTriggerUnit())==1848651854))then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==1865429304 or GetUnitTypeId(GetTriggerUnit())==1865429042 or GetUnitTypeId(GetTriggerUnit())==1865429058 or GetUnitTypeId(GetTriggerUnit())==1865429314 then
if Ab[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]then
endif
endif
return false
endfunction
function KPD takes nothing returns boolean
return((GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit()))and((GetUnitTypeId(GetFilterUnit())==1848651855)or(GetUnitTypeId(GetFilterUnit())==1848651856)or(GetUnitTypeId(GetFilterUnit())==1848651857)or(GetUnitTypeId(GetFilterUnit())==1848651854)))
endfunction
function KQD takes rect r,boolexpr KRD returns group
set CB=WS7()
call GroupEnumUnitsInRect(CB,r,KRD)
call DestroyBoolExpr(KRD)
return CB
endfunction
function KSD takes nothing returns boolean
return(GetUnitTypeId(GetFilterUnit())==1211117637 or GetUnitTypeId(GetFilterUnit())==1211117639 or GetUnitTypeId(GetFilterUnit())==1211117638 or GetUnitTypeId(GetFilterUnit())==1160786000 or GetUnitTypeId(GetFilterUnit())==1311780930 or GetUnitTypeId(GetFilterUnit())==1430468144 or GetUnitTypeId(GetFilterUnit())==1162032951 or GetUnitTypeId(GetFilterUnit())==1429221456 or GetUnitTypeId(GetFilterUnit())==1160786510 or GetUnitTypeId(GetFilterUnit())==1160786511 or GetUnitTypeId(GetFilterUnit())==1328558390 or GetUnitTypeId(GetFilterUnit())==1328558391 or GetUnitTypeId(GetFilterUnit())==1160786502 or GetUnitTypeId(GetFilterUnit())==1211122767 or GetUnitTypeId(GetFilterUnit())==1311788343 or GetUnitTypeId(GetFilterUnit())==1311788354 or GetUnitTypeId(GetFilterUnit())==1311788355 or GetUnitTypeId(GetFilterUnit())==1311788367 or GetUnitTypeId(GetFilterUnit())==1311788353)and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(IN4))
endfunction
function KTD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit KUD=O77(I97,"Mine")
local group g
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call DestroyEffect(AddSpecialEffect("war3mapImported\\NewGroundEX.mdx",GetUnitX(KUD),GetUnitY(KUD)))
call NM7(I97)
call OZ7(t)
else
set g=WS7()
set IN4=KUD
call GroupEnumUnitsInRange(g,GetUnitX(KUD),GetUnitY(KUD),$C8,Condition(function KSD))
if FirstOfGroup(g)!=null then
call NM7(I97)
call OZ7(t)
call SetUnitExploded(KUD,true)
call KillUnit(KUD)
endif
call WR7(g)
endif
set t=null
set KUD=null
set g=null
return false
endfunction
function KVD takes nothing returns nothing
local integer I97=GetHandleId(GetOwningPlayer(GetTriggerUnit()))
local group LQ7=KQD(bj_mapInitialPlayableArea,Condition(function KPD))
local integer Vu=OM7(I97,"GMCount")
local integer VU=0
local unit Vv
local integer VV
local unit D_8
local integer Vw
local integer T8
local integer U8
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.4,true)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function KTD))
call NT7(GetHandleId(t),"Mine",GetTriggerUnit())
set Vu=(Vu+1)
call StartTimerBJ(OD7(I97,"MineTimer"+I2S(Vu)),false,15000.)
call NT7(I97,"GMUnit"+I2S(Vu),GetTriggerUnit())
set VU=CountUnitsInGroup(LQ7)
if(VU>99)then
set VV=99999
set T8=1
set U8=Vu
loop
exitwhen T8>U8
set D_8=O77(I97,"GMUnit"+I2S(T8))
set Vw=R2I(TimerGetRemaining(OD7(I97,"MineTimer"+I2S(T8))))
if(GetUnitState(D_8,UNIT_STATE_LIFE)>0 and Vw<VV)then
set Vv=D_8
set VV=Vw
endif
set T8=T8+1
endloop
call ExplodeUnitBJ(Vv)
else
call YW7(I2S(VU),1,GetTriggerUnit(),.027,$82,$82,$82,$D8)
endif
call NP7(I97,"GMCount",Vu)
call WR7(LQ7)
set t=null
set LQ7=null
set Vv=null
set D_8=null
endfunction
function KWD takes nothing returns boolean
if GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>.5 and(GetUnitTypeId(GetFilterUnit())==1848651855 or GetUnitTypeId(GetFilterUnit())==1848651856 or GetUnitTypeId(GetFilterUnit())==1848651857 or GetUnitTypeId(GetFilterUnit())==1848651854)then
set n0=n0+1
endif
return false
endfunction
function KXD takes nothing returns boolean
local group g=WS7()
set n0=0
call GroupEnumUnitsOfPlayer(g,GetTriggerPlayer(),Condition(function KWD))
if n0>0 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,10.,(GetObjectName((1848657475)))+": "+I2S(n0))
endif
call WR7(g)
set g=null
return false
endfunction
function qe takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-st",true)
call TriggerAddCondition(t,Condition(function KXD))
set t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,GetWorldBounds())
call TriggerAddCondition(t,Condition(function KOD))
call TriggerAddAction(t,function KVD)
set t=null
endfunction
function KYD takes nothing returns nothing
local unit WX7=GetTriggerUnit()
local unit BB7=CreateUnit(GetOwningPlayer(WX7),1697656901,GetUnitX(WX7),GetUnitY(WX7),0)
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local integer i=0
local real a=0
local real r=0
local integer BC7=GetUnitAbilityLevel(WX7,1093681745)
call XF7(BB7,1093678406)
call SetUnitAbilityLevel(BB7,1093678406,BC7)
loop
exitwhen i>40
exitwhen IssuePointOrderById(BB7,$D0271,x+r*Cos(a),y+r*Sin(a))
set i=i+1
set a=a+.4
set r=r+$A
endloop
call RemoveLocation(l)
set WX7=null
set BB7=null
set l=null
endfunction
function KZD takes nothing returns boolean
if GetSpellAbilityId()==1093681745 then
call KYD()
endif
return false
endfunction
function GM8 takes nothing returns nothing
set d8=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(d8,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(d8,Condition(function KZD))
endfunction
function KAD takes nothing returns boolean
return(GetSpellAbilityId()==1093678137 or GetSpellAbilityId()==1093817682)and WQ7(GetSpellTargetUnit())==false
endfunction
function TSv takes nothing returns boolean
return(AR7()and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)or IsUnitIllusion(GetFilterUnit()))and lWA(GetFilterUnit(),GetOwningPlayer(IN4))and lZA(GetFilterUnit())==false and fWA(GetFilterUnit())==false and LoadInteger(L7,GetHandleId(GetFilterUnit()),1093817682)!=1)!=null
endfunction
function Ttv takes unit WI7,unit TTv returns nothing
local group g=WS7()
local unit u
local unit Tuv=TTv
local unit BB7
local integer BC7=GetUnitAbilityLevel(WI7,1093817682)
loop
set IN4=WI7
call GroupEnumUnitsInRange(g,GetUnitX(Tuv),GetUnitY(Tuv),550+25,Condition(function TSv))
set u=M59(g,GetUnitX(Tuv),GetUnitY(Tuv))
exitwhen u==null
set BB7=CreateUnit(GetOwningPlayer(WI7),1697656901,GetUnitX(Tuv),GetUnitY(Tuv),0)
call UnitAddAbility(BB7,1093678137)
call SetUnitAbilityLevel(BB7,1093678137,BC7)
call IssueTargetOrderById(BB7,$D0269,u)
set BB7=null
call O3O(u,1093817682,.5)
set Tuv=u
call GroupRemoveUnit(g,u)
endloop
call WR7(g)
set u=null
set Tuv=null
endfunction
function KBD takes nothing returns nothing
call B67(GetTriggerUnit(),GetSpellTargetUnit(),3,GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId())*80)
if GetSpellAbilityId()==1093817682 then
call O3O(GetSpellTargetUnit(),1093817682,.5)
call Ttv(GetTriggerUnit(),GetSpellTargetUnit())
endif
endfunction
function GN8 takes nothing returns nothing
local trigger d9=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(d9,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(d9,Condition(function KAD))
call TriggerAddAction(d9,function KBD)
call YY8('B02P')
endfunction
function UF3 takes nothing returns boolean
return(WF7(GetFilterUnit())==false and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IN4))and IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))and IsHeroUnitId(GetUnitTypeId(GetFilterUnit()))
endfunction
function UG3 takes nothing returns nothing
local unit ZX7=IN4
local unit IH7=IP4
local integer BC7=GetUnitAbilityLevel(ZX7,1093678405)
if BC7==0 then
set BC7=GetUnitAbilityLevel(ZX7,1093817683)
endif
call B67(ZX7,IH7,1,50+75*BC7)
set ZX7=null
set IH7=null
endfunction
function UH3 takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=null
local group g=WS7()
local real x=GetUnitX(ZX7)
local real y=GetUnitY(ZX7)
local integer X87=2
if GetUnitAbilityLevel(ZX7,1093678405)==0 then
set X87=4
endif
set IN4=ZX7
call GroupEnumUnitsInRange(g,x,y,2500+25,Condition(function UF3))
loop
exitwhen FirstOfGroup(g)==null or X87==0
set IH7=M59(g,x,y)
set X87=X87-1
call GroupRemoveUnit(g,IH7)
call ZF7(ZX7,IH7,1747993941,"UG3",1000)
endloop
call WR7(g)
set g=null
set IH7=null
set ZX7=null
endfunction
function UI3 takes nothing returns boolean
if GetSpellAbilityId()==10936784050 or GetSpellAbilityId()==10938176830 then
call UH3()
endif
return false
endfunction
function JE1 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function UI3))
set t=null
endfunction
function KCD takes unit u returns boolean
return GetUnitTypeId(u)==1211117638 or GetUnitTypeId(u)==1211117637 or GetUnitTypeId(u)==1211117639 or GetUnitTypeId(u)==1328558391
endfunction
function K3D takes nothing returns nothing
if IsUnitType(GetEnumUnit(),UNIT_TYPE_STRUCTURE) then
call B67(PU,GetEnumUnit(),1,QU/3)
else
call B67(PU,GetEnumUnit(),1,QU)
endif
endfunction
function K6D takes unit ZX7,real x,real y,real r,real d returns nothing
local group g=WS7()
set IN4=ZX7
call GroupEnumUnitsInRange(g,x,y,r,Condition(function BI7))
set PU=ZX7
set QU=d
call ForGroup(g,function K3D)
call WR7(g)
set g=null
endfunction
function KLD takes nothing returns boolean
return(AV7()and KW7(GetFilterUnit())==false and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function K1D takes unit WI7 returns unit
local unit p5=null
local group g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(WI7),GetUnitY(WI7),275+25,Condition(function KLD))
call GroupRemoveUnit(g,WI7)
set p5=GroupPickRandomUnit(g)
call WR7(g)
set IN4=p5
set p5=null
set g=null
return IN4
endfunction
function K0D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer iX=GetTriggerEvalCount(t)
local unit WI7=O77(OB7,"Hero")
local unit p5=O77(OB7,"Source")
local unit m5=O77(OB7,"Target")
local real K5D=ON7(OB7,"Tossx0")
local real K2D=ON7(OB7,"Tossy0")
local real x1=GetUnitX(p5)
local real y1=GetUnitY(p5)
local real x2=GetUnitX(m5)
local real y2=GetUnitY(m5)
local real RK
local real K_D
local real M4D
local real M7D
local real Il
local real IL
local location l
if KF7(K5D,K2D,x2,y2)>$3E8 then
set x2=K5D
set y2=K2D
endif
set RK=J77(x1,y1,x2,y2)
set K_D=KF7(x1,y1,x2,y2)
set M4D=K_D/(51-iX)
set M7D=(iX-25)*(iX-25)
set Il=x1+M4D*Cos(RK*bj_DEGTORAD)
set IL=y1+M4D*Sin(RK*bj_DEGTORAD)
if iX<51 then
if KCD(p5)==false then
call SetUnitFlyHeight(p5,775-M7D,0)
endif
call SetUnitPosition(p5,Il,IL)
else
if KCD(p5)==false then
call SetUnitFlyHeight(p5,GetUnitDefaultFlyHeight(p5),0)
endif
call PauseUnit(p5,false)
call SetUnitPathing(p5,true)
call SetUnitPosition(p5,x2,y2)
call OX7(p5,"Tossed")
set l=Location(x2,y2)
call TerrainDeformationRippleBJ(.2,true,l,1.,300.,96.,1,64.)
call RemoveLocation(l)
call DestroyEffect(OG7(OB7,"FX"))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",GetUnitX(p5),GetUnitY(p5)))
if IsUnitAlly(p5,GetOwningPlayer(WI7))then
else
if(MV7((WI7),ZU[GB4])!=null)then
call B67(WI7,p5,1,(.2+.2*(GetUnitAbilityLevel(WI7,1093682009)+1))*75*GetUnitAbilityLevel(WI7,1093681754))
else
call B67(WI7,p5,1,(.2+.15*GetUnitAbilityLevel(WI7,1093682009))*75*GetUnitAbilityLevel(WI7,1093681754))
endif
endif
call Y67(x2,y2,300)
call K6D(WI7,x2,y2,300,75*GetUnitAbilityLevel(WI7,1093681754))
call NM7(OB7)
call OZ7(t)
endif
set t=null
set WI7=null
set p5=null
set m5=null
set l=null
return false
endfunction
function M8D takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit p5=VJ4
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call SetUnitAnimationByIndex(WI7,4)
call PauseUnit(p5,true)
call SetUnitPathing(p5,false)
if KCD(p5)==false then
call XF7(p5,1097691750)
call UnitRemoveAbility(p5,1097691750)
endif
call OV7(p5,"Tossed")
call NT7(OB7,"Hero",WI7)
call NT7(OB7,"Source",p5)
call NT7(OB7,"Target",m5)
call NU7(OB7,"FX",AddSpecialEffectTarget("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",p5,"origin"))
call NQ7(OB7,"Tossx0",GetUnitX(m5))
call NQ7(OB7,"Tossy0",GetUnitY(m5))
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function K0D))
set WI7=null
set p5=null
set m5=null
set t=null
endfunction
function M9D takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit p5=K1D(WI7)
local unit m5=GetSpellTargetUnit()
set VJ4=p5
if p5==null then
call KR7(WI7)
call X37(GetOwningPlayer(WI7),VU7(1848656961))
elseif GetOwningPlayer(m5)==GetOwningPlayer(WI7)then
call KR7(WI7)
call X37(GetOwningPlayer(WI7),VU7(1848656729))
endif
set WI7=null
set p5=null
set m5=null
endfunction
function MDD takes nothing returns boolean
if GetSpellAbilityId()==1093681754 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
call M9D()
else
call M8D()
endif
endif
return false
endfunction
function GR8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function MDD))
set t=null
endfunction
function MED takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
call M_9(1093815115)
endfunction
function MFD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=O77(I97,"Source")
local integer WF8
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==ZX7 and GetEventDamage()>20. then
set WF8=OM7(GetHandleId(ZX7),"WarClub_Count")
if OT7(ZX7,"WarClubState")==false then
call O37(ZX7,"WarClubState",.1)
call NP7(GetHandleId(ZX7),"WarClub_Count",(WF8+1))
endif
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
else
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set ZX7=null
set t=null
return false
endfunction
function MGD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer T_7=GetHandleId(t)
local unit CV7=O77(T_7,"Source")
local integer MHD=OM7(GetHandleId(CV7),"WarClub_Count")
call NP7(T_7,"WarClub_Cooldown",1)
call UnitRemoveAbility(CV7,1093752391)
if(MV7(CV7,ZU[GB4])!=null)then
call XF7(CV7,1093752392)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(CV7),1093752392,true)
if MHD>5 then
call FlushChildHashtable(L7,T_7)
call OZ7(t)
endif
set CV7=null
set t=null
return false
endfunction
function MID takes nothing returns nothing
local trigger t
local unit CV7=GetAttacker()
local integer T_7=GetHandleId(CV7)
local integer MHD=OM7(T_7,"WarClub_Count")
if MHD<6 then
if not OT7(CV7,"WarClubState")then
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,1.,false)
call TriggerAddCondition(t,Condition(function MFD))
call NT7(GetHandleId(t),"Source",CV7)
endif
else
call NP7(T_7,"WarClub_Count",(0))
call UnitRemoveAbility(CV7,1093752625)
if(OM7(T_7,"WarClub_Cooldown"))==1 then
set t=OE7(T_7,"WarClub_EndTrig")
call FlushChildHashtable(L7,GetHandleId(t))
call OZ7(t)
endif
endif
set CV7=null
set t=null
endfunction
function MJD takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093752625)>0 then
call MID()
endif
return false
endfunction
function MKD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
if GetTriggerEvalCount(t)==1 then
call SetUnitTimeScalePercent(ZX7,$FA)
else
call SetUnitTimeScalePercent(ZX7,100)
call SetUnitAnimationByIndex(ZX7,$C)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
return false
endfunction
function MMD takes nothing returns boolean
local trigger t
if GetSpellAbilityId()==1093752392 then
call O37(GetTriggerUnit(),"WarClubCastState",29.9)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093752392,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093752391,true)
call XF7(GetTriggerUnit(),1093752391)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093752625,false)
call XF7(GetTriggerUnit(),1093752625)
call IssueTargetOrderById(GetTriggerUnit(),$D021F,GetSpellTargetDestructable())
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,30,false)
call TriggerAddCondition(t,Condition(function MGD))
call NT7(GetHandleId(t),"Source",GetTriggerUnit())
call NV7(GetHandleId(GetTriggerUnit()),"WarClub_EndTrig",t)
call NP7(GetHandleId(GetTriggerUnit()),"WarClub_Cooldown",(0))
call NP7(GetHandleId(GetTriggerUnit()),"WarClub_Count",(0))
set t=null
elseif GetSpellAbilityId()==1093815105 then
call RemoveDestructable(GetSpellTargetDestructable())
call ShowUnit(GetTriggerUnit(),false)
call ShowUnit(GetTriggerUnit(),true)
call UnitRemoveAbility(GetTriggerUnit(),1097625443)
call UnitAddAbility(GetTriggerUnit(),1093815106)
call UnitRemoveAbility(GetTriggerUnit(),1093815106)
call UnitAddAbility(GetTriggerUnit(),1093815107)
call UnitRemoveAbility(GetTriggerUnit(),1093815107)
call AddUnitAnimationProperties(GetTriggerUnit(),"upgrade",false)
endif
return false
endfunction
function MND takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
if(MV7((ZX7),ZU[GB4])!=null)then
if OT7(ZX7,"WarClubCastState")==false then
if GetUnitAbilityLevel(ZX7,1093752392)==0 and GetUnitAbilityLevel(ZX7,1093752391)==0 then
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093752392,true)
call XF7(ZX7,1093752392)
endif
endif
else
call UnitRemoveAbility(ZX7,1093752392)
call UnitRemoveAbility(ZX7,1093752391)
endif
set t=null
set ZX7=null
return false
endfunction
function KW9 takes nothing returns nothing
local unit p5=B2
local unit m5=C2
local unit BB7=O77(GetHandleId(p5),"GrowCaster")
call NT7(GetHandleId(m5),"GrowCaster",BB7)
call SetUnitOwner(BB7,GetOwningPlayer(m5),true)
set p5=null
set m5=null
set BB7=null
endfunction
function XG8 takes nothing returns nothing
local unit WI7=IT4
local unit BB7=O77(GetHandleId(WI7),"GrowCaster")
if BB7!=null and GetUnitTypeId(BB7)==1697657174 then
call RemoveUnit(BB7)
endif
set WI7=null
set BB7=null
endfunction
function MOD takes nothing returns boolean
return GetLearnedSkill()==1093682009 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function MPD takes nothing returns nothing
local unit MQD=O77(GetHandleId(GetTriggeringTrigger()),"Tiny")
local integer V77=GetUnitAbilityLevel(MQD,1093682009)
if GetUnitState(MQD,UNIT_STATE_LIFE)>1 then
call SetUnitScale(MQD,.5+.25*V77,.5+.25*V77,.5+.25*V77)
endif
set MQD=null
endfunction
function MRD takes nothing returns boolean
local integer V77
if IsUnitIllusion(GetTriggerUnit())and(GetUnitTypeId(GetTriggerUnit())==1432580716 or GetUnitTypeId(GetTriggerUnit())==1429221720)then
set V77=GetUnitAbilityLevel(O77(GetHandleId(GetTriggeringTrigger()),"Tiny"),1093682009)
call SetUnitScale(GetTriggerUnit(),.5+.25*V77,.5+.25*V77,.5+.25*V77)
endif
return false
endfunction
function MSD takes nothing returns nothing
local trigger t
local unit MTD=GetTriggerUnit()
local integer BC7=GetUnitAbilityLevel(MTD,1093682009)
local unit BB7
local unit WX7=GetTriggerUnit()
local region MUD
if BC7==1 then
set BB7=CreateUnit(GetOwningPlayer(WX7),1697657174,0,0,0)
call XF7(BB7,1093742658)
call NT7(GetHandleId(WX7),"GrowCaster",BB7)
else
set BB7=O77(GetHandleId(WX7),"GrowCaster")
endif
if BC7==2 then
call UnitRemoveAbility(BB7,1093742658)
call XF7(BB7,1093742657)
elseif BC7==3 then
call UnitRemoveAbility(BB7,1093742658)
call UnitRemoveAbility(BB7,1093742657)
call XF7(BB7,1093687891)
endif
call SetPlayerTechResearched(GetOwningPlayer(MTD),1378889797,BC7)
if BC7==1 then
set t=CreateTrigger()
call TriggerAddAction(t,function MPD)
call TriggerRegisterTimerEvent(t,2.,true)
call NT7(GetHandleId(t),"Tiny",MTD)
call SetUnitScale(MTD,.5+.25*BC7,.5+.25*BC7,.5+.25*BC7)
set t=CreateTrigger()
set MUD=CreateRegion()
call RegionAddRect(MUD,GetWorldBounds())
call TriggerRegisterEnterRegion(t,MUD,Condition(function TO7))
call TriggerAddCondition(t,Condition(function MRD))
call NT7(GetHandleId(t),"Tiny",MTD)
set t=null
set MUD=null
endif
set MTD=null
set WX7=null
set BB7=null
endfunction
function GP8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function MOD))
call TriggerAddAction(t,function MSD)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function MMD))
call MED()
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function MJD))
set t=null
endfunction
function MVD takes nothing returns boolean
if OT7(GetFilterUnit(),"Tossed")then
call B67(gB,GetFilterUnit(),1,lB)
endif
return false
endfunction
function MWD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local real x=ON7(OB7,"x")
local real y=ON7(OB7,"y")
local unit oA=CreateUnit(GetOwningPlayer(WI7),1697656901,x,y,0)
local integer V77=GetUnitAbilityLevel(WI7,1093684300)
local group g=WS7()
call XF7(oA,1093742666)
call SetUnitAbilityLevel(oA,1093742666,V77)
set gB=WI7
if V77==1 then
set lB=25
elseif V77==2 then
set lB=45
elseif V77==3 then
set lB=65
elseif V77==4 then
set lB=75
endif
call GroupEnumUnitsInRange(g,x,y,275+25,Condition(function MVD))
call WR7(g)
if GetTriggerEvalCount(t)>6 then
call NM7(OB7)
call OZ7(t)
endif
set t=null
set WI7=null
set oA=null
set g=null
return false
endfunction
function MXD takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local location l=GetSpellTargetLoc()
local unit oA=CreateUnit(GetOwningPlayer(WI7),1697656901,GetUnitX(WI7),GetUnitY(WI7),0)
local integer V77=GetUnitAbilityLevel(WI7,1093684300)
call XF7(oA,1093742669)
call SetUnitAbilityLevel(oA,1093742669,V77)
call IssuePointOrderById(oA,$D02AC,GetLocationX(l),GetLocationY(l))
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerAddCondition(t,Condition(function MWD))
call NT7(OB7,"Hero",WI7)
call NQ7(OB7,"x",GetLocationX(l))
call NQ7(OB7,"y",GetLocationY(l))
call TriggerEvaluate(t)
call RemoveLocation(l)
set WI7=null
set l=null
set t=null
set oA=null
endfunction
function MYD takes nothing returns boolean
if GetSpellAbilityId()==1093684300 then
call MXD()
endif
return false
endfunction
function GQ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function MYD))
set t=null
endfunction
function MZD takes nothing returns boolean
local unit ZX7=GetTriggerUnit()
local unit IH7=GetAttacker()
local integer BC7=GetUnitAbilityLevel(ZX7,1093744977)
local unit BB7
if GetRandomInt(1,100)<=5+BC7*5 and KE7(ZX7,IH7)<=325 then
set BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
call XF7(BB7,1093681750)
call SetUnitAbilityLevel(BB7,1093681750,BC7)
call IssueTargetOrderById(BB7,$D007F,IH7)
set BB7=null
endif
set ZX7=null
set IH7=null
return false
endfunction
function MAD takes unit p5,boolean UA9 returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function MZD))
if UA9 then
set nj[GetPlayerId(GetOwningPlayer(p5))]=t
endif
set t=null
set p5=null
endfunction
function MBD takes nothing returns boolean
if GetLearnedSkill()==1093744977 and GetUnitAbilityLevel(GetTriggerUnit(),1093744977)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call MAD(GetTriggerUnit(),false)
endif
return false
endfunction
function GS8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function MBD))
set t=null
endfunction
function MCD takes nothing returns boolean
return GetUnitAbilityLevel(GetAttacker(),1093685040)>0 and OT7(GetAttacker(),"BeastRageTrigger")==false
endfunction
function M3D takes nothing returns nothing
local unit IG7=GetAttacker()
local unit IH7=GetTriggerUnit()
local integer I97=GetHandleId(IG7)
local integer R50=(LoadInteger(L7,(I97),(237)))
local unit M6D=TQ7(R50)
local integer Y_9=YH7((LoadInteger(L7,(I97),(236))),0)
local integer BC7=GetUnitAbilityLevel(IG7,(1093685040))
local integer R46=1
if M6D!=IH7 then
set Y_9=1
else
set Y_9=YG7(Y_9+1,8)
endif
if Y_9>1 then
set R46=Y_9+7*(BC7-1)
endif
call YF7(IG7,(1093684826),R46)
call SaveInteger(L7,(I97),(236),(Y_9))
if M6D!=IH7 then
call TP7(R50)
set R50=TS7(IH7)
call SaveInteger(L7,(I97),(237),(R50))
endif
call O37(IG7,"BeastRageTrigger",.4)
set IG7=null
set IH7=null
set M6D=null
endfunction
function G68 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function MCD))
call TriggerAddAction(t,function M3D)
call X_7(1093684826)
set t=null
endfunction
function MLD takes unit ZX7,unit IH7,unit BB7,integer BC7 returns nothing
call SetUnitOwner(BB7,GetOwningPlayer(IH7),false)
call SetUnitAbilityLevel(BB7,1093808463,BC7)
call IssueTargetOrderById(BB7,$D00DE,IH7)
call B67(ZX7,IH7,1,25+50*BC7)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",IH7,"overhead"))
endfunction
function M1D takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),ZE4)==false then
call GroupAddUnit(ZE4,GetEnumUnit())
call MLD(Z84,GetEnumUnit(),Z94,ZF4)
endif
endfunction
function M0D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
local real x=GetUnitX(ZX7)
local real y=GetUnitY(ZX7)
local unit M5D=(LoadUnitHandle(L7,(I97),(675)))
local unit M2D=(LoadUnitHandle(L7,(I97),(676)))
local real a=(LoadReal(L7,(I97),($D)))
local real d=(LoadReal(L7,(I97),(433)))
local integer BC7=(LoadInteger(L7,(I97),(5)))
local group BQ9=(LoadGroupHandle(L7,(I97),($BB)))
local group g=WS7()
if GetTriggerEvalCount(t)<=50 then
set a=a+20
set d=d+7
call SaveReal(L7,(I97),($D),((a)*1.))
call SaveReal(L7,(I97),(433),((d)*1.))
elseif GetTriggerEvalCount(t)<=100 then
set a=a+20
set d=d-7
call SaveReal(L7,(I97),($D),((a)*1.))
call SaveReal(L7,(I97),(433),((d)*1.))
endif
call SetUnitX(M5D,X17(x+d*Cos(a*bj_DEGTORAD)))
call SetUnitY(M5D,X07(y+d*Sin(a*bj_DEGTORAD)))
set a=a+$B4
call SetUnitX(M2D,X17(x+d*Cos(a*bj_DEGTORAD)))
call SetUnitY(M2D,X07(y+d*Sin(a*bj_DEGTORAD)))
set IN4=ZX7
set Z84=ZX7
set Z94=BB7
set ZE4=BQ9
set ZF4=BC7
call GroupEnumUnitsInRange(g,GetUnitX(M5D),GetUnitY(M5D),125,Condition(function AJ7))
call ForGroup(g,function M1D)
set IN4=ZX7
call GroupEnumUnitsInRange(g,GetUnitX(M2D),GetUnitY(M2D),125,Condition(function AJ7))
call ForGroup(g,function M1D)
call WR7(g)
if GetTriggerEvalCount(t)>100 then
call KillUnit(M5D)
call KillUnit(M2D)
call KillUnit(BB7)
call WR7(BQ9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
set M5D=null
set M2D=null
set BB7=null
return false
endfunction
function M_D takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local real x=GetUnitX(ZX7)
local real y=GetUnitY(ZX7)
local unit M5D=CreateUnit(GetOwningPlayer(ZX7),1697657433,x,y,0)
local unit M2D=CreateUnit(GetOwningPlayer(ZX7),1697657433,x,y,0)
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,x,y,0)
call UnitAddAbility(BB7,1093808463)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(19),(BB7))
call SaveUnitHandle(L7,(I97),(675),(M5D))
call SaveUnitHandle(L7,(I97),(676),(M2D))
call SaveReal(L7,(I97),($D),((0)*1.))
call SaveReal(L7,(I97),(433),((0)*1.))
call SaveInteger(L7,(I97),(5),(GetUnitAbilityLevel(ZX7,1093808462)))
call SaveGroupHandle(L7,(I97),($BB),(WS7()))
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerAddCondition(t,Condition(function M0D))
set ZX7=null
set M5D=null
set M2D=null
set t=null
set BB7=null
endfunction
function N4D takes unit ZX7,unit IH7,unit BB7,integer BC7 returns nothing
call SetUnitOwner(BB7,GetOwningPlayer(IH7),false)
call SetUnitAbilityLevel(BB7,1093808464,BC7)
call IssueTargetOrderById(BB7,$D006B,IH7)
call B67(ZX7,IH7,16,75+0*BC7)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",IH7,"overhead"))
endfunction
function N7D takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),ZE4)==false and ZD4!=null and XH7(ZD4)==false then
call GroupAddUnit(ZE4,GetEnumUnit())
call N4D(Z84,GetEnumUnit(),Z94,ZF4)
endif
endfunction
function N8D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real x=(LoadReal(L7,(I97),(6)))
local real y=(LoadReal(L7,(I97),(7)))
local unit M5D=(LoadUnitHandle(L7,(I97),(393)))
local unit M2D=(LoadUnitHandle(L7,(I97),(394)))
local unit N9D=(LoadUnitHandle(L7,(I97),(395)))
local unit NDD=(LoadUnitHandle(L7,(I97),(396)))
local unit NED=(LoadUnitHandle(L7,(I97),(397)))
local real a=(LoadReal(L7,(I97),($D)))-12.5
local real d=(LoadReal(L7,(I97),(433)))
local integer BC7=(LoadInteger(L7,(I97),(5)))
local unit T19
local group g
local group BQ9=(LoadGroupHandle(L7,(I97),($BB)))
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
set d=d+900/20.
call SaveReal(L7,(I97),(433),((d)*1.))
call SetUnitX(M5D,X17(x+d*Cos(a*bj_DEGTORAD)))
call SetUnitY(M5D,X07(y+d*Sin(a*bj_DEGTORAD)))
set a=a+6.25
call SetUnitX(M2D,X17(x+d*Cos(a*bj_DEGTORAD)))
call SetUnitY(M2D,X07(y+d*Sin(a*bj_DEGTORAD)))
set a=a+6.25
call SetUnitX(N9D,X17(x+d*Cos(a*bj_DEGTORAD)))
call SetUnitY(N9D,X07(y+d*Sin(a*bj_DEGTORAD)))
set a=a+6.25
call SetUnitX(NDD,X17(x+d*Cos(a*bj_DEGTORAD)))
call SetUnitY(NDD,X07(y+d*Sin(a*bj_DEGTORAD)))
set a=a+6.25
call SetUnitX(NED,X17(x+d*Cos(a*bj_DEGTORAD)))
call SetUnitY(NED,X07(y+d*Sin(a*bj_DEGTORAD)))
set Z84=ZX7
set Z94=BB7
set ZE4=BQ9
set ZF4=BC7
set T19=M5D
if T19!=null and XH7(T19)==false then
set x=GetUnitX(T19)
set y=GetUnitY(T19)
set ZD4=T19
set IN4=ZX7
set g=WS7()
call GroupEnumUnitsInRange(g,x,y,125,Condition(function AJ7))
call ForGroup(g,function N7D)
call WR7(g)
endif
set T19=M2D
if T19!=null and XH7(T19)==false then
set x=GetUnitX(T19)
set y=GetUnitY(T19)
set ZD4=T19
set IN4=ZX7
set g=WS7()
call GroupEnumUnitsInRange(g,x,y,125,Condition(function AJ7))
call ForGroup(g,function N7D)
call WR7(g)
endif
set T19=N9D
if T19!=null and XH7(T19)==false then
set x=GetUnitX(T19)
set y=GetUnitY(T19)
set ZD4=T19
set IN4=ZX7
set g=WS7()
call GroupEnumUnitsInRange(g,x,y,125,Condition(function AJ7))
call ForGroup(g,function N7D)
call WR7(g)
endif
set T19=NDD
if T19!=null and XH7(T19)==false then
set x=GetUnitX(T19)
set y=GetUnitY(T19)
set ZD4=T19
set IN4=ZX7
set g=WS7()
call GroupEnumUnitsInRange(g,x,y,125,Condition(function AJ7))
call ForGroup(g,function N7D)
call WR7(g)
endif
set T19=NED
if T19!=null and XH7(T19)==false then
set x=GetUnitX(T19)
set y=GetUnitY(T19)
set ZD4=T19
set IN4=ZX7
set g=WS7()
call GroupEnumUnitsInRange(g,x,y,125,Condition(function AJ7))
call ForGroup(g,function N7D)
call WR7(g)
endif
if GetTriggerEvalCount(t)>20 then
call KillUnit(M5D)
call KillUnit(M2D)
call KillUnit(N9D)
call KillUnit(NDD)
call KillUnit(NED)
call KillUnit(BB7)
call WR7(BQ9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
set M5D=null
set M2D=null
set N9D=null
set NDD=null
set NED=null
set BB7=null
return false
endfunction
function NFD takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local real x0=GetUnitX(ZX7)
local real y0=GetUnitY(ZX7)
local real x1=GetSpellTargetX()
local real y1=GetSpellTargetY()
local real a=J77(x0,y0,x1,y1)
local unit M5D=CreateUnit(GetOwningPlayer(ZX7),1697657434,x0,y0,a-12.5)
local unit M2D=CreateUnit(GetOwningPlayer(ZX7),1697657434,x0,y0,a-6.25)
local unit N9D=CreateUnit(GetOwningPlayer(ZX7),1697657434,x0,y0,a)
local unit NDD=CreateUnit(GetOwningPlayer(ZX7),1697657434,x0,y0,a+6.25)
local unit NED=CreateUnit(GetOwningPlayer(ZX7),1697657434,x0,y0,a+12.5)
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,x0,y0,0)
call UnitAddAbility(BB7,1093808464)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(19),(BB7))
call SaveUnitHandle(L7,(I97),(393),(M5D))
call SaveUnitHandle(L7,(I97),(394),(M2D))
call SaveUnitHandle(L7,(I97),(395),(N9D))
call SaveUnitHandle(L7,(I97),(396),(NDD))
call SaveUnitHandle(L7,(I97),(397),(NED))
call SaveReal(L7,(I97),(6),((x0)*1.))
call SaveReal(L7,(I97),(7),((y0)*1.))
call SaveReal(L7,(I97),(433),((0)*1.))
call SaveReal(L7,(I97),($D),((a)*1.))
call SaveGroupHandle(L7,(I97),($BB),(WS7()))
call SaveInteger(L7,(I97),(5),(GetUnitAbilityLevel(ZX7,1093808461)))
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerAddCondition(t,Condition(function N8D))
set ZX7=null
set M5D=null
set M2D=null
set N9D=null
set NDD=null
set NED=null
set t=null
set BB7=null
endfunction
function NGD takes nothing returns boolean
if GetSpellAbilityId()==1093808461 then
call NFD()
elseif GetSpellAbilityId()==1093808462 then
call M_D()
endif
return false
endfunction
function NHD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093808460)
local player p=(LoadPlayerHandle(L7,(I97),(54)))
if GetUnitTypeId(ZX7)==1311781175 or GetUnitTypeId(ZX7)==1311911984 or GetUnitTypeId(ZX7)==1311911985 or GetUnitTypeId(ZX7)==1311781442 then
if((LoadInteger(L7,(GetHandleId((ZX7))),((4416))))==1)==false or p!=GetOwningPlayer(ZX7)then
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093808462,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093808461,false)
call SaveInteger(L7,(GetHandleId((ZX7))),((4416)),(1))
call SaveInteger(L7,(GetHandleId((ZX7))),((4417)),(2))
if p!=GetOwningPlayer(ZX7)then
call SavePlayerHandle(L7,(I97),(54),(GetOwningPlayer(ZX7)))
endif
endif
if GetUnitAbilityLevel(ZX7,1093808462)!=BC7 then
call SetUnitAbilityLevel(ZX7,1093808462,BC7)
endif
elseif GetUnitTypeId(ZX7)==1311781174 then
if((LoadInteger(L7,(GetHandleId((ZX7))),((4417))))==1)==false or p!=GetOwningPlayer(ZX7)then
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093808462,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093808461,true)
call SaveInteger(L7,(GetHandleId((ZX7))),((4417)),(1))
call SaveInteger(L7,(GetHandleId((ZX7))),((4416)),(2))
if p!=GetOwningPlayer(ZX7)then
call SavePlayerHandle(L7,(I97),(54),(GetOwningPlayer(ZX7)))
endif
endif
if GetUnitAbilityLevel(ZX7,1093808461)!=BC7 then
call SetUnitAbilityLevel(ZX7,1093808461,BC7)
endif
endif
set t=null
set ZX7=null
return false
endfunction
function NID takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
call XF7(ZX7,1093808462)
call XF7(ZX7,1093808461)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093808462,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093808461,false)
call SaveInteger(L7,(GetHandleId((ZX7))),((4416)),(2))
call SaveInteger(L7,(GetHandleId((ZX7))),((4417)),(2))
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function NHD))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SavePlayerHandle(L7,(I97),(54),(GetOwningPlayer(ZX7)))
set t=null
set ZX7=null
endfunction
function NJD takes nothing returns boolean
if GetLearnedSkill()==1093808460 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093808460)==1 then
call NID()
endif
return false
endfunction
function GL8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function NJD))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function NGD))
set t=null
endfunction
function NKD takes nothing returns nothing
if GetEnumUnit()==GetTriggerUnit()then
call Z57(GetEnumUnit(),1093687365,R64,R34+5,1110454338)
else
call Z57(GetEnumUnit(),1093687365,R64,R34,1110454338)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093687365,false)
endfunction
function NMD takes nothing returns nothing
local group g=WS7()
set R64=GetUnitAbilityLevel(GetTriggerUnit(),1093748042)
set R34=5
call GroupEnumUnitsInRange(g,0,0,9999,Condition(function BO7))
call ForGroup(g,function NKD)
call WR7(g)
set g=null
endfunction
function NND takes nothing returns boolean
if GetSpellAbilityId()==1093748042 then
call NMD()
endif
return false
endfunction
function G18 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function NND))
set t=null
endfunction
function NOD takes nothing returns boolean
return GetSpellAbilityId()==1093681733
endfunction
function NPD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call SetUnitAbilityLevel(ZX7,1093679429,GetUnitAbilityLevel(ZX7,1093681733))
call UnitRemoveAbility(ZX7,1110456665)
set t=null
set ZX7=null
return false
endfunction
function NQD takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function NPD))
set t=null
set ZX7=null
endfunction
function GC8 takes nothing returns nothing
set Dc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Dc,EVENT_PLAYER_UNIT_SPELL_FINISH)
call TriggerRegisterAnyUnitEventBJ(Dc,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(Dc,Condition(function NOD))
call TriggerAddAction(Dc,function NQD)
endfunction
function NRD takes nothing returns boolean
return GetLearnedSkill()==1093681733 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function NSD takes nothing returns nothing
call SetUnitAbilityLevel(GetTriggerUnit(),1093679429,GetUnitAbilityLevel(GetTriggerUnit(),1093681733))
endfunction
function G38 takes nothing returns nothing
set DC=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(DC,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(DC,Condition(function NRD))
call TriggerAddAction(DC,function NSD)
endfunction
function NTD takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit NUD=O77(GetHandleId(t),"MeldTarget")
call UnitRemoveAbility(NUD,1093685827)
call NM7(GetHandleId(t))
call DestroyTimer(t)
set NUD=null
set t=null
endfunction
function NVD takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local timer t2=null
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local unit NUD=GetTriggerUnit()
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==WI7 then
call DestroyTrigger(t)
call B67(WI7,NUD,2,50*GetUnitAbilityLevel(WI7,1093685846))
call YW7(I2S(50*GetUnitAbilityLevel(WI7,1093685846)),1.,NUD,.03,$FF,0,0,$FF)
set t2=CreateTimer()
call XF7(NUD,1093685827)
call SetUnitAbilityLevel(NUD,1093685827,GetUnitAbilityLevel(WI7,1093685846))
call NT7(GetHandleId(t2),"MeldTarget",NUD)
call TimerStart(t2,$A,false,function NTD)
endif
else
call DestroyTrigger(t)
endif
set NUD=null
set WI7=null
set t2=null
set t=null
endfunction
function NWD takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local trigger t2=null
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local real x=ON7(OB7,"x")
local real y=ON7(OB7,"y")
local unit NXD=null
local real jUv=9999
local unit NUD=GetOrderTargetUnit()
if GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER and IsUnitEnemy(GetOrderTargetUnit(),GetOwningPlayer(WI7))and(GetIssuedOrderId()==851983or GetIssuedOrderId()==$D0003)then
if KF7(x,y,GetUnitX(NUD),GetUnitY(NUD))<($A5+60*GetUnitAbilityLevel(WI7,1093685839))then
call UnitRemoveAbility(WI7,1110456395)
call VX7(t)
if IsUnitType(GetOrderTargetUnit(),UNIT_TYPE_STRUCTURE)==false then
set t2=CreateTrigger()
call TriggerRegisterUnitEvent(t2,NUD,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t2,2,false)
set OB7=GetHandleId(t2)
call NT7(OB7,"Hero",WI7)
call TriggerAddAction(t2,function NVD)
endif
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_CAST or GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitRemoveAbility(WI7,1110456395)
call VX7(t)
else
if x!=GetUnitX(WI7)or y!=GetUnitY(WI7)then
call UnitRemoveAbility(WI7,1110456395)
call VX7(t)
endif
endif
set NXD=null
set WI7=null
set t2=null
set t=null
set NUD=null
endfunction
function NYD takes nothing returns nothing
local unit WX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call DestroyEffect(AddSpecialEffectTarget("effects\\PurpleAura.mdx",WX7,"origin"))
call Y17(aO,GetUnitX(WX7),GetUnitY(WX7))
call TriggerRegisterTimerEvent(t,.2,true)
call TriggerRegisterUnitEvent(t,WX7,EVENT_UNIT_SPELL_CAST)
call TriggerRegisterUnitEvent(t,WX7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,WX7,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(t,function NWD)
call NT7(OB7,"Hero",WX7)
call NQ7(OB7,"x",GetUnitX(WX7))
call NQ7(OB7,"y",GetUnitY(WX7))
call IssueImmediateOrderById(WX7,$D0019)
set t=null
set WX7=null
endfunction
function NZD takes nothing returns boolean
if GetSpellAbilityId()==1093685846 then
call NYD()
endif
return false
endfunction
function M78 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function NZD))
set t=null
endfunction
function NAD takes nothing returns boolean
local unit WI7=GetTriggerUnit()
local integer OB7=GetHandleId(WI7)
local integer NBD=OM7(OB7,"RefractionPrevent_Remaining")
if NBD>0 and GetTriggerEventId()!=EVENT_UNIT_DEATH then
if GetEventDamage()>5 and GetEventDamage()<GetUnitState(WI7,UNIT_STATE_LIFE)then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\PriestMissile\\PriestMissile.mdl",WI7,"right hand"))
call YN7(WI7,GetEventDamage())
call NP7(OB7,"RefractionPrevent_Remaining",NBD-1)
endif
else
call UnitRemoveAbility(WI7,1093685838)
call UnitRemoveAbility(WI7,1110456394)
call NP7(OB7,"RefractionPrevent_Remaining",0)
endif
set WI7=null
return false
endfunction
function NCD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local unit WX7=O77(GetHandleId(t),"Hero")
local integer I97=GetHandleId(WX7)
local integer Y48=OM7(I97,"RefractionDamage_Remaining")
if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED and GetAttacker()==WX7 and IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false)then
if GetTriggerEventId()!=EVENT_UNIT_DEATH and Y48>0 and GetEventDamage()>0 then
call NP7(I97,"RefractionDamage_Remaining",Y48-1)
else
call UnitRemoveAbility(WX7,1093685830)
call UnitRemoveAbility(WX7,1093685837)
call UnitRemoveAbility(WX7,1110456393)
call NP7(I97,"RefractionDamage_Remaining",0)
endif
endif
set t=null
set WX7=null
return false
endfunction
function N3D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local unit WX7=O77(GetHandleId(t),"Hero")
local integer I97=GetHandleId(WX7)
call NP7(I97,"RefractionPrevent_Remaining",0)
call NP7(I97,"RefractionDamage_Remaining",0)
call UnitRemoveAbility(WX7,1093685830)
call UnitRemoveAbility(WX7,1093685837)
call UnitRemoveAbility(WX7,1093685838)
call NM7(GetHandleId(t))
call OZ7(t)
set t=null
set WX7=null
return false
endfunction
function N6D takes nothing returns nothing
local unit WX7=GetTriggerUnit()
local integer I97=GetHandleId(WX7)
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,17,false)
call TriggerAddCondition(t,Condition(function N3D))
call NT7(GetHandleId(t),"Hero",WX7)
call Y17(DP,GetUnitX(WX7),GetUnitY(WX7))
call XF7(WX7,1093685838)
call NP7(I97,"RefractionPrevent_Remaining",GetUnitAbilityLevel(WX7,1093748033)+2)
call XF7(WX7,1093685830)
call SetUnitAbilityLevel(WX7,1093685830,GetUnitAbilityLevel(WX7,1093748033))
call XF7(WX7,1093685837)
call NP7(I97,"RefractionDamage_Remaining",GetUnitAbilityLevel(WX7,1093748033)+2)
set WX7=null
set t=null
endfunction
function NLD takes unit WX7,boolean UA9 returns nothing
local trigger t
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,WX7,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,WX7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function NAD))
call NP7(GetHandleId(WX7),"RefractionPrevent_Remaining",0)
if UA9 then
set rj[GetPlayerId(GetOwningPlayer(WX7))]=t
endif
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,WX7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function NCD))
call NT7(GetHandleId(t),"Hero",WX7)
call NP7(GetHandleId(WX7),"RefractionDamage_Remaining",0)
if UA9 then
set Ej[GetPlayerId(GetOwningPlayer(WX7))]=t
endif
set t=null
set WX7=null
endfunction
function N1D takes nothing returns boolean
if GetLearnedSkill()==1093748033 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093748033)==1 then
call NLD(GetTriggerUnit(),false)
endif
return false
endfunction
function N0D takes nothing returns boolean
if GetSpellAbilityId()==1093748033 then
call N6D()
endif
return false
endfunction
function M88 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function N0D))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function N1D))
set t=null
endfunction
function N5D takes unit u,real wP,real wq,real wQ,real wr,real wR returns boolean
local real ws=wQ-wP
local real wS=wr-wq
local real wt=GetUnitX(u)-wP
local real wT=GetUnitY(u)-wq
return wR>=RAbsBJ(ws*wT-wS*wt)/ RAbsBJ(Pow(Pow(ws,2)+Pow(wS,2),.5))
endfunction
function N2D takes unit p5,unit m5,real YM7,real wU,real wv returns nothing
local integer BC7=GetUnitAbilityLevel(p5,1093685839)
local real wV=(300+20*BC7)*2
local real ww=200+25
local unit wW
local real dx
local real dy
local real wx
local real x
local real y
local group g=WS7()
local boolean wX
local boolean wy
set dx=GetUnitX(m5)-GetUnitX(p5)
set dy=GetUnitY(m5)-GetUnitY(p5)
set wx=Pow(Pow(dx,2)+Pow(dy,2),.5)
set x=GetUnitX(m5)+(wV/ 2-25)*(dx/ wx)
set y=GetUnitY(m5)+(wV/ 2-25)*(dy/ wx)
set IN4=p5
set IJ4=YM7
call GroupEnumUnitsInRange(g,x,y,Pow(Pow(wV/ 2,2)+Pow(ww/ 2,2),.5),Condition(function AJ7))
call GroupRemoveUnit(g,m5)
set wW=FirstOfGroup(g)
loop
exitwhen wW==null
set wX=N5D(wW,GetUnitX(p5),GetUnitY(p5),GetUnitX(m5),GetUnitY(m5),ww/ 2)
set wy=N5D(wW,x,y,x-100,y+100*x*Pow(y,-1),.01+wV/ 2)
if wX and wy then
call B67(p5,wW,3,YM7)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\PriestMissile\\PriestMissile.mdl",wW,"chest"))
endif
call GroupRemoveUnit(g,wW)
set wW=FirstOfGroup(g)
endloop
call WR7(g)
set wW=null
set g=null
endfunction
function N_D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
local unit p5=O77(OB7,"Source")
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==p5 and GetEventDamage()>1 and IsUnitIllusion(m5)==false then
call DisableTrigger(t)
call N2D(p5,m5,GetEventDamage(),ON7(OB7,"InitX"),ON7(OB7,"InitY"))
call NM7(OB7)
call OZ7(t)
endif
else
call NM7(OB7)
call OZ7(t)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function O4D takes nothing returns nothing
local trigger t=CreateTrigger()
local unit m5=GetTriggerUnit()
local unit p5=GetAttacker()
local integer OB7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.,false)
call TriggerAddCondition(t,Condition(function N_D))
call NT7(OB7,"Target",m5)
call NT7(OB7,"Source",p5)
call NQ7(OB7,"InitX",GetUnitX(p5))
call NQ7(OB7,"InitY",GetUnitY(p5))
set m5=null
set p5=null
set t=null
endfunction
function O7D takes nothing returns nothing
local unit p5=GetAttacker()
if OT7(p5,"VorpalCooldown")==false then
call O37(p5,"VorpalCooldown",.4)
call O4D()
endif
set p5=null
endfunction
function O8D takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093685839)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==O77(GetHandleId(GetTriggeringTrigger()),"Hero")then
call O7D()
endif
return false
endfunction
function O9D takes nothing returns nothing
local trigger t
if GetUnitAbilityLevel(GetTriggerUnit(),1093685839)==1 then
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function O8D))
call NT7(GetHandleId(t),"Hero",GetTriggerUnit())
endif
call SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1382379618,GetUnitAbilityLevel(GetTriggerUnit(),1093685839))
set t=null
endfunction
function ODD takes nothing returns boolean
if GetLearnedSkill()==1093685839 and IsUnitIllusion(GetTriggerUnit())==false then
call O9D()
endif
return false
endfunction
function M98 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function ODD))
set t=null
endfunction
function OED takes unit WI7 returns nothing
local unit WX7=M7[GetPlayerId(GetOwningPlayer(WI7))]
local integer OB7=GetHandleId(WX7)
local integer w3
local integer i
local integer x
local integer L33
local unit w4
if GetUnitTypeId(WX7)!='E01Y' then
return
endif
set w3=(LoadInteger(L7,(OB7),(348)))
set i=1
loop
exitwhen i>w3
set L33=(LoadInteger(L7,(OB7),(7000+i)))
set w4=TQ7(L33)
if w4==WI7 then
set x=i
loop
exitwhen x==w3
call SaveInteger(L7,(OB7),(7000+x),((LoadInteger(L7,(OB7),(7000+x+1)))))
set x=x+1
endloop
set i=w3
endif
set i=i+1
endloop
call SaveInteger(L7,(OB7),(348),(w3-1))
set w4=null
set WX7=null
endfunction
function OGD takes unit WI7 returns nothing
local unit WX7=M7[GetPlayerId(GetOwningPlayer(WI7))]
local integer OB7=GetHandleId(WX7)
local integer w3=(LoadInteger(L7,(OB7),(348)))
call SaveReal(L7,(GetHandleId(WI7)),(786),(((TimerGetElapsed(W)))*1.))
set w3=w3+1
call SaveInteger(L7,(OB7),(7000+w3),(TS7(WI7)))
call SaveInteger(L7,(OB7),(348),(w3))
if Ab[GetPlayerId(GetOwningPlayer(WX7))]then
call SelectUnitAddForPlayer(WI7,GetOwningPlayer(WX7))
endif
set WX7=null
endfunction
function OID takes unit WI7 returns nothing
local integer w8=GetUnitAbilityLevel(WI7,'A0RP')*3+2
local integer w3=GetHandleId(WI7)
local integer i=(LoadInteger(L7,(w3),(348)))
local integer x=(LoadInteger(L7,(w3),(7001)))
local unit WX7=TQ7(x)
if i>=w8 then
call OED(WX7)
call RemoveUnit(WX7)
endif
set WX7=null
endfunction
function OKD takes nothing returns nothing
local unit p5=GetTriggerUnit()
local real x=GetUnitX(p5)
local real y=GetUnitY(p5)
local group g=WS7()
local real VM8=(LoadReal(L7,(GetHandleId(p5)),(786)))
local real OMD=(TimerGetElapsed(W))-VM8
local integer w3=1
local integer K2v
local integer BC7
local unit u
local unit BB7
if OMD>4 then
set w3=5
elseif OMD>3 then
set w3=4
elseif OMD>2 then
set w3=3
elseif OMD>1 then
set w3=2
endif
if w3>4 then
set K2v='A2W8'
set BC7=1
else
set K2v='A0RU'
set BC7=w3
endif
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl",x,y))
call GroupEnumUnitsInRange(g,x,y,400,Condition(function AW7))
loop
set u=FirstOfGroup(g)
exitwhen u==null
set BB7=CreateUnit(GetOwningPlayer(p5),'e00E',GetUnitX(u),GetUnitY(u),0)
call XF7(BB7,K2v)
call SetUnitAbilityLevel(BB7,K2v,BC7)
call IssueTargetOrderById(BB7,$D006B,u)
set BB7=null
call GroupRemoveUnit(g,u)
endloop
call WR7(g)
call OED(p5)
call KillUnit(p5)
call SetUnitAnimationByIndex(p5,3)
set g=null
set p5=null
endfunction
function OOD takes nothing returns boolean
return GetOwningPlayer(GetFilterUnit())==IR4 and GetUnitTypeId(GetFilterUnit())=='e020' and XH7(GetFilterUnit())==false
endfunction
function OPD takes nothing returns nothing
local real OQD=KF7(GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),IJ4,IK4)
local real ORD=KF7(GetUnitX(IN4),GetUnitY(IN4),IJ4,IK4)
if OQD<ORD then
set IN4=GetEnumUnit()
endif
endfunction
function OSD takes nothing returns nothing
local group g=WS7()
set IR4=GetOwningPlayer(GetTriggerUnit())
call GroupEnumUnitsInRange(g,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),9000,Condition(function OOD))
set IN4=FirstOfGroup(g)
set IJ4=GetUnitX(GetTriggerUnit())
set IK4=GetUnitY(GetTriggerUnit())
call ForGroup(g,function OPD)
call IssueImmediateOrderById((IN4),$D024C)
call WR7(g)
set g=null
endfunction
function OUD takes nothing returns nothing
local location l=GetSpellTargetLoc()
call XF7(GetTriggerUnit(),'A0RT')
call OID(GetTriggerUnit())
call OGD(CreateUnit(GetOwningPlayer(GetTriggerUnit()),'e020',GetLocationX(l),GetLocationY(l),0))
call RemoveLocation(l)
set l=null
endfunction
function OVD takes nothing returns boolean
if GetSpellAbilityId()=='A0RP' then
call OUD()
endif
if GetSpellAbilityId()=='A0RT' then
call OSD()
endif
return false
endfunction
function OWD takes nothing returns boolean
if GetSpellAbilityId()=='A0RQ' then
call OKD()
endif
return false
endfunction
function OXD takes nothing returns boolean
if GetLearnedSkill()=='A0RP' and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),'A0RP')==1 then
call XF7(GetTriggerUnit(),'A0RT')
endif
return false
endfunction
function OYD takes nothing returns boolean
if GetUnitTypeId(GetDyingUnit())=='e020' then
call OED(GetTriggerUnit())
endif
return false
endfunction
function MD8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function OVD))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function OYD))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function OWD))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function OXD))
set t=null
endfunction
function OZD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitRemoveAbility(p5,1093750323)
call UnitRemoveAbility(p5,1093750326)
call UnitRemoveAbility(p5,1093750327)
call UnitRemoveAbility(p5,1110459208)
call NM7(OB7)
call OZ7(t)
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
if GetTriggerUnit()==p5 and GetSpellAbilityId()==1093750841 and TimerGetElapsed(W)>ON7(OB7,"OriginalTime")then
call NM7(OB7)
call OZ7(t)
elseif YA8(GetSpellAbilityId())and p5==GetSpellTargetUnit()then
call UnitRemoveAbility(p5,1093750323)
call UnitRemoveAbility(p5,1093750326)
call UnitRemoveAbility(p5,1093750327)
call UnitRemoveAbility(p5,1110459208)
call NM7(OB7)
call OZ7(t)
endif
else
call UnitRemoveAbility(p5,1093750323)
call UnitRemoveAbility(p5,1093750326)
call UnitRemoveAbility(p5,1093750327)
call UnitRemoveAbility(p5,1110459208)
call NM7(OB7)
call OZ7(t)
endif
set t=null
set p5=null
return false
endfunction
function OAD takes nothing returns nothing
local unit p5=GetAttacker()
local integer OB7=GetHandleId(p5)
local integer V77=GetUnitAbilityLevel(p5,1093750841)
local integer SV9=OM7(OB7,"Count")
local integer OBD=2+V77
local trigger t=null
set SV9=SV9+1
call NP7(OB7,"Count",SV9)
if SV9>=OBD then
call UnitRemoveAbility(p5,1093750323)
call UnitRemoveAbility(p5,1093750326)
call UnitRemoveAbility(p5,1093750327)
call UnitRemoveAbility(p5,1110459208)
set t=OE7(OB7,"OverpowerEndTrig")
call NM7(GetHandleId(t))
call OZ7(t)
set t=null
endif
set p5=null
endfunction
function OCD takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1110459208)>0 then
call OAD()
endif
return false
endfunction
function O3D takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local integer V77=GetUnitAbilityLevel(p5,1093750841)
call XF7(p5,1093750323)
call XF7(p5,1093750326)
call XF7(p5,1093750327)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750326,false)
call TriggerRegisterTimerEvent(t,$F,false)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function OZD))
call NV7(GetHandleId(p5),"OverpowerEndTrig",t)
call NP7(GetHandleId(p5),"Count",0)
call NT7(OB7,"Source",p5)
call NQ7(OB7,"OriginalTime",(TimerGetElapsed(W)+1)*1.)
set t=null
set p5=null
endfunction
function O6D takes nothing returns boolean
if GetSpellAbilityId()==1093750841 then
call O3D()
endif
return false
endfunction
function GT8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function O6D))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function OCD))
call X_7(1093750323)
set t=null
endfunction
function OLD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=O77(I97,"Source")
local integer BC7=GetUnitAbilityLevel(ZX7,1093684291)
local integer I79
local integer O1D
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetUnitAbilityLevel(ZX7,1110454856)==0 or(GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT and ZX7==GetSpellTargetUnit()and YA8(GetSpellAbilityId()))then
call NM7(I97)
call OZ7(t)
call UnitRemoveAbility(ZX7,1110454856)
call B_7(ZX7,0)
else
set I79=R2I(GetUnitState(ZX7,UNIT_STATE_LIFE)*(.04+.01*BC7))
set O1D=OM7(I97,"LastBonus")
call YN7(ZX7,0.8*GetEventDamage())
call YW8(ZX7,0,0)
if I79!=O1D then
call NP7(I97,"LastBonus",I79)
call B_7(ZX7,I79)
endif
endif
set t=null
set ZX7=null
return false
endfunction
function O0D takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DEATH)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function OLD))
call NT7(OB7,"Source",GetTriggerUnit())
call NP7(OB7,"LastBonus",0)
set t=null
endfunction
function O5D takes nothing returns boolean
if GetSpellAbilityId()==1093684291 then
call O0D()
endif
return false
endfunction
function O2D takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1110454856)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))==false and GetUnitAbilityLevel(GetTriggerUnit(),1093678162)==0 then
endif
return false
endfunction
function GU8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function O5D))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function O2D))
set t=null
endfunction
function AA5 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call G41(ZX7,0)
set ZX7=null
return false
endfunction
function AB5 takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer AC5=(LoadInteger(L7,(GetHandleId(IH7)),(824)))
local real AD5=(LoadReal(L7,(GetHandleId(IH7)),(825)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093817669)
if GetTriggerEventId()==EVENT_WIDGET_DEATH or AD5<(TimerGetElapsed(W))then
call SaveInteger(L7,(GetHandleId(IH7)),(824),(0))
call DestroyEffect((LoadEffectHandle(L7,(I97),(175))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif GetTriggerEventId()==EVENT_UNIT_ATTACKED then
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.31,true)
call TriggerAddCondition(t,Condition(function AA5))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call G41(ZX7,IMinBJ((10+5*BC7)*AC5,500))
endif
set t=null
set ZX7=null
set IH7=null
endfunction
function AE5 takes nothing returns boolean
if GetTriggerEventId()!=EVENT_UNIT_ATTACKED then
call AB5()
endif
if GetAttacker()==(LoadUnitHandle(L7,(GetHandleId(GetTriggeringTrigger())),(2)))then
call AB5()
endif
return false
endfunction
function AF5 takes unit ZX7,unit IH7 returns nothing
local trigger t
local integer I97
local integer AC5=(LoadInteger(L7,(GetHandleId(IH7)),(824)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093817669)
call SaveInteger(L7,(GetHandleId(IH7)),(824),(AC5+1))
call SaveReal(L7,(GetHandleId(IH7)),(825),(((TimerGetElapsed(W))+15)*1.0))
if AC5==0 then
set t=CreateTrigger()
set I97=GetHandleId(t)
call SaveEffectHandle(L7,(I97),(175),(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\BattleRoar\\RoarTarget.mdl",IH7,"overhead")))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_ATTACKED)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function AE5))
call SaveInteger(L7,(GetHandleId(IH7)),(824),(2))
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.31,true)
call TriggerAddCondition(t,Condition(function AA5))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call G41(ZX7,IMinBJ((10+5*BC7),500))
endif
set t=null
endfunction
function AG5 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==ZX7 then
call DisableTrigger(t)
call AF5(ZX7,IH7)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
else
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function AH5 takes nothing returns nothing
local trigger t=CreateTrigger()
local unit IH7=GetTriggerUnit()
local unit ZX7=GetAttacker()
local integer I97=GetHandleId(t)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,1,false)
call TriggerAddCondition(t,Condition(function AG5))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
set IH7=null
set ZX7=null
set t=null
endfunction
function AI5 takes nothing returns nothing
local unit ZX7=GetAttacker()
if((LoadInteger(L7,(GetHandleId((ZX7))),((4274))))==1)==false then
call O3O(ZX7,4274,0.2)
call AH5()
endif
endfunction
function AJ5 takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093817669)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(L7,(GetHandleId(GetTriggeringTrigger())),(14)))and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))then
call AI5()
endif
return false
endfunction
function AK5 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function AJ5))
call SaveUnitHandle(L7,(GetHandleId(t)),(14),(GetTriggerUnit()))
set t=null
endfunction
function AL5 takes nothing returns boolean
if GetLearnedSkill()==1093817669 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093817669)==1 then
call AK5()
endif
return false
endfunction
function JK1 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function AL5))
set CS1[0]=1093817653
set CS1[1]=1093817654
set CS1[2]=1093817655
set CS1[3]=1093817656
set CS1[4]=1093817657
set CS1[5]=1093817665
set CS1[6]=1093817666
set CS1[7]=1093817667
set CS1[8]=1093817668
call yS(CS1[0])
call yS(CS1[1])
call yS(CS1[2])
call yS(CS1[3])
call yS(CS1[4])
call yS(CS1[5])
call yS(CS1[6])
call yS(CS1[7])
call yS(CS1[8])
set t=null
endfunction
function O91 takes nothing returns boolean 
local trigger t=GetTriggeringTrigger() 
local integer I97=GetHandleId(t) 
local unit p5=(LoadUnitHandle(L7,(I97),(2))) 
call FlushChildHashtable(L7,(I97)) 
call OZ7(t) 
call SetUnitPathing(p5,true) 
set t=null 
set p5=null 
return false 
endfunction 
function OA1 takes unit p5 returns nothing 
local trigger t=CreateTrigger() 
local integer I97=GetHandleId(t) 
call TriggerRegisterTimerEvent(t,5,false) 
call TriggerAddCondition(t,Condition(function O91)) 
call SaveUnitHandle(L7,(I97),(2),(p5)) 
call SetUnitPathing(p5,false) 
set t=null 
endfunction 
function O_D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit m5=O77(OB7,"Target")
local real P4D=ON7(OB7,"rRealX1")
local real x2=ON7(OB7,"x2")
local real P7D=ON7(OB7,"rRealY1")
local real y2=ON7(OB7,"y2")
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathPact\\DeathPactTarget.mdl",p5,"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathPact\\DeathPactTarget.mdl",m5,"origin"))
call SetUnitPosition(p5,x2,y2)
call O37(m5,"4407",1)
call SetUnitPosition(m5,P4D,P7D)
if IsUnitInRegion(BKDD,m5) then 
call OA1(m5) 
endif
call NM7(OB7)
call OZ7(t)
set t=null
set p5=null
set m5=null
return false
endfunction
function P8D takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local real P4D=GetUnitX(p5)
local real P7D=GetUnitY(p5)
local real x2=GetUnitX(m5)
local real y2=GetUnitY(m5)
local trigger t
local integer OB7
if IsUnitAlly(p5,GetOwningPlayer(m5)) or WQ7(GetSpellTargetUnit())==false then
set t=CreateTrigger()
set OB7=GetHandleId(t)
call NT7(OB7,"Source",p5)
call NT7(OB7,"Target",m5)
call NQ7(OB7,"rRealX1",(P4D)*1.)
call NQ7(OB7,"x2",(x2)*1.)
call NQ7(OB7,"rRealY1",(P7D)*1.)
call NQ7(OB7,"y2",(y2)*1.)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function O_D))
call YV7("SPLK",P4D,P7D,x2,y2,.5,0,1,1,.3)
call Y67(P4D,P7D,300)
call Y67(x2,y2,300)
endif
set p5=null
set m5=null
set t=null
endfunction
function P9D takes nothing returns boolean
if GetSpellAbilityId()==1093683534 or GetSpellAbilityId()==1093747031 then
call P8D()
endif
return false
endfunction
function PDD takes nothing returns nothing
if(IsTerrainPathable(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),PATHING_TYPE_WALKABILITY))then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),(GetObjectName((1848652610))))
endif
endfunction
function PED takes nothing returns boolean
if GetSpellAbilityId()==1093683534 or GetSpellAbilityId()==1093747031 then
call PDD()
endif
return false
endfunction
function GV8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function P9D))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function PED))
set t=null
endfunction
function PFD takes unit BB7,real x,real y,integer V77 returns nothing
call SetUnitPosition(BB7,x,y)
if GetPlayerController(GetOwningPlayer(BB7))==MAP_CONTROL_COMPUTER then
call UnitAddAbility(BB7,1093681488)
call SetUnitAbilityLevel(BB7,1093681488,V77)
endif
call IssueImmediateOrderById(BB7,$D026C)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\HowlOfTerror\\HowlCaster.mdl",x,y))
set BB7=null
endfunction
function PGD takes nothing returns boolean
if(IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false and(GetUnitAbilityLevel((GetFilterUnit()),1113815395)>0)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))and IsUnitInGroup(GetFilterUnit(),p0)==false then
call GroupAddUnit(p0,GetFilterUnit())
if GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>R04 then
call SetUnitState(GetFilterUnit(),UNIT_STATE_LIFE,GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)-(R04))
else
call B67(Q0,GetFilterUnit(),7,R04)
endif
endif
return false
endfunction
function PHD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit BB7=O77(OB7,"Caster")
local real l4=ON7(OB7,"Angle")
local real x=ON7(OB7,"x")
local real y=ON7(OB7,"y")
local integer V77=OM7(OB7,"Level")
local group T69=OF7(OB7,"AlreadyDamaged")
local group g
if GetTriggerEvalCount(t)>$A then
call WR7(T69)
call NM7(OB7)
call OZ7(t)
else
set p0=T69
set Q0=p5
set R04=V77*20+$A
set IN4=p5
set g=WS7()
call GroupEnumUnitsInRange(g,x,y,325,Condition(function PGD))
call WR7(g)
set g=null
call PFD(BB7,x,y,V77)
if ModuloInteger(GetTriggerEvalCount(t),2)==0 then
call KillUnit(CreateUnit(GetOwningPlayer(p5),1697657409,x,y,0))
endif
set x=X17(x+$C8*Cos(l4*bj_DEGTORAD))
set y=X07(y+$C8*Sin(l4*bj_DEGTORAD))
call NQ7(OB7,"x",x*1.)
call NQ7(OB7,"y",y*1.)
endif
set t=null
set p5=null
set BB7=null
set T69=null
return false
endfunction
function PID takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x1=GetUnitX(p5)
local real y1=GetUnitY(p5)
local real x2=GetLocationX(l)
local real y2=GetLocationY(l)
local real l4=J77(x1,y1,x2,y2)
local integer V77=GetUnitAbilityLevel(p5,1093744463)
local unit BB7=CreateUnit(GetOwningPlayer(p5),1697656901,x1,y1,0)
call XF7(BB7,1093681488)
call SetUnitAbilityLevel(BB7,1093681488,V77)
call RemoveLocation(l)
call NT7(OB7,"Source",p5)
call NT7(OB7,"Caster",BB7)
call NP7(OB7,"Level",V77)
call NQ7(OB7,"x",x1*1.)
call NQ7(OB7,"y",y1*1.)
call NQ7(OB7,"Angle",l4*1.)
call NB7(OB7,"AlreadyDamaged",WS7())
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function PHD))
set t=null
set p5=null
set l=null
set BB7=null
endfunction
function PJD takes nothing returns boolean
if GetSpellAbilityId()==1093744463 then
call PID()
endif
return false
endfunction
function GW8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function PJD))
set t=null
endfunction
function PKD takes nothing returns nothing
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",GetTriggerUnit(),"weapon"))
endfunction
function PMD takes nothing returns boolean
if GetSpellAbilityId()==1093677633 then
call PKD()
endif
return false
endfunction
function GX8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerAddCondition(t,Condition(function PMD))
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
set t=null
endfunction
function PE3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=(LoadUnitHandle(L7,(OB7),(2)))
local unit TMI=(LoadUnitHandle(L7,(OB7),(17)))
if XH7(p5)==false or GetTriggerEventId()==EVENT_WIDGET_DEATH then
call UnitRemoveAbility(TMI,1093816375)
call UnitRemoveAbility(TMI,1093816376)
call UnitRemoveAbility(TMI,1093816377)
call UnitRemoveAbility(TMI,1093816385)
endif
set t=null
set p5=null
set TMI=null
return false
endfunction
function PF3 takes nothing returns boolean
local trigger t
local integer OB7
local unit p5=GetTriggerUnit()
local unit TMI=GetKillingUnit()
local integer BC7=GetUnitAbilityLevel(p5,1094934883)
set TMI=BK8(TMI)
if IsUnitType(TMI,UNIT_TYPE_HERO)==true then
set t=CreateTrigger()
set OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterDeathEvent(t,TMI)
call TriggerAddCondition(t,Condition(function PE3))
call SaveUnitHandle(L7,(OB7),(2),(p5))
call SaveUnitHandle(L7,(OB7),(17),(TMI))
if BC7==1 then
call XF7(TMI,1093816375)
call SetPlayerAbilityAvailable(GetOwningPlayer(TMI),1093816375,false)
elseif BC7==2 then
call XF7(TMI,1093816376)
call SetPlayerAbilityAvailable(GetOwningPlayer(TMI),1093816376,false)
elseif BC7==3 then
call XF7(TMI,1093816377)
call SetPlayerAbilityAvailable(GetOwningPlayer(TMI),1093816377,false)
elseif BC7==4 then
call XF7(TMI,1093816385)
call SetPlayerAbilityAvailable(GetOwningPlayer(TMI),1093816385,false)
endif
endif
set t=null
set p5=null
set TMI=null
return false
endfunction
function PG3 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit p5=GetTriggerUnit()
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function PF3))
set p5=null
set t=null
endfunction
function PH3 takes nothing returns boolean
if GetLearnedSkill()==1094934883 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1094934883)==1 then
call PG3()
endif
return false
endfunction
function Y61 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerAddCondition(t,Condition(function PH3))
call YB7(t,EVENT_PLAYER_HERO_SKILL)
set t=null
endfunction
function PND takes nothing returns boolean
return(GetSpellAbilityId()==('A2QB')or GetSpellAbilityId()==(1093677616)or GetSpellAbilityId()==(1093810503)or GetSpellAbilityId()==(1093810504)or(GetUnitPointValue(GetTriggerUnit())==500))and GetUnitAbilityLevel(GetTriggerUnit(),(1093684789))>0
endfunction
function POD takes nothing returns nothing
local real PPD=GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)
local real PQD=.03+.02*GetUnitAbilityLevel(GetTriggerUnit(),1093684789)
local real VW9=PPD*PQD
call UnitDamageTarget(GetTriggerUnit(),GetEnumUnit(),VW9,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\ForkedLightning\\ForkedLightningTarget.mdl",GetEnumUnit(),"overhead"))
endfunction
function PRD takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)!=null
endfunction
function PSD takes nothing returns nothing
local location XX8=GetUnitLoc(GetTriggerUnit())
local group VA9=WS7()
local real x=GetLocationX(XX8)
local real y=GetLocationY(XX8)
local boolexpr JJD=Condition(function PRD)
call GroupEnumUnitsInRange(VA9,x,y,1225,JJD)
call ForGroup(VA9,function POD)
call RemoveLocation(XX8)
call WR7(VA9)
call DestroyBoolExpr(JJD)
set XX8=null
set VA9=null
set JJD=null
endfunction
function GY8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function PND))
call TriggerAddAction(t,function PSD)
set t=null
endfunction
function PTD takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and LB7(GetUnitTypeId(GetFilterUnit()))==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(D97)))!=null
endfunction
function PUD takes nothing returns nothing
local real x=GetUnitX(GetEnumUnit())
local real y=GetUnitY(GetEnumUnit())
local unit M67=CreateUnit(GetOwningPlayer(D97),1697656880,x,y,0)
call UnitAddAbility(M67,1093678419)
call SetUnitAbilityLevel(M67,1093678419,DD7)
call IssueTargetOrderById(M67,$D0097,GetEnumUnit())
call UnitApplyTimedLife(M67,1112820806,3)
call UnitAddAbility(M67,1097625443)
if(GetPlayerController(GetOwningPlayer(M67))==MAP_CONTROL_COMPUTER)then
call IssueTargetOrderById(M67,$D0097,GetEnumUnit())
endif
set M67=null
endfunction
function PVD takes nothing returns nothing
local group g=WS7()
set D97=GetTriggerUnit()
if GetSpellAbilityId()==1093810503 then
set DD7=GetUnitAbilityLevel(GetTriggerUnit(),1093810503)+4
else
set DD7=GetUnitAbilityLevel(GetTriggerUnit(),1093810504)+7
endif
call GroupEnumUnitsInRect(g,bj_mapInitialPlayableArea,Condition(function PTD))
call ForGroup(g,function PUD)
call WR7(g)
set g=null
endfunction
function PWD takes nothing returns boolean
if GetSpellAbilityId()==1093810503 or GetSpellAbilityId()==1093810504 then
call PVD()
endif
return false
endfunction
function GZ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function PWD))
set t=null
endfunction
function NZI takes unit WI7,unit m5 returns nothing
local unit oA=CreateUnit(GetOwningPlayer(m5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
call UnitAddAbility(oA,'A0R9')
call IssueTargetOrderById(oA,$D007F,m5)
set oA=null
endfunction
function NEI takes nothing returns boolean
return((WF7(GetFilterUnit())==false and IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))and IsHeroUnitId(GetUnitTypeId(GetFilterUnit())))!=null
endfunction
function NXI takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local unit oA
local integer BC7=GetUnitAbilityLevel(WI7,'A2QB')
local real YM7
local group g
local real x
local real y
if BC7==1 then
set YM7=100
elseif BC7==2 then
set YM7=175
elseif BC7==3 then
set YM7=275
elseif BC7==4 then
set YM7=350
endif
if m5==null then
set g=WS7()
set x=GetSpellTargetX()
set y=GetSpellTargetY()
set IN4=WI7
call GroupEnumUnitsInRange(g,x,y,350,Condition(function NEI))
set m5=M59(g,x,y)
call WR7(g)
set g=null
endif
if m5!=null and WQ7(m5)==false then
set x=GetUnitX(m5)
set y=GetUnitY(m5)
call NZI(WI7,m5)
call B67(WI7,m5,1,YM7)
endif
set oA=CreateUnit(GetOwningPlayer(WI7),'e000',x,y,0)
call XF7(oA,'Aloc')
call XF7(oA,'A05S')
call UnitApplyTimedLife(oA,'BTLF',4.5)
call SetUnitPathing(oA,false)
if m5==null or IssueTargetOrderById(oA,$D0097,m5)==false then
set m5=CreateUnit(GetOwningPlayer(WI7),'e00C',x,y,0)
call UnitApplyTimedLife(m5,'BTLF',.05)
call UnitAddAbility(m5,'Aetl')
call IssueTargetOrderById(oA,$D0097,m5)
call DestroyEffect(AddSpellEffectById('A05S',EFFECT_TYPE_TARGET,x,y))
endif
set WI7=null
set m5=null
set oA=null
endfunction
function NOI takes nothing returns boolean
if GetSpellAbilityId()=='A2QB' and(GetSpellTargetUnit()==null or WQ7(GetSpellTargetUnit())==false)then
call NXI()
endif
return false
endfunction
function GA8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function NOI))
set t=null
endfunction
function PZD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit BB7=O77(OB7,"Caster")
call SetUnitX(BB7,GetUnitX(p5))
call SetUnitY(BB7,GetUnitY(p5))
if GetTriggerEvalCount(t)>80 then
call NM7(OB7)
call OZ7(t)
endif
set t=null
set p5=null
set BB7=null
return false
endfunction
function PAD takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local unit BB7=CreateUnit(GetOwningPlayer(p5),1697657411,GetUnitX(p5),GetUnitY(p5),0)
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call XF7(BB7,1093748301)
call SetUnitAbilityLevel(BB7,1093748301,GetUnitAbilityLevel(p5,1093677616))
call IssueTargetOrderById(BB7,$D0097,m5)
call UnitApplyTimedLife(BB7,1112820806,$A)
call NT7(OB7,"Source",p5)
call NT7(OB7,"Caster",BB7)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function PZD))
set p5=null
set m5=null
set BB7=null
set t=null
endfunction
function PBD takes nothing returns boolean
if GetSpellAbilityId()==1093677616 and WQ7(GetSpellTargetUnit())==false then
call PAD()
endif
return false
endfunction
function GB8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerAddCondition(t,Condition(function PBD))
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
set t=null
endfunction
function PCD takes nothing returns boolean
return GetSpellAbilityId()==(1093683507)and(IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))or WQ7(GetSpellTargetUnit())==false)
endfunction
function WU takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local real YM7=ON7(OB7,"Damage")
if GetUnitState(WI7,UNIT_STATE_LIFE)>1 then
if GetUnitState(WI7,UNIT_STATE_LIFE)<=YM7 then
call SetUnitState(WI7,UNIT_STATE_LIFE,YM7+1)
endif
call SetUnitState(WI7,UNIT_STATE_LIFE,GetUnitState(WI7,UNIT_STATE_LIFE)-YM7)
call NM7(OB7)
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set WI7=null
endfunction
function P3D takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local real YM7=25*GetUnitAbilityLevel(WI7,1093683507)
local timer t=CreateTimer()
local integer OB7=GetHandleId(t)
if GetUnitState(WI7,UNIT_STATE_LIFE)>1 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl",m5,"origin"))
if GetUnitState(WI7,UNIT_STATE_LIFE)>=YM7 then
if IsUnitAlly(m5,GetOwningPlayer(WI7))and GetUnitState(m5,UNIT_STATE_LIFE)>1. then
call SetUnitState(m5,UNIT_STATE_LIFE,GetUnitState(m5,UNIT_STATE_LIFE)+2*YM7)
else
call UnitDamageTarget(WI7,m5,25+3*YM7,false,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
endif
endif
if GetUnitState(WI7,UNIT_STATE_LIFE)<YM7 then
if IsUnitAlly(m5,GetOwningPlayer(WI7))and GetUnitState(m5,UNIT_STATE_LIFE)>1. then
call SetUnitState(m5,UNIT_STATE_LIFE,GetUnitState(m5,UNIT_STATE_LIFE)+2*GetUnitState(WI7,UNIT_STATE_LIFE))
else
call UnitDamageTarget(WI7,m5,25+3*GetUnitState(WI7,UNIT_STATE_LIFE),false,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
endif
endif
call NT7(OB7,"Hero",WI7)
call NQ7(OB7,"Damage",YM7)
call TimerStart(t,0,false,function WU)
endif
set WI7=null
set m5=null
set t=null
endfunction
function JJ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function PCD))
call TriggerAddAction(t,function P3D)
set t=null
endfunction
function WV takes nothing returns nothing
local unit oA=CreateUnit(GetOwningPlayer(MB),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
call XF7(oA,1093684554)
call SetUnitAbilityLevel(oA,1093684554,IH4)
call IssueTargetOrderById(oA,$D026B,GetEnumUnit())
set oA=null
endfunction
function P6D takes unit p5,unit m5,integer V77 returns nothing
local group g=WS7()
set IN4=p5
set IH4=V77
set MB=p5
call GroupEnumUnitsInRange(g,GetUnitX(m5),GetUnitY(m5),700,Condition(function AX7))
call ForGroup(g,function WV)
call WR7(g)
set g=null
endfunction
function WW takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local real PLD=ON7(I97,"Life")
local unit ZX7
local unit IH7=O77(I97,"Target")
local integer BC7
if GetTriggerEventId()==EVENT_UNIT_DAMAGED and C67(GetEventDamage())then
if OT7(GetTriggerUnit(),"BorrowedTime|Active")==false then
if PLD<GetEventDamage()then
set ZX7=O77(I97,"Source")
set BC7=OM7(I97,"Level")
call DestroyEffect(OG7(I97,"FX"))
call NS7(GetHandleId(IH7),"AphoticShield|Active",false)
call NM7(I97)
call OZ7(t)
call YN7(GetTriggerUnit(),PLD)
call P6D(ZX7,GetTriggerUnit(),BC7)
set GZ[256+GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
elseif GetEventDamage()>0 then
call YN7(GetTriggerUnit(),GetEventDamage())
call NQ7(I97,"Life",PLD-GetEventDamage())
endif
endif
else
set ZX7=O77(I97,"Source")
set BC7=OM7(I97,"Level")
call NS7(GetHandleId(IH7),"AphoticShield|Active",false)
set GZ[256+GetPlayerId(GetOwningPlayer(O77(I97,"AphTarg")))]=false
call DestroyEffect(OG7(I97,"FX"))
call NM7(I97)
call OZ7(t)
call P6D(ZX7,IH7,BC7)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function P1D takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit IH7=GetSpellTargetUnit()
local unit ZX7=GetTriggerUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093684550)
local integer IED=GetHandleId(IH7)
local real PLD
if OO7(IED,"AphoticShield|Active") then
call TriggerEvaluate(OE7(IED,"AphoticShield|Trigger"))
endif
call UnitRemoveBuffs(IH7,false,true)
call YW8(IH7,0,0)
if BC7==1 then
set PLD=110
elseif BC7==2 then
set PLD=$8C
elseif BC7==3 then
set PLD=$AA
else
set PLD=$C8
endif
call NQ7(I97,"Life",PLD)
call NU7(I97,"FX",AddSpecialEffectTarget("war3mapImported\\Defensive Barrier big.mdx",IH7,"chest"))
call NT7(I97,"Source",ZX7)
call NP7(I97,"Level",BC7)
call NT7(I97,"Target",IH7)
set GZ[256+GetPlayerId(GetOwningPlayer(GetSpellTargetUnit()))]=true
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,$F,false)
call TriggerAddCondition(t,Condition(function WW))
call NV7(IED,"AphoticShield|Trigger",t)
call NS7(IED,"AphoticShield|Active",true)
set t=null
set IH7=null
set ZX7=null
endfunction
function P0D takes nothing returns boolean
if GetSpellAbilityId()==1093684550 then
call P1D()
endif
return false
endfunction
function WY takes nothing returns nothing
if GetUnitAbilityLevel(GetSpellTargetUnit(),1112433775)>0 then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),VU7(1848652617))
endif
endfunction
function P5D takes nothing returns boolean
if GetSpellAbilityId()==1093684550 then
call WY()
endif
return false
endfunction
function s7 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function P5D))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function P0D))
set t=null
endfunction
function P2D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
if GetTriggerEventId()==EVENT_UNIT_DEATH or IssueImmediateOrderById(WI7,$D00A1)then
call NM7(OB7)
call OZ7(t)
endif
set t=null
set WI7=null
return false
endfunction
function P_D takes unit WI7 returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function P2D))
call NT7(OB7,"Hero",WI7)
set t=null
endfunction
function Q4D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WX7=GetTriggerUnit()
local unit IH7=(LoadUnitHandle(L7,(OB7),(14)))
local integer BC7=GetUnitAbilityLevel(WX7,1093684819)
local integer BZ7=3+BC7
local real T98
local boolean QXD=false
if BC7==0 then
set BC7=GetUnitAbilityLevel(WX7,1093747777)
set BZ7=3+2*BC7
set QXD=true
endif
if GetTriggerEventId()==EVENT_UNIT_DAMAGED and OT7(WX7,"BorrowedTime|Active")and(GetEventDamage()<GetUnitState(WX7,UNIT_STATE_LIFE))then
call YN7(WX7,GetEventDamage())
call YN7(WX7,GetEventDamage())
elseif QXD and Ma(WX7,IH7)<900 and IsUnitAlly(IH7,GetOwningPlayer(WX7))then
call YN7(WX7,GetEventDamage()*.5)
call YN7(IH7,GetEventDamage()*.5)
elseif(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and(GetSpellAbilityId()==1093684819 or GetSpellAbilityId()==1093747777))or(GetTriggerEventId()==EVENT_UNIT_DAMAGED and OT7(WX7,"BorrowedTime|CD")==false and GetUnitState(WX7,UNIT_STATE_LIFE)<(0+BZ7*100))and(GetEventDamage()<GetUnitState(WX7,UNIT_STATE_LIFE))then
call TimerStart(N84[GetPlayerId(GetOwningPlayer(WX7))],70-$A*BC7,false,null)
call O37(WX7,"BorrowedTime|Active",BZ7)
call O37(WX7,"BorrowedTime|CD",70-$A*BC7)
call UnitRemoveBuffs(WX7,false,true)
call YW8(WX7,0,0)
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
call DisableTrigger(t)
set DE7=true
if IssueImmediateOrderById(WX7,$D00A1)==false then
call P_D(WX7)
endif
set DE7=false
call EnableTrigger(t)
endif
call YS7("Abilities\\Spells\\Undead\\Unsummon\\UnsummonTarget.mdl",WX7,"origin",BZ7)
endif
set t=null
set WX7=null
set IH7=null
return false
endfunction
function Q7D takes unit WI7,boolean UA9 returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Q4D))
if UA9 then
set Vj[GetPlayerId(GetOwningPlayer(WI7))]=t
endif
set t=null
endfunction
function Q8D takes nothing returns boolean
if(GetLearnedSkill()==1093684819 or GetLearnedSkill()==1093747777)and IsUnitIllusion(GetTriggerUnit())==false and(GetUnitAbilityLevel(GetTriggerUnit(),1093684819)==1 or GetUnitAbilityLevel(GetTriggerUnit(),1093747777)==1)then
call Q7D(GetTriggerUnit(),false)
endif
return false
endfunction
function JM8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function Q8D))
set t=null
endfunction
function Q9D takes nothing returns boolean
return GetUnitAbilityLevel(GetTriggerUnit(),(1110455862))>0 or GetUnitAbilityLevel(GetAttacker(),(1093684551))>0
endfunction
function QDD takes nothing returns nothing
local unit S68=GetAttacker()
local unit m5=GetTriggerUnit()
local unit QED
local integer V77=GetUnitAbilityLevel(S68,(1093684551))
local unit BB7=CreateUnit(GetOwningPlayer(S68),1697656901,GetUnitX(S68),GetUnitY(S68),0)
if V77>0 then
call NP7(GetHandleId(m5),"MarkOfTheAbyss|Level",V77)
else
set V77=OM7(GetHandleId(m5),"MarkOfTheAbyss|Level")
endif
if IsUnitEnemy(m5,GetOwningPlayer(S68)) then
call XF7(BB7,(1093684552))
call SetUnitAbilityLevel(BB7,(1093684552),V77)
call IssueTargetOrderById(BB7,$D0085,S68)
endif
set S68=null
set m5=null
set QED=null
set BB7=null
endfunction
function JK8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function Q9D))
call TriggerAddAction(t,function QDD)
set t=null
endfunction
function QFD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=(LoadInteger(L7,(I97),(5)))
local integer WF8=(LoadInteger(L7,(I97),(34)))
local real VW9
local integer BZ7
local unit VX8
if BC7==1 then
set VW9=16
set BZ7=$A
elseif BC7==2 then
set VW9=24
set BZ7=$A
elseif BC7==3 then
set VW9=32
set BZ7=10
elseif BC7==4 then
set VW9=40
set BZ7=10
endif
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetTriggerEvalCount(t)>1 and GetSpellAbilityId()==1093686065 and WQ7(GetSpellTargetUnit())==false and IH7==GetSpellTargetUnit()then
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_DEATH then
set VX8=GetKillingUnit()
if C37(VX8)then
set VX8=(M7[GetPlayerId(GetOwningPlayer((VX8)))])
endif
if GetTriggerUnit()==IH7 or VX8==IH7 then
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call UnitRemoveAbility(IH7,1093752627)
call UnitRemoveAbility(IH7,1110459471)
endif
else
set WF8=WF8+1
call SaveInteger(L7,(I97),(34),(WF8))
if WF8==BZ7 then
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call UnitRemoveAbility(IH7,1093752627)
call UnitRemoveAbility(IH7,1110459471)
endif
call B67(ZX7,IH7,1,VW9)
endif
set t=null
set ZX7=null
set IH7=null
set VX8=null
return false
endfunction
function QGD takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093686065)
local real QHD
local real JNI
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Demon\\ReviveDemon\\ReviveDemon.mdl",IH7,"overhead"))
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093752627,false)
call XF7(IH7,1093752627)
call TriggerRegisterTimerEvent(t,1,true)
call YB7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function QFD))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveInteger(L7,(I97),(5),(BC7))
call SaveInteger(L7,(I97),(34),(0))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\SoulBurn\\SoulBurnbuff.mdl",IH7,"overhead")))
set ZX7=null
set IH7=null
set t=null
endfunction
function QID takes nothing returns nothing
if GetUnitAbilityLevel(GetEnumUnit(),1110459471)>0 then
set EX7=EX7+1
endif
endfunction
function QJD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local group g=WS7()
set IN4=ZX7
set EX7=0
call GroupEnumUnitsInRange(g,0,0,9999,Condition(function AJ7))
call ForGroup(g,function QID)
call WR7(g)
if EX7==0 then
if GetUnitAbilityLevel(ZX7,1110459738)>0 then
call UnitRemoveAbility(ZX7,1093812562)
call UnitRemoveAbility(ZX7,1093812563)
call UnitRemoveAbility(ZX7,1093812565)
call UnitRemoveAbility(ZX7,1093812564)
call UnitRemoveAbility(ZX7,1093812561)
call UnitRemoveAbility(ZX7,1093812560)
call UnitRemoveAbility(ZX7,1110459738)
endif
elseif EX7==1 then
if GetUnitAbilityLevel(ZX7,1093812562)==0 then
call UnitRemoveAbility(ZX7,1093812562)
call UnitRemoveAbility(ZX7,1093812563)
call UnitRemoveAbility(ZX7,1093812565)
call UnitRemoveAbility(ZX7,1093812564)
call UnitRemoveAbility(ZX7,1093812561)
call UnitRemoveAbility(ZX7,1093812560)
call UnitRemoveAbility(ZX7,1110459738)
call UnitAddAbility(ZX7,1093812562)
endif
elseif EX7==2 then
if GetUnitAbilityLevel(ZX7,1093812563)==0 then
call UnitRemoveAbility(ZX7,1093812562)
call UnitRemoveAbility(ZX7,1093812563)
call UnitRemoveAbility(ZX7,1093812565)
call UnitRemoveAbility(ZX7,1093812564)
call UnitRemoveAbility(ZX7,1093812561)
call UnitRemoveAbility(ZX7,1093812560)
call UnitRemoveAbility(ZX7,1110459738)
call UnitAddAbility(ZX7,1093812563)
endif
elseif EX7==3 then
if GetUnitAbilityLevel(ZX7,1093812565)==0 then
call UnitRemoveAbility(ZX7,1093812562)
call UnitRemoveAbility(ZX7,1093812563)
call UnitRemoveAbility(ZX7,1093812565)
call UnitRemoveAbility(ZX7,1093812564)
call UnitRemoveAbility(ZX7,1093812561)
call UnitRemoveAbility(ZX7,1093812560)
call UnitRemoveAbility(ZX7,1110459738)
call UnitAddAbility(ZX7,1093812565)
endif
elseif EX7==4 then
if GetUnitAbilityLevel(ZX7,1093812564)==0 then
call UnitRemoveAbility(ZX7,1093812562)
call UnitRemoveAbility(ZX7,1093812563)
call UnitRemoveAbility(ZX7,1093812565)
call UnitRemoveAbility(ZX7,1093812564)
call UnitRemoveAbility(ZX7,1093812561)
call UnitRemoveAbility(ZX7,1093812560)
call UnitRemoveAbility(ZX7,1110459738)
call UnitAddAbility(ZX7,1093812564)
endif
elseif EX7==5 then
if GetUnitAbilityLevel(ZX7,1093812561)==0 then
call UnitRemoveAbility(ZX7,1093812562)
call UnitRemoveAbility(ZX7,1093812563)
call UnitRemoveAbility(ZX7,1093812565)
call UnitRemoveAbility(ZX7,1093812564)
call UnitRemoveAbility(ZX7,1093812561)
call UnitRemoveAbility(ZX7,1093812560)
call UnitRemoveAbility(ZX7,1110459738)
call UnitAddAbility(ZX7,1093812561)
endif
elseif EX7>=6 then
if GetUnitAbilityLevel(ZX7,1093812560)==0 then
call UnitRemoveAbility(ZX7,1093812562)
call UnitRemoveAbility(ZX7,1093812563)
call UnitRemoveAbility(ZX7,1093812565)
call UnitRemoveAbility(ZX7,1093812564)
call UnitRemoveAbility(ZX7,1093812561)
call UnitRemoveAbility(ZX7,1093812560)
call UnitRemoveAbility(ZX7,1110459738)
call UnitAddAbility(ZX7,1093812560)
endif
endif
set t=null
set ZX7=null
return false
endfunction
function QKD takes nothing returns boolean
if GetSpellAbilityId()==1093686065 and WQ7(GetSpellTargetUnit())==false then
call QGD()
endif
return false
endfunction
function QMD takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function QJD))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093812562,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093812563,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093812565,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093812564,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093812561,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093812560,false)
set t=null
endfunction
function QND takes nothing returns boolean
if GetLearnedSkill()==1093686065 and GetUnitAbilityLevel(GetTriggerUnit(),1093686065)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call QMD()
endif
return false
endfunction
function G08 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function QKD))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function QND))
set t=null
endfunction
function QOD takes nothing returns nothing
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",GetEnumUnit(),"origin"))
call B67(GetTriggerUnit(),GetEnumUnit(),6,GetUnitAbilityLevel(GetTriggerUnit(),1093681974)*35+65)
endfunction
function XEX takes unit u returns boolean
local integer i=GetUnitTypeId(u)
return i==1966092370 or i==1970107511 or i==1697657398 or i==1700946284
endfunction
function LVI takes nothing returns boolean
return(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 or XEX(GetFilterUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false and VP7(GetFilterUnit())==false)!=null
endfunction
function QPD takes nothing returns nothing
local group g=WS7()
local unit WI7=GetTriggerUnit()
call GroupEnumUnitsInRange(g,GetUnitX(WI7),GetUnitY(WI7),300,Condition(function LVI))
call ForGroup(g,function QOD)
call SetUnitAnimation(WI7,"spin")
call ZP7(WI7,.6)
call O37(WI7,"QPD",.5-.05*GetUnitAbilityLevel(GetTriggerUnit(),1093681974))
call WR7(g)
set g=null
set WI7=null
endfunction
function QQD takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if GetUnitAbilityLevel(GetTriggerUnit(),1110455120)>0 and GetUnitAbilityLevel(GetAttacker(),1093678162)==0 and IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false and GetRandomReal(0,100)<=20 and OT7(GetTriggerUnit(),"QPD")==false then
call QPD()
endif
endif
return false
endfunction
function G58 takes nothing returns nothing
local trigger t=CreateTrigger()
call ky(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function QQD))
set t=null
endfunction
function xC takes nothing returns boolean
return AW7()and GetUnitAbilityLevel(GetFilterUnit(),1110454328)==0 and GetUnitAbilityLevel(GetFilterUnit(),1113815395)==0
endfunction
function xd takes integer I97,integer QRD returns nothing
local integer i=1
loop
exitwhen i>QRD
call DestroyEffect((LoadEffectHandle(L7,(I97),($A8C+i))))
set i=i+1
endloop
endfunction
function QSD takes nothing returns nothing
if((IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetEnumUnit()))!=MAP_CONTROL_USER))then
set hq[640+GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=Bz+1+(.5*GetUnitAbilityLevel(GetTriggerUnit(),1093683510))
set hq[832+GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=Bz+1+(.5*GetUnitAbilityLevel(GetTriggerUnit(),1093683510))
call IssueTargetOrderById(GetEnumUnit(),$D0003,DG7)
else
call IssueTargetOrderById(GetEnumUnit(),$D000F,DG7)
endif
endfunction
function xE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local group g=LoadGroupHandle(L7,(I97),($DC))
local unit WX7=LoadUnitHandle(L7,(I97),($E))
local integer QRD=LoadInteger(L7,(I97),(365))
local integer BC7=(LoadInteger(L7,(I97),(5)))
local integer WF8=(LoadInteger(L7,(I97),(34)))
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER and GetTriggerEventId()!=EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER and GetTriggerEventId()!=EVENT_PLAYER_UNIT_ISSUED_ORDER then
set WF8=WF8+1
call SaveInteger(L7,(I97),(34),(WF8))
if WF8==(8+2*BC7)then
call UnitRemoveAbility(WX7,1093683509)
call WR7(g)
call xd(I97,QRD)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
call DisableTrigger(t)
set DG7=WX7
call ForGroup(g,function QSD)
call EnableTrigger(t)
endif
else
if IsUnitInGroup(GetTriggerUnit(),g) and UnitIsSleeping(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1110454328)==0 and GetIssuedOrderId()!=$D0005 and DE7==false then
call DisableTrigger(t)
if((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))then
call DisableTrigger(Q04[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call IssueTargetOrderById(GetTriggerUnit(),$D0003,WX7)
call EnableTrigger(Q04[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
else
call IssueTargetOrderById(GetTriggerUnit(),$D000F,WX7)
endif
call EnableTrigger(t)
endif
endif
set t=null
set g=null
set WX7=null
return false
endfunction
function xf takes nothing returns nothing
set IH4=IH4+1
call SaveEffectHandle(L7,(tl),($A8C+IH4),(AddSpecialEffectTarget("Abilities\\Weapons\\LavaSpawnMissile\\LavaSpawnBirthMissile.mdl",GetEnumUnit(),"chest")))
endfunction
function xF takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit WX7=GetTriggerUnit()
local integer BC7=GetUnitAbilityLevel(WX7,1093683510)
local group g=WS7()
call XF7(WX7,1093683509)
call SetUnitAbilityLevel(WX7,1093683509,BC7)
set IN4=WX7
set DG7=WX7
set IH4=0
set tl=I97
call GroupEnumUnitsInRange(g,GetUnitX(WX7),GetUnitY(WX7),325,Condition(function xC))
call ForGroup(g,function xf)
call ForGroup(g,function QSD)
call SaveInteger(L7,(I97),(365),IH4)
call SaveUnitHandle(L7,(I97),($E),WX7)
call SaveGroupHandle(L7,(I97),($DC),g)
call SaveInteger(L7,(I97),(5),(BC7))
call SaveInteger(L7,(I97),(34),(0))
call TriggerRegisterTimerEvent(t,.2,true)
call YB7(t,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call YB7(t,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
call YB7(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function xE))
set t=null
set g=null
set WX7=null
endfunction
function QTD takes nothing returns boolean
if GetSpellAbilityId()==1093683510 then
call xF()
endif
return false
endfunction
function G28 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function QTD))
set t=null
endfunction
function QUD takes nothing returns nothing
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093814595,false)
call Z57(GetEnumUnit(),1093814595,1,R34,1110459990)
endfunction
function QVD takes nothing returns boolean
return GetSpellAbilityId()==1093682482 or GetSpellAbilityId()==1093750098
endfunction
function QWD takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local real PLD=GetUnitState(IH7,UNIT_STATE_LIFE)
local integer BC7=GetUnitAbilityLevel(WI7,1093682482)
local unit BB7
local boolean QXD=false
local group g
local integer U43=250
local integer U53=325
local integer U63=400
set R34=6
if BC7==0 then
set BC7=GetUnitAbilityLevel(WI7,1093750098)
set QXD=true
set U43=300
set U53=425
set U63=550
set R34=10
endif
if(PLD<=U43 and BC7==1)or(PLD<=U53 and BC7==2)or(PLD<=U63 and BC7==3)then
if IsUnitType(IH7,UNIT_TYPE_HERO)then
if QXD then
call UnitRemoveAbility(WI7,1093750098)
call UnitAddAbility(WI7,1093750098)
call SetUnitAbilityLevel(WI7,1093750098,BC7)
else
call UnitRemoveAbility(WI7,1093682482)
call UnitAddAbility(WI7,1093682482)
call SetUnitAbilityLevel(WI7,1093682482,BC7)
endif
endif
call PlaySoundOnUnitBJ(YN,100,IH7)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl",IH7,"overhead"))
set BB7=CreateUnit(GetOwningPlayer(WI7),1697656901,0,0,0)
call UnitRemoveBuffs(IH7,true,true)
call UnitRemoveAbility(IH7,1097167980)
call UnitDamageTarget(BB7,IH7,100000000.,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\AxeUltiMSFX_01.mdx",WI7,"origin"))
set g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(WI7),GetUnitY(WI7),925,Condition(function B97))
call ForGroup(g,function QUD)
call WR7(g)
set g=null
endif
set WI7=null
set IH7=null
set BB7=null
endfunction
function G_8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function QVD))
call TriggerAddAction(t,function QWD)
set t=null
endfunction
function QYD takes nothing returns boolean
return GetSpellAbilityId()==1093683019 and WQ7(GetSpellTargetUnit())==false
endfunction
function QZD takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),20+70*GetUnitAbilityLevel(GetTriggerUnit(),1093683019),ATTACK_TYPE_HERO,DAMAGE_TYPE_UNIVERSAL)
if GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)>1 then
if GetUnitState(GetSpellTargetUnit(),UNIT_STATE_LIFE)>(20+70*GetUnitAbilityLevel(GetTriggerUnit(),1093683019))then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+20+70*GetUnitAbilityLevel(GetTriggerUnit(),1093683019))
else
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+GetUnitState(GetSpellTargetUnit(),UNIT_STATE_LIFE))
endif
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl",GetSpellTargetUnit(),"origin"))
endfunction
function QAD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
local unit p5=O77(OB7,"Source")
local player p=O97(OB7,"p")
local integer V77=OM7(OB7,"Level")
local unit oA
if GetUnitAbilityLevel(m5,1110454854)==0 then
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093678169,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093816121,false)
call NM7(OB7)
call OZ7(t)
elseif GetTriggerEventId()==EVENT_UNIT_ATTACKED and GetTriggerUnit()==m5 then
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093678169,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093816121,false)
if((IsUnitType(GetAttacker(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER))then
call IssuePointOrderById(GetAttacker(),$D0012,GetUnitX(GetAttacker())+GetRandomReal(0,150.)-75.,GetUnitY(GetAttacker())+GetRandomReal(0,150.)-75.)
else
call UnitRemoveAbility(m5,1110454854)
set oA=CreateUnit(p,1697656901,GetUnitX(m5),GetUnitY(m5),0)
call XF7(oA,1093678169)
call SetUnitAbilityLevel(oA,1093678169,V77)
call IssueTargetOrderById(oA,$D0103,GetAttacker())
call NM7(OB7)
call OZ7(t)
endif
elseif GetTriggerEventId()!=EVENT_UNIT_ATTACKED then
if GetUnitState(m5,UNIT_STATE_LIFE)>21 then
call SetUnitState(m5,UNIT_STATE_LIFE,GetUnitState(m5,UNIT_STATE_LIFE)-20)
else
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093678169,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093816121,false)
call UnitRemoveAbility(m5,1110454854)
call B67(p5,m5,1,50)
call NM7(OB7)
call OZ7(t)
endif
endif
set t=null
set p=null
set oA=null
set m5=null
set p5=null
return false
endfunction
function QBD takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
set OB7=GetHandleId(t)
call NT7(OB7,"Target",m5)
call NT7(OB7,"Source",p5)
call NZ7(OB7,"p",GetOwningPlayer(p5))
call NP7(OB7,"Level",GetUnitAbilityLevel(p5,1093678169))
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_ATTACKED)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function QAD))
if GetUnitAbilityLevel(m5,1093678169)>0 then
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093678169,false)
call XF7(m5,1093816121)
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093816121,true)
endif
set V14=true
call B67(p5,m5,2,0)
set V14=false
set p5=null
set m5=null
set t=null
endfunction
function QCD takes nothing returns boolean
if GetSpellAbilityId()==1093678169 and KW7(GetSpellTargetUnit())==false then
call QBD()
endif
return false
endfunction
function Q3D takes nothing returns boolean
if GetSpellAbilityId()==1093678169 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) then
if GetOwningPlayer(GetTriggerUnit())!=GetOwningPlayer(GetSpellTargetUnit())and IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and(OO7(GetHandleId(GetOwningPlayer(GetSpellTargetUnit())),"DisableHelp"))then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652600))
endif
endif
return false
endfunction
function Q6D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call UnitRemoveAbility(ZX7,1110454854)
call UnitRemoveAbility(ZX7,1093816121)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093678169,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093816121,false)
set t=null
set ZX7=null
return false
endfunction
function QLD takes nothing returns boolean
local trigger t
if GetIssuedOrderId()==852589and GetUnitAbilityLevel(GetTriggerUnit(),1093816121)>0 then
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function Q6D))
call SaveUnitHandle(L7,(GetHandleId(t)),(2),(GetTriggerUnit()))
endif
return false
endfunction
function H48 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function QCD))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function Q3D))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function QLD))
set t=null
endfunction
function Q1D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit p5=O77(I97,"Source")
local unit m5=O77(I97,"Target")
local real T98
local real YM7
local integer WF8=6
local fogmodifier Q0D=(LoadFogModifierHandle(L7,(I97),(42)))
if GetUnitAbilityLevel(p5,1093747769)>0 then
set WF8=8
set YM7=100+55*GetUnitAbilityLevel(p5,1093747769)
endif
if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
call FogModifierStop(Q0D)
call DestroyFogModifier(Q0D)
call NM7(I97)
call OZ7(t)
elseif GetTriggerEvalCount(t)>WF8 then
call FogModifierStop(Q0D)
call DestroyFogModifier(Q0D)
call NM7(I97)
call OZ7(t)
call KR7(p5)
else
set T98=RMinBJ(.05*GetUnitState(m5,UNIT_STATE_MAX_MANA),GetUnitState(m5,UNIT_STATE_MANA))
if GetUnitAbilityLevel(p5,1093747769)>0 then
set T98=RMinBJ(.1*GetUnitState(m5,UNIT_STATE_MAX_MANA),GetUnitState(m5,UNIT_STATE_MANA))
call B67(p5,m5,6,YM7)
endif
if T98>0 then
call SetUnitState(p5,UNIT_STATE_MANA,GetUnitState(p5,UNIT_STATE_MANA)+T98)
call SetUnitState(m5,UNIT_STATE_MANA,GetUnitState(m5,UNIT_STATE_MANA)-T98)
endif
endif
set t=null
set p5=null
set m5=null
set Q0D=null
return false
endfunction
function Q5D takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local fogmodifier Q0D=CreateFogModifierRadius(GetOwningPlayer(p5),FOG_OF_WAR_VISIBLE,GetUnitX(m5),GetUnitY(m5),350,true,true)
call FogModifierStart(Q0D)
call UnitRemoveAbility(m5,1110454854)
call UnitRemoveAbility(m5,1112896368)
call UnitRemoveAbility(m5,1114993524)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function Q1D))
call NT7(OB7,"Source",p5)
call NT7(OB7,"Target",m5)
call SaveFogModifierHandle(L7,(OB7),(42),(Q0D))
set p5=null
set m5=null
set t=null
set Q0D=null
endfunction
function Q2D takes nothing returns boolean
if GetSpellAbilityId()==1093677649 or GetSpellAbilityId()==1093747769 then
call Q5D()
endif
return false
endfunction
function H78 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Q2D))
set t=null
endfunction
function Q_D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local real GKD=(LoadReal(L7,(GetHandleId(IH7)),(789)))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if GetTriggerEventId()==EVENT_WIDGET_DEATH or GKD<(TimerGetElapsed(W))then
call UnitRemoveAbility(IH7,1093816135)
call UnitRemoveAbility(IH7,1093816129)
call UnitRemoveAbility(IH7,1093816134)
call UnitRemoveAbility(IH7,1093816136)
call UnitRemoveAbility(IH7,1110460229)
endif
set t=null
set IH7=null
return false
endfunction
function R4D takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093816137)
if BC7==1 then
call UnitRemoveAbility(IH7,1110460229)
call UnitRemoveAbility(IH7,1093816129)
call UnitRemoveAbility(IH7,1093816134)
call UnitRemoveAbility(IH7,1093816136)
call XF7(IH7,1093816135)
call UnitMakeAbilityPermanent(IH7,true,1093816132)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093816135,false)
elseif BC7==2 then
call UnitRemoveAbility(IH7,1110460229)
call UnitRemoveAbility(IH7,1093816135)
call UnitRemoveAbility(IH7,1093816134)
call UnitRemoveAbility(IH7,1093816136)
call XF7(IH7,1093816129)
call UnitMakeAbilityPermanent(IH7,true,1093816133)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093816129,false)
elseif BC7==3 then
call UnitRemoveAbility(IH7,1110460229)
call UnitRemoveAbility(IH7,1093816135)
call UnitRemoveAbility(IH7,1093816129)
call UnitRemoveAbility(IH7,1093816136)
call XF7(IH7,1093816134)
call UnitMakeAbilityPermanent(IH7,true,1093816131)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093816134,false)
elseif BC7==4 then
call UnitRemoveAbility(IH7,1110460229)
call UnitRemoveAbility(IH7,1093816135)
call UnitRemoveAbility(IH7,1093816129)
call UnitRemoveAbility(IH7,1093816134)
call XF7(IH7,1093816136)
call UnitMakeAbilityPermanent(IH7,true,1093816130)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093816136,false)
endif
call TriggerRegisterTimerEvent(t,20,false)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerAddCondition(t,Condition(function Q_D))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveReal(L7,(GetHandleId(IH7)),(789),((19.9+(TimerGetElapsed(W)))*1.))
set t=null
set ZX7=null
set IH7=null
endfunction
function R7D takes nothing returns boolean
if GetSpellAbilityId()==1093816137 and WQ7(GetSpellTargetUnit())==false then
call R4D()
endif
return false
endfunction
function H98 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function R7D))
set t=null
endfunction
function R8D takes unit ZX7,unit IH7,real R9D returns nothing
call SetUnitState(ZX7,UNIT_STATE_LIFE,GetUnitState(ZX7,UNIT_STATE_LIFE)+GetUnitState(IH7,UNIT_STATE_MAX_LIFE)*R9D)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HeroBloodElfBlood.mdl",ZX7,"overhead"))
endfunction
function RDD takes nothing returns boolean
if XH7(GetFilterUnit())==false and GetUnitAbilityLevel(GetFilterUnit(),1093684293)>0 and IsUnitEnemy(X54,GetOwningPlayer(GetFilterUnit()))then
call R8D(GetFilterUnit(),X54,GetUnitAbilityLevel(GetFilterUnit(),1093684293)*.1*.5)
endif
return false
endfunction
function RED takes unit ZX7,unit IH7,integer BC7 returns nothing
local group g=WS7()
set X54=IH7
call GroupEnumUnitsInRange(g,GetUnitX(IH7),GetUnitY(IH7),350,Condition(function RDD))
call WR7(g)
set X54=null
set g=null
endfunction
function RFD takes nothing returns boolean
local unit ZX7=GetKillingUnit()
local unit IH7=GetTriggerUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093684293)
if IsUnitIllusion(IH7)==false and IsUnitType(IH7,UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(IH7)!=1848651852 then
if IsUnitType(IH7,UNIT_TYPE_HERO)==false then
if BC7>0 then
call R8D(ZX7,IH7,BC7*.05+.05)
endif
else
if BC7>0 then
call R8D(ZX7,IH7,BC7*.1)
else
call RED(ZX7,IH7,BC7)
endif
endif
endif
set ZX7=null
set IH7=null
return false
endfunction
function HD8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function RFD))
set t=null
endfunction
function xn takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit m5=O77(OB7,"Target")
local integer V77=OM7(OB7,"Level")
local real xN=ON7(OB7,"LastX")
local real xo=ON7(OB7,"LastY")
local real x=GetUnitX(m5)
local real y=GetUnitY(m5)
local real d=SquareRoot((xN-x)*(xN-x)+(xo-y)*(xo-y))
local real B39=(0+.2*V77)*d
local integer QI=OM7(OB7,"Iteration")
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call UnitRemoveAbility(m5,1093683528)
call UnitRemoveAbility(m5,1110456396)
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
set t=null
set p5=null
set m5=null
return false
endif
if d>$1869F then
set B39=0
endif
if B39>5 then
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",m5,"origin"))
endif
if((LoadInteger(L7,(GetHandleId((m5))),((2485))))==1)and B39>=GetUnitState(m5,UNIT_STATE_LIFE)-2 then
set B39=GetUnitState(m5,UNIT_STATE_LIFE)-2
endif
if KW7(m5)then
set B39=0
endif
if B39>0 and XH7(m5)==false then
call B67(p5,m5,6,B39)
endif
call NQ7(OB7,"LastX",x)
call NQ7(OB7,"LastY",y)
call NP7(OB7,"Iteration",QI+1)
if XH7(m5)then
call NM7(OB7)
call OZ7(t)
elseif QI>4*(12+0*V77) then
call UnitRemoveAbility(m5,1093683528)
call UnitRemoveAbility(m5,1110456396)
call NM7(OB7)
call OZ7(t)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function xp takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local integer V77=GetUnitAbilityLevel(p5,1093684296)
local real YM7=50+100*V77
call XF7(m5,1093683528)
call SetUnitAbilityLevel(m5,1093683528,V77)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",m5,"chest"))
call NT7(OB7,"Source",p5)
call NT7(OB7,"Target",m5)
call NP7(OB7,"Level",V77)
call NQ7(OB7,"LastX",GetUnitX(m5))
call NQ7(OB7,"LastY",GetUnitY(m5))
call NP7(OB7,"Iteration",0)
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerAddCondition(t,Condition(function xn))
call TriggerRegisterDeathEvent(t,m5)
if((LoadInteger(L7,(GetHandleId((m5))),((2485))))==1)and YM7>=GetUnitState(m5,UNIT_STATE_LIFE)-2 then
set YM7=GetUnitState(m5,UNIT_STATE_LIFE)-2
endif
if KW7(m5)then
set YM7=0
endif
call B67(p5,m5,3,YM7)
set p5=null
set m5=null
set t=null
endfunction
function RGD takes nothing returns boolean
if GetSpellAbilityId()==1093684296 and WQ7(GetSpellTargetUnit())==false then
call xp()
endif
return false
endfunction
function HE8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function RGD))
set t=null
endfunction
function RHD takes nothing returns nothing
local unit BB7
if AK7(GetEnumUnit())==false then
call UnitRemoveAbility(GetEnumUnit(),1110459737)
call UnitShareVision(GetEnumUnit(),GetOwningPlayer(YG4),true)
else
call UnitShareVision(GetEnumUnit(),GetOwningPlayer(YG4),true)
if GetUnitAbilityLevel(GetEnumUnit(),1110459737)==0 and GetUnitAbilityLevel(GetEnumUnit(),1110454356)==0 and GetUnitAbilityLevel(GetEnumUnit(),1110454348)==0 then
set BB7=CreateUnit(GetOwningPlayer(YG4),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
call UnitAddAbility(BB7,1093812552)
call IssueTargetOrderById(BB7,$D00B5,GetEnumUnit())
set BB7=null
endif
endif
endfunction
function RID takes nothing returns nothing
local real D4D=YH4*0+.3
if XH7(YG4) or IsUnitInGroup(GetEnumUnit(),YF4)==false or GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)/GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)>D4D or(GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)/GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)>D4D/2 and AK7(GetEnumUnit()))then
call GroupRemoveUnit(YE4,GetEnumUnit())
call UnitShareVision(GetEnumUnit(),GetOwningPlayer(YG4),false)
call UnitRemoveAbility(GetEnumUnit(),1110459737)
endif
endfunction
function RJD takes nothing returns nothing
local real D4D
if XH7(YG4)==false and IsUnitInGroup(GetEnumUnit(),YE4)==false and IsUnitIllusion(GetEnumUnit())==false then
set D4D=YH4*0+.3
if GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)/GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)<D4D and AK7(GetEnumUnit())==false then
call GroupAddUnit(YE4,GetEnumUnit())
elseif GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)/GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)<D4D/2 then
call GroupAddUnit(YE4,GetEnumUnit())
endif
endif
endfunction
function RKD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local group RMD=(LoadGroupHandle(L7,(I97),(22)))
local group g=WS7()
local integer BC7=GetUnitAbilityLevel(ZX7,1093683512)
set IN4=ZX7
set YG4=ZX7
set YE4=RMD
set YH4=BC7
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),25+25000,Condition(function A_7))
call ForGroup(g,function RJD)
set YF4=g
call ForGroup(YE4,function RID)
call ForGroup(YE4,function RHD)
if FirstOfGroup(YE4)==null then
call UnitRemoveAbility(ZX7,YD4[1])
call UnitRemoveAbility(ZX7,YD4[2])
call UnitRemoveAbility(ZX7,YD4[3])
call UnitRemoveAbility(ZX7,YD4[4])
call UnitRemoveAbility(ZX7,1093808436)
else
if BC7==1 then
call UnitRemoveAbility(ZX7,YD4[2])
call UnitRemoveAbility(ZX7,YD4[3])
call UnitRemoveAbility(ZX7,YD4[4])
call UnitRemoveAbility(ZX7,1110459701)
call UnitRemoveAbility(ZX7,1110459700)
call UnitRemoveAbility(ZX7,1110459702)
elseif BC7==2 then
call UnitRemoveAbility(ZX7,YD4[1])
call UnitRemoveAbility(ZX7,YD4[3])
call UnitRemoveAbility(ZX7,YD4[4])
call UnitRemoveAbility(ZX7,1110455634)
call UnitRemoveAbility(ZX7,1110459700)
call UnitRemoveAbility(ZX7,1110459702)
elseif BC7==3 then
call UnitRemoveAbility(ZX7,YD4[1])
call UnitRemoveAbility(ZX7,YD4[2])
call UnitRemoveAbility(ZX7,YD4[4])
call UnitRemoveAbility(ZX7,1110455634)
call UnitRemoveAbility(ZX7,1110459701)
call UnitRemoveAbility(ZX7,1110459702)
elseif BC7==4 then
call UnitRemoveAbility(ZX7,YD4[1])
call UnitRemoveAbility(ZX7,YD4[2])
call UnitRemoveAbility(ZX7,YD4[3])
call UnitRemoveAbility(ZX7,1110455634)
call UnitRemoveAbility(ZX7,1110459701)
call UnitRemoveAbility(ZX7,1110459700)
endif
call XF7(ZX7,YD4[BC7])
call XF7(ZX7,1093808436)
call UnitMakeAbilityPermanent(ZX7,true,YD4[BC7])
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),YD4[BC7],false)
endif
call WR7(g)
set t=null
set ZX7=null
set g=null
set RMD=null
return false
endfunction
function RND takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerAddCondition(t,Condition(function RKD))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveGroupHandle(L7,(I97),(22),(WS7()))
set t=null
set ZX7=null
endfunction
function ROD takes nothing returns boolean
if GetLearnedSkill()==1093683512 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093683512)==1 then
call RND()
endif
return false
endfunction
function HG8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function ROD))
set YD4[1]=1093808432
set YD4[2]=1093808433
set YD4[3]=1093808434
set YD4[4]=1093808435
set t=null
endfunction
function RPD takes nothing returns boolean
if GetSpellAbilityId()==1093682499 and GetSpellTargetUnit()!=GetTriggerUnit()and IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and(OO7(GetHandleId(GetOwningPlayer(GetSpellTargetUnit())),"DisableHelp"))then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652600))
endif
return false
endfunction
function HF8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function RPD))
set t=null
endfunction
function RQD takes nothing returns boolean
return GetUnitTypeId(GetSummonedUnit())==1865429043
endfunction
function RRD takes nothing returns nothing
local unit xU=GetSummonedUnit()
local unit xv=GetSummoningUnit()
local integer OB7=GetHandleId(xv)
local integer V77=GetUnitAbilityLevel(xv,1093681735)
local integer xV=OM7(OB7,"TotalWebs")
local unit xw=O77(OB7,"Web1")
local integer x=1
set xV=xV+1
call SetUnitVertexColorBJ(xU,100,100,100,80)
call XF7(xU,1097625443)
call NT7(OB7,"Web"+I2S(xV),xU)
if(xV>V77*2)then
call KillUnit(xw)
loop
exitwhen x==xV
call NT7(OB7,"Web"+I2S(x),O77(OB7,"Web"+I2S(x+1)))
set x=x+1
endloop
set xV=xV-1
endif
call NP7(OB7,"TotalWebs",xV)
call SetUnitAbilityLevel(xU,1093681734,V77)
set xU=null
set xv=null
set xw=null
endfunction
function HH8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function RQD))
call TriggerAddAction(t,function RRD)
set t=null
endfunction
function RSD takes unit xv returns nothing
local integer OB7=GetHandleId(xv)
local integer V77=GetUnitAbilityLevel(xv,1093681735)
local integer xV=OM7(OB7,"TotalWebs")
local integer x=1
local unit VX
loop
exitwhen x>xV
set VX=O77(OB7,"Web"+I2S(x))
call SetUnitAbilityLevel(VX,1093681734,V77)
set x=x+1
endloop
set VX=null
endfunction
function RTD takes nothing returns nothing
local unit RUD=O77(GetHandleId(GetTriggeringTrigger()),"Spider")
if RUD==null then
call FlushChildHashtable(L7,(GetHandleId(GetTriggeringTrigger())))
call OZ7(GetTriggeringTrigger())
else
if IsUnitType(RUD,UNIT_TYPE_HERO) then
if GetUnitAbilityLevel(RUD,1110454595)>0 then
call XF7(RUD,1093677617)
else
call UnitRemoveAbility(RUD,1093677617)
endif
else
if GetUnitAbilityLevel(RUD,1110454595)>0 then
call XF7(RUD,1093810499)
else
call UnitRemoveAbility(RUD,1093810499)
endif
endif
endif
set RUD=null
endfunction
function RVD takes unit ZX7 returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(t,1.5)
call TriggerAddAction(t,function RTD)
call NT7(GetHandleId(t),"Spider",ZX7)
set t=null
endfunction
function RWD takes nothing returns boolean
if GetUnitTypeId(GetSummonedUnit())==1848652101 or GetUnitTypeId(GetSummonedUnit())==1848652089 then
call RVD(GetSummonedUnit())
endif
return false
endfunction
function RXD takes unit WI7,boolean UA9 returns nothing
local trigger t
if(GetUnitAbilityLevel(WI7,1093681735)==1 or UA9)then
call RVD(WI7)
else
call RSD(WI7)
endif
if UA9 then
set aj[GetPlayerId(GetOwningPlayer(WI7))]=t
endif
set t=null
endfunction
function RYD takes nothing returns boolean
if GetLearnedSkill()==1093681735 and IsUnitIllusion(GetTriggerUnit())==false then
call RXD(GetTriggerUnit(),false)
endif
return false
endfunction
function HI8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function RYD))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function RWD))
set t=null
endfunction
function RZD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_SPELL_EFFECT or(GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT and YA8(GetSpellAbilityId())and GetSpellTargetUnit()==WI7)then
if XH7(WI7)==false then
call UnitRemoveAbility(WI7,1093687122)
call UnitRemoveAbility(WI7,1110454597)
endif
call DestroyEffect(OG7(OB7,"FX"))
call NM7(OB7)
call OZ7(t)
endif
set t=null
set WI7=null
return false
endfunction
function RAD takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,$14,false)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function RZD))
call NT7(OB7,"Hero",WI7)
call NU7(OB7,"FX",AddSpecialEffectTarget("Abilities\\Spells\\Items\\VampiricPotion\\VampPotionCaster.mdl",WI7,"origin"))
call XF7(WI7,1093687122)
call SetUnitAbilityLevel(WI7,1093687122,GetUnitAbilityLevel(WI7,1093687121))
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),1093687122,false)
set t=null
set WI7=null
endfunction
function RBD takes nothing returns boolean
if GetSpellAbilityId()==1093687121 then
call RAD()
endif
return false
endfunction
function HJ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function RBD))
set t=null
endfunction
function RCD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
if GetTriggerEvalCount(t)>300 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif GetUnitAbilityLevel(IH7,1110459703)>0 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call B67(ZX7,IH7,1,GetUnitAbilityLevel(ZX7,1093681736)*75)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function R3D takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
call TriggerRegisterTimerEvent(t,.01,true)
call TriggerAddCondition(t,Condition(function RCD))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
set t=null
set ZX7=null
set IH7=null
endfunction
function R6D takes nothing returns boolean
if GetSpellAbilityId()==1093681736 then
call R3D()
endif
return false
endfunction
function HK8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function R6D))
set t=null
endfunction
function RLD takes nothing returns boolean
return GetSpellAbilityId()==1093678389
endfunction
function R1D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
local real VW9=(LoadReal(L7,(I97),(20)))
local integer BZ7=(LoadInteger(L7,(I97),($BC)))
local texttag tt
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif GetEventDamageSource()==BB7 then
set tt=CreateTextTag()
call YW7(I2S(BZ7),BZ7,IH7,.03,$7F,$7F,$FF,$FF)
call SetTextTagText(tt,"+"+I2S(R2I(VW9)),.025)
call SetTextTagPosUnit(tt,IH7,$A)
call SetTextTagColor(tt,$FF,0,0,$FF)
call SetTextTagVelocity(tt,0,.0355)
call SetTextTagFadepoint(tt,2)
call SetTextTagPermanent(tt,false)
call SetTextTagLifespan(tt,2)
if IsUnitVisible(IH7,GetLocalPlayer())or WG7(GetLocalPlayer())then
call SetTextTagVisibility(tt,true)
else
call SetTextTagVisibility(tt,false)
endif
call B67(ZX7,IH7,1,VW9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
set IH7=null
set tt=null
return false
endfunction
function R0D takes nothing returns nothing
local integer BC7=GetUnitAbilityLevel(GetTriggerUnit(),1093678389)
local integer R5D=GetRandomInt(1,BC7+1)
local unit S79=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local location XX8=GetUnitLoc(S79)
local real VW9=GetRandomReal(1,250)
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit BB7=CreateUnit(GetOwningPlayer(S79),1697656901,GetUnitX(S79),GetUnitY(S79),0)
if BC7==1 then
if R5D==1 then
set VW9=GetRandomReal(50,100)
elseif R5D==2 then
set VW9=GetRandomReal(1,50)
endif
elseif BC7==2 then
if R5D==1 then
set VW9=GetRandomReal(100,150)
elseif R5D==2 then
set VW9=GetRandomReal(50,100)
elseif R5D==3 then
set VW9=GetRandomReal(1,50)
endif
elseif BC7==3 then
if R5D==1 then
set VW9=GetRandomReal(150,200)
elseif R5D==2 then
set VW9=GetRandomReal(100,150)
elseif R5D==3 then
set VW9=GetRandomReal(50,100)
elseif R5D==4 then
set VW9=GetRandomReal(1,50)
endif
elseif BC7==4 then
if R5D==1 then
set VW9=GetRandomReal(200,250)
elseif R5D==2 then
set VW9=GetRandomReal(150,200)
elseif R5D==3 then
set VW9=GetRandomReal(100,150)
elseif R5D==4 then
set VW9=GetRandomReal(50,100)
elseif R5D==5 then
set VW9=GetRandomReal(1,50)
endif
endif
call TriggerRegisterTimerEvent(t,$A,false)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function R1D))
call SaveUnitHandle(L7,(I97),(2),(S79))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveUnitHandle(L7,(I97),(19),(BB7))
call SaveReal(L7,(I97),(20),((VW9)*1.))
if(BC7==5)then
set R5D=GetRandomInt(1,BC7+1)
endif
call SaveInteger(L7,(I97),($BC),(R5D))
call XF7(BB7,1093678165)
call SetUnitAbilityLevel(BB7,1093678165,R5D)
call IssueTargetOrderById(BB7,$D007F,IH7)
set t=null
endfunction
function HN8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function RLD))
call TriggerAddAction(t,function R0D)
endfunction
function R2D takes nothing returns boolean
return GetLearnedSkill()==1095263841 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function R_D takes nothing returns nothing
if(UnitHasBuffBJ(GetTriggerUnit(),1112504171))then
call UnitRemoveAbility(GetTriggerUnit(),1112504171)
endif
call DisableTrigger(DF)
endfunction
function JH8 takes nothing returns nothing
set DF=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(DF,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(DF,Condition(function R2D))
call TriggerAddAction(DF,function R_D)
endfunction
function S4D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V07=GetHandleId(t)
local unit Z69=(LoadUnitHandle(L7,(V07),(2)))
local real S7D=GetUnitState(Z69,UNIT_STATE_LIFE)
call UnitRemoveAbility(Z69,1093751344)
call UnitRemoveAbility(Z69,1110459445)
call B_7(Z69,0)
call C77(Z69,0)
call SetUnitState(Z69,UNIT_STATE_LIFE,S7D)
call FlushChildHashtable(L7,(V07))
call OZ7(t)
set t=null
set Z69=null
return false
endfunction
function S8D takes nothing returns nothing
local unit Z69=GetTriggerUnit()
local unit ZZ9=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer V07=GetHandleId(t)
local integer KP7=GetUnitAbilityLevel(Z69,1093678161)
local real S9D=GetUnitState(ZZ9,UNIT_STATE_LIFE)
local real S7D=GetUnitState(Z69,UNIT_STATE_LIFE)
local integer SDD=R2I((.035+.015*KP7)*S9D)
local integer SED=R2I((.35+.15*KP7)*S9D)
call B_7(Z69,SDD)
call C77(Z69,SED)
call XF7(Z69,1093751344)
call SetUnitState(ZZ9,UNIT_STATE_LIFE,1)
call B67(Z69,ZZ9,2,20)
call B67(Z69,ZZ9,1,20)
call B67(Z69,ZZ9,3,20)
call SetUnitState(Z69,UNIT_STATE_LIFE,S7D+SED)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",ZZ9,"chest"))
call SaveUnitHandle(L7,(V07),(2),(Z69))
call TriggerRegisterUnitEvent(t,Z69,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,35,false)
call TriggerAddCondition(t,Condition(function S4D))
set Z69=null
set ZZ9=null
set t=null
endfunction
function SFD takes nothing returns boolean
if GetSpellAbilityId()==1093678161 and GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)>.5 and KW7(GetSpellTargetUnit())==false then
call S8D()
endif
return false
endfunction
function JI8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SFD))
set t=null
endfunction
function SGD takes integer x returns boolean
return x==1093808454 or x==1093808455 or x==1093743695 or x==1093684805 or x==1093743695 or x==1093747504 or x==1093686082
endfunction
function SHD takes nothing returns boolean
return GetUnitAbilityLevel(GetTriggerUnit(),1110455896)>0 and(UL7(GetSpellAbilityId())or GetSpellAbilityId()==1093685065)and SGD(GetSpellAbilityId())==false and L67(GetSpellAbilityId())==false
endfunction
function SID takes nothing returns nothing
local integer OB7=GetHandleId(GetTriggeringTrigger())
local unit WI7=GetTriggerUnit()
local unit x9=O77(OB7,"Destroyer")
local integer sr=GetUnitAbilityLevel(x9,1093683526)
if GetRandomInt(1,100)<=sr*$A and m9(WI7,x9,$578)then
call SetUnitState(WI7,UNIT_STATE_MANA,GetUnitState(WI7,UNIT_STATE_MANA)+.25*GetUnitState(WI7,UNIT_STATE_MAX_MANA))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\ReplenishManaCasterOverhead.mdl",WI7,"overhead"))
endif
set WI7=null
set x9=null
endfunction
function SJD takes unit WI7,boolean UA9 returns nothing
local integer sr=GetUnitAbilityLevel(WI7,1093683526)
local trigger t
if(sr==1 or UA9)then
set t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SHD))
call TriggerAddAction(t,function SID)
call NT7(GetHandleId(t),"Destroyer",WI7)
if UA9 then
set nj[GetPlayerId(GetOwningPlayer(WI7))]=t
endif
endif
if UA9 then
call UnitAddAbility(WI7,1093685068)
if sr>1 then
call UnitAddAbility(WI7,1093685069)
endif
if sr>2 then
call UnitAddAbility(WI7,1093685070)
endif
if sr>3 then
call UnitAddAbility(WI7,1093685064)
endif
else
if(sr==1)then
call XF7(WI7,1093685068)
elseif(sr==2)then
call XF7(WI7,1093685069)
elseif(sr==3)then
call XF7(WI7,1093685070)
elseif(sr==4)then
call XF7(WI7,1093685064)
endif
endif
set t=null
endfunction
function SKD takes nothing returns boolean
if GetLearnedSkill()==1093683526 and IsUnitIllusion(GetTriggerUnit())==false then
call SJD(GetTriggerUnit(),false)
endif
return false
endfunction
function JW8 takes nothing returns nothing
set RJ=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(RJ,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(RJ,Condition(function SKD))
endfunction
function XA takes nothing returns boolean
local real d
if GetUnitAbilityLevel(GetTriggerUnit(),1110455897)>0 and GetUnitAbilityLevel(GetEventDamageSource(),1093685065)>0 and O77(GetHandleId(GetTriggeringTrigger()),"Source")==GetEventDamageSource()then
call UnitRemoveAbility(GetTriggerUnit(),1110455897)
set d=.01*(4+GetUnitAbilityLevel(GetEventDamageSource(),1093685065))*(GetUnitState(GetEventDamageSource(),UNIT_STATE_MANA)+100)
if(IsUnitType(GetTriggerUnit(),UNIT_TYPE_SUMMONED)or IsUnitIllusion(GetTriggerUnit()))and GetUnitTypeId(GetTriggerUnit())!=1848651828 and GetUnitTypeId(GetTriggerUnit())!=1848652088 and GetUnitTypeId(GetTriggerUnit())!=1848652099 and GetUnitTypeId(GetTriggerUnit())!=1848652103 and GetUnitTypeId(GetTriggerUnit())!=1848651861 and GetUnitTypeId(GetTriggerUnit())!=1848651865 and GetUnitTypeId(GetTriggerUnit())!=1848651866 then
set d=d+100*GetUnitAbilityLevel(GetEventDamageSource(),1093685065)
endif
call YW7("+"+I2S(R2I(d)),1,GetTriggerUnit(),.023,$BF,64,$FF,$D8)
if(GetRandomInt(1,100)<=GetUnitAbilityLevel(GetEventDamageSource(),1093683526)*$A)and(OO7(GetHandleId(GetTriggeringTrigger()),"DoneViaSpell")==false)then
call SetUnitState(GetEventDamageSource(),UNIT_STATE_MANA,GetUnitState(GetEventDamageSource(),UNIT_STATE_MANA)+.25*GetUnitState(GetEventDamageSource(),UNIT_STATE_MAX_MANA))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\ReplenishManaCasterOverhead.mdl",GetEventDamageSource(),"overhead"))
endif
call DisableTrigger(GetTriggeringTrigger())
call B67(GetEventDamageSource(),GetTriggerUnit(),3,d)
call NM7(GetHandleId(GetTriggeringTrigger()))
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function Xb takes nothing returns nothing
local trigger t
local unit m5
local unit p5
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
set m5=GetSpellTargetUnit()
set p5=GetTriggerUnit()
else
set m5=GetTriggerUnit()
set p5=GetAttacker()
endif
if IsUnitIllusion(p5)==false then
set t=CreateTrigger()
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
call NS7(GetHandleId(t),"DoneViaSpell",true)
else
call NS7(GetHandleId(t),"DoneViaSpell",false)
endif
call NT7(GetHandleId(t),"Source",p5)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function XA))
endif
set t=null
set m5=null
set p5=null
endfunction
function XB takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if GetUnitAbilityLevel(GetAttacker(),1093685065)>0 and(OO7(GetHandleId(GetTriggeringTrigger()),"OrbOn")or(GZ[304+GetPlayerId(GetOwningPlayer(GetAttacker()))]))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==O77(GetHandleId(GetTriggeringTrigger()),"Hero")then
call Xb()
endif
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if(GetIssuedOrderId()==$D011F)then
call NS7(GetHandleId(GetTriggeringTrigger()),"OrbOn",true)
elseif(GetIssuedOrderId()==$D0120)then
call NS7(GetHandleId(GetTriggeringTrigger()),"OrbOn",false)
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093685065 then
call Xb()
endif
return false
endfunction
function SMD takes unit WI7,boolean UA9 returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function XB))
call NT7(GetHandleId(t),"Hero",WI7)
if UA9 then
set rj[GetPlayerId(GetOwningPlayer(WI7))]=t
endif
set t=null
endfunction
function SND takes nothing returns boolean
if GetLearnedSkill()==1093685065 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093685065)==1 then
call SMD(GetTriggerUnit(),false)
endif
return false
endfunction
function JX8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function SND))
set t=null
endfunction
function SOD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit m5=O77(OB7,"Target")
local integer SPD=OM7(OB7,"StolenInt")
call SetHeroInt(m5,GetHeroInt(m5,false)+SPD,true)
call SetHeroInt(p5,GetHeroInt(p5,false)-SPD,true)
call NM7(OB7)
call OZ7(t)
set t=null
set p5=null
set m5=null
return false
endfunction
function SQD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit m5=O77(OB7,"Target")
call OX7(m5,"AstralImprisonmentState")
call DestroyEffect(OG7(OB7,"FX"))
call SetUnitInvulnerable(m5,false)
call PauseUnit(m5,false)
call ShowUnit(m5,true)
call ClearSelectionForPlayer(GetOwningPlayer(m5))
call SelectUnitAddForPlayer(m5,GetOwningPlayer(m5))
call NN7(GetHandleId(p5),"748")
call NM7(OB7)
call OZ7(t)
set t=null
set p5=null
set m5=null
return false
endfunction
function SRD takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093685066)
local integer SSD=YG7(GetHeroInt(IH7,false),2+BC7*2)
local trigger t
local integer I97
local unit BB7=CreateUnit(GetOwningPlayer(IH7),1865429305,GetUnitX(IH7),GetUnitY(IH7),0)
call UnitApplyTimedLife(BB7,1112820806,BC7+1)
if(IsUnitEnemy(IH7,GetOwningPlayer(ZX7)))==false or WQ7(GetSpellTargetUnit())==false then
call OV7(IH7,"AstralImprisonmentState")
set t=CreateTrigger()
set I97=GetHandleId(t)
call SelectUnitRemoveForPlayer(IH7,GetOwningPlayer(IH7))
call SetUnitInvulnerable(IH7,true)
call PauseUnit(IH7,true)
call ShowUnit(IH7,false)
call NU7(I97,"FX",AddSpecialEffect("Abilities\\Spells\\Demon\\DarkConversion\\ZombifyTarget.mdl",GetUnitX(IH7),GetUnitY(IH7)))
call NT7(I97,"Source",ZX7)
call NT7(I97,"Target",IH7)
call TriggerRegisterTimerEvent(t,BC7,false)
call TriggerAddCondition(t,Condition(function SQD))
if(IsUnitEnemy(IH7,GetOwningPlayer(ZX7))) then
call NT7(GetHandleId(ZX7),"748",IH7)
call SetHeroInt(IH7,GetHeroInt(IH7,false)-SSD,true)
call SetHeroInt(ZX7,GetHeroInt(ZX7,false)+SSD,true)
set t=CreateTrigger()
set I97=GetHandleId(t)
call NT7(I97,"Source",ZX7)
call NT7(I97,"Target",IH7)
call NP7(I97,"StolenInt",SSD)
call TriggerRegisterTimerEvent(t,60,false)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function SOD))
endif
endif
set BB7=null
set ZX7=null
set IH7=null
set t=null
endfunction
function STD takes nothing returns boolean
if GetSpellAbilityId()==1093685066 then
call SRD()
endif
return false
endfunction
function SUD takes nothing returns nothing
if IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and OO7(GetHandleId(GetOwningPlayer(GetSpellTargetUnit())),"DisableHelp")and GetSpellTargetUnit()!=GetTriggerUnit()then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),(GetObjectName((1848652600))))
endif
endfunction
function SVD takes nothing returns boolean
if GetSpellAbilityId()==1093685066 then
call SUD()
endif
return false
endfunction
function JY8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function STD))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function SVD))
set t=null
endfunction
function SWD takes nothing returns boolean
return GetSpellAbilityId()==1093685067 or GetSpellAbilityId()==1093752407
endfunction
function SXD takes nothing returns nothing
local unit IH7=GetEnumUnit()
local unit SYD=GetTriggerUnit()
local integer SZD=GetHeroInt(SYD,true)-GetHeroInt(IH7,true)
local integer array SAD
local integer BC7=GetUnitAbilityLevel(SYD,1093685067)
local integer SBD=7+1*BC7
if BC7==0 then
set BC7=GetUnitAbilityLevel(SYD,1093752407)
set SBD=7+2*BC7+1
endif
set SAD[1]=$A
set SAD[2]=30
set SAD[3]=50
if(SZD>0)then
if(SZD>SAD[BC7])then
call UnitDamageTarget(SYD,IH7,SZD*SBD,true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
call YW7(I2S(R2I(SZD*SBD)),3,IH7,.023,$D8,30,30,$D8)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\SpellBreakerAttack.mdl",IH7,"overhead"))
call SetUnitState(IH7,UNIT_STATE_MANA,GetUnitState(IH7,UNIT_STATE_MANA)*.25)
endif
if(SZD<=SAD[BC7])then
call UnitDamageTarget(SYD,IH7,SZD*SBD,true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
call YW7(I2S(R2I(SZD*SBD)),3,IH7,.023,$D8,30,30,$D8)
endif
elseif(SZD<=0)then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\SpellBreakerAttack.mdl",IH7,"overhead"))
call SetUnitState(IH7,UNIT_STATE_MANA,GetUnitState(IH7,UNIT_STATE_MANA)*.25)
endif
set IH7=null
set SYD=null
endfunction
function SCD takes nothing returns boolean
if(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)then
if(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))then
return true
endif
endif
return false
endfunction
function S3D takes nothing returns nothing
local unit S79=GetTriggerUnit()
local integer WP9=GetUnitAbilityLevel(S79,1093685067)
local real x=GetLocationX(GetSpellTargetLoc())
local real y=GetLocationY(GetSpellTargetLoc())
local group VA9=WS7()
local integer P59=0
local unit S6D=(O77(GetHandleId(S79),"748"))
if WP9==0 then
set WP9=GetUnitAbilityLevel(S79,1093752407)
endif
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl",x,y))
loop
exitwhen P59>=360
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl",x+($C8+WP9*50)*Cos(P59*bj_DEGTORAD),y+($C8+WP9*50)*Sin(P59*bj_DEGTORAD)))
set P59=P59+45
endloop
call GroupEnumUnitsInRange(VA9,x,y,300+WP9*100,Condition(function SCD))
if S6D!=null and KF7(x,y,GetUnitX(S6D),GetUnitY(S6D))<(300+WP9*100)then
call SetUnitInvulnerable(S6D,false)
call GroupAddUnit(VA9,S6D)
endif
call ForGroup(VA9,function SXD)
if S6D!=null and XH7(S6D)==false then
call SetUnitInvulnerable(S6D,true)
endif
call WR7(VA9)
set S79=null
set VA9=null
endfunction
function JZ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SWD))
call TriggerAddAction(t,function S3D)
set t=null
endfunction
function SLD takes nothing returns nothing
call B67(RL4,GetEnumUnit(),16,R14)
endfunction
function S1D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit IH7=O77(I97,"Target")
local unit ZX7=O77(I97,"Source")
local group g
local integer WF8=OM7(I97,"Count")
if GetTriggerEvalCount(t)>250 or GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEvalCount(t)>1 and GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093685575 and GetSpellTargetUnit()==IH7)then
call DestroyEffect(OG7(I97,"Effect"))
call NM7(I97)
call OZ7(t)
else
set WF8=WF8+1
call NP7(I97,"Count",WF8)
set g=WS7()
set IN4=ZX7
set RL4=ZX7
set R14=1.+2.*GetUnitAbilityLevel(ZX7,1093685575)
call GroupEnumUnitsInRange(g,GetUnitX(IH7),GetUnitY(IH7),275,Condition(function AJ7))
call GroupRemoveUnit(g,IH7)
call ForGroup(g,function SLD)
call WR7(g)
endif
set IH7=null
set t=null
set ZX7=null
set g=null
return false
endfunction
function S0D takes nothing returns nothing
local trigger t=CreateTrigger()
local effect fx=AddSpecialEffectTarget("war3mapImported\\NewSoulArmor.mdx",GetSpellTargetUnit(),"chest")
local integer I97=GetHandleId(t)
call Y17(JO,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()))
call NT7(I97,"Source",GetTriggerUnit())
call NT7(I97,"Target",GetSpellTargetUnit())
call NU7(I97,"Effect",fx)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterUnitEvent(t,GetSpellTargetUnit(),EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function S1D))
set t=null
set fx=null
endfunction
function S5D takes nothing returns boolean
if GetSpellAbilityId()==1093685575 then
call S0D()
endif
return false
endfunction
function KO8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function S5D))
set t=null
endfunction
function S2D takes unit u returns boolean
return GetUnitAbilityLevel(u,1110454858)>0 or GetUnitAbilityLevel(u,1112896368)>0 or GetUnitAbilityLevel(u,1114993524)>0 or VP7(u)
endfunction
function S_D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local real x=ON7(OB7,"x")
local real y=ON7(OB7,"y")
local integer V77
local unit p5
local unit m5
local real x1
local real y1
local real d
local real a
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call NM7(OB7)
call OZ7(t)
else
set m5=O77(OB7,"Target")
set d=ON7(OB7,"d")
set x=ON7(OB7,"x")
set y=ON7(OB7,"y")
set a=ON7(OB7,"a")
set x1=GetUnitX(m5)+d/ $F*Cos(a)
set y1=GetUnitY(m5)+d/ $F*Sin(a)
if IsUnitType(m5,UNIT_TYPE_HERO) then
call SetUnitPosition(m5,x1,y1)
else
call SetUnitX(m5,x1)
call SetUnitY(m5,y1)
endif
if GetTriggerEvalCount(t)>19 then
set p5=O77(OB7,"Source")
set V77=OM7(OB7,"Level")
call NM7(OB7)
call OZ7(t)
call B67(p5,m5,1,V77*40)
set p5=null
endif
set m5=null
endif
set t=null
return false
endfunction
function T4D takes nothing returns nothing
local trigger t
local integer OB7
local unit p5=GetTriggerUnit()
local unit m5=GetEnumUnit()
if S2D(m5)==false then
set t=CreateTrigger()
set OB7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,.025,true)
call TriggerAddCondition(t,Condition(function S_D))
call NQ7(OB7,"x",(j0)*1.)
call NQ7(OB7,"y",(K0)*1.)
call NQ7(OB7,"d",(KF7(j0,K0,GetUnitX(m5),GetUnitY(m5)))*1.)
call NQ7(OB7,"a",(Atan2(K0-GetUnitY(m5),j0-GetUnitX(m5)))*1.)
call NP7(OB7,"Level",l0)
call NT7(OB7,"Source",p5)
call NT7(OB7,"Target",m5)
endif
set t=null
set p5=null
set m5=null
endfunction
function T7D takes nothing returns nothing
local group g=WS7()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local integer V77=GetUnitAbilityLevel(GetTriggerUnit(),1093685573)
local real r=$96+100*V77+25
set IN4=GetTriggerUnit()
call Y17(DP,x,y)
call DestroyEffect(AddSpecialEffect("war3mapImported\\Star Aura.mdx",x,y))
call GroupEnumUnitsInRange(g,x,y,r,Condition(function AY7))
set j0=x
set K0=y
set l0=V77
call ForGroup(g,function T4D)
call Y67(x,y,$C8)
call RemoveLocation(l)
call WR7(g)
set l=null
set g=null
endfunction
function T8D takes nothing returns boolean
if GetSpellAbilityId()==1093685573 then
call T7D()
endif
return false
endfunction
function T9D takes nothing returns nothing
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
if YL7(x,y)==false or(IsPointInRegion(IU4,((x)*1.),((y)*1.)))then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),(GetObjectName((1848652619))))
endif
call RemoveLocation(l)
set l=null
endfunction
function TDD takes nothing returns boolean
if GetSpellAbilityId()==1093685573 then
call T9D()
endif
return false
endfunction
function KN8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function T8D))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function TDD))
set t=null
endfunction
function Xq takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
call UnitRemoveAbility(m5,1110456151)
call UnitRemoveAbility(m5,1113746543)
call UnitRemoveAbility(m5,1110455858)
call UnitRemoveAbility(m5,1110455861)
call UnitRemoveAbility(m5,1113813619)
call UnitRemoveAbility(m5,1110454582)
call UnitRemoveAbility(m5,1110455634)
set t=null
set m5=null
return false
endfunction
function XQ takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,GetUnitAbilityLevel(GetTriggerUnit(),1093685815)*1.5+.5,false)
call TriggerAddCondition(t,Condition(function Xq))
call NT7(GetHandleId(t),"Target",GetSpellTargetUnit())
call Y17(bR,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()))
call DestroyEffect(AddSpecialEffectTarget("effects\\Surge.mdx",GetSpellTargetUnit(),"origin"))
set t=null
endfunction
function TED takes nothing returns boolean
if GetSpellAbilityId()==1093685815 then
call XQ()
endif
return false
endfunction
function KP8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TED))
set t=null
endfunction
function TFD takes boolean TGD returns boolean
local integer OB7=GetHandleId(GetTriggeringTrigger())
local unit THD=O77(OB7,"Wall")
local unit m5=GetTriggerUnit()
local unit XS=CreateUnit(GetOwningPlayer(THD),1697657171,GetUnitX(m5),GetUnitY(m5),0)
local unit WX7=M7[GetPlayerId(GetOwningPlayer(THD))]
local integer BC7=GetUnitAbilityLevel(WX7,1093685579)+GetUnitAbilityLevel(WX7,1093808465)
if BC7==0 then
set BC7=GetUnitAbilityLevel(WX7,1093808465)
endif
call SetUnitAbilityLevel(THD,1093685580,BC7)
set PO4=GetUnitX(m5)
set PP4=GetUnitY(m5)
set PQ4=m5
if TGD then
call SetUnitAbilityLevel(THD,1093685580,3+BC7)
call IssueTargetOrderById(THD,$D0132,m5)
call B67(THD,m5,1,$96)
else
call IssueTargetOrderById(THD,$D0132,m5)
call B67(THD,m5,1,150)
endif
call UnitApplyTimedLife(XS,1112820806,.5)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl",GetUnitX(m5),GetUnitY(m5)))
set THD=null
set m5=null
set XS=null
return false
endfunction
function TID takes nothing returns boolean
local group g
if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(O77(GetHandleId(GetTriggeringTrigger()),"Wall")))and LB7(GetUnitTypeId(GetFilterUnit()))==false then
set g=OF7(GetHandleId(GetTriggeringTrigger()),"g1")
if IsUnitInGroup(GetFilterUnit(),g)==false then
call GroupAddUnit(g,GetFilterUnit())
call TFD(false)
endif
endif
set g=null
return false
endfunction
function TJD takes nothing returns boolean
local group g
if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(O77(GetHandleId(GetTriggeringTrigger()),"Wall")))and LB7(GetUnitTypeId(GetFilterUnit()))==false then
set g=OF7(GetHandleId(GetTriggeringTrigger()),"g1")
if IsUnitInGroup(GetFilterUnit(),g)==false then
call GroupAddUnit(g,GetFilterUnit())
call TFD(true)
endif
endif
set g=null
return false
endfunction
function WallOfReplica_FindSource takes nothing returns nothing
if GetPlayerId(GetOwningPlayer(GetEnumUnit()))==IH4 then
call GroupAddUnit(IQ4,GetEnumUnit())
endif
endfunction
function TKD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
call GroupRemoveUnit(OF7(I97,"g1"),O77(I97,"imagesource"))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl",GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call NM7(I97)
call DisableTrigger(t)
set t=null
return false
endfunction
function TMD takes nothing returns boolean
local unit THD=GetSummoningUnit()
local unit VZ8=GetSummonedUnit()
local integer I97=GetHandleId(THD)
local integer TND=OM7(I97,"NumOfImages")
local trigger t=CreateTrigger()
call SetUnitVertexColor(VZ8,$FF,$FF,$FF,100)
call TriggerRegisterUnitEvent(t,VZ8,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function TKD))
call NB7(GetHandleId(t),"g1",OF7(I97,"g1"))
call NT7(GetHandleId(t),"imagesource",PQ4)
set TND=TND+1
call NP7(I97,"NumOfImages",TND)
call NT7(I97,"Illusion"+I2S(TND),VZ8)
call NV7(I97,"IllusionTrig"+I2S(TND),t)
call SetUnitX(VZ8,PO4)
call SetUnitY(VZ8,PP4)
set THD=null
set VZ8=null
set t=null
return false
endfunction
function TOD takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Xw takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer v5=GetHandleId(t)
local trigger XW=OE7(v5,"mastert")
local integer tK=GetHandleId(XW)
local trigger v7=OE7(tK,"DetectTrig")
local group Xx=OF7(tK,"g1")
local group XX=OF7(tK,"g2")
local unit TPD=O77(tK,"Wall")
local integer Xy=GetHandleId(TPD)
local integer Xv=OM7(Xy,"NumOfImages")
local integer i
local unit u
call ForGroup(XX,function TOD)
set i=1
loop
exitwhen i>Xv
set u=O77(Xy,"Illusion"+I2S(i))
call NM7(GetHandleId(OE7(Xy,"IllusionTrig"+I2S(i))))
call OZ7(OE7(Xy,"IllusionTrig"+I2S(i)))
if IsUnitIllusion(u)then
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl",GetUnitX(u),GetUnitY(u)))
call RemoveUnit(u)
endif
set i=i+1
endloop
call NM7(v5)
call NM7(tK)
call NM7(Xy)
call RemoveUnit(TPD)
call WR7(Xx)
call WR7(XX)
call OZ7(XW)
call OZ7(v7)
call OZ7(t)
set t=null
set XW=null
set v7=null
set Xx=null
set XX=null
set TPD=null
set u=null
return false
endfunction
function TQD takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real TRD=GetUnitFacing(WI7)-45
local unit TPD=CreateUnit(GetOwningPlayer(WI7),1747988559,x,y,TRD)
local unit u
local real TV9
local real TW9
local integer i
local real Xk
local trigger t=CreateTrigger()
local group g1=WS7()
local integer OB7=GetHandleId(t)
local group g2=WS7()
local trigger XW=t
local integer BC7=GetUnitAbilityLevel(WI7,1093685579)
local boolean TGD=false
if BC7==0 then
set TGD=true
set BC7=GetUnitAbilityLevel(WI7,1093808465)
endif
call SetUnitAbilityLevel(TPD,1093685580,BC7)
call Y17(hR,x,y)
call NB7(OB7,"g1",g1)
call NB7(GetHandleId(TPD),"g1",g1)
call NB7(OB7,"g2",g2)
call NT7(OB7,"Wall",TPD)
call NP7(GetHandleId(TPD),"NumOfImages",0)
set i=0
loop
exitwhen i>39
set TV9=x+(500-25*i)*Cos((TRD-45)*bj_DEGTORAD)
set TW9=y+(500-25*i)*Sin((TRD-45)*bj_DEGTORAD)
set u=CreateUnit(GetOwningPlayer(WI7),1747988560,TV9,TW9,TRD)
call SetUnitPathing(u,false)
call SetUnitX(u,TV9)
call SetUnitY(u,TW9)
call GroupAddUnit(g2,u)
call TriggerRegisterUnitInRange(t,u,17,Condition(function TO7))
set i=i+1
endloop
if TGD then
call TriggerAddCondition(t,Condition(function TJD))
else
call TriggerAddCondition(t,Condition(function TID))
endif
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,TPD,EVENT_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function TMD))
call NV7(OB7,"DetectTrig",t)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,45+0*BC7,false)
call TriggerAddCondition(t,Condition(function Xw))
call NV7(GetHandleId(t),"mastert",XW)
call RemoveLocation(l)
set WI7=null
set l=null
set u=null
set t=null
set XW=null
set g1=null
set g2=null
set TPD=null
endfunction
function TSD takes nothing returns boolean
if GetSpellAbilityId()==1093685579 or GetSpellAbilityId()==1093808465 then
call TQD()
endif
return false
endfunction
function KQ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TSD))
set t=null
endfunction
function TTD takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),Z44)==false and WF7(GetEnumUnit())==false then
call GroupAddUnit(Z44,GetEnumUnit())
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),Z74,false)
call Z57(GetEnumUnit(),Z74,1,3,1110455633)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\SpellShieldAmulet\\SpellShieldCaster.mdl",GetEnumUnit(),"overhead"))
endif
endfunction
function TUD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit WX7=(LoadUnitHandle(L7,(I97),($E)))
local real x2=(LoadReal(L7,(I97),(66)))
local real y2=(LoadReal(L7,(I97),(67)))
local real a=(LoadReal(L7,(I97),($89)))
local integer WF8=GetTriggerEvalCount(t)
local real x=GetUnitX(WX7)
local real y=GetUnitY(WX7)
local real TP9=(LoadReal(L7,(I97),(23)))
local real TQ9=(LoadReal(L7,(I97),(24)))
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
local group g=WS7()
local group BQ9=(LoadGroupHandle(L7,(I97),($BB)))
local integer BC7=GetUnitAbilityLevel(WX7,1093684299)
if KF7(x,y,x2,y2)<=OU then
set x=x2
set y=y2
else
set x=X17(TP9+65*Cos(a*bj_DEGTORAD))
set y=X07(TQ9+65*Sin(a*bj_DEGTORAD))
endif
if BC7==1 then
set Z74=1093810497
elseif BC7==2 then
set Z74=1093810489
elseif BC7==3 then
set Z74=1093810498
elseif BC7==4 then
set Z74=1093810488
endif
set IN4=WX7
set Z44=BQ9
call GroupEnumUnitsInRange(g,x,y,325,Condition(function AJ7))
call ForGroup(g,function TTD)
call WR7(g)
call SaveReal(L7,(I97),(23),((x)*1.))
call SaveReal(L7,(I97),(24),((y)*1.))
call SetUnitPosition(WX7,x,y)
if(x==x2 and y==y2)or WF8>40 then
call SetUnitX(BB7,x)
call SetUnitY(BB7,y)
call IssueImmediateOrderById(BB7,$D0080)
call WR7(BQ9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call SetUnitAnimation(WX7,"stand")
call SetUnitPathing(WX7,true)
call SetUnitInvulnerable(WX7,false)
if GetUnitTypeId(WX7)==1160786520 then
call SetUnitVertexColor(WX7,$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(WX7,$FF,$FF,$FF,$FF)
endif
call OX7(WX7,"TimeWalk|Active")
endif
set t=null
set WX7=null
set BB7=null
return false
endfunction
function TVD takes nothing returns nothing
local unit WX7=GetTriggerUnit()
local location l
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local real x1=GetUnitX(WX7)
local real y1=GetUnitY(WX7)
local real x2
local real y2
local real a
local unit BB7=CreateUnit(GetOwningPlayer(WX7),1697656901,x1,y1,0)
if GetSpellTargetUnit()==null then
set l=GetSpellTargetLoc()
else
set l=GetUnitLoc(GetSpellTargetUnit())
endif
set x2=GetLocationX(l)
set y2=GetLocationY(l)
set a=J77(x1,y1,x2,y2)
call RemoveLocation(l)
call SetUnitAnimationByIndex(WX7,0)
call SetUnitPathing(WX7,false)
call SetUnitInvulnerable(WX7,true)
call SetUnitVertexColor(WX7,0,0,0,$FF)
call OV7(WX7,"TimeWalk|Active")
call SaveReal(L7,(I97),(66),((X17(x2))*1.))
call SaveReal(L7,(I97),(67),((X07(y2))*1.))
call SaveReal(L7,(I97),(23),((x1)*1.))
call SaveReal(L7,(I97),(24),((y1)*1.))
call SaveReal(L7,(I97),($89),((a)*1.))
call SaveUnitHandle(L7,(I97),($E),(WX7))
call SaveUnitHandle(L7,(I97),(19),(BB7))
call SaveGroupHandle(L7,(I97),($BB),(WS7()))
call XF7(BB7,1093684289)
call SetUnitAbilityLevel(BB7,1093684289,GetUnitAbilityLevel(WX7,1093684299))
call TriggerRegisterTimerEvent(t,.025,true)
call TriggerAddCondition(t,Condition(function TUD))
set WX7=null
set l=null
set t=null
set BB7=null
endfunction
function TWD takes nothing returns boolean
if GetSpellAbilityId()==1093684299 then
call TVD()
endif
return false
endfunction
function HO8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TWD))
set t=null
endfunction
function X6 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local real YM7=GetEventDamage()
if(YM7>0)and GetUnitState(WI7,UNIT_STATE_LIFE)>=1 and(YM7<GetUnitState(WI7,UNIT_STATE_LIFE))then
if(GetRandomInt(1,100)<=(5+(5*GetUnitAbilityLevel(WI7,1093682010))))then
call SetUnitState(WI7,UNIT_STATE_LIFE,GetUnitState(WI7,UNIT_STATE_LIFE)+YM7)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl",WI7,"hand,left"))
endif
endif
set WI7=null
endfunction
function TXD takes unit WI7,boolean UA9 returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_DAMAGED)
call TriggerAddAction(t,function X6)
if UA9 then
set aj[GetPlayerId(GetOwningPlayer(WI7))]=t
endif
set t=null
endfunction
function TYD takes nothing returns boolean
if GetLearnedSkill()==1093682010 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093682010)==1 then
call TXD(GetTriggerUnit(),false)
endif
return false
endfunction
function HQ8 takes nothing returns nothing
set IE4=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(IE4,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(IE4,Condition(function TYD))
endfunction
function P1I takes unit u returns boolean
return((LoadInteger(L7,(GetHandleId((u))),((4400))))==1)or((LoadInteger(L7,(GetHandleId((u))),((4401))))==1)or((LoadInteger(L7,(GetHandleId((u))),((4402))))==1)or((LoadInteger(L7,(GetHandleId((u))),((4403))))==1)or((LoadInteger(L7,(GetHandleId((u))),((4404))))==1)or((LoadInteger(L7,(GetHandleId((u))),((4405))))==1)or((LoadInteger(L7,(GetHandleId((u))),((4406))))==1)or((LoadInteger(L7,(GetHandleId((u))),((4407))))==1)or((LoadInteger(L7,(GetHandleId((u))),((4408))))==1)or((LoadInteger(L7,(GetHandleId((u))),((4409))))==1)or((LoadInteger(L7,(GetHandleId((u))),((4410))))==1)or((LoadInteger(L7,(GetHandleId((u))),((4411))))==1)or((LoadInteger(L7,(GetHandleId((u))),((4412))))==1)or((LoadInteger(L7,(GetHandleId((u))),((4413))))==1)or((LoadInteger(L7,(GetHandleId((u))),((4414))))==1)or((LoadInteger(L7,(GetHandleId((u))),((4415))))==1)
endfunction
function H61 takes unit p5,real H71,real H81,real H91 returns nothing
local real x=GetUnitX(p5)
local real y=GetUnitY(p5)
local real a=Atan2(y-H81,x-H71)
local real d=KF7(x,y,H71,H81)
local real mss=GetUnitMoveSpeed(p5)
if P1I(p5)==false and H91>mss and d>10*0.005 then
set x=X17(x+(H91-mss)*0.005*Cos(a))
set y=X07(y+(H91-mss)*0.005*Sin(a))
call SetUnitX(p5,x)
call SetUnitY(p5,y)
endif
endfunction
function WW24 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=(LoadUnitHandle(L7,(OB7),(2)))
local unit ya=(LoadUnitHandle(L7,(OB7),(19)))
local real H71=(LoadReal(L7,(OB7),(6)))
local real H81=(LoadReal(L7,(OB7),(7)))
if ya==null or p5==null then
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
else
if Ma(p5,ya)<450 then
call SaveInteger(L7,(GetHandleId((p5))),((4423)),(1))
call H61(p5,H71,H81,1000.)
else
call SaveInteger(L7,(GetHandleId((p5))),((4423)),(2))
endif
call SaveReal(L7,(OB7),(6),((GetUnitX(p5))*1.0))
call SaveReal(L7,(OB7),(7),((GetUnitY(p5))*1.0))
endif
set t=null
set p5=null
set ya=null
return false
endfunction
function WW44 takes unit p5,unit ya returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call SaveUnitHandle(L7,(OB7),(2),(p5))
call SaveUnitHandle(L7,(OB7),(19),(ya))
call SaveReal(L7,(OB7),(6),((GetUnitX(p5))*1.0))
call SaveReal(L7,(OB7),(7),((GetUnitY(p5))*1.0))
call TriggerRegisterTimerEvent(t,0.005,true)
call TriggerAddCondition(t,Condition(function WW24))
set t=null
endfunction
function WW54 takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(HHI)and GetUnitTypeId(GetFilterUnit())==GetUnitTypeId(HHI)then
call WW44(GetFilterUnit(),HGI)
endif
return false
endfunction
function WW64 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=(LoadUnitHandle(L7,(OB7),(2)))
local unit ya=(LoadUnitHandle(L7,(OB7),(19)))
local unit u=GetTriggerUnit()
if ya==null then
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
set p5=null
set u=null
return false
endif
if GetOwningPlayer(u)==GetOwningPlayer(p5)and GetUnitTypeId(u)==GetUnitTypeId(p5)then
call WW44(u,ya)
endif
set p5=null
set ya=null
set u=null
return false
endfunction
function TZD takes nothing returns boolean
return GetSpellAbilityId()==1093683761 or GetSpellAbilityId()==1093747767
endfunction
function TAD takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer OB7=GetHandleId(t)
local unit ya=(LoadUnitHandle(L7,(OB7),(19)))
call PauseTimer(t)
call FlushChildHashtable(L7,(OB7))
call DestroyTimer(t)
endfunction
function TBD takes unit S4 returns boolean
local integer ID=GetUnitTypeId(S4)
return ID==1865429040 or ID==1865429041 or ID==1865429057 or ID==1865429080 or ID==1869836340 or ID==1865429048 or ID==1865429049 or ID==1700946284 or ID==1697657398 or ID==1970107511 or ID==1966092370 or ID==1162032181
endfunction
function TCD takes nothing returns boolean
return GetOwningPlayer(GetFilterUnit())!=GetOwningPlayer(D8)and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 or TBD(GetFilterUnit()))
endfunction
function T3D takes nothing returns nothing
if GetUnitTypeId(GetEnumUnit())!=1162032181 then
call PauseUnit(GetEnumUnit(),true)
call SetUnitTimeScale(GetEnumUnit(),0)
call UnitRemoveAbility(GetEnumUnit(),1112896364)
call UnitRemoveAbility(GetEnumUnit(),1112896368)
call UnitRemoveAbility(GetEnumUnit(),1112896372)
call SaveInteger(L7,(GetHandleId((GetEnumUnit()))),((4306)),(1))
endif
endfunction
function TLD takes nothing returns nothing
if GetUnitTypeId(GetEnumUnit())!=1162032181 then
call SaveInteger(L7,(GetHandleId((GetEnumUnit()))),((4306)),(2))
call PauseUnit(GetEnumUnit(),false)
call SetUnitTimeScale(GetEnumUnit(),1)
endif
endfunction
function T5D takes nothing returns nothing
local unit UJ7=GetEnumUnit()
if(IsUnitType(UJ7,UNIT_TYPE_STRUCTURE)and(IsUnitEnemy(UJ7,GetOwningPlayer(hx)))and(IsUnitVisible(UJ7,GetOwningPlayer(hx)))and(hS==null))then
set hS=UJ7
elseif(IsUnitType(UJ7,UNIT_TYPE_HERO)and(IsUnitEnemy(UJ7,GetOwningPlayer(hx)))and(IsUnitVisible(UJ7,GetOwningPlayer(hx)))and((hS==null)or(IsUnitType(hS,UNIT_TYPE_STRUCTURE))or(GetUnitLifePercent(hS)>GetUnitLifePercent(UJ7))))then
set hS=UJ7
endif
set UJ7=null
endfunction
function T0D takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer OB7=GetHandleId(t)
local unit ya=(LoadUnitHandle(L7,(OB7),(19)))
local unit WI7=(LoadUnitHandle(L7,(OB7),(14)))
local integer V77=(LoadInteger(L7,(OB7),(5)))
local group T_D=(LoadGroupHandle(L7,(OB7),(220)))
local integer T8=(LoadInteger(L7,(OB7),(28)))
local real Y5=GetUnitX(ya)
local real Z5=GetUnitY(ya)
local boolexpr U4D=Condition(function TCD)
local group LQ7=WS7()
local integer O5=GetPlayerId(GetOwningPlayer(WI7))
local integer BZ7=30+V77*10
if GetUnitAbilityLevel(WI7,1093747767)>0 then
set BZ7=40+V77*10
endif
call ForGroup(T_D,function TLD)
set D8=WI7
call GroupEnumUnitsInRange(LQ7,Y5,Z5,475,U4D)
call GroupClear(T_D)
call GroupAddGroup(LQ7,T_D)
call ForGroup(LQ7,function T3D)
if(GetPlayerController(GetOwningPlayer(WI7))==MAP_CONTROL_COMPUTER)then
if(h4[16+O5]==null)then
set hS=null
set hx=WI7
call ForGroup(LQ7,function T5D)
set h4[16+O5]=hS
endif
if(h4[16+O5]!=null)then
if((IsUnitAliveBJ(h4[16+O5]))and(GetUnitAbilityLevel(h4[16+O5],1110454854)==0))then
if((not IsUnitInRange(WI7,h4[16+O5],300.))and(IsUnitType(h4[16+O5],UNIT_TYPE_HERO)))then
if(not IssueTargetOrderById(WI7,$D00FA,h4[16+O5]))then
call IssueTargetOrderById(WI7,$D000F,h4[16+O5])
endif
elseif(not MC7(WI7,ZU[P1]))then
call IssueTargetOrderById(WI7,$D000F,h4[16+O5])
endif
else
set h4[16+O5]=null
endif
endif
endif
call WR7(LQ7)
set T8=T8+1
call SaveInteger(L7,(OB7),(28),(T8))
if T8>BZ7 then
set GZ[384+O5]=false
set h4[16+O5]=null
if D9==false then
call ForGroup(T_D,function TLD)
endif
call RemoveUnit(ya)
call WR7(T_D)
call PauseTimer(t)
call FlushChildHashtable(L7,(OB7))
call DestroyTimer(t)
endif
set t=null
set ya=null
set WI7=null
set T_D=null
set U4D=null
set LQ7=null
endfunction
function U7D takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local integer V77=GetUnitAbilityLevel(WI7,(1093683761))+GetUnitAbilityLevel(WI7,1093747767)
local location m5=GetSpellTargetLoc()
local real Y5=GetLocationX(m5)
local real Z5=GetLocationY(m5)
local unit ya=CreateUnit(GetOwningPlayer(WI7),(1966092364),Y5,Z5,0)
local timer t=CreateTimer()
local integer OB7=GetHandleId(t)
local group T_D=WS7()
local group g
local trigger WGG4
local integer O5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
set GZ[384+O5]=true
set h4[16+O5]=null
set hq[512+O5]=Bz+2.+(V77)
call SaveUnitHandle(L7,(GetHandleId(t)),(19),(ya))
call TimerStart(t,0.8,false,function TAD)
set t=CreateTimer()
set OB7=GetHandleId(t)
call SaveUnitHandle(L7,(OB7),(19),(ya))
call SaveUnitHandle(L7,(OB7),(14),(WI7))
call SaveGroupHandle(L7,(OB7),(220),(T_D))
call SaveInteger(L7,(OB7),(28),(0))
call SaveInteger(L7,(OB7),(5),(V77))
call TimerStart(t,0.1,true,function T0D)
call RemoveLocation(m5)
set HGI=ya
set HHI=WI7
set g=WS7()
call GroupEnumUnitsInRange(g,0,0,25000,Condition(function WW54))
call WR7(g)
set WGG4=CreateTrigger()
set OB7=GetHandleId(WGG4)
call SaveUnitHandle(L7,(OB7),(2),(WI7))
call SaveUnitHandle(L7,(OB7),(19),(ya))
call TriggerRegisterEnterRectSimple(WGG4,GetWorldBounds())
call TriggerAddCondition(WGG4,Condition(function WW64))
set t=null
set WI7=null
set m5=null
set ya=null
set g=null
set T_D=null
set WGG4=null
endfunction
function HR8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TZD))
call TriggerAddAction(t,function U7D)
set t=null
endfunction
function U8D takes unit u,real U9D returns nothing
local integer d=R2I(U9D)
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer UDD
local real difference
set BV4[0]=1093808968
set BV4[1]=1093808971
set BV4[2]=1093808972
set BV4[3]=1093808970
set BV4[4]=1093808969
set BV4[5]=1093808973
if d<1 then
call UnitRemoveAbility(u,BV4[0])
call UnitRemoveAbility(u,BV4[1])
call UnitRemoveAbility(u,BV4[2])
call UnitRemoveAbility(u,BV4[3])
call UnitRemoveAbility(u,BV4[4])
call UnitRemoveAbility(u,BV4[5])
return
endif
loop
exitwhen c==0
set c=a/2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set UDD=5
set i=0
loop
exitwhen i>UDD
if b[i]==1 then
call XF7(u,BV4[i])
call SetPlayerAbilityAvailable(GetOwningPlayer(u),BV4[i],false)
else
call UnitRemoveAbility(u,BV4[i])
endif
set i=i+1
endloop
endfunction
function UED takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093808967)
local real ZV8=(LoadReal(L7,(GetHandleId(IH7)),(682)))
local integer WF8=(LoadInteger(L7,(GetHandleId(IH7)),(683)))-1
call U8D(IH7,WF8*BC7)
call SaveInteger(L7,(GetHandleId(IH7)),(683),(WF8))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function UFD takes unit ZX7,unit IH7 returns nothing
local integer BC7=GetUnitAbilityLevel(ZX7,1093808967)
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local integer WF8=(LoadInteger(L7,(GetHandleId(IH7)),(683)))+1
call U8D(IH7,WF8*BC7)
call SaveInteger(L7,(GetHandleId(IH7)),(683),(WF8))
call SaveReal(L7,(GetHandleId(IH7)),(682),(((TimerGetElapsed(W))+BW4-.01)*1.))
call TriggerRegisterTimerEvent(t,BW4,false)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerAddCondition(t,Condition(function UED))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",IH7,"origin"))
set t=null
endfunction
function UGD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local integer TE9=(LoadInteger(L7,(I97),(30)))
local unit IH7=TQ7(TE9)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==ZX7 then
call DisableTrigger(t)
if GetUnitAbilityLevel(IH7,1093678162)==0 then
call UFD(ZX7,IH7)
endif
call TP7(TE9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
else
call TP7(TE9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function UHD takes nothing returns nothing
local trigger t=CreateTrigger()
local unit IH7=GetTriggerUnit()
local unit ZX7=GetAttacker()
local integer I97=GetHandleId(t)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,1,false)
call TriggerAddCondition(t,Condition(function UGD))
call SaveInteger(L7,(I97),(30),(TS7(IH7)))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set IH7=null
set ZX7=null
set t=null
endfunction
function UID takes nothing returns nothing
local unit ZX7=GetAttacker()
if((LoadInteger(L7,(GetHandleId((ZX7))),((4307))))==1)==false then
call O37(ZX7,"4307",.3)
call UHD()
endif
endfunction
function UJD takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093808967)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(L7,(GetHandleId(GetTriggeringTrigger())),($E)))and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))then
call UID()
endif
return false
endfunction
function UKD takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function UJD))
call SaveUnitHandle(L7,(GetHandleId(t)),($E),(GetTriggerUnit()))
set t=null
endfunction
function UMD takes nothing returns boolean
if GetLearnedSkill()==1093808967 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093808967)==1 then
call UKD()
endif
return false
endfunction
function HS8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function UMD))
set t=null
endfunction
function UND takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetUnitAbilityLevel(p5,1110459186)==0 then
call NM7(OB7)
call OZ7(t)
call SetUnitTimeScale(p5,1)
call NP7(GetHandleId(p5),"TimeLocked",2)
else
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",p5,"origin"))
endif
set t=null
set p5=null
return false
endfunction
function UOD takes unit p5 returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call SetUnitTimeScale(p5,0)
call NP7(GetHandleId(p5),"TimeLocked",1)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function UND))
call NT7(OB7,"Source",p5)
if(OT7(p5,"4306"))then
call B67(SU4,p5,1,30+10*GetUnitAbilityLevel(SU4,1093679153))
endif
set t=null
endfunction
function UPD takes nothing returns boolean
if GetUnitAbilityLevel(GetFilterUnit(),1110459186)>0 and(OM7(GetHandleId(GetFilterUnit()),"TimeLocked")==1)==false then
call UOD(GetFilterUnit())
endif
return false
endfunction
function UQD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local group g=WS7()
set SU4=p5
call GroupEnumUnitsInRange(g,GetUnitX(p5),GetUnitY(p5),475,Condition(function UPD))
call WR7(g)
set t=null
set p5=null
set g=null
return false
endfunction
function URD takes unit p5,boolean UA9 returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function UQD))
call NT7(OB7,"Source",p5)
if UA9 then
set nj[GetPlayerId(GetOwningPlayer(p5))]=t
endif
set t=null
set p5=null
endfunction
function USD takes nothing returns boolean
if GetLearnedSkill()==1093679153 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093679153)==1 then
call URD(GetTriggerUnit(),false)
endif
return false
endfunction
function HP8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function USD))
set t=null
endfunction
function UTD takes unit I_7 returns boolean
return(GetUnitTypeId(I_7)==1211117641 or GetUnitTypeId(I_7)==1211117642 or GetUnitTypeId(I_7)==GetUnitTypeId(GetTriggerUnit()))and GetUnitState(I_7,UNIT_STATE_LIFE)>.5 and GetOwningPlayer(I_7)==GetOwningPlayer(GetTriggerUnit())
endfunction
function UUD takes nothing returns boolean
return GetSpellAbilityId()==1093684792
endfunction
function UVD takes nothing returns boolean
return UTD(GetFilterUnit())
endfunction
function UWD takes nothing returns nothing
local unit UXD=GetEnumUnit()
local real yg=YO7(UXD,Z9)
if yg<F8 then
set F8=yg
set D8=UXD
endif
set UXD=null
endfunction
function UYD takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0)!=null
endfunction
function UZD takes nothing returns nothing
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl",GetEnumUnit(),"origin"))
call UnitDamageTarget(GetTriggerUnit(),GetEnumUnit(),F8,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE,WEAPON_TYPE_WHOKNOWS)
endfunction
function UAD takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local location ZU9
local real x
local real y
local real AQ9=GetUnitX(p5)
local real AR9=GetUnitY(p5)
local group VA9
local boolexpr JJD
local boolean UBD=false
if IH7!=null and UTD(IH7)then
set x=GetUnitX(IH7)
set y=GetUnitY(IH7)
set UBD=true
else
set JJD=Condition(function UVD)
set VA9=WS7()
call GroupEnumUnitsInRange(VA9,0,0,$F423F,JJD)
if IH7!=null then
set ZU9=GetUnitLoc(IH7)
else
set ZU9=GetSpellTargetLoc()
endif
set D8=FirstOfGroup(VA9)
if D8!=null then
set UBD=true
call GroupRemoveUnit(VA9,D8)
set F8=YO7(D8,ZU9)
set Z9=ZU9
call ForGroup(VA9,function UWD)
set IH7=D8
set x=GetUnitX(IH7)
set y=GetUnitY(IH7)
endif
call WR7(VA9)
call DestroyBoolExpr(JJD)
call RemoveLocation(ZU9)
endif
if UBD then
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\ToonBoom\\ToonBoom.mdl",AQ9,AR9))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\ToonBoom\\ToonBoom.mdl",x,y))
call SetUnitX(p5,x)
call SetUnitY(p5,y)
set F8=60+GetUnitAbilityLevel(GetTriggerUnit(),(1093684792))*20
set JJD=Condition(function UYD)
set VA9=WS7()
call GroupEnumUnitsInRange(VA9,AQ9,AR9,400,JJD)
call ForGroup(VA9,function UZD)
call WR7(VA9)
set VA9=WS7()
call GroupEnumUnitsInRange(VA9,x,y,400,JJD)
call ForGroup(VA9,function UZD)
call WR7(VA9)
call DestroyBoolExpr(JJD)
endif
call DestroyBoolExpr(JJD)
set p5=null
set IH7=null
set ZU9=null
set VA9=null
set JJD=null
endfunction
function yj takes nothing returns nothing
call SetUnitAnimationByIndex(O77(GetHandleId(GetExpiredTimer()),"UnitVar"),2)
endfunction
function UCD takes nothing returns nothing
local timer t=CreateTimer()
call SetUnitAnimationByIndex(GetTriggerUnit(),2)
call NT7(GetHandleId(t),"UnitVar",GetTriggerUnit())
call TimerStart(t,1,false,function yj)
set t=null
endfunction
function K98 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_CHANNEL)
call TriggerAddCondition(t,Condition(function UUD))
call TriggerAddAction(t,function UCD)
set t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function UUD))
call TriggerAddAction(t,function UAD)
set t=null
endfunction
function U3D takes nothing returns boolean
return GetSpellAbilityId()==1093684802
endfunction
function U6D takes nothing returns boolean
return(WF7(GetFilterUnit())==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(D8))and(AK7(GetFilterUnit())==false or IsUnitVisible(GetFilterUnit(),GetOwningPlayer(D8)))and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>.5 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitTypeId(GetFilterUnit())!=1848651852)!=null
endfunction
function ULD takes nothing returns nothing
local unit oA=CreateUnit(GetOwningPlayer(GetEnumUnit()),1697656901,F8,A9,0)
call XF7(oA,1093684803)
call IssueTargetOrderById(oA,$D008A,GetEnumUnit())
set oA=null
endfunction
function U1D takes unit IJ,real x,real y returns nothing
local boolexpr hP=Condition(function U6D)
local group LQ7=WS7()
set D8=IJ
call GroupEnumUnitsInRange(LQ7,x,y,$145,hP)
set F8=x
set A9=y
call ForGroup(LQ7,function ULD)
call WR7(LQ7)
call DestroyBoolExpr(hP)
set hP=null
set LQ7=null
endfunction
function U0D takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer OB7=GetHandleId(t)
local unit IJ=O77(OB7,"Projectile")
local real hN=ON7(OB7,"TargetX")
local real ho=ON7(OB7,"TargetY")
local real RK=ON7(OB7,"Angle")
local real iN=GetUnitX(IJ)
local real io=GetUnitY(IJ)
local real Il=GetUnitX(IJ)+40*Cos(RK)
local real IL=GetUnitY(IJ)+40*Sin(RK)
if(Il-hN)*(Il-hN)+(IL-ho)*(IL-ho)<$4E2 then
call SetUnitX(IJ,hN)
call SetUnitY(IJ,ho)
call U1D(IJ,hN,ho)
call PauseTimer(t)
call NM7(OB7)
call KillUnit(IJ)
call DestroyTimer(t)
else
call SetUnitX(IJ,Il)
call SetUnitY(IJ,IL)
endif
set t=null
set IJ=null
endfunction
function U5D takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local location sy=GetSpellTargetLoc()
local real hN=X17(GetLocationX(sy))
local real ho=X07(GetLocationY(sy))
local real iN=X17(GetUnitX(WI7))
local real io=X07(GetUnitY(WI7))
local unit IJ=CreateUnit(GetOwningPlayer(WI7),1747988547,iN,io,0)
local real RK=Atan2(ho-io,hN-iN)
local timer t=CreateTimer()
local integer OB7=GetHandleId(t)
call SetUnitScale(IJ,2,2,2)
call NT7(OB7,"Projectile",IJ)
call NQ7(OB7,"TargetX",hN)
call NQ7(OB7,"TargetY",ho)
call NQ7(OB7,"Angle",RK)
call TimerStart(t,.035,true,function U0D)
call RemoveLocation(sy)
set sy=null
set IJ=null
set WI7=null
set t=null
endfunction
function KD8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function U3D))
call TriggerAddAction(t,function U5D)
set t=null
endfunction
function U2D takes unit u returns boolean
return GetUnitTypeId(u)==1211117641 or GetUnitTypeId(u)==1211117642
endfunction
function U_D takes unit I_7 returns boolean
return GetUnitTypeId(I_7)==1211117641 or GetUnitTypeId(I_7)==1211117642
endfunction
function DoubleTrouble_IsKoboldCondition takes nothing returns boolean
return GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(D8)and GetFilterUnit()!=D8 and(GetUnitTypeId(GetFilterUnit())==1211117641 or GetUnitTypeId(GetFilterUnit())==1211117642)
endfunction
function DoubleTrouble_UnshareXPCondition takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(D8))and U_D(GetFilterUnit())==false)!=null
endfunction
function DoubleTrouble_UnshareXPGive takes nothing returns nothing
call AddHeroXP(GetEnumUnit(),E8,true)
endfunction
function V4D takes nothing returns nothing
local integer yp=GetHandleId(GetTriggeringTrigger())
local player j8=O97(yp,"PlayerVar")
local integer yP=GetHandleId(j8)
local unit DZ8=O77(yP,"Kobold0")
local unit DA8=O77(yP,"Kobold1")
local unit DB8=O77(yP,"Kobold2")
local unit DC8=O77(yP,"Kobold3")
local unit D38=O77(yP,"Kobold4")
local integer V7D=GetUnitAbilityLevel(DZ8,1096904043)*2
local integer V8D=GetHeroAgi(DZ8,false)
local integer V9D=GetHeroAgi(DZ8,true)-V8D-V7D
local integer VDD=GetHeroStr(DZ8,false)
local integer VED=GetHeroStr(DZ8,true)-VDD-V7D
local integer VFD=GetHeroInt(DZ8,false)
local integer VGD=GetHeroInt(DZ8,true)-VFD-V7D
local real VHD=.3
local integer VID
local integer VJD
local integer VKD
if A94 then
set VHD=1.
endif
set VID=R2I(V8D+V9D*VHD)
set VJD=R2I(VDD+VED*VHD)
set VKD=R2I(VFD+VGD*VHD)
if GetUnitState(DZ8,UNIT_STATE_LIFE)>1 then
if DA8!=null then
call SetHeroAgi(DA8,VID,false)
call SetHeroStr(DA8,VJD,false)
call SetHeroInt(DA8,VKD,false)
endif
if DB8!=null then
call SetHeroAgi(DB8,VID,false)
call SetHeroStr(DB8,VJD,false)
call SetHeroInt(DB8,VKD,false)
endif
if DC8!=null then
call SetHeroAgi(DC8,VID,false)
call SetHeroStr(DC8,VJD,false)
call SetHeroInt(DC8,VKD,false)
endif
if D38!=null then
call SetHeroAgi(D38,VID,false)
call SetHeroStr(D38,VJD,false)
call SetHeroInt(D38,VKD,false)
endif
endif
set j8=null
set DZ8=null
set DA8=null
set DB8=null
set DC8=null
endfunction
function VMD takes nothing returns nothing
local integer VND=GetHandleId(GetTriggeringTrigger())
local player JID=O97(VND,"PlayerVar")
local integer VOD=GetHandleId(JID)
local unit DZ8=O77(VOD,"Kobold0")
local unit DA8=O77(VOD,"Kobold1")
local unit DB8=O77(VOD,"Kobold2")
local unit DC8=O77(VOD,"Kobold3")
local unit D38=O77(VOD,"Kobold4")
local integer VPD=GetHandleId(DZ8)
local integer VQD=GetHandleId(DA8)
local integer VRD=GetHandleId(DB8)
local integer VSD=GetHandleId(DC8)
local integer VTD=GetHandleId(D38)
local integer VUD=OM7(VPD,"XPEarned")
local integer VVD=OM7(VPD,"XPGiven")
local integer VWD=OM7(VQD,"XPEarned")
local integer VXD=OM7(VQD,"XPGiven")
local integer VYD=OM7(VRD,"XPEarned")
local integer VZD=OM7(VRD,"XPGiven")
local integer VAD=OM7(VSD,"XPEarned")
local integer VBD=OM7(VSD,"XPGiven")
local integer VCD=OM7(VTD,"XPEarned")
local integer V3D=OM7(VTD,"XPGiven")
local integer V6D=GetHeroXP(DZ8)
local integer VLD=GetHeroXP(DA8)
local integer V1D=GetHeroXP(DB8)
local integer V0D=GetHeroXP(DC8)
local integer V5D=GetHeroXP(D38)
local integer V2D=V6D-VUD-VVD
local integer V_D=VLD-VWD-VXD
local integer W4D=V1D-VYD-VZD
local integer W7D=V0D-VAD-VBD
local integer W8D=V5D-VCD-V3D
if GetUnitState(DZ8,UNIT_STATE_LIFE)>1 then
set VUD=VUD+V2D
set VWD=VWD+V_D
set VYD=VYD+W4D
set VAD=VAD+W7D
set VCD=VCD+W8D
if DZ8!=null then
call AddHeroXP(DA8,V2D,false)
if GetHeroXP(DA8)!=VLD then
set VXD=VXD+V2D
endif
call AddHeroXP(DB8,V2D,false)
if GetHeroXP(DB8)!=V1D then
set VZD=VZD+V2D
endif
call AddHeroXP(DC8,V2D,false)
if GetHeroXP(DC8)!=V0D then
set VBD=VBD+V2D
endif
call AddHeroXP(D38,V2D,false)
if GetHeroXP(D38)!=V5D then
set V3D=V3D+V2D
endif
endif
if DA8!=null then
call AddHeroXP(DZ8,V_D,false)
if GetHeroXP(DZ8)!=V6D then
set VVD=VVD+V_D
endif
call AddHeroXP(DB8,V_D,false)
if GetHeroXP(DB8)!=V1D then
set VZD=VZD+V_D
endif
call AddHeroXP(DC8,V_D,false)
if GetHeroXP(DC8)!=V0D then
set VBD=VBD+V_D
endif
call AddHeroXP(D38,V_D,false)
if GetHeroXP(D38)!=V5D then
set V3D=V3D+V_D
endif
endif
if DB8!=null then
call AddHeroXP(DA8,W4D,false)
if GetHeroXP(DA8)!=VLD then
set VXD=VXD+W4D
endif
call AddHeroXP(DZ8,W4D,false)
if GetHeroXP(DZ8)!=V6D then
set VVD=VVD+W4D
endif
call AddHeroXP(DC8,W4D,false)
if GetHeroXP(DC8)!=V0D then
set VBD=VBD+W4D
endif
call AddHeroXP(D38,W4D,false)
if GetHeroXP(D38)!=V5D then
set V3D=V3D+W4D
endif
endif
if DC8!=null then
call AddHeroXP(DA8,W7D,false)
if GetHeroXP(DA8)!=VLD then
set VXD=VXD+W7D
endif
call AddHeroXP(DB8,W7D,false)
if GetHeroXP(DB8)!=V1D then
set VZD=VZD+W7D
endif
call AddHeroXP(DZ8,W7D,false)
if GetHeroXP(DZ8)!=V6D then
set VVD=VVD+W7D
endif
call AddHeroXP(D38,W7D,false)
if GetHeroXP(D38)!=V5D then
set V3D=V3D+W7D
endif
endif
if D38!=null then
call AddHeroXP(DA8,W8D,false)
if GetHeroXP(DA8)!=VLD then
set VXD=VXD+W8D
endif
call AddHeroXP(DB8,W8D,false)
if GetHeroXP(DB8)!=V1D then
set VZD=VZD+W8D
endif
call AddHeroXP(DZ8,W8D,false)
if GetHeroXP(DZ8)!=V6D then
set VVD=VVD+W8D
endif
call AddHeroXP(DC8,W8D,false)
if GetHeroXP(DC8)!=V0D then
set VBD=VBD+W8D
endif
endif
call NP7(VPD,"XPEarned",VUD)
call NP7(VPD,"XPGiven",VVD)
call NP7(VQD,"XPEarned",VWD)
call NP7(VQD,"XPGiven",VXD)
call NP7(VRD,"XPEarned",VYD)
call NP7(VRD,"XPGiven",VZD)
call NP7(VSD,"XPEarned",VAD)
call NP7(VSD,"XPGiven",VBD)
call NP7(VTD,"XPEarned",VCD)
call NP7(VTD,"XPGiven",V3D)
endif
set JID=null
set DZ8=null
set DA8=null
set DB8=null
set DC8=null
endfunction
function W9D takes nothing returns boolean
return U_D(GetTriggerUnit())and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function WDD takes nothing returns nothing
local unit VE8=GetTriggerUnit()
local integer OB7=GetHandleId(GetOwningPlayer(VE8))
local unit DZ8=O77(OB7,"Kobold0")
local unit DA8=O77(OB7,"Kobold1")
local unit DB8=O77(OB7,"Kobold2")
local unit DC8=O77(OB7,"Kobold3")
local unit D38=O77(OB7,"Kobold4")
local boolean XFv=false
call DisableTrigger(ES)
if DZ8!=null and DZ8!=VE8 then
call KillUnit(DZ8)
endif
if DA8!=null and DA8!=VE8 then
call KillUnit(DA8)
endif
if DB8!=null and DB8!=VE8 then
call KillUnit(DB8)
endif
if DC8!=null and DC8!=VE8 then
call KillUnit(DC8)
endif
if D38!=null and D38!=VE8 then
call KillUnit(D38)
endif
call EnableTrigger(ES)
set VE8=null
set DZ8=null
set DA8=null
set DB8=null
set DC8=null
set D38=null
endfunction
function WED takes nothing returns boolean
return U_D(GetTriggerUnit())and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function WFD takes unit RB7,unit WX7 returns nothing
local trigger t=OE7(GetHandleId(GetOwningPlayer(WX7)),"Kobold|ItemTrigger")
local integer i=0
local boolean WGD=false
local boolean WHD=false
local boolean WHHD=false
local boolean WHH0=false
local boolean WID=false
local boolean WJD=false
local boolean WKD=false
local boolean WMD=false
local boolean WND=false
local boolean WOD=false
local boolean WPD=false
call DisableTrigger(t)
call DisableTrigger(H94)
loop
exitwhen i>5
if GetItemTypeId(UnitItemInSlot(WX7,i))==ZU[FV]then
set WGD=true
endif
if GetItemTypeId(UnitItemInSlot(WX7,i))==ZU[F6]then
set WHD=true
endif
if GetItemTypeId(UnitItemInSlot(WX7,i))==ZU[FF6]then
set WHHD=true
endif
if GetItemTypeId(UnitItemInSlot(WX7,i))==ZU[R06]then
set WHH0=true
endif
if GetItemTypeId(UnitItemInSlot(WX7,i))==ZU[N6]then
set WID=true
endif
if GetItemTypeId(UnitItemInSlot(WX7,i))==ZU[H6]then
set WJD=true
endif
if GetItemTypeId(UnitItemInSlot(WX7,i))==ZU[G6]then
set WKD=true
endif
if GetItemTypeId(UnitItemInSlot(WX7,i))==ZU[DS4]then
set WMD=true
endif
if GetItemTypeId(UnitItemInSlot(WX7,i))==ZU[F74]then
set WND=true
endif
if GetItemTypeId(UnitItemInSlot(WX7,i))==(ZU[LB])then
set WOD=true
endif
if GetItemTypeId(UnitItemInSlot(WX7,i))==(ZU[EC])then
set WPD=true
endif
set i=i+1
endloop
if WPD then
call UnitAddItem(RB7,CreateItem((ZU[EC]),0,0))
elseif WOD then
call UnitAddItem(RB7,CreateItem((ZU[LB]),0,0))
elseif WND then
call UnitAddItem(RB7,CreateItem(ZU[F74],0,0))
elseif WMD then
call UnitAddItem(RB7,CreateItem(ZU[DS4],0,0))
elseif WKD then
call UnitAddItem(RB7,CreateItem(ZU[G6],0,0))
elseif WJD then
call UnitAddItem(RB7,CreateItem(ZU[H6],0,0))
elseif WID then
call UnitAddItem(RB7,CreateItem(ZU[N6],0,0))
elseif WHD then
call UnitAddItem(RB7,CreateItem(ZU[F6],0,0))
elseif WHHD then
call UnitAddItem(RB7,CreateItem(ZU[FF6],0,0))
elseif WHH0 then
call UnitAddItem(RB7,CreateItem(ZU[R06],0,0))
elseif WGD then
call UnitAddItem(RB7,CreateItem(ZU[FV],0,0))
endif
call EnableTrigger(t)
call EnableTrigger(H94)
set t=null
endfunction
function WQD takes nothing returns nothing
local unit D68=GetTriggerUnit()
local integer i=0
local boolean WGD=false
local boolean WHD=false
local boolean WHHD=false
local boolean WHH0=false
local boolean WID=false
local boolean WJD=false
local boolean WKD=false
local boolean WMD=false
local boolean WND=false
local boolean WOD=false
local boolean WPD=false
local integer VOD=GetHandleId(GetOwningPlayer(D68))
local unit DZ8=O77(VOD,"Kobold0")
local unit DA8=O77(VOD,"Kobold1")
local unit DB8=O77(VOD,"Kobold2")
local unit DC8=O77(VOD,"Kobold3")
local unit D38=O77(VOD,"Kobold4")
local integer WRD
local boolean WSD=false
local integer WTD=0
local integer WUD=0
local integer WUUD=0
local integer WUU0=0
local integer WVD=0
local integer WWD=0
local integer WXD=0
local integer WYD=0
local integer WZD=0
local integer WAD=0
local integer WBD=0
call DisableTrigger(GetTriggeringTrigger())
if GetUnitTypeId(D68)==1211117642 then
call UnitRemoveItemFromSlot(D68,0)
call EnableTrigger(GetTriggeringTrigger())
return
endif
if not(GetItemTypeId(GetManipulatedItem())==ZU[FV]or GetItemTypeId(GetManipulatedItem())==ZU[F6]or GetItemTypeId(GetManipulatedItem())==ZU[FF6]or GetItemTypeId(GetManipulatedItem())==ZU[R06]or GetItemTypeId(GetManipulatedItem())==ZU[N6]or GetItemTypeId(GetManipulatedItem())==ZU[H6]or GetItemTypeId(GetManipulatedItem())==ZU[G6]or GetItemTypeId(GetManipulatedItem())==ZU[DS4]or GetItemTypeId(GetManipulatedItem())==ZU[F74]or GetItemTypeId(GetManipulatedItem())==(ZU[LB])or GetItemTypeId(GetManipulatedItem())==(ZU[EC]))then
call EnableTrigger(GetTriggeringTrigger())
return
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_DROP_ITEM then
set WSD=true
endif
loop
exitwhen i>5
set WRD=GetItemTypeId(UnitItemInSlot(D68,i))
if WRD==ZU[FV]then
set WTD=WTD+1
if(not(WSD and WRD==GetItemTypeId(GetManipulatedItem())))or(WTD>1 and WRD==GetItemTypeId(GetManipulatedItem()))then
set WGD=true
endif
endif
if WRD==ZU[F6]then
set WUD=WUD+1
if(not(WSD and WRD==GetItemTypeId(GetManipulatedItem())))or(WUD>1 and WRD==GetItemTypeId(GetManipulatedItem()))then
set WHD=true
endif
endif
if WRD==ZU[FF6]then
set WUUD=WUUD+1
if(not(WSD and WRD==GetItemTypeId(GetManipulatedItem())))or(WUUD>1 and WRD==GetItemTypeId(GetManipulatedItem()))then
set WHHD=true
endif
endif
if WRD==ZU[R06]then
set WUU0=WUU0+1
if(not(WSD and WRD==GetItemTypeId(GetManipulatedItem())))or(WUU0>1 and WRD==GetItemTypeId(GetManipulatedItem()))then
set WHH0=true
endif
endif
if WRD==ZU[N6]then
set WVD=WVD+1
if(not(WSD and WRD==GetItemTypeId(GetManipulatedItem())))or(WVD>1 and WRD==GetItemTypeId(GetManipulatedItem()))then
set WID=true
endif
endif
if WRD==ZU[H6]then
set WWD=WWD+1
if(not(WSD and WRD==GetItemTypeId(GetManipulatedItem())))or(WWD>1 and WRD==GetItemTypeId(GetManipulatedItem()))then
set WJD=true
endif
endif
if WRD==ZU[G6]then
set WXD=WXD+1
if(not(WSD and WRD==GetItemTypeId(GetManipulatedItem())))or(WXD>1 and WRD==GetItemTypeId(GetManipulatedItem()))then
set WKD=true
endif
endif
if WRD==ZU[DS4]then
set WYD=WYD+1
if(not(WSD and WRD==GetItemTypeId(GetManipulatedItem())))or(WYD>1 and WRD==GetItemTypeId(GetManipulatedItem()))then
set WMD=true
endif
endif
if WRD==(ZU[F74])then
set WZD=WZD+1
if(not(WSD and WRD==GetItemTypeId(GetManipulatedItem())))or(WZD>1 and WRD==GetItemTypeId(GetManipulatedItem()))then
set WND=true
endif
endif
if WRD==(ZU[LB])then
set WAD=WAD+1
if(not(WSD and WRD==GetItemTypeId(GetManipulatedItem())))or(WAD>1 and WRD==GetItemTypeId(GetManipulatedItem()))then
set WOD=true
endif
endif
if WRD==(ZU[EC])then
set WBD=WBD+1
if(not(WSD and WRD==GetItemTypeId(GetManipulatedItem())))or(WBD>1 and WRD==GetItemTypeId(GetManipulatedItem()))then
set WPD=true
endif
endif
set i=i+1
endloop
call RemoveItem(UnitRemoveItemFromSlot(DA8,0))
if DB8!=null then
call RemoveItem(UnitRemoveItemFromSlot(DB8,0))
endif
if DC8!=null then
call RemoveItem(UnitRemoveItemFromSlot(DC8,0))
endif
if D38!=null then
call RemoveItem(UnitRemoveItemFromSlot(D38,0))
endif
if WPD then
call UnitAddItem(DA8,CreateItem((ZU[EC]),0,0))
if DB8!=null then
call UnitAddItem(DB8,CreateItem((ZU[EC]),0,0))
endif
if DC8!=null then
call UnitAddItem(DC8,CreateItem((ZU[EC]),0,0))
endif
if D38!=null then
call UnitAddItem(D38,CreateItem((ZU[EC]),0,0))
endif
elseif WOD then
call UnitAddItem(DA8,CreateItem((ZU[LB]),0,0))
if DB8!=null then
call UnitAddItem(DB8,CreateItem((ZU[LB]),0,0))
endif
if DC8!=null then
call UnitAddItem(DC8,CreateItem((ZU[LB]),0,0))
endif
if D38!=null then
call UnitAddItem(D38,CreateItem((ZU[LB]),0,0))
endif
elseif WND then
call UnitAddItem(DA8,CreateItem((ZU[F74]),0,0))
if DB8!=null then
call UnitAddItem(DB8,CreateItem((ZU[F74]),0,0))
endif
if DC8!=null then
call UnitAddItem(DC8,CreateItem((ZU[F74]),0,0))
endif
if D38!=null then
call UnitAddItem(D38,CreateItem((ZU[F74]),0,0))
endif
elseif WMD then
call UnitAddItem(DA8,CreateItem(ZU[DS4],0,0))
if DB8!=null then
call UnitAddItem(DB8,CreateItem(ZU[DS4],0,0))
endif
if DC8!=null then
call UnitAddItem(DC8,CreateItem(ZU[DS4],0,0))
endif
if D38!=null then
call UnitAddItem(D38,CreateItem((ZU[DS4]),0,0))
endif
elseif WKD then
call UnitAddItem(DA8,CreateItem(ZU[G6],0,0))
if DB8!=null then
call UnitAddItem(DB8,CreateItem(ZU[G6],0,0))
endif
if DC8!=null then
call UnitAddItem(DC8,CreateItem(ZU[G6],0,0))
endif
if D38!=null then
call UnitAddItem(D38,CreateItem((ZU[G6]),0,0))
endif
elseif WJD then
call UnitAddItem(DA8,CreateItem(ZU[H6],0,0))
if DB8!=null then
call UnitAddItem(DB8,CreateItem(ZU[H6],0,0))
endif
if DC8!=null then
call UnitAddItem(DC8,CreateItem(ZU[H6],0,0))
endif
if D38!=null then
call UnitAddItem(D38,CreateItem((ZU[H6]),0,0))
endif
elseif WID then
call UnitAddItem(DA8,CreateItem(ZU[N6],0,0))
if DB8!=null then
call UnitAddItem(DB8,CreateItem(ZU[N6],0,0))
endif
if DC8!=null then
call UnitAddItem(DC8,CreateItem(ZU[N6],0,0))
endif
if D38!=null then
call UnitAddItem(D38,CreateItem((ZU[N6]),0,0))
endif
elseif WHD then
call UnitAddItem(DA8,CreateItem(ZU[F6],0,0))
if DB8!=null then
call UnitAddItem(DB8,CreateItem(ZU[F6],0,0))
endif
if DC8!=null then
call UnitAddItem(DC8,CreateItem(ZU[F6],0,0))
endif
if D38!=null then
call UnitAddItem(D38,CreateItem((ZU[F6]),0,0))
endif
elseif WHHD then
call UnitAddItem(DA8,CreateItem(ZU[FF6],0,0))
if DB8!=null then
call UnitAddItem(DB8,CreateItem(ZU[FF6],0,0))
endif
if DC8!=null then
call UnitAddItem(DC8,CreateItem(ZU[FF6],0,0))
endif
if D38!=null then
call UnitAddItem(D38,CreateItem((ZU[FF6]),0,0))
endif
elseif WHH0 then
call UnitAddItem(DA8,CreateItem(ZU[R06],0,0))
if DB8!=null then
call UnitAddItem(DB8,CreateItem(ZU[R06],0,0))
endif
if DC8!=null then
call UnitAddItem(DC8,CreateItem(ZU[R06],0,0))
endif
if D38!=null then
call UnitAddItem(D38,CreateItem((ZU[R06]),0,0))
endif
elseif WGD then
call UnitAddItem(DA8,CreateItem(ZU[FV],0,0))
if DB8!=null then
call UnitAddItem(DB8,CreateItem(ZU[FV],0,0))
endif
if DC8!=null then
call UnitAddItem(DC8,CreateItem(ZU[FV],0,0))
endif
if D38!=null then
call UnitAddItem(D38,CreateItem((ZU[FV]),0,0))
endif
endif
call EnableTrigger(GetTriggeringTrigger())
set D68=null
set DZ8=null
set DA8=null
set DB8=null
set DC8=null
endfunction
function WCD takes unit W3D,integer W6D returns nothing
local integer yP=GetHandleId(GetOwningPlayer(W3D))
local unit DZ8=O77(yP,"Kobold0")
local unit DA8=O77(yP,"Kobold1")
local unit DB8=O77(yP,"Kobold2")
local unit DC8=O77(yP,"Kobold3")
local unit D38=O77(yP,"Kobold4")
if DZ8!=null and DZ8!=W3D then
call SelectHeroSkill(DZ8,W6D)
endif
if DA8!=null and DA8!=W3D then
call SelectHeroSkill(DA8,W6D)
endif
if DB8!=null and DB8!=W3D then
call SelectHeroSkill(DB8,W6D)
endif
if DC8!=null and DC8!=W3D then
call SelectHeroSkill(DC8,W6D)
endif
if D38!=null and D38!=W3D then
call SelectHeroSkill(D38,W6D)
endif
set DZ8=null
set DA8=null
set DB8=null
set DC8=null
set D38=null
endfunction
function WLD takes integer N7,unit qf,unit qF returns nothing
local integer T8=1
local integer U8=GetUnitAbilityLevel(qf,N7)
loop
exitwhen T8>U8
call SelectHeroSkill(qF,N7)
set T8=T8+1
endloop
endfunction
function W1D takes unit RB7,unit W0D returns nothing
call AddHeroXP(RB7,GetHeroXP(W0D),false)
call NP7(GetHandleId(RB7),"XPGiven",GetHeroXP(W0D))
call NP7(GetHandleId(RB7),"XPEarned",0)
call WLD(1093684792,W0D,RB7)
call WLD(1093684802,W0D,RB7)
call WLD(1093684791,W0D,RB7)
call WLD(1096904043,W0D,RB7)
call WLD(1093684567,W0D,RB7)
call WLD(1093809987,W0D,RB7)
endfunction
function W5D takes unit DA8,unit DB8,integer YJ,integer Yg,integer YG returns nothing
if Yg>YG then
call SelectHeroSkill(DB8,YJ)
elseif YG>Yg then
call SelectHeroSkill(DA8,YJ)
endif
endfunction
function W2D takes unit DA8,unit DB8 returns nothing
local integer y8=GetHeroXP(DA8)
local integer y9=GetHeroXP(DB8)
local integer yW=GetHandleId(DA8)
local integer yx=GetHandleId(DB8)
local integer yZ=OM7(yW,"XPGiven")
local integer y4=OM7(yx,"XPGiven")
local integer VX
if y8>y9 then
set VX=y8-y9
call AddHeroXP(DB8,VX,true)
if y9!=GetHeroXP(DB8)then
call NP7(yx,"XPGiven",y4+VX)
endif
elseif y8<y9 then
set VX=y9-y8
call AddHeroXP(DA8,VX,true)
if y8!=GetHeroXP(DA8)then
call NP7(yW,"XPGiven",yZ+VX)
endif
endif
endfunction
function W_D takes unit DA8,unit DB8 returns nothing
local integer X4D=GetUnitAbilityLevel(DA8,1093684792)
local integer X7D=GetUnitAbilityLevel(DA8,1093684802)
local integer X8D=GetUnitAbilityLevel(DA8,1093684791)
local integer X9D=GetUnitAbilityLevel(DA8,1093684567)
local integer XDD=GetUnitAbilityLevel(DA8,1096904043)
local integer XED=GetUnitAbilityLevel(DA8,1093809987)
local integer XFD=GetUnitAbilityLevel(DB8,1093684792)
local integer XGD=GetUnitAbilityLevel(DB8,1093684802)
local integer XHD=GetUnitAbilityLevel(DB8,1093684791)
local integer XID=GetUnitAbilityLevel(DB8,1093684567)
local integer XJD=GetUnitAbilityLevel(DB8,1096904043)
local integer XKD=GetUnitAbilityLevel(DB8,1093809987)
call W2D(DA8,DB8)
call W5D(DA8,DB8,1093684792,X4D,XFD)
call W5D(DA8,DB8,1093684802,X7D,XGD)
call W5D(DA8,DB8,1093684791,X8D,XHD)
call W5D(DA8,DB8,1093684567,X9D,XID)
call W5D(DA8,DB8,1093809987,XED,XKD)
call W5D(DA8,DB8,1096904043,XDD,XJD)
endfunction
function XMD takes unit DA8,unit DB8 returns nothing
if DA8!=null and DB8!=null then
call W_D(DA8,DB8)
endif
endfunction
function XND takes nothing returns nothing
local integer VOD=GetHandleId(O97(GetHandleId(GetTriggeringTrigger()),"PlayerVar"))
local unit DZ8=O77(VOD,"Kobold0")
local unit DA8=O77(VOD,"Kobold1")
local unit DB8=O77(VOD,"Kobold2")
local unit DC8=O77(VOD,"Kobold3")
local unit D38=O77(VOD,"Kobold4")
call DisableTrigger(PR4)
call XMD(DZ8,DA8)
call XMD(DZ8,DB8)
call XMD(DZ8,DC8)
call XMD(DZ8,D38)
call XMD(DA8,DB8)
call XMD(DA8,DC8)
call XMD(DA8,D38)
call XMD(DB8,DC8)
call XMD(DB8,D38)
call XMD(DC8,D38)
call EnableTrigger(PR4)
set DZ8=null
set DA8=null
set DB8=null
set DC8=null
set D38=null
endfunction
function XOD takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.2,true)
call TriggerAddAction(t,function XND)
call NZ7(GetHandleId(t),"PlayerVar",GetOwningPlayer(GetTriggerUnit()))
set t=null
endfunction
function XPD takes unit ZX7 returns nothing
local trigger t
call NT7(GetHandleId(GetOwningPlayer(ZX7)),"Kobold0",ZX7)
call NP7(GetHandleId(ZX7),"XPEarned",GetHeroXP(ZX7))
call NP7(GetHandleId(ZX7),"XPGiven",0)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddAction(t,function VMD)
call NZ7(GetHandleId(t),"PlayerVar",GetOwningPlayer(ZX7))
call NV7(GetHandleId(GetOwningPlayer(ZX7)),"Kobold|XPTrigger",t)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.3,true)
call TriggerAddAction(t,function V4D)
call NZ7(GetHandleId(t),"PlayerVar",GetOwningPlayer(ZX7))
call NV7(GetHandleId(GetOwningPlayer(ZX7)),"Kobold|AttributesTrigger",t)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(t,function WDD)
call TriggerAddCondition(t,Condition(function W9D))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call YB7(t,EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddAction(t,function WQD)
call TriggerAddCondition(t,Condition(function WED))
call NV7(GetHandleId(GetOwningPlayer(ZX7)),"Kobold|ItemTrigger",t)
call ExecuteFunc("XOD")
set t=null
endfunction
function XQD takes unit ZX7,boolean XRD returns nothing
local player JID=GetOwningPlayer(ZX7)
local integer I97=GetHandleId(JID)
local unit RB7
set A84=A84+1
if A84==1 then
call XPD(ZX7)
endif
call TriggerExecute(OE7(GetHandleId(GetOwningPlayer(ZX7)),"Kobold|XPTrigger"))
call TriggerExecute(OE7(GetHandleId(GetOwningPlayer(ZX7)),"Kobold|AttributesTrigger"))
if XRD==false then
call WCD(ZX7,1093684567)
call WCD(ZX7,1093809987)
endif
set RB7=CreateUnit(GetOwningPlayer(ZX7),1211117642,GetUnitX(ZX7),GetUnitY(ZX7),0)
call W1D(RB7,ZX7)
call WFD(RB7,ZX7)
call NT7(I97,"Kobold"+I2S(A84),RB7)
set RB7=null
endfunction
function XSD takes nothing returns nothing
if A94==false then
set A94=true
call DisableTrigger(PR4)
call XQD(IN4,true)
call EnableTrigger(PR4)
endif
endfunction
function XTD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
if IsUnitIllusion(GetTriggerUnit())==false and GetOwningPlayer(GetTriggerUnit())==GetOwningPlayer(ZX7)and U2D(GetTriggerUnit())then
if GetLearnedSkill()==1093684567 or GetLearnedSkill()==1093809987 then
call DisableTrigger(GetTriggeringTrigger())
call XQD(GetTriggerUnit(),false)
call EnableTrigger(GetTriggeringTrigger())
elseif GetLearnedSkill()==1096904043 or GetLearnedSkill()==1093684792 or GetLearnedSkill()==1093684802 or GetLearnedSkill()==1093684791 then
call TriggerExecute(OE7(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"Kobold|XPTrigger"))
call TriggerExecute(OE7(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"Kobold|AttributesTrigger"))
call DisableTrigger(GetTriggeringTrigger())
call WCD(GetTriggerUnit(),GetLearnedSkill())
call EnableTrigger(GetTriggeringTrigger())
endif
endif
set ZX7=null
return false
endfunction
function XUD takes nothing returns nothing
local unit ZX7=IN4
local integer I97
set A74=CreateTrigger()
set PR4=A74
set I97=GetHandleId(A74)
call YB7(A74,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(A74,Condition(function XTD))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set ZX7=null
endfunction
function Yu takes nothing returns boolean
return IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),'A04R')==0 and XH7(GetFilterUnit())==false and YU8(GetFilterUnit())==false)
endfunction
function YU takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=(LoadUnitHandle(L7,(OB7),($E)))
local integer V77=(LoadInteger(L7,(OB7),(5)))
local group g
local unit u
local real d
local real a
local real XVD
local real XWD
local unit BB7=(LoadUnitHandle(L7,(OB7),(19)))
if GetTriggerEvalCount(t)>40 then
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
else
set g=WS7()
set IN4=WI7
call GroupEnumUnitsInRange(g,GetUnitX(WI7),GetUnitY(WI7),500,Condition(function Yu))
set u=GroupPickRandomUnit(g)
if u==null then
set d=GetRandomReal($AF,400)
set a=GetRandomReal(0,6)
set XVD=GetUnitX(WI7)+d*Cos(a)
set XWD=GetUnitY(WI7)+d*Sin(a)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl",XVD,XWD))
else
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl",u,"origin"))
if IsUnitType(u,UNIT_TYPE_STRUCTURE)then
call B67(BB7,u,2,9*V77*1.4)
else
call B67(BB7,u,2,9*V77)
endif
endif
call WR7(g)
endif
set u=null
set g=null
set t=null
set WI7=null
set BB7=null
return false
endfunction
function Yv takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=GetTriggerUnit()
local unit u=CreateUnit(GetOwningPlayer(WI7),'e00E',GetUnitX(WI7),GetUnitY(WI7),0)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RocketMissile\\RocketMissile.mdl",WI7,"hand right"))
call SaveUnitHandle(L7,(OB7),($E),(WI7))
call SaveUnitHandle(L7,(OB7),(19),(u))
call SaveInteger(L7,(OB7),(5),(GetUnitAbilityLevel(WI7,'A035')))
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerAddCondition(t,Condition(function YU))
set t=null
set WI7=null
set u=null
endfunction
function R1U takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer I97=GetHandleId(t)
local unit WI7=LoadUnitHandle(L7,I97,0)
local integer BC7=LoadInteger(L7,I97,0)
local unit BB7=CreateUnit(GetOwningPlayer(WI7),'e00E',LoadReal(L7,I97,$A),LoadReal(L7,I97,$B),0)
call UnitAddAbility(BB7,'A2W0')
call SetUnitAbilityLevel(BB7,'A2W0',BC7)
call IssueImmediateOrderById(BB7,$D009F)
call Y67(LoadReal(L7,I97,$A),LoadReal(L7,I97,$B),$E1)
call FlushChildHashtable(L7,I97)
call DestroyTimer(t)
set BB7=null
set WI7=null
set t=null
endfunction
function R1V takes nothing returns nothing
local timer t=CreateTimer()
local integer I97=GetHandleId(t)
call TimerStart(t,.35,false,function R1U)
call SaveUnitHandle(L7,I97,0,GetTriggerUnit())
call SaveInteger(L7,I97,0,GetUnitAbilityLevel(GetTriggerUnit(),'A06W'))
call SaveReal(L7,I97,$A,GetSpellTargetX())
call SaveReal(L7,I97,$B,GetSpellTargetY())
set t=null
endfunction
function XXD takes nothing returns boolean
if GetSpellAbilityId()=='A035' then
call Yv()
endif
if GetSpellAbilityId()=='A06W' then
call R1V()
endif
return false
endfunction
function HT8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function XXD))
set t=null
endfunction
function XYD takes nothing returns nothing
local unit ZX7=Y84
local unit IH7=GetEnumUnit()
call B67(ZX7,IH7,1,Y94)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl",IH7,"origin"))
set ZX7=null
set IH7=null
endfunction
function XZD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit ZX7=O77(OB7,"Source")
local integer BC7=GetUnitAbilityLevel(ZX7,1093808454)
local group g
if BC7!=0 then
if BC7==1 then
set Y94=100
elseif BC7==2 then
set Y94=130
else
set Y94=160
endif
else
set BC7=GetUnitAbilityLevel(ZX7,1093808455)
if BC7==1 then
set Y94=160
elseif BC7==2 then
set Y94=190
else
set Y94=220
endif
endif
if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetUnitState(ZX7,UNIT_STATE_MANA)<(0+20*BC7) or(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==-1 or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and(GetSpellAbilityId()==1093808456 or GetSpellAbilityId()==1093809992))then
if(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==0 or(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==1093808454 then
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093808454,true)
endif
if(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==0 or(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==1093808455 then
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093808455,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093808456,false)
call NM7(OB7)
call OZ7(t)
call OX7(ZX7,"AI|PulseNova")
elseif GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT then
call SetUnitState(ZX7,UNIT_STATE_MANA,GetUnitState(ZX7,UNIT_STATE_MANA)-20*BC7)
set IN4=ZX7
set Y84=ZX7
set g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),475,Condition(function AJ7))
call ForGroup(g,function XYD)
call WR7(g)
set g=null
endif
set t=null
return false
endfunction
function XAD takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl",ZX7,"origin"))
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093808454,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093808455,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093808456,true)
call UnitAddAbility(ZX7,1093808456)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function XZD))
call NT7(OB7,"Source",ZX7)
call TriggerEvaluate(t)
call OV7(ZX7,"AI|PulseNova")
set ZX7=null
set t=null
endfunction
function Yy takes nothing returns boolean
if GetSpellAbilityId()==1093808454 or GetSpellAbilityId()==1093808455 then
call XAD()
endif
return false
endfunction
function HU8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Yy))
set t=null
endfunction
function XBD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local unit CJ9=(LoadUnitHandle(L7,(I97),(374)))
local integer BC7=(LoadInteger(L7,(I97),(5)))
local integer XCD=(LoadInteger(L7,(I97),($E9)))
local integer Z49=(LoadInteger(L7,(I97),($C)))
local unit BB7
local group g
local real a
local real x
local real y
local integer X3D=(LoadInteger(L7,(I97),(720)))
if X3D>0 then
set X3D=X3D-1
call SaveInteger(L7,(I97),(720),(X3D))
return false
endif
if KF7(GetUnitX(CJ9),GetUnitY(CJ9),GetUnitX(IH7),GetUnitY(IH7))>20 then
set a=J77(GetUnitX(CJ9),GetUnitY(CJ9),GetUnitX(IH7),GetUnitY(IH7))
call SetUnitFacing(CJ9,a)
set x=GetUnitX(CJ9)+17*Cos(a*bj_DEGTORAD)
set y=GetUnitY(CJ9)+17*Sin(a*bj_DEGTORAD)
call SetUnitX(CJ9,x)
call SetUnitY(CJ9,y)
else
if XH7(IH7)==false then
set BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
call XF7(BB7,1093679409)
call SetUnitAbilityLevel(BB7,1093679409,BC7)
call IssueTargetOrderById(BB7,$D0102,IH7)
endif
if XCD>Z49 then
call RemoveUnit(CJ9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
set g=WS7()
set IN4=ZX7
call GroupEnumUnitsInRange(g,GetUnitX(IH7),GetUnitY(IH7),600,Condition(function AX7))
call GroupRemoveUnit(g,IH7)
set IH7=GroupPickRandomUnit(g)
call WR7(g)
if IH7==null then
call RemoveUnit(CJ9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
call SaveInteger(L7,(I97),(720),($A))
call SaveInteger(L7,(I97),($E9),(XCD+1))
call SaveUnitHandle(L7,(I97),(17),(IH7))
endif
endif
endif
set t=null
set ZX7=null
set IH7=null
set CJ9=null
set BB7=null
set g=null
return false
endfunction
function X6D takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093678420)
local integer Z49=10
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit CJ9
if GetSpellAbilityId()==1093679176 then
set BC7=GetUnitAbilityLevel(ZX7,1093679176)+1
set Z49=50
endif
set CJ9=CreateUnit(GetOwningPlayer(ZX7),1697656889,GetUnitX(ZX7),GetUnitY(ZX7),0)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveUnitHandle(L7,(I97),(374),(CJ9))
call SaveInteger(L7,(I97),(5),(BC7))
call SaveInteger(L7,(I97),($E9),(1))
call SaveInteger(L7,(I97),($C),(Z49))
call SaveInteger(L7,(I97),(720),(0))
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function XBD))
set ZX7=null
set IH7=null
set CJ9=null
set t=null
endfunction
function XLD takes nothing returns boolean
if GetSpellAbilityId()==1093678420 or GetSpellAbilityId()==1093679176 then
call X6D()
endif
return false
endfunction
function HW8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function XLD))
set t=null
endfunction
function R2N takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit WI7=(LoadUnitHandle(L7,(I97),(17)))
local real ZV8=(LoadReal(L7,(GetHandleId(WI7)),(813)))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if GetTriggerEventId()==EVENT_WIDGET_DEATH or ZV8<(TimerGetElapsed(W))then
call UnitRemoveAbility(WI7,'A2WS')
call UnitRemoveAbility(WI7,'B0HG')
call UnitRemoveAbility(WI7,'A2WT')
call UnitRemoveAbility(WI7,'B0HH')
call UnitRemoveAbility(WI7,'A2WU')
endif
set t=null
set WI7=null
return false
endfunction
function R2O takes unit WI7 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local real ZV8=3.
local integer R2L='A2WT'
local integer R2M='B0HH'
if IsUnitType(WI7,UNIT_TYPE_HERO)then
set ZV8=2.
endif
if IsUnitType(WI7,UNIT_TYPE_MELEE_ATTACKER) then
set R2L='A2WS'
set R2M='B0HG'
endif
call XF7(WI7,R2L)
call XF7(WI7,R2M)
call XF7(WI7,'A2WU')
call TriggerRegisterDeathEvent(t,WI7)
call TriggerRegisterTimerEvent(t,ZV8,false)
call TriggerAddCondition(t,Condition(function R2N))
call SaveUnitHandle(L7,(I97),(17),(WI7))
call SaveReal(L7,(GetHandleId(WI7)),(813),(((TimerGetElapsed(W))+ZV8-.1)*1.))
set t=null
endfunction
function R2P takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit WI7=(LoadUnitHandle(L7,(I97),(2)))
local unit WX7=(LoadUnitHandle(L7,(I97),(17)))
local real ZV8=(LoadReal(L7,(GetHandleId(WX7)),(812)))
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if GetTriggerUnit()==WX7 then
call R2O(GetAttacker())
endif
elseif(TimerGetElapsed(W))>ZV8 then
call UnitRemoveAbility(WX7,'A2WR')
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set WI7=null
set WX7=null
return false
endfunction
function R2R takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit WX7=GetSpellTargetUnit()
local trigger t
local integer I97
local integer R2L=40
local integer R2M=GetUnitAbilityLevel(WI7,'A08R')
local real ZV8=(LoadReal(L7,(GetHandleId(WX7)),(812)))
call SaveReal(L7,(GetHandleId(WX7)),(812),(((TimerGetElapsed(W))+R2L)*1.))
call XF7(WX7,'A2WR')
call SetUnitAbilityLevel(WX7,'A2WR',R2M)
if ZV8<(TimerGetElapsed(W))then
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function R2P))
call SaveUnitHandle(L7,(I97),(2),(WI7))
call SaveUnitHandle(L7,(I97),(17),(WX7))
endif
set WI7=null
set WX7=null
set t=null
endfunction
function R2T takes nothing returns boolean
if GetSpellAbilityId()=='A08R' then
call R2R()
endif
return false
endfunction
function R2U takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function R2T))
set t=null
endfunction
function X1D takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer V77=GetUnitAbilityLevel(p5,1093679412)
local integer X0D=GetHeroLevel(m5)
local real VW9=GetUnitState(m5,UNIT_STATE_MAX_LIFE)*.2
if ModuloInteger(X0D,7-V77)==0 or X0D==25 then
call B67(p5,m5,1,VW9)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Demon\\DemonBoltImpact\\DemonBoltImpact.mdl",m5,"chest"))
endif
set p5=null
set m5=null
endfunction
function X5D takes nothing returns boolean
if GetSpellAbilityId()==1093679412 then
call X1D()
endif
return false
endfunction
function HX8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function X5D))
set t=null
endfunction
function X2D takes unit ZX7 returns nothing
call UnitRemoveAbility(ZX7,1093750609)
call UnitRemoveAbility(ZX7,1093750610)
call UnitRemoveAbility(ZX7,1093750611)
call UnitRemoveAbility(ZX7,1093750612)
call UnitRemoveAbility(ZX7,1093750613)
call UnitRemoveAbility(ZX7,1093750614)
call UnitRemoveAbility(ZX7,1093750615)
call UnitRemoveAbility(ZX7,1093750616)
call UnitRemoveAbility(ZX7,1093750617)
call UnitRemoveAbility(ZX7,1395667021)
call UnitRemoveAbility(ZX7,1093750618)
call UnitRemoveAbility(ZX7,1395667022)
call UnitRemoveAbility(ZX7,1093750832)
call UnitRemoveAbility(ZX7,1093750833)
call UnitRemoveAbility(ZX7,1093750839)
call UnitRemoveAbility(ZX7,1093750849)
call UnitRemoveAbility(ZX7,1093750835)
call UnitRemoveAbility(ZX7,1093750836)
call UnitRemoveAbility(ZX7,1093750837)
call UnitRemoveAbility(ZX7,1093750838)
call UnitRemoveAbility(ZX7,1093812551)
call UnitRemoveAbility(ZX7,1093817142)
call UnitRemoveAbility(ZX7,1093817143)
endfunction
function X_D takes unit ZX7,unit IH7 returns nothing
local integer Y4D=GetUnitTypeId(IH7)
local integer Y7D=0
local integer Y8D=0
if Y4D==1848658008 then
set Y7D=1093750609
elseif Y4D==1852796263 then
set Y7D=1093750610
elseif Y4D==1852207221 then
set Y7D=1395667022
set Y8D=1093750611
elseif Y4D==1853060204 then
set Y7D=1093750612
elseif Y4D==1853055348 then
set Y7D=1093750613
elseif Y4D==1853060200 then
set Y7D=1093750614
set Y8D=1093750615
elseif Y4D==1848651859 then
set Y7D=1093750616
set Y8D=1093750617
elseif Y4D==1852534636 then
set Y7D=1395667021
elseif Y4D==1852207976 then
set Y7D=1093750618
set Y8D=1093812551
elseif Y4D==1852010091 then
set Y7D=1093750832
elseif Y4D==1852272243 then
set Y7D=1093750833
elseif Y4D==1852270641 then
set Y7D=1093750839
set Y8D=1093750849
elseif Y4D==1852798821 then
set Y7D=1093750835
set Y8D=1093750836
elseif Y4D==1852077175 then
set Y7D=1093750837
set Y8D=1093750838
elseif Y4D==1853320295 then
set Y7D=1093750617
elseif Y4D=='n026' then
set Y7D='A2S6'
set Y8D='A2S7'
elseif Y4D=='nA00' then
set Y7D='A2S7'
endif
if Y7D!=0 then
call X2D(ZX7)
call XF7(ZX7,Y7D)
endif
if Y8D!=0 then
call XF7(ZX7,Y8D)
endif
endfunction
function Y9D takes real YDD returns string
local string c1="|c00ff0303"
local string c="||"
local string p=" "
local string s=c1+c+"|r"
local string YED
if YDD>85 then
set YED=s+p+s+p+s+p+s+p+s+p+s+p+s
elseif YDD>70 then
set YED=s+p+s+p+s+p+s+p+s+p+s+p+c
elseif YDD>55 then
set YED=s+p+s+p+s+p+s+p+s+p+c+p+c
elseif YDD>40 then
set YED=s+p+s+p+s+p+s+p+c+p+c+p+c
elseif YDD>25 then
set YED=s+p+s+p+s+p+c+p+c+p+c+p+c
elseif YDD>$A then
set YED=s+p+s+p+c+p+c+p+c+p+c+p+c
elseif YDD>0 then
set YED=s+p+c+p+c+p+c+p+c+p+c+p+c
else
set YED=c+p+c+p+c+p+c+p+c+p+c+p+c
endif
return YED
endfunction
function YFD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local integer V77=OM7(OB7,"Level")
local integer YGD=OM7(OB7,"TypeID")
local real HP=ON7(OB7,"HP")
local texttag tt=O87(OB7,"tt")
local integer iX=GetTriggerEvalCount(t)
local real YHD=YK7(HP-iX,0)
local boolean YID=true
call SetTextTagText(tt,Y9D(100*YHD/ HP),.018)
call SetTextTagPosUnit(tt,WI7,0)
if IsUnitVisible(WI7,GetLocalPlayer())==false and WG7(GetLocalPlayer())==false then
set YID=false
endif
call SetTextTagVisibility(tt,YID)
if YHD==0 then
call ZQ7(GetOwningPlayer(WI7),WI7,25*V77)
endif
if YHD==0 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),1093742674,true)
call UnitRemoveAbility(WI7,1093742675)
call NM7(OB7)
call OZ7(t)
call DestroyTextTag(tt)
endif
set t=null
set WI7=null
return false
endfunction
function YJD takes nothing returns nothing
local unit WX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local integer V77=GetUnitAbilityLevel(WX7,1093742674)
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local real HP=GetUnitState(IH7,UNIT_STATE_LIFE)
local integer YKD=GetUnitLevel(IH7)
local integer YGD=GetUnitTypeId(IH7)
local texttag tt=CreateTextTag()
local boolean YID=true
local unit BB7=CreateUnit(GetOwningPlayer(WX7),1697656901,0,0,0)
call YV7("SPLK",GetUnitX(WX7),GetUnitY(WX7),GetUnitX(IH7),GetUnitY(IH7),.1,.1,.2,.9,.5)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\Devour\\DevourEffectArt.mdl",GetUnitX(IH7),GetUnitY(IH7)))
if IsUnitVisible(WX7,GetLocalPlayer())==false then
set YID=false
endif
call X_D(WX7,IH7)
call SetTextTagText(tt,Y9D(100),.018)
call SetTextTagPosUnit(tt,WX7,0)
call SetTextTagVisibility(tt,YID)
call SetTextTagPermanent(tt,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(WX7),1093742674,false)
call XF7(WX7,1093742675)
call NT7(OB7,"Hero",WX7)
call N67(OB7,"tt",tt)
call NP7(OB7,"TypeID",YGD)
call NP7(OB7,"Level",V77)
call NQ7(OB7,"HP",HP)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterUnitEvent(t,WX7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function YFD))
call ShowUnit(IH7,false)
call UnitRemoveBuffs(IH7,true,true)
call UnitRemoveAbility(IH7,1097167980)
call UnitDamageTarget(BB7,IH7,100000000.,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set t=null
set WX7=null
set IH7=null
set BB7=null
endfunction
function YMD takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer V77=GetUnitAbilityLevel(WI7,1093742674)
local integer YKD=GetUnitLevel(m5)
if(GetOwningPlayer(m5)!=Z7[0]and GetOwningPlayer(m5)!=A7[0])and((V77==1 and YKD>2)or(V77==2 and YKD>4)or(V77==3 and YKD>5)or(V77==4 and YKD>6))then
endif
set WI7=null
set m5=null
endfunction
function YND takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local integer id=OM7(OB7,"Count")
call NM7(OB7)
call OZ7(t)
set t=null
set p5=null
return false
endfunction
function YOD takes nothing returns nothing
local integer id=GetSpellAbilityId()
local trigger t
local integer OB7
if id==1093750609 or id==1093750610 or id==1093750611 or id==1093750612 or id==1093750613 or id==1093750614 or id==1093750615 or id==1093750616 or id==1093750617 or id==1395667021 or id==1093750618 or id==1395667022 or id==1093750832 or id==1093750833 or id==1093750834 or id==1093750835 or id==1093750836 or id==1093750837 or id==1093750838 or id==1093817143 then
set t=CreateTrigger()
set OB7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,1,false)
call TriggerAddCondition(t,Condition(function YND))
call NT7(OB7,"Source",GetTriggerUnit())
call NP7(OB7,"Count",id)
set t=null
endif
endfunction
function YPD takes nothing returns boolean
if GetSpellAbilityId()==1093742674 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
call YMD()
else
call YJD()
endif
elseif GetUnitTypeId(GetTriggerUnit())==1430467634 then
call YOD()
endif
return false
endfunction
function HY8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function YPD))
set t=null
endfunction
function YQD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
call UnitRemoveAbility(p5,1093750604)
call UnitRemoveAbility(p5,1093750606)
call UnitRemoveAbility(p5,1093750607)
call UnitRemoveAbility(p5,1093750605)
call UnitRemoveAbility(p5,1110455370)
call NM7(OB7)
call OZ7(t)
set t=null
set p5=null
return false
endfunction
function YRD takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local integer BC7=GetUnitAbilityLevel(ZX7,1093750608)
if BC7==1 then
call XF7(ZX7,1093750604)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093750604,false)
elseif BC7==2 then
call XF7(ZX7,1093750606)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093750606,false)
elseif BC7==3 then
call XF7(ZX7,1093750607)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093750607,false)
elseif BC7==4 then
call XF7(ZX7,1093750605)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093750605,false)
endif
call TriggerRegisterTimerEvent(t,8+2*BC7,false)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function YQD))
call NT7(I97,"Source",ZX7)
set ZX7=null
set t=null
endfunction
function YSD takes nothing returns boolean
if GetSpellAbilityId()==1093750608 then
call YRD()
endif
return false
endfunction
function HZ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YSD))
set t=null
endfunction
function YBB takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit p5=(LoadUnitHandle(L7,(I97),(2)))
local unit m5=(LoadUnitHandle(L7,(I97),(17)))
local integer M4I=(LoadInteger(L7,(I97),(34)))
if Ma(p5,m5)>900 or XH7(p5)==true then
set M4I=M4I+1
call SaveInteger(L7,(I97),(34),(M4I))
endif
if M4I>16*10 then
call UnitRemoveAbility(m5,1112433775)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif GetUnitAbilityLevel(m5,1112433775)==0 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function YCC takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call UnitRemoveBuffs(m5,true,false)
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerAddCondition(t,Condition(function YBB))
call SaveUnitHandle(L7,(I97),(2),(p5))
call SaveUnitHandle(L7,(I97),(17),(m5))
call SaveInteger(L7,(I97),(34),(0))
set p5=null
set m5=null
set t=null
endfunction
function YDC takes nothing returns boolean
if GetSpellAbilityId()==1093681458 then
call YCC()
endif
return false
endfunction
function Y91 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YDC))
set t=null
endfunction
function YTD takes nothing returns boolean
local real x
local real y
if(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false and(GetUnitAbilityLevel((GetFilterUnit()),1113815395)>0)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))then
set x=A2+GetRandomReal(20,70)*Cos(GetUnitFacing(GetTriggerUnit())*bj_DEGTORAD)
set y=N2+GetRandomReal(20,70)*Sin(GetUnitFacing(GetTriggerUnit())*bj_DEGTORAD)
call SetUnitPosition(GetFilterUnit(),x,y)
endif
return false
endfunction
function YUD takes nothing returns nothing
local unit p5=GetTriggerUnit()
local real x=GetUnitX(p5)
local real y=GetUnitY(p5)
local group g=WS7()
local unit BB7=CreateUnit(GetOwningPlayer(p5),1697656901,x,y,0)
local integer BC7=GetUnitAbilityLevel(p5,1093810508)
set A2=GetUnitX(p5)+100*Cos(GetUnitFacing(p5)*bj_DEGTORAD)
set N2=GetUnitY(p5)+100*Sin(GetUnitFacing(p5)*bj_DEGTORAD)
call GroupEnumUnitsInRange(g,x,y,410+25,Condition(function YTD))
call WR7(g)
call XF7(BB7,1093678662)
call SetUnitAbilityLevel(BB7,1093678662,BC7)
call IssueImmediateOrderById(BB7,$D009F)
set p5=null
set g=null
endfunction
function YVD takes nothing returns boolean
if GetSpellAbilityId()==1093810508 then
call YUD()
endif
return false
endfunction
function HA8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YVD))
set t=null
endfunction
function YWD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V07=GetHandleId(t)
local unit ZZ9=(LoadUnitHandle(L7,(V07),(17)))
if GetUnitAbilityLevel(ZZ9,1110454357)==0 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitRemoveAbility(ZZ9,1093751088)
call UnitRemoveAbility(ZZ9,1093751089)
call UnitRemoveAbility(ZZ9,1093751090)
call UnitRemoveAbility(ZZ9,1093751091)
call FlushChildHashtable(L7,(V07))
call OZ7(t)
endif
set t=null
set ZZ9=null
return false
endfunction
function YXD takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V07=GetHandleId(t)
local unit Z69=GetTriggerUnit()
local unit ZZ9=GetSpellTargetUnit()
local integer KP7=GetUnitAbilityLevel(Z69,1093677879)
local integer YYD
if KP7==1 then
set YYD=1093751088
elseif KP7==2 then
set YYD=1093751089
elseif KP7==3 then
set YYD=1093751090
elseif KP7==4 then
set YYD=1093751091
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(ZZ9),YYD,false)
call XF7(ZZ9,YYD)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,ZZ9,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function YWD))
call SaveUnitHandle(L7,(V07),(17),(ZZ9))
set t=null
set Z69=null
set ZZ9=null
endfunction
function YZD takes nothing returns boolean
if GetSpellAbilityId()==1093677879 then
call YXD()
endif
return false
endfunction
function HB8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YZD))
set t=null
endfunction
function YAD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V07=GetHandleId(t)
local unit ZZ9=(LoadUnitHandle(L7,(V07),(17)))
call UnitRemoveAbility(ZZ9,1093751094)
call UnitRemoveAbility(ZZ9,1110459224)
call FlushChildHashtable(L7,(V07))
call OZ7(t)
set t=null
set ZZ9=null
return false
endfunction
function YBD takes unit Z69,unit ZZ9,integer KP7 returns nothing
local trigger t=CreateTrigger()
local integer V07=GetHandleId(t)
call SetUnitPathing(ZZ9,true)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerRegisterUnitEvent(t,ZZ9,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function YAD))
call SaveUnitHandle(L7,(V07),(17),(ZZ9))
call XF7(ZZ9,1093751094)
call UnitMakeAbilityPermanent(ZZ9,true,1093751094)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZZ9),1093751094,false)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl",ZZ9,"chest"))
call B67(Z69,ZZ9,1,40+60*KP7)
set t=null
endfunction
function YCD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V07=GetHandleId(t)
local unit Z69=(LoadUnitHandle(L7,(V07),(2)))
local unit Y3D=(LoadUnitHandle(L7,(V07),(393)))
local unit Y6D=(LoadUnitHandle(L7,(V07),(394)))
local unit YLD=(LoadUnitHandle(L7,(V07),(395)))
local unit Y1D=(LoadUnitHandle(L7,(V07),(396)))
local integer KP7=(LoadInteger(L7,(V07),(5)))
local real Y0D=(LoadReal(L7,(V07),(47)))
local real Y5D=(LoadReal(L7,(V07),(48)))
local real Y2D=(LoadReal(L7,(V07),($D)))
local real Y_D=(LoadReal(L7,(V07),(6)))
local real Z4D=(LoadReal(L7,(V07),(7)))
local real Z7D=X57(Y_D+19*Cos(Y2D))
local real Z8D=X27(Z4D+19*Sin(Y2D))
local group g
local integer Z9D=(LoadInteger(L7,(V07),($C)))
local location l
call SetUnitPosition(Z69,Z7D,Z8D)
call SetUnitFacing(Z69,Y2D*bj_RADTODEG)
call SaveReal(L7,(V07),(6),((Z7D)*1.))
call SaveReal(L7,(V07),(7),((Z8D)*1.))
if ModuloInteger(GetTriggerEvalCount(t),4)==0 then
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",Z7D,Z8D))
endif
if GetTriggerEvalCount(t)==2 then
call SetUnitAnimationByIndex(Z69,3)
endif
if Y3D==null or Y6D==null or YLD==null or Y1D==null then
set IN4=Z69
set g=WS7()
call GroupEnumUnitsInRange(g,Z7D,Z8D,150+25,Condition(function A37))
if FirstOfGroup(g)!=null then
if Y3D!=null then
call GroupRemoveUnit(g,Y3D)
endif
if Y6D!=null then
call GroupRemoveUnit(g,Y6D)
endif
if YLD!=null then
call GroupRemoveUnit(g,YLD)
endif
if FirstOfGroup(g)!=null then
if Y3D==null then
set Y3D=FirstOfGroup(g)
call SetUnitPathing(Y3D,false)
call O37(Y3D,"4404",5)
elseif Y6D==null and KP7>1 then
set Y6D=FirstOfGroup(g)
call SetUnitPathing(Y6D,false)
call O37(Y6D,"4404",5)
elseif YLD==null and KP7>2 then
set YLD=FirstOfGroup(g)
call SetUnitPathing(YLD,false)
call O37(YLD,"4404",5)
elseif Y1D==null and KP7>3 then
set Y1D=FirstOfGroup(g)
call SetUnitPathing(Y1D,false)
call O37(Y1D,"4404",5)
endif
endif
endif
call WR7(g)
set g=null
endif
call SaveUnitHandle(L7,(V07),(393),(Y3D))
call SaveUnitHandle(L7,(V07),(394),(Y6D))
call SaveUnitHandle(L7,(V07),(395),(YLD))
call SaveUnitHandle(L7,(V07),(396),(Y1D))
if Y3D!=null then
call SetUnitPosition(Y3D,Z7D,Z8D)
endif
if Y6D!=null then
call SetUnitPosition(Y6D,Z7D,Z8D)
endif
if YLD!=null then
call SetUnitPosition(YLD,Z7D,Z8D)
endif
if Y1D!=null then
call SetUnitPosition(Y1D,Z7D,Z8D)
endif
if ModuloInteger(GetTriggerEvalCount(t),3)==0 then
call Y67(Z7D,Z8D,$C8)
endif
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>Z9D then
call DestroyEffect((LoadEffectHandle(L7,(V07),($AF))))
call SetUnitAnimationByIndex(Z69,0)
call SetUnitTimeScale(Z69,1.)
call SetUnitPathing(Z69,true)
call FlushChildHashtable(L7,(V07))
call OZ7(t)
if Y3D!=null then
if IsPointInRegion(IU4,GetUnitX(Y3D),GetUnitY(Y3D)) then
set l=YV8(GetUnitX(Y3D),GetUnitY(Y3D))
call SetUnitX(Y3D,X57(GetLocationX(l)))
call SetUnitY(Y3D,X27(GetLocationY(l)))
call RemoveLocation(l)
set l=null
endif
call YBD(Z69,Y3D,KP7)
call Y67(GetUnitX(Y3D),GetUnitY(Y3D),300)
endif
if Y6D!=null then
if IsPointInRegion(IU4,GetUnitX(Y6D),GetUnitY(Y6D)) then
set l=YV8(GetUnitX(Y6D),GetUnitY(Y6D))
call SetUnitX(Y6D,X57(GetLocationX(l)))
call SetUnitY(Y6D,X27(GetLocationY(l)))
call RemoveLocation(l)
set l=null
endif
call YBD(Z69,Y6D,KP7)
call Y67(GetUnitX(Y6D),GetUnitY(Y6D),300)
endif
if YLD!=null then
if IsPointInRegion(IU4,GetUnitX(YLD),GetUnitY(YLD)) then
set l=YV8(GetUnitX(YLD),GetUnitY(YLD))
call SetUnitX(YLD,X57(GetLocationX(l)))
call SetUnitY(YLD,X27(GetLocationY(l)))
call RemoveLocation(l)
set l=null
endif
call YBD(Z69,YLD,KP7)
call Y67(GetUnitX(YLD),GetUnitY(YLD),300)
endif
if Y1D!=null then
if IsPointInRegion(IU4,GetUnitX(Y1D),GetUnitY(Y1D)) then
set l=YV8(GetUnitX(Y1D),GetUnitY(Y1D))
call SetUnitX(Y1D,X57(GetLocationX(l)))
call SetUnitY(Y1D,X27(GetLocationY(l)))
call RemoveLocation(l)
set l=null
endif
call YBD(Z69,Y1D,KP7)
call Y67(GetUnitX(Y1D),GetUnitY(Y1D),300)
endif
if Y3D!=null and XH7(Y3D)==false then
call IssueTargetOrderById(Z69,$D000F,Y3D)
elseif Y6D!=null and XH7(Y6D)==false then
call IssueTargetOrderById(Z69,$D000F,Y6D)
elseif YLD!=null and XH7(YLD)==false then
call IssueTargetOrderById(Z69,$D000F,YLD)
elseif Y1D!=null and XH7(Y1D)==false then
call IssueTargetOrderById(Z69,$D000F,Y1D)
endif
call Y67(Z7D,Z8D,375)
if IsPointInRegion(IU4,GetUnitX(Z69),GetUnitY(Z69)) then
set l=YV8(GetUnitX(Z69),GetUnitY(Z69))
call SetUnitX(Z69,X57(GetLocationX(l)))
call SetUnitY(Z69,X27(GetLocationY(l)))
call RemoveLocation(l)
set l=null
endif
endif
set t=null
set Z69=null
set Y3D=null
set Y6D=null
set YLD=null
set Y1D=null
return false
endfunction
function ZDD takes nothing returns nothing
local trigger t=CreateTrigger()
local integer V07=GetHandleId(t)
local real Y0D=X57(GetSpellTargetX())
local real Y5D=X27(GetSpellTargetY())
local unit Z69=GetTriggerUnit()
local real QHD=GetUnitX(Z69)
local real ZED=GetUnitY(Z69)
local integer KP7=GetUnitAbilityLevel(Z69,1093751364)
local real a=J77(QHD,ZED,Y0D,Y5D)*bj_DEGTORAD
local real ZFD=400+300*KP7+25
if KF7(QHD,ZED,Y0D,Y5D)>ZFD then
set Y0D=X57(QHD+ZFD*Cos(a))
set Y5D=X27(ZED+ZFD*Sin(a))
endif
call SetUnitPathing(Z69,false)
call SetUnitAnimationByIndex(Z69,3)
call SetUnitTimeScale(Z69,1.5)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterUnitEvent(t,Z69,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function YCD))
call SaveUnitHandle(L7,(V07),(2),(Z69))
call SaveInteger(L7,(V07),(5),(KP7))
call SaveUnitHandle(L7,(V07),(393),(null))
call SaveUnitHandle(L7,(V07),(394),(null))
call SaveUnitHandle(L7,(V07),(395),(null))
call SaveUnitHandle(L7,(V07),(396),(null))
call SaveReal(L7,(V07),(47),((Y0D)*1.))
call SaveReal(L7,(V07),(48),((Y5D)*1.))
call SaveReal(L7,(V07),(6),((QHD)*1.))
call SaveReal(L7,(V07),(7),((ZED)*1.))
call SaveReal(L7,(V07),($D),((Atan2(Y5D-ZED,Y0D-QHD))*1.))
call SaveInteger(L7,(V07),($C),(R2I(KF7(QHD,ZED,Y0D,Y5D)/19.)))
call SaveEffectHandle(L7,(V07),($AF),(AddSpecialEffectTarget("war3mapImported\\SkewerTuskGlow_1.mdx",Z69,"head")))
set t=null
set Z69=null
endfunction
function ZGD takes nothing returns boolean
if GetSpellAbilityId()==1093751364 then
call ZDD()
endif
return false
endfunction
function ZHD takes nothing returns boolean
if GetSpellAbilityId()==1093751364 then
call SetUnitAnimationByIndex(GetTriggerUnit(),7)
endif
return false
endfunction
function HC8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZGD))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function ZHD))
set t=null
endfunction
function ZID takes nothing returns boolean
if GetSpellAbilityId()==1093747504 then
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093748052,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093748051,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093748049,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093748050,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093816148,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093816149,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093816150,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093808966,false)
endif
return false
endfunction
function H38 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZID))
set t=null
endfunction
function ZJD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093815362)
call SetUnitState(IH7,UNIT_STATE_LIFE,GetUnitState(IH7,UNIT_STATE_LIFE)+.1*(20+GetUnitState(IH7,UNIT_STATE_MAX_LIFE)*(.02+.01*BC7)))
if GetTriggerEvalCount(t)>39 or(GetTriggerEvalCount(t)==1 and IsUnitHidden(IH7))then
call UnitRemoveAbility(IH7,1093815364)
call DestroyEffect((LoadEffectHandle(L7,(I97),(609))))
call DestroyEffect((LoadEffectHandle(L7,(I97),(610))))
call DestroyEffect((LoadEffectHandle(L7,(I97),(611))))
call DestroyEffect((LoadEffectHandle(L7,(I97),(612))))
call DestroyEffect((LoadEffectHandle(L7,(I97),(613))))
call DestroyEffect((LoadEffectHandle(L7,(I97),(614))))
call DestroyEffect((LoadEffectHandle(L7,(I97),(615))))
call DestroyEffect((LoadEffectHandle(L7,(I97),(616))))
call DestroyEffect((LoadEffectHandle(L7,(I97),(617))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function ZKD takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local trigger t
local integer I97
local unit BB7=CreateUnit(GetOwningPlayer(IH7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
call UnitAddAbility(BB7,1093815367)
if IssueTargetOrderById(BB7,$D007F,IH7) then
set t=CreateTrigger()
set I97=GetHandleId(t)
call XF7(IH7,1093815364)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function ZJD))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveEffectHandle(L7,(I97),(609),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",IH7,"hand right")))
call SaveEffectHandle(L7,(I97),(610),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",IH7,"hand left")))
call SaveEffectHandle(L7,(I97),(611),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",IH7,"foot right")))
call SaveEffectHandle(L7,(I97),(612),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",IH7,"foot left")))
call SaveEffectHandle(L7,(I97),(613),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",IH7,"foot right mount rear")))
call SaveEffectHandle(L7,(I97),(614),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",IH7,"foot left mount rear")))
call SaveEffectHandle(L7,(I97),(615),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",IH7,"head")))
call SaveEffectHandle(L7,(I97),(616),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",IH7,"chest")))
call SaveEffectHandle(L7,(I97),(617),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",IH7,"weapon")))
endif
set ZX7=null
set IH7=null
set t=null
endfunction
function ZMD takes nothing returns boolean
if GetSpellAbilityId()==1093815362 then
call ZKD()
endif
return false
endfunction
function PD8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZMD))
set t=null
endfunction
function ZND takes nothing returns nothing
local unit IH7=GetEnumUnit()
call DisableTrigger(FL7)
call UnitWakeUp(IH7)
call IssueTargetOrderById(IH7,$D000F,F17)
call EnableTrigger(FL7)
set IH7=null
endfunction
function ZOD takes nothing returns nothing
call O37(GetEnumUnit(),"4328",.75)
endfunction
function ZPD takes nothing returns nothing
local unit IH7=GetEnumUnit()
if IsUnitInGroup(IH7,F67)==false then
call GroupAddUnit(F67,IH7)
call TriggerRegisterUnitEvent(FL7,IH7,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(FL7,IH7,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(FL7,IH7,EVENT_UNIT_ISSUED_TARGET_ORDER)
call OV7(IH7,"4328")
endif
set IH7=null
endfunction
function ZQD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=(LoadInteger(L7,(I97),(5)))
local integer WF8=(LoadInteger(L7,(I97),(34)))
local group BQ9=(LoadGroupHandle(L7,(I97),(22)))
local group g
if GetTriggerEventId()!=EVENT_UNIT_ISSUED_TARGET_ORDER and GetTriggerEventId()!=EVENT_UNIT_ISSUED_POINT_ORDER and GetTriggerEventId()!=EVENT_UNIT_ISSUED_TARGET_ORDER then
set WF8=WF8+1
call SaveInteger(L7,(I97),(34),(WF8))
set F67=BQ9
set FL7=t
set g=WS7()
set IN4=ZX7
call GroupEnumUnitsInRange(g,GetUnitX(IH7),GetUnitY(IH7),275+100*BC7,Condition(function AR7))
call GroupRemoveUnit(g,IH7)
call ForGroup(g,function ZPD)
call WR7(g)
if WF8==(2.25+.25*BC7)*20 or XH7(IH7)then
call ForGroup(BQ9,function ZOD)
call WR7(BQ9)
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
set FL7=t
set F17=IH7
call ForGroup(BQ9,function ZND)
if ModuloInteger(WF8,20)==0 or WF8==0 then
endif
endif
else
if UnitIsSleeping(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1110454328)==0 and GetIssuedOrderId()!=$D0005 and DE7==false then
call DisableTrigger(t)
call ClearSelectionForPlayer(GetOwningPlayer(GetTriggerUnit()))
call IssueTargetOrderById(GetTriggerUnit(),$D000F,IH7)
call EnableTrigger(t)
endif
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function ZRD takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local integer BC7=GetUnitAbilityLevel(ZX7,1093687856)
local unit IH7=GetSpellTargetUnit()
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
call UnitAddAbility(BB7,1093815882)
call SetUnitAbilityLevel(BB7,1093815882,BC7)
call IssueTargetOrderById(BB7,$D007F,IH7)
set F07=ZX7
call TriggerRegisterTimerEvent(t,.05,true)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveInteger(L7,(I97),(5),(BC7))
call SaveGroupHandle(L7,(I97),(22),(WS7()))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("war3mapImported\\WintersCurse.mdx",IH7,"overhead")))
call SaveEffectHandle(L7,(I97),($B0),(AddSpecialEffect("war3mapImported\\WintersCurseAoE.mdx",GetUnitX(IH7),GetUnitY(IH7))))
call TriggerAddCondition(t,Condition(function ZQD))
set ZX7=null
set IH7=null
set t=null
endfunction
function ZSD takes nothing returns boolean
if GetSpellAbilityId()==1093687856 and WQ7(GetSpellTargetUnit())==false then
call ZRD()
endif
return false
endfunction
function PE8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZSD))
set t=null
endfunction
function ZTD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093815859)
call B67(ZX7,IH7,3,(.032+.002*BC7)*GetUnitState(IH7,UNIT_STATE_MAX_LIFE))
if(TimerGetElapsed(W))>=(LoadReal(L7,(GetHandleId(ZX7)),(782)))then
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function ZUD takes unit ZX7,unit IH7 returns nothing
local trigger t
local integer I97
call SetUnitState(ZX7,UNIT_STATE_MANA,GetUnitState(ZX7,UNIT_STATE_MANA)*.8)
if(LoadReal(L7,(GetHandleId(ZX7)),(782)))>(TimerGetElapsed(W))then
call SaveReal(L7,(GetHandleId(ZX7)),(782),(((TimerGetElapsed(W))+F57)*1.))
else
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function ZTD))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("effects\\BasicWaterFlash.mdx",IH7,"chest")))
call SaveReal(L7,(GetHandleId(ZX7)),(782),(((TimerGetElapsed(W))+F57)*1.))
endif
set t=null
endfunction
function ZVD takes nothing returns boolean
local real d
local real ZV8
local integer WF8
local unit ZX7
local unit IH7
if GetUnitAbilityLevel(GetTriggerUnit(),1110460215)>0 and GetUnitAbilityLevel(GetEventDamageSource(),1093815859)>0 and(LoadUnitHandle(L7,(GetHandleId(GetTriggeringTrigger())),(2)))==GetEventDamageSource()then
set ZX7=GetEventDamageSource()
set IH7=GetTriggerUnit()
set WF8=(LoadInteger(L7,(GetHandleId(ZX7)),(780)))
set ZV8=(LoadReal(L7,(GetHandleId(ZX7)),(781)))
if ZV8+F57<(TimerGetElapsed(W))then
set WF8=1
set ZV8=(TimerGetElapsed(W))
call SaveInteger(L7,(GetHandleId(ZX7)),(780),(WF8))
call SaveReal(L7,(GetHandleId(ZX7)),(781),((ZV8)*1.))
else
set WF8=WF8+1
set ZV8=(TimerGetElapsed(W))
call SaveInteger(L7,(GetHandleId(ZX7)),(780),(WF8))
call SaveReal(L7,(GetHandleId(ZX7)),(781),((ZV8)*1.))
endif
if WF8==4 then
set WF8=0
call SaveInteger(L7,(GetHandleId(ZX7)),(780),(WF8))
call ZUD(ZX7,IH7)
endif
call FlushChildHashtable(L7,(GetHandleId(GetTriggeringTrigger())))
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function ZWD takes nothing returns nothing
local trigger t
local unit IH7
local unit ZX7
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
set IH7=GetSpellTargetUnit()
set ZX7=GetTriggerUnit()
else
set IH7=GetTriggerUnit()
set ZX7=GetAttacker()
endif
if IsUnitIllusion(ZX7)==false then
set t=CreateTrigger()
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
call SaveBoolean(L7,(GetHandleId(t)),(264),(true))
else
call SaveBoolean(L7,(GetHandleId(t)),(264),(false))
endif
call SaveUnitHandle(L7,(GetHandleId(t)),(2),(ZX7))
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function ZVD))
endif
set t=null
set IH7=null
set ZX7=null
endfunction
function ZXD takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if GetUnitAbilityLevel(GetAttacker(),1093815859)>0 and(LoadBoolean(L7,(GetHandleId(GetTriggeringTrigger())),(263)))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(L7,(GetHandleId(GetTriggeringTrigger())),($E)))then
call ZWD()
endif
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if(GetIssuedOrderId()==$D011F)then
call SaveBoolean(L7,(GetHandleId(GetTriggeringTrigger())),(263),(true))
elseif(GetIssuedOrderId()==$D0120)then
call SaveBoolean(L7,(GetHandleId(GetTriggeringTrigger())),(263),(false))
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093815859 then
call ZWD()
endif
return false
endfunction
function ZYD takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function ZXD))
call SaveUnitHandle(L7,(GetHandleId(t)),($E),(GetTriggerUnit()))
set t=null
endfunction
function ZZD takes nothing returns boolean
if GetLearnedSkill()==1093815859 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093815859)==1 then
call ZYD()
endif
return false
endfunction
function PH8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function ZZD))
set t=null
endfunction
function ZAD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
if XH7(IH7)==false then
call SetUnitState(IH7,UNIT_STATE_LIFE,GetUnitState(IH7,UNIT_STATE_LIFE)*.94)
endif
if GetTriggerEvalCount(t)==5 then
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function ZBD takes unit ZX7,unit IH7 returns nothing
local trigger t
local integer I97
local integer BC7
local integer ZCD
local integer Z3D
if((OT7(IH7,"4329")==false))and WF7(IH7)==false and GetUnitTypeId(IH7)!=1848651852 then
call O37(IH7,"4329",F27)
set BC7=GetUnitAbilityLevel(ZX7,1093815877)
if BC7==1 then
set ZCD=1093815874
set Z3D=1093815873
elseif BC7==2 then
set ZCD=1093815862
set Z3D=1093815864
elseif BC7==3 then
set ZCD=1093815875
set Z3D=1093815863
elseif BC7==4 then
set ZCD=1093815876
set Z3D=1093815865
endif
call Z57(IH7,ZCD,1,5,1110460225)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),ZCD,false)
call UnitMakeAbilityPermanent(IH7,true,Z3D)
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function ZAD))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostDamage\\FrostDamage.mdl",IH7,"chest")))
endif
endfunction
function Z6D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==ZX7 then
call DisableTrigger(t)
call ZBD(ZX7,IH7)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
else
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set IH7=null
set ZX7=null
return false
endfunction
function ZLD takes nothing returns nothing
local trigger t=CreateTrigger()
local unit IH7=GetTriggerUnit()
local unit ZX7=GetAttacker()
local integer I97=GetHandleId(t)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function Z6D))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
set t=null
set IH7=null
set ZX7=null
endfunction
function Z1D takes nothing returns boolean
if GetAttacker()==(LoadUnitHandle(L7,(GetHandleId(GetTriggeringTrigger())),(2)))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false then
if GetUnitTypeId(GetAttacker())==1311788354 or GetUnitTypeId(GetAttacker())==1311788355 or GetUnitTypeId(GetAttacker())==1311788367 or GetUnitTypeId(GetAttacker())==1311788353 then
call ZLD()
endif
endif
return false
endfunction
function Z0D takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function Z1D))
call SaveUnitHandle(L7,(GetHandleId(t)),(2),(ZX7))
set ZX7=null
set t=null
endfunction
function Z5D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local real x=(LoadReal(L7,(I97),(6)))
local real y=(LoadReal(L7,(I97),(7)))
call SetTerrainPathable(x,y,PATHING_TYPE_WALKABILITY,false)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
return false
endfunction
function Z2D takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local real x=GetUnitX(ZX7)
local real y=GetUnitY(ZX7)
call SetTerrainPathable(x,y,PATHING_TYPE_WALKABILITY,true)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function Z5D))
call SaveReal(L7,(I97),(6),((x)*1.))
call SaveReal(L7,(I97),(7),((y)*1.))
set ZX7=null
set t=null
endfunction
function Z_D takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_HERO_SKILL then
if GetLearnedSkill()==1093815877 and GetUnitAbilityLevel(GetTriggerUnit(),1093815877)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call Z0D()
endif
else
if GetSpellAbilityId()==1093815877 then
if GetUnitTypeId(GetTriggerUnit())!=1311788343 then
call Y67(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),$96)
if IsTerrainPathable(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),PATHING_TYPE_WALKABILITY)then
call Z2D()
endif
endif
endif
endif
return false
endfunction
function PI8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Z_D))
set t=null
endfunction
function A4D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local unit Y27=(LoadUnitHandle(L7,(I97),(45)))
local integer BC7=(LoadInteger(L7,(I97),(5)))
local real x
local real y
local real a
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call KillUnit(Y27)
else
set a=J77(GetUnitX(Y27),GetUnitY(Y27),GetUnitX(IH7),GetUnitY(IH7))
set x=GetUnitX(Y27)+20*Cos(a*bj_DEGTORAD)
set y=GetUnitY(Y27)+20*Sin(a*bj_DEGTORAD)
call SetUnitX(Y27,x)
call SetUnitY(Y27,y)
call SetUnitFacing(Y27,a)
if KE7(Y27,IH7)<30 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call B67(Y27,IH7,1,40+60*BC7)
call KillUnit(Y27)
call SetUnitAnimationByIndex(Y27,3)
endif
endif
set t=null
set IH7=null
set Y27=null
return false
endfunction
function A7D takes integer BC7,unit Y27,unit IH7 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call SetUnitAnimationByIndex(Y27,2)
call SetUnitVertexColor(Y27,$FF,$FF,$FF,$96)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerAddCondition(t,Condition(function A4D))
call SaveInteger(L7,(I97),(5),(BC7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveUnitHandle(L7,(I97),(45),(Y27))
call SetUnitAnimationByIndex(Y27,2)
set t=null
endfunction
function A8D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local integer BC7=(LoadInteger(L7,(I97),(5)))
local unit Y27=(LoadUnitHandle(L7,(I97),(45)))
local group g
local unit IH7
if GetTriggerEvalCount(t)>F_7/.05 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call KillUnit(Y27)
else
set IN4=Y27
set g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(Y27),GetUnitY(Y27),375+25,Condition(function AR7))
set IH7=M59(g,GetUnitX(Y27),GetUnitY(Y27))
call WR7(g)
if IH7!=null then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call A7D(BC7,Y27,IH7)
endif
set g=null
set IH7=null
endif
set t=null
set Y27=null
return false
endfunction
function A9D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local integer BC7=(LoadInteger(L7,(I97),(5)))
local unit Y27=(LoadUnitHandle(L7,(I97),(45)))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function A8D))
call SaveInteger(L7,(I97),(5),(BC7))
call SaveUnitHandle(L7,(I97),(45),(Y27))
call SetUnitAnimationByIndex(Y27,1)
set t=null
set Y27=null
return false
endfunction
function ADD takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local unit Y27=CreateUnit(GetOwningPlayer(ZX7),1747993927,x,y,270)
local integer BC7=GetUnitAbilityLevel(ZX7,1093815372)
call SetUnitAnimationByIndex(Y27,0)
call TriggerRegisterTimerEvent(t,2,false)
call TriggerAddCondition(t,Condition(function A9D))
call SaveInteger(L7,(I97),(5),(BC7))
call SaveUnitHandle(L7,(I97),(45),(Y27))
set ZX7=null
set Y27=null
set t=null
endfunction
function AED takes nothing returns boolean
if GetSpellAbilityId()==1093815372 then
call ADD()
endif
return false
endfunction
function PJ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AED))
set t=null
endfunction
function AFD takes nothing returns nothing
if YS8(GetEnumUnit())then
return
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093815609)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093815609)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093815617)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093815617)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093815374)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093815374)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093815608)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093815608)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093815888)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093815888)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093815891)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093815891)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093815890)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093815890)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093815889)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093815889)
endif
endfunction
function AGD takes nothing returns nothing
if YS8(GetEnumUnit())then
return
endif
if G47==1 then
set G77=1093815609
elseif G47==2 then
set G77=1093815617
elseif G47==3 then
set G77=1093815374
elseif G47==4 then
set G77=1093815608
endif
if GetUnitAbilityLevel(GetEnumUnit(),G77)==0 then
call XF7(GetEnumUnit(),G77)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),G77,false)
call UnitMakeAbilityPermanent(GetEnumUnit(),true,1094935923)
if G77==1093815609 then
call UnitMakeAbilityPermanent(GetEnumUnit(),true,1093815604)
elseif G77==1093815617 then
call UnitMakeAbilityPermanent(GetEnumUnit(),true,1093815605)
elseif G77==1093815374 then
call UnitMakeAbilityPermanent(GetEnumUnit(),true,1093815606)
elseif G77==1093815608 then
call UnitMakeAbilityPermanent(GetEnumUnit(),true,1093815607)
elseif G77==1093815888 then
call UnitMakeAbilityPermanent(GetEnumUnit(),true,1093815885)
elseif G77==1093815891 then
call UnitMakeAbilityPermanent(GetEnumUnit(),true,1093815884)
elseif G77==1093815890 then
call UnitMakeAbilityPermanent(GetEnumUnit(),true,1093815886)
elseif G77==1093815889 then
call UnitMakeAbilityPermanent(GetEnumUnit(),true,1093815887)
endif
endif
endfunction
function AHD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real x=(LoadReal(L7,(I97),(6)))
local real y=(LoadReal(L7,(I97),(7)))
local real GKD=(LoadReal(L7,(I97),(442)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093815373)
local group AID=(LoadGroupHandle(L7,(I97),(340)))
local group g=WS7()
local group g1=WS7()
local group g2=WS7()
set G47=BC7
if(TimerGetElapsed(W))>GKD then
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call ForGroup(AID,function AFD)
call WR7(AID)
call WR7(g)
call WR7(g1)
call WR7(g2)
return false
endif
set IN4=ZX7
call GroupEnumUnitsInRange(g1,x,y,300,Condition(function B87))
call GroupEnumUnitsInRange(g2,x,y,419,Condition(function BK7))
call GroupAddGroup(g1,g)
call GroupAddGroup(g2,g)
call WR7(g1)
call WR7(g2)
call GroupRemoveGroup(g,AID)
call ForGroup(AID,function AFD)
call ForGroup(g,function AGD)
call SaveGroupHandle(L7,(I97),(340),(g))
call WR7(AID)
set t=null
set ZX7=null
set AID=null
set g=null
return false
endfunction
function AJD takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local real Y_7=GetSpellTargetX()
local real Z47=GetSpellTargetY()
local integer i
local integer BC7=GetUnitAbilityLevel(ZX7,1093815373)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function AHD))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveGroupHandle(L7,(I97),(340),(WS7()))
call SaveReal(L7,(I97),(6),((Y_7)*1.))
call SaveReal(L7,(I97),(7),((Z47)*1.))
call SaveReal(L7,(I97),(442),(((TimerGetElapsed(W))+2.5+1.*BC7)*1.))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffect("war3mapImported\\MagneticField04.mdl",Y_7,Z47)))
set i=0
loop
exitwhen i>6
call SetPlayerAbilityAvailable(Z7[i],1093815609,false)
call SetPlayerAbilityAvailable(A7[i],1093815609,false)
call SetPlayerAbilityAvailable(Z7[i],1093815617,false)
call SetPlayerAbilityAvailable(A7[i],1093815617,false)
call SetPlayerAbilityAvailable(Z7[i],1093815617,false)
call SetPlayerAbilityAvailable(A7[i],1093815374,false)
call SetPlayerAbilityAvailable(Z7[i],1093815608,false)
call SetPlayerAbilityAvailable(A7[i],1093815608,false)
set i=i+1
endloop
set ZX7=null
set t=null
endfunction
function AKD takes nothing returns boolean
if GetSpellAbilityId()==1093815373 then
call AJD()
endif
return false
endfunction
function PK8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AKD))
set t=null
endfunction
function AMD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093815601)
local integer GVD=(LoadInteger(L7,(I97),(758)))
local integer WF8=(LoadInteger(L7,(I97),(34)))
local group g
if GetTriggerEventId()==EVENT_WIDGET_DEATH or WF8>120 or WF7(IH7)then
call UnitRemoveAbility(IH7,'A2ME')
call UnitRemoveAbility(IH7,'A2LU')
call UnitRemoveAbility(IH7,'A2LT')
call UnitRemoveAbility(IH7,'B0G2')
call UnitRemoveAbility(IH7,'B0G3')
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
set WF8=WF8+1
call SaveInteger(L7,(I97),(34),(WF8))
set IN4=ZX7
set g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(IH7),GetUnitY(IH7),$E1+25,Condition(function AJ7))
call GroupRemoveUnit(g,IH7)
if FirstOfGroup(g)==null then
if GVD=='A2LU' then
if GetUnitAbilityLevel(IH7,'A2LU')==0 then
call XF7(IH7,'A2ME')
call XF7(IH7,'A2LU')
call SetUnitAbilityLevel(IH7,'A2LU',BC7)
endif
else
if GetUnitAbilityLevel(IH7,'A2LT')==0 then
call XF7(IH7,'A2ME')
call XF7(IH7,'A2LT')
call SetUnitAbilityLevel(IH7,'A2LT',BC7)
endif
endif
if ModuloInteger(WF8,$A)==0 then
call B67(ZX7,IH7,1,BC7*$F*.5)
endif
else
if GVD=='A2LU' then
if GetUnitAbilityLevel(IH7,'A2LU')>0 then
call UnitRemoveAbility(IH7,'A2ME')
call UnitRemoveAbility(IH7,'A2LU')
call UnitRemoveAbility(IH7,1110460210)
endif
else
if GetUnitAbilityLevel(IH7,'A2LT')>0 then
call UnitRemoveAbility(IH7,'A2LT')
call UnitRemoveAbility(IH7,'A2ME')
call UnitRemoveAbility(IH7,1110460211)
endif
endif
endif
call WR7(g)
set g=null
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function AND takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local integer GVD='A2LU'
if GetUnitTypeId(ZX7)==1311788365 then
set GVD='A2LT'
endif
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerAddCondition(t,Condition(function AMD))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveInteger(L7,(I97),(758),(GVD))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("war3mapImported\\Flux3.mdx",IH7,"origin")))
call TriggerEvaluate(t)
set ZX7=null
set IH7=null
set t=null
endfunction
function AOD takes nothing returns boolean
if GetSpellAbilityId()==1093815601 and WQ7(GetSpellTargetUnit())==false then
call AND()
endif
return false
endfunction
function PM8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AOD))
set t=null
endfunction
function APD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit AQD=(LoadUnitHandle(L7,(I97),(17)))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call FlushChildHashtable(L7,(GetHandleId(AQD)))
call RemoveUnit(AQD)
set t=null
set AQD=null
return false
endfunction
function ARD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit AQD=(LoadUnitHandle(L7,(I97),(2)))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call FlushChildHashtable(L7,(GetHandleId(AQD)))
call ShowUnit(AQD,false)
set t=null
set AQD=null
return false
endfunction
function ASD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit AQD=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093815600)
if GetTriggerEvalCount(t)==(100+20*BC7) or GetTriggerEventId()==EVENT_WIDGET_DEATH then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call KillUnit(AQD)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl",GetUnitX(AQD),GetUnitX(AQD)))
set t=CreateTrigger()
set I97=GetHandleId(t)
call SaveUnitHandle(L7,(I97),(2),(AQD))
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function ARD))
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,3,false)
call TriggerAddCondition(t,Condition(function APD))
call SaveUnitHandle(L7,(I97),(17),(AQD))
else
call SuspendHeroXP(AQD,true)
call UnitModifySkillPoints(AQD,-25)
endif
set t=null
set ZX7=null
set AQD=null
return false
endfunction
function ATD takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit AQD=CreateUnit(GetOwningPlayer(ZX7),1311788365,GetUnitX(ZX7),GetUnitY(ZX7),0)
local integer BC7=GetUnitAbilityLevel(ZX7,1093815600)
local integer i=0
local item D88
local integer AUD=1227895373
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl",AQD,"chest"))
if TV7(GetOwningPlayer(AQD))==false then
set AUD=1227903043
endif
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(ZX7)) or IsPlayerObserver(GetLocalPlayer()) then
call SetUnitVertexColor(AQD,75,75,75,100)
endif
call SelectUnitAddForPlayer(AQD,GetOwningPlayer(ZX7))
call DisableTrigger(H94)
loop
exitwhen i>5
if UnitItemInSlot(ZX7,i)!=null and GetItemTypeId(UnitItemInSlot(ZX7,i))!=ZU[X0]and GetItemTypeId(UnitItemInSlot(ZX7,i))!=ZU[ZC]and GetItemTypeId(UnitItemInSlot(ZX7,i))!=ZU[VC]and GetItemTypeId(UnitItemInSlot(ZX7,i))!=ZU[WC]and GetItemTypeId(UnitItemInSlot(ZX7,i))!=ZU[H3]and GetItemTypeId(UnitItemInSlot(ZX7,i))!=ZU[DF4]and GetItemTypeId(UnitItemInSlot(ZX7,i))!=ZU[B5]and GetItemTypeId(UnitItemInSlot(ZX7,i))!=ZU[C5]and GetItemTypeId(UnitItemInSlot(ZX7,i))!=ZU[EW]then
set D88=CreateItem(GetItemTypeId(UnitItemInSlot(ZX7,i)),0,0)
if GetItemCharges(UnitItemInSlot(ZX7,i))>0 then
call SetItemCharges(D88,GetItemCharges(UnitItemInSlot(ZX7,i)))
endif
call UnitAddItem(AQD,D88)
call SetItemPlayer(D88,GetOwningPlayer(AQD),false)
if GetItemTypeId(D88)==ZU[B5]or GetItemTypeId(D88)==ZU[C5]or GetItemTypeId(D88)==ZU[EW]then
call SetItemDropOnDeath(D88,false)
endif
else
call UnitAddItem(AQD,CreateItem(AUD,0,0))
endif
set i=i+1
endloop
call EnableTrigger(H94)
call SetHeroLevel(AQD,GetHeroLevel(ZX7),false)
set i=1
loop
exitwhen i>GetUnitAbilityLevel(ZX7,1096904043)
call SelectHeroSkill(AQD,1096904043)
set i=i+1
endloop
set i=1
loop
exitwhen i>GetUnitAbilityLevel(ZX7,1093815372)
call SelectHeroSkill(AQD,1093815372)
set i=i+1
endloop
set i=1
loop
exitwhen i>GetUnitAbilityLevel(ZX7,1093815373)
call SelectHeroSkill(AQD,1093815373)
set i=i+1
endloop
set i=1
loop
exitwhen i>GetUnitAbilityLevel(ZX7,1093815601)
call SelectHeroSkill(AQD,1093815601)
set i=i+1
endloop
set i=1
loop
exitwhen i>GetUnitAbilityLevel(ZX7,1093812788)
call SelectHeroSkill(AQD,1093812788)
set i=i+1
endloop
set i=1
loop
exitwhen i>GetUnitAbilityLevel(ZX7,1093815600)
call SelectHeroSkill(AQD,1093815600)
set i=i+1
endloop
call UnitRemoveAbility(AQD,1093815600)
call UnitModifySkillPoints(AQD,-25)
call SuspendHeroXP(AQD,true)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterDeathEvent(t,AQD)
call TriggerAddCondition(t,Condition(function ASD))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(AQD))
call SetUnitState(ZX7,UNIT_STATE_LIFE,GetUnitState(ZX7,UNIT_STATE_LIFE)*(1-(0.-0.*BC7)))
call SetUnitState(ZX7,UNIT_STATE_MANA,GetUnitState(ZX7,UNIT_STATE_MANA)*(1-(0.-0.*BC7)))
call SetUnitState(AQD,UNIT_STATE_LIFE,GetUnitState(ZX7,UNIT_STATE_LIFE))
call SetUnitState(AQD,UNIT_STATE_MANA,GetUnitState(ZX7,UNIT_STATE_MANA))
set ZX7=null
set AQD=null
set t=null
endfunction
function AVD takes nothing returns boolean
if GetSpellAbilityId()==1093815600 then
call ATD()
endif
return false
endfunction
function PN8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AVD))
set t=null
endfunction
function AWD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local group g=WS7()
local integer BC7=GetUnitAbilityLevel(ZX7,1093686851)
set IN4=ZX7
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),450+25,Condition(function A_7))
if FirstOfGroup(g)==null then
if GetUnitAbilityLevel(ZX7,1093815896)!=BC7 then
call XF7(ZX7,1093815896)
call SetUnitAbilityLevel(ZX7,1093815896,BC7)
endif
else
if GetUnitAbilityLevel(ZX7,1093815896)>0 then
call UnitRemoveAbility(ZX7,1093815896)
endif
endif
call WR7(g)
set ZX7=null
set t=null
set g=null
return false
endfunction
function AXD takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function AWD))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set t=null
set ZX7=null
endfunction
function AYD takes nothing returns boolean
if GetLearnedSkill()==1093686851 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093686851)==1 then
call AXD()
endif
return false
endfunction
function PQ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function AYD))
set t=null
endfunction
function D96 takes unit ZX7,unit IH7,integer SUI returns nothing
local unit I01=CreateUnit(GetOwningPlayer(IH7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
call XF7(I01,'A2RW')
call SetUnitAbilityLevel(I01,'A2RW',SUI)
call IssueTargetOrder(I01,"drunkenhaze",IH7)
set I01=null
endfunction
function DA6 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(OB7),(2)))
local unit IH7=(LoadUnitHandle(L7,(OB7),(17)))
local real RM2=(LoadReal(L7,(OB7),(13)))
local real d=(LoadReal(L7,(OB7),(138)))
local integer SUI=GetUnitAbilityLevel(ZX7,1093685570)
local real DC1=(0.5+0.1*SUI)/(.02)
local real RS2=d/DC1
local real x=(LoadReal(L7,(OB7),(6)))
local real y=(LoadReal(L7,(OB7),(7)))
local integer NPI=GetTriggerEvalCount(t)
if NPI>DC1 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call Y67(GetUnitX(IH7),GetUnitY(IH7),100)
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
else
set x=X17(GetUnitX(IH7)+RS2*Cos(RM2))
set y=X07(GetUnitY(IH7)+RS2*Sin(RM2))
call SetUnitX(IH7,x)
call SetUnitY(IH7,y)
call SaveReal(L7,(OB7),(6),((x)*1.))
call SaveReal(L7,(OB7),(7),((y)*1.))
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function DB6 takes unit I01,unit IH7,unit ZX7,real x,real y returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local real RM2=Atan2(GetUnitY(IH7)-GetUnitY(I01),GetUnitX(IH7)-GetUnitX(I01))
local real IT3=KF7(x,y,GetUnitX(IH7),GetUnitY(IH7))
local real d=RMaxBJ(1,350*(1-IT3/900))
call SaveUnitHandle(L7,(OB7),(2),(ZX7))
call SaveUnitHandle(L7,(OB7),(17),(IH7))
call SaveReal(L7,(OB7),(13),((RM2)*1.))
call SaveReal(L7,(OB7),(138),((d)*1.))
call SaveReal(L7,(OB7),(6),((GetUnitX(IH7))*1.))
call SaveReal(L7,(OB7),(7),((GetUnitY(IH7))*1.))
call D96(ZX7,IH7,GetUnitAbilityLevel(ZX7,1093685570))
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function DA6))
set t=null
endfunction
function DC6 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),IQ4)==false and WF7(GetEnumUnit())==false then
call GroupAddUnit(IQ4,GetEnumUnit())
call DB6(IN4,GetEnumUnit(),KNI,KSI,KTI)
endif
endfunction
function DD6 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit I01=(LoadUnitHandle(L7,(OB7),(19)))
local unit ZX7=(LoadUnitHandle(L7,(OB7),(2)))
local real a=(LoadReal(L7,(OB7),(137)))
local real x1=(LoadReal(L7,(OB7),(64)))
local real y1=(LoadReal(L7,(OB7),(65)))
local real x2=(LoadReal(L7,(OB7),(66)))
local real y2=(LoadReal(L7,(OB7),(67)))
local group g=(LoadGroupHandle(L7,(OB7),(22)))
local real x=GetUnitX(I01)
local real y=GetUnitY(I01)
local group g2
if KF7(x,y,x2,y2)<100 then
set x=x2
set y=y2
else
set x=x+40*Cos(a)
set y=y+40*Sin(a)
endif
call SetUnitX(I01,X17(x))
call SetUnitY(I01,X07(y))
set g2=WS7()
set IN4=I01
set KNI=ZX7
set KSI=x1
set KTI=y1
set IQ4=g
call GroupEnumUnitsInRange(g2,x,y,275,Condition(function AJ7))
call ForGroup(g2,function DC6)
call WR7(g2)
if(x==x2 and y==y2)or GetTriggerEvalCount(t)>35 then
set g2=WS7()
set IN4=I01
set KNI=ZX7
set KSI=x1
set KTI=y1
set IQ4=g
call GroupEnumUnitsInRange(g2,x,y,275,Condition(function AJ7))
call ForGroup(g2,function DC6)
call WR7(g2)
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
call KillUnit(I01)
call WR7(g)
endif
set t=null
set I01=null
set g=null
set g2=null
return false
endfunction
function DE6 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local location l=GetSpellTargetLoc()
local unit ZX7=GetTriggerUnit()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=Atan2(y-GetUnitY(ZX7),x-GetUnitX(ZX7))
local unit I01=CreateUnit(GetOwningPlayer(ZX7),1697657657,GetUnitX(ZX7),GetUnitY(ZX7),a*bj_RADTODEG)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function DD6))
call SaveUnitHandle(L7,(OB7),(2),(ZX7))
call SaveUnitHandle(L7,(OB7),(19),(I01))
call SaveReal(L7,(OB7),(137),((a)*1.))
call SaveReal(L7,(OB7),(64),((GetUnitX(ZX7))*1.))
call SaveReal(L7,(OB7),(65),((GetUnitY(ZX7))*1.))
call SaveReal(L7,(OB7),(66),((GetUnitX(ZX7)+900*Cos(a))*1.))
call SaveReal(L7,(OB7),(67),((GetUnitY(ZX7)+900*Sin(a))*1.))
call SaveGroupHandle(L7,(OB7),(22),(WS7()))
call RemoveLocation(l)
set t=null
set l=null
set ZX7=null
endfunction
function DF6 takes nothing returns boolean
if GetSpellAbilityId()==1093685570 then
call DE6()
endif
return false
endfunction
function Q51 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DF6))
set t=null
endfunction
function AZD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093677625)
local integer V8D=GetHeroAgi(ZX7,true)
local real AAD=V8D*(.1+.04*BC7)
local integer VF9=R2I(AAD/2.+.5)
local integer ABD=(LoadInteger(L7,(I97),(34)))
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093677625 then
if ABD==1 then
set ABD=2
else
set ABD=1
endif
call SaveInteger(L7,(I97),(34),(ABD))
call UnitRemoveAbility(BB7,1093815897)
call UnitRemoveAbility(BB7,1093816115)
endif
if XH7(ZX7) then
call UnitRemoveAbility(BB7,1093815897)
call UnitRemoveAbility(BB7,1093816115)
else
if GetUnitAbilityLevel(BB7,1093815897)==0 then
call XF7(BB7,1093815897)
if ABD==1 then
call XF7(BB7,1093816115)
endif
endif
call SetUnitAbilityLevel(BB7,1093815897,VF9)
call SetUnitAbilityLevel(BB7,1093816115,VF9)
call SetUnitX(BB7,GetUnitX(ZX7))
call SetUnitY(BB7,GetUnitY(ZX7))
endif
set ZX7=null
set t=null
return false
endfunction
function ACD takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1697657174,0,0,0)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function AZD))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(19),(BB7))
call SaveInteger(L7,(I97),(34),(1))
call XF7(BB7,1093815897)
call XF7(BB7,1093816115)
set t=null
set ZX7=null
endfunction
function A3D takes nothing returns boolean
if GetLearnedSkill()==1093677625 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093677625)==1 then
call ACD()
endif
return false
endfunction
function PP8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function A3D))
call X_7(1093815897)
call X_7(1093816115)
set t=null
endfunction
function A6D takes nothing returns boolean
local real d
if IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(RE4)) and IsUnitInGroup(GetFilterUnit(),RG4)==false and AM7(GetFilterUnit(),GetOwningPlayer(RF4)) then
set d=KF7(GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()),GetUnitX(RE4),GetUnitY(RE4))
if d<VZ then
set RD4=GetFilterUnit()
set VZ=d
endif
endif
return false
endfunction
function ALD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit BB7=O77(OB7,"Caster")
local integer V77=OM7(OB7,"Level")
local integer B07=OM7(OB7,"TargetIndex")
local unit m5=TQ7(B07)
local group A1D=OF7(OB7,"AlreadyHit")
local real A0D=ON7(OB7,"StolenMana")
local real A5D=ON7(OB7,"ManaCounter")
local real A2D=ON7(OB7,"DmgCounter")
local real T98
local group g
local real a
local real x
local real y
set a=Atan2(GetUnitY(m5)-GetUnitY(BB7),GetUnitX(m5)-GetUnitX(BB7))
if p5==m5 then
set x=GetUnitX(BB7)+30*Cos(a)
set y=GetUnitY(BB7)+30*Sin(a)
else
set x=GetUnitX(BB7)+25*Cos(a)
set y=GetUnitY(BB7)+25*Sin(a)
endif
call SetUnitX(BB7,x)
call SetUnitY(BB7,y)
if KF7(x,y,GetUnitX(m5),GetUnitY(m5))<60 then
call SetUnitX(BB7,GetUnitX(m5))
call SetUnitY(BB7,GetUnitY(m5))
if p5==m5 then
call SetUnitState(p5,UNIT_STATE_MANA,GetUnitState(p5,UNIT_STATE_MANA)+A0D)
call KillUnit(BB7)
call WR7(A1D)
call NM7(OB7)
call OZ7(t)
else
if AK7(m5)==false or IsUnitVisible(m5,GetOwningPlayer(BB7)) then
if(GetUnitAbilityLevel(m5,1093677654)>0)then
call B67(p5,m5,3,(40+40*V77)+.35*A2D*(40+40*V77))
else
call B67(p5,m5,1,(40+40*V77)+.35*A2D*(40+40*V77))
endif
set A2D=A2D+1
if GetUnitState(m5,UNIT_STATE_MANA)>0 then
set T98=RMinBJ(GetUnitState(m5,UNIT_STATE_MANA),(.08+.03*V77)*GetUnitState(m5,UNIT_STATE_MAX_MANA))	
call SetUnitState(m5,UNIT_STATE_MANA,GetUnitState(m5,UNIT_STATE_MANA)-T98)
call Y17(oI,GetUnitX(m5),GetUnitY(m5))
set A0D=A0D+T98
set A5D=A5D+1
endif
endif
call NQ7(OB7,"StolenMana",(A0D)*1.)
call NQ7(OB7,"DmgCounter",(A2D)*1.)
call NQ7(OB7,"ManaCounter",(A5D)*1.)
set g=WS7()
set RD4=null
set RE4=m5
set RG4=A1D
set VZ=99999
set RF4=p5
call GroupEnumUnitsInRange(g,GetUnitX(m5),GetUnitY(m5),525,Condition(function A6D))
call WR7(g)
if RD4==null or A2D==(2+V77)then
call NP7(OB7,"TargetIndex",TS7(p5))
else
call NP7(OB7,"TargetIndex",TS7(RD4))
call GroupAddUnit(A1D,RD4)
endif
endif
call TP7(B07)
endif
set t=null
set p5=null
set m5=null
set g=null
set BB7=null
set A1D=null
return false
endfunction
function A_D takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer V77=GetUnitAbilityLevel(p5,1093682994)
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local group g=WS7()
local real A2D=0
local real A5D=0
local real T98=0
local real A0D=0
local unit BB7=CreateUnit(GetOwningPlayer(p5),1747990832,GetUnitX(p5),GetUnitY(p5),GetUnitFacing(p5))
call Y17(eI,GetUnitX(p5),GetUnitY(p5))
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerAddCondition(t,Condition(function ALD))
call NB7(OB7,"AlreadyHit",g)
call NT7(OB7,"Source",p5)
call NT7(OB7,"Caster",BB7)
call NP7(OB7,"Level",V77)
call NP7(OB7,"TargetIndex",TS7(m5))
call NP7(OB7,"Count",0)
call NQ7(OB7,"StolenMana",(A0D)*1.)
call NQ7(OB7,"DmgCounter",(A2D)*1.)
call NQ7(OB7,"ManaCounter",(A5D)*1.)
call GroupAddUnit(g,m5)
set p5=null
set m5=null
set t=null
set g=null
set BB7=null
endfunction
function B4D takes nothing returns boolean
if GetSpellAbilityId()==1093682994 then
call A_D()
endif
return false
endfunction
function H68 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function B4D))
set t=null
endfunction
function B7D takes nothing returns nothing
call GroupAddUnit(RJ4,GetEnumUnit())
call IssueTargetOrderById(RH4,$D008F,GetEnumUnit())
endfunction
function B8D takes unit ZX7,unit IH7 returns boolean
local real a=J47(IH7,ZX7)
local real B9D=GetUnitFacing(IH7)
local real c1
local real c2
local real d1=-1.
local real d2=-1.
local real e1
local real e2
local real f1=-1.
local real f2=-1.
if IsUnitVisible(ZX7,GetOwningPlayer(IH7))==false then
return false
endif
set c1=RMaxBJ(B9D-75,0)
set c2=B9D
if B9D-75<=0 then
set d1=360-(75-(c2-c1))
set d2=360
endif
set e1=B9D
set e2=RMinBJ(B9D+75,360)
if B9D+75>=360 then
set f1=0
set f2=0+(75-(e2-e1))
endif
if a<0 then
set a=a+360
elseif a>360 then
set a=a-360
endif
if(a>c1 and a<c2)or(d1!=-1 and a>d1 and a<d2)or(a>e1 and a<e2)or(f1!=-1 and a>f1 and a<f2)then
return true
endif
return false
endfunction
function BDD takes nothing returns boolean
return((IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))and IsUnitInGroup(GetFilterUnit(),RJ4)==false and B8D(IN4,GetFilterUnit())and GetUnitAbilityLevel(GetFilterUnit(),1110458961)==0)!=null
endfunction
function BED takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=O77(I97,"Source")
local integer BC7=GetUnitAbilityLevel(ZX7,1093747028)
local unit BB7=O77(I97,"Caster")
local group g=WS7()
local group BQ9=OF7(I97,"AlreadyHit")
set RH4=BB7
set RI4=ZX7
set IN4=ZX7
set RJ4=BQ9
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),725+100*BC7,Condition(function BDD))
call ForGroup(g,function B7D)
call WR7(g)
call DestroyEffect(OG7(I97,"FX"))
if GetTriggerEvalCount(t)>100 then
call OZ7(t)
call NM7(I97)
call WR7(BQ9)
else
call NU7(I97,"FX",AddSpecialEffectTarget("Abilities\\Spells\\Orc\\EtherealForm\\SpiritWalkerChange.mdl",ZX7,"chest"))
endif
set ZX7=null
set BB7=null
set g=null
set t=null
set BQ9=null
return false
endfunction
function BFD takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit BB7=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697656901,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function BED))
call NT7(I97,"Source",GetTriggerUnit())
call NT7(I97,"Caster",BB7)
call XF7(BB7,1093677654)
call NB7(I97,"AlreadyHit",WS7())
call NU7(I97,"FX",AddSpecialEffectTarget("Abilities\\Spells\\Orc\\EtherealForm\\SpiritWalkerChange.mdl",GetTriggerUnit(),"chest"))
call SetUnitAbilityLevel(BB7,1093677654,GetUnitAbilityLevel(GetTriggerUnit(),1093747028))
call TriggerEvaluate(t)
set t=null
set BB7=null
endfunction
function BGD takes nothing returns boolean
if GetSpellAbilityId()==1093747028 then
call BFD()
endif
return false
endfunction
function HL8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BGD))
set t=null
endfunction
function zS takes nothing returns nothing
if IH4<=tl then
set IH4=IH4+1
call GroupAddUnit(IQ4,GetEnumUnit())
endif
endfunction
function zt takes unit p5,unit m5 returns nothing
call YV7("SPLK",GetUnitX(p5),GetUnitY(p5),GetUnitX(m5),GetUnitY(m5),.1,.6,.44,.9,.6)
endfunction
function zT takes nothing returns nothing
call SetUnitState(IN4,UNIT_STATE_LIFE,GetUnitState(IN4,UNIT_STATE_LIFE)+25)
if GetUnitTypeId(GetEnumUnit())!=1848657461 then
call ZA7(GetEnumUnit(),25)
endif
call zt(GetEnumUnit(),IN4)
endfunction
function zu takes nothing returns nothing
call B67(IP4,IN4,1,25)
if GetUnitTypeId(GetEnumUnit())!=1848657461 then
call ZA7(GetEnumUnit(),25)
endif
call zt(GetEnumUnit(),IN4)
endfunction
function zU takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local group g=WS7()
local integer zv=GetUnitAbilityLevel(WI7,1093685813)*5
set IQ4=WS7()
set IH4=0
set tl=zv
set IN4=WI7
call GroupEnumUnitsInRange(g,GetUnitX(WI7),GetUnitY(WI7),$3E8,Condition(function ny))
call GroupRemoveUnit(g,WI7)
call GroupRemoveUnit(g,GetSpellTargetUnit())
call ForGroup(g,function zS)
call WR7(g)
set g=IQ4
set IN4=GetSpellTargetUnit()
set IP4=WI7
if IsUnitAlly(IN4,GetOwningPlayer(WI7))then
call ForGroup(g,function zT)
else
call ForGroup(g,function zu)
endif
call WR7(g)
set WI7=null
set g=null
endfunction
function BHD takes nothing returns boolean
if GetSpellAbilityId()==1093685813 and(IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_STRUCTURE)==false or GetOwningPlayer(GetSpellTargetUnit())==GetOwningPlayer(GetTriggerUnit()))then
call zU()
endif
return false
endfunction
function KL8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BHD))
set t=null
endfunction
function BID takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer BJD=OM7(OB7,"Last")
if GetTriggerEventId()==EVENT_UNIT_DEATH then
if(OO7(OB7,"SourceDone")==false and GetTriggerUnit()==O77(OB7,"Source"))then
call NS7(OB7,"SourceDone",true)
call SetHeroStr(O77(OB7,"Source"),GetHeroStr(O77(OB7,"Source"),false)-BJD,true)
elseif(OO7(OB7,"TargetDone")==false and GetTriggerUnit()==O77(OB7,"Target"))then
call NS7(OB7,"TargetDone",true)
call SetHeroStr(O77(OB7,"Target"),GetHeroStr(O77(OB7,"Target"),false)+BJD,true)
endif
else
if(OO7(OB7,"SourceDone")==false)then
call NS7(OB7,"SourceDone",true)
call SetHeroStr(O77(OB7,"Source"),GetHeroStr(O77(OB7,"Source"),false)-BJD,true)
endif
if(OO7(OB7,"TargetDone")==false)then
call NS7(OB7,"TargetDone",true)
call SetHeroStr(O77(OB7,"Target"),GetHeroStr(O77(OB7,"Target"),false)+BJD,true)
endif
call NM7(OB7)
call OZ7(t)
endif
set t=null
return false
endfunction
function BKD takes nothing returns nothing
local unit p5=sZ
local unit m5=GetEnumUnit()
local integer BJD
local integer V77=tZ
local trigger t
local integer OB7
if IsUnitType(m5,UNIT_TYPE_HERO) and LB7(GetUnitTypeId(m5))==false then
set BJD=IMinBJ(GetHeroStr(m5,false)-1,4)
set t=CreateTrigger()
set OB7=GetHandleId(t)
call SetHeroStr(p5,GetHeroStr(p5,false)+BJD,true)
call SetHeroStr(m5,GetHeroStr(m5,false)-BJD,true)
call TriggerRegisterTimerEvent(t,20+5*V77,false)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function BID))
call NS7(OB7,"SourceDone",false)
call NS7(OB7,"TargetDone",false)
call NT7(OB7,"Source",p5)
call NT7(OB7,"Target",m5)
call NP7(OB7,"Last",BJD)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",p5,"origin"))
endif
call B67(p5,m5,1,40*V77-20)
set p5=null
set m5=null
set t=null
endfunction
function BMD takes nothing returns nothing
local unit p5=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local group g=WS7()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local integer V77=GetUnitAbilityLevel(p5,1093743955)
local unit oA=CreateUnit(GetOwningPlayer(p5),1747990346,x,y,0)
call DestroyEffect(AddSpecialEffect("effects\\DecayGreen_Groundonly_1.mdx",x,y))
call RemoveLocation(l)
set IN4=p5
set sZ=p5
set tZ=V77
call GroupEnumUnitsInRange(g,x,y,325+25,Condition(function AR7))
call ForGroup(g,function BKD)
call WR7(g)
call KillUnit(oA)
set p5=null
set l=null
set g=null
set t=null
set oA=null
endfunction
function BND takes nothing returns boolean
if GetSpellAbilityId()==1093743955 then
call BMD()
endif
return false
endfunction
function K38 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BND))
set t=null
endfunction
function BOD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer B07=OM7(OB7,"TargetIndex")
local unit m5=TQ7(B07)
local unit BPD=O77(OB7,"Zombie")
local real PPD=GetUnitState(m5,UNIT_STATE_LIFE)
local real BQD=GetUnitState(m5,UNIT_STATE_MAX_LIFE)
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call TP7(B07)
call NM7(OB7)
call OZ7(t)
if GetTriggerUnit()==m5 then
call KillUnit(BPD)
endif
elseif D9 then
call TP7(B07)
call NM7(OB7)
call OZ7(t)
call PauseUnit(BPD,true)
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER then
call DisableTrigger(t)
call IssueTargetOrderById(BPD,$D000F,m5)
call EnableTrigger(t)
elseif(PPD<(100*RV4)or PPD/BQD<(.05*RV4+.1))and GetUnitAbilityLevel(BPD,1110458702)==0 then
call SetPlayerAbilityAvailable(GetOwningPlayer(BPD),1093744438,true)
call IssueTargetOrderById(wZ[GetPlayerId(GetOwningPlayer(BPD))],$D0085,BPD)
call SetPlayerAbilityAvailable(GetOwningPlayer(BPD),1093744438,false)
elseif IsUnitVisible(m5,GetOwningPlayer(BPD))==false then
if(OO7(OB7,"VisionBuffer1")) then
if(OO7(OB7,"VisionBuffer2")) then
if(OO7(OB7,"VisionBuffer3")) then
call NM7(OB7)
call OZ7(t)
call KillUnit(BPD)
else
call NS7(OB7,"VisionBuffer3",true)
endif
else
call NS7(OB7,"VisionBuffer2",true)
endif
else
call NS7(OB7,"VisionBuffer1",true)
endif
else
call NS7(OB7,"VisionBuffer1",false)
call NS7(OB7,"VisionBuffer2",false)
call NS7(OB7,"VisionBuffer3",false)
endif
set t=null
set m5=null
set BPD=null
return false
endfunction
function BRD takes nothing returns boolean
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit m5=GetEnumUnit()
local unit BPD=CreateUnit(TZ,1848657461,GetUnitX(m5),GetUnitY(m5),0)
call IssueTargetOrderById(BPD,$D000F,m5)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,BPD,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,BPD,EVENT_UNIT_ISSUED_ORDER)
call TriggerRegisterUnitEvent(t,BPD,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(t,BPD,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function BOD))
call NP7(OB7,"TargetIndex",TS7(m5))
call NT7(OB7,"Zombie",BPD)
call NP7(OB7,"Level",RV4)
set t=null
set m5=null
set BPD=null
return false
endfunction
function BSD takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==1848657461 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1 then
call KillUnit(GetFilterUnit())
endif
return false
endfunction
function BTD takes player p returns nothing
local group g=WS7()
call GroupEnumUnitsOfPlayer(g,p,Condition(function BSD))
call WR7(g)
set g=null
endfunction
function BUD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit BVD=O77(OB7,"Acolyte1")
local unit BWD=O77(OB7,"Acolyte2")
local unit BXD=O77(OB7,"Acolyte3")
local integer V77=OM7(OB7,"Level")
local group g
local player BYD
if TV7(GetOwningPlayer(p5))then
set BYD=A7[0]
else
set BYD=Z7[0]
endif
if GetTriggerEventId()==EVENT_UNIT_DEATH then
if(OO7(OB7,"NeedsFix"))then
call Y57(BYD,.4,GetUnitX(p5),GetUnitY(p5),600)
endif
call NM7(OB7)
call OZ7(t)
call ShowUnit(p5,false)
call RemoveUnit(BVD)
call RemoveUnit(BWD)
call RemoveUnit(BXD)
call BTD(GetOwningPlayer(p5))
else
if IsUnitVisible(p5,BYD)then
call NS7(OB7,"NeedsFix",true)
endif
set g=WS7()
set IN4=p5
set TZ=GetOwningPlayer(p5)
set RV4=V77
call GroupEnumUnitsInRange(g,GetUnitX(p5),GetUnitY(p5),25+$C8+$C8*V77,Condition(function AX7))
if D9==false then
call ForGroup(g,function BRD)
endif
call WR7(g)
set g=null
endif
set t=null
set p5=null
set BVD=null
set BWD=null
set BXD=null
set BYD=null
return false
endfunction
function BZD takes nothing returns nothing
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local unit p5
local real TV9
local real TW9
local real BAD
local unit BVD
local unit BWD
local unit BXD
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local integer V77=GetUnitAbilityLevel(GetTriggerUnit(),1093743958)
local integer id
if V77==1 then
set p5=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1848657482,x,y,0)
elseif V77==2 then
set p5=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1848657481,x,y,0)
elseif V77==3 then
set p5=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1848657462,x,y,0)
else
set p5=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1848657480,x,y,0)
endif
call Y17(YL4,x,y)
set id=GetPlayerId(GetOwningPlayer(p5))
if wZ[id]==null then
set wZ[id]=CreateUnit(GetOwningPlayer(p5),1697657174,x,y,0)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093744438,false)
call XF7(wZ[id],1093744438)
endif
call SetUnitPosition(p5,X17(x),X07(y))
call UnitApplyTimedLife(p5,1112820806,$A+5*V77)
call RemoveLocation(l)
call Y67(x,y,300)
set TV9=x+$C8*Cos(0*bj_DEGTORAD)
set TW9=y+$C8*Sin(0*bj_DEGTORAD)
set BAD=J77(TV9,TW9,x,y)
set BVD=CreateUnit(GetOwningPlayer(p5),1747990344,TV9,TW9,BAD)
call SetUnitAnimation(BVD,"Stand Work Gold")
call QueueUnitAnimation(BVD,"Stand Work Gold")
call QueueUnitAnimation(BVD,"Stand Work Gold")
call QueueUnitAnimation(BVD,"Stand Work Gold")
call QueueUnitAnimation(BVD,"Stand Work Gold")
call QueueUnitAnimation(BVD,"Stand Work Gold")
call QueueUnitAnimation(BVD,"Stand Work Gold")
call QueueUnitAnimation(BVD,"Stand Work Gold")
call QueueUnitAnimation(BVD,"Stand Work Gold")
call QueueUnitAnimation(BVD,"Stand Work Gold")
call QueueUnitAnimation(BVD,"Stand Work Gold")
call QueueUnitAnimation(BVD,"Stand Work Gold")
call QueueUnitAnimation(BVD,"Stand Work Gold")
call QueueUnitAnimation(BVD,"Stand Work Gold")
call QueueUnitAnimation(BVD,"Stand Work Gold")
call QueueUnitAnimation(BVD,"Stand Work Gold")
call QueueUnitAnimation(BVD,"Stand Work Gold")
call QueueUnitAnimation(BVD,"Stand Work Gold")
set TV9=x+$C8*Cos(120*bj_DEGTORAD)
set TW9=y+$C8*Sin(120*bj_DEGTORAD)
set BAD=J77(TV9,TW9,x,y)
set BWD=CreateUnit(GetOwningPlayer(p5),1747990344,TV9,TW9,BAD)
call SetUnitAnimation(BWD,"Stand Work Gold")
call QueueUnitAnimation(BWD,"Stand Work Gold")
call QueueUnitAnimation(BWD,"Stand Work Gold")
call QueueUnitAnimation(BWD,"Stand Work Gold")
call QueueUnitAnimation(BWD,"Stand Work Gold")
call QueueUnitAnimation(BWD,"Stand Work Gold")
call QueueUnitAnimation(BWD,"Stand Work Gold")
call QueueUnitAnimation(BWD,"Stand Work Gold")
call QueueUnitAnimation(BWD,"Stand Work Gold")
call QueueUnitAnimation(BWD,"Stand Work Gold")
call QueueUnitAnimation(BWD,"Stand Work Gold")
call QueueUnitAnimation(BWD,"Stand Work Gold")
call QueueUnitAnimation(BWD,"Stand Work Gold")
call QueueUnitAnimation(BWD,"Stand Work Gold")
call QueueUnitAnimation(BWD,"Stand Work Gold")
call QueueUnitAnimation(BWD,"Stand Work Gold")
call QueueUnitAnimation(BWD,"Stand Work Gold")
set TV9=x+$C8*Cos($F0*bj_DEGTORAD)
set TW9=y+$C8*Sin($F0*bj_DEGTORAD)
set BAD=J77(TV9,TW9,x,y)
set BXD=CreateUnit(GetOwningPlayer(p5),1747990344,TV9,TW9,BAD)
call SetUnitAnimation(BXD,"Stand Work Gold")
call QueueUnitAnimation(BXD,"Stand Work Gold")
call QueueUnitAnimation(BXD,"Stand Work Gold")
call QueueUnitAnimation(BXD,"Stand Work Gold")
call QueueUnitAnimation(BXD,"Stand Work Gold")
call QueueUnitAnimation(BXD,"Stand Work Gold")
call QueueUnitAnimation(BXD,"Stand Work Gold")
call QueueUnitAnimation(BXD,"Stand Work Gold")
call QueueUnitAnimation(BXD,"Stand Work Gold")
call QueueUnitAnimation(BXD,"Stand Work Gold")
call QueueUnitAnimation(BXD,"Stand Work Gold")
call QueueUnitAnimation(BXD,"Stand Work Gold")
call QueueUnitAnimation(BXD,"Stand Work Gold")
call QueueUnitAnimation(BXD,"Stand Work Gold")
call QueueUnitAnimation(BXD,"Stand Work Gold")
call QueueUnitAnimation(BXD,"Stand Work Gold")
call SetUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,3,true)
call TriggerAddCondition(t,Condition(function BUD))
call NT7(OB7,"Source",p5)
call NT7(OB7,"Acolyte1",BVD)
call NT7(OB7,"Acolyte2",BWD)
call NT7(OB7,"Acolyte3",BXD)
call NP7(OB7,"Level",V77)
call NS7(OB7,"NeedsFix",false)
call TriggerEvaluate(t)
set p5=null
set BVD=null
set BWD=null
set BXD=null
set l=null
set t=null
endfunction
function BBD takes nothing returns boolean
if GetSpellAbilityId()==1093743958 then
call BZD()
endif
return false
endfunction
function K68 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BBD))
set t=null
endfunction
function BCD takes unit EVD returns boolean
return(MV7(EVD,ZU[FC4])!=null)
endfunction
function B3D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local integer V77=GetUnitAbilityLevel(p5,1093743946)
call SetUnitAbilityLevel(p5,1093743947,V77)
call NM7(OB7)
call OZ7(t)
set t=null
set p5=null
return false
endfunction
function B6D takes nothing returns nothing
if IsUnitType(IN4,UNIT_TYPE_HERO) then
if BCD(IP4)then
call SetUnitState(IP4,UNIT_STATE_LIFE,GetUnitState(IP4,UNIT_STATE_LIFE)+GetUnitState(IP4,UNIT_STATE_MAX_LIFE)*.1)
else
call SetUnitState(IP4,UNIT_STATE_LIFE,GetUnitState(IP4,UNIT_STATE_LIFE)+GetUnitState(IP4,UNIT_STATE_MAX_LIFE)*.06)
endif
else
if BCD(IP4)then
call SetUnitState(IP4,UNIT_STATE_LIFE,GetUnitState(IP4,UNIT_STATE_LIFE)+GetUnitState(IP4,UNIT_STATE_MAX_LIFE)*.03)
else
call SetUnitState(IP4,UNIT_STATE_LIFE,GetUnitState(IP4,UNIT_STATE_LIFE)+GetUnitState(IP4,UNIT_STATE_MAX_LIFE)*.02)
endif
endif
endfunction
function BLD takes nothing returns boolean
local trigger t2=GetTriggeringTrigger()
local integer UB9=GetHandleId(t2)
local trigger t1=OE7(UB9,"t1")
local integer IID=GetHandleId(t1)
local unit p5=O77(UB9,"Source")
local unit m5
local real d
local real a
local boolean B1D=OO7(UB9,"IgnorePlague")
if(GetTriggerEventId()==EVENT_UNIT_DEATH and GetTriggerUnit()==p5)or(GetTriggerEventId()!=EVENT_UNIT_DAMAGED and GetTriggerEventId()!=EVENT_UNIT_DEATH)then
call NM7(IID)
call NM7(UB9)
call OZ7(t1)
call OZ7(t2)
elseif GetTriggerEventId()==EVENT_UNIT_DEATH then
if IsUnitIllusion(GetDyingUnit())==false then
call ZF7(GetDyingUnit(),p5,1747990361,"B6D",600)
endif
elseif B1D==false then
set m5=GetTriggerUnit()
set d=KE7(p5,m5)
if d<250 and GetEventDamage()>4 then
if BCD(p5)then
set a=25+5*WZ
else
set a=$F+5*WZ
endif
if d>250 and d<750 and GetEventDamage()>4 then
if BCD(p5)then
set a=(20+5*WZ)-$F*((d-250)/500)
else
set a=(15+5*WZ)-$F*((d-250)/500)
endif
call NS7(UB9,"IgnorePlague",true)
call B67(GetEventDamageSource(),GetTriggerUnit(),3,GetEventDamage()*a/ 100)
call NS7(UB9,"IgnorePlague",false)
endif
endif
endif
set t2=null
set t1=null
set p5=null
set m5=null
return false
endfunction
function B0D takes nothing returns boolean
local trigger t1=GetTriggeringTrigger()
local integer IID=GetHandleId(t1)
local trigger t2=OE7(IID,"t2")
local integer UB9=GetHandleId(t2)
local unit m5=GetTriggerUnit()
local unit p5=O77(IID,"Source")
if IsUnitEnemy(p5,GetOwningPlayer(m5)) and IsUnitType(m5,UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(m5,1093678162)==0 then
if OO7(UB9,"Registered"+I2S(GetHandleId(m5)))==false then
call TriggerRegisterUnitEvent(t2,m5,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t2,m5,EVENT_UNIT_DEATH)
call NS7(UB9,"Registered"+I2S(GetHandleId(m5)),true)
endif
endif
set t1=null
set t2=null
set m5=null
set p5=null
return false
endfunction
function B5D takes nothing returns nothing
local unit p5=GetTriggerUnit()
local trigger t1=CreateTrigger()
local integer IID=GetHandleId(t1)
local trigger t2=CreateTrigger()
local integer UB9=GetHandleId(t2)
local trigger t3=CreateTrigger()
local integer B2D=GetHandleId(t3)
local integer V77=GetUnitAbilityLevel(p5,1093743946)
set WZ=V77
call TriggerRegisterUnitInRange(t1,p5,750,Condition(function TO7))
call TriggerAddCondition(t1,Condition(function B0D))
call NV7(IID,"t2",t2)
call NT7(IID,"Source",p5)
call TriggerRegisterTimerEvent(t2,30,false)
call TriggerRegisterUnitEvent(t2,p5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t2,Condition(function BLD))
call NV7(UB9,"t1",t1)
call NT7(UB9,"Source",p5)
call NS7(UB9,"IgnorePlague",false)
call TriggerRegisterTimerEvent(t3,.01,false)
call TriggerAddCondition(t3,Condition(function B3D))
call NT7(B2D,"Source",p5)
set p5=null
set t1=null
set t2=null
set t3=null
endfunction
function B_D takes nothing returns boolean
if GetSpellAbilityId()==1093743946 and GetUnitTypeId(GetTriggerUnit())==1211117650 then
call B5D()
endif
return false
endfunction
function K18 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function B_D))
call X_7(1093743947)
set t=null
endfunction
function C4D takes nothing returns nothing
local unit IH7=GetEnumUnit()
local unit ZX7=RX4
local real C7D=GetUnitState(IH7,UNIT_STATE_LIFE)
local real C8D=GetUnitState(IH7,UNIT_STATE_MAX_LIFE)
local real C9D=((.003+.003*RY4)*C8D)/2
if C7D<(C9D*2)then
call SetUnitState(IH7,UNIT_STATE_LIFE,1)
call B67(ZX7,IH7,3,100000000)
call B67(ZX7,IH7,1,100000000)
call B67(ZX7,IH7,2,100000000)
else
call SetUnitState(IH7,UNIT_STATE_LIFE,YK7(GetUnitState(IH7,UNIT_STATE_LIFE)-C9D,1))
endif
set IH7=null
set ZX7=null
endfunction
function CDD takes nothing returns boolean
return((IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false and(GetUnitAbilityLevel((GetFilterUnit()),1113815395)>0)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))and GetUnitAbilityLevel(GetFilterUnit(),1110456372)>0)!=null
endfunction
function CED takes nothing returns boolean
local integer OB7=GetHandleId(GetTriggeringTrigger())
local unit p5=O77(OB7,"Source")
local group g
if XH7(p5)==false then
set g=WS7()
set IN4=p5
set RX4=p5
set RY4=GetUnitAbilityLevel(p5,1093677390)
call GroupEnumUnitsInRange(g,GetUnitX(p5),GetUnitY(p5),$4C9,Condition(function CDD))
call ForGroup(g,function C4D)
call WR7(g)
endif
set g=null
set p5=null
return false
endfunction
function CFD takes unit WI7,boolean UA9 returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function CED))
call NT7(GetHandleId(t),"Source",WI7)
if UA9 then
set aj[GetPlayerId(GetOwningPlayer(WI7))]=t
endif
set t=null
endfunction
function CGD takes nothing returns boolean
if GetLearnedSkill()==1093677390 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093677390)==1 then
call CFD(GetTriggerUnit(),false)
endif
return false
endfunction
function H28 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function CGD))
set t=null
endfunction
function CHD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093678640)
local real CID=BC7*2
local real CJD=BC7*1
local integer V29=(LoadInteger(L7,(I97),(34)))
if BC7==4 then
set CID=12
set CJD=6
endif
set CJD=CJD*V29
set CID=CID*V29
call SetUnitState(ZX7,UNIT_STATE_MANA,GetUnitState(ZX7,UNIT_STATE_MANA)+CID)
call SetUnitState(ZX7,UNIT_STATE_LIFE,GetUnitState(ZX7,UNIT_STATE_LIFE)+CJD)
if GetTriggerEvalCount(t)>5 or GetTriggerEventId()==EVENT_WIDGET_DEATH then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
return false
endfunction
function CKD takes unit ZX7 returns nothing
local integer BC7=GetUnitAbilityLevel(ZX7,1093678640)
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",ZX7,"origin"))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerAddCondition(t,Condition(function CHD))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) then
call SaveInteger(L7,(I97),(34),(10))
else
call SaveInteger(L7,(I97),(34),(1))
endif
set t=null
endfunction
function CMD takes nothing returns boolean
if GetUnitAbilityLevel(GetKillingUnit(),1110454866)>0 then
call CKD(GetKillingUnit())
elseif((LoadInteger(L7,(GetHandleId((GetTriggerUnit()))),((4333))))==1)then
call CKD(ZJI)
endif
return false
endfunction
function H18 takes nothing returns nothing
set Dk=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Dk,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Dk,Condition(function CMD))
endfunction
function CND takes nothing returns nothing
local integer I97=GetHandleId(GetTriggeringTrigger())
local unit ZX7=IN4
local unit IH7=IP4
local real VW9=ON7(I97,"Damage")
local real GYD=ON7(I97,"Heal")
if IsUnitAlly(IH7,GetOwningPlayer(ZX7))then
call SetUnitState(IH7,UNIT_STATE_LIFE,GetUnitState(IH7,UNIT_STATE_LIFE)+GYD)
else
call B67(ZX7,IH7,1,VW9)
endif
set ZX7=null
set IH7=null
endfunction
function COD takes nothing returns nothing
local trigger t=ZF7(IN4,GetEnumUnit(),1747988567,"CND",400)
local integer OB7=GetHandleId(t)
call NQ7(OB7,"Damage",IJ4)
call NQ7(OB7,"Heal",IK4)
set t=null
endfunction
function CPD takes nothing returns nothing
if IsUnitVisible(GetEnumUnit(),GetOwningPlayer(IN4))then
call COD()
endif
endfunction
function CQD takes nothing returns nothing
local unit WX7=GetTriggerUnit()
local group g=WS7()
local integer BC7=GetUnitAbilityLevel(WX7,PS4)
local real r
local real VW9
local real GYD
if BC7==1 then
set VW9=125
set GYD=70
set r=500
elseif BC7==2 then
set VW9=175
set GYD=90
set r=500
elseif BC7==3 then
set VW9=225
set GYD=110
set r=500
elseif BC7==4 then
set VW9=275
set GYD=130
set r=500
endif
set IN4=WX7
set IJ4=VW9
set IK4=GYD
call GroupEnumUnitsInRange(g,GetUnitX(WX7),GetUnitY(WX7),r,Condition(function B77))
call GroupRemoveUnit(g,WX7)
call ForGroup(g,function CPD)
call WR7(g)
call SetUnitState(WX7,UNIT_STATE_LIFE,GetUnitState(WX7,UNIT_STATE_LIFE)+GYD)
set WX7=null
set g=null
endfunction
function CRD takes nothing returns boolean
if GetSpellAbilityId()==PS4 then
call CQD()
endif
return false
endfunction
function H08 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CRD))
set t=null
endfunction
function CSD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local real V29=(LoadReal(L7,(I97),(680)))
local integer CTD=GetUnitAbilityLevel(ZX7,1093679184)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl",IH7,"origin"))
if CTD>0 then
set FR7=true
call B67(ZX7,IH7,13,V29*(GetUnitState(IH7,UNIT_STATE_MAX_LIFE)-GetUnitState(IH7,UNIT_STATE_LIFE)))
set FR7=false
else
call B67(ZX7,IH7,13,V29*(GetUnitState(IH7,UNIT_STATE_MAX_LIFE)-GetUnitState(IH7,UNIT_STATE_LIFE)))
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function CUD takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local integer CVD=GetUnitAbilityLevel(ZX7,1093678647)
local integer CWD=GetUnitAbilityLevel(ZX7,1093679184)
local real V29
if CVD==1 then
set V29=.4
elseif CVD==2 or CWD==1 then
set V29=.6
elseif CVD==3 then
set V29=.8
elseif CWD==2 then
set V29=.9
elseif CWD==3 then
set V29=1.2
endif
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveReal(L7,(I97),(680),((V29)*1.))
call TriggerRegisterTimerEvent(t,1.5,false)
call TriggerAddCondition(t,Condition(function CSD))
call O37(IH7,"4333",1.5)
if CWD>0 then
call O37(IH7,"4418",1.51)
endif
set ZJI=ZX7
set t=null
set ZX7=null
set IH7=null
endfunction
function CXD takes nothing returns boolean
if(GetSpellAbilityId()==1093678647 or GetSpellAbilityId()==1093679184)and WQ7(GetSpellTargetUnit())==false then
call CUD()
endif
return false
endfunction
function H58 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CXD))
set t=null
endfunction
function CYD takes nothing returns boolean
return GetSpellAbilityId()==1093682521 or GetSpellAbilityId()==1093682760 or GetSpellAbilityId()==1093682736
endfunction
function CZD takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and GZZ(GetFilterUnit())
endfunction
function CBD takes nothing returns nothing
local unit WX7=GetTriggerUnit()
local unit BB7
local group g=WS7()
local real W27=GetUnitFacing(WX7)
local real x
local real y
local real Xww=0
local unit u2
local integer id=GetSpellAbilityId()
local integer BC7=GetUnitAbilityLevel(WX7,id)
if id=='A0EY' then
set Xww=200.
elseif id=='A0FH' then
set Xww=450.
elseif id=='A0F0' then
set Xww=700.
endif
set x=GetUnitX(WX7)+Xww*Cos(W27*bj_DEGTORAD)
set y=GetUnitY(WX7)+Xww*Sin(W27*bj_DEGTORAD)
set BB7=CreateUnit(GetOwningPlayer(WX7),'e006',x,y,0)
call UnitApplyTimedLife(BB7,'BTLF',2)
call GroupEnumUnitsInRange(g,x,y,275,Condition(function CZD))
loop
set u2=FirstOfGroup(g)
exitwhen u2==null
call B67(WX7,u2,1,75*BC7+25)
call GroupRemoveUnit(g,u2)
endloop
call WR7(g)
set WX7=null
set BB7=null
endfunction
function I48 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(t,function CBD)
call TriggerAddCondition(t,Condition(function CYD))
set t=null
endfunction
function CCD takes nothing returns nothing
if(GetLearnedSkill()==1093682521)then
if(GetUnitAbilityLevelSwapped(1093682521,GetTriggerUnit())==1)then
call UnitAddAbility(GetTriggerUnit(),1093682736)
call UnitAddAbility(GetTriggerUnit(),1093682760)
else
call SetUnitAbilityLevelSwapped(1093682736,GetTriggerUnit(),GetUnitAbilityLevelSwapped(1093682521,GetTriggerUnit()))
call SetUnitAbilityLevelSwapped(1093682760,GetTriggerUnit(),GetUnitAbilityLevelSwapped(1093682521,GetTriggerUnit()))
endif
endif
if(GetLearnedSkill()==1093681746)then
if(GetUnitAbilityLevelSwapped(1093681746,GetTriggerUnit())==1)then
call UnitAddAbility(GetTriggerUnit(),1093682001)
endif
endif
endfunction
function RM takes nothing returns nothing
set DK=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(DK,EVENT_PLAYER_HERO_SKILL)
call TriggerAddAction(DK,function CCD)
endfunction
function R7m takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer I97=GetHandleId(t)
local unit u=LoadUnitHandle(L7,I97,0)
local integer BC7=LoadInteger(L7,I97,1)
local integer CLD=LoadInteger(L7,I97,0)
local integer C1D=CLD
local integer i
local integer k
local real a
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local integer CE7
local real r
local real sA=50
local player p=GetOwningPlayer(u)
local unit BB7
local real dx
local real dy
if LoadBoolean(L7,I97,0)==false then
set C1D=C1D/2
set a=360./(C1D*1.)
set i=1
set k=C1D
loop
exitwhen i>k
set r=i*a*bj_DEGTORAD
set CE7=2
set dx=X17(x+(375+950+25*BC7*2)*(Cos(r)))
set dy=X07(y+(375+950+25*BC7*2)*(Sin(r)))
set BB7=CreateUnit(p,'e040',dx,dy,0)
call UnitAddAbility(BB7,'Aloc')
call SetUnitX(BB7,dx)
call SetUnitY(BB7,dy)
call UnitApplyTimedLife(BB7,'BTLF',15.)
call UnitAddAbility(BB7,'A32W')
call SetUnitAbilityLevel(BB7,'A32W',BC7)
call SaveUnitHandle(L7,I97,i+$A,BB7)
if IssuePointOrderById(BB7,$D00FA,x,y)==false then
loop
exitwhen IssuePointOrderById(BB7,$D00FA,x+50*CE7*Cos(r),y+50*CE7*Sin(r))or CE7>$C
set CE7=CE7+1
endloop
endif
set i=i+1
set BB7=null
endloop
call SaveBoolean(L7,I97,0,true)
call TimerStart(t,LoadReal(L7,I97,0),false,function R7m)
else
set i=1
loop
set BB7=LoadUnitHandle(L7,I97,i+$A)
if GetWidgetLife(BB7)!=GetUnitState(BB7,UNIT_STATE_MAX_LIFE)then
if XH7(u)==false then
call SetWidgetLife(u,GetWidgetLife(u)+(16.+16.*BC7)*(GetUnitState(BB7,UNIT_STATE_MAX_LIFE)-GetWidgetLife(BB7)))
endif
endif
set BB7=null
set i=i+1
exitwhen i>CLD/2
endloop
call DestroyTimer(t)
call FlushChildHashtable(L7,I97)
endif
set u=null
set t=null
endfunction
function R7n takes unit u,integer CLD,integer BC7 returns nothing
local timer t=CreateTimer()
local integer I97=GetHandleId(t)
call SaveUnitHandle(L7,I97,0,u)
call SaveInteger(L7,I97,0,CLD)
call SaveInteger(L7,I97,1,BC7)
call SaveReal(L7,I97,0,(950.+25.*BC7)/700.)
call TimerStart(t,LoadReal(L7,I97,0),false,function R7m)
set t=null
endfunction
function C6D takes unit u,integer CLD returns nothing
local integer C1D=CLD
local integer i
local integer k
local integer BC7=GetUnitAbilityLevel(u,'A29J')+GetUnitAbilityLevel(u,'A1MP')
local unit BB7
local real a
local real x
local real y
local integer CE7
local real r
local real sA=50
local player p=GetOwningPlayer(u)
local boolean R7h=GetUnitAbilityLevel(u,'A1MP')>0
if BC7==0 then
return
endif
set x=GetUnitX(u)
set y=GetUnitY(u)
set C1D=C1D/2
if C1D==0 then
return
endif
set a=360./(C1D*1.)
set i=1
set k=C1D
loop
exitwhen i>k
set CE7=2
set BB7=CreateUnit(p,'e040',x,y,0)
call UnitAddAbility(BB7,'Aloc')
call SetUnitX(BB7,x)
call SetUnitY(BB7,y)
call UnitApplyTimedLife(BB7,'BTLF',15.)
call UnitAddAbility(BB7,'A0HG')
call SetUnitAbilityLevel(BB7,'A0HG',BC7)
set r=i*a*bj_DEGTORAD
if IssuePointOrderById(BB7,$D00FA,x+50*Cos(r),y+50*Sin(r))==false then
loop
exitwhen IssuePointOrderById(BB7,$D00FA,x+50*CE7*Cos(r),y+50*CE7*Sin(r))or CE7>$C
set CE7=CE7+1
endloop
if CE7==$C then
endif
endif
set i=i+1
set BB7=null
endloop
if R7h then
call R7n(u,CLD,BC7)
endif
call R7j($A)
set BB7=null
endfunction
function C3D takes nothing returns nothing
if GetSpellAbilityId()=='A29J' or GetSpellAbilityId()=='A1MP' then
call C6D(GetTriggerUnit(),LoadInteger(L7,(GetHandleId(GetTriggerUnit())),710))
endif
endfunction
function I78 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function C3D))
set t=null
endfunction
function R7p takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(IN4))and GZZ(GetFilterUnit())
endfunction
function R7q takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit p5=LoadUnitHandle(L7,I97,0)
local group R7l=LoadGroupHandle(L7,I97,1)
local group g=WS7()
local unit BB7=LoadUnitHandle(L7,I97,5)
local integer c=GetTriggerEvalCount(t)+1
local unit u2
set IN4=p5
call GroupEnumUnitsInRange(g,LoadReal(L7,I97,$A),LoadReal(L7,I97,$B),70*c,Condition(function R7p))
call GroupRemoveGroup(R7l,g)
loop
set u2=FirstOfGroup(g)
exitwhen u2==null
call GroupAddUnit(R7l,u2)
call SetUnitX(BB7,GetUnitX(u2))
call SetUnitY(BB7,GetUnitY(u2))
if GetOwningPlayer(u2)!=GetOwningPlayer(BB7)then
call SetUnitOwner(BB7,GetOwningPlayer(u2),false)
endif
call IssueTargetOrderById(BB7,$D00DD,u2)
call GroupRemoveUnit(g,u2)
endloop
call WR7(g)
if c>=$C then
call WR7(R7l)
call FlushChildHashtable(L7,I97)
call OZ7(t)
endif
set t=null
set p5=null
return false
endfunction
function R7r takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit BB7
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local group R7l=WS7()
call TriggerRegisterTimerEvent(t,.1,true)
set BB7=CreateUnit(GetOwningPlayer(p5),'e00E',GetUnitX(p5),GetUnitY(p5),0)
call SaveUnitHandle(L7,I97,0,p5)
call SaveUnitHandle(L7,I97,5,BB7)
call XF7(BB7,'A0HH')
call SetUnitAbilityLevel(BB7,'A0HH',GetUnitAbilityLevel(p5,'A29J')+GetUnitAbilityLevel(p5,'A1MP'))
call SaveGroupHandle(L7,I97,1,R7l)
call SaveReal(L7,I97,$A,GetUnitX(p5))
call SaveReal(L7,I97,$B,GetUnitY(p5))
call TriggerAddCondition(t,Condition(function R7q))
set BB7=null
set p5=null
endfunction
function C5D takes nothing returns nothing
local integer I97=GetHandleId(GetTriggeringTrigger())
local unit ZX7=IP4
local unit IH7=IN4
local integer C1D=GetUnitAbilityLevel(ZX7,1093682001)
local integer C2D
local integer BC7=GetUnitAbilityLevel(ZX7,1093681746)
if BC7==1 then
set C2D=15
elseif BC7==2 then
set C2D=22
elseif BC7==3 then
set C2D=29
else
set C2D=36
endif
set C2D=C2D+1
if IsUnitType(IH7,UNIT_TYPE_HERO)==false then
set C1D=C1D+1
else
set C1D=C1D+$A
endif
set C1D=IMinBJ(C2D,C1D)
call SetUnitAbilityLevel(ZX7,1093682001,C1D)
call SaveInteger(L7,(GetHandleId(ZX7)),(710),(C1D))
set ZX7=null
endfunction
function C_D takes nothing returns nothing
local integer C1D
local integer BC7
local integer C2D
local trigger t
local integer I97
local unit ZX7=GetKillingUnit()
if GetUnitTypeId(ZX7)==1697656899 then
set ZX7=M7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]
endif
set C1D=GetUnitAbilityLevel(ZX7,1093682001)
set BC7=GetUnitAbilityLevel(ZX7,1093681746)
if BC7==1 then
set C2D=15
elseif BC7==2 then
set C2D=22
elseif BC7==3 then
set C2D=29
else
set C2D=36
endif
if C1D<=C2D then
set t=ZF7(GetTriggerUnit(),ZX7,1747993426,"C5D",500)
set I97=GetHandleId(t)
set t=null
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdl",GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
endif
set ZX7=null
endfunction
function L4D takes nothing returns nothing
local integer L7D=(LoadInteger(L7,(GetHandleId(GetTriggerUnit())),(710)))
call SaveInteger(L7,(GetHandleId(GetTriggerUnit())),(710),(R2I(GetUnitAbilityLevel(GetTriggerUnit(),1093682001)*.5)+1))
call SetUnitAbilityLevel(GetTriggerUnit(),1093682001,R2I(GetUnitAbilityLevel(GetTriggerUnit(),1093682001)*.5)+1)
call C6D(GetTriggerUnit(),L7D-(LoadInteger(L7,(GetHandleId(GetTriggerUnit())),(710))))
endfunction
function L8D takes nothing returns boolean
if GetUnitAbilityLevel(GetKillingUnit(),1093681746)>0 and IsUnitIllusion(GetTriggerUnit())==false then
call C_D()
elseif GetUnitAbilityLevel(M7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))],1093681746)>0 and GetUnitTypeId(GetKillingUnit())==1697656899 then
call C_D()
endif
if GetUnitAbilityLevel(GetTriggerUnit(),1093681746)>0 and IsUnitIllusion(GetTriggerUnit())==false then
call L4D()
endif
return false
endfunction
function L9D takes nothing returns boolean
local unit WX7=M7[GetPlayerId(GetTriggerPlayer())]
local integer LDD=GetUnitAbilityLevel(WX7,1093682001)-1
local integer LED=0
local integer BC7=GetUnitAbilityLevel(WX7,1093681746)
if BC7==1 then
set LED=15
elseif BC7==2 then
set LED=22
elseif BC7==3 then
set LED=29
elseif BC7==4 then
set LED=36
endif
set LDD=IMaxBJ(IMinBJ(LDD,LED),0)
if GetUnitTypeId(WX7)==1315334514 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,10.,GetObjectName(1848658757)+" "+I2S(LDD)+"/"+I2S(LED))
endif
set WX7=null
return false
endfunction
function H_8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function L8D))
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-st",true)
call TriggerAddCondition(t,Condition(function L9D))
set t=null
endfunction
function LKD takes nothing returns boolean
return GetSpellAbilityId()==1093677640
endfunction
function LMD takes nothing returns nothing
local unit oA
if(X67()==false)then
set oA=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697656901,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),bj_UNIT_FACING)
call XF7(oA,1093677650)
call IssueTargetOrderById(oA,$D006B,GetSpellTargetUnit())
else
set oA=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697656901,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),bj_UNIT_FACING)
call XF7(oA,1093748785)
call IssueTargetOrderById(oA,$D006B,GetSpellTargetUnit())
endif
set oA=null
endfunction
function ID8 takes nothing returns nothing
set Dm=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Dm,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(Dm,Condition(function LKD))
call TriggerAddAction(Dm,function LMD)
endfunction
function LND takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V07=GetHandleId(t)
local unit Z69=(LoadUnitHandle(L7,(V07),(2)))
local unit LOD=(LoadUnitHandle(L7,(V07),(19)))
call ResetUnitAnimation(Z69)
call RemoveUnit(LOD)
call FlushChildHashtable(L7,(V07))
call OZ7(t)
set Z69=null
set LOD=null
set t=null
return false
endfunction
function LPD takes nothing returns nothing
local unit Z69=GetTriggerUnit()
local unit LOD=CreateUnit(GetOwningPlayer(Z69),1966092617,GetUnitX(Z69),GetUnitY(Z69),GetUnitFacing(Z69))
local trigger t=CreateTrigger()
local integer V07=GetHandleId(t)
call TriggerRegisterUnitEvent(t,Z69,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function LND))
call SaveUnitHandle(L7,(V07),(2),(Z69))
call SaveUnitHandle(L7,(V07),(19),(LOD))
call SetUnitVertexColorBJ(LOD,0,0,0,75)
call SetUnitAnimation(LOD,"spell third")
set Z69=null
set LOD=null
set t=null
endfunction
function LQD takes nothing returns boolean
if GetSpellAbilityId()==1093679171 and GetUnitAbilityLevel(GetTriggerUnit(),1093679171)<5 then
call LPD()
endif
return false
endfunction
function IE8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function LQD))
set t=null
endfunction
function LRD takes nothing returns boolean
local integer I97=GetHandleId(GetTriggeringTrigger())
local unit LSD=O77(I97,"NightStalker")
local unit LTD=O77(I97,"VisionUnit")
if LSD==null or XH7(LSD)or X67()or(MV7(LSD,ZU[GE4])==null and MV7(LSD,ZU[GX4])==null)then
call ShowUnit(LTD,false)
else
call ShowUnit(LTD,true)
call SetUnitX(LTD,GetUnitX(LSD))
call SetUnitY(LTD,GetUnitY(LSD))
endif
if GetOwningPlayer(LTD)!=GetOwningPlayer(LSD)then
call SetUnitOwner(LTD,GetOwningPlayer(LSD),true)
endif
set LSD=null
set LTD=null
return false
endfunction
function LUD takes nothing returns nothing
local integer OB7=GetHandleId(GetTriggeringTrigger())
local unit LSD=O77(OB7,"NightStalker")
if LSD!=null and X67()and XH7(LSD)==false then
call UnitRemoveAbility(LSD,1093742902)
call UnitRemoveAbility(LSD,1093742903)
call SetUnitAbilityLevel(LSD,1395667009,5)
call SetUnitAbilityLevel(LSD,1093679171,5)
elseif LSD!=null and X67()==false and XH7(LSD)==false then
call XF7(LSD,1093742902)
call XF7(LSD,1093742903)
call SetUnitAbilityLevel(LSD,1395667009,GetUnitAbilityLevel(LSD,1093679158))
call SetUnitAbilityLevel(LSD,1093679171,GetUnitAbilityLevel(LSD,1093679173))
endif
set LSD=null
endfunction
function LVD takes unit LSD,boolean UA9,integer LWD returns nothing
local integer I97=GetHandleId(LSD)
local trigger t
if OO7(I97,"NightStalkerAlreadyLearned")==false or UA9 then
call NS7(I97,"NightStalkerAlreadyLearned",true)
set t=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(t,2.)
call TriggerRegisterGameStateEventTimeOfDay(t,LESS_THAN,6.)
call TriggerRegisterGameStateEventTimeOfDay(t,GREATER_THAN,18.)
call TriggerAddAction(t,function LUD)
call NT7(GetHandleId(t),"NightStalker",LSD)
if UA9 then
if LWD==1093679173 then
set aj[GetPlayerId(GetOwningPlayer(LSD))]=t
elseif LWD==1093679158 then
set nj[GetPlayerId(GetOwningPlayer(LSD))]=t
endif
endif
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function LRD))
call NT7(I97,"NightStalker",LSD)
call NT7(I97,"VisionUnit",CreateUnit(GetOwningPlayer(LSD),1865429313,GetUnitX(LSD),GetUnitY(LSD),0))
if UA9 then
if LWD==1093679173 then
set Rj[GetPlayerId(GetOwningPlayer(LSD))]=t
elseif LWD==1093679158 then
set Aj[GetPlayerId(GetOwningPlayer(LSD))]=t
endif
endif
endif
if(LWD==1093679158)then
call XF7(LSD,1395667009)
if(X67())then
call SetUnitAbilityLevel(LSD,1395667009,5)
else
call SetUnitAbilityLevel(LSD,1395667009,GetUnitAbilityLevel(LSD,1093679158))
endif
endif
if(LWD==1093679173)then
call UnitAddAbility(LSD,1093679171)
if(X67())then
call SetUnitAbilityLevel(LSD,1093679171,5)
else
call SetUnitAbilityLevel(LSD,1093679171,GetUnitAbilityLevel(LSD,1093679173))
endif
endif
set t=null
endfunction
function LXD takes nothing returns boolean
if(GetLearnedSkill()==1093679158 or GetLearnedSkill()==1093679173)and IsUnitIllusion(GetTriggerUnit())==false then
call LVD(GetTriggerUnit(),false,GetLearnedSkill())
endif
return false
endfunction
function I98 takes nothing returns nothing
set NJ=CreateTrigger()
call YB7(NJ,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(NJ,Condition(function LXD))
endfunction
function LYD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local integer B07=OM7(OB7,"TargetIndex")
local unit m5=TQ7(B07)
call UnitRemoveAbility(p5,1093747535)
call NM7(OB7)
call OZ7(t)
set t=null
set p5=null
set m5=null
return false
endfunction
function LZD takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer V77=GetUnitAbilityLevel(p5,1093685324)
local trigger t
local integer OB7
call DestroyEffect(AddSpecialEffect("war3mapImported\\PhantomStrike.mdx",GetUnitX(p5),GetUnitY(p5)))
call SetUnitX(p5,GetUnitX(m5))
call SetUnitY(p5,GetUnitY(m5))
if IsUnitAlly(p5,GetOwningPlayer(m5))==false then
set t=CreateTrigger()
set OB7=GetHandleId(t)
call XF7(p5,1093747535)
call NP7(GetHandleId(p5),"Count",0)
call NT7(GetHandleId(p5),"Target",m5)
call IssueTargetOrderById(p5,$D000F,m5)
if(GetPlayerController(GetOwningPlayer(p5))!=MAP_CONTROL_USER)then
call J_7(.01)
call IssueTargetOrderById(p5,$D000F,m5)
endif
call TriggerRegisterTimerEvent(t,3,false)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function LYD))
call NT7(OB7,"Source",p5)
call NP7(OB7,"TargetIndex",TS7(m5))
endif
set p5=null
set m5=null
set t=null
endfunction
function LAD takes nothing returns boolean
if GetSpellAbilityId()==1093685324 then
call LZD()
endif
return false
endfunction
function LBD takes unit p5 returns nothing
local integer OB7=GetHandleId(p5)
local unit m5=O77(OB7,"Target")
local integer SV9=OM7(OB7,"Count")
local integer V77=GetUnitAbilityLevel(p5,1093685324)
if GetTriggerUnit()!=m5 or SV9>=2+2*V77 then
call UnitRemoveAbility(p5,1093747535)
call NM7(OB7)
else
set SV9=SV9+1
call NP7(OB7,"Count",SV9)
endif
set m5=null
endfunction
function LCD takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093747535)>0 then
call LBD(GetAttacker())
endif
return false
endfunction
function IH8 takes nothing returns nothing
local trigger t=CreateTrigger()
local trigger t2=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function LAD))
call YB7(t2,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t2,Condition(function LCD))
set t=null
set t2=null
endfunction
function L3D takes unit ZX7,boolean L6D returns nothing
local integer BC7=GetUnitAbilityLevel(ZX7,1093677904)
if L6D==false then
call UnitRemoveAbility(ZX7,1093743430)
call UnitRemoveAbility(ZX7,1110458674)
else
call XF7(ZX7,1093743430)
endif
endfunction
function LLD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local group g
local integer WF8=(LoadInteger(L7,(I97),(34)))
local boolean L1D=(LoadBoolean(L7,(I97),(674)))
set WF8=WF8+1
call SaveInteger(L7,(I97),(34),(WF8))
if ZX7!=null and XH7(ZX7)==false and GetUnitAbilityLevel(ZX7,1093677904)>0 then
set IN4=ZX7
set g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),$659,Condition(function ANN))
if FirstOfGroup(g)!=null then
if L1D and WF8>7 then
set L1D=false
call SaveBoolean(L7,(I97),(674),(L1D))
set WF8=0
call SaveInteger(L7,(I97),(34),(WF8))
endif
if L1D==false then
set WF8=0
call SaveInteger(L7,(I97),(34),(WF8))
call SaveInteger(L7,(GetHandleId((ZX7))),((4302)),(2))
call L3D(ZX7,false)
call SetUnitVertexColorBJ(ZX7,100,100,100,0)
if GetUnitAbilityLevel(ZX7,1093808211)==0 then
call UnitSetUsesAltIcon(ZX7,false)
endif
endif
else
if L1D==false and WF8>7 then
set L1D=true
set WF8=0
call SaveBoolean(L7,(I97),(674),(L1D))
call SaveInteger(L7,(I97),(34),(WF8))
endif
if L1D then
set WF8=0
call SaveInteger(L7,(I97),(34),(WF8))
call SaveInteger(L7,(GetHandleId((ZX7))),((4302)),(1))
call L3D(ZX7,true)
call SetUnitVertexColorBJ(ZX7,100,100,100,75)
if IsPlayerEnemy(GetOwningPlayer(ZX7),GetLocalPlayer()) and WG7(GetLocalPlayer())==false then
call UnitSetUsesAltIcon(ZX7,true)
else
call UnitSetUsesAltIcon(ZX7,false)
endif
endif
endif
call WR7(g)
set g=null
endif
set t=null
set ZX7=null
return false
endfunction
function L0D takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function LLD))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveInteger(L7,(I97),(34),(0))
call SaveBoolean(L7,(I97),(674),(false))
set t=null
set ZX7=null
endfunction
function L5D takes nothing returns boolean
if GetLearnedSkill()==1093677904 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093677904)==1 then
call L0D()
endif
return false
endfunction
function IF8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function L5D))
set t=null
endfunction
function L2D takes nothing returns nothing
local unit BB7
if IsUnitInGroup(GetEnumUnit(),IQ4)==false then
call GroupAddUnit(IQ4,GetEnumUnit())
set BB7=CreateUnit(GetOwningPlayer(GetEnumUnit()),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
call XF7(BB7,1093685833)
call SetUnitAbilityLevel(BB7,1093685833,GetUnitAbilityLevel(ZS4,1093685825))
call IssueTargetOrderById(BB7,$D008A,GetEnumUnit())
call B67(ZS4,GetEnumUnit(),16,100+0*GetUnitAbilityLevel(ZS4,1093685825))
endif
set BB7=null
endfunction
function L_D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer i
local group g=OF7(OB7,"g")
local real x=ON7(OB7,"x")
local real y=ON7(OB7,"y")
local group D4E=WS7()
local unit S79=O77(OB7,"UnitVar")
set IN4=S79
set ZS4=S79
call GroupEnumUnitsInRange(D4E,x,y,300,Condition(function AJ7))
set IQ4=g
call ForGroup(D4E,function L2D)
call WR7(D4E)
if GetTriggerEvalCount(t)>ZQ4*$A then
set i=1
loop
exitwhen i>16
call DestroyEffect(OG7(OB7,"Effect"+I2S(i)))
set i=i+1
endloop
call WR7(g)
call NM7(OB7)
call OZ7(t)
endif
set t=null
set g=null
set D4E=null
set S79=null
return false
endfunction
function D7E takes nothing returns nothing
local integer i=1
local location l=GetSpellTargetLoc()
local real D8E=GetLocationX(l)
local real D9E=GetLocationY(l)
local real x
local real y
local integer DDE=16
local string fx="Abilities\\Spells\\Undead\\Graveyard\\GraveMarker.mdl"
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local group g=WS7()
call Y17(WN,D8E,D9E)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function L_D))
call NB7(I97,"g",g)
call NT7(I97,"UnitVar",GetTriggerUnit())
call NQ7(I97,"x",D8E)
call NQ7(I97,"y",D9E)
loop
exitwhen i>DDE
set x=D8E+ZR4*Cos(i*360/DDE*bj_DEGTORAD)
set y=D9E+ZR4*Sin(i*360/DDE*bj_DEGTORAD)
call NU7(I97,"Effect"+I2S(i),AddSpecialEffect(fx,x,y))
if i==1 or i==5 or i==9 or i==$D then
set x=D8E+275*Cos(i*360/DDE*bj_DEGTORAD)
set y=D9E+275*Sin(i*360/DDE*bj_DEGTORAD)
endif
set i=i+1
endloop
call RemoveLocation(l)
set l=null
set t=null
set g=null
endfunction
function DEE takes nothing returns boolean
if GetSpellAbilityId()==1093685825 then
call D7E()
endif
return false
endfunction
function KX8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DEE))
set t=null
endfunction
function DFE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit p5=O77(I97,"Source")
local unit BB7=O77(I97,"DarkRiftFXUnit")
local integer V77=OM7(I97,"Level")
local integer DGE=90
local integer WF8=OM7(I97,"Count")
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093815618 then
call KillUnit(BB7)
call OZ7(t)
call FlushChildHashtable(L7,(I97))
else
set WF8=WF8+1
call NP7(I97,"Count",WF8)
endif
if V77==1 then
set DGE=$A0
elseif V77==2 then
set DGE=120
endif
call SetUnitX(BB7,GetUnitX(p5))
call SetUnitY(BB7,GetUnitY(p5))
if WF8>DGE then
call KillUnit(BB7)
call OZ7(t)
call NM7(I97)
elseif WF8>30 then
call UnitRemoveAbility(BB7,1097625443)
call ShowUnit(BB7,true)
call XF7(BB7,1097625443)
endif
set t=null
set BB7=null
set p5=null
return false
endfunction
function DHE takes nothing returns nothing
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))
call O37(GetEnumUnit(),"4406",1)
call SetUnitPosition(GetEnumUnit(),IJ4,IK4)
call PanCameraToTimedForPlayer(GetOwningPlayer(GetEnumUnit()),IJ4,IK4,0)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))
call UQ7(GetEnumUnit())
endfunction
function DIE takes unit p5,unit m5 returns nothing
local group g=WS7()
call DestroyEffect(AddSpecialEffect("Doodads\\Cinematic\\ShimmeringPortal\\ShimmeringPortal.mdl",GetUnitX(p5),GetUnitY(p5)))
call DestroyEffect(AddSpecialEffect("Doodads\\Cinematic\\ShimmeringPortal\\ShimmeringPortal.mdl",GetUnitX(m5),GetUnitY(m5)))
set IJ4=GetUnitX(m5)
set IK4=GetUnitY(m5)
set IN4=p5
call GroupEnumUnitsInRange(g,GetUnitX(p5),GetUnitY(p5),475,Condition(function B87))
call ForGroup(g,function DHE)
call WR7(g)
set g=null
endfunction
function DJE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit p5=O77(I97,"Source")
local unit m5=O77(I97,"Target")
call DestroyEffect(OG7(I97,"FX"))
if GetTriggerEventId()==EVENT_UNIT_DEATH or m5==null or XH7(m5)then
call OZ7(t)
call FlushChildHashtable(L7,(I97))
call UnitRemoveType(m5,UNIT_TYPE_PEON)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093685808,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093815618,false)
call X37(GetOwningPlayer(p5),GetObjectName(1848652614))
elseif p5==null or XH7(p5)then
call OZ7(t)
call FlushChildHashtable(L7,(I97))
call UnitRemoveType(m5,UNIT_TYPE_PEON)
call X37(GetOwningPlayer(p5),GetObjectName(1848652615))
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093685808,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093815618,false)
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093815618 then
call OZ7(t)
call FlushChildHashtable(L7,(I97))
call UnitRemoveType(m5,UNIT_TYPE_PEON)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093685808,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093815618,false)
endif
else
call OZ7(t)
call FlushChildHashtable(L7,(I97))
call UnitRemoveType(m5,UNIT_TYPE_PEON)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093685808,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093815618,false)
call DIE(p5,m5)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function DKE takes nothing returns boolean
local real d
if IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false or GetUnitAbilityLevel(GetFilterUnit(),1093678162)>0 or GetOwningPlayer(GetFilterUnit())==Player($F)then
return false
endif
if IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)or(IH4>0 and G79(GetFilterUnit()))then
set d=KF7(IK4,IM4,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))
if d<IJ4 then
set IJ4=d
set IN4=GetFilterUnit()
endif
endif
return false
endfunction
function DME takes unit p5 returns unit
local location l
local group g
local real x
local real y
set l=GetSpellTargetLoc()
set x=GetLocationX(l)
set y=GetLocationY(l)
set g=WS7()
set IH4=GetUnitAbilityLevel(p5,1093685808)
set IN4=null
set IJ4=9999
set IK4=x
set IM4=y
call GroupEnumUnitsInRange(g,x,y,$FA0,Condition(function DKE))
call WR7(g)
call RemoveLocation(l)
set l=null
set g=null
return IN4
endfunction
function DNE takes unit p5 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit m5=GetSpellTargetUnit()
local unit u
if m5==null then
set m5=DME(p5)
endif
if m5==null then
call X37(GetOwningPlayer(p5),GetObjectName(1848652616))
return
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093685808,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093815618,true)
call XF7(p5,1093815618)
call TriggerRegisterTimerEvent(t,4-GetUnitAbilityLevel(p5,1093685808),false)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DJE))
call NU7(I97,"FX",AddSpecialEffectTarget("war3mapImported\\DarkHands.mdl",m5,"overhead"))
call NT7(I97,"Source",p5)
call NT7(I97,"Target",m5)
call UnitAddType(m5,UNIT_TYPE_PEON)
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DFE))
call NP7(I97,"Level",GetUnitAbilityLevel(p5,1093685808))
call NT7(I97,"Source",p5)
set u=CreateUnit(GetOwningPlayer(p5),1747990840,GetUnitX(p5),GetUnitY(p5),0)
call NT7(I97,"DarkRiftFXUnit",u)
call ShowUnit(u,false)
set t=null
set m5=null
set u=null
endfunction
function DOE takes nothing returns nothing
local unit IH7=GetSpellTargetUnit()
local unit WX7=GetTriggerUnit()
if IH7!=null then
if IsUnitAlly(IH7,GetOwningPlayer(WX7))==false then
call KR7(WX7)
call X37(GetOwningPlayer(WX7),GetObjectName(1848652849))
elseif GetUnitAbilityLevel(WX7,1093685808)>0 and G79(IH7)==false then
call KR7(WX7)
call X37(GetOwningPlayer(WX7),GetObjectName(1848652849))
endif
endif
if IH7==null then
set IH7=DME(WX7)
endif
if IH7==null then
call KR7(WX7)
call X37(GetOwningPlayer(WX7),GetObjectName(1848652848))
endif
set IH7=null
set WX7=null
endfunction
function DPE takes nothing returns boolean
if GetSpellAbilityId()==1093685808 then
call DOE()
endif
return false
endfunction
function DQE takes nothing returns boolean
if GetSpellAbilityId()==1093685808 then
call DNE(GetTriggerUnit())
endif
return false
endfunction
function KV8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function DPE))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DQE))
set t=null
call XO7(1747990836)
call XO7(1747990837)
call XO7(1747990838)
endfunction
function DRE takes nothing returns nothing
call B67(ZU4,GetEnumUnit(),1,ZT4)
endfunction
function DSE takes nothing returns nothing
call SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+ZT4*.5)
endfunction
function DTE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit WX7=O77(I97,"Hero")
local real x=ON7(I97,"x")
local real y=ON7(I97,"y")
local group g=WS7()
local real r1=600
local real r2=600
local unit DUE
set x=GetUnitX(WX7)
set y=GetUnitY(WX7)
call GroupEnumUnitsInRange(g,x,y,r1,Condition(function BE7))
set DUE=FirstOfGroup(g)
call WR7(g)
if DUE==null then
if OO7(I97,"NoCorpse1")and OO7(I97,"NoCorpse2")then
call UnitRemoveAbility(WX7,1093810227)
call NM7(I97)
call OZ7(t)
else
if OO7(I97,"NoCorpse1")==false then
call NS7(I97,"NoCorpse1",true)
else
call NS7(I97,"NoCorpse2",true)
endif
endif
else
set x=GetUnitX(DUE)
set y=GetUnitY(DUE)
call NS7(I97,"NoCorpse1",false)
call NS7(I97,"NoCorpse2",false)
call NM7(GetHandleId(DUE))
call DestroyEffect(AddSpecialEffect("war3mapImported\\CorpseExplosion.mdx",x,y))
call RemoveUnit(DUE)
set g=WS7()
set IN4=WX7
set ZU4=WX7
set ZT4=20*GetUnitAbilityLevel(WX7,1093810232)
call GroupEnumUnitsInRange(g,x,y,r2,Condition(function AJ7))
call ForGroup(g,function DRE)
set IN4=WX7
call GroupEnumUnitsInRange(g,x,y,r2,Condition(function AB7))
call ForGroup(g,function DSE)
call WR7(g)
endif
set g=null
set WX7=null
set DUE=null
set t=null
return false
endfunction
function DVE takes nothing returns nothing
local real x=GetUnitX(GetTriggerUnit())
local real y=GetUnitY(GetTriggerUnit())
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call Y17(Y54,x,y)
call TriggerRegisterTimerEvent(t,1.5,true)
call TriggerAddCondition(t,Condition(function DTE))
call XF7(GetTriggerUnit(),1093810227)
call NT7(I97,"Hero",GetTriggerUnit())
call NQ7(I97,"x",x)
call NQ7(I97,"y",y)
call NS7(I97,"NoCorpse1",false)
call NS7(I97,"NoCorpse2",false)
set t=null
endfunction
function DWE takes nothing returns boolean
if GetSpellAbilityId()==1093810232 then
call DVE()
endif
return false
endfunction
function KW8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DWE))
set t=null
endfunction
function DXE takes nothing returns nothing
endfunction
function DYE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(O77(I97,"Source"))
local unit BB7=(O77(I97,"Caster"))
local group g=WS7()
set IN4=ZX7
set FS7=GetUnitAbilityLevel(ZX7,1093677385)*$A+$A
call GroupEnumUnitsInRange(g,GetUnitX(BB7),GetUnitY(BB7),425,Condition(function AB7))
call ForGroup(g,function DXE)
call WR7(g)
if GetTriggerEvalCount(t)==5 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set BB7=null
return false
endfunction
function DZE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local integer BC7=GetUnitAbilityLevel(ZX7,1093677385)
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,x,y,0)
call TriggerAddCondition(t,Condition(function DYE))
call TriggerRegisterTimerEvent(t,1,true)
call NT7(I97,"Source",ZX7)
call NT7(I97,"Caster",BB7)
call XF7(BB7,1093809714)
call SetUnitAbilityLevel(BB7,1093809714,BC7)
call IssuePointOrderById(BB7,$D010E,x,y)
set ZX7=null
set BB7=null
endfunction
function DAE takes nothing returns boolean
if GetSpellAbilityId()==1093677385 then
call DZE()
endif
return false
endfunction
function KY8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DAE))
set t=null
endfunction
function DBE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093809233)
local integer DCE
local real D3E
local real D6E=3+BC7
if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetTriggerEvalCount(t)>4*D6E then
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call UnitRemoveAbility(IH7,1093809242)
call UnitRemoveAbility(IH7,1093809456)
call UnitRemoveAbility(IH7,1093809240)
call UnitRemoveAbility(IH7,1093809457)
call UnitRemoveAbility(IH7,1093809241)
call UnitRemoveAbility(IH7,1110459720)
else
set D3E=100*GetUnitState(IH7,UNIT_STATE_LIFE)/GetUnitState(IH7,UNIT_STATE_MAX_LIFE)
if D3E<20 then
set DCE=5
elseif D3E<40 then
set DCE=4
elseif D3E<60 then
set DCE=3
elseif D3E<80 then
set DCE=2
else
set DCE=1
endif
if DCE==1 then
if GetUnitAbilityLevel(IH7,1093809242)==0 then
call UnitRemoveAbility(IH7,1093809456)
call UnitRemoveAbility(IH7,1093809240)
call UnitRemoveAbility(IH7,1093809457)
call UnitRemoveAbility(IH7,1093809241)
call UnitRemoveAbility(IH7,1110459720)
call UnitAddAbility(IH7,1093809242)
endif
elseif DCE==2 then
if GetUnitAbilityLevel(IH7,1093809456)==0 then
call UnitRemoveAbility(IH7,1093809242)
call UnitRemoveAbility(IH7,1093809240)
call UnitRemoveAbility(IH7,1093809457)
call UnitRemoveAbility(IH7,1093809241)
call UnitRemoveAbility(IH7,1110459720)
call UnitAddAbility(IH7,1093809456)
endif
elseif DCE==3 then
if GetUnitAbilityLevel(IH7,1093809240)==0 then
call UnitRemoveAbility(IH7,1093809242)
call UnitRemoveAbility(IH7,1093809456)
call UnitRemoveAbility(IH7,1093809457)
call UnitRemoveAbility(IH7,1093809241)
call UnitRemoveAbility(IH7,1110459720)
call UnitAddAbility(IH7,1093809240)
endif
elseif DCE==4 then
if GetUnitAbilityLevel(IH7,1093809457)==0 then
call UnitRemoveAbility(IH7,1093809242)
call UnitRemoveAbility(IH7,1093809456)
call UnitRemoveAbility(IH7,1093809240)
call UnitRemoveAbility(IH7,1093809241)
call UnitRemoveAbility(IH7,1110459720)
call UnitAddAbility(IH7,1093809457)
endif
elseif DCE==5 then
if GetUnitAbilityLevel(IH7,1093809241)==0 then
call UnitRemoveAbility(IH7,1093809242)
call UnitRemoveAbility(IH7,1093809456)
call UnitRemoveAbility(IH7,1093809240)
call UnitRemoveAbility(IH7,1093809457)
call UnitRemoveAbility(IH7,1110459720)
call UnitAddAbility(IH7,1093809241)
endif
endif
call B67(ZX7,IH7,1,.01*4*.25*GetUnitState(IH7,UNIT_STATE_MAX_LIFE))
if ModuloInteger(GetTriggerEvalCount(t),4)==0 then
call CreateCorpse(GetOwningPlayer(ZX7),1969711215,GetUnitX(IH7),GetUnitY(IH7),0)
endif
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function DLE takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093809233)
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("effects\\EntanglingBonesTarget.mdx",IH7,"chest")))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerAddCondition(t,Condition(function DBE))
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093809242,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093809456,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093809240,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093809457,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093809241,false)
set ZX7=null
set IH7=null
set t=null
endfunction
function D1E takes nothing returns boolean
if GetSpellAbilityId()==1093809233 and WQ7(GetSpellTargetUnit())==false then
call DLE()
endif
return false
endfunction
function KZ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function D1E))
set t=null
endfunction
function D0E takes unit ZX7,integer D5E returns nothing
call SaveInteger(L7,(GetHandleId(ZX7)),(687),(D5E))
call UnitRemoveAbility(ZX7,1093809496)
call UnitRemoveAbility(ZX7,1093809497)
call UnitRemoveAbility(ZX7,1093809498)
call UnitRemoveAbility(ZX7,1093809492)
call UnitRemoveAbility(ZX7,1093809494)
call UnitRemoveAbility(ZX7,1093809493)
call UnitRemoveAbility(ZX7,1093809491)
call UnitRemoveAbility(ZX7,1093809490)
call UnitRemoveAbility(ZX7,1093809495)
call UnitRemoveAbility(ZX7,1093809712)
call UnitRemoveAbility(ZX7,1093809741)
call UnitRemoveAbility(ZX7,1093809740)
call UnitRemoveAbility(ZX7,1093809735)
call UnitRemoveAbility(ZX7,1093809736)
call UnitRemoveAbility(ZX7,1093809734)
call UnitRemoveAbility(ZX7,1093809733)
call UnitRemoveAbility(ZX7,1093809462)
call UnitRemoveAbility(ZX7,1093809737)
call UnitRemoveAbility(ZX7,1093809738)
call UnitRemoveAbility(ZX7,1093809739)
call UnitRemoveAbility(ZX7,1093809732)
if D5E==0 then
call UnitAddAbility(ZX7,1093809741)
endif
if D5E==1 then
call XF7(ZX7,1093809496)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093809496,false)
call UnitAddAbility(ZX7,1093809740)
elseif D5E==2 then
call XF7(ZX7,1093809497)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093809497,false)
call UnitAddAbility(ZX7,1093809735)
elseif D5E==3 then
call XF7(ZX7,1093809498)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093809498,false)
call UnitAddAbility(ZX7,1093809736)
elseif D5E==4 then
call XF7(ZX7,1093809492)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093809492,false)
call UnitAddAbility(ZX7,1093809734)
elseif D5E==5 then
call XF7(ZX7,1093809494)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093809494,false)
call UnitAddAbility(ZX7,1093809733)
elseif D5E==6 then
call XF7(ZX7,1093809493)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093809493,false)
call UnitAddAbility(ZX7,1093809462)
elseif D5E==7 then
call XF7(ZX7,1093809491)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093809491,false)
call UnitAddAbility(ZX7,1093809737)
elseif D5E==8 then
call XF7(ZX7,1093809490)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093809490,false)
call UnitAddAbility(ZX7,1093809738)
elseif D5E==9 then
call XF7(ZX7,1093809495)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093809495,false)
call UnitAddAbility(ZX7,1093809739)
elseif D5E==$A then
call XF7(ZX7,1093809712)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093809712,false)
call UnitAddAbility(ZX7,1093809732)
endif
endfunction
function D2E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local integer D5E=(LoadInteger(L7,(GetHandleId(ZX7)),(687)))
local group g
local unit DUE
local integer BC7=GetUnitAbilityLevel(ZX7,1093809713)
local integer D_E=2+2*BC7
if D5E<D_E and XH7(ZX7)==false then
set g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),925,Condition(function BE7))
set DUE=FirstOfGroup(g)
call WR7(g)
if DUE!=null then
set D5E=D5E+1
call D0E(ZX7,D5E)
call ZF7((DUE),(ZX7),1747993654,"CorpseCollector_FX_Nothing",400)
call RemoveUnit(DUE)
endif
endif
set t=null
set ZX7=null
set DUE=null
return false
endfunction
function E4E takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,4,true)
call TriggerAddCondition(t,Condition(function D2E))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set t=null
set ZX7=null
endfunction
function E7E takes nothing returns nothing
call B67(ZX4,GetEnumUnit(),1,ZY4)
endfunction
function E8E takes unit ZX7,integer BC7,real Y_7,real Z47,integer D5E,boolean I79 returns nothing
local group g=WS7()
set ZX4=ZX7
set ZY4=30*D5E
if I79 then
set ZY4=ZY4+$A*D5E
endif
set IN4=ZX7
call GroupEnumUnitsInRange(g,Y_7,Z47,350,Condition(function AJ7))
call ForGroup(g,function E7E)
call WR7(g)
endfunction
function E9E takes unit ZX7,real TR9,real TS9 returns boolean
local real Y_7=(LoadReal(L7,(GetHandleId(ZX7)),(690)))
local real Z47=(LoadReal(L7,(GetHandleId(ZX7)),(691)))
if Y_7==0 and Z47==0 then
return false
endif
if KF7(TR9,TS9,Y_7,Z47)<425 then
return true
endif
return false
endfunction
function EDE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local integer D5E=(LoadInteger(L7,(I97),(34)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093809713)
local integer i=1
local unit BB7
local real Y_7=(LoadReal(L7,(I97),(47)))
local real Z47=(LoadReal(L7,(I97),(48)))
local real x
local real y
local real a=(LoadReal(L7,(I97),($89)))
local boolean I79=(LoadBoolean(L7,(I97),(688)))
local boolean EEE=(LoadBoolean(L7,(I97),(689)))
local real EFE=(LoadReal(L7,(I97),(549)))
local real EGE=(LoadReal(L7,(I97),(567)))
set EFE=X17(EFE+$A*Cos(a))
set EGE=X07(EGE+$A*Sin(a))
call SaveReal(L7,(I97),(549),((EFE)*1.))
call SaveReal(L7,(I97),(567),((EGE)*1.))
if I79==false then
set I79=E9E(ZX7,EFE,EGE)
if I79 then
call SaveBoolean(L7,(I97),(688),(I79))
endif
endif
if I79 and EEE==false then
set EEE=true
call SaveBoolean(L7,(I97),(689),(EEE))
loop
exitwhen i>D5E
set BB7=(LoadUnitHandle(L7,(I97),(393+i)))
call SaveEffectHandle(L7,(I97),(609+i),(AddSpecialEffectTarget("war3mapImported\\CorpseFire.mdx",BB7,"origin")))
set i=i+1
endloop
endif
set i=1
if KF7(EFE,EGE,Y_7,Z47)<$F then
loop
exitwhen i>D5E
if I79 then
call DestroyEffect((LoadEffectHandle(L7,(I97),(609+i))))
endif
call KillUnit((LoadUnitHandle(L7,(I97),(393+i))))
set i=i+1
endloop
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call E8E(ZX7,BC7,Y_7,Z47,D5E,I79)
else
loop
exitwhen i>D5E
set BB7=(LoadUnitHandle(L7,(I97),(393+i)))
set x=(LoadReal(L7,(I97),(549+i)))
set y=(LoadReal(L7,(I97),(567+i)))
set x=X17(x+$A*Cos(a))
set y=X07(y+$A*Sin(a))
call SaveReal(L7,(I97),(549+i),((x)*1.))
call SaveReal(L7,(I97),(567+i),((y)*1.))
call SetUnitX(BB7,x)
call SetUnitY(BB7,y)
set i=i+1
endloop
endif
set t=null
set BB7=null
set ZX7=null
return false
endfunction
function EHE takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local real Y_7=GetSpellTargetX()
local real Z47=GetSpellTargetY()
local integer BC7=GetUnitAbilityLevel(ZX7,1093809713)
local integer D5E=(LoadInteger(L7,(GetHandleId(ZX7)),(687)))
local integer i=1
local unit BB7
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local real x=GetUnitX(ZX7)
local real y=GetUnitY(ZX7)
local real a=J77(GetUnitX(ZX7),GetUnitY(ZX7),Y_7,Z47)*bj_DEGTORAD
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveInteger(L7,(I97),(34),(D5E))
call SaveReal(L7,(I97),(47),((Y_7)*1.))
call SaveReal(L7,(I97),(48),((Z47)*1.))
call SaveReal(L7,(I97),($89),((a)*1.))
call SaveReal(L7,(I97),(549),((x)*1.))
call SaveReal(L7,(I97),(567),((y)*1.))
call SaveBoolean(L7,(I97),(688),(false))
call SaveBoolean(L7,(I97),(689),(false))
loop
exitwhen i>D5E
set BB7=CreateUnit(GetOwningPlayer(ZX7),1747993655,x+GetRandomInt(-$C8,$C8),y+GetRandomInt(-$C8,$C8),0)
call SaveUnitHandle(L7,(I97),(393+i),(BB7))
call SaveReal(L7,(I97),(549+i),((GetUnitX(BB7))*1.))
call SaveReal(L7,(I97),(567+i),((GetUnitY(BB7))*1.))
set i=i+1
endloop
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function EDE))
call D0E(ZX7,0)
set ZX7=null
set t=null
set BB7=null
endfunction
function EIE takes nothing returns boolean
if GetSpellAbilityId()==1093809713 then
call EHE()
endif
return false
endfunction
function EJE takes nothing returns boolean
if GetLearnedSkill()==1093809713 and GetUnitAbilityLevel(GetTriggerUnit(),1093809713)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call E4E()
endif
return false
endfunction
function KA8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function EIE))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function EJE))
set t=null
endfunction
function EKE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real x=(LoadReal(L7,(I97),(6)))
local real y=(LoadReal(L7,(I97),(7)))
local unit EME
if GetTriggerEventId()==EVENT_UNIT_SPELL_FINISH then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call KillUnit(BB7)
call UnitApplyTimedLife(BB7,1112820806,.1)
elseif XH7(BB7)then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
call SaveReal(L7,(I97),(6),((GetUnitX(BB7))*1.))
call SaveReal(L7,(I97),(7),((GetUnitY(BB7))*1.))
if x!=GetUnitX(BB7)or y!=GetUnitY(BB7)then
call UnitRemoveAbility(BB7,1093815348)
else
call UnitAddAbility(BB7,1093815348)
endif
endif
return false
endfunction
function ENE takes nothing returns boolean
return GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(FT7)and GetUnitTypeId(GetFilterUnit())==1966092633
endfunction
function EOE takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1966092633,GetUnitX(ZX7)+100,GetUnitY(ZX7)+100,0)
local group g
local integer BC7=GetUnitAbilityLevel(ZX7,1093815350)
local real VM8
local unit EPE
local unit EQE
call TriggerRegisterUnitEvent(t,BB7,EVENT_UNIT_SPELL_FINISH)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function EKE))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(19),(BB7))
call SaveReal(L7,(I97),(6),((GetUnitX(BB7))*1.))
call SaveReal(L7,(I97),(7),((GetUnitY(BB7))*1.))
call UnitAddAbility(BB7,1093815348)
call SetUnitAbilityLevel(BB7,1093815349,GetUnitAbilityLevel(ZX7,1093815350))
call SaveReal(L7,(GetHandleId(BB7)),(34),(((TimerGetElapsed(W)))*1.))
set FT7=ZX7
set g=WS7()
call GroupEnumUnitsInRange(g,0,0,99999,Condition(function ENE))
if CountUnitsInGroup(g)>BC7+1 then
set EQE=FirstOfGroup(g)
set VM8=(LoadReal(L7,(GetHandleId(EQE)),(34)))
set EPE=EQE
call GroupRemoveUnit(g,EQE)
loop
exitwhen EQE==null
if VM8>(LoadReal(L7,(GetHandleId(EQE)),(34)))then
set VM8=(LoadReal(L7,(GetHandleId(EQE)),(34)))
set EPE=EQE
endif
set EQE=FirstOfGroup(g)
call GroupRemoveUnit(g,EQE)
endloop
call KillUnit(EPE)
endif
call WR7(g)
set g=null
set BB7=null
set ZX7=null
set t=null
endfunction
function ERE takes nothing returns boolean
if GetSpellAbilityId()==1093815350 then
call EOE()
endif
return false
endfunction
function KB8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ERE))
endfunction
function ESE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local integer I79=(LoadInteger(L7,(I97),(34)))
call SaveInteger(L7,(GetHandleId(ZX7)),(783),((LoadInteger(L7,(GetHandleId(ZX7)),(783)))-I79))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set ZX7=null
set t=null
return false
endfunction
function ETE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit XK7=GetTriggerUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1095328612)
local integer I79
local integer YX8
if IsUnitInRange(ZX7,XK7,900+25)and XH7(ZX7)==false and IsUnitAlly(ZX7,GetOwningPlayer(XK7))==false and GetUnitTypeId(XK7)!=1848657461 and IsUnitIllusion(XK7)==false and LB7(GetUnitTypeId(XK7))==false and GetUnitAbilityLevel(XK7,1093678162)==0 then
set YX8=(LoadInteger(L7,(GetHandleId(ZX7)),(783)))
if IsUnitType(XK7,UNIT_TYPE_HERO) then
set I79=30
else
set I79=5
endif
set YX8=YX8+I79
call SaveInteger(L7,(GetHandleId(ZX7)),(783),(YX8))
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,25+BC7*0,false)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerAddCondition(t,Condition(function ESE))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveInteger(L7,(I97),(34),(I79))
endif
set t=null
set ZX7=null
set XK7=null
return false
endfunction
function EUE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local integer YX8=(LoadInteger(L7,(GetHandleId(ZX7)),(783)))
local integer O1D=(LoadInteger(L7,(I97),($EE)))
if O1D!=YX8 then
call B_7(ZX7,YX8)
call SaveInteger(L7,(I97),($EE),(YX8))
endif
set t=null
set ZX7=null
return false
endfunction
function EVE takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call YB7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function ETE))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerAddCondition(t,Condition(function EUE))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set ZX7=null
set t=null
endfunction
function EWE takes nothing returns boolean
if GetLearnedSkill()==1095328612 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1095328612)==1 then
call EVE()
endif
return false
endfunction
function KC8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function EWE))
set t=null
endfunction
function EXE takes nothing returns boolean
return GetUnitAbilityLevel(GetTriggerUnit(),1093678667)>0
endfunction
function EYE takes nothing returns nothing
if(GetIssuedOrderId()==$D00D1)then
if(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_USER)then
call XF7(GetTriggerUnit(),1093681498)
else
call J_7(.1)
if(GetUnitAbilityLevel(GetTriggerUnit(),1110454868)>0)then
call UnitAddAbility(GetTriggerUnit(),1093681498)
endif
endif
elseif(GetIssuedOrderId()==$D00D2)then
if(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_USER)then
call UnitRemoveAbility(GetTriggerUnit(),1093681498)
else
call J_7(.1)
if(GetUnitAbilityLevel(GetTriggerUnit(),1110454868)==0)then
call UnitRemoveAbility(GetTriggerUnit(),1093681498)
endif
endif
endif
endfunction
function II8 takes nothing returns nothing
local trigger t=CreateTrigger()
call ky(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function EXE))
call TriggerAddAction(t,function EYE)
set t=null
endfunction
function EZE takes nothing returns nothing
local integer I97=GetHandleId(GetEnumUnit())
if GetTriggerUnit()!=GetEnumUnit()then
call SaveInteger(L7,(I97),(672),((LoadInteger(L7,(I97),(672)))+1))
endif
endfunction
function EAE takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==1429221446 and IsUnitIllusion(GetFilterUnit())==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))
endfunction
function EBE takes nothing returns boolean
local group g
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) and LB7(GetUnitTypeId(GetTriggerUnit()))==false and IsUnitIllusion(GetTriggerUnit())==false then
set g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),475,Condition(function EAE))
if GetUnitTypeId(GetKillingUnit())==1429221446 then
call GroupAddUnit(g,GetKillingUnit())
endif
call ForGroup(g,function EZE)
call WR7(g)
set g=null
endif
return false
endfunction
function ECE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit p5=(LoadUnitHandle(L7,(I97),(2)))
if GetTriggerEvalCount(t)==1 then
call ShowUnit(p5,false)
elseif GetTriggerEvalCount(t)>80 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set p5=null
return false
endfunction
function E3E takes nothing returns boolean
local unit BB7
local unit p5
local unit XK7
local trigger t
local integer I97
if GetUnitTypeId(GetTriggerUnit())==1429221446 then
set p5=GetTriggerUnit()
set XK7=GetKillingUnit()
if p5==XK7 then
set BB7=CreateUnit(GetOwningPlayer(p5),1747993154,GetUnitX(p5),GetUnitY(p5),GetUnitFacing(p5))
call SetUnitTimeScale(BB7,.75)
call UnitApplyTimedLife(BB7,1112820806,1.)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodAbomination.mdl",BB7,"origin"))
set BB7=null
call SetSoundPosition(JP,GetUnitX(p5),GetUnitY(p5),50)
call SetSoundVolumeBJ(JP,100)
call PlaySoundBJ(JP)
call SetSoundPosition(KP,GetUnitX(p5),GetUnitY(p5),50)
call SetSoundVolumeBJ(KP,100)
call PlaySoundBJ(KP)
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function ECE))
call SaveUnitHandle(L7,(I97),(2),(p5))
set t=null
endif
set p5=null
set XK7=null
endif
return false
endfunction
function E6E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local unit ZX7=(LoadUnitHandle(L7,(GetHandleId(t)),(2)))
local integer I97=GetHandleId(ZX7)
local integer ELE=(LoadInteger(L7,(I97),(672)))
local integer E1E=(LoadInteger(L7,(I97),(673)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093678660)
local integer E0E=R2I(I2R(ELE)*(.5+.5*BC7))
if E0E>E1E then
call ModifyHeroStat(0,ZX7,bj_MODIFYMETHOD_ADD,E0E-E1E)
call SaveInteger(L7,(I97),(673),(E0E))
call YW7("+"+I2S(E0E-E1E)+" "+GetObjectName(1848659274),3,ZX7,.023,0,$FF,0,$E6)
endif
set t=null
set ZX7=null
return false
endfunction
function E5E takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function E6E))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set ZX7=null
set t=null
endfunction
function E2E takes nothing returns boolean
if GetLearnedSkill()==1093678660 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093678660)==1 then
call E5E()
endif
return false
endfunction
function E_E takes nothing returns boolean
if GetUnitTypeId(M7[GetPlayerId(GetTriggerPlayer())])==1429221446 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,10.,GetObjectName(1848654162)+" "+I2S((LoadInteger(L7,(GetHandleId(M7[GetPlayerId(GetTriggerPlayer())])),(673))))+" "+GetObjectName(1848654163))
endif
return false
endfunction
function IJ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function E2E))
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-st",true)
call TriggerAddCondition(t,Condition(function E_E))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function E3E))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function EBE))
set t=null
endfunction
function F4E takes unit ZX7,unit IH7 returns nothing
local unit BB7=CreateUnit(GetOwningPlayer(IH7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
local unit EME=CreateUnit(GetOwningPlayer(ZX7),1697657409,GetUnitX(IH7),GetUnitY(IH7),0)
call XF7(BB7,1093685338)
call IssueTargetOrderById(BB7,$D007F,IH7)
call UnitApplyTimedLife(BB7,1112820806,1)
call UnitApplyTimedLife(EME,1112820806,1)
set BB7=null
set EME=null
endfunction
function F7E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer F8E=OM7(OB7,"LinkNumber")
local boolean F9E=OO7(OB7,"FoundTarget")
local unit m5
local unit FDE=O77(OB7,"Link"+I2S(F8E))
if F9E then
set m5=O77(OB7,"Target")
call SetUnitX(m5,GetUnitX(FDE))
call SetUnitY(m5,GetUnitY(FDE))
endif
call RemoveUnit(FDE)
set F8E=F8E-1
call NP7(OB7,"LinkNumber",F8E)
if F8E==0 then
call NM7(OB7)
call OZ7(t)
if IsUnitInRegion(BKDD,m5) then 
call OA1(m5) 
endif
endif
set t=null
set m5=null
set FDE=null
return false
endfunction
function FEE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer F8E=OM7(OB7,"LinkNumber")
local integer V77=OM7(OB7,"Level")
local real l4=ON7(OB7,"Angle")
local unit WI7=O77(OB7,"Hero")
local trigger FFE=OE7(OB7,"RetractTrigger")
local integer FGE=GetHandleId(FFE)
local group g
local unit u
local real x
local real y
if F8E<18+2*V77 then
set F8E=F8E+1
call NP7(OB7,"LinkNumber",F8E)
set x=GetUnitX(WI7)+F8E*40*Cos(l4*bj_DEGTORAD)
set y=GetUnitY(WI7)+F8E*40*Sin(l4*bj_DEGTORAD)
call NT7(FGE,"Link"+I2S(F8E),CreateUnit(GetOwningPlayer(WI7),1966092360,x,y,l4))
set g=WS7()
call GroupEnumUnitsInRange(g,x,y,110,Condition(function B47))
call GroupRemoveUnit(g,WI7)
set u=GroupPickRandomUnit(g)
call WR7(g)
if u!=null then
call NM7(OB7)
call OZ7(t)
call TriggerRegisterTimerEvent(FFE,.03,true)
call TriggerAddCondition(FFE,Condition(function F7E))
call NP7(FGE,"LinkNumber",F8E)
call NS7(FGE,"FoundTarget",true)
call NT7(FGE,"Target",u)
if IsUnitEnemy(u,GetOwningPlayer(WI7))then
if IsUnitType(u,UNIT_TYPE_HERO) then
call C27("HA_Hits"+I2S(GetPlayerId(GetOwningPlayer(WI7))),R74[GetPlayerId(GetOwningPlayer(WI7))])
set R74[GetPlayerId(GetOwningPlayer(WI7))]=R74[GetPlayerId(GetOwningPlayer(WI7))]+1
call O37(WI7,"4400",1.5)
endif
set R84[GetPlayerId(GetOwningPlayer(WI7))]=R84[GetPlayerId(GetOwningPlayer(WI7))]+1
call C27("HA_Total"+I2S(GetPlayerId(GetOwningPlayer(WI7))),R84[GetPlayerId(GetOwningPlayer(WI7))])
call F4E(WI7,u)
if GetUnitAbilityLevel(WI7,1093817137)>0 then
call B67(WI7,u,3,75+100*V77)
else
call B67(WI7,u,3,90*V77)
endif
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",u,"origin"))
endif
endif
else
call NM7(OB7)
call OZ7(t)
set R84[GetPlayerId(GetOwningPlayer(WI7))]=R84[GetPlayerId(GetOwningPlayer(WI7))]+1
call TriggerRegisterTimerEvent(FFE,.03,true)
call TriggerAddCondition(FFE,Condition(function F7E))
call NP7(FGE,"LinkNumber",F8E)
call NS7(FGE,"FoundTarget",false)
endif
set t=null
set WI7=null
set FFE=null
set g=null
set u=null
return false
endfunction
function FHE takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real l4=J77(GetUnitX(WI7),GetUnitY(WI7),GetLocationX(l),GetLocationY(l))
local integer V77=GetUnitAbilityLevel(WI7,1093678665)
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
if V77==0 then
set V77=GetUnitAbilityLevel(WI7,1093817137)
endif
call NT7(OB7,"Hero",WI7)
call NP7(OB7,"Level",V77)
call NQ7(OB7,"Angle",l4*1.)
call NP7(OB7,"LinkNumber",0)
call NV7(OB7,"RetractTrigger",CreateTrigger())
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerAddCondition(t,Condition(function FEE))
call RemoveLocation(l)
set WI7=null
set l=null
set t=null
endfunction
function FIE takes nothing returns boolean
if GetSpellAbilityId()==1093678665 or GetSpellAbilityId()==1093817137 then
call FHE()
endif
return false
endfunction
function FJE takes nothing returns boolean
local integer LU9=R74[GetPlayerId(GetTriggerPlayer())]
local integer D5=R84[GetPlayerId(GetTriggerPlayer())]
if GetUnitTypeId(M7[GetPlayerId(GetTriggerPlayer())])==1429221446 and D5>0 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,E9,10.,(GetObjectName((1848657228)))+" "+R2S(I2R(LU9)/ I2R(D5)*100)+"% ("+I2S(LU9)+"/"+I2S(D5)+")")
endif
return false
endfunction
function IK8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FIE))
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-st",true)
call TriggerAddCondition(t,Condition(function FJE))
set t=null
endfunction
function FKE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit m5=O77(OB7,"Target")
local integer V77=OM7(OB7,"Level")
local real YM7=(30+30*V77)+(.1*(V77+2))*GetHeroStr(p5,true)
local integer U38=OM7(OB7,"Count")
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and GetSpellAbilityId()==1093747544)then
call NM7(OB7)
call OZ7(t)
endif
elseif(GetTriggerEvalCount(t)>4 and IsUnitType(m5,UNIT_TYPE_HERO))or(GetTriggerEvalCount(t)>6 and IsUnitType(m5,UNIT_TYPE_HERO)==false)then
call NM7(OB7)
call OZ7(t)
call KR7(p5)
else
if V77>0 then
set U38=U38+1
if(U38<5 and IsUnitType(m5,UNIT_TYPE_HERO))or(U38<7 and IsUnitType(m5,UNIT_TYPE_HERO)==false)then
call SetUnitState(p5,UNIT_STATE_LIFE,GetUnitState(p5,UNIT_STATE_LIFE)+YM7)
call B67(p5,m5,1,YM7)
endif
call NP7(OB7,"Count",U38)
endif
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function FME takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer V77=GetUnitAbilityLevel(p5,1093747544)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_ENDCAST)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function FKE))
call NT7(OB7,"Source",p5)
call NT7(OB7,"Target",m5)
call NP7(OB7,"Level",V77)
call NP7(OB7,"Count",0)
call TriggerEvaluate(t)
set t=null
set p5=null
set m5=null
endfunction
function FNE takes nothing returns boolean
if GetSpellAbilityId()==1093747544 and WQ7(GetSpellTargetUnit())==false then
call FME()
endif
return false
endfunction
function IM8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FNE))
set t=null
endfunction
function FOE takes nothing returns boolean
return((GetUnitTypeId(GetSummonedUnit())==1865429068)or(GetUnitTypeId(GetSummonedUnit())==1865429069)or(GetUnitTypeId(GetSummonedUnit())==1865429070)or(GetUnitTypeId(GetSummonedUnit())==1865429071))
endfunction
function FPE takes nothing returns nothing
endfunction
function FQE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
local integer BC7=(LoadInteger(L7,(I97),(5)))
local group g
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
set g=WS7()
set IN4=BB7
call GroupEnumUnitsInRange(g,GetUnitX(BB7),GetUnitY(BB7),400+300*4+25,Condition(function AJ7))
call ForGroup(g,function FPE)
call WR7(g)
set g=null
endif
set t=null
set BB7=null
return false
endfunction
function FRE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit BB7=GetSummonedUnit()
call TriggerRegisterDeathEvent(t,BB7)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function FQE))
call SaveUnitHandle(L7,(I97),(19),(BB7))
call SaveInteger(L7,(I97),(5),(GetUnitAbilityLevel(GetSummoningUnit(),1093679428)))
call SetUnitAbilityLevelSwapped(1093679188,GetSummonedUnit(),GetUnitAbilityLevelSwapped(1093679428,GetSummoningUnit()))
call SetUnitAbilityLevelSwapped(1093681990,GetSummonedUnit(),GetUnitAbilityLevelSwapped(1093679428,GetSummoningUnit()))
call IssueImmediateOrderById(GetSummonedUnit(),$D0220)
endfunction
function IO8 takes nothing returns nothing
set Do=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Do,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(Do,Condition(function FOE))
call TriggerAddAction(Do,function FRE)
endfunction
function T00 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit p5=(LoadUnitHandle(L7,(I97),2))
local unit m5=(LoadUnitHandle(L7,(I97),17))
local integer BC7=GetUnitAbilityLevel(p5,'A0CC')
local real YNG=100+50*BC7
if BC7==0 then
set BC7=GetUnitAbilityLevel(p5,'A02Z')
set YNG=120+60*BC7
endif
set YNG=YNG*.25
if GetUnitAbilityLevel(p5,'Bdcl')==0 or(GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and(GetSpellAbilityId()=='A0CC' or GetSpellAbilityId()=='A02Z'))then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif GetTriggerEventId()!=EVENT_UNIT_SPELL_ENDCAST then
if GetUnitState(p5,UNIT_STATE_LIFE)+YNG>=GetUnitState(p5,UNIT_STATE_MAX_LIFE)then
call SetUnitState(p5,UNIT_STATE_MANA,GetUnitState(p5,UNIT_STATE_MANA)+YNG+GetUnitState(p5,UNIT_STATE_LIFE)-GetUnitState(p5,UNIT_STATE_MAX_LIFE))
endif
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function TII takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function T00))
call SaveUnitHandle(L7,(I97),2,(p5))
call SaveUnitHandle(L7,(I97),17,(m5))
set p5=null
set m5=null
set t=null
endfunction
function TSS takes nothing returns boolean
if(GetSpellAbilityId()=='A0CC' or GetSpellAbilityId()=='A02Z')then
if IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO)then
call TII()
endif
call SaveUnitHandle(L7,GetHandleId(GetTriggerUnit()),'A0CC',GetSpellTargetUnit())
endif
return false
endfunction
function J11 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TSS))
set t=null
endfunction
function R25 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit IH7=(LoadUnitHandle(L7,(OB7),(17)))
call SetUnitVertexColor(IH7,$FF,$FF,$FF,$FF)
call DestroyEffect((LoadEffectHandle(L7,(OB7),(32))))
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
set t=null
set IH7=null
return false
endfunction
function R26 takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer I97=GetHandleId(t)
local unit u=LoadUnitHandle(L7,I97,0)
if GetUnitAbilityLevel(u,'B01N')==0 or XH7(u)then
call PauseTimer(t)
call DestroyTimer(t)
call UnitRemoveAbility(u,LoadInteger(L7,I97,0))
call FlushChildHashtable(L7,I97)
call UnitRemoveAbility(u,'A2WI')
call UnitRemoveAbility(u,'B0HE')
call UnitRemoveAbility(u,'A2WK')
call UnitRemoveAbility(u,'B0HF')
call UnitRemoveAbility(u,LoadInteger(L7,I97,2))
endif
set u=null
set t=null
endfunction
function R2A takes unit p5,unit m5,integer BC7 returns nothing
local timer t=CreateTimer()
local integer I97=GetHandleId(t)
local integer id
local integer aYe
if IsPlayerAlly(GetOwningPlayer(p5),GetOwningPlayer(m5))then
set id='A2WL'
set aYe='A2WL'
call XF7(m5,'A2WI')
else
set id='A2WM'
set aYe='A2WM'
call Z57(m5,'A2WN'-1+BC7,1,3.5,'B0HF')
endif
call TimerStart(t,.1,true,function R26)
call SaveUnitHandle(L7,I97,0,m5)
call SaveInteger(L7,I97,0,id)
call R1T(m5,id,BC7)
call SaveInteger(L7,I97,2,'A2WN'-1+BC7)
set t=null
endfunction
function R2B takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local unit BB7=CreateUnit(GetOwningPlayer(p5),'e00E',GetUnitX(m5),GetUnitY(m5),0)
local integer BC7=GetUnitAbilityLevel(p5,'A2WJ')
local trigger t
local integer I97
call UnitAddAbility(BB7,'A0CE')
call SetUnitAbilityLevel(BB7,'A0CE',BC7)
call IssueTargetOrderById(BB7,$D0206,m5)
if GetUnitTypeId(m5)=='n0FJ' or GetUnitTypeId(m5)=='n0FI' or GetUnitTypeId(m5)=='n0F6' or GetUnitTypeId(m5)=='n0FH' then
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,3.5,false)
call TriggerRegisterDeathEvent(t,m5)
call TriggerAddCondition(t,Condition(function R25))
call SaveUnitHandle(L7,(I97),(17),(m5))
call SetUnitVertexColor(m5,50,$FF,50,$96)
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffect("Abilities\\Spells\\Undead\\Cripple\\CrippleTarget.mdl",GetUnitX(m5),GetUnitY(m5))))
set t=null
else
call R2A(p5,m5,BC7)
endif
set p5=null
set m5=null
set BB7=null
endfunction
function R2C takes nothing returns boolean
if GetSpellAbilityId()=='A2WJ' then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
if(IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_STRUCTURE)==false and fWA(GetSpellTargetUnit())==false)or GetUnitTypeId(GetSpellTargetUnit())=='n0FJ' or GetUnitTypeId(GetSpellTargetUnit())=='n0FI' or GetUnitTypeId(GetSpellTargetUnit())=='n0F6' or GetUnitTypeId(GetSpellTargetUnit())=='n0FH' then
else
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),GetObjectName('n0K9'))
endif
else
call R2B()
endif
endif
return false
endfunction
function R2H takes nothing returns nothing
local unit t=GetOrderTargetUnit()
local unit u=GetTriggerUnit()
if pWA(t)and R2K(t)==false then
call KR7(u)
call X37(GetOwningPlayer(u),GetObjectName('TX0A'))
endif
set t=null
set u=null
endfunction
function R2J takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function R2C))
set t=null
call yS('A2WL')
call yS('A2WM')
endfunction
function FSE takes unit p5,unit m5 returns nothing
local real FTE=10+20*R54
local real FUE=70+30*R54
local real FVE=(FTE+FUE*R24/700)*.5
call B67(p5,m5,1,FVE)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ChimaeraLightningMissile\\ChimaeraLightningMissile.mdl",m5,"chest"))
endfunction
function FWE takes nothing returns nothing
local unit m5=GetEnumUnit()
local group T69=t0
local unit p5=U0
if IsUnitInGroup(m5,T69)==false then
call GroupAddUnit(T69,m5)
call FSE(p5,m5)
endif
set m5=null
set T69=null
set p5=null
endfunction
function FXE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit BB7=O77(OB7,"Caster")
local group T69=OF7(OB7,"AlreadyDamaged")
local effect fx
local integer SV9=GetTriggerEvalCount(t)
local real x
local real x0=GetUnitX(p5)
local real y
local real y0=GetUnitY(p5)
local integer i
local integer d
local group g=WS7()
call SetUnitX(BB7,GetUnitX(p5))
call SetUnitY(BB7,GetUnitY(p5))
set t0=T69
set U0=p5
set R54=GetUnitAbilityLevel(p5,1093748023)
if SV9>20 then
set d=21*36+(20-SV9)*36
set R24=d
set i=0
loop
exitwhen i>36
set x=x0+d*Cos(360*i/36*bj_DEGTORAD)
set y=y0+d*Sin(360*i/36*bj_DEGTORAD)
set IN4=p5
call GroupEnumUnitsInRange(g,x,y,100,Condition(function AQ7))
call ForGroup(g,function FWE)
set i=i+1
endloop
else
set d=SV9*36
set R24=d
set i=0
loop
exitwhen i>36
set x=x0+d*Cos(360*i/36*bj_DEGTORAD)
set y=y0+d*Sin(360*i/36*bj_DEGTORAD)
set IN4=p5
call GroupEnumUnitsInRange(g,x,y,100,Condition(function AQ7))
call ForGroup(g,function FWE)
set i=i+1
endloop
endif
call WR7(g)
if SV9==40 then
call KillUnit(BB7)
call WR7(T69)
call DestroyEffect(OG7(OB7,"FX"))
call NM7(OB7)
call OZ7(t)
elseif SV9==20 then
call GroupClear(T69)
set fx=null
endif
set t=null
set BB7=null
set T69=null
set p5=null
set g=null
return false
endfunction
function FYE takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local real x=GetUnitX(WI7)
local real y=GetUnitY(WI7)
local unit BB7=CreateUnit(GetOwningPlayer(WI7),1747990834,x,y,0)
local integer i=0
local group T69=WS7()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call NU7(OB7,"FX",AddSpecialEffectTarget("effects\\Lightning_Ball_Tail_FX.mdx",WI7,"origin"))
call NB7(OB7,"AlreadyDamaged",T69)
call NT7(OB7,"Source",WI7)
call NT7(OB7,"Caster",BB7)
call TriggerRegisterTimerEvent(t,.06,true)
call TriggerAddCondition(t,Condition(function FXE))
set t=null
set BB7=null
set WI7=null
set T69=null
endfunction
function FZE takes nothing returns boolean
if GetSpellAbilityId()==1093748023 then
call FYE()
endif
return false
endfunction
function KI8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FZE))
set t=null
endfunction
function FAE takes integer FBE returns boolean
return FBE!=1093679446 and FBE!=1093677622 and FBE!=1093684314 and FBE!=1093685582 and FBE!=1093685065 and FBE!=1093682265 and FBE!=1093752642 and FBE!=1095263841
endfunction
function FCE takes unit F3E,unit p5,unit m5,integer V77 returns nothing
local unit BB7=CreateUnit(GetOwningPlayer(F3E),1697656901,GetUnitX(p5),GetUnitY(p5),0)
call XF7(BB7,1093747019)
call SetUnitAbilityLevel(BB7,1093747019,V77)
call IssueTargetOrderById(BB7,$D0097,m5)
call XF7(BB7,1093744708)
call SetUnitAbilityLevel(BB7,1093744708,V77)
call IssueTargetOrderById(BB7,$D008F,m5)
set BB7=null
endfunction
function F6E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local integer V77
if GetSpellTargetUnit()==p5 and FAE(GetSpellAbilityId()) and IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(p5))==false and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) then
set V77=GetUnitAbilityLevel(p5,1093748022)
call FCE(p5,p5,GetTriggerUnit(),V77)
endif
set t=null
set p5=null
return false
endfunction
function FLE takes unit p5,boolean UA9 returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function F6E))
call NT7(OB7,"Source",p5)
if UA9 then
set nj[GetPlayerId(GetOwningPlayer(p5))]=t
endif
set p5=null
set t=null
endfunction
function F1E takes nothing returns boolean
if GetLearnedSkill()==1093748022 and GetUnitAbilityLevel(GetTriggerUnit(),1093748022)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call FLE(GetTriggerUnit(),false)
endif
return false
endfunction
function KJ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function F1E))
set t=null
endfunction
function F0E takes unit u,integer d returns nothing
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer CE7
if d<1 then
call UnitRemoveAbility(u,W0[0])
call UnitRemoveAbility(u,W0[1])
call UnitRemoveAbility(u,W0[2])
call UnitRemoveAbility(u,W0[3])
call UnitRemoveAbility(u,W0[4])
call UnitRemoveAbility(u,W0[5])
call UnitRemoveAbility(u,W0[6])
call UnitRemoveAbility(u,W0[7])
return
endif
loop
exitwhen c==0
set c=a/ 2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set CE7=i
set i=0
loop
exitwhen i>CE7
if b[i]==1 then
call XF7(u,W0[i])
else
call UnitRemoveAbility(u,W0[i])
endif
set i=i+1
endloop
endfunction
function F5E takes unit u,integer d returns nothing
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer CE7
if d<1 then
call UnitRemoveAbility(u,z0[0])
call UnitRemoveAbility(u,z0[1])
call UnitRemoveAbility(u,z0[2])
call UnitRemoveAbility(u,z0[3])
call UnitRemoveAbility(u,z0[4])
call UnitRemoveAbility(u,z0[5])
call UnitRemoveAbility(u,z0[6])
call UnitRemoveAbility(u,z0[7])
return
endif
loop
exitwhen c==0
set c=a/ 2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set CE7=i
set i=0
loop
exitwhen i>CE7
if b[i]==1 then
call XF7(u,z0[i])
else
call UnitRemoveAbility(u,z0[i])
endif
set i=i+1
endloop
endfunction
function F2E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit m5=O77(OB7,"Target")
if GetTriggerEventId()==EVENT_UNIT_DEATH then
if GetTriggerUnit()==p5 then
call F0E(p5,0)
call NT7(OB7,"Source",null)
else
call F5E(m5,0)
call NT7(OB7,"Target",null)
endif
else
if p5!=null then
call F0E(p5,0)
endif
if m5!=null then
call F5E(m5,0)
endif
call NM7(OB7)
call OZ7(t)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function F_E takes unit ZX7,unit IH7,unit S89 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
if S89==null then
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call NT7(I97,"Source",ZX7)
call NT7(I97,"Target",IH7)
elseif S89==IH7 then
call F5E(IH7,0)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DEATH)
call NT7(I97,"Source",ZX7)
call NT7(I97,"Target",null)
else
call F0E(ZX7,0)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call NT7(I97,"Source",null)
call NT7(I97,"Target",IH7)
endif
call TriggerRegisterTimerEvent(t,18,false)
call TriggerAddCondition(t,Condition(function F2E))
set t=null
endfunction
function G4E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=O77(I97,"Source")
local unit IH7=O77(I97,"Target")
local lightning G7E=OH7(I97,"Light")
local integer BC7=OM7(I97,"Level")
local integer WF8=GetTriggerEvalCount(t)
local unit BB7=O77(I97,"Caster")
call MoveLightning(G7E,true,GetUnitX(ZX7),GetUnitY(ZX7),GetUnitX(IH7),GetUnitY(IH7))
call SetUnitX(BB7,GetUnitX(IH7))
call SetUnitY(BB7,GetUnitY(IH7))
if KF7(GetUnitX(ZX7),GetUnitY(ZX7),GetUnitX(IH7),GetUnitY(IH7))>1000 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call DestroyLightning(G7E)
call KillUnit(BB7)
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call F_E(ZX7,IH7,GetTriggerUnit())
else
call F_E(ZX7,IH7,null)
endif
call NM7(I97)
call OZ7(t)
elseif WF8>$A0 then
call DestroyLightning(G7E)
call KillUnit(BB7)
call F_E(ZX7,IH7,null)
call NM7(I97)
call OZ7(t)
elseif ModuloInteger(WF8,20)==0 or WF8==1 then
call F0E(ZX7,(BC7*7)*R2I(WF8/ 20))
call F5E(IH7,(BC7*7)*R2I(WF8/ 20))
endif
set t=null
set ZX7=null
set IH7=null
set G7E=null
set BB7=null
return false
endfunction
function G8E takes unit p5,unit m5,lightning G9E,unit BB7 returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local integer V77=GetUnitAbilityLevel(p5,1093747792)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function G4E))
call NT7(OB7,"Source",p5)
call NT7(OB7,"Target",m5)
call NP7(OB7,"Level",V77)
call NW7(OB7,"Light",G9E)
call NT7(OB7,"Caster",BB7)
set t=null
endfunction
function GDE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local lightning G9E=OH7(OB7,"Light")
local unit BB7=O77(OB7,"Caster")
local real GEE=GetUnitX(p5)
local real GFE=GetUnitY(p5)
local real P4D=ON7(OB7,"rRealX1")
local real P7D=ON7(OB7,"rRealY1")
local real a=ON7(OB7,"a")
local unit m5=null
local group g=WS7()
set P4D=X17(P4D+25*Cos(a))
set P7D=X07(P7D+25*Sin(a))
call NQ7(OB7,"rRealX1",P4D*1.)
call NQ7(OB7,"rRealY1",P7D*1.)
call MoveLightning(G9E,true,GEE,GFE,P4D,P7D)
call SetUnitX(BB7,P4D)
call SetUnitY(BB7,P7D)
set IN4=p5
call GroupEnumUnitsInRange(g,P4D,P7D,$E1,Condition(function BP7))
set m5=FirstOfGroup(g)
call WR7(g)
if m5!=null then
call G8E(p5,m5,G9E,BB7)
call NM7(OB7)
call OZ7(t)
elseif GetTriggerEvalCount(t)>25 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call DestroyLightning(G9E)
call KillUnit(BB7)
call NM7(OB7)
call OZ7(t)
endif
set t=null
set p5=null
set G9E=null
set m5=null
set g=null
set BB7=null
return false
endfunction
function GGE takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local trigger t
local integer OB7
local location l
local lightning G9E=AddLightning("CLSB",true,GetUnitX(p5),GetUnitY(p5),GetUnitX(p5),GetUnitY(p5))
local unit BB7=CreateUnit(GetOwningPlayer(p5),1747990584,GetUnitX(p5),GetUnitY(p5),0)
call SetLightningColor(G9E,.3,.5,1,1)
if m5==null then
set l=GetSpellTargetLoc()
set t=CreateTrigger()
set OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function GDE))
call NT7(OB7,"Source",p5)
call NW7(OB7,"Light",G9E)
call NT7(OB7,"Caster",BB7)
call NQ7(OB7,"a",(Atan2(GetLocationY(l)-GetUnitY(p5),GetLocationX(l)-GetUnitX(p5)))*1.)
call NQ7(OB7,"rRealX1",(GetUnitX(p5))*1.)
call NQ7(OB7,"rRealY1",(GetUnitY(p5))*1.)
call RemoveLocation(l)
set l=null
set t=null
else
call G8E(p5,m5,G9E,BB7)
endif
set m5=null
set p5=null
set l=null
set t=null
set BB7=null
endfunction
function GHE takes nothing returns boolean
if GetSpellAbilityId()==1093747792 then
call GGE()
endif
return false
endfunction
function KK8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function GHE))
set t=null
set W0[0]=1093747798
set W0[1]=1093747793
set W0[2]=1093747794
set W0[3]=1093747795
set W0[4]=1093747796
set W0[5]=1093747797
set W0[6]=1093747799
set W0[7]=1093747800
set z0[0]=1093748020
set z0[1]=1093748019
set z0[2]=1093748018
set z0[3]=1093748017
set z0[4]=1093748016
set z0[5]=1093748021
set z0[6]=1093747802
set z0[7]=1093747801
endfunction
function GIE takes integer OB7 returns nothing
local integer i=1
local integer GJE=OM7(OB7,"MaxIndex")
local unit m5
local integer B07
if GJE==0 then
return
endif
loop
exitwhen i>GJE
set B07=OM7(OB7,"Target_"+I2S(i))
set m5=TQ7(B07)
call TP7(B07)
call UnitRemoveAbility(m5,n1[0])
call UnitRemoveAbility(m5,n1[1])
call UnitRemoveAbility(m5,n1[2])
call UnitRemoveAbility(m5,n1[3])
call UnitRemoveAbility(m5,n1[4])
call UnitRemoveAbility(m5,n1[5])
set i=i+1
endloop
set m5=null
endfunction
function GKE takes unit m5,integer OB7 returns nothing
local integer B07=TS7(m5)
local integer GJE=OM7(OB7,"MaxIndex")
set GJE=GJE+1
call NP7(OB7,"MaxIndex",GJE)
call NP7(OB7,"Target_"+I2S(GJE),B07)
endfunction
function GME takes unit u returns integer
return GetUnitAbilityLevel(u,n1[0])*1+GetUnitAbilityLevel(u,n1[1])*2+GetUnitAbilityLevel(u,n1[2])*4+GetUnitAbilityLevel(u,n1[3])*8+GetUnitAbilityLevel(u,n1[4])*16
endfunction
function GNE takes unit u,integer d returns nothing
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer CE7
if d<1 then
call UnitRemoveAbility(u,n1[0])
call UnitRemoveAbility(u,n1[1])
call UnitRemoveAbility(u,n1[2])
call UnitRemoveAbility(u,n1[3])
call UnitRemoveAbility(u,n1[4])
call UnitRemoveAbility(u,n1[5])
return
endif
loop
exitwhen c==0
set c=a/ 2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set CE7=i
set i=0
loop
exitwhen i>CE7
if b[i]==1 then
call XF7(u,n1[i])
else
call UnitRemoveAbility(u,n1[i])
endif
set i=i+1
endloop
endfunction
function GOE takes unit u,integer d returns nothing
if IsUnitType(u,UNIT_TYPE_STRUCTURE)==false then
call GNE(u,d+GME(u))
call GKE(u,a1)
endif
endfunction
function GPE takes unit p5,unit BB7,unit m5,integer V77 returns nothing
call IssueTargetOrderById(BB7,$D0097,m5)
call B57(p5,m5,2,24+13*V77,.3)
call GOE(m5,1)
endfunction
function GQE takes nothing returns boolean
if(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IN4))and IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false))and GetUnitTypeId(GetFilterUnit())!=1848651852 then
if GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<o1 then
set o1=GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)
set R_4=GetFilterUnit()
endif
endif
return false
endfunction
function GRE takes nothing returns boolean
if(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IN4))and IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and XH7(GetFilterUnit())==false))and GetUnitTypeId(GetFilterUnit())!=1701670775 and GetUnitTypeId(GetFilterUnit())!=1970956647 and GetUnitTypeId(GetFilterUnit())!=1848651852 then
if GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<o1 then
set o1=GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)
set R_4=GetFilterUnit()
endif
endif
return false
endfunction
function GSE takes unit p5,unit BB7,integer V77 returns nothing
local group g=WS7()
set R_4=null
set o1=$F423F
set Z0=30+30*V77
set v1=p5
set IN4=p5
if GetUnitAbilityLevel(p5,1093752150)>0 then
call GroupEnumUnitsInRange(g,GetUnitX(p5),GetUnitY(p5),525,Condition(function GRE))
else
call GroupEnumUnitsInRange(g,GetUnitX(p5),GetUnitY(p5),525,Condition(function GQE))
endif
call WR7(g)
if R_4!=null then
call GPE(p5,BB7,R_4,V77)
endif
set g=null
endfunction
function GTE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit BB7=O77(OB7,"Caster")
local integer V77=OM7(OB7,"Level")
local integer U38=GetTriggerEvalCount(t)
local real GUE
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call GIE(OB7)
call NM7(OB7)
call OZ7(t)
if GetTriggerUnit()==p5 then
call KillUnit(BB7)
endif
else
if GetUnitAbilityLevel(p5,1093752150)>0 then
if V77==1 then
set GUE=.6
elseif V77==2 then
set GUE=.5
else
set GUE=.4
endif
else
if V77==1 then
set GUE=.7
elseif V77==2 then
set GUE=.6
else
set GUE=.5
endif
endif
set GUE=GUE/.05
if ModuloInteger(U38,R2I(GUE))==0 or U38==1 then
set a1=OB7
call GSE(p5,BB7,V77)
endif
call SetUnitX(BB7,GetUnitX(p5))
call SetUnitY(BB7,GetUnitY(p5))
endif
set t=null
set p5=null
set BB7=null
return false
endfunction
function GVE takes nothing returns nothing
local unit p5=GetTriggerUnit()
local integer V77=GetUnitAbilityLevel(p5,1093747023)
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit BB7=CreateUnit(GetOwningPlayer(p5),1747990577,GetUnitX(p5),GetUnitY(p5),0)
if V77==0 then
set V77=GetUnitAbilityLevel(p5,1093752150)
endif
call UnitApplyTimedLife(BB7,1112820806,30+0*V77)
call SetUnitAbilityLevel(BB7,1093747786,1)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,BB7,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function GTE))
call NT7(OB7,"Caster",BB7)
call NT7(OB7,"Source",p5)
call NP7(OB7,"Level",V77)
set p5=null
set t=null
set BB7=null
endfunction
function GWE takes nothing returns boolean
if GetSpellAbilityId()==1093747023 or GetSpellAbilityId()==1093752150 then
call GVE()
endif
return false
endfunction
function KM8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function GWE))
set t=null
set n1[0]=1093747787
set n1[1]=1093747788
set n1[2]=1093747790
set n1[3]=1093747789
set n1[4]=1093747791
endfunction
function GXE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local integer GYE=GetTriggerEvalCount(t)
local real y=(GYE-$D)*(GYE-$D)
if GYE<26 then
if KCD(WI7)==false then
call SetUnitFlyHeight(WI7,375-y,0)
endif
else
call PauseUnit(WI7,false)
if KCD(WI7)==false then
call SetUnitFlyHeight(WI7,GetUnitDefaultFlyHeight(WI7),0)
endif
if GetSpellAbilityId()==1093817676 then
call B67(O77(OB7,"Source"),WI7,20,ON7(OB7,"Damage"))
else
call B67(O77(OB7,"Source"),WI7,1,ON7(OB7,"Damage"))
endif
call BA7(O77(OB7,"Source"),WI7,ON7(OB7,"Duration"))
call NM7(OB7)
call OZ7(t)
endif
set t=null
set WI7=null
return false
endfunction
function GZE takes unit WI7,unit p5,real Hk,real GAE,real GBE returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call PauseUnit(WI7,true)
if KCD(WI7)==false then
call UnitAddAbility(WI7,1097691750)
call UnitRemoveAbility(WI7,1097691750)
endif
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\Impale\\ImpaleHitTarget.mdl",GetUnitX(WI7),GetUnitY(WI7)))
call NT7(OB7,"Hero",WI7)
call NT7(OB7,"Source",p5)
call NQ7(OB7,"Damage",GAE)
call NQ7(OB7,"Duration",Hk)
call TriggerRegisterTimerEvent(t,.02/ .52*GBE,true)
call TriggerAddCondition(t,Condition(function GXE))
set t=null
endfunction
function GCE takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),IQ4)==false and WF7(GetEnumUnit())==false and OT7(GetEnumUnit(),"Omnislashing")==false then
call GroupAddUnit(IQ4,GetEnumUnit())
call GZE(GetEnumUnit(),IN4,IK4,IJ4,IM4)
endif
endfunction
function GCCE takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),IQ4)==false and OT7(GetEnumUnit(),"Omnislashing")==false then
call GroupAddUnit(IQ4,GetEnumUnit())
call GZE(GetEnumUnit(),IN4,IK4,IJ4,IM4)
endif
endfunction
function G3E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local real GAE=ON7(OB7,"damage")
local real Hk=ON7(OB7,"duration")
local real x1=ON7(OB7,"x1")
local real y1=ON7(OB7,"y1")
local real x2=ON7(OB7,"x2")
local real y2=ON7(OB7,"y2")
local real w=ON7(OB7,"w")
local real G6E=ON7(OB7,"TempReal")
local real a=Atan2(y2-y1,x2-x1)
local group g=OF7(OB7,"g")
local group GLE=WS7()
local real GBE=G6E*.0625
local real G1E=ON7(OB7,"LastFX_x")
local real G0E=ON7(OB7,"LastFX_y")
local real G5E=ON7(OB7,"FX_Interval")
local real G2E=ON7(OB7,"airtime")
if GBE>KF7(x1,y1,x2,y2)then
set x1=x2
set y1=y2
else
set x1=x1+GBE*Cos(a)
set y1=y1+GBE*Sin(a)
endif
set IN4=p5
set IJ4=GAE
set IK4=Hk
set IM4=G2E
set IQ4=g
if GetSpellAbilityId()==1093817676 then
call GroupEnumUnitsInRange(GLE,x1,y1,w,Condition(function AJJ7))
call ForGroup(GLE,function GCCE)
else
call GroupEnumUnitsInRange(GLE,x1,y1,w,Condition(function AJ7))
call ForGroup(GLE,function GCE)
endif
call WR7(GLE)
if KF7(x1,y1,G1E,G0E)>=G5E then
call NQ7(OB7,"LastFX_x",x1)
call NQ7(OB7,"LastFX_y",y1)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\Impale\\ImpaleMissTarget.mdl",x1,y1))
endif
call NQ7(OB7,"x1",x1)
call NQ7(OB7,"y1",y1)
if x1==x2 and y1==y2 then
if OO7(OB7,"destroyGroup") then
call WR7(g)
endif
call NM7(OB7)
call OZ7(t)
endif
set g=null
set GLE=null
set p5=null
set t=null
return false
endfunction
function G_E takes real H4E,real H7E returns integer
if H4E/ H7E-R2I(H4E/ H7E)>=.5 then
return R2I(H4E/ H7E)+1
endif
return R2I(H4E/ H7E)
endfunction
function H8E takes unit p5,unit m5,real GAE,real Hk,real G2E,real x1,real y1,real x2,real y2,real w,group H9E,boolean HDE,real G6E returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local real HEE=KF7(x1,y1,x2,y2)
local integer HFE=G_E(HEE,ON)
local real G5E=HEE/HFE
local group g
call NT7(OB7,"Source",p5)
call NQ7(OB7,"damage",GAE)
call NQ7(OB7,"duration",Hk)
call NQ7(OB7,"airtime",G2E)
call NQ7(OB7,"x1",x1)
call NQ7(OB7,"y1",y1)
call NQ7(OB7,"x2",x2)
call NQ7(OB7,"y2",y2)
call NQ7(OB7,"w",w)
call NQ7(OB7,"TempReal",G6E)
if H9E==null then
set g=WS7()
if m5!=null and IsUnitIllusion(m5)==false then
call GroupAddUnit(g,m5)
endif
call NB7(OB7,"g",g)
call NS7(OB7,"destroyGroup",HDE)
else
call NB7(OB7,"g",H9E)
call NS7(OB7,"destroyGroup",HDE)
endif
call NQ7(OB7,"FX_Interval",G5E)
call NQ7(OB7,"LastFX_x",x1)
call NQ7(OB7,"LastFX_y",y1)
call TriggerRegisterTimerEvent(t,.0625,true)
call TriggerAddCondition(t,Condition(function G3E))
set t=null
set g=null
endfunction
function HGE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local real x=ON7(OB7,"x")
local real y=ON7(OB7,"y")
call SetUnitPosition(WI7,x,y)
call SetUnitAnimation(WI7,"morph ALTERNATE")
call NM7(OB7)
call OZ7(t)
set t=null
set WI7=null
return false
endfunction
function HHE takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local integer V77=GetUnitAbilityLevel(WI7,1093678671)
local location l
local real HIE
local real x=GetUnitX(WI7)
local real y=GetUnitY(WI7)
local real HJE
local real HKE
local real HME
local real HNE
local real CasterX
local real CasterY
local integer BurrowstrikeTempInt
local unit oA
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local real YM7
local real Hk=2.17
local unit m5=null
if V77==1 then
set YM7=100
elseif V77==2 then
set YM7=$A0
elseif V77==3 then
set YM7=$DC
elseif V77==4 then
set YM7=280
endif
if GetSpellTargetUnit()!=null then
set l=GetUnitLoc(GetSpellTargetUnit())
else
set l=GetSpellTargetLoc()
endif
set HJE=GetLocationX(l)
set HKE=GetLocationY(l)
call RemoveLocation(l)
set HIE=J77(x,y,HJE,HKE)
call NT7(OB7,"Hero",WI7)
call NQ7(OB7,"x",HJE)
call NQ7(OB7,"y",HKE)
call TriggerRegisterTimerEvent(t,KF7(x,y,HJE,HKE)/$7D0,false)
call TriggerAddCondition(t,Condition(function HGE))
if KF7(x,y,HJE,HKE)<$96 then
set HJE=x+$96*Cos(HIE*bj_DEGTORAD)
set HKE=y+$96*Sin(HIE*bj_DEGTORAD)
endif
if GetSpellTargetUnit()!=null and WQ7(GetSpellTargetUnit())then
set m5=GetSpellTargetUnit()
endif
call H8E(WI7,m5,YM7,Hk,.52,x,y,HJE,HKE,$AF,null,true,$640)
set oA=null
set l=null
set WI7=null
set t=null
set m5=null
endfunction
function HOE takes nothing returns boolean
if GetSpellAbilityId()==1093678671 then
call HHE()
endif
return false
endfunction
function IP8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function HOE))
set t=null
endfunction
function HPE takes nothing returns nothing
call B67(e0,GetEnumUnit(),1,110)
if GetPlayerController(GetOwningPlayer(o0))==MAP_CONTROL_COMPUTER then
call UnitAddAbility(o0,1093744450)
endif
call IssueTargetOrderById(o0,$D006B,GetEnumUnit())
endfunction
function HQE takes unit p5,real x,real y,integer V77,integer HRE returns nothing
local group g=WS7()
local real r
local string fx
if HRE==8 then
set r=850
elseif HRE==9 then
set r=900
elseif HRE>=$A then
set r=450+50*HRE
else
set r=450+50*HRE
endif
if HRE<4 then
set fx="war3mapImported\\EpiPulse_1_4.mdx"
elseif HRE<8 then
set fx="war3mapImported\\EpiPulse_5_8.mdx"
else
set fx="war3mapImported\\EpiPulse_9_12.mdx"
endif
call DestroyEffect(AddSpecialEffect(fx,x,y))
set IN4=p5
set e0=p5
set o0=v0[GetPlayerId(GetOwningPlayer(p5))]
call GroupEnumUnitsInRange(g,x,y,r,Condition(function AJ7))
call ForGroup(g,function HPE)
call WR7(g)
call nm(.03,false,x,y,450+50*HRE,450+50*HRE,72,.03,512)
set g=null
endfunction
function HSE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local player p=O97(OB7,"p")
local unit WI7=O77(OB7,"Hero")
local real HTE=ON7(OB7,"LastX")
local real HUE=ON7(OB7,"LastY")
local boolean EWD=OO7(OB7,"Scepter")
local integer V77=OM7(OB7,"Level")
local integer HRE=OM7(OB7,"Iteration")
local integer HVE=4+V77*2
local real x=HTE
local real y=HUE
if EWD then
set HVE=HVE+3
endif
if HRE>HVE then
call NM7(OB7)
call OZ7(t)
else
if WI7!=null and XH7(WI7)==false then
set x=GetUnitX(WI7)
set y=GetUnitY(WI7)
endif
call HQE(WI7,x,y,V77,HRE)
call NP7(OB7,"Iteration",HRE+1)
call NQ7(OB7,"LastX",(x)*1.)
call NQ7(OB7,"LastY",(y)*1.)
endif
set t=null
set p=null
set WI7=null
return false
endfunction
function HWE takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local player p=GetOwningPlayer(WI7)
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local integer V77=GetUnitAbilityLevel(WI7,1093678674)
local boolean EWD=false
if V77==0 then
set EWD=true
set V77=GetUnitAbilityLevel(WI7,1093747252)
endif
if TV7(p)then
set v0[GetPlayerId(p)]=CreateUnit(A7[0],1697656901,GetUnitX(WI7),GetUnitY(WI7),0)
else
set v0[GetPlayerId(p)]=CreateUnit(Z7[0],1697656901,GetUnitX(WI7),GetUnitY(WI7),0)
endif
call XF7(v0[GetPlayerId(p)],1093744450)
call NT7(OB7,"Hero",WI7)
call NZ7(OB7,"p",GetOwningPlayer(WI7))
call NQ7(OB7,"LastX",(GetUnitX(WI7))*1.)
call NQ7(OB7,"LastY",(GetUnitY(WI7))*1.)
call NP7(OB7,"Level",V77)
call NP7(OB7,"Iteration",2)
call NS7(OB7,"Scepter",EWD)
call TriggerRegisterTimerEvent(t,.35,true)
call TriggerAddCondition(t,Condition(function HSE))
call HQE(WI7,GetUnitX(WI7),GetUnitY(WI7),V77,1)
set WI7=null
set p=null
set t=null
endfunction
function HXE takes nothing returns boolean
if GetSpellAbilityId()==1093678674 or GetSpellAbilityId()==1093747252 then
call HWE()
endif
return false
endfunction
function IQ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_FINISH)
call TriggerAddCondition(t,Condition(function HXE))
call X_7(1093744450)
set t=null
endfunction
function HYE takes nothing returns boolean
return(GetSpellAbilityId()==1093683248)
endfunction
function HZE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local unit oA=CreateUnit(GetOwningPlayer(WI7),1697656901,GetUnitX(WI7),GetUnitY(WI7),bj_UNIT_FACING)
call XF7(oA,1093683279)
call SetUnitAbilityLevel(oA,1093683279,GetUnitAbilityLevel(WI7,1093683248))
call IssueTargetOrderById(oA,$D0065,WI7)
call NM7(OB7)
call OZ7(t)
set t=null
set WI7=null
set oA=null
return false
endfunction
function HAE takes nothing returns nothing
local unit HBE
local unit HCE=GetTriggerUnit()
local unit array H3E
local integer Rd
local trigger t=CreateTrigger()
call OV7(HCE,"Sandstorm")
set HBE=CreateUnit(GetOwningPlayer(HCE),1697656913,GetUnitX(HCE),GetUnitY(HCE),bj_UNIT_FACING)
call SetUnitPathing(HBE,false)
call SetUnitInvulnerable(HBE,true)
call UnitAddAbility(HBE,1097625443)
call UnitAddAbility(HBE,1093683277)
call SetUnitAbilityLevelSwapped(1093683277,HBE,GetUnitAbilityLevelSwapped(1093683248,HCE))
call IssueImmediateOrderById(HBE,$D00D1)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function HZE))
call NT7(GetHandleId(t),"Hero",HCE)
set Rd=1
set H3E[Rd]=CreateUnit(GetOwningPlayer(HCE),1697656913,GetUnitX(HCE)+$96,GetUnitY(HCE)+$96,bj_UNIT_FACING)
call SetUnitTimeScalePercent(H3E[Rd],.0)
call SetUnitPathing(H3E[Rd],false)
call SetUnitInvulnerable(H3E[Rd],true)
call UnitAddAbility(H3E[Rd],1097625443)
set Rd=2
set H3E[Rd]=CreateUnit(GetOwningPlayer(HCE),1697656913,GetUnitX(HCE)+$96,GetUnitY(HCE)-$96,bj_UNIT_FACING)
call SetUnitTimeScalePercent(H3E[Rd],.0)
call SetUnitPathing(H3E[Rd],false)
call SetUnitInvulnerable(H3E[Rd],true)
call UnitAddAbility(H3E[Rd],1097625443)
set Rd=3
set H3E[Rd]=CreateUnit(GetOwningPlayer(HCE),1697656913,GetUnitX(HCE)-$96,GetUnitY(HCE)+$96,bj_UNIT_FACING)
call SetUnitTimeScalePercent(H3E[Rd],.0)
call SetUnitPathing(H3E[Rd],false)
call SetUnitInvulnerable(H3E[Rd],true)
call UnitAddAbility(H3E[Rd],1097625443)
set Rd=4
set H3E[Rd]=CreateUnit(GetOwningPlayer(HCE),1697656913,GetUnitX(HCE)-$96,GetUnitY(HCE)-$96,bj_UNIT_FACING)
call SetUnitTimeScalePercent(H3E[Rd],.0)
call SetUnitPathing(H3E[Rd],false)
call SetUnitInvulnerable(H3E[Rd],true)
call UnitAddAbility(H3E[Rd],1097625443)
if TY7(GetOwningPlayer(HCE))then
call UnitApplyTimedLife(H3E[1],1112820806,20*GetUnitAbilityLevel(HCE,1093683248))
call UnitApplyTimedLife(H3E[2],1112820806,20*GetUnitAbilityLevel(HCE,1093683248))
call UnitApplyTimedLife(H3E[3],1112820806,20*GetUnitAbilityLevel(HCE,1093683248))
call UnitApplyTimedLife(H3E[4],1112820806,20*GetUnitAbilityLevel(HCE,1093683248))
endif
set t=null
set HBE=null
set HCE=null
endfunction
function sa takes nothing returns nothing
set DO=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(DO,EVENT_PLAYER_UNIT_SPELL_CHANNEL)
call TriggerAddCondition(DO,Condition(function HYE))
call TriggerAddAction(DO,function HAE)
endfunction
function H6E takes nothing returns boolean
return(GetUnitTypeId(GetFilterUnit())==1697656913)
endfunction
function ScarabsFilter takes nothing returns boolean
return(GetUnitTypeId(GetFilterUnit())==1966092594)or(GetUnitTypeId(GetFilterUnit())==1966092595)
endfunction
function FilterEidolons takes nothing returns boolean
return(GetUnitTypeId(GetFilterUnit())==1752654196)or(GetUnitTypeId(GetFilterUnit())==1752658994)or(GetUnitTypeId(GetFilterUnit())==1752658995)or(GetUnitTypeId(GetFilterUnit())==1747988534)
endfunction
function HLE takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function H1E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local group g=OF7(OB7,"g")
local unit WX7=O77(OB7,"Hero")
if OT7(WX7,"Sandstorm")==false then
call UnitRemoveAbility(WX7,1110455378)
endif
call ForGroup(g,function HLE)
call DestroyGroup(g)
call NM7(OB7)
call OZ7(t)
set t=null
set g=null
set WX7=null
return false
endfunction
function Trig_Sand_Storm_Turn_Off_Func005001002 takes nothing returns boolean
return(GetUnitTypeId(GetFilterUnit())==1429221451)
endfunction
function H0E takes nothing returns nothing
local unit HCE=GetTriggerUnit()
local group LQ7
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call OX7(HCE,"Sandstorm")
set LQ7=HZ7(GetOwningPlayer(HCE),Condition(function H6E))
call NB7(OB7,"g",LQ7)
call NT7(OB7,"Hero",HCE)
call TriggerRegisterTimerEvent(t,.3+GetUnitAbilityLevel(HCE,1093683248)*.3,false)
call TriggerAddCondition(t,Condition(function H1E))
set t=null
set HCE=null
set LQ7=null
endfunction
function sB takes nothing returns nothing
set Dp=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Dp,EVENT_PLAYER_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(Dp,Condition(function HYE))
call TriggerAddAction(Dp,function H0E)
endfunction
function H5E takes nothing returns nothing
call B67(m0,GetEnumUnit(),2,50*M0)
endfunction
function H2E takes nothing returns nothing
local unit p5=GetTriggerUnit()
local real x=GetUnitX(p5)
local real y=GetUnitY(p5)
local unit BB7=CreateUnit(GetOwningPlayer(p5),1697656901,x,y,0)
local group g=WS7()
local integer V77=GetUnitAbilityLevel(p5,1093810507)
call XF7(BB7,1093684537)
call SetUnitAbilityLevel(BB7,1093684537,V77)
call IssueImmediateOrderById(BB7,$D0080)
call XF7(BB7,1093677399)
call SetUnitAbilityLevel(BB7,1093677399,V77)
call IssueImmediateOrderById(BB7,$D009F)
set m0=p5
set M0=V77
call GroupEnumUnitsInRange(g,x,y,350+25,Condition(function AW7))
call ForGroup(g,function H5E)
call WR7(g)
set p5=null
set BB7=null
set g=null
endfunction
function H_E takes nothing returns boolean
if GetSpellAbilityId()==1093810507 then
call H2E()
endif
return false
endfunction
function IR8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function H_E))
set t=null
endfunction
function I4E takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"UnitVar")
local unit I7E=O77(OB7,"Owner")
local unit BB7
local real Z27=ON7(OB7,"Duration")
local integer V77=GetUnitAbilityLevel(I7E,(1093683287))
local real I8E=ON7(OB7,"x")
local real I9E=ON7(OB7,"y")
local real BV9=GetUnitX(WI7)
local real BW9=GetUnitY(WI7)
if(BV9-I8E)*(BV9-I8E)+(BW9-I9E)*(BW9-I9E)>900 then
set BB7=CreateUnit(GetOwningPlayer(I7E),(1747988530),GetUnitX(WI7),GetUnitY(WI7),0)
call SetUnitAbilityLevel(BB7,(1093683506),V77)
call SetUnitAbilityLevel(BB7,(1093683289),V77)
call UnitApplyTimedLife(BB7,1112820806,7)
call NQ7(OB7,"x",(BV9)*1.)
call NQ7(OB7,"y",(BW9)*1.)
endif
set Z27=Z27+.2
call NQ7(OB7,"Duration",(Z27)*1.)
if Z27>7 or GetUnitState(WI7,UNIT_STATE_LIFE)<1 then
call PauseTimer(t)
call NM7(OB7)
endif
set t=null
set WI7=null
set I7E=null
set BB7=null
endfunction
function IDE takes nothing returns nothing
local unit m5=GetEnumUnit()
local sound Y07
local timer t
local integer OB7
call UnitDamageTarget(D8,m5,F8,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call GroupAddUnit(R8,m5)
if IsUnitType(m5,UNIT_TYPE_HERO) then
set t=CreateTimer()
set OB7=GetHandleId(t)
set Y07=CreateSound("Sounds\\Spectral Dagger.mp3",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundPosition(Y07,GetUnitX(m5),GetUnitY(m5),0)
call SetSoundDistanceCutoff(Y07,700)
call StartSound(Y07)
call KillSoundWhenDone(Y07)
call NT7(OB7,"UnitVar",m5)
call NT7(OB7,"Owner",D8)
call NQ7(OB7,"x",(GetUnitX(m5))*1.)
call NQ7(OB7,"y",(GetUnitY(m5))*1.)
call TimerStart(t,.2,true,function I4E)
endif
set m5=null
set t=null
set Y07=null
endfunction
function IEE takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(D8))and IsUnitInGroup(GetFilterUnit(),R8)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)!=null
endfunction
function IFE takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer OB7=GetHandleId(t)
local group T69=OF7(OB7,"AlreadyDamaged")
local group LQ7=WS7()
local boolexpr U4D=Condition(function IEE)
local unit WI7=O77(OB7,"Hero")
local unit BU7=O77(OB7,"Projectile")
local integer B07=OM7(OB7,"TargetIndex")
local unit m5=TQ7(B07)
local real Y5=GetUnitX(m5)
local real Z5=GetUnitY(m5)
local real t5=GetUnitX(BU7)
local real w5=GetUnitY(BU7)
local real l4=Atan2(Z5-w5,Y5-t5)
local real BV9=X17(GetUnitX(BU7)+30*Cos(l4))
local real BW9=X07(GetUnitY(BU7)+30*Sin(l4))
local unit BB7
local integer V77=GetUnitAbilityLevel(WI7,(1093683287))
if OO7(OB7,"TrailNext")then
call NS7(OB7,"TrailNext",false)
set BB7=CreateUnit(GetOwningPlayer(WI7),(1747988530),t5,w5,0)
call SetUnitAbilityLevel(BB7,(1093683506),V77)
call SetUnitAbilityLevel(BB7,(1093683289),V77)
call UnitApplyTimedLife(BB7,1112820806,7)
else
call NS7(OB7,"TrailNext",true)
endif
call SetUnitX(BU7,BV9)
call SetUnitY(BU7,BW9)
call SetUnitFacing(BU7,l4*bj_RADTODEG)
set R8=T69
set D8=WI7
set F8=50*GetUnitAbilityLevel(WI7,(1093683287))
call GroupEnumUnitsInRange(LQ7,BV9,BW9,175,U4D)
call ForGroup(LQ7,function IDE)
call WR7(LQ7)
if(BV9-Y5)*(BV9-Y5)+(BW9-Z5)*(BW9-Z5)<$640 then
call PauseTimer(t)
call TP7(B07)
call NM7(OB7)
call KillUnit(BU7)
call WR7(T69)
endif
set t=null
set T69=null
set LQ7=null
call DestroyBoolExpr(U4D)
set U4D=null
set WI7=null
set BU7=null
set m5=null
set BB7=null
endfunction
function IGE takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer OB7=GetHandleId(t)
local group T69=OF7(OB7,"AlreadyDamaged")
local group LQ7=WS7()
local boolexpr U4D=Condition(function IEE)
local unit WI7=O77(OB7,"Hero")
local unit BU7=O77(OB7,"Projectile")
local real Y5=ON7(OB7,"TargetX")
local real Z5=ON7(OB7,"TargetY")
local real t5=GetUnitX(BU7)
local real w5=GetUnitY(BU7)
local real l4=ON7(OB7,"Angle")
local real BV9=X17(GetUnitX(BU7)+30*Cos(l4))
local real BW9=X07(GetUnitY(BU7)+30*Sin(l4))
local unit BB7
local integer V77=GetUnitAbilityLevel(WI7,(1093683287))
if OO7(OB7,"TrailNext")then
call NS7(OB7,"TrailNext",false)
set BB7=CreateUnit(GetOwningPlayer(WI7),(1747988530),t5,w5,0)
call SetUnitAbilityLevel(BB7,(1093683506),V77)
call SetUnitAbilityLevel(BB7,(1093683289),V77)
call UnitApplyTimedLife(BB7,1112820806,7)
else
call NS7(OB7,"TrailNext",true)
endif
call SetUnitX(BU7,BV9)
call SetUnitY(BU7,BW9)
set R8=T69
set D8=WI7
set F8=50*GetUnitAbilityLevel(WI7,(1093683287))
call GroupEnumUnitsInRange(LQ7,BV9,BW9,175,U4D)
call ForGroup(LQ7,function IDE)
call WR7(LQ7)
if(BV9-Y5)*(BV9-Y5)+(BW9-Z5)*(BW9-Z5)<$640 then
call PauseTimer(t)
call NM7(OB7)
call KillUnit(BU7)
call WR7(T69)
endif
set t=null
set T69=null
set LQ7=null
call DestroyBoolExpr(U4D)
set U4D=null
set WI7=null
set BU7=null
set BB7=null
endfunction
function IHE takes unit WI7,integer D5 returns boolean
return(GetItemTypeId(UnitItemInSlot(WI7,D5))==1886613604)or(GetItemTypeId(UnitItemInSlot(WI7,D5))==1868983399)
endfunction
function IIE takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local real Z27=ON7(OB7,"Duration")
local integer T8=0
loop
exitwhen T8>5
if IHE(WI7,T8)then
if GetUnitAbilityLevel(WI7,(1110455351))==0 then
call SetItemDropOnDeath(UnitItemInSlot(WI7,T8),true)
if GetItemTypeId(UnitItemInSlot(WI7,T8))==1868983399 then
call SetItemDroppable(UnitItemInSlot(WI7,T8),true)
endif
else
call SetItemDropOnDeath(UnitItemInSlot(WI7,T8),false)
if GetItemTypeId(UnitItemInSlot(WI7,T8))==1868983399 then
call SetItemDroppable(UnitItemInSlot(WI7,T8),false)
endif
endif
endif
set T8=T8+1
endloop
set Z27=Z27+.2
call NQ7(OB7,"Duration",(Z27)*1.)
if GetUnitAbilityLevel(WI7,(1110455351))==0 then
call SetUnitPathing(WI7,true)
else
call SetUnitPathing(WI7,false)
endif
if Z27>30 then
call PauseTimer(t)
call NM7(OB7)
call SetUnitPathing(WI7,true)
set T8=0
loop
exitwhen T8>5
if IHE(WI7,T8)then
call SetItemDropOnDeath(UnitItemInSlot(WI7,T8),true)
if GetItemTypeId(UnitItemInSlot(WI7,T8))==1868983399 then
call SetItemDroppable(UnitItemInSlot(WI7,T8),true)
endif
endif
set T8=T8+1
endloop
endif
set t=null
set WI7=null
endfunction
function IJE takes nothing returns boolean
return GetSpellAbilityId()==(1093683287)
endfunction
function IKE takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local real t5=X17(GetUnitX(WI7))
local real w5=X07(GetUnitY(WI7))
local unit BU7=CreateUnit(GetOwningPlayer(WI7),(1747988531),t5,w5,0)
local timer t=CreateTimer()
local integer OB7=GetHandleId(t)
local group T69=WS7()
local location IME
local real l4
local real Y5
local real Z5
call SetUnitPathing(BU7,false)
call NB7(OB7,"AlreadyDamaged",T69)
call NT7(OB7,"Hero",WI7)
call NT7(OB7,"Projectile",BU7)
if m5!=null then
call NP7(OB7,"TargetIndex",TS7(m5))
call TimerStart(t,.035,true,function IFE)
else
set IME=GetSpellTargetLoc()
set Y5=GetLocationX(IME)
set Z5=GetLocationY(IME)
set l4=Atan2(Z5-w5,Y5-t5)
call SetUnitFacing(BU7,l4*bj_RADTODEG)
set Y5=X17(t5+$834*Cos(l4))
set Z5=X07(w5+$834*Sin(l4))
call NQ7(OB7,"TargetX",(Y5)*1.)
call NQ7(OB7,"TargetY",(Z5)*1.)
call NQ7(OB7,"Angle",l4*1.)
call TimerStart(t,.035,true,function IGE)
endif
set t=CreateTimer()
set OB7=GetHandleId(t)
call SetUnitPathing(WI7,false)
call NT7(OB7,"Hero",WI7)
call TimerStart(t,.2,true,function IIE)
set WI7=null
set m5=null
set BU7=null
set t=null
set T69=null
call RemoveLocation(IME)
set IME=null
endfunction
function JN8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function IJE))
call TriggerAddAction(t,function IKE)
call CreateSound("Sounds\\Spectral Dagger.mp3",false,false,false,$A,$A,"DefaultEAXON")
call X_7(1093683506)
call X_7(1093683289)
set t=null
endfunction
function INE takes nothing returns boolean
return GetUnitAbilityLevel(GetAttacker(),'A0FX')>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(GetTriggerUnit())!=1848651852
endfunction
function IOE takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false
endfunction
function IPE takes nothing returns nothing
local unit S68=GetAttacker()
local unit sE=GetTriggerUnit()
local group LQ7=WS7()
local boolexpr hP=Condition(function IOE)
local integer OB7
call GroupEnumUnitsInRange(LQ7,GetUnitX(sE),GetUnitY(sE),325+25,hP)
call GroupRemoveUnit(LQ7,sE)
if FirstOfGroup(LQ7)==null then
set OB7=GetHandleId(S68)
if OT7(S68,"Desolate")==false then
call UnitDamageTarget(S68,sE,5+15*GetUnitAbilityLevel(S68,1093682776),true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_DIVINE,WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayTarget.mdl",sE,"overhead"))
call O37(S68,"Desolate",.3)
endif
endif
call WR7(LQ7)
call DestroyBoolExpr(hP)
set S68=null
set sE=null
set LQ7=null
set hP=null
endfunction
function JO8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function INE))
call TriggerAddAction(t,function IPE)
set t=null
endfunction
function aDx takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))!=null
endfunction
function IQE takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit m5=GetEnumUnit()
local unit oA=CreateUnit(GetOwningPlayer(WI7),1697656901,GetUnitX(WI7),GetUnitY(WI7),0)
local real YM7=F8
call UnitAddAbility(oA,1093684814)
call IssueTargetOrderById(oA,$D007F,m5)
call UnitDamageTarget(WI7,m5,YM7,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
set WI7=null
set m5=null
set oA=null
endfunction
function IRE takes nothing returns nothing
local real d=KE7(GetTriggerUnit(),GetEnumUnit())-25
local real ISE=0
if d<=300 then
set ISE=1
elseif d<$3E8 then
set ISE=($3E8-d)/700
endif
if ISE>0 then
set V04[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=true
call B67(GetTriggerUnit(),GetEnumUnit(),3,YS*ISE)
set V04[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=false
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl",GetEnumUnit(),"chest"))
endif
endfunction
function ITE takes nothing returns boolean
local unit WX7=GetTriggerUnit()
local real VW9=GetEventDamage()
local integer BC7=GetUnitAbilityLevel(WX7,1093684801)
local group g
if C67(VW9)then
set g=WS7()
set YS=VW9*(.06+.04*BC7)
call YN7(WX7,YS)
call GroupEnumUnitsInRange(g,GetUnitX(WX7),GetUnitY(WX7),$401,Condition(function AW7))
call ForGroup(g,function IRE)
call WR7(g)
endif
set WX7=null
set g=null
return false
endfunction
function IUE takes unit WI7,boolean UA9 returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function ITE))
if UA9 then
set nj[GetPlayerId(GetOwningPlayer(WI7))]=t
endif
set t=null
endfunction
function IVE takes nothing returns boolean
if GetLearnedSkill()==1093684801 and GetUnitAbilityLevel(GetTriggerUnit(),1093684801)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call IUE(GetTriggerUnit(),false)
endif
return false
endfunction
function JP8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function IVE))
set t=null
endfunction
function IWE takes nothing returns boolean
return GetSpellAbilityId()==1093683257
endfunction
function IXE takes nothing returns nothing
local unit m5=GetEnumUnit()
local unit WI7=GetTriggerUnit()
local unit oA=CreateUnit(GetOwningPlayer(WI7),1697656901,GetUnitX(m5),GetUnitY(m5),0)
call NT7(GetHandleId(oA),"HauntTarget",m5)
call XF7(oA,1093684793)
call SetUnitAbilityLevel(oA,1093684793,GetUnitAbilityLevel(WI7,1093683257))
call IssueTargetOrderById(oA,$D0132,WI7)
set m5=null
set WI7=null
set oA=null
endfunction
function IYE takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))!=null
endfunction
function IZE takes nothing returns nothing
local integer OB7=GetHandleId(GetTriggeringTrigger())
local unit XU=O77(OB7,"HauntImage")
local unit m5=O77(OB7,"HauntTarget")
local integer IAE=OM7(OB7,"HauntPhase")
if GetTriggerEventId()!=EVENT_UNIT_DEATH and GetTriggerEventId()!=EVENT_UNIT_ISSUED_TARGET_ORDER and GetTriggerEventId()!=EVENT_UNIT_ISSUED_POINT_ORDER then
set IAE=IAE+1
call NP7(OB7,"HauntPhase",IAE)
endif
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call DisableTrigger(GetTriggeringTrigger())
call NM7(GetHandleId(GetTriggeringTrigger()))
call NP7(OB7,"HauntPhase",IAE)
if m5==GetTriggerUnit()then
call KillUnit(XU)
endif
elseif IsUnitPaused(XU)==false then
if IAE==2 then
call SetUnitVertexColor(XU,$FF,$FF,$FF,$FF)
endif
if IAE>1 then
call DisableTrigger(GetTriggeringTrigger())
call IssueTargetOrderById(XU,$D000F,m5)
call EnableTrigger(GetTriggeringTrigger())
else
call DisableTrigger(GetTriggeringTrigger())
call IssueTargetOrderById(XU,$D0012,m5)
call EnableTrigger(GetTriggeringTrigger())
endif
endif
set XU=null
set m5=null
endfunction
function IBE takes nothing returns boolean
return GetUnitAbilityLevel(GetSummonedUnit(),1110455884)>0
endfunction
function ICE takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit oA=GetSummoningUnit()
local unit XU=GetSummonedUnit()
local unit m5=O77(GetHandleId(oA),"HauntTarget")
local integer BC7=GetUnitAbilityLevel(WI7,1093683257)
local trigger t=CreateTrigger()
call SaveUnitHandle(L7,GetHandleId(M7[GetPlayerId(GetOwningPlayer(oA))]),StringHash("HauntTarget")+GetHandleId(XU),m5)
call SetUnitPathing(XU,false)
call SetUnitMoveSpeed(XU,339+61*BC7)
call SetUnitX(XU,GetUnitX(m5))
call SetUnitY(XU,GetUnitY(m5))
call IssueTargetOrderById(XU,$D0012,m5)
call SetUnitVertexColor(XU,$FF,$FF,$FF,50)
call TriggerRegisterUnitEvent(t,XU,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(t,XU,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(t,XU,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddAction(t,function IZE)
call DestroyEffect(AddSpecialEffect("units\\nightelf\\SpiritOfVengeance\\SpiritOfVengeance.mdl",GetUnitX(XU),GetUnitY(XU)))
call NT7(GetHandleId(t),"HauntTarget",m5)
call NT7(GetHandleId(t),"HauntImage",XU)
call NP7(GetHandleId(t),"HauntPhase",0)
if(OF7(GetHandleId(GetOwningPlayer(GetSummoningUnit())),"MGrp")!=null)then
call GroupAddUnit(OF7(GetHandleId(GetOwningPlayer(GetSummoningUnit())),"MGrp"),GetSummonedUnit())
call SetUnitUserData(GetSummonedUnit(),GetPlayerId(GetOwningPlayer(O77(GetHandleId(oA),"HauntTarget"))))
endif
call NM7(GetHandleId(oA))
set t=null
set m5=null
set XU=null
set oA=null
set WI7=null
endfunction
function I3E takes nothing returns nothing
local unit WX7=GetTriggerUnit()
local group LQ7=WS7()
local boolexpr hP=Condition(function IYE)
local sound HT
call XF7(GetTriggerUnit(),(1093683265))
call SetUnitPathing(WX7,false)
call GroupEnumUnitsInRect(LQ7,bj_mapInitialPlayableArea,hP)
call ForGroup(LQ7,function IXE)
call SetUnitPathing(WX7,true)
if FirstOfGroup(LQ7)!=null then
set HT=CreateSound("Abilities\\Spells\\Other\\ANsa\\SacrificeUnit.wav",false,false,false,$A,$A,"DefaultEAXON")
call StartSound(HT)
call KillSoundWhenDone(HT)
endif
call DestroyBoolExpr(hP)
call WR7(LQ7)
set WX7=null
set LQ7=null
set hP=null
endfunction
function I6E takes nothing returns boolean
return GetLearnedSkill()==1093683257 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093683257)==1
endfunction
function ILE takes nothing returns nothing
call XF7(GetTriggerUnit(),1093683265)
endfunction
function JQ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function IWE))
call TriggerAddAction(t,function I3E)
set t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function IBE))
call TriggerAddAction(t,function ICE)
set t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function I6E))
call TriggerAddAction(t,function ILE)
call CreateSound("Abilities\\Spells\\Other\\ANsa\\SacrificeUnit.wav",false,false,false,$A,$A,"DefaultEAXON")
call X_7(1093684793)
set t=null
endfunction
function I0E takes nothing returns boolean
return GetUnitAbilityLevel(GetFilterUnit(),1110455884)>0
endfunction
function I5E takes nothing returns nothing
local unit WI7
local real in=YO7(GetEnumUnit(),GetSpellTargetLoc())
if in<F8 then
set D8=GetEnumUnit()
set F8=in
endif
set WI7=null
endfunction
function I2E takes nothing returns unit
local group LQ7=WS7()
local boolexpr hP=Condition(function I0E)
set D8=null
set F8=$98967F
call GroupEnumUnitsOfPlayer(LQ7,GetOwningPlayer(GetTriggerUnit()),hP)
call ForGroup(LQ7,function I5E)
set Zz=LQ7
call DestroyBoolExpr(hP)
set LQ7=null
set hP=null
return D8
endfunction
function Reality_KillOtherImages takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function I_E takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit m5=I2E()
local unit J4E=LoadUnitHandle(L7,GetHandleId(WI7),StringHash("HauntTarget")+GetHandleId(m5))
local real hN
local real ho
if m5==null then
call X37(GetOwningPlayer(WI7),"Cannot find any of your Haunting illusions")
else
set hN=GetUnitX(m5)
set ho=GetUnitY(m5)
call SetUnitX(m5,GetUnitX(WI7))
call SetUnitY(m5,GetUnitY(WI7))
call SetUnitX(WI7,hN)
call SetUnitY(WI7,ho)
if KF7(GetCameraEyePositionX(),GetCameraEyePositionY(),GetUnitX(m5),GetUnitY(m5))>$578 then
call PanCameraToTimedForPlayer(GetOwningPlayer(WI7),hN,ho,0)
endif
call IssueTargetOrderById(WI7,$D000F,J4E)
endif
set WI7=null
set m5=null
set J4E=null
endfunction
function J7E takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit m5=I2E()
if m5==null then
call KR7(WI7)
call X37(GetOwningPlayer(WI7),"Cannot find any of your Haunting illusions")
endif
set WI7=null
set m5=null
endfunction
function I1E takes nothing returns boolean
if GetSpellAbilityId()=='A0HA' then
call I_E()
endif
return false
endfunction
function JR8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function I1E))
set t=null
endfunction
function J8E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local integer V77=GetUnitAbilityLevel(p5,1093682515)
local integer SG9
local integer J9E
if V77>0 and XH7(p5)==false then
set SG9=R2I(GetUnitMoveSpeed(p5)*.04*V77)
set J9E=OM7(OB7,"LastBonus")
if SG9!=J9E then
call NP7(OB7,"LastBonus",SG9)
endif
endif
set t=null
set p5=null
return false
endfunction
function JDE takes unit WI7,boolean UA9 returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function J8E))
call NT7(OB7,"Source",WI7)
call NP7(OB7,"LastBonus",0)
if UA9 then
set aj[GetPlayerId(GetOwningPlayer(WI7))]=t
endif
set t=null
endfunction
function JEE takes nothing returns boolean
if GetLearnedSkill()==1093682515 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093682515)==1 then
call JDE(GetTriggerUnit(),false)
endif
return false
endfunction
function IT8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function JEE))
set t=null
endfunction
function JFE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real GKD=(LoadReal(L7,(GetHandleId(ZX7)),(685)))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if GKD<(TimerGetElapsed(W))or GetTriggerEventId()==EVENT_WIDGET_DEATH then
call SaveReal(L7,(GetHandleId(ZX7)),(685),((0)*1.))
call UnitRemoveAbility(ZX7,1093809224)
call UnitRemoveAbility(ZX7,1110459715)
endif
set t=null
set ZX7=null
return false
endfunction
function JGE takes unit ZX7 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call XF7(ZX7,1093809224)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093809224,false)
call SaveReal(L7,(GetHandleId(ZX7)),(685),(((TimerGetElapsed(W))+YU4-.01)*1.))
call TriggerRegisterTimerEvent(t,YU4,false)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerAddCondition(t,Condition(function JFE))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set t=null
endfunction
function JHE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real TA9=(LoadReal(L7,(I97),($D)))
local real x=GetUnitX(IH7)
local real y=GetUnitY(IH7)
local integer WF8=GetTriggerEvalCount(t)
local real R9D=(LoadReal(L7,(I97),($C1)))
local integer Z49=(LoadInteger(L7,(I97),($C)))
if WF8>35 then
call SaveReal(L7,(I97),($C1),((R9D*.98)*1.))
endif
if GetTriggerEventId()==EVENT_UNIT_DEATH or WF8>Z49 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",x,y))
call Y67(x,y,$96)
set x=X17(x+R9D*Cos(TA9))
set y=X07(y+R9D*Sin(TA9))
if(IsPointInRegion(IU4,((x)*1.),((y)*1.)))==false then
call SetUnitX(IH7,x)
call SetUnitY(IH7,y)
endif
if WF8==1 and(LoadBoolean(L7,(I97),(698)))==false then
call IssueTargetOrderById(ZX7,$D000F,IH7)
endif
endif
set t=null
set IH7=null
set ZX7=null
return false
endfunction
function JIE takes unit ZX7,unit IH7,boolean JJE,boolean JKE returns nothing
local trigger t
local integer I97
local real TA9=Atan2(GetUnitY(IH7)-GetUnitY(ZX7),GetUnitX(IH7)-GetUnitX(ZX7))
local integer BC7=GetUnitAbilityLevel(ZX7,1093682997)
local unit BB7
if JJE then
endif
if BC7>0 then
set BB7=CreateUnit(GetOwningPlayer(IH7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
call XF7(BB7,1093752657)
call SetUnitAbilityLevel(BB7,1093752657,BC7)
if IssueTargetOrderById(BB7,$D007F,IH7)then
set t=CreateTrigger()
set I97=GetHandleId(t)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",ZX7,"weapon"))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveReal(L7,(I97),($D),((TA9)*1.))
call SaveReal(L7,(I97),($C1),((2)*1.))
call SaveBoolean(L7,(I97),(698),(JKE))
call SaveInteger(L7,(I97),($C),(80+20*BC7))
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,.01,true)
call TriggerAddCondition(t,Condition(function JHE))
call B67(ZX7,IH7,1,GetUnitMoveSpeed(ZX7)*(.16+.06*BC7))
call JGE(ZX7)
endif
if JKE==false then
call O37(ZX7,"pIv",1.5)
endif
endif
set t=null
set ZX7=null
set IH7=null
set BB7=null
endfunction
function JME takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093682997)>0 and IsUnitIllusion(GetAttacker())==false and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))and GetRandomInt(1,100)<=17 and OT7(GetAttacker(),"pIv")==false then
call JIE(GetAttacker(),GetTriggerUnit(),false,false)
endif
return false
endfunction
function IU8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function JME))
set t=null
endfunction
function JNE takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),YZ4)==false then
call GroupAddUnit(YZ4,GetEnumUnit())
call JIE(YW4,GetEnumUnit(),false,true)
endif
endfunction
function JOE takes integer id returns boolean
return(id==1093750840 or id==1093682515 or id==1093682996 or id==1093747768 or id==1093682997 or id==1096904043)or(id==$D0022 or id==$D0023 or id==$D0024 or id==$D0025 or id==$D0026 or id==$D0027)or(id>$F4240)
endfunction
function JPE takes nothing returns boolean
if(IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(YW4)) then
if KE7(YX4,GetFilterUnit())<YY4 then
set YY4=KE7(YX4,GetFilterUnit())
set YV4=GetFilterUnit()
endif
endif
return false
endfunction
function JQE takes unit ZX7,unit IH7 returns unit
local group g=WS7()
set IN4=ZX7
set YW4=ZX7
set YV4=null
set YY4=$F423F
set YX4=IH7
call GroupEnumUnitsInRange(g,GetUnitX(IH7),GetUnitY(IH7),$FA0,Condition(function JPE))
call WR7(g)
set g=null
return YV4
endfunction
function JRE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
local integer BC7=(LoadInteger(L7,(I97),(5)))
local real D4D=(550+50*BC7)*.02
local real TP9=(LoadReal(L7,(I97),(23)))
local real TQ9=(LoadReal(L7,(I97),(24)))
local real x
local real y
local real a
local real d
local string fx
local group g
if(GetTriggerEventId()==EVENT_WIDGET_DEATH and GetTriggerUnit()==ZX7)or GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER or YN8(ZX7)or(LoadReal(L7,(I97),(442)))<(TimerGetElapsed(W))then
if(GetTriggerEventId()!=EVENT_UNIT_ISSUED_ORDER and GetTriggerEventId()!=EVENT_UNIT_ISSUED_POINT_ORDER and GetTriggerEventId()!=EVENT_UNIT_ISSUED_TARGET_ORDER)or((GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER)and JOE(GetIssuedOrderId())==false)then
call DestroyEffect((LoadEffectHandle(L7,(I97),($AF))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B1))))
call UnitRemoveAbility(IH7,1093809228)
call UnitRemoveAbility(IH7,1110459716)
call WR7((LoadGroupHandle(L7,(I97),($BB))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call SetUnitTimeScale(ZX7,1)
call KillUnit(BB7)
call SetUnitPathing(ZX7,true)
call SetUnitVertexColor(ZX7,$FF,$FF,$FF,$FF)
call UnitRemoveAbility(ZX7,1093744441)
call Y67(GetUnitX(ZX7),GetUnitY(ZX7),$C8)
call SaveBoolean(L7,GetHandleId(ZX7),1145131595,false)
if GetTriggerEventId()!=EVENT_WIDGET_DEATH then
call ResetUnitAnimation(ZX7)
endif
endif
elseif GetTriggerEventId()==EVENT_WIDGET_DEATH and GetTriggerUnit()==IH7 then
set fx=""
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(ZX7))or WG7(GetLocalPlayer())then
set fx="Abilities\\Spells\\Other\\HowlOfTerror\\HowlTarget.mdl"
endif
call UnitRemoveAbility(IH7,1093809228)
call UnitRemoveAbility(IH7,1110459716)
set IH7=JQE(ZX7,IH7)
if IH7!=null then
call SaveUnitHandle(L7,(I97),(17),(IH7))
call DestroyEffect((LoadEffectHandle(L7,(I97),($AF))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
call SaveEffectHandle(L7,(I97),($AF),(AddSpecialEffectTarget(fx,IH7,"overhead")))
call SaveEffectHandle(L7,(I97),($B0),(AddSpecialEffectTarget(fx,IH7,"overhead")))
call SaveReal(L7,(I97),(442),(((TimerGetElapsed(W))+50)*1.))
call TriggerRegisterDeathEvent(t,IH7)
else
call DestroyEffect((LoadEffectHandle(L7,(I97),($AF))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B1))))
call UnitRemoveAbility(IH7,1093809228)
call UnitRemoveAbility(IH7,1110459716)
call WR7((LoadGroupHandle(L7,(I97),($BB))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call SetUnitTimeScale(ZX7,1)
call KillUnit(BB7)
call SetUnitPathing(ZX7,true)
call ResetUnitAnimation(ZX7)
call SetUnitVertexColor(ZX7,$FF,$FF,$FF,$FF)
call UnitRemoveAbility(ZX7,1093744441)
call SetUnitPosition(ZX7,GetUnitX(ZX7),GetUnitY(ZX7))
call Y67(GetUnitX(ZX7),GetUnitY(ZX7),500)
endif
else
set d=KF7(GetUnitX(ZX7),GetUnitY(ZX7),GetUnitX(IH7),GetUnitY(IH7))
if d<100 then
call DestroyEffect((LoadEffectHandle(L7,(I97),($AF))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B1))))
call UnitRemoveAbility(IH7,1093809228)
call UnitRemoveAbility(IH7,1110459716)
call WR7((LoadGroupHandle(L7,(I97),($BB))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call SetUnitTimeScale(ZX7,1)
call KillUnit(BB7)
set BB7=CreateUnit(GetOwningPlayer(IH7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
call UnitAddAbility(BB7,1093683027)
call SetUnitAbilityLevel(BB7,1093683027,BC7)
call IssueTargetOrderById(BB7,$D007F,IH7)
call SetUnitPathing(ZX7,true)
call SetUnitVertexColor(ZX7,$FF,$FF,$FF,$FF)
call UnitRemoveAbility(ZX7,1093744441)
call SetUnitPosition(ZX7,GetUnitX(ZX7),GetUnitY(ZX7))
call Y67(GetUnitX(ZX7),GetUnitY(ZX7),$C8)
set YA4=BC7
call IssueTargetOrderById(ZX7,$D000F,IH7)
if TZ7(GetOwningPlayer(ZX7))then
set hq[832+GetPlayerId(GetOwningPlayer(ZX7))]=0
endif
else
if GetTriggerEvalCount(t)==1 then
call DisableTrigger(t)
call IssueImmediateOrderById(ZX7,$D0019)
call EnableTrigger(t)
endif
if ModuloInteger(GetTriggerEvalCount(t),65)==0 then
if GetUnitTypeId(ZX7)==1160786520 then
call SetUnitAnimationByIndex(ZX7,1)
else
call SetUnitAnimationByIndex(ZX7,2)
endif
endif
set a=J47(ZX7,IH7)*bj_DEGTORAD
call SetUnitFacing(ZX7,a*bj_RADTODEG)
set x=TP9+D4D*Cos(a)
set y=TQ9+D4D*Sin(a)
call SetUnitX(ZX7,x)
call SetUnitY(ZX7,y)
call SetUnitX(BB7,GetUnitX(IH7))
call SetUnitY(BB7,GetUnitY(IH7))
call SaveReal(L7,(I97),(23),((x)*1.))
call SaveReal(L7,(I97),(24),((y)*1.))
set YZ4=(LoadGroupHandle(L7,(I97),($BB)))
set g=WS7()
set IN4=ZX7
set YW4=ZX7
call GroupEnumUnitsInRange(g,x,y,325,Condition(function AJ7))
call GroupRemoveUnit(g,IH7)
set YA4=BC7
call ForGroup(g,function JNE)
call WR7(g)
set g=null
if d<$BB8 and GetUnitAbilityLevel(IH7,1093809228)==0 then
endif
if TZ7(GetOwningPlayer(ZX7))then
set hq[832+GetPlayerId(GetOwningPlayer(ZX7))]=Bz+1
endif
endif
endif
set t=null
set ZX7=null
set IH7=null
set BB7=null
return false
endfunction
function JSE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1865429073,GetUnitX(IH7),GetUnitY(IH7),0)
local integer BC7=GetUnitAbilityLevel(ZX7,1093750840)
local string fx=""
call SaveBoolean(L7,GetHandleId(ZX7),1145131595,true)
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(ZX7))or WG7(GetLocalPlayer())then
set fx="Abilities\\Spells\\Other\\HowlOfTerror\\HowlTarget.mdl"
call PingMinimapEx(GetUnitX(IH7),GetUnitY(IH7),2,$FF,$FF,$FF,false)
endif
call IssueTargetOrderById(ZX7,$D0012,IH7)
call SetUnitPathing(ZX7,false)
if GetUnitTypeId(ZX7)==1160786520 then
call SetUnitAnimationByIndex(ZX7,1)
else
call SetUnitAnimationByIndex(ZX7,2)
endif
call SetUnitTimeScale(ZX7,2.5)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093744441,false)
call SetUnitVertexColor(ZX7,$FF,$FF,$FF,100)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveUnitHandle(L7,(I97),(19),(BB7))
call SaveInteger(L7,(I97),(5),(BC7))
call SaveReal(L7,(I97),(442),(((TimerGetElapsed(W))+50)*1.))
call SaveReal(L7,(I97),(23),((GetUnitX(ZX7))*1.))
call SaveReal(L7,(I97),(24),((GetUnitY(ZX7))*1.))
call SaveEffectHandle(L7,(I97),($AF),(AddSpecialEffectTarget(fx,IH7,"overhead")))
call SaveEffectHandle(L7,(I97),($B0),(AddSpecialEffectTarget(fx,IH7,"overhead")))
call SaveEffectHandle(L7,(I97),($B1),(AddSpecialEffectTarget("war3mapImported\\ShockwaveMissilePurple.mdx",ZX7,"origin")))
call SaveGroupHandle(L7,(I97),($BB),(WS7()))
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_ISSUED_ORDER)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(t,Condition(function JRE))
set t=null
set ZX7=null
set IH7=null
set BB7=null
endfunction
function JTE takes nothing returns boolean
if GetSpellAbilityId()==1093750840 and WQ7(GetSpellTargetUnit())==false then
call JSE()
endif
return false
endfunction
function IS8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function JTE))
set t=null
call X_7(1093687350)
endfunction
function JUE takes unit ZX7,unit IH7 returns nothing
local trigger t
local integer I97
local real l4=Atan2(GetUnitY(IH7)-GetUnitY(ZX7),GetUnitX(IH7)-GetUnitX(ZX7))
local integer BC7=4
call JIE(ZX7,IH7,true,true)
set t=null
endfunction
function JVE takes nothing returns nothing
call JUE(WH4,GetEnumUnit())
endfunction
function JWE takes unit ZX7,unit IH7 returns nothing
local group g=WS7()
set IN4=ZX7
set WH4=ZX7
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),375,Condition(function AJ7))
call ForGroup(g,function JVE)
call WR7(g)
set g=null
endfunction
function JXE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer WF8=GetTriggerEvalCount(t)
local integer JYE
local integer BC7
local real TA9
local real TP9=(LoadReal(L7,(I97),(23)))
local real TQ9=(LoadReal(L7,(I97),(24)))
local real x=GetUnitX(IH7)
local real y=GetUnitY(IH7)
local real d=KF7(x,y,TP9,TQ9)
call SaveReal(L7,(I97),(23),((x)*1.))
call SaveReal(L7,(I97),(24),((y)*1.))
if GetTriggerEventId()==EVENT_UNIT_DEATH or WF8==$C8 or d>$708 then
call SetUnitVertexColor(ZX7,$FF,$FF,$FF,$FF)
call UnitShareVision(IH7,GetOwningPlayer(ZX7),false)
call UnitRemoveAbility(ZX7,1093744441)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
if WF8<100 then
set JYE=WF8
else
set JYE=$C8-WF8
endif
call SetUnitVertexColor(ZX7,$FF,$FF,$FF,$FF*(100-JYE)/100)
if WF8==100 then
set BC7=(LoadInteger(L7,(I97),(5)))
set TA9=Atan2(GetUnitY(IH7)-GetUnitY(ZX7),GetUnitX(IH7)-GetUnitX(ZX7))
call SetUnitPosition(ZX7,GetUnitX(IH7)+80*Cos(TA9),GetUnitY(IH7)+80*Sin(TA9))
call SetUnitAnimation(ZX7,"attack")
call IssueTargetOrderById(ZX7,$D000F,IH7)
if GetUnitAbilityLevel(ZX7,1093682996)>0 then
call JUE(ZX7,IH7)
else
call JWE(ZX7,IH7)
endif
call B67(ZX7,IH7,1,50+100*BC7)
endif
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function JZE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093682996)
if BC7==0 then
set BC7=GetUnitAbilityLevel(ZX7,1093747768)
endif
call UnitShareVision(IH7,GetOwningPlayer(ZX7),true)
call IssueImmediateOrder(ZX7,"halt")
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveInteger(L7,(I97),(5),(BC7))
call SaveReal(L7,(I97),(23),((GetUnitX(IH7))*1.))
call SaveReal(L7,(I97),(24),((GetUnitY(IH7))*1.))
call TriggerRegisterTimerEvent(t,.012,true)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function JXE))
call XF7(ZX7,1093744441)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093744441,false)
set t=null
set ZX7=null
set IH7=null
endfunction
function JAE takes nothing returns boolean
if(GetSpellAbilityId()==1093682996 or GetSpellAbilityId()==1093747768)and WQ7(GetSpellTargetUnit())==false then
call JZE()
endif
return false
endfunction
function IV8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function JAE))
set t=null
endfunction
function JBE takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093809973)
if BC7==1 then
call XF7(ZX7,1093809974)
elseif BC7==2 then
call UnitRemoveAbility(ZX7,1093809974)
call XF7(ZX7,1093809977)
elseif BC7==3 then
call UnitRemoveAbility(ZX7,1093809974)
call UnitRemoveAbility(ZX7,1093809977)
call XF7(ZX7,1093809975)
elseif BC7==4 then
call UnitRemoveAbility(ZX7,1093809974)
call UnitRemoveAbility(ZX7,1093809977)
call UnitRemoveAbility(ZX7,1093809975)
call XF7(ZX7,1093809976)
endif
set ZX7=null
endfunction
function JCE takes nothing returns boolean
if GetLearnedSkill()==1093809973 and IsUnitIllusion(GetTriggerUnit())==false then
call JBE()
endif
return false
endfunction
function IY8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function JCE))
set t=null
endfunction
function J3E takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit m5=O77(OB7,"Target")
local real J6E=ON7(OB7,"SourceLifePercent")
local real JLE=ON7(OB7,"TargetLifePercent")
local integer V77=GetUnitAbilityLevel(p5,1093678929)
local real J1E=.3
if V77==2 then
set J1E=.4
elseif V77==3 then
set J1E=.5
endif
if GetSpellTargetUnit()==p5 then
call SetUnitState(p5,UNIT_STATE_LIFE,RMaxBJ(GetUnitState(p5,UNIT_STATE_MAX_LIFE)*JLE*.01,GetUnitState(p5,UNIT_STATE_MAX_LIFE)*J1E))
endif
if GetSpellTargetUnit()==m5 then
call SetUnitLifePercentBJ(m5,J6E)
if GetUnitLifePercent(m5)<30. and V77==1 and GetUnitState(m5,UNIT_STATE_LIFE)>1 then
call SetUnitLifePercentBJ(m5,30.)
endif
if GetUnitLifePercent(m5)<20. and V77==2 and GetUnitState(m5,UNIT_STATE_LIFE)>1 then
call SetUnitLifePercentBJ(m5,20.)
endif
if GetUnitLifePercent(m5)<10. and V77==3 and GetUnitState(m5,UNIT_STATE_LIFE)>1 then
call SetUnitLifePercentBJ(m5,10.)
endif
endif
if GetTriggerEvalCount(t)==2 then
call NM7(OB7)
call OZ7(t)
endif
set p5=null
set m5=null
set t=null
endfunction
function J0E takes nothing returns boolean
if GetSpellAbilityId()==1093678930 then
call J3E()
endif
return false
endfunction
function J5E takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local unit BB7
call NT7(OB7,"Source",p5)
call NT7(OB7,"Target",m5)
call NQ7(OB7,"SourceLifePercent",(GetUnitLifePercent(p5))*1.)
call NQ7(OB7,"TargetLifePercent",(GetUnitLifePercent(m5))*1.)
call TriggerAddCondition(t,Condition(function J0E))
set BB7=CreateUnit(GetOwningPlayer(m5),1697656921,GetUnitX(m5),GetUnitY(m5),0)
call TriggerRegisterUnitEvent(t,BB7,EVENT_UNIT_SPELL_EFFECT)
call XF7(BB7,1093678930)
call IssueTargetOrderById(BB7,$D007F,p5)
call ShowUnit(BB7,false)
call SetUnitPathing(BB7,false)
call SetUnitInvulnerable(BB7,true)
call UnitApplyTimedLife(BB7,1112820806,.2)
set BB7=CreateUnit(GetOwningPlayer(p5),1697656921,GetUnitX(p5),GetUnitY(p5),0)
call TriggerRegisterUnitEvent(t,BB7,EVENT_UNIT_SPELL_EFFECT)
call XF7(BB7,1093678930)
call IssueTargetOrderById(BB7,$D007F,m5)
call ShowUnit(BB7,false)
call SetUnitPathing(BB7,false)
call SetUnitInvulnerable(BB7,true)
call UnitApplyTimedLife(BB7,1112820806,.2)
set t=null
set p5=null
set m5=null
set BB7=null
endfunction
function J2E takes nothing returns boolean
if GetSpellAbilityId()==1093678929 then
call J5E()
endif
return false
endfunction
function IW8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function J2E))
set t=null
endfunction
function J_E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit VZ8=(LoadUnitHandle(L7,(I97),(335)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if GetTriggerUnit()!=VZ8 then
call KillUnit(VZ8)
endif
else
call IssueTargetOrderById(VZ8,$D000F,IH7)
endif
set t=null
set VZ8=null
set IH7=null
return false
endfunction
function K4E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
local unit VZ8
if GetSummoningUnit()==BB7 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set VZ8=GetSummonedUnit()
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterDeathEvent(t,VZ8)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerRegisterTimerEvent(t,.2,true)
call TriggerAddCondition(t,Condition(function J_E))
call SaveUnitHandle(L7,(I97),(335),(VZ8))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call UnitAddAbility(VZ8,1097625443)
call SetUnitPosition(VZ8,GetUnitX(IH7)+100,GetUnitY(IH7)+100)
call IssueTargetOrderById(VZ8,$D000F,IH7)
call SetUnitMoveSpeed(VZ8,522)
call SetUnitVertexColorBJ(VZ8,100,100,100,60)
endif
set t=null
set IH7=null
set ZX7=null
set BB7=null
return false
endfunction
function K7E takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093815130)
local integer id
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(ZX7),GetUnitY(ZX7),0)
local trigger t
local integer I97
if BC7>0 then
if BC7==1 then
set id=1093809750
elseif BC7==2 then
set id=1093809751
elseif BC7==3 then
set id=1093809752
elseif BC7==4 then
set id=1093809753
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),id,false)
if YS8(IH7)==false then
call Z57(IH7,id,1,5,1110459722)
endif
endif
set t=CreateTrigger()
set I97=GetHandleId(t)
call YB7(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function K4E))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveUnitHandle(L7,(I97),(19),(BB7))
call XF7(BB7,1093809227)
call SetUnitAbilityLevel(BB7,1093809227,BC7)
call IssueTargetOrderById(BB7,$D0132,IH7)
call Y17(YC4,GetUnitX(IH7),GetUnitY(IH7))
set ZX7=null
set IH7=null
set BB7=null
set t=null
endfunction
function K8E takes nothing returns boolean
if GetSpellAbilityId()==1093815130 then
call K7E()
endif
return false
endfunction
function IX8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function K8E))
set t=null
endfunction
function K9E takes nothing returns nothing
local unit ZX7=GetSummoningUnit()
local unit VZ8=GetSummonedUnit()
call SelectUnitAddForPlayer(VZ8,GetOwningPlayer(ZX7))
call UnitAddAbility(VZ8,1093815129)
call UnitRemoveAbility(VZ8,1093815129)
call SetUnitState(VZ8,UNIT_STATE_LIFE,GetUnitState(VZ8,UNIT_STATE_MAX_LIFE))
call SetUnitPosition(VZ8,GetUnitX(VZ8),GetUnitY(VZ8))
set ZX7=null
set VZ8=null
endfunction
function KDE takes nothing returns boolean
if GetUnitAbilityLevel(GetSummonedUnit(),1110459721)>0 then
call K9E()
endif
return false
endfunction
function KEE takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit BB7
local integer BC7=GetUnitAbilityLevel(ZX7,1093815128)
set BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(ZX7),GetUnitY(ZX7),0)
call XF7(BB7,1093679185)
call SetUnitAbilityLevel(BB7,1093679185,BC7)
call IssueTargetOrderById(BB7,$D0132,ZX7)
set ZX7=null
set BB7=null
endfunction
function KFE takes nothing returns boolean
if GetSpellAbilityId()==1093815128 and GetUnitTypeId(GetTriggerUnit())==1164277353 then
call KEE()
endif
return false
endfunction
function IB8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function KFE))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function KDE))
set t=null
endfunction
function KGE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
local integer BC7=(LoadInteger(L7,(I97),(5)))
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>(4*(4+BC7))or WF7(IH7)or KE7(ZX7,IH7)>700 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call KillUnit(BB7)
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetTriggerEvalCount(t)>1 and GetSpellAbilityId()==1093751361 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call UnitRemoveAbility(ZX7,1093751361)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093750856,true)
call KillUnit(BB7)
endif
elseif IsUnitVisible(IH7,GetOwningPlayer(ZX7))==false then
if(LoadInteger(L7,(I97),(34)))==1 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call KillUnit(BB7)
else
call SaveInteger(L7,(I97),(34),(1))
endif
else
call SaveInteger(L7,(I97),(34),(0))
if IsUnitAlly(ZX7,GetOwningPlayer(IH7))==false then
call SetUnitState(ZX7,UNIT_STATE_LIFE,GetUnitState(ZX7,UNIT_STATE_LIFE)+BC7*25./4.)
else
call SetUnitState(IH7,UNIT_STATE_LIFE,GetUnitState(IH7,UNIT_STATE_LIFE)+BC7*50./4.)
endif
endif
set t=null
set ZX7=null
set IH7=null
set BB7=null
return false
endfunction
function KHE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitRemoveAbility(ZX7,1093751361)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093750856,true)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
if GetTriggerEvalCount(t)==1 then
call IssueImmediateOrderById(ZX7,$D0019)
endif
if IsUnitAlly(ZX7,GetOwningPlayer(IH7))==false then
call SetUnitX(BB7,GetUnitX(ZX7))
call SetUnitY(BB7,GetUnitY(ZX7))
else
call SetUnitX(BB7,GetUnitX(IH7))
call SetUnitY(BB7,GetUnitY(IH7))
endif
endif
set t=null
set ZX7=null
set IH7=null
set BB7=null
return false
endfunction
function KIE takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093750856)
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit BB7
if IsUnitAlly(ZX7,GetOwningPlayer(IH7))==false then
set BB7=CreateUnit(GetOwningPlayer(ZX7),1966092615,0,0,0)
call XF7(BB7,1093678156)
call SetUnitAbilityLevel(BB7,1093678156,BC7)
call SetUnitX(BB7,GetUnitX(ZX7))
call SetUnitY(BB7,GetUnitY(ZX7))
call IssueTargetOrderById(BB7,$D0207,IH7)
else
call XF7(ZX7,1093751361)
call UnitMakeAbilityPermanent(ZX7,true,1093751361)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093750856,false)
set BB7=CreateUnit(B7,1966092615,0,0,0)
call XF7(BB7,1093678156)
call SetUnitAbilityLevel(BB7,1093678156,BC7)
call SetUnitX(BB7,GetUnitX(IH7))
call SetUnitY(BB7,GetUnitY(IH7))
call IssueTargetOrderById(BB7,$D0207,ZX7)
endif
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function KGE))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveUnitHandle(L7,(I97),(19),(BB7))
call SaveInteger(L7,(I97),(5),(BC7))
call SaveInteger(L7,(I97),(34),(0))
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.01,true)
call TriggerRegisterUnitEvent(t,BB7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function KHE))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveUnitHandle(L7,(I97),(19),(BB7))
set ZX7=null
set IH7=null
set t=null
endfunction
function KJE takes nothing returns boolean
if GetSpellAbilityId()==1093750856 and GetUnitTypeId(GetSpellTargetUnit())!=1848651852 and(IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))or WQ7(GetSpellTargetUnit())==false)then
call KIE()
endif
return false
endfunction
function IA8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function KJE))
endfunction
function KKE takes nothing returns boolean
return GetSpellAbilityId()==1093683252
endfunction
function KME takes nothing returns nothing
local unit S79=GetTriggerUnit()
local integer BC7=GetUnitAbilityLevel(S79,1093683252)
local unit BB7=CreateUnit(GetOwningPlayer(S79),1697656901,GetUnitX(S79),GetUnitY(S79),0)
call UnitAddAbility(BB7,1093814862)
call SetUnitAbilityLevel(BB7,1093814862,BC7)
call IssueTargetOrderById(BB7,$D0132,S79)
endfunction
function IZ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function KKE))
call TriggerAddAction(t,function KME)
endfunction
function KNE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit m5=GetEventDamageSource()
local integer BC7=GetUnitAbilityLevel(p5,1093678149)
local real d=GetEventDamage()
local real RM8=ON7(OB7,"KrakenShell|Damage")
local real KOE=ON7(OB7,"KrakenShell|LastTime")
local real I45=650-50*BC7
if TX7(GetOwningPlayer(m5))then
if(KOE+M2)<(KQ7())then
set RM8=0
endif
set KOE=(KQ7())
set RM8=RM8+d
if RM8>I45 and GetUnitAbilityLevel(p5,1112433775)==0 then
set RM8=0
call YZ8(p5)
call YW8(p5,0,0)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",p5,"origin"))
endif
call NQ7(OB7,"KrakenShell|Damage",RM8)
call NQ7(OB7,"KrakenShell|LastTime",KOE)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function KPE takes unit p5,boolean UA9 returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function KNE))
call NT7(OB7,"Source",p5)
call NQ7(OB7,"KrakenShell|Damage",0)
call NQ7(OB7,"KrakenShell|LastTime",KQ7())
if UA9 then
set aj[GetPlayerId(GetOwningPlayer(p5))]=t
endif
set t=null
endfunction
function KQE takes nothing returns boolean
if GetLearnedSkill()==1093678149 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093678149)==1 then
call KPE(GetTriggerUnit(),false)
endif
return false
endfunction
function IC8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function KQE))
set t=null
endfunction
function KRE takes nothing returns boolean
return GetSpellAbilityId()==1093678134 and WQ7(GetSpellTargetUnit())==false
endfunction
function KSE takes nothing returns nothing
local unit t=GetSpellTargetUnit()
local real KTE=(60.+(50.*I2R(GetUnitAbilityLevelSwapped(1093678134,GetTriggerUnit()))))
call UnitDamageTargetBJ(GetTriggerUnit(),t,KTE,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_COLD)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",t,"chest"))
set t=null
endfunction
function I38 takes nothing returns nothing
set DQ=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(DQ,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(DQ,Condition(function KRE))
call TriggerAddAction(DQ,function KSE)
endfunction
function KUE takes nothing returns boolean
return GetSpellAbilityId()==1093685074
endfunction
function KVE takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(D8))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0)!=null
endfunction
function KWE takes nothing returns nothing
call B67(D8,GetEnumUnit(),2,F8)
endfunction
function KXE takes unit ZX7,unit IH7,real VW9 returns nothing
local group VA9=WS7()
local boolexpr JJD=Condition(function KVE)
set D8=ZX7
set F8=VW9
call GroupEnumUnitsInRange(VA9,GetUnitX(IH7),GetUnitY(IH7),$E1+25,JJD)
call ForGroup(VA9,function KWE)
call DestroyBoolExpr(JJD)
call WR7(VA9)
set VA9=null
set JJD=null
endfunction
function KYE takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),R8)==false and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and XH7(GetFilterUnit())==false and GetFilterUnit()!=DF7)!=null
endfunction
function KZE takes group KAE,unit KBE,unit ZX7,unit pzv returns unit
local group VA9=WS7()
local boolexpr JJD=Condition(function KYE)
local unit KCE=null
local unit K3E
set R8=KAE
set D8=ZX7
call GroupEnumUnitsInRange(VA9,GetUnitX(KBE),GetUnitY(KBE),500,JJD)
set K3E=FirstOfGroup(VA9)
set KCE=K3E
loop
exitwhen K3E==null
if GetUnitState(K3E,UNIT_STATE_LIFE)!=GetUnitState(K3E,UNIT_STATE_MAX_LIFE)then
if K3E!=ZX7 and IsUnitType(K3E,UNIT_TYPE_HERO) and IsUnitType(KCE,UNIT_TYPE_HERO)==false then
set KCE=K3E
elseif K3E!=ZX7 and GetUnitState(K3E,UNIT_STATE_LIFE)<GetUnitState(KCE,UNIT_STATE_LIFE)and IsUnitType(K3E,UNIT_TYPE_HERO) and IsUnitType(KCE,UNIT_TYPE_HERO) then
set KCE=K3E
elseif K3E!=ZX7 and IsUnitType(KCE,UNIT_TYPE_HERO)==false and GetUnitState(K3E,UNIT_STATE_LIFE)<GetUnitState(KCE,UNIT_STATE_LIFE)then
set KCE=K3E
elseif K3E==ZX7 then
set KCE=K3E
endif
endif
call GroupRemoveUnit(VA9,K3E)
set K3E=FirstOfGroup(VA9)
endloop
call WR7(VA9)
call DestroyBoolExpr(JJD)
set VA9=null
set JJD=null
set K3E=null
set DI7=KCE
return DI7
endfunction
function K6E takes nothing returns nothing
local unit WX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local string KLE="Abilities\\Spells\\Undead\\ReplenishMana\\ReplenishManaCaster.mdl"
local string K1E="origin"
local unit array K0E
local integer x
local integer i=1
local integer BC7=GetUnitAbilityLevel(WX7,1093685074)
local real VW9=60+BC7*20
local group KAE=WS7()
local integer K5E
local boolean K2E=false
set DF7=WX7
if BC7==3 then
set K5E=4
elseif BC7==4 then
set K5E=5
else
set K5E=3
endif
call SetUnitState(WX7,UNIT_STATE_LIFE,GetUnitState(WX7,UNIT_STATE_LIFE)+VW9)
call KXE(WX7,WX7,VW9)
call GroupAddUnit(KAE,WX7)
call YS7(KLE,WX7,K1E,2)
if IH7==WX7 then
set K0E[i]=KZE(KAE,WX7,WX7,IH7)
else
set K0E[i]=IH7
endif
if K0E[i]==null then
call WR7(KAE)
return
endif
call SetUnitState(K0E[i],UNIT_STATE_LIFE,GetUnitState(K0E[i],UNIT_STATE_LIFE)+VW9)
call KXE(WX7,K0E[i],VW9)
call GroupAddUnit(KAE,K0E[i])
call YS7(KLE,K0E[i],K1E,2)
call YV7("SPLK",GetUnitX(WX7),GetUnitY(WX7),GetUnitX(K0E[i]),GetUnitY(K0E[i]),.3,.5,.9,1.,.7)
set i=2
loop
exitwhen i>K5E or K2E
set K0E[i]=KZE(KAE,K0E[i-1],WX7,IH7)
if K0E[i]==null then
set K2E=true
else
call GroupAddUnit(KAE,K0E[i])
call YS7(KLE,K0E[i],K1E,2)
call SetUnitState(K0E[i],UNIT_STATE_LIFE,GetUnitState(K0E[i],UNIT_STATE_LIFE)+VW9)
call KXE(WX7,K0E[i],VW9)
call YV7("SPLK",GetUnitX(K0E[i-1]),GetUnitY(K0E[i-1]),GetUnitX(K0E[i]),GetUnitY(K0E[i]),.3,.5,.9,1.,.7)
set i=i+1
endif
endloop
loop
set i=i-1
set K0E[i]=null
exitwhen i<2
endloop
call WR7(KAE)
set WX7=null
set IH7=null
set KAE=null
endfunction
function KE8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function KUE))
call TriggerAddAction(t,function K6E)
set t=null
endfunction
function K_E takes nothing returns boolean
return GetSpellAbilityId()==(1093684817)and WQ7(GetSpellTargetUnit())==false
endfunction
function M4E takes unit p5,unit m5,integer V77 returns nothing
local unit oA=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
call XF7(oA,1093684810)
call SetUnitAbilityLevel(oA,1093684810,V77)
call IssueTargetOrderById(oA,$D006B,m5)
set oA=null
endfunction
function M7E takes unit p5,unit m5 returns nothing
local unit oA=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
call XF7(oA,1093684811)
call IssueTargetOrderById(oA,$D007F,m5)
set oA=null
endfunction
function M8E takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=O77(I97,"Source")
local unit IH7=O77(I97,"Target")
local integer BC7=GetUnitAbilityLevel(ZX7,1093684817)
local integer M9E=GetTriggerExecCount(t)
local real VW9=10+15*BC7
local unit BB7=O77(I97,"Caster")
if BC7==1 then
call XF7(IH7,1093685079)
call B67(BB7,IH7,2,VW9)
if M9E==8 then
call UnitRemoveAbility(IH7,1093685079)
call NM7(I97)
call OZ7(t)
endif
endif
if BC7==2 then
if M9E==1 then
call M4E(ZX7,IH7,2)
endif
if M9E>1 then
call XF7(IH7,1093685079)
call B67(BB7,IH7,2,VW9)
endif
if M9E==9 then
call UnitRemoveAbility(IH7,1093685079)
call NM7(I97)
call OZ7(t)
endif
endif
if BC7==3 then
if M9E==1 then
call M4E(ZX7,IH7,2)
endif
if M9E==2 then
call M7E(ZX7,IH7)
endif
if M9E>2 then
call XF7(IH7,1093685079)
call B67(BB7,IH7,2,VW9)
endif
if M9E==$A then
call UnitRemoveAbility(IH7,1093685079)
call NM7(I97)
call OZ7(t)
endif
endif
if BC7==4 then
if M9E==1 then
call M4E(ZX7,IH7,2)
endif
if M9E==2 then
call M7E(ZX7,IH7)
endif
if M9E>2 then
call XF7(IH7,1093685079)
call B67(BB7,IH7,2,VW9)
endif
if M9E==$A then
call UnitRemoveAbility(IH7,1093685079)
call NM7(I97)
call OZ7(t)
endif
endif
set t=null
set BB7=null
set ZX7=null
set IH7=null
endfunction
function MDE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit BB7=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697656901,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),0)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddAction(t,function M8E)
call NT7(OB7,"Source",GetTriggerUnit())
call NT7(OB7,"Target",GetSpellTargetUnit())
call NT7(OB7,"Caster",(BB7))
call M4E(GetTriggerUnit(),GetSpellTargetUnit(),1)
set t=null
set BB7=null
endfunction
function KF8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function K_E))
call TriggerAddAction(t,function MDE)
call X_7(1093684810)
call X_7(1093684811)
set t=null
endfunction
function MEE takes string YY7,unit IH7,unit WX7 returns nothing
local texttag tt=CreateTextTag()
call SetTextTagText(tt,YY7,.033)
call SetTextTagPosUnit(tt,IH7,64)
call SetTextTagColor(tt,$A0,0,$FF,$FF)
call SetTextTagVelocity(tt,0,.0355)
call SetTextTagFadepoint(tt,.15)
call SetTextTagPermanent(tt,false)
call SetTextTagLifespan(tt,.65)
if IsUnitAlly(WX7,GetLocalPlayer())or WG7(GetLocalPlayer())then
call SetTextTagVisibility(tt,true)
else
call SetTextTagVisibility(tt,false)
endif
set tt=null
endfunction
function MFE takes real BZ7 returns string
if BZ7>4.5 then
return"5.0"
elseif BZ7>4. then
return"4.5"
elseif BZ7>3.5 then
return"4.0"
elseif BZ7>3. then
return"3.5"
elseif BZ7>2.5 then
return"3.0"
elseif BZ7>2. then
return"2.5"
elseif BZ7>1.5 then
return"2.0"
elseif BZ7>1. then
return"1.5"
elseif BZ7>.5 then
return"1.0"
elseif BZ7>.0 then
return"0.5"
else
return"0.0"
endif
return" "
endfunction
function MGE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit IH7=O77(I97,"Target")
local integer WF8=GetTriggerEvalCount(t)
if WF8>$B then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
call MEE(MFE(5.5-.5*WF8),IH7,IH7)
endif
set t=null
set IH7=null
return false
endfunction
function MHE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
local real MIE=ON7(OB7,"Damage")
local real MJE=YK7(GetUnitState(m5,UNIT_STATE_LIFE)-MIE,1)
local real MKE=ON7(GetHandleId(m5),"ShallowGrave|FakeLife")
call SetUnitState(m5,UNIT_STATE_LIFE,MJE)
call NQ7(GetHandleId(m5),"ShallowGrave|FakeLife",MKE-MIE)
call NM7(OB7)
call OZ7(t)
set t=null
set m5=null
return false
endfunction
function MME takes unit m5,real MIE returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local real MKE=ON7(GetHandleId(m5),"ShallowGrave|FakeLife")
call NT7(OB7,"Target",m5)
call NQ7(OB7,"Damage",MIE)
call NQ7(GetHandleId(m5),"ShallowGrave|FakeLife",MKE+MIE)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function MHE))
set t=null
endfunction
function MNE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5
local real Wx
local real MIE
local integer iX=GetTriggerEvalCount(t)
local real MKE
local real MOE=ON7(OB7,"LastFrame")
local real MPE=ON7(OB7,"FrameDamage")
if MOE!=KQ7()then
set MOE=KQ7()
set MPE=0
call NQ7(OB7,"LastFrame",MOE)
call NQ7(OB7,"FrameDamage",MPE)
endif
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
set m5=GetTriggerUnit()
set MKE=ON7(GetHandleId(m5),"ShallowGrave|FakeLife")
set Wx=GetUnitState(m5,UNIT_STATE_LIFE)
set MIE=GetEventDamage()
if((Wx-MKE-MPE)-MIE)<1 then
call SetUnitState(m5,UNIT_STATE_LIFE,Wx+MIE+MPE)
call MME(m5,MIE)
else
set MPE=MPE+MIE
call NQ7(OB7,"FrameDamage",MPE)
endif
else
call SaveInteger(L7,(GetHandleId(((LoadUnitHandle(L7,(OB7),(17)))))),((2485)),(2))
call OX7(O77(OB7,"Target"),"ShallowGrave|Active")
call DestroyEffect(OG7(OB7,"FX"))
call UnitRemoveAbility((O77(OB7,"Target")),1093808457)
call UnitRemoveAbility((O77(OB7,"Target")),1110456132)
call NM7(OB7)
call OZ7(t)
endif
set m5=null
set t=null
return false
endfunction
function MQE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit p5=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
call XF7(IH7,1093808457)
call TriggerRegisterTimerEvent(t,5,false)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function MNE))
call NU7(I97,"FX",AddSpecialEffectTarget("war3mapImported\\DarkHands.mdx",IH7,"overhead"))
call NQ7(GetHandleId(IH7),"ShallowGrave|FakeLife",0)
call NQ7(I97,"LastFrame",KQ7())
call NQ7(I97,"FrameDamage",0)
call NT7(I97,"Target",IH7)
call OV7(IH7,"ShallowGrave|Active")
call SaveInteger(L7,(GetHandleId((IH7))),((2485)),(1))
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function MGE))
call NT7(I97,"Target",IH7)
set t=null
set p5=null
set IH7=null
endfunction
function MRE takes nothing returns boolean
if GetSpellAbilityId()==1093742668 then
call MQE()
endif
return false
endfunction
function KG8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function MRE))
set t=null
endfunction
function MSE takes nothing returns nothing
local unit m5=GetEnumUnit()
if XH7(m5)==false then
call UnitRemoveAbility(m5,1093684821)
call UnitRemoveAbility(m5,1093684823)
elseif IsUnitType(m5,UNIT_TYPE_HERO) then
call ZH7(m5,1093684821,5.1)
call ZH7(m5,1093684823,5.1)
endif
set m5=null
endfunction
function MTE takes nothing returns nothing
local unit m5=GetEnumUnit()
if XH7(m5)==false then
if IsUnitAlly(m5,IR4)==false then
if IH4==0 then
call XF7(m5,1093684821)
else
call SetUnitAbilityLevel(m5,1093684821,IH4+1)
endif
else
if IH4==0 then
call XF7(m5,1093684823)
else
call SetUnitAbilityLevel(m5,1093684823,IH4+1)
endif
endif
endif
set m5=null
endfunction
function MUE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local group g=OF7(OB7,"g")
local player p=O97(OB7,"p")
local integer U38=GetTriggerEvalCount(t)
local integer Z27=OM7(OB7,"Duration")
set IR4=p
set IH4=U38
if U38==Z27/1. then
call ForGroup(g,function MSE)
call WR7(g)
call NM7(OB7)
call OZ7(t)
else
call ForGroup(g,function MTE)
endif
set t=null
set g=null
set p=null
return false
endfunction
function MVE takes nothing returns nothing
call YS7(IS4,GetEnumUnit(),"chest",3)
call YS7(IS4,GetEnumUnit(),"chest",3)
call YS7(IS4,GetEnumUnit(),"right hand",3)
call YS7(IS4,GetEnumUnit(),"left hand",3)
endfunction
function MWE takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local group g=WS7()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local integer V77=GetUnitAbilityLevel(WI7,1093742673)
local integer Z27=6+6*V77
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local unit BB7=CreateUnit(GetOwningPlayer(WI7),1747988535,x,y,0)
local boolean EWD=false
if V77==0 then
set V77=GetUnitAbilityLevel(WI7,1093747778)
set Z27=6+6*V77+6
set EWD=true
endif
call RemoveLocation(l)
set IS4="Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl"
call SetUnitVertexColor(BB7,$FF,$FF,$FF,$FF)
call UnitApplyTimedLife(BB7,1112820806,5)
if EWD then
call GroupEnumUnitsInRange(g,x,y,800,Condition(function BD7))
else
call GroupEnumUnitsInRange(g,x,y,600,Condition(function BD7))
endif
call ForGroup(g,function MVE)
call NB7(OB7,"g",g)
call NZ7(OB7,"p",GetOwningPlayer(WI7))
call NP7(OB7,"Duration",Z27)
call TriggerRegisterTimerEvent(t,1.,true)
call TriggerAddCondition(t,Condition(function MUE))
call TriggerEvaluate(t)
set WI7=null
set l=null
set g=null
set t=null
set BB7=null
endfunction
function MXE takes nothing returns boolean
if GetSpellAbilityId()==1093742673 or GetSpellAbilityId()==1093747778 then
call MWE()
endif
return false
endfunction
function KH8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function MXE))
call X_7(1093684821)
call X_7(1093684823)
set t=null
endfunction
function MYE takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),IQ4)==false then
set vZ=CreateUnit(GetOwningPlayer(IN4),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
call XF7(vZ,1093744462)
call SetUnitAbilityLevel(vZ,1093744462,R94)
call IssueTargetOrderById(vZ,$D022F,GetEnumUnit())
call GroupAddUnit(IQ4,GetEnumUnit())
endif
endfunction
function MZE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local group g=OF7(OB7,"g")
local unit oA=O77(OB7,"Caster")
local integer V77=OM7(OB7,"Level")
local real RK=ON7(OB7,"Angle")
local group LQ7
local real x
local real y
local real MAE
local real MBE
local real MCE=30
local unit M3E
set R94=V77
if GetTriggerEvalCount(t)>28 then
call WR7(g)
call NM7(OB7)
call OZ7(t)
call ShowUnit(oA,false)
call KillUnit(oA)
else
set x=GetUnitX(oA)
set y=GetUnitY(oA)
set LQ7=WS7()
set IQ4=g
set IN4=oA
set IJ4=V77*70
call GroupEnumUnitsInRange(LQ7,x,y,$96,Condition(function BG7))
call ForGroup(LQ7,function MYE)
call WR7(LQ7)
set MAE=X17(x+MCE*Cos(RK*bj_DEGTORAD))
set MBE=X07(y+MCE*Sin(RK*bj_DEGTORAD))
call SetUnitX(oA,MAE)
call SetUnitY(oA,MBE)
if ModuloInteger(GetTriggerEvalCount(t),3)==0 then
set M3E=CreateUnit(GetOwningPlayer(oA),1865429335,MAE,MBE,0)
call KillUnit(M3E)
endif
endif
set t=null
set g=null
set LQ7=null
set oA=null
return false
endfunction
function M6E takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local group g=WS7()
local unit WI7=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x1=GetUnitX(WI7)
local real y1=GetUnitY(WI7)
local real x2=GetLocationX(l)
local real y2=GetLocationY(l)
local real RK=J77(x1,y1,x2,y2)
local integer V77=GetUnitAbilityLevel(WI7,1093744435)
local unit oA=CreateUnit(GetOwningPlayer(WI7),1747990347,x1,y1,RK)
call Y17(QR,x1,y1)
call NT7(OB7,"Caster",oA)
call NP7(OB7,"Level",V77)
call NB7(OB7,"g",g)
call NQ7(OB7,"Angle",RK)
call NT7(OB7,"Hero",WI7)
call TriggerRegisterTimerEvent(t,.025,true)
call TriggerAddCondition(t,Condition(function MZE))
call RemoveLocation(l)
set t=null
set oA=null
set g=null
set WI7=null
set l=null
endfunction
function MLE takes nothing returns boolean
if GetSpellAbilityId()==1093744435 then
call M6E()
endif
return false
endfunction
function I18 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function MLE))
set t=null
endfunction
function M1E takes nothing returns nothing
local unit oA=CreateUnit(GetOwningPlayer(IN4),1865429065,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
call UnitApplyTimedLife(oA,1112820806,2)
set oA=null
endfunction
function M0E takes nothing returns boolean
return AJ7()and GetUnitAbilityLevel(GetFilterUnit(),1110454840)==0
endfunction
function M5E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local integer M2E=OM7(OB7,"NovaLevel")
local real r=ON7(OB7,"r")
local group g
if GetTriggerEvalCount(t)>$D then
call NM7(OB7)
call OZ7(t)
else
set r=r+53
call NQ7(OB7,"r",r)
set g=WS7()
set IN4=WI7
set IH4=M2E
call GroupEnumUnitsInRange(g,GetUnitX(WI7),GetUnitY(WI7),r,Condition(function M0E))
call ForGroup(g,function M1E)
call WR7(g)
endif
set t=null
set WI7=null
set g=null
return false
endfunction
function M_E takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local integer M2E
local integer i=1
local real x=GetUnitX(WI7)
local real y=GetUnitY(WI7)
local unit oA
if GetSpellAbilityId()==1093677363 then
set M2E=GetUnitAbilityLevel(WI7,1093677363)
else
set M2E=GetUnitAbilityLevel(WI7,1093681462)+1
endif
loop
exitwhen i>18
set oA=CreateUnit(GetOwningPlayer(WI7),1697657143,x,y,0)
if(GetPlayerController(GetOwningPlayer(WI7))==MAP_CONTROL_COMPUTER)then
call RemoveGuardPosition(oA)
endif
call XF7(oA,1093678391)
call SetUnitAbilityLevel(oA,1093678391,M2E)
call IssuePointOrderById(oA,$D0012,x+675*Cos(i*20*bj_DEGTORAD),y+675*Sin(i*20*bj_DEGTORAD))
call UnitApplyTimedLife(oA,1112820806,1.15)
set i=i+1
endloop
set WI7=null
set oA=null
endfunction
function N4E takes nothing returns boolean
if GetSpellAbilityId()==1093677363 or GetSpellAbilityId()==1093681462 then
call M_E()
endif
return false
endfunction
function I08 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function N4E))
set t=null
endfunction
function N7E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
call B_7(p5,0)
call OX7(p5,"4277")
set t=null
set p5=null
return false
endfunction
function N8E takes unit S68,unit m5 returns nothing
local real N9E=100*GetUnitState(m5,UNIT_STATE_LIFE)/GetUnitState(m5,UNIT_STATE_MAX_LIFE)
local real NDE=2.5*GetUnitAbilityLevel(S68,1093746995)
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local integer FinalBonus
call OV7(S68,"4277")
call TriggerRegisterTimerEvent(t,.35,false)
call TriggerAddCondition(t,Condition(function N7E))
call NT7(OB7,"Source",S68)
if IsUnitType(m5,UNIT_TYPE_HERO)==false then
set NDE=NDE/2
endif
if N9E>80 then
call B_7(S68,R2I(NDE))
elseif N9E>60 then
call B_7(S68,R2I(NDE*2))
elseif N9E>40 then
call B_7(S68,R2I(NDE*2*2))
elseif N9E>20 then
call B_7(S68,R2I(NDE*2*2*2))
else
call B_7(S68,R2I(NDE*2*2*2*2))
endif
set t=null
endfunction
function NEE takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
if GetSpellAbilityId()==1093679446 and GetUnitAbilityLevel(GetTriggerUnit(),1093746995)>0 then
call N8E(GetTriggerUnit(),GetSpellTargetUnit())
endif
else
if GetUnitAbilityLevel(GetAttacker(),1093746995)>0 and IsUnitIllusion(GetAttacker())==false and IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit())) and OT7(GetAttacker(),"4277")==false then
call N8E(GetAttacker(),GetTriggerUnit())
endif
endif
return false
endfunction
function I58 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function NEE))
set t=null
endfunction
function NFE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=(LoadInteger(L7,(I97),(5)))
local real GKD=(LoadReal(L7,(GetHandleId(IH7)),(684)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH or GKD<(TimerGetElapsed(W))or WF7(IH7)then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call SaveReal(L7,(GetHandleId(IH7)),(684),((0)*1.0))
call UnitRemoveAbility(IH7,1093808983)
call UnitRemoveAbility(IH7,1093808981)
call UnitRemoveAbility(IH7,1093808982)
call UnitRemoveAbility(IH7,1093808984)
call UnitRemoveAbility(IH7,1110459713)
else
set W3I=false
call B67(ZX7,IH7,1,5+5*BC7)
set W3I=true
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function NGE takes unit ZX7,unit IH7 returns nothing
local trigger t
local integer I97
local real GKD=(LoadReal(L7,(GetHandleId(IH7)),(684)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093684557)
if GKD>(TimerGetElapsed(W))then
call SaveReal(L7,(GetHandleId(IH7)),(684),(((TimerGetElapsed(W))+FU7)*1.0))
else
set t=CreateTrigger()
set I97=GetHandleId(t)
call SaveReal(L7,(GetHandleId(IH7)),(684),(((TimerGetElapsed(W))+FU7)*1.0))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerAddCondition(t,Condition(function NFE))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveInteger(L7,(I97),(5),(BC7))
if YS8(IH7)==false then
if BC7==1 then
call XF7(IH7,1093808983)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093808983,false)
elseif BC7==2 then
call XF7(IH7,1093808981)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093808981,false)
elseif BC7==3 then
call XF7(IH7,1093808982)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093808982,false)
elseif BC7==4 then
call XF7(IH7,1093808984)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093808984,false)
endif
endif
endif
set t=null
set ZX7=null
set IH7=null
endfunction
function NHE takes nothing returns boolean
local unit ZX7=GetTriggerUnit()
local unit IH7=GetEventDamageSource()
if C37(IH7)then
set IH7=(R1B[GetPlayerId(GetOwningPlayer((IH7)))])
endif
if W3I and IsUnitType(IH7,UNIT_TYPE_STRUCTURE)==false and Ma(ZX7,IH7)<1400 and IsUnitEnemy(ZX7,GetOwningPlayer(IH7))and WF7(IH7)==false and GetUnitAbilityLevel(ZX7,1112433775)==0 then
call NGE(ZX7,IH7)
endif
return false
endfunction
function H95 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function NHE))
call SaveUnitHandle(L7,(GetHandleId(t)),(14),(GetTriggerUnit()))
set t=null
endfunction
function HA5 takes nothing returns boolean
if GetLearnedSkill()==1093684557 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093684557)==1 then
call H95()
endif
return false
endfunction
function I28 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function HA5))
set t=null
endfunction
function NIE takes nothing returns nothing
local unit m5=GetSpellTargetUnit()
call UnitRemoveAbility(m5,1111847784)
call UnitRemoveAbility(m5,1110458705)
set m5=null
endfunction
function NJE takes nothing returns boolean
if GetSpellAbilityId()==1093679152 or GetSpellAbilityId()==1093752154 then
call NIE()
endif
return false
endfunction
function I_8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function NJE))
set t=null
endfunction
function NKE takes nothing returns boolean
return GetSpellAbilityId()==1093679192
endfunction
function NME takes nothing returns nothing
local location LB8=GetUnitLoc(GetSpellAbilityUnit())
call CreateNUnitsAtLocFacingLocBJ(1,1697656901,GetOwningPlayer(GetSpellAbilityUnit()),LB8,LB8)
call RemoveLocation(LB8)
call UnitAddAbility(bj_lastCreatedUnit,1093679427)
call SetUnitAbilityLevelSwapped(1093679427,bj_lastCreatedUnit,GetUnitAbilityLevelSwapped(1093679192,GetSpellAbilityUnit()))
call IssueTargetOrderById(bj_lastCreatedUnit,$D0085,GetSpellAbilityUnit())
endfunction
function J78 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function NKE))
call TriggerAddAction(t,function NME)
set t=null
endfunction
function NNE takes unit p5,integer V77,integer NOE returns nothing
call UnitRemoveAbility(p5,1093749586)
call UnitRemoveAbility(p5,1093749587)
call UnitRemoveAbility(p5,1093749585)
call UnitRemoveAbility(p5,1093749584)
call UnitRemoveAbility(p5,1093749553)
call UnitRemoveAbility(p5,1093749591)
call UnitRemoveAbility(p5,1093749592)
call UnitRemoveAbility(p5,1093749593)
call UnitRemoveAbility(p5,1093749812)
call UnitRemoveAbility(p5,1093749811)
call UnitRemoveAbility(p5,1093749810)
call UnitRemoveAbility(p5,1093749809)
call UnitRemoveAbility(p5,1093749816)
call UnitRemoveAbility(p5,1093749815)
call UnitRemoveAbility(p5,1093749817)
call UnitRemoveAbility(p5,1093749826)
if V77==1 then
if NOE==1 then
call XF7(p5,1093749586)
elseif NOE==2 then
call XF7(p5,1093749587)
elseif NOE==3 then
call XF7(p5,1093749585)
elseif NOE==4 then
call XF7(p5,1093749584)
endif
elseif V77==2 then
if NOE==1 then
call XF7(p5,1093749553)
elseif NOE==2 then
call XF7(p5,1093749591)
elseif NOE==3 then
call XF7(p5,1093749592)
elseif NOE==4 then
call XF7(p5,1093749593)
endif
elseif V77==3 then
if NOE==1 then
call XF7(p5,1093749812)
elseif NOE==2 then
call XF7(p5,1093749811)
elseif NOE==3 then
call XF7(p5,1093749810)
elseif NOE==4 then
call XF7(p5,1093749809)
endif
elseif V77==4 then
if NOE==1 then
call XF7(p5,1093749816)
elseif NOE==2 then
call XF7(p5,1093749815)
elseif NOE==3 then
call XF7(p5,1093749817)
elseif NOE==4 then
call XF7(p5,1093749826)
endif
endif
endfunction
function NPE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer NQE=OM7(OB7,"ShellCache")
local unit p5=O77(NQE,"Source")
local integer NOE=OM7(NQE,"ShellCounter")
local integer V77=GetUnitAbilityLevel(p5,1093686872)
set NOE=YG7(NOE+1,4)
call NP7(NQE,"ShellCounter",NOE)
call NNE(p5,V77,NOE)
call NM7(OB7)
call OZ7(t)
set t=null
set p5=null
return false
endfunction
function NRE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local integer NOE=OM7(OB7,"ShellCounter")
local integer V77=GetUnitAbilityLevel(GetTriggerUnit(),1093686872)
if GetEventDamage()>2 and GetEventDamageSource()!=GetTriggerUnit()and TX7(GetOwningPlayer(GetEventDamageSource()))then
if NOE>0 then
endif
set NOE=YH7(NOE-1,0)
call NP7(OB7,"ShellCounter",NOE)
call NNE(p5,V77,NOE)
set t=CreateTrigger()
set OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,4-V77*0,false)
call TriggerAddCondition(t,Condition(function NPE))
call NP7(OB7,"ShellCache",GetHandleId(GetTriggeringTrigger()))
endif
set t=null
set p5=null
return false
endfunction
function NSE takes nothing returns nothing
local trigger t
local integer OB7
local unit p5=GetTriggerUnit()
local integer V77=GetUnitAbilityLevel(GetTriggerUnit(),1093686872)
if V77==1 then
set t=CreateTrigger()
set OB7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function NRE))
call NT7(OB7,"Source",p5)
call NP7(OB7,"ShellCounter",4)
endif
call NNE(p5,V77,4)
set t=null
set p5=null
endfunction
function NTE takes nothing returns boolean
if GetLearnedSkill()==1093686872 and IsUnitIllusion(GetTriggerUnit())==false then
call NSE()
endif
return false
endfunction
function NUE takes player p returns nothing
call SetPlayerAbilityAvailable(p,1093749586,false)
call SetPlayerAbilityAvailable(p,1093749587,false)
call SetPlayerAbilityAvailable(p,1093749585,false)
call SetPlayerAbilityAvailable(p,1093749584,false)
call SetPlayerAbilityAvailable(p,1093749589,false)
call SetPlayerAbilityAvailable(p,1093749590,false)
call SetPlayerAbilityAvailable(p,1093749553,false)
call SetPlayerAbilityAvailable(p,1093749591,false)
call SetPlayerAbilityAvailable(p,1093749592,false)
call SetPlayerAbilityAvailable(p,1093749593,false)
call SetPlayerAbilityAvailable(p,1093749594,false)
call SetPlayerAbilityAvailable(p,1093749588,false)
call SetPlayerAbilityAvailable(p,1093749812,false)
call SetPlayerAbilityAvailable(p,1093749811,false)
call SetPlayerAbilityAvailable(p,1093749810,false)
call SetPlayerAbilityAvailable(p,1093749809,false)
call SetPlayerAbilityAvailable(p,1093749808,false)
call SetPlayerAbilityAvailable(p,1093749813,false)
call SetPlayerAbilityAvailable(p,1093749816,false)
call SetPlayerAbilityAvailable(p,1093749815,false)
call SetPlayerAbilityAvailable(p,1093749817,false)
call SetPlayerAbilityAvailable(p,1093749826,false)
call SetPlayerAbilityAvailable(p,1093749825,false)
call SetPlayerAbilityAvailable(p,1093749814,false)
call SetPlayerAbilityAvailable(p,1093749832,false)
call SetPlayerAbilityAvailable(p,1093750067,false)
call SetPlayerAbilityAvailable(p,1093750068,false)
call SetPlayerAbilityAvailable(p,1093750083,false)
call SetPlayerAbilityAvailable(p,1093750071,false)
call SetPlayerAbilityAvailable(p,1093750072,false)
call SetPlayerAbilityAvailable(p,1093750073,false)
call SetPlayerAbilityAvailable(p,1093750081,false)
call SetPlayerAbilityAvailable(p,1093750069,false)
call SetPlayerAbilityAvailable(p,1093750082,false)
call SetPlayerAbilityAvailable(p,1093750070,false)
endfunction
function J98 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer i=0
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function NTE))
loop
exitwhen i>5
call NUE(Z7[i])
call NUE(A7[i])
set i=i+1
endloop
set t=null
endfunction
function NVE takes nothing returns nothing
local integer BC7
local unit ZX7=GetTriggerUnit()
local unit BB7
if GetUnitTypeId(ZX7)==1966092599 or GetUnitTypeId(ZX7)==1966092601 or GetUnitTypeId(ZX7)==1966092600 or GetUnitTypeId(ZX7)==1966092609 or GetUnitTypeId(ZX7)==1966092610 or GetUnitTypeId(ZX7)==1966092611 or GetUnitTypeId(ZX7)==1966092629 or GetUnitTypeId(ZX7)==1966092630 or GetUnitTypeId(ZX7)==1966092631 then
return
endif
set BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(ZX7),GetUnitY(ZX7),0)
if GetUnitTypeId(ZX7)==1966092596 or GetUnitTypeId(ZX7)==1966092612 or GetUnitTypeId(ZX7)==1966092626 then
set BC7=1
elseif GetUnitTypeId(ZX7)==1966092597 or GetUnitTypeId(ZX7)==1966092613 or GetUnitTypeId(ZX7)==1966092627 then
set BC7=2
else
set BC7=3
endif
call XF7(BB7,1093750342)
call SetUnitAbilityLevel(BB7,1093750342,BC7)
call IssueImmediateOrderById(BB7,$D009F)
set ZX7=null
set BB7=null
endfunction
function NWE takes unit NXE,integer Y48,integer BC7 returns nothing
local integer NYE
if BC7==1 then
set NYE=8
elseif BC7==2 then
set NYE=$E
elseif BC7==3 then
set NYE=22
endif
call B_7(NXE,Y48*NYE)
endfunction
function NZE takes nothing returns boolean
local integer Y48
local integer T_7
local integer BC7
local unit NXE=GetAttacker()
local integer id=GetUnitTypeId(NXE)
if id==1966092596 or id==1966092597 or id==1966092598 or id==1966092612 or id==1966092613 or id==1966092614 or id==1966092626 or id==1966092627 or id==1966092628 then
set T_7=GetHandleId(NXE)
set BC7=OM7(T_7,"Level")
set Y48=OM7(T_7,"Remaining")
set Y48=IMaxBJ(Y48-1,0)
call NP7(T_7,"Remaining",Y48)
call NWE(NXE,Y48,BC7)
endif
set NXE=null
return false
endfunction
function NAE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit NXE=O77(I97,"Source")
local unit ZX7=NXE
local integer BC7=OM7(I97,"Level")
local integer Y_9=OM7(I97,"Counter")
local integer Y48=OM7(GetHandleId(NXE),"Remaining")
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call NM7(I97)
call OZ7(t)
else
set Y_9=Y_9+1
call NP7(I97,"Counter",Y_9)
if ModuloInteger(Y_9,$F)==0 then
set Y48=IMinBJ(Y48+1,7)
call NP7(GetHandleId(NXE),"Remaining",Y48)
endif
if GetUnitTypeId(ZX7)==1966092599 or GetUnitTypeId(ZX7)==1966092601 or GetUnitTypeId(ZX7)==1966092600 or GetUnitTypeId(ZX7)==1966092609 or GetUnitTypeId(ZX7)==1966092610 or GetUnitTypeId(ZX7)==1966092611 or GetUnitTypeId(ZX7)==1966092629 or GetUnitTypeId(ZX7)==1966092630 or GetUnitTypeId(ZX7)==1966092631 then
set Y48=7
call NP7(GetHandleId(NXE),"Remaining",Y48)
endif
call NWE(NXE,Y48,BC7)
if GetUnitTypeId(NXE)==1966092599 or GetUnitTypeId(NXE)==1966092601 or GetUnitTypeId(NXE)==1966092600 or GetUnitTypeId(NXE)==1966092609 or GetUnitTypeId(NXE)==1966092610 or GetUnitTypeId(NXE)==1966092611 or GetUnitTypeId(NXE)==1966092629 or GetUnitTypeId(NXE)==1966092630 or GetUnitTypeId(NXE)==1966092631 then
call SetUnitState(NXE,UNIT_STATE_LIFE,GetUnitState(NXE,UNIT_STATE_LIFE)+31.25+18.75*BC7)
endif
endif
set t=null
set NXE=null
return false
endfunction
function NBE takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==1966092596 or GetUnitTypeId(GetFilterUnit())==1966092597 or GetUnitTypeId(GetFilterUnit())==1966092598 or GetUnitTypeId(GetFilterUnit())==1966092612 or GetUnitTypeId(GetFilterUnit())==1966092613 or GetUnitTypeId(GetFilterUnit())==1966092614 or GetUnitTypeId(GetFilterUnit())==1966092626 or GetUnitTypeId(GetFilterUnit())==1966092627 or GetUnitTypeId(GetFilterUnit())==1966092628 or GetUnitTypeId(GetFilterUnit())==1966092599 or GetUnitTypeId(GetFilterUnit())==1966092601 or GetUnitTypeId(GetFilterUnit())==1966092600 or GetUnitTypeId(GetFilterUnit())==1966092609 or GetUnitTypeId(GetFilterUnit())==1966092610 or GetUnitTypeId(GetFilterUnit())==1966092611 or GetUnitTypeId(GetFilterUnit())==1966092629 or GetUnitTypeId(GetFilterUnit())==1966092630 or GetUnitTypeId(GetFilterUnit())==1966092631 then
call KillUnit(GetFilterUnit())
endif
return false
endfunction
function NCE takes nothing returns nothing
local group g=WS7()
local unit ZX7=GetTriggerUnit()
local real x=GetUnitX(ZX7)
local real y=GetUnitY(ZX7)
local integer BC7=GetUnitAbilityLevel(ZX7,1093750341)
local unit N3E
local unit N6E
local unit NLE
local trigger t
local integer I97
local boolean QXD=false
call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(ZX7),Condition(function NBE))
call WR7(g)
if BC7==0 then
set BC7=GetUnitAbilityLevel(ZX7,1093814599)
set QXD=true
endif
if BC7==1 then
set N3E=CreateUnit(GetOwningPlayer(ZX7),1966092596,x+75,y+75,GetUnitFacing(ZX7))
set N6E=CreateUnit(GetOwningPlayer(ZX7),1966092612,x-75,y-75,GetUnitFacing(ZX7))
elseif BC7==2 then
set N3E=CreateUnit(GetOwningPlayer(ZX7),1966092597,x+75,y+75,GetUnitFacing(ZX7))
set N6E=CreateUnit(GetOwningPlayer(ZX7),1966092613,x-75,y-75,GetUnitFacing(ZX7))
elseif BC7==3 then
set N3E=CreateUnit(GetOwningPlayer(ZX7),1966092598,x+75,y+75,GetUnitFacing(ZX7))
set N6E=CreateUnit(GetOwningPlayer(ZX7),1966092614,x-75,y-75,GetUnitFacing(ZX7))
endif
call SelectUnitAddForPlayer(N3E,GetOwningPlayer(ZX7))
call SelectUnitAddForPlayer(N6E,GetOwningPlayer(ZX7))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",N3E,"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",N6E,"origin"))
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,N3E,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function NAE))
call NT7(I97,"Source",N3E)
call NP7(I97,"Level",BC7)
call NP7(I97,"Counter",0)
call NP7(GetHandleId(N3E),"Remaining",7)
call NP7(GetHandleId(N3E),"Level",BC7)
call NWE(N3E,7,BC7)
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,N6E,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function NAE))
call NT7(I97,"Source",N6E)
call NP7(I97,"Level",BC7)
call NP7(I97,"Counter",0)
call NP7(GetHandleId(N6E),"Remaining",7)
call NP7(GetHandleId(N6E),"Level",BC7)
call NWE(N6E,7,BC7)
if QXD then
if BC7==1 then
set NLE=CreateUnit(GetOwningPlayer(ZX7),1966092626,x+75,y,GetUnitFacing(ZX7))
elseif BC7==2 then
set NLE=CreateUnit(GetOwningPlayer(ZX7),1966092627,x+75,y,GetUnitFacing(ZX7))
elseif BC7==3 then
set NLE=CreateUnit(GetOwningPlayer(ZX7),1966092628,x+75,y,GetUnitFacing(ZX7))
endif
call SelectUnitAddForPlayer(NLE,GetOwningPlayer(ZX7))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",NLE,"origin"))
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,NLE,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function NAE))
call NT7(I97,"Source",NLE)
call NP7(I97,"Level",BC7)
call NP7(I97,"Counter",0)
call NP7(GetHandleId(NLE),"Remaining",7)
call NP7(GetHandleId(NLE),"Level",BC7)
call NWE(NLE,7,BC7)
endif
set g=null
set ZX7=null
set N3E=null
set N6E=null
set NLE=null
endfunction
function N1E takes nothing returns boolean
if GetSpellAbilityId()==1093750341 or GetSpellAbilityId()==1093814599 then
call NCE()
elseif GetSpellAbilityId()==1093750338 or GetSpellAbilityId()==1093750339 or GetSpellAbilityId()==1093750340 or GetSpellAbilityId()==1093750348 or GetSpellAbilityId()==1093750349 or GetSpellAbilityId()==1093750350 or GetSpellAbilityId()==1093814618 or GetSpellAbilityId()==1093814832 or GetSpellAbilityId()==1093814833 then
call NVE()
endif
return false
endfunction
function J48 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function N1E))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function NZE))
set t=null
endfunction
function N0E takes unit ZX7,integer N5E,integer N2E returns nothing
local string c1="|c0000cc00"
local string c="||"
local string p=" "
local string s=c1+"|||r"
local string N_E
local boolean O4E=false
local texttag tt=O87(GetHandleId(ZX7),"SoulAssumption|Text")
if N5E==0 then
set N_E=" "
elseif N2E==1 then
if N5E==0 then
set N_E=c+p+c+p+c
elseif N5E==1 then
set N_E=s+p+c+p+c
elseif N5E==2 then
set N_E=s+p+s+p+c
elseif N5E==3 then
set N_E=s+p+s+p+s
endif
elseif N2E==2 then
if N5E==0 then
set N_E=c+p+c+p+c+p+c
elseif N5E==1 then
set N_E=s+p+c+p+c+p+c
elseif N5E==2 then
set N_E=s+p+s+p+c+p+c
elseif N5E==3 then
set N_E=s+p+s+p+s+p+c
elseif N5E==4 then
set N_E=s+p+s+p+s+p+s
endif
elseif N2E==3 then
if N5E==0 then
set N_E=c+p+c+p+c+p+c+p+c
elseif N5E==1 then
set N_E=s+p+c+p+c+p+c+p+c
elseif N5E==2 then
set N_E=s+p+s+p+c+p+c+p+c
elseif N5E==3 then
set N_E=s+p+s+p+s+p+c+p+c
elseif N5E==4 then
set N_E=s+p+s+p+s+p+s+p+c
elseif N5E==5 then
set N_E=s+p+s+p+s+p+s+p+s
endif
elseif N2E==4 then
if N5E==0 then
set N_E=c+p+c+p+c+p+c+p+c+p+c
elseif N5E==1 then
set N_E=s+p+c+p+c+p+c+p+c+p+c
elseif N5E==2 then
set N_E=s+p+s+p+c+p+c+p+c+p+c
elseif N5E==3 then
set N_E=s+p+s+p+s+p+c+p+c+p+c
elseif N5E==4 then
set N_E=s+p+s+p+s+p+s+p+c+p+c
elseif N5E==5 then
set N_E=s+p+s+p+s+p+s+p+s+p+c
elseif N5E==6 then
set N_E=s+p+s+p+s+p+s+p+s+p+s
endif
endif
call SetTextTagText(tt,N_E,.023)
if GetOwningPlayer(ZX7)==GetLocalPlayer()then
set O4E=true
endif
if XH7(ZX7)then
set O4E=false
endif
call SetTextTagPosUnit(tt,ZX7,0)
call SetTextTagVisibility(tt,O4E)
call SetTextTagPermanent(tt,true)
endfunction
function O7E takes unit WI7,integer V77 returns nothing
local integer O8E=GetUnitAbilityLevel(WI7,1093750337)
call N0E(WI7,V77,O8E)
if V77==0 or OT7(WI7,"SoulAssumptionState") then
call UnitRemoveAbility(WI7,1093750583)
call UnitRemoveAbility(WI7,1093750584)
call UnitRemoveAbility(WI7,1093750585)
call XF7(WI7,1093750577)
call UnitRemoveAbility(WI7,1093750578)
call UnitRemoveAbility(WI7,1093750362)
call UnitRemoveAbility(WI7,1093750329)
call UnitRemoveAbility(WI7,1093750361)
call UnitRemoveAbility(WI7,1093750576)
call UnitRemoveAbility(WI7,1093750579)
call UnitRemoveAbility(WI7,1093684306)
call UnitRemoveAbility(WI7,1093687632)
call UnitRemoveAbility(WI7,1093685063)
call UnitRemoveAbility(WI7,1093687631)
call UnitRemoveAbility(WI7,1093684806)
call UnitRemoveAbility(WI7,1093684548)
elseif V77==1 then
call UnitRemoveAbility(WI7,1093750583)
call UnitRemoveAbility(WI7,1093750584)
call UnitRemoveAbility(WI7,1093750585)
call UnitRemoveAbility(WI7,1093750577)
call XF7(WI7,1093750578)
call UnitRemoveAbility(WI7,1093750362)
call UnitRemoveAbility(WI7,1093750329)
call UnitRemoveAbility(WI7,1093750361)
call UnitRemoveAbility(WI7,1093750576)
call UnitRemoveAbility(WI7,1093750579)
call XF7(WI7,1093684306)
call UnitRemoveAbility(WI7,1093687632)
call UnitRemoveAbility(WI7,1093685063)
call UnitRemoveAbility(WI7,1093687631)
call UnitRemoveAbility(WI7,1093684806)
call UnitRemoveAbility(WI7,1093684548)
elseif V77==2 then
call UnitRemoveAbility(WI7,1093750583)
call UnitRemoveAbility(WI7,1093750584)
call UnitRemoveAbility(WI7,1093750585)
call UnitRemoveAbility(WI7,1093750577)
call UnitRemoveAbility(WI7,1093750578)
call XF7(WI7,1093750362)
call UnitRemoveAbility(WI7,1093750329)
call UnitRemoveAbility(WI7,1093750361)
call UnitRemoveAbility(WI7,1093750576)
call UnitRemoveAbility(WI7,1093750579)
call UnitRemoveAbility(WI7,1093684306)
call XF7(WI7,1093687632)
call UnitRemoveAbility(WI7,1093685063)
call UnitRemoveAbility(WI7,1093687631)
call UnitRemoveAbility(WI7,1093684806)
call UnitRemoveAbility(WI7,1093684548)
elseif V77==3 then
call UnitRemoveAbility(WI7,1093750583)
call UnitRemoveAbility(WI7,1093750584)
call UnitRemoveAbility(WI7,1093750585)
call UnitRemoveAbility(WI7,1093684306)
call UnitRemoveAbility(WI7,1093687632)
call XF7(WI7,1093685063)
call UnitRemoveAbility(WI7,1093687631)
call UnitRemoveAbility(WI7,1093684806)
call UnitRemoveAbility(WI7,1093684548)
call UnitRemoveAbility(WI7,1093750577)
call UnitRemoveAbility(WI7,1093750578)
call UnitRemoveAbility(WI7,1093750362)
call UnitRemoveAbility(WI7,1093750329)
call UnitRemoveAbility(WI7,1093750361)
call UnitRemoveAbility(WI7,1093750576)
call UnitRemoveAbility(WI7,1093750579)
if O8E==1 then
call XF7(WI7,1093750583)
else
call XF7(WI7,1093750329)
endif
elseif V77==4 then
call UnitRemoveAbility(WI7,1093750583)
call UnitRemoveAbility(WI7,1093750584)
call UnitRemoveAbility(WI7,1093750585)
call UnitRemoveAbility(WI7,1093684306)
call UnitRemoveAbility(WI7,1093687632)
call UnitRemoveAbility(WI7,1093685063)
call XF7(WI7,1093687631)
call UnitRemoveAbility(WI7,1093684806)
call UnitRemoveAbility(WI7,1093684548)
call UnitRemoveAbility(WI7,1093750577)
call UnitRemoveAbility(WI7,1093750578)
call UnitRemoveAbility(WI7,1093750362)
call UnitRemoveAbility(WI7,1093750329)
call UnitRemoveAbility(WI7,1093750361)
call UnitRemoveAbility(WI7,1093750576)
call UnitRemoveAbility(WI7,1093750579)
if O8E==2 then
call XF7(WI7,1093750584)
else
call XF7(WI7,1093750361)
endif
elseif V77==5 then
call UnitRemoveAbility(WI7,1093750583)
call UnitRemoveAbility(WI7,1093750584)
call UnitRemoveAbility(WI7,1093750585)
call UnitRemoveAbility(WI7,1093750577)
call UnitRemoveAbility(WI7,1093750578)
call UnitRemoveAbility(WI7,1093750362)
call UnitRemoveAbility(WI7,1093750329)
call UnitRemoveAbility(WI7,1093750361)
call XF7(WI7,1093750576)
call UnitRemoveAbility(WI7,1093750579)
call UnitRemoveAbility(WI7,1093684306)
call UnitRemoveAbility(WI7,1093687632)
call UnitRemoveAbility(WI7,1093685063)
call UnitRemoveAbility(WI7,1093687631)
call XF7(WI7,1093684806)
call UnitRemoveAbility(WI7,1093684548)
call UnitRemoveAbility(WI7,1093750577)
call UnitRemoveAbility(WI7,1093750578)
call UnitRemoveAbility(WI7,1093750362)
call UnitRemoveAbility(WI7,1093750329)
call UnitRemoveAbility(WI7,1093750361)
call UnitRemoveAbility(WI7,1093750576)
call UnitRemoveAbility(WI7,1093750579)
if O8E==3 then
call XF7(WI7,1093750585)
else
call XF7(WI7,1093750576)
endif
elseif V77==6 then
call UnitRemoveAbility(WI7,1093750583)
call UnitRemoveAbility(WI7,1093750584)
call UnitRemoveAbility(WI7,1093750585)
call UnitRemoveAbility(WI7,1093750577)
call UnitRemoveAbility(WI7,1093750578)
call UnitRemoveAbility(WI7,1093750362)
call UnitRemoveAbility(WI7,1093750329)
call UnitRemoveAbility(WI7,1093750361)
call UnitRemoveAbility(WI7,1093750576)
call XF7(WI7,1093750579)
call UnitRemoveAbility(WI7,1093684306)
call UnitRemoveAbility(WI7,1093687632)
call UnitRemoveAbility(WI7,1093685063)
call UnitRemoveAbility(WI7,1093687631)
call UnitRemoveAbility(WI7,1093684806)
call XF7(WI7,1093684548)
endif
if(GetUnitAbilityLevel(WI7,1093750337)+2)==V77 then
call XF7(WI7,1093750346)
else
call UnitRemoveAbility(WI7,1093750346)
endif
endfunction
function O9E takes unit p5,real YM7 returns nothing
local integer V77=0
local real ODE=110
if YM7>ODE*6 then
set V77=6
elseif YM7>ODE*5 then
set V77=5
elseif YM7>ODE*4 then
set V77=4
elseif YM7>ODE*3 then
set V77=3
elseif YM7>ODE*2 then
set V77=2
elseif YM7>ODE*1 then
set V77=1
endif
set V77=YG7(V77,2+GetUnitAbilityLevel(p5,1093750337))
call NP7(GetHandleId(p5),"Level",V77)
call O7E(p5,V77)
endfunction
function OEE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local integer V77=GetUnitAbilityLevel(p5,1093750337)
call N0E(p5,OM7(GetHandleId(p5),"Level"),V77)
call O9E(p5,ON7(GetHandleId(p5),"RecentDamage"))
set t=null
set p5=null
return false
endfunction
function OFE takes nothing returns nothing
local integer OB7=GetHandleId(GetTriggeringTrigger())
local unit p5=IN4
local unit m5=IP4
local real YM7=ON7(OB7,"Damage")
if IsUnitAlly(m5,GetOwningPlayer(p5))==false then
set f3=true
call B67(p5,m5,1,YM7)
set f3=false
else
call SetUnitState(m5,UNIT_STATE_LIFE,GetUnitState(m5,UNIT_STATE_LIFE)+YM7)
endif
set p5=null
set m5=null
endfunction
function OGE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
call O9E(p5,ON7(GetHandleId(p5),"RecentDamage"))
call NM7(OB7)
call OZ7(t)
set t=null
set p5=null
return false
endfunction
function OHE takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer V77=OM7(GetHandleId(p5),"Level")
local trigger t=ZF7(p5,m5,1747993157,"OFE",$3E8)
local integer OB7=GetHandleId(t)
call NQ7(OB7,"Damage",(60+V77*40)*1.)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AntiMagicShell\\AntiMagicShell.mdl",p5,"chest"))
call NQ7(GetHandleId(p5),"RecentDamage",0*1.)
call O9E(p5,0)
call O37(p5,"SoulAssumptionState",4)
set t=CreateTrigger()
set OB7=GetHandleId(t)
call TriggerAddCondition(t,Condition(function OGE))
call TriggerRegisterTimerEvent(t,4,false)
call NT7(OB7,"Source",p5)
set p5=null
set m5=null
set t=null
endfunction
function OIE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local real YM7=ON7(OB7,"Damage")
if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093750337)then
if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT then
call NQ7(GetHandleId(p5),"RecentDamage",(ON7(GetHandleId(p5),"RecentDamage")-YM7)*1.)
endif
call O9E(p5,ON7(GetHandleId(p5),"RecentDamage"))
call NM7(OB7)
call OZ7(t)
endif
set t=null
set p5=null
return false
endfunction
function OJE takes nothing returns nothing
local unit p5=GetTriggerUnit()
local integer OB7=GetHandleId(p5)
local texttag tt=CreateTextTag()
local boolean O4E=false
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function OEE))
call NT7(GetHandleId(t),"Source",p5)
if GetOwningPlayer(p5)==GetLocalPlayer()then
set O4E=true
endif
call SetTextTagText(tt," ",.023)
call SetTextTagPosUnit(tt,p5,0)
call SetTextTagVisibility(tt,O4E)
call SetTextTagPermanent(tt,true)
set D3[GetPlayerId(GetOwningPlayer(p5))]=p5
call NQ7(OB7,"RecentDamage",0*1.)
call O9E(p5,0)
call N67(OB7,"SoulAssumption|Text",tt)
set p5=null
set t=null
set tt=null
endfunction
function OKE takes unit OME,unit ONE returns nothing
local real YM7=GetEventDamage()
local integer V77=GetUnitAbilityLevel(OME,1093750337)
local real OOE=ON7(GetHandleId(OME),"RecentDamage")
local trigger t
local integer OB7
if KE7(OME,ONE)<$4B0 and f3==false then
if C67(YM7)and GetEventDamage()>2 and GetEventDamageSource()!=GetTriggerUnit()and(TX7(GetOwningPlayer(GetEventDamageSource()))or GetUnitTypeId(GetEventDamageSource())==1848651852)then
set OOE=OOE+YM7
call NQ7(GetHandleId(OME),"RecentDamage",OOE*1.)
set t=CreateTrigger()
set OB7=GetHandleId(t)
call NT7(OB7,"Source",OME)
call NQ7(OB7,"Damage",YM7*1.)
call TriggerRegisterTimerEvent(t,10,false)
call TriggerRegisterUnitEvent(t,OME,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,OME,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function OIE))
call O9E(OME,OOE)
endif
endif
set t=null
endfunction
function OPE takes nothing returns nothing
local integer i=0
loop
exitwhen i>$C
if D3[i]!=null then
call OKE(D3[i],GetTriggerUnit())
endif
set i=i+1
endloop
endfunction
function OQE takes nothing returns boolean
if GetLearnedSkill()==1093750337 and GetUnitAbilityLevel(GetTriggerUnit(),1093750337)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call OJE()
endif
return false
endfunction
function ORE takes nothing returns boolean
if GetSpellAbilityId()==1093750337 then
call OHE()
endif
return false
endfunction
function J88 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function OQE))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ORE))
set t=null
call S08("OPE")
endfunction
function OSE takes nothing returns boolean
return GetSpellAbilityId()==1093678672
endfunction
function OTE takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(D8))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1)!=null
endfunction
function OUE takes nothing returns nothing
local unit m5=GetEnumUnit()
local unit oA=CreateUnit(GetOwningPlayer(D8),1697656899,GetUnitX(m5),GetUnitY(m5),0)
call XF7(oA,1093683781)
call SetUnitAbilityLevel(oA,1093683781,E8)
call IssueTargetOrderById(oA,$D006B,m5)
call UnitApplyTimedLifeBJ(2.,1112820806,oA)
call UnitAddAbility(oA,1097625443)
set oA=null
set m5=null
endfunction
function OVE takes unit BB7,unit WI7 returns nothing
local group LQ7=WS7()
local boolexpr hP=Condition(function OTE)
set D8=WI7
call GroupEnumUnitsInRange(LQ7,GetUnitX(BB7),GetUnitY(BB7),675,hP)
call ForGroup(LQ7,function OUE)
call WR7(LQ7)
call DestroyBoolExpr(hP)
set LQ7=null
set hP=null
endfunction
function OWE takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7
local unit oA=O77(OB7,"Caster")
if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
call KillUnit(oA)
call NM7(OB7)
call OZ7(t)
elseif GetTriggerEvalCount(t)>22 then
call KillUnit(oA)
call NM7(OB7)
call OZ7((t))
call KR7(O77(OB7,"Hero"))
else
call SetUnitAnimation(oA,"birth")
set WI7=O77(OB7,"Hero")
set E8=GetTriggerExecCount(t)*GetUnitAbilityLevel(WI7,1093678672)/2
call OVE(oA,WI7)
endif
set t=null
set oA=null
set WI7=null
endfunction
function OXE takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local location Mk=GetSpellTargetLoc()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local real x=GetLocationX(Mk)
local real y=GetLocationY(Mk)
local unit oA=CreateUnit(GetOwningPlayer(WI7),1697657159,x,y,0)
call RemoveLocation(Mk)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_SPELL_ENDCAST)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddAction(t,function OWE)
call NT7(OB7,"Hero",WI7)
call NT7(OB7,"Caster",oA)
set WI7=null
set Mk=null
set t=null
set oA=null
endfunction
function J18 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(t,function OXE)
call TriggerAddCondition(t,Condition(function OSE))
call X_7(1093683781)
set t=null
endfunction
function OYE takes nothing returns boolean
return GetSpellAbilityId()==1093683765
endfunction
function OZE takes nothing returns nothing
call XF7(GetEnumUnit(),1093685298)
endfunction
function OAE takes nothing returns nothing
call UnitRemoveAbility(GetEnumUnit(),1093685298)
endfunction
function OBE takes unit OCE,unit O3E returns nothing
if OCE!=null and O3E!=null then
call YV7("CLPB",GetUnitX(OCE),GetUnitY(OCE),GetUnitX(O3E),GetUnitY(O3E),.7,.1,.9,1,.3)
endif
endfunction
function O6E takes nothing returns nothing
local unit WI7=O77(GetHandleId(GetTriggeringTrigger()),"Hero")
local real YM7=.2*GetEventDamage()
set YM7=YJ7(YM7,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE))
if GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)>1 and GetEnumUnit()!=GetTriggerUnit()then
if GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)<YM7 then
call B67(WI7,GetEnumUnit(),3,YM7)
else
call ZA7(GetEnumUnit(),YM7)
endif
endif
set WI7=null
endfunction
function OLE takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local group LQ7=OF7(OB7,"Group")
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call ForGroup(LQ7,function OAE)
call NM7(OB7)
call WR7(LQ7)
call OZ7(t)
elseif GetEventDamage()>$A and GetEventDamage()<6000 then
call DisableTrigger(t)
call ForGroup(LQ7,function O6E)
call EnableTrigger(t)
endif
set t=null
set LQ7=null
endfunction
function O1E takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1)!=null
endfunction
function O0E takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local group LQ7=WS7()
local integer V77=GetUnitAbilityLevel(WI7,1093683765)
local boolexpr hP=Condition(function O1E)
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local integer i=2
local group O5E=WS7()
local unit array O2E
local string O_E="Abilities\\Spells\\Undead\\Curse\\CurseTarget.mdl"
call NT7(OB7,"Hero",WI7)
call OBE(WI7,m5)
call YS7(O_E,m5,"overhead",25)
set O2E[1]=m5
call NT7(OB7,"Unit1",O2E[1])
call TriggerRegisterUnitEvent(t,O2E[1],EVENT_UNIT_DAMAGED)
call GroupEnumUnitsInRange(LQ7,GetUnitX(m5),GetUnitY(m5),600,hP)
call GroupRemoveUnit(LQ7,m5)
call GroupAddUnit(O5E,m5)
call NB7(OB7,"Group",O5E)
loop
exitwhen i>(2+V77)or FirstOfGroup(LQ7)==null
set O2E[i]=FirstOfGroup(LQ7)
call OBE(O2E[i-1],O2E[i])
call TriggerRegisterUnitEvent(t,O2E[i],EVENT_UNIT_DAMAGED)
call GroupAddUnit(O5E,O2E[i])
call GroupRemoveUnit(LQ7,O2E[i])
call YS7(O_E,O2E[i],"overhead",25)
set i=i+1
endloop
call NP7(OB7,"FXCount",i-1)
set E8=GetUnitAbilityLevel(WI7,1093683765)
call ForGroup(O5E,function OZE)
call TriggerRegisterTimerEvent(t,25,false)
call TriggerAddAction(t,function OLE)
call DestroyBoolExpr(hP)
set WI7=null
set m5=null
call WR7(LQ7)
set LQ7=null
set hP=null
set t=null
set O5E=null
endfunction
function J08 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function OYE))
call TriggerAddAction(t,function O0E)
call X_7(1093683769)
set t=null
endfunction
function P4E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit m5=O77(OB7,"Target")
local integer BC7=GetUnitAbilityLevel(p5,1093681491)
if GetTriggerEvalCount(t)>5 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call DestroyEffect(OG7(OB7,"FX"))
call UnitRemoveAbility(m5,1093744459)
call UnitRemoveAbility(m5,1110458704)
call NM7(OB7)
call OZ7(t)
else
call B67(p5,m5,1,BC7*$12+9)
endif
set p5=null
set m5=null
set t=null
return false
endfunction
function P7E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit m5=O77(OB7,"Target")
local integer V77=GetUnitAbilityLevel(p5,1093681491)
if GetTriggerEvalCount(t)>9 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call DestroyEffect(OG7(OB7,"FX"))
call UnitRemoveAbility(m5,1093685296)
call UnitRemoveAbility(m5,1110456115)
call NM7(OB7)
call OZ7(t)
else
call YQ7(m5,V77*$A+5)
endif
set p5=null
set m5=null
set t=null
return false
endfunction
function P8E takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call NT7(OB7,"Target",m5)
call NT7(OB7,"Source",p5)
if IsUnitAlly(m5,GetOwningPlayer(p5))then
call TriggerAddCondition(t,Condition(function P7E))
call NU7(OB7,"FX",AddSpecialEffectTarget("Abilities\\Spells\\Items\\StaffOfSanctuary\\Staff_Sanctuary_Target.mdl",m5,"chest"))
call XF7(m5,1093685296)
elseif WQ7(GetSpellTargetUnit())==false then
call TriggerAddCondition(t,Condition(function P4E))
call NU7(OB7,"FX",AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Voodoo\\VoodooAuraTarget.mdl",m5,"overhead"))
call XF7(m5,1093744459)
endif
set p5=null
set m5=null
set t=null
endfunction
function P9E takes nothing returns boolean
if GetSpellAbilityId()==1093681491 then
call P8E()
endif
return false
endfunction
function J58 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function P9E))
call X_7(1093685296)
call X_7(1093744459)
set t=null
endfunction
function PDE takes nothing returns nothing
call B67(WF4,GetEnumUnit(),1,20+$A*WG4)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Immolation\\ImmolationDamage.mdl",GetEnumUnit(),"head"))
endfunction
function PEE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local integer BC7
local integer U57=GetUnitTypeId(ZX7)
local group g
if U57==1848651861 or U57==1848658773 then
set BC7=1
elseif U57==1848651865 or U57==1848658774 then
set BC7=2
elseif U57==1848651866 or U57==1848658775 then
set BC7=3
endif
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
set IN4=ZX7
set WF4=ZX7
set WG4=BC7
set g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),275,Condition(function AJ7))
call ForGroup(g,function PDE)
call WR7(g)
set g=null
endif
set t=null
set ZX7=null
return false
endfunction
function PFE takes unit u returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function PEE))
call SaveUnitHandle(L7,(I97),(2),(u))
set t=null
endfunction
function PGE takes nothing returns boolean
local integer U57=GetUnitTypeId(GetTriggerUnit())
if U57==1848651861 or U57==1848658773 or U57==1848651865 or U57==1848658774 or U57==1848651866 or U57==1848658775 then
call PFE(GetTriggerUnit())
endif
return false
endfunction
function PHE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real x=(LoadReal(L7,(I97),(6)))
local real y=(LoadReal(L7,(I97),(7)))
local real PIE=(LoadReal(L7,(I97),($BF)))
local real PJE=(LoadReal(L7,(I97),($C0)))
local integer BC7=GetUnitAbilityLevel(ZX7,1395667029)
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,PIE,PJE,0)
call XF7(BB7,1395667029)
call SetUnitAbilityLevel(BB7,1395667029,BC7)
call IssuePointOrderById(BB7,$D0100,x,y)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set ZX7=null
set BB7=null
set t=null
return false
endfunction
function PKE takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.3,false)
call TriggerAddCondition(t,Condition(function PHE))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveReal(L7,(I97),(6),((GetSpellTargetX())*1.))
call SaveReal(L7,(I97),(7),((GetSpellTargetY())*1.))
call SaveReal(L7,(I97),($BF),((GetUnitX(ZX7))*1.))
call SaveReal(L7,(I97),($C0),((GetUnitY(ZX7))*1.))
set ZX7=null
set t=null
endfunction
function PME takes nothing returns boolean
if GetSpellAbilityId()==1395667029 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) then
call PKE()
endif
return false
endfunction
function J28 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function PME))
set t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,GetEntireMapRect())
call TriggerAddCondition(t,Condition(function PGE))
set t=null
endfunction
function PNE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
if GetUnitAbilityLevel(WI7,1112041075)==0 then
call UnitRemoveAbility(WI7,1093681977)
call NM7(OB7)
call OZ7(t)
endif
set t=null
set WI7=null
return false
endfunction
function POE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=GetTriggerUnit()
call XF7(WI7,1093681977)
call SetUnitAbilityLevel(WI7,1093681977,GetUnitAbilityLevel(WI7,1093681985))
call NT7(OB7,"Hero",WI7)
call TriggerRegisterTimerEvent(t,.2,true)
call TriggerAddCondition(t,Condition(function PNE))
set WI7=null
set t=null
endfunction
function PPE takes nothing returns boolean
if GetSpellAbilityId()==1093681985 then
call POE()
endif
return false
endfunction
function JD8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function PPE))
set t=null
endfunction
function PQE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
call SetUnitState(O77(OB7,"Unit"),UNIT_STATE_MANA,ON7(OB7,"Mana"))
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
set t=null
return false
endfunction
function PRE takes unit u,real PSE returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function PQE))
call NT7(OB7,"Unit",u)
call NQ7(OB7,"Mana",PSE)
set t=null
endfunction
function PUE takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local integer OB7
local real Wx
local real Tw
local real x
local real y
if GetSpellAbilityId()==1093817688 then
set WI7=GetSpellTargetUnit()
endif
set OB7=GetHandleId(WI7)
set Wx=YK7(ON7(OB7,"TLLife1"),1)
set Tw=YK7(ON7(OB7,"TLMana1"),1)
set x=ON7(OB7,"TLX1")
set y=ON7(OB7,"TLY1")
if ON7(OB7,"TLLife1")>1 and GetUnitState(WI7,UNIT_STATE_LIFE)>1 then
call AddSpecialEffect("Abilities\\Spells\\NightElf\\Blink\\BlinkTarget.mdl",GetUnitX(WI7),GetUnitY(WI7))
call SetUnitX(WI7,x)
call SetUnitY(WI7,y)
if IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==false then
call SetUnitState(WI7,UNIT_STATE_LIFE,Wx)
call SetUnitState(WI7,UNIT_STATE_MANA,Tw)
call YW8(WI7,0,0)
endif
call UnitRemoveBuffs(WI7,false,true)
call YZ8(WI7)
call PRE(WI7,Tw)
endif
set WI7=null
endfunction
function PTe takes nothing returns nothing
if IsUnitIllusion(GetSpellTargetUnit())then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),GetObjectName('I0S8'))
elseif LoadBoolean(L7,GetHandleId(GetOwningPlayer(GetSpellTargetUnit())),($8B))and GetOwningPlayer(GetSpellTargetUnit())!=GetOwningPlayer(GetTriggerUnit())then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),GetObjectName('n038'))
endif
endfunction
function PTE takes nothing returns nothing
if GetSpellAbilityId()==1093682004 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
call PUE()
endif
elseif GetSpellAbilityId()==1093817688 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
call PUE()
else
call PTe()
endif
endif
endfunction
function JE8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function PTE))
endfunction
function PVE takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local unit WI7=O77(GetHandleId(t),"UnitVar")
local integer OB7=GetHandleId(WI7)
local integer T8=1
local integer U8=$A
loop
exitwhen T8>U8
call NQ7(OB7,"TLX"+I2S(T8-1),ON7(OB7,"TLX"+I2S(T8)))
call NQ7(OB7,"TLY"+I2S(T8-1),ON7(OB7,"TLY"+I2S(T8)))
call NQ7(OB7,"TLLife"+I2S(T8-1),ON7(OB7,"TLLife"+I2S(T8)))
call NQ7(OB7,"TLMana"+I2S(T8-1),ON7(OB7,"TLMana"+I2S(T8)))
set T8=T8+1
endloop
call NQ7(OB7,"TLX10",GetUnitX(WI7))
call NQ7(OB7,"TLY10",GetUnitY(WI7))
call NQ7(OB7,"TLLife10",GetUnitState(WI7,UNIT_STATE_LIFE))
call NQ7(OB7,"TLMana10",GetUnitState(WI7,UNIT_STATE_MANA))
set t=null
set WI7=null
endfunction
function PWE takes nothing returns nothing
local unit S79=IN4
local trigger t
set t=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(t,.5)
call TriggerAddAction(t,function PVE)
call NT7(GetHandleId(t),"UnitVar",S79)
set t=null
endfunction
function JF8 takes nothing returns nothing
endfunction
function PXE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V07=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(V07),(2)))
local unit IH7=(LoadUnitHandle(L7,(V07),(17)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitRemoveAbility(IH7,1093751130)
call SaveInteger(L7,(GetHandleId((IH7))),((4290)),(2))
call FlushChildHashtable(L7,(V07))
call OZ7(t)
if GetTriggerUnit()==IH7 then
call KillUnit(ZX7)
endif
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==ZX7 then
call SetUnitAbilityLevel(IH7,1093751130,GetUnitAbilityLevel(IH7,1093751130)+1)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SkeletalMageMissile\\SkeletalMageMissile.mdl",IH7,"chest"))
endif
else
call SetUnitX(ZX7,GetUnitX(IH7)-40)
call SetUnitY(ZX7,GetUnitY(IH7)-40)
if AK7(IH7)and IsUnitVisible(IH7,GetOwningPlayer(ZX7))==false then
call KillUnit(ZX7)
elseif ModuloInteger(GetTriggerEvalCount(t),5)==0 then
call IssueTargetOrderById(ZX7,$D000F,IH7)
endif
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function PYE takes unit PZE,unit IH7,integer BC7 returns nothing
local trigger t=CreateTrigger()
local integer V07=GetHandleId(t)
call UnitRemoveAbility(PZE,1098282348)
call SaveUnitHandle(L7,(V07),(2),(PZE))
call SaveUnitHandle(L7,(V07),(17),(IH7))
call XF7(IH7,1093751130)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterUnitEvent(t,PZE,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function PXE))
call TriggerEvaluate(t)
call UnitApplyTimedLife(PZE,1112820806,16+0*BC7)
set t=null
endfunction
function PAE takes nothing returns boolean
return((IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))and((LoadInteger(L7,(GetHandleId((GetFilterUnit()))),((4290))))==1)==false and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IN4)) or AK7(GetFilterUnit())==false))!=null
endfunction
function PBE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local group g
local integer i=1
local unit Z69=(LoadUnitHandle(L7,(I97),(2)))
local real x=(LoadReal(L7,(I97),(6)))
local real y=(LoadReal(L7,(I97),(7)))
local real a=(LoadReal(L7,(I97),($89)))
local unit PCE
local unit ZZ9
local real Y0D=(LoadReal(L7,(I97),(47)))
local real Y5D=(LoadReal(L7,(I97),(48)))
set x=X17(x+18*Cos(a))
set y=X07(y+18*Sin(a))
call SaveReal(L7,(I97),(6),((x)*1.))
call SaveReal(L7,(I97),(7),((y)*1.))
if GetTriggerEvalCount(t)>$A6 then
loop
exitwhen i>$C
if(LoadBoolean(L7,(I97),(511+i-1)))==false then
call KillUnit((LoadUnitHandle(L7,(I97),(393+i-1))))
endif
set i=i+1
endloop
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
set g=WS7()
set IN4=Z69
call GroupEnumUnitsInRange(g,x,y,400,Condition(function PAE))
loop
exitwhen i>$C
if(LoadBoolean(L7,(I97),(511+i-1)))==false then
set PCE=(LoadUnitHandle(L7,(I97),(393+i-1)))
set x=(LoadReal(L7,(I97),(549+i-1)))
set y=(LoadReal(L7,(I97),(567+i-1)))
set x=X17(x+18*Cos(a))
set y=X07(y+18*Sin(a))
call SaveReal(L7,(I97),(549+i-1),((x)*1.))
call SaveReal(L7,(I97),(567+i-1),((y)*1.))
call SetUnitX(PCE,x)
call SetUnitY(PCE,y)
set ZZ9=FirstOfGroup(g)
if ZZ9!=null then
call GroupRemoveUnit(g,ZZ9)
call SaveInteger(L7,(GetHandleId((ZZ9))),((4290)),(1))
call SaveBoolean(L7,(I97),(511+i-1),(true))
call PYE(PCE,ZZ9,GetUnitAbilityLevel(Z69,1093751127))
endif
endif
set i=i+1
endloop
call WR7(g)
set g=null
set PCE=null
set ZZ9=null
endif
set t=null
set Z69=null
return false
endfunction
function P3E takes nothing returns nothing
local location l=GetSpellTargetLoc()
local real P6E=GetLocationX(l)
local real PLE=GetLocationY(l)
local unit Z69=GetTriggerUnit()
local real x=GetUnitX(Z69)
local real y=GetUnitY(Z69)
local real a=J77(x,y,P6E,PLE)*bj_DEGTORAD
local unit GRD
local real Z7D=X17(x+$BB8*Cos(a))
local real Z8D=X07(y+$BB8*Sin(a))
local integer i=1
local trigger t=CreateTrigger()
local integer V07=GetHandleId(t)
local real HSD
local integer KP7=GetUnitAbilityLevel(Z69,1093751127)
local integer P1E
call RemoveLocation(l)
if KP7==1 then
set P1E=1966092619
elseif KP7==2 then
set P1E=1966092616
elseif KP7==3 then
set P1E=1966092618
elseif KP7==4 then
set P1E=1966092620
endif
loop
exitwhen i>$C
set GRD=CreateUnit(GetOwningPlayer(Z69),P1E,x+GetRandomInt(-300,300),y+GetRandomInt(-300,300),a*bj_RADTODEG)
call SaveUnitHandle(L7,(V07),(393+i-1),(GRD))
call SaveBoolean(L7,(V07),(511+i-1),(false))
call SaveReal(L7,(V07),(549+i-1),((GetUnitX(GRD))*1.))
call SaveReal(L7,(V07),(567+i-1),((GetUnitY(GRD))*1.))
set i=i+1
endloop
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerAddCondition(t,Condition(function PBE))
call SaveUnitHandle(L7,(V07),(2),(Z69))
call SaveReal(L7,(V07),(6),((x)*1.))
call SaveReal(L7,(V07),(7),((y)*1.))
call SaveReal(L7,(V07),($89),((a)*1.))
call SaveReal(L7,(V07),(47),((Z7D)*1.))
call SaveReal(L7,(V07),(48),((Z8D)*1.))
set Z69=null
set GRD=null
set l=null
set t=null
endfunction
function P0E takes nothing returns boolean
if GetSpellAbilityId()==1093751127 then
call P3E()
endif
return false
endfunction
function JG8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function P0E))
call XO7(1966092619)
call XO7(1966092616)
call XO7(1966092618)
call XO7(1966092620)
call X_7(1093751130)
set t=null
endfunction
function P5E takes unit p5,unit NY,unit P2E,integer V77,boolean P_E returns real
local unit oA=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(NY),GetUnitY(NY),0)
if P_E then
call XF7(oA,1093687129)
else
call XF7(oA,1093684812)
endif
call IssueTargetOrderById(oA,$D007F,P2E)
if IsUnitType(P2E,UNIT_TYPE_HERO)==false then
call B27(p5,P2E,1,50+25*V77,.4)
else
call B27(p5,P2E,1,50,.4)
endif
if P_E then
return((GetUnitX(P2E)-GetUnitX(NY))*(GetUnitX(P2E)-GetUnitX(NY))+(GetUnitY(P2E)-GetUnitY(NY))*(GetUnitY(P2E)-GetUnitY(NY)))/$F4240
endif
set oA=null
return((GetUnitX(P2E)-GetUnitX(NY))*(GetUnitX(P2E)-GetUnitX(NY))+(GetUnitY(P2E)-GetUnitY(NY))*(GetUnitY(P2E)-GetUnitY(NY)))/$57E40
endfunction
function Q4E takes unit p5,unit NY returns unit
local group g=WS7()
set IN4=p5
call GroupEnumUnitsInRange(g,GetUnitX(NY),GetUnitY(NY),600,Condition(function AX7))
call GroupRemoveUnit(g,NY)
set IN4=GroupPickRandomUnit(g)
call WR7(g)
set g=null
return IN4
endfunction
function Q7E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local integer V77=OM7(OB7,"Level")
local unit NY=O77(OB7,"Old")
local integer iX=OM7(OB7,"Count")
local unit P2E
local real Hk
call NM7(OB7)
call OZ7(t)
if iX<(V77*2+1)then
set P2E=Q4E(p5,NY)
if P2E!=null then
set Hk=P5E(p5,NY,P2E,V77,false)
set t=CreateTrigger()
set OB7=GetHandleId(t)
call NT7(OB7,"Source",p5)
call NP7(OB7,"Level",V77)
call NT7(OB7,"Old",P2E)
call NP7(OB7,"Count",iX+1)
call TriggerRegisterTimerEvent(t,Hk+.4,false)
call TriggerAddCondition(t,Condition(function Q7E))
endif
endif
set t=null
set p5=null
set NY=null
set P2E=null
return false
endfunction
function Q8E takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit Q9E=GetSpellTargetUnit()
local integer V77=GetUnitAbilityLevel(WI7,1093684813)
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local real Hk=P5E(WI7,WI7,Q9E,V77,true)
call NT7(OB7,"Source",WI7)
call NP7(OB7,"Level",V77)
call NT7(OB7,"Old",Q9E)
call NP7(OB7,"Count",1)
call TriggerRegisterTimerEvent(t,Hk,false)
call TriggerAddCondition(t,Condition(function Q7E))
set WI7=null
set Q9E=null
set t=null
endfunction
function QDE takes nothing returns boolean
if GetSpellAbilityId()==1093684813 and WQ7(GetSpellTargetUnit())==false then
call Q8E()
endif
return false
endfunction
function JS8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function QDE))
set t=null
endfunction
function QEE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local integer V77=GetUnitAbilityLevel(WI7,1093684805)
call UnitRemoveAbility(WI7,1093684805)
call XF7(WI7,1093684805)
call SetUnitAbilityLevel(WI7,1093684805,V77)
call NM7(OB7)
call OZ7(t)
set t=null
set WI7=null
return false
endfunction
function QFE takes unit m5,integer V77 returns nothing
local real QGE=(8+V77*8)/3
call SetUnitState(m5,UNIT_STATE_LIFE,GetUnitState(m5,UNIT_STATE_LIFE)+QGE)
endfunction
function QHE takes nothing returns boolean
if ji()then
call QFE(GetFilterUnit(),IH4)
endif
return false
endfunction
function QIE takes unit WI7 returns nothing
local integer V77=GetUnitAbilityLevel(WI7,1093684805)
local group g=WS7()
set IN4=WI7
set IH4=V77
call GroupEnumUnitsInRange(g,GetUnitX(WI7),GetUnitY(WI7),500,Condition(function QHE))
call WR7(g)
set g=null
endfunction
function QJE takes unit WI7 returns nothing
local integer BC7=GetUnitAbilityLevel(WI7,1093684805)
local real QKE=4+4*BC7
call SetUnitState(WI7,UNIT_STATE_MANA,GetUnitState(WI7,UNIT_STATE_MANA)-(QKE/3))
if GetUnitState(WI7,UNIT_STATE_MANA)<QKE then
if OT7(WI7,"DeathWardOn")==false then
call IssueImmediateOrderById(WI7,$D00D2)
endif
endif
endfunction
function QME takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
if GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if GetIssuedOrderId()==$D00D2 then
call NM7(OB7)
call OZ7(t)
set t=CreateTrigger()
set OB7=GetHandleId(t)
call NT7(OB7,"Hero",WI7)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function QEE))
endif
else
call QIE(WI7)
call QJE(WI7)
endif
set t=null
set WI7=null
return false
endfunction
function QNE takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call NT7(OB7,"Hero",WI7)
call TriggerRegisterTimerEvent(t,.33,true)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function QME))
set WI7=null
set t=null
endfunction
function QOE takes nothing returns boolean
if GetSpellAbilityId()==1093684805 then
call QNE()
endif
return false
endfunction
function JU8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function QOE))
set t=null
endfunction
function QPE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit m5=O77(OB7,"Target")
local integer V77=GetUnitAbilityLevel(p5,1093684815)
local integer iX=GetTriggerEvalCount(t)
local real QQE=ON7(OB7,"StartingHP")
local real QRE=0
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call DestroyEffect(OG7(OB7,"FX"))
call NM7(OB7)
call OZ7(t)
else
if iX==4 or iX==8 or iX==$C then
call DestroyEffect(OG7(OB7,"FX"))
if iX==$C then
call NM7(OB7)
call OZ7(t)
elseif iX==4 or iX==8 then
call NU7(OB7,"FX",AddSpecialEffectTarget("effects\\NetherInferno.mdx",m5,"origin"))
endif
set QRE=(.08+V77*.08)*YK7(QQE-GetUnitState(m5,UNIT_STATE_LIFE),0)
if QRE>0 then
call YW7("+"+I2S(R2I(QRE)),2,m5,.023,68,0,$BB,$D8)
endif
endif
call B67(p5,m5,1,5*V77+QRE)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function QSE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local unit m5=GetEnumUnit()
call DestroyEffect(AddSpecialEffectTarget("effects\\NetherInferno.mdx",m5,"origin"))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function QPE))
call NT7(OB7,"Target",m5)
call NT7(OB7,"Source",p5)
call NQ7(OB7,"StartingHP",GetUnitState(m5,UNIT_STATE_LIFE))
call NU7(OB7,"FX",AddSpecialEffectTarget("effects\\NetherInferno.mdx",m5,"origin"))
set t=null
set p5=null
set m5=null
endfunction
function QTE takes nothing returns nothing
local unit p5=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local group g=WS7()
local integer V77=GetUnitAbilityLevel(p5,1093684815)
call GroupEnumUnitsInRange(g,x,y,$CD,Condition(function A57))
call ForGroup(g,function QSE)
call WR7(g)
call RemoveLocation(l)
set l=null
set g=null
set p5=null
endfunction
function QUE takes nothing returns boolean
if GetSpellAbilityId()==1093684815 then
call QTE()
endif
return false
endfunction
function JT8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function QUE))
set t=null
endfunction
function QVE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
call NM7(OB7)
call OZ7(t)
if GetTriggerEventId()!=EVENT_UNIT_SPELL_ENDCAST then
call KR7(p5)
endif
set p5=null
set t=null
return false
endfunction
function QWE takes nothing returns nothing
local unit p5=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call NT7(OB7,"Source",p5)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_ENDCAST)
call TriggerRegisterTimerEvent(t,$A,false)
call TriggerAddCondition(t,Condition(function QVE))
set t=null
set p5=null
endfunction
function QXE takes nothing returns boolean
if GetSpellAbilityId()==1093684820 or GetSpellAbilityId()==1093684824 then
call QWE()
endif
return false
endfunction
function QYE takes nothing returns boolean
if GetUnitTypeId(GetSummonedUnit())==1865429040 or GetUnitTypeId(GetSummonedUnit())==1865429041 or GetUnitTypeId(GetSummonedUnit())==1865429057 or GetUnitTypeId(GetSummonedUnit())==1865429080 then
call O37(GetSummoningUnit(),"DeathWardOn",8)
endif
return false
endfunction
function JV8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function QYE))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function QXE))
set t=null
endfunction
function QZE takes nothing returns boolean
local integer id=0
local unit m5
local real CP7=(TimerGetElapsed(W))
local real mp
local real hp
loop
exitwhen id>$C
set m5=M7[id]
if m5!=null and GetUnitAbilityLevel(m5,1110459204)==0 and SW4[id]>CP7 then
set SW4[id]=0
endif
if m5!=null and GetUnitAbilityLevel(m5,1110459204)>0 then
if SW4[id]>CP7 and XH7(m5)==false then
set hp=GetUnitState(m5,UNIT_STATE_LIFE)
set mp=GetUnitState(m5,UNIT_STATE_MANA)
if hp<SX4[id]then
set SX4[id]=hp
endif
if mp<SY4[id]then
set SY4[id]=mp
endif
call SetUnitState(m5,UNIT_STATE_LIFE,SX4[id])
set SA4[id]=SA4[id]+1
if SA4[id]==$A then
set SA4[id]=0
if SB4[id]==1 then
call B67(SZ4[id],m5,1,12.5)
elseif SB4[id]==2 then
call B67(SZ4[id],m5,1,20)
elseif SB4[id]==3 then
call B67(SZ4[id],m5,1,32)
endif
endif
elseif SW4[id]>CP7 and XH7(m5) then
set SW4[id]=0
set SX4[id]=9999
set SY4[id]=9999
endif
if GetUnitAbilityLevel(m5,1110459204)>0 and SW4[id]<CP7 then
call UnitRemoveAbility(m5,1093749313)
call UnitRemoveAbility(m5,1110459204)
call UnitRemoveAbility(m5,1093749828)
endif
endif
set id=id+1
endloop
set m5=null
return false
endfunction
function QAE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit IH7=O77(OB7,"Target")
local integer V77=OM7(OB7,"Level")
local unit BB7
if GetUnitAbilityLevel(IH7,1110459204)==0 then
call NM7(OB7)
call OZ7(t)
elseif GetOwningPlayer(IH7)!=GetOwningPlayer(GetEventDamageSource())and GetUnitState(IH7,UNIT_STATE_MAX_LIFE)*(.09+.01*V77)>GetUnitState(IH7,UNIT_STATE_LIFE)and OT7(IH7,"ShallowGrave|Active")==false and((LoadInteger(L7,(GetHandleId((IH7))),((2485))))==1)==false then
call NM7(OB7)
call OZ7(t)
call UnitRemoveAbility(IH7,1093749313)
call UnitRemoveAbility(IH7,1110459204)
call UnitRemoveAbility(IH7,1093749828)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",IH7,"overhead"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",IH7,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",IH7,"origin"))
set BB7=CreateUnit(GetOwningPlayer(GetEventDamageSource()),1697656901,0,0,0)
call UnitRemoveBuffs(IH7,true,true)
call UnitRemoveAbility(IH7,1097167980)
call UnitDamageTarget(BB7,IH7,100000000.,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set BB7=null
endif
set t=null
set IH7=null
return false
endfunction
function QBE takes unit p5,unit m5 returns nothing
local integer V77=GetUnitAbilityLevel(p5,1093750089)
local integer id=GetPlayerId(GetOwningPlayer(m5))
local trigger t
local integer OB7
if V77==0 then
set V77=GetUnitAbilityLevel(p5,1093817157)
endif
if V77>0 and IsUnitType(m5,UNIT_TYPE_HERO) and IsUnitIllusion(m5)==false and LB7(GetUnitTypeId(m5))==false then
set t=CreateTrigger()
set OB7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function QAE))
call NT7(OB7,"Target",m5)
call NP7(OB7,"Level",V77)
call XF7(m5,1093749313)
call XF7(m5,1093749828)
if GetUnitAbilityLevel(p5,1093817157)==0 then
set SW4[id]=(TimerGetElapsed(W))+7+V77
else
set SW4[id]=(TimerGetElapsed(W))+17+0*V77
endif
set SX4[id]=GetUnitState(m5,UNIT_STATE_LIFE)
set SY4[id]=GetUnitState(m5,UNIT_STATE_MANA)
set SZ4[id]=p5
set SB4[id]=V77
endif
set t=null
endfunction
function NS8 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer id=0
local integer i=0
local player p
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function QZE))
loop
exitwhen id>$C
set SX4[id]=9999
set SY4[id]=9999
set id=id+1
endloop
loop
exitwhen i>5
set p=Z7[i]
call SetPlayerAbilityAvailable(p,1093749828,false)
set p=A7[i]
call SetPlayerAbilityAvailable(p,1093749828,false)
set i=i+1
endloop
set t=null
set p=null
endfunction
function QCE takes nothing returns nothing
if YS8(GetEnumUnit())then
return
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093748826)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093748826)
call UnitRemoveAbility(GetEnumUnit(),1110459189)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093749044)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093749044)
call UnitRemoveAbility(GetEnumUnit(),1110459189)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093749043)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093749043)
call UnitRemoveAbility(GetEnumUnit(),1110459189)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093749046)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093749046)
call UnitRemoveAbility(GetEnumUnit(),1110459189)
endif
endfunction
function Q3E takes nothing returns nothing
if YS8(GetEnumUnit())then
return
endif
if WF7(GetEnumUnit())==false then
if a3==1 then
if GetUnitAbilityLevel(GetEnumUnit(),1093748826)==0 then
call UnitRemoveAbility(GetEnumUnit(),1110459189)
call XF7(GetEnumUnit(),1093748826)
endif
elseif a3==2 then
if GetUnitAbilityLevel(GetEnumUnit(),1093749044)==0 then
call UnitRemoveAbility(GetEnumUnit(),1110459189)
call XF7(GetEnumUnit(),1093749044)
endif
elseif a3==3 then
if GetUnitAbilityLevel(GetEnumUnit(),1093749043)==0 then
call UnitRemoveAbility(GetEnumUnit(),1110459189)
call XF7(GetEnumUnit(),1093749043)
endif
elseif a3==4 then
if GetUnitAbilityLevel(GetEnumUnit(),1093749046)==0 then
call UnitRemoveAbility(GetEnumUnit(),1110459189)
call XF7(GetEnumUnit(),1093749046)
endif
endif
endif
endfunction
function Q6E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit BB7=O77(OB7,"Caster")
local group QLE=OF7(OB7,"ActiveGroup")
local real x=GetUnitX(BB7)
local real y=GetUnitY(BB7)
local group g=WS7()
local group g2
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call ForGroup(QLE,function QCE)
call WR7(g)
call WR7(QLE)
call NM7(OB7)
call OZ7(t)
call ShowUnit(BB7,false)
set t=null
set p5=null
set BB7=null
set QLE=null
return false
endif
set n3=p5
set a3=GetUnitAbilityLevel(p5,1093748819)
set IN4=p5
call GroupEnumUnitsInRange(g,x,y,300,Condition(function AJ7))
call GroupRemoveGroup(g,QLE)
call ForGroup(QLE,function QCE)
call ForGroup(g,function Q3E)
call NB7(OB7,"ActiveGroup",g)
call WR7(QLE)
set t=null
set p5=null
set BB7=null
set QLE=null
set g=null
return false
endfunction
function Q1E takes nothing returns nothing
local unit p5=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local integer V77=GetUnitAbilityLevel(p5,1093748819)
local unit BB7=CreateUnit(GetOwningPlayer(p5),1848658001,x,y,0)
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call UnitApplyTimedLife(BB7,1112820806,$10)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterUnitEvent(t,BB7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function Q6E))
call NT7(OB7,"Source",p5)
call NT7(OB7,"Caster",BB7)
call NB7(OB7,"ActiveGroup",WS7())
set p5=null
call RemoveLocation(l)
set l=null
set BB7=null
set t=null
endfunction
function Q0E takes nothing returns boolean
if GetSpellAbilityId()==1093748819 then
call Q1E()
endif
return false
endfunction
function NP8 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer i=0
local player p
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Q0E))
set t=null
loop
exitwhen i>5
set p=Z7[i]
call SetPlayerAbilityAvailable(p,1093748826,false)
call SetPlayerAbilityAvailable(p,1093749044,false)
call SetPlayerAbilityAvailable(p,1093749043,false)
call SetPlayerAbilityAvailable(p,1093749046,false)
set p=A7[i]
call SetPlayerAbilityAvailable(p,1093748826,false)
call SetPlayerAbilityAvailable(p,1093749044,false)
call SetPlayerAbilityAvailable(p,1093749043,false)
call SetPlayerAbilityAvailable(p,1093749046,false)
set i=i+1
endloop
set p=null
endfunction
function Q5E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit m5=O77(OB7,"Target")
local real x=ON7(OB7,"x")
local real y=ON7(OB7,"y")
local integer V77=OM7(OB7,"Level")
local unit BB7
local real YM7=(100+50*V77)/4
if GetTriggerEventId()==EVENT_UNIT_DEATH or KF7(x,y,GetUnitX(m5),GetUnitY(m5))>765 or GetUnitAbilityLevel(m5,1110459203)==0 then
call DestroyEffect(OG7(OB7,"FX"))
call DestroyEffect(OG7(OB7,"fx2"))
call UnitRemoveAbility(m5,1093749305)
call UnitRemoveAbility(m5,1110459203)
call NM7(OB7)
call OZ7(t)
elseif GetTriggerEvalCount(t)==($A*.8)then
call DestroyEffect(OG7(OB7,"FX"))
call NU7(OB7,"FX",AddSpecialEffectTarget("war3mapImported\\ShivasEnchantment.mdx",m5,"overhead"))
call B67(p5,m5,1,YM7)
elseif GetTriggerEvalCount(t)==($A*1.7)then
call DestroyEffect(OG7(OB7,"FX"))
call NU7(OB7,"FX",AddSpecialEffectTarget("war3mapImported\\ShivasEnchantment.mdx",m5,"overhead"))
call B67(p5,m5,1,YM7)
elseif GetTriggerEvalCount(t)==($A*2.6)then
call DestroyEffect(OG7(OB7,"FX"))
call NU7(OB7,"FX",AddSpecialEffectTarget("war3mapImported\\ShivasEnchantment.mdx",m5,"overhead"))
call B67(p5,m5,1,YM7)
elseif GetTriggerEvalCount(t)==($A*3.5)then
call DestroyEffect(OG7(OB7,"FX"))
call B67(p5,m5,1,YM7)
elseif GetTriggerEvalCount(t)>($A*3.9)then
call DestroyEffect(OG7(OB7,"fx2"))
call UnitRemoveAbility(m5,1093749305)
call UnitRemoveAbility(m5,1110459203)
call NM7(OB7)
call OZ7(t)
set BB7=CreateUnit(GetOwningPlayer(m5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
call XF7(BB7,1093750090)
call SetUnitAbilityLevel(BB7,1093750090,V77)
call IssueTargetOrderById(BB7,$D007F,m5)
set BB7=null
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function Q2E takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local integer V77=GetUnitAbilityLevel(p5,1093750087)
local string s="Doodads\\Cinematic\\GlowingRunes\\GlowingRunes4.mdl"
if GetLocalPlayer()==GetOwningPlayer(m5)then
endif
call XF7(m5,1093749305)
call NT7(OB7,"Source",p5)
call NT7(OB7,"Target",m5)
call NQ7(OB7,"x",GetUnitX(m5)*1.)
call NQ7(OB7,"y",GetUnitY(m5)*1.)
call NP7(OB7,"Level",V77)
call NU7(OB7,"FX",AddSpecialEffectTarget("war3mapImported\\ShivasEnchantment.mdx",m5,"overhead"))
call NU7(OB7,"fx2",AddSpecialEffect(s,GetUnitX(m5),GetUnitY(m5)))
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function Q5E))
set p5=null
set m5=null
set t=null
endfunction
function Q_E takes nothing returns boolean
if GetSpellAbilityId()==1093750087 and WQ7(GetSpellTargetUnit())==false then
call Q2E()
endif
return false
endfunction
function NQ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Q_E))
set t=null
endfunction
function R4E takes nothing returns nothing
local unit p5=E3
local unit m5=GetEnumUnit()
local integer V77=V3
call QBE(p5,m5)
if GetUnitAbilityLevel(p5,1093817157)>0 then
call B67(p5,m5,1,$96+100*V77)
else
call B67(p5,m5,1,$96+100*V77)
endif
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\PlasmaShot.mdl",m5,"chest"))
set p5=null
set m5=null
endfunction
function R7E takes nothing returns nothing
local unit p5=E3
local unit m5=GetEnumUnit()
local integer V77=V3
call QBE(p5,m5)
set p5=null
set m5=null
endfunction
function R8E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit BU7=O77(OB7,"Projectile")
local real Y5=ON7(OB7,"TargetX")
local real Z5=ON7(OB7,"TargetY")
local real l4=ON7(OB7,"Angle")
local real R9E=ON7(OB7,"AOE")
local unit p5=O77(OB7,"Source")
local integer V77=OM7(OB7,"Level")
local real x=GetUnitX(BU7)+30*Cos(l4)
local real y=GetUnitY(BU7)+30*Sin(l4)
local group g
local fogmodifier RDE
if KF7(x,y,Y5,Z5)<35 or x!=X17(x)or y!=X07(y)then
set x=Y5
set y=Z5
call SetUnitX(BU7,x)
call SetUnitY(BU7,y)
call DestroyEffect(OG7(OB7,"FX"))
set RDE=N_7(OB7,"Fog")
call FogModifierStop(RDE)
call DestroyFogModifier(RDE)
set RDE=null
if LS4 then
set bj_forLoopAIndex=0
set bj_forLoopAIndexEnd=OM7(OB7,"FUN|EffNum")
loop
exitwhen bj_forLoopAIndex>=bj_forLoopAIndexEnd
call DestroyEffect(OG7(OB7,"FUN|Eff"+I2S(bj_forLoopAIndex)))
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
endif
call NM7(OB7)
call OZ7(t)
call KillUnit(BU7)
set IN4=p5
set E3=p5
set V3=V77
set g=WS7()
call GroupEnumUnitsInRange(g,x,y,R9E+25,Condition(function AJ7))
call ForGroup(g,function R4E)
call WR7(g)
set g=null
else
call SetUnitX(BU7,x)
call SetUnitY(BU7,y)
set IN4=p5
set E3=p5
set V3=V77
set g=WS7()
call GroupEnumUnitsInRange(g,x,y,300,Condition(function AJ7))
call ForGroup(g,function R7E)
call WR7(g)
set g=null
endif
set t=null
set BU7=null
set p5=null
return false
endfunction
function REE takes unit p5,real x,real y,real RFE,effect FX,fogmodifier RDE returns nothing
local real l4=Atan2(y-GetUnitY(p5),x-GetUnitX(p5))
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit BU7=CreateUnit(GetOwningPlayer(p5),1747993142,GetUnitX(p5),GetUnitY(p5),l4*bj_RADTODEG)
local integer V77=GetUnitAbilityLevel(p5,1093750089)
local real R9E=YJ7(350+25*RFE*2,$3E8)
local real BAD=KF7(GetUnitX(p5),GetUnitY(p5),x,y)
if V77==0 then
set V77=GetUnitAbilityLevel(p5,1093817157)
endif
if IsUnitEnemy(BU7,GetLocalPlayer())and WG7(GetLocalPlayer())==false then
call UnitSetUsesAltIcon(BU7,true)
endif
call TriggerRegisterTimerEvent(t,YJ7(2./(BAD/ 30),.04),true)
call TriggerAddCondition(t,Condition(function R8E))
call NT7(OB7,"Projectile",BU7)
call NQ7(OB7,"TargetX",x*1.)
call NQ7(OB7,"TargetY",y*1.)
call NQ7(OB7,"Angle",l4*1.)
call NQ7(OB7,"AOE",R9E*1.)
call NP7(OB7,"Level",V77)
call NT7(OB7,"Source",p5)
call NX7(OB7,"Fog",RDE)
call NU7(OB7,"FX",FX)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750089,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093817157,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750094,false)
if LS4 then
set L94=""
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(p5))then
set L94="Doodads\\Icecrown\\Water\\BubbleGeyserSteam\\BubbleGeyserSteam.mdx"
endif
set bj_forLoopAIndex=0
set bj_forLoopAIndexEnd=R2I(R9E/100)+$A
loop
exitwhen bj_forLoopAIndex>=bj_forLoopAIndexEnd
set LD4=I2R(bj_forLoopAIndex)*(6.2831853/I2R(bj_forLoopAIndexEnd))
call NU7(OB7,"FUN|Eff"+I2S(bj_forLoopAIndex),AddSpecialEffect(L94,x+Cos(LD4)*R9E,y+Sin(LD4)*R9E))
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call NP7(OB7,"FUN|EffNum",bj_forLoopAIndexEnd)
endif
set t=null
set BU7=null
endfunction
function RGE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit BU7=O77(OB7,"Projectile")
local unit p5=O77(OB7,"Source")
local real l4=ON7(OB7,"Angle")
local real x
local real y
local real RFE=TimerGetElapsed(W)-ON7(OB7,"CastTime")
local string s
local fogmodifier RDE
local effect FX
local real RHE=GetUnitX(BU7)+30*Cos(l4)
local real RIE=GetUnitY(BU7)+30*Sin(l4)
local boolean J4
local integer i
set x=X17(RHE)
set y=X07(RIE)
call SetUnitX(BU7,x)
call SetUnitY(BU7,y)
if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093750094)or x!=RHE or y!=RIE then
call NM7(OB7)
call OZ7(t)
call RemoveUnit(BU7)
set s=""
if IsPlayerAlly(GetOwningPlayer(p5),GetLocalPlayer())or WG7(GetLocalPlayer())then
set s="war3mapImported\\IceWindGroundFX.mdl"
endif
set RDE=CreateFogModifierRadius(GetOwningPlayer(p5),FOG_OF_WAR_VISIBLE,x,y,500,true,true)
call FogModifierStart(RDE)
set FX=AddSpecialEffect(s,x,y)
call REE(p5,x,y,RFE,FX,RDE)
set RDE=null
set FX=null
elseif TZ7(GetOwningPlayer(p5))then
set LD4=KF7(x,y,ON7(OB7,"AI|TgtX"),ON7(OB7,"AI|TgtY"))
if LD4>ON7(OB7,"AI|MaxDist")or OO7(OB7,"AI|Blast")then
if K57(p5)then
call N97(p5,$D022E,1093750094)
else
call NS7(OB7,"AI|Blast",true)
endif
else
call NQ7(OB7,"AI|MaxDist",LD4)
if Bz>ON7(OB7,"AI|NextUp")then
call NQ7(OB7,"AI|NextUp",Bz+1)
set J4=false
set i=OM7(GetHandleId(p5),"AI|IBClose")
if(i==1)then
set J4=(WA7(p5,O77(GetHandleId(p5),"AI|IBTgt"),500.,.02,1500.)!=null)
elseif(i==0)then
set J4=(WA7(p5,O77(GetHandleId(p5),"AI|IBTgt"),1500.,2.02,99999.)!=null)
elseif(i==2)then
call M07(O77(GetHandleId(p5),"AI|IBTgt"))
call MoveLocation(DH7,GetLocationX(HA),GetLocationY(HA))
endif
if J4 then
call NQ7(OB7,"AI|TgtX",GetLocationX(DH7))
call NQ7(OB7,"AI|TgtY",GetLocationY(DH7))
call NQ7(OB7,"AI|MaxDist",99999.)
endif
endif
endif
endif
set t=null
set BU7=null
set p5=null
return false
endfunction
function RJE takes nothing returns nothing
local unit p5=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=Atan2(y-GetUnitY(p5),x-GetUnitX(p5))
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit BU7=CreateUnit(GetOwningPlayer(p5),1211122232,GetUnitX(p5),GetUnitY(p5),a*bj_RADTODEG)
if IsUnitEnemy(BU7,GetLocalPlayer())and WG7(GetLocalPlayer())==false then
call UnitSetUsesAltIcon(BU7,true)
endif
call NT7(OB7,"Projectile",BU7)
call NT7(OB7,"Source",p5)
call NQ7(OB7,"Angle",a*1.)
call NQ7(OB7,"CastTime",TimerGetElapsed(W)*1.)
if TZ7(GetOwningPlayer(p5))then
call NQ7(OB7,"AI|TgtX",x)
call NQ7(OB7,"AI|TgtY",y)
call NQ7(OB7,"AI|MaxDist",99999.)
call NQ7(OB7,"AI|NextUp",Bz+1)
endif
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function RGE))
call SetUnitColor(BU7,GetPlayerColor(Player($E)))
call RemoveLocation(l)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750089,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093817157,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750094,true)
call XF7(p5,1093750094)
if TZ7(GetOwningPlayer(p5))then
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750094,false)
endif
set p5=null
set l=null
set t=null
set BU7=null
endfunction
function RKE takes nothing returns boolean
if GetSpellAbilityId()==1093750089 or GetSpellAbilityId()==1093817157 then
call RJE()
endif
return false
endfunction
function NR8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function RKE))
set t=null
endfunction
function RME takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
local unit p5=O77(OB7,"Source")
local integer V77=OM7(OB7,"Level")
local integer RNE=OM7(GetHandleId(p5),"ChillingCounter")
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==p5 and GetEventDamage()>1 then
call DisableTrigger(t)
if RNE>0 then
call NP7(GetHandleId(p5),"ChillingCounter",RNE-1)
call YW7("+"+I2S(40+$A*V77),1,p5,.024,100,$C8,$FF,$FF)
call B67(p5,m5,1,40+$A*V77)
endif
call NM7(OB7)
call OZ7(t)
endif
else
call NM7(OB7)
call OZ7(t)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function ROE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local integer V77=X3
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
set p5=GetAttacker()
endif
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED or(OM7(GetHandleId(p5),"ChillingCounter")==0 and GetUnitAbilityLevel(p5,1093748814)>0)then
call DestroyEffect(OG7(GetHandleId(p5),"fx1"))
call DestroyEffect(OG7(GetHandleId(p5),"fx2"))
call NP7(GetHandleId(p5),"ChillingCounter",0)
call NM7(OB7)
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED then
call OZ7(t)
endif
call UnitRemoveAbility(p5,1093748814)
call UnitRemoveAbility(p5,1110459210)
call UnitRemoveAbility(p5,1093749072)
elseif GetUnitAbilityLevel(p5,1093748814)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and OT7(p5,"ChillingTouchState")==false then
call O37(p5,"ChillingTouchState",.4)
set t=CreateTrigger()
set OB7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.,false)
call TriggerAddCondition(t,Condition(function RME))
call NT7(OB7,"Target",GetTriggerUnit())
call NT7(OB7,"Source",p5)
call NP7(OB7,"Level",V77)
endif
set t=null
set p5=null
return false
endfunction
function RPE takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetEnumUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local integer V77=GetUnitAbilityLevel(p5,1093748817)
set X3=V77
call XF7(m5,1093748814)
call XF7(m5,1093749072)
call NP7(GetHandleId(m5),"ChillingCounter",2+V77)
call NT7(OB7,"Source",m5)
call NU7(GetHandleId(m5),"fx1",AddSpecialEffectTarget("war3mapImported\\FrostHands.mdx",m5,"right,hand"))
call NU7(GetHandleId(m5),"fx2",AddSpecialEffectTarget("war3mapImported\\FrostHands.mdx",m5,"left,hand"))
call TriggerRegisterTimerEvent(t,30,false)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function ROE))
set p5=null
set m5=null
set t=null
endfunction
function RQE takes nothing returns nothing
local unit p5=GetTriggerUnit()
local group g=WS7()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
call RemoveLocation(l)
call DestroyEffect(AddSpecialEffect("war3mapImported\\IcyWind.mdl",x,y))
call GroupEnumUnitsInRange(g,x,y,525+25,Condition(function B97))
call ForGroup(g,function RPE)
call WR7(g)
set p5=null
set g=null
set l=null
endfunction
function RRE takes nothing returns boolean
if GetSpellAbilityId()==1093748817 then
call RQE()
endif
return false
endfunction
function NT8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function RRE))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function ROE))
set t=null
endfunction
function RSE takes nothing returns nothing
call B67(A3,GetEnumUnit(),1,(GetUnitAbilityLevel(A3,1093749069)*75)/$A)
endfunction
function RTE takes unit ZX7 returns nothing
local real FVE=(GetUnitAbilityLevel(ZX7,1093749069)*75)/2
set FVE=FVE/10.
if GetUnitState(ZX7,UNIT_STATE_LIFE)<=FVE*.75 then
set FVE=GetUnitState(ZX7,UNIT_STATE_LIFE)/.75-$A
endif
call B67(ZX7,ZX7,3,FVE)
endfunction
function RUE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit ZX7=O77(OB7,"Source")
local real x=GetUnitX(ZX7)
local real y=GetUnitY(ZX7)
local group g
local real YM7
local unit BB7
local integer V77=0
local integer WF8=GetTriggerEvalCount(t)
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call NM7(OB7)
call OZ7(t)
return false
else
if GetTriggerEvalCount(t)==1 then
set BB7=CreateUnit(GetOwningPlayer(ZX7),1747993138,x,y,0)
call UnitApplyTimedLife(BB7,1112820806,1)
set BB7=null
call TriggerRegisterTimerEvent(t,.1,true)
set g=WS7()
set A3=ZX7
set IN4=ZX7
call GroupEnumUnitsInRange(g,x,y,350,Condition(function AJ7))
call ForGroup(g,function RSE)
call RTE(ZX7)
call WR7(g)
else
if WF8==$A then
call NM7(OB7)
call OZ7(t)
endif
set g=WS7()
set A3=ZX7
set IN4=ZX7
call GroupEnumUnitsInRange(g,x,y,350,Condition(function AJ7))
call ForGroup(g,function RSE)
call RTE(ZX7)
call WR7(g)
call YZ8(ZX7)
call YW8(ZX7,0,0)
endif
endif
set t=null
set g=null
set ZX7=null
return false
endfunction
function RVE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local real YM7=(GetUnitAbilityLevel(p5,1093749069)*75)/2
call TriggerRegisterTimerEvent(t,1.5,false)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function RUE))
call NT7(OB7,"Source",p5)
set t=null
set p5=null
endfunction
function RWE takes nothing returns boolean
if GetSpellAbilityId()==1093749069 then
call RVE()
endif
return false
endfunction
function NX8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function RWE))
set t=null
endfunction
function RXE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local player RYE
local integer V77=GetUnitAbilityLevel(p5,1093749070)
local integer MainLevel=GetUnitAbilityLevel(p5,1093749070)
local real CP7=TimerGetElapsed(W)
local real RZE=ON7(OB7,"Buffer1")
local real RAE=ON7(OB7,"Buffer2")
if XH7(p5)then
set t=null
set p5=null
return false
endif
if TV7(GetOwningPlayer(p5))then
set RYE=A7[1]
else
set RYE=Z7[1]
endif
if GetTriggerEventId()==EVENT_UNIT_DAMAGED and GetOwningPlayer(GetEventDamageSource())==B7 then
if GetUnitAbilityLevel(p5,1093749061)>0 then
call UnitRemoveAbility(p5,1093749061)
call UnitRemoveAbility(p5,1110459193)
endif
if GetUnitAbilityLevel(p5,1093749062)>0 then
call UnitRemoveAbility(p5,1093749062)
call UnitRemoveAbility(p5,1110459193)
endif
if GetUnitAbilityLevel(p5,1093749063)>0 then
call UnitRemoveAbility(p5,1093749063)
call UnitRemoveAbility(p5,1110459193)
endif
call NQ7(OB7,"NightcrawlerTime",(CP7+2)*1.)
set t=null
set p5=null
return false
endif
if ON7(OB7,"NightcrawlerTime")>CP7 then
set t=null
set p5=null
return false
endif
if(IsUnitVisible(p5,RYE)and BM1(p5)==false)or GetUnitAbilityLevel(p5,1112433775)>0 then
set RAE=0
if GetUnitAbilityLevel(p5,1093749061)>0 or GetUnitAbilityLevel(p5,1093749062)>0 or GetUnitAbilityLevel(p5,1093749063)>0 then
set RZE=RZE+.1
if RZE>.4 then
set RZE=0
if GetUnitAbilityLevel(p5,1093749061)>0 then
call UnitRemoveAbility(p5,1093749061)
call UnitRemoveAbility(p5,1110459193)
endif
if GetUnitAbilityLevel(p5,1093749062)>0 then
call UnitRemoveAbility(p5,1093749062)
call UnitRemoveAbility(p5,1110459193)
endif
if GetUnitAbilityLevel(p5,1093749063)>0 then
call UnitRemoveAbility(p5,1093749063)
call UnitRemoveAbility(p5,1110459193)
endif
endif
endif
call NQ7(OB7,"Buffer1",RZE*1.)
call NQ7(OB7,"Buffer2",RAE*1.)
elseif IsUnitVisible(p5,RYE)==false or BM1(p5) then
set RZE=0
if(V77==1 and GetUnitAbilityLevel(p5,1093749061)==0)or(V77==2 and GetUnitAbilityLevel(p5,1093749062)==0)or(V77==3 and GetUnitAbilityLevel(p5,1093749063)==0)then
set RAE=RAE+.1
if RAE>.4 then
set RAE=0
if V77==1 then
if GetUnitAbilityLevel(p5,1093749061)==0 then
call XF7(p5,1093749061)
call UnitMakeAbilityPermanent(p5,true,1093749047)
call UnitMakeAbilityPermanent(p5,true,1093749048)
call UnitMakeAbilityPermanent(p5,true,1093749059)
endif
endif
if V77==2 then
if GetUnitAbilityLevel(p5,1093749061)>0 then
call UnitRemoveAbility(p5,1093749061)
call UnitRemoveAbility(p5,1110459193)
endif
if GetUnitAbilityLevel(p5,1093749062)==0 then
call XF7(p5,1093749062)
call UnitMakeAbilityPermanent(p5,true,1093749047)
call UnitMakeAbilityPermanent(p5,true,1093749049)
call UnitMakeAbilityPermanent(p5,true,1093749060)
endif
endif
if V77==3 then
if GetUnitAbilityLevel(p5,1093749061)>0 then
call UnitRemoveAbility(p5,1093749061)
call UnitRemoveAbility(p5,1110459193)
endif
if GetUnitAbilityLevel(p5,1093749062)>0 then
call UnitRemoveAbility(p5,1093749062)
call UnitRemoveAbility(p5,1110459193)
endif
if GetUnitAbilityLevel(p5,1093749063)==0 then
call XF7(p5,1093749063)
call UnitMakeAbilityPermanent(p5,true,1093749047)
call UnitMakeAbilityPermanent(p5,true,1093749057)
call UnitMakeAbilityPermanent(p5,true,1093749058)
endif
endif
endif
endif
call NQ7(OB7,"Buffer1",RZE*1.)
call NQ7(OB7,"Buffer2",RAE*1.)
endif
set t=null
set p5=null
set RYE=null
return false
endfunction
function RBE takes unit WI7,boolean UA9 returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call NQ7(OB7,"Buffer1",0*1.)
call NQ7(OB7,"Buffer2",0*1.)
call NQ7(OB7,"NightcrawlerTime",TimerGetElapsed(W)*1.)
call NT7(OB7,"Source",WI7)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function RXE))
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),1093749061,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),1093749062,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),1093749063,false)
set t=null
endfunction
function RCE takes nothing returns boolean
if GetLearnedSkill()==1093749070 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093749070)==1 then
call RBE(GetTriggerUnit(),false)
endif
return false
endfunction
function NW8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function RCE))
set t=null
endfunction
function R3E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=GetDyingUnit()
if GetOwningPlayer(GetKillingUnit())==GetOwningPlayer(ZX7)and IsUnitType(IH7,UNIT_TYPE_HERO) and IsUnitIllusion(IH7)==false then
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function R6E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer RLE=(LoadInteger(L7,(I97),(422)))
local integer R1E=(LoadInteger(L7,(I97),(423)))
local integer SSD=(LoadInteger(L7,(I97),(424)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
if(LoadBoolean(L7,(I97),(276)))==false and GetTriggerUnit()==ZX7 then
call SaveBoolean(L7,(I97),(276),(true))
call SetHeroAgi(ZX7,GetHeroAgi(ZX7,false)-RLE-R1E-SSD,true)
elseif(LoadBoolean(L7,(I97),(277)))==false and GetTriggerUnit()==IH7 then
call SaveBoolean(L7,(I97),(277),(true))
call SetHeroAgi(IH7,GetHeroAgi(IH7,false)+RLE,true)
call SetHeroStr(IH7,GetHeroStr(IH7,false)+R1E,true)
call SetHeroInt(IH7,GetHeroInt(IH7,false)+SSD,true)
endif
else
if(LoadBoolean(L7,(I97),(276)))==false then
call SaveBoolean(L7,(I97),(276),(true))
call SetHeroAgi(ZX7,GetHeroAgi(ZX7,false)-RLE-R1E-SSD,true)
endif
if(LoadBoolean(L7,(I97),(277)))==false then
call SaveBoolean(L7,(I97),(277),(true))
call SetHeroAgi(IH7,GetHeroAgi(IH7,false)+RLE,true)
call SetHeroStr(IH7,GetHeroStr(IH7,false)+R1E,true)
call SetHeroInt(IH7,GetHeroInt(IH7,false)+SSD,true)
endif
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function R0E takes unit ZX7,unit IH7 returns nothing
local integer BC7=GetUnitAbilityLevel(ZX7,1093748818)
local integer ZN9=WH7(IH7)
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local integer RLE
local integer R1E
local integer SSD
local real BZ7
if ZN9==2 then
set RLE=IMinBJ(GetHeroAgi(IH7,false)-1,1)
set R1E=IMinBJ(GetHeroStr(IH7,false)-1,1)
set SSD=IMinBJ(GetHeroInt(IH7,false)-1,1)
elseif ZN9==3 then
set RLE=IMinBJ(GetHeroAgi(IH7,false)-1,1)
set R1E=IMinBJ(GetHeroStr(IH7,false)-1,1)
set SSD=IMinBJ(GetHeroInt(IH7,false)-1,1)
elseif ZN9==1 then
set RLE=IMinBJ(GetHeroAgi(IH7,false)-1,1)
set R1E=IMinBJ(GetHeroStr(IH7,false)-1,1)
set SSD=IMinBJ(GetHeroInt(IH7,false)-1,1)
endif
call SetHeroAgi(ZX7,GetHeroAgi(ZX7,false)+RLE+SSD+R1E,true)
call SetHeroAgi(IH7,GetHeroAgi(IH7,false)-RLE,true)
call SetHeroStr(IH7,GetHeroStr(IH7,false)-R1E,true)
call SetHeroInt(IH7,GetHeroInt(IH7,false)-SSD,true)
call SaveInteger(L7,(I97),(422),(RLE))
call SaveInteger(L7,(I97),(424),(SSD))
call SaveInteger(L7,(I97),(423),(R1E))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveBoolean(L7,(I97),(276),(false))
call SaveBoolean(L7,(I97),(277),(false))
if BC7==1 then
set BZ7=$F
elseif BC7==2 then
set BZ7=30
elseif BC7==3 then
set BZ7=60
elseif BC7==4 then
set BZ7=120
endif
call TriggerRegisterTimerEvent(t,BZ7,false)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function R6E))
set t=null
endfunction
function R5E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
if GetTriggerEventId()!=EVENT_UNIT_DEATH then
call R0E(ZX7,IH7)
endif
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function R2E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local integer TE9=(LoadInteger(L7,(I97),(30)))
local unit IH7=TQ7(TE9)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==ZX7 then
call DisableTrigger(t)
call TP7(TE9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.01,false)
call TriggerAddCondition(t,Condition(function R5E))
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
endif
else
call TP7(TE9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function R_E takes nothing returns nothing
local trigger t=CreateTrigger()
local unit IH7=GetTriggerUnit()
local unit ZX7=GetAttacker()
local integer I97=GetHandleId(t)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,1,false)
call TriggerAddCondition(t,Condition(function R2E))
call SaveInteger(L7,(I97),(30),(TS7(IH7)))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set IH7=null
set ZX7=null
set t=null
endfunction
function S4E takes nothing returns nothing
local unit ZX7=GetAttacker()
if OT7(ZX7,"CooldownState")==false then
call O37(ZX7,"CooldownState",.45-GetUnitAbilityLevel(GetAttacker(),1093748818)*.05)
call R_E()
endif
endfunction
function S7E takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093748818)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(L7,(GetHandleId(GetTriggeringTrigger())),($E)))and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))then
call S4E()
endif
return false
endfunction
function S8E takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function S7E))
call SaveUnitHandle(L7,(GetHandleId(t)),($E),(GetTriggerUnit()))
set t=CreateTrigger()
set I97=GetHandleId(t)
call YB7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function R3E))
call SaveUnitHandle(L7,(I97),(2),(GetTriggerUnit()))
set t=null
endfunction
function S9E takes nothing returns boolean
if GetLearnedSkill()==1093748818 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093748818)==1 then
call S8E()
endif
return false
endfunction
function NU8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function S9E))
set t=null
endfunction
function SDE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit BB7=O77(OB7,"Caster")
local integer V77=OM7(OB7,"Level")
local integer WF8=(LoadInteger(L7,(OB7),(34)))
if WF8>(4.0)/0.03 or GetTriggerEventId()==EVENT_WIDGET_DEATH then
if((LoadInteger(L7,(GetHandleId((p5))),((4420))))==1)==false then
call UnitSetUsesAltIcon(p5,false)
endif
call SaveInteger(L7,(GetHandleId((p5))),((4421)),(2))
call UnitAddAbility(p5,1093817687)
call UnitRemoveAbility(p5,1093817687)
call KillUnit(BB7)
call NM7(OB7)
call OZ7(t)
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if GetTriggerUnit()==p5 then
call IssueImmediateOrder(GetAttacker(),"stop")
endif
else
set WF8=WF8+1
call SaveInteger(L7,(OB7),(34),(WF8))
call SetUnitX(BB7,GetUnitX(p5))
call SetUnitY(BB7,GetUnitY(p5))
endif
set t=null
set p5=null
set BB7=null
return false
endfunction
function SEE takes nothing returns nothing
local unit p5=GetTriggerUnit()
local integer V77=GetUnitAbilityLevel(p5,1093749070)
local real d=4.
local unit BB7=CreateUnit(GetOwningPlayer(p5),1747993137,GetUnitX(p5),GetUnitY(p5),0)
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(p5))==false and WG7(GetLocalPlayer())==false then
call UnitSetUsesAltIcon(p5,true)
endif
call Z67(p5,1093748823,1,d)
call Z67(p5,1093748824,1,d)
call SaveInteger(L7,(GetHandleId((p5))),((4421)),(1))
call UnitAddAbility(p5,1093817686)
call UnitRemoveAbility(p5,1093817686)
if GetUnitTypeId(p5)!=1160786520 then
call UnitAddAbility(p5,1097625443)
call UnitRemoveAbility(p5,1097625443)
endif
call ShowUnit(p5,false)
call ShowUnit(p5,true)
call SelectUnitAddForPlayer(p5,GetOwningPlayer(p5))
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerRegisterDeathEvent(t,p5)
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function SDE))
call NT7(OB7,"Caster",BB7)
call NT7(OB7,"Source",p5)
call NP7(OB7,"Level",V77)
call SaveInteger(L7,(OB7),(34),(0))
set p5=null
set BB7=null
set t=null
endfunction
function SFE takes nothing returns boolean
if GetSpellAbilityId()==1093749070 then
call SEE()
endif
return false
endfunction
function NV8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SFE))
set t=null
endfunction
function SGE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer SV9=GetTriggerEvalCount(t)
local unit p5=O77(OB7,"Source")
local unit m5=O77(OB7,"Target")
local lightning SHE=OH7(OB7,"Lightning")
local integer V77=OM7(OB7,"Level")
local real t5=ON7(OB7,"SourceX")
local real w5=ON7(OB7,"SourceY")
local real Y5=GetUnitX(m5)
local real Z5=GetUnitY(m5)
local real SIE
local real SJE
local real HTE=ON7(OB7,"LastX")
local real HUE=ON7(OB7,"LastY")
local real l4
local real BAD=KF7(HTE,HUE,Y5,Z5)
call NQ7(OB7,"LastX",Y5)
call NQ7(OB7,"LastY",Z5)
if BAD>100 or SV9>(3.5/ .03)or WF7(m5) then
call DestroyLightning(SHE)
call NM7(OB7)
call OZ7(t)
else
call MoveLightning(SHE,true,t5,w5,Y5,Z5)
if KF7(t5,w5,Y5,Z5)>325 then
set l4=Atan2(Z5-w5,Y5-t5)
set SIE=t5+(325)*Cos(l4)
set SJE=w5+(325)*Sin(l4)
call SetUnitX(m5,SIE)
call SetUnitY(m5,SJE)
endif
endif
set t=null
set p5=null
set m5=null
set SHE=null
return false
endfunction
function SKE takes unit ZX7,unit IH7,integer BC7 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local lightning G7E=AddLightning("PONC",true,GetUnitX(ZX7),GetUnitY(ZX7),GetUnitX(IH7),GetUnitY(IH7))
call SetLightningColor(G7E,1,1,1,1)
call SaveLightningHandle(L7,(I97),StringHash("Lightning"),(G7E))
call NT7(I97,"Source",ZX7)
call NT7(I97,"Target",IH7)
call NP7(I97,"Level",BC7)
call NQ7(I97,"SourceX",GetUnitX(ZX7)*1.)
call NQ7(I97,"SourceY",GetUnitY(ZX7)*1.)
call NQ7(I97,"LastX",GetUnitX(IH7)*1.)
call NQ7(I97,"LastY",GetUnitY(IH7)*1.)
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function SGE))
call B67(ZX7,IH7,1,55*BC7)
call IssueTargetOrderById(ZX7,$D000F,IH7)
set t=null
set G7E=null
endfunction
function SME takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local integer WF8=GetTriggerEvalCount(t)
local integer BC7=OM7(I97,"Level")
local unit ZX7=O77(I97,"Source")
local real TA9=ON7(I97,"Angle")
local real PIE=ON7(I97,"SourceX")
local real PJE=ON7(I97,"SourceY")
local real Y_7=ON7(I97,"TargetX")
local real Z47=ON7(I97,"TargetY")
local real Z97=PIE+(30*(20+4*2)/30)*WF8*Cos(TA9*bj_DEGTORAD)
local real ZD7=PJE+(30*(20+4*2)/30)*WF8*Sin(TA9*bj_DEGTORAD)
local real SNE=SquareRoot((Z97-Y_7)*(Z97-Y_7)+(ZD7-Z47)*(ZD7-Z47))
local real SOE=700
local real SPE=$AF
local real SQE=(1-SNE/ SOE)*SPE*2
local group g=WS7()
local unit IH7
if WF8==1 then
call SetUnitAnimationByIndex(ZX7,5)
call SetUnitTimeScale(ZX7,1.5)
endif
if SQE>SPE then
call SetUnitAnimationByIndex(ZX7,5)
set SQE=SPE*2-SQE
endif
call SetUnitFlyHeight(ZX7,YK7(SQE,0),0)
call SetUnitX(ZX7,X17(Z97))
call SetUnitY(ZX7,X07(ZD7))
call SetUnitFacing(ZX7,TA9)
set IN4=ZX7
call GroupEnumUnitsInRange(g,Z97,ZD7,153,Condition(function A37))
set IH7=FirstOfGroup(g)
call WR7(g)
if SNE<30 or IH7!=null or GetTriggerEvalCount(t)>75 then
call SetUnitFlyHeight(ZX7,0,0)
call SetUnitFacing(ZX7,TA9)
call SetUnitTimeScale(ZX7,1)
call SetUnitAnimation(ZX7,"stand")
call SetUnitPathing(ZX7,true)
call UnitRemoveAbility(ZX7,1093749302)
call Y67(GetUnitX(ZX7),GetUnitY(ZX7),100)
if IH7!=null and WF7(IH7)==false then
call O37(IH7,"4408",5)
call SKE(ZX7,IH7,BC7)
endif
call NM7(I97)
call OZ7(t)
endif
set t=null
set ZX7=null
set IH7=null
set g=null
return false
endfunction
function SRE takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093749303)
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local real ZFD=700
local real TA9=GetUnitFacing(ZX7)
local real AQ9=GetUnitX(ZX7)
local real AR9=GetUnitY(ZX7)
local real Y_7=X17(AQ9+ZFD*Cos(TA9*bj_DEGTORAD))
local real Z47=X07(AR9+ZFD*Sin(TA9*bj_DEGTORAD))
call XF7(ZX7,1097691750)
call UnitRemoveAbility(ZX7,1097691750)
call SetUnitPathing(ZX7,false)
call XF7(ZX7,1093749302)
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerAddCondition(t,Condition(function SME))
call NT7(I97,"Source",ZX7)
call NP7(I97,"Level",BC7)
call NQ7(I97,"Angle",TA9*1.)
call NQ7(I97,"SourceX",AQ9*1.)
call NQ7(I97,"SourceY",AR9*1.)
call NQ7(I97,"TargetX",Y_7*1.)
call NQ7(I97,"TargetY",Z47*1.)
set ZX7=null
set t=null
endfunction
function SSE takes nothing returns boolean
if GetSpellAbilityId()==1093749303 then
call SRE()
endif
return false
endfunction
function NY8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SSE))
set t=null
endfunction
function STE takes nothing returns nothing
local integer OB7=GetHandleId(GetTriggeringTrigger())
local unit p5=IN4
local unit m5=IP4
local real YM7=ON7(OB7,"Damage")
call B67(p5,m5,1,YM7)
set p5=null
set m5=null
endfunction
function SUE takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetEnumUnit()
local trigger t=ZF7(p5,m5,1747993168,"STE",700)
local integer I97=GetHandleId(t)
local integer BC7=GetUnitAbilityLevel(p5,1093678145)
local real VW9
if BC7==1 then
set VW9=75
elseif BC7==2 then
set VW9=150
elseif BC7==3 then
set VW9=225
elseif BC7==4 then
set VW9=300
endif
call NQ7(I97,"Damage",VW9)
set p5=null
set m5=null
set t=null
endfunction
function SVE takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local group g=WS7()
local integer BC7=GetUnitAbilityLevel(ZX7,1093678145)
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),500,Condition(function AW7))
call ForGroup(g,function SUE)
call WR7(g)
call PlaySoundOnUnitBJ(OP,100,ZX7)
set ZX7=null
set g=null
endfunction
function SWE takes nothing returns boolean
if GetSpellAbilityId()==1093678145 then
call SVE()
endif
return false
endfunction
function NZ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SWE))
set t=null
endfunction
function YF5 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),WXI)==false then
call GroupAddUnit(WXI,GetEnumUnit())
call B67(WYI,GetEnumUnit(),7,WJI)
endif
endfunction
function YG5 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=(LoadUnitHandle(L7,(OB7),(2)))
local unit IJ=(LoadUnitHandle(L7,(OB7),(45)))
local group BQ9=(LoadGroupHandle(L7,(OB7),(22)))
local real a=(LoadReal(L7,(OB7),(137)))
local real DVD=KE7(WI7,IJ)
local real Il=GetUnitX(IJ)+1100*0.02*Cos(a*bj_DEGTORAD)
local real IL=GetUnitY(IJ)+1100*0.02*Sin(a*bj_DEGTORAD)
local group g
local real r=100+350*DVD/900
local integer BC7=GetUnitAbilityLevel(WI7,1093810258)
local real YM7
if BC7>0 then
set YM7=200+90*BC7
else
set BC7=GetUnitAbilityLevel(WI7,1093810259)
set YM7=210+115*BC7
endif
if DVD>900 then
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
call WR7(BQ9)
call KillUnit(IJ)
else
call SetUnitX(IJ,Il)
call SetUnitY(IJ,IL)
set IN4=WI7
set WYI=WI7
set WXI=BQ9
set WJI=YM7
set g=WS7()
call GroupEnumUnitsInRange(g,Il,IL,r,Condition(function AJ7))
call ForGroup(g,function YF5)
call WR7(g)
set g=null
endif
set BQ9=null
set t=null
set WI7=null
set IJ=null
return false
endfunction
function YH5 takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit IJ=CreateUnit(GetOwningPlayer(WI7),1697656901,GetUnitX(WI7),GetUnitY(WI7),GetUnitFacing(WI7))
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local real a=J77(GetUnitX(WI7),GetUnitY(WI7),x,y)
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerAddCondition(t,Condition(function YG5))
call SaveUnitHandle(L7,(OB7),(2),(WI7))
call SaveUnitHandle(L7,(OB7),(45),(IJ))
call SaveGroupHandle(L7,(OB7),(22),(WS7()))
call SaveReal(L7,(OB7),(137),((a)*1.0))
set WI7=null
set t=null
set IJ=null
endfunction
function YZ5 takes nothing returns boolean
if GetSpellAbilityId()==1093810258 or GetSpellAbilityId()==1093810259 then
call YH5()
endif
return false
endfunction
function NZA takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YZ5))
set t=null
endfunction
function SXE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
call NM7(OB7)
call OZ7(t)
else
call NM7(OB7)
call OZ7(t)
call KR7(p5)
endif
set t=null
set p5=null
return false
endfunction
function SYE takes nothing returns nothing
local unit p5=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local integer V77=GetUnitAbilityLevel(p5,1093677136)
call TriggerRegisterTimerEvent(t,1+1.75+.75*V77,false)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function SXE))
call NT7(OB7,"Source",p5)
set p5=null
set t=null
endfunction
function SZE takes nothing returns boolean
if GetSpellAbilityId()==1093677136 then
call SYE()
endif
return false
endfunction
function NA8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SZE))
set t=null
endfunction
function SAE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=(LoadInteger(L7,(I97),(5)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetTriggerEvalCount(t)==4 or WF7(IH7)then
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call UnitRemoveAbility(IH7,1093816119)
call UnitRemoveAbility(IH7,1110460227)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
if GetTriggerEventId()!=EVENT_WIDGET_DEATH then
call B67(ZX7,IH7,1,20*BC7-$A)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function SBE takes unit ZX7,unit IH7,integer BC7 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call XF7(IH7,1093816119)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerAddCondition(t,Condition(function SAE))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveInteger(L7,(I97),(5),(BC7))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",IH7,"chest")))
set t=null
endfunction
function SCE takes nothing returns boolean
if IsUnitInGroup(GetEnumUnit(),WL4)==false and WF7(GetEnumUnit())==false then
call GroupAddUnit(WL4,GetEnumUnit())
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\FireBlast.mdx",GetEnumUnit(),"chest"))
call SBE(W04,GetEnumUnit(),W14)
endif
return false
endfunction
function S3E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local integer WF8=(LoadInteger(L7,(I97),(34)))
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real AQ9=(LoadReal(L7,(I97),($BD)))
local real AR9=(LoadReal(L7,(I97),($BE)))
local real Y_7=(LoadReal(L7,(I97),(47)))
local real Z47=(LoadReal(L7,(I97),(48)))
local real a=(LoadReal(L7,(I97),($D)))
local real S6E=(1-I2R(WF8)/50)*bj_PI
local real SLE=W54/2*Cos(S6E)
local real S1E=500/2*Sin(S6E)
local real x=X17(Y_7+SLE*Cos(a)-S1E*Sin(a))
local real y=X07(Z47+SLE*Sin(a)+S1E*Cos(a))
local group T59=(LoadGroupHandle(L7,(I97),($85)))
local group g
local integer BC7=GetUnitAbilityLevel(ZX7,1093751370)
if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and WF8>0 and(GetSpellAbilityId()==1093808206 or GetSpellAbilityId()==1093751371))or WF8>100 then
call Y67(x,y,300)
call SetUnitVertexColor(ZX7,$FF,$FF,$FF,$FF)
if(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==0 or(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==1093751370 then
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093751370,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093808206,false)
call SetUnitPathing(ZX7,true)
call WR7(T59)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
if ModuloInteger(WF8,$A)==0 then
call Y67(x,y,$C8)
endif
call SaveInteger(L7,(I97),(34),(WF8+1))
call SetUnitX(ZX7,x)
call SetUnitY(ZX7,y)
call SetUnitFacing(ZX7,(a+S6E-bj_PI/2)*bj_RADTODEG)
set g=WS7()
set WL4=T59
set IN4=ZX7
set W04=ZX7
set W14=GetUnitAbilityLevel(ZX7,1093751370)
call GroupEnumUnitsInRange(g,x,y,$C8+25,Condition(function AR7))
call ForGroup(g,function SCE)
call WR7(g)
endif
set t=null
set ZX7=null
set g=null
set T59=null
return false
endfunction
function S0E takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local real AQ9=GetUnitX(ZX7)
local real AR9=GetUnitY(ZX7)
local real a=J77(AQ9,AR9,GetSpellTargetX(),GetSpellTargetY())*bj_DEGTORAD
local real Y_7=AQ9+$578/2*Cos(a)
local real Z47=AR9+$578/2*Sin(a)
call SetUnitState(ZX7,UNIT_STATE_LIFE,GetUnitState(ZX7,UNIT_STATE_LIFE)-GetUnitState(ZX7,UNIT_STATE_LIFE)*.15)
call O37(ZX7,"DashState1",2)
call O37(ZX7,"DashState2",2)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function S3E))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveReal(L7,(I97),($BD),((AQ9)*1.))
call SaveReal(L7,(I97),($BE),((AR9)*1.))
call SaveReal(L7,(I97),(47),((Y_7)*1.))
call SaveReal(L7,(I97),(48),((Z47)*1.))
call SaveReal(L7,(I97),($D),((a)*1.))
call SaveGroupHandle(L7,(I97),($85),(WS7()))
call SetUnitPathing(ZX7,false)
call SetUnitVertexColor(ZX7,$FF,$FF,$FF,255)
call XF7(ZX7,1093808206)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093751370,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093808206,true)
set t=null
set ZX7=null
endfunction
function S5E takes nothing returns boolean
if GetSpellAbilityId()==1093751370 then
call S0E()
endif
return false
endfunction
function NB8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function S5E))
set t=null
endfunction
function S2E takes nothing returns nothing
local unit ZX7=XG4
local unit IH7=GetEnumUnit()
call B67(ZX7,IH7,1,30+30*XH4)
call YS7("Doodads\\Cinematic\\FireTrapUp\\FireTrapUp.mdl",IH7,"origin",1)
set ZX7=null
set IH7=null
endfunction
function S_E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093751371)
local group g
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
set IN4=ZX7
set XG4=ZX7
set XH4=BC7
set g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),$3E8+25,Condition(function AJ7))
call ForGroup(g,function S2E)
call WR7(g)
set g=null
endif
set t=null
set ZX7=null
return false
endfunction
function T4E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit T7E=(LoadUnitHandle(L7,(I97),(589)))
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real x=(LoadReal(L7,(I97),(6)))
local real y=(LoadReal(L7,(I97),(7)))
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if IsUnitIllusion(GetEventDamageSource()) then
call YN7(T7E,GetEventDamage())
endif
else
if GetUnitX(T7E)!=x or GetUnitY(T7E)!=y then
call SetUnitPosition(T7E,x,y)
endif
if GetUnitY(ZX7)!=x or GetUnitY(ZX7)!=y then
call SetUnitPosition(ZX7,x,y)
endif
call SetUnitX(BB7,GetUnitX(ZX7))
call SetUnitY(BB7,GetUnitY(ZX7))
endif
if GetTriggerEvalCount(t)==1 then
call PauseUnit(ZX7,true)
endif
set t=null
set T7E=null
set ZX7=null
set BB7=null
return false
endfunction
function T8E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit T9E=(LoadUnitHandle(L7,(I97),(588)))
local unit T7E=(LoadUnitHandle(L7,(I97),(589)))
local real x=(LoadReal(L7,(I97),(6)))
local real y=(LoadReal(L7,(I97),(7)))
local unit BO9=(LoadUnitHandle(L7,(I97),($EF)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093751371)
local group g
local unit BB7
local integer TDE
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call StopSound(V84,false,false)
call ShowUnit(T9E,false)
call ShowUnit(BO9,false)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call ShowUnit(ZX7,true)
call OX7(ZX7,"4326")
call UnitRemoveAbility(ZX7,1093678162)
call SetUnitInvulnerable(ZX7,false)
call PauseUnit(ZX7,false)
if GetLocalPlayer()==GetOwningPlayer(ZX7)then
call ClearSelection()
call SelectUnit(ZX7,true)
endif
call SetUnitState(ZX7,UNIT_STATE_LIFE,1)
set BB7=CreateUnit(GetOwningPlayer(GetKillingUnit()),1697656901,0,0,0)
call UnitRemoveBuffs(ZX7,true,true)
call UnitRemoveAbility(ZX7,1097167980)
call UnitDamageTarget(BB7,ZX7,100000000.,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set BB7=null
else
if GetTriggerEvalCount(t)==1 then
call SetUnitFlyHeight(T7E,0,$C8)
elseif GetTriggerEvalCount(t)==2 then
call PauseUnit(T7E,false)
call UnitApplyTimedLife(T7E,1112820806,.1)
call StopSound(V84,false,false)
call StartSound(V94)
call DestroyEffect(AddSpecialEffect("war3mapImported\\FireNova2.mdx",GetUnitX(T9E),GetUnitY(T9E)))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call ShowUnit(ZX7,true)
call OX7(ZX7,"4326")
call UnitRemoveAbility(ZX7,1093678162)
call SetUnitInvulnerable(ZX7,false)
call SetUnitAnimationByIndex(ZX7,8)
call QueueUnitAnimation(ZX7,"idle")
call PauseUnit(ZX7,false)
if GetLocalPlayer()==GetOwningPlayer(ZX7)then
call ClearSelection()
call SelectUnit(ZX7,true)
endif
call ShowUnit(T9E,false)
call ShowUnit(BO9,false)
call SetUnitState(ZX7,UNIT_STATE_LIFE,GetUnitState(ZX7,UNIT_STATE_MAX_LIFE))
call SetUnitState(ZX7,UNIT_STATE_MANA,GetUnitState(ZX7,UNIT_STATE_MAX_MANA))
set TDE=GetUnitAbilityLevel(ZX7,1093751370)
if TDE>0 then
call UnitRemoveAbility(ZX7,1093751370)
call UnitAddAbility(ZX7,1093751370)
call SetUnitAbilityLevel(ZX7,1093751370,TDE)
endif
set TDE=GetUnitAbilityLevel(ZX7,1093753176)
if TDE>0 then
call UnitRemoveAbility(ZX7,1093753176)
call UnitAddAbility(ZX7,1093753176)
call SetUnitAbilityLevel(ZX7,1093753176,TDE)
endif
set TDE=GetUnitAbilityLevel(ZX7,1093753177)
if TDE>0 then
call UnitRemoveAbility(ZX7,1093753177)
call UnitAddAbility(ZX7,1093753177)
call SetUnitAbilityLevel(ZX7,1093753177,TDE)
endif
set BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(ZX7),GetUnitY(ZX7),0)
call XF7(BB7,1093753428)
call SetUnitAbilityLevel(BB7,1093753428,BC7)
call IssueImmediateOrderById(BB7,$D009F)
set BB7=null
endif
endif
set t=null
set ZX7=null
set T9E=null
set BO9=null
set T7E=null
return false
endfunction
function TEE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local real x=GetUnitX(ZX7)
local real y=GetUnitY(ZX7)
local unit T9E
local unit T7E
local unit BO9=CreateUnit(GetOwningPlayer(ZX7),1747993420,GetUnitX(ZX7),GetUnitY(ZX7),0)
local integer BC7=GetUnitAbilityLevel(ZX7,1093751371)
local unit BB7
local unit TFE=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(ZX7),GetUnitY(ZX7),0)
set T9E=CreateUnit(GetOwningPlayer(ZX7),1747993176,x,y,0)
if BC7==1 then
set T7E=CreateUnit(GetOwningPlayer(ZX7),1747993430,x,y,0)
elseif BC7==2 then
set T7E=CreateUnit(GetOwningPlayer(ZX7),1747993432,x,y,0)
elseif BC7==3 then
set T7E=CreateUnit(GetOwningPlayer(ZX7),1747993431,x,y,0)
endif
call AddSpecialEffectTarget("war3mapImported\\PhoenixDown_2.mdl",T9E,"origin")
if GetLocalPlayer()==GetOwningPlayer(ZX7)then
call ClearSelection()
call SelectUnit(T7E,true)
endif
call Y67(x,y,400)
call ShowUnit(ZX7,false)
call OV7(ZX7,"4326")
call XF7(ZX7,1093678162)
call YW8(ZX7,0,0)
call SetUnitInvulnerable(ZX7,true)
call UnitRemoveBuffs(ZX7,true,true)
call StartSound(V84)
call UnitRemoveAbility(T7E,1098015094)
call UnitApplyTimedLife(T9E,1112820806,6.1)
call UnitApplyTimedLife(BO9,1112820806,6.1)
call UnitApplyTimedLife(T7E,1112820806,6.1)
call TriggerRegisterTimerEvent(t,5.2,false)
call TriggerRegisterTimerEvent(t,6,false)
call TriggerAddCondition(t,Condition(function T8E))
call TriggerRegisterUnitEvent(t,T7E,EVENT_UNIT_DEATH)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(588),(T9E))
call SaveUnitHandle(L7,(I97),(589),(T7E))
call SaveUnitHandle(L7,(I97),($EF),(BO9))
call SaveReal(L7,(I97),(6),((GetUnitX(ZX7))*1.))
call SaveReal(L7,(I97),(7),((GetUnitY(ZX7))*1.))
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,T7E,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function S_E))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterUnitEvent(t,T7E,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,T7E,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function T4E))
call SaveUnitHandle(L7,(I97),(589),(T7E))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveReal(L7,(I97),(6),((GetUnitX(ZX7))*1.))
call SaveReal(L7,(I97),(7),((GetUnitY(ZX7))*1.))
call SaveUnitHandle(L7,(I97),(19),(TFE))
if MR7(ZX7,1227899192)then
call UnitAddAbility(TFE,1093678153)
endif
set t=null
set ZX7=null
set T9E=null
set T7E=null
endfunction
function TGE takes nothing returns boolean
if GetSpellAbilityId()==1093751371 then
call TEE()
endif
return false
endfunction
function N08 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TGE))
call X_7(1093687350)
call X_7(1093753428)
set t=null
endfunction
function THE takes nothing returns nothing
call SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+ZL4)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\BirdShitTarget_1.mdx",GetEnumUnit(),"origin"))
endfunction
function TIE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real x=(LoadReal(L7,(I97),(6)))
local real y=(LoadReal(L7,(I97),(7)))
local group g
local integer BC7=GetUnitAbilityLevel(ZX7,1093809986)
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call DestroyEffect(AddSpecialEffect("war3mapImported\\Firaga_2.mdx",x,y))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set g=WS7()
set ZL4=50+75*BC7
set IN4=ZX7
call GroupEnumUnitsInRange(g,x,y,425,Condition(function AB7))
call ForGroup(g,function THE)
call WR7(g)
set t=null
set ZX7=null
set g=null
return false
endfunction
function TJE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
call TriggerRegisterTimerEvent(t,3,false)
call TriggerAddCondition(t,Condition(function TIE))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveReal(L7,(I97),(6),((x)*1.))
call SaveReal(L7,(I97),(7),((y)*1.))
if IsPlayerAlly(GetOwningPlayer(ZX7),GetLocalPlayer())or WG7(GetLocalPlayer())then
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffect("war3mapImported\\BirdShit_1.mdx",x,y)))
else
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffect("",x,y)))
endif
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(ZX7))or WG7(GetLocalPlayer())then
call PingMinimapEx(x,y,3,$FF,0,0,false)
call Y17(WB4,x,y)
endif
call Y57(GetOwningPlayer(ZX7),4,x,y,500)
call SetUnitState(ZX7,UNIT_STATE_LIFE,GetUnitState(ZX7,UNIT_STATE_LIFE)*.9)
set t=null
set ZX7=null
endfunction
function TKE takes nothing returns boolean
if GetSpellAbilityId()==1093809986 then
call TJE()
endif
return false
endfunction
function N38 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TKE))
set t=null
endfunction
function TME takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=(LoadInteger(L7,(I97),(5)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call UnitRemoveAbility(IH7,1093809968)
call UnitRemoveAbility(IH7,1110459723)
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif GetTriggerEvalCount(t)>4 then
call UnitRemoveAbility(IH7,1093809968)
call UnitRemoveAbility(IH7,1110459723)
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call B67(ZX7,IH7,1,16+$C*BC7)
else
call B67(ZX7,IH7,1,16+$C*BC7)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function TNE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local real TP9=(LoadReal(L7,(I97),(23)))
local real TQ9=(LoadReal(L7,(I97),(24)))
local real a=(LoadReal(L7,(I97),($89)))
local real x=TP9+$C*Cos(a)
local real y=TQ9+$C*Sin(a)
call SetUnitX(IH7,x)
call SetUnitY(IH7,y)
call SaveReal(L7,(I97),(23),((x)*1.))
call SaveReal(L7,(I97),(24),((y)*1.))
if GetTriggerEvalCount(t)>25 then
call Y67(x,y,100)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function TOE takes unit ZX7,unit IH7,real x,real y,real a returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local integer BC7=GetUnitAbilityLevel(ZX7,1093809969)
call SetUnitPosition(IH7,GetUnitX(IH7),GetUnitY(IH7))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveReal(L7,(I97),($89),((a*bj_DEGTORAD)*1.))
call SaveReal(L7,(I97),(23),((GetUnitX(IH7))*1.))
call SaveReal(L7,(I97),(24),((GetUnitY(IH7))*1.))
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerAddCondition(t,Condition(function TNE))
set t=CreateTrigger()
set I97=GetHandleId(t)
call SaveInteger(L7,(I97),(5),(BC7))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",IH7,"chest")))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerAddCondition(t,Condition(function TME))
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093809968,false)
call XF7(IH7,1093809968)
set t=null
endfunction
function TPE takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),Z14)==false then
if KE7(Z54,GetEnumUnit())<24 or RAbsBJ(Cos(J47(Z54,GetEnumUnit())-A44))<.26 then
call GroupAddUnit(Z14,GetEnumUnit())
if Sin((J47(Z54,GetEnumUnit())-A44)*bj_DEGTORAD)<0 then
call TOE(Z04,GetEnumUnit(),Z24,Z_4,A44-90)
else
call TOE(Z04,GetEnumUnit(),Z24,Z_4,A44+90)
endif
endif
endif
endfunction
function TQE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit Y27=(LoadUnitHandle(L7,(I97),(45)))
local real a=(LoadReal(L7,(I97),($89)))
local real x=(LoadReal(L7,(I97),(6)))
local real y=(LoadReal(L7,(I97),(7)))
local group BQ9=(LoadGroupHandle(L7,(I97),($BB)))
local group g
if GetTriggerEvalCount(t)>125 then
call KillUnit(Y27)
call WR7(BQ9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
set x=x+8*Cos(a)
set y=y+8*Sin(a)
call SetUnitX(Y27,x)
call SetUnitY(Y27,y)
call SaveReal(L7,(I97),(6),((x)*1.))
call SaveReal(L7,(I97),(7),((y)*1.))
set IN4=ZX7
set Z24=x
set Z_4=y
set A44=a*bj_RADTODEG
set Z14=BQ9
set Z04=ZX7
set Z54=Y27
set g=WS7()
call GroupEnumUnitsInRange(g,x,y,$E1,Condition(function AJ7))
call ForGroup(g,function TPE)
call WR7(g)
endif
set t=null
set ZX7=null
return false
endfunction
function TRE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local real Y_7=GetSpellTargetX()
local real Z47=GetSpellTargetY()
local real TA9=Atan2(Z47-GetUnitY(ZX7),Y_7-GetUnitX(ZX7))
local integer BC7=GetUnitAbilityLevel(ZX7,1093809969)
local unit Y27=CreateUnit(GetOwningPlayer(ZX7),1747993665,GetUnitX(ZX7),GetUnitY(ZX7),TA9*bj_RADTODEG)
call TriggerRegisterTimerEvent(t,.01,true)
call TriggerAddCondition(t,Condition(function TQE))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(45),(Y27))
call SaveReal(L7,(I97),($89),((TA9)*1.))
call SaveReal(L7,(I97),(6),((GetUnitX(ZX7))*1.))
call SaveReal(L7,(I97),(7),((GetUnitY(ZX7))*1.))
call SaveInteger(L7,(I97),(5),(BC7))
call SaveGroupHandle(L7,(I97),($BB),(WS7()))
set t=null
set ZX7=null
endfunction
function TSE takes nothing returns boolean
if GetSpellAbilityId()==1093809969 then
call TRE()
endif
return false
endfunction
function N18 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TSE))
set t=null
endfunction
function TTE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer ZK7=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(ZK7),(2)))
local real TUE=(LoadReal(L7,(GetHandleId(ZX7)),(681)))
call FlushChildHashtable(L7,(ZK7))
call OZ7(t)
if((TimerGetElapsed(W))-TUE<.49)==false or GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitRemoveAbility(ZX7,1093753396)
call UnitRemoveAbility(ZX7,1093753409)
call UnitRemoveAbility(ZX7,1093753410)
call UnitRemoveAbility(ZX7,1093753401)
call UnitRemoveAbility(ZX7,1110459478)
endif
set t=null
set ZX7=null
return false
endfunction
function TVE takes unit ZX7 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local integer TWE
call TriggerRegisterTimerEvent(t,.5,false)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function TTE))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveReal(L7,(GetHandleId(ZX7)),(681),(((TimerGetElapsed(W)))*1.))
if X84==1 then
set TWE=1093753396
call UnitRemoveAbility(ZX7,1093753409)
call UnitRemoveAbility(ZX7,1093753410)
call UnitRemoveAbility(ZX7,1093753401)
elseif X84==2 then
set TWE=1093753409
call UnitRemoveAbility(ZX7,1093753396)
call UnitRemoveAbility(ZX7,1093753410)
call UnitRemoveAbility(ZX7,1093753401)
elseif X84==3 then
set TWE=1093753410
call UnitRemoveAbility(ZX7,1093753396)
call UnitRemoveAbility(ZX7,1093753409)
call UnitRemoveAbility(ZX7,1093753401)
elseif X84==4 then
set TWE=1093753401
call UnitRemoveAbility(ZX7,1093753396)
call UnitRemoveAbility(ZX7,1093753409)
call UnitRemoveAbility(ZX7,1093753410)
endif
call XF7(ZX7,TWE)
call UnitMakeAbilityPermanent(ZX7,true,TWE)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),TWE,false)
set t=null
endfunction
function TXE takes nothing returns nothing
local unit IH7=GetEnumUnit()
local real TYE=XE4
local real TZE=XF4
local real VW9=TYE+TZE*GetUnitState(IH7,UNIT_STATE_MAX_LIFE)
set VW9=VW9/5
if IsUnitEnemy(IH7,GetOwningPlayer(X94)) then
call B67(X94,IH7,3,VW9)
if WF7(IH7)==false then
call TVE(IH7)
endif
else
call SetUnitState(IH7,UNIT_STATE_LIFE,GetUnitState(IH7,UNIT_STATE_LIFE)+VW9*.5)
endif
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\FireRayTarget.mdx",IH7,"origin"))
call Y57(GetOwningPlayer(IH7),2,GetUnitX(X94),GetUnitY(X94),500)
set IH7=null
endfunction
function TAE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local integer WF8=(LoadInteger(L7,(I97),(34)))
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real TBE=GetUnitFacing(ZX7)
local real a=TBE*bj_DEGTORAD
local location l1=GetUnitLoc(ZX7)
local real TCE=GetLocationZ(l1)
local location l2=Location(GetUnitX(ZX7)+W24*Cos(a),GetUnitY(ZX7)+W24*Sin(a))
local real T3E=GetLocationZ(l2)
local lightning T6E=(LoadLightningHandle(L7,(I97),(676)))
local lightning TLE=(LoadLightningHandle(L7,(I97),(677)))
local lightning T1E=(LoadLightningHandle(L7,(I97),(678)))
local lightning T0E=(LoadLightningHandle(L7,(I97),(679)))
local lightning T5E=(LoadLightningHandle(L7,(I97),(680)))
local real T2E=1
local real AQ9
local real AR9
local real T_E
local real U4E
local real U7E
local real U8E
local real U9E
local real UDE
local real UEE
local real UFE
local real UGE
local real UHE
local real UIE
local real UJE
local real UKE
local real UME
local real UNE
local real UOE
local real UPE
local real UQE
local real URE
local real USE
local real UTE
local real UUE
local real UVE
local real UWE
local real UXE
local real UYE
local real UZE
local real UAE
local real UBE
local real UCE
local real U3E
local group g
local real x
local real y
local integer i
local real U6E
local real ULE
local real U1E
local boolean U0E=FALSE
local boolean U5E=false
local unit U2E=(LoadUnitHandle(L7,(I97),(17)))
local unit CT4=null
local unit DriftTarget=null
local real U_E
local real V4E
local real V7E
local real V8E=(LoadReal(L7,(I97),(688)))
local boolean V9E=(LoadBoolean(L7,(I97),(689)))
local boolean VDE=(LoadBoolean(L7,(I97),(672)))
local real VEE
local ubersplat VFE
local real O32=(LoadReal(L7,(I97),(23)))
local real O42=(LoadReal(L7,(I97),(24)))
local real TYE
local real TZE
local real VGE
local real VHE=5
if GetUnitCurrentOrder(ZX7)==$D0021 then
call DisableTrigger(t)
call KR7(ZX7)
call EnableTrigger(t)
endif
call RemoveLocation(l1)
call RemoveLocation(l2)
if IsUnitPaused(ZX7)==false and(GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER)then
set AQ9=GetUnitX(ZX7)
set AR9=GetUnitY(ZX7)
if GetIssuedOrderId()!=$D020A and GetIssuedOrderId()!=$D00D9 and GetIssuedOrderId()!=$D0278 then
call DisableTrigger(t)
call KR7(ZX7)
call EnableTrigger(t)
endif
if GetIssuedOrderId()==$D0003 then
if GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER then
set x=GetUnitX(GetOrderTargetUnit())
set y=GetUnitY(GetOrderTargetUnit())
else
set x=GetOrderPointX()
set y=GetOrderPointY()
endif
set U6E=J77(x,y,AQ9,AR9)
if U6E<0 then
set U6E=U6E+360
endif
set U1E=TBE-U6E
if U1E<0 then
set U1E=U1E+360
endif
if U1E<$B4 then
set U0E=true
set ULE=TBE+6
else
set U5E=true
set ULE=TBE-6
endif
set V8E=J77(x,y,AQ9,AR9)+$B4
call SaveReal(L7,(I97),(688),((V8E)*1.))
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT or GetTriggerEventId()==EVENT_WIDGET_DEATH or(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==-1 or WF8>=6./.02 or YM8(ZX7)or UC7(ZX7)then
if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and(GetSpellAbilityId()==1093753395 or GetSpellAbilityId()==1093751371 or GetSpellAbilityId()==1093809992))then
call OX7(ZX7,"SunRay|Disarmed")
if OT7(ZX7,"IcarusDive|Disarmed")==false then
call UnitRemoveAbility(ZX7,1096971630)
endif
call SetUnitPathing(ZX7,true)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call UnitRemoveAbility(ZX7,1093808181)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093753395,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093808181,false)
if(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==0 or(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==1093753177 then
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093753177,true)
endif
call DestroyLightning(T6E)
call DestroyLightning(TLE)
call DestroyLightning(T1E)
call DestroyLightning(T0E)
call DestroyLightning(T5E)
call StopSound(WA4,false,true)
endif
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if GetIssuedOrderId()==852177then
set V9E=true
endif
if GetIssuedOrderId()==852178then
set V9E=false
endif
call SaveBoolean(L7,(I97),(689),(V9E))
else
set U6E=TBE-V8E
if U6E<-$B4 then
set U6E=U6E+360
elseif U6E>$B4 then
set U6E=U6E-360
endif
set VEE=1
if WF8<35 and VDE then
set VEE=7
endif
if U6E<(-1*VEE)then
set TBE=TBE+VEE
elseif U6E>VEE then
set TBE=TBE-VEE
else
set VDE=false
call SaveBoolean(L7,(I97),(672),(VDE))
set TBE=V8E
endif
if OT7(ZX7,"DashState1")==false then
call SetUnitFacing(ZX7,TBE)
endif
set a=TBE*bj_DEGTORAD
set WF8=WF8+1
call SaveInteger(L7,(I97),(34),(WF8))
set T_E=W24
set AQ9=GetUnitX(ZX7)+50*Cos(a)
set AR9=GetUnitY(ZX7)+50*Sin(a)
if V9E and AF7(ZX7)==false and YM8(ZX7)==false then
if((LoadInteger(L7,(GetHandleId((ZX7))),((4331))))==1) then
set VHE=VHE*2
endif
set V7E=a
set U_E=X17(GetUnitX(ZX7)+VHE*Cos(V7E))
set V4E=X07(GetUnitY(ZX7)+VHE*Sin(V7E))
call Y67(U_E,V4E,$C8)
call SetUnitX(ZX7,U_E)
call SetUnitY(ZX7,V4E)
endif
call SetUnitState(ZX7,UNIT_STATE_LIFE,GetUnitState(ZX7,UNIT_STATE_LIFE)-GetUnitState(ZX7,UNIT_STATE_LIFE)*.06*.02)
call Y67(AQ9,AR9,$C8)
if ModuloInteger(WF8,$A)==0 then
set XD4=WS7()
set IN4=ZX7
set i=0
loop
exitwhen i*50>W24
set x=AQ9+i*50*Cos(a)
set y=AR9+i*50*Sin(a)
set g=WS7()
call GroupEnumUnitsInRange(g,x,y,$82+25,Condition(function AJ7))
call GroupAddGroup(g,XD4)
call GroupEnumUnitsInRange(g,x,y,100,Condition(function AB7))
call GroupAddGroup(g,XD4)
call WR7(g)
if ModuloInteger(i,3)==0 then
call Y57(GetOwningPlayer(ZX7),2,x,y,$E1)
endif
set i=i+1
endloop
set X94=ZX7
set X84=GetUnitAbilityLevel(ZX7,1093753177)
set VGE=(I2R(WF8)/50.)/6
set XE4=(5*X84+$A)+(5*X84+$A)*VGE
set XF4=(X84*1.25+VGE*(X84*1.25))/100
call GroupRemoveUnit(XD4,ZX7)
call ForGroup(XD4,function TXE)
call WR7(XD4)
set g=null
set XD4=null
endif
if XH7(ZX7)==false then
if U2E!=null then
set T_E=KE7(ZX7,U2E)
endif
set U4E=AQ9
set U7E=AR9
set U8E=TCE+$C8
set U9E=U4E+T_E*Cos(a)
set UDE=U7E+T_E*Sin(a)
set UEE=T3E
set UFE=AQ9+W_4*Cos((TBE-90)*bj_DEGTORAD)
set UGE=AR9+X44*Cos((TBE-90)*bj_DEGTORAD)
set UHE=TCE+$C8
set UIE=UFE+T_E*Cos(a)
set UJE=UGE+T_E*Sin(a)
set UKE=T3E
set UME=AQ9+W_4*Cos((TBE+90)*bj_DEGTORAD)
set UNE=AR9+X44*Cos((TBE+90)*bj_DEGTORAD)
set UOE=TCE+$C8
set UPE=UME+T_E*Cos(a)
set UQE=UNE+T_E*Sin(a)
set URE=T3E
set USE=AQ9
set UTE=AR9
set UUE=TCE+$C8+X74
set UVE=USE+T_E*Cos(a)
set UWE=UTE+T_E*Sin(a)
set UXE=T3E
set UYE=AQ9
set UZE=AR9
set UAE=TCE+$C8-X74
set UBE=UYE+T_E*Cos(a)
set UCE=UZE+T_E*Sin(a)
set U3E=T3E
if ModuloInteger(WF8,$A)==0 and T_E==W24 then
set x=GetUnitX(ZX7)+(W24)*Cos(a)
set y=GetUnitY(ZX7)+(W24)*Sin(a)
call DestroyEffect(AddSpecialEffect("war3mapImported\\FireRayTarget.mdx",x,y))
endif
if ModuloInteger(WF8,$A)==0 then
call SetSoundPosition(WA4,GetUnitX(ZX7),GetUnitY(ZX7),100)
set x=GetUnitX(ZX7)+(T_E)*Cos(a)
set y=GetUnitY(ZX7)+(T_E)*Sin(a)
set VFE=CreateUbersplat(x,y,"SRAY",$FF,$FF,$FF,$FF,false,false)
call SetUbersplatRenderAlways(VFE,true)
call M19(VFE,$A)
set VFE=null
endif
call MoveLightningEx(T6E,false,U4E,U7E,U8E,U9E,UDE,UEE)
call MoveLightningEx(TLE,false,UFE,UGE,UHE,UIE,UJE,UKE)
call MoveLightningEx(T1E,false,UME,UNE,UOE,UPE,UQE,URE)
call MoveLightningEx(T0E,false,USE,UTE,UUE,UVE,UWE,UXE)
call MoveLightningEx(T5E,false,UYE,UZE,UAE,UBE,UCE,U3E)
if WG7(GetLocalPlayer())then
set T2E=1
endif
call SetLightningColor(T6E,1.,1.,1.,T2E)
call SetLightningColor(TLE,1.,1.,1.,T2E)
call SetLightningColor(T1E,1.,1.,1.,T2E)
call SetLightningColor(T0E,1.,1.,1.,T2E)
call SetLightningColor(T5E,1.,1.,1.,T2E)
endif
endif
set t=null
set ZX7=null
set T6E=null
set TLE=null
set T1E=null
set T0E=null
set T5E=null
set l1=null
set l2=null
return false
endfunction
function VIE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local real a=J77(GetUnitX(ZX7),GetUnitY(ZX7),GetSpellTargetX(),GetSpellTargetY())*bj_DEGTORAD
local real Y_7=X17(GetUnitX(ZX7)+W24*Cos(a))
local real Z47=X07(GetUnitY(ZX7)+W24*Sin(a))
local lightning T6E=AddLightning("SRAY",false,GetUnitX(ZX7),GetUnitY(ZX7),Y_7,Z47)
local lightning TLE=AddLightning("SRAY",false,GetUnitX(ZX7),GetUnitY(ZX7),Y_7,Z47)
local lightning T1E=AddLightning("SRAY",false,GetUnitX(ZX7),GetUnitY(ZX7),Y_7,Z47)
local lightning T0E=AddLightning("SRAY",false,GetUnitX(ZX7),GetUnitY(ZX7),Y_7,Z47)
local lightning T5E=AddLightning("SRAY",false,GetUnitX(ZX7),GetUnitY(ZX7),Y_7,Z47)
call SetUnitFacing(ZX7,a*bj_RADTODEG)
call StartSound(WA4)
call SetSoundPosition(WA4,GetUnitX(ZX7),GetUnitY(ZX7),100)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_ISSUED_ORDER)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TAE))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveReal(L7,(I97),($D),((a)*1.))
call SaveReal(L7,(I97),(688),((a*bj_RADTODEG)*1.))
call SaveLightningHandle(L7,(I97),(676),(T6E))
call SaveLightningHandle(L7,(I97),(677),(TLE))
call SaveLightningHandle(L7,(I97),(678),(T1E))
call SaveLightningHandle(L7,(I97),(679),(T0E))
call SaveLightningHandle(L7,(I97),(680),(T5E))
call SaveBoolean(L7,(I97),(689),(false))
call SaveBoolean(L7,(I97),(672),(true))
call SaveReal(L7,(I97),(688),((a*bj_RADTODEG)*1.))
call SaveReal(L7,(I97),(23),((GetUnitX(ZX7))*1.))
call SaveReal(L7,(I97),(24),((GetUnitY(ZX7))*1.))
call XF7(ZX7,1096971630)
call OV7(ZX7,"SunRay|Disarmed")
call SetUnitPathing(ZX7,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093753395,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093808181,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093753177,false)
call XF7(ZX7,1093753395)
call UnitMakeAbilityPermanent(ZX7,true,1093753395)
call XF7(ZX7,1093808181)
call UnitMakeAbilityPermanent(ZX7,true,1093808181)
call TriggerEvaluate(t)
set t=null
set ZX7=null
set ZX7=null
set T6E=null
set TLE=null
set T1E=null
set T0E=null
set T5E=null
endfunction
function VJE takes nothing returns boolean
if GetSpellAbilityId()==1093753177 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
else
call VIE()
endif
endif
return false
endfunction
function NL8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function VJE))
call M29(1093753396)
call M29(1093753409)
call M29(1093753410)
call M29(1093753401)
set t=null
endfunction
function VKE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093753176)
if GetTriggerEventId()==EVENT_UNIT_DEATH or(TimerGetElapsed(W))>=(LoadReal(L7,(GetHandleId(IH7)),(757)))or WF7(IH7) then
call UnitRemoveAbility(IH7,1093816387)
call UnitRemoveAbility(IH7,1093816389)
call UnitRemoveAbility(IH7,1093816391)
call UnitRemoveAbility(IH7,1093815352)
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
if ModuloInteger(GetTriggerEvalCount(t),4)==0 then
call B67(ZX7,IH7,1,20*BC7-10)
endif
set t=null
set ZX7=null
return false
endfunction
function VME takes nothing returns nothing
local unit ZX7=XI4
local unit IH7=GetEnumUnit()
local trigger t
local integer I97
local integer BC7=GetUnitAbilityLevel(ZX7,1093753176)
local integer WD5
call SaveReal(L7,(GetHandleId(IH7)),(757),(((TimerGetElapsed(W))+4)*1.))
if GetUnitAbilityLevel(IH7,1093816387)==0 and GetUnitAbilityLevel(IH7,1093816389)==0 and GetUnitAbilityLevel(IH7,1093816391)==0 and GetUnitAbilityLevel(IH7,1093815352)==0 then
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerAddCondition(t,Condition(function VKE))
call TriggerRegisterDeathEvent(t,IH7)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveEffectHandle(L7,(I97),($B0),(AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",IH7,"chest")))
if YS8(IH7)==false then
if BC7==1 then
set WD5=1093816387
elseif BC7==2 then
set WD5=1093816389
elseif BC7==3 then
set WD5=1093816391
elseif BC7==4 then
set WD5=1093815352
endif
call UnitAddAbility(IH7,WD5)
call UnitMakeAbilityPermanent(IH7,true,WD5)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),WD5,false)
endif
set ZX7=null
set IH7=null
set t=null
endfunction
function VNE takes unit ZX7,unit Y27,real D3E,unit BB7,unit IH7 returns nothing
local real x=GetUnitX(Y27)
local real y=GetUnitY(Y27)
local group g=WS7()
set IN4=ZX7
set XI4=ZX7
call GroupEnumUnitsInRange(g,x,y,200+25,Condition(function AR7))
call ForGroup(g,function VME)
call WR7(g)
call DestroyEffect(AddSpecialEffect("war3mapImported\\Firaga_2.mdx",x,y))
call KillUnit(Y27)
call ShowUnit(Y27,false)
set g=null
endfunction
function VOE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local integer WF8=(LoadInteger(L7,(I97),(34)))
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
local unit VPE=(LoadUnitHandle(L7,(I97),(393)))
local real D3E=(LoadReal(L7,(I97),(685)))
local real Y_7
local real Z47
local real x
local real y
local real a
local real r=18
local integer BC7=GetUnitAbilityLevel(ZX7,1093753176)
if GetTriggerEventId()==EVENT_UNIT_DEATH then
set Y_7=GetUnitX(IH7)
set Z47=GetUnitY(IH7)
call SaveReal(L7,(I97),(47),((Y_7)*1.))
call SaveReal(L7,(I97),(48),((Z47)*1.))
call RemoveSavedHandle(L7,(I97),(17))
call SaveUnitHandle(L7,(I97),(17),(null))
elseif IH7==null then
set Y_7=(LoadReal(L7,(I97),(47)))
set Z47=(LoadReal(L7,(I97),(48)))
else
set Y_7=GetUnitX(IH7)
set Z47=GetUnitY(IH7)
endif
set a=J77(GetUnitX(VPE),GetUnitY(VPE),Y_7,Z47)
call SetUnitFacing(VPE,a)
set x=GetUnitX(VPE)+r*Cos(a*bj_DEGTORAD)
set y=GetUnitY(VPE)+r*Sin(a*bj_DEGTORAD)
call SetUnitX(VPE,x)
call SetUnitY(VPE,y)
if KF7(x,y,Y_7,Z47)<r*2 then
call VNE(ZX7,VPE,D3E,BB7,IH7)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
set IH7=null
set VPE=null
set BB7=null
return false
endfunction
function VQE takes unit ZX7,unit VPE,unit IH7,real D3E,unit BB7 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local group g
local unit NewTarget
if ZX7==IH7 then
call KillUnit(VPE)
call ShowUnit(VPE,false)
else
call SetUnitVertexColor(VPE,$FF,$FF,$FF,$FF)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function VOE))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveUnitHandle(L7,(I97),(393),(VPE))
call SaveReal(L7,(I97),(47),((GetSpellTargetX())*1.))
call SaveReal(L7,(I97),(48),((GetSpellTargetY())*1.))
call SaveReal(L7,(I97),(685),((D3E)*1.))
call SaveUnitHandle(L7,(I97),(19),(BB7))
endif
set t=null
endfunction
function VRE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local integer WF8=(LoadInteger(L7,(I97),(34)))
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real AQ9=GetUnitX(ZX7)
local real AR9=GetUnitY(ZX7)
local unit VSE=(LoadUnitHandle(L7,(I97),(393)))
local unit VTE=(LoadUnitHandle(L7,(I97),(394)))
local unit VUE=(LoadUnitHandle(L7,(I97),(395)))
local unit VVE=(LoadUnitHandle(L7,(I97),(396)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093753176)
local real a=GetUnitFacing(ZX7)
local real x
local real y
local group g
local group g2
local real D4D=-1*360*.02/4
local real a2
local real P59
local real D3E=(LoadReal(L7,(I97),(685)))
local real VWE
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
local integer VXE=GetHandleId(ZX7)
local player pl=GetOwningPlayer(ZX7)
local integer VYE=800
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093753394 then
if XH7(VSE)==false then
call VQE(ZX7,VSE,GetSpellTargetUnit(),D3E,BB7)
call RemoveSavedHandle(L7,(I97),(393))
elseif XH7(VTE)==false then
call VQE(ZX7,VTE,GetSpellTargetUnit(),D3E,BB7)
call RemoveSavedHandle(L7,(I97),(394))
elseif XH7(VUE)==false then
call VQE(ZX7,VUE,GetSpellTargetUnit(),D3E,BB7)
call RemoveSavedHandle(L7,(I97),(395))
elseif XH7(VVE)==false then
call VQE(ZX7,VVE,GetSpellTargetUnit(),D3E,BB7)
call RemoveSavedHandle(L7,(I97),(396))
if(TZ7(pl))then
call NN7(VXE,"Bird4")
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093753394,false)
if(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==0 or(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==1093753176 then
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093753176,true)
endif
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
elseif GetSpellAbilityId()==1093751371 then
if VSE!=null and XH7(VSE)==false then
call VQE(ZX7,VSE,ZX7,D3E,BB7)
endif
if VTE!=null and XH7(VTE)==false then
call VQE(ZX7,VTE,ZX7,D3E,BB7)
endif
if VUE!=null and XH7(VUE)==false then
call VQE(ZX7,VUE,ZX7,D3E,BB7)
endif
if VVE!=null and XH7(VVE)==false then
call VQE(ZX7,VVE,ZX7,D3E,BB7)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093753394,false)
if(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==0 or(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==1093753176 then
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093753176,true)
endif
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if(TZ7(pl))then
call NN7(VXE,"Bird4")
call NP7(VXE,"BirdsCounter",0)
endif
endif
else
set WF8=WF8+1
call SaveInteger(L7,(I97),(34),(WF8))
if(TZ7(pl))then
call NP7(VXE,"BirdsCounter",WF8)
endif
if VSE!=null and XH7(VSE)==false then
set P59=360*4/4.
set a2=P59+D4D*WF8
set x=X17(AQ9+$C8*Cos(a2*bj_DEGTORAD))
set y=X07(AR9+$C8*Sin(a2*bj_DEGTORAD))
call SetUnitFacing(VSE,a2-90)
call SetUnitX(VSE,x)
call SetUnitY(VSE,y)
endif
if VTE!=null and XH7(VTE)==false then
set P59=360*3/4.
set a2=P59+D4D*WF8
set x=X17(AQ9+$C8*Cos(a2*bj_DEGTORAD))
set y=X07(AR9+$C8*Sin(a2*bj_DEGTORAD))
call SetUnitFacing(VTE,a2-90)
call SetUnitX(VTE,x)
call SetUnitY(VTE,y)
endif
if VUE!=null and XH7(VUE)==false then
set P59=360*2/4.
set a2=P59+D4D*WF8
set x=X17(AQ9+$C8*Cos(a2*bj_DEGTORAD))
set y=X07(AR9+$C8*Sin(a2*bj_DEGTORAD))
call SetUnitFacing(VUE,a2-90)
call SetUnitX(VUE,x)
call SetUnitY(VUE,y)
endif
if VVE!=null and XH7(VVE)==false then
set P59=360*1/4.
set a2=P59+D4D*WF8
set x=X17(AQ9+$C8*Cos(a2*bj_DEGTORAD))
set y=X07(AR9+$C8*Sin(a2*bj_DEGTORAD))
call SetUnitFacing(VVE,a2-90)
call SetUnitX(VVE,x)
call SetUnitY(VVE,y)
endif
if WF8>VYE or GetTriggerEventId()==EVENT_UNIT_DEATH then
if VSE!=null and XH7(VSE)==false then
call VQE(ZX7,VSE,ZX7,D3E,BB7)
endif
if VTE!=null and XH7(VTE)==false then
call VQE(ZX7,VTE,ZX7,D3E,BB7)
endif
if VUE!=null and XH7(VUE)==false then
call VQE(ZX7,VUE,ZX7,D3E,BB7)
endif
if VVE!=null and XH7(VVE)==false then
call VQE(ZX7,VVE,ZX7,D3E,BB7)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093753394,false)
if(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==0 or(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==1093753176 then
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093753176,true)
endif
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if(TZ7(pl))then
call NN7(VXE,"Bird4")
call NP7(VXE,"BirdsCounter",0)
endif
else
set D3E=RMinBJ(.25+.75*(I2R(WF8)/500.),1)
call SaveReal(L7,(I97),(685),((D3E)*1.))
set VWE=.25+(1-.2)*2.5
call SetUnitScale(VSE,VWE,VWE,VWE)
call SetUnitScale(VTE,VWE,VWE,VWE)
call SetUnitScale(VUE,VWE,VWE,VWE)
call SetUnitScale(VVE,VWE,VWE,VWE)
if WF8==(VYE-$AF)then
call ZT7(WB4,GetOwningPlayer(ZX7))
endif
if WF8>(VYE-$C8)then
if ModuloInteger(WF8,$A)==0 or ModuloInteger(WF8,$A)==1 or ModuloInteger(WF8,$A)==2 or ModuloInteger(WF8,$A)==3 or ModuloInteger(WF8,$A)==4 then
call SetUnitVertexColor(VSE,$FF,0,0,$FF)
call SetUnitVertexColor(VTE,$FF,0,0,$FF)
call SetUnitVertexColor(VUE,$FF,0,0,$FF)
call SetUnitVertexColor(VVE,$FF,0,0,$FF)
else
call SetUnitVertexColor(VSE,$FF,$FF,$FF,$FF)
call SetUnitVertexColor(VTE,$FF,$FF,$FF,$FF)
call SetUnitVertexColor(VUE,$FF,$FF,$FF,$FF)
call SetUnitVertexColor(VVE,$FF,$FF,$FF,$FF)
endif
endif
endif
endif
set t=null
set ZX7=null
set VSE=null
set VTE=null
set VUE=null
set VVE=null
set BB7=null
return false
endfunction
function VZE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local real AQ9=GetUnitX(ZX7)
local real AR9=GetUnitY(ZX7)
local real x
local real y
local unit VSE
local unit VTE
local unit VUE
local unit VVE
local real a=GetUnitFacing(ZX7)
local unit BB7=null
local integer VXE=GetHandleId(ZX7)
local player pl=GetOwningPlayer(ZX7)
call ND7(BB7)
call UnitAddAbility(BB7,1093808469)
call SetUnitState(ZX7,UNIT_STATE_LIFE,GetUnitState(ZX7,UNIT_STATE_LIFE)-GetUnitState(ZX7,UNIT_STATE_LIFE)*.2)
call XF7(ZX7,1093753394)
call UnitMakeAbilityPermanent(ZX7,true,1093753394)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093753394,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093753176,false)
set x=GetUnitX(ZX7)+$C8*Cos(bj_DEGTORAD*360*4/4.*-1.)
set y=GetUnitY(ZX7)+$C8*Sin(bj_DEGTORAD*360*4/4.*-1.)
set VSE=CreateUnit(GetOwningPlayer(ZX7),1747993429,x,y,360*4/4.*-1.)
set x=GetUnitX(ZX7)+$C8*Cos(bj_DEGTORAD*360*3/4.*-1.)
set y=GetUnitY(ZX7)+$C8*Sin(bj_DEGTORAD*360*3/4.*-1.)
set VTE=CreateUnit(GetOwningPlayer(ZX7),1747993429,x,y,360*3/4.*-1.)
set x=GetUnitX(ZX7)+$C8*Cos(bj_DEGTORAD*360*2/4.*-1.)
set y=GetUnitY(ZX7)+$C8*Sin(bj_DEGTORAD*360*2/4.*-1.)
set VUE=CreateUnit(GetOwningPlayer(ZX7),1747993429,x,y,360*2/4.*-1.)
set x=GetUnitX(ZX7)+$C8*Cos(bj_DEGTORAD*360*1/4.*-1.)
set y=GetUnitY(ZX7)+$C8*Sin(bj_DEGTORAD*360*1/4.*-1.)
set VVE=CreateUnit(GetOwningPlayer(ZX7),1747993429,x,y,360*1/4.*-1.)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function VRE))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(393),(VSE))
call SaveUnitHandle(L7,(I97),(394),(VTE))
call SaveUnitHandle(L7,(I97),(395),(VUE))
call SaveUnitHandle(L7,(I97),(396),(VVE))
call SaveUnitHandle(L7,(I97),(19),(BB7))
if(TZ7(pl))then
call NT7(VXE,"Bird4",VVE)
endif
set ZX7=null
set VSE=null
set VTE=null
set VUE=null
set VVE=null
set BB7=null
endfunction
function VAE takes nothing returns boolean
if GetSpellAbilityId()==1093753176 then
call VZE()
endif
return false
endfunction
function N68 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VAE))
set t=null
endfunction
function VBE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093815345)
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>4 then
call UnitRemoveAbility(IH7,1093815352)
call OX7(IH7,"IcarusDive|Disarmed")
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
call B67(ZX7,IH7,1,20*BC7)
set t=null
set ZX7=null
return false
endfunction
function VCE takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetEnumUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function VBE))
call TriggerRegisterDeathEvent(t,IH7)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveEffectHandle(L7,(I97),($B0),(AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",IH7,"chest")))
call UnitAddAbility(IH7,1093815352)
call UnitMakeAbilityPermanent(IH7,true,1093815352)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093815352,false)
call OV7(IH7,"IcarusDive|Disarmed")
set ZX7=null
set IH7=null
set t=null
endfunction
function V3E takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local group g=WS7()
call DestroyEffect(AddSpecialEffect("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",x,y))
call GroupEnumUnitsInRange(g,x,y,275+25,Condition(function AW7))
call ForGroup(g,function VCE)
call WR7(g)
set g=null
set ZX7=null
endfunction
function V6E takes nothing returns boolean
if GetSpellAbilityId()==1093815345 then
call V3E()
endif
return false
endfunction
function NC8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function V6E))
set t=null
endfunction
function VLE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit hn=O77(OB7,"Hero")
local unit BB7=O77(OB7,"Caster")
call NM7(OB7)
call OZ7(t)
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call KillUnit(BB7)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosDone.mdl",hn,"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl",hn,"origin"))
call UnitRemoveAbility(hn,1093687875)
call UnitRemoveAbility(hn,1110454358)
set t=null
set hn=null
set BB7=null
return false
endfunction
function V1E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit hn=O77(OB7,"Hero")
local unit BB7=O77(OB7,"Caster")
call NM7(OB7)
call OZ7(t)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosDone.mdl",hn,"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl",hn,"origin"))
set t=CreateTrigger()
set OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,18-.1,false)
call TriggerRegisterDeathEvent(t,hn)
call TriggerAddCondition(t,Condition(function VLE))
call NT7(OB7,"Hero",hn)
call NT7(OB7,"Caster",BB7)
set t=null
set hn=null
set BB7=null
return false
endfunction
function V0E takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit hn=GetTriggerUnit()
local unit V5E=CreateUnit(GetOwningPlayer(hn),1697657174,0,0,0)
local real V2E=18
call XF7(V5E,1093687875)
call UnitApplyTimedLife(V5E,1112820806,V2E)
call XT7(hn,V2E,$AF)
call TriggerRegisterTimerEvent(t,.1,false)
call TriggerAddCondition(t,Condition(function V1E))
call NT7(OB7,"Hero",hn)
call NT7(OB7,"Caster",V5E)
set t=null
set V5E=null
set hn=null
endfunction
function V_E takes nothing returns boolean
if GetSpellAbilityId()==1093679411 and GetUnitTypeId(GetTriggerUnit())==1429221432 then
call V0E()
endif
return false
endfunction
function M38 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function V_E))
set t=null
endfunction
function KV9 takes nothing returns nothing
local unit p5=B2
local unit m5=C2
local unit BB7=O77(GetHandleId(p5),"FeralHeartCaster")
call NT7(GetHandleId(m5),"FeralHeartCaster",BB7)
call SetUnitOwner(BB7,GetOwningPlayer(m5),true)
set p5=null
set m5=null
set BB7=null
endfunction
function XF8 takes nothing returns nothing
local unit WX7=IT4
local unit BB7=O77(GetHandleId(WX7),"FeralHeartCaster")
if BB7!=null and GetUnitTypeId(BB7)==1697657174 then
call RemoveUnit(BB7)
endif
set WX7=null
set BB7=null
endfunction
function W4E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
if BB7!=null and GetUnitTypeId(BB7)==1697657174 then
if XH7(ZX7)==false then
call SetUnitX(BB7,GetUnitX(ZX7))
call SetUnitY(BB7,GetUnitY(ZX7))
endif
endif
set t=null
set BB7=null
set ZX7=null
return false
endfunction
function W7E takes unit WX7,boolean UA9 returns nothing
local integer BC7=GetUnitAbilityLevel(WX7,1093677893)
local unit BB7
local trigger t
local integer I97
if BC7==1 or UA9 then
set BB7=CreateUnit(GetOwningPlayer(WX7),1697657174,0,0,0)
call XF7(BB7,1093687882)
call NT7(GetHandleId(WX7),"FeralHeartCaster",BB7)
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerAddCondition(t,Condition(function W4E))
call TriggerRegisterTimerEvent(t,.2,true)
call SaveUnitHandle(L7,(I97),(2),(WX7))
call SaveUnitHandle(L7,(I97),(19),(BB7))
else
set BB7=O77(GetHandleId(WX7),"FeralHeartCaster")
endif
if BC7==2 then
call UnitRemoveAbility(BB7,1093687882)
call XF7(BB7,1093687881)
elseif BC7==3 then
call UnitRemoveAbility(BB7,1093687882)
call UnitRemoveAbility(BB7,1093687881)
call XF7(BB7,1093687880)
elseif BC7==4 then
call UnitRemoveAbility(BB7,1093687882)
call UnitRemoveAbility(BB7,1093687881)
call UnitRemoveAbility(BB7,1093687880)
call XF7(BB7,1093687879)
endif
set BB7=null
endfunction
function W8E takes nothing returns boolean
if GetLearnedSkill()==1093677893 and IsUnitIllusion(GetTriggerUnit())==false then
call W7E(GetTriggerUnit(),false)
endif
return false
endfunction
function M68 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function W8E))
set t=null
endfunction
function W9E takes nothing returns nothing
local unit hn=GetTriggerUnit()
local unit V5E
local integer i=1
local boolean WDE=TV7(GetOwningPlayer(hn))
local player p
local integer WEE
local integer WFE
local integer WGE=GetUnitAbilityLevel(hn,1093687878)
if WGE==1 then
set WEE=1093742644
set WFE=1093742647
elseif WGE==2 then
set WEE=1093742641
set WFE=1093742646
elseif WGE==3 then
set WEE=1093742642
set WFE=1093742645
elseif WGE==4 then
set WEE=1093742643
set WFE=1093742648
endif
loop
exitwhen i>5
if WDE then
set p=Z7[i]
else
set p=A7[i]
endif
set V5E=CreateUnit(p,1697657174,0,0,0)
call XF7(V5E,WEE)
call XF7(V5E,WFE)
call UnitApplyTimedLife(V5E,1112820806,10)
set i=i+1
endloop
set hn=null
set V5E=null
set p=null
endfunction
function WHE takes nothing returns boolean
if GetSpellAbilityId()==1093687878 then
call W9E()
endif
return false
endfunction
function ML8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WHE))
set t=null
endfunction
function WIE takes nothing returns nothing
call YF8()
call YH8()
endfunction
function J69 takes nothing returns nothing
local string VH=GetEventPlayerChatString()
local player pl=K27(S2I(SubString(VH,3,StringLength(VH))))
if((pl!=null)and(TA7(pl))and(IsPlayerInForce(pl,QX4)))then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,Q[GetPlayerId(pl)]+GetPlayerName(pl)+"|r creepstats:   K: "+I2S(T7[GetPlayerId(pl)])+"   D: "+I2S(U7[GetPlayerId(pl)]))
endif
set pl=null
endfunction
function JL9 takes nothing returns nothing
local string VH=GetEventPlayerChatString()
local player pl=K27(S2I(SubString(VH,3,StringLength(VH))))
if((pl!=null)and(TA7(pl))and(IsPlayerInForce(pl,QX4)))then
if(M7[GetPlayerId(pl)]==null)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,Q[GetPlayerId(pl)]+GetPlayerName(pl)+"|r 没有英雄")
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,Q[GetPlayerId(pl)]+GetPlayerName(pl)+"|r 移动速度为 "+I2S(R2I(GetUnitMoveSpeed(M7[GetPlayerId(pl)]))))
endif
endif
set pl=null
endfunction
function WJE takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetTriggerPlayer()))and(not IsUnitIllusion(GetFilterUnit()))and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(not ME7(GetFilterUnit()))and(K57(GetFilterUnit())))!=null
endfunction
function WKE takes unit j5,unit m5 returns boolean
if((GetUnitAbilityLevel(j5,1093678665)!=0)and(Bz>hq[16+GetPlayerId(GetOwningPlayer(j5))]))then
set LD4=$C8+($C8*GetUnitAbilityLevel(j5,1093678665))
return((WA7(j5,m5,40/.03,0,LD4)!=null)and(WW7(j5,m5,GetLocationX(DH7),GetLocationY(DH7),150,Condition(function B47)))and(IssuePointOrderByIdLoc(j5,$D0278,DH7)))
endif
return false
endfunction
function WME takes unit j5,unit m5 returns boolean
if((GetUnitAbilityLevel(j5,1093684280)!=0)and(Bz>hq[32+GetPlayerId(GetOwningPlayer(j5))]))then
return((WA7(j5,m5,30/.035,0,3000.)!=null)and(WW7(j5,m5,GetLocationX(DH7),GetLocationY(DH7),155,Condition(function uj)))and(IssuePointOrderByIdLoc(j5,$D02B6,DH7)))
endif
return false
endfunction
function WNE takes unit it,unit m5,boolean WOE returns boolean
local integer i1=GetUnitTypeId(it)
local boolean J4=false
local integer O5=GetPlayerId(GetOwningPlayer(it))
if not(GetPlayerController(GetOwningPlayer(it))==MAP_CONTROL_COMPUTER)then
return false
endif
if G0[288+O5]then
set G0[288+O5]=false
set i1=eY[400+O5]
endif
if(i1==1211117653)then
set J4=(((GetUnitState(it,UNIT_STATE_MANA))>290)and(T57(it,1093686861)or(Bz>T34[O5]))and(UG7(it,A54,A24,A_4,1093686861)and IssuePointOrderById(it,$D00F7,GetUnitX(m5),GetUnitY(m5))))or(((GetUnitState(it,UNIT_STATE_MANA))>350)and(T57(it,1093686859)or(Bz>T34[O5]))and(Bz>T34[96+O5])and UG7(it,A24,A24,A54,1093686859)and IssuePointOrderById(it,$D020B,GetUnitX(m5),GetUnitY(m5)))
elseif(i1==1160786505)then
set J4=(IssueTargetOrderById(it,$D00D9,m5))
elseif(i1==1429221424)then
set J4=M57(it,$D024B,1093687351,m5)
elseif(i1==1432646245)then
set J4=((i2(m5))or(WOE))and(M57(it,$D007F,1093677640,m5))
elseif(i1==1430468913)then
set J4=(IsUnitInRange(it,m5,200.))and(N97(it,$D009F,1093810507))
elseif(i1==1430467634)then
set J4=((i2(m5))or(WOE))and(M57(it,$D0107,1093679412,m5))
elseif(i1==1313026096)then
set J4=M57(it,$D007F,1095267426,m5)
elseif(i1==1211117617)or(i1==1211122513)then
set J4=M57(it,$D02B6,1093744944,m5)
elseif(i1==1430466872)then
set J4=(M57(it,$D024B,1093687349,m5))or((not WOE)and(M57(it,$D0216,1093684558,m5)))
elseif(i1==1164666213)then
set J4=M57(it,$D02B6,1093678679,m5)
elseif(i1==1430466865)then
set J4=(IsUnitInRange(it,m5,375.))and(N97(it,$D009F,1093810508))
elseif(i1==1429221441)then
set J4=M57(it,$D0107,1093678389,m5)
elseif(i1==1332766568)then
set J4=(not WOE)and(i2(m5))and(IsUnitInRange(it,m5,500.))and(IssueImmediateOrderById(it,$D0278))
elseif(i1==1429221451)then
set J4=IssueTargetOrderById(it,$D00FA,m5)
elseif(i1==1429221446)then
set J4=((IsUnitInRange(it,m5,300.))and(M_7(it,$D0200,1093682764,1093747544,m5)))or(((i2(m5))or(WOE))and(WKE(it,m5)))
elseif(i1==1429221445)then
set J4=(GetUnitLifePercent(m5)<60.)and(M_7(it,$D007F,1093678647,1093679184,m5))
elseif(i1==1160786241)then
set J4=M57(it,$D00FA,1093684813,m5)
elseif(i1==1429221456)then
set J4=(i2(m5))and(M57(it,$D0097,1093685066,m5))
elseif(i1==1430468406)then
set J4=(not WOE)and(i2(m5))and(M57(it,$D0270,kS(it),m5))
elseif(i1==1311780946)then
set J4=M57(it,$D0208,1093685825,m5)
elseif(i1==1211117646)then
set J4=(i2(m5))and(M57(it,$D010E,1093685573,m5))
elseif(i1==1160785973)then
set J4=((i2(m5))or(WOE))and(M57(it,$D0107,1093678130,m5))
elseif(i1==1332963428)then
set J4=((not WOE)and(M57(it,$D0103,1093678169,m5)))or((GetUnitState(it,UNIT_STATE_MANA)>hq[272+GetPlayerId(GetOwningPlayer(it))])and(M57(it,$D0200,1093677649,m5)))
elseif(i1==1332109682)then
set J4=(IsUnitInRange(it,m5,500.))and(N97(it,$D026C,1093810505))
elseif(i1==1315988077)then
set J4=(IsUnitInRange(it,m5,200.))and(N97(it,$D0080,1093678669))
elseif(i1==1211117616)then
set J4=((IsUnitInRange(it,m5,250.))and(N97(it,$D009F,1093677139)))or((i2(m5))and(M57(it,$D0107,1093816142,m5)))
elseif(i1==1315074670)then
set J4=(not WOE)and(i2(m5))and(M57(it,$D0270,1093685570,m5))
elseif(i1==1215063922)then
set J4=(IsUnitInRange(it,m5,300.))and(M57(it,$D007F,1093681490,m5))
elseif(i1==1315007329)then
set J4=((i2(m5))or(WOE))and(M57(it,$D007F,1093677108,m5))
elseif(i1==1332898670)then
set J4=(M57(it,$D0216,1093685848,m5))or((IsUnitInRange(it,m5,400)or YO8(m5))and(M57(it,$D0200,1093677136,m5)))
elseif(i1==1215128178)then
set J4=(i2(m5))and(M57(it,$D00FA,'A2QB',m5))
elseif(i1==1215723364)then
set J4=M57(it,$D007F,1093677633,m5)
elseif(i1==1433105516)then
set J4=IssueTargetOrderById(it,$D02B6,m5)
elseif(i1==1212363833)then
set J4=(not WOE)and(((i2(m5))and(IssueImmediateOrderById(it,$D0278)))or(M57(it,$D007F,1093809220,m5)))
elseif(i1==1214931305)then
set J4=M57(it,$D00CB,1093678147,m5)
elseif(i1==1311787088)then
set J4=M57(it,$D0278,1093750087,m5)
elseif(i1==1212365106)then
set J4=(i2(m5))and(M57(it,$D0079,1093685831,m5))
elseif(i1==1211117620)then
set J4=M27(it,$D0108,1093677623,WC7(it,m5,.95,600.))
elseif(i1==1333027688)then
set J4=M57(it,$D0278,1093686091,m5)
elseif(i1==1332179560)then
set J4=((i2(m5))or(WOE))and(M57(it,$D02B6,1093742660,m5))
elseif(i1==1432580716 or i1==1429221720)then
set J4=M57(it,$D0079,1093684300,m5)
elseif(i1==1215130471)then
set J4=M57(it,$D007F,QI7(it),m5)or(OO7(GetHandleId(it),"AI|Magi2Blast")and M57(it,$D0278,1093815121,m5))
elseif(i1==1160786000)then
set J4=M27(it,$D0264,1093685046,WA7(it,m5,2000.,.65,1100.))
elseif(i1==1311781206)then
set J4=WME(it,m5)
elseif(i1==1311780930)then
set J4=(i2(m5))and((IsUnitInRange(it,m5,350.))and(IssueImmediateOrderById(it,$D0278)))
elseif(i1==1211119187)then
set J4=M57(it,$D0079,1093743414,m5)
elseif((i1==1311781193)or(i1==1311781192)or(i1==1311781204)or(i1==1311781194))then
set J4=(OT7(it,"AlcheBrew"))and(IssueTargetOrderById(it,$D0278,m5))
elseif(i1==1211117651)then
set J4=(M57(it,$D0097,1093743698,m5))
elseif(i1==1311786311)then
set J4=(not K57(m5))and(M57(it,$D0097,1093743178,m5))
elseif(i1==1328558390)then
set J4=(M57(it,$D0097,1093744975,m5))or(M57(it,$D00FA,1093744982,m5))
elseif(i1==1160786504)then
set J4=M57(it,$D0097,1093751608,m5)
elseif(i1==1160786520)then
set J4=M57(it,$D00F6,1093809990,m5)
elseif(i1==1160786507)then
set J4=(not WOE)and(IssueTargetOrderById(it,$D007F,m5))
endif
if(not J4)then
if(not J4)and(MR7(it,ZU[Q1]))then
set J4=(not WOE)and((i2(m5))or(ME7(it)))and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if(not J4)and(MR7(it,ZU[D74]))then
set J4=(not WOE)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if(not J4)and(MR7(it,ZU[U3]))then
set J4=(not WOE)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if(not J4)and((MR7(it,ZU[DR4])or MR7(it,ZU[R7t]))and(YM8(m5)==false)and(UC7(m5)==false))then
set J4=(not WOE)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if(not J4)and(MR7(it,ZU[DP4]))then
set J4=(not WOE)and(UnitUseItem(it,bj_lastCreatedItem))
endif
endif
if(i1==1160786520)and(not J4)and(hq[816+O5]>Bz)then
set G0[288+O5]=true
set J4=WNE(it,m5,WOE)
endif
return J4
endfunction
function WPE takes nothing returns boolean
return((GetFilterUnit()!=bj_lastLoadedUnit)and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))and(((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(M87(GetFilterUnit()))and(not ME7(GetFilterUnit())))or((GetWidgetLife(GetFilterUnit())>0)and(Q97(GetFilterUnit())))))!=null
endfunction
function WQE takes integer O5,unit m5,boolean WRE,boolean WSE returns nothing
local unit I_7=null
local integer O27=0
local boolean J4=false
if not(G0[$90+O5]or GZ[$D0+O5]or WRE)then
return
elseif h4[O5]==m5 and(Bz<hq[928+O5])then
return
endif
set h4[O5]=m5
set hq[928+O5]=Bz+1
call GroupClear(H8)
set bj_lastLoadedUnit=M7[O5]
if WSE then
call GroupEnumUnitsInRange(H8,GetUnitX(m5),GetUnitY(m5),$960,Condition(function WPE))
else
call GroupEnumUnitsInRange(H8,GetUnitX(m5),GetUnitY(m5),$4B0,Condition(function WPE))
endif
set J4=WNE(M7[O5],m5,false)
loop
set I_7=FirstOfGroup(H8)
exitwhen I_7==null
call GroupRemoveUnit(H8,I_7)
set O27=GetPlayerId(GetOwningPlayer(I_7))
if O27!=0 and O27!=6 and O27<$C and(h4[O27]==null or M87(h4[O27])==false)then
if(IsUnitType(I_7,UNIT_TYPE_HERO))then
if(not GZ[$A0+O5])then
set h4[O27]=m5
set hq[928+O27]=Bz+1
if is(I_7)then
call IssueTargetOrderById(I_7,$D000F,m5)
set J4=(J4 or(WNE(I_7,m5,false)))
endif
endif
elseif is(I_7)then
call IssueTargetOrderById(I_7,$D000F,m5)
endif
endif
endloop
endfunction
function WTE takes integer O5,boolean WUE returns boolean
local integer i=0
local integer j=0
set h4[O5]=null
set hq[928+O5]=0
set hq[480+O5]=0
if WUE and(G0[$90+O5])and(not ME7(M7[O5]))then
set i=1
set j=-1
set LD4=$F423F
loop
exitwhen i>$B
if IsPlayerAlly(Player(i),Player(O5))and h4[i]!=null and IsUnitInRange(M7[O5],h4[i],1100.)then
set LE4=GetWidgetLife(h4[i])
if j==-1 or LE4<LD4 then
set j=i
set LD4=LE4
endif
endif
endloop
if(j==-1)then
set bj_lastReplacedUnit=S07(800.,M7[O5])
if(bj_lastReplacedUnit!=null)then
set h4[O5]=bj_lastReplacedUnit
endif
else
set h4[O5]=h4[j]
endif
endif
if h4[O5]!=null then
call WQE(O5,h4[O5],false,false)
endif
return false
endfunction
function WVE takes nothing returns nothing
local unit it=GetEnumUnit()
local unit m5=M7[GetPlayerId(GetTriggerPlayer())]
local integer i1=GetUnitTypeId(it)
local integer O5=GetPlayerId(GetOwningPlayer(GetEnumUnit()))
local boolean J4
set GZ[64+O5]=true
if(i1==1430466609)then
set J4=(IsUnitInRange(it,m5,300.))and(N97(it,$D022E,1093678145))
elseif(i1==1430467634)then
set J4=(MP7(500.,m5,Condition(function k8))>0)and(N97(it,$D022E,1093750608))
elseif(i1==1211117653)then
set J4=(IsUnitInRange(it,m5,650.))and UG7(it,A24,A24,A_4,1093686865)and M57(it,$D020A,1093686865,m5)
elseif(i1==1160786505)then
set J4=(IsUnitInRange(it,m5,560.))and(IssueImmediateOrderById(it,$D0272))
elseif(i1==1164666213)then
set J4=(IsUnitInRange(it,m5,500.))and(MP7(500.,m5,Condition(function k8))>0)and(N97(it,$D0272,1093677877))
elseif((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))then
set J4=((GetUnitLifePercent(it)-30.)>GetUnitLifePercent(m5))and(M57(it,$D00DD,1093678929,m5))
elseif(i1==1433168227)then
set J4=M57(it,$D0101,1093679186,m5)
elseif(i1==1430466865)then
set J4=M57(it,$D0062,1093677879,m5)
elseif(i1==1429221432)then
set J4=(IsUnitInRange(it,m5,500.))and(N97(it,$D0278,1093687878))
elseif(i1==1432642913)then
set J4=(IssueTargetOrderById(it,$D0097,m5))or(IssueTargetOrderById(it,$D02B6,m5))
elseif(i1==1332766568)then
set J4=(IsUnitInRange(it,m5,400.))and(MP7(400.,m5,Condition(function k8))>0)and(IssueImmediateOrderById(it,$D0080))
elseif(i1==1429221445)then
set J4=(IsUnitInRange(it,m5,500.))and(N97(it,$D022E,1093678422))
elseif(i1==1211117617)or(i1==1211122513)then
set J4=(IsUnitInRange(it,m5,430.))and(N97(it,$D022E,1093814611))
elseif(i1==1311787088)then
set J4=(IsUnitInRange(it,m5,760.))and(M57(it,$D0084,1093748817,m5))
elseif(i1==1211117640)then
set J4=(IsUnitInRange(it,m5,400.))and(MP7(400.,m5,Condition(function k8))>0)and(IssuePointOrderById(it,$D0079,GetUnitX(m5),GetUnitY(m5)))
elseif(i1==1160786241)then
if((GetUnitManaPercent(it)>50.)and(IsUnitInRange(it,m5,300.)))then
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093684805,true)
set J4=(GetUnitAbilityLevel(it,1110455882)==0)and(IssueImmediateOrderById(it,$D00D1))
endif
elseif(i1==1160786243)then
set J4=IssueTargetOrderById(it,$D0118,m5)
elseif(i1==1311781207)then
set J4=((GetUnitLifePercent(it)<40.)and(IssueTargetOrderById(it,$D0238,m5)))or(IssueTargetOrderById(it,$D0105,m5))
elseif((i1==1211117650)or(i1==1211119433))then
set IN4=it
set J4=(MP7(1000.,it,Condition(function ny))>2)and(IssueTargetOrderById(it,$D02DB,m5))
elseif(i1==1211117646)then
set J4=(M57(it,$D0085,1093685815,m5))or((MP7(350.,m5,Condition(function k8))>0)and(IssueTargetOrderById(it,$D007F,m5)))
elseif(i1==1211117624)then
set J4=(IsUnitInRange(it,m5,500.))and(MP7(500.,m5,Condition(function k8))>0)and(N97(it,$D022E,1093683024))
elseif(i1==1433631084)then
set J4=(MP7(500.,m5,Condition(function k8))>0)and(M57(it,$D0079,1093678644,m5))
elseif(i1==1214345830)then
set J4=M57(it,$D0101,1093679182,m5)
elseif(i1==1215723364)then
set J4=(IsUnitInRange(it,m5,500.))and(MP7(500.,m5,Condition(function k8))>0)and(M57(it,$D02BD,1093744463,m5))
elseif(i1==1164799855)then
set J4=(IsUnitInRange(it,m5,500.))and(N97(it,$D024C,1093677378))
elseif(i1==1433105516)then
set J4=(MP7(500.,m5,Condition(function k8))>0)and(IssueTargetOrderById(it,$D0278,m5))
elseif((i1==1214409837)or(i1==1211119192)or(i1==1211119193)or(i1==1211119191))then
set J4=M57(it,$D00D9,1093742898,m5)
elseif(i1==1212363833)then
set J4=(IsUnitInRange(it,m5,500.))and(MP7(500.,m5,Condition(function k8))>0)and(N97(it,$D009B,1093678643))
elseif(i1==1212365106)then
set J4=(MP7(500.,m5,Condition(function k8))>0)and(M57(it,$D0079,1093685831,m5))
elseif(i1==1211117633)then
set J4=(GetUnitLifePercent(m5)<50.)and(IssueImmediateOrderById(it,$D0278))
elseif(i1==1211117620)then
set J4=(MP7(150.,m5,Condition(function k6))>0)and(M27(it,$D0108,1093677623,WC7(it,m5,.95,600.)))
elseif(i1==1432580716 or i1==1429221720)then
set J4=(MP7(400.,m5,Condition(function k8))>0)and(M57(it,$D0079,1093684300,m5))
elseif(i1==1214344551)then
set J4=((K6(m5))and(IssueTargetOrderById(it,$D0065,m5)))
if not J4 then
set J4=IssueTargetOrderById(it,$D0118,m5)
endif
elseif((i1==1311781193)or(i1==1311781192)or(i1==1311781204)or(i1==1311781194))then
set J4=(MP7(400.,m5,Condition(function k8))>0)and(M57(it,$D0079,1093683532,m5))
elseif(i1==1211117649)then
set J4=(GetUnitLifePercent(m5)<95.)and(IssueTargetOrderById(it,$D007F,m5))
endif
if(not J4)then
if(MR7(it,ZU[T1]))then
set J4=(IsUnitInRange(it,m5,300.))and(UnitUseItem(it,MV7(it,ZU[T1])))
elseif(MR7(it,ZU[F74]))then
set J4=(IsUnitInRange(it,m5,590.))and(UnitUseItem(it,MV7(it,ZU[F74])))
elseif(MR7(it,ZU[DD4]))then
set J4=(IsUnitInRange(it,m5,590.))and(UnitUseItem(it,MV7(it,ZU[DD4])))
elseif(MR7(it,ZU[B3]))then
set J4=(IsUnitInRange(it,m5,500.))and(UnitUseItem(it,MV7(it,ZU[B3])))
endif
endif
if((not J4)and(GetHeroLevel(it)>5))then
set m5=MN7(800.,M07(m5),Condition(function k6))
if(m5!=null)then
if(i1==1160786506)and(IsUnitInRange(it,m5,895.))then
if(YU7(it,m5))or(not IsUnitInRange(m5,it,800))then
call WC7(it,m5,1.2,900)
else
call MoveLocation(DH7,GetUnitX(m5),GetUnitY(m5))
endif
set J4=(J27(O5)and(J8(O5,IssuePointOrderByIdLoc(it,$D0079,DH7))))
endif
if(not J4)then
call IssueTargetOrderById(it,$D000F,m5)
endif
if(h4[O5]==null)then
call WQE(O5,m5,false,false)
endif
endif
endif
set GZ[64+GetPlayerId(GetOwningPlayer(it))]=false
set m5=null
set it=null
endfunction
function J19 takes nothing returns nothing
if((M7[GetPlayerId(GetTriggerPlayer())]!=null)and(M87(M7[GetPlayerId(GetTriggerPlayer())])))then
call ju(HS7(1100.,M07(M7[GetPlayerId(GetTriggerPlayer())]),Condition(function WJE)),function WVE)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,8.,"附近的AI队友会协助你")
set hq[464+GetPlayerId(GetTriggerPlayer())]=Bz+5.
endif
endfunction
function WWE takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and((GetOwningPlayer(GetFilterUnit())==Z7[0])or(GetOwningPlayer(GetFilterUnit())==A7[0]))and(GetWidgetLife(GetFilterUnit())>.405))!=null
endfunction
function WXE takes nothing returns nothing
if(GetWidgetLife(GetEnumUnit())>.405)then
call SetWidgetLife(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+8.)
else
call GroupRemoveUnit(ij,GetEnumUnit())
endif
endfunction
function WYE takes nothing returns nothing
call ForGroup(ij,function WXE)
call SetWidgetLife(JF4,GetUnitState(JF4,UNIT_STATE_LIFE)+12.)
call SetWidgetLife(J34,GetUnitState(J34,UNIT_STATE_LIFE)+12.)
endfunction
function OX9 takes nothing returns nothing
local trigger t=CreateTrigger()
local boolexpr Ig=Condition(function WWE)
set ij=WS7()
call GroupEnumUnitsInRect(ij,bj_mapInitialPlayableArea,Ig)
call TriggerRegisterTimerEventPeriodic(t,1.)
call TriggerAddAction(t,function WYE)
set ZT=true
call DestroyBoolExpr(Ig)
set Ig=null
endfunction
function OY9 takes nothing returns nothing
set AT=true
call EnableTrigger(QC4)
endfunction
function C0FD takes nothing returns nothing
set FI70=.5
set FJ70=.3
set FK70=.05
set FM70=10.
set FO70=5
set FP70=.3
set FQ70=.1
set FR70=100
set FV70=60
set FW70=60
set FN70=.05
set FT70=.25
set FU70=2
endfunction
function C0EO takes unit VE8,unit WD8 returns integer
local integer i=1
local integer WF8=0
call V78(VE8,WD8)
loop
exitwhen i>5
if JU[i]!=null then
set WF8=WF8+1
endif
set i=i+1
endloop
return WF8
endfunction
function WZE takes nothing returns boolean
return GetDyingUnit()==M7[GetPlayerId(GetTriggerPlayer())]
endfunction
function WAE takes nothing returns nothing
local integer O5=1
local integer i
local integer a
loop
exitwhen O5>11
if TZ7(Player(O5))then
set a=IU[O5]-Y74[64+O5]
if a>0 then
set i=1
loop
exitwhen i>a
set Y74[96+O5]=R2I(Bz+FW70)
if EU then
call SetPlayerHandicapXPBJ(Player(O5),Y74[16+O5]+(GetPlayerHandicapXPBJ(Player(O5))-Y74[16+O5])*(1-FK70))
endif
if FU then
set Y74[48+O5]=Y74[32+O5]+R2I((Y74[48+O5]-Y74[32+O5])*(1-FQ70))
endif
set i=i+1
endloop
set Y74[64+O5]=IU[O5]
endif
endif
set O5=O5+1
endloop
endfunction
function WBE takes nothing returns nothing
local unit VE8=GetDyingUnit()
local unit WD8=GetKillingUnit()
local player p=GetOwningPlayer(VE8)
local player pl=GetOwningPlayer(WD8)
if IsUnitInForce(GetDyingUnit(),QX4)and GetDyingUnit()!=GetKillingUnit()then
set Y74[96+GetPlayerId(p)]=R2I(Bz+FW70)
if EU then
if GetHeroLevel(VE8)==25 then
call SetPlayerHandicapXP(p,1.)
set Y74[48+GetPlayerId(p)]=Y74[48+GetPlayerId(p)]+FO70
elseif GetPlayerHandicapXP(p)*100<Y74[16+GetPlayerId(p)]then
call SetPlayerHandicapXP(p,Y74[16+GetPlayerId(p)]*.01)
else
call SetPlayerHandicapXP(p,GetPlayerHandicapXP(p)+FI70+C0EO(VE8,WD8)*FN70)
if GetPlayerHandicapXP(p)*100>(Y74[16+GetPlayerId(p)]+FM70*100)then
call SetPlayerHandicapXP(p,(Y74[16+GetPlayerId(p)])*.01+FM70)
endif
endif
endif
if FU then
if Y74[48+GetPlayerId(p)]<Y74[32+GetPlayerId(p)]then
set Y74[48+GetPlayerId(p)]=Y74[32+GetPlayerId(p)]
else
set Y74[48+GetPlayerId(p)]=Y74[48+GetPlayerId(p)]+FO70
if GetHeroLevel(VE8)<25 or(not EU)then
if Y74[48+GetPlayerId(p)]>FR70 then
set Y74[48+GetPlayerId(p)]=FR70
endif
else
if Y74[48+GetPlayerId(p)]>FS70 then
set Y74[48+GetPlayerId(p)]=FS70
endif
endif
endif
endif
endif
if GetKillingUnit()!=null and IsUnitInForce(GetKillingUnit(),QX4)and GetDyingUnit()!=GetKillingUnit()then
set Y74[96+GetPlayerId(pl)]=R2I(Bz+FW70)
if EU then
call SetPlayerHandicapXPBJ(pl,Y74[16+GetPlayerId(pl)]+(GetPlayerHandicapXPBJ(pl)-Y74[16+GetPlayerId(pl)])*(1-FJ70))
endif
if FU then
set Y74[48+GetPlayerId(pl)]=Y74[32+GetPlayerId(pl)]+R2I((Y74[48+GetPlayerId(pl)]-Y74[32+GetPlayerId(pl)])*(1-FP70))
endif
endif
call TimerStart(CS4,.5,false,function WAE)
set p=null
set pl=null
set VE8=null
set WD8=null
endfunction
function WCE takes nothing returns nothing
local integer O5=1
local player p
if Bz<FV70+FW70+QD4 then
return
endif
loop
exitwhen O5>11
if O5==6 then
set O5=7
endif
if IsPlayerInForce(Player(O5),QX4)then
if(Bz>Y74[96+O5])then
set p=Player(O5)
if EU then
if GetPlayerHandicapXP(p)*100<Y74[16+GetPlayerId(p)]then
call SetPlayerHandicapXP(p,Y74[16+GetPlayerId(p)]*.01)
else
call SetPlayerHandicapXP(p,GetPlayerHandicapXP(p)+FT70)
if GetPlayerHandicapXP(p)*100>(Y74[16+GetPlayerId(p)]+FM70*100)then
call SetPlayerHandicapXP(p,(Y74[16+GetPlayerId(p)])/100+FM70)
endif
endif
endif
if FU then
if Y74[48+GetPlayerId(p)]<Y74[32+GetPlayerId(p)]then
set Y74[48+GetPlayerId(p)]=Y74[32+GetPlayerId(p)]
else
set Y74[48+GetPlayerId(p)]=Y74[48+GetPlayerId(p)]+FU70
if Y74[48+GetPlayerId(p)]>FR70 then
set Y74[48+GetPlayerId(p)]=FR70
endif
endif
endif
set Y74[96+O5]=R2I(Bz+FW70)
endif
endif
set O5=O5+1
endloop
endfunction
function W3E takes nothing returns nothing
local integer i
local integer m
local integer n
local trigger t=null
set CR4=CreateTrigger()
call ky(CR4,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(CR4,Condition(function WZE))
call TriggerAddAction(CR4,function WBE)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1.,true)
call TriggerAddAction(t,function WCE)
set t=null
set CS4=CreateTimer()
endfunction
function OZ9 takes nothing returns nothing
if CR4==null then
call W3E()
endif
set EU=true
endfunction
function OA9 takes nothing returns nothing
if CR4==null then
call W3E()
endif
set FU=true
endfunction
function W6E takes integer WLE,integer W1E,integer W0E,integer W5E,integer W2E,integer W_E,integer X4E,integer X7E,integer X8E,integer X9E,integer XDE,integer XEE,integer XFE,integer XGE,integer XHE,integer XIE,integer XJE returns nothing
call SaveInteger(C_4,WLE,0,W1E)
call SaveInteger(C_4,WLE,1,W0E)
call SaveInteger(C_4,WLE,2,W5E)
call SaveInteger(C_4,WLE,3,W2E)
call SaveInteger(C_4,WLE,4,W_E)
call SaveInteger(C_4,WLE,5,X4E)
call SaveInteger(C_4,WLE,6,X7E)
call SaveInteger(C_4,WLE,7,X8E)
call SaveInteger(C_4,WLE,8,X9E)
call SaveInteger(C_4,WLE,9,XDE)
call SaveInteger(C_4,WLE,$A,XEE)
call SaveInteger(C_4,WLE,$B,XFE)
call SaveInteger(C_4,WLE,$C,XGE)
call SaveInteger(C_4,WLE,$D,XHE)
call SaveInteger(C_4,WLE,$E,XIE)
call SaveInteger(C_4,WLE,$F,XJE)
if(bj_forLoopBIndex<=2)then
set eY[336+16*bj_forLoopBIndex+bj_forLoopAIndex]=WLE
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endfunction
function XKE takes unit I_7,integer WLE,integer XME returns integer
set bj_forLoopBIndex=GetUnitAbilityLevel(I_7,WLE)
if bj_forLoopBIndex==0 then
return 0
endif
return LoadInteger(C_4,WLE,XME+bj_forLoopBIndex-1)
endfunction
function XNE takes integer XOE returns nothing
set bj_forLoopBIndex=0
if XOE==1215723364 then
call W6E(1093677633,$A,$A,$A,$A,110,120,$82,$8C,500,500,500,500,0,0,0,0)
call W6E(1093744463,$F,$F,$F,$F,40,40,40,40,$6A4,$6A4,$6A4,$6A4,0,0,0,0)
call W6E(1094934883,0,0,0,0,0,0,0,0,0,0,0,0,900,900,900,900)
call W6E(1093683534,45,45,45,$B,100,$96,$C8,110,600,900,$4B0,600,125,125,125,125)
call W6E(1093747031,$A,$A,$A,$B,100,$96,$C8,110,600,900,$4B0,600,125,125,125,125)
elseif XOE==1215128178 then
call W6E(1093677616,2,2,2,2,65,70,75,80,700,700,700,700,500,500,500,500)
call W6E('A2QB',6,6,6,6,75,95,115,$87,700,700,700,700,0,0,0,0)
call W6E(1093684789,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093810503,90,90,90,0,$E1,325,450,0,0,0,0,0,0,0,0,0)
call W6E(1093810504,90,90,90,0,$E1,325,450,0,0,0,0,0,0,0,0,0)
elseif XOE==1164799855 then
call W6E(1093682263,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093682264,30,25,20,$F,65,65,65,65,700,700,700,700,0,0,0,0)
call W6E(1093677378,45,45,45,45,125,$8C,$9B,$AA,0,0,0,0,300,300,300,300)
call W6E(1093682265,0,0,0,0,55,60,65,0,550,550,550,0,0,0,0,0)
call W6E(1093752642,0,0,0,0,55,60,65,0,715,715,715,0,0,0,0,0)
elseif XOE==1328558160 then
call W6E(1093682766,$B,$B,$B,$B,$8C,$9B,$A0,$A5,$3E8,$3E8,$3E8,$3E8,0,0,0,0)
call W6E(1093682998,$A,$A,$A,$A,100,100,100,100,600,700,800,900,0,0,0,0)
call W6E(1093684056,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093683000,80,80,80,0,25,25,25,0,700,$44C,$5DC,0,$C8,$C8,$C8,0)
elseif XOE==1214931305 then
call W6E(1093748025,12,11,10,9,100,120,$8C,$A0,700,700,700,700,400,400,400,400)
call W6E(1093678147,9,8,7,6,115,125,$8C,$96,500,500,500,500,0,0,0,0)
call W6E(1095262562,0,0,0,0,0,0,0,0,0,0,0,0,99999,99999,99999,99999)
call W6E(1093677906,90,90,90,0,$C8,400,600,0,500,500,500,500,0,0,0,0)
call W6E(1093681494,90,90,90,0,$C8,400,600,0,500,500,500,500,0,0,0,0)
elseif XOE==1211117617 then
call W6E(1093744944,$F,$F,$F,$F,$8C,$8C,$8C,$8C,600,600,600,600,$FF,$FF,$FF,$FF)
call W6E(1093677387,0,0,0,0,0,0,0,0,0,0,0,0,$C8,$C8,$C8,$C8)
call W6E(1093814611,36,30,24,18,25,25,25,25,0,0,0,0,0,0,0,0)
call W6E(1093752648,80,80,80,30,100,$96,$C8,25,0,0,0,0,0,0,0,0)
elseif XOE==1212363833 then
call W6E(1093678643,40,40,40,40,70,80,90,100,$80,$80,$80,$80,$3E8,$3E8,$3E8,$3E8)
call W6E(1093809220,$E,$E,$E,$E,75,85,95,115,650,650,650,650,0,0,0,0)
call W6E(1093815125,19,16,$D,$A,80,90,100,110,0,0,0,0,0,0,0,0)
call W6E(1093678933,$B4,120,60,0,100,100,100,0,500,500,500,500,0,0,0,0)
elseif XOE==1333027688 then
call W6E(1093686091,$F,$F,$F,$F,125,$8C,$9B,$AA,$4B0,$4B0,$4B0,$4B0,0,0,0,0)
call W6E(1093682252,5,5,5,5,50,50,50,50,0,0,0,0,0,0,0,0)
call W6E(1093682250,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093682248,$96,$82,110,9,$91,$CD,265,100,0,0,0,0,500,500,500,475)
call W6E(1093750594,$96,$82,110,9,$91,$CD,265,100,0,0,0,0,500,500,500,475)
elseif XOE==1212365106 then
call W6E(1093685831,$D,$D,$D,$D,75,80,85,90,425,425,425,425,$FA,275,300,325)
call W6E(1093684025,20,$F,$A,5,50,50,50,50,700,700,700,700,0,0,0,0)
call W6E(1093682266,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093677130,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
elseif XOE==1311781199 then
call W6E(1093681461,$B4,$A0,$8C,120,75,75,75,75,0,0,0,0,$C8,$C8,$C8,$C8)
call W6E(1093748038,30,30,30,30,50,50,50,50,0,0,0,0,400,450,475,500)
call W6E(1093681464,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093681479,0,0,0,0,25,25,25,0,0,0,0,0,0,0,0,0)
elseif XOE==1211117620 then
call W6E(1093677382,9,9,9,9,90,105,125,$8C,800,800,800,800,275,275,275,275)
call W6E(1093677623,7,7,7,7,90,100,110,125,600,600,600,600,$E1,$E1,$E1,$E1)
call W6E(1093744728,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093677392,70,60,50,9,280,420,680,120,600,600,600,700,0,0,0,500)
call W6E(1093679450,70,60,50,9,280,420,640,120,900,900,900,700,0,0,0,500)
elseif XOE==1315070563 then
call W6E(1093678407,42,34,26,18,120,110,100,90,0,0,0,0,$FA,$FA,$FA,$FA)
call W6E(1093678135,60,60,60,60,120,125,130,125,350,350,350,350,0,0,0,0)
call W6E(1093677131,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093684529,$82,120,110,9,$C8,275,350,75,350,350,350,600,0,0,0,0)
call W6E(1093747032,70,70,70,9,$C8,275,350,75,350,350,350,600,0,0,0,0)
elseif XOE==1311781185 then
call W6E(1093743692,20,18,16,$E,75,95,115,$87,800,800,800,800,350,350,350,350)
call W6E(1093684314,0,0,0,0,$F,$F,$F,$F,600,600,600,600,0,0,0,0)
call W6E(1093815892,36,28,20,$C,115,115,115,115,900,900,900,900,0,0,0,0)
call W6E(1093684275,130,115,100,0,150,250,350,0,500,500,500,500,0,0,0,0)
elseif XOE==1214344551 then
call W6E(1093677402,$A,8,6,4,90,80,70,60,300,300,300,300,0,0,0,0)
call W6E(1093809742,16,$E,$C,$A,$8C,$8C,$8C,$8C,350,350,350,350,0,0,0,0)
call W6E(1093815628,$F,$F,$F,$F,25,25,25,25,99999,99999,99999,99999,0,0,0,0)
call W6E(1093678938,70,70,70,0,$96,$AF,$C8,0,500,500,500,500,0,0,0,0)
elseif XOE==1433105516 then
call W6E(1093683511,$F,$F,$F,$F,110,$82,$96,$A0,600,600,600,600,0,0,0,0)
call W6E(1093744688,35,35,35,35,$AA,$AA,$AA,$AA,700,700,700,700,0,0,0,0)
call W6E(1093681713,25,25,25,25,95,110,125,$8C,700,700,700,700,400,400,400,400)
call W6E(1093747288,$C8,$BE,$B4,0,$FA,350,450,0,$FA,$FA,$FA,500,375,375,375,0)
elseif XOE==1214409837 then
call W6E(1093679157,$A,$A,$A,$A,$96,$96,$96,$96,$7D0,$7D0,$7D0,$7D0,0,0,0,0)
call W6E(1093742680,16,16,16,16,75,75,75,75,550,700,850,$3E8,0,0,0,0)
call W6E(1093742898,19,18,17,16,25,45,65,85,900,900,900,900,0,0,0,0)
call W6E(1093742932,80,70,60,120,100,100,100,$96,0,0,0,0,0,0,0,0)
elseif XOE==1215657064 then
call W6E(1093677913,6,6,6,6,75,75,75,75,0,0,0,0,385,385,385,385)
call W6E(1093750841,$A,$A,$A,$A,45,55,65,75,0,0,0,0,0,0,0,0)
call W6E(1093817669,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093684291,25,25,25,0,0,0,0,0,0,0,0,0,0,0,0,0)
elseif XOE==1215130471 then
call W6E(1093678167,$C,$C,$C,$C,75,85,95,105,600,600,600,600,0,0,0,0)
call W6E(1093677361,$F,$F,$F,$F,95,105,115,125,700,700,700,700,0,0,0,0)
call W6E(1093679155,20,20,20,20,75,75,75,75,600,600,600,600,0,0,0,0)
call W6E(1093679160,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093815121,20,$F,$F,0,400,$8C,$9B,0,600,$4B0,$4B0,500,0,0,0,0)
call W6E(1093679172,6,6,6,6,$B9,$C3,$CD,$D7,600,600,600,600,0,0,0,0)
call W6E(1093679169,8,8,8,8,$91,$9B,$A5,$AF,600,600,600,600,0,0,0,0)
call W6E(1093679161,$A,$A,$A,$A,105,115,125,$87,600,600,600,600,0,0,0,0)
call W6E(1093677126,$F,$F,$F,$F,95,105,115,125,700,700,700,700,450,450,450,450)
call W6E(1093677396,$F,$F,$F,$F,95,105,115,125,700,700,700,700,300,300,300,300)
call W6E(1093677111,$F,$F,$F,$F,95,105,115,125,700,700,700,700,$96,$96,$96,$96)
call W6E(1093679177,5,5,5,5,75,75,75,75,600,600,600,600,0,0,0,0)
call W6E(1093679175,$A,$A,$A,$A,75,75,75,75,600,600,600,600,0,0,0,0)
call W6E(1093679174,$F,$F,$F,$F,75,75,75,75,600,600,600,600,0,0,0,0)
elseif XOE==1316252014 then
call W6E(1093678137,$E,$E,$E,$E,95,120,$91,$AA,550,550,550,550,0,0,0,0)
call W6E(1093678405,25,25,25,25,120,$8C,$A0,$B4,0,0,0,0,$9C4,$9C4,$9C4,$9C4)
call W6E(1093681745,35,35,35,35,$91,$96,$A5,$BE,300,300,300,300,300,300,300,300)
call W6E(1093678645,0,0,0,0,$96,$FA,350,0,500,500,500,500,0,0,0,0)
elseif XOE==1164799603 then
call W6E(1093808453,$B,$A,9,8,100,120,$8C,$A0,600,600,600,600,110,110,110,110)
call W6E(1093677391,50,40,30,20,50,50,50,50,99999,99999,99999,99999,0,0,0,0)
call W6E(1095067246,37,37,37,37,$A0,$A0,$A0,$A0,750,750,750,750,$96,$E1,300,375)
call W6E(1093752632,90,80,70,0,$96,$C8,$FA,0,99999,99999,99999,500,0,0,0,0)
call W6E(1093752633,90,80,70,0,$96,$C8,$FA,0,99999,99999,99999,500,0,0,0,0)
elseif XOE==1332179560 then
call W6E(1093742660,7,7,7,7,125,$82,$87,$8C,750,750,750,750,0,0,0,0)
call W6E('A2W7',25,20,15,$A,50,50,50,50,0,0,0,0,0,0,0,0)
call W6E('A2W1',0,0,0,0,0,0,0,0,0,0,0,0,900,900,900,900)
call W6E(1093682242,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
elseif XOE==1432580716 or XOE==1429221720 then
call W6E(1093684300,17,17,17,17,120,120,120,120,600,600,600,600,275,275,275,275)
call W6E(1093681754,8,8,8,8,120,120,120,120,700,900,$44C,$514,300,300,300,300)
call W6E(1093744977,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093682009,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,900)
elseif XOE==1211117643 then
call W6E(1093678410,9,8,7,5,60,75,85,100,100,100,100,100,$C8,$C8,$C8,$C8)
call W6E(1093678664,20,16,$D,$A,80,110,$8C,$A0,$96,$96,$96,$96,0,0,0,0)
call W6E(1093678658,$B4,$AA,$A0,$96,100,125,$96,$AF,0,0,0,0,0,0,0,0)
call W6E(1093681483,$A,$A,$A,7,$C8,$F0,300,30,500,500,500,500,0,0,0,0)
call W6E(1093748313,$A,$A,$A,7,$C8,$F0,300,30,700,700,700,500,0,0,0,0)
elseif XOE==1211117633 then
call W6E(1093684045,$E,$E,$E,$E,100,100,100,100,600,600,600,600,0,0,0,0)
call W6E(1093684310,24,24,24,24,$AF,$AF,$AF,$AF,600,600,600,600,0,0,0,0)
call W6E(1093810260,30,26,22,18,100,100,100,100,900,900,900,900,0,0,0,0)
call W6E(1093684308,$8C,$82,120,0,$C8,300,400,0,500,500,500,500,0,0,0,0)
call W6E(1093747539,30,30,30,0,$C8,300,400,0,500,500,500,500,0,0,0,0)
call W6E(1093815619,24,24,24,24,$C8,$C8,$C8,$C8,600,600,600,600,0,0,0,0)
elseif XOE==1160785973 then
call W6E(1093678130,6,6,6,6,90,100,110,120,800,800,800,800,0,0,0,0)
call W6E(1093678129,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093678642,0,0,0,0,0,0,0,0,0,0,0,0,900,900,900,900)
call W6E(1093678388,$A0,$96,$8C,0,$96,$C8,$FA,0,500,500,500,500,0,0,0,0)
call W6E(1093677141,140,120,100,0,$96,$C8,$FA,0,500,500,500,500,0,0,0,0)
elseif XOE==1433631084 then
call W6E(1093678644,$F,$F,$F,$F,120,120,120,120,$708,$708,$708,$708,350,350,350,350)
call W6E(1093816897,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093677909,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093678160,20,$F,$A,9,$AF,275,375,75,$7D0,$9C4,$BB8,600,0,0,0,0)
elseif XOE==1311781174 then
call W6E(1093681733,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093808461,20,20,20,20,50,50,50,50,900,900,900,900,0,0,0,0)
call W6E(1093685040,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093748042,20,20,20,9,75,75,75,100,0,0,0,0,400,450,475,475)
call W6E(1093808462,$C,$C,$C,$C,50,50,50,50,700,700,700,700,0,0,0,0)
elseif XOE==1332898670 then
call W6E(1093677360,8,8,8,8,95,105,$87,$A0,600,600,600,600,$C8,$C8,$C8,$C8)
call W6E(1093685848,$D,$D,$D,$D,110,$8C,$AA,$C8,500,500,500,500,0,0,0,0)
call W6E(1093677136,16,16,16,16,110,$82,$9B,$B9,400,400,400,400,0,0,0,0)
call W6E(1093677128,110,110,110,7,$C8,350,600,30,550,550,550,500,0,0,0,0)
call W6E(1093681457,110,110,110,7,$C8,350,600,30,600,600,600,500,0,0,0,0)
elseif XOE==1211117624 then
call W6E(1093682775,2,2,2,2,30,30,30,30,600,600,600,600,0,0,0,0)
call W6E(1093683024,3,3,3,3,35,35,35,35,0,0,0,0,700,700,700,700)
call W6E(1093684531,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093682774,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
elseif XOE==1315988077 then
call W6E(1093678669,$C,$C,$C,$C,90,105,$82,$96,0,0,0,0,400,400,400,400)
call W6E(1097032808,8,8,8,8,50,50,50,50,850,850,850,850,$A,$A,$A,$A)
call W6E(1093684568,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093684561,$B4,$A0,$8C,$B4,125,$96,$AF,$96,0,0,0,0,$80,$80,$80,$80)
call W6E(1093747254,$A0,$8C,120,$B4,125,$96,$AF,$96,0,0,0,0,$80,$80,$80,$80)
elseif XOE==1211117616 then
call W6E(1093677139,$D,$D,$D,$D,85,100,115,$82,0,0,0,0,315,315,315,315)
call W6E(1093816142,5,5,5,5,0,0,0,0,$96,$96,$96,$96,0,0,0,0)
call W6E(1093677142,0,0,0,0,0,0,0,0,0,0,0,0,$3E8,$3E8,$3E8,$3E8)
call W6E(1093816118,120,90,60,0,80,80,80,0,0,0,0,0,0,0,0,0)
elseif XOE==1315007329 then
call W6E(1093677108,$A,$A,$A,$A,90,115,$87,$9B,650,650,650,650,0,0,0,0)
call W6E(1093749073,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093678913,$F,$F,$F,$F,50,50,50,50,0,0,0,0,0,0,0,0)
call W6E(1093681716,$A,7,5,0,70,60,50,0,900,$41A,$4B0,0,0,0,0,0)
elseif XOE==1215063922 then
call W6E(1093677894,$C,$C,$C,$C,100,110,120,$82,500,500,500,500,$96,$96,$96,$96)
call W6E(1093681490,9,9,9,9,100,100,100,75,$96,$96,$96,600,0,0,0,0)
call W6E(1093681996,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093677895,115,115,115,$B4,50,50,50,$96,0,0,0,0,0,0,0,0)
elseif XOE==1164207469 then
call W6E(1093677618,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1095066220,$C,9,7,5,60,60,60,60,99999,99999,99999,99999,0,0,0,0)
call W6E(1093684057,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093682483,70,70,70,9,125,$C8,275,75,600,600,600,600,0,0,0,0)
elseif XOE==1315074670 then
call W6E(1093677622,0,0,0,0,$C,$C,$C,$C,625,625,625,625,0,0,0,0)
call W6E(1093685570,$D,$D,$D,$D,90,90,90,90,900,900,900,900,300,300,300,300)
call W6E(1093677625,0,0,0,0,0,0,0,0,0,0,0,0,900,900,900,900)
call W6E(1093686851,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
elseif XOE==1214345830 then
call W6E(1093679182,$A,$A,$A,$A,100,120,$8C,$A0,700,700,700,700,0,0,0,0)
call W6E(1093679190,$E,$E,$E,$E,50,50,50,50,500,500,500,500,0,0,0,0)
call W6E(1093678657,0,0,0,0,0,0,0,0,0,0,0,0,300,300,300,300)
call W6E(1093682514,$96,$96,$96,25,125,$AF,$FA,50,0,0,0,0,600,600,600,650)
elseif XOE==1211117636 then
call W6E(1093685041,$D,$D,$D,$D,120,120,120,120,$514,$514,$514,$514,100,100,100,100)
call W6E(1093685071,40,40,40,40,25,25,25,25,0,0,0,0,$C8,$C8,$C8,$C8)
call W6E(1093681732,0,0,0,0,0,0,0,0,0,0,0,0,$3E8,$3E8,$3E8,$3E8)
call W6E(1093685042,80,75,70,9,$96,$AF,$C8,75,600,600,600,600,0,0,0,0)
call W6E(1093810233,45,45,45,9,$96,$AF,$C8,75,950,950,950,600,0,0,0,0)
elseif XOE==1160786000 then
call W6E(1093685047,$A,$A,$A,$A,$87,$8C,$9B,$AA,500,500,500,500,0,0,0,0)
call W6E(1093685046,$C,$B,$A,9,90,90,90,90,$44C,$44C,$44C,$44C,0,0,0,0)
call W6E(1093685048,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093685045,60,60,60,8,$DC,330,440,100,850,850,850,700,0,0,0,125)
call W6E(1093747249,60,60,60,8,$DC,330,440,100,$47E,$47E,$47E,700,0,0,0,125)
elseif XOE==1311781193 then
call W6E(1093683532,22,22,22,22,$82,$8C,$96,$A0,900,900,900,900,625,625,625,625)
call W6E(1093750345,16,16,16,16,120,120,120,120,0,0,0,0,0,0,0,0)
call W6E(1093685043,0,0,0,0,0,0,0,0,0,0,0,0,900,900,900,900)
call W6E(1095656306,45,45,45,30,50,100,$96,25,0,0,0,0,0,0,0,0)
elseif XOE==1311781206 then
call W6E(1093684054,$C,$C,$C,$C,100,120,$8C,$A0,500,500,500,500,0,0,0,0)
call W6E(1093684280,17,17,17,17,100,100,100,100,$BB8,$BB8,$BB8,$BB8,0,0,0,0)
call W6E(1093684302,30,26,22,18,40,35,30,20,0,0,0,0,0,0,0,0)
call W6E(1093684053,$A0,$8C,120,0,75,75,75,0,500,500,500,500,0,0,0,0)
elseif XOE==1211117651 then
call W6E(1093743696,4,4,4,4,70,80,90,100,0,0,0,0,400,450,475,500)
call W6E(1093743698,20,20,20,20,100,110,120,$82,300,300,300,300,500,500,500,500)
call W6E(1093685591,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093743695,0,0,0,0,0,0,0,0,99999,99999,99999,0,0,0,0,0)
elseif XOE==1211117649 then
call W6E(1093685584,22,18,14,10,$AA,$AA,$AA,$AA,400,400,400,400,0,0,0,0)
call W6E(1093685582,0,0,0,0,0,0,0,0,450,450,450,450,0,0,0,0)
call W6E(1093685585,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093685586,12,12,12,0,0,0,0,0,550,550,550,500,0,0,0,0)
call W6E(1093747251,4,4,4,0,0,0,0,0,550,550,550,500,0,0,0,0)
elseif XOE==1160786265 then
call W6E(1093748033,17,17,17,17,100,100,100,100,0,0,0,0,0,0,0,0)
call W6E(1093685846,7,7,7,7,50,50,50,50,0,0,0,0,0,0,0,0)
call W6E(1093685839,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093685840,$B,9,7,0,$F,$F,$F,0,$7D0,$7D0,$7D0,500,300,300,300,0)
elseif XOE==1311780930 then
call W6E(1093686073,$C,$C,$C,$C,$96,$96,$96,$96,$BB8,$BB8,$BB8,$BB8,0,0,0,0)
call W6E(1093686083,16,16,16,16,100,110,120,$82,500,500,500,500,0,0,0,0)
call W6E(1093686082,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093686072,85,85,85,6,100,$96,$C8,75,750,750,750,800,375,375,375,$C8)
call W6E(1093751120,85,85,85,6,100,$96,$C8,75,750,750,750,800,375,375,375,$C8)
elseif XOE==1211117652 then
call W6E(1093687860,32,28,24,20,75,75,75,75,500,500,500,500,0,0,0,0)
call W6E(1093687861,$F,$F,$F,$F,50,60,70,80,500,500,500,500,0,0,0,0)
call W6E(1093687862,20,18,16,$E,50,50,50,50,99999,99999,99999,99999,575,575,575,575)
call W6E(1093687864,70,55,40,0,$96,$96,$96,0,$7D0,$9C4,$BB8,500,0,0,0,0)
call W6E(1093747542,$2A,$1B,$C,0,$96,$96,$96,0,$7D0,$9C4,$BB8,500,0,0,0,0)
elseif XOE==1211119187 then
call W6E(1093743414,$C,$C,$C,$C,120,120,120,120,$5DC,$5DC,$5DC,$5DC,$D7,$D7,$D7,$D7)
call W6E(1093743444,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093742926,16,16,16,16,80,90,100,110,500,650,800,950,0,0,0,0)
call W6E(1093742923,60,50,40,0,$96,$C8,$FA,0,$3E8,$3E8,$3E8,0,0,0,0,0)
elseif XOE==1311786311 then
call W6E(1093743178,$C,$C,$C,$C,90,100,110,120,800,800,800,800,500,500,500,500)
call W6E(1093743179,9,9,9,9,90,100,110,120,$6A4,$6A4,$6A4,$6A4,0,0,0,0)
call W6E(1093743689,$F,$F,$F,$F,100,100,100,100,0,0,0,0,400,450,475,500)
call W6E(1093743184,60,60,60,0,$C8,300,400,0,600,600,600,500,0,0,0,0)
call W6E(1093747766,$F,$F,$F,0,$C8,300,400,0,600,600,600,500,0,0,0,0)
elseif XOE==1164277353 then
call W6E(1093815130,22,18,$E,$A,50,50,50,50,$FA,$FA,$FA,$FA,0,0,0,0)
call W6E(1093683252,16,16,16,16,80,80,80,80,0,0,0,0,0,0,0,0)
call W6E(1093751369,$8C,$8C,$8C,$8C,40,40,40,40,0,0,0,0,0,0,0,0)
call W6E(1093678929,$A0,110,60,0,$C8,100,0,0,$FA,$FA,$FA,0,0,0,0,0)
elseif XOE==1164666213 then
call W6E(1093678679,9,9,9,9,100,125,$8C,$A0,750,750,750,750,$96,$AF,$C8,$E1)
call W6E(1093677877,22,22,22,22,95,120,$87,$9B,0,0,0,0,0,0,0,0)
call W6E(1093678678,6,6,6,6,100,115,$82,$91,700,700,700,700,650,650,650,650)
call W6E(1093808454,1,1,1,0,110,110,110,0,0,0,0,0,0,0,0,0)
call W6E(1093808455,1,1,1,0,110,110,110,0,0,0,0,0,0,0,0,0)
elseif XOE==1433168227 then
call W6E(1093678918,9,9,9,8,125,$96,$AA,$BE,600,600,600,600,$C8,$C8,$C8,$C8)
call W6E(1093679186,5,5,5,5,50,50,50,50,800,800,800,800,0,0,0,0)
call W6E(1093678387,35,30,25,20,25,25,25,25,400,400,400,400,0,0,0,0)
call W6E(1093678420,$91,115,65,6,$C8,325,500,50,750,750,750,800,0,0,0,0)
call W6E(1093679176,$91,115,65,6,$C8,325,500,50,850,850,850,800,0,0,0,0)
elseif XOE==1430468406 then
call W6E(1093677645,8,8,8,8,105,120,$8C,$A5,600,600,600,600,110,110,110,110)
call W6E(1093685302,$F,$F,$F,$F,80,80,80,80,900,900,900,900,$C8,275,350,350)
call W6E(1093677635,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093678899,100,100,100,$B4,$C8,300,400,$96,0,0,0,0,700,700,700,800)
call W6E(1093678904,4,4,4,4,80,95,115,$8C,600,600,600,600,110,110,110,110)
call W6E(1093678900,5,5,5,5,85,100,120,$91,600,600,600,600,110,110,110,110)
call W6E(1093678898,6,6,6,6,90,105,125,$96,600,600,600,600,110,110,110,110)
call W6E(1093678670,7,7,7,7,95,110,$82,$9B,600,600,600,600,110,110,110,110)
call W6E(1093678925,$B,$B,$B,$B,55,55,55,55,900,900,900,900,$C8,275,350,350)
call W6E(1093678922,$C,$C,$C,$C,60,60,60,60,900,900,900,900,$C8,275,350,350)
call W6E(1093678921,$D,$D,$D,$D,65,65,65,65,900,900,900,900,$C8,275,350,350)
call W6E(1093678920,$E,$E,$E,$E,70,70,70,70,900,900,900,900,$C8,275,350,350)
call W6E(1093678158,100,100,100,$B4,$C8,300,400,$96,0,0,0,0,700,700,700,800)
call W6E(1093678157,100,100,100,$B4,$C8,300,400,$96,0,0,0,0,700,700,700,800)
call W6E(1093678154,100,100,100,$B4,$C8,300,400,$96,0,0,0,0,700,700,700,800)
call W6E(1093677898,100,100,100,$B4,$C8,300,400,$96,0,0,0,0,700,700,700,800)
elseif XOE==1430466872 then
call W6E(1093687349,$C,$C,$C,$C,100,120,$91,$AA,500,500,500,500,0,0,0,0)
call W6E(1093684558,$F,$F,$F,$F,125,$96,$AF,$C8,500,500,500,500,0,0,0,0)
call W6E(1093677646,25,20,$F,$A,$A,$A,$A,$A,600,650,700,750,800,800,800,800)
call W6E(1093679413,$A0,100,40,9,$C8,420,650,120,900,900,900,0,500,500,500,500)
call W6E(1093679447,$A0,100,40,9,$C8,420,625,120,900,900,900,0,500,500,500,500)
elseif XOE==1162032439 then
call W6E(1093744435,22,22,22,22,125,125,125,125,800,800,800,800,0,0,0,0)
call W6E(1093684569,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093684563,5,5,5,5,20,20,20,20,850,850,850,850,0,0,0,0)
call W6E(1093677363,$8C,120,100,40,$C8,300,400,125,0,0,0,0,$C8,$C8,$C8,$C8)
call W6E(1093681462,$8C,120,60,40,$C8,300,400,125,0,0,0,0,$C8,$C8,$C8,$C8)
elseif XOE==1430466865 then
call W6E(1093677651,$A,9,8,7,90,90,90,90,500,500,500,500,$96,$96,$96,$96)
call W6E(1093677879,$C,$C,$C,$A,40,40,40,40,800,800,800,800,0,0,0,0)
call W6E(1093751364,30,30,30,30,80,80,80,80,600,800,$3E8,$4B0,100,100,100,100)
call W6E(1093810508,120,110,100,0,$C8,$FA,300,0,0,0,0,0,0,0,0,0)
elseif XOE==1430468144 then
call W6E(1093679192,$A,$A,$A,$A,100,115,130,145,600,600,600,600,0,0,0,0)
call W6E(1093750337,12,12,12,12,140,150,160,170,$3E8,$3E8,$3E8,$3E8,0,0,0,0)
call W6E(1093686872,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093750341,$B4,$A0,$8C,9,$96,$96,$96,100,0,0,0,0,0,0,0,475)
call W6E(1093814599,$B4,$A0,$8C,9,$96,$96,$96,100,0,0,0,0,0,0,0,475)
elseif XOE==1429221441 then
call W6E(1093678389,$A,$A,$A,$A,$8C,$8C,$8C,$8C,500,500,500,500,0,0,0,0)
call W6E(1093685847,24,18,$C,6,70,70,70,70,550,600,650,700,0,0,0,0)
call W6E(1093677902,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093677903,$8C,$8C,$8C,3,125,$C8,275,$96,$80,$80,$80,$80,$3E8,$3E8,$3E8,$3E8)
elseif XOE==1429221432 then
call W6E(1093677892,30,30,30,30,125,125,125,125,800,800,800,800,$C8,$C8,$C8,$C8)
call W6E(1093687878,50,45,40,35,$F,20,25,30,500,500,500,500,0,0,0,0)
call W6E(1093677893,0,0,0,0,0,0,0,0,0,0,0,0,900,900,900,900)
call W6E(1093679411,100,70,40,$B4,100,100,100,$96,0,0,0,0,0,0,0,0)
elseif XOE==1429221430 then
call W6E(1093681736,$A,$A,$A,$A,120,120,120,120,700,700,700,700,0,0,0,0)
call W6E(1093681735,30,30,30,30,50,50,50,50,600,600,600,600,650,650,650,650)
call W6E(1093681739,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093687121,45,45,45,0,100,100,100,0,500,500,500,500,0,0,0,0)
elseif XOE==1165451634 then
call W6E(1093687629,6,6,6,6,30,25,20,$F,$4B0,$4B0,$4B0,$4B0,0,0,0,0)
call W6E(1093685324,$E,$B,8,5,50,50,50,50,$3E8,$3E8,$3E8,$3E8,0,0,0,0)
call W6E(1093677904,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093677905,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
elseif XOE==1211117654 then
call W6E(1093747504,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093682994,$B,$B,$B,$B,$8C,$96,$A0,$AA,800,800,800,800,500,500,500,500)
call W6E(1093684560,0,0,0,0,0,0,0,0,$80,$80,$80,$80,0,0,0,0)
call W6E(1093747028,$8C,100,60,0,$C8,100,0,0,500,500,500,500,0,0,0,0)
elseif XOE==1432646245 then
call W6E(1093677640,8,8,8,8,80,90,100,110,525,525,525,525,0,0,0,0)
call W6E(1093679173,0,0,0,0,0,0,0,0,500,500,500,500,0,0,0,0)
call W6E(1093679158,0,0,0,0,0,0,0,0,500,500,500,500,0,0,0,0)
call W6E(1093677899,$B4,$96,120,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093747248,$B4,$96,120,0,0,0,0,0,0,0,0,0,0,0,0,0)
elseif XOE==1313026096 then
call W6E(1095267426,8,8,8,8,$8C,$8C,$8C,$8C,525,525,525,525,0,0,0,0)
call W6E(1096114550,0,0,0,0,0,0,0,0,0,0,0,0,350,350,350,350)
call W6E(1095721842,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093677401,260,$A0,60,$F0,$8C,$C8,260,0,0,0,0,0,0,0,0,0)
elseif XOE==1430467634 then
call W6E(1093742674,70,60,50,40,60,50,40,30,300,300,300,300,0,0,0,0)
call W6E(1093750608,60,55,50,45,60,65,70,75,0,0,0,0,0,0,0,0)
call W6E(1093679412,8,8,8,8,110,110,110,110,600,600,600,600,0,0,0,0)
call W6E(1093684565,110,110,110,120,$96,$C8,$FA,125,550,550,550,400,0,0,0,0)
call W6E(1093681458,110,110,110,120,$96,$C8,$FA,125,550,550,550,400,0,0,0,0)
elseif XOE==1429221424 then
call W6E(1093687351,$B,$B,$B,$B,95,115,$87,$9B,500,500,500,500,0,0,0,0)
call W6E(1093748789,28,20,$C,4,100,100,100,100,600,600,600,600,0,0,0,0)
call W6E(1093815119,22,18,14,$A,40,40,40,40,0,0,0,0,0,0,0,0)
call W6E(1093679445,70,60,50,5,$A0,$D2,260,75,0,0,0,0,0,0,0,0)
elseif XOE==1430468913 then
call W6E(1093678403,17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093810507,8,8,8,8,80,95,105,115,0,0,0,0,0,0,0,0)
call W6E(1093683786,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093677876,5,5,5,0,25,25,25,0,700,700,700,0,0,0,0,0)
elseif XOE==1430466609 then
call W6E(1093685559,20,16,$C,8,80,100,120,$8C,400,400,400,400,0,0,0,0)
call W6E(1093684549,$C,$A,8,6,60,60,60,60,99999,99999,99999,99999,0,0,0,0)
call W6E(1093678145,7,7,7,7,110,120,$82,$8C,0,0,0,0,500,500,500,500)
call W6E(1093810258,$87,$87,$87,8,$FA,360,500,100,700,700,700,700,100,100,100,125)
call W6E(1093810259,100,70,40,8,$FA,360,500,100,700,700,700,700,100,100,100,125)
elseif XOE==1160785972 then
call W6E(1093677872,40,35,30,25,90,90,90,90,0,0,0,0,0,0,0,0)
call W6E(1095263841,0,0,0,0,8,8,8,8,600,600,600,600,0,0,0,0)
call W6E(1093677621,20,19,18,17,75,75,75,75,0,0,0,0,0,0,0,0)
call W6E(1093678161,45,35,25,0,100,100,100,0,400,400,400,0,0,0,0,0)
elseif XOE==1162032181 then
call W6E(1093684299,19,17,$F,$D,120,120,120,120,700,900,$44C,$514,0,0,0,0)
call W6E(1093682010,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093679153,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093683761,120,110,100,6,$96,$AF,$C8,70,600,600,600,800,400,400,400,$C8)
call W6E(1093747767,60,60,60,6,$96,$AF,$C8,70,600,600,600,800,400,400,400,$C8)
elseif XOE==1162032951 then
call W6E(1093679446,0,0,0,0,20,20,20,20,600,600,600,600,0,0,0,0)
call W6E(1093746995,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093684557,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093679152,80,50,30,8,125,$AF,$FA,65,500,500,500,0,0,0,0,0)
call W6E(1093752154,$C,$C,$C,0,125,125,125,0,900,900,900,0,0,0,0,0)
elseif XOE==1160785970 then
call W6E(1093748023,$E,$E,$E,$E,125,125,125,125,0,0,0,0,0,0,0,0)
call W6E(1093747792,25,25,25,25,20,30,40,50,600,600,600,600,0,0,0,0)
call W6E(1093748022,0,0,0,0,0,0,0,0,0,0,0,0,900,900,900,900)
call W6E(1093747023,80,80,80,0,200,300,400,0,600,600,600,500,0,0,0,0)
call W6E(1093752150,80,80,80,0,200,300,400,0,600,600,600,500,0,0,0,0)
elseif XOE==1429221443 then
call W6E(1093686322,$F,$F,$F,$F,75,75,75,75,0,0,0,0,0,0,0,0)
call W6E(1093686099,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093744948,24,20,16,$C,100,100,100,100,700,700,700,700,500,500,500,500)
call W6E(1093686103,100,100,100,0,50,50,50,0,$96,$96,$96,500,0,0,0,0)
elseif XOE==1211117640 then
call W6E(1093684564,6,6,6,6,85,105,125,$91,400,400,400,400,400,400,400,400)
call W6E('A2WJ',$F,$C,9,6,60,60,60,60,700,700,700,700,0,0,0,0)
call W6E(1093679428,35,35,35,35,80,80,80,80,0,0,0,0,100,100,100,100)
call W6E(1093681987,22,22,22,8,125,$AF,$E1,75,850,850,850,500,850,850,850,800)
call W6E(1093677658,0,0,0,8,125,$AF,$E1,75,900,900,900,500,900,900,900,800)
elseif XOE==1332109682 then
call W6E(1093678134,$C,$C,$C,$C,120,120,120,120,700,700,700,700,0,0,0,0)
call W6E(1093678149,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093808694,7,6,5,4,30,40,50,60,0,0,0,0,0,0,0,0)
call W6E(1093810505,$96,140,130,$C,$96,$E1,325,75,0,0,0,0,0,0,0,500)
elseif XOE==1332963428 then
call W6E(1093816137,$C,$C,$C,$C,95,105,115,125,$3E8,$3E8,$3E8,$3E8,0,0,0,0)
call W6E(1093683019,$E,$E,$E,$E,125,$96,$AF,$C8,600,600,600,600,500,500,500,500)
call W6E(1093678169,$F,$F,$F,$F,$A5,$A5,$A5,$A5,500,550,600,650,0,0,0,0)
call W6E(1093677649,100,100,100,0,$C8,300,400,0,625,625,625,0,0,0,0,0)
call W6E(1093747769,100,100,100,0,$C8,300,400,0,625,625,625,0,0,0,0,0)
elseif XOE==1429221445 then
call W6E(1093678422,8,7,6,5,125,$91,$A5,$B9,0,0,0,0,400,450,475,500)
call W6E(1093677390,0,0,0,0,0,0,0,0,0,0,0,0,$3E8,$3E8,$3E8,$3E8)
call W6E(1093678640,0,0,0,0,0,0,0,0,0,0,0,0,900,900,900,900)
call W6E(1093678647,100,85,70,9,180,340,500,75,600,600,600,600,0,0,0,0)
call W6E(1093679184,85,70,55,9,180,340,500,75,600,600,600,600,0,0,0,0)
elseif XOE==1429221446 then
call W6E(1093678665,$E,$D,$C,$B,110,120,$82,$8C,1000,1100,1200,1200,0,0,0,0)
call W6E(1093678667,0,0,0,0,0,0,0,0,0,0,0,0,$FA,$FA,$FA,$FA)
call W6E(1093678660,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093682764,30,30,30,0,100,$82,$AA,0,$A0,$A0,$A0,0,0,0,0,0)
call W6E(1093747544,30,30,30,0,100,$82,$AA,0,$A0,$A0,$A0,0,0,0,0,0)
elseif XOE==1328558154 then
call W6E(1093750840,35,35,35,35,100,100,100,100,99999,99999,99999,99999,0,0,0,0)
call W6E(1093682515,0,0,0,0,0,0,0,0,0,0,0,0,900,900,900,900)
call W6E(1093682997,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093682996,75,75,75,0,125,$96,$AF,0,400,550,700,500,0,0,0,0)
call W6E(1093747768,20,20,20,0,125,$96,$AF,0,550,700,850,500,0,0,0,0)
elseif XOE==1432510828 then
call W6E(1093751127,36,33,30,27,100,100,100,100,$BB8,$BB8,$BB8,$BB8,0,0,0,0)
call W6E(1093681985,$C,$A,8,6,60,60,60,60,0,0,0,0,0,0,0,0)
call W6E(1093681991,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093682004,60,50,40,0,$96,75,0,0,0,0,0,500,0,0,0,0)
elseif XOE==1315334514 then
call W6E(1093682521,$A,$A,$A,$A,75,75,75,75,0,0,0,0,0,0,0,0)
call W6E(1093681746,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093682773,0,0,0,0,0,0,0,0,0,0,0,0,900,900,900,900)
call W6E(1093810506,120,110,100,0,$96,$AF,$C8,0,0,0,0,0,0,0,0,0)
call W6E(1093682736,$A,$A,$A,$A,75,75,75,75,0,0,0,0,0,0,0,0)
call W6E(1093682760,$A,$A,$A,$A,75,75,75,75,0,0,0,0,0,0,0,0)
elseif XOE==1429221451 then
call W6E(1093678671,$B,$B,$B,$B,110,120,$82,$8C,700,700,700,700,0,0,0,0)
call W6E(1093683248,40,30,20,$A,60,50,40,30,500,500,500,500,0,0,0,0)
call W6E(1093682753,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093678674,$8C,120,100,0,$AF,$FA,325,0,500,500,500,500,0,0,0,0)
call W6E(1093747252,120,100,80,0,$AF,$FA,325,0,500,500,500,500,0,0,0,0)
elseif XOE==1332766568 then
call W6E(1093683510,$A,$A,$A,$A,80,90,100,110,500,500,500,500,0,0,0,0)
call W6E(1093686065,20,$F,$A,5,75,85,95,105,900,900,900,900,0,0,0,0)
call W6E(1093681974,0,0,0,0,0,0,0,0,0,0,0,0,900,900,900,900)
call W6E(1093682482,75,65,55,9,120,$A0,$C8,120,$96,$96,$96,700,$96,$96,$96,500)
call W6E(1093750098,45,35,25,9,120,$A0,$C8,120,$96,$96,$96,700,$96,$96,$96,500)
elseif XOE==1215722344 then
call W6E(1093682499,$C,$A,8,6,80,80,80,80,800,800,800,800,0,0,0,0)
call W6E(1093684293,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093683512,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093684296,70,60,50,0,$96,$C8,$FA,0,$3E8,$3E8,$3E8,500,0,0,0,0)
elseif XOE==1432642913 then
call W6E(1093683507,6,6,6,6,75,75,75,75,800,800,800,800,0,0,0,0)
call W6E(1093684550,$E,$C,$A,8,100,105,110,115,500,500,500,500,1,1,1,1)
call W6E(1093684551,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093684819,60,60,60,5,0,0,0,75,0,0,0,0,0,0,0,0)
call W6E(1093747777,60,60,60,5,0,0,0,75,0,0,0,0,0,0,0,0)
elseif XOE==1160786242 then
call W6E(1093683287,16,16,16,16,$82,$8C,$96,$A0,$7D0,$7D0,$7D0,$7D0,0,0,0,0)
call W6E(1093682776,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093684801,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093683257,120,120,120,0,$96,$96,$96,0,0,0,0,500,0,0,0,0)
elseif XOE==1160786241 then
call W6E(1093684813,20,18,16,$E,110,120,$82,$8C,700,700,700,700,500,500,500,500)
call W6E(1093684805,0,0,0,0,$F,40,65,90,0,0,0,0,340,340,340,340)
call W6E(1093684815,35,35,35,35,120,120,120,120,400,400,400,400,$96,$96,$96,$96)
call W6E(1093684820,80,80,80,0,$C8,$C8,$C8,$96,300,350,400,700,0,0,0,0)
call W6E(1093684824,80,80,80,0,$C8,$C8,$C8,$96,300,350,400,700,0,0,0,0)
elseif XOE==1429221456 then
call W6E(1093685065,0,0,0,0,100,100,100,100,450,450,450,450,0,0,0,0)
call W6E(1093685066,18,16,$E,$C,120,$8C,$A0,$B4,550,550,550,550,500,500,500,500)
call W6E(1093683526,0,0,0,0,0,0,0,0,0,0,0,0,$3E8,$3E8,$3E8,$3E8)
call W6E(1093685067,$A0,$A0,$A0,0,$AF,$FA,325,0,600,650,700,0,375,475,575,0)
call W6E(1093752407,130,130,130,0,$AF,$FA,325,0,700,750,800,0,375,475,575,0)
elseif XOE==1160786243 then
call W6E(1093683765,25,25,25,25,120,120,120,120,800,800,800,800,0,0,0,0)
call W6E(1093681491,16,16,16,16,90,110,$82,$96,500,500,500,500,0,0,0,0)
call W6E(1093678672,50,50,50,50,100,110,120,$82,700,700,700,700,650,650,650,650)
call W6E(1395667000,$A5,$A5,$A5,30,$C8,$FA,300,100,$4B0,$4B0,$4B0,900,600,600,600,$FA)
call W6E(1395667029,$A5,$A5,$A5,30,$C8,$FA,300,100,$4B0,$4B0,$4B0,900,600,600,600,$FA)
elseif XOE==1211117641 then
call W6E(1093684802,20,16,$C,8,50,50,50,50,500,750,$3E8,$4E2,$DC,$DC,$DC,$DC)
call W6E(1093684792,$C,$A,8,6,80,80,80,80,99999,99999,99999,99999,0,0,0,0)
call W6E(1093684791,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093684567,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093809987,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
elseif XOE==1311781207 then
call W6E(1093684817,$F,$D,$B,7,100,115,$82,$91,600,600,600,600,0,0,0,0)
call W6E(1093742668,60,45,30,$F,$8C,$82,120,110,550,700,850,$3E8,0,0,0,0)
call W6E(1093685074,$C,$A,8,6,80,90,100,110,900,900,900,900,0,0,0,0)
call W6E(1093742673,40,40,40,0,100,100,100,0,$7D0,$7D0,$7D0,0,575,575,575,0)
call W6E(1093747778,40,40,40,0,100,100,100,0,$7D0,$7D0,$7D0,0,775,775,775,0)
elseif XOE==1311780946 then
call W6E(1093677385,12,12,12,12,100,110,120,$82,775,775,775,775,450,450,450,450)
call W6E(1093685825,21,18,15,12,100,115,$82,$91,750,750,750,750,275,275,275,275)
call W6E(1095328612,0,0,0,0,0,0,0,0,900,900,900,900,0,0,0,0)
call W6E(1093685808,$82,$82,$82,0,75,$96,$E1,0,99999,99999,99999,500,0,0,0,0)
elseif XOE==1211117650 then
call W6E(1093743955,$A,8,6,4,70,90,110,$82,625,625,625,625,300,300,300,300)
call W6E(1093685813,25,20,$F,$A,50,75,100,125,650,650,650,650,0,0,0,0)
call W6E(1093743958,60,60,60,60,120,$82,$8C,$96,600,600,600,600,0,0,0,0)
call W6E(1093743946,75,75,75,$B4,100,100,100,$96,0,0,0,0,0,0,0,0)
elseif XOE==1211117646 then
call W6E(1093685573,22,22,22,22,100,$82,$A0,$BE,500,500,500,500,$FA,350,450,550)
call W6E(1093685575,$A,$A,$A,$A,70,90,110,$82,600,600,600,600,0,0,0,0)
call W6E(1093685815,$C,$B,$A,9,20,30,40,50,600,600,600,600,0,0,0,0)
call W6E(1093685579,100,100,100,0,$C8,300,400,0,500,900,$514,500,300,300,300,0)
call W6E(1093808465,100,100,100,0,$C8,300,400,0,500,900,$514,500,300,300,300,0)
elseif XOE==1211117653 then
call W6E(1093808471,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093808472,0,0,0,9,0,0,0,100,0,0,0,0,0,0,0,475)
call W6E(1093808470,0,0,0,25,0,0,0,50,0,0,0,0,0,0,0,650)
call W6E(1093808473,22,18,$E,10,50,75,100,125,0,0,0,0,0,0,0,0)
call W6E(1093748565,18,$E,10,6,25,45,65,85,0,0,0,0,0,0,0,0)
elseif XOE==1311787088 then
call W6E(1093750087,$F,$D,$B,9,$96,$96,$96,$96,700,700,700,700,0,0,0,0)
call W6E(1093748819,6,6,6,6,80,90,100,110,$5DC,$5DC,$5DC,$5DC,$FA,$FA,$FA,$FA)
call W6E(1093748817,50,46,42,38,110,120,$82,$8C,800,800,800,800,525,525,525,525)
call W6E(1093750089,40,40,40,0,200,300,400,0,99999,99999,99999,500,0,0,0,0)
elseif XOE==1328558389 then
call W6E(1093747009,14,13,12,11,100,100,100,100,500,500,500,500,0,0,0,0)
call W6E(1093747000,16,16,16,16,80,90,100,110,$4B0,$4B0,$4B0,$4B0,0,0,0,0)
call W6E(1093747524,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093746993,100,100,100,0,$AF,$AF,$AF,0,$640,$640,$640,500,0,0,0,0)
elseif XOE==1211119409 then
call W6E(1093749069,$A,9,8,7,55,50,45,40,0,0,0,0,0,0,0,0)
call W6E(1093749303,20,16,$C,8,75,75,75,75,500,500,500,500,0,0,0,0)
call W6E(1093748818,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093749070,25,25,25,5,120,120,120,75,0,0,0,0,0,0,0,0)
elseif XOE==1328558390 then
call W6E(1093748044,3,3,3,3,20,20,20,20,700,700,700,700,375,375,375,375)
call W6E(1093744982,$B,$B,$B,$B,80,100,120,$8C,$5DC,$5DC,$5DC,$5DC,375,375,375,375)
call W6E(1093744986,40,40,40,40,100,100,100,100,0,0,0,0,-1,-1,-1,-1)
call W6E(1093744975,90,70,50,9,$64,$64,$64,120,$AF,$AF,$AF,700,500,500,500,500)
elseif XOE==1160786505 then
call W6E(1093753167,18,16,$E,$C,120,120,120,120,$5DC,$5DC,$5DC,$5DC,0,0,0,0)
call W6E(1093751607,24,24,24,24,75,75,75,75,$4E2,$4E2,$4E2,$4E2,0,0,0,0)
call W6E(1093753170,50,50,50,50,75,75,75,75,0,0,0,0,100,100,100,100)
call W6E(1093753169,30,24,18,9,50,75,100,100,0,0,0,0,0,0,0,475)
elseif XOE==1160786510 then
call W6E(1093751631,7,7,6,6,90,90,90,90,500,500,500,500,0,0,0,0)
call W6E(1093751633,20,17,$E,$B,120,$82,$8C,$96,$41A,$41A,$41A,$41A,500,500,500,500)
call W6E(1093808697,20,20,20,20,50,50,50,50,0,0,0,0,0,0,0,0)
call W6E(1093751861,55,50,45,6,125,125,125,75,$3E8,$3E8,$3E8,800,450,450,450,$C8)
call W6E(1093808949,55,50,45,6,125,125,125,75,99999,99999,99999,800,450,450,450,$C8)
elseif XOE==1160786506 then
call W6E(1093751894,16,16,16,16,$82,$82,$82,$82,800,800,800,800,0,0,0,0)
call W6E(1093751639,60,50,40,30,$A0,$82,100,70,600,$3E8,$578,$708,500,500,500,500)
call W6E(1093751637,$D,$C,$B,$A,70,70,70,70,900,900,900,900,300,300,300,300)
call W6E(1093752118,85,85,85,0,125,$AF,$E1,0,800,800,800,500,375,375,375,0)
elseif XOE==1328558406 then
call W6E(1093751873,$C,$C,$C,$C,40,40,40,40,$708,$708,$708,$708,1,1,1,1)
call W6E(1093751864,20,18,16,$E,120,$82,$8C,$96,0,0,0,0,0,0,0,0)
call W6E(1093810257,2,2,2,2,0,0,0,0,$80,$80,$80,$80,0,0,0,0)
call W6E(1093751874,90,75,60,0,100,100,100,0,99999,99999,99999,500,0,0,0,0)
elseif XOE==1160786504 then
call W6E(1093751608,25,22,19,16,120,120,120,120,600,600,600,600,500,500,500,500)
call W6E(1093751618,$D,$D,$D,$D,50,60,70,80,600,600,600,600,500,500,500,500)
call W6E(1093751604,3,3,3,3,50,50,50,50,$5DC,$5DC,$5DC,$5DC,0,0,0,0)
call W6E(1093751617,50,50,50,0,$C8,$C8,$C8,0,800,800,800,0,0,0,0,0)
elseif XOE==1160786502 then
call W6E(1093751370,36,36,36,36,0,0,0,0,99999,99999,99999,99999,0,0,0,0)
call W6E(1093753176,45,40,35,30,80,80,100,110,$578,$578,$578,$578,0,0,0,0)
call W6E(1093753177,20,20,20,20,100,100,100,100,$514,$514,$514,$514,0,0,0,0)
call W6E(1093751371,110,110,110,0,$C8,$C8,$C8,0,700,700,700,500,0,0,0,0)
elseif XOE==1160786520 then
call W6E(1093809990,18,18,18,18,120,120,120,120,550,575,600,625,0,0,0,0)
call W6E(1093809991,16,$E,$C,$A,$96,$96,$96,$96,800,800,800,800,0,0,0,0)
call W6E(1093810006,0,0,0,0,0,0,0,0,0,0,0,0,900,900,900,900)
call W6E(1093809992,20,18,16,0,25,25,25,0,$3E8,$3E8,$3E8,500,0,0,0,0)
elseif XOE==1311788336 then
call W6E(1093814323,$E,$C,$A,8,110,110,110,110,0,0,0,0,0,0,0,0)
call W6E(1093814320,30,22,$E,6,50,50,50,50,700,700,700,700,$FA,350,450,550)
call W6E(1093814355,35,35,35,35,80,90,100,110,$4B0,$4B0,$4B0,$4B0,0,0,0,0)
call W6E(1093814859,0,0,0,0,0,0,0,0,$5DC,$5DC,$5DC,500,0,0,0,0)
elseif XOE==1160786507 then
call W6E(1093814850,15,15,15,15,100,100,100,100,$3E8,$3E8,$3E8,$3E8,315,315,315,315)
call W6E(1093814834,16,$F,$E,$D,110,110,110,110,800,800,800,800,0,0,0,0)
call W6E(1093813593,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093813065,50,50,50,0,75,75,75,0,100,100,100,500,0,0,0,0)
elseif XOE==1211122767 then
call W6E(1093812805,5,4,3,2,70,70,70,70,800,800,800,800,500,500,500,500)
call W6E(1093814612,20,18,16,$E,110,110,110,110,0,0,0,0,0,0,0,0)
call W6E(1093814350,$B,$B,$B,$B,80,90,100,110,700,700,700,700,0,0,0,0)
call W6E(1093812807,60,40,20,0,350,575,800,0,$4B0,$4B0,$4B0,500,$AA,$AA,$AA,0)
elseif XOE==1160786738 then
call W6E(1093813835,6,6,6,6,70,70,70,70,0,0,0,0,0,0,0,0)
call W6E(1093813555,4,4,4,4,60,70,80,90,800,$3E8,$4B0,$578,0,0,0,0)
call W6E(1093813556,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call W6E(1093813557,8,8,8,0,125,$96,$AF,0,$4B0,$4B0,$4B0,500,$C8,$C8,$C8,0)
elseif XOE==1311788343 then
call W6E(1093815877,60,50,40,30,120,110,100,90,0,0,0,0,0,0,0,0)
call W6E(1093815361,8,8,8,8,120,$82,$8C,$96,$4B0,$4B0,$4B0,$4B0,0,0,0,0)
call W6E(1093815362,17,16,$F,$E,75,75,75,75,$3E8,$3E8,$3E8,$3E8,0,0,0,0)
call W6E(1093687856,90,80,70,0,$FA,$FA,$FA,0,800,800,800,0,0,0,0,0)
elseif XOE==1311788363 then
call W6E(1093815601,20,20,20,20,75,75,75,75,600,700,800,900,0,0,0,0)
call W6E(1093815372,4,4,4,4,50,50,50,50,$7D0,$7D0,$7D0,$7D0,0,0,0,0)
call W6E(1093815373,50,50,50,50,75,75,75,75,900,900,900,900,350,350,350,350)
call W6E(1093815600,65,60,55,0,0,0,0,0,0,0,0,0,0,0,0,0)
endif
endfunction
function XPE takes integer O5,integer o6,integer n6,integer XQE,integer XRE,integer XSE,integer XTE,integer XUE returns nothing
set eY[$80+O5]=o6
set eY[$90+O5]=n6
set eY[$A0+O5]=XQE
set eY[$AC+O5]=XRE
set eY[$BC+O5]=XSE
set hG[$90+O5]=XTE
set hG[$A0+O5]=XUE
endfunction
function XVE takes unit it returns boolean
local integer i1=GetUnitTypeId(it)
return((i1==1211117636)or(i1==1333027688)or(i1==1311787088)or(i1==1211117653)or(i1==1315988077)or(i1==1211117617)or(i1==1432580716)or(i1==1214344551)or(i1==1215063922)or(i1==1429221451)or(i1==1328558154)or(i1==1332109682)or(i1==1332766568)or(i1==1429221441)or(i1==1429221443)or(i1==1432642913)or(i1==1313026096)or(i1==1430468913)or(i1==1160785970)or(i1==1215657064)or(i1==1429221430)or(i1==1429221424)or(i1==1162032439)or(i1==1162032951)or(i1==1311780930)or(i1==1211117620)or(i1==1430468144)or(i1==1215130471)or(i1==1160786000)or(i1==1211117646)or(i1==1430468406)or(i1==1430466872)or(i1==1433105516)or(i1==1433168227)or(i1==1429221445)or(i1==1160786243))
endfunction
function XWE takes integer O5,unit it,integer i1 returns nothing
if(i1==1211117654)then
call XPE(O5,1093684560,1093682994,1093747504,1093747028,0,$C,$D)
elseif(i1==1429221443)then
call XPE(O5,1093686322,1093686099,1093744948,1093686103,0,101,101)
elseif(i1==1162032951)then
call XPE(O5,1093684557,1093679446,1093746995,1093679152,1093752154,7,3)
elseif(i1==1162032181)then
call XPE(O5,1093684299,1093682010,1093679153,1093683761,1093747767,9,9)
elseif(i1==1429221424)then
call XPE(O5,1093687351,1093748789,1093815119,1093679445,0,21,17)
elseif(i1==1160785972)then
call XPE(O5,1095263841,1093677872,1093677621,1093678161,0,9,$B)
elseif(i1==1432646245)then
call XPE(O5,1093679158,1093677640,1093679173,1093677899,1093747248,1,$B)
elseif(i1==1430466609)then
call XPE(O5,1093678145,1093685559,1093684549,1093810258,1093810259,$D,20)
elseif(i1==1430468913)then
call XPE(O5,1093678403,1093810507,1093683786,1093677876,0,8,1)
elseif(i1==1430467634)then
call XPE(O5,1093742674,1093679412,1093750608,1093684565,1093681458,$F,16)
elseif(i1==1313026096)then
call XPE(O5,1095267426,1096114550,1095721842,1093677401,0,$B,6)
elseif((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))then
call XPE(O5,1093815130,1093683252,1093751369,1093678929,0,$A,$D)
elseif(i1==1164666213)then
call XPE(O5,1093678678,1093678679,1093677877,1093808454,1093808455,102,23)
elseif(i1==1433168227)then
call XPE(O5,1093678918,1093678387,1093679186,1093678420,1093679176,25,25)
elseif(i1==1429221430)then
call XPE(O5,1093681736,1093681735,1093681739,1093687121,0,$E,16)
elseif(i1==1430466872)then
call XPE(O5,1093687349,1093684558,1093677646,1093679413,1093679447,23,17)
elseif(i1==1162032439)then
call XPE(O5,1093744435,1093684569,1093684563,1093677363,1093681462,8,8)
elseif(i1==1430466865)then
call XPE(O5,1093677651,1093677879,1093751364,1093810508,0,8,$B)
elseif(i1==1430468144)then
call XPE(O5,1093679192,1093750337,1093686872,1093750341,1093814599,107,107)
elseif(i1==1429221432)then
call XPE(O5,1093677893,1093677892,1093687878,1093679411,0,1,6)
elseif(i1==1429221441)then
call XPE(O5,1093678389,1093685847,1093677902,1093677903,0,$A,1)
elseif(i1==1165451634)then
call XPE(O5,1093687629,1093685324,1093677904,1093677905,0,3,$B)
elseif(i1==1432642913)then
call XPE(O5,1093683507,1093684550,1093684551,1093684819,1093747777,4,4)
elseif(i1==1215722344)then
call XPE(O5,1093684293,1093683512,1093682499,1093684296,0,1,$B)
elseif(i1==1432510828)then
call XPE(O5,1093751127,1093681985,1093681991,1093682004,0,6,6)
elseif(i1==1332766568)then
call XPE(O5,1093681974,1093686065,1093683510,1093682482,1093750098,104,4)
elseif(i1==1429221451)then
call XPE(O5,1093678671,1093683248,1093682753,1093678674,1093747252,8,$B)
elseif(i1==1315334514)then
call XPE(O5,1093681746,1093682521,1093682773,1093810506,0,7,8)
elseif(i1==1328558154)then
call XPE(O5,1093750840,1093682515,1093682997,1093682996,1093747768,1,1)
elseif(i1==1429221446)then
call XPE(O5,1093678665,1093678667,1093678660,1093682764,1093747544,103,4)
elseif(i1==1429221445)then
call XPE(O5,1093678422,1093678640,1093677390,1093678647,1093679184,21,25)
elseif(i1==1332963428)then
call XPE(O5,1093683019,1093678169,1093816137,1093677649,1093747769,18,17)
elseif(i1==1332109682)then
call XPE(O5,1093678134,1093678149,1093808694,1093810505,0,$B,$F)
elseif(i1==1211117640)then
call XPE(O5,1093684564,'A2WJ',1093679428,1093681987,1093677658,21,21)
elseif(i1==1430468406)then
call XPE(O5,0,1093677635,0,0,0,25,25)
elseif(i1==1160786242)then
call XPE(O5,1093683287,1093682776,1093684801,1093683257,0,$A,6)
elseif(i1==1160786241)then
call XPE(O5,1093684813,1093684815,1093684805,1093684820,1093684824,105,23)
elseif(i1==1429221456)then
call XPE(O5,1093683526,1093685065,1093685066,1093685067,1093752407,23,22)
elseif(i1==1160786243)then
if(NG7(not IsPlayerAlly(Player(O5),Z7[0]))>2)then
call XPE(O5,1093681491,1093678672,1093683765,1395667000,1395667029,17,20)
else
call XPE(O5,1093681491,1093683765,1093678672,1395667000,1395667029,17,20)
endif
elseif(i1==1211117641)then
call XPE(O5,1093684791,1093684792,1093684802,1093684567,1093809987,106,106)
elseif(i1==1311781207)then
call XPE(O5,1093685074,1093742668,1093684817,1093742673,1093747778,17,18)
elseif(i1==1311780946)then
call XPE(O5,1093677385,1093685825,1095328612,1093685808,0,$F,16)
elseif(i1==1211117650)then
call XPE(O5,1093743955,1093685813,1093743958,1093743946,0,5,5)
elseif(i1==1211117646)then
call XPE(O5,1093685575,1093685573,1093685815,1093685579,1093808465,5,5)
elseif(i1==1211117624)then
call XPE(O5,1093682775,1093683024,1093684531,1093682774,0,4,4)
elseif(i1==1160785973)then
call XPE(O5,1093678642,1093678129,1093678130,1093678388,1093677141,$9A,$9A)
elseif(i1==1315988077)then
call XPE(O5,1093678669,1093684568,1097032808,1093684561,1093747254,6,$A)
elseif(i1==1211117616)then
call XPE(O5,1093677139,1093816142,1093677142,1093816118,0,6,$A)
elseif(i1==1315074670)then
call XPE(O5,1093677622,1093685570,1093677625,1093686851,0,9,7)
elseif(i1==1215063922)then
call XPE(O5,1093677894,1093812553,1093681996,1093677895,0,$F,6)
elseif(i1==1164207469)then
call XPE(O5,1093677618,1095066220,1093684057,1093682483,0,9,3)
elseif(i1==1433631084)then
call XPE(O5,1093816897,1093677909,1093678644,1093678160,0,3,$D)
elseif(i1==1214345830)then
call XPE(O5,1093679182,1093679190,1093678657,1093682514,0,18,5)
elseif((i1==1311781174)or(i1==1311781175)or(i1==1311911984)or(i1==1311911985)or(i1==1311781442))then
call XPE(O5,1093681733,1093808460,1093685040,1093748042,0,$C,9)
elseif(i1==1315007329)then
call XPE(O5,1093677108,1093749073,1093678913,1093681716,0,1,3)
elseif(i1==1332898670)then
call XPE(O5,1093677136,1093677360,1093685848,1093677128,1093681457,17,23)
elseif(i1==1215723364)then
call XPE(O5,1093677633,1093744463,1094934883,1093683534,1093747031,$E,4)
elseif(i1==1215128178)then
call XPE(O5,'A2QB',1093677616,1093684789,1093810503,1093810504,16,20)
elseif(i1==1164799855)then
call XPE(O5,1093682263,1093682264,1093677378,1093682265,1093752642,26,22)
elseif(i1==1433105516)then
call XPE(O5,1093683511,1093744688,1093681713,1093747288,0,18,25)
elseif(i1==1214409837)then
call XPE(O5,1093679157,1093742898,1093742680,1093742932,0,19,19)
elseif(i1==1316252014)then
call XPE(O5,1093678405,1093678137,1093681745,1093678645,0,$9D,19)
elseif(i1==1164799603)then
call XPE(O5,1093808453,1095067246,1093677391,1093752632,1093752633,18,19)
elseif(i1==1328558160)then
call XPE(O5,1093682766,1093682998,1093684056,1093683000,0,1,$C)
elseif(i1==1212363833)then
call XPE(O5,1093678643,1093809220,1093815125,1093678933,0,$A,9)
elseif(i1==1315070563)then
call XPE(O5,1093678407,1093677131,1093678135,1093684529,1093747032,1,$B)
elseif(i1==1214931305)then
call XPE(O5,1093748025,1093678147,1095262562,1093677906,1093681494,8,17)
elseif(i1==1212365106)then
call XPE(O5,1093682266,1093684025,1093685831,1093677130,0,1,$A)
elseif((i1==1211117617)or(i1==1211122513))then
call XPE(O5,1093744944,1093677387,1093814611,1093752648,0,$B,4)
elseif(i1==1211117633)then
call XPE(O5,1093810260,1093684045,1093684310,1093684308,1093747539,$99,$99)
elseif(i1==1211117620)then
call XPE(O5,1093677382,1093677623,1093744728,1093677392,1093679450,16,23)
elseif(i1==1432580716 or i1==1429221720)then
call XPE(O5,1093684300,1093681754,1093744977,1093682009,0,$F,16)
elseif(i1==1333027688)then
call XPE(O5,1093686091,1093682252,1093682250,1093682248,1093750594,$F,16)
if IsPlayerAlly(Player(O5),Z7[0])then
set DK7=true
else
set DM7=true
endif
elseif(i1==1311781185)then
call XPE(O5,1093743692,1093684314,1093815892,1093684275,0,26,22)
elseif(i1==1311788343)then
call XPE(O5,1093815877,1093815361,1093815362,1093687856,0,25,22)
elseif(i1==1311788363)then
call XPE(O5,1093815601,1093815372,1093815373,1093815600,0,25,22)
elseif(i1==1211117643)then
call XPE(O5,1093678410,1093678658,1093678664,1093681483,1093748313,$97,$97)
elseif(i1==1215657064)then
call XPE(O5,1093817669,1093750841,1093677913,1093684291,0,$9C,$9C)
elseif(i1==1332179560)then
call XPE(O5,1093742660,'A2W7','A2W1',1093682242,0,$A,9)
elseif(i1==1214344551)then
call XPE(O5,1093677402,1093809742,1093815628,1093678938,0,$98,20)
elseif((i1==1311781199)or(i1==1311781171)or(i1==1311781172)or(i1==1311781173))then
call XPE(O5,1093681461,1093681464,0,1093681479,0,3,$B)
elseif(i1==1215130471)then
call XPE(O5,0,0,0,1093679160,0,16,23)
elseif(i1==1211117636)then
call XPE(O5,1093685041,1093685071,1093681732,1093685042,1093810233,$9B,16)
elseif(i1==1160786000)then
call XPE(O5,1093685047,1093685046,1093685048,1093685045,1093747249,19,25)
elseif(i1==1311781193)then
call XPE(O5,1093683532,1093750345,1093685043,1095656306,0,6,$B)
elseif(i1==1311781206)then
call XPE(O5,1093684054,1093684280,1093684302,1093684053,0,$E,$C)
elseif(i1==1211117649)then
call XPE(O5,1093685584,1093685582,1093685585,1093685586,1093747251,$B,$B)
elseif(i1==1160786265)then
call XPE(O5,1093748033,1093685846,1093685839,1093685840,0,9,$A)
elseif(i1==1311780930)then
call XPE(O5,1093686073,1093686083,1093686082,1093686072,1093751120,$D,18)
elseif(i1==1311787088)then
call XPE(O5,1093750087,1093748819,1093748817,1093750089,0,1,1)
elseif(i1==1211119409 or i1=='H0EV')then
call XPE(O5,1093749069,1093749303,1093748818,1093749070,0,1,1)
elseif(i1==1160785970)then
call XPE(O5,1093748023,1093747792,1093748022,1093747023,1093752150,1,1)
elseif(i1==1160786506)then
call XPE(O5,1093751894,1093751639,1093751637,1093752118,0,1,1)
elseif(i1==1160786505)then
call XPE(O5,1093753167,1093751607,1093753170,1093753169,0,1,1)
elseif(i1==1160786502)then
call XPE(O5,1093751370,1093753176,1093753177,1093751371,0,1,1)
elseif(i1==1160786520)then
call XPE(O5,1093809990,1093809991,1093810006,1093809992,0,1,1)
if TZ7(Player(O5))then
set DJ7=true
endif
elseif(i1==1211117652)then
call XPE(O5,1093687860,1093687861,1093687862,1093687864,1093747542,1,1)
elseif(i1==1211117653)then
call XPE(O5,1093808471,1093808472,1093808470,1093808473,1093748565,1,1)
elseif(i1==1311786311)then
call XPE(O5,1093743178,1093743179,1093743689,1093743184,1093747766,1,1)
elseif(i1==1160786510)then
call XPE(O5,1093751631,1093751633,1093808697,1093751861,1093808949,1,1)
elseif(i1==1328558406)then
call XPE(O5,1093751873,1093751864,1093810257,1093751874,0,1,1)
elseif(i1==1211117651)then
call XPE(O5,1093743696,1093743698,1093685591,1093743695,0,1,1)
elseif(i1==1328558390)then
call XPE(O5,1093748044,1093744982,1093744986,1093744975,0,1,1)
elseif(i1==1160786504)then
call XPE(O5,1093751608,1093751618,1093751604,1093751617,0,1,1)
elseif(i1==1311788336)then
call XPE(O5,1093814323,1093814320,1093814355,1093814859,0,1,1)
elseif(i1==1160786507)then
call XPE(O5,1093814850,1093814834,1093813593,1093813065,0,1,1)
elseif(i1==1211122767)then
call XPE(O5,1093812805,1093814612,1093814350,1093812807,0,1,1)
elseif(i1==1160786738)then
call XPE(O5,1093813835,1093813555,1093813556,1093813557,0,1,1)
else
call XPE(O5,HM4[GetUnitPointValue(it)],HN4[GetUnitPointValue(it)],HO4[GetUnitPointValue(it)],HP4[GetUnitPointValue(it)],HQ4[GetUnitPointValue(it)],1,1)
endif
set bj_forLoopAIndex=O5
call XNE(i1)
endfunction
function XXE takes nothing returns nothing
call GQ9(GetTriggerUnit())
if(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)then
if(GetUnitTypeId(GetTriggerUnit())!=1211117642)then
call ExecuteFunc("UD")
else
call ExecuteFunc("xh")
endif
elseif(GetUnitTypeId(GetTriggerUnit())!=1211117642)then
if not(((QA4!=null)and(IsTriggerEnabled(QA4)))and(((GetOwningPlayer(GetTriggerUnit())==QT4)and(QV4!=null))or((GetOwningPlayer(GetTriggerUnit())==QU4)and(QW4!=null))))then
set bj_lastLoadedUnit=GetTriggerUnit()
call XWE(GetPlayerId(GetOwningPlayer(bj_lastLoadedUnit)),bj_lastLoadedUnit,GetUnitTypeId(bj_lastLoadedUnit))
call ExecuteFunc("XYE")
endif
endif
endfunction
function XZE takes integer O5,integer JS7 returns nothing
local integer XAE=0
local real x
local real y
local integer XBE=KL4
local integer XCE=K54
local integer kg=0
local player pl=Player(O5)
local integer i=0
if(TA7(pl)and(GetPlayerController(pl)==MAP_CONTROL_COMPUTER)and(M7[GetPlayerId(pl)]==null))then
if(((TV7(pl))and(not P4))or((P4)and(GetRandomInt(1,2)==1)))then
set XBE=KL4
set XCE=K14
else
set XBE=K04
set XCE=K54
endif
if(TV7(pl))then
set x=GetRandomReal(GetRectMinX(ED),GetRectMaxX(ED))
set y=GetRandomReal(GetRectMinY(ED),GetRectMaxY(ED))
else
set x=GetRandomReal(GetRectMinX(L9),GetRectMaxX(L9))
set y=GetRandomReal(GetRectMinY(L9),GetRectMaxY(L9))
endif
set eY[GetPlayerId(pl)]=0
loop
set XAE=GetRandomInt(XBE,XCE)
if((not J[XAE])and(JR7(K34[XAE],JS7)or i>20))then
if TZ4 then
if GetPlayerId(pl)==1 then
set XAE=89
endif
endif
set M7[GetPlayerId(pl)]=CreateUnit(pl,K34[XAE],x,y,bj_UNIT_FACING)
endif
set i=i+1
exitwhen(M7[GetPlayerId(pl)]!=null)
endloop
if(not(E4 or O4 or A8 or H34))then
call AdjustPlayerStateBJ(-$FA,pl,PLAYER_STATE_RESOURCE_GOLD)
endif
endif
set pl=null
endfunction
function SEv takes nothing returns nothing
if(IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO))then
if(GetUnitTypeId(GetEnumUnit())==1429221430)then
call ExecuteFunc("WK8")
endif
elseif((GetUnitTypeId(GetEnumUnit())==1848651828)or(GetUnitTypeId(GetEnumUnit())==1848652088)or(GetUnitTypeId(GetEnumUnit())==1848652099)or(GetUnitTypeId(GetEnumUnit())==1848652103))then
call RemoveUnit(GetEnumUnit())
endif
endfunction
function X3E takes player pl,boolean X6E returns nothing
local integer XBE
local integer XCE
local integer XAE
local integer O5=GetPlayerId(pl)
local integer JS7=OM7(GetHandleId(pl),"AI|Class")
local integer i=0
if(((TV7(pl))and(not P4))or((P4)and(GetRandomInt(1,2)==1)))then
set XBE=KL4
set XCE=K14
else
set XBE=K04
set XCE=K54
endif
if(X6E)then
if P4 or Y8 then
set X4=100
endif
call AdjustPlayerStateBJ(-1*X4,pl,PLAYER_STATE_RESOURCE_GOLD)
endif
call GroupClear(H8)
set bj_groupEnumOwningPlayer=pl
call GroupEnumUnitsInRect(H8,GetWorldBounds(),filterGetUnitsInRectOfPlayer)
call ForGroup(H8,function KK9)
call YE7(M7[O5])
set M7[O5]=null
set I[O5]=true
loop
set XAE=GetRandomInt(XBE,XCE)
if(J[XAE]==false and(JR7(K34[XAE],JS7)or i>20))then
set J[XAE]=true
if(TV7(pl))then
set M7[O5]=CreateUnit(pl,K34[XAE],GetRectCenterX(HD),GetRectCenterY(HD),bj_UNIT_FACING)
else
set M7[O5]=CreateUnit(pl,K34[XAE],GetRectCenterX(GD),GetRectCenterY(GD),bj_UNIT_FACING)
endif
call UR7(K34[XAE])
endif
set i=i+1
exitwhen M7[O5]!=null
endloop
endfunction
function XLE takes nothing returns nothing
local string VH=GetEventPlayerChatString()
local player pl=K27(S2I(SubString(VH,9,StringLength(VH))))
if((pl!=null)and(TA7(pl))and(IsPlayerInForce(pl,QX4)))then
if((IsPlayerAlly(GetTriggerPlayer(),pl))or(NJ7(not IsPlayerAlly(GetTriggerPlayer(),Z7[0]))==null))then
if((I[GetPlayerId(pl)])or(M7[GetPlayerId(pl)]==null))then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,"不能重选")
elseif(Bz>60.)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,"太迟了不能重选")
else
call X3E(pl,false)
endif
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,"不能让有人类队友的敌人重选")
endif
endif
set pl=null
endfunction
function X1E takes nothing returns nothing
local string VH=GetEventPlayerChatString()
local integer X0E=1
local boolean O6=IsPlayerAlly(GetTriggerPlayer(),Z7[0])
local boolean X5E
if((P)and((VH=="-pa")or(VH=="-pe")))then
set Gs=true
if(VH=="-pa")then
set X5E=O6
else
set X5E=not O6
endif
loop
if(TZ7(NI7(X0E,X5E))and M7[GetPlayerId(NI7(X0E,X5E))]==null)then
exitwhen true
endif
set X0E=X0E+1
exitwhen(X0E>5)
endloop
if((X0E<=5)and(NK7(O6)==null))then
if((M7[GetPlayerId(NJ7(O6))]==null)and(not oo[GetPlayerId(NJ7(O6))]))then
if(O6)then
set QV4=NI7(X0E,X5E)
else
set QW4=NI7(X0E,X5E)
endif
if(not P4)then
call SetUnitOwner(h4[512+GetPlayerId(NJ7(O6))],NK7(O6),false)
call SetUnitOwner(h4[512+GetPlayerId(NK7(O6))],NJ7(O6),false)
if VH=="-pe" then
set nc=CreateUnitAtLoc(NJ7(O6),1848651843,GetRectCenter(pr),0)
set Vc=CreateUnitAtLoc(NJ7(O6),1848651843,GetRectCenter(qr),0)
if not P4 then
call UU7(GetTriggerPlayer())
endif
endif
endif
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,"为 "+Q[GetPlayerId(NK7(O6))]+GetPlayerName(NK7(O6))+"|r选择一个英雄。 输入 "+"|c00dd8dff"+"-px|r 取消选择。")
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,5.,"你应该先为AI选择英雄再选择自己的英雄。 改为随机选择。")
call XZE(GetPlayerId(NI7(X0E,X5E)),0)
endif
elseif(NK7(O6)!=null)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,5.,"已经为以下玩家选择了英雄"+Q[GetPlayerId(NK7(O6))]+GetPlayerName(NK7(O6))+"|r")
endif
elseif(VH=="-px")then
if not P4 then
call UV7(GetTriggerPlayer())
endif
if(NK7(O6)!=null)then
call SetUnitOwner(h4[512+GetPlayerId(NJ7(O6))],NJ7(O6),false)
call SetUnitOwner(h4[512+GetPlayerId(NK7(O6))],NK7(O6),false)
call RemoveUnit(nc)
call RemoveUnit(Vc)
set nc=null
set Vc=null
if(O6)then
set QV4=null
else
set QW4=null
endif
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,5.,"选择已取消")
endif
elseif((not P)and((VH=="-pa")or(VH=="-pe")))then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,5.,"|c00888888还未到选择英雄的时候。|r")
endif
endfunction
function X2E takes nothing returns boolean
local integer O5=1
loop
exitwhen O5>5
if(TY7(Z7[O5])and(M7[GetPlayerId(Z7[O5])]==null))then
return true
elseif(TY7(A7[O5])and(M7[GetPlayerId(A7[O5])]==null))then
return true
endif
set O5=O5+1
endloop
return false
endfunction
function X_E takes nothing returns nothing
local integer O5=1
local boolean array Y4E
local integer i
local integer j
if(Bz<68.)then
if(((W8)or(not Gs))and(Bz>43.))then
elseif(X2E()or Bz<30.)then
return
else
call J_7(1.)
endif
endif
call DestroyTrigger(GetTriggeringTrigger())
call DisableTrigger(QA4)
if(QV4!=null)then
call DisplayTimedTextToPlayer(QT4,0,0,5.,"为AI选择英雄已经结束。")
call SetUnitOwner(h4[512+GetPlayerId(QT4)],QT4,false)
call SetUnitOwner(h4[512+GetPlayerId(QV4)],QV4,false)
call RemoveUnit(nc)
call RemoveUnit(Vc)
set nc=null
set Vc=null
set QV4=null
endif
if(QW4!=null)then
call DisplayTimedTextToPlayer(QU4,0,0,5.,"为AI选择英雄已经结束。")
call SetUnitOwner(h4[512+GetPlayerId(QU4)],QU4,false)
call SetUnitOwner(h4[512+GetPlayerId(QW4)],QW4,false)
call RemoveUnit(nc)
call RemoveUnit(Vc)
set nc=null
set Vc=null
set QW4=null
endif
if((E4)or(A8)or(O4)or(H34)or(O04)or(O9)or(RZ4)or(SN4))then
return
endif
set O5=1
loop
exitwhen O5>5
if M7[GetPlayerId(Z7[O5])]!=null then
set Y4E[JP7(GetUnitTypeId(M7[GetPlayerId(Z7[O5])]))]=true
endif
if M7[GetPlayerId(A7[O5])]!=null then
set Y4E[6+JP7(GetUnitTypeId(M7[GetPlayerId(A7[O5])]))]=true
endif
set O5=O5+1
endloop
if HB4<=4 then
set Y4E[3]=true
endif
if HB4<=3 then
if GetRandomInt(0,2)==0 then
set Y4E[4]=true
else
set Y4E[5]=true
endif
endif
if HB4<=2 then
if Y4E[4]then
set Y4E[5]=true
else
set Y4E[4]=true
endif
endif
if HC4<=4 then
set Y4E[6+3]=true
endif
if HC4<=3 then
if GetRandomInt(0,2)==0 then
set Y4E[6+4]=true
else
set Y4E[6+5]=true
endif
endif
if HC4<=2 then
if Y4E[4]then
set Y4E[6+5]=true
else
set Y4E[6+4]=true
endif
endif
set O5=1
loop
exitwhen O5>5
if(TZ7(Z7[O5])and(M7[GetPlayerId(Z7[O5])]==null))then
set j=0
loop
exitwhen j>5
set i=GetRandomInt(1,5)
if Y4E[i]then
set i=0
else
exitwhen true
endif
set j=j+1
endloop
if i==0 then
set i=5
loop
exitwhen(not Y4E[i])or i==0
set i=i-1
endloop
endif
call XZE(GetPlayerId(Z7[O5]),i)
if not(i==0 or JR7(GetUnitTypeId(M7[GetPlayerId(Z7[O5])]),i))then
set i=JP7(GetUnitTypeId(M7[GetPlayerId(Z7[O5])]))
endif
set Y4E[i]=true
call NP7(GetHandleId(Z7[O5]),"AI|Class",i)
call J_7(1.)
endif
if(TZ7(A7[O5])and(M7[GetPlayerId(A7[O5])]==null))then
set j=0
loop
exitwhen j>5
set i=GetRandomInt(1,5)
if Y4E[6+i]then
set i=0
else
exitwhen true
endif
set j=j+1
endloop
if i==0 then
set i=5
loop
exitwhen(not Y4E[6+i])or i==0
set i=i-1
endloop
endif
call XZE(GetPlayerId(A7[O5]),i)
if not(i==0 or JR7(GetUnitTypeId(M7[GetPlayerId(A7[O5])]),i))then
set i=JP7(GetUnitTypeId(M7[GetPlayerId(A7[O5])]))
endif
set Y4E[6+i]=true
call NP7(GetHandleId(A7[O5]),"AI|Class",i)
call J_7(1.)
endif
set O5=O5+1
endloop
endfunction
function Y7E takes unit it,integer Y8E returns nothing
call SetPlayerAbilityAvailable(GetOwningPlayer(it),Y8E,true)
call SelectHeroSkill(it,Y8E)
endfunction
function Y9E takes integer i1 returns boolean
return(((i1==1311781174)or(i1==1311781175)or(i1==1311911984)or(i1==1311911985)or(i1==1311781442)))
endfunction
function YDE takes integer i1 returns boolean
return((i1==1430468406)or(i1==1316252014)or(i1==1429221456)or(i1==1432646245)or((i1==1214409837)or(i1==1211119192)or(i1==1211119193)or(i1==1211119191))or(i1==1215657064)or(i1==1311781207)or(i1==1311780946)or(i1==1315074670)or(i1==1164666213)or(i1==1429221441))
endfunction
function YEE takes nothing returns nothing
local unit it=GetEnumUnit()
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer i1=GetUnitTypeId(it)
local integer YFE=0
local integer YGE=0
local integer YHE=0
local integer YIE=0
local integer kt=0
local integer UP
local player YJE=GetOwningPlayer(it)
local integer YKE=0
if(Y74[GetPlayerId(YJE)]==1)then
set YKE=1
elseif(Y74[GetPlayerId(YJE)]==3)then
set YKE=2
elseif(Y74[GetPlayerId(YJE)]==5)then
set YKE=3
endif
loop
call TriggerSleepAction(.1)
set YHE=GetHeroSkillPoints(it)
exitwhen((YFE>$A)or(YHE==0)or(YGE>25)or(not M87(it)))
set kt=GetHeroLevel(it)+1-YHE
if((kt<=$E)and(YFE<7))then
set YIE=GetRandomInt(0,2)
else
set YIE=GetRandomInt(0,4)
endif
if(YFE==0)then
set YIE=0
if((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
elseif(kt>=$F)then
set YIE=4
endif
endif
if(YIE==3)then
if((YDE(i1))and(kt<$A))then
set YIE=GetRandomInt(0,1)
elseif((i1==1311781199)and(kt<$E))then
set YIE=GetRandomInt(0,2)
endif
elseif(YFE==0)then
if((YDE(i1))and(kt==$A))then
set YIE=3
elseif((i1==1311781199)and((kt==$E)or(kt==$F)))then
set YIE=3
endif
endif
if((YIE==2)and(kt<$A))then
set YIE=GetRandomInt(0,1)
endif
if(((i1==1215722344)or(i1==1311781207))and(YFE<2))then
if((kt==2)or(kt==5))then
set YIE=2
elseif(((kt==$A)or(kt==$C))and(YIE==2))then
set YIE=GetRandomInt(0,1)
endif
elseif(((i1==1430466609)or(i1==1162032181)or(i1==1429221456)or(i1==1164799603)or(i1==1212365106)or(i1==1311781206)or(i1==1311780930))and(YFE<2))then
if(kt==1)then
set YIE=2
elseif((kt==$A)and(YIE==2))then
set YIE=GetRandomInt(0,1)
endif
elseif((i1==1969513825)and(kt==2)and(YFE<3))then
set YIE=2
endif
if((i1==1160786241)and(YFE<3))then
if((kt<=16)and(YIE==2))then
set YIE=4
elseif(((kt==17)or(kt==18)or(kt==19)or(kt==20))and(YIE==4))then
set YIE=2
endif
elseif((i1==1432642913)and(YFE<3))then
if((kt==2)or(kt==4)or(kt==12)or(kt==13))then
set YIE=0
elseif((kt==8)or(kt==9)or(kt==10)or(kt==14))then
set YIE=1
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1432510828)and(YFE<3))then
if((kt==1)or(kt==4)or(kt==8)or(kt==$C))then
set YIE=0
elseif((kt==2)or(kt==5)or(kt==9)or(kt==$D))then
set YIE=1
elseif((kt==3)or(kt==7)or(kt==$A)or(kt==$E))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1332179560)and(YFE<3))then
if((kt==1)or(kt==12)or(kt==13)or(kt==14))then
set YIE=2
elseif((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set YIE=3
elseif((kt==4)or(kt==8)or(kt==9)or(kt==10))then
set YIE=1
elseif((kt==6)or(kt==11)or(kt==16))then
set YIE=0
else
set YIE=4
endif
elseif((i1==1429221430)and(YFE<3))then
if((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==1)or(kt==$A)or(kt==$D)or(kt==$E))then
set YIE=1
elseif((kt==4)or(kt==8)or(kt==9)or(kt==$C))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1211117641)and(YFE<3))then
if((kt==1)or(kt==8)or(kt==9)or(kt==11))then
set YIE=0
elseif((kt==4)or(kt==5)or(kt==6)or(kt==7))then
set YIE=1
elseif((kt==2)or(kt==12)or(kt==13)or(kt==14))then
set YIE=2
elseif((kt==3)or(kt==$A)or(kt==17))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1214344551)and(YFE<3))then
if((kt==3)or(kt==$C)or(kt==$D)or(kt==$E))then
set YIE=0
elseif((kt==1)or(kt==5)or(kt==8)or(kt==$A))then
set YIE=1
elseif((kt==2)or(kt==4)or(kt==7)or(kt==9))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1165451634)and(YFE<3))then
if((kt==1)or(kt==4)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==3)or(kt==9)or(kt==10)or(kt==12))then
set YIE=1
elseif((kt==2)or(kt==8)or(kt==13)or(kt==14))then
set YIE=2
elseif((kt<=17)and(YIE!=3))then
set YIE=4
endif
elseif((i1==1160786000)and(YFE<3))then
if((kt==2)or(kt==4)or(kt==8)or(kt==9))then
set YIE=0
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=1
elseif((kt==22)or(kt==23)or(kt==24)or(kt==25))then
set YIE=2
elseif((kt==6)or(kt==11)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1160785972)and(YFE<3))then
if((kt==4)or(kt==8)or(kt==9)or(kt==10))then
set YIE=0
elseif((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set YIE=1
elseif((kt==1)or(kt==12)or(kt==13)or(kt==14))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1313026096)and(YFE<3))then
if((kt==1)or(kt==18)or(kt==19)or(kt==20))then
set YIE=0
elseif((kt==8)or(kt==10)or(kt==15)or(kt==17))then
set YIE=1
elseif((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set YIE=2
elseif((kt==6)or(kt==11)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1430468913)and(YFE<3))then
if((kt==$A)or(kt==$B)or(kt==$C)or(kt==$D))then
set YIE=0
elseif((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set YIE=1
elseif((kt==1)or(kt==4)or(kt==8)or(kt==9))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
endif
elseif((i1==1215657064)and(YFE<3))then
if((kt==2)or(kt==8)or(kt==9)or(kt==25))then
set YIE=1
elseif((kt==4)or(kt==$A)or(kt==$B)or(kt==$C))then
set YIE=2
elseif((kt==6)or(kt==$F)or(kt==16))then
set YIE=3
elseif((kt<=20)and(YIE!=0))then
set YIE=4
endif
elseif((i1==1160785973)and(YFE<3))then
if((kt==1)or(kt==3)or(kt==13)or(kt==14))then
set YIE=0
elseif((kt==7)or(kt==8)or(kt==9)or(kt==12))then
set YIE=1
elseif((kt==2)or(kt==4)or(kt==5)or(kt==10))then
set YIE=2
elseif((kt==6)or(kt==11)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1332766568)and(YFE<3))then
if(YKE==1)then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==21)or(kt==22)or(kt==23)or(kt==24))then
set YIE=1
elseif((kt==2)or(kt==4)or(kt==8)or(kt==9))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif(YKE==2)then
if((kt==2)or(kt==4)or(kt==8)or(kt==9))then
set YIE=0
elseif((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set YIE=1
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif(YKE==3)then
if((kt==2)or(kt==8)or(kt==9)or(kt==$C))then
set YIE=0
elseif((kt==3)or(kt==5)or(kt==$D)or(kt==$E))then
set YIE=1
elseif((kt==1)or(kt==4)or(kt==7)or(kt==$A))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
else
if((kt==2)or(kt==8)or(kt==9)or(kt==$C))then
set YIE=0
elseif((kt==3)or(kt==5)or(kt==$D)or(kt==$E))then
set YIE=1
elseif((kt==1)or(kt==4)or(kt==7)or(kt==$A))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
endif
elseif((i1==1328558160)and(YFE<3))then
if((kt==1)or(kt==4)or(kt==6)or(kt==8))then
set YIE=0
elseif((kt==$A)or(kt==16)or(kt==17)or(kt==18))then
set YIE=1
elseif((kt==$C)or(kt==23)or(kt==24)or(kt==25))then
set YIE=2
elseif((kt==$B)or(kt==19)or(kt==20))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1214931305)and(YFE<3))then
if((kt==5)or(kt==12)or(kt==13)or(kt==14))then
set YIE=0
elseif((kt==2)or(kt==4)or(kt==7)or(kt==8))then
set YIE=1
elseif((kt==1)or(kt==3)or(kt==9)or(kt==10))then
set YIE=2
elseif((kt==6)or(kt==11)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1162032439)and(YFE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==2)or(kt==9)or(kt==$C)or(kt==$E))then
set YIE=1
elseif((kt==4)or(kt==8)or(kt==$A)or(kt==$D))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1311781185)and(YFE<3))then
if((kt==1)or(kt==8)or(kt==9)or(kt==$E))then
set YIE=0
elseif((kt==4)or(kt==$A)or(kt==$C)or(kt==$D))then
set YIE=1
elseif((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1162032181)and(YFE<3))then
if((kt==2)or(kt==9)or(kt==10)or(kt==12))then
set YIE=0
elseif((kt==3)or(kt==5)or(kt==7)or(kt==8))then
set YIE=1
elseif((kt==1)or(kt==4)or(kt==13)or(kt==14))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1311781199)or(i1==1311781171)or(i1==1311781172)or(i1==1311781173))and(YFE<3)then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==2)or(kt==9)or(kt==13)or(kt==14))then
set YIE=1
elseif((kt==4)or(kt==8)or(kt==10)or(kt==12))then
set YIE=2
elseif((kt==6)or(kt==11)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1215128178)and(YFE<3))then
if((kt==3)or(kt==4)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==2)or(kt==18)or(kt==19)or(kt==20))then
set YIE=1
elseif((kt==8)or(kt==9)or(kt==$A)or(kt==17))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1215063922)or(i1==1211117638)or(i1==1211117637)or(i1==1211117639))and(YFE<3)then
if((kt==4)or(kt==8)or(kt==9)or(kt==14))then
set YIE=0
elseif((kt==2)or(kt==10)or(kt==12)or(kt==13))then
set YIE=1
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=2
elseif((kt==6)or(kt==11)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif(((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))and(YFE<3))then
if((kt==4)or(kt==5)or(kt==$C)or(kt==$D))then
set YIE=0
elseif((kt==1)or(kt==3)or(kt==7)or(kt==9))then
set YIE=1
elseif((kt==17)or(kt==18)or(kt==19)or(kt==20))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1429221446)and(YFE<3))then
if((kt==2)or(kt==4)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==1)or(kt==12)or(kt==13)or(kt==14))then
set YIE=1
elseif((kt==3)or(kt==8)or(kt==9)or(kt==10))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1211117643)and(YFE<3))then
if((kt==1)or(kt==4)or(kt==7)or(kt==9))then
set YIE=0
elseif((kt==3)or(kt==$D)or(kt==$F)or(kt==17))then
set YIE=1
elseif((kt==2)or(kt==18)or(kt==20)or(kt==22))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1311787088)and(YFE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==2)or(kt==4)or(kt==8)or(kt==9))then
set YIE=1
elseif((kt==$C)or(kt==17)or(kt==18)or(kt==19))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1211117653)and(YFE<3))then
if((kt==14)or(kt==15)or(kt==17)or(kt==19)or(kt==21)or(kt==22)or(kt==23))then
set YIE=0
elseif((kt==2)or(kt==4)or(kt==8)or(kt==10)or(kt==18)or(kt==20)or(kt==24))then
set YIE=1
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7)or(kt==9)or(kt==12)or(kt==13))then
set YIE=2
elseif((kt==6)or(kt==11)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif(((i1==1211117620)or(i1==1160786505))and(YFE<3))then
if((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==1)or(kt==4)or(kt==8)or(kt==9))then
set YIE=1
elseif((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1211119409 or i1=='H0EV')and(YFE<3))then
if((kt==3)or(kt==4)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==1)or(kt==8)or(kt==9)or(kt==$A))then
set YIE=1
elseif((kt==2)or(kt==$C)or(kt==$D)or(kt==$E))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1160786502)and(YFE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==2)or(kt==4)or(kt==8)or(kt==9))then
set YIE=1
elseif((kt==10)or(kt==12)or(kt==13)or(kt==14))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif(((i1==1211119187)or(i1==1211117636))and(YFE<3))then
if((kt==2)or(kt==4)or(kt==8)or(kt==9))then
set YIE=0
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=1
elseif((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1433105516)and(YFE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==2)or(kt==4)or(kt==8)or(kt==9))then
set YIE=1
elseif((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1211117616)and(YFE<3))then
if((kt==2)or(kt==12)or(kt==15)or(kt==17))then
set YIE=0
elseif((kt==4)or(kt==8)or(kt==9)or(kt==$A))then
set YIE=1
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1333027688)and(YFE<3))then
if((kt==1)or(kt==8)or(kt==9)or(kt==10))then
set YIE=0
elseif((kt==3)or(kt==12)or(kt==13)or(kt==14))then
set YIE=1
elseif((kt==2)or(kt==4)or(kt==5)or(kt==7))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1214345830)and(YFE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==4)or(kt==8)or(kt==$D)or(kt==$E))then
set YIE=1
elseif((kt==2)or(kt==9)or(kt==$A)or(kt==$C))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1315988077)and(YFE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==2)or(kt==12)or(kt==13)or(kt==14))then
set YIE=1
elseif((kt==4)or(kt==8)or(kt==9)or(kt==10))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif(((i1==1211117617)or(i1==1211122513))and(YFE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==8)or(kt==9)or(kt==$A)or(kt==$C))then
set YIE=1
elseif((kt==2)or(kt==$D)or(kt==$E)or(kt==$F))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1432580716 or i1==1429221720)and(YFE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==8))then
set YIE=0
elseif((kt==2)or(kt==7)or(kt==9)or(kt==10))then
set YIE=1
elseif((kt==4)or(kt==$C)or(kt==$D)or(kt==$E))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1328558389)and(YFE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==2)or(kt==4)or(kt==8)or(kt==9))then
set YIE=1
elseif((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1162032951)and(YFE<3))then
if((kt==2)or(kt==4)or(kt==8)or(kt==9))then
set YIE=0
elseif((kt==5)or(kt==7)or(kt==10)or(kt==12))then
set YIE=1
elseif((kt==1)or(kt==3)or(kt==13)or(kt==14))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1211117649)and(YFE<3))then
if((kt==1)or(kt==12)or(kt==13)or(kt==14))then
set YIE=0
elseif((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set YIE=1
elseif((kt==4)or(kt==8)or(kt==9)or(kt==10))then
set YIE=2
elseif((kt==6)or(kt==11)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1160786265)and(YFE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==4)or(kt==11)or(kt==12)or(kt==13))then
set YIE=1
elseif((kt==2)or(kt==8)or(kt==9)or(kt==10))then
set YIE=2
elseif((kt==6)or(kt==16)or(kt==17))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1429221445)and(YFE<3))then
if((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==1)or(kt==9)or(kt==$A)or(kt==$C))then
set YIE=1
elseif((kt==4)or(kt==8)or(kt==$D)or(kt==$E))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1164207469)and(YFE<3))then
if((kt==2)or(kt==4)or(kt==7)or(kt==8))then
set YIE=0
elseif((kt==3)or(kt==9)or(kt==10)or(kt==12))then
set YIE=1
elseif((kt==1)or(kt==5)or(kt==13)or(kt==14))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1315074670)and(YFE<3))then
if((kt==2)or(kt==5)or(kt==9)or(kt==$A))then
set YIE=0
elseif((kt==3)or(kt==12)or(kt==$D)or(kt==$E))then
set YIE=1
elseif((kt==1)or(kt==4)or(kt==7)or(kt==8))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1315007329)and(YFE<3))then
if((kt==2)or(kt==4)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==3)or(kt==8)or(kt==9)or(kt==$A))then
set YIE=1
elseif((kt==1)or(kt==$C)or(kt==$D)or(kt==$E))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1433631084)and(YFE<3))then
if((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set YIE=0
elseif((kt==2)or(kt==4)or(kt==7)or(kt==9))then
set YIE=1
elseif((kt==1)or(kt==3)or(kt==5)or(kt==8))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1311780946)and(YFE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==4)or(kt==12)or(kt==13)or(kt==14))then
set YIE=1
elseif((kt==2)or(kt==8)or(kt==9)or(kt==10))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1429221441)and(YFE<3))then
if((kt==1)or(kt==4)or(kt==6)or(kt==8))then
set YIE=0
elseif((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set YIE=1
elseif((kt==$C)or(kt==$D)or(kt==$E)or(kt==$F))then
set YIE=2
elseif((kt==$A)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1315070563)and(YFE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==$A)or(kt==$D)or(kt==$F)or(kt==17))then
set YIE=1
elseif((kt==8)or(kt==9)or(kt==$C)or(kt==$E))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1429221451)and(YFE<3))then
if((kt==1)or(kt==12)or(kt==13)or(kt==14))then
set YIE=0
elseif((kt==4)or(kt==8)or(kt==9)or(kt==10))then
set YIE=1
elseif((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1332963428)and(YFE<3))then
if((kt==4)or(kt==8)or(kt==$A)or(kt==$D))then
set YIE=0
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=1
elseif((kt==2)or(kt==9)or(kt==$C)or(kt==$E))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1211117646)and(YFE<3))then
if((kt==2)or(kt==6)or(kt==8)or(kt==$A))then
set YIE=0
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=1
elseif((kt==4)or(kt==$C)or(kt==$D)or(kt==$E))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1430468406)and(YFE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set YIE=1
elseif((kt==2)or(kt==4)or(kt==6)or(kt==8))then
set YIE=2
elseif((kt==9)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1429221424)and(YFE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==4)or(kt==8)or(kt==9)or(kt==$A))then
set YIE=1
elseif((kt==2)or(kt==$C)or(kt==$D)or(kt==$E))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1215723364)and(YFE<3))then
if((kt==2)or(kt==12)or(kt==$D)or(kt==$E))then
set YIE=0
elseif((kt==4)or(kt==8)or(kt==9)or(kt==10))then
set YIE=1
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1160786242)and(YFE<3))then
if((kt==1)or(kt==12)or(kt==13)or(kt==14))then
set YIE=0
elseif((kt==2)or(kt==4)or(kt==7)or(kt==9))then
set YIE=1
elseif((kt==3)or(kt==5)or(kt==8)or(kt==10))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1430466865)and(YFE<3))then
if((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==1)or(kt==8)or(kt==9)or(kt==$A))then
set YIE=1
elseif((kt==4)or(kt==$C)or(kt==$D)or(kt==$E))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1430468144)and(YFE<3))then
if((kt==2)or(kt==8)or(kt==9)or(kt==$A))then
set YIE=0
elseif((kt==1)or(kt==3)or(kt==4)or(kt==7))then
set YIE=1
elseif((kt==5)or(kt==$C)or(kt==$D)or(kt==$E))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif(((i1==1211117650)or(i1==1211119433))and(YFE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==8))then
set YIE=0
elseif((kt==2)or(kt==4)or(kt==13)or(kt==14))then
set YIE=1
elseif((kt==7)or(kt==9)or(kt==10)or(kt==12))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((((i1==1311781174)or(i1==1311781175)or(i1==1311911984)or(i1==1311911985)or(i1==1311781442)))and(YFE<3))then
if((kt==2)or(kt==4)or(kt==8)or(kt==$C))then
set YIE=0
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=1
elseif((kt==9)or(kt==$A)or(kt==$D)or(kt==$E))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1160786506)and(YFE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==4)or(kt==$C)or(kt==$D)or(kt==$E))then
set YIE=1
elseif((kt==2)or(kt==8)or(kt==9)or(kt==$A))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1160785970)and(YFE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set YIE=1
elseif((kt==2)or(kt==4)or(kt==8)or(kt==9))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1429221443)and(YFE<3))then
if((kt==2)or(kt==$C)or(kt==$D)or(kt==$E))then
set YIE=0
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=1
elseif((kt==4)or(kt==8)or(kt==9)or(kt==$A))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1328558154)and(YFE<3))then
if((kt==4)or(kt==8)or(kt==9)or(kt==$A))then
set YIE=0
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=1
elseif((kt==2)or(kt==$C)or(kt==$D)or(kt==$E))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1164799855)and(YFE<3))then
if((kt==2)or(kt==4)or(kt==13)or(kt==14))then
set YIE=0
elseif((kt==1)or(kt==9)or(kt==10)or(kt==12))then
set YIE=1
elseif((kt==3)or(kt==5)or(kt==7)or(kt==8))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1430467634)and(YFE<3))then
if((kt==1)or(kt==8)or(kt==13)or(kt==14))then
set YIE=0
elseif((kt==3)or(kt==9)or(kt==10)or(kt==12))then
set YIE=1
elseif((kt==2)or(kt==4)or(kt==5)or(kt==7))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1160786520)and(YFE<3))then
if((kt==1)or(kt==4)or(kt==8)or(kt==9))then
set YIE=0
elseif((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set YIE=1
elseif((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif(((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))and(YFE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=2
elseif((kt==4)or(kt==$C)or(kt==$D)or(kt==$E))then
set YIE=0
elseif((kt==2)or(kt==8)or(kt==9)or(kt==$A))then
set YIE=1
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1212363833)and(YFE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=1
elseif((kt==2)or(kt==$B)or(kt==$C)or(kt==$D))then
set YIE=0
elseif((kt==4)or(kt==8)or(kt==9)or(kt==$A))then
set YIE=2
elseif((kt==6)or(kt==$E)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1211117652)and(YFE<3))then
if((kt==2)or(kt==4)or(kt==8)or(kt==9))then
set YIE=0
elseif((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set YIE=1
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1211117651)and(YFE<3))then
if((kt==3)or(kt==$C)or(kt==$D)or(kt==$E))then
set YIE=0
elseif((kt==1)or(kt==8)or(kt==9)or(kt==$A))then
set YIE=1
elseif((kt==2)or(kt==4)or(kt==5)or(kt==7))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1328558390)and(YFE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=0
elseif((kt==8)or(kt==12)or(kt==13)or(kt==14))then
set YIE=1
elseif((kt==2)or(kt==4)or(kt==9)or(kt==10))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1160786504)and(YFE<3))then
if((kt==2)or(kt==$C)or(kt==$D)or(kt==$E))then
set YIE=0
elseif((kt==3)or(kt==5)or(kt==8)or(kt==$A))then
set YIE=1
elseif((kt==1)or(kt==4)or(kt==7)or(kt==9))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1160786510)and(YFE<3))then
if((kt==2)or(kt==4)or(kt==9)or(kt==$A))then
set YIE=0
elseif((kt==8)or(kt==12)or(kt==13)or(kt==14))then
set YIE=1
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1328558406)and(YFE<3))then
if((kt==1)or(kt==19)or(kt==21)or(kt==23))then
set YIE=0
elseif((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set YIE=1
elseif((kt==9)or(kt==$B)or(kt==$D)or(kt==16))then
set YIE=2
elseif((kt==6)or(kt==$E)or(kt==17))then
set YIE=3
else
set YIE=4
endif
elseif(((i1==1311781193)or(i1==1311781192)or(i1==1311781204)or(i1==1311781194))and(YFE<3))then
if((kt==2)or(kt==8)or(kt==13)or(kt==14))then
set YIE=0
elseif((kt==4)or(kt==9)or(kt==10)or(kt==12))then
set YIE=1
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1311788336)and(YFE<3))then
if((kt==2)or(kt==5)or(kt==8)or(kt==$C))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
elseif((kt==1)or(kt==4)or(kt==7)or(kt==$A))then
set YIE=1
elseif((kt==3)or(kt==9)or(kt==$D)or(kt==$E))then
set YIE=0
else
set YIE=4
endif
elseif((i1==1160786507)and(YFE<3))then
if((kt==3)or(kt==8)or(kt==10)or(kt==12))then
set YIE=0
elseif((kt==2)or(kt==9)or(kt==13)or(kt==14))then
set YIE=1
elseif((kt==1)or(kt==4)or(kt==5)or(kt==7))then
set YIE=2
elseif((kt==6)or(kt==11)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1211122767)and(YFE<3))then
if((kt==3)or(kt==7)or(kt==$A)or(kt==$E))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
elseif((kt==2)or(kt==5)or(kt==9)or(kt==$D))then
set YIE=1
elseif((kt==1)or(kt==4)or(kt==8)or(kt==$C))then
set YIE=0
else
set YIE=4
endif
elseif((i1==1160786738)and(YFE<3))then
if((kt==2)or(kt==8)or(kt==9)or(kt==$A))then
set YIE=0
elseif((kt==4)or(kt==$C)or(kt==$D)or(kt==$E))then
set YIE=1
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
elseif((i1==1211117624)and(YFE<3))then
if((kt==2)or(kt==12)or(kt==13)or(kt==14))then
set YIE=0
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set YIE=1
elseif((kt==4)or(kt==8)or(kt==9)or(kt==10))then
set YIE=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set YIE=3
else
set YIE=4
endif
endif
if(i1==1430468406)then
if(YIE==0)then
call Y7E(it,kT(it))
elseif(YIE==1)then
call SelectHeroSkill(it,1093677635)
elseif(YIE==2)then
call Y7E(it,kS(it))
elseif(YIE==3)then
call Y7E(it,QH7(it))
endif
elseif(i1==1215130471)then
if(YIE==0)then
call Y7E(it,QI7(it))
elseif(YIE==1)then
call Y7E(it,QJ7(it))
elseif(YIE==2)then
call Y7E(it,QK7(it))
elseif(YIE==3)then
call SelectHeroSkill(it,1093679160)
endif
else
if(YIE==0)then
call Y7E(it,eY[$80+O5])
if(i1==1315007329)then
set UP=GetUnitAbilityLevel(it,1093677108)
if(UP<=2)then
set hq[272+O5]=I2R(75*UP)
else
set hq[272+O5]=I2R($F+(57*UP))
endif
endif
elseif(YIE==1)then
if(i1==1315334514)then
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093682760,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093682736,true)
endif
call Y7E(it,eY[$90+O5])
if(i1==1214344551)then
set UP=GetUnitAbilityLevel(it,1093748535)
if(UP==1)then
set hq[272+O5]=85.
elseif(UP==2)then
set hq[272+O5]=70.
elseif(UP==3)then
set hq[272+O5]=55.
else
set hq[272+O5]=40.
endif
endif
elseif(YIE==2)then
if((i1==1311781199)or(i1==1311781171))or((i1==1311781172)or(i1==1311781173))then
call SelectHeroSkill(it,1093748039)
call SelectHeroSkill(it,1093748041)
call SelectHeroSkill(it,1093748040)
call SelectHeroSkill(it,1093748037)
call SelectHeroSkill(it,1093748038)
elseif(Y9E(i1))then
call SelectHeroSkill(it,1096904043)
else
call Y7E(it,eY[$A0+O5])
endif
elseif(YIE==3)then
call Y7E(it,eY[$AC+O5])
if(eY[$BC+O5]!=0)then
call Y7E(it,eY[$BC+O5])
endif
if(i1==1214931305)then
set UP=GetUnitAbilityLevel(it,1093677906)
if(UP==0)then
set UP=GetUnitAbilityLevel(it,1093681494)
endif
if(UP<=2)then
set hq[272+O5]=I2R($C8+(100*UP))
else
set hq[272+O5]=600.
endif
elseif(i1==1332963428)then
set hq[272+O5]=I2R(85+(GetUnitAbilityLevel(it,1093677649)*$87))
elseif(i1==1332898670)then
set UP=GetUnitAbilityLevel(it,1093677128)
if(UP==0)then
set UP=GetUnitAbilityLevel(it,1093681457)
endif
if(UP<=2)then
set hq[272+O5]=I2R(50+($96*UP))
else
set hq[272+O5]=610.
endif
elseif(i1==1162032951)then
set UP=GetUnitAbilityLevel(it,1093679152)
if(UP==0)then
set UP=GetUnitAbilityLevel(it,1093752154)
set hq[272+O5]=125.
else
if(UP<=2)then
set hq[272+O5]=I2R(105+(30*UP))
else
set hq[272+O5]=250.
endif
endif
elseif(i1==1328558154)then
set UP=GetUnitAbilityLevel(it,1093682996)
if(UP>0)then
if(UP==1)then
set T34[64+O5]=400.
elseif(UP==2)then
set T34[64+O5]=550.
else
set T34[64+O5]=700.
endif
else
set UP=GetUnitAbilityLevel(it,1093747768)
if(UP>0)then
if(UP==1)then
set T34[64+O5]=550.
elseif(UP==2)then
set T34[64+O5]=700.
else
set T34[64+O5]=850.
endif
endif
endif
endif
endif
endif
if(YIE==4)then
if((i1==1315334514)or(i1==1328558160)or(i1==1311781199)or(i1==1311781171)or(i1==1311781172)or(i1==1311781173)or((i1==1214409837)or(i1==1211119192)or(i1==1211119193)or(i1==1211119191))or(i1==1211117643)or(i1==1160786502)or(i1==1328558406)or(i1==1160786520)or(i1==1211122243)or(i1==1211119191)or(i1==1211119192)or(i1==1211119193)or(i1==1328558390)or(i1==1328558391)or(i1==1430468144)or(i1==1430467634)or(i1==1328558160)or(i1==1211117650)or(i1==1211119433))then
call SelectHeroSkill(it,1093684818)
elseif((Y9E(i1))and(kt>21))then
call Y7E(it,eY[$A0+O5])
call SelectHeroSkill(it,1096904043)
else
call SelectHeroSkill(it,1096904043)
endif
endif
set YFE=YFE+1
set YGE=YGE+1
if(YHE!=GetHeroSkillPoints(it))then
set YFE=0
endif
endloop
if(i1==1430468406)then
set eY[336+O5]=kT(it)
set eY[368+O5]=kS(it)
set eY[$AC+O5]=QH7(it)
elseif(i1==1215130471)then
set eY[336+O5]=QI7(it)
set eY[352+O5]=QJ7(it)
set eY[368+O5]=QK7(it)
endif
set it=null
set YJE=null
endfunction
function YME takes unit it returns integer
local integer i1=GetUnitTypeId(it)
if((i1==1214344551)or(i1==1429221430)or(MR7(it,1952936552))or(MR7(it,1227894833))or(MR7(it,1868983399)))then
return 2
elseif((i1==1215722344)or(i1==1315007329)or(i1==1430468913)or(i1==1311781185))then
return 1
endif
return 0
endfunction
function YNE takes unit it returns string
if(IsUnitAlly(it,Z7[0]))then
return"Sent"
else
return"Scrg"
endif
endfunction
function YOE takes unit it returns boolean
local integer O5=1
local integer UP
local integer YPE=0
local boolean J4=false
local boolean YQE=false
local integer Iz
loop
if(IsUnitAlly(it,Z7[0]))then
set UP=GetPlayerId(Z7[O5])
else
set UP=GetPlayerId(A7[O5])
endif
if((IsPlayerInForce(Player(UP),QX4))and(M7[UP]!=null))then
set Iz=YME(M7[UP])
if(Iz==2)then
set YPE=YPE+1
set J4=true
elseif(Iz==1)then
set YPE=YPE+1
endif
set YQE=(YQE)or((Iz==0)and(MR7(M7[UP],1953265005))and(not MS7(M7[UP])))
endif
set O5=O5+1
exitwhen O5>5
endloop
if((YQE)and(not MR7(M7[UP],1953265005)))then
return false
endif
if(NG7(IsUnitAlly(it,Z7[0]))==1)then
return((YPE==0)and(OO7(R44,YNE(it)+"|G")))
else
return(((not J4)and(OO7(R44,YNE(it)+"|G")))or(YPE<R2I(NG7(IsUnitAlly(it,Z7[0]))/2)))
endif
endfunction
function YRE takes unit S4 returns integer
local integer i=0
local integer n=0
local integer CE7=UnitInventorySize(S4)-1
loop
exitwhen i>CE7
if UnitItemInSlot(S4,i)==null then
set n=n+1
endif
set i=i+1
endloop
return n
endfunction
function YSE takes integer i1 returns boolean
return((i1==EW or i1==HW)or i1==GY or i1==ZY or i1==ZX or i1==RZ or i1==Y3 or(i1>=XZ and i1<=YA)or(i1==B5 or i1==C5))
endfunction
function YTE takes integer Z48 returns boolean
return Z48==QC or Z48==TC or Z48==WC or Z48==YC
endfunction
function YUE takes integer i1 returns boolean
return((i1==UY)or(i1==MV)or(i1==OV)or(i1==HY)or(i1==BA)or(i1==JV)or(i1==SV)or(i1==YX)or(i1==JB)or(i1==RW)or(i1==NZ)or(i1==UV))or((i1==XC or i1==YC)or(i1==ZA)or(i1==ZY)or(i1==EZ or i1==HZ)or(i1==GY)or(i1==ZX)or(i1==RX)or(i1==NW)or(i1==VW)or(i1==CV)or(i1==FV)or(i1==E_4))
endfunction
function YVE takes integer O5,unit it returns boolean
local integer i=0
local integer i1=0
loop
exitwhen i>5
set i1=GetItemTypeId(UnitItemInSlot(it,i))
if i1==0 then
elseif(i1==ZU[CC])or(i1==ZU[WC])or(i1==ZU[EW])or(i1==ZU[HW])then
return true
elseif(i1==BU[CC])or(i1==BU[WC])or(i1==BU[EW])or(i1==BU[HW])then
return true
endif
set i1=GetItemTypeId(UnitItemInSlot(KU4[32+O5],i))
if i1==0 then
elseif(i1==ZU[CC])or(i1==ZU[WC])or(i1==ZU[EW])or(i1==ZU[HW])then
return true
elseif(i1==BU[CC])or(i1==BU[WC])or(i1==BU[EW])or(i1==BU[HW])then
return true
endif
set i=i+1
endloop
return false
endfunction
function YWE takes integer O5,unit it,item KA7,integer i1,boolean YXE returns integer
set bj_forLoopAIndex=OM7(1128887405,"Prio|"+I2S(GetHandleId(M7[O5]))+I2S(i1))
if bj_forLoopAIndex!=0 then
return bj_forLoopAIndex
endif
if(i1==X0)or(i1==B5 or i1==C5)or(CU[i1]==CU[FR4])then
return 101
elseif(KA7!=null)and(GetItemPlayer(KA7)!=Player(O5))and(i1!=G97[O5]and i1!=G97[16+O5])and(YXE or(Z78(i1)==false and YSE(i1)==false))then
return-1
elseif(not YXE)and(i1==G97[O5]or i1==G97[16+O5])and(IsUnitType(it,UNIT_TYPE_HERO))then
if(i1==OC)and(GetUnitState(it,UNIT_STATE_MAX_MANA)>500)then
return-1
elseif((i1==QC)or(i1==TC))and(GetUnitState(it,UNIT_STATE_MAX_LIFE)>$3E8)then
return-1
endif
return 97
elseif(i1==N3)or(i1==WL or i1==ZL)or(i1==AL)or(i1==LL or i1==DE4)or(i1>=D1 and i1<=H1)or(i1==P1)or(i1==T2)or(i1==Q1)or(i1==R1)or(i1==U1)or(i1==V1)or(i1==X1)or(i1>=D0 and i1<=R0)or(i1==Y0 or i1==B0)or(i1==C0)or(i1>=F5 and i1<=N5)or(i1==R5 or i1==S5 or i1==T5)or(i1==W5 or i1==A5)or(i1==L5)or(i1==E2 or i1==F2)or(i1==H2 or i1==P2)or(i1==R2 or i1==S2)or(i1==W2 or i1==X2)or(i1==Z2)or(i1==D44)or(i1==D74)or(i1==DG4)or(i1==DH4)or(i1==DI4)or(i1==DJ4)or(i1==DK4 or i1==DM4 or i1==DN4 or i1==DO4)or(i1==DP4 or i1==DQ4)or(i1==DR4)or(i1==DU4)or(i1==DV4)or(i1==DA4)or(i1==E24)or(i1==FC)or(i1==R3)or(i1==U3)or(i1==R1Q)or(i1==RLL)or(i1==GC)or(i1==B5)or(i1==C5)or(i1==R7t)then
return 100
elseif(i1==RW or i1==TW)or(i1==A1)or(i1==J1 or i1==O1)then
return 99
elseif(i1==F6 or i1==FF6 or i1==R06 or i1==G6 or i1==H6 or i1==N6 or i1==DS4 or i1==LB or i1==EC or i1==F74)then
if G87[304+O5]!=null and GetWidgetLife(G87[304+O5])>0 and GD7[304+O5]!=i1 and IsUnitType(it,UNIT_TYPE_HERO)then
return-1
else
return 100
endif
elseif(i1==FV)then
if G87[304+O5]!=null and GD7[304+O5]!=i1 and IsUnitType(it,UNIT_TYPE_HERO)then
return-1
else
return 99
endif
elseif(i1==XC or i1==YC)then
if YXE or GE7[64+O5]then
return 1
else
return 98
endif
elseif(i1==S6 or i1==V6)then
return 98
elseif(i1==D84 or i1==D94)then
return 23
elseif(i1==EW or i1==HW)then
if YXE then
return 2
else
return 22
endif
elseif(i1==VC)or(i1==WC)or(i1==CC)or(i1==H3)then
if YXE then
return 1
else
return $F
endif
elseif(i1==SY)then
return 21
elseif(i1==BV)or(i1==YW)or(i1==GX)then
return 20
elseif(i1==Y3)then
return 19
elseif(i1==T1)or(i1==DY4 or i1==DZ4)then
return 18
elseif(i1==OL or i1==RL)then
return 17
elseif(i1==AV)or(i1==OW)or(i1==NZ)then
return 16
elseif(i1==VB or i1==WB)then
return $F
elseif(i1==RX)then
if(GetUnitState(it,UNIT_STATE_MAX_LIFE)>1500.)then
return $A
else
return $F
endif
elseif(i1>=XZ and i1<=JA)then
return $E
elseif(i1==M3)then
return $D
elseif(i1==ZW)or(i1==UZ)or(i1==JB)or(i1==W6)then
return $C
elseif(i1==XV)or(i1==SX)then
return $B
elseif(i1==TV)or(i1==WX)then
return $A
elseif(i1==CV)or(i1==OZ)or(i1==ZX)or(i1==RZ)then
return 9
elseif(i1==ZA)or(i1==DT4)or(i1==E54)then
if(GetUnitState(it,UNIT_STATE_MAX_MANA)>500.)then
return 8
else
return $C
endif
elseif(i1==QV)or(i1==NX)or(i1==DZ)or(i1==NW)or(i1==VW)or(i1==YX)or(i1==JC or i1==NC)then
return 9
elseif(i1==BA)or(i1==C3 or i1==E6)or(i1==DW4 or i1==DX4)then
return 8
elseif(i1==E_4 or i1==F44)then
return 7
elseif(i1==A6 or i1==DL or i1==HL)then
return 6
elseif(i1==Z3)or(i1==B3)then
return 5
elseif(i1==JV)or(i1==MV)or(i1==OV)or(i1==HY)or(i1==SV)or(i1==UV)then
return 4
elseif(i1==GB)or(i1==GY)or(i1==ZY)or(i1==EZ or i1==HZ)then
return 3
elseif(i1==NV)or(i1==LV)or(i1==UW)or(i1==UY)or(i1==AX)then
return 2
elseif(i1==OC)or(i1==QC)or(i1==TC)or(i1==ZC)or(i1==AC)or(i1==DF4)then
return 1
elseif(i1==QW)then
return 0
elseif(i1>=DB4 and i1<=FG4)then
return-1
elseif(i1==QB or i1==RB)or(i1==PC)or(i1==BC)or(i1==LC)or(i1==DD4)then
return-1
endif
return-1
endfunction
function YYE takes integer O5,unit it,boolean YZE returns integer
local integer i=0
local integer j=0
local item KA7=null
loop
exitwhen i>5
set KA7=UnitItemInSlot(it,i)
if KA7==null then
set j=j+1
elseif YZE then
if(YWE(O5,it,KA7,KY7(KA7),false)<99)then
set j=j+1
endif
endif
set i=i+1
endloop
set KA7=null
return j
endfunction
function YAE takes integer O5,unit it,item KA7,integer i1 returns boolean
if(IsItemPowerup(KA7))then
if i1==0 then
set i1=KY7(KA7)
endif
set bj_lastCreatedItem=CreateItem(ZU[i1],GetUnitX(it),GetUnitY(it))
call SetItemVisible(bj_lastCreatedItem,false)
call SetItemPlayer(bj_lastCreatedItem,Player(O5),false)
call SetItemCharges(bj_lastCreatedItem,GetItemCharges(KA7))
call RemoveItem(KA7)
set KA7=bj_lastCreatedItem
endif
set LG4=UnitAddItem(it,KA7)
return LG4
endfunction
function YBE takes nothing returns nothing
local item QU8=GetEnumItem()
local unit u=OI4
local player p=GetOwningPlayer(u)
local integer id=GetPlayerId(p)
if GetWidgetLife(QU8)>0 and GetItemPlayer(QU8)==p then
call SetItemPosition(QU8,KV4[id],KW4[id])
call SetItemVisible(QU8,false)
call YAE(id,KU4[id],QU8,0)
endif
set QU8=null
set u=null
set p=null
endfunction
function YCE takes nothing returns boolean
return KU7(GetFilterUnit())or KV7(GetFilterUnit())
endfunction
function Y3E takes integer O5 returns nothing
local integer i=0
local unit u=null
local item KA7=null
call GroupEnumUnitsInRange(H8,GetUnitX(KU4[32+O5]),GetUnitY(KU4[32+O5]),$514,Condition(function YCE))
loop
set u=FirstOfGroup(H8)
exitwhen u==null
call GroupRemoveUnit(H8,u)
set i=0
loop
exitwhen i>5
set KA7=UnitItemInSlot(u,i)
if KA7!=null and GetItemPlayer(KA7)==Player(O5)then
call UnitRemoveItem(u,KA7)
call SetItemPosition(KA7,KV4[O5],KW4[O5])
if not UnitAddItem(KU4[32+O5],KA7)then
call SetItemVisible(KA7,false)
endif
endif
set i=i+1
endloop
endloop
set OI4=KU4[32+O5]
if IsPlayerAlly(Player(O5),Z7[0])then
call EnumItemsInRect(OD,Condition(function TO7),function YBE)
else
call EnumItemsInRect(PD,Condition(function TO7),function YBE)
endif
set u=null
set KA7=null
endfunction
function YLE takes integer O5,integer j returns nothing
local integer i
set i=0
loop
exitwhen i>23
if G87[O5*24+i]!=null then
call SetItemUserData(G87[O5*24+i],j)
endif
set i=i+1
endloop
endfunction
function Y1E takes nothing returns nothing
local integer i
local integer j
local integer i1
local unit it=GT7
local integer O5=GU7
if it==null then
set it=M7[O5]
endif
if(TZ4)then
set i=0
set L94="aiReinitA "
loop
exitwhen i>G97[$80+O5]
if G87[O5*24+i]!=null then
set L94=L94+IR7(i)+GetItemName(G87[O5*24+i])+"# "
endif
set i=i+1
endloop
endif
set i=$C
set j=YYE(O5,KU4[32+O5],false)
set eY[512+O5]=1
loop
exitwhen(i>=G97[$80+O5])or(j<=0)
if(G87[O5*24+i]!=null)then
if(GetWidgetLife(G87[O5*24+i])>0)and(not IsItemOwned(G87[O5*24+i]))then
call YAE(O5,KU4[32+O5],G87[O5*24+i],GD7[O5*24+i])
set j=j-1
endif
set G87[O5*24+i]=null
endif
set i=i+1
endloop
set i=0
loop
exitwhen i>5
set G87[O5*24+i]=UnitItemInSlot(it,i)
set GD7[O5*24+i]=KY7(G87[O5*24+i])
if(G87[304+O5]==null or GetWidgetLife(G87[304+O5])<=0)and(GD7[O5*24+i]==FV or GD7[O5*24+i]==G6 or GD7[O5*24+i]==H6 or GD7[O5*24+i]==N6 or GD7[O5*24+i]==DS4 or GD7[O5*24+i]==LB or GD7[O5*24+i]==EC or GD7[O5*24+i]==F74 or GD7[O5*24+i]==F6 or GD7[O5*24+i]==FF6 or GD7[O5*24+i]==R06)and(IsUnitType(it,UNIT_TYPE_HERO))then
set G87[304+O5]=G87[O5*24+i]
set GD7[304+O5]=GD7[O5*24+i]
endif
set G87[O5*24+6+i]=UnitItemInSlot(KU4[32+O5],i)
set GD7[O5*24+6+i]=KY7(G87[O5*24+6+i])
set i=i+1
endloop
set i=$C
set j=$C
loop
exitwhen i>23
if G87[O5*24+i]!=null then
if i!=j then
set G87[O5*24+j]=G87[O5*24+i]
set GD7[O5*24+j]=GD7[O5*24+i]
set G87[O5*24+i]=null
endif
set j=j+1
endif
set i=i+1
endloop
if j<$C then
set G97[$80+O5]=$C
else
set G97[$80+O5]=j
endif
set it=null
endfunction
function Y0E takes integer O5,unit it returns nothing
set GT7=it
set GU7=O5
call ExecuteFunc("Y1E")
endfunction
function Y5E takes integer O5 returns integer
local integer i=0
local integer j=6
call Y0E(O5,M7[O5])
loop
exitwhen(i>=G97[$80+O5])
if(G87[O5*24+i]!=null)and(GetWidgetLife(G87[O5*24+i])>0)and(YWE(O5,M7[O5],G87[O5*24+i],GD7[O5*24+i],false)>=99)then
set j=j-1
endif
set i=i+1
endloop
return j
endfunction
function Y2E takes unit it,integer i1 returns boolean
return((i1==J1 or i1==O1)or(i1==P1)or(i1==T2)or(i1==V1))
endfunction
function Y_E takes unit it,integer i1 returns boolean
return((i1==V1)or(i1==W2 or i1==X2)or(i1==E_4 or i1==F44))
endfunction
function Z4E takes integer O5,unit it,integer i1 returns boolean
local boolean Z7E=Y2E(it,i1)
local boolean Z8E=Y_E(it,i1)
local integer i=GetUnitTypeId(it)
if(i==1162032951)or(i==1160785972)or(i==1429221456)or(i==1315074670)or(i==1164799855)or(i==1311781185)or(i==1211117649)or(i==1429221430 or i==1429221451)then
return(not(Z7E or Z8E))
elseif(i==1164207469 or i==1432510828)then
return(not(Z7E))
elseif(i==1432642913 or i==1211117641)then
return(not(Z8E))
elseif(GE7[16+O5]and Z7E)then
return false
elseif(GE7[32+O5]and Z8E)then
return false
elseif(i1==RW or i1==TW)and(i==12157233640 or i==14292214460)then
return false
elseif(i1==BA or i1==GB or i1==X1)and(i==12111191870)then
return false
elseif Z7E and OO7(1128887405,"Orb|"+I2S(GetHandleId(it)))then
return false
elseif Z8E and OO7(1128887405,"Buff|"+I2S(GetHandleId(it)))then
return false
endif
return true
endfunction
function Z9E takes integer i1 returns boolean
return((i1==N3)or(i1==R5 or i1==S5 or i1==T5)or(i1==H2 or i1==P2)or(i1==DG4)or(i1==DH4)or(i1==DP4 or i1==DQ4)or(i1==DV4)or(i1==T1)or(i1==DY4 or i1==DZ4))
endfunction
function ZDE takes integer i1 returns boolean
return((i1==X1))
endfunction
function ZEE takes integer O5,integer i1 returns boolean
if(i1==D84 or i1==D94)then
return true
elseif(i1==VC)or(i1==WC)or(i1==EW or i1==HW)or(i1==XC or i1==YC)or(i1==CC)or(i1==H3)or(i1==OC)or(i1==QC)or(i1==TC)or(i1==ZC)or(i1==AC)or(i1==DF4)then
if(i1==G97[O5]or i1==G97[16+O5])then
else
return true
endif
elseif(i1==S6 or i1==V6)or(i1==T1)or(i1==DY4 or i1==DZ4)then
return true
elseif(i1==VB or i1==WB)then
return true
elseif(i1>=XZ and i1<=JA)then
return true
elseif(i1==M3)then
return true
elseif(i1==ZA)or(i1==DT4)or(i1==E54)then
return true
elseif(i1==BA or i1==GB)or(i1==DW4 or i1==DX4)then
return true
elseif(i1==A6 or i1==DL or i1==HL)then
return true
endif
return false
endfunction
function ZFE takes unit it,boolean ZGE returns unit
local integer O5=GetPlayerId(GetOwningPlayer(it))
local unit u
if(not GE7[112+O5])then
return null
endif
set u=O77(GetHandleId(Player(O5)),"MyBear")
if ZGE then
if(u==null or GetUnitState(u,UNIT_STATE_LIFE)<=0)then
call SelectHeroSkill(it,1093681461)
call J_7(.1)
if IssueImmediateOrderById(it,$D0272)then
call J_7(1.)
set u=O77(GetHandleId(Player(O5)),"MyBear")
endif
elseif GetUnitTypeId(u)!=1848651828 then
call SetUnitX(u,GetUnitX(it))
call SetUnitY(u,GetUnitY(it))
endif
call IssueTargetOrderById(u,$D0012,it)
endif
if(u==null or GetUnitState(u,UNIT_STATE_LIFE)<=0)then
set u=O77(GetHandleId(Player(O5)),"BearItemHolder")
if u==null then
if TV7(GetOwningPlayer(it))then
set u=CreateUnit(Player(O5),1697657158,-6390,-5615,0)
else
set u=CreateUnit(Player(O5),1697657158,5875,5000,0)
endif
call NT7(GetHandleId(Player(O5)),"BearItemHolder",u)
endif
endif
set bj_lastReplacedUnit=u
set u=null
return bj_lastReplacedUnit
endfunction
function ZHE takes integer O5,unit it,boolean ZIE returns unit
local unit I_7
local unit u
if(not GE7[112+O5])then
return null
endif
set I_7=O77(GetHandleId(Player(O5)),"aiBearDummy")
if(I_7==null)then
if TV7(GetOwningPlayer(it))then
set I_7=CreateUnit(Player(O5),1697657158,-6390,-5615,0)
else
set I_7=CreateUnit(Player(O5),1697657158,5875,5000,0)
endif
call NT7(GetHandleId(Player(O5)),"aiBearDummy",I_7)
call ShowUnit(I_7,true)
endif
if not(GE7[48+O5])then
set u=ZFE(it,ZIE)
if not(u==null or GetUnitState(u,UNIT_STATE_LIFE)<=0)then
call SetUnitPosition(I_7,GetUnitX(u),GetUnitY(u))
endif
endif
set bj_lastReplacedUnit=I_7
set u=null
set I_7=null
return bj_lastReplacedUnit
endfunction
function ZJE takes integer O5,unit it returns nothing
local unit u=ZFE(it,false)
local item KA7
local integer i=0
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>0 then
loop
exitwhen i>5
set bj_lastCreatedItem=UnitItemInSlot(it,i)
if bj_lastCreatedItem!=null then
set KA7=UnitItemInSlot(u,i)
if KA7==null or GetItemTypeId(bj_lastCreatedItem)!=GetItemTypeId(KA7)then
call RemoveItem(KA7)
set KA7=CreateItem(GetItemTypeId(bj_lastCreatedItem),GetUnitX(u),GetUnitY(u))
call SetItemVisible(KA7,false)
call SetItemPlayer(KA7,Player(O5),false)
call SetItemCharges(KA7,GetItemCharges(bj_lastCreatedItem))
call SetItemUserData(KA7,0)
call UnitAddItem(u,KA7)
endif
else
call RemoveItem(UnitItemInSlot(u,i))
endif
set i=i+1
endloop
endif
set u=null
set KA7=null
endfunction
function ZKE takes integer O5,unit it returns nothing
local unit u
local integer i=0
if(not GE7[$C0+O5])or(GE7[48+O5])then
return
endif
if(it!=null)then
if GetUnitTypeId(it)==1697657158 then
set u=O77(GetHandleId(Player(O5)),"MyBear")
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>0 then
call SetUnitPosition(it,GetUnitX(u),GetUnitY(u))
endif
endif
else
set u=O77(GetHandleId(Player(O5)),"aiBearDummy")
if TV7(Player(O5))then
call SetUnitPosition(u,-6390,-5615)
else
call SetUnitPosition(u,5875,5000)
endif
call ZJE(O5,u)
endif
set u=null
endfunction
function ZME takes integer O5,boolean ZNE,boolean ZOE returns integer
local integer i=999
local integer ZPE=5
local integer j=0
local integer JA7=0
local integer ZQE=0
local integer i1
if not ZNE then
set ZPE=23
endif
loop
exitwhen(j>ZPE)
if(G87[O5*24+j]!=null)then
if(GD7[O5*24+j]==DT4 and G97[$90+O5]!=2)then
else
set ZQE=YWE(O5,M7[O5],G87[O5*24+j],GD7[O5*24+j],false)
if(ZQE<=i)and(ZQE!=-1)and(ZQE<99)and(not OO7(1128887405,"NoSell|"+I2S(GetHandleId(M7[O5]))+I2S(GD7[O5*24+j])))and(LoadInteger(C_4,G97[$E0+O5],GetHandleId(G87[O5*24+j]))==0)and(not LoadBoolean(C_4,G97[256+O5],GetHandleId(G87[O5*24+j])))then
set i=ZQE
set JA7=j
endif
endif
endif
set j=j+1
endloop
if i<99 and((not ZOE)or(ZEE(O5,GD7[O5*24+JA7])))then
return JA7
endif
return-1
endfunction
function ZRE takes integer O5,boolean ZSE returns integer
local integer i=0
local integer j=0
local integer k=0
local item KA7=null
loop
exitwhen i>23
set KA7=G87[O5*24+i]
set k=GD7[O5*24+i]
if KA7==null or(GetWidgetLife(KA7)<=0)then
set KA7=null
set k=0
if i<=5 then
set KA7=UnitItemInSlot(M7[O5],i)
elseif i<=$B then
set KA7=UnitItemInSlot(KU4[32+O5],i-6)
endif
endif
if(KA7!=null)and(ZSE or(not Z78(k)))and(LoadInteger(C_4,G97[$E0+O5],GetHandleId(G87[O5*24+i]))==0)and(not LoadBoolean(C_4,G97[256+O5],GetHandleId(G87[O5*24+i])))then
set j=j+1
endif
set i=i+1
endloop
set KA7=null
return j
endfunction
function ZTE takes integer O5,unit it returns integer
local integer i=0
local integer ZPE=0
local integer j=0
local integer JA7=999
local item KA7
loop
exitwhen i>5
set KA7=UnitItemInSlot(it,i)
if KA7!=null then
set j=YWE(O5,null,null,KY7(KA7),false)
if j<99 and j<JA7 then
set JA7=j
set ZPE=i
endif
else
set bj_lastCreatedItem=null
set bj_forLoopBIndexEnd=-2
set KA7=null
return i
endif
set i=i+1
endloop
set KA7=null
if JA7<999 then
set bj_lastCreatedItem=UnitItemInSlot(it,ZPE)
set bj_forLoopBIndexEnd=JA7
return ZPE
endif
return-1
endfunction
function ZUE takes integer O5,unit it returns boolean
local boolean MA7=false
local boolean J4
set bj_lastCreatedItem=null
if(G97[O5]!=0)and(YWE(O5,it,null,G97[O5],true)>YWE(O5,it,null,G97[16+O5],true))then
return MR7(it,ZU[G97[O5]])
elseif(G97[16+O5]!=0)then
return MR7(it,ZU[G97[16+O5]])
endif
return false
endfunction
function ZVE takes integer O5,unit it,integer i1,item KA7,boolean ZWE,boolean ZXE,boolean ZYE returns integer
local integer i
local integer ZPE=YWE(O5,it,KA7,i1,false)
local integer j=0
local integer JA7=0
local integer k=0
local integer ZQE=0
local item ZZE=null
local boolean MA7=false
set ZQE=0
set i=999
set LJ4=null
loop
exitwhen(j>5)
set ZZE=G87[O5*24+j+k]
if GetWidgetLife(ZZE)<=0 then
set ZZE=null
endif
if(ZZE!=null)then
if(UnitHasItem(it,ZZE))then
set ZQE=YWE(O5,M7[O5],ZZE,GD7[O5*24+j+k],(not ZXE))
if(ZQE<=i)then
set i=ZQE
set LJ4=ZZE
set JA7=j+k
endif
endif
else
if UnitItemInSlot(it,j+k)==null then
set JA7=j+k
set LJ4=null
set ZWE=true
exitwhen true
endif
endif
set j=j+1
endloop
set ZZE=null
if(ZPE>i)or ZWE then
set ZPE=GetItemTypeId(KA7)
set ZZE=LJ4
if ZZE!=null then
set G87[O5*24+G97[$80+O5]]=ZZE
set GD7[O5*24+G97[$80+O5]]=KY7(ZZE)
set G97[$80+O5]=G97[$80+O5]+1
set G87[O5*24+JA7]=null
endif
call ZKE(O5,it)
if ZZE!=null then
call UnitRemoveItem(it,ZZE)
call SetItemPosition(ZZE,GetUnitX(KU4[32+O5]),GetUnitY(KU4[32+O5]))
call SetItemVisible(ZZE,false)
if not IsUnitType(it,UNIT_TYPE_HERO)then
call SaveBoolean(C_4,G97[256+O5],GetHandleId(ZZE),true)
endif
endif
call UnitAddItem(it,KA7)
set MA7=true
if false and(not ZYE)then
if(ZPE!=SU[i1])and((i1!=HW)and(i1!=V6)and(i1!=O1)and(i1!=DN4 and i1!=DO4)and(i1!=DQ4)and(not Z78(i1)))then
call UnitAddItem(it,KA7)
set MA7=true
else
set ZYE=true
endif
endif
if false and ZYE then
if ZPE!=SU[i1]then
set bj_lastCreatedItem=CreateItem(SU[i1],GetUnitX(it),GetUnitY(it))
call SetItemVisible(bj_lastCreatedItem,false)
call SetItemPlayer(bj_lastCreatedItem,Player(O5),false)
call SetItemCharges(bj_lastCreatedItem,GetItemCharges(KA7))
call RemoveItem(KA7)
set KA7=bj_lastCreatedItem
endif
set eY[512+O5]=0
call UnitAddItem(it,KA7)
loop
exitwhen eY[512+O5]!=0
call TriggerSleepAction(.1)
endloop
if not IsUnitType(it,UNIT_TYPE_HERO)then
call SaveBoolean(C_4,G97[256+O5],GetHandleId(G87[288+O5]),true)
endif
if(eY[512+O5]==1)then
set MA7=true
elseif(eY[512+O5]==2)or(eY[512+O5]==3)then
loop
if eY[512+O5]==3 then
set KA7=G87[288+O5]
exitwhen true
endif
call TriggerSleepAction(.1)
endloop
endif
endif
if(G97[$80+O5]>23)then
if false then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,120,"|c009090ffAI BUFFER ITEM FAILURE: Overload.|r")
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,120,"|c009090ffError: "+GetItemName(KA7)+" on "+I2S(O5)+"'s "+GetUnitName(it)+"|r")
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,120," ")
endif
endif
endif
if MA7 then
return JA7
else
set bj_forLoopAIndex=GetItemUserData(KA7)
call SetItemPosition(KA7,GetUnitX(KU4[32+O5]),GetUnitY(KU4[32+O5]))
call SetItemUserData(KA7,bj_forLoopAIndex)
call SetItemVisible(KA7,false)
set G87[O5*24+G97[$80+O5]]=KA7
set GD7[O5*24+G97[$80+O5]]=KY7(KA7)
set G97[$80+O5]=G97[$80+O5]+1
endif
return-1
endfunction
function ZAE takes integer O5,unit it,item KA7,integer i1 returns nothing
if Z78(i1)then
call SetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD)+(GetItemCharges(KA7)/Z98(i1))*(HK4[i1]/2))
else
call SetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD)+HK4[i1]/2)
endif
call KX7(KA7)
call DestroyEffect(AddSpecialEffectTarget("UI\\Feedback\\GoldCredit\\GoldCredit.mdl",it,"overhead"))
endfunction
function ZBE takes player p,unit it,integer ZCE,integer Z3E,integer DXD,integer DYD,integer DZD,integer Z6E,integer ZLE returns nothing
local item KA7
call DisableTrigger(SV4)
if Z3E>0 then
set KA7=UnitItemInSlot(it,0)
call RemoveItem(KA7)
endif
if DXD>0 then
set KA7=UnitItemInSlot(it,1)
call RemoveItem(KA7)
endif
if DYD>0 then
set KA7=UnitItemInSlot(it,2)
call RemoveItem(KA7)
endif
if DZD>0 then
set KA7=UnitItemInSlot(it,3)
call RemoveItem(KA7)
endif
if Z6E>0 then
set KA7=UnitItemInSlot(it,4)
call RemoveItem(KA7)
endif
if ZLE>0 then
set KA7=UnitItemInSlot(it,5)
call RemoveItem(KA7)
endif
set GG7=ZCE
set GF7=p
set KA7=UnitAddItemById(it,ZU[ZCE])
call SetItemPlayer(KA7,p,true)
call SetItemUserData(KA7,1)
if IsPlayerInForce(p,QX4)and(it==O77(GetHandleId(p),"aiBearDummy"))then
set GV7=O77(GetHandleId(p),"MyBear")
if GV7!=null and GetUnitState(GV7,UNIT_STATE_LIFE)>0 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GV7,"origin"))
endif
else
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",it,"origin"))
endif
if KY7(KA7)==DI4 then
call SetItemCharges(KA7,12)
endif
call EnableTrigger(SV4)
if IsPlayerAlly(GetLocalPlayer(),p) then
if ZCE==T1 then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,Q[GetPlayerId(p)]+(KZ4[GetPlayerId((p))])+"|r |c00ffff00"+GetObjectName(1848659032)+"|r")
elseif ZCE==B5 then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,Q[GetPlayerId(p)]+(KZ4[GetPlayerId((p))])+"|r |c00ffff00"+GetObjectName(1848659033)+"|r")
endif
endif
set G87[288+GetPlayerId(p)]=KA7
set KA7=null
endfunction
function Z1E takes player p,unit it,integer i1,integer Z0E returns boolean
local integer i
local integer x
local integer y
local integer array Z5E
local boolean array Z2E
local integer array Z_E
local boolean array A4E
local boolean array A7E
local integer array A8E
local player A9E
local integer k
local player array ADE
local integer m
local item AEE
local item AFE
local item AGE
local item AHE
local item AIE
local item AJE
local player AKE
local player AME
local player ANE
local player APE
local player AQE
local player ARE
local integer ASE
local integer ATE
local integer AUE
local integer AVE
local integer AWE
local integer AXE
local integer AYE
local integer AZE
local integer AAE
local integer ABE
local integer ACE
local integer A3E
local boolean A6E=true
set AEE=UnitItemInSlot(it,0)
set AFE=UnitItemInSlot(it,1)
set AGE=UnitItemInSlot(it,2)
set AHE=UnitItemInSlot(it,3)
set AIE=UnitItemInSlot(it,4)
set AJE=UnitItemInSlot(it,5)
set AKE=GetItemPlayer(AEE)
set AME=GetItemPlayer(AFE)
set ANE=GetItemPlayer(AGE)
set APE=GetItemPlayer(AHE)
set AQE=GetItemPlayer(AIE)
set ARE=GetItemPlayer(AJE)
set ASE=GetItemUserData(AEE)
set ATE=GetItemUserData(AFE)
set AUE=GetItemUserData(AGE)
set AVE=GetItemUserData(AHE)
set AWE=GetItemUserData(AIE)
set AXE=GetItemUserData(AJE)
set AYE=KY7(AEE)
set AZE=KY7(AFE)
set AAE=KY7(AGE)
set ABE=KY7(AHE)
set ACE=KY7(AIE)
set A3E=KY7(AJE)
set ADE[1]=p
set i=0
if AEE!=null and ASE==1 and(AKE==p or PK4 or(GetPlayerSlotState((AKE))==PLAYER_SLOT_STATE_LEFT))then
set Z5E[i+1]=AYE
else
set Z5E[i+1]=0
endif
set i=1
if AFE!=null and ATE==1 and(AME==p or PK4 or(GetPlayerSlotState((AME))==PLAYER_SLOT_STATE_LEFT))then
set Z5E[i+1]=AZE
else
set Z5E[i+1]=0
endif
set i=2
if AGE!=null and AUE==1 and(ANE==p or PK4 or(GetPlayerSlotState((ANE))==PLAYER_SLOT_STATE_LEFT))then
set Z5E[i+1]=AAE
else
set Z5E[i+1]=0
endif
set i=3
if AHE!=null and AVE==1 and(APE==p or PK4 or(GetPlayerSlotState((APE))==PLAYER_SLOT_STATE_LEFT))then
set Z5E[i+1]=ABE
else
set Z5E[i+1]=0
endif
set i=4
if AIE!=null and AWE==1 and(AQE==p or PK4 or(GetPlayerSlotState((AQE))==PLAYER_SLOT_STATE_LEFT))then
set Z5E[i+1]=ACE
else
set Z5E[i+1]=0
endif
set i=5
if AJE!=null and AXE==1 and(ARE==p or PK4 or(GetPlayerSlotState((ARE))==PLAYER_SLOT_STATE_LEFT))then
set Z5E[i+1]=A3E
else
set Z5E[i+1]=0
endif
set Z5E[0]=i1
set i=1
loop
exitwhen i>(FQ4)
if FJ4[i]==Z0E or FK4[i]==Z0E or FM4[i]==Z0E or FN4[i]==Z0E or FO4[i]==Z0E then
set Z_E[0]=FJ4[i]
set Z_E[1]=FK4[i]
set Z_E[2]=FM4[i]
set Z_E[3]=FN4[i]
set Z_E[4]=FO4[i]
if A6E then
set A4E[0]=true
set A4E[1]=true
set A4E[2]=true
set A4E[3]=true
set A4E[4]=true
set A4E[5]=true
set A4E[6]=true
set Z2E[0]=true
set Z2E[1]=true
set Z2E[2]=true
set Z2E[3]=true
set Z2E[4]=true
set Z2E[5]=true
set Z2E[6]=true
set A8E[0]=0
set A8E[1]=0
set A8E[2]=0
set A8E[3]=0
set A8E[4]=0
set A8E[5]=0
set A8E[6]=0
set A6E=false
endif
set A7E[0]=false
set A7E[1]=false
set A7E[2]=false
set A7E[3]=false
set A7E[4]=false
set x=0
loop
exitwhen x==5
if Z_E[x]==0 then
set A7E[x]=true
else
set y=0
loop
exitwhen y==7
if Z5E[y]==Z_E[x]and Z2E[y]and A4E[x]then
set Z2E[y]=false
set A4E[x]=false
set A7E[x]=true
set A8E[y]=1
set y=7
set A6E=true
else
set y=y+1
endif
endloop
endif
if A7E[x] then
set x=x+1
else
set x=5
endif
endloop
if A7E[0]and A7E[1]and A7E[2]and A7E[3]and A7E[4]then
call ZBE(p,it,FP4[i],A8E[1],A8E[2],A8E[3],A8E[4],A8E[5],A8E[6])
call Z1E(p,it,0,FP4[i])
set i=FQ4+2
else
set i=i+1
endif
else
set i=i+1
endif
endloop
set EL=A8E[0]==1
if i==(FQ4+2)then
set AEE=null
set AFE=null
set AGE=null
set AHE=null
set AIE=null
set AJE=null
return true
endif
set AEE=null
set AFE=null
set AGE=null
set AHE=null
set AIE=null
set AJE=null
return false
endfunction
function ALE takes unit it,item KA7 returns nothing
local integer n5
local integer A1E
local integer YC7
set n5=F59(it)
set A1E=F29(it)
if A1E!=0 then
call UnitAddAbility(it,A1E)
call UnitMakeAbilityPermanent(it,true,A1E)
call SetPlayerAbilityAvailable(GetOwningPlayer(it),A1E,false)
if GetUnitTypeId(it)==1211117653 then
set IN4=it
call ExecuteFunc("A0E")
elseif GetUnitTypeId(it)==1215130471 then
set IN4=it
call ExecuteFunc("E3D")
endif
endif
set YC7=Y08(it,4)
if n5==GX4 and HQ4[YC7]!=0 then
call UnitRemoveAbility(it,HU4[YC7])
call UnitAddAbility(it,HV4[YC7])
call SetPlayerAbilityAvailable(GetOwningPlayer(it),HV4[YC7],false)
endif
call KX7(KA7)
set KA7=UnitAddItemById(it,ZU[n5])
call SetItemPlayer(KA7,GetOwningPlayer(it),false)
call SetItemUserData(KA7,1)
set G87[288+GetPlayerId(GetOwningPlayer(it))]=KA7
set KA7=null
endfunction
function A5E takes integer O5,unit it returns nothing
local integer i=0
local integer ZPE=0
set GE7[64+O5]=true
set G97[384+O5]=0
if MR7(it,ZU[YC])then
call ZAE(O5,it,bj_lastCreatedItem,YC)
endif
if MR7(KU4[32+O5],ZU[YC])then
call ZAE(O5,it,bj_lastCreatedItem,YC)
endif
call Y0E(O5,it)
set i=0
loop
exitwhen(i>23)
set ZPE=GD7[O5*24+i]
if(ZPE==FV or ZPE==G6 or ZPE==H6 or ZPE==N6 or ZPE==DS4 or ZPE==LB or ZPE==EC or ZPE==F74)then
call ZAE(O5,it,G87[O5*24+i],ZPE)
exitwhen true
endif
set i=i+1
endloop
endfunction
function A2E takes player p,unit it,integer i1,integer Z0E returns boolean
local integer ZPE=0
local integer ZCE=0
local item KA7=null
if i1==EN4 and MZ7(it,ZU[F5])then
set KA7=bj_lastCreatedItem
set ZPE=KY7(KA7)
if ZPE==F5 then
set ZCE=G5
elseif ZPE==G5 then
set ZCE=J5
elseif ZPE==J5 then
set ZCE=M5
elseif ZPE==M5 then
set ZCE=N5
endif
elseif i1==EO4 and MZ7(it,ZU[R5])then
set KA7=bj_lastCreatedItem
set ZPE=KY7(KA7)
if ZPE==R5 then
set ZCE=S5
elseif ZPE==S5 then
set ZCE=T5
endif
endif
if ZCE!=0 then
set GG7=ZCE
set GF7=p
call DisableTrigger(SV4)
call RemoveItem(KA7)
set KA7=UnitAddItemById(it,ZU[ZCE])
call SetItemPlayer(KA7,p,true)
call SetItemUserData(KA7,1)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",it,"origin"))
call EnableTrigger(SV4)
set G87[288+GetPlayerId(p)]=KA7
set KA7=null
return true
endif
return false
endfunction
function A_E takes integer O5,unit it,integer i1,item KA7,boolean ZWE returns boolean
local player HY7=Player(O5)
local boolean MA7=false
local integer j=HK4[i1]
set GG7=i1
set GF7=HY7
if(i1==F6 or i1==FF6)then
call A5E(O5,it)
endif
if(G97[432+O5]==2 and A2E(HY7,it,i1,i1))or Z1E(HY7,it,i1,i1)then
if KA7!=null then
call RemoveItem(KA7)
endif
set KA7=G87[288+O5]
set MA7=true
else
if YRE(it)==0 then
if KA7==null then
set KA7=CreateItem(ZU[i1],GetUnitX(it),GetUnitY(it))
call SetItemPlayer(KA7,HY7,false)
call SetItemUserData(KA7,1)
endif
set MA7=(ZVE(O5,it,i1,KA7,ZWE,false,false)!=-1)
else
if KA7==null then
set KA7=UnitAddItemById(it,ZU[i1])
call SetItemPlayer(KA7,HY7,false)
call SetItemUserData(KA7,1)
else
call UnitAddItem(it,KA7)
call SetItemUserData(KA7,1)
endif
set MA7=true
endif
if Z78(i1)then
call SetItemCharges(KA7,Z98(i1))
elseif i1==CC then
call SetItemCharges(KA7,2)
endif
endif
if KA7!=null then
set G87[288+O5]=KA7
if IsUnitType(it,UNIT_TYPE_HERO)and GetItemTypeId(KA7)==ZU[FR4]then
call ALE(it,KA7)
endif
endif
if(G97[432+O5]!=2)then
call TriggerSleepAction(0)
endif
set HY7=null
set KA7=null
return MA7
endfunction
function B4E takes integer O5,unit it,integer i1,boolean ZWE returns boolean
local player HY7=Player(O5)
local boolean MA7=false
local integer j=HK4[i1]
if(i1==QC or i1==TC or i1==YC)and(Y74[O5]>=3)then
set j=j/2
endif
if GetPlayerState(HY7,PLAYER_STATE_RESOURCE_GOLD)>=j then
call SetPlayerState(HY7,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(HY7,PLAYER_STATE_RESOURCE_GOLD)-j)
if GE7[48+O5]then
set G97[$C0+O5]=G97[$C0+O5]+j
endif
call ZKE(O5,it)
if Z78(i1)and MR7(it,ZU[i1])then
call SetItemCharges(bj_lastCreatedItem,GetItemCharges(bj_lastCreatedItem)+Z98(i1))
set MA7=true
else
set MA7=A_E(O5,it,i1,null,ZWE)
endif
set G97[96+O5]=0
endif
set HY7=null
return MA7
endfunction
function B7E takes integer O5 returns nothing
local integer j
local integer JA7
local integer k
local unit u
local player HY7=Player(O5)
call Y0E(O5,null)
if GE7[48+O5]then
return
endif
set j=6
set k=G97[$80+O5]-1
loop
exitwhen j>k
if G87[O5*24+j]!=null and((not GE7[$C0+O5])or(not LoadBoolean(C_4,G97[256+O5],GetHandleId(G87[O5*24+j]))))then
if IsItemOwned(G87[O5*24+j])then
call UnitRemoveItem(KU4[32+O5],G87[O5*24+j])
endif
set JA7=ZVE(O5,M7[O5],GD7[O5*24+j],G87[O5*24+j],false,true,false)
if JA7!=-1 and JA7<6 then
set G87[O5*24+JA7]=G87[O5*24+j]
if(G87[O5*24+JA7]==null)or(GetWidgetLife(G87[O5*24+JA7])<=0)then
set G87[O5*24+JA7]=G87[288+O5]
endif
set GD7[O5*24+JA7]=GD7[O5*24+j]
endif
call SetItemVisible(G87[O5*24+j],false)
set G87[O5*24+j]=null
endif
set j=j+1
endloop
if GE7[$C0+O5]then
set j=GetUnitTypeId(M7[O5])
if(j==1311781199 or j==1311781171 or j==1311781172 or j==1311781173)then
set u=ZHE(O5,M7[O5],false)
endif
if u!=null then
call Y0E(O5,u)
set j=6
set k=G97[$80+O5]-1
loop
exitwhen j>k
if G87[O5*24+j]!=null and(LoadBoolean(C_4,G97[256+O5],GetHandleId(G87[O5*24+j])))then
set JA7=ZVE(O5,u,GD7[O5*24+j],G87[O5*24+j],false,true,false)
if JA7!=-1 and JA7<6 then
set G87[O5*24+JA7]=G87[O5*24+j]
if(G87[O5*24+JA7]==null)or(GetWidgetLife(G87[O5*24+JA7])<=0)then
set G87[O5*24+JA7]=G87[288+O5]
endif
set GD7[O5*24+JA7]=GD7[O5*24+j]
endif
call SetItemVisible(G87[O5*24+j],false)
set G87[O5*24+j]=null
endif
set j=j+1
endloop
endif
set u=null
endif
call Y0E(O5,null)
set j=$C
loop
exitwhen j>G97[$80+O5]-1
if G87[O5*24+j]!=null then
call ZAE(O5,M7[O5],G87[O5*24+j],GD7[O5*24+j])
set G87[O5*24+j]=null
endif
set j=j+1
endloop
set HY7=null
set u=null
endfunction
function B8E takes integer O5,unit it,integer B9E,integer i1 returns boolean
local integer i
local integer j
local integer ZPE
local integer Z0E=0
local item KA7=null
local boolean MA7=true
local integer BDE
local boolean BEE=false
local boolean BFE=IsUnitType(it,UNIT_TYPE_HERO)
if(it==null)or((not M87(it))and(not GE7[48+O5]))then
return false
elseif(GE7[48+O5])and MS7(KU4[32+O5])then
set GE7[$80+O5]=true
return false
endif
if(G97[432+O5]==1)and(MS7(it)and G97[320+O5]<=0)then
set G97[96+O5]=i1
return false
endif
if(not IsUnitType(it,UNIT_TYPE_HERO))then
set Z0E=EV
if false then
set GE7[288+O5]=true
if(G97[432+O5]==1)then
return false
endif
endif
endif
if B9E>=0 or B9E==-2 then
endif
if(B9E==-1)then
set G97[64+O5]=G97[64+O5]+1
else
set G97[64+O5]=0
endif
set BDE=G97[64+O5]
if(GE7[112+O5])then
if(BDE==0)then
call Y0E(O5,it)
call YLE(O5,0)
endif
set i=0
loop
exitwhen(i>23)
if(G87[O5*24+i]!=null)then
set MA7=false
if(GD7[O5*24+i]==i1)then
set MA7=true
elseif MX7(i1,GD7[O5*24+i],false)then
set MA7=true
endif
if MA7 then
set ZPE=LoadInteger(C_4,G97[368+O5],i1+Z0E)
if(BDE==0)and(ZPE==0)then
set ZPE=LoadInteger(C_4,G97[352+O5],i1+Z0E)
if ZPE==0 then
set ZPE=1
endif
call SaveInteger(C_4,G97[368+O5],i1+Z0E,ZPE)
endif
set ZPE=LoadInteger(C_4,G97[$E0+O5],GetHandleId(G87[O5*24+i]))
if ZPE==0 then
set ZPE=G97[48+O5]
endif
if(GetItemPlayer(G87[O5*24+i])==Player(O5))and((not GE7[48+O5])or((ZPE==G97[48+O5])and(not LoadBoolean(C_4,G97[$D0+O5],GetHandleId(G87[O5*24+i])))))then
if(BDE==0)then
call SaveInteger(C_4,G97[368+O5],i1+Z0E,LoadInteger(C_4,G97[368+O5],i1+Z0E)-1)
endif
if(BDE!=0)or(LoadInteger(C_4,G97[368+O5],i1+Z0E)<=0)then
set KA7=G87[O5*24+i]
if((not GE7[$C0+O5])or(BFE==(not LoadBoolean(C_4,G97[256+O5],GetHandleId(G87[O5*24+i])))))then
set G87[O5*24+i]=null
exitwhen true
endif
endif
endif
endif
endif
set i=i+1
endloop
if KA7!=null and GE7[48+O5]then
call SaveBoolean(C_4,G97[$D0+O5],GetHandleId(KA7),true)
call SaveInteger(C_4,G97[$E0+O5],GetHandleId(KA7),G97[48+O5])
endif
set MA7=true
if(BDE==0)then
set GE7[272+O5]=true
if(not GE7[96+O5])and(GE7[48+O5]or(G97[32+O5]>=G97[48+O5]))then
if Z9E(i1)then
if IsPlayerAlly(Player(O5),Z7[0])then
call NP7(1128887405,"Sent|"+I2S(i1),OM7(1128887405,"Sent|"+I2S(i1))+1)
else
call NP7(1128887405,"Scrg|"+I2S(i1),OM7(1128887405,"Scrg|"+I2S(i1))+1)
endif
endif
call NP7(1128877176,I2S(GetHandleId(it))+"|"+I2S(i1),OM7(1128877176,I2S(GetHandleId(it))+"|"+I2S(i1))+1)
if Y2E(it,i1)then
call NS7(1128887405,"Orb|"+I2S(GetHandleId(it)),true)
endif
if Y_E(it,i1)then
call NS7(1128887405,"Buff|"+I2S(GetHandleId(it)),true)
endif
set GE7[96+O5]=true
endif
endif
endif
if G97[64+O5]<99 then
if KA7!=null then
call SetItemUserData(KA7,1)
if(not UnitHasItem(it,KA7))then
set GE7[272+O5]=false
if(not GE7[48+O5])and(G97[432+O5]!=1)then
call A_E(O5,it,i1,KA7,true)
endif
elseif not GE7[48+O5]then
call UnitRemoveItem(it,KA7)
call A_E(O5,it,i1,KA7,true)
endif
else
set i=1
loop
exitwhen(i>FQ4 or FP4[i]==i1)
if i1==E6 and FP4[i]==C3 then
exitwhen true
elseif i1==Y0 and FP4[i]==B0 then
exitwhen true
endif
set i=i+1
endloop
if i<=FQ4 then
if MA7 and(FJ4[i]!=0)then
set MA7=(B8E(O5,it,-1,FJ4[i]))
endif
if MA7 and(FK4[i]!=0)then
set MA7=(B8E(O5,it,-1,FK4[i]))
endif
if MA7 and(FM4[i]!=0)then
set MA7=(B8E(O5,it,-1,FM4[i]))
endif
if MA7 and(FN4[i]!=0)then
set MA7=(B8E(O5,it,-1,FN4[i]))
endif
if MA7 and(FO4[i]!=0)then
set MA7=(B8E(O5,it,-1,FO4[i]))
endif
if MA7 then
if(GE7[48+O5])then
call SaveBoolean(C_4,G97[$D0+O5],GetHandleId(G87[288+O5]),true)
else
if(i1==E6)then
call UnitUseItem(it,G87[288+O5])
endif
endif
if B9E==-1 then
set GE7[$90+O5]=true
endif
endif
set BEE=true
else
if(GE7[112+O5])then
if G97[432+O5]==2 then
set MA7=false
elseif GE7[48+O5]then
set MA7=B4E(O5,KU4[32+O5],i1,false)
if MA7 then
call SaveInteger(C_4,G97[$E0+O5],GetHandleId(G87[288+O5]),G97[48+O5])
endif
elseif(G97[432+O5]==1)then
if(not YUE(i1))then
set MA7=false
elseif(G97[320+O5]>0)and IsUnitType(it,UNIT_TYPE_HERO)and MS7(it)and(GetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD)>=HK4[i1])and MR7(it,ZU[QW])then
call ZAE(O5,it,bj_lastCreatedItem,QW)
set G97[320+O5]=G97[320+O5]-1
endif
set MA7=B4E(O5,it,i1,true)
else
set MA7=B4E(O5,it,i1,true)
endif
if not MA7 then
set G97[96+O5]=i1
endif
endif
endif
if MA7 and(not BFE)then
call SaveBoolean(C_4,G97[256+O5],GetHandleId(G87[288+O5]),true)
endif
endif
if BDE==0 then
if(not MA7)then
set G97[112+O5]=i1
elseif(not(G97[32+O5]<G97[48+O5]))or(GE7[48+O5])then
set G97[112+O5]=0
endif
endif
if(not GE7[$80+O5])and(GE7[48+O5])and MS7(KU4[32+O5])then
set GE7[$80+O5]=true
endif
if BDE==0 and MA7 then
if not(G97[$90+O5]==0)then
if(not GE7[48+O5])and((G97[432+O5]!=1)or(GE7[272+O5]))then
set G97[32+O5]=G97[32+O5]+1
else
if BEE then
set GE7[$80+O5]=true
call NP7(1128887405,I2S(GetHandleId(it))+"|s"+I2S(G97[48+O5]),i1)
endif
set G97[48+O5]=G97[48+O5]+1
endif
endif
set GE7[96+O5]=false
if(not GE7[48+O5])and BFE then
if(i1==F6 or i1==FF6)then
call A5E(O5,it)
elseif(i1==G6)then
set G97[384+O5]=1
set G97[400+O5]=1
elseif(i1==H6)then
set G97[384+O5]=2
set G97[400+O5]=2
elseif(i1==N6)then
set G97[384+O5]=3
set G97[400+O5]=3
endif
if G97[336+O5]!=0 then
set i=0
loop
exitwhen(i>23)
if(GD7[O5*24+i]==G97[336+O5])then
call ZAE(O5,it,G87[O5*24+i],G97[336+O5])
exitwhen true
endif
set i=i+1
endloop
set G97[336+O5]=0
endif
endif
if(GE7[112+O5])and(not GE7[48+O5])and(G97[432+O5]!=2)and BFE then
set ZPE=ZRE(O5,false)-6
loop
set i=ZME(O5,false,false)
exitwhen(i==-1)or(ZPE<=0)
call ZAE(O5,it,G87[O5*24+i],GD7[O5*24+i])
set G87[O5*24+i]=null
set ZPE=ZPE-1
endloop
endif
if(not GE7[$80+O5])and(GE7[48+O5])and(YWE(O5,it,null,i1,true)>=99)then
set GE7[$80+O5]=true
endif
if(GE7[$C0+O5])and(not GE7[48+O5])and(GetUnitTypeId(it)==1697657158)then
call ZJE(O5,it)
endif
endif
endif
if(not GE7[112+O5])then
return true
endif
if(BDE==0)and(not GE7[80+O5])and MA7 and(B9E==G97[$F0+O5])then
if(not GE7[48+O5])then
set G97[$90+O5]=2
else
set GE7[$A0+O5]=true
endif
endif
return MA7
endfunction
function BGE takes nothing returns nothing
local integer i=GetHandleId(GetTriggeringTrigger())
local integer O5=OM7(i,"p")
set GE7[$D0+O5]=B8E(O5,O77(i,"u"),OM7(i,"i"),OM7(i,"id"))
set G97[272+O5]=0
endfunction
function BHE takes integer O5 returns boolean
return(not(Bz>=G97[$A0+O5]))or(GE7[$E0+O5]and G97[432+O5]!=2)
endfunction
function BIE takes unit u,integer BJE returns integer
local player p=GetOwningPlayer(u)
local integer i=0
local integer BKE=0
local integer BME=0
loop
exitwhen i>$F
set BME=GetUnitTypeId(M7[i])
if M7[i]!=null and IsUnitEnemy(M7[i],p)and(JR7(BME,BJE))then
set BKE=BKE+1
endif
set i=i+1
endloop
return BKE
endfunction
function BNE takes integer O5,unit it,integer B9E,integer i1 returns boolean
local integer i
local integer Z0E=0
if(G97[432+O5]==2 and(IG4[O5]or Bz<G97[272+O5]))or(GE7[$E0+O5]and G97[432+O5]!=2)then
return false
endif
if(not GE7[112+O5])then
if B9E>=0 and(G97[$F0+O5]<=B9E)then
set G97[$F0+O5]=B9E
endif
if(not IsUnitType(it,UNIT_TYPE_HERO))then
set Z0E=EV
endif
call SaveInteger(C_4,G97[352+O5],i1+Z0E,LoadInteger(C_4,G97[352+O5],i1+Z0E)+1)
return true
endif
if(GE7[112+O5])and(B9E>=0)and(((not GE7[48+O5])and(G97[32+O5]!=B9E))or((GE7[48+O5])and(G97[48+O5]!=B9E)))then
return false
endif
if Bz<G97[272+O5]then
set i=R2I(Bz)+$A
loop
call TriggerSleepAction(1)
exitwhen(Bz>i or Bz>G97[272+O5])
endloop
if Bz<G97[272+O5]then
return false
endif
endif
set i=GetHandleId(Q04[112+O5])
call NT7(i,"u",it)
call NP7(i,"i",B9E)
call NP7(i,"id",i1)
if(IsUnitType(it,UNIT_TYPE_HERO))then
set Z0E=GetUnitTypeId(it)
if(OO7(R44,YNE(it)+"|D"))then
if(i1==U1)then
call NP7(i,"id",R3)
endif
elseif(OO7(R44,YNE(it)+"|Xb"))then
if(i1==DT4)and BIE(it,7)<3 and((Z0E==1164799855)or(Z0E==1212365106)or(Z0E==1164799603)or(Z0E==1160785973)or(Z0E==1315007329)or(Z0E==1164207469)or(Z0E==1429221443)or(Z0E==1215722344)or(Z0E==1429221456)or(Z0E==1211117643)or(Z0E==1162032181)or(Z0E==1160785972)or(Z0E==1211119409))then
call NP7(i,"id",S6)
elseif(i1==J1)and BIE(it,6)<3 and((Z0E==1162032181)or(Z0E==1328558160)or(Z0E==1211117617)or(Z0E==1211122513))then
call NP7(i,"id",P1)
endif
endif
endif
set G97[272+O5]=R2I(Bz)+$F
set GE7[$D0+O5]=false
call TriggerExecute(Q04[112+O5])
if(G97[432+O5]!=2)then
loop
call TriggerSleepAction(.2)
exitwhen Bz>G97[272+O5]
endloop
endif
return GE7[$D0+O5]
endfunction
function BOE takes integer O5,unit it,integer i1,boolean BPE returns boolean
local boolean BQE=MR7(it,ZU[i1])or MR7(KU4[32+O5],ZU[i1])or((KU4[32+O5]!=KU4[O5])and MR7(KU4[O5],ZU[i1]))
if OO7(1129146739,I2S(GetHandleId(it))+"|"+I2S(i1))then
set BPE=false
endif
if BPE and(IsItemOwned(bj_lastCreatedItem)or(not MS7(it)))then
if not((G97[O5]==i1 or G97[16+O5]==i1)and BQE)then
if G97[O5]==0 and G97[16+O5]!=i1 then
set G97[O5]=i1
elseif G97[16+O5]==0 and G97[O5]!=i1 then
set G97[16+O5]=i1
endif
if not BQE then
return B4E(O5,it,i1,true)
endif
endif
else
if BQE then
if(G97[O5]==i1)then
set G97[O5]=0
elseif(G97[16+O5]==i1)then
set G97[16+O5]=0
endif
endif
endif
return false
endfunction
function BRE takes integer O5 returns nothing
local integer i=0
local item KA7=null
local integer i1
loop
exitwhen i>5
set KA7=UnitItemInSlot(KU4[32+O5],i)
if KA7!=null then
set bj_forLoopAIndex=GetItemTypeId(KA7)
set i1=-1
if(bj_forLoopAIndex==ZU[G97[O5]])then
set i1=G97[O5]
set G97[O5]=0
elseif(bj_forLoopAIndex==ZU[G97[16+O5]])then
set i1=G97[16+O5]
set G97[16+O5]=0
elseif(bj_forLoopAIndex==ZU[YC])then
call ZAE(O5,M7[O5],KA7,YC)
endif
if i1!=-1 then
call NS7(1129146739,I2S(GetHandleId(M7[O5]))+"|"+I2S(i1),true)
call ZAE(O5,M7[O5],KA7,i1)
endif
endif
set i=i+1
endloop
set KA7=null
endfunction
function BSE takes integer O5 returns boolean
local integer I97=GetHandleId(KU4[16+O5])
local integer i=0
if(Bz<hq[896+O5])or(not OO7(I97,"aiCrow|Alive"))then
return false
endif
if(KE7(M7[O5],h9[16+O5])<$4B0)then
return false
endif
if(OO7(I97,"aiCrow|Active"))and(KE7(KU4[16+O5],h9[16+O5])<800)and(Bz>ON7(I97,"aiCrow|Move"))then
call EM9(KU4[16+O5])
endif
set i=OM7(I97,"aiCrow|CurrentOwner")
if(OO7(I97,"aiCrow|Active"))then
if(i==O5)then
if OO7(I97,"aiCrow|Away")then
call IssueNeutralImmediateOrderById(Player(O5),KU4[16+O5],1747990581)
else
call IssueImmediateOrderById(KU4[16+O5],$D0117)
endif
endif
return false
endif
if(i!=O5)and((not true)or((TV7(Player(O5))and(i!=GetPlayerId(Z7[0])))or(TW7(Player(O5))and(i!=GetPlayerId(A7[0])))))then
return false
endif
if(true)and(GetOwningPlayer(KU4[16+O5])!=Player(O5))then
call SetUnitOwner(KU4[16+O5],Player(O5),false)
endif
if IssueNeutralImmediateOrderById(Player(O5),KU4[16+O5],1747990581)then
call NP7(I97,"aiCrow|CurrentOwner",O5)
call NS7(I97,"aiCrow|Active",true)
call NQ7(I97,"aiCrow|Move",Bz+$F)
call NS7(I97,"aiCrow|Away",true)
set GE7[$E0+O5]=true
set i=0
set LJ4=null
loop
exitwhen i>5
set LJ4=UnitItemInSlot(KU4[O5],i)
if LJ4!=null then
call UnitAddItem(KU4[16+O5],LJ4)
endif
set i=i+1
endloop
return true
endif
return false
endfunction
function BTE takes integer O5,boolean BUE returns boolean
return(GZ7 and(KU4[16+O5]!=null)and G97[432+O5]==0 and BUE and(GE7[$80+O5]or GE7[$90+O5]))
endfunction
function BVE takes integer O5,unit it,boolean BUE returns nothing
local integer i1=GetUnitTypeId(it)
local integer array BWE
local boolean MA7=false
local boolean BXE=false
local boolean BYE=false
local boolean J4=false
local string BZE
local integer i
local integer ZPE
local integer j
local integer JA7
local integer BAE
local integer k
local integer ZQE
local unit u
if BHE(O5)then
return
endif
if(G97[432+O5]==2)then
if OM7(GetHandleId(KU4[16+O5]),"aiCrow|CurrentOwner")!=O5 then
return
endif
set KU4[32+O5]=KU4[16+O5]
else
set KU4[32+O5]=KU4[O5]
endif
if(not GE7[112+O5])then
set G97[$90+O5]=1
else
set G97[$A0+O5]=R2I(Bz)+30
call Y0E(O5,it)
endif
set GE7[48+O5]=BUE
set GE7[$A0+O5]=(BUE and GE7[$B0+O5])
set i=G97[$90+O5]
if(G97[$90+O5]==0)and(not BUE)then
if(PY4)then
else
call BOE(O5,it,QC,true)
endif
call B4E(O5,it,TC,true)
endif
set ZPE=OM7(GetHandleId(Player(O5)),"AI|Class")
if(G97[$90+O5]==0)and(not BUE)then
set JA7=WH7(it)
if ZPE==4 then
call BNE(O5,it,-2,TC)
else
if IsUnitType(it,UNIT_TYPE_MELEE_ATTACKER)then
call B4E(O5,it,EZ,false)
if i1!=12111191870 then
call B4E(O5,it,BA,false)
endif
else
call B4E(O5,it,AX,false)
if JA7==1 then
call BNE(O5,it,-2,HL)
elseif JA7==2 then
call BNE(O5,it,-2,DL)
else
call BNE(O5,it,-2,A6)
endif
endif
endif
set G97[$90+O5]=1
set G97[112+O5]=0
endif
if(i1==1211117636)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,T5)
call BNE(O5,it,3,FR4)
call BNE(O5,it,4,D74)
call BNE(O5,it,5,N5)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=U3
endif
elseif(i1==1211122767)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,N6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,DR4)
call BNE(O5,it,3,FC)
call BNE(O5,it,4,D74)
call BNE(O5,it,5,F5)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DP4
set BWE[1]=N5
endif
elseif((i1==1311781174)or(i1==1311781175)or(i1==1311911984)or(i1==1311911985)or(i1==1311781442))then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,J1)
call BNE(O5,it,3,E1)
call BNE(O5,it,4,A1)
call BNE(O5,it,5,Z2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=E2
set BWE[1]=T2
set BWE[2]=L5
endif
elseif(i1==1214345830)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,F74)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,C0)
call BNE(O5,it,3,D74)
call BNE(O5,it,4,DR4)
call BNE(O5,it,5,N5)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DP4
set BWE[1]=RLL
endif
elseif(i1==1315007329)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,U1)
call BNE(O5,it,3,N5)
call BNE(O5,it,4,D74)
call BNE(O5,it,5,E2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=T2
endif
elseif(i1==1429221456)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,N6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,DR4)
call BNE(O5,it,3,FR4)
call BNE(O5,it,4,C0)
call BNE(O5,it,5,D74)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DP4
set BWE[0]=RLL
endif
elseif(i1==1316252014)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,N6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,DI4)
call BNE(O5,it,3,F5)
call BNE(O5,it,4,D74)
call BNE(O5,it,5,C0)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DP4
set BWE[1]=N5
set BWE[2]=RLL
endif
elseif(i1==1432646245)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,R3)
call BNE(O5,it,3,J1)
call BNE(O5,it,4,DH4)
call BNE(O5,it,5,A1)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=R2
set BWE[1]=L5
set BWE[2]=T2
endif
elseif(i1==1160785972)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,DR4)
call BNE(O5,it,3,X2)
call BNE(O5,it,4,E2)
call BNE(O5,it,5,L5)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=Z2
endif
elseif(i1==1429221443)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,DM4)
call BNE(O5,it,3,WL)
call BNE(O5,it,4,V1)
call BNE(O5,it,5,E2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DH4
set BWE[1]=U3
endif
elseif(i1==1311781185)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,DR4)
call BNE(O5,it,3,D74)
call BNE(O5,it,4,C0)
call BNE(O5,it,5,DP4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=N5
set BWE[1]=RLL
endif
elseif(i1=='Huth')then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,RW)
call BNE(O5,it,2,J1)
call BNE(O5,it,3,WL)
call BNE(O5,it,4,E2)
call BNE(O5,it,5,Z2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=U3
set BWE[1]=T2
endif
elseif(i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,U1)
call BNE(O5,it,3,Y0)
call BNE(O5,it,4,J1)
call BNE(O5,it,5,X2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=Z2
set BWE[1]=T2
endif
elseif(i1==1211117651)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,N6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,DI4)
call BNE(O5,it,3,DR4)
call BNE(O5,it,4,DP4)
call BNE(O5,it,5,D74)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=N5
endif
elseif(i1==1430466609)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,N6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,DR4)
call BNE(O5,it,3,FR4)
call BNE(O5,it,4,D74)
call BNE(O5,it,5,DP4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=N5
endif
elseif(i1==1164799855)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,N6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,D74)
call BNE(O5,it,3,FR4)
call BNE(O5,it,4,DR4)
call BNE(O5,it,5,DP4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=R2
endif
elseif(i1==1211117620)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,N6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,FR4)
call BNE(O5,it,3,D74)
call BNE(O5,it,4,DR4)
call BNE(O5,it,5,F5)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=R1Q
set BWE[1]=N5
endif
elseif(i1==1160786520)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,T1)
call BNE(O5,it,3,C0)
call BNE(O5,it,4,DR4)
call BNE(O5,it,5,D74)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=N5
set BWE[1]=RLL
endif
elseif(i1==1311787088)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,T1)
call BNE(O5,it,3,D74)
call BNE(O5,it,4,Q1)
call BNE(O5,it,5,N5)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DP4
endif
elseif(i1==1315334514)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,C0)
call BNE(O5,it,3,J1)
call BNE(O5,it,4,X2)
call BNE(O5,it,5,B0)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=Z2
set BWE[1]=RLL
set BWE[2]=T2
endif
elseif(i1==1315074670)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,C0)
call BNE(O5,it,3,B0)
call BNE(O5,it,4,J1)
call BNE(O5,it,5,DR4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=Z2
set BWE[1]=RLL
set BWE[2]=T2
endif
elseif(i1==1311780946)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,F74)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,C0)
call BNE(O5,it,3,H2)
call BNE(O5,it,4,DP4)
call BNE(O5,it,5,DV4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=R2
set BWE[1]=RLL
endif
elseif(i1==1429221446)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,DS4)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,C0)
call BNE(O5,it,3,DP4)
call BNE(O5,it,4,R2)
call BNE(O5,it,5,R3)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DV4
set BWE[1]=RLL
endif
elseif(i1==1429221451)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,RW)
call BNE(O5,it,3,FR4)
call BNE(O5,it,4,D74)
call BNE(O5,it,5,Q1)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=N5
endif
elseif(i1==1430466865)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,RW)
call BNE(O5,it,3,DP4)
call BNE(O5,it,4,D44)
call BNE(O5,it,5,R2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DE4
endif
elseif(i1==1211117650)or(i1==1211119433)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,F74)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,T1)
call BNE(O5,it,3,FR4)
call BNE(O5,it,4,D74)
call BNE(O5,it,5,H2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=R2
endif
elseif(i1==1215723364)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,C0)
call BNE(O5,it,3,DR4)
call BNE(O5,it,4,J1)
call BNE(O5,it,5,Z2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=B0
set BWE[1]=T2
set BWE[1]=RLL
endif
elseif(i1==1332109682)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,F74)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,RW)
call BNE(O5,it,3,D74)
call BNE(O5,it,4,DP4)
call BNE(O5,it,5,D44)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=N5
endif
elseif(i1==1211117641)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,DG4)
call BNE(O5,it,3,T1)
call BNE(O5,it,4,FR4)
call BNE(O5,it,5,W2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=D74
endif
elseif(i1==1432642913)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,J1)
call BNE(O5,it,3,FR4)
call BNE(O5,it,4,WL)
call BNE(O5,it,5,R3)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=T2
set BWE[1]=L5
set BWE[2]=U3
endif
elseif(i1==1429221432)or(i1==1160786229)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,DG4)
call BNE(O5,it,3,VB)
call BNE(O5,it,4,WL)
call BNE(O5,it,5,U1)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=R2
set BWE[1]=U3
endif
elseif(i1==1429221430)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,DG4)
call BNE(O5,it,3,WL)
call BNE(O5,it,4,DR4)
call BNE(O5,it,5,Z2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=E2
set BWE[1]=U3
endif
elseif(i1==1215128178)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,F74)
call BNE(O5,it,1,DI4)
call BNE(O5,it,2,FR4)
call BNE(O5,it,3,D74)
call BNE(O5,it,4,DP4)
call BNE(O5,it,5,F5)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=N5
endif
elseif(i1==1328558160)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,W5)
call BNE(O5,it,3,B0)
call BNE(O5,it,4,E24)
call BNE(O5,it,5,Z2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=T2
endif
elseif(i1==1214931305)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,LB)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,T1)
call BNE(O5,it,3,C0)
call BNE(O5,it,4,D74)
call BNE(O5,it,5,DP4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=N5
set BWE[0]=RLL
endif
elseif(i1==1211117617)or(i1==1211122513)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,D0)
call BNE(O5,it,3,A1)
call BNE(O5,it,4,J1)
call BNE(O5,it,5,DH4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=R2
set BWE[1]=T2
set BWE[2]=L5
endif
elseif(i1==1212363833)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,E1)
call BNE(O5,it,3,Y0)
call BNE(O5,it,4,H2)
call BNE(O5,it,5,R1Q)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=R2
endif
elseif(i1==1212365106)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,E1)
call BNE(O5,it,3,J1)
call BNE(O5,it,4,WL)
call BNE(O5,it,5,W2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=T2
set BWE[1]=Z2
set BWE[2]=U3
endif
elseif(i1==1333027688)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,F74)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,RW)
call BNE(O5,it,3,FR4)
call BNE(O5,it,4,DP4)
call BNE(O5,it,5,D44)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=N5
endif
elseif(i1==1332179560)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,J1)
call BNE(O5,it,3,E1)
call BNE(O5,it,4,W2)
call BNE(O5,it,5,WL)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=T2
set BWE[1]=U3
set BWE[2]=Z2
endif
elseif(i1==1315070563)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,X1)
call BNE(O5,it,3,E1)
call BNE(O5,it,4,Y0)
call BNE(O5,it,5,WL)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=E2
set BWE[1]=U3
endif
elseif(i1==1214344551)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,DG4)
call BNE(O5,it,3,H2)
call BNE(O5,it,4,DP4)
call BNE(O5,it,5,N5)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DV4
endif
elseif(i1==1160785973)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,C0)
call BNE(O5,it,2,J1)
call BNE(O5,it,3,B0)
call BNE(O5,it,4,FR4)
call BNE(O5,it,5,Z2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=T2
set BWE[2]=RLL
endif
elseif(i1==1433631084)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,J1)
call BNE(O5,it,3,C0)
call BNE(O5,it,4,B0)
call BNE(O5,it,5,DR4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=X2
set BWE[1]=T2
set BWE[2]=RLL
endif
elseif(i1==1215130471)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,F74)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,DR4)
call BNE(O5,it,3,N5)
call BNE(O5,it,4,FR4)
call BNE(O5,it,5,D74)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DP4
endif
elseif(i1==1164799603)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,N6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,DR4)
call BNE(O5,it,3,FR4)
call BNE(O5,it,4,D74)
call BNE(O5,it,5,T5)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DP4
endif
elseif(i1==1432580716)or(i1==1429221720)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,F74)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,C0)
call BNE(O5,it,3,FR4)
call BNE(O5,it,4,J1)
call BNE(O5,it,5,DH4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=GC
set BWE[1]=T2
set BWE[2]=RLL
endif
elseif(i1==1214409837)or(i1==1211119192)or(i1==1211119193)or(i1==1211119191)or(i1==1211122243)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,LB)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,T1)
call BNE(O5,it,3,C0)
call BNE(O5,it,4,N5)
call BNE(O5,it,5,T5)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=D74
set BWE[1]=RLL
endif
elseif(i1==1433105516)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,F74)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,T1)
call BNE(O5,it,3,RW)
call BNE(O5,it,4,D74)
call BNE(O5,it,5,D44)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DP4
endif
elseif(i1==1211117643)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,F74)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,R1Q)
call BNE(O5,it,3,FR4)
call BNE(O5,it,4,DE4)
call BNE(O5,it,5,D74)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DP4
endif
elseif(i1==1211117633)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,N6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,T1)
call BNE(O5,it,3,D74)
call BNE(O5,it,4,FR4)
call BNE(O5,it,5,N5)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DP4
endif
elseif(i1==1332898670)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,F74)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,T1)
call BNE(O5,it,3,FR4)
call BNE(O5,it,4,DI4)
call BNE(O5,it,5,DR4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=D74
endif
elseif(i1==1211117624)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,F74)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,D84)
call BNE(O5,it,3,H2)
call BNE(O5,it,4,DH4)
call BNE(O5,it,5,DV4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=E2
set BWE[1]=U3
set BWE[2]=R2
endif
elseif(i1==1315988077)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,RW)
call BNE(O5,it,3,FR4)
call BNE(O5,it,4,WL)
call BNE(O5,it,5,R2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DH4
set BWE[1]=U3
endif
elseif(i1==1211117616)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,D84)
call BNE(O5,it,3,RW)
call BNE(O5,it,4,H2)
call BNE(O5,it,5,DH4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=R3
endif
elseif(i1==1215063922)or(i1==1211117638)or(i1==1211117637)or(i1==1211117639)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,C0)
call BNE(O5,it,3,DE4)
call BNE(O5,it,4,DR4)
call BNE(O5,it,5,DH4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=R2
set BWE[1]=RLL
endif
elseif(i1==1164207469)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,X1)
call BNE(O5,it,3,Y0)
call BNE(O5,it,4,WL)
call BNE(O5,it,5,Z2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=E2
set BWE[1]=U3
endif
elseif(i1==1160786000)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,F74)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,C0)
call BNE(O5,it,3,FR4)
call BNE(O5,it,4,D74)
call BNE(O5,it,5,DR4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=N5
set BWE[1]=RLL
endif
elseif(i1==1311781206)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,B0)
call BNE(O5,it,3,J1)
call BNE(O5,it,4,X2)
call BNE(O5,it,5,Z2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=L5
set BWE[1]=T2
endif
elseif(i1==1311781193)or(i1==1311781192)or(i1==1311781204)or(i1==1311781194)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,H2)
call BNE(O5,it,3,Y0)
call BNE(O5,it,4,R1Q)
call BNE(O5,it,5,DH4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=E2
endif
elseif(i1==1162032439)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,T1)
call BNE(O5,it,3,C0)
call BNE(O5,it,4,FR4)
call BNE(O5,it,5,D74)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DP4
set BWE[1]=RLL
endif
elseif(i1==1430466872)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,F74)
call BNE(O5,it,1,RW)
call BNE(O5,it,2,FR4)
call BNE(O5,it,3,F5)
call BNE(O5,it,4,DR4)
call BNE(O5,it,5,DI4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=N5
endif
elseif(i1==1430468406)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,F74)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,C0)
call BNE(O5,it,3,DI4)
call BNE(O5,it,4,F5)
call BNE(O5,it,5,DP4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=D74
set BWE[1]=N5
set BWE[1]=RLL
endif
elseif(i1==1164666213)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,F74)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,R1Q)
call BNE(O5,it,3,FR4)
call BNE(O5,it,4,DP4)
call BNE(O5,it,5,DR4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=D74
endif
elseif(i1==1433168227)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,LB)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,C0)
call BNE(O5,it,3,FR4)
call BNE(O5,it,4,DP4)
call BNE(O5,it,5,D44)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=D74
set BWE[1]=RLL
endif
elseif(i1==1311786311)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,N6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,C0)
call BNE(O5,it,3,DR4)
call BNE(O5,it,4,FR4)
call BNE(O5,it,5,E2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=T2
set BWE[1]=RLL
endif
elseif(i1==1160786265)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,U1)
call BNE(O5,it,3,B0)
call BNE(O5,it,4,E2)
call BNE(O5,it,5,A1)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=Z2
set BWE[1]=L5
endif
elseif(i1==1311780930)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,N6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,RW)
call BNE(O5,it,3,F5)
call BNE(O5,it,4,FR4)
call BNE(O5,it,5,D74)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DP4
set BWE[1]=N5
endif
elseif(i1==1211117649)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,R3)
call BNE(O5,it,3,FR4)
call BNE(O5,it,4,C0)
call BNE(O5,it,5,DH4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=R2
set BWE[1]=RLL
endif
elseif(i1==1211119187)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,RLL)
call BNE(O5,it,3,X1)
call BNE(O5,it,4,DR4)
call BNE(O5,it,5,V1)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DH4
endif
elseif(i1==1211117652)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,AL)
call BNE(O5,it,3,FR4)
call BNE(O5,it,4,DR4)
call BNE(O5,it,5,N5)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=H2
endif
elseif(i1==1313026096)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,D84)
call BNE(O5,it,3,DE4)
call BNE(O5,it,4,X1)
call BNE(O5,it,5,DH4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=D0
endif
elseif(i1==1328558154)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,R3)
call BNE(O5,it,3,FR4)
call BNE(O5,it,4,DH4)
call BNE(O5,it,5,U3)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DE4
endif
elseif(i1==1429221441)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,J1)
call BNE(O5,it,3,E1)
call BNE(O5,it,4,Y0)
call BNE(O5,it,5,WL)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DH4
set BWE[1]=U3
set BWE[2]=T2
endif
elseif(i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,B0)
call BNE(O5,it,3,X2)
call BNE(O5,it,4,DR4)
call BNE(O5,it,5,Z2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=E2
endif
elseif(i1==1162032951)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,C0)
call BNE(O5,it,3,B0)
call BNE(O5,it,4,DP4)
call BNE(O5,it,5,Z2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=E24
set BWE[1]=RLL
endif
elseif(i1==1160785970)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,C0)
call BNE(O5,it,3,T2)
call BNE(O5,it,4,FR4)
call BNE(O5,it,5,A1)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=Z2
set BWE[1]=RLL
set BWE[2]=L5
endif
elseif(i1==1160786510)or(i1==1160786511)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,FR4)
call BNE(O5,it,3,C0)
call BNE(O5,it,4,J1)
call BNE(O5,it,5,Z2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=E2
set BWE[1]=T2
set BWE[2]=RLL
endif
elseif(i1==1432510828)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,X2)
call BNE(O5,it,3,H2)
call BNE(O5,it,4,DR4)
call BNE(O5,it,5,Z2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=R2
endif
elseif(i1==1165451634)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,X1)
call BNE(O5,it,3,J1)
call BNE(O5,it,4,WL)
call BNE(O5,it,5,Z2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=E2
set BWE[1]=T2
set BWE[2]=U3
endif
elseif(i1==1162032181)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,X1)
call BNE(O5,it,3,J1)
call BNE(O5,it,4,Z2)
call BNE(O5,it,5,E2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=L5
set BWE[1]=T2
endif
elseif(i1==1215722344)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,U1)
call BNE(O5,it,3,H2)
call BNE(O5,it,4,J1)
call BNE(O5,it,5,N5)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=Z2
set BWE[1]=T2
endif
elseif(i1==1160786242)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,H2)
call BNE(O5,it,3,U3)
call BNE(O5,it,4,Y0)
call BNE(O5,it,5,E1)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=R2
endif
elseif(i1==1311788336)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,X1)
call BNE(O5,it,3,DE4)
call BNE(O5,it,4,L5)
call BNE(O5,it,5,WL)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=W2
set BWE[1]=U3
endif
elseif(i1==1211119409)or(i1=='H0EV')then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,E1)
call BNE(O5,it,3,WL)
call BNE(O5,it,4,J1)
call BNE(O5,it,5,DR4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=W2
set BWE[1]=T2
set BWE[2]=U3
endif
elseif(i1==1332766568)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,DS4)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,D84)
call BNE(O5,it,3,RW)
call BNE(O5,it,4,AL)
call BNE(O5,it,5,H2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DH4
endif
elseif(i1==1160786738)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,DI4)
call BNE(O5,it,3,D74)
call BNE(O5,it,4,F5)
call BNE(O5,it,5,DP4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=D0
set BWE[1]=N5
endif
elseif(i1==1160786507)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,C0)
call BNE(O5,it,3,J1)
call BNE(O5,it,4,DH4)
call BNE(O5,it,5,WL)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=R2
set BWE[1]=U3
set BWE[2]=T2
set BWE[3]=RLL
endif
elseif(i1==1430467634)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,C0)
call BNE(O5,it,3,FR4)
call BNE(O5,it,4,D74)
call BNE(O5,it,5,DP4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=R2
set BWE[1]=RLL
endif
elseif(i1==1160786505)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,C0)
call BNE(O5,it,3,D74)
call BNE(O5,it,4,WL)
call BNE(O5,it,5,DH4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=R2
set BWE[1]=U3
set BWE[2]=RLL
endif
elseif(i1==1430468913)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,RW)
call BNE(O5,it,3,V1)
call BNE(O5,it,4,DH4)
call BNE(O5,it,5,E2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=R2
endif
elseif(i1==1328558389)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,H6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,D74)
call BNE(O5,it,3,F5)
call BNE(O5,it,4,DE4)
call BNE(O5,it,5,WL)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DH4
set BWE[1]=U3
set BWE[2]=N5
endif
elseif(i1==1211117646)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,F74)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,T1)
call BNE(O5,it,3,N5)
call BNE(O5,it,4,D74)
call BNE(O5,it,5,FR4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DH4
endif
elseif(i1==1429221424)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,F74)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,F5)
call BNE(O5,it,3,D74)
call BNE(O5,it,4,V1)
call BNE(O5,it,5,Q1)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DP4
set BWE[1]=N5
endif
elseif(i1==1160786502)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,F74)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,D74)
call BNE(O5,it,3,F5)
call BNE(O5,it,4,DP4)
call BNE(O5,it,5,R2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=R3
set BWE[1]=N5
endif
elseif(i1==1328558406)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,F74)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,C0)
call BNE(O5,it,3,DR4)
call BNE(O5,it,4,N5)
call BNE(O5,it,5,T1)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=D74
set BWE[1]=RLL
endif
elseif(i1==1429221445)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,F74)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,H2)
call BNE(O5,it,3,FR4)
call BNE(O5,it,4,DR4)
call BNE(O5,it,5,DP4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=R2
endif
elseif(i1==1211117640)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,F74)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,C0)
call BNE(O5,it,3,FR4)
call BNE(O5,it,4,D74)
call BNE(O5,it,5,F5)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DP4
set BWE[1]=RLL
set BWE[2]=N5
endif
elseif(i1==1311781207)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,F74)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,T1)
call BNE(O5,it,3,FR4)
call BNE(O5,it,4,D74)
call BNE(O5,it,5,N5)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DV4
endif
elseif(i1==1160786241)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,F74)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,C0)
call BNE(O5,it,3,FR4)
call BNE(O5,it,4,D74)
call BNE(O5,it,5,DR4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DE4
set BWE[1]=RLL
endif
elseif(i1==1160786243)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,N6)
call BNE(O5,it,1,DU4)
call BNE(O5,it,2,FR4)
call BNE(O5,it,3,R5)
call BNE(O5,it,4,D44)
call BNE(O5,it,5,DP4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=T5
endif
elseif(i1==1332963428)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,N6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,D74)
call BNE(O5,it,3,FR4)
call BNE(O5,it,4,C0)
call BNE(O5,it,5,DR4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DP4
set BWE[1]=RLL
endif
elseif(i1==1430468144)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,N6)
call BNE(O5,it,1,T1)
call BNE(O5,it,2,FR4)
call BNE(O5,it,3,DP4)
call BNE(O5,it,4,D74)
call BNE(O5,it,5,DR4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=X2
endif
elseif(i1==1160786506)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,N6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,C0)
call BNE(O5,it,3,N3)
call BNE(O5,it,4,D74)
call BNE(O5,it,5,DR4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DP4
set BWE[1]=RLL
endif
elseif(i1==1160786504)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,N6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,C0)
call BNE(O5,it,3,D74)
call BNE(O5,it,4,F5)
call BNE(O5,it,5,DR4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DP4
set BWE[1]=N5
set BWE[2]=RLL
endif
elseif(i1==1328558390)or(i1==1328558391)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,N6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,RW)
call BNE(O5,it,3,D74)
call BNE(O5,it,4,F5)
call BNE(O5,it,5,DP4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DV4
set BWE[2]=N5
endif
elseif(i1==1211117653)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,N6)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,DR4)
call BNE(O5,it,3,D74)
call BNE(O5,it,4,FR4)
call BNE(O5,it,5,X2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=DP4
endif
elseif(i1==1311781199 or i1==1311781171 or i1==1311781172 or i1==1311781173)then
if GE7[112+O5]then
set u=ZHE(O5,it,(not BUE))
set GE7[$C0+O5]=true
else
set u=null
endif
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,G6)
call BNE(O5,u,1,DS4)
call J_7(1.)
call BNE(O5,it,2,DT4)
call BNE(O5,u,3,H2)
call BNE(O5,it,4,U1)
call BNE(O5,it,5,DG4)
call BNE(O5,u,6,DH4)
call BNE(O5,u,7,U3)
call BNE(O5,it,8,V1)
call BNE(O5,u,9,DP4)
call BNE(O5,u,$A,R2)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=Z2
set BWE[1]=E2
endif
set u=null
elseif(i1==1311788363)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,F74)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,S6)
call BNE(O5,it,3,DU4)
call BNE(O5,it,4,R5)
call BNE(O5,it,5,F5)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=D74
set BWE[1]=T5
set BWE[2]=N5
set BWE[3]=FC
endif
elseif(i1==1311788343)then
if(G97[$90+O5]==1)and(not GE7[$A0+O5])then
call BNE(O5,it,0,F74)
call BNE(O5,it,1,DT4)
call BNE(O5,it,2,D74)
call BNE(O5,it,3,N5)
call BNE(O5,it,4,Q1)
call BNE(O5,it,5,DP4)
endif
if(G97[$90+O5]==2)or(GE7[$A0+O5])then
set BWE[0]=R1Q
endif
else
set J4=true
endif
if(not GE7[112+O5])then
set GE7[112+O5]=true
set G97[32+O5]=0
set G97[$90+O5]=0
set Q04[112+O5]=CreateTrigger()
call TriggerAddAction(Q04[112+O5],function BGE)
call NP7(GetHandleId(Q04[112+O5]),"p",O5)
return
endif
if(not J4)and((G97[$90+O5]==2)or(GE7[$A0+O5]))and(M87(it))then
if BUE then
set GE7[$B0+O5]=true
else
if not GE7[80+O5]then
call B7E(O5)
set GE7[80+O5]=true
set GE7[$B0+O5]=true
endif
endif
set MA7=true
if G97[112+O5]!=0 and G97[432+O5]!=2 then
set ZPE=-1
else
set ZPE=0
endif
if(G97[464+O5]<G97[480+O5]+ZPE)and(not GE7[48+O5])then
loop
exitwhen(G97[464+O5]>=G97[480+O5]+ZPE)
set MA7=false
set ZQE=LoadInteger(C_4,G97[448+O5],G97[464+O5])
set i=0
loop
exitwhen(i>23)or MA7
if(GD7[O5*24+i]==ZQE)then
set MA7=true
elseif MX7(ZQE,GD7[O5*24+i],false)then
set MA7=true
endif
if MA7 then
exitwhen true
endif
set i=i+1
endloop
if MA7 then
set MA7=A_E(O5,it,ZQE,G87[O5*24+i],true)
else
set MA7=BNE(O5,it,-2,ZQE)
endif
if(MA7)then
set G97[464+O5]=G97[464+O5]+1
else
exitwhen true
endif
endloop
endif
if G97[112+O5]==0 and MA7 then
if IsPlayerAlly(Player(O5),Z7[0])then
set BZE="Sent|"
else
set BZE="Scrg|"
endif
set BYE=false
loop
set BXE=false
set ZPE=1
if GE7[64+O5]then
set ZPE=0
endif
set MA7=true
loop
set i=Y5E(O5)
exitwhen((i<=ZPE)or(MA7==false))
set k=0
set i=0
set JA7=0
set BAE=0
loop
exitwhen i>9
if BWE[i]!=0 then
set JA7=i+1
endif
if BWE[$A+i]!=0 then
set BAE=i+1
endif
set i=i+1
endloop
set i=0
set MA7=false
loop
exitwhen(((not GE7[64+O5])and(i>=JA7+JA7))or(i>=JA7+JA7+BAE+BAE))
if i<JA7 then
set j=GetRandomInt(0,JA7)
elseif i<JA7+JA7 then
set j=i-JA7
elseif i<JA7+JA7+BAE then
set j=$A+GetRandomInt(0,BAE)
else
set j=$A+(i-(JA7+JA7+BAE))
endif
if BWE[j]!=0 then
if(BWE[j]==T2 and(OO7(R44,YNE(it)+"|Xb")))then
set BWE[j]=0
else
set k=OM7(1128887405,BZE+I2S(BWE[j]))
set ZQE=OM7(1128877176,I2S(GetHandleId(it))+"|"+I2S(BWE[j]))
if(k>=1)or(((not ZDE(BWE[j]))and(ZQE>0))or(ZQE>1))or(Z4E(O5,it,BWE[j])==false and(BWE[j]==T2 and MR7(it,J1))==false)then
set BWE[j]=0
else
set MA7=BNE(O5,it,-2,BWE[j])
call SaveInteger(C_4,G97[448+O5],G97[480+O5],BWE[j])
set G97[480+O5]=G97[480+O5]+1
exitwhen true
endif
endif
endif
set i=i+1
endloop
endloop
call B7E(O5)
if G97[112+O5]==0 and(not BYE)then
set BYE=true
set MA7=true
loop
exitwhen MA7==false
set i=0
set j=0
set JA7=0
set k=0
set ZQE=-1
set MA7=false
loop
exitwhen(i>5)
set bj_lastCreatedItem=UnitItemInSlot(it,i)
set ZPE=KY7(bj_lastCreatedItem)
set j=0
if(LoadInteger(C_4,G97[$E0+O5],GetHandleId(bj_lastCreatedItem))!=0)or(OO7(1129085013,I2S(GetHandleId(it))+"|"+I2S(ZPE)))then
elseif(ZPE==RX)then
set j=$A
elseif(ZPE==DJ4)then
if(OM7(1128887405,BZE+I2S(DV4))<=1)then
set j=$A
else
set j=1
endif
elseif(ZPE==J1)then
set j=8
elseif((ZPE==VB or ZPE==WB)and(not MR7(it,ZU[DH4]))and(OM7(1128887405,BZE+I2S(DH4))<=1))then
set j=12
elseif(ZPE==R5 or ZPE==S5)then
set j=7
elseif(ZPE==F5 or ZPE==G5 or ZPE==J5 or ZPE==M5)then
set j=6
elseif((ZPE==D1 and GetItemCharges(bj_lastCreatedItem)<=3)or ZPE==F1)or(ZPE==DK4 or ZPE==DM4)or(ZPE==D84 or ZPE==D94)then
set j=5
elseif(ZPE==A1)then
set j=4
elseif(ZPE==WL)then
set j=4
elseif(ZPE==C0)then
set j=4
elseif(ZPE==H1)then
set j=4
elseif(ZPE==DR4)then
set j=4
elseif(ZPE==FV or ZPE==G6 or ZPE==H6 or ZPE==N6 or ZPE==DS4 or ZPE==LB or ZPE==EC or ZPE==F74 or ZPE==F6)and(not GE7[64+O5])then
set j=3
endif
if j>JA7 then
set JA7=j
set k=i
set ZQE=ZPE
endif
set i=i+1
endloop
if JA7!=0 then
if BUE then
call SaveInteger(C_4,G97[$E0+O5],GetHandleId(bj_lastCreatedItem),G97[48+O5])
endif
call NS7(1129085013,I2S(GetHandleId(it))+"|"+I2S(ZQE),true)
call Y0E(O5,it)
if(ZQE==RX)then
set MA7=BNE(O5,it,-2,DJ4)
set ZQE=DJ4
elseif(ZQE==DJ4)and(OM7(1128887405,BZE+I2S(DV4))<=1)then
set MA7=BNE(O5,it,-2,DV4)
set ZQE=DV4
elseif(ZQE==J1)then
set MA7=BNE(O5,it,-2,T2)
set ZQE=T2
elseif(ZQE==R5 or ZQE==S5)then
set MA7=BNE(O5,it,-2,T5)
set ZQE=T5
elseif(ZQE==F5 or ZQE==G5 or ZQE==J5 or ZQE==M5)then
set MA7=BNE(O5,it,-2,N5)
set ZQE=N5
elseif(ZQE==D1 or ZQE==F1)then
set MA7=BNE(O5,it,-2,E1)
set ZQE=E1
elseif(ZQE==A1)then
set MA7=BNE(O5,it,-2,L5)
set ZQE=L5
elseif(ZQE==WL)then
set MA7=BNE(O5,it,-2,U3)
set ZQE=U3
elseif(ZQE==C0)then
set MA7=BNE(O5,it,-2,RLL)
set ZQE=RLL
elseif(ZQE==H1)then
set MA7=BNE(O5,it,-2,E1)
set ZQE=E1
elseif(ZQE==DR4)then
set MA7=BNE(O5,it,-2,R7t)
set ZQE=R7t
elseif(ZQE==FV or ZQE==G6 or ZQE==H6 or ZQE==N6 or ZQE==DS4 or ZQE==LB or ZQE==EC or ZQE==F74 or ZQE==F6)then
set MA7=BNE(O5,it,-2,FF6)
if MA7 then
set BXE=true
endif
set ZQE=FF6
elseif(ZQE==DJ4)then
set MA7=BNE(O5,it,-2,DV4)
set ZQE=DV4
elseif(ZQE==VB or ZQE==WB)then
set G97[336+O5]=ZQE
set MA7=BNE(O5,it,-2,DH4)
set ZQE=DH4
elseif(ZQE==DK4 or ZQE==DM4)or(ZPE==D84 or ZPE==D94)then
set G97[336+O5]=ZQE
set MA7=BNE(O5,it,-2,R2)
set ZQE=R2
endif
call SaveInteger(C_4,G97[448+O5],G97[480+O5],ZQE)
set G97[480+O5]=G97[480+O5]+1
endif
endloop
endif
exitwhen(not BXE)
endloop
endif
endif
if(not J4)and(i!=0)and(not GE7[64+O5])and(not BUE)and(not MR7(it,ZU[YC]))and(GetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD)>=HK4[YC])then
set ZPE=ZRE(O5,false)-5
if ZPE>0 then
set j=ZME(O5,false,false)
if j!=-1 then
call ZAE(O5,it,G87[O5*24+j],GD7[O5*24+j])
endif
endif
endif
if(not J4)and(i==0)then
call B7E(O5)
set ZPE=YYE(O5,it,false)
if GetHeroLevel(it)>=6 and GE7[64+O5]==false then
set ZPE=ZPE-1
endif
if ZPE>0 and true then
call SetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD)+HK4[GY])
call B4E(O5,it,GY,false)
set ZPE=ZPE-1
endif
if MR7(it,ZU[TC])then
call B4E(O5,it,TC,false)
endif
set G97[320+O5]=ZPE
loop
exitwhen(ZPE<=0)
call B4E(O5,it,QW,false)
set ZPE=ZPE-1
endloop
endif
set GE7[48+O5]=false
if not BUE then
if G97[48+O5]<G97[32+O5]then
set G97[48+O5]=G97[32+O5]
endif
if GE7[$C0+O5]then
call ZKE(O5,null)
endif
call FlushChildHashtable(C_4,G97[$E0+O5])
endif
call FlushChildHashtable(C_4,G97[$D0+O5])
call FlushChildHashtable(C_4,G97[368+O5])
set G97[$A0+O5]=0
if BTE(O5,BUE)then
call BSE(O5)
elseif G97[432+O5]==2 then
call B7E(O5)
set G97[$C0+O5]=0
set GE7[$80+O5]=false
set GE7[$90+O5]=false
set KU4[32+O5]=KU4[O5]
endif
endfunction
function BBE takes unit it returns nothing
local integer i1=GetUnitTypeId(it)
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer UP
local integer i
local integer j
local item KA7=null
local boolean MA7=true
local boolean BCE=false
local boolean B3E=(not BHE(O5))
if(not((Bz>=QD4-30.)and(Bz>G97[$B0+O5])and(i1!=1211117642)))or GE7[$E0+O5]then
return
endif
set G97[$B0+O5]=R2I(Bz)+30
set hq[592+O5]=Bz+180.
set G0[320+O5]=false
if(GetUnitState(it,UNIT_STATE_LIFE)>1000. or GetUnitState(it,UNIT_STATE_LIFE)/GetUnitState(it,UNIT_STATE_MAX_LIFE)>.8)==false and G97[96+O5]!=0 then
if(GetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD)>=HK4[G97[96+O5]])then
call BVE(O5,it,true)
endif
endif
loop
exitwhen GetUnitState(it,UNIT_STATE_LIFE)>1000. or GetUnitState(it,UNIT_STATE_LIFE)/GetUnitState(it,UNIT_STATE_MAX_LIFE)>.8
if GetUnitState(it,UNIT_STATE_LIFE)<=.405 or IG4[O5]then
set G97[$B0+O5]=0
return
endif
call TriggerSleepAction(1.)
endloop
if(T14 and T_4[O5])then
if(UnitHasItem(it,U74[O5]))then
call DisableTrigger(H94)
call UnitRemoveItem(it,U74[O5])
call RemoveItem(U74[O5])
call SetItemVisible(U74[O5],false)
call EnableTrigger(H94)
endif
if(U44[O5]!=null)then
call J_7(.2)
call UnitAddItem(it,U44[O5])
endif
set U74[O5]=null
set U44[O5]=null
endif
if(UD4[O5])then
if(MR7(it,ZU[YC]))then
set U94[O5]=bj_lastCreatedItem
call DisableTrigger(H94)
call UnitRemoveItem(it,U94[O5])
call SetItemPosition(U94[O5],9999,-9999)
call SetItemVisible(U94[O5],false)
call EnableTrigger(H94)
set U94[O5]=null
endif
if(U84[O5]!=null)then
call J_7(.2)
call UnitAddItem(it,U84[O5])
endif
set UD4[O5]=false
set U84[O5]=null
endif
if(MR7(it,ZU[DK4])and(OT7(it,"ArmletOfMordigan|Active")))then
call UnitUseItem(it,bj_lastCreatedItem)
endif
loop
call TriggerSleepAction(.1)
exitwhen Bz>G97[$A0+O5]
if GetWidgetLife(it)<.405 then
set KA7=null
set G97[$B0+O5]=0
return
endif
endloop
if((R4)and(hG[$80+O5]>0))then
set UP=GetPlayerState(GetOwningPlayer(it),PLAYER_STATE_RESOURCE_GOLD)
if(UP>=hG[$80+O5])then
call SetPlayerStateBJ(GetOwningPlayer(it),PLAYER_STATE_RESOURCE_GOLD,UP-hG[$80+O5])
set hG[$80+O5]=0
else
call SetPlayerStateBJ(GetOwningPlayer(it),PLAYER_STATE_RESOURCE_GOLD,0)
set hG[$80+O5]=hG[$80+O5]-UP
endif
endif
set UP=0
set LI4=null
loop
set KA7=UnitItemInSlot(it,UP)
set i=GetPlayerId(GetItemPlayer(KA7))
if((KA7!=null)and((i!=O5))and(i!=$F))then
if IsUnitEnemy(it,Player(i))then
set i=O5
else
if LI4==null then
set LI4=CreateForce()
call ForceEnumAllies(LI4,Player(O5),null)
endif
set bj_forLoopAIndex=GetPlayerId(GetItemPlayer(KA7))
call PP7(it,LI4,GetObjectName(1496331312)+Q[bj_forLoopAIndex]+GetPlayerName(Player(bj_forLoopAIndex))+GetObjectName(1496331313)+GetItemName(KA7)+GetObjectName(1496331314))
endif
set j=KY7(KA7)
set LJ4=CreateItem(SU[j],GetUnitX(KU4[i]),GetUnitY(KU4[i]))
call SetItemPlayer(LJ4,GetItemPlayer(KA7),false)
call SetItemCharges(LJ4,GetItemCharges(KA7))
call RemoveItem(KA7)
set KA7=null
endif
set UP=UP+1
exitwhen(UP>=bj_MAX_INVENTORY)
endloop
if LI4!=null then
call DestroyForce(LI4)
set LI4=null
endif
call TriggerSleepAction(.1)
set GE7[48+O5]=false
set G87[304+O5]=null
if MA7 and B3E and(G97[32+O5]<G97[48+O5])then
loop
set UP=OM7(1128887405,I2S(GetHandleId(it))+"|s"+I2S(G97[32+O5]))
if UP!=0 then
if G97[32+O5]>G97[$F0+O5]then
set i=-2
else
set i=G97[32+O5]
endif
set MA7=BNE(O5,it,i,UP)
endif
exitwhen G97[32+O5]==G97[48+O5]or UP==0 or(not MA7)
endloop
elseif(not B3E)then
set MA7=false
endif
call Y3E(O5)
set G97[320+O5]=0
if MA7 and G97[96+O5]!=0 and(not GE7[$90+O5])then
set MA7=(GetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD)>=HK4[G97[96+O5]])
endif
if MA7 and G97[112+O5]!=0 and G97[$90+O5]!=1 and(not BHE(O5))then
set MA7=BNE(O5,it,-2,G97[112+O5])
call B7E(O5)
endif
if B3E then
if(not GC7)and((OO7(R44,YNE(it)+"|W"))and(GetHeroLevel(it)>6))and(not YVE(O5,it))then
if((MR7(it,ZU[F6])or MR7(it,ZU[FF6]))or(i1==1164799603)or(i1==1160786242)or(i1==1211117641)or(i1==1311780946)or(YOE(it)))then
if(OO7(R44,YNE(it)+"|G"))and(GetHeroLevel(it)>$B)and(GetUnitState(it,UNIT_STATE_MAX_LIFE)>1500.)and(Bz>=ON7(R44,YNE(it)+"|GTimer"))and(BOE(O5,it,EW,true))then
call NQ7(R44,YNE(it)+"|GTimer",Bz+480.)
elseif((i1!=1315007329)and(i1!=1215722344)and(i1!=1430468913)and(i1!=1311781185))then
if(JP7(i1)<=2 or GetRandomInt(1,3)==1)then
call BOE(O5,it,CC,true)
else
call BOE(O5,it,WC,true)
endif
endif
endif
endif
if(not BCE)and((not GE7[64+O5])and((GetHeroLevel(it)>$A)or(GetUnitState(it,UNIT_STATE_MAX_LIFE)>$3E8))and(i1!=1164799603)and(i1!=1160786242)and(i1!=1211117641)and(i1!=1311780946))then
if not(MR7(it,ZU[YC])or MR7(KU4[O5],ZU[YC]))and(not MS7(it))then
call B4E(O5,it,YC,true)
set BCE=true
endif
endif
call BOE(O5,it,RX,(((GetHeroLevel(it)<17)and(OO7(R44,YNE(it)+"|X"))and(i1!=1429221446)and(i1!=1164207469)and(i1!=1162032951))and((not MR7(it,ZU[DJ4]))and(not MR7(it,ZU[DV4])))))
if MA7 or(G97[32+O5]<G97[48+O5])then
call BVE(O5,it,false)
endif
set G97[$C0+O5]=0
set GE7[$80+O5]=false
set GE7[$90+O5]=false
set GE7[320+O5]=true
call B7E(O5)
set G87[304+O5]=null
if(not BCE)and((not GE7[64+O5])and((GetHeroLevel(it)>$A)or(GetUnitState(it,UNIT_STATE_MAX_LIFE)>$3E8))and(i1!=1164799603)and(i1!=1160786242)and(i1!=1211117641)and(i1!=1311780946))and(not MS7(it))then
if not(MR7(it,ZU[YC])or MR7(KU4[O5],ZU[YC]))and(not MS7(it))then
call B4E(O5,it,YC,true)
set BCE=true
endif
endif
if(PY4)then
call BOE(O5,it,TC,(GetHeroLevel(it)<8)and(GetUnitState(it,UNIT_STATE_MAX_LIFE)<$3E8))
else
call BOE(O5,it,QC,(GetHeroLevel(it)<8)and(GetUnitState(it,UNIT_STATE_MAX_LIFE)<$3E8))
endif
call YLE(O5,1)
if MR7(it,ZU[YC])and GetItemCharges(bj_lastCreatedItem)==1 then
call B4E(O5,it,YC,false)
endif
if MR7(it,ZU[WC])and GetItemCharges(bj_lastCreatedItem)==1 then
call B4E(O5,it,WC,false)
endif
if MR7(it,ZU[TC])and GetItemCharges(bj_lastCreatedItem)==1 then
call B4E(O5,it,TC,false)
endif
if MR7(it,ZU[QC])and GetItemCharges(bj_lastCreatedItem)==1 then
call B4E(O5,it,QC,false)
endif
if MR7(it,ZU[WB])then
call B4E(O5,it,F84,false)
endif
call YLE(O5,0)
call Y3E(O5)
call BRE(O5)
call Y0E(O5,it)
call ZKE(O5,null)
endif
set G97[$B0+O5]=0
set it=null
set KA7=null
endfunction
function B6E takes nothing returns nothing
local unit u
local integer j
local integer JA7
local integer k
local integer O5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)then
call BBE(GetTriggerUnit())
elseif false and(Bz>=G97[$A0+O5])and(Bz>G97[$B0+O5])and(AS7(GetTriggerUnit()))then
set u=GetTriggerUnit()
set G97[$A0+O5]=R2I(Bz)+30
call Y0E(O5,u)
set j=6
set k=G97[$80+O5]-1
loop
exitwhen j>k
if G87[O5*24+j]!=null and(LoadBoolean(C_4,G97[256+O5],GetHandleId(G87[O5*24+j])))then
set JA7=ZVE(O5,u,GD7[O5*24+j],G87[O5*24+j],false,true,false)
if JA7!=-1 and JA7<6 then
set G87[O5*24+JA7]=G87[O5*24+j]
set GD7[O5*24+JA7]=GD7[O5*24+j]
endif
call SetItemVisible(G87[O5*24+j],false)
set G87[O5*24+j]=null
endif
set j=j+1
endloop
set u=null
set G97[$A0+O5]=0
endif
endfunction
function BLE takes nothing returns nothing
local integer O5=1
local integer B1E=$B
local boolean MA7=false
local boolean J4=true
local integer i=R2I(Bz)+30
loop
exitwhen O5>B1E
if O5==6 then
set O5=7
endif
set MA7=true
set J4=false
if TZ7(Player(O5))and M7[O5]!=null and(Bz>G97[$A0+O5])and(Bz>G97[$B0+O5])and(KE7(M7[O5],h9[16+O5])>$4B0)then
if MA7 and G97[96+O5]!=0 then
set MA7=(GetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD)>=HK4[G97[96+O5]])
endif
if((MA7)and(G97[96+O5]!=0)and(G97[$90+O5]==1)and(eY[O5]==1)and(eY[80+O5]==1 or eY[80+O5]==2)and(G97[32+O5]==G97[48+O5])and(YUE(G97[96+O5]))and(not GZ[$A0+O5])and((not MS7(M7[O5]))or(G97[320+O5]>0)))and(not GE7[288+O5])then
set GE7[$F0+O5]=true
set MA7=false
elseif GE7[$F0+O5]then
set GE7[$F0+O5]=false
set bj_forLoopAIndex=GetUnitUserData(h8[O5])
if bj_forLoopAIndex>100 then
call UQ7(M7[O5])
endif
endif
if MA7 and G97[112+O5]!=0 and G97[$90+O5]!=1 and(not BHE(O5))then
set G97[$A0+O5]=i
set G97[$B0+O5]=i
set GE7[48+O5]=true
set MA7=BNE(O5,M7[O5],-2,G97[112+O5])
if MA7 then
set G97[112+O5]=0
endif
set G97[$A0+O5]=0
set G97[$B0+O5]=0
set GE7[48+O5]=false
set J4=true
endif
if MA7 then
set G97[$B0+O5]=i
call BVE(O5,M7[O5],true)
set G97[$B0+O5]=0
elseif J4 then
call FlushChildHashtable(C_4,G97[$D0+O5])
endif
if(G97[$C0+O5]>GH7)and(GE7[$90+O5])then
set GE7[$80+O5]=true
endif
if BTE(O5,true)then
call BSE(O5)
endif
endif
set O5=O5+1
endloop
endfunction
function B0E takes nothing returns nothing
if(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_USER and QY4[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]==false)then
if((GetItemPlayer(GetManipulatedItem())!=null)and(GetItemPlayer(GetManipulatedItem())!=Player($F))and(GetItemPlayer(GetManipulatedItem())!=GetOwningPlayer(GetTriggerUnit()))and((GetItemType(GetManipulatedItem())==ITEM_TYPE_POWERUP)or(KE7(GetTriggerUnit(),NF7(GetTriggerUnit()))<=2000.)))then
call UnitAddItem(M7[GetPlayerId(GetItemPlayer(GetManipulatedItem()))],GetManipulatedItem())
elseif((GetItemPlayer(GetManipulatedItem())==null)or(GetItemPlayer(GetManipulatedItem())==Player($F)))then
call SetItemPlayer(GetManipulatedItem(),GetOwningPlayer(GetTriggerUnit()),false)
endif
endif
endfunction
function B5E takes integer O5,real x,real y returns nothing
local unit it=CreateUnit(Player($F),1697656899,x,y,270.)
local texttag t=null
call UnitAddAbility(it,1097625443)
call UnitAddAbility(it,1093678162)
call UnitAddAbility(it,1093685300)
call SetUnitUserData(it,O5)
set h7[O5]=it
call SetUnitX(it,x)
call SetUnitY(it,y)
if(((O5>$A)and(O5<18))or((O5>30)and(O5<40))or((O5>50)and(O5<60)))then
call GroupAddUnit(ii,it)
endif
set it=null
endfunction
function B2E takes integer O5,integer UM7,integer UN7,real x,real y returns nothing
call B5E(O5,x,y)
set hj[O5]=UM7
set hj[256+O5]=UN7
endfunction
function B_E takes integer i,boolean JY7,real C4E returns integer
if i>5 and i<$B then
set i=$B
elseif i>17 and i<25 then
set i=17
elseif i>25 and i<31 then
set i=31
elseif i>39 and i<45 then
set i=39
elseif i>45 and i<51 then
set i=51
elseif i>59 and i<100 then
set i=59
endif
if C4E>$7D0 then
return i
endif
if i>=$B and i<=17 then
if JY7 then
if i>$F and P14==0 then
set i=$F
elseif i>16 and P14<=1 then
set i=16
endif
else
if i<$D and P34==0 then
set i=$D
elseif i<$C and P34<=1 then
set i=$C
endif
endif
elseif i>=31 and i<=39 then
if JY7 then
if i>35 and P04==0 then
set i=35
elseif i>37 and P04<=1 then
set i=37
endif
else
if i<34 and P64==0 then
set i=34
elseif i<33 and P64<=1 then
set i=33
endif
endif
elseif i>=51 and i<=59 then
if JY7 then
if i>57 and P54==0 then
set i=57
elseif i>58 and P54<=1 then
set i=58
endif
else
if i<55 and PL4==0 then
set i=55
elseif i<52 and PL4<=1 then
set i=52
endif
endif
endif
return i
endfunction
function C7E takes integer O5,integer i,integer k,boolean JY7 returns integer
if(i==31)or(i==32)then
return 334
elseif(i==33)then
return 328
elseif(i==34)then
if(h8[96+O5]==null or(GetUnitX(h7[35])-GetUnitY(h8[96+O5]))<=2100.)and G0[$D0+O5]then
return 329
else
set G0[$D0+O5]=false
return 326
endif
elseif(i==35)or(i==36)then
return 329
elseif(i==37)or(i==38)or(i==39)then
return 330
elseif(i==51)or(i==52)or(i==53)then
return 331
elseif(i==54)or(i==55)or(i==56)then
return 332
elseif(i==57)then
if(h8[96+O5]==null or(GetUnitY(h8[96+O5])-GetUnitX(h7[55]))<=2850.)and G0[$D0+O5]then
return 332
else
set G0[$D0+O5]=false
return 327
endif
elseif(i==58)or(i==59)then
return 333
elseif(k==1)then
if(i==$B)or(i==$C)then
return 334
elseif(i==$D)then
return 335
elseif(i==$E)then
if JY7 then
return 336
else
return 335
endif
elseif(i==$F)then
return 336
elseif(i==16)or(i==17)then
return 337
endif
elseif(k==2)then
if(i==$B)or(i==$C)then
return 338
elseif(i==$D)then
return 339
elseif(i==$E)then
if JY7 then
return 341
else
return 340
endif
elseif(i==$F)or(i==16)then
return 341
elseif(i==17)then
return 342
endif
endif
return 0
endfunction
function C8E takes integer O5,integer i,integer j returns boolean
if i==j then
return true
elseif(i==328 or i==334 or i==335 or i==326)and(j==328 or j==334 or j==335 or j==326)then
return true
elseif(i==329 or i==330 or i==326)and(j==329 or j==330 or j==326)then
return true
elseif(i==331 or i==332 or i==327)and(j==331 or j==332 or j==327)then
return true
elseif eY[272+O5]==0 then
if(i==338 or i==339 or i==340 or i==331 or i==332)and(j==338 or j==339 or j==340 or j==331 or j==332)then
return true
elseif(i==329 or i==330 or i==336 or i==337)and(j==329 or j==330 or j==336 or j==337)then
return true
endif
endif
return false
endfunction
function C9E takes unit I_7,integer O5 returns boolean
return((not BHE(O5))and(not GE7[64+O5])and(GetUnitLevel(I_7)>5)and MR7(I_7,ZU[YC])==false and MS7(I_7)==false and GE7[320+O5]and GetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD)>$C8)
endfunction
function CDE takes nothing returns nothing
local unit I_7=GetTriggerUnit()
local integer O5=GetPlayerId(GetOwningPlayer(I_7))
local integer UP=OM7(GetHandleId(GetTriggeringTrigger()),"SentNum")
local integer i
if GetPlayerController(Player(O5))==MAP_CONTROL_USER and I_7==M7[O5]then
if(IsUnitAlly(I_7,Z7[0]))then
set UP=OM7(GetHandleId(GetTriggeringTrigger()),"SentNum")
else
set UP=OM7(GetHandleId(GetTriggeringTrigger()),"ScrgNum")
endif
set h8[O5]=h7[UP+1]
set h8[80+O5]=h7[UP]
set h9[O5]=h7[UP-1]
set h9[16+O5]=h7[hj[UP]]
set h8[16+O5]=h7[hj[256+UP]]
endif
if((GetPlayerController(Player(O5))==MAP_CONTROL_COMPUTER)and(IsUnitType(I_7,UNIT_TYPE_HERO)))then
if(IsUnitAlly(I_7,Z7[0]))then
set UP=OM7(GetHandleId(GetTriggeringTrigger()),"SentNum")
else
set UP=OM7(GetHandleId(GetTriggeringTrigger()),"ScrgNum")
endif
if(eY[O5]==9)then
if(not M47(I_7))then
set G0[$B0+O5]=true
endif
if((h8[$80+O5]==h7[UP])and(eY[272+O5]==0))then
set h8[O5]=h7[UP]
set eY[O5]=1
elseif((h8[48+O5]==h7[UP]and(eY[272+O5]<=1))or((eY[272+O5]==1)and(G0[$B0+O5])))then
if eY[272+O5]==1 then
set h8[32+O5]=h7[C7E(O5,OM7(GetHandleId(GetTriggeringTrigger()),"SentNum"),eY[304+O5],(IsUnitAlly(I_7,Z7[0])))]
endif
set h8[48+O5]=h8[32+O5]
set h9[O5]=NF7(I_7)
if(iU(I_7))then
if K57(I_7)then
if G0[$B0+O5]then
call jW(I_7,$D0012,h8[48+O5])
else
if hq[640+O5]<=Bz then
call jW(I_7,$D0012,h9[O5])
else
call jW(I_7,$D000F,h9[O5])
endif
endif
endif
endif
elseif eY[272+O5]>=4 then
set LG4=true
if(h8[$80+O5]==h7[UP])then
set eY[O5]=1
elseif(h8[48+O5]==h7[UP])and(eY[272+O5]==5)then
set h8[48+O5]=h8[$80+O5]
elseif(h8[112+O5]==h7[UP])and(eY[272+O5]==4)then
set eY[272+O5]=5
set i=GetUnitUserData(h8[112+O5])
if IsUnitAlly(I_7,Z7[0])then
if(i>35 and i<40)then
set h8[48+O5]=h7[35]
elseif(i>55 and i<60)then
set h8[48+O5]=h7[55]
endif
else
if(i>30 and i<35)then
set h8[48+O5]=h7[35]
elseif(i>50 and i<55)then
set h8[48+O5]=h7[55]
endif
endif
set h8[32+O5]=h8[48+O5]
else
set LG4=false
endif
if LG4 then
if h8[96+O5]!=null then
call WQE(O5,h8[96+O5],true,true)
endif
if K57(I_7)then
if(h8[96+O5]!=null and M47(h8[96+O5]))then
call IssueTargetOrderById(I_7,$D000F,h8[96+O5])
else
call jW(I_7,$D000F,h8[48+O5])
endif
endif
endif
endif
elseif eY[O5]==1 and(((UP==34 and P_4>4)or UP==35 or(UP==56 and Q44>6)or UP==57)or((UP==$87 and P_4<=4)or UP==$88 or(UP==$99 and Q44<=6)or UP==$9A))and(GE7[$F0+O5]or C9E(I_7,O5))then
set bj_lastLoadedUnit=I_7
set bj_lastLoadedUnit=MN7(700,M07(I_7),Condition(function QP7))
if(bj_lastLoadedUnit==null)then
if UP==34 or UP==35 or UP==$88 or UP==$87 then
set h8[O5]=h7[353]
elseif UP==56 or UP==57 or UP==$9A or UP==$99 then
set h8[O5]=h7[354]
endif
set GE7[256+O5]=true
call jW(I_7,$D0012,h8[O5])
endif
endif
if((h8[O5]==h7[UP])or(h9[O5]==h7[UP])or((h8[16+O5]==h7[hj[256+UP]])and(h9[16+O5]==h7[hj[UP]]))or(h8[16+O5]==h7[hj[UP]])or(h9[16+O5]==h7[hj[256+UP]]))and(not GE7[256+O5])then
call UO7(I_7,UP)
endif
if((ME7(I_7))and(not Id(O5))and(GetUnitCurrentOrder(I_7)==$D0012))then
if((UP==38)or(UP==37)or(UP==36))then
call UO7(I_7,32)
elseif((UP==$8A)or(UP==$89)or(UP==$88))then
call UO7(I_7,$84)
elseif((UP==58)or(UP==57)or(UP==56))then
call UO7(I_7,52)
elseif((UP==$9E)or(UP==$9D)or(UP==$9C))then
call UO7(I_7,$98)
endif
endif
elseif(O5==GetPlayerId(Z7[0]))then
if((hj[256+UP]==18)or(hj[UP]==$A))then
set i=UP-$A
if(P24+1==i)then
set P24=i
endif
elseif((hj[256+UP]==40)or(hj[UP]==30))then
set i=UP-30
if(P_4+1==i)then
set P_4=i
endif
elseif((hj[256+UP]==60)or(hj[UP]==50))then
set i=UP-50
if(Q44+1==i)then
set Q44=i
endif
endif
elseif(O5==GetPlayerId(A7[0]))then
if((hj[256+UP]==18)or(hj[UP]==$A))then
set i=UP-$A
if(P24-1==i)then
set P24=i
endif
elseif((hj[256+UP]==40)or(hj[UP]==30))then
set i=UP-30
if(P_4-1==i)then
set P_4=i
endif
elseif((hj[256+UP]==60)or(hj[UP]==50))then
set i=UP-50
if(Q44-1==i)then
set Q44=i
endif
endif
endif
set I_7=null
endfunction
function CEE takes nothing returns boolean
return((((GetOwningPlayer(GetTriggerUnit())==Z7[0])or(GetOwningPlayer(GetTriggerUnit())==A7[0]))and(not KW7(GetTriggerUnit()))and(not IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)))or((not IsUnitIllusion(GetTriggerUnit()))and(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))))!=null
endfunction
function CFE takes nothing returns boolean
return((GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)and(not IsUnitIllusion(GetTriggerUnit()))and(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)))!=null
endfunction
function CGE takes integer CHE,integer CIE returns nothing
local trigger t
local integer i=CHE
local boolexpr Ig=Condition(function CEE)
loop
set t=CreateTrigger()
call TriggerRegisterUnitInRange(t,h7[i],400.,Q24)
call NP7(GetHandleId(t),"SentNum",i)
call NP7(GetHandleId(t),"ScrgNum",hj[512+i])
call TriggerAddCondition(t,Ig)
call TriggerAddAction(t,function CDE)
set i=i+1
exitwhen i>CIE
endloop
set t=null
set Ig=null
endfunction
function CJE takes integer O5,integer UP,integer i,boolean JY7 returns integer
local integer j
local integer k
if UP==326 then
if i==34 then
set j=34
else
set j=C7E(O5,i,1,JY7)
endif
elseif UP==327 then
if i==57 then
set j=57
else
set j=C7E(O5,i,2,JY7)
endif
else
set k=eY[304+O5]
set j=C7E(O5,i,k,JY7)
if(j!=0)and(UP!=j)then
if C8E(O5,UP,j)then
elseif(k==1)then
set j=326
elseif(k==2)then
set j=327
endif
else
set j=i
endif
endif
return j
endfunction
function CKE takes integer O5,boolean JY7,integer UP returns nothing
local integer i
local integer j
local boolexpr CME=null
local unit I_7=null
if eY[272+O5]>3 then
return
endif
set eY[272+O5]=3
set i=1
set LG4=true
set bj_lastLoadedUnit=h7[JH7(JY7,0,100)]
if h8[96+O5]!=null and M87(h8[96+O5])then
set j=GetPlayerId(GetOwningPlayer(h8[96+O5]))
endif
if((hq[656+O5]<Bz)or((h8[96+O5]!=null)and(KE7(h8[96+O5],h8[j])+400<KE7(h8[96+O5],h9[j]))))then
loop
exitwhen i>5
if JY7 then
set j=GetPlayerId(Z7[i])
else
set j=GetPlayerId(A7[i])
endif
if((M7[j]!=null)and(GetWidgetLife(M7[j])>.405)and(eY[272+j]!=0)and(eY[j]==9)and(eY[288+j]==eY[288+O5])and(ME7(M7[j])==false))then
if eY[272+j]<3 then
set LG4=false
endif
endif
set i=i+1
endloop
endif
if LG4 then
if(h8[96+O5]!=null and GetWidgetLife(h8[96+O5])>.405 and(eY[32+GetPlayerId(GetOwningPlayer(h8[96+O5]))]>0))then
set bj_lastLoadedUnit=h8[96+O5]
else
set bj_lastLoadedUnit=h8[112+O5]
endif
set CME=Condition(function Q57)
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(M7[O5]),GetUnitY(M7[O5]),1800.,CME)
call GroupClear(H8)
call GroupEnumUnitsInRange(H8,GetUnitX(bj_lastLoadedUnit),GetUnitY(bj_lastLoadedUnit),1800.,CME)
call DestroyBoolExpr(CME)
call GroupAddGroup(H8,iA)
set CME=null
set j=0
loop
set I_7=FirstOfGroup(iA)
exitwhen I_7==null
call GroupRemoveUnit(iA,I_7)
if GetUnitTypeId(I_7)!=1211117642 and GetUnitLifePercent(I_7)>50 then
if IsUnitAlly(I_7,Player(O5))then
set j=j+1
elseif eY[32+GetPlayerId(GetOwningPlayer(I_7))]>0 then
set j=j-1
endif
endif
endloop
if JY7 then
set LI4=X7
else
set LI4=Y7
endif
if j>=0 then
if JY7 then
set bj_lastLoadedUnit=null
if(h8[96+O5]!=null and GetWidgetLife(h8[96+O5])>.405 and IsUnitVisible(h8[96+O5],Z7[0]))then
set bj_lastLoadedUnit=h8[96+O5]
else
set bj_lastLoadedUnit=h8[112+O5]
endif
else
if(h8[96+O5]!=null and GetWidgetLife(h8[96+O5])>.405 and IsUnitVisible(h8[96+O5],A7[0]))then
set bj_lastLoadedUnit=h8[96+O5]
else
set bj_lastLoadedUnit=h8[112+O5]
endif
endif
call PT7(LI4,GetUnitX(bj_lastLoadedUnit),GetUnitY(bj_lastLoadedUnit),O5)
set h8[48+O5]=h8[112+O5]
set h8[32+O5]=h8[48+O5]
set bj_forLoopAIndex=GetPlayerId(GetOwningPlayer(h8[96+O5]))
set i=1
loop
exitwhen i>5
if JY7 then
set j=GetPlayerId(Z7[i])
else
set j=GetPlayerId(A7[i])
endif
if(eY[272+j]!=0)and(eY[j]==9)and(eY[288+j]==eY[288+O5])then
set h8[96+j]=h8[96+O5]
if GetWidgetLife(h8[96+O5])>.405 and IsUnitVisible(h8[96+O5],Player(O5))then
call WQE(j,h8[96+j],true,true)
endif
set h8[48+j]=h8[48+O5]
set h8[32+j]=h8[32+O5]
if not K57(M7[j])then
if h4[j]!=null then
call IssueTargetOrderById(M7[j],$D000F,h4[j])
else
call jW(M7[j],$D000F,h8[48+j])
endif
endif
set eY[272+j]=4
set hq[624+j]=Bz+20.
set GZ[$80+j]=true
set G0[$80+j]=true
set G0[256+j]=true
call PU7(M7[j],LI4)
if h8[96+O5]!=null then
call PP7(M7[j],LI4,GetObjectName(1496330544)+Q[bj_forLoopAIndex]+GetUnitName(h8[96+O5])+"|r")
else
call PP7(M7[j],LI4,GetObjectName(1496330297)+JU7(eY[288+O5],false)+"|r")
endif
endif
set i=i+1
endloop
else
set bj_lastLoadedUnit=h7[CJE(O5,GetUnitUserData(h8[32+O5]),GetUnitUserData(h8[$80+O5]),JY7)]
if h8[32+O5]==bj_lastLoadedUnit then
set h8[32+O5]=h8[$80+O5]
else
set h8[32+O5]=bj_lastLoadedUnit
endif
set i=1
loop
exitwhen i>5
if JY7 then
set j=GetPlayerId(Z7[i])
else
set j=GetPlayerId(A7[i])
endif
if(eY[272+j]!=0)and(eY[j]==9)and(eY[288+j]==eY[288+O5])then
set eY[272+j]=0
set h8[$80+j]=h8[$80+O5]
set h8[32+j]=h8[32+O5]
set h8[48+j]=h8[32+j]
if K57(M7[O5])then
call jW(M7[O5],$D0012,h8[32+j])
endif
call PU7(M7[j],LI4)
call PP7(M7[j],LI4,GetObjectName(1496330296))
endif
set i=i+1
endloop
endif
else
if not G0[$C0+O5]then
set hq[656+O5]=Bz+15.
set G0[$C0+O5]=true
endif
set h8[48+O5]=h7[UP]
if K57(M7[O5])then
call IssueImmediateOrderById(M7[O5],$D0019)
endif
endif
set I_7=null
endfunction
function CNE takes boolean JY7,integer O5,unit m5 returns nothing
local integer i=0
local integer j=0
local real COE=KE7(M7[O5],m5)
local real WZ7
set i=1
loop
exitwhen i>$B
if JY7 then
set j=GetPlayerId(Z7[i])
else
set j=GetPlayerId(A7[i])
endif
if((M7[j]!=null)and(GetWidgetLife(M7[j])>.405)and(h4[j]!=null)and(eY[j]==1 or eY[j]>9)and(eY[64+j]==eY[288+O5]or eY[80+j]==eY[288+O5])and(ME7(M7[j])==false))then
set WZ7=KE7(M7[j],m5)
if WZ7>COE-400 then
set h4[j]=m5
set hq[624+j]=Bz+20.
if is(M7[j])then
call IssueTargetOrderById(M7[j],$D000F,m5)
endif
endif
endif
set i=i+1
endloop
endfunction
function CPE takes nothing returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
return((GetTriggerUnit()==M7[O5])and(eY[O5]==9)and(TZ7(Player(O5))))
endfunction
function CQE takes nothing returns nothing
local unit I_7=GetTriggerUnit()
local integer O5=GetPlayerId(GetOwningPlayer(I_7))
local integer UP
local integer i
local integer j
local integer k
local boolean JY7
set UP=OM7(GetHandleId(GetTriggeringTrigger()),"Num")
set JY7=IsUnitAlly(I_7,Z7[0])
if(eY[272+O5]==0)or((eY[272+O5]<=3)and(h8[48+O5]==h7[UP]))then
if eY[272+O5]==0 then
set i=GetUnitUserData(h8[$80+O5])
else
set i=GetUnitUserData(h8[112+O5])
endif
set j=CJE(O5,UP,i,JY7)
if(eY[272+O5]==0)then
set h8[48+O5]=h7[j]
set h8[32+O5]=h8[48+O5]
if K57(M7[O5])then
call jW(M7[O5],$D000F,h8[48+O5])
endif
else
if j<100 then
call CKE(O5,JY7,UP)
else
set eY[272+O5]=2
set h8[48+O5]=h7[j]
set h8[32+O5]=h8[48+O5]
if is(M7[O5])then
call jW(M7[O5],$D000F,h8[48+O5])
endif
endif
endif
endif
set I_7=null
endfunction
function CRE takes integer k,integer j returns nothing
local trigger t
local integer i=k
local boolexpr CSE=Condition(function CPE)
loop
exitwhen i>j
set t=CreateTrigger()
call TriggerRegisterUnitInRange(t,h7[i],400.,Q24)
call NP7(GetHandleId(t),"Num",i)
call TriggerAddCondition(t,CSE)
call TriggerAddAction(t,function CQE)
set i=i+1
endloop
set CSE=null
set t=null
endfunction
function CTE takes nothing returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
return((GetTriggerUnit()==M7[O5])and(TZ7(Player(O5))))
endfunction
function CUE takes nothing returns nothing
local unit it=GetTriggerUnit()
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer UP=OM7(GetHandleId(GetTriggeringTrigger()),"Num")
if TV7(Player(O5))then
if UP==353 then
call UO7(it,34)
elseif UP==354 then
call UO7(it,56)
endif
else
if UP==353 then
call UO7(it,$87)
elseif UP==354 then
call UO7(it,$99)
endif
endif
if(is(it))then
set bj_lastLoadedUnit=it
set bj_lastLoadedUnit=MN7(700,M07(h8[O5]),Condition(function QP7))
if(bj_lastLoadedUnit!=null)then
call jW(it,$D0012,h9[O5])
else
call jW(it,$D000F,h8[O5])
endif
endif
if(C9E(it,O5))then
set GE7[320+O5]=BOE(O5,it,YC,true)
endif
if(GE7[$F0+O5])then
if(G97[$90+O5]==1)and(GE7[$E0+O5]==false)then
set G97[432+O5]=1
set G97[$B0+O5]=R2I(Bz)+30
call BVE(O5,it,false)
set G97[$B0+O5]=0
set G97[432+O5]=0
endif
set GE7[$F0+O5]=false
set GE7[256+O5]=false
endif
set it=null
endfunction
function CVE takes integer k,integer j returns nothing
local trigger t
local integer i=k
local boolexpr CSE=Condition(function CTE)
loop
exitwhen i>j
set t=CreateTrigger()
call TriggerRegisterUnitInRange(t,h7[i],200.,Q24)
call NP7(GetHandleId(t),"Num",i)
call TriggerAddCondition(t,CSE)
call TriggerAddAction(t,function CUE)
set i=i+1
endloop
set CSE=null
set t=null
endfunction
function CWE takes nothing returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
local integer UP=OM7(GetHandleId(GetTriggeringTrigger()),"Num")
if(((UP==311)or(UP==312))and(eY[O5]==1))then
if(IsUnitAlly(GetTriggerUnit(),Z7[0]))then
if(h8[O5]==h7[36])then
call UO7(GetTriggerUnit(),34)
endif
else
if(h8[O5]==h7[$88])then
call UO7(GetTriggerUnit(),$86)
endif
endif
elseif(UP==313)then
if(IsUnitAlly(GetTriggerUnit(),A7[0]))then
if(h8[O5]==h7[$88])then
set h9[O5]=h7[$87]
endif
endif
elseif(UP==314)then
if(IsUnitAlly(GetTriggerUnit(),Z7[0]))then
if(h8[O5]==h7[36])then
set h9[O5]=h7[35]
endif
else
if(h8[O5]==h7[$88])then
call UO7(GetTriggerUnit(),$87)
endif
endif
elseif(((UP==321)or(UP==322))and(eY[O5]==1))then
if(IsUnitAlly(GetTriggerUnit(),Z7[0]))then
if(h8[O5]==h7[56])then
call UO7(GetTriggerUnit(),54)
endif
else
if(h8[O5]==h7[$9C])then
call UO7(GetTriggerUnit(),$9A)
endif
endif
elseif((UP==315)and(h8[32+O5]==h7[315])and(eY[O5]==$A))then
set h8[32+O5]=h9[32+O5]
call jW(GetTriggerUnit(),$D0012,h8[32+O5])
elseif((UP==325)and(h8[32+O5]==h7[325])and(eY[O5]==$A))then
set h8[32+O5]=h9[32+O5]
call jW(GetTriggerUnit(),$D0012,h8[32+O5])
endif
endfunction
function CXE takes integer CHE returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterUnitInRange(t,h7[CHE],400.,Q24)
call NP7(GetHandleId(t),"Num",CHE)
call TriggerAddCondition(t,Condition(function CFE))
call TriggerAddAction(t,function CWE)
endfunction
function CYE takes nothing returns nothing
call B5E(0,-7100,-6985)
call B5E(100,6644,6239)
call B5E(1,-5088.,-6426.)
call B5E(101,4826.,4177.)
call B5E(2,-4290.,-4302.)
call B5E(3,-3288.,-6529.)
call B5E(4,-6238.,-3594.)
call B5E(102,3493.,3180.)
call B5E(103,3041.,5967.)
call B5E(104,6041.,2585.)
set h7[$A]=h7[0]
set h7[118]=h7[1]
call B2E($B,$A,$E,-4166.,-4124.)
call B2E($C,$A,$E,-2897.,-2633.)
call B2E($D,$A,$E,-1363.,-1425.)
call B2E($E,$A,18,-594.,-602.)
call B2E($F,$E,18,553.,-55.)
call B2E(16,$E,18,1858.,1109.)
call B2E(17,$E,18,3207.,2741.)
call UK7(111,17,110,114)
call UK7(112,16,110,114)
call UK7(113,$F,110,114)
call UK7(114,$E,110,118)
call UK7(115,$D,114,118)
call UK7(116,$C,114,118)
call UK7(117,$B,114,118)
set h7[18]=h7[101]
set h7[110]=h7[100]
set h7[30]=h7[0]
set h7[$8C]=h7[1]
call B2E(31,30,35,-6267.,-3320.)
call B2E(32,30,35,-6377.,-1771.)
call B2E(33,30,35,-6066.,273.)
call B2E(34,30,35,-6241.,2786.)
call B2E(35,30,40,-6056.,5347.)
call B2E(36,35,40,-3254.,5752.)
call B2E(37,35,40,-819.,5859.)
call B2E(38,35,40,1086.,5572.)
call B2E(39,35,40,2675.,6207.)
call UK7($83,39,$82,$87)
call UK7($84,38,$82,$87)
call UK7($85,37,$82,$87)
call UK7($86,36,$82,$87)
call UK7($87,35,$82,$8C)
call UK7($88,34,$87,$8C)
call UK7($89,33,$87,$8C)
call UK7($8A,32,$87,$8C)
call UK7($8B,31,$87,$8C)
set h7[40]=h7[101]
set h7[$82]=h7[100]
set h7[50]=h7[0]
set h7[$A0]=h7[1]
call B2E(51,50,55,-3196.,-6567.)
call B2E(52,50,55,-237.,-6939.)
call B2E(53,50,55,1811.,-6860.)
call B2E(54,50,55,3727.,-6784.)
call B2E(55,50,60,5532.,-6495.)
call B2E(56,55,60,5943.,-5216.)
call B2E(57,55,60,6186.,-3270.)
call B2E(58,55,60,6040.,-646.)
call B2E(59,55,60,6018.,2213.)
call UK7($97,59,$96,$9B)
call UK7($98,58,$96,$9B)
call UK7($99,57,$96,$9B)
call UK7($9A,56,$96,$9B)
call UK7($9B,55,$96,$A0)
call UK7($9C,54,$9B,$A0)
call UK7($9D,53,$9B,$A0)
call UK7($9E,52,$9B,$A0)
call UK7($9F,51,$9B,$A0)
set h7[60]=h7[101]
set h7[$96]=h7[100]
set h7[$D3]=h7[$C]
set h7[$D4]=h7[$D]
set h7[$D5]=h7[16]
call B5E($DD,-6220.,3550.)
set h7[$DE]=h7[36]
set h7[$DF]=h7[37]
set h7[$E7]=h7[53]
set h7[$E8]=h7[54]
set h7[$E9]=h7[56]
call B5E($EA,6070.,-3550.)
set h7[$EB]=h7[58]
call B5E($FA,GetRectCenterX(ND),GetRectCenterY(ND))
call B5E($FB,GetRectCenterX(Br),GetRectCenterY(Br))
call B5E($FC,GetRectCenterX(cr),GetRectCenterY(cr))
call B5E($FD,GetRectCenterX(Cr),GetRectCenterY(Cr))
call B5E($FE,GetRectCenterX(fr0),GetRectCenterY(fr0))
call B5E($FF,GetRectCenterX(Fr),GetRectCenterY(Fr))
call B5E(256,GetRectCenterX(Hr),GetRectCenterY(Hr))
call B5E(257,GetRectCenterX(jr),GetRectCenterY(jr))
call B5E(258,GetRectCenterX(Jr),GetRectCenterY(Jr))
call B5E(259,GetRectCenterX(lr),GetRectCenterY(lr))
call B5E(260,GetRectCenterX(mr),GetRectCenterY(mr))
call B5E(261,GetRectCenterX(Ni),GetRectCenterY(Ni))
call B5E(262,GetRectCenterX(Bi),GetRectCenterY(Bi))
call B5E(311,-5232.,3757.)
call B5E(312,-3490.,4685.)
call B5E(313,-6209.,4324.)
call B5E(314,-5024.,5571.)
call B5E(315,-1717.,894.)
call B5E(321,3995.,-5720.)
call B5E(322,4976.,-5129.)
call B5E(325,2222.,-2405.)
call B5E(326,-2300.,1600.)
call B5E(327,3000.,-1820.)
call B5E(328,-4250.,-110.)
call B5E(329,-3950.,4100.)
call B5E(330,150.,2460.)
call B5E(331,2100.,-5600.)
call B5E(332,4350.,-4750.)
call B5E(333,4650.,-1050.)
call B5E(334,-3300.,-1450.)
call B5E(335,-1750.,-100.)
call B5E(336,-250.,700.)
call B5E(337,890.,2100.)
call B5E(338,-2100.,-4200.)
call B5E(339,-310.,-2900.)
call B5E(340,800.,-2200.)
call B5E(341,1900.,-1300.)
call B5E(342,3600.,-100.)
call B5E(351,-5210,5660)
call B5E(352,5260,-6470)
call B5E(353,-7080,4280)
call B5E(354,7210,-4230)
endfunction
function CZE takes nothing returns nothing
local trigger t
call CGE($B,17)
if(not PE4)then
call CGE(31,39)
call CGE(51,59)
endif
call CXE(311)
call CXE(312)
call CXE(313)
call CXE(314)
call CXE(315)
call CXE(321)
call CXE(322)
call CXE(325)
call CRE(326,342)
call CVE(353,354)
endfunction
function CAE takes integer o6,integer X0E,integer n6 returns integer
if(X0E<o6)then
return o6
elseif(X0E>n6)then
return n6
endif
return X0E
endfunction
function CBE takes unit it,integer o6 returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer UP=GetUnitUserData(h8[O5])
local integer CCE
if(IsUnitAlly(it,Z7[0]))then
if(((o6==-1)and((hj[256+UP]==18)or(hj[UP]==$A)))or(o6==0))then
set CCE=9+P24
call UO7(it,CAE($B,CCE,17))
elseif(((o6==-1)and((hj[256+UP]==40)or(hj[UP]==30)))or(o6==1))then
set CCE=29+P_4
call UO7(it,CAE(31,CCE,39))
elseif(((o6==-1)and((hj[256+UP]==60)or(hj[UP]==50)))or(o6==2))then
set CCE=49+Q44
call UO7(it,CAE(51,CCE,59))
endif
else
set UP=hj[512+UP]
if(((o6==-1)and((hj[256+UP]==118)or(hj[UP]==110)))or(o6==0))then
set CCE=117-P24
call UO7(it,CAE(111,CCE,117))
elseif(((o6==-1)and((hj[256+UP]==$8C)or(hj[UP]==$82)))or(o6==1))then
set CCE=$8B-P_4
call UO7(it,CAE($83,CCE,$8B))
elseif(((o6==-1)and((hj[256+UP]==$A0)or(hj[UP]==$96)))or(o6==2))then
set CCE=$9F-Q44
call UO7(it,CAE($97,CCE,$9F))
endif
endif
endfunction
function C3E takes unit it,unit C6E returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer i1=GetUnitTypeId(it)
local real KD7=Bz+$A
if(i1!=1211117642)then
set h9[16+O5]=NF7(it)
set h9[O5]=NF7(it)
call JC7(it,O5)
set G0[32+O5]=true
set GZ[O5]=false
set G0[48+O5]=false
set G0[O5]=false
set GZ[$A0+O5]=false
set hq[864+O5]=GetRandomReal(-LP4,LP4)
if Bz>QD4 then
call EnableTrigger(Q04[$80+O5])
endif
endif
call RemoveGuardPosition(it)
loop
exitwhen((GetUnitLifePercent(it)>95.)and(GetUnitManaPercent(it)>95.)and(Bz>KD7 or(Bz>G97[$A0+O5])))
if(((PU4)and(IsUnitAlly(it,Z7[0])))or((PV4)and(IsUnitAlly(it,A7[0]))))then
exitwhen((GetUnitLifePercent(it)>75.)and(GetUnitManaPercent(it)>25.))
endif
if(not M87(it))then
set eY[O5]=1
exitwhen true
endif
if(IsUnitInRange(it,C6E,600.))then
call SetUnitLifePercentBJ(it,RMinBJ(GetUnitLifePercent(it)+5.,100.))
call SetUnitManaPercentBJ(it,RMinBJ(GetUnitManaPercent(it)+5.,100.))
if(is(it))then
call IssueTargetOrderById(it,$D0003,C6E)
endif
elseif(not M87(C6E))then
exitwhen true
endif
call TriggerSleepAction(1.)
endloop
endfunction
function CLE takes integer O5,unit C1E,unit C0E,unit C5E returns boolean
local integer i=0
local boolean MA7=false
set bj_lastReplacedUnit=null
if(O5==0)then
set bj_lastReplacedUnit=C1E
elseif(O5==1)then
set bj_lastReplacedUnit=C0E
elseif(O5==2)then
set bj_lastReplacedUnit=C5E
else
return false
endif
set i=OM7(GetHandleId(bj_lastReplacedUnit),"AI|TowerDef_Require")
if(i>0)then
call NP7(GetHandleId(bj_lastReplacedUnit),"AI|TowerDef_Require",i-1)
return true
endif
return false
endfunction
function C2E takes unit UN7 returns boolean
call MoveLocation(Ha,GetUnitX(UN7),GetUnitY(UN7))
return((MO7(1800.,Ha,Condition(function QW7))-(MO7(1400.,Ha,Condition(function QV7))*4))>5)
endfunction
function C_E takes nothing returns nothing
local integer i=1
local integer j=0
loop
exitwhen j>$A
if(LU4[112+j]!=0)then
set LU4[$90+j]=R2I(Bz)+30
endif
set LU4[112+j]=0
set LU4[$80+j]=0
set j=j+1
endloop
set i=1
loop
exitwhen i>$B
if(M7[i]!=null)then
call KI7(i)
endif
set i=i+1
endloop
set i=1
loop
exitwhen i>5
set j=GetPlayerId(Z7[i])
if((eY[80+j]==3)and(eY[64+j]<3))or(eY[64+j]==5)then
set LU4[112+eY[64+j]]=LU4[112+eY[64+j]]+1
else
set LU4[112+eY[80+j]]=LU4[112+eY[80+j]]+1
endif
if eY[32+j]>0 then
set LU4[$80+eY[80+j]]=LU4[$80+eY[80+j]]+1
endif
set j=GetPlayerId(A7[i])
if((eY[80+j]==4)and(eY[64+j]<3))or(eY[64+j]==5)then
set LU4[112+6+eY[64+j]]=LU4[112+6+eY[64+j]]+1
else
set LU4[112+6+eY[80+j]]=LU4[112+6+eY[80+j]]+1
endif
if eY[32+j]>0 then
set LU4[$80+6+eY[80+j]]=LU4[$80+6+eY[80+j]]+1
endif
set i=i+1
endloop
endfunction
function L9E takes unit it returns integer
local integer j=3
local integer O5=GetPlayerId(GetOwningPlayer(it))
if(G3>=0)then
set j=G3
elseif(GetHeroLevel(it)<6)then
set j=eY[64+O5]
elseif(GetHeroLevel(it)>=PC4)then
if(PV4 and LU4[64+O5]>=0)then
set j=JH7(LU4[64+O5]==3,0,LU4[64+O5])
elseif(G1>=0)then
set j=G1
endif
endif
if(j==3)then
set bj_lastLoadedUnit=it
if(CLE(P14,JL4,J54,K44))then
set j=0
elseif(CLE(P54,J14,J24,K74))then
set j=2
elseif(CLE(P04,J64,J04,J_4))then
set j=1
elseif(IC(O5))then
if(LU4[112+6+0]==1)then
set j=0
elseif(LU4[112+6+1]==1)then
if((LU4[112+6+2]==0)or(GetRandomInt(1,2)==1))then
set j=1
else
set j=2
endif
endif
elseif(((LU4[112+6+0]==0)and(LU4[$80+0]>0))or((LU4[$80+0]-LU4[112+6+0])>1))then
set j=0
elseif((LU4[$80+1]-LU4[112+6+1])>1)then
set j=1
elseif((LU4[$80+2]-LU4[112+6+2])>1)then
set j=2
elseif((LU4[112+6+1]==0)and(LU4[$80+1]>0))then
if((LU4[112+6+2]>0)or(LU4[$80+2]==0)or(GetRandomInt(1,2)==1))then
set j=1
else
set j=2
endif
elseif((LU4[112+6+2]==0)and(LU4[$80+2]>0))then
set j=2
elseif(LU4[112+6+0]==0)then
set j=0
elseif(LU4[112+6+1]==0)then
if((LU4[112+6+2]>0)or(GetRandomInt(1,2)==1))then
set j=1
else
set j=2
endif
elseif(LU4[112+6+2]==0)then
set j=2
endif
elseif((GetHeroLevel(it)>$D)and(G3<0)and(G1>=0)and(j==G1)and((LU4[$80+j])-LU4[112+6+j]>=0))then
if((j!=0)and(P14>=2)and(C2E(h7[17])))then
set j=0
elseif((j!=1)and(P04>=2)and(C2E(h7[39])))then
set j=1
elseif((j!=2)and(P54>=2)and(C2E(h7[59])))then
set j=2
endif
endif
if(j>=3)then
set j=eY[64+O5]
if(j>=3)then
set j=GetRandomInt(0,2)
endif
endif
return j
endfunction
function LDE takes unit I_7 returns nothing
local unit MD7=null
local integer O5=GetPlayerId(GetOwningPlayer(I_7))
local integer i
local boolean J4=false
local integer JZ7=JH7(IsUnitAlly(I_7,Z7[0]),0,24)
set hq[528+O5]=Bz+5.
if((is(I_7))and(not ME7(I_7))and(not G0[32+O5]))and(h4[O5]==null)then
call GroupClear(H8)
set bj_lastLoadedUnit=I_7
call GroupEnumUnitsInRange(H8,GetUnitX(I_7),GetUnitY(I_7),700.,LX4)
set i=(OL7(H8))
if G0[48+O5]and Bz>hq[768+O5]then
set J4=(i>2)
if not J4 then
set G0[48+O5]=false
endif
if not J4 then
endif
endif
if(not J4)and K57(I_7)then
set bj_lastLoadedUnit=JD7(IsUnitAlly(I_7,Z7[0]),IZ4,JA4)
set LD4=KE7(I_7,bj_lastLoadedUnit)
if G0[$F0+O5]then
if(LD4>3500.)then
call jW(I_7,$D0012,h9[O5])
set J4=true
else
set G0[$F0+O5]=false
endif
endif
if(not J4)then
if(LD4>6000.)then
call jW(I_7,$D0012,h9[O5])
elseif LD4<700. and i>0 then
set J4=jW(I_7,$D000F,h8[64+O5])
else
if(not J4)and G0[$E0+O5]then
set MD7=LV4[48+O5]
if MD7!=null and GetWidgetLife(MD7)>.405 then
set J4=IssueTargetOrderById(I_7,$D000F,MD7)
endif
if not J4 then
set G0[$E0+O5]=false
endif
endif
if not J4 then
set MD7=LV4[JZ7+LU4[64+O5]]
if MD7!=null and GetWidgetLife(MD7)>.405 then
set J4=IssueTargetOrderById(I_7,$D000F,MD7)
endif
endif
if not J4 then
set MD7=LV4[JZ7+16+LU4[64+O5]]
if MD7==null or GetWidgetLife(MD7)<.405 then
set MD7=FirstOfGroup(H8)
if MD7!=null then
set LV4[JZ7+16+LU4[64+O5]]=MD7
else
set MD7=LV4[JZ7+$C+LU4[64+O5]]
if MD7==null or GetWidgetLife(MD7)<.405 then
set MD7=h8[64+O5]
endif
endif
endif
if(KE7(I_7,MD7)>700.)then
set J4=jW(I_7,$D0012,MD7)
elseif GetUnitCurrentOrder(I_7)!=$D000F then
set J4=jW(I_7,$D000F,MD7)
endif
endif
endif
endif
endif
endif
set I_7=null
set MD7=null
endfunction
function LEE takes unit LFE,integer O5,boolean LGE returns nothing
local integer j
local integer JZ7
set G0[32+O5]=false
set G0[352+O5]=false
if(LGE)then
set JZ7=JH7(IsUnitAlly(LFE,Z7[0]),0,24)
if LU4[64+O5]>=0 and LU4[JZ7+LU4[64+O5]]>2 then
set eY[O5]=JH7((not GZ[480+O5]),3,4)
else
set j=JX7(IsUnitAlly(LFE,Z7[0]))
if j!=-1 then
set LU4[64+O5]=j
set LU4[JZ7+8+j]=LU4[JZ7+8+j]-1
set LU4[JZ7+$C+j]=LU4[JZ7+$C+j]+1
call JC7(LFE,O5)
set eY[O5]=JH7((not GZ[480+O5]),3,4)
endif
endif
endif
if(eY[O5]==3 or eY[O5]==4)then
call LDE(LFE)
else
if(Bz>QD4)and(is(LFE))then
call jW(LFE,$D000F,h8[O5])
endif
set eY[O5]=1
endif
endfunction
function LHE takes integer L7E,integer LIE returns integer
if((PE4)or((PH4)and(PF4)))then
return 0
elseif((PG4)and(PF4))then
return 1
elseif((PG4)and(PH4))then
return 2
elseif((LIE>$F)or((L7E==0)and(not PG4))or((L7E==1)and(not PH4))or((L7E==2)and(not PF4)))then
return L7E
elseif((not PG4)and(((PH4)and(PF4))or(GetRandomInt(1,2)==1)))then
return 0
elseif((not PH4)and((PF4)or(GetRandomInt(1,2)==1)))then
return 1
elseif(not PF4)then
return 2
endif
return GetRandomInt(0,2)
endfunction
function LJE takes unit it returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer j=0
if(GetUnitTypeId(it)!=1211117642)then
if(eY[O5]==2)then
set it=null
return
else
set eY[O5]=2
set h8[O5]=h7[111]
endif
endif
call C3E(it,JA4)
if(GetUnitTypeId(it)!=1211117642)then
if Bz>QD4 then
set j=eY[64+O5]
set eY[64+O5]=5
call C_E()
endif
set eY[64+O5]=j
set j=LHE(L9E(it),GetHeroLevel(it))
if(j==0)then
set h8[O5]=h7[111]
set h8[16+O5]=h7[114]
elseif(j==1)then
set h8[O5]=h7[$83]
set h8[16+O5]=h7[$87]
else
set h8[O5]=h7[$97]
set h8[16+O5]=h7[$9B]
endif
set eY[64+O5]=j
set hq[576+O5]=Bz+10.
call LEE(it,O5,PV4)
endif
set it=null
endfunction
function LKE takes nothing returns nothing
call LJE(GetTriggerUnit())
endfunction
function LME takes unit it returns integer
local integer j=3
local integer O5=GetPlayerId(GetOwningPlayer(it))
if(G4>=0)then
set j=G4
elseif(GetHeroLevel(it)<6)then
set j=eY[64+O5]
elseif(GetHeroLevel(it)>=PB4)then
if(PU4 and LU4[64+O5]>=0)then
set j=JH7(LU4[64+O5]==3,0,LU4[64+O5])
elseif(G1>=0)then
set j=G2
endif
endif
if(j==3)then
set bj_lastLoadedUnit=it
if(CLE(P34,JH4,JK4,JO4))then
set j=0
elseif(CLE(P64,JG4,JJ4,JN4))then
set j=1
elseif(CLE(PL4,JI4,JM4,JP4))then
set j=2
elseif(IC(O5))then
if(LU4[112+0]==1)then
set j=0
elseif(LU4[112+1]==1)then
if((LU4[112+2]==0)or(GetRandomInt(1,2)==1))then
set j=1
else
set j=2
endif
endif
elseif(((LU4[112+0]==0)and(LU4[$80+6+0]>0))or((LU4[$80+6+0]-LU4[112+0])>1))then
set j=0
elseif((LU4[$80+6+1]-LU4[112+1])>1)then
set j=1
elseif((LU4[$80+6+2]-LU4[112+2])>1)then
set j=2
elseif((LU4[112+1]==0)and(LU4[$80+6+1]>0))then
if((LU4[112+2]>0)or(LU4[$80+6+2]==0)or(GetRandomInt(1,2)==1))then
set j=1
else
set j=2
endif
elseif((LU4[112+2]==0)and(LU4[$80+6+2]>0))then
set j=2
elseif(LU4[112+0]==0)then
set j=0
elseif(LU4[112+1]==0)then
if((LU4[112+2]>0)or(GetRandomInt(1,2)==1))then
set j=1
else
set j=2
endif
elseif(LU4[112+2]==0)then
set j=2
endif
elseif((GetHeroLevel(it)>$D)and(G4<0)and(G2>=0)and(j==G2)and((LU4[$80+6+j]-LU4[112+j])>=0))then
if((j!=0)and(P34>=2)and(C2E(h7[$B])))then
set j=0
elseif((j!=1)and(P64>=2)and(C2E(h7[31])))then
set j=1
elseif((j!=2)and(PL4>=2)and(C2E(h7[51])))then
set j=2
endif
endif
if(j>=3)then
set j=eY[64+O5]
if(j>=3)then
set j=GetRandomInt(0,2)
endif
endif
return j
endfunction
function LNE takes unit it returns nothing
local integer j=0
local integer O5=GetPlayerId(GetOwningPlayer(it))
if(GetUnitTypeId(it)!=1211117642)then
if(eY[O5]==2)then
set it=null
return
else
set eY[O5]=2
set h8[O5]=h7[$B]
endif
endif
call C3E(it,IZ4)
if(GetUnitTypeId(it)!=1211117642)then
if Bz>QD4 then
set j=eY[64+O5]
set eY[64+O5]=5
call C_E()
endif
set eY[64+O5]=j
set j=LHE(LME(it),GetHeroLevel(it))
if(j==0)then
set h8[O5]=h7[$B]
set h8[16+O5]=h7[$E]
elseif(j==1)then
set h8[O5]=h7[31]
set h8[16+O5]=h7[35]
else
set h8[O5]=h7[51]
set h8[16+O5]=h7[55]
endif
set eY[64+O5]=j
set hq[576+O5]=Bz+10.
call LEE(it,O5,PU4)
endif
set it=null
endfunction
function LOE takes nothing returns nothing
call LNE(GetTriggerUnit())
endfunction
function LPE takes nothing returns nothing
local unit it=O77(GetHandleId(GetTriggeringTrigger()),"u")
call DisableTrigger(GetTriggeringTrigger())
if IsUnitAlly(it,Z7[0])then
if(KE7(it,IZ4)<700)then
call LNE(it)
endif
else
if(KE7(it,JA4)<700)then
call LJE(it)
endif
endif
set it=null
endfunction
function LSE takes integer O5,boolean JY7 returns nothing
local integer i=1
local integer LTE=JH7(JY7,0,6)
local integer JZ7=JH7(JY7,0,24)
if(eY[O5]==3 and TZ7(Player(O5))and GetWidgetLife(M7[O5])>.405)then
set G0[48+O5]=false
if GetUnitLifePercent(M7[O5])<70. or GetUnitManaPercent(M7[O5])<50. then
set eY[O5]=1
set G0[352+O5]=true
call PW7(M7[O5],true)
call NT7(R44,"OB|U",M7[O5])
call ExecuteFunc("LUE")
else
if(KF7(GetUnitX(M7[O5]),GetUnitY(M7[O5]),LW4[JZ7],LW4[JZ7+1])<12000.)then
if(h9[16+O5]==h7[35])then
set h8[16+O5]=h7[35]
set h8[O5]=h7[35]
elseif(h9[16+O5]==h7[55])then
set h8[16+O5]=h7[55]
set h8[O5]=h7[55]
elseif(h9[16+O5]==h7[$E])then
set h8[16+O5]=h7[$E]
set h8[O5]=h7[$E]
elseif(KF7(GetUnitX(M7[O5]),GetUnitY(M7[O5]),LW4[JZ7],LW4[JZ7+1])>5000.)then
if(eY[80+O5]==0)then
set h8[16+O5]=h7[$E]
set h8[O5]=h7[$E]
elseif(eY[80+O5]==1)then
set h8[16+O5]=h7[35]
set h8[O5]=h7[35]
elseif(eY[80+O5]==2)then
set h8[16+O5]=h7[55]
set h8[O5]=h7[55]
endif
endif
set h9[16+O5]=NF7(M7[O5])
set h9[O5]=NF7(M7[O5])
endif
if(is(M7[O5]))then
call jW(M7[O5],$D000F,h8[O5])
endif
set eY[O5]=1
endif
endif
endfunction
function LVE takes boolean JY7 returns boolean
local group g=CreateGroup()
local unit I_7=null
local integer O5=0
local integer LTE=JH7(JY7,0,6)
local integer JZ7=JH7(JY7,0,24)
local integer i
local integer j
local boolean bIsDef=false
set i=0
loop
exitwhen i>18
set LU4[JZ7+i]=0
set i=i+1
endloop
set LU4[JZ7+19]=-1
set LU4[JZ7+20]=-1
set LU4[JZ7+21]=-1
set LU4[JZ7+22]=-1
set LU4[JZ7+23]=-1
call GroupEnumUnitsInRange(g,LW4[JZ7],LW4[JZ7+1],6000.,Q24)
loop
set I_7=FirstOfGroup(g)
exitwhen I_7==null
call GroupRemoveUnit(g,I_7)
set O5=GetPlayerId(GetOwningPlayer(I_7))
set i=GetUnitTypeId(I_7)
if((GetUnitAbilityLevel(I_7,1093678162)!=0 and((i==1970107511 or i==1966092370)or(i==1700946284 or i==1697657398))==false)or GetUnitAbilityLevel(I_7,1097625443)!=0 or GetWidgetLife(I_7)<50.)then
elseif(IsUnitAlly(I_7,Z7[0])==JY7)or O5==$C or O5>$E then
elseif not(IsUnitType(I_7,UNIT_TYPE_MELEE_ATTACKER)or IsUnitType(I_7,UNIT_TYPE_RANGED_ATTACKER))then
else
set j=-1
if(JY7 and(PW4==false or PL4>2 or P34>2 or P64>2))or(JY7==false and(PX4==false or P54>2 or P14>2 or P04>2))then
if KF7(GetUnitX(I_7),GetUnitY(I_7),LW4[JZ7+2],LW4[JZ7+3])<=1400. then
set j=3
endif
endif
if j==-1 then
set i=R2I(Atan2(GetUnitY(I_7)-LW4[JZ7+1],GetUnitX(I_7)-LW4[JZ7])*bj_RADTODEG)
if i>360 then
set i=i-360
elseif i<0 then
set i=i+360
endif
if JY7 then
if i<25 and PL4>=2 then
set j=2
elseif i>65 and P64>=2 then
set j=1
elseif P34>=2 then
set j=0
endif
else
if i>$F5 and P54>=2 then
set j=2
elseif i<$CD and P04>=2 then
set j=1
elseif P14>=2 then
set j=0
endif
endif
endif
if j!=-1 and((j!=0 or(not PG4))and(j!=1 or(not PH4))and(j!=2 or(not PF4)))then
set i=GetUnitTypeId(I_7)
if IsUnitType(I_7,UNIT_TYPE_HERO)and i!=1211117642 then
set LU4[JZ7+4+j]=LU4[JZ7+4+j]+1
set LU4[JZ7+19+O5-LTE-1]=j
set LU4[JZ7+j]=LU4[JZ7+j]+LB4
if(LV4[JZ7+$C+j]==null or GetWidgetLife(LV4[JZ7+$C+j])<.405)or(GetWidgetLife(I_7)<GetWidgetLife(LV4[JZ7+$C+j]))then
set LV4[JZ7+$C+j]=I_7
endif
elseif O5!=GetPlayerId(Z7[0])and O5!=GetPlayerId(A7[0])then
set LU4[JZ7+j]=LU4[JZ7+j]+3
else
if(i==1969711215 or i==1970169187)or(i==1966092337 or i==1966092338)or(i==1702061422 or i==1701081721)or(i==1697656918 or i==1697656919)then
set LU4[JZ7+j]=LU4[JZ7+j]+1
if LV4[JZ7+16+j]==null or GetWidgetLife(LV4[JZ7+16+j])<.405 then
set LV4[JZ7+16+j]=I_7
endif
elseif(i==1970107511 or i==1966092370)or(i==1700946284 or i==1697657398)then
set LU4[JZ7+j]=LU4[JZ7+j]+3
if LV4[JZ7+4+j]==null or GetWidgetLife(LV4[JZ7+4+j])<.405 then
set LV4[JZ7+4+j]=I_7
endif
else
set LU4[JZ7+j]=LU4[JZ7+j]+5
if LV4[JZ7+8+j]==null or GetWidgetLife(LV4[JZ7+8+j])<.405 then
set LV4[JZ7+8+j]=I_7
endif
endif
endif
endif
endif
endloop
call DestroyGroup(g)
set g=null
if((JY7 and PU4)or((not JY7)and PV4))then
if LU4[JZ7+0]<=2 and LU4[JZ7+1]<=2 and LU4[JZ7+2]<=2 and LU4[JZ7+3]<=2 then
return false
endif
endif
if JY7 then
if PL4>2 and LU4[JZ7+2]>2 then
set LU4[JZ7+2]=LU4[JZ7+2]+4
endif
if P64>2 and LU4[JZ7+1]>2 then
set LU4[JZ7+1]=LU4[JZ7+1]+4
endif
if P34>2 and LU4[JZ7+0]>2 then
set LU4[JZ7+0]=LU4[JZ7+0]+4
endif
if GetWidgetLife(JQ4)<.405 and LU4[JZ7+3]>2 then
set LU4[JZ7+3]=LU4[JZ7+3]+4
endif
if GetWidgetLife(JR4)<.405 and LU4[JZ7+3]>2 then
set LU4[JZ7+3]=LU4[JZ7+3]+4
endif
else
if P54>2 and LU4[JZ7+2]>2 then
set LU4[JZ7+2]=LU4[JZ7+2]+4
endif
if P04>2 and LU4[JZ7+1]>2 then
set LU4[JZ7+1]=LU4[JZ7+1]+4
endif
if P14>2 and LU4[JZ7+0]>2 then
set LU4[JZ7+0]=LU4[JZ7+0]+4
endif
if GetWidgetLife(K84)<.405 and LU4[JZ7+3]>2 then
set LU4[JZ7+3]=LU4[JZ7+3]+4
endif
if GetWidgetLife(K94)<.405 and LU4[JZ7+3]>2 then
set LU4[JZ7+3]=LU4[JZ7+3]+4
endif
endif
if LU4[JZ7+0]<=8 and LU4[JZ7+1]<=8 and LU4[JZ7+2]<=8 and LU4[JZ7+3]<=8 then
return false
endif
set j=0
set i=0
loop
exitwhen j>4
set LU4[JZ7+8+j]=LU4[JZ7+4+j]
if GetWidgetLife(LV4[JZ7+$C+j])>.405 then
elseif GetWidgetLife(LV4[JZ7+8+j])>.405 then
set LV4[JZ7+j]=LV4[JZ7+8+j]
elseif GetWidgetLife(LV4[JZ7+4+j])>.405 then
set LV4[JZ7+j]=LV4[JZ7+4+j]
else
if GetWidgetLife(LV4[JZ7+$C+j])>.405 then
set LV4[JZ7+j]=LV4[JZ7+$C+j]
else
set LV4[JZ7+j]=null
endif
endif
set j=j+1
endloop
if JY7 then
if LU4[JZ7+1]>2 and LU4[JZ7+9]==0 then
set LU4[JZ7+9]=1
endif
if LU4[JZ7+0]>2 and LU4[JZ7+8]==0 then
set LU4[JZ7+8]=1
endif
if LU4[JZ7+2]>2 and LU4[JZ7+$A]==0 then
set LU4[JZ7+$A]=1
endif
set hD=IMaxBJ(1,LU4[JZ7+4]+LU4[JZ7+5]+LU4[JZ7+6]+LU4[JZ7+7])
else
if LU4[JZ7+1]>2 and LU4[JZ7+9]==0 then
set LU4[JZ7+9]=1
endif
if LU4[JZ7+0]>2 and LU4[JZ7+8]==0 then
set LU4[JZ7+8]=1
endif
if LU4[JZ7+2]>2 and LU4[JZ7+$A]==0 then
set LU4[JZ7+$A]=1
endif
set hE=IMaxBJ(1,LU4[JZ7+4]+LU4[JZ7+5]+LU4[JZ7+6]+LU4[JZ7+7])
endif
if LU4[JZ7+3]>2 and LU4[JZ7+$B]==0 then
set LU4[JZ7+$B]=1
endif
set i=1
loop
exitwhen i>5
set O5=LU4[80+LTE+i]
if(O5!=-1)and(eY[O5]==2 or eY[O5]==3 or eY[O5]==4)==false and(ME7(M7[O5])or GetWidgetLife(M7[O5])<.405)==false then
set LU4[48+LTE+i]=LU4[80+LTE+i]
else
set LU4[48+LTE+i]=-1
endif
set LU4[96+O5]=0
set i=i+1
endloop
set i=1
loop
exitwhen i>5
set O5=LU4[80+LTE+i]
if(O5!=-1)and M7[O5]!=null then
if(eY[O5]==3 or eY[O5]==4)and LU4[64+O5]!=-1 and(ME7(M7[O5])or GetWidgetLife(M7[O5])<.405)==false then
if LU4[JZ7+8+LU4[64+O5]]>0 then
set LU4[48+LTE+i]=-1
set LU4[JZ7+8+LU4[64+O5]]=LU4[JZ7+8+LU4[64+O5]]-1
set LU4[JZ7+$C+LU4[64+O5]]=LU4[JZ7+$C+LU4[64+O5]]+1
else
set LU4[48+LTE+i]=O5
endif
endif
endif
set i=i+1
endloop
if LU4[JZ7+$B]>0 and LU4[JZ7+$F]==0 then
set i=1
loop
exitwhen i>$A
if i>5 then
set j=j-5
else
set j=i
endif
set O5=LU4[80+LTE+j]
if(O5!=-1)and(LU4[48+LTE+j]==-1)then
if(eY[O5]==3 or eY[O5]==4)and((LU4[48+LTE+j]!=-1)or(LU4[64+O5]==-1)or(LU4[JZ7+8+LU4[64+O5]]<=0)or((LU4[JZ7+$C+LU4[64+O5]]>1)or(i>5)))then
set LU4[64+O5]=3
set LU4[JZ7+$B]=LU4[JZ7+$B]-1
set LU4[JZ7+$F]=LU4[JZ7+$F]+1
set LU4[96+O5]=1
endif
endif
set LU4[96+O5]=0
set i=i+1
endloop
endif
set i=1
loop
exitwhen i>5
set O5=LU4[48+LTE+i]
if O5!=-1 and(eY[O5]==3 or eY[O5]==4)then
set j=JX7(JY7)
if j==-1 then
set bj_forLoopAIndex=0
set bj_forLoopBIndex=2
loop
exitwhen bj_forLoopAIndex>3
if LU4[JZ7+bj_forLoopAIndex]>bj_forLoopBIndex and LU4[JZ7+8+j]>-1 then
set bj_forLoopBIndex=LU4[JZ7+bj_forLoopAIndex]
set j=bj_forLoopAIndex
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
endif
if j!=-1 then
if j!=LU4[64+O5]then
set G0[$F0+O5]=true
set LU4[96+O5]=1
set LU4[64+O5]=j
endif
set LU4[JZ7+8+j]=LU4[JZ7+8+j]-1
set LU4[JZ7+$C+j]=LU4[JZ7+$C+j]+1
set LU4[48+LTE+i]=-1
else
call LSE(O5,JY7)
endif
endif
set i=i+1
endloop
if LU4[JZ7+8]<=0 and LU4[JZ7+9]<=0 and LU4[JZ7+$A]<=0 and LU4[JZ7+$B]<=0 then
return true
endif
set i=1
loop
exitwhen i>5
set O5=LU4[48+LTE+i]
if(O5!=-1)then
set j=KH7(M7[O5])
if LU4[JZ7+8+j]+LU4[JZ7+$C+j]>0 then
set LU4[JZ7+8+j]=LU4[JZ7+8+j]-1
set LU4[JZ7+$C+j]=LU4[JZ7+$C+j]+1
set LU4[64+O5]=j
set LU4[96+O5]=1
set LU4[48+LTE+i]=-1
endif
endif
set i=i+1
endloop
set i=1
loop
exitwhen i>5 or(LU4[JZ7+8]<=0 and LU4[JZ7+9]<=0 and LU4[JZ7+$A]<=0 and LU4[JZ7+$B]<=0)
set O5=LU4[48+LTE+i]
if(O5!=-1)then
if Bz>hq[528+O5]then
set LD4=KF7(GetUnitX(M7[O5]),GetUnitY(M7[O5]),LW4[JZ7],LW4[JZ7+1])
if LD4<=$2EE0 then
set j=JX7(JY7)
if j!=-1 then
if LD4>5000 then
set G0[$F0+O5]=true
endif
set LU4[JZ7+8+j]=LU4[JZ7+8+j]-1
set LU4[JZ7+$C+j]=LU4[JZ7+$C+j]+1
set LU4[64+O5]=j
set LU4[96+O5]=1
set LU4[48+LTE+i]=-1
endif
endif
endif
endif
set i=i+1
endloop
set i=1
loop
exitwhen i>5 or(LU4[JZ7+8]<=0 and LU4[JZ7+9]<=0 and LU4[JZ7+$A]<=0 and LU4[JZ7+$B]<=0)
set O5=LU4[48+LTE+i]
if(O5!=-1)then
if KF7(GetUnitX(M7[O5]),GetUnitY(M7[O5]),LW4[JH7(JY7,24,0)],LW4[JH7(JY7,25,1)])>6000 then
set j=JX7(JY7)
if j!=-1 then
set LU4[JZ7+8+j]=LU4[JZ7+8+j]-1
set LU4[JZ7+$C+j]=LU4[JZ7+$C+j]+1
set LU4[64+O5]=j
set LU4[96+O5]=1
set LU4[48+LTE+i]=-1
endif
endif
endif
set i=i+1
endloop
set bj_forLoopAIndex=LU4[JZ7+4]+LU4[JZ7+5]+LU4[JZ7+6]+LU4[JZ7+7]
if(bj_forLoopAIndex>=JH7(JY7,HC4,HB4)-1 and bj_forLoopAIndex>=3)then
set i=1
loop
exitwhen i>5
set O5=LU4[80+LTE+i]
if(O5!=-1)and M7[O5]!=null then
if GetWidgetLife(M7[O5])<.405 then
if((TimerGetRemaining(U[O5])>20.)and(TimerGetElapsed(U[O5])>4.))then
set j=0
loop
exitwhen NM4[j]==GetEnumUnit()or j>NP4
set j=j+1
endloop
if NM4[j]!=null and GetUnitAbilityLevel(KU4[O5],1093808213)==0 then
if IssueImmediateOrderById(KU4[O5],W9[O5])then
set j=JX7(JY7)
if j!=-1 then
set LU4[JZ7+8+j]=LU4[JZ7+8+j]-1
set LU4[JZ7+$C+j]=LU4[JZ7+$C+j]+1
set LU4[64+O5]=j
set LU4[96+O5]=1
endif
endif
endif
endif
endif
endif
set i=i+1
endloop
endif
if JY7 then
set LI4=X7
else
set LI4=Y7
endif
set i=1
loop
exitwhen i>5
if JY7 then
set O5=GetPlayerId(Z7[i])
else
set O5=GetPlayerId(A7[i])
endif
if TZ7(Player(O5))and LU4[96+O5]!=0 then
call JC7(M7[O5],O5)
call J3(M7[O5],K57(M7[O5]))
call PU7(M7[O5],LI4)
if eY[O5]==3 or eY[O5]==4 then
call PP7(M7[O5],LI4,GetObjectName(1496330549)+JU7(LU4[64+O5],true))
else
call PP7(M7[O5],LI4,GetObjectName(1496330548)+JU7(LU4[64+O5],true))
endif
set eY[O5]=3
set LU4[96+O5]=0
endif
set i=i+1
endloop
set I_7=null
set LI4=null
return true
endfunction
function LWE takes boolean JY7 returns boolean
local unit I_7=GetTriggerUnit()
local integer O5=GetPlayerId(GetOwningPlayer(I_7))
local integer LTE=JH7(JY7,0,6)
local integer JZ7=JH7(JY7,0,24)
local integer i
local integer j
if((JY7 and P64<2 and P34<2 and PL4<2)or(JY7==false and P04<2 and P14<2 and P54<2))then
return false
elseif O5!=GetPlayerId(Z7[0])and O5!=GetPlayerId(A7[0])then
return false
elseif(IsUnitAlly(I_7,Z7[0])==JY7)or Q87(I_7)==false then
return false
endif
set i=R2I(Atan2(GetUnitY(I_7)-LW4[JZ7+1],GetUnitX(I_7)-LW4[JZ7])*bj_RADTODEG)
set j=-1
if i>360 then
set i=i-360
elseif i<0 then
set i=i+360
endif
if JY7 then
if i<25 and PL4>=2 then
set j=2
elseif i>65 and P64>=2 then
set j=1
elseif P34>=2 then
set j=0
endif
else
if i>$F5 and P54>=2 then
set j=2
elseif i<$CD and P04>=2 then
set j=1
elseif P14>=2 then
set j=0
endif
endif
if j==-1 then
return false
endif
return LVE(JY7)
endfunction
function LXE takes boolean JY7 returns nothing
local integer i=1
local integer O5
loop
exitwhen i>5
if JY7 then
set O5=GetPlayerId(Z7[i])
else
set O5=GetPlayerId(A7[i])
endif
call LSE(O5,JY7)
set i=i+1
endloop
endfunction
function LYE takes nothing returns boolean
if LWE(false)then
call DisableTrigger(Q64)
call EnableTrigger(Q14)
set PV4=true
endif
return false
endfunction
function LZE takes nothing returns boolean
if not LVE(false)then
call EnableTrigger(Q64)
call DisableTrigger(Q14)
set PV4=false
call LXE(false)
endif
return false
endfunction
function LAE takes nothing returns boolean
if LWE(true)then
call DisableTrigger(Q34)
call EnableTrigger(QL4)
set PU4=true
endif
return false
endfunction
function LBE takes nothing returns boolean
if not LVE(true)then
call EnableTrigger(Q34)
call DisableTrigger(QL4)
set PU4=false
call LXE(true)
endif
return false
endfunction
function TRv takes nothing returns boolean
if((IsUnitEnemy(GetFilterUnit(),Z7[0]))and(Q97(GetFilterUnit()))and((IsUnitVisible(GetFilterUnit(),Z7[0]))or(GetOwningPlayer(GetFilterUnit())==A7[0]))and(GetWidgetLife(GetFilterUnit())>.405))then
if(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and(GetUnitLifePercent(GetFilterUnit())>30.))then
set hD=hD+1
endif
return true
endif
return false
endfunction
function LCE takes nothing returns boolean
return((not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL))and(GetWidgetLife(GetFilterUnit())>.405)and(Q87(GetFilterUnit())))!=null
endfunction
function L3E takes real K1,unit u returns unit
local unit UJ7=null
local unit L6E=null
local boolexpr Ig=Condition(function LCE)
local real IW=KE7(u,h9[16+GetPlayerId(GetOwningPlayer(u))])
local real LLE
call GroupClear(iE)
call GroupEnumUnitsInRange(iE,GetUnitX(u),GetUnitY(u),K1,Ig)
loop
set UJ7=FirstOfGroup(iE)
exitwhen(UJ7==null)
if((IsUnitVisible(UJ7,GetOwningPlayer(u)))and(UJ7!=u))then
set LLE=KE7(UJ7,h9[16+GetPlayerId(GetOwningPlayer(u))])
if(LLE<IW)then
set L6E=UJ7
set IW=LLE
endif
endif
call GroupRemoveUnit(iE,UJ7)
endloop
call DestroyBoolExpr(Ig)
set Ig=null
set UJ7=null
set hr=L6E
set L6E=null
return hr
endfunction
function L1E takes nothing returns boolean
return((IsHeroUnitId(GetUnitTypeId(GetFilterUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetFilterUnit()!=GetEnumUnit()))
endfunction
function L0E takes unit it returns integer
local integer i1=GetUnitTypeId(it)
if((i1==1164207469)or(i1==1332766568)or(i1==1328558160)or(i1==1211117616)or(i1==1212363833)or(i1==1315988077)or(i1==1332179560)or(i1==1429221441)or(MR7(it,ZU[R2]))or(MR7(it,ZU[Y0])))then
return 3
elseif(kq(i1))then
return 2
else
return 1
endif
endfunction
function L5E takes real K1,unit u returns unit
local unit UJ7=null
local unit L6E=null
local boolexpr Ig=Condition(function L1E)
local real L2E=0
local real L_E=0
call GroupClear(iE)
call GroupEnumUnitsInRange(iE,GetUnitX(u),GetUnitY(u),K1,Ig)
loop
set UJ7=FirstOfGroup(iE)
exitwhen(UJ7==null)
set L2E=GetUnitState(UJ7,UNIT_STATE_LIFE)
if(GetUnitLifePercent(UJ7)<60.)then
elseif((L6E==null)or(L0E(UJ7)>L0E(L6E)))then
set L6E=UJ7
set L_E=L2E
elseif((L0E(UJ7)==L0E(L6E))and(L_E<L2E))then
set L6E=UJ7
set L_E=L2E
endif
call GroupRemoveUnit(iE,UJ7)
endloop
call DestroyBoolExpr(Ig)
set Ig=null
set UJ7=null
set hr=L6E
set L6E=null
return hr
endfunction
function D4F takes unit it,boolean J2 returns boolean
local integer kt=GetUnitAbilityLevel(it,1093684302)
local real kl=GetUnitFacing(it)*bj_DEGTORAD
local real D7F=GetUnitX(it)+(350.+I2R(50*kt))*Cos(kl)
local real D8F=GetUnitY(it)+(350.+I2R(50*kt))*Sin(kl)
if((kJ(D7F,D8F))and((J2)or(KF7(D7F,D8F,GetUnitX(h9[16+GetPlayerId(GetOwningPlayer(it))]),GetUnitY(h9[16+GetPlayerId(GetOwningPlayer(it))]))<KE7(it,h9[16+GetPlayerId(GetOwningPlayer(it))]))))then
set GZ[GetPlayerId(GetOwningPlayer(it))]=true
return J8(GetPlayerId(GetOwningPlayer(it)),N97(it,$D00A1,1093684302))
endif
return false
endfunction
function D9F takes unit it,boolean J2 returns boolean
local integer kt=GetUnitAbilityLevel(it,1093749303)
local real kl=GetUnitFacing(it)*bj_DEGTORAD
local real D7F=GetUnitX(it)+(300.+I2R(100*kt))*Cos(kl)
local real D8F=GetUnitY(it)+(300.+I2R(100*kt))*Sin(kl)
if((kJ(D7F,D8F))and((J2)or(KF7(D7F,D8F,GetUnitX(h9[16+GetPlayerId(GetOwningPlayer(it))]),GetUnitY(h9[16+GetPlayerId(GetOwningPlayer(it))]))<KE7(it,h9[16+GetPlayerId(GetOwningPlayer(it))]))))then
set GZ[GetPlayerId(GetOwningPlayer(it))]=true
return J8(GetPlayerId(GetOwningPlayer(it)),IssueImmediateOrderById(it,$D0278))
endif
return false
endfunction
function DDF takes unit it returns boolean
local integer i1=GetUnitTypeId(it)
local boolean J4=false
local location b5=null
local unit m5=null
local integer O5=GetPlayerId(GetOwningPlayer(it))
if(KE7(it,h9[16+O5])<600)or(GetUnitLifePercent(it)>80 and G0[$90+O5])then
return false
endif
if G0[288+O5]then
set G0[288+O5]=false
set i1=eY[400+O5]
set G0[304+O5]=true
endif
if(i1==1162032181)then
set b5=kk(it,I2R(400+($C8*GetUnitAbilityLevel(it,1093684299))),h9[16+O5])
set J4=(b5!=null)and(IssuePointOrderByIdLoc(it,$D00FA,b5))
elseif((i1==1430466609)or(i1==1164207469))then
set b5=kk(it,800.,h9[16+O5])
set J4=(b5!=null)and(IssuePointOrderByIdLoc(it,$D022D,b5))
elseif((i1==1165451634)or(i1==1212365106))then
if(i1==1165451634)then
set LD4=600+GetUnitAbilityLevel(it,1093685324)*100
else
set LD4=700.
endif
set m5=L3E(LD4,it)
if((m5!=null)and(it!=m5))then
set J4=(kJ(GetUnitX(m5),GetUnitY(m5)))and(not IsUnitInRange(m5,it,400.))and(IssueTargetOrderById(it,$D0278,m5))
endif
elseif(i1==1429221451)then
set b5=kk(it,I2R(650+(0*GetUnitAbilityLevel(it,1093678671))),h9[16+O5])
set J4=(b5!=null)and(IssuePointOrderByIdLoc(it,$D00FA,b5))
elseif(i1==1328558160)then
set b5=kk(it,600.,h9[16+O5])
if(b5!=null)then
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093682766,true)
set GZ[O5]=true
if(GetUnitLifePercent(it)<48.)then
set J4=J8(O5,IssuePointOrderByIdLoc(it,$D00FA,b5))
endif
endif
elseif(i1==1430466865)then
set b5=kk(it,800.,h9[16+O5])
if(b5!=null)and(Bz>T34[32+O5])then
set J4=M27(it,$D00FA,1093751364,b5)
endif
elseif(i1==1311781206)then
set J4=D4F(it,false)
elseif(i1==1160786502)then
set b5=kk(it,550.,h9[16+O5])
if(b5!=null)then
if(GetUnitLifePercent(it)<35.)then
set GZ[O5]=true
set J4=J8(O5,IssuePointOrderByIdLoc(it,$D0278,b5))
endif
endif
if((not J4)and(GetUnitLifePercent(it)<35.))then
set J4=IssueImmediateOrderById(it,$D02B6)
endif
elseif(i1==1211117651)then
if(GetUnitManaPercent(it)>15.)then
set b5=kk(it,1200.,h9[16+O5])
if(b5!=null)then
set J4=M27(it,$D00FA,1093743695,b5)
endif
if not J4 then
set b5=kk(it,600.,h9[16+O5])
if(b5!=null)then
set J4=M27(it,$D00FA,1093743695,b5)
endif
endif
if J4 then
set h9[O5]=h9[16+O5]
endif
endif
elseif(i1==1311788336)then
if(GetUnitState(it,UNIT_STATE_MANA)>100.)and(LoadInteger(L7,GetHandleId(it),(747))>0)and(not OT7(it,"AI|EmberEscape"))then
set b5=kk(it,1500.,h9[16+O5])
if(b5!=null)then
set J4=IssuePointOrderByIdLoc(it,$D020A,b5)
endif
if not J4 then
set b5=kk(it,600.,h9[16+O5])
if(b5!=null)then
set J4=IssuePointOrderByIdLoc(it,$D020A,b5)
endif
endif
if J4 then
set h9[O5]=h9[16+O5]
call OV7(it,"AI|EmberEscape")
endif
endif
elseif(i1==1160786738)then
if GetUnitAbilityLevel(it,1093813555)!=0 then
set b5=kk(it,600+$C8*GetUnitAbilityLevel(it,1093813555),h9[16+O5])
if(b5!=null)and(TK7(b5,300))then
set J4=IssuePointOrderById(it,$D02B6,GetDestructableX(V54),GetDestructableY(V54))
endif
if(not J4)then
set b5=kk(it,800.,h9[16+O5])
if(b5!=null)and(TK7(b5,300))then
set J4=IssuePointOrderById(it,$D02B6,GetDestructableX(V54),GetDestructableY(V54))
endif
endif
endif
elseif(i1==1211119409 or i1=='H0EV')then
set J4=D9F(it,false)
elseif(i1==1328558406)then
set m5=L3E(1800.,it)
if((m5!=null)and(it!=m5))then
set J4=(kJ(GetUnitX(m5),GetUnitY(m5)))and(not IsUnitInRange(m5,it,1000.))and(M57(it,$D0097,1093751873,m5))
endif
endif
if(i1==1160786520)and(not J4)and(hq[816+O5]>Bz)then
set G0[288+O5]=true
set J4=DDF(it)
set G0[304+O5]=false
endif
if(not J4)and(not G0[304+O5])then
set bj_lastLoadedUnit=it
if(not J4)and((MR7(it,ZU[Y0]))and(ME7(it))and(MP7(800.,it,Condition(function QP7))>0))then
set GZ[$E0+O5]=true
set J4=(i1!=1164277357)and(UnitUseItem(it,bj_lastCreatedItem))
set GZ[$E0+O5]=false
endif
if(not J4)and(MR7(it,ZU[RW]))then
set b5=kk(it,700.,h9[16+O5])
set J4=(b5!=null)and(UnitUseItemPointLoc(it,bj_lastCreatedItem,b5))
endif
if(not J4)and(MR7(it,ZU[DU4]))then
if K87(it,h9[16+O5],20)then
set b5=kk(it,600.,h9[16+O5])
set J4=(b5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,it))
if J4 then
set h9[O5]=h9[16+O5]
endif
elseif(K87(it,h9[O5],20))and(h9[O5]!=h9[16+O5])then
set b5=kk(it,600.,h9[O5])
set J4=(b5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,it))
endif
endif
endif
set b5=null
set m5=null
return J4
endfunction
function DEF takes nothing returns boolean
if(((GetOwningPlayer(GetFilterUnit())==Z7[0])or(GetOwningPlayer(GetFilterUnit())==A7[0]))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(hr)))and(GetWidgetLife(GetFilterUnit())>.405))then
if(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)and(true))then
set hF=hF+1
endif
return true
endif
return false
endfunction
function DFF takes real DGF,unit it,boolean DHF,boolean DIF returns integer
local real DJF
local real DKF
local real D7F=GetUnitX(it)
local real D8F=GetUnitY(it)
local integer kc=0
local integer UP=0
local integer O5=GetPlayerId(GetOwningPlayer(it))
if(DGF>0)then
set DJF=Bz+DGF
loop
set DKF=DJF-Bz
exitwhen DKF<=0
call TriggerSleepAction(.5)
set hr=it
if((GetWidgetLife(it)<=.405)or(GetUnitCurrentOrder(it)==$D000F)or(not is(it)))then
set DJF=Bz
elseif(not DIF)then
set DN7=LoadUnitHandle(L7,(GetHandleId(it)),(652))
set DO7=O77((GetHandleId(it)),"AI|TetherSource")
if K57(it)and(not ME7(it))then
if(DN7!=null)and(not IsUnitInRange(it,DN7,700)and(IsUnitType(DN7,UNIT_TYPE_HERO)))then
call jW(it,$D0012,DN7)
elseif(DO7!=null)and(not IsUnitInRange(it,DO7,700))then
call jW(it,$D0012,DO7)
else
call jW(it,$D0012,h9[O5])
endif
endif
set hF=0
set UP=MP7(700.,it,Condition(function DEF))
if((DGF-DKF>1.)and(hF>0))then
set DJF=Bz
set kc=2
elseif((DHF)and(DGF-DKF>1.)and(UP>1))then
set DJF=Bz
set kc=1
elseif(((DGF-DKF>2.)or((DGF-DKF>1.)and(DHF))))then
call MoveLocation(Ha,D7F,D8F)
if(MO7(700.,Ha,Condition(function DEF))>1)then
set DJF=Bz
set kc=3
endif
elseif((DGF-DKF>=2.)and(iy(it)))then
set DJF=Bz
set kc=1
endif
endif
endloop
endif
return kc
endfunction
function DMF takes nothing returns nothing
local unit it=O77(GetHandleId(GetTriggeringTrigger()),"Unit")
local integer O5=GetPlayerId(GetOwningPlayer(it))
local boolean DNF=GZ[512+O5]
local integer DOF
if MF7(O5)then
return
endif
set G0[48+O5]=true
if(K57(it))then
call jW(it,$D0012,h9[O5])
endif
if(GetUnitTypeId(it)==1211117642)then
call TriggerSleepAction(1.)
set DOF=0
elseif eY[O5]==$B then
set DOF=DFF(1.,it,true,false)
elseif(DNF)then
set DOF=DFF(5.,it,true,false)
else
set DOF=DFF(3.,it,false,false)
endif
set G0[48+O5]=false
if((GetWidgetLife(it)<=.405)or(not is(it)))then
elseif(not K57(it))then
elseif((DOF==2)and(not ME7(it))and(not G0[32+O5]))then
call IssueImmediateOrderById(it,$D0019)
elseif((DNF)or(DOF==3))then
if((not ME7(it))and(not G0[32+O5])and(G0[$80+O5]))then
call jW(it,$D000F,h8[O5])
else
call PW7(it,false)
endif
endif
set it=null
endfunction
function DPF takes unit it,boolean DNF returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(it))
set GZ[512+O5]=DNF
if(Q04[64+O5]!=null)then
call TriggerExecute(Q04[64+O5])
endif
endfunction
function DQF takes unit it returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer UP=GetUnitUserData(h8[O5])
local integer CCE=0
local real UI7=.0
if(IsUnitAlly(it,Z7[0]))then
if((hj[256+UP]==18)or(hj[UP]==$A))then
set CCE=$B+P24
if(UP>CCE)then
call CBE(it,0)
endif
elseif((hj[256+UP]==40)or(hj[UP]==30))then
set CCE=31+P_4
if(UP>CCE)then
call CBE(it,1)
endif
elseif((hj[256+UP]==60)or(hj[UP]==50))then
set CCE=51+Q44
if(UP>CCE)then
call CBE(it,2)
endif
endif
else
set UP=hj[512+UP]
if((hj[256+UP]==118)or(hj[UP]==110))then
set CCE=119-P24
if(UP>CCE)then
call CBE(it,0)
endif
elseif((hj[256+UP]==$8C)or(hj[UP]==$82))then
set CCE=$8D-P_4
if(UP>CCE)then
call CBE(it,1)
endif
elseif((hj[256+UP]==$A0)or(hj[UP]==$96))then
set CCE=$A1-Q44
if(UP>CCE)then
call CBE(it,2)
endif
endif
endif
if((eY[O5]==1)and(h4[O5]!=null)and((not Id(O5))or(GetUnitLifePercent(it)<70.)))then
set UI7=KE7(it,h8[O5])
if(((UI7>2000.)and(KE7(it,NF7(it))>KE7(h8[O5],NF7(it))))or((UI7>1400.)and((GZ[400+O5])and(Bz>hq[544+O5]))))then
call WTE(O5,true)
call jW(it,$D0012,h9[O5])
call DPF(it,true)
endif
endif
endfunction
function DRF takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)and(not IsUnitIllusion(GetTriggerUnit()))and(GetIssuedOrderId()>$D0020))!=null
endfunction
function DSF takes nothing returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
set GZ[16+O5]=true
set eY[256+O5]=GetIssuedOrderId()
set hq[448+O5]=Bz+3.
endfunction
function DTF takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(not IsUnitIllusion(GetFilterUnit()))and(GetWidgetLife(GetFilterUnit())>.405))!=null
endfunction
function DUF takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(not IsUnitIllusion(GetFilterUnit()))and(GetWidgetLife(GetFilterUnit())>.405))!=null
endfunction
function DVF takes unit I_7,unit MD7 returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(I_7))
local integer UP
local integer j
local integer k
local integer L7E=KG7(GetUnitUserData(MD7))
local boolean JY7=IsUnitAlly(I_7,Z7[0])
set h4[$90+O5]=null
set G0[32+O5]=false
set G0[$A0+O5]=false
set G0[$B0+O5]=false
set h4[O5]=null
set GZ[$80+O5]=false
set eY[272+O5]=0
set UP=GetUnitUserData(MD7)
if IsUnitAlly(I_7,Z7[0])then
set UP=UP-1
else
set UP=UP+1
endif
set UP=B_E(UP,IsUnitAlly(I_7,Z7[0]),I27(I_7))
set k=KH7(I_7)
if(KE7(I_7,NF7(I_7))<5000.)then
if(L7E==0)then
set h8[O5]=h7[$E]
set h8[16+O5]=h7[$E]
elseif(L7E==1)then
set h8[O5]=h7[35]
set h8[16+O5]=h7[35]
else
set h8[O5]=h7[55]
set h8[16+O5]=h7[55]
endif
set eY[O5]=1
set h9[O5]=NF7(I_7)
set h9[16+O5]=NF7(I_7)
set hq[576+O5]=Bz+D47
if K57(I_7)then
call jW(I_7,$D000F,h8[O5])
endif
return
endif
set h8[$80+O5]=h7[UP]
set eY[288+O5]=L7E
if eY[288+O5]!=0 then
set eY[304+O5]=eY[288+O5]
else
set eY[304+O5]=k
if eY[304+O5]==0 then
set eY[304+O5]=GetRandomInt(1,2)
endif
endif
set UP=B_E(GetUnitUserData(h9[O5]),IsUnitAlly(I_7,Z7[0]),I27(I_7))
set h8[48+O5]=h7[UP]
set UP=C7E(O5,UP,eY[304+O5],JY7)
set h8[32+O5]=h7[UP]
set eY[O5]=9
set hq[576+O5]=Bz+D47
set hq[592+O5]=Bz+180.
set G0[$B0+O5]=((not M47(I_7))and(h8[48+O5]==h8[32+O5]))
set eY[$D0+O5]=GetUnitUserData(MD7)
set h8[$90+O5]=MD7
if K57(I_7)then
if h8[48+O5]!=h8[32+O5]or G0[$B0+O5]then
call jW(I_7,$D000F,h8[48+O5])
else
call jW(I_7,$D000F,h9[O5])
endif
endif
endfunction
function DWF takes unit I_7,unit MD7 returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(I_7))
local integer PY7=GetPlayerId(GetOwningPlayer(MD7))
local boolean JY7=IsUnitAlly(I_7,Z7[0])
local integer UP
local integer DXF
local integer L7E=KG7(GetUnitUserData(MD7))
local integer i
call DPF(M7[O5],false)
set G0[$A0+O5]=true
set h4[$90+O5]=M7[PY7]
set G0[32+O5]=false
set h4[O5]=null
set GZ[$80+O5]=false
set G0[$C0+O5]=false
set G0[$D0+O5]=true
set hq[640+O5]=Bz+10.
set h8[96+O5]=MD7
set h8[$A0+O5]=h8[80+PY7]
set eY[288+O5]=KH7(MD7)
if eY[288+O5]!=0 then
set eY[304+O5]=eY[288+O5]
else
set eY[304+O5]=KH7(I_7)
if eY[304+O5]==0 then
set eY[304+O5]=GetRandomInt(1,2)
endif
endif
set eY[272+O5]=1
set DXF=B_E(GetUnitUserData(h8[80+PY7])+JH7(JY7,1,-1),JY7,I27(I_7))
set h8[112+O5]=h7[DXF]
set UP=GetUnitUserData(h8[80+O5])
set DXF=C7E(O5,UP,eY[304+O5],JY7)
set h8[32+O5]=h7[DXF]
set h8[48+O5]=h8[32+O5]
set UP=KH7(I_7)
set i=JH7(IsUnitAlly(I_7,Z7[0]),-1,1)
if(UP==0)then
if(KE7(I_7,NF7(I_7))>KE7(h7[$E],NF7(I_7)))then
set h8[48+O5]=h7[$E+i]
endif
elseif(UP==1)then
if(KE7(I_7,NF7(I_7))>KE7(h7[34],NF7(I_7)))then
set h8[48+O5]=h7[34+i]
endif
elseif(UP==2)then
if(KE7(I_7,NF7(I_7))>KE7(h7[57],NF7(I_7)))then
set h8[48+O5]=h7[57+i]
endif
endif
set UP=GetUnitUserData(h8[112+O5])
if(JY7)then
if((hj[256+UP]==18)or(hj[UP]==$A))then
set i=IMaxBJ($A+P24,$B)
elseif((hj[256+UP]==40)or(hj[UP]==30))then
set i=IMaxBJ(30+P_4,31)
else
set i=IMaxBJ(50+Q44,51)
endif
else
set UP=hj[512+UP]
if((hj[256+UP]==118)or(hj[UP]==110))then
set i=IMaxBJ(118-P24,111)
elseif((hj[256+UP]==$8C)or(hj[UP]==$82))then
set i=IMaxBJ($8C-P_4,$83)
else
set i=IMaxBJ($A0-Q44,$97)
endif
endif
set h8[$80+O5]=h7[i]
set eY[O5]=9
set hq[576+O5]=Bz+D47
set hq[592+O5]=Bz+180.
set G0[$B0+O5]=((not M47(I_7))and(h8[48+O5]==h8[32+O5]))
if K57(I_7)and GetUnitCurrentOrder(I_7)==$D000F then
if h8[48+O5]!=h8[32+O5]or G0[$B0+O5]then
call jW(I_7,$D000F,h8[48+O5])
else
call jW(I_7,$D000F,h9[O5])
endif
endif
endfunction
function DYF takes nothing returns nothing
local unit it=GetEnumUnit()
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer i1=GetUnitTypeId(it)
local real DZF=GetUnitX(it)
local real DAF=GetUnitY(it)
if(i1==1211117642)then
if(GetPlayerController(GetOwningPlayer(it))==MAP_CONTROL_COMPUTER)then
call J3(it,false)
endif
return
endif
if(GetPlayerController(GetOwningPlayer(it))==MAP_CONTROL_COMPUTER)then
if((GetHeroSkillPoints(it)>0)and(Bz>QD4)and(K57(it)))then
call ExecuteFunc("YEE")
endif
if((KE7(it,h8[O5])<150.)and(h8[O5]!=h7[1])and(h8[O5]!=h7[101]))then
if(IsUnitAlly(it,Z7[0]))then
set hF=GetUnitUserData(h8[O5])
else
set hF=hj[512+GetUnitUserData(h8[O5])]
endif
if(hF>0)then
call UO7(it,hF)
elseif(h8[O5]!=h9[O5])then
set h8[O5]=h9[O5]
else
set h8[O5]=NF7(it)
endif
elseif(eY[O5]==1)then
call DQF(it)
endif
if(PE4)then
set hF=GetUnitUserData(h8[O5])
if(((hF>30)and(hF<40))or((hF>50)and(hF<60)))then
call CBE(it,0)
endif
endif
if((h4[80+O5]!=null)and(GetWidgetLife(h4[80+O5])<=.405))then
set h4[80+O5]=null
endif
if((h4[96+O5]!=null)and(GetWidgetLife(h4[96+O5])<=.405))then
set h4[96+O5]=null
endif
if((h4[$80+O5]!=null)and((GetWidgetLife(h4[$80+O5])<=.405)))then
set h4[$80+O5]=null
endif
if((h4[$A0+O5]!=null)and((GetWidgetLife(h4[$A0+O5])<=.405)or(not IsUnitInRange(it,h4[$A0+O5],1000.))))then
set h4[$A0+O5]=null
endif
if((h4[48+O5]!=null)and(((eY[O5]!=3)and(eY[O5]!=4))or(GetWidgetLife(h4[48+O5])<=.405)))then
set h4[48+O5]=null
endif
if((KF7(DZF,DAF,GetLocationX(HC[32+O5]),GetLocationY(HC[32+O5]))<20.)and(Bz>QD4))then
set G0[48+O5]=false
if(eY[O5]!=2)then
if((GZ[$90+O5])and(K57(it))and(MP7(700.,it,Condition(function KX))==0)and(((eY[O5]!=9 or eY[272+O5]!=3)and eY[O5]!=$A and eY[O5]!=$B)or(MP7(700.,it,Condition(function KA))==0)))then
call ExecuteFunc("DBF")
else
set GZ[$90+O5]=true
if((eY[O5]==3)or(eY[O5]==4))then
call JC7(it,O5)
endif
if(iU(it))then
call J3(it,true)
endif
endif
elseif((GetUnitLifePercent(it)>90)and(GetUnitManaPercent(it)>90))then
if(GZ[$90+O5])then
if(IsUnitAlly(it,Z7[0]))then
call LEE(it,O5,PU4)
else
call LEE(it,O5,PV4)
endif
else
set GZ[$90+O5]=true
endif
endif
elseif(GZ[$90+O5])then
set GZ[$90+O5]=false
endif
call MoveLocation(HC[32+O5],DZF,DAF)
if((eY[O5]==$A)and(hq[432+O5]<Bz))then
set eY[O5]=1
set h4[64+O5]=null
endif
if((GZ[480+O5])and(eY[O5]!=4)and(eY[O5]!=2))then
set GZ[480+O5]=false
endif
if((GZ[16+O5])and(hq[448+O5]<Bz)and(eY[256+O5]==GetUnitCurrentOrder(it)))then
call J3(it,true)
set GZ[16+O5]=false
endif
elseif((GetPlayerController(GetOwningPlayer(it))==MAP_CONTROL_NONE)and(IsUnitInForce(it,QX4)))then
if((is(it))and(GetUnitCurrentOrder(it)!=$D000F))then
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1097690998,true)
call SetPlayerController(GetOwningPlayer(it),MAP_CONTROL_COMPUTER)
call J3(it,true)
endif
endif
set GZ[32+O5]=false
set GZ[400+O5]=false
endfunction
function DCF takes nothing returns nothing
local integer O5=1
local integer O27
local integer i=0
local integer j=0
local real D3F
local real D6F
local boolean DLF=false
local string D1F=""
local boolean D0F=(Bz>QD4)
local boolean D5F=(Bz>QD4)
set O5=1
loop
exitwhen O5>$B
if O5==6 then
set O5=7
endif
if(GetPlayerSlotState(Player(O5))==PLAYER_SLOT_STATE_PLAYING)then
call GroupClear(iE)
call GroupEnumUnitsOfPlayer(iE,Player(O5),ip)
call ForGroup(iE,function DYF)
if M7[O5]!=null then
set D3F=2+GetHeroAgi(M7[O5],true)*.14
set D6F=1
set i=0
loop
exitwhen i>5
set j=GetItemTypeId(UnitItemInSlot(M7[O5],i))
if((j==ZU[UV])or(j==ZU[AL])or(j==ZU[B3])or(j==ZU[T1])or(j==ZU[NW])or(j==ZU[N3])or(j==ZU[J1])or(j==ZU[T2])or(j==ZU[DK4])or(j==ZU[DM4]))then
set D3F=D3F+5
elseif((j==ZU[SX])or(j==ZU[DH4])or(j==ZU[DP4]))then
set D3F=D3F+$A
elseif(j==ZU[JB])then
set D6F=D6F+.25
elseif(j==ZU[Z2])then
set D6F=D6F+.3
endif
set i=i+1
endloop
set D3F=(.06*D3F)/(1.+.06*D3F)
set hq[752+O5]=(1/(1-D3F))*(D6F)
endif
if M7[O5]!=null and GetHeroLevel(M7[O5])<$B then
if IsPlayerAlly(Player(O5),Z7[0])then
set D5F=false
else
set D0F=false
endif
endif
endif
set O5=O5+1
endloop
if D0F and(not B_4)then
set B_4=true
set LG4=false
set O5=1
loop
exitwhen O5>5
if TZ7(Z7[O5])then
set LG4=true
endif
set O5=O5+1
endloop
if LG4 then
set O5=1
loop
exitwhen O5>5
set O27=GetPlayerId(Z7[O5])
if B24[16+O27]then
set B24[16+O27]=false
call O_7(IZ4,GetObjectName(1496331829)+" "+GetObjectName(1497445941)+"|c00dd8dff"+GetObjectName(1496331830),Z7[O5])
endif
set O5=O5+1
endloop
endif
endif
if D5F and(not CK4)then
set CK4=true
set LG4=false
set O5=1
loop
exitwhen O5>5
if TZ7(A7[O5])then
set LG4=true
endif
set O5=O5+1
endloop
if LG4 then
set O5=1
loop
exitwhen O5>5
set O27=GetPlayerId(A7[O5])
if B24[16+O27]then
set B24[16+O27]=false
call O_7(JA4,GetObjectName(1496331829)+" "+GetObjectName(1497445941)+"|c00dd8dff"+GetObjectName(1496331830),A7[O5])
endif
set O5=O5+1
endloop
endif
endif
if((G1==0)and(not Ev)and(not Av))then
set G1=GetRandomInt(1,2)
elseif((G1==1)and(not Rv)and(not av))then
if((Nv)or(Ov))then
set G1=2
else
set G1=-1
endif
elseif((G1==2)and(not Nv)and(not Ov))then
if((Rv)or(av))then
set G1=1
else
set G1=-1
endif
endif
if((G2==0)and(not Bv)and(not Dv))then
set G2=GetRandomInt(1,2)
elseif((G2==1)and(not bv)and(not Cv))then
if((cv)or(fv))then
set G2=2
else
set G2=-1
endif
elseif((G2==2)and(not cv)and(not fv))then
if((bv)or(Cv))then
set G2=1
else
set G2=-1
endif
endif
set D47=120.-.05*Bz
if D47<60. then
set D47=60.
endif
call C_E()
if PZ4 and G4==-1 then
set LI4=X7
set i=1
loop
exitwhen i>5
set O5=LU4[80+i]
if O5!=-1 and M7[O5]!=null and GetUnitLifePercent(M7[O5])>70. and eY[O5]==1 and h4[O5]==null and(eY[544+O5]==0 and Bz>hq[576+O5])and(GetHeroLevel(M7[O5])<PB4)and(GetHeroLevel(M7[O5])>=6)then
set j=LHE(LME(M7[O5]),GetHeroLevel(M7[O5]))
if(j!=eY[64+O5])and(j==0 or eY[64+O5]==0)and((LU4[112+j]!=0)or(LU4[$90+j]<Bz))then
set LU4[112+eY[64+O5]]=LU4[112+eY[64+O5]]-1
if(j==1)then
call DVF(M7[O5],h7[29+P_4])
call PP7(M7[O5],LI4,GetObjectName(1496330293))
elseif(j==2)then
call DVF(M7[O5],h7[49+Q44])
call PP7(M7[O5],LI4,GetObjectName(1496330294))
else
call DVF(M7[O5],h7[9+P24])
call PP7(M7[O5],LI4,GetObjectName(1496330292))
endif
call PU7(M7[O5],LI4)
set LU4[112+j]=LU4[112+j]+1
set eY[64+O5]=j
endif
endif
set i=i+1
endloop
endif
if PA4 and G3==-1 then
set LI4=Y7
set i=1
loop
exitwhen i>5
set O5=LU4[86+i]
if O5!=-1 and M7[O5]!=null and GetUnitLifePercent(M7[O5])>70. and eY[O5]==1 and h4[O5]==null and(eY[544+O5]==0 and Bz>hq[576+O5])and(GetHeroLevel(M7[O5])<PB4)and(GetHeroLevel(M7[O5])>=6)then
set j=LHE(L9E(M7[O5]),GetHeroLevel(M7[O5]))
if(j!=eY[64+O5])and(j==0 or eY[64+O5]==0)and((LU4[118+j]!=0)or(LU4[$90+j]<Bz))then
set LU4[118+eY[64+O5]]=LU4[118+eY[64+O5]]-1
if(j==1)then
call DVF(M7[O5],h7[$8B-P_4])
call PP7(M7[O5],LI4,GetObjectName(1496330293))
elseif(j==2)then
call DVF(M7[O5],h7[$9F-Q44])
call PP7(M7[O5],LI4,GetObjectName(1496330294))
else
call DVF(M7[O5],h7[117-P24])
call PP7(M7[O5],LI4,GetObjectName(1496330292))
endif
call PU7(M7[O5],LI4)
set LU4[118+j]=LU4[118+j]+1
set eY[64+O5]=j
endif
endif
set i=i+1
endloop
endif
set O5=1
loop
exitwhen O5>$B
if O5==6 then
set O5=7
endif
if(GetPlayerSlotState(Player(O5))==PLAYER_SLOT_STATE_PLAYING)then
set DLF=false
if M7[O5]!=null and GetWidgetLife(M7[O5])>.405 then
if M47(M7[O5])then
if h4[$B0+O5]==null or KE7(M7[O5],h4[$B0+O5])>3000. or GetWidgetLife(h4[$B0+O5])>0 then
set L14=null
set i=1
loop
exitwhen L14!=null or i>5
if IsPlayerAlly(Player(O5),Z7[0])then
set O27=GetPlayerId(A7[i])
else
set O27=GetPlayerId(Z7[i])
endif
if M7[O27]!=null and GetWidgetLife(M7[O27])>.405 and TZ7(Player(O27))then
if KE7(M7[O27],M7[O5])<1800. then
set L14=M7[O27]
endif
endif
set i=i+1
endloop
if L14!=null then
set h4[$B0+O5]=L14
endif
endif
set LW4[48+O5]=GetUnitX(M7[O5])
set LW4[64+O5]=GetUnitY(M7[O5])
set eY[336+O5]=eY[80+O5]
if eY[$F0+O5]<R2I(Bz)then
set L14=h4[$B0+O5]
if L14==null then
set L14=h4[$C0+O5]
endif
if L14!=null then
set O27=GetPlayerId(GetOwningPlayer(L14))
set DLF=true
set D1F="|r"+Q[O27]+KZ4[O27]+GetObjectName(1496331064)+JU7(eY[80+O5],true)+" - "+Q[O5]+GetUnitName(M7[O5])+"|r"
set h4[$C0+O5]=null
endif
endif
set eY[$F0+O5]=R2I(Bz)+20
elseif eY[$F0+O5]<R2I(Bz)and h4[$B0+O5]!=null then
set O27=GetPlayerId(GetOwningPlayer(h4[$B0+O5]))
set DLF=true
set D1F="|r"+Q[O27]+KZ4[O27]+GetObjectName(1496331065)+JU7(eY[336+O27],true)+" - "+Q[O5]+GetUnitName(M7[O5])+"|r"
set h4[$C0+O5]=h4[$B0+O5]
set h4[$B0+O5]=null
endif
else
set h4[$B0+O5]=null
endif
if DLF then
call TriggerSleepAction(.4)
if IsPlayerAlly(Player(O5),Z7[0])then
set LI4=Y7
else
set LI4=X7
endif
if B24[16+GetPlayerId(GetLocalPlayer())]and IsPlayerInForce(GetLocalPlayer(),LI4)then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10.,D1F)
call PT7(LI4,LW4[48+O5],LW4[64+O5],O27)
endif
endif
endif
set O5=O5+1
endloop
set LI4=null
endfunction
function E4F takes integer O5,unit I_7,unit E7F,boolean E8F returns boolean
local boolean MA7=false
if(not MA7)and((GetUnitAbilityLevel(I_7,1093677391)>0)and(Bz>T34[32+O5]))then
set MA7=IssuePointOrderById(I_7,$D022D,GetUnitX(E7F)+GetRandomReal(-200.,200.),GetUnitY(E7F)+GetRandomReal(-200.,200.))
endif
if(not MA7)and E8F and(GetUnitAbilityLevel(I_7,1093683257)>0 and(Bz>T34[O5]))then
set bj_lastLoadedUnit=E7F
set bj_lastReplacedUnit=MN7(800.,M07(E7F),Condition(function QP7))
if(bj_lastReplacedUnit!=null)then
set MA7=IssueImmediateOrderById(I_7,$D020A)
endif
endif
if(not MA7)and E8F and(GetUnitAbilityLevel(I_7,1093685808)>0 and(Bz>T34[O5]))then
set MA7=IssuePointOrderById(I_7,$D0278,GetUnitX(E7F),GetUnitY(E7F))
endif
if(not MA7)and E8F and(GetUnitAbilityLevel(I_7,1093751874)>0 and(Bz>T34[O5]))then
if(Bz>T34[16+O5])then
set bj_lastReplacedUnit=SU7(1800.,I_7,false)
if bj_lastReplacedUnit!=null then
set MA7=M57(I_7,$D0097,1093751873,bj_lastReplacedUnit)
set h8[$A0+O5]=E7F
endif
endif
if(not MA7)then
set MA7=IssuePointOrderById(I_7,$D02B6,GetUnitX(E7F)+GetRandomReal(-200.,200.),GetUnitY(E7F)+GetRandomReal(-200.,200.))
endif
endif
set bj_lastLoadedUnit=E7F
if(not MA7)and E8F and(GetPlayerController(GetOwningPlayer(E7F))==MAP_CONTROL_COMPUTER)and((GetUnitTypeId(E7F)==1214409837 and N97(E7F,$D00D4,1093742932))or((GetUnitAbilityLevel(E7F,1093742938)+GetUnitAbilityLevel(E7F,1093742677)+GetUnitAbilityLevel(E7F,1093742937))>0))and(MP7(800.,I_7,Condition(function QP7))==0)and(K57(E7F))and(K57(I_7))then
if(IssueTargetOrderById(E7F,$D0118,I_7))then
set MA7=true
call DPF(I_7,true)
endif
endif
if(not MA7)and(eY[$E0+O5]<R2I(Bz)and GetUnitState(I_7,UNIT_STATE_MANA)>75)then
set MA7=PB7(I_7,E7F)
endif
return MA7
endfunction
function E9F takes unit I_7,boolean JY7,integer JV7 returns integer
local unit EDF=null
local integer O5=0
local integer UP=0
local integer i=0
local integer ZQE=0
local integer k=0
local real COE=0
if ON7(GetHandleId(I_7),"AI|TowerDef_CountCD")>R2I(Bz)then
return OM7(GetHandleId(I_7),"AI|TowerDef_Require")
endif
set LG4=false
set bj_lastLoadedUnit=null
set COE=$98967F
call GroupClear(H8)
call GroupEnumUnitsInRange(H8,GetUnitX(I_7),GetUnitY(I_7),1800.,Q24)
loop
set EDF=FirstOfGroup(H8)
exitwhen EDF==null
call GroupRemoveUnit(H8,EDF)
set O5=GetPlayerId(GetOwningPlayer(EDF))
set i=GetUnitTypeId(EDF)
if((GetUnitAbilityLevel(EDF,1093678162)!=0 and((i==1970107511 or i==1966092370)or(i==1700946284 or i==1697657398))==false)or GetUnitAbilityLevel(EDF,1097625443)!=0 or GetWidgetLife(EDF)<50.)then
elseif O5==$C or O5>$E then
elseif not(IsUnitType(EDF,UNIT_TYPE_MELEE_ATTACKER)or IsUnitType(EDF,UNIT_TYPE_RANGED_ATTACKER))then
else
set i=GetUnitTypeId(EDF)
set UP=0
if IsUnitType(EDF,UNIT_TYPE_HERO)and i!=1211117642 then
if(IsUnitAlly(EDF,Z7[0])==JY7)then
set LG4=true
set LD4=KE7(I_7,EDF)
if LD4<COE and TZ7(Player(O5))then
set bj_lastLoadedUnit=EDF
set COE=LD4
endif
else
set k=k+1
endif
elseif O5!=GetPlayerId(Z7[0])and O5!=GetPlayerId(A7[0])then
set UP=3
else
if(i==1969711215 or i==1970169187)or(i==1966092337 or i==1966092338)or(i==1702061422 or i==1701081721)or(i==1697656918 or i==1697656919)then
set UP=1
elseif(i==1970107511 or i==1966092370)or(i==1700946284 or i==1697657398)then
set UP=3
else
set UP=5
endif
endif
if(IsUnitAlly(EDF,Z7[0])==JY7)then
set ZQE=ZQE-UP
else
set ZQE=ZQE+UP
endif
endif
endloop
if JY7 then
set k=R2I(L84*I2R(k))
else
set k=R2I(L74*I2R(k))
endif
set ZQE=ZQE+IMaxBJ(600-R2I(GetWidgetLife(I_7)),0)/30
if(not LG4)and(k==0)and(ZQE>8)then
set k=k+1
endif
call C_E()
set k=k-LU4[112+JH7(JY7,0,6)+JV7]
call NP7(GetHandleId(I_7),"AI|TowerDef_Require",k)
call NQ7(GetHandleId(I_7),"AI|TowerDef_CountCD",Bz+1)
return k
endfunction
function EEF takes nothing returns nothing
local unit I_7=O77(GetHandleId(GetTriggeringTrigger()),"Unit")
local unit EDF=null
local boolean JY7=IsUnitAlly(I_7,Z7[0])
local integer O5=0
local integer j=0
local integer i=0
local integer k=0
local integer ZQE=0
local integer UP
local boolean MA7=false
if(GetWidgetLife(I_7)<.405 or YU8(I_7))or((not((JY7 and PZ4)or((not JY7)and PA4))))or(PE4)or(I_7==null)or(ON7(GetHandleId(I_7),"DefCD")>Bz)then
set I_7=null
return
endif
set j=OM7(GetHandleId(I_7),"AI|Lane")
set k=E9F(I_7,JY7,j)
call NQ7(GetHandleId(I_7),"DefCD",Bz+1.)
if k<=0 then
set I_7=null
return
endif
if bj_lastLoadedUnit!=null and GetWidgetLife(I_7)<425 then
if Bz>ON7(GetHandleId(I_7),"PingCD")then
call NQ7(GetHandleId(I_7),"PingCD",Bz+30.)
if JY7 then
call PT7(X7,GetUnitX(I_7),GetUnitY(I_7),GetPlayerId(GetOwningPlayer(bj_lastLoadedUnit)))
else
call PT7(Y7,GetUnitX(I_7),GetUnitY(I_7),GetPlayerId(GetOwningPlayer(bj_lastLoadedUnit)))
endif
endif
endif
set EDF=h7[OM7(GetHandleId(I_7),"AI|Wpt")]
set i=1
set ZQE=JH7(JY7,0,6)
set MA7=false
loop
exitwhen(i>5)
set O5=LU4[80+ZQE+i]
if O5!=-1 and GetPlayerController(Player(O5))==MAP_CONTROL_COMPUTER then
set LU4[96+O5]=0
set LU4[$B0+O5]=0
set UP=KH7(M7[O5])
set bj_lastLoadedUnit=M7[O5]
if(M7[O5]==null)or((eY[O5]!=1 or(GetUnitCurrentOrder(M7[O5])==$D0012 and G0[48+O5]==false))and eY[O5]!=$A)or(IG4[O5])or(ME7(M7[O5]))then
elseif(UP==j)then
set eY[544+O5]=1
set h9[64+O5]=I_7
set hq[320+O5]=Bz+20.
elseif(eY[544+O5]!=0)or(eY[O5]==3 or eY[O5]==4)or(Bz<hq[528+O5])or(h4[O5]!=null)or(Y74[O5]==1)or(GetHeroLevel(M7[O5])<6)or(GetUnitLifePercent(M7[O5])<50.)then
else
set LU4[96+O5]=1
endif
endif
set i=i+1
endloop
set i=1
loop
exitwhen(i>$F or k<=0)
if i>$A then
set O5=LU4[80+ZQE+i-$A]
elseif i>5 then
set O5=LU4[80+ZQE+i-5]
else
set O5=LU4[80+ZQE+i]
endif
if O5!=-1 and LU4[96+O5]==1 and GetPlayerController(Player(O5))==MAP_CONTROL_COMPUTER then
set UP=KH7(M7[O5])
if(i<5)and(Bz>hq[576+O5])then
elseif(i<=$A)and((JY7 and((LU4[112+UP]-LU4[118+UP]<0)or(LU4[112+UP]<=1)))or((not JY7)and((LU4[118+UP]-LU4[112+UP]<0)or(LU4[118+UP]<=1))))then
elseif(LU4[$B0+O5]==0)then
set LU4[$B0+O5]=1
set bj_lastCreatedUnit=MN7(1200.,M07(M7[O5]),Condition(function MQ7))
if((bj_lastCreatedUnit==null)or(GetWidgetLife(bj_lastCreatedUnit)>200.))then
set LG4=false
if(i<=$A)and(eY[$E0+O5]<R2I(Bz)and GetUnitState(I_7,UNIT_STATE_MANA)>75)and MR7(I_7,YC)then
if(MP7(1500.,M7[O5],Condition(function QP7))==0)and(PB7(M7[O5],I_7))then
call DVF(M7[O5],EDF)
else
call DPF(M7[O5],true)
set h8[$90+O5]=I_7
endif
set LG4=true
endif
if(not LG4)and(i>$A)then
set LG4=((j!=UP)and(j==0 or UP==0))
if(LG4)then
call DVF(M7[O5],EDF)
set h4[$90+O5]=I_7
set h8[$90+O5]=I_7
endif
endif
if(LG4)then
set k=k-1
set hq[528+O5]=Bz+10.
set eY[544+O5]=1
set h9[64+O5]=I_7
set LU4[112+ZQE+UP]=LU4[112+ZQE+UP]-1
if eY[O5]!=9 then
set eY[O5]=1
endif
set MA7=true
endif
endif
endif
endif
set i=i+1
endloop
if MA7 then
call NQ7(GetHandleId(I_7),"DefCD",Bz+10.)
endif
set I_7=null
set EDF=null
endfunction
function EFF takes nothing returns boolean
return((GetWidgetLife(GetTriggerUnit())>50.)and(Q87(GetTriggerUnit()))and(IsUnitEnemy(GetTriggerUnit(),Z7[0])))
endfunction
function EGF takes nothing returns boolean
return((GetWidgetLife(GetTriggerUnit())>50.)and(Q87(GetTriggerUnit()))and(IsUnitEnemy(GetTriggerUnit(),A7[0])))
endfunction
function EHF takes unit I_7,integer EIF,integer JV7 returns trigger
local trigger t=CreateTrigger()
if GetOwningPlayer(I_7)==Z7[0]then
call TriggerRegisterUnitInRange(t,I_7,1200.,Condition(function EFF))
call NP7(GetHandleId(I_7),"AI|WptClear",EIF+1)
else
call TriggerRegisterUnitInRange(t,I_7,1200.,Condition(function EGF))
call NP7(GetHandleId(I_7),"AI|WptClear",EIF-1)
endif
call TriggerAddAction(t,function EEF)
call NT7(GetHandleId(t),"Unit",I_7)
call NP7(GetHandleId(I_7),"AI|Wpt",EIF)
call NP7(GetHandleId(I_7),"AI|Lane",JV7)
return t
endfunction
function EJF takes unit it returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer k=0
local integer ZQE=0
local integer i=0
local integer j=0
local boolean EKF=false
local unit I_7=null
local player pl=GetOwningPlayer(it)
local boolean EMF=false
local integer ENF
local boolean EOF=false
local boolean MA7=false
local boolean EPF=IsUnitInRange(it,NF7(it),5000.)
local boolean EQF=false
set i=GetUnitTypeId(it)
if TZ7(pl)and((i==1211117650)or(i==1211119433)or(i==1429221430)or(i==1433105516))then
set EQF=true
set GZ[O5]=true
endif
set i=0
set GZ[320+O5]=false
call GroupClear(H8)
call GroupClear(iA)
call GroupClear(H9)
call GroupEnumUnitsInRange(iA,GetUnitX(it),GetUnitY(it),1800.,null)
loop
set I_7=FirstOfGroup(iA)
exitwhen I_7==null
call GroupRemoveUnit(iA,I_7)
if not IsUnitIllusion(I_7)then
call GroupAddUnit(H8,I_7)
endif
if(not EMF)and IsUnitType(I_7,UNIT_TYPE_HERO)and IsUnitEnemy(I_7,pl)and GetWidgetLife(I_7)>.405 and eY[32+GetPlayerId(GetOwningPlayer(I_7))]>0 then
set EMF=true
call GroupEnumUnitsInRange(H9,GetUnitX(I_7),GetUnitY(I_7),1200.,null)
call GroupAddGroup(H9,H8)
endif
endloop
set h4[304+O5]=null
loop
set I_7=FirstOfGroup(H8)
exitwhen(I_7==null)
if(GetWidgetLife(I_7)<=.405)then
elseif ME7(I_7)then
elseif(IsUnitType(I_7,UNIT_TYPE_HERO))then
if(IsUnitEnemy(I_7,pl))then
if((not IsUnitInRange(it,I_7,600.))or(kD(I_7)))and(eY[32+GetPlayerId(GetOwningPlayer(I_7))]==0)then
elseif(GetUnitTypeId(I_7)!=1211117642)then
set ZQE=ZQE-1
set MA7=true
if(EQF)and(GetUnitTypeId(I_7)==1333027688)then
set GZ[O5]=false
endif
elseif(not EOF)then
set EOF=true
endif
elseif IsUnitInRange(I_7,it,1200.)or EPF then
if((GetUnitTypeId(I_7)!=1211117642)and(I_7!=it)and(not ME7(I_7)))then
set k=k+1
set i=i+1
endif
if IsUnitInRange(I_7,it,800)then
set GZ[320+O5]=true
endif
endif
elseif((IsUnitType(I_7,UNIT_TYPE_STRUCTURE)and IsUnitType(I_7,UNIT_TYPE_RANGED_ATTACKER))and(KE7(I_7,it)<1000.)and(I27(it)<2000.))then
if(IsUnitEnemy(I_7,pl))then
set j=j-1
set h4[304+O5]=I_7
elseif IsUnitAlly(I_7,pl)then
set j=j+1
endif
endif
call GroupRemoveUnit(H8,I_7)
endloop
if(EOF)then
set ZQE=ZQE-1
set EKF=true
endif
if not MA7 then
set h4[304+O5]=null
endif
if IsPlayerAlly(pl,Z7[0])then
set eY[320+O5]=R2I(k*L74+ZQE*L84)+j
set GZ[$D0+O5]=((R2I(i*L74)>=3)and(k<=0))
else
set eY[320+O5]=R2I(k*L84+ZQE*L74)+j
set GZ[$D0+O5]=((R2I(i*L84)>=3)and(k<=0))
endif
return EKF
endfunction
function ERF takes unit it returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer kc=0
local boolean J4=false
local boolean EKF=false
local player pl=GetOwningPlayer(it)
local integer UP
set EKF=EJF(it)
if MF7(O5)then
set pl=null
return false
endif
if(KE7(it,NF7(it))<600.)then
set kc=0
else
set kc=-eY[320+O5]
if(not G0[$80+O5])then
set kc=kc+1
endif
if((GetUnitLifePercent(it)<70.)or(IC(O5)))then
set kc=kc+1
endif
if(eY[O5]==3 or eY[O5]==4)then
set kc=kc-1
endif
endif
set G0[$90+O5]=EKF
if(kc>2)and(eY[O5]<9)and(h4[O5]==null or(not M97(h4[O5],it)))then
set h4[O5]=null
set GZ[$80+O5]=false
set G0[$80+O5]=false
set G0[256+O5]=false
if h4[304+O5]==null or kc>=3 then
set hq[496+O5]=Bz+3.
else
set hq[496+O5]=Bz+1.
endif
if(is(it))then
call jW(it,$D0012,h9[O5])
endif
set J4=true
elseif kc>1 then
set G0[256+O5]=false
else
set G0[$80+O5]=true
set G0[256+O5]=true
endif
set pl=null
return J4
endfunction
function ESF takes nothing returns boolean
return((not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and(Q87(GetFilterUnit())))!=null
endfunction
function ETF takes nothing returns nothing
local unit it=O77(GetHandleId(GetTriggeringTrigger()),"Unit")
local unit m5=GetTriggerUnit()
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer UP
local string D1F
if(IsUnitType(m5,UNIT_TYPE_STRUCTURE))then
set UP=MP7(1250.,m5,Condition(function ESF))
if(eY[O5]==9)then
call UQ7(it)
endif
if((GetHeroLevel(it)<6)or((not Id(O5))and(Bz>hq[512+O5])))then
if((R2I(GetUnitState(it,UNIT_STATE_LIFE))<(400+(GetHeroLevel(it)*40)))and(UP<3))then
call WTE(O5,false)
set GZ[$80+O5]=false
call DPF(it,false)
elseif((GetUnitLifePercent(m5)>20.)and((UP<1)or(((QD7(it))or(GetHeroLevel(it)<$A))and(UP<2))))then
call DPF(it,true)
endif
elseif(ME7(it))then
set h4[O5]=null
set GZ[$80+O5]=false
call DPF(it,false)
endif
if(GetUnitAbilityLevel(m5,1098282348)>0)then
call CBE(it,-1)
else
set h4[$80+O5]=m5
endif
elseif(IsUnitType(m5,UNIT_TYPE_HERO))and(IsUnitVisible(m5,Player(O5)))then
call ERF(it)
if(iy(it))then
set h4[$A0+O5]=m5
endif
set UP=GetPlayerId(GetOwningPlayer(m5))
if(TZ7(Player(O5)))and(eY[$F0+UP]<R2I(Bz))then
set D1F="|r"+Q[O5]+KZ4[O5]+GetObjectName(1496331064)+JU7(KI7(O5),true)+" - "+Q[UP]+GetUnitName(m5)+"|r"
set h4[$C0+UP]=null
set eY[$F0+UP]=R2I(Bz)+20
call TriggerSleepAction(.4)
if IsUnitAlly(it,Z7[0])then
set LI4=X7
else
set LI4=Y7
endif
if B24[16+GetPlayerId(GetLocalPlayer())]and IsPlayerInForce(GetLocalPlayer(),LI4)then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10.,D1F)
call PT7(LI4,GetUnitX(m5),GetUnitY(m5),O5)
endif
endif
endif
set it=null
set m5=null
endfunction
function EUF takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(M87(GetTriggerUnit()))and(IsUnitAlly(GetTriggerUnit(),Z7[0])))!=null
endfunction
function EVF takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(M87(GetTriggerUnit()))and(IsUnitAlly(GetTriggerUnit(),A7[0])))!=null
endfunction
function EWF takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE))and(M87(GetTriggerUnit()))and(GetOwningPlayer(GetTriggerUnit())==Z7[0])and((GetUnitTypeId(GetTriggerUnit())==1697656914)or(GetUnitTypeId(GetTriggerUnit())==1697657137)or(GetUnitTypeId(GetTriggerUnit())==1697656915)or(GetUnitTypeId(GetTriggerUnit())==1697657145)))!=null
endfunction
function EXF takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE))and(M87(GetTriggerUnit()))and(GetOwningPlayer(GetTriggerUnit())==A7[0])and((GetUnitTypeId(GetTriggerUnit())==1966092365)or(GetUnitTypeId(GetTriggerUnit())==1966092356)or(GetUnitTypeId(GetTriggerUnit())==1966092366)or(GetUnitTypeId(GetTriggerUnit())==1966092372)))!=null
endfunction
function EYF takes unit it returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(it))
if(Q04[32+O5]!=null)then
call NM7(GetHandleId(Q04[32+O5]))
call DestroyTrigger(Q04[32+O5])
endif
set Q04[32+O5]=CreateTrigger()
call NT7(GetHandleId(Q04[32+O5]),"Unit",it)
if(IsUnitAlly(it,Z7[0]))then
call TriggerRegisterUnitInRange(Q04[32+O5],it,1000.,Condition(function EVF))
call TriggerRegisterUnitInRange(Q04[32+O5],it,1000.,Condition(function EXF))
else
call TriggerRegisterUnitInRange(Q04[32+O5],it,1000.,Condition(function EUF))
call TriggerRegisterUnitInRange(Q04[32+O5],it,1000.,Condition(function EWF))
endif
call TriggerAddAction(Q04[32+O5],function ETF)
if(Q04[64+O5]!=null)then
call NM7(GetHandleId(Q04[64+O5]))
call DestroyTrigger(Q04[64+O5])
endif
set Q04[64+O5]=CreateTrigger()
call NT7(GetHandleId(Q04[64+O5]),"Unit",it)
call TriggerAddAction(Q04[64+O5],function DMF)
set Q04[$80+O5]=CreateTrigger()
call TriggerRegisterTimerEvent(Q04[$80+O5],30.,true)
call TriggerAddAction(Q04[$80+O5],function LPE)
call NT7(GetHandleId(Q04[$80+O5]),"u",it)
call DisableTrigger(Q04[$80+O5])
endfunction
function EZF takes nothing returns nothing
call EJF(O77(GetHandleId(GetTriggeringTrigger()),"Unit"))
endfunction
function XYE takes nothing returns nothing
local unit I_7=GetTriggerUnit()
local integer O5=GetPlayerId(GetOwningPlayer(I_7))
if(Q04[32+O5]!=null)then
call NM7(GetHandleId(Q04[32+O5]))
call DestroyTrigger(Q04[32+O5])
endif
set Q04[32+O5]=CreateTrigger()
call NT7(GetHandleId(Q04[32+O5]),"Unit",I_7)
if(IsUnitAlly(I_7,Z7[0]))then
call TriggerRegisterUnitInRange(Q04[32+O5],I_7,1000.,Condition(function EVF))
else
call TriggerRegisterUnitInRange(Q04[32+O5],I_7,1000.,Condition(function EUF))
endif
call TriggerAddAction(Q04[32+O5],function EZF)
set I_7=null
endfunction
function xh takes nothing returns nothing
local trigger t=CreateTrigger()
local unit it=GetTriggerUnit()
call NT7(GetHandleId(t),"Unit",it)
if(IsUnitAlly(it,Z7[0]))then
call TriggerRegisterUnitInRange(t,it,1000.,Condition(function EVF))
call TriggerRegisterUnitInRange(t,it,1000.,Condition(function EXF))
else
call TriggerRegisterUnitInRange(t,it,1000.,Condition(function EUF))
call TriggerRegisterUnitInRange(t,it,1000.,Condition(function EWF))
endif
call TriggerAddAction(t,function ETF)
set it=null
endfunction
function EAF takes player EBF,string kf returns nothing
if(OE7(GetHandleId(EBF),kf)!=null)then
call NM7(GetHandleId(OE7(GetHandleId(EBF),kf)))
call DestroyTrigger(OE7(GetHandleId(EBF),kf))
call NT7(GetHandleId(EBF),kf,null)
endif
endfunction
function ECF takes unit it returns nothing
local player pl=GetOwningPlayer(it)
local integer kg=1
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer i1=GetUnitTypeId(it)
local integer E3F=0
local boolean E6F=false
call XWE(O5,it,i1)
if(i1==1211117654)or(i1==1162032951)or(i1==1160785972)or(i1==1429221456)or(i1==1315074670)or(i1==1164799855)or(i1==1311781185)or(i1==1211117649)then
call ExecuteFunc("ELF")
elseif(i1==1160786242)then
call NB7(GetHandleId(GetOwningPlayer(it)),"MGrp",CreateGroup())
elseif(i1==1211117641)then
call ExecuteFunc("E1F")
elseif(i1==1214409837)then
call ExecuteFunc("E0F")
elseif(i1==1328558160)then
call ExecuteFunc("E5F")
elseif(i1==1211117633)then
call ExecuteFunc("E2F")
elseif(i1==1214344551)then
set HC[$F0+O5]=Location(.0,.0)
elseif((i1==1311781199)or(i1==1311781171)or(i1==1311781172)or(i1==1311781173))then
set hG[256+O5]=0
call ExecuteFunc("E_F")
endif
if false then
if(i1==1333027688)then
call Y77(it,1093686091)
endif
if(i1==1214409837)then
call Y77(it,1093679157)
endif
if(i1==1164799603)then
call Y77(it,1093752632)
endif
if(i1==1430466872)then
call Y77(it,1093687349)
endif
if(i1==1429221424)then
call Y77(it,1093687351)
endif
if(i1==1160785970)then
call Y77(it,1093747792)
endif
if(i1==1429221446)then
call Y77(it,1093678665)
endif
if(i1==1429221451)then
call Y77(it,1093678671)
endif
if(i1==1160786242)then
call Y77(it,1093683287)
endif
if(i1==1211117641)then
call Y77(it,1093684792)
endif
if(i1==1311780946)then
call Y77(it,1093685808)
endif
endif
if(i1==1211117653)or(i1==1215723364)then
set NU[O5]=GetRandomInt(1,3)
endif
call NP7(GetHandleId(Player(O5)),"AI|Class",JP7(i1))
set GE7[O5]=true
set GE7[112+O5]=false
call BVE(O5,it,false)
if(GZ7 and Y74[O5]==5)then
if(true)then
if(TV7(Player(O5)))then
if(GA7==null)then
set GA7=CreateUnit(Z7[0],EI9(Player(O5)),GetUnitX(IZ4),GetUnitY(IZ4),0)
call EO9(GetPlayerId(Z7[0]),GA7)
endif
set KU4[16+O5]=GA7
else
if(GB7==null)then
set GB7=CreateUnit(A7[0],EI9(Player(O5)),GetUnitX(JA4),GetUnitY(JA4),0)
call EO9(GetPlayerId(A7[0]),GB7)
endif
set KU4[16+O5]=GB7
endif
else
set KU4[16+O5]=CreateUnit(Player(O5),EI9(Player(O5)),GetUnitX(KU4[O5]),GetUnitY(KU4[O5]),0)
call EO9(O5,KU4[16+O5])
endif
endif
if((not D4)and GetUnitName(it)!="Bloodrune")then
if(TL4==false)then
if(not A04)then
set KZ4[GetPlayerId(pl)]=I2S(i5(pl))+J87(pl)+W87(it)
call SetPlayerName(pl,VT7(pl))
endif
else
if(SubString(KZ4[GetPlayerId(pl)],3,$B)=="Computer" or SubString(KZ4[GetPlayerId(pl)],4,$C)=="Computer")then
loop
if(XVE(it))then
set E3F=GetRandomInt(1,25)
else
set E3F=GetRandomInt(26,119)
endif
if(T64[E3F]!="")then
set KZ4[GetPlayerId(pl)]="+"+T64[E3F]
call SetPlayerName(pl,VT7(pl)+" ("+W77(it)+")")
set T64[E3F]=""
set E6F=true
endif
exitwhen(E6F)
endloop
endif
endif
elseif(Bz<150.)and GetUnitName(it)!="Bloodrune" then
set KZ4[GetPlayerId(pl)]=I2S(i5(pl))+J87(pl)+" Computer"
call SetPlayerName(pl,VT7(pl)+" ("+W77(M7[GetPlayerId(pl)])+")")
else
set pl=null
return
endif
if(TV7(pl))then
loop
exitwhen(O7[kg]==pl)or(kg>5)
set kg=kg+1
endloop
call MultiboardSetItemValueBJ(T4,1,(kg+2),(Q[GetPlayerId(pl)]+(VT7(pl)+"|r")))
else
loop
exitwhen(P7[kg]==pl)or(kg>5)
set kg=kg+1
endloop
call MultiboardSetItemValueBJ(T4,1,(kg+3+HB4),(Q[GetPlayerId(pl)]+(VT7(pl)+"|r")))
endif
set pl=null
endfunction
function UD takes nothing returns nothing
local unit UJ7=GetTriggerUnit()
call EAF(GetOwningPlayer(UJ7),"HasAtkM")
call EAF(GetOwningPlayer(UJ7),"HasMM")
call EAF(GetOwningPlayer(UJ7),"HasAM")
call EAF(GetOwningPlayer(UJ7),"HasOrb")
call ECF(UJ7)
call EYF(UJ7)
set UJ7=null
endfunction
function Uf takes nothing returns nothing
local unit UJ7=O77(R44,"AIHSwap|U")
call EAF(GetOwningPlayer(UJ7),"HasAtkM")
call EAF(GetOwningPlayer(UJ7),"HasMM")
call EAF(GetOwningPlayer(UJ7),"HasAM")
call EAF(GetOwningPlayer(UJ7),"HasOrb")
call ECF(UJ7)
call EYF(UJ7)
set UJ7=null
endfunction
function F4F takes nothing returns boolean
local integer O5=1
local unit m5=null
if not IsUnitType(GetDyingUnit(),UNIT_TYPE_HERO)then
return false
endif
set m5=GetDyingUnit()
loop
exitwhen O5>$B
if O5==6 then
set O5=7
endif
if TZ7(Player(O5))then
if h4[O5]==m5 then
set h4[O5]=null
call IssueImmediateOrderById(M7[O5],$D0004)
if GZ[$D0+O5]or G0[256+O5]then
call WQE(O5,S17(800.,M7[O5]),false,false)
endif
call J3(M7[O5],false)
endif
endif
set O5=O5+1
endloop
set m5=null
return false
endfunction
function F7F takes nothing returns boolean
return((IsUnitType(GetAttacker(),UNIT_TYPE_STRUCTURE))and(QY4[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])and(GetUnitTypeId(GetAttacker())!=1970107511)and(GetUnitTypeId(GetAttacker())!=1700946284)and(GetUnitTypeId(GetAttacker())!=1966092370)and(GetUnitTypeId(GetAttacker())!=1697657398)and(Q87(GetTriggerUnit())))!=null
endfunction
function F8F takes nothing returns nothing
local unit m5=GetTriggerUnit()
local unit D_F=GetAttacker()
local integer O5=GetPlayerId(GetOwningPlayer(m5))
local integer i1=GetUnitTypeId(m5)
if MF7(O5)then
set m5=null
set D_F=null
return
endif
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and(not G0[O5])and(i1!=1211117642))then
if(((GetUnitLifePercent(D_F)>10.)or(MP7(800.,D_F,Condition(function k0))>1)or(R2I(GetWidgetLife(m5))<(500+(GetHeroLevel(m5)*30)))or(not Id(O5)))and(not MF7(O5)))then
if((eY[320+O5]>=0)and(hq[720+O5]>-.05))then
elseif((not K57(m5))and(((i1!=1214409837)and(i1!=1332898670))or(GetUnitCurrentOrder(m5)!=$D0278))and((i1!=1160786243)or(GetUnitCurrentOrder(m5)!=$D0079))and((i1!=1430466872)or(GetUnitCurrentOrder(m5)!=$D0207)))then
elseif(((I27(m5)>1500.)and(hq[720+O5]>-.05)and(GetHeroLevel(m5)>$A))or(((i1==1162032181)or(i1==1429221451))and(GZ[384+O5])and(not ME7(m5)))or(GZ[256+O5]))then
elseif((GetHeroLevel(m5)>6)and(GetUnitAbilityLevel(D_F,1098282348)==0)and(Id(O5))and(GetUnitState(m5,UNIT_STATE_LIFE)>500+(GetHeroLevel(m5)*30)))then
elseif(h4[O5]!=null and ME7(h4[O5])and(hq[720+O5]>-.1)and G0[256+O5])then
else
call jW(m5,$D0012,h9[O5])
if((h4[O5]!=null)and((GetHeroLevel(m5)<6)or(ME7(m5))or(not Id(O5))))then
call WTE(O5,false)
endif
set G0[O5]=true
call TriggerSleepAction(1.)
if((M87(m5))and(M87(D_F))and(IsUnitInRange(m5,D_F,1200.))and(G0[O5]))then
call TriggerSleepAction(1.)
endif
set G0[O5]=false
if((M87(m5))and(M87(D_F))and(GetUnitCurrentOrder(m5)==$D0012)and(not IsUnitInRange(m5,D_F,1300.))and(MP7(800.,D_F,Condition(function k5))>1))then
call J3(m5,true)
endif
endif
elseif((not Id(O5))and(K57(m5)))then
call IssueTargetOrderById(m5,$D000F,D_F)
endif
elseif((i1==1211117642)or(i1==1966092596)or(i1==1966092597)or(i1==1966092598)or(i1==1966092612)or(i1==1966092613)or(i1==1966092614)or(i1==1697656907)or(i1==1697656905)or(i1==1697656908)or(i1==1848652343)or((GetUnitTypeId(M7[O5])==1211117633)and(i1!=1211117633)))then
call jW(m5,$D0012,h9[16+O5])
set G0[16+O5]=true
call J_7(1.)
if((M87(m5))and(M87(D_F))and(IsUnitInRange(m5,D_F,1300.)))then
call jW(m5,$D0012,h9[16+O5])
endif
set G0[16+O5]=false
endif
set m5=null
set D_F=null
endfunction
function F9F takes nothing returns boolean
return((QY4[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])and(IsUnitAlly(GetTriggerUnit(),Z7[0]))and(Q87(GetTriggerUnit())))
endfunction
function FDF takes nothing returns boolean
return((QY4[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])and(IsUnitAlly(GetTriggerUnit(),A7[0]))and(Q87(GetTriggerUnit())))
endfunction
function FEF takes unit C6E returns nothing
loop
call jW(GetTriggerUnit(),$D0012,h9[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call TriggerSleepAction(.3)
exitwhen((not M87(GetTriggerUnit()))or(not M87(C6E))or(not IsUnitInRange(GetTriggerUnit(),C6E,1200.)))
endloop
endfunction
function FFF takes nothing returns nothing
if((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(not IsUnitIllusion(GetTriggerUnit())))then
set GZ[$80+GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
set h4[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=null
if(IsUnitAlly(GetTriggerUnit(),A7[0]))then
call FEF(IZ4)
else
call FEF(JA4)
endif
elseif(not IsUnitIllusion(GetTriggerUnit()))then
call jW(GetTriggerUnit(),$D0012,h9[16+GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endif
endfunction
function FGF takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)and(GetUnitCurrentOrder(GetTriggerUnit())!=$D0012)and(not IsUnitType(GetAttacker(),UNIT_TYPE_STRUCTURE))and(not IsUnitType(GetAttacker(),UNIT_TYPE_HERO)))!=null
endfunction
function FHF takes nothing returns nothing
local unit it=GetTriggerUnit()
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer UP
if((Bz<hq[288+O5])or(not is(it))or((G0[$E0+O5]or Bz<hq[672+O5])and ME7(it)==false))then
set it=null
return
elseif MF7(O5)then
set it=null
return
endif
set hq[288+O5]=Bz+1.
set hq[496+O5]=Bz+1.5
call MoveLocation(Ha,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
set bj_lastLoadedUnit=JD7(IsUnitAlly(it,Z7[0]),IZ4,JA4)
set LD4=KE7(it,bj_lastLoadedUnit)
if MO7(150.,Ha,Condition(function k0))>6 then
call DPF(it,true)
elseif(LD4<900. and LD4+JB7(it)>650.)and(IsUnitType(GetAttacker(),UNIT_TYPE_MELEE_ATTACKER))then
call jW(it,$D0012,bj_lastLoadedUnit)
else
if(((eY[O5]==3)or(eY[O5]==4))and(IsUnitType(GetAttacker(),UNIT_TYPE_MELEE_ATTACKER))and(not GZ[$80+O5])and(h4[O5]==null)and(GetUnitCurrentOrder(it)==$D000F)and(not GZ[48+O5])and(KE7(it,NF7(it))<6500.))then
if((Bz<hq[784+O5])or(hq[720+O5]<-.1)or((MO7(1000.,Ha,Condition(function QN7))==0)and(MO7(700.,Ha,Condition(function k5))==0)and(MO7(600.,Ha,Condition(function k0))>3)))then
call jW(it,$D0012,bj_lastLoadedUnit)
set G0[48+O5]=true
set hq[768+O5]=Bz+1.
set hq[784+O5]=Bz+5.
endif
endif
if((not(IsUnitType(it,UNIT_TYPE_MELEE_ATTACKER)))and(not GZ[$80+O5])and(h4[O5]==null)and(iU(it))and(hq[512+O5]<Bz))then
if(not ME7(it))then
if((eY[O5]<$A)and((R2I(GetUnitState(it,UNIT_STATE_LIFE))<(550+(GetHeroLevel(it)*40)))or((GetHeroLevel(it)<$A)and(IsUnitType(GetAttacker(),UNIT_TYPE_MELEE_ATTACKER)))))then
call DPF(it,true)
endif
else
call PW7(it,false)
endif
elseif((IsUnitType(it,UNIT_TYPE_MELEE_ATTACKER))and(not GZ[$80+O5])and(h4[O5]==null)and(iU(it))and(hq[512+O5]<Bz))then
if(not ME7(it))then
if((eY[O5]<$A)and(GetUnitLifePercent(it)<60.)and((MP7(300.,GetTriggerUnit(),Condition(function k5))<3)))then
if(not(MR7(it,ZU[T2]))and(not(MR7(it,ZU[J1])))and(not(MR7(it,ZU[P1])))and((GetUnitAbilityLevel(it,1112891766)==0)or(GetUnitAbilityLevel(it,1110454838)==0)or(GetUnitAbilityLevel(it,1110454597)==0))and((MP7(1000.,it,Condition(function QN7))>0)or(MP7(900.,it,Condition(function QX7))>0)))then
call DPF(it,true)
endif
endif
else
call PW7(it,false)
endif
elseif((ME7(it))and(not Id(O5)))then
call PW7(it,true)
elseif((GetHeroLevel(it)<6)or((GetUnitLifePercent(it)<60.)and(R2I(GetUnitState(it,UNIT_STATE_LIFE))<(400+(GetHeroLevel(it)*50)))and((h4[O5]==null)or(GetUnitState(h4[O5],UNIT_STATE_LIFE)>(GetUnitState(it,UNIT_STATE_LIFE)+(15.*GetHeroLevel(it)))))))then
if((GetHeroLevel(it)<3)or(MP7(500.,GetTriggerUnit(),Condition(function k0))>2))then
set GZ[$80+O5]=false
call DPF(it,true)
endif
elseif(GetUnitTypeId(it)==1211117643)and(h4[O5]==null)and(KE7(it,h9[48+O5])>700)then
set UP=GetUnitCurrentOrder(it)
if(UP==$D0136 or UP==$D0092 or UP==$D0218)then
call DPF(it,true)
endif
endif
endif
set it=null
endfunction
function FIF takes nothing returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(GetAttacker()))
if(TZ7(Player(O5)))and(GetUnitAbilityLevel(GetAttacker(),1110455884)>0)and(Bz>T34[64+O5])and(h4[O5]==GetTriggerUnit())then
call IssuePointOrderById(M7[O5],$D00D9,GetUnitX(GetAttacker()),GetUnitY(GetAttacker()))
endif
endfunction
function FJF takes nothing returns boolean
if not((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))))then
return false
else
if IsUnitIllusion(GetAttacker())then
call FIF()
return false
endif
endif
return(IsUnitType(GetAttacker(),UNIT_TYPE_HERO))!=null
endfunction
function FKF takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(hz)))and(hZ!=GetFilterUnit())and(hz!=GetFilterUnit())and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(not ME7(GetFilterUnit())))!=null
endfunction
function FMF takes nothing returns nothing
if((not IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO))and(Q97(GetEnumUnit()))and(GetUnitCurrentOrder(GetEnumUnit())!=$D0012)and(IsUnitInRange(GetEnumUnit(),hz,1200.)))then
call IssueTargetOrderById(GetEnumUnit(),$D000F,hz)
endif
endfunction
function FNF takes unit I_7,unit FOF returns nothing
local integer O27=GetPlayerId(GetOwningPlayer(I_7))
local integer O5
local unit EDF=null
local boolean J4=false
local integer i=0
local integer LTE=0
local integer j=0
local integer k=0
local boolean FPF=false
local unit FQF=null
local boolean MA7=false
local boolean JY7
if((GetWidgetLife(FOF)>1.)and(I_7!=null)and(Bz>hq[416+O27]or(Bz+2.>hq[416+O27]and(ME7(I_7)or MF7(O27)))))then
set hq[416+O27]=Bz+5.
set k=GetRandomInt(-1,1)
if k<0 then
set k=0
endif
if ME7(I_7)then
set k=k+1
endif
set JY7=IsUnitAlly(I_7,Z7[0])
set LTE=JH7(JY7,0,6)
set FQF=JD7(JY7,IZ4,JA4)
set FPF=IsUnitInRange(I_7,FQF,6000.)
set i=1
loop
exitwhen(i>5)
set O5=LU4[80+LTE+i]
if(O5!=-1)and(GetPlayerController(Player(O5))==MAP_CONTROL_COMPUTER)then
set EDF=M7[O5]
set bj_lastLoadedUnit=EDF
set hq[416+O5]=Bz+2.
set J4=false
set MA7=false
if(EDF==null)or(ME7(EDF))or(IG4[O5])or(eY[544+O5]!=0)then
elseif(hq[480+O5]>Bz)or(h4[O5]!=null and h4[O5]!=FOF and(KE7(I_7,h4[O5])+300<KE7(I_7,FOF)))then
elseif(not FPF)and(eY[O5]==3 or eY[O5]==4 or Bz<hq[528+O5])then
elseif(FPF and eY[O5]!=2 and IsUnitInRange(EDF,FQF,6000.))then
set J4=true
elseif((IsUnitInRange(I_7,EDF,3600.))or(eY[80+O5]==eY[80+O27]))and((hq[624+O27]>Bz)or(GetUnitLifePercent(I_7)<80.)or(eY[320+O27]+j<=k))then
set J4=true
elseif(Bz>hq[320+O5]and(eY[O5]!=9 or(GetUnitLifePercent(I_7)<70.)))and(eY[320+O27]+j<=k)and(GetHeroLevel(EDF)>=6)and(KE7(I_7,EDF)>$BB8)and(GetUnitLifePercent(EDF)>70.)and(GetUnitManaPercent(EDF)>30.)and((Y74[O5]==3 and GetRandomInt(1,3)==1)or(Y74[O5]==5))then
set MA7=E4F(O5,EDF,I_7,true)
endif
if J4 then
if(h4[O5]==FOF)then
if((GetUnitAbilityLevel(FOF,1110454854)==0)and(is(EDF))and(GetUnitCurrentOrder(EDF)!=$D000F))then
call IssueTargetOrderById(EDF,$D000F,FOF)
set MA7=true
endif
elseif((h4[O5]==null)or(hq[464+GetPlayerId(GetOwningPlayer(I_7))]>Bz)or((GetUnitLifePercent(FOF)+10.)<GetUnitLifePercent(h4[O5])and(GetWidgetLife(FOF)<GetWidgetLife(h4[O5]))))then
set h4[O5]=FOF
if((is(EDF))and(GetUnitAbilityLevel(FOF,1110454854)==0))then
call IssueTargetOrderById(EDF,$D000F,FOF)
set MA7=true
endif
endif
if(hq[624+O27]>Bz)then
set hq[624+O5]=Bz+20.
endif
endif
if MA7 then
set eY[544+O5]=2
set h9[64+O5]=I_7
set h4[O5]=FOF
set j=j+1
set hq[576+O5]=Bz+10.
if eY[O5]==9 or eY[O5]==$A then
call UP7(EDF,I_7)
set eY[O5]=1
endif
endif
endif
set i=i+1
endloop
if(IsUnitInForce(I_7,QX4))then
call GroupClear(iH)
call GroupEnumUnitsOfPlayer(iH,GetOwningPlayer(I_7),Q24)
call ForGroup(iH,function FMF)
endif
if eY[320+O27]+j<0 and Bz>hq[800+O27]and TZ7(Player(O27))and ME7(I_7)then
if JY7 then
set LI4=X7
else
set LI4=Y7
endif
call PT7(LI4,GetUnitX(I_7),GetUnitY(I_7),GetPlayerId(GetOwningPlayer(I_7)))
set hq[800+O27]=Bz+15.
endif
endif
set LI4=null
endfunction
function FRF takes nothing returns nothing
local unit IG7=GetAttacker()
local unit FSF=GetTriggerUnit()
if(not IsUnitInForce(IG7,QX4))then
call TriggerSleepAction(.2)
call FNF(IG7,FSF)
endif
if(not IsUnitInForce(FSF,QX4))then
call TriggerSleepAction(.2)
call FNF(FSF,IG7)
endif
set IG7=null
set FSF=null
endfunction
function FTF takes nothing returns boolean
return((GetSpellTargetUnit()!=null)and(IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO))and(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetSpellTargetUnit())))and(not IsUnitInForce(GetSpellTargetUnit(),QX4)))!=null
endfunction
function FUF takes nothing returns nothing
call FNF(GetSpellTargetUnit(),GetTriggerUnit())
endfunction
function FVF takes nothing returns nothing
local unit I_7=GetTriggerUnit()
local unit FOF=GetAttacker()
local unit EDF=null
local player pl=null
local integer O27
local integer i=0
local integer j
local integer k=0
local real FWF
local integer O5
set O27=GetPlayerId(GetOwningPlayer(FOF))
if O27==GetPlayerId(Z7[0])or O27==GetPlayerId(A7[0])then
set j=-1
if((I_7==JN4)or(I_7==JS4)or(I_7==JV4))or((I_7==J_4)or(I_7==KD4)or(I_7==KG4))then
set j=1
elseif((I_7==JO4)or(I_7==JT4)or(I_7==JW4))or((I_7==K44)or(I_7==KE4)or(I_7==KH4))then
set j=0
elseif((I_7==JP4)or(I_7==JU4)or(I_7==JX4))or((I_7==K74)or(I_7==KF4)or(I_7==KI4))then
set j=2
elseif((I_7==JQ4)or(I_7==JQ4)or(I_7==JF4))or((I_7==K84)or(I_7==K84)or(I_7==J34))then
set j=3
endif
if(j!=-1 or GetWidgetLife(I_7)<=LL4)then
set LG4=IsUnitAlly(I_7,Z7[0])
set pl=Player(O27)
if(ON7(GetHandleId(I_7),"AI|Glyph|CD")>Bz)then
elseif(Bz>ON7(R44,"AI|Glyph|"+JK7(LG4,"Sent","Scrg")))then
call GroupClear(H8)
call GroupEnumUnitsInRange(H8,GetUnitX(I_7),GetUnitY(I_7),900.,null)
loop
set EDF=FirstOfGroup(H8)
exitwhen EDF==null
call GroupRemoveUnit(H8,EDF)
if GetWidgetLife(EDF)<.405 then
elseif IsUnitType(EDF,UNIT_TYPE_HERO)and GetUnitTypeId(EDF)!=1211117642 then
if IsUnitAlly(EDF,pl)then
set k=k+1
else
set k=k-1
endif
elseif I_7!=EDF and Q87(EDF)and IsUnitInRange(EDF,I_7,300.)then
if IsUnitAlly(EDF,pl)then
set k=GetUnitTypeId(EDF)
if(k==1969711215 or k==1970169187)or(k==1966092337 or k==1966092338)or(k==1702061422 or k==1701081721)or(k==1697656918 or k==1697656919)then
set i=i+1
elseif(k==1970107511 or k==1966092370)or(k==1700946284 or k==1697657398)then
set i=i+2
else
set i=i+2
endif
else
set i=-99999
endif
endif
endloop
if((LG4 and LC4)or((not LG4)and L34))then
set bj_forLoopAIndex=425
else
set bj_forLoopAIndex=LL4
endif
if(i>0 and i+k*3>8-IMaxBJ(bj_forLoopAIndex-R2I(GetWidgetLife(I_7)),-100)/25)then
if LG4 then
set LI4=X7
else
set LI4=Y7
endif
set i=1
set k=-1
set FWF=99999.
loop
exitwhen i>5
if LG4 then
set O5=GetPlayerId(Z7[i])
else
set O5=GetPlayerId(A7[i])
endif
if TZ7(Player(O5))then
if((LG4 and LC4)or((not LG4)and L34))then
call IssueImmediateOrderById(KU4[O5],$D0114)
exitwhen true
else
if k==-1 then
set k=O5
if M7[O5]!=null and GetWidgetLife(M7[O5])>.405 then
set FWF=KE7(I_7,M7[O5])
endif
else
if M7[O5]!=null and GetWidgetLife(M7[O5])>.405 then
set LD4=KE7(I_7,M7[O5])
if LD4<FWF then
set k=O5
set FWF=LD4
endif
elseif FWF==99999. and GetRandomInt(1,i)==1 then
set k=O5
endif
endif
endif
endif
set i=i+1
endloop
if k!=-1 then
call PP7(M7[k],LI4,GetObjectName(1496330547))
call PT7(LI4,GetUnitX(I_7),GetUnitY(I_7),k)
call NQ7(GetHandleId(I_7),"AI|Glyph|CD",Bz+60.)
endif
endif
endif
endif
set O5=GetUnitTypeId(FOF)
if j!=-1 and((O5==1969711215 or O5==1970169187)or(O5==1966092337 or O5==1966092338)or(O5==1702061422 or O5==1701081721)or(O5==1697656918 or O5==1697656919))then
set i=1
set LD4=99999.
set bj_forLoopAIndex=-1
loop
exitwhen i>5
if O27==GetPlayerId(Z7[0])then
set O5=GetPlayerId(A7[i])
else
set O5=GetPlayerId(Z7[i])
endif
if((M7[O5]!=null)and(not ME7(M7[O5]))and(GetWidgetLife(M7[O5])>400.)and(eY[O5]==3 or eY[O5]==4)and(LU4[64+O5]==j)and(Bz>hq[672+O5]))then
set FWF=KE7(M7[O5],I_7)
if FWF<LD4 then
set LD4=FWF
set bj_forLoopAIndex=O5
endif
endif
set i=i+1
endloop
if bj_forLoopAIndex!=-1 then
set O5=bj_forLoopAIndex
set G0[$E0+O5]=true
set LV4[48+O5]=GetAttacker()
if K57(M7[O5])then
call IssueTargetOrderById(M7[O5],$D000F,LV4[48+O5])
endif
endif
endif
endif
set I_7=null
set FOF=null
set EDF=null
set pl=null
endfunction
function FXF takes nothing returns boolean
local real FYF=.0
local integer O5
if IsUnitType(GetAttacker(),UNIT_TYPE_HERO)then
set O5=GetPlayerId(GetOwningPlayer(GetAttacker()))
if G0[$E0+O5]and GetTriggerUnit()==LV4[48+O5]then
set G0[$E0+O5]=false
set hq[672+O5]=Bz+2.
endif
elseif IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)and Bz>L64 then
set L64=Bz+1.
call FVF()
endif
if(Bz<600.)then
set FYF=130.
elseif(Bz<1200.)then
set FYF=140.
elseif(Bz>1200.)then
set FYF=150.
endif
if(not GZ[320+O5])then
set FYF=FYF/2+$F
endif
return((not IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE))and(GetWidgetLife(GetTriggerUnit())<FYF))!=null
endfunction
function FZF takes nothing returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(GetEnumUnit()))
set h4[96+O5]=GetTriggerUnit()
call DisableTrigger(Q04[O5])
call IssueTargetOrderById(GetEnumUnit(),$D000F,GetTriggerUnit())
call EnableTrigger(Q04[O5])
endfunction
function FAF takes nothing returns boolean
local integer O5
if((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(not IsUnitIllusion(GetFilterUnit()))and(GetWidgetLife(GetFilterUnit())>.405))then
set O5=GetPlayerId(GetOwningPlayer(GetFilterUnit()))
if((MF7(O5))or((h4[304+O5]!=null)and(JB7(GetFilterUnit())+KE7(GetTriggerUnit(),h4[304+O5])<KE7(GetFilterUnit(),h4[304+O5]))))then
elseif((iU(GetFilterUnit()))and(not Id(O5))and(not ME7(GetFilterUnit()))and((h4[96+O5]==null)or(not M87(h4[96+O5]))or((h4[96+O5]!=null)and(M87(h4[96+O5]))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(h4[96+O5]))))))then
return((Jw(GetFilterUnit()))and(G0[$80+O5])and(not G0[O5])and(not G0[48+O5])and(not G0[64+O5])and(Bz>hq[496+O5])and((not QD7(GetFilterUnit()))or(IsUnitInRange(GetFilterUnit(),GetTriggerUnit(),500.)))and((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))or(GetHeroLevel(GetFilterUnit())<$F)))
endif
endif
return false
endfunction
function FBF takes nothing returns nothing
call GroupClear(iG)
call GroupEnumUnitsInRange(iG,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),800.,Q_4)
call ForGroup(iG,function FZF)
endfunction
function FCF takes nothing returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(GetKillingUnit()))
if GetKillingUnit()==M7[O5]and(eY[O5]==3 or eY[O5]==4)then
call LDE(M7[O5])
endif
return false
endfunction
function F3F takes nothing returns boolean
return((GetOwningPlayer(GetFilterUnit())==Player($C))and(GetWidgetLife(GetFilterUnit())>.405))
endfunction
function F6F takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return((GetOwningPlayer(GetFilterUnit())==Player($C))and(GetWidgetLife(GetFilterUnit())>.405)and(i1==1852010091))
endfunction
function FLF takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return((GetOwningPlayer(GetFilterUnit())==Player($C))and(GetWidgetLife(GetFilterUnit())>.405)and(i1==1852534636))
endfunction
function F1F takes nothing returns nothing
if((h0==null)or(GetUnitLevel(GetEnumUnit())>GetUnitLevel(h0))or((GetUnitLevel(GetEnumUnit())==GetUnitLevel(h0))and(GetUnitState(h0,UNIT_STATE_LIFE)<GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE))))then
set h0=GetEnumUnit()
endif
endfunction
function F0F takes unit UN7 returns unit
local boolexpr Ig=Condition(function F3F)
set h0=null
call GroupClear(H8)
call GroupEnumUnitsInRange(H8,GetUnitX(UN7),GetUnitY(UN7),600.,Ig)
call ForGroup(H8,function F1F)
call DestroyBoolExpr(Ig)
set Ig=null
return h0
endfunction
function F5F takes unit UN7,integer JL7,integer F2F returns unit
local boolexpr Ig=null
if(F2F==1852010091)then
set Ig=Condition(function F6F)
elseif(F2F==1852534636)then
set Ig=Condition(function FLF)
else
set Ig=Condition(function F6F)
endif
set h0=null
call GroupClear(H8)
call GroupEnumUnitsInRange(H8,GetUnitX(UN7),GetUnitY(UN7),600.,Ig)
call ForGroup(H8,function F1F)
call DestroyBoolExpr(Ig)
set Ig=null
return h0
endfunction
function F_F takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)and(eY[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]==1)and(GetHeroLevel(GetTriggerUnit())>3)and(not ME7(GetTriggerUnit()))and(not IsUnitIllusion(GetTriggerUnit()))and(GetUnitAbilityLevel(GetTriggerUnit(),1110454874)==0))!=null
endfunction
function G4F takes unit UN7 returns boolean
local integer O5=1
local boolean O6=IsUnitAlly(GetTriggerUnit(),Z7[0])
local boolean G7F=false
local integer G8F=0
local integer G9F=0
if((O6)and(GetHeroLevel(GetTriggerUnit())>$F)and(G2>=0))then
set G9F=MP7(1200.,GetTriggerUnit(),Condition(function QZ7))
set G7F=G9F>0
elseif((not O6)and(GetHeroLevel(GetTriggerUnit())>$F)and(G1>=0))then
set G9F=MP7(1200.,GetTriggerUnit(),Condition(function QZ7))
set G7F=G9F>0
endif
loop
if((eY[GetPlayerId(Z7[O5])]==$A)and(h8[48+GetPlayerId(Z7[O5])]==UN7))then
return true
endif
if((eY[GetPlayerId(A7[O5])]==$A)and(h8[48+GetPlayerId(A7[O5])]==UN7))then
return true
endif
if((G7F)and(eY[80+GetPlayerId(NI7(O5,not O6))]==eY[80+GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]))then
set G8F=G8F+1
endif
set O5=O5+1
exitwhen O5>5
endloop
if(G7F)then
return G8F>=G9F
endif
return false
endfunction
function GDF takes unit it returns boolean
local integer GEF=0
local boolean J4=true
local unit UJ7=null
local player pl=GetOwningPlayer(it)
call GroupClear(H8)
call GroupEnumUnitsInRange(H8,GetUnitX(it),GetUnitY(it),1600.,Q24)
loop
set UJ7=FirstOfGroup(H8)
exitwhen((UJ7==null)or(not J4))
if((not M87(UJ7))or(not Q97(UJ7)))then
elseif(IsUnitEnemy(UJ7,pl))then
if((IsUnitType(UJ7,UNIT_TYPE_HERO))or(IsUnitType(UJ7,UNIT_TYPE_STRUCTURE)))then
set J4=false
elseif(((GetOwningPlayer(UJ7)==Z7[0])or(GetOwningPlayer(UJ7)==A7[0]))and(IsUnitInRange(UJ7,it,1200.)))then
set GEF=GEF+1
set J4=GEF<=3
endif
endif
call GroupRemoveUnit(H8,UJ7)
endloop
set pl=null
return J4
endfunction
function GFF takes unit GGF,unit T37 returns unit
local integer O5=GetPlayerId(GetOwningPlayer(T37))
if(GGF==h7[$D3]or GGF==h7[$D4])then
if(GetHeroLevel(T37)>7)then
if(F5F(h7[262],O5,1852010091)!=null)then
return h7[262]
elseif(F5F(h7[260],O5,1852010091)!=null)then
return h7[260]
elseif(F5F(h7[$FD],O5,1852010091)!=null)then
return h7[$FD]
elseif(F5F(h7[258],O5,1852010091)!=null)then
return h7[258]
elseif(F5F(h7[256],O5,1852010091)!=null)then
return h7[256]
else
return h7[262]
endif
else
if(F5F(h7[262],O5,1852534636)!=null)then
return h7[262]
elseif(F5F(h7[260],O5,1852534636)!=null)then
return h7[260]
elseif(F5F(h7[$FD],O5,1852534636)!=null)then
return h7[$FD]
elseif(F5F(h7[258],O5,1852534636)!=null)then
return h7[258]
elseif(F5F(h7[256],O5,1852534636)!=null)then
return h7[256]
else
return h7[260]
endif
endif
elseif(GGF==h7[$D5])then
if(GetHeroLevel(T37)>7)then
if(F5F(h7[257],O5,1852010091)!=null)then
return h7[257]
elseif(F5F(h7[259],O5,1852010091)!=null)then
return h7[259]
elseif(F5F(h7[261],O5,1852010091)!=null)then
return h7[261]
else
return h7[257]
endif
else
if(F5F(h7[261],O5,1852534636)!=null)then
return h7[261]
elseif(F5F(h7[259],O5,1852534636)!=null)then
return h7[259]
else
return h7[261]
endif
endif
elseif((GGF==h7[$DD])or(GGF==h7[$DE]))then
if(GetHeroLevel(T37)>7)then
if(F5F(h7[$FE],O5,1852010091)!=null)then
return h7[$FE]
elseif(F5F(h7[$FF],O5,1852010091)!=null)then
return h7[$FF]
else
return h7[$FE]
endif
else
if(F5F(h7[$FE],O5,1852534636)!=null)then
return h7[$FE]
elseif(F5F(h7[$FF],O5,1852534636)!=null)then
return h7[$FF]
else
return h7[$FE]
endif
endif
elseif(GGF==h7[$DF])then
if(GetHeroLevel(T37)>7)then
if((IsUnitAlly(T37,A7[0])))then
if(F5F(h7[$FE],O5,1852010091)!=null)then
return h7[$FE]
elseif(F5F(h7[$FF],O5,1852010091)!=null)then
return h7[$FF]
else
return h7[$FF]
endif
endif
else
if((IsUnitAlly(T37,A7[0])))then
if(F5F(h7[$FE],O5,1852534636)!=null)then
return h7[$FE]
elseif(F5F(h7[$FF],O5,1852534636)!=null)then
return h7[$FF]
else
return h7[$FF]
endif
endif
endif
elseif(GGF==h7[$E7])then
if(GetHeroLevel(T37)>7)then
if((IsUnitAlly(T37,Z7[0])))then
if(F5F(h7[$FD],O5,1852010091)!=null)then
return h7[$FD]
elseif(F5F(h7[258],O5,1852010091)!=null)then
return h7[258]
elseif(F5F(h7[256],O5,1852010091)!=null)then
return h7[256]
else
return h7[$FD]
endif
endif
else
if((IsUnitAlly(T37,Z7[0])))then
if(F5F(h7[$FD],O5,1852534636)!=null)then
return h7[$FD]
elseif(F5F(h7[258],O5,1852534636)!=null)then
return h7[258]
elseif(F5F(h7[256],O5,1852534636)!=null)then
return h7[256]
else
return h7[$FD]
endif
endif
endif
elseif((GGF==h7[$E8])or(GGF==h7[$E9]))then
if(GetHeroLevel(T37)>7)then
if((IsUnitAlly(T37,Z7[0])))then
if(F5F(h7[256],O5,1852010091)!=null)then
return h7[256]
elseif(F5F(h7[258],O5,1852010091)!=null)then
return h7[258]
else
return h7[256]
endif
endif
else
if((IsUnitAlly(T37,Z7[0])))then
if(F5F(h7[256],O5,1852534636)!=null)then
return h7[256]
elseif(F5F(h7[258],O5,1852534636)!=null)then
return h7[258]
else
return h7[256]
endif
endif
endif
elseif(GGF==h7[$EA])then
if(GetHeroLevel(T37)>7)then
if(F5F(h7[258],O5,1852010091)!=null)then
return h7[258]
elseif(F5F(h7[256],O5,1852010091)!=null)then
return h7[256]
else
return h7[258]
endif
else
if(F5F(h7[258],O5,1852534636)!=null)then
return h7[258]
elseif(F5F(h7[256],O5,1852534636)!=null)then
return h7[256]
else
return h7[258]
endif
endif
endif
return null
endfunction
function GHF takes unit it,unit GIF,integer j returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer i1=GetUnitTypeId(it)
local integer UP
local unit GJF=null
local unit m5=null
local boolean GKF=false
local boolean GMF=false
local boolean GNF=(i1==1211117633)or(i1==1429221443)or(i1==1332766568)or(i1==1311781193)or(i1==1311781192)or(i1==1311781204)or(i1==1311781194)or(i1==1430467634)
if ME7(it)or((Bz>hq[528+O5]and Bz>hq[320+O5]and Bz>hq[480+O5]and Bz>hq[576+O5]))==false then
return false
endif
call MoveLocation(Ha,GetUnitX(it),GetUnitY(it))
if((not iy(it))or(not GDF(it))or((GetHeroLevel(it)<7)and(i1!=1429221443)and(i1!=1332766568)and(i1!=1164277353)and(i1!=1164277357)and(i1!=1160786518)and(i1!=1160786519)and(i1!=1160786517)and(i1!=1430467634)))then
set GKF=false
elseif(i1==1211117633)then
set UP=IH(GetOwningPlayer(it),Condition(function WY9))
set GKF=(Bz>hq[O5])and(GetUnitManaPercent(it)>20.)and(UP<(GetUnitAbilityLevel(it,1093810260)-1))
set GMF=(UP>0)and(GetHeroLevel(it)>$C)and(GetUnitLifePercent(it)>75.)
elseif(((IsUnitAlly(it,Z7[0]))and(not Gv))or((IsUnitAlly(it,A7[0]))and(not Gw))or(Bz<hq[528+O5]))then
set GKF=false
elseif(i1==1429221443)then
if(GetHeroLevel(it)<18)then
set GKF=true
else
set GKF=(GetRandomInt(1,6)==1 or(j!=0))
endif
set GMF=GetHeroLevel(it)>$A
elseif((i1==1432646245)and(not X67()))then
set GKF=false
elseif((i1==1311781193)or(i1==1311781192)or(i1==1311781204)or(i1==1311781194))then
set GKF=(GetUnitManaPercent(it)>50.)and(Bz>hq[O5])
elseif(MR7(it,ZU[S6]))then
set GKF=(Bz>hq[$90+O5])and(GetUnitManaPercent(it)>40.)and(GetUnitLifePercent(it)>75.)
if((not GKF)and(i1==1164799855))then
if(GetHeroLevel(it)<18)then
set GKF=(GetRandomInt(1,2)==1 or(j!=0))and(GetUnitManaPercent(it)>40.)and(GetUnitLifePercent(it)>75.)and(Bz>hq[O5])
else
set GKF=(GetRandomInt(1,8)==1 or(j!=0))and(GetUnitManaPercent(it)>40.)and(GetUnitLifePercent(it)>75.)and(Bz>hq[O5])
endif
endif
elseif((i1==1160786241)or(i1==1211117643)or(i1==1332963428)or(i1==1433105516)or(Y74[GetPlayerId(GetOwningPlayer(it))]==1)or((GetHeroLevel(it)>20)and(Bz>2700.))or(GetHeroLevel(it)>=25))then
set GKF=false
elseif(i1==1164799855)then
if(GetHeroLevel(it)<18)then
set GKF=(GetRandomInt(1,2)==1 or(j!=0))and(GetUnitManaPercent(it)>40.)and(GetUnitLifePercent(it)>75.)and(Bz>hq[O5])
else
set GKF=(GetRandomInt(1,$A)==1 or(j!=0))and(GetUnitManaPercent(it)>40.)and(GetUnitLifePercent(it)>75.)and(Bz>hq[O5])
endif
elseif(i1==1430467634)then
if(((GetUnitAbilityLevel(it,1093750832)==0)and(GetHeroLevel(it)>7))or(((GetUnitAbilityLevel(it,1395667021)==0)and(GetHeroLevel(it)<8))))then
set GKF=true
else
if(GetHeroLevel(it)<$D)then
set GKF=(GetRandomInt(1,3)==1 or(j!=0))and(GetUnitManaPercent(it)>40.)and(GetUnitLifePercent(it)>75.)
elseif(GetHeroLevel(it)<16)then
set GKF=(GetRandomInt(1,5)==1 or(j!=0))and(GetUnitManaPercent(it)>40.)and(GetUnitLifePercent(it)>75.)
else
set GKF=(GetRandomInt(1,$A)==1 or(j!=0))and(GetUnitManaPercent(it)>40.)and(GetUnitLifePercent(it)>75.)
endif
endif
if((GKF)and(Bz<T34[16+O5])or((T34[16+O5]-Bz)>5))then
set GKF=false
endif
elseif(i1==1214409837)then
set GKF=(GetHeroLevel(it)<$F)and(GetRandomInt(1,2)==1 or(j!=0))and(GetUnitManaPercent(it)>40.)and(Bz>hq[O5])and(GetUnitLifePercent(it)>85.)
elseif(i1==1164666213)then
if(GetHeroLevel(it)<18)then
set GKF=(GetRandomInt(1,2)==1 or(j!=0))and(GetHeroLevel(it)>$A)and(GetUnitManaPercent(it)>60.)and(GetUnitLifePercent(it)>70.)and(Bz>hq[O5])
else
set GKF=(GetRandomInt(1,$A)==1 or(j!=0))and(GetUnitManaPercent(it)>40.)and(GetUnitLifePercent(it)>70.)and(Bz>hq[O5])
endif
elseif((i1==1215722344)or(i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517)or(i1==1215657064)or((i1==1313026096)and(GetHeroLevel(it)>$B))or(MR7(it,ZU[J1]))or(MR7(it,ZU[T2]))or(MR7(it,ZU[P1]))or(MR7(it,ZU[DG4])))then
if(GetHeroLevel(it)<18)then
set GKF=(GetRandomInt(1,2)==1 or(j!=0))
else
set GKF=(GetRandomInt(1,6)==1 or(j!=0))
endif
set GMF=(GetHeroLevel(it)>$A)and(i1!=1164277353)and(i1!=1164277357)and(i1!=1160786518)and(i1!=1160786519)and(i1!=1160786517)
elseif((GetHeroLevel(it)>8)and(GetUnitLifePercent(it)>90.)and(GetUnitManaPercent(it)>50.))then
if(GetHeroLevel(it)>=18)then
set GKF=false
elseif(((kq(i1))and(i1!=1160786242)and(i1!=1433631084)and(i1!=1212365106)and(i1!=1332179560))or(i1==1211117640)or(i1==1429221445))then
set GKF=(GetRandomInt(1,3)==1 or(j!=0))
else
set GKF=(GetHeroLevel(it)>$B)and(GetRandomInt(1,5)==1 or(j!=0))
endif
endif
if(GKF)then
if(j!=0)then
set GJF=h7[j]
elseif(GIF==h7[$D3])then
if((IsUnitAlly(it,Z7[0]))or(GNF))then
set GJF=h7[262]
endif
elseif(GIF==h7[$D4])then
if(((GMF)and(GetHeroLevel(it)>$F))or((GetHeroLevel(it)>20)and(GetUnitLifePercent(it)>80.)))then
set GMF=true
set GJF=h7[$FC]
set m5=F0F(GJF)
if(m5==null)then
set GJF=h7[260]
endif
elseif((IsUnitAlly(it,Z7[0]))or(GNF))then
set GJF=h7[260]
endif
elseif(GIF==h7[$D5])then
if((IsUnitAlly(it,A7[0]))or(GNF))then
set GJF=h7[261]
set m5=F0F(GJF)
if(m5==null)then
set GJF=h7[259]
endif
endif
elseif((GIF==h7[$DD])or(GIF==h7[$DE]))then
set GJF=h7[$FE]
elseif(GIF==h7[$DF])then
if((IsUnitAlly(it,A7[0]))or(GNF))then
set GJF=h7[257]
set m5=F0F(GJF)
if((m5==null)or((not GMF)and((IsUnitType(m5,UNIT_TYPE_ANCIENT))or(IsUnitType(m5,UNIT_TYPE_MAGIC_IMMUNE)))))then
set GJF=h7[$FF]
endif
endif
elseif(GIF==h7[$E7])then
if((IsUnitAlly(it,Z7[0]))or(GNF))then
set GJF=h7[$FD]
endif
elseif((GIF==h7[$E8])or(GIF==h7[$E9]))then
set GJF=h7[256]
elseif(GIF==h7[$EA])then
if((IsUnitAlly(it,A7[0]))or(GNF))then
set GJF=h7[258]
endif
elseif(GIF==h7[$EB])then
set GJF=h7[$FB]
set GMF=((GMF)and(GetHeroLevel(it)>$F))or((GetHeroLevel(it)>20)and(GetUnitLifePercent(it)>80.))
else
set GJF=null
endif
if((i1==1430467634)and(((GetHeroLevel(it)>7)and(GetUnitAbilityLevel(it,1093750832)==0))or((GetHeroLevel(it)<8)and(GetUnitAbilityLevel(it,1395667021)==0))))then
set GJF=GFF(GIF,it)
endif
set m5=F0F(GJF)
if((m5==null)or(G4F(GJF)))then
set GKF=false
elseif((IsUnitType(m5,UNIT_TYPE_ANCIENT))or(IsUnitType(m5,UNIT_TYPE_MAGIC_IMMUNE)))then
set GKF=GMF
endif
set GKF=((GJF!=null)and(GKF))
if GKF then
set h8[48+O5]=GJF
set h8[32+O5]=GIF
set h4[64+O5]=m5
call PV7(it,"打野")
set eY[O5]=$A
set hq[432+O5]=Bz+40.
if j==0 then
if GetRandomInt(0,1)==0 then
set eY[384+O5]=-1
else
set eY[384+O5]=1
endif
endif
endif
endif
set it=null
set GIF=null
set m5=null
set GJF=null
return GKF
endfunction
function GOF takes nothing returns nothing
call GHF(GetTriggerUnit(),O77(GetHandleId(GetTriggeringTrigger()),"CrpRect"),0)
endfunction
function GPF takes integer CHE returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterUnitInRange(t,h7[CHE],400.,Q24)
call NT7(GetHandleId(t),"CrpRect",h7[CHE])
call TriggerAddCondition(t,Condition(function F_F))
call TriggerAddAction(t,function GOF)
endfunction
function GQF takes nothing returns nothing
call GPF($D3)
call GPF($D4)
call GPF($D5)
call GPF($DD)
call GPF($DE)
call GPF($DF)
call GPF($E7)
call GPF($E8)
call GPF($E9)
call GPF($EA)
call GPF($EB)
endfunction
function GRF takes nothing returns boolean
return((GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and((Z_7(GetFilterUnit()))or(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)))and IsUnitIllusion(GetFilterUnit())==false)!=null
endfunction
function GSF takes unit UN7 returns unit
local boolexpr Ig=Condition(function F3F)
set h0=null
call GroupClear(H8)
call GroupEnumUnitsInRange(H8,GetUnitX(UN7),GetUnitY(UN7),500.,Ig)
call ForGroup(H8,function F1F)
call DestroyBoolExpr(Ig)
set Ig=null
return h0
endfunction
function GTF takes nothing returns boolean
local integer GUF=GetHandleId(GetTriggeringTrigger())
local unit u
local unit m5
local boolean J4
local real dT
local integer O5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
if eY[O5]!=$A then
return false
else
set u=GetTriggerUnit()
set m5=JD7(h4[64+O5]!=null and IsUnitInRange(u,h4[64+O5],600),h4[64+O5],GSF(h7[LY4[GUF-HP7]]))
if m5==null then
call GHF(u,h7[LY4[GUF-HP7]],0)
set m5=h4[64+O5]
endif
set J4=(m5!=null)and IssueTargetOrderById(u,$D000F,m5)
if J4 and(not IsUnitVisible(m5,GetOwningPlayer(u)))then
set dT=TimerGetElapsed(W)
loop
exitwhen RAbsBJ(TimerGetElapsed(W)-dT)>=4 or eY[O5]!=$A or(IssueTargetOrderById(u,$D000F,m5)and IsUnitVisible(m5,GetOwningPlayer(u)))
call TriggerSleepAction(1.2)
call IssueTargetOrderById(u,$D000F,m5)
endloop
endif
set u=null
set m5=null
endif
return false
endfunction
function GVF takes nothing returns nothing
local integer i=0
loop
exitwhen i>9
call TriggerAddCondition(HO7[i],Condition(function GTF))
call TriggerRegisterUnitInRange(HO7[i],h7[LY4[i]],$E1,Condition(function GRF))
set i=i+1
endloop
endfunction
function GWF takes nothing returns nothing
local item KA7=GetEnumItem()
local integer i1
if(GetWidgetLife(KA7)<=.405)then
else
set LH4=GetItemPlayer(KA7)
set i1=KY7(KA7)
if(not IsVisibleToPlayer(GetItemX(KA7),GetItemY(KA7),Player(GS7)))and(i1!=X0 and i1!=B5 and i1!=C5 and i1!=EW)then
elseif IsPlayerAlly(LH4,Player(GS7))and((IsUnitInRangeLoc(h9[16+GS7],M07(KA7),700)and(i1!=B5 and i1!=C5 and i1!=EW))or(IsUnitInRangeLoc(KU4[GetPlayerId(LH4)],M07(KA7),100))or((LH4!=Player(GS7))and(not IG4[GetPlayerId(LH4)])and(IsUnitInRangeXY(M7[GetPlayerId(LH4)],GetItemX(KA7),GetItemY(KA7),700))))then
elseif IsUnitInRangeLoc(GQ7,M07(KA7),700)and(IsUnitType(bj_lastCreatedUnit,UNIT_TYPE_MELEE_ATTACKER))then
else
set LE4=KE7(M7[GS7],KA7)
if(Hu==null)or(i1==X0 or i1==B5 or i1==C5)or(LE4<LD4 and(GR7!=X0 and GR7!=B5 and GR7!=C5))then
set Hu=KA7
set GR7=i1
set LD4=LE4
endif
endif
endif
set KA7=null
endfunction
function GXF takes unit it returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(it))
local boolean J4=false
local boolean GYF=false
local integer i1
if eY[528+O5]>3 or Bz<G97[$A0+O5]then
set G87[336+O5]=null
set eY[528+O5]=0
return false
elseif((G87[336+O5]!=null)and((not IsItemVisible(G87[336+O5]))or(GetWidgetLife(G87[336+O5])<=.405)or(not IsUnitInRangeXY(it,GetItemX(G87[336+O5]),GetItemY(G87[336+O5]),800.))))then
set G87[336+O5]=null
endif
if G87[320+O5]!=null and GetWidgetLife(G87[320+O5])<=0 then
set G87[320+O5]=null
endif
if(G87[336+O5]==null)then
set eY[528+O5]=1
if G87[320+O5]==null then
call SetRect(He,GetUnitX(it)-600.,GetUnitY(it)-600.,GetUnitX(it)+600.,GetUnitY(it)+600.)
set Hu=null
set bj_lastCreatedUnit=it
set GS7=O5
set GR7=0
set LD4=$F423F
if IsUnitAlly(it,Z7[0])then
set GQ7=JA4
else
set GQ7=IZ4
endif
call EnumItemsInRect(He,Q24,function GWF)
set G87[336+O5]=Hu
else
set Hu=G87[320+O5]
endif
else
set Hu=G87[336+O5]
set eY[528+O5]=eY[528+O5]+1
endif
if((Hu!=null)and(iU(it)))then
set i1=GR7
set bj_forLoopAIndex=GetItemTypeId(Hu)
set LH4=GetItemPlayer(Hu)
if((bj_forLoopAIndex==1227894859)or(bj_forLoopAIndex==1227894838)or(bj_forLoopAIndex==1227894840)or(bj_forLoopAIndex==1227894858)or(bj_forLoopAIndex==1227894839)or(bj_forLoopAIndex==1227903050)or(bj_forLoopAIndex==1227903285))then
elseif Hu==G87[320+O5]then
set GYF=true
elseif(i1==X0 or i1==B5 or i1==C5)and(ZTE(O5,it)!=-1 and bj_forLoopBIndexEnd<100)then
elseif IsPlayerEnemy(Player(O5),LH4)and(not Z78(i1))and(i1!=EW and i1!=HW)then
set GYF=true
elseif LH4!=Player(O5)and(not Z78(i1))and(not YSE(i1))and(HK4[i1]<500)then
set GYF=true
elseif(i1==EW or i1==HW)and(MZ7(it,ZU[EW]))then
set GYF=true
elseif(not MS7(it))then
elseif(ZTE(O5,it)!=-1)then
if(YWE(O5,null,Hu,i1,false)<YWE(O5,null,bj_lastCreatedItem,KY7(bj_lastCreatedItem),false))then
set GYF=true
endif
elseif ZUE(O5,it)then
else
set GYF=true
endif
if(not GYF)then
if IsUnitInRangeLoc(GQ7,M07(Hu),700)then
else
set J4=(IssueTargetOrderById(it,$D0003,Hu))
set G97[288+O5]=i1
endif
else
if IsUnitInRangeLoc(GQ7,M07(Hu),700)and(IsUnitType(bj_lastCreatedUnit,UNIT_TYPE_MELEE_ATTACKER))then
else
set J4=(IssueTargetOrderById(it,$D000F,Hu))
endif
endif
if J4 then
set hq[832+O5]=Bz+(KF7(GetUnitX(it),GetUnitY(it),GetItemX(Hu),GetItemY(Hu))/GetUnitMoveSpeed(it))+1.
endif
if(not J4)then
set G87[336+O5]=null
endif
endif
set Hu=null
return J4
endfunction
function GZF takes nothing returns nothing
set LE4=KE7(GetEnumDestructable(),LF4)
if((H0==null or LE4<LD4)and(GetWidgetLife(GetEnumDestructable())>.5))then
set H0=GetEnumDestructable()
set LD4=LE4
endif
endfunction
function GAF takes unit it returns boolean
set H0=null
set LF4=it
set LD4=$F423F
call SetRect(He,GetUnitX(it)-450.,GetUnitY(it)-450.,GetUnitX(it)+450.,GetUnitY(it)+450.)
call EnumDestructablesInRect(He,Condition(function K8),function GZF)
return((H0!=null)and(UnitUseItemTarget(it,MV7(it,ZU[TC]),H0)))
endfunction
function GBF takes integer O5,boolean O6 returns nothing
if(not O6)then
if(h8[32+O5]==h7[$D5])then
set h8[32+O5]=h7[17]
elseif(h8[32+O5]==h7[$D4])then
if(h8[48+O5]==h7[$FC])then
set h8[32+O5]=h7[315]
set h9[32+O5]=h7[$F]
else
set h8[32+O5]=h7[325]
set h9[32+O5]=h7[$F]
endif
elseif(h8[32+O5]==h7[$D3])then
set h8[32+O5]=h7[$D]
elseif(h8[32+O5]==h7[$DF])then
set h8[32+O5]=h7[38]
elseif(h8[32+O5]==h7[$DE])then
set h8[32+O5]=h7[37]
elseif(h8[32+O5]==h7[$DD])then
set h8[32+O5]=h7[36]
call UO7(GetEnumUnit(),$87)
elseif(h8[32+O5]==h7[$EB])then
set h8[32+O5]=h7[59]
elseif(h8[32+O5]==h7[$EA])then
set h8[32+O5]=h7[325]
set h9[32+O5]=h7[58]
elseif(h8[32+O5]==h7[$E9])then
set h8[32+O5]=h7[$EA]
elseif(h8[32+O5]==h7[$E8])then
set h8[32+O5]=h7[56]
call UO7(GetEnumUnit(),$9B)
elseif(h8[32+O5]==h7[$E7])then
set h8[32+O5]=h7[54]
endif
elseif(O6)then
if(h8[32+O5]==h7[$D5])then
set h8[32+O5]=h7[315]
set h9[32+O5]=h7[$D]
elseif(h8[32+O5]==h7[$D4])then
set h8[32+O5]=h7[$C]
elseif(h8[32+O5]==h7[$D3])then
set h8[32+O5]=h7[$B]
elseif(h8[32+O5]==h7[$DF])then
set h8[32+O5]=h7[36]
elseif(h8[32+O5]==h7[$DE])then
set h8[32+O5]=h7[$DD]
call UO7(GetEnumUnit(),35)
elseif(h8[32+O5]==h7[$DD])then
set h8[32+O5]=h7[315]
set h9[32+O5]=h7[33]
elseif(h8[32+O5]==h7[$EB])then
set h8[32+O5]=h7[325]
set h9[32+O5]=h7[56]
elseif(h8[32+O5]==h7[$EA])then
set h9[32+O5]=h7[56]
elseif(h8[32+O5]==h7[$E9])then
set h8[32+O5]=h7[54]
call UO7(GetEnumUnit(),55)
elseif(h8[32+O5]==h7[$E8])then
set h8[32+O5]=h7[53]
elseif(h8[32+O5]==h7[$E7])then
set h8[32+O5]=h7[52]
endif
endif
endfunction
function GCF takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(not kD(GetFilterUnit()))and(GetWidgetLife(GetFilterUnit())>.405))!=null
endfunction
function G3F takes location b5 returns nothing
local unit it=GetEnumUnit()
local integer O5=GetPlayerId(GetOwningPlayer(GetEnumUnit()))
local unit m5=h4[64+O5]
local integer i1
local boolean J4=false
local integer G6F=0
local integer i
local integer j
local integer k
local integer GLF
if(MP7(900.,h8[32+O5],Condition(function GCF))>0)then
call GBF(O5,IsUnitAlly(it,Z7[0]))
endif
if((ME7(it))or(MO7(900.,b5,Condition(function k6))>0))then
set eY[O5]=1
set hq[544+O5]=Bz+30.
set h4[64+O5]=null
call GBF(O5,IsUnitAlly(it,Z7[0]))
call J3(it,false)
if((not ME7(it))and(h4[O5]==null)and(G0[256+O5]))then
set LN4=MN7(900.,b5,Condition(function k6))
if(LN4!=null)then
call WQE(O5,LN4,true,false)
call IssueTargetOrderById(it,$D000F,h4[O5])
endif
endif
set it=null
set m5=null
return
endif
set G6F=MP7(600.,h8[48+O5],Condition(function F3F))
if G6F==0 then
set i1=GetUnitTypeId(it)
set j=GetHeroLevel(it)
if JR7(i1,1)or JR7(i1,2)then
if j<$C then
set i=0
else
set i=GetRandomInt(0,(j-$C)/2)
endif
elseif JR7(i1,3)then
set i=GetRandomInt(0,2)
else
set i=GetRandomInt(0,3)
endif
if i==0 then
set i=0
loop
exitwhen(i>9)or(h8[48+O5]==h7[LY4[i]])
set i=i+1
endloop
set GLF=i
set j=0
set k=eY[384+O5]
loop
if i==0 or i==4 or i==5 or i==9 then
set k=-k
set eY[384+O5]=k
set i=GLF
endif
set i=i+k
exitwhen(j>5)or(GHF(it,h8[48+O5],LY4[i]))
set j=j+1
endloop
set G6F=MP7(600.,h8[48+O5],Condition(function F3F))
endif
endif
if(G6F==0)then
set GZ[336+O5]=false
if(h8[48+O5]!=h8[32+O5])then
set h8[48+O5]=h8[32+O5]
call J3(it,false)
endif
if(KE7(h8[32+O5],it)<400.)then
set eY[O5]=1
set h4[64+O5]=null
call J3(it,false)
endif
elseif(h8[48+O5]!=h8[32+O5])and(KE7(h8[48+O5],it)<400.)then
set bj_lastLoadedUnit=MN7(600.,M07(h8[48+O5]),Condition(function F3F))
if(not GZ[336+O5])and is(it)then
set GZ[336+O5]=IssueTargetOrderById(it,$D000F,bj_lastLoadedUnit)
endif
set J4=true
endif
if(G6F==0)or J4 then
elseif((m5!=null)and(M87(m5))and(GetOwningPlayer(m5)==GetOwningPlayer(it)))then
if(is(it))then
call jW(it,$D000F,h8[48+O5])
endif
call jW(m5,$D000F,h8[48+O5])
elseif(GetUnitTypeId(GetEnumUnit())==1211117633)then
if((m5==null)or(not M87(m5)))then
call jW(it,$D000F,h8[48+O5])
elseif(GetOwningPlayer(m5)!=GetOwningPlayer(it))then
set J4=((not IsUnitInRange(it,m5,800.))and(IssueTargetOrderById(it,$D0003,m5)))or(M57(it,$D00A3,1093810260,m5))or(jW(it,$D000F,h8[48+O5]))
endif
elseif(GetUnitTypeId(GetEnumUnit())==1164799855)then
if((m5==null)or(not M87(m5)))then
call jW(it,$D000F,h8[48+O5])
elseif(GetOwningPlayer(m5)!=GetOwningPlayer(it))then
set J4=((not IsUnitInRange(it,m5,800.))and(IssueTargetOrderById(it,$D0003,m5)))or(M57(it,$D006B,1093682264,m5)or(jW(it,$D000F,h8[48+O5])))
endif
elseif(is(it))then
if((h4[64+O5]==null)or(not M87(h4[64+O5]))or(not IsUnitInRange(it,h4[64+O5],800.)))then
set h4[64+O5]=MK7(800.,b5,Condition(function F3F))
endif
set m5=h4[64+O5]
if((m5!=null)and(GetWidgetLife(m5)>.405)and(MR7(it,ZU[J1])))then
set i1=GetUnitTypeId(m5)
set J4=(((i1==1852796263)or(i1==1852207203)or(i1==1853060200)or(i1==1852010091))and(UnitUseItemTarget(it,MV7(it,ZU[J1]),m5)))
elseif((m5!=null)and(GetWidgetLife(m5)>.405)and(MR7(it,ZU[S6])))then
set i1=GetUnitTypeId(m5)
set J4=((i1!=1852534626)and(i1!=1852272243)and(i1!=1852534644)and(UnitUseItemTarget(it,MV7(it,ZU[S6]),m5)))
endif
if(not J4)then
set J4=((m5!=null)and(IssueTargetOrderById(it,$D000F,m5)))or(jW(it,$D000F,h8[48+O5]))
endif
endif
set it=null
set m5=null
endfunction
function G1F takes unit u returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(u))
local integer UP=0
if(ME7(u))then
if K57(u)then
call jW(u,$D0012,h9[O5])
endif
else
if(KE7(u,NF7(u))<12000.)then
if(not IsUnitAlly(u,Z7[0]))then
set UP=100
endif
if(h9[16+O5]==h7[35])then
set h8[16+O5]=h7[35+UP]
set h8[O5]=h7[35+UP]
elseif(h9[16+O5]==h7[55])then
set h8[16+O5]=h7[55+UP]
set h8[O5]=h7[55+UP]
elseif(h9[16+O5]==h7[$E])then
set h8[16+O5]=h7[$E+UP]
set h8[O5]=h7[$E+UP]
endif
set h9[O5]=NF7(u)
set h9[16+O5]=NF7(u)
endif
if K57(u)then
call jW(u,$D000F,h8[O5])
endif
set eY[O5]=1
set G0[32+O5]=false
set hq[528+O5]=Bz+60.
set hq[592+O5]=Bz+180.
endif
endfunction
function G0F takes nothing returns nothing
if(GetItemTypeId(GetEnumItem())==SU[X0])and(GetWidgetLife(GetEnumItem())>.405)then
set Hu=GetEnumItem()
endif
endfunction
function G5F takes nothing returns nothing
local real KD7=Bz+3.
local unit m5=null
local integer i=1
local integer j
local integer JA7
local integer k
local integer O5=0
local unit I_7=null
local unit EDF=null
local item KA7=null
local player pl=null
local boolean MA7=true
local boolean J4=true
if not(GetUnitTypeId(GetDyingUnit())==1848651852)then
return
endif
set I_7=GetKillingUnit()
set pl=GetOwningPlayer(I_7)
set m5=GetDyingUnit()
loop
set i=1
loop
exitwhen i>$A
if i<=5 then
set O5=GetPlayerId(Z7[i])
else
set O5=GetPlayerId(A7[i-5])
endif
if(M7[O5]!=null)and(GetWidgetLife(M7[O5])>.405)and(IsUnitInRange(M7[O5],m5,1200.))then
if(IsUnitEnemy(M7[O5],pl))and(IsUnitVisible(M7[O5],pl))then
set KD7=.1
exitwhen true
endif
endif
set i=i+1
endloop
exitwhen Bz>KD7
call TriggerSleepAction(.3)
endloop
call SetRect(He,GetUnitX(m5)-600.,GetUnitY(m5)-600.,GetUnitX(m5)+600.,GetUnitY(m5)+600.)
set Hu=null
call EnumItemsInRect(He,Q24,function G0F)
if Hu!=null then
set I_7=null
set EDF=null
set j=0
set JA7=0
set k=0
set i=1
loop
exitwhen i>$A
if i<=5 then
set O5=GetPlayerId(Z7[i])
else
set O5=GetPlayerId(A7[i-5])
endif
if(M7[O5]!=null)and(GetWidgetLife(M7[O5])>.405)and(TZ7(Player(O5)))and(IsUnitInRange(M7[O5],m5,1000.)and(IsVisibleToPlayer(GetItemX(Hu),GetItemY(Hu),Player(O5))))then
set JA7=T[O5]+IU[O5]
if(IsUnitAlly(M7[O5],pl))then
if I_7==null or(j<JA7)then
if(not MS7(M7[O5]))or(ZUE(O5,M7[O5]))then
set MA7=false
set I_7=M7[O5]
set j=JA7
elseif MA7 then
set I_7=M7[O5]
set j=JA7
endif
endif
else
if EDF==null or(k<JA7)then
if(not MS7(M7[O5]))or(ZUE(O5,M7[O5]))then
set J4=false
set EDF=M7[O5]
set k=JA7
elseif J4 then
set EDF=M7[O5]
set k=JA7
endif
endif
endif
endif
set i=i+1
endloop
endif
set i=1
loop
exitwhen i>$A
if i<=5 then
set O5=GetPlayerId(Z7[i])
else
set O5=GetPlayerId(A7[i-5])
endif
if eY[O5]==$B then
call G1F(M7[O5])
endif
set i=i+1
endloop
if Hu!=null then
set G87[336+GetPlayerId(GetOwningPlayer(I_7))]=Hu
set G87[336+GetPlayerId(GetOwningPlayer(EDF))]=Hu
set DP7=Bz+3.
loop
exitwhen IsItemOwned(Hu)or GetWidgetLife(Hu)<.405 or((I_7!=null and GetWidgetLife(I_7)<.405)and(EDF!=null and GetWidgetLife(EDF)<.405))
if I_7!=null and GetWidgetLife(I_7)>.405 then
if MA7 then
call IssueTargetOrderById(I_7,$D000F,Hu)
else
call IssueTargetOrderById(I_7,$D0003,Hu)
endif
endif
if EDF!=null and GetWidgetLife(EDF)>.405 then
if J4 then
call IssueTargetOrderById(EDF,$D000F,Hu)
else
call IssueTargetOrderById(EDF,$D0003,Hu)
endif
endif
call TriggerSleepAction(.5)
endloop
endif
set m5=null
set I_7=null
set EDF=null
set KA7=null
set pl=null
endfunction
function G2F takes location b5 returns nothing
local unit it=GetEnumUnit()
local integer O5=GetPlayerId(GetOwningPlayer(GetEnumUnit()))
set hq[544+O5]=Bz+30.
if((ME7(it))or(MO7(900.,b5,Condition(function k6))>0))then
set eY[O5]=1
set h4[64+O5]=null
call J3(it,false)
if((not ME7(it))and(h4[O5]==null)and(G0[256+O5]))then
set LN4=MN7(900.,b5,Condition(function k6))
if(LN4!=null)then
call WQE(O5,h4[O5],true,false)
call IssueTargetOrderById(it,$D000F,LN4)
endif
endif
elseif GetWidgetLife(V4)<.405 and Bz>DP7 then
set eY[O5]=1
set h4[64+O5]=null
call J3(it,false)
elseif((j1(it,ND)>2000.)or(G0[O5]))then
if((IsUnitAlly(it,A7[0]))or(GetUnitX(it)>2300.))then
call jW(it,$D0012,h7[$FA])
else
call IssuePointOrderById(it,$D0012,2736.,-2656.)
endif
else
if G0[48+O5]then
elseif hq[704+O5]<-.05 then
call DPF(it,false)
elseif not IsUnitInRegion(ow,it)then
call jW(it,$D0012,h7[$FA])
elseif IsUnitInRange(it,V4,700.)then
call IssueTargetOrderById(it,$D000F,V4)
else
call jW(it,$D000F,h7[$FA])
endif
endif
set it=null
endfunction
function G_F takes nothing returns boolean
set LH4=GetOwningPlayer(GetFilterUnit())
return(LH4==Z7[0]or LH4==A7[0])and IsUnitEnemy(bj_lastLoadedUnit,LH4)and GetWidgetLife(GetFilterUnit())>.405 and((GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0)and(GetUnitAbilityLevel(GetFilterUnit(),1097625443)==0))
endfunction
function H4F takes nothing returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(GetEnumUnit()))
if((G0[32+O5])or(not G0[$80+O5])or(G0[O5])or(GT))then
elseif(h4[O5]==null)then
call WQE(O5,hz,false,false)
if(K57(GetEnumUnit()))then
set GT=WNE(GetEnumUnit(),hz,true)
endif
elseif(K57(GetEnumUnit()))then
set GT=WNE(GetEnumUnit(),hz,true)
endif
endfunction
function H7F takes unit H8F,unit H9F returns nothing
set hZ=H8F
set hz=H9F
if(GetWidgetLife(H9F)>1.)then
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(H8F),GetUnitY(H8F),1200.,iP)
set GT=false
call ForGroup(iA,function H4F)
endif
endfunction
function HDF takes unit I_7 returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(I_7))
local boolean HEF=h8[32+O5]==h8[$80+O5]
local boolean HFF=true
local integer UP
local integer PY7
local integer i
local integer ZPE
local integer j
local integer k
local boolean JY7=IsUnitAlly(I_7,Z7[0])
if ME7(I_7)then
set eY[O5]=1
call UQ7(I_7)
call PW7(I_7,true)
endif
set hq[544+O5]=Bz+30.
if TZ4 then
set L94="_Uvv "+I2S(eY[O5])+"/"+I2S(eY[272+O5])+" 32:"+I2S(GetUnitUserData(h8[32+O5]))+" / 48:"+I2S(GetUnitUserData(h8[48+O5]))+" / 112:"+I2S(GetUnitUserData(h8[112+O5]))+" / 128:"+I2S(GetUnitUserData(h8[$80+O5]))
if(L94!=GI7[100*$C+O5])then
set GI7[100*$C+O5]=L94
endif
endif
if(eY[272+O5]!=0)then
set UP=GetUnitUserData(h8[112+O5])
else
set UP=GetUnitUserData(h8[$80+O5])
endif
if(JY7)then
if((hj[256+UP]==18)or(hj[UP]==$A))then
set ZPE=IMaxBJ($A+P24-1,$B)
elseif((hj[256+UP]==40)or(hj[UP]==30))then
set ZPE=IMaxBJ(30+P_4-1,31)
else
set ZPE=IMaxBJ(50+Q44-1,51)
endif
else
set UP=hj[512+UP]
if((hj[256+UP]==118)or(hj[UP]==110))then
set ZPE=IMaxBJ(118-P24-1,111)
elseif((hj[256+UP]==$8C)or(hj[UP]==$82))then
set ZPE=IMaxBJ($8C-P_4-1,$83)
else
set ZPE=IMaxBJ($A0-Q44-1,$97)
endif
endif
set i=ZPE
if eY[272+O5]==0 then
if(JY7)then
if(UP>i)then
set h8[$80+O5]=h7[i]
else
set HFF=false
endif
if((h8[$80+O5]==h7[$F])and(M87(JL4)))then
set h8[$80+O5]=h7[$E]
endif
else
if(UP>i)then
set h8[$80+O5]=h7[i]
else
set HFF=false
endif
if((h8[$80+O5]==h7[$D])and(M87(JH4)))then
set h8[$80+O5]=h7[$E]
endif
endif
else
if(JY7)then
set h8[$80+O5]=h7[i]
if((h8[$80+O5]==h7[$F])and(M87(JL4)))then
set h8[$80+O5]=h7[$E]
endif
else
set h8[$80+O5]=h7[i]
if((h8[$80+O5]==h7[$D])and(M87(JH4)))then
set h8[$80+O5]=h7[$E]
endif
endif
set j=eY[288+O5]
if(h8[96+O5]!=null)then
set PY7=GetPlayerId(GetOwningPlayer(h8[96+O5]))
set j=KG7(GetUnitUserData(h8[80+PY7]))
endif
if((h8[96+O5]==null)or(GetWidgetLife(h8[96+O5])<.405)or(j!=eY[288+O5])or(eY[32+GetPlayerId(GetOwningPlayer(h8[96+O5]))]<=0)or(not IsUnitInRange(h8[96+O5],h8[$A0+O5],2000.)))then
set GY7=h8[96+O5]
set GX7=I_7
set bj_lastLoadedUnit=I_7
set bj_forLoopBIndex=eY[288+O5]
set h8[96+O5]=null
if eY[272+O5]>=4 then
set h8[96+O5]=S27(3000.,I_7,Condition(function QO7))
endif
if h8[96+O5]==null then
set h8[96+O5]=S27(3000.,h7[i],Condition(function QO7))
endif
if(GY7!=null and h8[96+O5]!=GY7)then
set PY7=GetPlayerId(GetOwningPlayer(h8[96+O5]))
set k=1
loop
exitwhen k>$B
if((IsPlayerAlly(Player(k),Player(O5)))and(eY[k]==9)and(eY[272+k]!=0)and(h8[96+k]==GY7))then
set h8[96+k]=h8[96+O5]
endif
set k=k+1
endloop
endif
endif
if(h8[96+O5]!=null and eY[32+PY7]>0)then
set h8[$A0+O5]=h8[80+PY7]
set i=GetUnitUserData(h8[80+PY7])
if(KE7(h8[96+O5],h9[PY7])<KE7(h8[80+PY7],h9[PY7]))or(KE7(h8[96+O5],h8[80+PY7])<300)then
if JY7 then
set i=i+1
else
set i=i-1
endif
endif
set i=B_E(i,JY7,I27(I_7))
set j=GetUnitUserData(h8[112+O5])
if(((JY7)and(i>j or j-i>1))or((not JY7)and(i<j or i-j>1)))and(KE7(I_7,h8[112+O5])>$7D0)then
set h8[112+O5]=h7[i]
endif
else
if(JY7)then
if(UP<i)then
set GX7=h8[112+O5]
set h8[112+O5]=h7[i]
endif
if((h8[112+O5]==h7[$F])and(M87(JL4)))then
set h8[112+O5]=h7[$E]
endif
else
if(UP<i)then
set GX7=h8[112+O5]
set h8[112+O5]=h7[i-1]
endif
if((h8[112+O5]==h7[$D])and(M87(JH4)))then
set h8[112+O5]=h7[$E]
endif
endif
if h8[32+O5]==GX7 then
set h8[32+O5]=h8[112+O5]
endif
if h8[48+O5]==GX7 then
set h8[48+O5]=h8[112+O5]
endif
endif
if eY[272+O5]==2 or eY[272+O5]==3 then
set i=GetUnitUserData(h8[112+O5])
set k=KG7(GetUnitUserData(h8[80+O5]))
if k==0 then
set k=KG7(GetUnitUserData(h8[112+O5]))
endif
set UP=GetUnitUserData(h8[48+O5])
set j=C7E(O5,i,k,JY7)
if(j!=0)and(UP!=j)then
if C8E(O5,UP,j)then
elseif(k==1)then
set j=326
elseif(k==2)then
set j=327
endif
set GX7=h8[48+O5]
set h8[48+O5]=h7[j]
set h8[32+O5]=h8[48+O5]
set eY[272+O5]=2
endif
endif
endif
if((HEF)and(HFF))then
set h8[32+O5]=h8[$80+O5]
set h8[48+O5]=h8[$80+O5]
endif
if((h4[$90+O5]!=null)and((Bz+4.)>hq[512+O5]))then
set hq[512+O5]=Bz+4.
endif
set GX7=MN7(700.,M07(I_7),Condition(function k6))
if((not G0[$A0+O5])and((GX7!=null)or((h4[O5]!=null)and(eY[272+O5]!=4))))then
set eY[O5]=1
if(eY[272+O5]>=4)then
set h8[96+O5]=GX7
call WQE(O5,h4[O5],true,true)
call UQ7(I_7)
set hq[624+O5]=Bz+20.
set hq[416+O5]=0
call FNF(I_7,h8[96+O5])
else
if((h4[$90+O5]!=null)and((Bz+6.)>hq[512+O5]))then
set hq[512+O5]=Bz+6.
endif
if(h8[$80+O5]==h8[48+O5])then
if(KE7(I_7,h8[$80+O5])<KE7(I_7,h8[O5]))then
if(IsUnitAlly(I_7,Z7[0]))then
call UO7(I_7,GetUnitUserData(h8[$80+O5]))
else
call UO7(I_7,hj[512+GetUnitUserData(h8[$80+O5])])
endif
endif
else
if(KE7(I_7,h8[$80+O5])<KE7(I_7,h8[48+O5]))then
set i=GetUnitUserData(h8[$80+O5])
else
set i=GetUnitUserData(h8[48+O5])
endif
if i>100 then
set i=ZPE
elseif(not JY7)then
set i=hj[512+i]
endif
call UO7(I_7,i)
endif
if((h4[O5]==null)and(G0[$80+O5]))then
set LN4=MM7(1000.,I_7,Condition(function k6))
if(LN4!=null)then
call WQE(O5,LN4,true,true)
call IssueTargetOrderById(I_7,$D000F,h4[O5])
endif
endif
endif
elseif eY[272+O5]==3 then
call CKE(O5,JY7,UP)
elseif(eY[272+O5]>=4)then
if(not G0[336+O5])and(h8[96+O5]!=null and IsUnitVisible(h8[96+O5],Player(O5)))then
call CNE(JY7,O5,h8[96+O5])
endif
if(h8[96+O5]!=null and KE7(I_7,h8[96+O5])<1000. and IsUnitVisible(h8[96+O5],Player(O5)))then
set eY[O5]=1
call UQ7(I_7)
set hq[624+O5]=Bz+20.
set hq[416+O5]=0
call WQE(O5,h8[96+O5],true,true)
call H7F(I_7,h8[96+O5])
elseif(KE7(I_7,h8[$80+O5])<500.)then
set eY[O5]=1
call UQ7(I_7)
elseif(KE7(I_7,h8[48+O5])<500.)and(eY[272+O5]==5)then
set h8[48+O5]=h8[$80+O5]
elseif(KE7(I_7,h8[112+O5])<800.)and(eY[272+O5]==4)then
set eY[272+O5]=5
call UQ7(I_7)
set h8[48+O5]=h8[$80+O5]
set i=GetUnitUserData(h8[112+O5])
if JY7 then
if(i>35 and i<40)then
set h8[48+O5]=h7[35]
elseif(i>55 and i<60)then
set h8[48+O5]=h7[55]
endif
else
if(i>30 and i<35)then
set h8[48+O5]=h7[35]
elseif(i>50 and i<55)then
set h8[48+O5]=h7[55]
endif
endif
set h8[32+O5]=h8[48+O5]
endif
if K57(I_7)then
if(h8[96+O5]!=null and M47(h8[96+O5])and KE7(I_7,h8[96+O5])<1200.)then
call IssueTargetOrderById(I_7,$D000F,h8[96+O5])
elseif eY[272+O5]==4 then
call jW(I_7,$D000F,h8[48+O5])
else
call jW(I_7,$D0012,h8[48+O5])
endif
endif
elseif(KE7(I_7,h8[$80+O5])<1000.)and(eY[272+O5]==0)then
set eY[O5]=1
if K57(I_7)then
call jW(I_7,$D000F,h8[48+O5])
endif
call UQ7(I_7)
elseif(h8[48+O5]!=h8[32+O5])and(KE7(I_7,h8[48+O5])<1000.)and(eY[272+O5]<=1)then
set h8[48+O5]=h8[32+O5]
if(KE7(I_7,h8[48+O5])<500. and(not M47(I_7)))then
set G0[$B0+O5]=true
endif
if K57(I_7)then
if G0[$B0+O5]then
call J3(I_7,false)
else
if hq[640+O5]<=Bz then
call jW(I_7,$D0012,h9[O5])
elseif GetUnitCurrentOrder(I_7)==$D000F then
call jW(I_7,$D000F,h9[O5])
endif
endif
endif
elseif((not G0[$B0+O5])and(h8[48+O5]==h8[32+O5]))and(eY[272+O5]<=1)then
if K57(I_7)then
if hq[640+O5]<=Bz then
call jW(I_7,$D0012,h9[O5])
elseif GetUnitCurrentOrder(I_7)==$D000F then
call jW(I_7,$D000F,h9[O5])
endif
endif
elseif((is(I_7))and((MP7(700.,I_7,Condition(function k6))==0)))then
call jW(I_7,$D0012,h8[48+O5])
endif
set hq[576+O5]=Bz+60.
set I_7=null
endfunction
function HGF takes real HHF,location b5 returns boolean
local boolean J4=false
local integer O5=GetPlayerId(GetOwningPlayer(GetEnumUnit()))
local integer UP=0
local integer CCE=0
local unit m5=null
local unit UJ7=null
if(GetUnitCurrentOrder(GetEnumUnit())==$D000F)then
call GroupClear(H8)
call GroupEnumUnitsInRange(H8,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),RMaxBJ(HHF,500.),Q24)
loop
set UJ7=FirstOfGroup(H8)
exitwhen(UJ7==null)
if((not M87(UJ7))or(not Q97(UJ7))or(IsUnitType(UJ7,UNIT_TYPE_STRUCTURE)))then
elseif((GetOwningPlayer(UJ7)==Z7[0])or(GetOwningPlayer(UJ7)==A7[0]))then
if(IsUnitEnemy(UJ7,GetOwningPlayer(GetEnumUnit())))then
set UP=UP+1
set CCE=CCE+1
else
set UP=UP-1
endif
elseif((m5==null)and(IsHeroUnitId(GetUnitTypeId(UJ7)))and(IsUnitEnemy(UJ7,GetOwningPlayer(GetEnumUnit())))and(IsUnitVisible(UJ7,GetOwningPlayer(GetEnumUnit()))))then
set m5=UJ7
endif
call GroupRemoveUnit(H8,UJ7)
endloop
if((CCE<5)and(UP<0)and(m5!=null)and(IsHeroUnitId(GetUnitTypeId(m5))))then
set J4=IssueTargetOrderById(GetEnumUnit(),$D000F,m5)
set GZ[48+O5]=false
endif
set m5=null
endif
return J4
endfunction
function HIF takes real j4,real Ja,location b5 returns boolean
local unit HJF=null
local unit HKF=null
local unit UJ7=null
local integer O5=GetPlayerId(GetOwningPlayer(GetEnumUnit()))
local boolean J4=false
local unit I_7=null
if(MF7(O5))then
return false
elseif((Id(O5))or((GZ[$80+O5])and(MO7(800.,b5,Condition(function k6))>0)))then
return false
elseif((h4[96+O5]!=null)and(GetWidgetLife(h4[96+O5])>.405)and(IsUnitInRange(GetEnumUnit(),h4[96+O5],800.)))then
call IssueTargetOrderById(GetEnumUnit(),$D000F,h4[96+O5])
return true
endif
set I_7=GetEnumUnit()
if(GetUnitLifePercent(I_7)<70.)then
set j4=j4-150.
set Ja=Ja-150.
endif
call GroupClear(H8)
call GroupEnumUnitsInRange(H8,GetUnitX(I_7),GetUnitY(I_7),RMaxBJ(j4,Ja),Q24)
loop
set UJ7=FirstOfGroup(H8)
exitwhen((UJ7==null)or((HJF!=null)and(HKF!=null)))
if((not M87(UJ7))or(not Q97(UJ7)))then
elseif((GetOwningPlayer(UJ7)==Z7[0])or(GetOwningPlayer(UJ7)==A7[0]))then
if((h4[304+O5]!=null)and(JB7(I_7)+KE7(UJ7,h4[304+O5])<KE7(I_7,h4[304+O5])))then
elseif(IsUnitEnemy(UJ7,GetOwningPlayer(I_7)))then
if((HKF==null)and(GetUnitState(UJ7,UNIT_STATE_LIFE)<150.)and(GetUnitLifePercent(UJ7)<25.)and(IsUnitInRange(UJ7,I_7,Ja)))then
set HKF=UJ7
endif
else
if((HJF==null)and(GetUnitState(UJ7,UNIT_STATE_LIFE)<150.)and(((not IsUnitType(UJ7,UNIT_TYPE_STRUCTURE))and(GetUnitLifePercent(UJ7)<25.))or(GetUnitLifePercent(UJ7)<5.)))then
set HJF=UJ7
if IsUnitType(HJF,UNIT_TYPE_STRUCTURE)and(ZT or IsUnitType(HJF,UNIT_TYPE_RANGED_ATTACKER)==false)then
if MP7(1800.,HJF,Condition(function k6))==0 then
set HJF=null
endif
endif
endif
endif
endif
call GroupRemoveUnit(H8,UJ7)
endloop
set UJ7=null
if((HJF!=null)and((IsUnitType(HJF,UNIT_TYPE_STRUCTURE))or(GetHeroLevel(I_7)<=20)or(GetUnitAbilityLevel(I_7,1093686064)>0)))then
set h4[96+O5]=HJF
call DisableTrigger(Q04[O5])
set J4=IssueTargetOrderById(I_7,$D000F,HJF)
call EnableTrigger(Q04[O5])
elseif(HKF!=null)then
set h4[96+O5]=HKF
call DisableTrigger(Q04[O5])
set J4=IssueTargetOrderById(I_7,$D000F,HKF)
call EnableTrigger(Q04[O5])
endif
set I_7=null
set HJF=null
set HKF=null
return J4
endfunction
function HMF takes integer O5,location b5 returns boolean
local unit UJ7=null
local integer kc=0
local real j4=KE7(GetEnumUnit(),h8[16+GetPlayerId(GetOwningPlayer(GetEnumUnit()))])
local boolean HNF=false
local boolean HOF=false
if(ke(GetEnumUnit()))then
return true
endif
call GroupClear(H8)
call GroupEnumUnitsInRange(H8,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),1500.,Q24)
loop
set UJ7=FirstOfGroup(H8)
exitwhen(UJ7==null)
if((not M87(UJ7))or(not Q97(UJ7)))then
elseif(IsUnitEnemy(UJ7,GetOwningPlayer(GetEnumUnit())))then
if((not HNF)and(GetOwningPlayer(UJ7)!=Player($C)))then
if((IsUnitVisible(UJ7,GetOwningPlayer(GetEnumUnit())))or(GetOwningPlayer(UJ7)==Z7[0])or(GetOwningPlayer(UJ7)==A7[0]))then
set HNF=true
elseif((IsUnitType(UJ7,UNIT_TYPE_HERO))and(eY[32+GetPlayerId(GetOwningPlayer(UJ7))]>0)or((not kD(UJ7))and(IsUnitInRange(UJ7,GetEnumUnit(),600.))))then
set HNF=true
endif
endif
elseif((GetOwningPlayer(UJ7)==Z7[0])or(GetOwningPlayer(UJ7)==A7[0]))then
if(KE7(UJ7,h8[16+GetPlayerId(GetOwningPlayer(GetEnumUnit()))])<j4)then
if(IsUnitInRange(UJ7,GetEnumUnit(),700.))then
set kc=kc+1
endif
set HOF=true
elseif((IsUnitType(UJ7,UNIT_TYPE_STRUCTURE))and(IsUnitInRange(UJ7,GetEnumUnit(),900.)))then
set HOF=true
if G0[$80+O5]then
set kc=kc+2
endif
endif
endif
call GroupRemoveUnit(H8,UJ7)
endloop
return((kc>1)or((not HNF)and(HOF)))
endfunction
function HPF takes location b5 returns nothing
local unit HQF=GetEnumUnit()
local integer O5=GetPlayerId(GetOwningPlayer(HQF))
local real kl
local boolean MA7=false
if MF7(O5)then
return
endif
set MA7=((OO7(GetHandleId(HQF),"WaterSword|Active"))and(MO7(1200.,M07(HQF),Condition(function k6))>=1)and(G0[256+O5]))
if((eY[O5]==1)and((GetHeroLevel(HQF)<9)or(GetUnitLifePercent(HQF)<75.))and(GetUnitCurrentOrder(HQF)==$D000F)and(not G0[48+O5])and(not G0[O5])and(not GZ[$80+O5])and(not G0[32+O5]))then
if MA7 then
elseif((not GZ[48+O5])and(MO7(300.,b5,Condition(function Kv))==0)and(MO7(600.,b5,Condition(function Kv))>1))then
call IssueImmediateOrderById(HQF,$D0019)
endif
endif
if((GetHeroLevel(HQF)>8)and(GetUnitLifePercent(HQF)>65.))then
if((not ME7(HQF))and(not G0[O5])and(not G0[48+O5])and(not G0[64+O5])and(iU(HQF))and(not HGF(300.,b5))and(not HIF(650.,650.,b5))and((GetUnitCurrentOrder(HQF)==$D0012)or(GetUnitCurrentOrder(HQF)==$D0019))and(not G0[32+O5])and(not G0[48+O5])and(Bz>hq[496+O5])and(HMF(O5,b5)))then
call jW(HQF,$D000F,h8[O5])
endif
elseif((not ME7(HQF))and(not G0[O5])and(not G0[48+O5])and(not G0[64+O5])and(iU(HQF))and(not HIF(650.,550.,b5)))then
if((GetUnitCurrentOrder(HQF)==$D000F)and(not GZ[48+O5])and(not MA7))then
if((GetHeroLevel(HQF)<8)and((MO7(300.,b5,Condition(function Kv))>0)or(MO7(500.,b5,Condition(function Kw))>0)))then
set kl=Atan2(GetUnitY(h9[O5])-GetUnitY(HQF),GetUnitX(h9[O5])-GetUnitX(HQF))
call IssuePointOrderById(HQF,$D0012,GetUnitX(HQF)+200.*Cos(kl),GetUnitY(HQF)+200.*Sin(kl))
elseif(MO7(400.,b5,Condition(function Kv))>1)then
set kl=Atan2(GetUnitY(h9[O5])-GetUnitY(HQF),GetUnitX(h9[O5])-GetUnitX(HQF))
call IssuePointOrderById(HQF,$D0012,GetUnitX(HQF)+250.*Cos(kl),GetUnitY(HQF)+250.*Sin(kl))
endif
elseif(((GetUnitCurrentOrder(HQF)==$D0012)or(GetUnitCurrentOrder(HQF)==$D0019))and(not G0[32+O5])and(not G0[48+O5])and(not G0[48+O5])and(Bz>hq[496+O5])and(HMF(O5,b5)))then
call jW(HQF,$D000F,h8[O5])
endif
endif
set HQF=null
endfunction
function HRF takes location b5 returns nothing
local unit HSF=GetEnumUnit()
local integer O5=GetPlayerId(GetOwningPlayer(HSF))
local real kl
if((not ME7(HSF))and(not G0[O5])and(not G0[48+O5])and(not G0[64+O5])and(iU(HSF))and(not HGF(550.,b5))and(not HIF(900.,800.,b5)))then
if(((GetUnitCurrentOrder(HSF)==$D0012)or(GetUnitCurrentOrder(HSF)==$D0019))and(not G0[32+O5])and(Bz>hq[496+O5])and(HMF(O5,b5)))then
call jW(HSF,$D000F,h8[O5])
elseif((GetUnitCurrentOrder(HSF)==$D000F)and(not GZ[48+O5]))then
if eY[O5]==3 or eY[O5]==4 then
elseif(((GetHeroLevel(HSF)<6)or(GetUnitLifePercent(HSF)<75.))and(MO7(300.,b5,Condition(function Kv))>1))then
set kl=Atan2(GetUnitY(h9[O5])-GetUnitY(HSF),GetUnitX(h9[O5])-GetUnitX(HSF))
call IssuePointOrderById(HSF,$D0012,GetUnitX(HSF)+250.*Cos(kl),GetUnitY(HSF)+250.*Sin(kl))
elseif((GetHeroLevel(HSF)<7)and(Bz>hq[496+O5])and((h4[80+O5]==null)or(GetOwningPlayer(h4[80+O5])==Z7[0])or(GetOwningPlayer(h4[80+O5])==A7[0]))and(MO7(800.,b5,Condition(function Kv))>0))then
set kl=GetRandomReal(.0,360.)*bj_DEGTORAD
call IssuePointOrderById(HSF,$D0012,GetUnitX(HSF)+GetRandomReal(50.,90.)*Cos(kl),GetUnitY(HSF)+GetRandomReal(50.,90.)*Sin(kl))
set hq[864+O5]=GetRandomReal(-LP4,LP4)
endif
endif
endif
set HSF=null
endfunction
function HTF takes location b5 returns nothing
local unit HUF=GetEnumUnit()
local integer O5=GetPlayerId(GetOwningPlayer(HUF))
local unit m5=null
if(not iU(HUF))then
elseif((IsUnitVisible(HUF,Z7[0]))and(IsUnitVisible(HUF,A7[0])))then
if(((MO7(1000.,b5,Condition(function S47)))>0)and((MO7(1000.,b5,Condition(function k6)))>0)and((MO7(900.,b5,Condition(function Kd)))<3))then
call jW(HUF,$D0012,h9[O5])
else
call HPF(b5)
endif
elseif((MO7(1200.,b5,Condition(function k6)))==0)then
if(GetUnitCurrentOrder(HUF)==$D000F)then
set m5=MK7(400.,b5,Condition(function KA))
if(m5==null)then
set m5=MK7(700.,b5,Condition(function Ka))
endif
if(m5!=null)then
call IssueTargetOrderById(HUF,$D000F,m5)
endif
endif
else
if(((MO7(1000.,b5,Condition(function Kd)))<2)and(MO7(1000.,b5,Condition(function k8))>1)and(MO7(500.,b5,Condition(function SR7))==0))then
call jW(HUF,$D0012,h9[O5])
elseif((not G0[O5])and(not G0[64+O5])and(iU(HUF))and(not HIF(750.,650.,b5)))then
if(MO7(250.,b5,Condition(function k8))==0)then
call IssueImmediateOrderById(HUF,$D0019)
else
call IssuePointOrderById(HUF,$D0012,GetUnitX(m5)+GetRandomReal(0,200.)-100.,GetUnitY(m5)+GetRandomReal(0,200.)-100.)
set hq[864+O5]=GetRandomReal(-LP4,LP4)
endif
endif
endif
set m5=null
set HUF=null
endfunction
function HVF takes unit it,integer O5,location b5 returns boolean
local unit m5=null
local real HWF=bj_RADTODEG*Atan2(GetUnitY(h9[16+O5])-GetUnitY(it),GetUnitX(h9[16+O5])-GetUnitX(it))
local real HXF
call MoveLocation(Ha,GetUnitX(it)+300.*Cos(HWF*bj_DEGTORAD),GetUnitY(it)+300.*Sin(HWF*bj_DEGTORAD))
if(MO7(500.,Ha,Condition(function Kd))>2)then
set m5=MN7(500.,Ha,Condition(function Kd))
if(m5!=null)then
set HXF=bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(it),GetUnitX(m5)-GetUnitX(it))
else
return false
endif
if(RAbsBJ(HXF-HWF)>20)then
set m5=null
return false
elseif(HXF>HWF)then
set HWF=HWF-20.
else
set HWF=HWF+20.
endif
call IssuePointOrderById(it,$D0012,GetUnitX(it)+600.*Cos(bj_DEGTORAD*HWF),GetUnitY(it)+600.*Sin(bj_DEGTORAD*HWF))
set m5=null
return true
else
return false
endif
endfunction
function HYF takes nothing returns nothing
call ExecuteFunc("HZF")
endfunction
function HZF takes nothing returns nothing
local unit it=GetEnumUnit()
local unit GIF=null
local integer O5=GetPlayerId(GetOwningPlayer(it))
local location b5
local integer UP
local real HAF=KE7(it,NF7(it))
local boolean J4=false
if(GetUnitTypeId(it)!=1211117642)then
set b5=HC[16+O5]
else
if(OI7(GetHandleId(it),"MCSLoc")!=null)then
set b5=OI7(GetHandleId(it),"MCSLoc")
else
set b5=GetUnitLoc(it)
call NL7(GetHandleId(it),"MCSLoc",b5)
endif
endif
call MoveLocation(b5,GetUnitX(it),GetUnitY(it))
if((ME7(it))and(is(it))and(not Id(O5))and(GetUnitAbilityLevel(it,1093685334)==0)and(GetUnitAbilityLevel(it,1110454874)==0))then
if(not HVF(it,O5,b5))then
if(HAF<$3E8)or(not DDF(it))then
if((HAF+100.)<KE7(h9[O5],NF7(it)))then
call jW(it,$D0012,h9[16+O5])
else
call jW(it,$D0012,h9[O5])
endif
endif
endif
endif
set J4=ERF(it)
if false and(eY[O5]==1 or eY[O5]==9)and(not GE7[$F0+O5])then
set UP=-1
if((KE7(it,h8[O5])<400)and(GetUnitCurrentOrder(it)==$D000F))then
set UP=GetUnitUserData(h8[O5])
elseif((KE7(it,h9[O5])<400)and(GetUnitCurrentOrder(it)==$D0012))then
set UP=GetUnitUserData(h9[O5])
endif
if(UP>=$B and UP<=17)or(UP>=31 and UP<=39)or(UP>=51 and UP<=59)then
if TW7(Player(O5))then
set UP=hj[512+UP]
endif
call UO7(it,UP)
endif
endif
if((eY[O5]==2)and(not J4)and(is(it))and(HAF>500.))then
if(IsUnitAlly(it,Z7[0]))then
call LEE(it,O5,PU4)
else
call LEE(it,O5,PV4)
endif
endif
if((eY[O5]==1)and(not J4)and(is(it))and(GetUnitAbilityLevel(it,1110459478)>0))then
set J4=jW(it,$D0012,h9[16+O5])
set G0[64+O5]=true
endif
if((not J4)and(HAF>4500.)and(is(it)))then
if(GetUnitAbilityLevel(it,1110459204)==0)then
if(not J4)and(MR7(it,ZU[TC]))then
set UP=R2I(((GetUnitState(it,UNIT_STATE_LIFE)+175.)/GetUnitState(it,UNIT_STATE_MAX_LIFE))*100.)
if((eY[O5]==1)and(UP<100)and(UP>50)and(Bz>hq[256+O5]))then
set J4=(h4[O5]==null)and(MO7(1000.,b5,Condition(function S37))==0)and(MO7(1000.,b5,Condition(function S47))==0)and(iy(it))and(GAF(it))
endif
endif
if(not J4)and(MR7(it,ZU[LB]))then
if(GetUnitState(it,UNIT_STATE_MAX_LIFE)<700.)then
set UP=R2I(((GetUnitState(it,UNIT_STATE_LIFE)+275.)/GetUnitState(it,UNIT_STATE_MAX_LIFE))*100.)
else
set UP=R2I(((GetUnitState(it,UNIT_STATE_LIFE)+375.)/GetUnitState(it,UNIT_STATE_MAX_LIFE))*100.)
endif
if(eY[O5]==1)and(UP<100)and(UP>45)then
set J4=(h4[O5]==null)and(iy(it))and(UnitCountBuffsExBJ(bj_BUFF_POLARITY_NEGATIVE,bj_BUFF_RESIST_EITHER,it,false,false)==0)and(MO7(1100.,b5,Condition(function KX))==0)and(MO7(700.,b5,Condition(function KA))==0)and(UnitUseItem(it,bj_lastCreatedItem))
endif
endif
if(not J4)and(MR7(it,ZU[QC]))then
if(GetUnitState(it,UNIT_STATE_MAX_LIFE)<700.)then
set UP=R2I(((GetUnitState(it,UNIT_STATE_LIFE)+275.)/GetUnitState(it,UNIT_STATE_MAX_LIFE))*100.)
else
set UP=R2I(((GetUnitState(it,UNIT_STATE_LIFE)+375.)/GetUnitState(it,UNIT_STATE_MAX_LIFE))*100.)
endif
if((eY[O5]==1)and(UP<100)and(UP>45)and(GetUnitAbilityLevel(it,1110454874)==0))then
set J4=(h4[O5]==null)and(iy(it))and(UnitCountBuffsExBJ(bj_BUFF_POLARITY_NEGATIVE,bj_BUFF_RESIST_EITHER,it,false,false)==0)and(MO7(1100.,b5,Condition(function KX))==0)and(MO7(700.,b5,Condition(function KA))==0)and(UnitUseItemTarget(it,bj_lastCreatedItem,it))
endif
endif
endif
if((not J4)and(HAF>6000.)and(not G0[O5]))then
if eY[$D0+O5]!=0 then
if eY[O5]!=1 or KE7(it,h7[eY[$D0+O5]])<3000. then
set eY[$D0+O5]=0
endif
endif
if(eY[O5]==1)then
if((Bz>hq[592+O5])and(GE7[$80+O5])and(GetHeroLevel(it)>5)and(h4[O5]==null)and((Bz>hq[592+O5]+60. and MN7(800.,b5,Condition(function KX))==null)or(MN7(1200.,b5,Condition(function KX))==null))and((GetHeroLevel(it)<$C)or((KE7(it,JX(it))>6000.)and(MN7(1200.,b5,Condition(function KX))==null))))then
set G0[320+O5]=true
call PW7(it,true)
if(IsUnitAlly(it,Z7[0]))then
set J4=PB7(it,IZ4)
else
set J4=PB7(it,JA4)
endif
elseif(eY[$D0+O5]!=0 and MO7(800.,b5,Condition(function k6))==0)then
if h8[$90+O5]!=null then
set J4=PB7(it,h8[$90+O5])
else
set J4=PB7(it,h7[eY[$D0+O5]])
endif
endif
elseif((eY[O5]==3)or(eY[O5]==4))then
if(MO7(800.,b5,Condition(function k6))>0)then
elseif(ME7(it))then
elseif(IsUnitAlly(it,Z7[0]))then
if(LU4[64+O5]==0)then
if(P34<3)then
set J4=PB7(it,JO4)
elseif(GetWidgetLife(JT4)>.405)then
set J4=PB7(it,JT4)
elseif(GetWidgetLife(JW4)>.405)then
set J4=PB7(it,JW4)
elseif(GetWidgetLife(JQ4)>.405)then
set J4=PB7(it,JQ4)
elseif(GetWidgetLife(JR4)>.405)then
set J4=PB7(it,JR4)
elseif(GetWidgetLife(JF4)>.405)then
set J4=PB7(it,JF4)
endif
elseif(LU4[64+O5]==1)then
if(P64<3)then
set J4=PB7(it,JN4)
elseif(GetWidgetLife(JS4)>.405)then
set J4=PB7(it,JS4)
elseif(GetWidgetLife(JV4)>.405)then
set J4=PB7(it,JV4)
elseif(GetWidgetLife(JQ4)>.405)then
set J4=PB7(it,JQ4)
elseif(GetWidgetLife(JR4)>.405)then
set J4=PB7(it,JR4)
elseif(GetWidgetLife(JF4)>.405)then
set J4=PB7(it,JF4)
endif
elseif(LU4[64+O5]==2)then
if(PL4<3)then
set J4=PB7(it,JP4)
elseif(GetWidgetLife(JU4)>.405)then
set J4=PB7(it,JU4)
elseif(GetWidgetLife(JX4)>.405)then
set J4=PB7(it,JX4)
elseif(GetWidgetLife(JQ4)>.405)then
set J4=PB7(it,JQ4)
elseif(GetWidgetLife(JR4)>.405)then
set J4=PB7(it,JR4)
elseif(GetWidgetLife(JF4)>.405)then
set J4=PB7(it,JF4)
endif
elseif(LU4[64+O5]==3)then
if(GetWidgetLife(JF4)>.405)then
set J4=PB7(it,JF4)
endif
endif
if(not J4)then
set J4=PB7(it,IZ4)
endif
else
if(LU4[64+O5]==0)then
if(P14<3)then
set J4=PB7(it,K44)
elseif(GetWidgetLife(KE4)>.405)then
set J4=PB7(it,KE4)
elseif(GetWidgetLife(KH4)>.405)then
set J4=PB7(it,KH4)
elseif(GetWidgetLife(K84)>.405)then
set J4=PB7(it,K84)
elseif(GetWidgetLife(K94)>.405)then
set J4=PB7(it,K94)
elseif(GetWidgetLife(J34)>.405)then
set J4=PB7(it,J34)
endif
elseif(LU4[64+O5]==1)then
if(P04<3)then
set J4=PB7(it,J_4)
elseif(GetWidgetLife(KD4)>.405)then
set J4=PB7(it,KD4)
elseif(GetWidgetLife(KG4)>.405)then
set J4=PB7(it,KG4)
elseif(GetWidgetLife(K84)>.405)then
set J4=PB7(it,K84)
elseif(GetWidgetLife(K94)>.405)then
set J4=PB7(it,K94)
elseif(GetWidgetLife(J34)>.405)then
set J4=PB7(it,J34)
endif
elseif(LU4[64+O5]==2)then
if(P54<3)then
set J4=PB7(it,K74)
elseif(GetWidgetLife(KF4)>.405)then
set J4=PB7(it,KF4)
elseif(GetWidgetLife(KI4)>.405)then
set J4=PB7(it,KI4)
elseif(GetWidgetLife(K84)>.405)then
set J4=PB7(it,K84)
elseif(GetWidgetLife(K94)>.405)then
set J4=PB7(it,K94)
elseif(GetWidgetLife(J34)>.405)then
set J4=PB7(it,J34)
endif
elseif(LU4[64+O5]==3)then
if(GetWidgetLife(J34)>.405)then
set J4=PB7(it,J34)
endif
endif
if(not J4)then
set J4=PB7(it,JA4)
endif
endif
endif
endif
if((not J4)and(HAF>8500.)and(eY[O5]!=$B))then
set GIF=h4[$80+O5]
if((GIF!=null)and(M87(GIF))and(IsUnitInRange(it,GIF,1000.)))then
if((GetUnitTypeId(GIF)==1966092372)or(GetUnitTypeId(GIF)==1697657145))then
set UP=MP7(1000.,GIF,Condition(function KC))
if((UP==0)and(not Id(O5))and(GetUnitState(it,UNIT_STATE_LIFE)<1600.)and(Bz>hq[512+O5]))then
call WTE(O5,false)
set J4=jW(it,$D0012,h9[O5])
endif
elseif(((Id(O5))and(R2I(GetUnitState(it,UNIT_STATE_LIFE))>(400+(GetHeroLevel(it)*50)))and(GetHeroLevel(it)>=6))or(hq[512+O5]>Bz))then
if((KE7(it,JX(it)))<(KE7(GIF,JX(it))-200.))then
call WTE(O5,true)
set J4=jW(it,$D0012,h9[O5])
set hq[512+O5]=.0
endif
elseif((GetHeroLevel(it)<$B)and((KE7(it,JX(it)))<(KE7(GIF,JX(it))+I2R(500-(GetHeroLevel(it)*20))))and(not iy(it))and(h4[80+O5]!=GIF))then
call WTE(O5,true)
set J4=jW(it,$D0012,h9[O5])
set hq[512+O5]=.0
elseif((Bz>hq[512+O5])and((h4[O5]==null)or((not Id(O5))and((GetHeroLevel(it)<16)or(GetUnitState(it,UNIT_STATE_LIFE)<1300.)))))then
set UP=MP7(1000.,GIF,Condition(function KC))
set J4=((KE7(it,JX(it))<(KE7(GIF,JX(it))-200.))or(UP==0)or((GetUnitState(it,UNIT_STATE_LIFE)<1300.)and(UP<2)))and(jW(it,$D0012,h9[O5]))
set hq[512+O5]=.0
endif
if((not J4)and(iy(it))and(eY[O5]==1)and(GetHeroLevel(it)>$A)and(GetUnitCurrentOrder(it)==$D000F)and(not G0[O5]))then
set UP=MP7(900.,GIF,Condition(function KC))
if((UP>1)and(GetUnitLifePercent(it)>60.))then
call IssueTargetOrderById(it,$D000F,GIF)
endif
endif
if((not J4)and(GetUnitLifePercent(GIF)<20.)and(eY[O5]==1)and(GetHeroLevel(it)>$A)and(h4[O5]==null)and(not G0[O5])and(iU(it))and((h4[80+O5]==null)or(not IsUnitType(h4[80+O5],UNIT_TYPE_STRUCTURE))))then
set J4=IssueTargetOrderById(it,$D000F,GIF)
endif
elseif((HAF>12000.)and(not G0[O5])and((h4[80+O5]==null)or(not IsUnitType(h4[80+O5],UNIT_TYPE_STRUCTURE))or(h4[O5]!=null)))then
set GIF=MN7(1000.,b5,Condition(function KB))
if(GIF!=null)then
if((Id(O5))and(R2I(GetUnitState(it,UNIT_STATE_LIFE))>(500+(GetHeroLevel(it)*30)))and(GetHeroLevel(it)>=6))then
if((KE7(it,JX(it)))<(KE7(GIF,JX(it))-350.))then
call WTE(O5,true)
set J4=jW(it,$D0012,h9[O5])
endif
elseif(h4[O5]==null)then
set J4=(iU(it))and((GetUnitLifePercent(GIF)<10.)or(MO7(700.,b5,Condition(function KX))<4))and(IssueTargetOrderById(it,$D000F,GIF))
elseif((kA(it,h4[O5],200.))or((KE7(it,JX(it)))<(KE7(GIF,JX(it))-250.)))then
call WTE(O5,true)
set J4=((MO7(700.,b5,Condition(function KX))<4)and(IssueTargetOrderById(it,$D000F,GIF)))or(jW(it,$D0012,h9[O5]))
endif
endif
endif
endif
endif
if((eY[O5]!=2)and(not J4)and(is(it)))then
set UP=GetUnitCurrentOrder(it)
if(GE7[256+O5])then
call jW(it,$D0012,h8[O5])
elseif((UP==0)or(UP==$D0004))then
call J3(it,true)
elseif((G0[32+O5])and(eY[O5]==1)and(UP!=$D0012)and(GetUnitAbilityLevel(it,1110454874)==0)and(MO7(900.,b5,Condition(function k8))==0))then
call PW7(it,false)
endif
if((h4[O5]==null)and(HAF>2800.))then
set J4=(j1(it,ED)>2000.)and(j1(it,L9)>2000.)and(GXF(it))
set LN4=MN7(800.,b5,Condition(function K4))
if((not J4)and(LN4!=null)and(not ME7(it)))then
call WQE(O5,LN4,false,false)
if h4[O5]!=null then
call IssueTargetOrderById(it,$D000F,h4[O5])
endif
endif
endif
if((not J4)and(not Id(O5)))then
if((eY[O5]!=1)or(HAF<3000.)or(hq[512+O5]>Bz)or((GetHeroLevel(it)>$F)and(GetWidgetLife(it)>1600.))or((h4[O5]!=null)and((GetUnitLifePercent(h4[O5])+15.)<GetUnitLifePercent(it))and(GetUnitState(it,UNIT_STATE_LIFE)>GetUnitState(h4[O5],UNIT_STATE_LIFE))))then
elseif(((UP==$D000F)or(UP==$D0019))and((not GZ[48+O5])or(GetHeroLevel(it)<6))and(MO7(700.,b5,Condition(function SR7))==0)and(HAF>3500.))then
if(GetHeroLevel(it)<$A)then
set UP=MO7(900.,b5,Condition(function Kd))
else
set UP=MO7(900.,b5,Condition(function KC))
endif
if((iy(it))and(GetUnitLifePercent(it)>60.)and((h4[80+O5]==null)or(not IsUnitType(h4[80+O5],UNIT_TYPE_STRUCTURE))))then
set J4=(UP==0)and(MO7(900.,b5,Condition(function Ky))>1)and(jW(it,$D0012,h9[O5]))
if((not J4)and(((h4[$80+O5]==null)or(not IsUnitInRange(it,h4[$80+O5],1800.)))and(((not QD7(it))and(GetHeroLevel(it)>9))or(GetHeroLevel(it)>$E))))then
set GIF=MN7(600.,b5,Condition(function KV))
if((GIF!=null)and(h4[80+O5]!=GIF))then
call IssueTargetOrderById(it,$D000F,GIF)
endif
endif
else
set J4=(UP<=2)and(MO7(900.,b5,Condition(function Ky))>((UP*2)+1))and(jW(it,$D0012,h9[O5]))
endif
elseif((UP==$D0012)and(not G0[64+O5])and(K57(it)))then
if((GetUnitAbilityLevel(it,1110454874)>0)and(GetUnitLifePercent(it)<95.))then
set GIF=MK7(400.,b5,Condition(function SR7))
if(GIF!=null)then
set J4=((MP7(1200.,GIF,Condition(function k8))==0)and(KE7(h9[16+O5],GIF)>KE7(h9[16+O5],it)+500.)and(jW(it,$D000F,h8[O5])))
endif
elseif((not G0[32+O5])and(not ME7(it)))then
set GIF=MN7(400.,b5,Condition(function SR7))
if(GIF!=null)then
set UP=MP7(1200.,GIF,Condition(function k8))
set J4=((UP<2)or((UP<4)and(MP7(1200.,GIF,Condition(function k6))==0))and(KE7(h9[16+O5],GIF)>KE7(h9[16+O5],it)+500.)and(jW(it,$D000F,h8[O5])))
endif
endif
endif
endif
if(eY[544+O5]==1)then
set bj_lastLoadedUnit=it
if GetWidgetLife(h9[64+O5])<.405 then
set eY[544+O5]=0
elseif MP7($4B0,h9[64+O5],Condition(function QP7))==0 then
if(E9F(h9[64+O5],IsUnitAlly(it,Z7[0]),OM7(GetHandleId(h9[64+O5]),"AI|Lane"))<0)then
set eY[544+O5]=0
endif
endif
elseif(eY[544+O5]==2)then
set bj_lastLoadedUnit=it
if GetWidgetLife(h9[64+O5])<.405 then
set eY[544+O5]=0
elseif MP7($4B0,h9[64+O5],Condition(function QP7))==0 then
set eY[544+O5]=0
endif
endif
if eY[544+O5]!=0 and hq[848+O5]<Bz+20. then
set hq[848+O5]=Bz+20.
endif
if((J4)or(not is(it)))then
elseif(eY[O5]==1)and(G0[$80+O5])then
if GE7[256+O5]and(h8[O5]!=h7[353])and(h8[O5]!=h7[354])then
set GE7[256+O5]=false
endif
if(GetUnitAbilityLevel(it,1110459478)>0)then
call jW(it,$D0012,h9[O5])
set G0[64+O5]=true
elseif GE7[256+O5]or MF7(O5)then
elseif(QD7(it))then
if((GetUnitAbilityLevel(it,1093677130)==0)or(h4[O5]!=null))then
call HPF(b5)
else
call HTF(b5)
endif
else
call HRF(b5)
endif
if h9[64+O5]!=null then
if(GetUnitState(h9[64+O5],UNIT_STATE_LIFE)<.45)or(KE7(h9[64+O5],it)>$BB8)or(MN7(3000.,M07(h9[64+O5]),Condition(function k6))==null)then
set h9[64+O5]=null
else
set hq[320+O5]=Bz+10.
endif
endif
elseif((eY[O5]==3)or(eY[O5]==4))then
if(HAF<6000.)then
call LDE(it)
else
set J4=DDF(it)
endif
elseif(eY[O5]==9)then
call HDF(it)
elseif(eY[O5]==$A)then
call G3F(b5)
elseif(eY[O5]==$B)then
call G2F(b5)
endif
endif
set it=null
set GIF=null
set b5=null
endfunction
function HBF takes unit it returns integer
local integer i1=GetUnitTypeId(it)
if(i1==1211117653)then
return 19
elseif(i1==1311787088)then
return 18
elseif(i1==1160785970)then
return 17
elseif(i1==1430467634)then
return 16
elseif(i1==1215128178)then
return $F
elseif(i1==1430468406)then
return $E
elseif(i1==1164666213)then
return $D
elseif(i1==1211117640)then
return $C
elseif(i1==1433168227)then
return $B
elseif(i1==1430466872)then
return $A
elseif(i1==1211117620)then
return 9
elseif(i1==1332898670)then
return 8
elseif(i1==1316252014)then
return 7
elseif(i1==1429221445)then
return 6
elseif(i1==1311780930)then
return 5
elseif(i1==1315334514)then
return 4
elseif(i1==1162032951)then
return 3
elseif(i1==1162032439)then
return 2
elseif(i1==1211117654)then
return 1
else
return 0
endif
endfunction
function HCF takes nothing returns boolean
return((not PE4)and(not PG4)and(not PH4)and(not PF4))
endfunction
function H3F takes nothing returns nothing
local integer iZ=1
local integer H6F=1
local integer HLF=1
local unit H1F=null
local unit H0F=null
loop
exitwhen iZ>5
if(TZ7(Z7[iZ]))then
if((H1F==null)or(((HBF(M7[GetPlayerId(Z7[iZ])]))>(HBF(H1F)))or((HBF(H1F)==0)and((JB7(M7[GetPlayerId(Z7[iZ])])>JB7(H1F))or((JB7(M7[GetPlayerId(Z7[iZ])])==JB7(H1F))and(GetHeroStr(M7[GetPlayerId(Z7[iZ])],false)>=GetHeroAgi(M7[GetPlayerId(Z7[iZ])],false))and(GetHeroStr(M7[GetPlayerId(Z7[iZ])],false)>=GetHeroInt(M7[GetPlayerId(Z7[iZ])],false)))))))then
set H1F=M7[GetPlayerId(Z7[iZ])]
set eY[64+GetPlayerId(Z7[iZ])]=0
endif
endif
if(TZ7(A7[iZ]))then
if((H0F==null)or(((HBF(M7[GetPlayerId(A7[iZ])]))>(HBF(H0F)))or((HBF(H0F)==0)and((JB7(M7[GetPlayerId(A7[iZ])])>JB7(H0F))or((JB7(M7[GetPlayerId(A7[iZ])])==JB7(H0F))and(GetHeroStr(M7[GetPlayerId(A7[iZ])],false)>=GetHeroAgi(M7[GetPlayerId(A7[iZ])],false))and(GetHeroStr(M7[GetPlayerId(A7[iZ])],false)>=GetHeroInt(M7[GetPlayerId(A7[iZ])],false)))))))then
set H0F=M7[GetPlayerId(A7[iZ])]
set eY[64+GetPlayerId(A7[iZ])]=0
endif
endif
set iZ=iZ+1
endloop
set iZ=1
loop
exitwhen iZ>5
if((TZ7(Z7[iZ]))and(Z7[iZ]!=GetOwningPlayer(H1F)))then
if(H6F<3)then
set eY[64+GetPlayerId(Z7[iZ])]=H6F
else
set eY[64+GetPlayerId(Z7[iZ])]=H6F-2
endif
set H6F=H6F+1
endif
if((TZ7(A7[iZ]))and(A7[iZ]!=GetOwningPlayer(H0F)))then
if(HLF<3)then
set eY[64+GetPlayerId(A7[iZ])]=HLF
else
set eY[64+GetPlayerId(A7[iZ])]=HLF-2
endif
set HLF=HLF+1
endif
set iZ=iZ+1
endloop
set iZ=1
loop
exitwhen iZ>5
set HLF=GetPlayerId(Z7[iZ])
if(eY[64+HLF]==0)then
set h8[HLF]=h7[$B]
set h8[16+HLF]=h7[$E]
elseif(eY[64+HLF]==1)then
set h8[HLF]=h7[31]
set h8[16+HLF]=h7[35]
else
set h8[HLF]=h7[51]
set h8[16+HLF]=h7[55]
endif
set HLF=GetPlayerId(A7[iZ])
if(eY[64+HLF]==0)then
set h8[HLF]=h7[111]
set h8[16+HLF]=h7[114]
elseif(eY[64+HLF]==1)then
set h8[HLF]=h7[$83]
set h8[16+HLF]=h7[$87]
else
set h8[HLF]=h7[$97]
set h8[16+HLF]=h7[$9B]
endif
set iZ=iZ+1
endloop
set H1F=null
set H0F=null
endfunction
function H5F takes nothing returns nothing
local integer O5=1
if Bz<QD4 then
return
endif
loop
exitwhen O5>$B
if(IsPlayerInForce(Player(O5),QX4))then
call GroupClear(iC)
call GroupEnumUnitsOfPlayer(iC,Player(O5),iL)
call ForGroup(iC,function HYF)
endif
if(IsPlayerInForce(Player(O5),X7))then
if((M7[O5]!=null)and(GetWidgetLife(M7[O5])>.405))then
if(IsUnitVisible(M7[O5],A7[0]))then
set eY[32+O5]=4
elseif(eY[32+O5]>0)then
set eY[32+O5]=eY[32+O5]-1
endif
endif
elseif(IsPlayerInForce(Player(O5),Y7))then
if((M7[O5]!=null)and(GetWidgetLife(M7[O5])>.405))then
if(IsUnitVisible(M7[O5],Z7[0]))then
set eY[32+O5]=4
elseif(eY[32+O5]>0)then
set eY[32+O5]=eY[32+O5]-1
endif
endif
endif
set O5=O5+1
endloop
endfunction
function H2F takes nothing returns nothing
local unit it=GetEnumUnit()
local integer O5=GetPlayerId(GetOwningPlayer(it))
if not K57(it)then
elseif(Bz<=QD4-23.)then
if KE7(it,NF7(it))<600. and eY[O5]!=0 then
if iU(it)then
call IssueImmediateOrderById(it,$D0019)
endif
else
if IsUnitAlly(it,Z7[0])then
call IssuePointOrderById(it,$D0012,GetRectCenterX(ED),GetRectCenterY(ED))
else
call IssuePointOrderById(it,$D0012,GetRectCenterX(L9),GetRectCenterY(L9))
endif
endif
elseif(eY[O5]==2)or(not(Bz>G97[$A0+O5]))then
elseif(IsUnitAlly(it,A7[0]))then
if(h8[16+O5]==h7[$E])then
call IssueTargetOrderById(it,$D0003,K44)
elseif(h8[16+O5]==h7[35])then
call IssueTargetOrderById(it,$D0003,J_4)
else
call IssueTargetOrderById(it,$D0003,K74)
endif
else
if(h8[16+O5]==h7[$E])then
call IssueTargetOrderById(it,$D0003,JO4)
elseif(h8[16+O5]==h7[35])then
call IssueTargetOrderById(it,$D0003,JN4)
else
call IssueTargetOrderById(it,$D0003,JP4)
endif
endif
set it=null
endfunction
function H_F takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer O5=OM7(GetHandleId(t),"pID")
call BBE(M7[O5])
set Q04[80+O5]=null
call NM7(GetHandleId(t))
call DestroyTrigger(t)
set t=null
endfunction
function I4F takes nothing returns nothing
local integer O5
local integer i
local integer j
local integer k
if A04 then
return
endif
if(Bz<(QD4+2.))then
if(Bz==QD4-30.)then
if(HCF())then
call ExecuteFunc("H3F")
endif
if(not L44)then
set L44=true
set O5=1
set N54=true
loop
exitwhen O5>$B
if O5==6 then
set O5=7
endif
if TZ7(Player(O5))and M7[O5]!=null then
set Q04[80+O5]=CreateTrigger()
call TriggerRegisterTimerEvent(Q04[80+O5],.1,false)
call TriggerAddAction(Q04[80+O5],function H_F)
call NP7(GetHandleId(Q04[80+O5]),"pID",O5)
endif
set O5=O5+1
endloop
endif
endif
call GroupClear(Q54)
call GroupEnumUnitsInRect(Q54,bj_mapInitialPlayableArea,iL)
call ForGroup(Q54,function H2F)
else
call DestroyTrigger(GetTriggeringTrigger())
call DestroyTrigger(QA4)
set QA4=null
call DestroyTrigger(Ho)
call EnableTrigger(QB4)
call EnableTrigger(LQ4)
call EnableTrigger(Q64)
call EnableTrigger(Q34)
call EnableTrigger(QZ4)
if(QV4!=null)then
call DisplayTimedTextToPlayer(QT4,0,0,5.,"为AI选择英雄已经结束。")
call SetUnitOwner(h4[512+GetPlayerId(QT4)],QT4,false)
call SetUnitOwner(h4[512+GetPlayerId(QV4)],QV4,false)
set QV4=null
endif
if(QW4!=null)then
call DisplayTimedTextToPlayer(QU4,0,0,5.,"为AI选择英雄已经结束。")
call SetUnitOwner(h4[512+GetPlayerId(QU4)],QU4,false)
call SetUnitOwner(h4[512+GetPlayerId(QW4)],QW4,false)
set QW4=null
endif
set O5=1
loop
exitwhen O5>$B
if O5==6 then
set O5=7
endif
set LG4=IsPlayerAlly(Player(O5),Z7[0])
set j=JH7(LG4,0,6)
if TZ7(Player(O5))and M7[O5]!=null then
set bj_forLoopBIndex=JT7(GetUnitTypeId(M7[O5]))
set i=1
loop
exitwhen i>5
if LU4[48+j+i]==-1 then
set LU4[48+j+i]=O5
exitwhen true
elseif JT7(GetUnitTypeId(M7[LU4[48+j+i]]))>bj_forLoopBIndex then
set k=5
loop
exitwhen k==i
set LU4[48+j+k]=LU4[48+j+k-1]
set k=k-1
endloop
set LU4[48+j+i]=O5
exitwhen true
endif
set i=i+1
endloop
endif
set O5=O5+1
endloop
set L94=""
set i=1
loop
exitwhen i>5
set LU4[80+i]=LU4[48+i]
set LU4[86+i]=LU4[54+i]
set i=i+1
endloop
endif
endfunction
function I7F takes nothing returns nothing
local integer O5=1
local integer UP=0
local integer I8F=0
local integer I9F=0
local integer IDF=0
local integer i=0
loop
exitwhen O5>5
if((M7[GetPlayerId(Z7[O5])]==null)and(GetPlayerSlotState(Z7[O5])==PLAYER_SLOT_STATE_PLAYING))then
return
elseif(not TA7(Z7[O5]))then
elseif(GetPlayerController(Z7[O5])==MAP_CONTROL_COMPUTER)then
if(h8[16+GetPlayerId(Z7[O5])]==h7[$E])then
set IDF=IDF+1
elseif(h8[16+GetPlayerId(Z7[O5])]==h7[35])then
set I8F=I8F+1
else
set I9F=I9F+1
endif
else
set UP=GetPlayerId(Z7[O5])
if(IsUnitInRange(M7[UP],JO4,700.))then
set IDF=IDF+1
elseif(IsUnitInRange(M7[UP],JN4,700.))then
set I8F=I8F+1
elseif(IsUnitInRange(M7[UP],JP4,700.))then
set I9F=I9F+1
elseif((j1(M7[UP],ED)<4000.)or(RectContainsUnit(Cz,M7[UP])))then
elseif(RAbsBJ(GetUnitX(M7[UP])-GetUnitY(M7[UP]))<1500.)then
set IDF=IDF+1
elseif(((GetUnitY(M7[UP])>5000.)and(GetUnitY(M7[UP])<6700.))or((GetUnitX(M7[UP])>-7000.)and(GetUnitX(M7[UP])<-5500.)))then
set I8F=I8F+1
elseif(((GetUnitY(M7[UP])>-7500.)and(GetUnitY(M7[UP])<-6300.))or((GetUnitX(M7[UP])>5000.)and(GetUnitX(M7[UP])<6700.)))then
set I9F=I9F+1
endif
endif
set O5=O5+1
endloop
if(HB4<=3)then
set UP=1
else
set UP=2
endif
if((PE4)or((PG4)and(PH4))or((PG4)and(PF4))or((PH4)and(PF4)))then
set UP=5
endif
set i=1
loop
exitwhen i>5
if((TA7(Z7[i]))and(GetPlayerController(Z7[i])==MAP_CONTROL_COMPUTER))then
set O5=GetPlayerId(Z7[i])
if(h8[16+O5]==h7[$E])then
if(((IDF>1)and(HCF()))or((IDF>UP)and(not(HCF()))))then
if((not PH4)and(I8F<UP))then
set h8[16+O5]=h7[35]
set h8[O5]=h7[32]
set eY[64+O5]=1
set I8F=I8F+1
set IDF=IDF-1
elseif((not PF4)and(I9F<UP))then
set h8[16+O5]=h7[55]
set h8[O5]=h7[52]
set eY[64+O5]=2
set I9F=I9F+1
set IDF=IDF-1
endif
endif
elseif(h8[16+O5]==h7[35])then
if(I8F>UP)then
if((not PG4)and(((IDF<1)and(HCF()))or((IDF<UP)and(not(HCF())))))then
set h8[16+O5]=h7[$E]
set h8[O5]=h7[$C]
set eY[64+O5]=0
set IDF=IDF+1
set I8F=I8F-1
elseif((not PF4)and(I9F<UP))then
set h8[16+O5]=h7[55]
set h8[O5]=h7[52]
set eY[64+O5]=2
set I9F=I9F+1
set I8F=I8F-1
endif
endif
else
if(I9F>UP)then
if((not PG4)and(((IDF<1)and(HCF()))or((IDF<UP)and(not(HCF())))))then
set h8[16+O5]=h7[$E]
set h8[O5]=h7[$C]
set eY[64+O5]=0
set IDF=IDF+1
set I9F=I9F-1
elseif((not PH4)and(I8F<UP))then
set h8[16+O5]=h7[35]
set h8[O5]=h7[32]
set eY[64+O5]=1
set I8F=I8F+1
set I9F=I9F-1
endif
endif
endif
endif
set i=i+1
endloop
endfunction
function IEF takes nothing returns nothing
local integer O5=1
local integer UP=0
local integer I8F=0
local integer I9F=0
local integer IDF=0
local integer i=0
loop
exitwhen O5>5
if((M7[GetPlayerId(A7[O5])]==null)and(GetPlayerSlotState(A7[O5])==PLAYER_SLOT_STATE_PLAYING))then
return
elseif(not TA7(A7[O5]))then
elseif(GetPlayerController(A7[O5])==MAP_CONTROL_COMPUTER)then
if(h8[16+GetPlayerId(A7[O5])]==h7[114])then
set IDF=IDF+1
elseif(h8[16+GetPlayerId(A7[O5])]==h7[$87])then
set I8F=I8F+1
else
set I9F=I9F+1
endif
else
set UP=GetPlayerId(A7[O5])
if(IsUnitInRange(M7[UP],K44,700.))then
set IDF=IDF+1
elseif(IsUnitInRange(M7[UP],J_4,700.))then
set I8F=I8F+1
elseif(IsUnitInRange(M7[UP],K74,700.))then
set I9F=I9F+1
elseif((j1(M7[UP],L9)<4000.)or(RectContainsUnit(cz,M7[UP])))then
elseif(RAbsBJ(GetUnitX(M7[UP])-GetUnitY(M7[UP]))<1500.)then
set IDF=IDF+1
elseif(((GetUnitY(M7[UP])>5000.)and(GetUnitY(M7[UP])<6700.))or((GetUnitX(M7[UP])>-7000.)and(GetUnitX(M7[UP])<-5500.)))then
set I8F=I8F+1
elseif(((GetUnitY(M7[UP])>-7500.)and(GetUnitY(M7[UP])<-6300.))or((GetUnitX(M7[UP])>5000.)and(GetUnitX(M7[UP])<6700.)))then
set I9F=I9F+1
endif
endif
set O5=O5+1
endloop
if(HC4<=3)then
set UP=1
else
set UP=2
endif
if((PE4)or((PG4)and(PH4))or((PG4)and(PF4))or((PH4)and(PF4)))then
set UP=5
endif
set i=1
loop
exitwhen i>5
if((TA7(A7[i]))and(GetPlayerController(A7[i])==MAP_CONTROL_COMPUTER))then
set O5=GetPlayerId(A7[i])
if(h8[16+O5]==h7[114])then
if(((IDF>1)and(HCF()))or((IDF>UP)and(not(HCF()))))then
if((not PF4)and(I9F<UP))then
set h8[16+O5]=h7[$9B]
set h8[O5]=h7[$98]
set eY[64+O5]=2
set I9F=I9F+1
set IDF=IDF-1
elseif((not PH4)and(I8F<UP))then
set h8[16+O5]=h7[$87]
set h8[O5]=h7[$84]
set eY[64+O5]=1
set I8F=I8F+1
set IDF=IDF-1
endif
endif
elseif(h8[16+O5]==h7[$87])then
if(I8F>UP)then
if((not PG4)and(((IDF<1)and(HCF()))or((IDF<UP)and(not(HCF())))))then
set h8[16+O5]=h7[114]
set h8[O5]=h7[112]
set eY[64+O5]=0
set IDF=IDF+1
set I8F=I8F-1
elseif((not PF4)and(I9F<UP))then
set h8[16+O5]=h7[$9B]
set h8[O5]=h7[$98]
set eY[64+O5]=2
set I9F=I9F+1
set I8F=I8F-1
endif
endif
else
if(I9F>UP)then
if((not PG4)and(((IDF<1)and(HCF()))or((IDF<UP)and(not(HCF())))))then
set h8[16+O5]=h7[114]
set h8[O5]=h7[112]
set eY[64+O5]=0
set IDF=IDF+1
set I9F=I9F-1
elseif((not PH4)and(I8F<UP))then
set h8[16+O5]=h7[$87]
set h8[O5]=h7[$84]
set eY[64+O5]=1
set I8F=I8F+1
set I9F=I9F-1
endif
endif
endif
endif
set i=i+1
endloop
endfunction
function IFF takes nothing returns nothing
if((Bz>26.)and((not PE4)or((PG4)and(PH4))or((PG4)and(PF4))or((PH4)and(PF4)))and((Bz<=QD4-30)or(Bz>=QD4-18)))then
if(QT4!=null)then
call I7F()
endif
if(QU4!=null)then
call IEF()
endif
endif
endfunction
function IGF takes nothing returns nothing
local unit it=O77(GetHandleId(GetTriggeringTrigger()),"Hero")
local integer ki
if((GetUnitAbilityLevel(it,1093684056)>0)and(GetUnitLifePercent(it)>90.)and(not IsUnitHidden(it))and(iU(it)))then
set ki=GetHandleId(GetOwningPlayer(it))
if((GetHeroStr(it,true)>(30+(4*GetHeroLevel(it))))and(GetHeroStr(it,false)>($F+GetHeroLevel(it))))then
if(IsTriggerEnabled(OE7(ki,"MorphStr")))then
call IssueImmediateOrderById(it,$D0243)
elseif(not IsTriggerEnabled(OE7(ki,"MorphAgi")))then
call IssueImmediateOrderById(it,$D0245)
endif
elseif((GetHeroStr(it,true)<(20+(2*GetHeroLevel(it)))))then
if(IsTriggerEnabled(OE7(ki,"MorphAgi")))then
call IssueImmediateOrderById(it,$D0246)
elseif(not IsTriggerEnabled(OE7(ki,"MorphStr")))then
call IssueImmediateOrderById(it,$D0242)
endif
elseif(IsTriggerEnabled(OE7(ki,"MorphStr")))then
call IssueImmediateOrderById(it,$D0243)
elseif(IsTriggerEnabled(OE7(ki,"MorphAgi")))then
call IssueImmediateOrderById(it,$D0246)
endif
endif
set it=null
endfunction
function E5F takes nothing returns nothing
local trigger t
if(OE7(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"HasAM")==null)then
set t=CreateTrigger()
call NV7(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"HasAM",t)
call NT7(GetHandleId(t),"Hero",GetTriggerUnit())
call TriggerRegisterTimerEventPeriodic(t,1.)
call TriggerAddAction(t,function IGF)
else
set t=OE7(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"HasAM")
call NT7(GetHandleId(t),"Hero",GetTriggerUnit())
endif
endfunction
function IHF takes unit it,integer X5 returns nothing
if((it!=null)and(is(it))and(IsUnitInRange(it,GetTriggerUnit(),800.))and(GetUnitLifePercent(it)>50.))then
call IssuePointOrderById(it,X5,GetOrderPointX(),GetOrderPointY())
endif
endfunction
function IIF takes nothing returns nothing
local integer X5=GetIssuedOrderId()
local integer O5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
if((X5<$D0020)and(X5!=$D0005)and(X5!=$D0006)and((not G0[16+O5])or(X5==$D0012)))then
call IHF(M7[16+O5],X5)
call IHF(M7[32+O5],X5)
call IHF(M7[48+O5],X5)
endif
endfunction
function E1F takes nothing returns nothing
local trigger t
if(OE7(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"HasMM")==null)then
set t=CreateTrigger()
call NV7(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"HasMM",t)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerAddAction(t,function IIF)
endif
endfunction
function IJF takes nothing returns boolean
return(GetAttacker()==O77(GetHandleId(GetTriggeringTrigger()),"Hero"))
endfunction
function IKF takes unit it,integer IMF,boolean INF returns nothing
set GZ[304+GetPlayerId(GetOwningPlayer(it))]=INF
call SetPlayerAbilityAvailable(GetOwningPlayer(it),IMF,INF)
endfunction
function IOF takes nothing returns nothing
local unit IB=GetAttacker()
local unit m5=GetTriggerUnit()
local integer i1=GetUnitTypeId(IB)
local integer O5=GetPlayerId(GetOwningPlayer(IB))
local integer kt
local integer IMF
local real IPF=.0
local real IQF=.0
local integer UP
local boolean J4
local integer X5=0
if((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))then
if((IsUnitType(m5,UNIT_TYPE_HERO)or IsUnitType(m5,UNIT_TYPE_STRUCTURE)))then
set J4=(i1!=1211117654)and(N97(IB,$D00AB,1093747504))
else
set J4=(i1==1211117654)and(N97(IB,$D00AA,1093747504))
endif
elseif(i1==1162032951)then
set J4=((IsUnitType(m5,UNIT_TYPE_HERO))and((GetUnitState(IB,UNIT_STATE_MANA)>hq[272+O5])or((Bz+30.)<hq[O5])))
call IKF(IB,1093679446,J4)
set X5=$D011F
set IMF=1093679446
elseif(i1==1160785972)then
set IPF=37+(GetHeroLevel(IB)*2.88)
set IQF=$A+$A*(GetUnitAbilityLevel(IB,1095263841))
call IKF(IB,1095263841,((IsUnitType(m5,UNIT_TYPE_HERO))and((GetUnitState(IB,UNIT_STATE_MANA)>100.)or(ME7(m5))))or((IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetHeroLevel(IB)>5)and(GetUnitState(IB,UNIT_STATE_MANA)>150.))or((GetHeroLevel(IB)>19)and(GetUnitManaPercent(IB)>75.))or((GetHeroLevel(IB)>5)and(GetUnitState(IB,UNIT_STATE_MANA)>150.)and(GetWidgetLife(m5)>IPF)and(GetWidgetLife(m5)<IPF+IQF)))
set X5=$D00CE
set IMF=1095263841
elseif(i1==1429221456)then
set IPF=49+(GetHeroLevel(IB)*2.68)
set IQF=GetUnitState(IB,UNIT_STATE_MANA)*(.05+.01*(GetUnitAbilityLevel(IB,1093685065)))
call IKF(IB,1093685065,((IsUnitType(m5,UNIT_TYPE_HERO))and((GetUnitState(IB,UNIT_STATE_MANA)>150.)or(ME7(m5))))or((GetHeroLevel(IB)>19)and(GetUnitManaPercent(IB)>70.))or((GetHeroLevel(IB)>5)and(GetUnitState(IB,UNIT_STATE_MANA)>150.)and(GetWidgetLife(m5)>IPF)and(GetWidgetLife(m5)<IPF+IQF)))
set X5=$D011F
set IMF=1093685065
elseif(i1==1315074670)then
call IKF(IB,1093677622,(IsUnitType(m5,UNIT_TYPE_HERO))and((GetUnitState(IB,UNIT_STATE_MANA)>150.)or(ME7(m5))))
set IMF=1093677622
set X5=$D0114
elseif(i1==1164799855)then
set IPF=47+(GetHeroLevel(IB)*2.68)
set UP=GetUnitAbilityLevel(IB,1093682265)
if(UP==0)then
set UP=GetUnitAbilityLevel(IB,1093752642)
if(UP>0)then
set IQF=DistanceBetweenPoints(GetUnitLoc(m5),GetUnitLoc(IB))*(.1+.05*(GetUnitAbilityLevel(IB,1093752642)))
call IKF(IB,1093752642,((IsUnitType(m5,UNIT_TYPE_HERO))and((GetUnitState(IB,UNIT_STATE_MANA)>150.)or(ME7(m5))))or((GetHeroLevel(IB)>19)and(GetUnitManaPercent(IB)>68.))or((GetHeroLevel(IB)>5)and(GetUnitManaPercent(IB)>50.)and(GetWidgetLife(m5)>IPF)and(GetWidgetLife(m5)<IPF+IQF)))
set IMF=1093752642
endif
else
set IQF=DistanceBetweenPoints(GetUnitLoc(m5),GetUnitLoc(IB))*(.1+.05*(GetUnitAbilityLevel(IB,1093682265)))
call IKF(IB,1093682265,((IsUnitType(m5,UNIT_TYPE_HERO))and((GetUnitState(IB,UNIT_STATE_MANA)>150.)or(ME7(m5))))or((GetHeroLevel(IB)>19)and(GetUnitManaPercent(IB)>75.))or((GetHeroLevel(IB)>5)and(GetUnitManaPercent(IB)>50.)and(GetWidgetLife(m5)>IPF)and(GetWidgetLife(m5)<IPF+IQF)))
set IMF=1093682265
endif
set X5=$D011F
elseif(i1==1311781185)then
set IQF=GetHeroInt(IB,true)*.15*(GetUnitAbilityLevel(IB,1093684314))
call IKF(IB,1093684314,((IsUnitType(m5,UNIT_TYPE_HERO))and((GetUnitState(IB,UNIT_STATE_MANA)>150.)or(ME7(m5))))or((GetHeroLevel(IB)>$A)and(GetUnitManaPercent(IB)>70.))or((GetHeroLevel(IB)>5)and(GetUnitState(IB,UNIT_STATE_MANA)>150.)and(GetWidgetLife(m5)>IPF)and(GetWidgetLife(m5)<IPF+IQF)))
set IMF=1093684314
set X5=$D011F
elseif(i1==1211117649)then
call IKF(IB,1093685582,(GetUnitState(IB,UNIT_STATE_LIFE)>100.)and((IsUnitType(m5,UNIT_TYPE_HERO))and((GetUnitLifePercent(IB)>60.)or(ME7(m5))))or((GetHeroLevel(IB)>$E)and(GetUnitLifePercent(IB)>70.)))
set IMF=1093685582
set X5=$D011F
endif
if((GZ[304+O5])and(IsUnitType(m5,UNIT_TYPE_HERO)))then
set kt=GetUnitAbilityLevel(IB,IMF)
if((UC7(IB))or(hq[32+O5]>Bz)or(kt==0)or(GetUnitAbilityLevel(IB,1110455638)>0))then
set GZ[304+O5]=false
elseif(i1==1162032951)then
if(kt<=2)then
set hq[32+O5]=Bz+5.-kt
endif
set GZ[304+O5]=GetUnitState(IB,UNIT_STATE_MANA)>20.
elseif(i1==1160785972)then
if(kt<=2)then
set hq[32+O5]=Bz+5.-kt
endif
set GZ[304+O5]=GetUnitState(IB,UNIT_STATE_MANA)>8.
elseif(i1==1429221456)then
if(kt<=3)then
set hq[32+O5]=Bz+8.-(2.*kt)
endif
set GZ[304+O5]=GetUnitState(IB,UNIT_STATE_MANA)>100.
elseif(i1==1315074670)then
set GZ[304+O5]=GetUnitState(IB,UNIT_STATE_MANA)>12.
elseif(i1==1164799855)then
if(kt<=3)then
set hq[32+O5]=Bz+7.-kt
endif
set GZ[304+O5]=GetUnitState(IB,UNIT_STATE_MANA)>35.+(5.*kt)
elseif(i1==1311781185)then
if(kt<=3)then
set hq[32+O5]=Bz+4.-kt
endif
set GZ[304+O5]=GetUnitState(IB,UNIT_STATE_MANA)>15.
elseif(i1==1211117649)then
set GZ[304+O5]=GetUnitState(IB,UNIT_STATE_LIFE)>101.
endif
endif
if IssueImmediateOrderById(IB,X5)then
call IssueTargetOrderById(IB,$D000F,m5)
endif
set IB=null
set m5=null
endfunction
function ELF takes nothing returns nothing
local trigger t
if(OE7(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"HasOrb")==null)then
set t=CreateTrigger()
call NV7(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"HasOrb",t)
call NT7(GetHandleId(t),"Hero",GetTriggerUnit())
if(TV7(GetOwningPlayer(GetTriggerUnit())))then
call TriggerRegisterPlayerUnitEvent(t,A7[0],EVENT_PLAYER_UNIT_ATTACKED,Q24)
call c6(t,EVENT_PLAYER_UNIT_ATTACKED)
else
call TriggerRegisterPlayerUnitEvent(t,Z7[0],EVENT_PLAYER_UNIT_ATTACKED,Q24)
call B6(t,EVENT_PLAYER_UNIT_ATTACKED)
endif
call TriggerRegisterPlayerUnitEvent(t,B7,EVENT_PLAYER_UNIT_ATTACKED,Q24)
call TriggerAddCondition(t,Condition(function IJF))
call TriggerAddAction(t,function IOF)
endif
endfunction
function IRF takes nothing returns boolean
return(((GetUnitTypeId(GetTriggerUnit())==1848652103)or(GetUnitTypeId(GetTriggerUnit())==1848652099)or(GetUnitTypeId(GetTriggerUnit())==1848652088)or(GetUnitTypeId(GetTriggerUnit())==1848651828))and(QY4[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]))
endfunction
function ISF takes nothing returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
if((h4[O5]==null)and(not GZ[272+O5])and((GetUnitLifePercent(GetTriggerUnit())<50.)or((M7[O5]!=null)and(GetHeroLevel(M7[O5])<$A))))then
set GZ[272+O5]=true
call TriggerSleepAction(.2)
call jW(GetTriggerUnit(),$D0012,h9[O5])
call TriggerSleepAction(1.)
set GZ[272+O5]=false
endif
endfunction
function E_F takes nothing returns nothing
local trigger t
if(OE7(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"HasAtkM")==null)then
set t=CreateTrigger()
call NV7(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"HasAtkM",t)
call TriggerRegisterPlayerUnitEvent(t,GetOwningPlayer(GetTriggerUnit()),EVENT_PLAYER_UNIT_ATTACKED,Q24)
call TriggerAddCondition(t,Condition(function IRF))
call TriggerAddAction(t,function ISF)
endif
endfunction
function ITF takes nothing returns boolean
return((GetUnitAbilityLevel(GetTriggerUnit(),1097167976)==1)and(not IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(QY4[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]))!=null
endfunction
function IUF takes nothing returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
if(((h4[O5]==null)or(GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)<400.)or(GetRandomInt(1,$A)>4))and(GetUnitCurrentOrder(GetTriggerUnit())!=$D0012))then
call TriggerSleepAction(.5)
call jW(GetTriggerUnit(),$D0012,h9[O5])
endif
endfunction
function E2F takes nothing returns nothing
local trigger t
if(OE7(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"HasAtkM")==null)then
set t=CreateTrigger()
call NV7(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"HasAtkM",t)
call TriggerRegisterPlayerUnitEvent(t,GetOwningPlayer(GetTriggerUnit()),EVENT_PLAYER_UNIT_ATTACKED,Q24)
call TriggerAddCondition(t,Condition(function ITF))
call TriggerAddAction(t,function IUF)
endif
endfunction
function IVF takes nothing returns boolean
return(((GetUnitTypeId(GetTriggerUnit())==1697656907)or(GetUnitTypeId(GetTriggerUnit())==1697656905)or(GetUnitTypeId(GetTriggerUnit())==1697656908))and(QY4[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]))
endfunction
function IWF takes nothing returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
call TriggerSleepAction(.5)
call jW(GetTriggerUnit(),$D0012,h9[512+O5])
if(GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)<200.)then
call jW(GetTriggerUnit(),$D022D,NF7(GetTriggerUnit()))
endif
endfunction
function E0F takes nothing returns nothing
local trigger t
if(OE7(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"HasAtkM")==null)then
set t=CreateTrigger()
call NV7(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"HasAtkM",t)
call TriggerRegisterPlayerUnitEvent(t,GetOwningPlayer(GetTriggerUnit()),EVENT_PLAYER_UNIT_ATTACKED,Q24)
call TriggerAddCondition(t,Condition(function IVF))
call TriggerAddAction(t,function IWF)
endif
endfunction
function IXF takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetWidgetLife(GetFilterUnit())>.405)and((IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))or(GetUnitAbilityLevel(GetFilterUnit(),1110455378)>0))and(GetUnitAbilityLevel(GetFilterUnit(),1113815395)==0)and(GetUnitAbilityLevel(GetFilterUnit(),1113815346)==0))!=null
endfunction
function IYF takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetWidgetLife(GetFilterUnit())>.405)and((IsUnitVisible(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))or(GetUnitAbilityLevel(GetFilterUnit(),1110455378)>0))and(GetUnitAbilityLevel(GetFilterUnit(),1113815395)==0)and(GetUnitAbilityLevel(GetFilterUnit(),1113815346)==0))!=null
endfunction
function IZF takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return((GetOwningPlayer(GetFilterUnit())==Player(bj_forLoopAIndexEnd))and((i1==1865429304)or(i1==1865429042)or(i1==1865429058)or(i1==1865429314))and(GetWidgetLife(GetFilterUnit())>.405))
endfunction
function IAF takes nothing returns nothing
call SetUnitUserData(GetEnumUnit(),GetUnitUserData(GetEnumUnit())+1)
call GroupAddUnit(iA,GetEnumUnit())
endfunction
function IBF takes nothing returns nothing
call SetUnitUserData(GetEnumUnit(),0)
endfunction
function ICF takes nothing returns nothing
local integer O5=1
local group jU=OF7(GetHandleId(GetTriggeringTrigger()),"MGrp")
local boolexpr UJ7=OR7(GetHandleId(GetTriggeringTrigger()),"MFilt")
local unit I_7=null
loop
if O5==6 then
set O5=7
endif
exitwhen O5>$B
if(GetUnitTypeId(M7[O5])==1211117643)and(GetPlayerController(Player(O5))==MAP_CONTROL_COMPUTER)and((Y74[O5]!=1)or(GetRandomInt(1,$A)<=7))then
call GroupClear(jU)
call GroupClear(iA)
set bj_forLoopAIndexEnd=O5
set bj_lastLoadedUnit=M7[O5]
call GroupEnumUnitsOfPlayer(jU,Player(O5),UJ7)
loop
set I_7=FirstOfGroup(jU)
exitwhen I_7==null
call GroupRemoveUnit(jU,I_7)
if(MP7(400.,I_7,Condition(function IYF))>0)then
call IssueImmediateOrderById(I_7,$D024C)
elseif((GetUnitUserData(GetEnumUnit())<2)and(MP7(400.,I_7,Condition(function R97))>3)and(MP7(1200.,I_7,Condition(function IYF))==0))then
call IssueImmediateOrderById(I_7,$D024C)
call GroupClear(H9)
call GroupEnumUnitsInRange(H9,GetUnitX(I_7),GetUnitY(I_7),400.,UJ7)
call ForGroup(H9,function IAF)
endif
endloop
call ForGroup(iA,function IBF)
endif
set O5=O5+1
endloop
set jU=null
set UJ7=null
set I_7=null
endfunction
function I3F takes nothing returns boolean
return(((GetLearnedSkill()==1093681483)or((GetLearnedSkill()==1093748313)))and(not IsUnitIllusion(GetTriggerUnit()))and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))
endfunction
function Uzv takes nothing returns boolean
local integer i1=GetUnitTypeId(GetTriggerUnit())
return(((i1==1865429304)or(i1==1865429042)or(i1==1865429058)or(i1==1865429314))and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))
endfunction
function UZv takes nothing returns nothing
if(hq[$F0+GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]>Bz)then
call SetUnitUserData(GetTriggerUnit(),1)
endif
endfunction
function I6F takes nothing returns nothing
local trigger t=CreateTrigger()
call DisableTrigger(GetTriggeringTrigger())
call TriggerRegisterTimerEventPeriodic(t,1.5)
call TriggerAddAction(t,function ICF)
set Hc=Location(.0,.0)
call NB7(GetHandleId(t),"MGrp",CreateGroup())
call N17(GetHandleId(t),"MFilt",Condition(function IZF))
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function qg takes nothing returns nothing
local trigger t=CreateTrigger()
call ky(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function I3F))
call TriggerAddAction(t,function I6F)
endfunction
function ILF takes nothing returns boolean
return((GetUnitTypeId(GetFilterUnit())==1697657392)and(GetWidgetLife(GetFilterUnit())>.405))
endfunction
function I1F takes nothing returns nothing
if((GetPlayerController(GetOwningPlayer(GetEnumUnit()))!=MAP_CONTROL_USER)and((Y74[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]!=1)or(GetRandomInt(1,$A)<=7)))then
call MoveLocation(Hc,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()))
if((MO7(400.,Hc,Condition(function IXF))>0)and(MO7(1100.,Hc,Condition(function SJ7))>0))then
call IssueImmediateOrderById(GetEnumUnit(),$D024C)
endif
endif
endfunction
function I0F takes nothing returns nothing
local integer O5=1
local group jU=OF7(GetHandleId(GetTriggeringTrigger()),"MGrp")
local boolexpr UJ7=OR7(GetHandleId(GetTriggeringTrigger()),"MFilt")
loop
if((GetPlayerController(Z7[O5])==MAP_CONTROL_COMPUTER)and(GetUnitTypeId(M7[GetPlayerId(Z7[O5])])==1160786265))then
call GroupClear(jU)
call GroupEnumUnitsOfPlayer(jU,Z7[O5],UJ7)
call ForGroup(jU,function I1F)
endif
if((GetPlayerController(A7[O5])==MAP_CONTROL_COMPUTER)and(GetUnitTypeId(M7[GetPlayerId(A7[O5])])==1160786265))then
call GroupClear(jU)
call GroupEnumUnitsOfPlayer(jU,A7[O5],UJ7)
call ForGroup(jU,function I1F)
endif
set O5=O5+1
endloop
set jU=null
set UJ7=null
endfunction
function I5F takes nothing returns boolean
return((GetLearnedSkill()==1093685840)and(not IsUnitIllusion(GetTriggerUnit()))and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))
endfunction
function I2F takes nothing returns nothing
local trigger t=CreateTrigger()
call DisableTrigger(GetTriggeringTrigger())
call TriggerRegisterTimerEventPeriodic(t,1.5)
call TriggerAddAction(t,function I0F)
set Hc=Location(.0,.0)
call NB7(GetHandleId(t),"MGrp",CreateGroup())
call N17(GetHandleId(t),"MFilt",Condition(function ILF))
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function ME8 takes nothing returns nothing
local trigger t=CreateTrigger()
call ky(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function I5F))
call TriggerAddAction(t,function I2F)
endfunction
function I_F takes unit IH7 returns location
call MoveLocation(HA,(LoadReal(L7,(GetHandleId(IH7)),(7400))),(LoadReal(L7,(GetHandleId(IH7)),(7500))))
return HA
endfunction
function J4F takes nothing returns boolean
if((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(M87(GetFilterUnit()))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))))then
call I_F(GetFilterUnit())
return((KF7(GetLocationX(HA),GetLocationY(HA),GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit())))>3000.)
endif
return false
endfunction
function J7F takes nothing returns nothing
local unit J8F=GetTriggerUnit()
local player pl=GetOwningPlayer(J8F)
local integer O5=GetPlayerId(GetOwningPlayer(J8F))
local integer UP=0
call SetPlayerAbilityAvailable(pl,1093687351,false)
call SetPlayerAbilityAvailable(pl,1093748789,false)
set h4[80+GetPlayerId(pl)]=null
if(h4[288+O5]==null)then
set h4[288+O5]=S17(1500.,J8F)
endif
if(ME7(J8F))then
call jW(J8F,$D0012,h9[O5])
elseif(h4[288+O5]!=null)then
call IssueTargetOrderById(J8F,$D000F,h4[288+O5])
set hq[512+O5]=Bz+5.+I2R($F*GetUnitAbilityLevel(J8F,1093679445))
else
call jW(J8F,$D000F,h8[O5])
set hq[512+O5]=Bz+5.+I2R($F*GetUnitAbilityLevel(J8F,1093679445))
endif
loop
call J_7(.5)
exitwhen(GetUnitAbilityLevel(J8F,1110454347)==0)
if(not G0[$80+O5])then
set h4[288+O5]=null
elseif((h4[288+O5]==null)or(not M87(h4[288+O5]))or(Q77(h4[288+O5]))or((kD(h4[288+O5]))and(not IsUnitVisible(h4[288+O5],pl))))then
set h4[288+O5]=S17(1500.,J8F)
endif
if((ME7(J8F))or(not G0[$80+O5])or(G0[64+O5])or(G0[O5]))then
call jW(J8F,$D0012,h9[O5])
elseif(h4[288+O5]!=null)then
call IssueTargetOrderById(J8F,$D000F,h4[288+O5])
else
call J3(J8F,true)
endif
endloop
if((h4[288+O5]!=null)and(M87(h4[288+O5]))and(IsUnitInRange(J8F,h4[288+O5],1200.)))then
call WQE(O5,h4[288+O5],false,false)
endif
call SetPlayerAbilityAvailable(pl,1093687351,true)
set hq[512+O5]=Bz+3.
set h4[288+O5]=null
set J8F=null
set pl=null
endfunction
function J9F takes nothing returns boolean
return((QN7())and(GetUnitAbilityLevel(GetFilterUnit(),1113812327)==0))
endfunction
function JDF takes nothing returns boolean
return((k3())and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_MAGIC_IMMUNE))and(GetUnitAbilityLevel(GetFilterUnit(),1113812327)==0))!=null
endfunction
function JEF takes nothing returns nothing
local unit J8F=GetTriggerUnit()
local unit JFF=null
local integer O5=GetPlayerId(GetOwningPlayer(J8F))
local real kl
if(ME7(J8F))then
call jW(J8F,$D0012,h9[O5])
elseif(h4[288+O5]!=null)then
call jW(J8F,$D0003,h4[288+O5])
set hq[512+O5]=Bz+5.
else
call jW(J8F,$D000F,h8[O5])
set hq[512+O5]=Bz+5.
endif
loop
call J_7(.3)
exitwhen(GetUnitAbilityLevel(J8F,1112041075)==0)
if(not G0[$80+O5])then
set h4[288+O5]=null
elseif((h4[288+O5]==null)or(not M87(h4[288+O5]))or(Q77(h4[288+O5]))or((kD(h4[288+O5]))and(not IsUnitVisible(h4[288+O5],GetOwningPlayer(J8F)))))then
set h4[288+O5]=MK7(1000.,M07(J8F),Condition(function J9F))
endif
if((h4[288+O5]!=null)and(MP7(800.,h4[288+O5],Condition(function QX7))>0)and((not ME7(h4[288+O5]))or(not IsUnitInRange(h4[288+O5],J8F,400.))))then
set h4[288+O5]=null
endif
if((ME7(J8F))or(G0[O5])or(not G0[$80+O5])or(G0[64+O5]))then
call jW(J8F,$D0012,h9[O5])
elseif(h4[288+O5]!=null)then
set JFF=null
if(GetUnitAbilityLevel(h4[288+O5],1113812327)==0)then
set kl=Atan2(GetUnitY(h4[288+O5])-GetUnitY(J8F),GetUnitX(h4[288+O5])-GetUnitX(J8F))
call IssuePointOrderById(J8F,$D0003,GetUnitX(h4[288+O5])+250.*Cos(kl),GetUnitY(h4[288+O5])+250.*Sin(kl))
elseif(GetUnitAbilityLevel(h4[288+O5],1113812327)>0)then
if((GetUnitLifePercent(h4[288+O5])<45.)or((GetHeroLevel(J8F)>$A)and(h4[O5]==h4[288+O5])and(GetUnitLifePercent(h4[288+O5])<65.)))then
if(IsUnitInRange(J8F,h4[288+O5],200.))then
call UnitRemoveAbility(J8F,1112041075)
call IssueTargetOrderById(J8F,$D000F,h4[288+O5])
else
set kl=Atan2(GetUnitY(h4[288+O5])-GetUnitY(J8F),GetUnitX(h4[288+O5])-GetUnitX(J8F))
call IssuePointOrderById(J8F,$D0003,GetUnitX(h4[288+O5])+250.*Cos(kl),GetUnitY(h4[288+O5])+250.*Sin(kl))
endif
else
set h4[288+O5]=null
endif
endif
else
if((JFF!=null)and(GetUnitAbilityLevel(JFF,1113812327)>0))then
set JFF=null
endif
if((JFF==null)and(GetHeroLevel(J8F)>$A)and(MP7(800.,J8F,Condition(function QN7))<=1))then
set JFF=MN7(600.,M07(J8F),Condition(function JDF))
endif
if(JFF!=null)then
call IssuePointOrderById(J8F,$D0012,GetUnitX(JFF),GetUnitY(JFF))
else
call jW(J8F,$D0012,h9[O5])
endif
endif
endloop
set hq[512+O5]=Bz+3.
set h4[288+O5]=null
set J8F=null
set JFF=null
endfunction
function JGF takes nothing returns nothing
local unit J8F=GetTriggerUnit()
local integer O5=GetPlayerId(GetOwningPlayer(J8F))
local real UI7
local boolean J4
if(GetUnitTypeId(J8F)==1315334514)then
set UI7=150.
elseif(GetUnitTypeId(J8F)==1162032439)then
set UI7=350.
endif
set h4[288+O5]=S17(1500.,J8F)
if(h4[288+O5]!=null)then
call IssuePointOrderById(J8F,$D0003,GetUnitX(h4[288+O5])+5.,GetUnitY(h4[288+O5])+5.)
else
call jW(J8F,$D000F,h8[O5])
endif
set hq[512+O5]=Bz+30.
loop
call J_7(.4)
exitwhen((GetUnitAbilityLevel(J8F,1110456148)==0)or(ME7(J8F)))
if((h4[288+O5]!=null)and(IsUnitInRange(h4[288+O5],J8F,UI7)))then
if(GetUnitTypeId(J8F)==1315334514)then
if(GetUnitCurrentOrder(J8F)!=$D0131)then
call N97(J8F,$D0131,1093810506)
endif
else
call SetPlayerAbilityAvailable(GetOwningPlayer(J8F),1093681462,true)
set GZ[O5]=true
call J8(O5,N97(J8F,$D0272,1093677363))
endif
elseif(K57(J8F))then
set J4=(G0[O5])or(G0[64+O5])or(not G0[$80+O5])
if((h4[288+O5]!=null)and((J4)or(not M87(h4[288+O5]))or(Q77(h4[288+O5]))or((kD(h4[288+O5]))and(not IsUnitVisible(h4[288+O5],GetOwningPlayer(J8F))))))then
set h4[288+O5]=null
call jW(J8F,$D0012,h9[O5])
endif
if((h4[288+O5]==null)and(not J4))then
set h4[288+O5]=S17(1200.,J8F)
endif
if((h4[288+O5]!=null)and(not J4)and(not ME7(J8F)))then
call IssuePointOrderById(J8F,$D0003,GetUnitX(h4[288+O5])+5.,GetUnitY(h4[288+O5])+5.)
elseif((ME7(J8F))or(J4))then
call jW(J8F,$D0012,h9[O5])
endif
endif
endloop
set hq[512+O5]=Bz+3.
set h4[288+O5]=null
set GZ[272+O5]=false
set J8F=null
endfunction
function JHF takes nothing returns nothing
local unit J8F=GetTriggerUnit()
local integer O5=GetPlayerId(GetOwningPlayer(J8F))
local integer JIF
local integer UP
if(ME7(J8F))then
call jW(J8F,$D0012,h9[O5])
set J8F=null
return
endif
if(GetUnitTypeId(J8F)==1315007329)then
set JIF=1110455864
call SetPlayerAbilityAvailable(GetOwningPlayer(J8F),1093677108,false)
elseif(GetUnitTypeId(J8F)==1160785972)then
set JIF=1110456118
else
set JIF=1110456148
endif
set h4[288+O5]=S17(1500.,J8F)
if(h4[288+O5]!=null)then
call IssueTargetOrderById(J8F,$D000F,h4[288+O5])
else
call J3(J8F,true)
endif
set hq[512+O5]=Bz+30.
loop
call J_7(.5)
exitwhen((GetUnitAbilityLevel(J8F,JIF)==0)or(ME7(J8F)))
if((h4[288+O5]!=null)and((G0[O5])or(G0[64+O5])or(not G0[$80+O5])or(not M87(h4[288+O5]))or(Q77(h4[288+O5]))or((kD(h4[288+O5]))and(not IsUnitVisible(h4[288+O5],GetOwningPlayer(J8F))))))then
set h4[288+O5]=null
call jW(J8F,$D0012,h9[O5])
endif
if((h4[288+O5]!=null)and(not ME7(J8F)))then
if((JIF!=1110455864)and(IsUnitInRange(J8F,h4[288+O5],300.)))then
call UnitRemoveAbility(J8F,JIF)
set GZ[O5]=true
if((GetUnitTypeId(J8F)!=1160785972)or(not N97(J8F,$D0084,1093677872)))then
call IssueTargetOrderById(J8F,$D000F,h4[288+O5])
endif
set GZ[O5]=false
elseif(JIF==1110455864)then
call IssueTargetOrderById(J8F,$D000F,h4[288+O5])
else
call IssuePointOrderById(J8F,$D0003,GetUnitX(h4[288+O5])+5.,GetUnitY(h4[288+O5])+5.)
endif
elseif((h4[288+O5]==null)and(not ME7(J8F))and(not G0[O5])and(not G0[64+O5])and(G0[$80+O5]))then
set h4[288+O5]=S17(1500.,J8F)
if(h4[288+O5]!=null)then
call IssuePointOrderById(J8F,$D0003,GetUnitX(h4[288+O5])+5.,GetUnitY(h4[288+O5])+5.)
endif
else
call jW(J8F,$D0012,h9[O5])
endif
endloop
if(GetTriggerEventId()==EVENT_PLAYER_UNIT_USE_ITEM)then
set GZ[272+O5]=false
endif
set hq[512+O5]=Bz+3.
set h4[288+O5]=null
set J8F=null
endfunction
function JJF takes nothing returns boolean
return((GetSpellAbilityId()==1093677391)and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))
endfunction
function JKF takes nothing returns nothing
local unit j5=GetTriggerUnit()
call SetPlayerController(GetOwningPlayer(j5),MAP_CONTROL_NONE)
call J_7(.5)
call SetPlayerController(GetOwningPlayer(j5),MAP_CONTROL_COMPUTER)
call J_7(.0)
call J3(j5,false)
call J_7(1.)
if(KE7(j5,NF7(j5))<1500.)then
set h9[GetPlayerId(GetOwningPlayer(j5))]=NF7(j5)
call PW7(j5,true)
else
call UQ7(j5)
endif
set j5=null
endfunction
function po takes nothing returns nothing
local trigger t=CreateTrigger()
call ky(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function JJF))
call TriggerAddAction(t,function JKF)
endfunction
function JMF takes nothing returns boolean
return((GetSpellAbilityId()==1093682764)and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))
endfunction
function JNF takes nothing returns nothing
local unit m5=GetSpellTargetUnit()
local unit j5=GetTriggerUnit()
local player pl=GetOwningPlayer(j5)
local real JOF=.0
call SetPlayerController(pl,MAP_CONTROL_NONE)
call FNF(j5,m5)
set JOF=Bz
loop
call J_7(.5)
exitwhen((GetUnitAbilityLevel(m5,1110455113)==0)or(IsUnitDeadBJ(m5))or(IsUnitDeadBJ(j5)))
endloop
call SetPlayerController(pl,MAP_CONTROL_COMPUTER)
set hq[GetPlayerId(pl)]=Bz+30.
if((IsUnitAliveBJ(m5))and(not ME7(j5)))then
call IssueTargetOrderById(j5,$D000F,m5)
else
call J3(j5,false)
endif
set m5=null
set j5=null
set pl=null
endfunction
function IN8 takes nothing returns nothing
local trigger t=CreateTrigger()
call ky(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function JMF))
call TriggerAddAction(t,function JNF)
endfunction
function JPF takes nothing returns boolean
return((GetSpellAbilityId()==1093677649 or GetSpellAbilityId()==1093747769)and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))
endfunction
function JQF takes nothing returns nothing
local unit m5=GetSpellTargetUnit()
local unit j5=GetTriggerUnit()
local player pl=GetOwningPlayer(j5)
local real JOF=.0
call SetPlayerController(pl,MAP_CONTROL_NONE)
call FNF(j5,m5)
set JOF=Bz
loop
call J_7(.5)
exitwhen((GetUnitAbilityLevel(m5,1110455362)==0)or(IsUnitDeadBJ(m5))or(IsUnitDeadBJ(j5)))
endloop
call SetPlayerController(pl,MAP_CONTROL_COMPUTER)
set hq[GetPlayerId(pl)]=Bz+120.
if((not IsUnitDeadBJ(m5))and(not ME7(j5))and(not M57(j5,$D0097,1093683019,m5)))then
call IssueTargetOrderById(j5,$D000F,m5)
else
call J3(j5,false)
endif
set m5=null
set j5=null
set pl=null
endfunction
function H88 takes nothing returns nothing
local trigger t=CreateTrigger()
call ky(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function JPF))
call TriggerAddAction(t,function JQF)
endfunction
function JRF takes nothing returns boolean
return((GetSpellAbilityId()==1093747288)and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))
endfunction
function JSF takes nothing returns nothing
local unit j5=GetTriggerUnit()
local unit m5=null
local player pl=GetOwningPlayer(j5)
local real JOF=.0
call SetPlayerController(pl,MAP_CONTROL_NONE)
set JOF=Bz
set m5=K2(400.,HC[GetPlayerId(pl)])
if(m5!=null)then
call FNF(j5,m5)
endif
loop
call J_7(.5)
exitwhen((GetUnitCurrentOrder(j5)!=$D00DC)or(IsUnitDeadBJ(j5)))
endloop
call SetPlayerController(pl,MAP_CONTROL_COMPUTER)
set hq[GetPlayerId(pl)]=Bz+210.-(GetUnitAbilityLevel(j5,1093747288)*10.)
call J3(j5,false)
set j5=null
set m5=null
set pl=null
endfunction
function FD8 takes nothing returns nothing
local trigger t=CreateTrigger()
call ky(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function JRF))
call TriggerAddAction(t,function JSF)
endfunction
function JTF takes nothing returns boolean
return((GetSpellAbilityId()==10936781600)and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))
endfunction
function JUF takes nothing returns nothing
local unit j5=GetTriggerUnit()
call SetPlayerController(GetOwningPlayer(j5),MAP_CONTROL_NONE)
call J_7(.5)
call SetPlayerController(GetOwningPlayer(j5),MAP_CONTROL_COMPUTER)
call J_7(.0)
if(GetSpellTargetUnit()!=null)then
call FNF(j5,GetSpellTargetUnit())
endif
set j5=null
endfunction
function PV takes nothing returns nothing
local trigger t=CreateTrigger()
call ky(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function JTF))
call TriggerAddAction(t,function JUF)
endfunction
function S23 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real ZV8=(LoadReal(L7,(GetHandleId(ZX7)),(827)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH or ZV8<(TimerGetElapsed(W))then
call UnitRemoveAbility(ZX7,1093816662)
call UnitRemoveAbility(ZX7,1110460246)
call UnitRemoveAbility(ZX7,1093816666)
call SaveReal(L7,(GetHandleId(ZX7)),(827),((0)*1.0))
endif
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set ZX7=null
return false
endfunction
function S33 takes unit ZX7,unit IH7 returns nothing
local trigger t
local integer I97
local real ZV8=(LoadReal(L7,(GetHandleId(ZX7)),(827)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093816897)
call SaveReal(L7,(GetHandleId(ZX7)),(827),(((TimerGetElapsed(W))+0.5)*1.0))
call B67(ZX7,IH7,2,20*BC7+10)
if YS8(IH7)==false then
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.5+0.01,false)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerAddCondition(t,Condition(function S23))
call SaveUnitHandle(L7,(I97),(2),(IH7))
call XF7(IH7,1093816662)
call XF7(IH7,1093816666)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093816662,false)
endif
set t=null
endfunction
function S43 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
if GetEventDamageSource()==ZX7 and GetEventDamage()>0 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call S33(ZX7,IH7)
endif
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function S53 takes nothing returns boolean
local unit ZX7=(LoadUnitHandle(L7,(GetHandleId(GetTriggeringTrigger())),(2)))
local unit IH7=GetTriggerUnit()
local trigger t
local integer I97
if GetAttacker()==ZX7 and((LoadInteger(L7,(GetHandleId((ZX7))),((4347))))==1)==false and IsUnitType(IH7,UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(IH7,1093678162)==0 then
if GetRandomReal(0,100)<=40 then
call O3O(ZX7,4347,0.1)
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,1.5,false)
call TriggerAddCondition(t,Condition(function S43))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
endif
endif
set ZX7=null
set IH7=null
return false
endfunction
function S63 takes nothing returns boolean
local trigger t
local integer I97
if GetLearnedSkill()==1093816897 and GetUnitAbilityLevel(GetTriggerUnit(),1093816897)==1 and IsUnitIllusion(GetTriggerUnit())==false then
set t=CreateTrigger()
set I97=GetHandleId(t)
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function S53))
call SaveUnitHandle(L7,(I97),(2),(GetTriggerUnit()))
set t=null
endif
return false
endfunction
function APV takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function S63))
set t=null
endfunction
function JVF takes nothing returns boolean
return((GetSpellAbilityId()==1093684561 or GetSpellAbilityId()==1093747254)and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))
endfunction
function JWF takes unit it,integer O5 returns nothing
if(KE7(h9[O5],it)<400.)then
set h8[O5]=h9[O5]
set h9[O5]=NF7(it)
elseif(KE7(h8[O5],it)<400.)then
set h9[O5]=h8[O5]
if(IsUnitAlly(it,Z7[0]))then
set h8[O5]=h7[18]
else
set h8[O5]=h7[118]
endif
endif
endfunction
function JXF takes unit it,integer O5,boolean J4 returns nothing
local unit m5=null
if(not J4)then
if((eY[O5]!=3)and(eY[O5]!=4))then
call jW(it,$D000F,h8[O5])
else
set m5=MK7(1200.,M07(it),Condition(function k8))
set J4=((m5!=null)and(IssuePointOrderById(it,$D000F,GetUnitX(m5),GetUnitY(m5))))or(jW(it,$D000F,h8[O5]))
endif
endif
set m5=null
endfunction
function JYF takes nothing returns nothing
local unit j5=GetTriggerUnit()
local integer O5=GetPlayerId(GetOwningPlayer(j5))
set GZ[O5]=false
set GZ[272+O5]=ME7(j5)
call SetPlayerController(GetOwningPlayer(j5),MAP_CONTROL_NONE)
call J_7(.5)
call SetPlayerController(GetOwningPlayer(j5),MAP_CONTROL_COMPUTER)
call J_7(1.5)
set h8[512+O5]=h8[16+O5]
set h9[512+O5]=h9[16+O5]
set h8[528+O5]=h8[16+O5]
set h9[528+O5]=h9[16+O5]
loop
exitwhen(not IsUnitHidden(j5))
call J_7(1.)
endloop
if(M87(j5))then
call UQ7(j5)
endif
set j5=null
endfunction
function OR8 takes nothing returns nothing
local trigger t=CreateTrigger()
call ky(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function JVF))
call TriggerAddAction(t,function JYF)
endfunction
function JZF takes nothing returns boolean
local integer X5=GetIssuedOrderId()
local integer i=GetUnitTypeId(GetTriggerUnit())
if(X5!=$D024D)and(X5!=$D0011)and(X5!=$D024E)and(not IsUnitInRange(GetTriggerUnit(),M7[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))],50.))then
if i==1966092359 or i==1966092361 then
call DisableTrigger(GetTriggeringTrigger())
call IssueImmediateOrderById(GetTriggerUnit(),$D024D)
call EnableTrigger(GetTriggeringTrigger())
endif
endif
return false
endfunction
function aiExorcismFilter takes nothing returns boolean
return(GetUnitTypeId(GetFilterUnit())==1966092359 and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(bj_lastLoadedUnit))
endfunction
function JAF takes nothing returns nothing
local unit I_7=GetEnumUnit()
local player pl=GetOwningPlayer(I_7)
local trigger t=OE7(GetHandleId(pl),"ExorTrig")
local integer i=GetUnitCurrentOrder(I_7)
if KE7(I_7,bj_lastLoadedUnit)>750. then
call DisableTrigger(t)
call IssuePointOrderById(I_7,$D0012,GetUnitX(bj_lastLoadedUnit),GetUnitY(bj_lastLoadedUnit))
call EnableTrigger(t)
elseif((i==0)or(i==$D0012 and KE7(I_7,bj_lastLoadedUnit)<450.))then
call IssueImmediateOrderById(I_7,$D024D)
endif
set I_7=null
set t=null
set pl=null
endfunction
function JBF takes nothing returns nothing
local unit I_7=GetEnumUnit()
local player pl=GetOwningPlayer(I_7)
local trigger t=OE7(GetHandleId(pl),"NAttTrig")
local integer i=GetUnitCurrentOrder(I_7)
if KE7(I_7,bj_lastLoadedUnit)>350. then
call DisableTrigger(t)
call IssuePointOrderById(I_7,$D0012,GetUnitX(bj_lastLoadedUnit),GetUnitY(bj_lastLoadedUnit))
call EnableTrigger(t)
elseif((i==0)or(i==$D0012 and KE7(I_7,bj_lastLoadedUnit)<200.))then
call IssueImmediateOrderById(I_7,$D024D)
endif
set I_7=null
set t=null
set pl=null
endfunction
function JCF takes nothing returns nothing
local unit j5=GetTriggerUnit()
local player pl=GetOwningPlayer(j5)
local real DJF=Bz+29.5
local trigger t=OE7(GetHandleId(pl),"ExorTrig")
local integer J3F=GetSpellAbilityId()
local group J6F=OF7(GetHandleId(pl),"ExorG")
set hq[GetPlayerId(pl)]=Bz+120.
call RemoveGuardPosition(j5)
if(t==null)then
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,pl,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER,null)
call TriggerRegisterPlayerUnitEvent(t,pl,EVENT_PLAYER_UNIT_ISSUED_ORDER,null)
call TriggerRegisterPlayerUnitEvent(t,pl,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER,null)
call TriggerAddCondition(t,Condition(function JZF))
call NV7(GetHandleId(pl),"ExorTrig",t)
set J6F=CreateGroup()
call NB7(GetHandleId(pl),"ExorG",J6F)
else
call EnableTrigger(t)
call GroupClear(J6F)
endif
loop
call TriggerSleepAction(.5)
if((iU(j5))and(GetUnitCurrentOrder(j5)!=$D000F)and(MP7(750.,j5,Condition(function k0))==0)and(not ME7(j5))and((GetUnitLifePercent(j5)>90.)or(not G0[GetPlayerId(GetOwningPlayer(j5))])))then
call jW(j5,$D000F,h8[GetPlayerId(GetOwningPlayer(j5))])
endif
exitwhen((Bz>DJF)or(not M87(j5)))
set bj_lastLoadedUnit=j5
call ForGroup(J6F,function JAF)
endloop
call DisableTrigger(t)
set t=null
set j5=null
endfunction
function JLF takes nothing returns nothing
local unit j5=GetTriggerUnit()
local player pl=GetOwningPlayer(j5)
local real DJF=Bz+9.5
local trigger t=OE7(GetHandleId(pl),"NAttTrig")
local integer J3F=GetSpellAbilityId()
local group J6F=OF7(GetHandleId(pl),"NAttG")
call RemoveGuardPosition(j5)
if(t==null)then
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,GetOwningPlayer(j5),EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER,null)
call TriggerRegisterPlayerUnitEvent(t,GetOwningPlayer(j5),EVENT_PLAYER_UNIT_ISSUED_ORDER,null)
call TriggerRegisterPlayerUnitEvent(t,GetOwningPlayer(j5),EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER,null)
call TriggerAddCondition(t,Condition(function JZF))
call NV7(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"NAttTrig",t)
set J6F=CreateGroup()
call NB7(GetHandleId(pl),"NAttG",J6F)
else
call EnableTrigger(t)
call GroupClear(J6F)
endif
loop
call TriggerSleepAction(.3)
exitwhen((Bz>DJF)or(not M87(j5)))
set bj_lastLoadedUnit=j5
call ForGroup(J6F,function JBF)
endloop
call DisableTrigger(t)
set t=null
set j5=null
endfunction
function J1F takes nothing returns boolean
return((GetSpellAbilityId()==1093685846)and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))
endfunction
function J0F takes nothing returns nothing
local unit j5=GetTriggerUnit()
local unit m5=null
local real DJF=Bz+.5
local integer O5=GetPlayerId(GetOwningPlayer(j5))
call SetPlayerController(GetOwningPlayer(j5),MAP_CONTROL_NONE)
call TriggerSleepAction(.01)
loop
if((h4[O5]!=null)and(M87(h4[O5]))and(IsUnitInRange(j5,h4[O5],$91+(40*GetUnitAbilityLevel(j5,1093685839)))))then
set m5=h4[O5]
else
set m5=MN7(I2R($91+(40*GetUnitAbilityLevel(j5,1093685839))),M07(j5),Condition(function QN7))
endif
if(m5!=null)then
call UnitRemoveAbility(j5,1110456395)
call IssueTargetOrderById(j5,$D000F,m5)
endif
exitwhen((not G0[$80+O5])or(GetUnitAbilityLevel(j5,1110456395)==0)or(not M87(j5))or(Bz>=DJF))
call J_7(.5)
endloop
call SetPlayerController(GetOwningPlayer(j5),MAP_CONTROL_COMPUTER)
call J3(j5,false)
set j5=null
set m5=null
endfunction
function MF8 takes nothing returns nothing
local trigger t=CreateTrigger()
call ky(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function J1F))
call TriggerAddAction(t,function J0F)
endfunction
function J5F takes nothing returns boolean
return((GetSpellAbilityId()==1093677402)and(IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetSpellTargetUnit()))==MAP_CONTROL_COMPUTER))!=null
endfunction
function J2F takes nothing returns nothing
local real IW
local real JD
local real Je
local integer O5=GetPlayerId(GetOwningPlayer(hr))
if((GetDestructableTypeId(GetEnumDestructable())==1465152372)or(GetDestructableTypeId(GetEnumDestructable())==1230271587)or(GetDestructableTypeId(GetEnumDestructable())==1230271607)or(GetDestructableTypeId(GetEnumDestructable())==1314157687)or(GetDestructableTypeId(GetEnumDestructable())==1129608306)or(GetDestructableTypeId(GetEnumDestructable())==1096053874))then
set JD=GetUnitX(h9[16+O5])
set Je=GetUnitY(h9[16+O5])
set IW=KF7(GetDestructableX(GetEnumDestructable()),GetDestructableY(GetEnumDestructable()),JD,Je)
if(((KF7(GetUnitX(hr),GetUnitY(hr),JD,Je)-150.)>IW)and((GetLocationX(HC[$F0+O5])==.0)or(((KF7(GetLocationX(HC[$F0+O5]),GetLocationY(HC[$F0+O5]),JD,Je)-150.)>IW))and(KF7(GetLocationX(HC[$F0+O5]),GetLocationY(HC[$F0+O5]),GetDestructableX(GetEnumDestructable()),GetDestructableY(GetEnumDestructable()))>250.)))then
call MoveLocation(HC[$F0+O5],GetDestructableX(GetEnumDestructable()),GetDestructableY(GetEnumDestructable()))
endif
endif
endfunction
function J_F takes nothing returns nothing
local unit K4F=GetSpellTargetUnit()
local integer O5=GetPlayerId(GetOwningPlayer(K4F))
local integer ki=GetHandleId(GetOwningPlayer(GetSpellTargetUnit()))
local location K7F=null
call J_7(.5)
set GZ[272+O5]=false
if(HC[$F0+O5]==null)then
set HC[$F0+O5]=Location(.0,.0)
endif
loop
call SetRect(He,GetUnitX(K4F)-600.,GetUnitY(K4F)-600.,GetUnitX(K4F)+600.,GetUnitY(K4F)+600.)
set hr=K4F
call EnumDestructablesInRect(He,Q24,function J2F)
set K7F=HC[$F0+O5]
if(GetLocationX(K7F)!=.0)then
call IssuePointOrderByIdLoc(K4F,$D0012,K7F)
else
call jW(K4F,$D0012,h9[O5])
endif
call J_7(.8)
exitwhen((GetUnitAbilityLevel(K4F,1110454833)==0)or(GZ[272+O5])or((MP7(1200.,K4F,Condition(function QN7))==0)and(iy(K4F))))
if((GetLocationX(K7F)!=.0)and(IsUnitInRangeLoc(K4F,K7F,150.)))then
call MoveLocation(K7F,.0,.0)
endif
endloop
if(K7F!=null)then
call MoveLocation(K7F,.0,.0)
endif
set K7F=null
set K4F=null
endfunction
function Pr takes nothing returns nothing
local trigger t=CreateTrigger()
call ky(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function J5F))
call TriggerAddAction(t,function J_F)
endfunction
function K8F takes real D7F,real D8F,boolean K9F returns boolean
local boolean J4=false
local unit KDF=null
local unit it=GetEnumUnit()
if KF7(GetUnitX(it),GetUnitY(it),D7F,D8F)>$BB8 then
if(K9F)then
call PZ7(it)
set J4=((GetUnitTypeId(it)==1164799603)and(IssuePointOrderById(it,$D022D,D7F,D8F)))or((GetUnitTypeId(it)==1311780946)and(((IsUnitAlly(it,Z7[0]))and(IssueTargetOrderById(it,$D0278,IZ4)))or((IsUnitAlly(it,A7[0]))and(IssueTargetOrderById(it,$D0278,JA4)))))
else
call MoveLocation(HB,D7F,D8F)
set KDF=MK7(1200.,HB,Condition(function Kd))
if((KDF!=null)and(MP7(1000.,KDF,Condition(function Kd))>3)and(MP7(1200.,KDF,Condition(function k6))<2)and(KE7(KDF,NF7(it))>4000.)and(kJ(GetUnitX(KDF),GetUnitY(KDF))))then
call PZ7(it)
set J4=((GetUnitTypeId(it)==1164799603)and(IssuePointOrderById(it,$D022D,GetUnitX(KDF),GetUnitY(KDF))))or((GetUnitTypeId(it)==1311780946)and(IssueTargetOrderById(it,$D0278,KDF)))or(((MR7(it,ZU[F6]))or(MR7(it,ZU[FF6])))and(UnitUseItemTarget(it,bj_lastCreatedItem,KDF)))
endif
endif
endif
set KDF=null
set it=null
return J4
endfunction
function KEF takes integer KFF returns boolean
local unit u=GetEnumUnit()
local boolean J4=false
if(KFF==0)then
if(IsUnitAlly(u,A7[0]))then
set J4=(K8F(Tm,Um,false))or(K8F(Jm,lm,false))or(K8F(cm,Cm,false))or(K8F(Zq,vQ,false))
else
set J4=(K8F(bQ,BQ,false))or(K8F(aQ,EQ,false))or(K8F(Zq,vQ,false))or(K8F(cm,Cm,false))
endif
elseif(KFF==1)then
if(IsUnitAlly(u,A7[0]))then
set J4=(K8F(-6240.,-3808.,false))or(K8F(-6112.,-1312.,false))or(K8F(-6112.,1504.,false))or(K8F(3169.,5920.,false))
else
set J4=(K8F(-4704.,5920.,false))or(K8F(32.,5856.,false))or(K8F(3169.,5920.,false))or(K8F(-6112.,1504.,false))
endif
elseif(KFF==2)then
if(IsUnitAlly(u,A7[0]))then
set J4=(K8F(-3424.,-6560.,false))or(K8F(-544.,-6688.,false))or(K8F(4960.,-6752.,false))or(K8F(6044.,2874.,false))
else
set J4=(K8F(6048.,-2080.,false))or(K8F(6112.,-96.,false))or(K8F(6044.,2874.,false))or(K8F(4960.,-6752.,false))
endif
elseif(KFF==3)then
set J4=K8F(GetUnitX(NF7(u)),GetUnitY(NF7(u)),true)
endif
set u=null
return J4
endfunction
function KGF takes unit it returns integer
if(GetUnitAbilityLevel(it,1093810259)==0)then
return $96+($96*GetUnitAbilityLevel(it,1093810258))
else
return $A0+($B4*GetUnitAbilityLevel(it,1093810259))
endif
endfunction
function KHF takes unit it returns integer
local integer kt=GetHeroLevel(it)
if(D4 or RZ4)then
return(90*kt)
elseif(hG[GetPlayerId(GetOwningPlayer(it))]<5)then
return(45*kt)
elseif(hG[GetPlayerId(GetOwningPlayer(it))]<$B)then
return(75*kt)
elseif(hG[GetPlayerId(GetOwningPlayer(it))]<$F)then
return(105*kt)
else
return(120*kt)
endif
endfunction
function KIF takes unit it returns integer
local integer kc=GetUnitAbilityLevel(it,1093684565)
if((kc==0)and(GetUnitAbilityLevel(it,1093681458)>0))then
return GetUnitAbilityLevel(it,1093681458)
endif
return kc
endfunction
function KJF takes unit it returns integer
if(GetUnitAbilityLevel(it,1093679447)==0)then
return $EC+($96*GetUnitAbilityLevel(it,1093679413))
else
return 350+($96*GetUnitAbilityLevel(it,1093679447))
endif
endfunction
function KKF takes unit it returns integer
if(GetUnitAbilityLevel(it,1093679450)==0)then
return $EC+($96*GetUnitAbilityLevel(it,1093677392))
else
return 332+($96*GetUnitAbilityLevel(it,1093679450))
endif
endfunction
function KMF takes unit it returns real
if((it==JH4)or(it==JK4)or(it==JO4)or(it==JR4)or(it==JQ4)or(it==JI4))then
return 50.
elseif((it==JG4)or(it==JJ4)or(it==JN4))then
return 100.
elseif((it==JM4)or(it==JP4))then
return 10.
elseif((it==J54)or(it==K44)or(it==K84)or(it==K94))then
return 230.
elseif((it==J14)or(it==J24)or(it==K74))then
return 270.
elseif(it==J_4)then
return 150.
else
return 180.
endif
endfunction
function KNF takes unit it returns real
local real KOF=YK7(ON7(GetHandleId(it),"TLLife1"),1.)-GetUnitState(it,UNIT_STATE_LIFE)
local real KPF=GetUnitState(it,UNIT_STATE_MAX_LIFE)
if(KPF==0)then
return .0
else
return(KOF/KPF)*100.
endif
endfunction
function KQF takes unit it,real HHF,integer X5,integer o6 returns boolean
call MoveLocation(Ha,GetUnitX(it)+HHF*Cos(GetUnitFacing(it)*bj_DEGTORAD),GetUnitY(it)+HHF*Sin(GetUnitFacing(it)*bj_DEGTORAD))
return((MO7(260.,Ha,Condition(function k6))>0)and(N97(it,X5,o6)))
endfunction
function KRF takes unit it,real HHF,boolexpr Ig returns boolean
call MoveLocation(Ha,GetUnitX(it)+HHF*Cos(GetUnitFacing(it)*bj_DEGTORAD),GetUnitY(it)+HHF*Sin(GetUnitFacing(it)*bj_DEGTORAD))
return MO7(260.,Ha,Ig)>0
endfunction
function KSF takes unit j5,unit m5 returns boolean
local integer I8=0
local item ja
local boolean jR=false
loop
set ja=UnitItemInSlot(j5,I8)
if((ja!=null)and(QG7(GetItemTypeId(ja))))then
set jR=UnitUseItemTarget(j5,ja,m5)
set I8=bj_MAX_INVENTORY
endif
set I8=I8+1
exitwhen I8>=bj_MAX_INVENTORY
endloop
set ja=null
return jR
endfunction
function KTF takes unit it returns boolean
local integer I8=0
local item ja
loop
set ja=UnitItemInSlot(it,I8)
if((ja!=null)and(ks(GetItemTypeId(ja))))then
set ja=null
return true
endif
set I8=I8+1
exitwhen I8>=bj_MAX_INVENTORY
endloop
set ja=null
return false
endfunction
function KUF takes unit j5 returns boolean
local integer I8=0
local item ja
local boolean jR=false
loop
set ja=UnitItemInSlot(j5,I8)
if((ja!=null)and(ks(GetItemTypeId(ja))))then
set GZ[$E0+GetPlayerId(GetOwningPlayer(j5))]=true
set jR=UnitUseItem(j5,ja)
set GZ[$E0+GetPlayerId(GetOwningPlayer(j5))]=false
set I8=bj_MAX_INVENTORY
endif
set I8=I8+1
exitwhen I8>=bj_MAX_INVENTORY
endloop
set ja=null
return jR
endfunction
function KVF takes unit j5,unit m5 returns boolean
local integer I8=0
local item ja=null
local location KWF=null
local boolean jR=false
if(Q77(m5))then
return false
endif
loop
set ja=UnitItemInSlot(j5,I8)
if((ja!=null)and(GetItemTypeId(ja)==ZU[RW]))then
set KWF=kL(j5,m5,100.)
if(KWF!=null)then
set jR=UnitUseItemPointLoc(j5,ja,KWF)
if((jR)and(hq[512+GetPlayerId(GetOwningPlayer(j5))]<Bz))then
set hq[512+GetPlayerId(GetOwningPlayer(j5))]=Bz+1.
endif
endif
set I8=bj_MAX_INVENTORY
endif
set I8=I8+1
exitwhen I8>=bj_MAX_INVENTORY
endloop
set KWF=null
set ja=null
return jR
endfunction
function KXF takes nothing returns boolean
if((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and((IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))or(eY[32+GetPlayerId(GetOwningPlayer(GetFilterUnit()))]>0))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0))then
return(GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<=LD4)
endif
return false
endfunction
function KYF takes unit it,unit m5 returns nothing
if((it!=null)and(it!=GetTriggerUnit())and(is(it))and(IsUnitInRange(it,GetTriggerUnit(),1200.))and(GetUnitLifePercent(it)>50.))then
if(not IssuePointOrderById(it,$D0249,GetUnitX(m5)+5.,GetUnitY(m5)+5.))then
call IssueTargetOrderById(it,$D000F,m5)
endif
endif
endfunction
function KZF takes unit it,unit m5 returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(it))
if(hq[$F0+O5]<Bz)then
set GZ[O5]=true
if(WA7(it,m5,30/.035,0,(GetUnitAbilityLevel(it,1093684802)+1)*$FA)!=null)and(J8(O5,M27(it,$D0079,1093684802,DH7)))then
set hq[$F0+O5]=Bz+1.5
return true
endif
endif
return false
endfunction
function KAF takes nothing returns nothing
call UQ7(GetEnumUnit())
endfunction
function KBF takes unit it,unit m5 returns boolean
local integer i1=GetUnitTypeId(it)
local integer O5=GetPlayerId(GetOwningPlayer(it))
local boolean J4=false
if(i1==1211117653)then
set J4=((Bz>T34[16+O5])and UG7(it,A54,A54,A54,1093686874)and(M57(it,$D0219,1093686874,m5)))or(((GetUnitState(it,UNIT_STATE_MANA))>400)and(Bz>T34[112+O5])and UG7(it,A54,A24,A_4,1093686861)and IssuePointOrderById(it,$D00F7,GetUnitX(m5),GetUnitY(m5)))
elseif(i1==1160786505)then
set J4=(IssuePointOrderById(it,$D02B6,GetUnitX(m5),GetUnitY(m5)))
elseif(i1==1160785970)then
set J4=(IsUnitInRange(it,m5,650.))and(GetUnitManaPercent(it)>60.)and(Bz>T34[16+O5])and(N97(it,$D022E,1093748023))
elseif(i1==1160786506)then
set J4=(IsUnitInRange(it,m5,795.))and(GetUnitAbilityLevel(it,1093751894)<3)and(GetUnitManaPercent(it)>70.)and(IssueTargetOrderById(it,$D007F,m5))
if(not J4)then
set J4=(IsUnitInRange(it,m5,795.))and(GetUnitAbilityLevel(it,1093752118)>0)and(GetUnitAbilityLevel(it,1093751894)>=3)and(((Bz>T34[48+O5])and(GetUnitManaPercent(it)>35.)and(J67(O5,it,1093751894,1093751637))and(IssueTargetOrderById(it,$D007F,m5)))or((GetUnitManaPercent(it)>20.)and(IssueTargetOrderById(it,$D007F,S17(795.,it)))))
endif
elseif((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))then
set J4=M57(it,$D0097,1093682994,m5)
elseif(i1==1429221424)then
set J4=(M57(it,$D024B,1093687351,m5))or(M57(it,$D0118,1093748789,m5))
elseif(i1==1430466609)then
set J4=M57(it,$D022F,1093685559,m5)
elseif(i1==1162032439)then
set J4=M57(it,$D02BD,1093744435,m5)
elseif(i1==1165451634)then
set J4=M57(it,$D02B6,1093687629,m5)
elseif(i1==1433168227)then
set J4=M57(it,$D0102,1093678918,m5)
elseif(i1==1430466865)then
set J4=M57(it,$D009D,1093677651,m5)
elseif(i1==1432642913)then
set J4=IssueTargetOrderById(it,$D02B6,m5)
elseif(i1==1429221445)then
set J4=(IsUnitInRange(it,m5,400.))and(N97(it,$D022E,1093678422))
elseif(i1==1332963428)then
set J4=M57(it,$D0097,1093683019,m5)
elseif(i1==1332109682)then
set J4=M57(it,$D02B6,1093678134,m5)
elseif(i1==1211117640)then
set J4=(IsUnitInRange(it,m5,500.))and(IssueTargetOrderById(it,$D0079,m5))
elseif(i1==1430468406)then
set J4=M57(it,$D00FA,kT(it),m5)
elseif(i1==1215063922)then
set J4=(M57(it,$D0264,1093677894,m5))or(M57(it,$D007F,1093681490,m5))
elseif(i1==1160786242)then
set J4=IssueTargetOrderById(it,$D02B6,m5)
elseif(i1==1311780946)then
set J4=M57(it,$D010E,1093677385,m5)
elseif((i1==1211117650)or(i1==1211119433))then
set IN4=it
set J4=(MP7(1000.,it,Condition(function ny))>3)and(IssueTargetOrderById(it,$D02DB,m5))
elseif(i1==1211117646)then
set J4=M57(it,$D010E,1093685573,m5)
elseif(i1==1211117624)then
set J4=(IsUnitInRange(it,m5,400.))and(N97(it,$D022E,1093683024))
elseif(i1==1211117616)then
set J4=((IsUnitInRange(it,m5,250.))and(N97(it,$D009F,1093677139)))or(M57(it,$D0107,1093816142,m5))
elseif(i1==1433631084)then
set J4=IssueTargetOrderById(it,$D0079,m5)
elseif(i1==1332898670)then
set J4=M57(it,$D026B,1093677360,m5)
elseif(i1==1215128178)then
set J4=(M57(it,$D00FA,'A2QB',m5))or(M57(it,$D0097,1093677616,m5))
elseif(i1==1316252014)then
set J4=(N97(it,$D022E,1093678405))or(M57(it,$D0269,1093678137,m5))
elseif(i1==1328558160)then
set J4=(M57(it,$D00FA,1093682766,m5))or(IssueTargetOrderById(it,$D02B6,m5))
elseif(i1==1214931305)then
set J4=M57(it,$D0079,1093748025,m5)
elseif(i1==1211117633)then
set J4=M57(it,$D007F,1093684310,m5)
elseif(i1==1211117620)then
set J4=(M57(it,$D009D,1093677382,m5))or(M27(it,$D0108,1093677623,WC7(it,m5,.95,600.)))
elseif(i1==1311781185)then
set J4=IssueTargetOrderById(it,$D02B6,m5)
elseif(i1==1160786000)then
set J4=M57(it,$D00FA,1093685047,m5)
elseif(i1==1311781206)then
set J4=(IsUnitInRange(it,m5,500.))and(IssueImmediateOrderById(it,$D0278))
elseif(i1==1311780930)then
set J4=((IsUnitInRange(it,m5,350.))and(IssueImmediateOrderById(it,$D0278)))or(IssuePointOrderById(it,$D02B6,GetUnitX(m5),GetUnitY(m5)))
elseif(i1==1311781174)then
set J4=M57(it,$D00FA,1093808461,m5)
elseif(i1==1311781175 or i1==1311911984 or i1==1311911985 or i1==1311781442)then
set J4=(IsUnitInRange(it,m5,400.)and(N97(it,$D0080,1093808462)))
elseif(i1==1160786520)then
set J4=M57(it,$D00D8,1093809991,m5)
else
set J4=WNE(it,m5,true)
endif
return J4
endfunction
function KCF takes nothing returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(GetEnumUnit()))
if((G0[32+O5])or(not G0[$80+O5])or(G0[O5]))then
elseif(h4[O5]==null)then
call WQE(O5,hz,false,false)
if(K57(GetEnumUnit()))then
call KBF(GetEnumUnit(),hz)
endif
elseif(K57(GetEnumUnit()))then
call KBF(GetEnumUnit(),hz)
endif
endfunction
function K3F takes unit H8F,unit H9F returns nothing
set hZ=H8F
set hz=H9F
if(GetWidgetLife(H9F)>1.)then
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(H8F),GetUnitY(H8F),1200.,iP)
call ForGroup(iA,function KCF)
endif
endfunction
function K6F takes unit IB,unit m5,boolean KLF returns nothing
if((m5==null)or(not M87(m5))or(not IsUnitType(m5,UNIT_TYPE_HERO))or(IsUnitAlly(m5,GetOwningPlayer(IB))))then
return
endif
set h4[GetPlayerId(GetOwningPlayer(IB))]=m5
call FNF(IB,m5)
if((not IsUnitInForce(IB,QX4))or(not K57(IB)))then
elseif((KLF)and(G0[$80+GetPlayerId(GetOwningPlayer(IB))])and((not ME7(IB))or(ME7(m5))))then
call IssueTargetOrderById(IB,$D000F,m5)
elseif((ME7(IB))and(not MI7(m5,IB)))then
call jW(IB,$D0012,h9[GetPlayerId(GetOwningPlayer(IB))])
endif
endfunction
function K1F takes nothing returns nothing
local unit j5=GetTriggerUnit()
local unit m5=null
local integer O5=GetPlayerId(GetOwningPlayer(j5))
local real K0F=Bz
local real KD7=Bz+4.5
local real K5F=Bz+7.5
local real COE=775
local boolean MA7=false
local boolean K2F=TZ7(Player(O5))
local real K_F=(80.+70.*GetUnitAbilityLevel(j5,1093750345))/5.
set hq[O5]=Bz+120.
if K2F then
call OV7(j5,"AlcheBrew")
if h4[O5]!=null then
set COE=KE7(j5,h4[O5])
endif
endif
loop
call TriggerSleepAction(.1)
if K2F then
if h4[O5]!=null then
if(not IsUnitInRange(j5,h4[O5],600.))then
exitwhen true
elseif(GetWidgetLife(h4[O5])<K_F*(Bz-K0F)*.7)then
exitwhen true
endif
else
set bj_lastLoadedUnit=j5
if MP7(600.,j5,Condition(function QP7))==0 then
exitwhen true
endif
endif
endif
exitwhen((not M87(j5))or(Bz>KD7))
endloop
call H7F(j5,j5)
if not TZ7(Player(O5))then
set j5=null
return
endif
if(M87(j5))then
set m5=h4[O5]
if(m5==null)or(not M87(m5))or(not IsUnitInRange(m5,j5,750.))or(IsUnitType(m5,UNIT_TYPE_MAGIC_IMMUNE))then
set m5=S07(775.,j5)
endif
loop
exitwhen(Bz>K5F)
if(m5==null)or(not M87(m5))or(not IsUnitInRange(m5,j5,750.))or(IsUnitType(m5,UNIT_TYPE_MAGIC_IMMUNE))then
set m5=S07(775.,j5)
endif
if m5!=null and((GetWidgetLife(m5)<K_F*((Bz-K0F)/5)*.7)or(Bz>KD7))and IssueTargetOrderById(j5,$D0278,m5)then
call WQE(O5,m5,false,false)
exitwhen true
endif
if m5==null and MA7==false and Bz+2.>=K5F then
call DPF(j5,true)
set MA7=true
endif
call TriggerSleepAction(.25)
endloop
endif
call OX7(j5,"AlcheBrew")
set j5=null
set m5=null
endfunction
function M4F takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer ID7=GetHandleId(t)
local unit it=LoadUnitHandle(L7,ID7,1397899609)
local integer O5=LoadInteger(L7,ID7,1397899609)
local real RP7
local boolean M7F=false
if GetTriggerEvalCount(t)>=$F then
call OZ7(t)
call FlushChildHashtable(L7,ID7)
else
if h4[O5]==null then
if h4[O5]==null then
endif
endif
set RP7=KE7(h4[O5],it)
if h4[O5]==null or(not IsUnitInRange(it,h4[O5],$578))or(((not K87(it,h4[O5],AsinBJ(.7*GetUnitMoveSpeed(h4[O5])/RP7)))and GetTriggerEvalCount(t)>$C)or GetUnitLifePercent(it)<20.)then
set M7F=IssueImmediateOrderById(it,$D00F9)
if M7F then
call OZ7(t)
call FlushChildHashtable(L7,ID7)
set it=null
set t=null
return false
endif
else
if not(K87(it,h4[O5],Asin(100/RP7)*bj_RADTODEG))then
set M7F=IssueTargetOrderById(it,$D0003,h4[O5])
endif
if RP7>950. then
call IssueImmediateOrderById(it,$D00D1)
elseif RP7<=300. then
call IssueImmediateOrderById(it,$D00D2)
endif
endif
endif
set it=null
set t=null
return false
endfunction
function M8F takes integer O5,unit j5 returns nothing
local trigger t=CreateTrigger()
local integer ID7=GetHandleId(t)
call HC7("SunRay")
call TriggerAddCondition(t,Condition(function M4F))
call TriggerRegisterTimerEvent(t,.4,true)
call SaveInteger(L7,ID7,1397899609,O5)
call SaveUnitHandle(L7,ID7,1397899609,j5)
set t=null
endfunction
function M9F takes nothing returns boolean
local unit j5=GetTriggerUnit()
local unit m5=GetOrderTargetUnit()
local integer i1=GetUnitTypeId(GetTriggerUnit())
local location b5=null
local boolean J4=false
if((i1==1162032181)and(GetUnitLifePercent(m5)<55.)and(not IsUnitInRange(j5,m5,250.))and(IsUnitInRange(j5,m5,700.))and(not Q77(m5))and(MP7(800.,m5,Condition(function QN7))<2)and(MP7(800.,m5,Condition(function QX7))==0)and(not IC(GetPlayerId(GetOwningPlayer(j5)))))then
set b5=kL(j5,m5,150.)
set J4=(b5!=null)and(IssuePointOrderByIdLoc(j5,$D00FA,b5))
elseif((i1==1164207469)and(GetUnitLifePercent(m5)<75.)and(not IsUnitInRange(j5,m5,250.))and(IsUnitInRange(j5,m5,800.))and(not Q77(m5))and(MP7(800.,m5,Condition(function QN7))<2)and(MP7(800.,m5,Condition(function QX7))==0)and(not IC(GetPlayerId(GetOwningPlayer(j5)))))then
set b5=kL(j5,m5,200.)
set J4=(b5!=null)and(IssuePointOrderByIdLoc(j5,$D022D,b5))
elseif(((i1==1429221441)or(i1==1165451634)or(i1==1212365106))and(GetUnitLifePercent(m5)<75.)and(not IsUnitInRange(j5,m5,250.))and(IsUnitInRange(j5,m5,700.))and(not Q77(m5))and(MP7(800.,m5,Condition(function QN7))<2)and(MP7(800.,m5,Condition(function QX7))==0)and(kJ(GetUnitX(m5),GetUnitY(m5)))and(not IC(GetPlayerId(GetOwningPlayer(j5)))))then
set J4=IssueTargetOrderById(j5,$D0278,m5)
elseif((i1==1328558154)and(not IsUnitInRange(m5,j5,700.))and(((MP7(900.,m5,Condition(function QN7))<=2)and(MR7(j5,ZU[J1]))or(MR7(j5,ZU[T2])))or((MP7(900.,m5,Condition(function QN7))<2)))and(GetUnitLifePercent(m5)<70.))then
set J4=M57(j5,$D0278,1093750840,m5)
elseif((i1==1429221446)and(GetUnitLifePercent(m5)<80.)and(not IsUnitInRange(j5,m5,300.)))then
set J4=(Bz>hq[16+GetPlayerId(GetOwningPlayer(j5))])and(WKE(j5,m5))
elseif((i1==1430466865)and(GetUnitAbilityLevel(j5,1110454357)==0)and((hq[416+GetPlayerId(GetOwningPlayer(j5))]>Bz)or(h4[GetPlayerId(GetOwningPlayer(j5))]==m5))and(not IsUnitInRange(j5,m5,200.)))then
set J4=M57(j5,$D0062,1093677879,j5)
endif
if((not J4)and(QD7(j5))and(MR7(j5,ZU[RW]))and(not IC(GetPlayerId(GetOwningPlayer(j5))))and(GetUnitLifePercent(m5)<50.)and(not IsUnitInRange(j5,m5,250.))and(IsUnitInRange(j5,m5,700.))and(MP7(800.,m5,Condition(function QN7))<2)and(MP7(800.,m5,Condition(function QX7))==0))then
set J4=KVF(j5,m5)
endif
set j5=null
set m5=null
set b5=null
return J4
endfunction
function MDF takes integer O5,unit j5,boolean MEF returns nothing
call DisableTrigger(Q04[O5])
call DisableTrigger(Q04[16+O5])
if(MEF)then
call PauseUnit(j5,true)
call IssueImmediateOrderById(j5,$D0004)
call PauseUnit(j5,false)
endif
set G0[272+O5]=true
call J3(j5,true)
set G0[272+O5]=false
call EnableTrigger(Q04[O5])
call EnableTrigger(Q04[16+O5])
endfunction
function MFF takes nothing returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
if O5==0 or O5==6 or O5>$B then
return false
endif
set eY[464+O5]=GetIssuedOrderId()
set h4[336+O5]=null
set eY[480+O5]=0
set eY[496+O5]=0
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER then
set h4[336+O5]=GetOrderTargetUnit()
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER then
set eY[480+O5]=R2I(GetOrderPointX())
set eY[496+O5]=R2I(GetOrderPointY())
endif
return false
endfunction
function MGF takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)and(not IsUnitIllusion(GetTriggerUnit()))and((GetIssuedOrderId()>$D0020)or(GetIssuedOrderId()==$D000F)))!=null
endfunction
function MHF takes nothing returns nothing
local unit j5=GetTriggerUnit()
local unit m5=null
local integer X5=GetIssuedOrderId()
local integer i1=GetUnitTypeId(j5)
local integer O5=GetPlayerId(GetOwningPlayer(j5))
local boolean MIF=false
local integer MJF
local boolean J4
if(GetTriggerEventId()==EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)then
set m5=GetOrderTargetUnit()
if(m5!=null)then
if(not M87(m5))then
call MDF(O5,j5,false)
set MIF=true
elseif((X5==$D009D)or(X5==$D024B)or(X5==$D0079)or(X5==$D00FA)or(X5==$D02AC))then
if((GetUnitAbilityLevel(m5,1113815395)>0)or(GetUnitAbilityLevel(m5,1113815346)>0))then
call MDF(O5,j5,false)
set MIF=true
endif
elseif((X5==$D0278)and(IsUnitEnemy(m5,GetOwningPlayer(j5)))and(Q77(m5)))then
call MDF(O5,j5,false)
set MIF=true
elseif((X5==$D000F)and(GetUnitAbilityLevel(m5,1110454854)>0))then
call MDF(O5,j5,false)
set MIF=true
endif
if((not MIF)and(X5>=$D0020))then
if((GetUnitAbilityLevel(j5,1110455126)>0)and(GetUnitManaPercent(j5)>40.)and((h4[O5]==null)or(IsUnitAlly(m5,GetOwningPlayer(j5)))or(not IsUnitType(m5,UNIT_TYPE_HERO))))then
call MDF(O5,j5,false)
set MIF=true
elseif((GetUnitAbilityLevel(j5,1110454607)>0)and(ME7(j5)))then
call MDF(O5,j5,false)
set MIF=true
endif
endif
if((not MIF)and(X5==$D000F)and(IsUnitType(m5,UNIT_TYPE_HERO))and(IsUnitEnemy(m5,GetOwningPlayer(j5))))then
call MoveLocation(HC[48+O5],GetUnitX(m5),GetUnitY(m5))
call DisableTrigger(Q04[O5])
set MIF=(GetHeroLevel(j5)>5)and(G0[$80+O5])and(GetUnitAbilityLevel(j5,1112045413)==0)and(M9F())
call EnableTrigger(Q04[O5])
endif
else
set MIF=true
endif
if((X5==$D000F)and(not MIF))then
set GZ[48+O5]=IsUnitType(m5,UNIT_TYPE_HERO)
set h4[80+O5]=m5
set MIF=true
endif
if(MIF)then
set m5=null
set j5=null
return
endif
call MoveLocation(HC[48+O5],GetUnitX(m5),GetUnitY(m5))
else
if((X5>=$D0028)and(X5<=$D002D))then
set MJF=GetItemTypeId(UnitItemInSlot(j5,X5-$D0028))
if((MJF==ZU[YC])or(MJF==ZU[XC])or(MJF==ZU[F6])or(MJF==ZU[FF6]))then
set MIF=true
endif
elseif(X5==$D000F)then
set MIF=true
set GZ[48+O5]=false
elseif(X5>=$D0020)then
if((GetUnitAbilityLevel(j5,1110455126)>0)and(GetUnitManaPercent(j5)>40.)and(h4[O5]==null))then
call MDF(O5,j5,false)
set MIF=true
elseif((GetUnitAbilityLevel(j5,1110454607)>0)and(ME7(j5)))then
call MDF(O5,j5,false)
set MIF=true
endif
endif
if(MIF)then
set m5=null
set j5=null
return
endif
call MoveLocation(HC[48+O5],GetOrderPointX(),GetOrderPointY())
endif
if((X5>=$D0028)and(X5<=$D002D))then
set X5=QE7(j5)
set J4=true
if((X5==ZU[RW])or(X5==ZU[F6])or(X5==ZU[FF6])or(X5==ZU[R06])or(X5==ZU[S6])or(X5==ZU[YC])or(X5==ZU[XC])or(X5==ZU[WC])or((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))))then
if((X5==ZU[Q1])and((not ME7(j5))or((UnitCountBuffsExBJ(bj_BUFF_POLARITY_NEGATIVE,bj_BUFF_RESIST_EITHER,m5,false,false)>0)))and(not i2(m5))and(GetUnitAbilityLevel(m5,1110454329)==0)and(GetUnitAbilityLevel(m5,1110454338)==0)and(GetUnitAbilityLevel(m5,1110454597)==0)and(GetUnitAbilityLevel(m5,1110454608)==0))then
set J4=false
elseif(QG7(X5))then
if((((i1!=1429221445)and(GetUnitLifePercent(m5)>50.))or(GetUnitLifePercent(m5)>75.))and(GetUnitAbilityLevel(m5,1110454606)==0)and(GetUnitAbilityLevel(m5,1110455624)==0))then
set J4=false
elseif((i1==1429221424)and(GetUnitAbilityLevel(j5,1110454347)>0))then
set J4=false
endif
elseif((X5==ZU[QC])and((GetUnitAbilityLevel(m5,1110454874)>0)or(m5!=j5)or(KE7(j5,NF7(j5))<4500.)or(MP7(1200.,m5,Condition(function k0))>0)))then
set J4=false
elseif((X5==ZU[RW])and(GetUnitAbilityLevel(j5,1110455863)>0))then
set J4=false
endif
elseif((X5==ZU[D1]or X5==ZU[E1])or(X5==ZU[J1]))then
if((GetOwningPlayer(m5)==Z7[0])or(GetOwningPlayer(m5)==A7[0]))then
set J4=false
elseif(GetOwningPlayer(m5)==Player($C))then
set X5=GetUnitTypeId(m5)
if((X5!=1852796263)and(X5!=1852207203)and(X5!=1853060200)and(X5!=1852010091))then
set J4=false
endif
else
set X5=GetUnitTypeId(m5)
if((X5==1966092339)or(X5==1966092341)or(X5==1966092345))then
set J4=false
endif
endif
else
set J4=false
endif
if not J4 then
call PauseUnit(j5,true)
call IssueImmediateOrderById(j5,$D0004)
call PauseUnit(j5,false)
call Q47(O5,j5,0)
endif
elseif((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))then
if((X5==$D008F)and((GetUnitAbilityLevel(j5,1110455126)>0)or((not IsUnitType(m5,UNIT_TYPE_HERO))and(not IsUnitType(m5,UNIT_TYPE_SUMMONED)))))then
call Q47(O5,j5,1093747028)
endif
elseif(i1==1160786506)then
if((X5==$D0079)and(not GZ[O5]))then
call Q47(O5,j5,1093751637)
endif
elseif(i1==1429221443)then
if((X5==$D0097)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093744948)
elseif(X5==$D0278)then
endif
elseif(i1==1162032951)then
if((X5==$D022F)and((not IsUnitType(m5,UNIT_TYPE_HERO))or((not ME7(j5))and((R2I(GetUnitState(m5,UNIT_STATE_LIFE))>(400*GetUnitAbilityLevel(j5,1093679152)))or(R2I(GetUnitState(m5,UNIT_STATE_LIFE))>(460*GetUnitAbilityLevel(j5,1093752154)))))))then
call J6(O5,j5,1093679152,1093752154)
endif
elseif(i1==1162032181)then
if((X5==$D02AC)and((not GZ[O5])or(MO7(380.,HC[48+O5],Condition(function QN7))==0)))then
call Q47(O5,j5,1093683761)
endif
elseif(i1==1429221424)then
if((X5==$D0118)and((not IsUnitType(m5,UNIT_TYPE_HERO))or((R2I(GetUnitState(j5,UNIT_STATE_MANA))<($C8+(50*GetUnitAbilityLevel(j5,1093679445))))and(not ME7(m5)))or(GetUnitState(m5,UNIT_STATE_MANA)<100.)or(GetUnitAbilityLevel(j5,1110454347)>0)))then
call Q47(O5,j5,1093748789)
elseif(X5==$D024B)then
if(((not GZ[O5])or(GetUnitAbilityLevel(j5,1110454347)>0)or(not IsUnitType(m5,UNIT_TYPE_HERO)))and((MO7(1500.,HC[48+O5],Condition(function QN7))>0)or(GetUnitManaPercent(j5)<60.)or(GetHeroLevel(j5)<6)))then
call Q47(O5,j5,1093687351)
endif
endif
elseif(i1==1432646245)then
if((X5==$D007F)and((not IsUnitType(m5,UNIT_TYPE_HERO))or((X67())and(GetUnitLifePercent(m5)>80.))))then
call Q47(O5,j5,1093677640)
elseif((X5==$D0269)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093679171)
endif
elseif(i1==1430466609)then
if((X5==$D009D)and(not IsUnitType(m5,UNIT_TYPE_HERO))and(MO7(600.,HC[48+O5],Condition(function k3))<6))then
call J6(O5,j5,1093810258,1093810259)
elseif((X5==$D022F)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093685559)
elseif(X5==$D022D)then
if(hq[512+O5]<Bz)then
set hq[512+O5]=Bz+1.
endif
endif
elseif(i1==1430468913)then
if((X5==$D00B5)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093677876)
endif
elseif(i1==1430467634)then
if((X5==$D0107)and((not IsUnitType(m5,UNIT_TYPE_HERO))or((R2I(GetUnitState(j5,UNIT_STATE_MANA))<($C8+(50*KIF(j5))))and(not i2(m5))and(not ME7(m5)))))then
call Q47(O5,j5,1093679412)
elseif((X5==$D0267)and((not IsUnitType(m5,UNIT_TYPE_HERO))or((not ME7(j5))and(R2I(GetUnitState(m5,UNIT_STATE_LIFE))>(350+(350*KIF(j5)))))))then
call J6(O5,j5,1093684565,1093681458)
elseif((X5==$D0278)and(GetUnitManaPercent(j5)<45.))then
call Q47(O5,j5,1093742674)
endif
elseif(i1==1313026096)then
if((X5==$D007F)and(not ME7(m5))and(not ME7(j5))and((GetUnitAbilityLevel(j5,1110455126)>0)or(not IsUnitType(m5,UNIT_TYPE_HERO))or(R2I(GetUnitState(j5,UNIT_STATE_MANA))<($FA+(50*GetUnitAbilityLevel(j5,1093677401))))))then
call Q47(O5,j5,1095267426)
endif
elseif((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))then
if((X5==$D00DD)and(IsUnitEnemy(m5,GetOwningPlayer(j5)))and((not IsUnitType(m5,UNIT_TYPE_HERO))or(GetUnitLifePercent(j5)+10.>GetUnitLifePercent(m5))))then
call Q47(O5,j5,1093678929)
elseif(X5==$D00DD)then
call RemoveGuardPosition(j5)
endif
elseif(i1==1164666213)then
if(X5==$D02B6)then
call Q47(O5,j5,1093678679)
elseif(X5==$D0097)then
call Q47(O5,j5,1093678678)
endif
elseif(i1==1433168227)then
if((X5==$D0062)and((GetUnitLifePercent(m5)<50.)or(GetUnitManaPercent(j5)>80.)))then
call Q47(O5,j5,1093678387)
elseif((X5==$D0103)and((not IsUnitType(m5,UNIT_TYPE_HERO))or(not GZ[O5])))then
call J6(O5,j5,1093678420,1093679176)
elseif((X5==$D0101)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093679186)
endif
elseif(i1==1429221430)then
if(X5==$D0100)then
call Q47(O5,j5,1093681735)
elseif(X5==$D0279)then
call Q47(O5,j5,1093681736)
endif
elseif(i1==1430466872)then
if((X5==$D0216)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093684558)
elseif((X5==$D0097)and((not IsUnitType(m5,UNIT_TYPE_HERO))or(not GZ[O5])))then
call J6(O5,j5,1093679413,1093679447)
elseif((X5==$D0207)and((IsUnitType(m5,UNIT_TYPE_HERO))or(GetUnitManaPercent(j5)>70.)))then
call Q47(O5,j5,1093677646)
endif
elseif(i1==1162032439)then
if((X5==$D02BD)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093744435)
endif
elseif(i1==1430466865)then
if((X5==$D0062)and(not kQ(j5))and((not IsUnitType(m5,UNIT_TYPE_HERO))or(GetUnitAbilityLevel(m5,1110454357)>0)or(MO7(800.,HC[48+O5],Condition(function k3))==0)or(R2I(GetUnitState(j5,UNIT_STATE_MANA))<($8C+(GetUnitAbilityLevel(j5,1093810508)*100)))))then
call Q47(O5,j5,1093677879)
elseif(X5==$D00FA)and(not GZ[O5])then
call Q47(O5,j5,1093751364)
endif
elseif(i1==1430468144)then
if((X5==$D00DD)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093679192)
endif
elseif(i1==1429221441)then
if((X5==$D0107)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093678389)
elseif(X5==$D0278)then
if(hq[512+O5]<Bz)then
set hq[512+O5]=Bz+1.
endif
endif
elseif(i1==1165451634)then
if((X5==$D02B6)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093687629)
elseif(X5==$D0278)then
if(hq[512+O5]<Bz)then
set hq[512+O5]=Bz+1.
endif
endif
elseif(i1==1215722344)then
if((X5==$D02BC)and(j5!=m5)and(not(JR7(GetUnitTypeId(m5),5))))then
call Q47(O5,j5,1093682499)
elseif((X5==$D0107)and((not IsUnitType(m5,UNIT_TYPE_HERO))or(not GZ[O5])))then
call Q47(O5,j5,1093684296)
endif
elseif(i1==1332766568)then
if((X5==$D0097)and((not IsUnitType(m5,UNIT_TYPE_HERO))or((R2I(GetUnitState(m5,UNIT_STATE_LIFE))>(175+(75*GetUnitAbilityLevel(j5,1093682482))))or(R2I(GetUnitState(m5,UNIT_STATE_LIFE))>(175+(125*GetUnitAbilityLevel(j5,1093750098)))))))then
call J6(O5,j5,1093682482,1093750098)
endif
elseif(i1==1328558154)then
if((X5==$D0278))then
set hq[O5]=Bz+41.
call J_7(1.)
endif
elseif(i1==1160786502)then
if(X5==$D0278)then
set UI4[O5]=true
endif
elseif(i1==1429221446)then
if((X5==$D0200)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call J6(O5,j5,1093682764,1093747544)
endif
elseif(i1==1429221445)then
if((X5==$D007F)and((not IsUnitType(m5,UNIT_TYPE_HERO))or(GetUnitLifePercent(m5)>60.)))then
call J6(O5,j5,1093678647,1093679184)
endif
elseif(i1==1332963428)then
if((X5==$D0103)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093678169)
elseif((X5==$D0097)and(not kQ(j5))and(GetUnitLifePercent(j5)>70.)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
if((GetUnitLifePercent(j5)>90.)or(MO7(1200.,HC[48+O5],Condition(function QN7))>0)or(GetUnitManaPercent(j5)<70.))then
call Q47(O5,j5,1093683019)
endif
elseif((X5==$D007F)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093816137)
elseif((X5==$D0200)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093677649)
endif
elseif(i1==1332109682)then
if((X5==$D02B6)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093678134)
endif
elseif(i1==1211117640)then
if((X5==$D02BD)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,'A2WJ')
elseif((X5==$D0207)and(((not IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(j5)>70.))or(not IsUnitInRange(j5,m5,500.))))then
call J6(O5,j5,1093681987,1093677658)
endif
elseif(i1==1430468406)then
if((X5==$D0270)and(MO7(250.,HC[48+O5],Condition(function QN7))==0))then
call Q47(O5,j5,kS(j5))
endif
elseif(i1==1160786241)then
if((X5==$D0097)and(not IsUnitType(m5,UNIT_TYPE_HERO))and(MO7(200.,HC[48+O5],Condition(function QN7))==0))then
if((MO7(1200.,HC[48+O5],Condition(function QN7))>0)or(GetHeroLevel(j5)<6)or(GetUnitManaPercent(j5)<70.))then
call Q47(O5,j5,1093684813)
endif
elseif((X5==$D0079)and(MO7(100.,HC[48+O5],Condition(function QN7))==0))then
call Q47(O5,j5,1093684815)
elseif((X5==$D0275)and(not IsUnitType(m5,UNIT_TYPE_HERO))and(MO7(400.,HC[48+O5],Condition(function QN7))==0))then
call J6(O5,j5,1093684820,1093684824)
endif
elseif(i1==1429221456)then
if((X5==$D0097)and(not GZ[O5])and((not IsUnitType(m5,UNIT_TYPE_HERO))or((not ME7(j5))and(not i2(m5)))))then
call Q47(O5,j5,1093685066)
elseif((X5==$D0079)and(GetUnitAbilityLevel(j5,1093685067)>0)and(MO7($FA+(100*GetUnitAbilityLevel(j5,1093685067)),HC[48+O5],Condition(function QN7))==0))then
call J6(O5,j5,1093685067,1093752407)
elseif((X5==$D0079)and(GetUnitAbilityLevel(j5,1093752407)>0)and(MO7(350+(100*GetUnitAbilityLevel(j5,1093685067)),HC[48+O5],Condition(function QN7))==0))then
call J6(O5,j5,1093685067,1093752407)
endif
elseif(i1==1160786243)then
if((X5==$D0079)and(not GZ[O5]))then
call Q47(O5,j5,1093678672)
elseif((X5==$D0100)and(not GZ[O5]))then
call Q47(O5,j5,1395667000)
endif
elseif((i1==1211117641)or(i1==1211117642))then
if(X5==$D0079)then
call Q47(O5,j5,1093684802)
endif
elseif(i1==1311781207)then
if((X5==$D007F)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093684817)
endif
elseif(i1==1311780946)then
if((X5==$D0208)and(not GZ[O5]))then
call Q47(O5,j5,1093685825)
elseif((X5==$D022E)and(not GZ[O5]))then
call Q47(O5,j5,1093810232)
endif
elseif(i1==1211117646)then
if((X5==$D0085)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093685815)
endif
elseif(i1==1160785973)then
if((X5==$D0107)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093678130)
endif
elseif(i1==1315988077)then
if((X5==$D0269)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1097032808)
endif
elseif(i1==1211117616)then
if((X5==$D0107)and((not IsUnitType(m5,UNIT_TYPE_HERO))or(R2I(GetUnitState(m5,UNIT_STATE_LIFE))>(40+(125*(GetUnitAbilityLevel(j5,1093816142)))))))then
call Q47(O5,j5,1093816142)
endif
elseif(i1==1315074670)then
if((X5==$D0270)and(MO7(250.,HC[48+O5],Condition(function QN7))==0))then
call Q47(O5,j5,1093685570)
endif
elseif((i1==1215063922)or(i1==1211117638)or(i1==1211117637)or(i1==1211117639))then
if((X5==$D007F)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093681490)
endif
elseif(i1==1164207469)then
if((X5==$D007F)and((not IsUnitType(m5,UNIT_TYPE_HERO))or((GetUnitManaPercent(m5)>15.)and(GetUnitState(m5,UNIT_STATE_LIFE)>((GetUnitState(m5,UNIT_STATE_MAX_MANA)-GetUnitState(m5,UNIT_STATE_MANA))*(.35+(I2R(GetUnitAbilityLevel(j5,1093682483))*.25)))))))then
call Q47(O5,j5,1093682483)
elseif(X5==$D022D)then
if(hq[512+O5]<Bz)then
set hq[512+O5]=Bz+1.
endif
endif
elseif(i1==1433631084)then
if((X5==$D007F)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093678160)
endif
elseif(i1==1214345830)then
if((X5==$D0101)and((not IsUnitType(m5,UNIT_TYPE_HERO))or((GetUnitLifePercent(m5)>80.)and(not GZ[64+O5]))))then
if((GetUnitLifePercent(m5)>95.)or(MO7(1500.,HC[48+O5],Condition(function QN7))>0)or(GetUnitManaPercent(j5)<70.))then
call Q47(O5,j5,1093679182)
endif
elseif((X5==$D00DA)and(not GZ[O5])and((GetUnitLifePercent(m5)>75.)or(not IsUnitType(m5,UNIT_TYPE_HERO))or(GetUnitState(m5,UNIT_STATE_LIFE)>GetUnitState(j5,UNIT_STATE_LIFE))))then
call Q47(O5,j5,1093679190)
endif
elseif((i1==1311781174)or(i1==1311781175)or(i1==1311911984)or(i1==1311911985)or(i1==1311781442))then
if(X5==$D00FA)then
call Q47(O5,j5,1093808461)
endif
elseif(i1==1315007329)then
if((X5==$D007F)and((not IsUnitType(m5,UNIT_TYPE_HERO))or(GetUnitManaPercent(j5)<40.)))then
call Q47(O5,j5,1093677108)
elseif((X5==$D00B5)and(GetUnitLifePercent(m5)>60.)and(not ME7(j5)))then
call Q47(O5,j5,1093681716)
endif
elseif(i1==1332898670)then
if((X5==$D0216)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093685848)
elseif((X5==$D0200)and((not IsUnitType(m5,UNIT_TYPE_HERO))or(not GZ[O5])))then
call Q47(O5,j5,1093677136)
elseif((X5==$D0218)and(not GZ[O5]))then
call J6(O5,j5,1093677128,1093681457)
endif
elseif(i1==1215723364)then
if((X5==$D007F)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093677633)
elseif((X5==$D026B)and((not GZ[O5])or(Q77(m5))))then
call J6(O5,j5,1093683534,1093747031)
endif
elseif(i1==1215128178)then
if((X5==$D00FA)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,'A2QB')
endif
elseif(i1==1164799855)then
if((X5==$D006B)and((GetOwningPlayer(m5)==Z7[0])or(GetOwningPlayer(m5)==A7[0])))then
call Q47(O5,j5,1093682264)
endif
elseif(i1==1433105516)then
if((X5==$D00DC)and(MO7(400.,HC[48+O5],Condition(function QN7))==0))then
call Q47(O5,j5,0)
endif
elseif((i1==1214409837)or(i1==1211119192)or(i1==1211119193)or(i1==1211119191))then
if((X5==$D02B6)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093742680)
elseif((X5==$D00D9)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093742898)
endif
elseif(i1==1316252014)then
if((X5==$D0269)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093678137)
endif
elseif(i1==1164799603)then
if((X5==$D00FA)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093808453)
elseif((X5==$D0097)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
if((MO7(1200.,HC[48+O5],Condition(function QN7))>0)or(GetUnitManaPercent(j5)<40.))then
call J6(O5,j5,1093752632,1093752633)
endif
endif
elseif(i1==1328558160)then
if((X5==$D00FA)and(not GZ[O5])and(not ME7(j5))and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093682766)
elseif((X5==$D0132)and(((IsUnitEnemy(m5,GetOwningPlayer(j5)))and(m5!=h4[O5]))or(GetUnitAbilityLevel(j5,1093683011)>0)))then
call Q47(O5,j5,1093683000)
endif
elseif(i1==1212363833)then
if((X5==$D007F)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call J7(O5,j5,1093809220)
endif
elseif(i1==1315070563)then
if((X5==$D0278)and(not ME7(j5))and((not IsUnitType(m5,UNIT_TYPE_HERO))or((MO7(600.,HC[48+O5],Condition(function QN7))*2)<MO7(600.,HC[48+O5],Condition(function k3)))))then
call J6(O5,j5,1093684529,1093747032)
endif
elseif(i1==1214931305)then
if((X5==$D00CB)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093678147)
endif
elseif(i1==1212365106)then
if((X5==$D0079)and(not GZ[64+O5])and(MO7($C8+(50*GetUnitAbilityLevel(j5,1093685831)),HC[48+O5],Condition(function QN7))==0))then
if((GetUnitManaPercent(j5)<70.)or(GetHeroLevel(j5)<6)or(MO7(1500.,HC[48+O5],Condition(function QN7))>0))then
call Q47(O5,j5,1093685831)
endif
elseif(X5==$D0278)then
if(hq[512+O5]<Bz)then
set hq[512+O5]=Bz+1.
endif
endif
elseif(i1==1211117617)or(i1==1211122513)then
if((X5==$D02B6)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093744944)
endif
elseif(i1==1211117633)then
if((X5==$D007F)and((GetOwningPlayer(m5)==Z7[0])or(GetOwningPlayer(m5)==A7[0])or((IsUnitAlly(m5,GetOwningPlayer(j5)))and(IsUnitType(m5,UNIT_TYPE_HERO)))))then
call Q47(O5,j5,1093684310)
elseif((X5==$D00A3)and((GetOwningPlayer(m5)==Z7[0])or(GetOwningPlayer(m5)==A7[0])))then
if((GetHeroLevel(j5)<20)or(IH(GetOwningPlayer(j5),Condition(function WY9))>0))then
call Q47(O5,j5,1093810260)
endif
elseif((X5==$D0269)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093684045)
endif
elseif(i1==1211117620)then
if((X5==$D0108)and(not GZ[64+O5])and(MO7(150.,HC[48+O5],Condition(function QN7))==0))then
call Q47(O5,j5,1093677623)
elseif((X5==$D0097)and((not IsUnitType(m5,UNIT_TYPE_HERO))or(GetUnitLifePercent(m5)>80.)))then
call J6(O5,j5,1093677392,1093679450)
endif
elseif(i1==1333027688)then
if((X5==$D0278)and((m5==null)or(not IsUnitType(m5,UNIT_TYPE_HERO)))and(MO7(200.,HC[48+O5],Condition(function QN7))==0))then
if((MO7(1500.,HC[48+O5],Condition(function QN7))>0)or(GetHeroLevel(j5)<6)or(GetUnitManaPercent(j5)<70.))then
call Q47(O5,j5,1093686091)
endif
endif
elseif(i1==1211117643)then
if(X5==$D0136)then
call Q47(O5,j5,1093678410)
elseif(X5==$D0092)then
call Q47(O5,j5,1093678664)
elseif(X5==$D0048)then
call Q47(O5,j5,1093678658)
elseif(X5==$D0218)then
call J6(O5,j5,1093681483,1093748313)
elseif(X5==$D0097)then
call Q47(O5,j5,1093752646)
endif
elseif(i1==1215130471)then
if((X5==$D007F)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,QI7(j5))
elseif((X5==$D0278)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093815121)
elseif((X5==$D0085)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,QK7(j5))
endif
elseif(i1==1332179560)then
if((X5==$D02B6)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093742660)
endif
elseif(i1==1214344551)then
if((X5==$D007F)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093809742)
endif
elseif(i1==1211117636)then
if((X5==$D00FA)and(not GZ[O5])and((GetUnitManaPercent(j5)<30.)or(IsUnitInRangeLoc(j5,HC[48+O5],600.)))and((m5==null)or(not IsUnitType(m5,UNIT_TYPE_HERO))))then
call Q47(O5,j5,1093685041)
elseif((X5==$D007F)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call J6(O5,j5,1093685042,1093810233)
endif
elseif(i1==1160786000)then
if((X5==$D00FA)and((GetUnitManaPercent(j5)<60.)or(GetHeroLevel(j5)<6))and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093685047)
elseif((X5==$D0264)and(not IsUnitType(m5,UNIT_TYPE_HERO))and(MO7(200.,HC[48+O5],Condition(function QN7))==0))then
call Q47(O5,j5,1093685046)
elseif((X5==$D009D)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093685045)
endif
elseif((i1==1311781193)or(i1==1311781192)or(i1==1311781204)or(i1==1311781194))then
if((X5==$D0079)and(GetUnitManaPercent(j5)<40.)and((m5==null)or(not IsUnitType(m5,UNIT_TYPE_HERO))))then
call Q47(O5,j5,1093683532)
endif
elseif(i1==1211117651)then
if((X5==$D00FA))then
call Q47(O5,j5,1093743695)
elseif((X5==$D0097))then
call Q47(O5,j5,1093743698)
endif
elseif(i1==1311780930)then
if((X5==$D0079)and(not GZ[O5]))then
call J6(O5,j5,1093686072,1093751120)
endif
elseif(((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517)))then
if((X5==$D0097)and(not GZ[O5]))then
call Q47(O5,j5,1093815130)
endif
elseif((i1==1211117650)or(i1==1211119433))then
if(X5==$D0079)then
call Q47(O5,j5,1093743955)
endif
elseif(i1==1211119187)then
if(X5==$D0079)then
call Q47(O5,j5,1093743414)
elseif(X5==$D02B6)then
call Q47(O5,j5,1093742923)
endif
elseif(i1==1311786311)then
if(X5==$D0097)then
call Q47(O5,j5,1093743178)
endif
elseif(i1==1328558390)then
if(X5==$D0079)then
call Q47(O5,j5,1093748044)
elseif(X5==$D0097)then
call Q47(O5,j5,1093744975)
elseif(X5==$D00FA)then
call Q47(O5,j5,1093744982)
endif
elseif(i1==1160786510)then
if(X5==$D0097)then
call Q47(O5,j5,1093751633)
elseif(X5==$D0079)then
call J6(O5,j5,1093751861,1093808949)
endif
elseif(i1==1160786504)then
if(X5==$D0097)then
call Q47(O5,j5,1093751608)
elseif(X5==$D0079)then
call Q47(O5,j5,1093751618)
elseif(X5==$D008F)then
call Q47(O5,j5,1093751617)
endif
elseif(i1==1328558406)then
if(X5==$D0097)then
call Q47(O5,j5,1093751873)
endif
elseif(i1==1160786520)then
if((X5==$D00D8)and((GetUnitManaPercent(j5)<60.)or(GetHeroLevel(j5)<6))and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call Q47(O5,j5,1093809991)
elseif((X5==$D00F6)and(not IsUnitType(m5,UNIT_TYPE_HERO))and(MO7(200.,HC[48+O5],Condition(function QN7))==0))then
call Q47(O5,j5,1093809990)
endif
elseif(i1==1311781185)then
if(X5==$D0079)then
call Q47(O5,j5,1093743692)
endif
elseif(i1==1311788336)then
if(X5==$D0079)then
call Q47(O5,j5,1093814320)
endif
elseif(i1==1160786507)then
if(X5==$D0079)then
call Q47(O5,j5,1093814850)
endif
elseif(i1==1211122767)then
if(X5==$D0097)then
call Q47(O5,j5,1093812805)
elseif(X5==$D02BC)then
call Q47(O5,j5,1093814350)
endif
endif
set j5=null
set m5=null
endfunction
function MKF takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(not IsUnitIllusion(GetTriggerUnit()))and(GetIssuedOrderId()>$D0020))!=null
endfunction
function MMF takes nothing returns nothing
local integer i=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
if(GetTriggerEventId()==EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)then
call MoveLocation(HC[i],GetUnitX(GetOrderTargetUnit()),GetUnitY(GetOrderTargetUnit()))
set i=GetIssuedOrderId()-$D0028
if((i>=0)and(i<6)and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_NONE)and(QY4[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]))then
set i=GetItemTypeId(UnitItemInSlot(GetTriggerUnit(),i))
if((i==ZU[Q1])or(i==ZU[D1])or(i==ZU[E1])or(i==ZU[F1])or(i==ZU[H1]))then
call IssueTargetOrderById(GetTriggerUnit(),$D000F,GetOrderTargetUnit())
endif
endif
else
call MoveLocation(HC[i],GetOrderPointX(),GetOrderPointY())
endif
endfunction
function MNF takes nothing returns nothing
local unit j5=GetTriggerUnit()
local integer X5=GetIssuedOrderId()
local integer i1=GetUnitTypeId(j5)
local integer O5=GetPlayerId(GetOwningPlayer(j5))
if((X5>=$D0020)and(X5<$D07F0))then
if((GetUnitAbilityLevel(j5,1110454607)>0)and(ME7(j5)))then
call J3(j5,true)
set j5=null
return
endif
endif
call MoveLocation(HC[48+O5],GetUnitX(j5),GetUnitY(j5))
if((X5>=$D0028)and(X5<=$D002D))then
set X5=QE7(j5)
if((X5==ZU[P1])and(Bz>hq[64+O5])and(not GZ[$E0+O5]))then
call MDF(O5,j5,true)
elseif((X5==ZU[D44])and((Bz+20.)>hq[O5])and(Bz>hq[48+O5]))then
call MDF(O5,j5,true)
elseif((X5==ZU[T1])and(not GZ[64+O5])and((OO7(GetHandleId(j5),"Mekansm"))or(GetUnitLifePercent(j5)>80.)))then
call MDF(O5,j5,true)
elseif((X5==ZU[DP4])and(MO7(900.,HC[48+O5],Condition(function QN7))==0))then
call MDF(O5,j5,true)
elseif((X5==ZU[AL])and(TB4==false))then
call MDF(O5,j5,true)
elseif((X5==ZU[DT4]or X5==ZU[ZA])and(GetUnitState(j5,UNIT_STATE_LIFE)>$96)and(GetItemCharges(UnitItemInSlot(j5,GetIssuedOrderId()-$D0028))<8))then
call MDF(O5,j5,true)
elseif((X5==ZU[B3])and(not GZ[64+O5])and((GetUnitAbilityLevel(j5,1113875814)>0)or(GetUnitManaPercent(j5)<75.)or(GetHeroLevel(j5)<3)))then
call MDF(O5,j5,true)
elseif((MW7(X5))and(not GZ[$E0+O5])and(G0[$80+O5]))then
call MDF(O5,j5,true)
elseif(((X5==ZU[R5])or(X5==ZU[S5])or(X5==ZU[T5])or(X5==ZU[Y0])))then
if((i1==1429221424)and(GetUnitAbilityLevel(j5,1110454347)>0))then
call MDF(O5,j5,true)
elseif((not GZ[$E0+O5])and(GetHeroLevel(j5)<$D)and(iy(j5))and(eY[O5]==1)and(not G0[32+O5]))then
call MDF(O5,j5,true)
endif
elseif((X5==ZU[DV4])and((TC4==false)and(h4[O5]==null)))then
call MDF(O5,j5,true)
endif
elseif(i1==1160785970)then
if((X5==$D022E)and((not GZ[O5])or(MO7(789.,HC[48+O5],Condition(function QN7))==0)))then
call J7(O5,j5,1093748023)
endif
elseif(i1==1429221443)then
if((X5==$D0131)and(MO7(800.,HC[48+O5],Condition(function QN7))==0))then
call J7(O5,j5,1093686322)
endif
elseif(i1==1162032951)then
if((X5==$D0084)and((not GZ[O5])or(GetUnitLifePercent(j5)<50.))and((MO7(1500.,HC[48+O5],Condition(function QN7))>0)or(GetUnitManaPercent(j5)<70.)or(GetUnitLifePercent(j5)<80.)))then
call J7(O5,j5,1093678404)
endif
elseif(i1==1429221424)then
if((X5==$D00A1)and(not GZ[O5]))then
call J7(O5,j5,1093679445)
elseif(X5==$D022E)then
call J7(O5,j5,1093815119)
endif
elseif(i1==1430468913)then
if((X5==$D0084)and(not GZ[O5]))then
call J7(O5,j5,1093678403)
elseif(X5==$D00C4)then
call J7(O5,j5,1093810507)
endif
elseif(i1==1164277353)then
if((X5==$D02B7)and(not GZ[O5]))then
call J7(O5,j5,1093751369)
endif
elseif(i1==1164666213)then
if(X5==$D0084)then
call J6(O5,j5,1093808454,1093808455)
call J7(O5,j5,1093808456)
elseif(X5==$D022E)then
call J7(O5,j5,1093677877)
endif
elseif(i1==1429221430)then
if((X5==$D00C4)and(not ME7(j5))and(MO7(400.,HC[48+O5],Condition(function QN7))==0))then
call J7(O5,j5,1093687121)
endif
elseif(i1==1162032439)then
if((X5==$D0272)and(not GZ[O5]))then
call J7(O5,j5,1093681462)
call SetPlayerAbilityAvailable(GetOwningPlayer(j5),1093677363,false)
endif
elseif(i1==1430466865)then
if((X5==$D009F)and(MO7(420.,HC[48+O5],Condition(function QN7))==0))then
call J7(O5,j5,1093810508)
endif
elseif((i1==1429221432)or(i1==1160786229))then
if((X5==$D009E)and(GetUnitManaPercent(j5)<65.)and(MO7(500.,HC[48+O5],Condition(function QN7))==0))then
call J7(O5,j5,1093677892)
elseif((X5==$D00D4)and(MO7(800.,HC[48+O5],Condition(function QN7))==0))then
call J7(O5,j5,1093679411)
endif
elseif(i1==1429221441)then
if((X5==$D009B)and(MO7(350.,HC[48+O5],Condition(function QN7))==0))then
call J7(O5,j5,1093677903)
endif
elseif(i1==1315334514)then
if((X5==$D00C4)and(not KRF(j5,200.,Condition(function k3))))then
call J7(O5,j5,1093682521)
elseif((X5==$D026C)and(not KRF(j5,450.,Condition(function k3))))then
call J7(O5,j5,1093682760)
elseif((X5==$D0277)and(not KRF(j5,700.,Condition(function k3))))then
call J7(O5,j5,1093682736)
elseif((X5==$D0131)and(MO7(350.,HC[48+O5],Condition(function QN7))==0))then
call J7(O5,j5,1093810506)
endif
elseif(i1==1429221446)then
if((X5==$D00D1)and(((GetUnitLifePercent(j5)<50.)or(MO7(300.,HC[48+O5],Condition(function k3))==0)))and(not kQ(j5)))then
call J7(O5,j5,1093678667)
endif
elseif(i1==1332109682)then
if((X5==$D026C)and(MO7(650.,HC[48+O5],Condition(function QN7))==0))then
call J7(O5,j5,1093810505)
endif
elseif(i1==1211117640)then
if((X5==$D0272)and(not GZ[O5]))then
call J7(O5,j5,1093679428)
endif
elseif(i1==1315988077)then
if((X5==$D026A)and(MO7(800.,HC[48+O5],Condition(function QN7))==0)and(not GZ[O5]))then
call J7(O5,j5,1093684561)
endif
elseif((i1==1215063922)or(i1==1211117638)or(i1==1211117637)or(i1==1211117639))then
if((X5==$D02B7)and(MO7(800.,HC[48+O5],Condition(function QN7))==0))then
call J7(O5,j5,1093677895)
endif
elseif((i1==1311781174)or(i1==1311781175)or(i1==1311911984)or(i1==1311911985)or(i1==1311781442))then
if((X5==$D022E)and(not GZ[O5]))then
call J7(O5,j5,1093748042)
endif
if((X5==$D0080)and((h4[O5]==null)or(not IsUnitInRange(j5,h4[O5],400.))))then
call J7(O5,j5,1093808462)
endif
if(X5==$D00AA or X5==$D00AB)then
call J7(O5,j5,1093681733)
endif
elseif(i1==1215723364)then
if((X5==$D02BD)and(GetUnitManaPercent(j5)<60.)and(not GZ[64+O5]))then
call J7(O5,j5,1093744463)
endif
elseif(i1==1215128178)then
if((X5==$D00C4)and(not GZ[O5]))then
call J7(O5,j5,1093810503)
call SetPlayerAbilityAvailable(GetOwningPlayer(j5),1093810504,false)
endif
elseif(i1==1164799855)then
if((X5==$D024C)and(GetUnitLifePercent(j5)>80.)and(not GZ[64+O5]))then
call J7(O5,j5,1093677378)
endif
elseif((i1==1214409837)or(i1==1211119192)or(i1==1211119193)or(i1==1211119191))then
if((X5==$D00D4))then
call J7(O5,j5,1093742932)
endif
elseif(i1==1212363833)then
if((X5==$D009B)and(MO7(600.,HC[48+O5],Condition(function QN7))==0)and(GetUnitManaPercent(j5)<70.))then
call J7(O5,j5,1093678643)
elseif(X5==$D022E)then
call J7(O5,j5,1093815125)
endif
elseif(i1==1315070563)then
if((X5==$D00A0)and((OT7(j5,"Omnislashing"))or((GZ[O5])or((GetUnitManaPercent(j5)<70.)and(MO7(600.,HC[48+O5],Condition(function QN7))==0)))))then
call J7(O5,j5,1093678407)
endif
elseif(i1==1211117617)then
if((X5==$D02B7)and(MO7(400.,HC[48+O5],Condition(function QN7))==0))then
call J7(O5,j5,1093752648)
endif
elseif(i1==1211117620)then
if((X5==$D00C4)and((GetUnitAbilityLevel(j5,1110454324)>0)or(GetUnitManaPercent(j5)<60.)or(MO7(800.,HC[48+O5],Condition(function k3))==0)))then
call J7(O5,j5,1093677105)
endif
elseif(i1==1333027688)then
if((X5==$D00C4)and(MO7(200.,HC[48+O5],Condition(function k2))==0))then
call J7(O5,j5,1093682252)
elseif((X5==$D022E)and((MO7(400.,HC[48+O5],Condition(function QN7))==0)or(MO7(500.,HC[48+O5],Condition(function k3))<5)))then
call J7(O5,j5,1093682248)
call SetPlayerAbilityAvailable(GetOwningPlayer(j5),1093750594,true)
endif
elseif(i1==1215657064)then
if((X5==$D0278)and(MO7(500.,HC[48+O5],Condition(function QN7))==0))then
call J7(O5,j5,1093750841)
endif
elseif((i1==1311781199)or(i1==1311781171)or(i1==1311781172)or(i1==1311781173))then
if(X5==$D00AA or X5==$D00AB)then
call J7(O5,j5,1093681479)
endif
elseif(i1==1311781193)then
if((X5==$D02B7)and(GetUnitLifePercent(j5)>70.)and(GetUnitManaPercent(j5)<40.)and(MO7(500.,HC[48+O5],Condition(function QN7))==0))then
call J7(O5,j5,1095656306)
endif
elseif(i1==1311781206)then
if((X5==$D00A1)and(not GZ[O5]))then
call J7(O5,j5,1093684302)
endif
elseif(i1==1211117651)then
if((X5==$D022E)and(not GZ[O5]))then
call J7(O5,j5,1093743696)
endif
elseif(i1==1313157191)then
if((X5==$D022E))then
call J7(O5,j5,1093743689)
endif
elseif((i1==1211117650)or(i1==1211119433))then
if(X5==$D00D4)then
call Q47(O5,j5,1093743946)
elseif(X5==$D02B6)then
call Q47(O5,j5,1093743958)
endif
elseif(i1==1328558390)then
if(X5==$D00D4)then
call Q47(O5,j5,1093744986)
endif
elseif(i1==1160786510)then
if(X5==$D0278)then
call Q47(O5,j5,1093751631)
elseif(X5==$D022E)then
call Q47(O5,j5,1093808697)
endif
elseif(i1==1328558406)then
if(X5==$D022E)then
call Q47(O5,j5,1093751864)
elseif(X5==$D026D)and(not GZ[O5])then
call Q47(O5,j5,1093810257)
endif
elseif(i1==1211119409 or i1=='H0EV')then
if X5==$D00A1 then
call Q47(O5,j5,1093749070)
endif
elseif(i1==1311780930)then
if X5==$D0222 and(not ME7(j5))then
call Q47(O5,j5,1093686082)
endif
elseif((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))then
if X5==$D00AA or X5==$D00AB then
call Q47(O5,j5,1093747504)
endif
endif
set j5=null
endfunction
function MOF takes nothing returns nothing
local unit x6=GetTriggerUnit()
local integer Iz=GetItemTypeId(GetManipulatedItem())
local integer i1=GetUnitTypeId(x6)
local integer O5=GetPlayerId(GetOwningPlayer(x6))
local unit m5=null
local boolean J4=false
if(Iz==ZU[TC])then
set hq[256+O5]=Bz+25.
call jW(x6,$D0012,h9[O5])
if(ME7(x6))then
set G0[32+O5]=true
loop
exitwhen((GetUnitLifePercent(x6)>50.)or(Bz>hq[256+O5]))
if(MP7(1000.,x6,Condition(function QN7))>0)then
call jW(x6,$D0012,h9[O5])
else
call IssueImmediateOrderById(x6,$D0019)
endif
call J_7(1.)
endloop
set G0[32+O5]=false
call J3(x6,true)
endif
elseif(Iz==ZU[QC])then
call J_7(.5)
set G0[32+O5]=true
loop
exitwhen((GetUnitAbilityLevel(x6,1110454874)==0)or(GetUnitLifePercent(x6)>95.))
if(not K57(x6))then
elseif(MP7(1500.,x6,Condition(function k2))>0)then
call jW(x6,$D0012,h9[O5])
else
call IssueImmediateOrderById(x6,$D0019)
endif
call J_7(.5)
endloop
set G0[32+O5]=false
call J3(x6,true)
elseif(Iz==ZU[D44])then
set hq[O5]=Bz
set hq[48+O5]=Bz+160.
elseif(Iz==ZU[P1])then
set hq[64+O5]=Bz+30.
call J_7(.1)
set m5=h4[O5]
set J4=(m5!=null)and(not ME7(x6))and(IssueTargetOrderById(x6,$D000F,m5))
elseif(Iz==ZU[RW])then
set m5=null
set hq[512+O5]=Bz+3.
set hq[112+O5]=Bz+25.
call TriggerSleepAction(.01)
if(not ME7(x6))then
if(i1==1430466865)then
set m5=S17(350.,x6)
set J4=(m5!=null)and((((MP7(400.,x6,Condition(function k6))>1 and GZ[$D0+O5])or ME7(m5))and(N97(x6,$D00C4,1093810508)))or(M57(x6,$D009D,1093677651,m5)))
elseif(i1==1162032439)then
set GZ[O5]=true
set J4=J8(O5,(((h4[16+O5]!=null)and(IsUnitInRange(x6,h4[16+O5],350.)))or(MP7(600.,x6,Condition(function QN7))>1))and(N97(x6,$D0272,1093677363)))
elseif(i1==1160785973)then
if(MZ7(x6,ZU[D0]))then
set J4=(((h4[16+O5]!=null)and(IsUnitInRange(x6,h4[16+O5],350.)))or(MP7(400.,x6,Condition(function QN7))>1))and(MC7(x6,ZU[D0]))and(IssueImmediateOrderById(x6,$D0278))
if(not(J4))then
set J4=(((h4[16+O5]!=null)and(IsUnitInRange(x6,h4[16+O5],350.)))or(MP7(400.,x6,Condition(function QN7))>1))and(IssueImmediateOrderById(x6,$D0278))
endif
else
set J4=(((h4[16+O5]!=null)and(IsUnitInRange(x6,h4[16+O5],350.)))or(MP7(400.,x6,Condition(function QN7))>1))and(IssueImmediateOrderById(x6,$D0278))
endif
elseif(i1==1315988077)then
set m5=S17(220.,x6)
set J4=(m5!=null)and(N97(x6,$D0080,1093678669))
elseif(i1==1211117616)then
set m5=S17(220.,x6)
set J4=(m5!=null)and(N97(x6,$D009F,1093677139))
elseif(i1==1430468406)then
set J4=(((h4[16+O5]!=null)and(IsUnitInRange(x6,h4[16+O5],350.)))or(MP7(500.,x6,Condition(function QN7))>1))and(IssueImmediateOrderById(x6,$D024C))
elseif(i1==1214931305)then
set J4=(((h4[16+O5]!=null)and(IsUnitInRange(x6,h4[16+O5],350.)))or(MP7(400.,x6,Condition(function QN7))>1))and(((GetUnitState(x6,UNIT_STATE_MANA)>hq[272+O5]+50.)and(MC7(x6,ZU[D0])))or(M57(x6,$D00CB,1093678147,h4[16+O5]))or(IssueImmediateOrderById(x6,$D0278)))
elseif(i1==1432580716 or i1==1429221720)then
set m5=S17(300.,x6)
set J4=(m5!=null)and(M57(x6,$D0079,1093684300,m5))
elseif(i1==1333027688)then
set m5=S17(300.,x6)
set J4=(m5!=null)and(((MP7(500.,x6,Condition(function k0))>5)and(N97(x6,$D022E,1093682248)or N97(x6,$D022E,1093750594)))or(N97(x6,$D00C4,1093682252)))
elseif(i1==1332766568)then
set m5=S17(250.,x6)
set J4=(m5!=null)and(IssueImmediateOrderById(x6,$D0278))
elseif(i1==1315334514)then
set m5=S17(220.,x6)
set J4=(m5!=null)and(N97(x6,$D009F,1093682521))
if(not J4)then
set m5=S17(600.,x6)
set J4=(m5!=null)and(Bz>T34[O5])and(G0[256+O5])and(N97(x6,$D0131,1093810506))
endif
elseif(i1==1215657064)then
set m5=S17(220.,x6)
set J4=(m5!=null)and(N97(x6,$D0080,1093677913))
elseif(i1==1160786243)then
set m5=S17(300.,x6)
if((m5!=null)and(MP7(700.,m5,Condition(function k5))>1))then
set GZ[O5]=true
set J4=J8(O5,M57(x6,$D0079,1093678672,m5))
endif
elseif(i1==1332109682)then
set m5=S17(350.,x6)
set J4=(m5!=null)and(((MP7(500.,x6,Condition(function k0))>4)and(N97(x6,$D026C,1093810505)))or(M57(x6,$D02B6,1093678134,m5)))
elseif((i1==1311781193)or(i1==1311781192)or(i1==1311781204)or(i1==1311781194))then
set m5=S17(300.,x6)
set J4=(m5!=null)and(M57(x6,$D0079,1093683532,m5))
elseif(i1==1430468913)then
set m5=S17(300.,x6)
set J4=(m5!=null)and(N97(x6,$D009F,1093810507))
endif
if((not J4)and(m5!=null))then
call IssueTargetOrderById(x6,$D000F,m5)
endif
endif
elseif(Iz==ZU[D74])then
set hq[96+O5]=Bz+13.
elseif(Iz==ZU[DR4]or Iz==ZU[R7t])then
set T34[$F0+O5]=Bz+18.
elseif(Iz==ZU[DP4])then
set T34[$B0+O5]=Bz+30.
elseif(Iz==ZU[DY4])then
set T34[$E0+O5]=Bz+10.
elseif(Iz==ZU[VB])then
set T34[256+O5]=Bz+30.
elseif(Iz==ZU[DT4])or(Iz==ZU[ZA])then
set T34[$C0+O5]=Bz+17.
elseif(Iz==ZU[E24])then
set T34[$D0+O5]=Bz+30.
call J_7(1.1)
set m5=h4[O5]
if(i1==1328558160)then
set J4=(m5!=null)and(IssueTargetOrderById(x6,$D02B6,m5))
endif
elseif(Iz==ZU[AL])then
set TB4=false
elseif(Iz==ZU[T1])then
set hq[80+O5]=Bz+45.
elseif(Iz==ZU[F74])then
set hq[$80+O5]=Bz+30.
elseif(Iz==ZU[S6])then
set hq[$90+O5]=Bz+100.
elseif((Iz==ZU[YC])or(Iz==ZU[XC])or(Iz==ZU[F6])or(Iz==ZU[FF6]))then
set Iz=GetUnitCurrentOrder(x6)
call SetPlayerController(GetOwningPlayer(x6),MAP_CONTROL_NONE)
loop
exitwhen(Iz!=GetUnitCurrentOrder(x6))
call J_7(.1)
endloop
call J_7(.1)
call SetPlayerController(GetOwningPlayer(x6),MAP_CONTROL_COMPUTER)
call J_7(.5)
call J3(x6,true)
if(KE7(x6,NF7(x6))<1500.)then
set h9[O5]=NF7(x6)
call PW7(x6,true)
else
call UQ7(x6)
endif
elseif(Iz==ZU[C0])or(Iz==ZU[RLL])then
if(GZ[272+O5])then
call J_7(.01)
if((i1==1315334514)or(i1==1162032439))then
call ExecuteFunc("JGF")
elseif((i1==1315074670)or(i1==1162032951))then
call ExecuteFunc("JHF")
endif
endif
elseif((Iz==ZU[Y0])or(Iz==ZU[B0]))then
if(not ME7(x6))then
call TriggerSleepAction(1.5)
if(i1==1212363833)then
set m5=S17(400.,x6)
set J4=(m5!=null)and(M57(x6,$D007F,1093809220,m5))
elseif(i1==1429221441)then
set m5=S17(400.,x6)
set J4=(m5!=null)and(M57(x6,$D0107,1093678389,m5))
elseif(i1==1211117653)then
set m5=S17(400.,x6)
set J4=(m5!=null)and((Bz>T34[64+O5])and UG7(x6,A_4,A_4,A54,1093686863)and(IssueImmediateOrderById(x6,$D00A4)))
if((not J4)and(m5!=null)and(Bz>T34[64+O5]))then
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),BS[7],true)
set J4=IssueImmediateOrderById(x6,$D00A4)
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),BS[7],false)
endif
elseif(i1==1160786242)then
set m5=S17(400.,x6)
set J4=(m5!=null)and(IssueTargetOrderById(x6,$D02B6,m5))
elseif(i1==1332963428)then
set m5=S17(400.,x6)
set J4=(m5!=null)and(GetUnitState(x6,UNIT_STATE_MANA)>hq[272+O5])and(M57(x6,$D0200,1093677649,m5))
elseif(i1==1429221424)then
set m5=S17(400.,x6)
set J4=(m5!=null)and(M57(x6,$D024B,1093687351,m5))
endif
endif
endif
set x6=null
set m5=null
endfunction
function MPF takes integer J3F,integer PY7 returns integer
if J3F==eY[$AC+PY7]or J3F==eY[$BC+PY7]then
return $A
elseif GetUnitTypeId(M7[PY7])==1211117653 then
return 5
elseif GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER and(J3F==1093677391 or J3F==1093677633 or J3F==1093682264 or J3F==1093678147 or J3F==1093744944 or J3F==1093809220 or J3F==1093686091 or J3F==1093685831 or J3F==1093677623 or J3F==1093678135 or J3F==1093677378 or J3F==1093683511 or J3F==1093742680 or J3F==1093678167 or J3F==1093677361 or J3F==1093678137 or J3F==1093678405 or J3F==1093808453 or J3F==1093742660 or J3F==1093684300 or J3F==1093684045 or J3F==1093685848 or J3F==1093677136 or J3F==1093678669 or J3F==1093677139 or J3F==1093678913 or J3F==1093681490 or J3F==1093685570 or J3F==1093679182 or J3F==1093679190 or J3F==1093685071 or J3F==1093685046 or J3F==1093750345 or J3F==1093684280 or J3F==1093743698 or J3F==1093685584 or J3F==1093748033 or J3F==1093686083 or J3F==1093743414 or J3F==1093743178 or J3F==1093743689 or J3F==1093678679 or J3F==1093685302 or J3F==1093687349 or J3F==1093684558 or J3F==1093744435 or J3F==1093679192 or J3F==1093678389 or J3F==1093677892 or J3F==1093677640 or(J3F==1093679173 and X67()==false)or J3F==1095267426 or J3F==1093687351 or J3F==1093810507 or J3F==1093744948 or J3F=='A2WJ' or J3F==1093678134 or J3F==1093683019 or J3F==1093678169 or J3F==1093678422 or J3F==1093678665 or J3F==1093817137 or J3F==1093750840 or J3F==1093678671 or J3F==1093683510 or J3F==1093684550 or J3F==1093683287 or J3F==1093684813 or J3F==1093684815 or J3F==1093685066 or J3F==1093678672 or J3F==1093684802 or J3F==1093742668 or J3F==1093684817 or J3F==1093685074 or J3F==1093685825 or J3F==1093685813 or J3F==1093685573 or J3F==1093750087 or J3F==1093753167 or J3F==1093751607 or J3F==1093751633 or J3F==1093751637 or J3F==1093751608)then
return 2
endif
return 0
endfunction
function MQF takes unit MD7,integer XOE,integer J3F returns nothing
local integer O5=0
local integer i
local integer j
local boolean J4=false
if(not M47(MD7))then
return
endif
loop
exitwhen O5==ZN4
if J3F==ZM4[O5]then
return
endif
set O5=O5+1
endloop
set i=GetPlayerId(GetOwningPlayer(MD7))
set j=MPF(J3F,i)
if j==0 then
return
endif
set O5=1
loop
exitwhen O5>$B
if O5==6 then
set O5=7
endif
set J4=false
if TZ7(Player(O5))and IsUnitEnemy(MD7,Player(O5))and M7[O5]!=null and GetUnitTypeId(M7[O5])==1160786520 and GetWidgetLife(M7[O5])>.405 and(not ME7(M7[O5]))and IsUnitInRange(M7[O5],MD7,950.)and Bz>T34[$A0+O5]and eY[416+O5]!=J3F and((hq[816+O5]<Bz)or((Bz<T34[O5]-$A)and(j<=eY[432+O5]))or(j>eY[432+O5]))then
set eY[448+O5]=J3F
set h4[320+O5]=MD7
endif
set O5=O5+1
endloop
endfunction
function MRF takes unit I_7,integer J3F,unit MD7 returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(I_7))
local integer O27=GetPlayerId(GetOwningPlayer(MD7))
set eY[336+O5]=0
set eY[352+O5]=0
set eY[368+O5]=0
set eY[$BC+O5]=0
set T34[O5]=0
set T34[16+O5]=0
set T34[32+O5]=0
set T34[48+O5]=0
if J3F==eY[336+O27]then
set eY[336+O5]=J3F
elseif J3F==eY[352+O27]then
set eY[352+O5]=J3F
elseif J3F==eY[368+O27]then
set eY[368+O5]=J3F
elseif J3F==eY[$AC+O27]or J3F==eY[$BC+O27]then
set eY[$BC+O5]=J3F
endif
set eY[432+O5]=MPF(J3F,O27)
set eY[400+O5]=GetUnitTypeId(MD7)
set eY[416+O5]=J3F
set hq[816+O5]=Bz+(GetUnitAbilityLevel(I_7,1093809992)+2+GetUnitAbilityLevel(I_7,1093817434))*60
endfunction
function MSF takes unit it,unit m5 returns boolean
local boolean J4=false
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer i1
if(Y74[O5]==5)or(Y74[O5]==3 and GetRandomInt(1,3)==1)then
set i1=GetUnitTypeId(it)
set bj_lastLoadedUnit=it
if i1==1429221451 and(Bz>T34[32+O5])and(MP7(900.,it,Condition(function MQ7))==0)then
set J4=IssueImmediateOrderById(it,$D0217)
elseif i1==1311780930 and(Bz>T34[48+O5])then
set J4=N97(it,$D0222,1093686082)
elseif i1==1429221424 and(Bz>T34[48+O5])then
set J4=N97(it,$D022E,1093815119)
elseif i1==1160786265 and(Bz>T34[16+O5])then
set J4=N97(it,$D022E,1093748033)
endif
if(not J4)and((GetUnitLifePercent(it)<40)or(ME7(it))or(GetUnitMoveSpeed(it)<$C8))then
if(not J4)and(MR7(it,ZU[C0]) or MR7(it,ZU[RLL]))then
set J4=UnitUseItem(it,bj_lastCreatedItem)
endif
if(not J4)and(MR7(it,ZU[Q1]))then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,it)
endif
endif
if(not J4)and(h4[O5]!=null or ME7(it))then
if(not J4)and(MZ7(it,ZU[D0]))then
set J4=UnitUseItem(it,bj_lastCreatedItem)
endif
if(not J4)and(MZ7(it,ZU[Y0]))then
set J4=UnitUseItem(it,bj_lastCreatedItem)
endif
if(not J4)and(MZ7(it,ZU[DV4]))then
set TC4=true
set J4=UnitUseItem(it,bj_lastCreatedItem)
set TC4=false
endif
endif
if J4 then
set h4[352+O5]=m5
endif
endif
return J4
endfunction
function MTF takes nothing returns nothing
local unit j5=GetTriggerUnit()
local integer O5=GetPlayerId(GetOwningPlayer(j5))
local integer IMF=GetSpellAbilityId()
local integer i1=GetUnitTypeId(j5)
local integer MUF=0
local unit m5=null
local boolean J4=false
local boolean MVF=GetPlayerController(GetOwningPlayer(j5))==MAP_CONTROL_COMPUTER
local location b5=null
local integer UP
set m5=GetSpellTargetUnit()
if m5!=null and TZ7(GetOwningPlayer(m5))and(is(m5))then
set J4=MSF(m5,j5)
endif
set GZ[16+O5]=false
set h4[32+O5]=null
if(GetSpellTargetUnit()!=null)then
set h4[32+O5]=GetSpellTargetUnit()
set m5=GetSpellTargetUnit()
endif
if i1==1160786520 and IMF!=1093809990 and IMF!=1093809991 and IMF!=1093809992 and IMF!=1093810008 and hq[816+O5]>Bz then
set G0[288+O5]=false
set i1=eY[400+O5]
endif
if DJ7 and i1!=1160786520 then
call MQF(j5,i1,IMF)
endif
if(IMF==1097163124)then
if(MVF)then
call J_7(.1)
call jW(j5,$D0012,h9[O5])
endif
elseif(i1==1162032181)then
if((MVF)and(IMF==1093684299))then
set hq[512+O5]=Bz+3.
if(m5!=null)then
call J_7(((KF7(GetUnitX(j5),GetUnitX(j5),GetUnitX(m5),GetUnitY(m5))/40.)*.01)+.5)
else
call J_7(((KF7(GetUnitX(j5),GetUnitX(j5),GetLocationX(HC[O5]),GetLocationY(HC[O5]))/40.)*.01)+.5)
endif
set m5=S17(300.,j5)
if(((not ME7(j5))or(Id(O5)))and(m5!=null))then
set GZ[O5]=true
if((ME7(j5))or(not J8(O5,(R2I(GetUnitState(m5,UNIT_STATE_LIFE))<(KHF(j5)))and(GetUnitState(m5,UNIT_STATE_LIFE)>300.)and(M_7(j5,$D02AC,1093683761,0,m5)))))then
call K6F(j5,m5,true)
endif
elseif(ME7(j5))then
call jW(j5,$D0012,h9[O5])
else
call J3(j5,true)
endif
endif
elseif(i1==1429221424)then
if(IMF==1093748789)then
call TriggerSleepAction(.05)
if((h4[O5]==m5)and(GetUnitLifePercent(m5)<70.))then
call FNF(j5,m5)
endif
set MUF=$D0118
endif
elseif(i1==1430466609)then
if(IMF==1093684549)then
set hq[512+O5]=Bz+3.
call TriggerSleepAction(.05)
if(not ME7(j5))then
set m5=S17(500.,j5)
if(not MVF)then
if((m5!=null)and(GetUnitLifePercent(m5)<60.))then
call FNF(j5,m5)
endif
elseif(m5!=null)then
set J4=(((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<KGF(j5))and(M_7(j5,$D009D,1093810258,1093810259,m5)))or((IsUnitInRange(j5,m5,400.))and(N97(j5,$D022E,1093678145)))or(M_7(j5,$D022F,1093685559,0,m5)))
endif
else
set J4=(MVF)and(h4[O5]==null)and((eY[O5]==1)or(eY[O5]==3)or(eY[O5]==4))and(jW(j5,$D0012,h9[O5]))
endif
set MUF=$D022D
elseif(IMF==1093685559)then
call TriggerSleepAction(.05)
call K6F(j5,m5,true)
set J4=(MVF)and(IsUnitInRange(j5,m5,400.))and((N97(j5,$D022E,1093678145))or((ME7(m5))and(M_7(j5,$D009D,1093810258,1093810259,m5))))
set MUF=$D022F
elseif(IMF==1093678145)then
call TriggerSleepAction(.05)
set hq[16+O5]=Bz+10.
set m5=S17(400.,j5)
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<50.))then
call FNF(j5,m5)
endif
if(MVF)then
set J4=(m5!=null)and(((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<KGF(j5))and(not ke(j5))and(M_7(j5,$D009D,1093810258,1093810259,m5)))or(M_7(j5,$D022F,1093685559,0,m5)))
endif
set MUF=$D00FA
elseif((IMF==1093810258)or(IMF==1093810259))then
call TriggerSleepAction(.05)
set MUF=GetUnitAbilityLevel(j5,IMF)
if(MUF!=3)then
set hq[O5]=Bz+140.-(MUF*20.)
else
set hq[O5]=Bz+75.
endif
set m5=K2(400.,HC[O5])
if(m5!=null)then
call K6F(j5,m5,true)
endif
set MUF=$D009D
endif
elseif((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))then
if(IMF==1093678929)then
call TriggerSleepAction(.5)
if(IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(j5)))then
set G0[32+O5]=false
call K6F(j5,GetSpellTargetUnit(),true)
call H7F(j5,GetSpellTargetUnit())
endif
endif
elseif(i1==1433168227)then
if(IMF==1093678918)then
call TriggerSleepAction(.05)
if((m5!=null)and(ME7(m5)))then
call K6F(j5,m5,true)
endif
set MUF=$D0102
elseif(IMF==1093678387)then
call TriggerSleepAction(.05)
set MUF=$D0062
elseif(IMF==1093679186)then
call TriggerSleepAction(.05)
set MUF=$D0101
endif
elseif(i1==1429221430)then
if(IMF==1093681736)then
call TriggerSleepAction(.05)
set MUF=$D0279
elseif(IMF==1093687121)then
call TriggerSleepAction(.05)
set hq[512+O5]=Bz+20.
call K6F(j5,S17(500.,j5),true)
set MUF=$D00C4
endif
elseif(i1==1430466872)then
if(IMF==1093684558)then
call TriggerSleepAction(.05)
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call K6F(j5,m5,true)
if(MVF)then
call J_7(1.)
set MUF=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
if((not ke(m5))and(MUF>200.)and(MUF<KJF(j5)))then
set GZ[O5]=true
set J4=J8(O5,M_7(j5,$D0097,1093679413,1093679447,m5))
endif
endif
endif
set MUF=$D0216
endif
elseif(i1==1162032439)then
if(IMF==1093744435)then
call TriggerSleepAction(.05)
set hq[O5]=Bz+22.
if(IsUnitType(m5,UNIT_TYPE_HERO))then
call K6F(j5,m5,true)
if((MVF)and(GetHeroLevel(j5)>5))then
set MUF=GetUnitAbilityLevel(j5,1093677363)
if(MUF==0)then
set MUF=GetUnitAbilityLevel(j5,1093681462)
endif
if((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<(100+(300*MUF)))and(GetUnitState(m5,UNIT_STATE_LIFE)<200.))then
set GZ[O5]=true
call SetPlayerAbilityAvailable(GetOwningPlayer(j5),1093681462,true)
set J4=J8(O5,N97(j5,$D0272,1093677363))
endif
endif
endif
set MUF=$D022F
endif
elseif(i1==1430466865)then
if(IMF==1093677651)then
call TriggerSleepAction(.05)
if((m5==null)or(not IsUnitType(m5,UNIT_TYPE_HERO)))then
set m5=K2(350.,HC[O5])
endif
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<80.))then
call FNF(j5,m5)
endif
set J4=(MVF)and(m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<85.)and(IsUnitInRange(j5,m5,350.))and(R2I(GetUnitState(j5,UNIT_STATE_MANA))<($8C+(GetUnitAbilityLevel(j5,1093810508)*100)))and(N97(j5,$D00C4,1093810508))
set MUF=$D009D
elseif(IMF==1093677879)then
call TriggerSleepAction(.05)
set m5=h4[O5]
set J4=(MVF)and(m5!=null)and(M87(m5))and(G0[$80+O5])and(IsUnitInRange(j5,m5,800.))and(IssueTargetOrderById(j5,$D000F,m5))
set MUF=$D0062
endif
elseif(i1==1430468144)then
if(IMF==1093679192)then
call TriggerSleepAction(.05)
call K6F(j5,m5,true)
set MUF=$D00DD
endif
elseif(i1==1429221441)then
if((IMF==1093685847)and(IsUnitEnemy(m5,GetOwningPlayer(j5)))and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call TriggerSleepAction(1.)
if(MVF)then
if((GetUnitLifePercent(m5)>70.)or((Bz<hq[O5])and(GetUnitCurrentOrder(m5)==$D0005))or(not M_7(j5,$D0107,1093678389,0,m5))or(not N97(j5,$D009B,1093677903)))then
call K6F(j5,m5,true)
endif
else
call FNF(j5,m5)
endif
elseif(IMF==1093678389)then
call TriggerSleepAction(.05)
set hq[O5]=Bz+10.
call K6F(j5,m5,true)
if((MVF)and(G0[$80+O5]))then
set J4=((not IsUnitInRange(j5,m5,300.))and(GetUnitLifePercent(m5)<60.)and(GetUnitLifePercent(j5)>60.)and(IssueTargetOrderById(j5,$D0278,m5)))or((IsUnitInRange(j5,m5,250.))and(GetUnitLifePercent(m5)<65.)and(N97(j5,$D009B,1093677903)))
endif
set MUF=$D0107
elseif(IMF==1093677903)then
set hq[16+O5]=Bz+180.
endif
elseif(i1==1165451634)then
if((IMF==1093685324)and(IsUnitEnemy(m5,GetOwningPlayer(j5)))and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call TriggerSleepAction(1.)
if(MVF)then
if(not M_7(j5,$D02B6,1093687629,0,m5))then
call K6F(j5,GetSpellTargetUnit(),true)
endif
else
call FNF(j5,m5)
endif
elseif(IMF==1093687629)then
call TriggerSleepAction(.05)
call K6F(j5,m5,true)
set J4=(MVF)and(not IsUnitInRange(j5,m5,300.))and(IssueTargetOrderById(j5,$D02B6,m5))
set MUF=$D02B6
endif
elseif(i1==1432642913)then
if(IMF==1093684550)then
call TriggerSleepAction(.05)
set MUF=$D0097
elseif(IMF==1093683507)then
call TriggerSleepAction(.05)
if((IsUnitType(m5,UNIT_TYPE_HERO))and(IsUnitEnemy(m5,GetOwningPlayer(j5)))and(GetUnitLifePercent(m5)<50.))then
call K6F(j5,m5,true)
endif
set MUF=$D02B6
endif
elseif(i1==1432510828)then
if((MVF)and(IMF==1093681985))then
call ExecuteFunc("JEF")
elseif(IMF==1093682004)then
set G0[32+O5]=false
endif
elseif(i1==1429221446)then
if((IMF==1093682764)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call FNF(j5,m5)
if MVF and IsUnitInRange(j5,m5,$E1)then
call SetPlayerAbilityAvailable(Player(O5),1093678667,true)
call IssueImmediateOrderById(j5,$D00D2)
endif
elseif((IMF==1093678667)and(MVF))then
set m5=S17(250.,j5)
set J4=(m5!=null)and((h4[O5]==m5)or(GetUnitLifePercent(m5)<75.))and(M_7(j5,$D0200,1093682764,1093747544,m5))
endif
elseif(i1==1332963428)then
if((IMF==1093677649)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call FNF(j5,m5)
endif
elseif(i1==1211117640)then
if(IMF=='A2WJ')then
call TriggerSleepAction(.05)
if((IsUnitEnemy(m5,GetOwningPlayer(j5)))and(IsUnitType(m5,UNIT_TYPE_HERO)))then
set h4[16+O5]=m5
call K3F(j5,m5)
set J4=(MVF)and(not G0[32+O5])and((KSF(j5,m5))or(IssueTargetOrderById(j5,$D0079,m5)))
endif
set MUF=$D02BD
elseif(IMF==1093684564)then
call TriggerSleepAction(.05)
set hq[O5]=Bz+6.
set MUF=$D0079
elseif(IMF==1093679428)then
set hq[16+O5]=Bz+35.
elseif(((IMF==1093681987)or(IMF==1093677658))and(IsUnitType(m5,UNIT_TYPE_HERO)))then
if(GetUnitAbilityLevel(m5,1110454606)==0)then
call FNF(j5,m5)
else
call K3F(j5,m5)
endif
endif
elseif(i1==1430468406)then
if((IMF==1093677645)or(IMF==1093678670)or(IMF==1093678898)or(IMF==1093678900)or(IMF==1093678904))then
call TriggerSleepAction(.05)
set MUF=$D00FA
elseif((IMF==1093678899)or(IMF==1093677898)or(IMF==1093678154)or(IMF==1093678157)or(IMF==1093678158))and(MVF)then
call ExecuteFunc("JCF")
endif
elseif(i1==1432642913)then
if(IMF==1093684819)then
if((MVF)and(GetUnitLifePercent(j5)<50.)and(not Id(O5)))then
call TriggerSleepAction(.5)
call PW7(j5,false)
endif
endif
elseif(i1==1160786241)then
if((IMF==1093684820)or(IMF==1093684824))then
set m5=K2(500.,HC[O5])
if(m5!=null)then
call FNF(j5,m5)
call K3F(j5,m5)
endif
endif
elseif(i1==1160786243)then
if(IMF==1093678672)then
set m5=K2(500.,HC[O5])
if(m5!=null)then
call FNF(j5,m5)
endif
endif
elseif(i1==1328558154)then
if(IMF==1093750840)then
elseif(IMF==1093682996 or IMF==1093747768)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
call FNF(j5,m5)
endif
endif
elseif(i1==1315988077)then
if(IMF==1093684561)then
set m5=K2(500.,HC[O5])
if(m5!=null)then
call FNF(j5,m5)
call H7F(j5,m5)
endif
elseif(IMF==1093684561)then
call TriggerSleepAction(.05)
if(GetUnitLifePercent(m5)<70.)then
call K6F(j5,m5,true)
endif
set MUF=$D0269
endif
elseif((i1==1215063922)or(i1==1211117638)or(i1==1211117637)or(i1==1211117639))then
if(IMF==1093677894)then
call TriggerSleepAction(.05)
set MUF=$D0264
elseif(IMF==1093681490)then
call TriggerSleepAction(.05)
call K6F(j5,m5,true)
set MUF=$D007F
endif
elseif(i1==1164207469)then
if(IMF==1095066220)then
set hq[512+O5]=Bz+3.
call TriggerSleepAction(.05)
set m5=S17(200.,j5)
if(m5!=null)then
call K6F(j5,m5,true)
endif
set J4=(MVF)and(h4[O5]==null)and(ME7(j5))and((eY[O5]==1)or(eY[O5]==3)or(eY[O5]==4))and(jW(j5,$D0012,h9[O5]))
set MUF=$D022D
endif
elseif(i1==1315007329)then
if(IMF==1093677108)then
call TriggerSleepAction(.05)
if(GetUnitLifePercent(m5)<65.)then
call K6F(j5,m5,true)
endif
set MUF=$D007F
elseif(IMF==1093681716)then
call TriggerSleepAction(.05)
call K6F(j5,m5,true)
set MUF=$D00B5
endif
elseif(i1==1332898670)then
if((IMF==1093677136)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call FNF(j5,m5)
elseif(IMF==1093685848)then
call TriggerSleepAction(.05)
call K6F(j5,m5,true)
if((MVF)and(IsUnitType(m5,UNIT_TYPE_HERO))and((GetUnitLifePercent(m5)<70.)or((Bz>hq[16+O5])and(GetUnitState(j5,UNIT_STATE_MANA)>(hq[272+O5]+80.+(30.*GetUnitAbilityLevel(j5,1093677136))))))and(GetHeroLevel(j5)>5)and(GetUnitAbilityLevel(m5,1110454344)>0))then
set GZ[O5]=true
set J4=J8(O5,M_7(j5,$D0218,1093677128,1093681457,m5))
endif
set MUF=$D00B5
elseif((IMF==1093677128)or(IMF==1093681457))then
call TriggerSleepAction(.05)
set m5=K2(550.,HC[O5])
if(m5!=null)then
call H7F(j5,m5)
if((MVF)and(Bz>hq[16+O5]))then
set GZ[O5]=true
set J4=(((IsUnitInRange(j5,m5,400)or YO8(m5)))and J8(O5,M57(j5,$D0200,1093677136,m5)))or(M_7(j5,$D0216,1093685848,0,m5))
endif
endif
set hq[O5]=Bz+120.
set MUF=$D0218
endif
elseif(i1==1215723364)then
if(IMF==1093683534)or(IMF==1093747031)then
call TriggerSleepAction(.3)
set hq[512+O5]=Bz+2.
set hq[O5]=Bz+45.
call K6F(j5,m5,true)
call H7F(j5,m5)
elseif(IMF==1093677633)then
call TriggerSleepAction(.05)
call K6F(j5,m5,true)
set hq[16+O5]=Bz+10.
set MUF=$D007F
endif
elseif(i1==1433105516)then
if(IMF==1093747288)then
set m5=K2(400.,HC[O5])
if(m5!=null)then
call FNF(j5,m5)
call H7F(j5,m5)
endif
endif
elseif(i1==1164799603)then
if(IMF==1093808453)then
call TriggerSleepAction(.05)
call K6F(j5,m5,true)
set MUF=$D00FA
endif
elseif(i1==1328558160)then
if(IMF==1093682766)then
set hq[O5]=Bz+11.
if((not ME7(j5))or(Id(O5)))then
set hq[512+O5]=Bz+3.
if(GetSpellTargetUnit()!=null)then
call J_7((RMaxBJ(KF7(GetUnitX(j5),GetUnitX(j5),GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()))/50.,1.)*.04)+.3)
else
call J_7((RMaxBJ(KF7(GetUnitX(j5),GetUnitX(j5),GetLocationX(HC[O5]),GetLocationY(HC[O5]))/50.,1.)*.04)+.3)
endif
if(not IsUnitHidden(j5))then
call K6F(j5,S17(300.,j5),true)
if((MVF)and(GetUnitCurrentOrder(j5)==0))then
call J3(j5,true)
endif
endif
endif
endif
elseif(i1==1212363833)then
if(IMF==1093678643)then
set hq[16+O5]=Bz+60.
endif
elseif(i1==1315070563)then
if(IMF==1093684529)then
set hq[O5]=Bz+140.-(GetUnitAbilityLevel(j5,IMF)*10.)
if(IsUnitType(m5,UNIT_TYPE_HERO))then
call FNF(j5,m5)
endif
endif
elseif(i1==1214931305)then
if(IMF==1093678147)then
call TriggerSleepAction(.05)
if MVF then
call IssueTargetOrderById(j5,$D000F,m5)
endif
set hq[16+O5]=Bz+10.
if(IsUnitType(m5,UNIT_TYPE_HERO))then
if((GetUnitState(j5,UNIT_STATE_LIFE)>GetUnitState(m5,UNIT_STATE_LIFE))and((GetUnitState(j5,UNIT_STATE_LIFE)-GetUnitState(m5,UNIT_STATE_LIFE))>(40*GetHeroLevel(j5))))then
call FNF(j5,m5)
if((MVF)and(GetHeroLevel(j5)>5)and(Bz>hq[O5])and(GetUnitState(m5,UNIT_STATE_LIFE)>150.)and(G0[$80+O5]))and(not IsUnitType(m5,UNIT_TYPE_MAGIC_IMMUNE))then
if(IsUnitInRange(j5,m5,450.))then
set J4=((GetUnitState(j5,UNIT_STATE_MANA)>hq[272+O5]+50.)and(MC7(j5,ZU[D0])))or(IssueImmediateOrderById(j5,$D0278))
endif
endif
if((not J4)and(MVF)and(not ME7(j5)))then
set J4=IssueTargetOrderById(j5,$D000F,m5)
endif
endif
endif
set MUF=$D00CB
elseif(IMF==1093748025)then
call TriggerSleepAction(.05)
if MVF then
call IssueTargetOrderById(j5,$D000F,m5)
endif
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(G0[$80+O5]))then
if((GetUnitState(j5,UNIT_STATE_LIFE)>GetUnitState(m5,UNIT_STATE_LIFE))and((GetUnitState(j5,UNIT_STATE_LIFE)-GetUnitState(m5,UNIT_STATE_LIFE))>(40*GetHeroLevel(j5))))then
call K6F(j5,m5,true)
endif
endif
set MUF=$D0079
elseif((IMF==1093677906)or(IMF==1093681494))then
set m5=K2(600.,M07(j5))
if(m5!=null)then
call FNF(j5,m5)
call H7F(j5,m5)
endif
set hq[O5]=Bz+180.-(GetUnitAbilityLevel(j5,IMF)*30.)
endif
elseif(i1==1212365106)then
if((IMF==1093684025)and(MVF)and(IsUnitEnemy(m5,GetOwningPlayer(j5)))and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call TriggerSleepAction(1.)
call M_7(j5,$D0079,1093685831,0,m5)
endif
elseif(i1==1211117617)or(i1==1211122513)then
if(IMF==1093744944)then
call TriggerSleepAction(.05)
set hq[O5]=Bz+8.
call K6F(j5,m5,true)
set J4=(MVF)and(IsUnitInRange(j5,m5,400.))and(GetUnitLifePercent(m5)<70.)and(N97(j5,$D02B7,1093752648))
set MUF=$D02B6
elseif(IMF==1093752648)then
call TriggerSleepAction(.05)
set m5=S17(800.,j5)
call K6F(j5,m5,true)
set hq[512+O5]=Bz+20.
if((MVF)and(m5!=null)and(IsUnitInRange(j5,m5,700.)))then
set J4=(M_7(j5,$D02B6,1093744944,0,m5))or(IssueTargetOrderById(j5,$D000F,m5))
endif
set MUF=$D02B7
endif
elseif(i1==1211117633)then
if(IMF==1093684045)then
call TriggerSleepAction(.05)
call K6F(j5,m5,true)
call K3F(j5,m5)
if((MVF)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
set J4=M_7(j5,$D007F,1093684310,0,m5)
set h4[16+O5]=m5
endif
set MUF=$D0269
endif
elseif(i1==1211117620)then
if(IMF==1093677623)then
call TriggerSleepAction(.05)
set m5=K2(280.,HC[O5])
call K6F(j5,m5,true)
if((MVF)and(m5!=null))then
call IssueTargetOrderById(j5,$D000F,m5)
call J_7(1.)
set J4=((not ke(m5))and(R2I(GetUnitState(m5,UNIT_STATE_LIFE))<KKF(j5))and(M_7(j5,$D0097,1093677392,1093679450,m5)))or(((GetUnitLifePercent(m5)<50.)and(KSF(j5,m5))))or(M_7(j5,$D009D,1093677382,0,m5))or(IssueTargetOrderById(j5,$D000F,m5))
endif
set MUF=$D0108
elseif(IMF==1093677382)then
call TriggerSleepAction(.05)
set hq[16+O5]=Bz+10
if(m5==null)then
set m5=K2(300.,HC[O5])
endif
set J4=(MVF)and(m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(not ke(m5))and(R2I(GetUnitState(m5,UNIT_STATE_LIFE))<KKF(j5))and(GetUnitState(m5,UNIT_STATE_LIFE)>200.)and(M_7(j5,$D0097,1093677392,1093679450,m5))
set MUF=$D009D
endif
elseif(i1==1215657064)then
if(IMF==1093677913)then
call TriggerSleepAction(.05)
set hq[O5]=Bz+7.75
set m5=S17(350.,j5)
if((m5!=null)and((not ME7(j5))or(ME7(m5))))then
call K6F(j5,m5,true)
set J4=(MVF)and(N97(j5,$D0278,1093750841))
endif
set MUF=$D0080
elseif(IMF==1093750841)then
call TriggerSleepAction(.05)
set m5=S17(500.,j5)
if(m5!=null)then
call K6F(j5,m5,true)
endif
if(MVF)then
if((GetHeroLevel(j5)>5)and(G0[$80+O5])and(GetUnitLifePercent(j5)>70.)and(not IC(O5)))then
set hq[512+O5]=Bz+6.
endif
if(m5==null)then
set m5=MN7(500.,M07(j5),Condition(function QX7))
endif
set J4=(m5!=null)and(not G0[O5])and(G0[$80+O5])and((not ME7(j5))or(MI7(m5,j5)))and(IssueTargetOrderById(j5,$D000F,m5))
endif
set MUF=$D0251
endif
elseif(i1==1332179560)then
if(IMF==1093742660)then
call TriggerSleepAction(.05)
call K6F(j5,m5,true)
set MUF=$D02B6
endif
elseif(i1==1429221443)then
if(IMF==1093744948)then
call TriggerSleepAction(.05)
call K6F(j5,m5,true)
set MUF=$D0097
endif
elseif(i1==1215130471)then
if((IMF==1093678167)or(IMF==1093679161)or(IMF==1093679169)or(IMF==1093679172)or(IMF==1093815121))then
call TriggerSleepAction(.05)
if((GZ[O5])or(m5==h4[O5])or(GetUnitLifePercent(m5)<55.))then
call K6F(j5,m5,true)
elseif(IsUnitType(m5,UNIT_TYPE_HERO))then
call FNF(j5,m5)
endif
set MUF=$D007F
elseif((IMF==1093677361)or(IMF==1093677111)or(IMF==1093677396)or(IMF==1093677126))then
call TriggerSleepAction(.05)
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.))then
call K6F(j5,m5,true)
endif
set MUF=$D02B6
endif
elseif((i1==1311781193)or(i1==1311781192)or(i1==1311781204)or(i1==1311781194))then
if(IMF==1093750345)then
call ExecuteFunc("K1F")
endif
elseif(i1==1311781206)then
if((MVF)and(IMF==1093684302))then
call TriggerSleepAction(1.)
if(((GetUnitManaPercent(j5)>55.)and(MP7(500.,j5,Condition(function k3))>2))or(MP7(500.,j5,Condition(function QN7))>0))then
call IssueImmediateOrderById(j5,$D0278)
endif
endif
elseif(i1==1164799855)then
if((IMF==1093677378)and(MVF))then
call ExecuteFunc("JLF")
endif
elseif(i1==1311787088)then
if(IMF==1093750089)and MVF then
call TriggerSleepAction(.05)
call IssueImmediateOrderById(j5,$D0004)
endif
elseif(i1==1211117651)then
if(IMF==1093743698)and MVF then
call J_7(.01)
call IssueTargetOrderById(j5,$D000F,m5)
endif
elseif(i1==1328558406)then
if MVF then
if IMF==1093752114 then
call NS7(GetHandleId(j5),"AI|IoSpiritsFar",true)
elseif IMF==1093752115 then
call NS7(GetHandleId(j5),"AI|IoSpiritsFar",false)
elseif IMF==1093751864 then
call O37(j5,"AI|IoSpirits",19)
endif
endif
elseif(i1==1160786506)then
if IMF==1093751637 then
set b5=GetSpellTargetLoc()
if MVF then
call J3(j5,true)
endif
call J_7(1.2)
set m5=S57(300,j5,GetLocationX(b5),GetLocationY(b5))
call K6F(j5,m5,true)
if MVF and(m5!=null)then
if(h4[O5]==null or(not IsUnitInRangeLoc(h4[O5],b5,300)))then
call WQE(O5,m5,false,false)
endif
set J4=(IssuePointOrderById(j5,$D02B6,GetLocationX(b5),GetLocationY(b5)))
endif
endif
elseif(i1==1211122767)then
if IMF==1093812807 then
call TriggerSleepAction(.05)
set m5=K2(250.,HC[O5])
call K6F(j5,m5,true)
set MUF=$D02B6
endif
endif
if((MVF)and(not J4)and(MUF!=0)and(GetUnitCurrentOrder(j5)==MUF))then
call J3(j5,true)
endif
set j5=null
set m5=null
set b5=null
endfunction
function MWF takes nothing returns nothing
local unit it=GetTriggerUnit()
local integer IMF=GetSpellAbilityId()
local integer i1=GetUnitTypeId(it)
local integer O5=GetPlayerId(GetOwningPlayer(it))
local unit m5=h4[32+O5]
local integer UP
local location b5=null
local boolean J4=false
local boolean MVF=GetPlayerController(GetOwningPlayer(it))==MAP_CONTROL_COMPUTER
local real MXF=0
local unit I77=null
call TriggerSleepAction(.01)
if((not MVF)and(hq[464+O5]>Bz)and(m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(IsUnitEnemy(m5,GetOwningPlayer(it))))then
call FNF(it,m5)
endif
if(m5!=null)and(not M87(m5))then
set m5=null
endif
if(h4[O5]!=null)and(not M87(h4[O5]))then
set h4[O5]=null
endif
if G0[288+O5]then
set G0[288+O5]=false
set i1=eY[400+O5]
endif
if((IMF==1093677647)or(IMF==1093679193)or(IMF==1093679194)or(IMF==1093679408)or(IMF==1093679410))then
if(MVF and T_4[O5])then
if(MR7(it,GetItemTypeId(U74[O5])))then
call J_7(1.)
call DisableTrigger(H94)
call UnitRemoveItem(it,MV7(it,GetItemTypeId(U74[O5])))
call RemoveItem(U74[O5])
call EnableTrigger(H94)
endif
if(U44[O5]!=null)then
call J_7(.2)
call UnitAddItem(it,U44[O5])
endif
set T24[O5]=Bz+T54[UG4]
set T_4[O5]=false
set U74[O5]=null
set U44[O5]=null
endif
call K6F(it,m5,true)
set J4=(i1==1429221445)and(MVF)and(not ke(m5))and(M_7(it,$D007F,1093678647,1093679184,m5))
elseif((IMF==1094936696)or(IMF==1095331943))then
call K6F(it,m5,true)
elseif(IMF==1095331188)then
if(MVF)then
call J_7(1.)
call UQ7(it)
endif
elseif(i1==1160785970)then
if(IMF==1093748023)then
call K6F(it,S17(750.,it),true)
elseif(IMF==1093747792)then
call K6F(it,S17(550.,it),true)
if(MVF)then
call J_7(1.)
set J4=(m5!=null)and(Bz>T34[O5])and(((GetUnitAbilityLevel(it,1093747023)>0)and(N97(it,$D0105,1093747023)))or((GetUnitAbilityLevel(it,1093752150)>0)and(N97(it,$D0105,1093752150))))
endif
elseif((IMF==1093747023)or(IMF==1093752150))then
if(MVF)then
set J4=(IsUnitInRange(it,m5,440.))and(IssuePointOrderById(it,$D02B6,GetUnitX(m5)+2,GetUnitY(m5)-2))
endif
endif
elseif((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))then
if(IMF==1093747028)then
elseif(IMF==1093682994)then
if(MVF)then
set J4=(m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<50.)and(IsUnitInRange(it,m5,400.))and(N97(it,$D0265,1093747028))
else
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<50.))then
call FNF(it,m5)
endif
endif
endif
elseif(i1==1328558154)then
if((m5!=null)and(MVF)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call WQE(O5,m5,false,false)
call IssueTargetOrderById(it,$D000F,m5)
endif
elseif(i1==1429221443)then
if(IMF==1093686322)then
set hq[$F0+O5]=Bz+$F
if((not ME7(it))or(Id(O5)))then
if(m5!=null)then
call K6F(it,m5,true)
set hq[512+O5]=Bz+6.+(GetUnitAbilityLevel(it,IMF)*5.)
else
call K6F(it,S17(500.,it),true)
set hq[512+O5]=Bz+6.+(GetUnitAbilityLevel(it,IMF)*5.)
endif
endif
call TriggerSleepAction(1.)
if((MVF)and(IsUnitHidden(it)))then
call ShowUnitShow(it)
endif
endif
elseif(i1==1162032951)then
if(IMF==1093678404)then
call K6F(it,S17(550.,it),true)
elseif((IMF==1093679152)or(IMF==1093752154))then
set UP=GetUnitAbilityLevel(it,1093679152)
if((UP==0)and(IMF==1093752154))then
set UP=GetUnitAbilityLevel(it,1093752154)
if(UP>0)then
set hq[O5]=Bz+12.
endif
elseif(IMF==1093679152)then
if(UP==1)then
set hq[O5]=Bz+80.
elseif(UP==2)then
set hq[O5]=Bz+50.
elseif(UP==3)then
set hq[O5]=Bz+30.
else
set hq[O5]=Bz+80.
endif
else
set hq[O5]=Bz+80.
endif
call K6F(it,m5,true)
elseif(IMF==1093679446)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.))then
call FNF(it,m5)
endif
endif
elseif(i1==1162032181)then
if(IMF==1093683761)then
set hq[O5]=Bz+180.
endif
elseif(i1==1160786505)then
if(IMF==1093753167)then
set UP=GetUnitAbilityLevel(it,1093753167)
call FNF(it,m5)
call K6F(it,m5,true)
call TriggerSleepAction(.5)
set J4=(MVF)and(m5!=null)and(iU(it))and(((Bz>T34[32+O5])and(IsUnitInRange(it,m5,1000.))and(MP7(900.,m5,Condition(function QX7))==0)and(IssueTargetOrderById(it,$D00D9,m5)))or((Bz>T34[48+O5])and(IsUnitInRange(it,m5,570.))and(IssueImmediateOrderById(it,$D0272)))or(IssueTargetOrderById(it,$D000F,m5)))
elseif(IMF==1093751607)then
if(m5!=null)then
call FNF(it,m5)
set J4=(MVF)and((Bz>T34[O5])and(IsUnitInRange(it,m5,250.))and((GetUnitLifePercent(m5)<47.)or(GetRandomInt(1,3)==1))and(IssueImmediateOrderById(it,$D022E)))or(IssuePointOrderById(it,$D02B6,GetUnitX(m5),GetUnitY(m5)))or(IssueTargetOrderById(it,$D000F,m5))
endif
elseif(IMF==1093753169)then
set UP=GetUnitAbilityLevel(it,1093753169)
if(h4[O5]!=null)then
call K6F(it,m5,true)
call TriggerSleepAction(.5)
set J4=(MVF)and(h4[O5]!=null)and(iU(it))and(IssueTargetOrderById(it,$D000F,h4[O5]))
endif
endif
elseif(i1==1211117653)then
if(IMF==1093687372)then
set T34[80+O5]=Bz+60.
elseif(IMF==1093686862)then
set T34[48+O5]=Bz+55.
if((MVF)and((GetUnitState(it,UNIT_STATE_MANA))>$C8)and(GetUnitLevel(it)>=$A)and((Bz>T34[O5])or(T57(it,1093686861)))and(Bz>T34[112+O5]))then
set J4=UG7(it,A54,A24,A_4,1093686861)and IssuePointOrderById(it,$D00F7,GetUnitX(h4[O5]),GetUnitY(h4[O5]))
endif
elseif(IMF==1093686863)then
if(MVF)then
set GZ[$E0+O5]=true
set J4=(h4[O5]!=null)and(IsUnitInRange(it,h4[O5],450.))and(IsUnitType(h4[O5],UNIT_TYPE_HERO))and(MR7(it,ZU[Y0]))and(UnitUseItem(it,MV7(it,ZU[Y0])))
set GZ[$E0+O5]=false
endif
set T34[64+O5]=Bz+30.
elseif(IMF==1093686874)then
set T34[16+O5]=Bz+20.
elseif(IMF==1093686855)then
set T34[$90+O5]=Bz+30.
elseif(IMF==1093686867)then
set T34[32+O5]=Bz+25.
elseif(IMF==1093686859)then
set T34[96+O5]=Bz+25.
if((MVF)and((GetUnitState(it,UNIT_STATE_MANA))>$AE)and((Bz>T34[O5])or(T57(it,1093686855)))and(Bz>T34[$90+O5])and(h4[O5]!=null))then
set UP=GetUnitAbilityLevel(it,1093808471)
if(UP>4)then
if(UP==5)then
call J_7(.6)
elseif(UP==6)then
call J_7(.9)
elseif(UP==7)then
call J_7(1.1)
endif
endif
set J4=UG7(it,A_4,A_4,A_4,1093686855)and IssuePointOrderById(it,$D0079,GetUnitX(h4[O5]),GetUnitY(h4[O5]))
endif
elseif(IMF==1093686865)then
set T34[$80+O5]=Bz+15.
elseif(IMF==1093686861)then
set T34[112+O5]=Bz+40.
if((MVF)and((GetUnitState(it,UNIT_STATE_MANA))>110)and((Bz>T34[O5])or(T57(it,1093686874)))and(Bz>T34[16+O5])and(h4[O5]!=null))then
set J4=UG7(it,A54,A54,A54,1093686874)and(M57(it,$D0219,1093686874,h4[O5]))
endif
if((not J4)and(MVF))then
set J4=M37(it,h4[O5])
endif
elseif(IMF==1093686864)then
set T34[$A0+O5]=Bz+25.
elseif(IMF==1093808473 or IMF==1093748565)then
set UP=GetUnitAbilityLevel(it,1093808473)
if(UP>0)then
if(UP==1)then
set T34[O5]=Bz+22.
elseif(UP==2)then
set T34[O5]=Bz+17.
elseif(UP==3)then
set T34[O5]=Bz+12.
else
set T34[O5]=Bz+5.
endif
else
set UP=GetUnitAbilityLevel(it,1093748565)
if(UP>0)then
if(UP==1)then
set T34[O5]=Bz+16.
elseif(UP==2)then
set T34[O5]=Bz+8.
elseif(UP==3)then
set T34[O5]=Bz+4.
else
set T34[O5]=Bz+2.
endif
endif
endif
endif
elseif(i1==1160786502)then
if(IMF==1093751370)then
if(MVF)then
if((GetUnitLifePercent(it)<40.)or(UJ4[O5]))then
call J_7(.7)
call N97(it,$D0114,1093808206)
endif
set UI4[O5]=false
if((GetUnitLifePercent(it)<40.))then
set J4=IssueImmediateOrderById(it,$D02B6)
else
set m5=S17(600.,it)
if(m5!=null)then
call K6F(it,m5,true)
call TriggerSleepAction(.5)
set J4=(h4[O5]!=null)and(iU(it))and(IssueTargetOrderById(it,$D000F,h4[O5]))
endif
endif
set UJ4[O5]=false
endif
elseif(IMF==1093753176)then
elseif(IMF==1093751371)then
set hq[O5]=Bz+110.
elseif(IMF==1093753177)then
if MVF and(h4[O5]!=null)then
call M8F(O5,it)
endif
endif
elseif(i1==1429221424)then
if(IMF==1093687351)then
if(m5==null)then
set m5=K3(600.,it,Condition(function Kr))
endif
if(not MVF)then
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitAbilityLevel(m5,1112560453)>0))then
call FNF(it,m5)
endif
elseif((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitAbilityLevel(m5,1112560453)>0))then
call K6F(it,m5,true)
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
if((not ME7(it))and(MP7(1200.,m5,Condition(function QX7))==0)and(UP<($96+(300*GetUnitAbilityLevel(it,1093679445))))and(UP>$C8))then
set GZ[O5]=true
set h4[288+O5]=m5
set J4=J8(O5,(N97(it,$D00A1,1093679445)))
endif
if((not J4)and((not ME7(it))or(MI7(m5,it))))then
set J4=(M_7(it,$D0118,1093748789,0,m5))or((UP>$96)and(GetUnitLifePercent(m5)<40.)and(KSF(it,m5)))or(IssueTargetOrderById(it,$D000F,m5))or(IssueTargetOrderById(it,$D0012,m5))
endif
endif
elseif(IMF==1093679445)then
if(MVF)then
call ExecuteFunc("J7F")
set J4=true
endif
endif
elseif(i1==1160785972)then
if(IMF==1093677872)then
set m5=S17(400.,it)
if(m5==null)then
set m5=S17(700.,it)
endif
if(m5!=null)then
call K6F(it,m5,true)
call TriggerSleepAction(.5)
set J4=(MVF)and(h4[O5]!=null)and(iU(it))and(IssueTargetOrderById(it,$D000F,h4[O5]))
endif
elseif((MVF)and(IMF==1093677621))then
call ExecuteFunc("JHF")
set J4=true
elseif(IMF==1095263841)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.))then
call FNF(it,m5)
endif
endif
elseif(i1==1432646245)then
if(IMF==1093679171)then
call K6F(it,m5,true)
elseif((IMF==1093677640)and((not X67())or(ME7(m5))))then
if(not X67())then
set hq[512+O5]=Bz+5.
endif
call K6F(it,m5,true)
elseif(IMF==1093677899)then
set UP=GetUnitAbilityLevel(it,IMF)
if(UP<3)then
set hq[O5]=Bz+300.-(UP*60.)
else
set hq[O5]=Bz+125.
endif
if(not ME7(it))then
set m5=S17(500.,it)
call K6F(it,m5,true)
call TriggerSleepAction(.5)
set J4=(MVF)and(M_7(it,$D007F,1093677640,0,m5))
endif
endif
elseif(i1==1430468913)then
if((IMF==1093810507)and(not ME7(it)))then
call K6F(it,S17(320.,it),true)
elseif(IMF==1093678403)then
if(not MVF)then
elseif(ME7(it))then
call PW7(it,false)
else
set m5=h4[O5]
if(m5==null)then
set m5=S17(500.,it)
endif
set J4=(m5!=null)and(GetUnitLifePercent(m5)<50.)and(IssueTargetOrderById(it,$D000F,m5))
endif
elseif(IMF==1093677876)then
call K6F(it,m5,IsUnitInRange(it,m5,400.))
call H7F(it,m5)
set J4=(MVF)and(IsUnitInRange(it,m5,300.))and(N97(it,$D009F,1093810507))
endif
elseif(i1==1430467634)then
if(IMF==1093679412)then
if(GetUnitLifePercent(m5)<60.)then
call K6F(it,m5,true)
endif
elseif(IMF==1093750608)then
set m5=K2(600.,HC[O5])
if((m5!=null)and(GetUnitLifePercent(m5)<70.))then
call K6F(it,m5,true)
call H7F(it,m5)
endif
set J4=(MVF)and(GetUnitManaPercent(it)>40.)and(M_7(it,$D0107,1093679412,0,m5))
elseif((IMF==1093684565)or(IMF==1093681458))then
set UP=GetUnitAbilityLevel(it,IMF)
if((IMF==1093681458)and(UP<3))then
set UP=UP+1
endif
set hq[O5]=Bz+210.-(30.*UP)
set J4=(not ME7(it))or(ME7(m5))
call K6F(it,m5,J4)
if((MVF)and(J4))then
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093750608,true)
set GZ[O5]=true
set J4=J8(O5,(M_7(it,$D0107,1093679412,0,m5))or(IssueTargetOrderById(it,$D0208,m5)))
endif
elseif(IMF==1093742674)then
set UP=GetUnitAbilityLevel(it,IMF)
if(MVF)and(LT4)then
set UP=GetRandomInt(1,2)
if(UP==1)then
call YW7("YUMMY CREEP!!!",3.5,it,.025,100,0,$C8,$D8)
elseif(UP==2)then
call YW7("MMM DELICIOUS!!!",3.5,it,.025,100,0,$C8,$D8)
endif
endif
endif
elseif(i1==1313026096)then
if(IMF==1095267426)then
call K6F(it,m5,true)
elseif(IMF==1093677401)then
set GZ[$80+O5]=false
set G0[32+O5]=false
endif
elseif((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))then
if(IMF==1093751369)then
set UP=GetUnitAbilityLevel(it,IMF)
set hq[O5]=Bz+70.
if(MVF)then
set J4=(IssueImmediateOrderById(it,$D0278))
if not J4 then
set J4=((h4[O5]!=null)and(M97(h4[O5],it))and(M57(it,$D0097,1093815130,h4[O5])))
if(MR7(it,ZU[W2]))then
call J_7(.2)
call RemoveItem(MV7(it,ZU[W2]))
call UnitAddItemByIdSwapped(ZU[X2],it)
endif
endif
endif
endif
elseif(i1==1164666213)then
if(IMF==1093678679)then
call K6F(it,K2(125.+(25.*GetUnitAbilityLevel(it,1093678679)),HC[O5]),true)
elseif(IMF==1093677877)then
set hq[O5]=Bz+32.-(2.*GetUnitAbilityLevel(it,1093677877))
set hq[$F0+O5]=Bz+7.
set m5=S17(500.,it)
if(m5!=null)then
call H7F(it,m5)
endif
if(MVF)then
set J4=(m5!=null)and(IssueTargetOrderById(it,$D000F,m5))
loop
if((iU(it))and(not G0[O5])and(G0[$80+O5])and(GetUnitLifePercent(it)>60.))then
if(MP7(450.,it,Condition(function k3))==0)then
set m5=MK7(800.,M07(it),Condition(function k3))
set J4=((m5!=null)and(IssueTargetOrderById(it,$D0012,m5)))or(jW(it,$D000F,h8[O5]))
else
call jW(it,$D000F,h8[O5])
endif
endif
exitwhen((Bz>hq[$F0+O5])or(not M87(it)))
call J_7(1.)
endloop
else
if((m5!=null)and(GetUnitLifePercent(m5)<50.))then
call FNF(it,m5)
endif
endif
elseif((IMF==1093808454)or(IMF==1093808455))then
set m5=S17(300.,it)
if(m5!=null)then
call K6F(it,m5,true)
call H7F(it,m5)
set J4=(MVF)and(IssueTargetOrderById(it,$D0012,m5))
endif
elseif(IMF==1093678678)and(MVF)and(m5!=null)then
if(GetHeroLevel(it)>6)or(GetUnitLifePercent(m5)<60.)then
call MoveLocation(HA,GetUnitX(m5)+(90.+(25*GetUnitAbilityLevel(it,1093678679)))*Cos(GetUnitFacing(m5)*bj_DEGTORAD),GetUnitY(m5)+(90.+(25*GetUnitAbilityLevel(it,1093678679)))*Sin(GetUnitFacing(m5)*bj_DEGTORAD))
if(KF7(GetUnitX(it),GetUnitY(it),GetLocationX(HA),GetLocationY(HA))<750)or(YO8(m5))then
set J4=M27(it,$D02B6,1093678679,HA)
endif
endif
endif
elseif(i1==1433168227)then
if((IMF==1093678420)or(IMF==1093679176))then
set UP=GetUnitAbilityLevel(it,IMF)
if(UP!=3)then
set hq[O5]=Bz+175.-(UP*30.)
else
set hq[O5]=Bz+60.
endif
call K6F(it,S17(750.,it),true)
endif
elseif(i1==1430466872)then
if(IMF==1093687349)then
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call K6F(it,m5,true)
if(MVF)then
set J4=(IssueTargetOrderById(it,$D000F,m5))or(IssueTargetOrderById(it,$D0012,m5))
call J_7(1.)
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
if((not ke(m5))and(UP>200.)and(UP<KJF(it)))then
set GZ[O5]=true
set J4=J8(O5,M_7(it,$D0097,1093679413,1093679447,m5))
endif
endif
endif
elseif((IMF==1093679413)or(IMF==1093679447))then
set UP=GetUnitAbilityLevel(it,IMF)
if(UP!=3)then
set hq[O5]=Bz+210.-(UP*60.)
else
set hq[O5]=Bz+55.
endif
call K6F(it,m5,true)
endif
elseif(i1==1162032439)then
if((IMF==1093677363)or(IMF==1093681462))then
set hq[16+O5]=Bz+160.-(20.*GetUnitAbilityLevel(it,IMF))
set m5=S17(600.,it)
if(m5!=null)then
set J4=(MVF)and(M_7(it,$D02BD,1093744435,0,m5))
if(not J4)then
call K6F(it,m5,true)
endif
endif
endif
elseif(i1==1430466865)then
if(IMF==1093810508)then
call K6F(it,S17(150.,it),true)
set hq[O5]=Bz+130.-(10.*GetUnitAbilityLevel(it,IMF))
endif
if(IMF==1093751364)then
if MVF then
if((not J4)and(GetHeroLevel(it)>5)and(Bz>hq[O5]))then
if((m5==null)and(G0[$80+O5]))then
set m5=MK7(300.,b5,Condition(function k6))
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(ME7(m5)or GZ[$D0+O5]))then
set J4=(Kz(400.,M07(it))>1)and(IsUnitInRange(it,m5,300.))and(N97(it,$D00C4,1093810508))
endif
endif
endif
endif
elseif(i1==1211119409 or i1=='H0EV')then
if(IMF==1093749069)then
call K6F(it,S17(150.,it),true)
elseif(IMF==1093749070)then
set m5=h4[O5]
if m5==null then
set m5=S17(250.,it)
endif
if((MVF)and(m5!=null))then
set J4=(IsUnitInRange(it,m5,300.))and(IssueImmediateOrderById(it,$D022E))or(IssueTargetOrderById(it,$D000F,m5))
if h4[O5]==null then
call WQE(O5,m5,false,false)
endif
endif
endif
elseif((i1==1429221432)or(i1==1160786229))then
if(IMF==1093677892)then
set J4=(MVF)and((h4[O5]==null)or(GetUnitManaPercent(it)>50.))and(N97(it,$D0278,1093687878))
elseif(IMF==1093679411)then
set hq[O5]=Bz+170.-(10.*GetUnitAbilityLevel(it,IMF))
set m5=h4[O5]
if((m5==null)or(not MVF))then
set m5=S17(500.,it)
call WQE(O5,m5,false,false)
endif
if((m5!=null)and((not ME7(it))or(ME7(m5))))then
call K6F(it,m5,true)
call H7F(it,m5)
endif
endif
elseif(i1==1215722344)then
if(IMF==1093682499)then
if(m5==it)then
set m5=h4[O5]
if((m5==null)or(not MVF))then
set m5=S17(600.,it)
endif
endif
if((m5!=null)and(IsUnitEnemy(m5,GetOwningPlayer(it))))then
call K6F(it,m5,true)
endif
elseif(IMF==1093684296)then
set hq[O5]=Bz+100.
set hq[512+O5]=Bz+6.
call K6F(it,m5,true)
call J_7(1.)
if(M87(m5))then
call K6F(it,m5,true)
set J4=(MVF)and(M_7(it,$D02BC,1093682499,0,it))
endif
endif
elseif(i1==1332766568)then
if(IMF==1093686065)then
call K6F(it,m5,true)
elseif(IMF==1093683510)then
set hq[O5]=Bz+14.
set m5=S17(250.,it)
if(m5!=null)then
call K6F(it,m5,true)
set J4=(MVF)and(IssueTargetOrderById(it,$D0118,m5))
endif
endif
elseif(i1==1429221451)then
if(IMF==1093678674)then
set hq[O5]=Bz+160.-(20.*GetUnitAbilityLevel(it,1093678674))
set hq[512+O5]=Bz+3.
if(MVF)then
set m5=S17(300.,it)
if((m5==null)and(MR7(it,ZU[RW])))then
set m5=S17(900.,it)
if(m5==null)then
set m5=S17(1200.,it)
endif
if(m5==null)and(Bz>T34[16+O5])then
set m5=S17(1300.+GetUnitAbilityLevel(it,1093678671)*100,it)
endif
set J4=(m5!=null)and(UnitUseItemPoint(it,MV7(it,ZU[RW]),GetUnitX(m5),GetUnitY(m5)))
call J_7(.1)
if(m5==null)then
set hq[$F0+O5]=Bz+100.
endif
endif
if((not J4)and(m5!=null)and(M87(m5)))then
set J4=IssueTargetOrderById(it,$D000F,m5)
endif
endif
elseif(IMF==1093686067)then
set m5=S17(180.,it)
if((MVF)and(m5!=null)and(IsUnitInRange(it,m5,200.))and(GetUnitAbilityLevel(m5,1112560453)>0))then
set J4=IssueImmediateOrderById(it,$D0265)
endif
elseif(IMF==1093678671)then
if(not ME7(it))then
set hq[512+O5]=Bz+3.
endif
if((m5==null)or(not IsUnitType(m5,UNIT_TYPE_HERO))or(not IsUnitInRange(it,m5,200.)))then
set m5=S17(350.,it)
endif
if(m5!=null)then
call FNF(it,m5)
if(not MVF)then
elseif((IsUnitInRange(it,m5,200.))and(M87(m5)))then
call WQE(O5,m5,false,false)
set J4=((GetUnitState(m5,UNIT_STATE_LIFE)<200.)and(IssueTargetOrderById(it,$D000F,m5)))or((Bz>hq[O5])and(MP7(600.,it,Condition(function QN7))>1)and(R2I(GetUnitState(it,UNIT_STATE_MANA))>$96+(75*GetUnitAbilityLevel(it,1093678674)))and(MC7(it,ZU[D0])))or(IssueImmediateOrderById(it,$D0265))or(IssueTargetOrderById(it,$D000F,m5))
else
set J4=IssueTargetOrderById(it,$D000F,m5)
endif
endif
endif
elseif(i1==1315334514)then
if(IMF==1093810506)then
set hq[O5]=Bz+130.-(GetUnitAbilityLevel(it,IMF)*10.)
set m5=S17(150.,it)
if(m5==null)then
set m5=S17(300.,it)
if(m5==null)then
set m5=S17(600.,it)
endif
endif
if(m5!=null)then
call K6F(it,m5,true)
endif
elseif((IMF==1093682521)or(IMF==1093682760)or(IMF==1093682736))then
set J4=(MVF)and(GetUnitAbilityLevel(it,1110456148)==0)and(GetUnitManaPercent(it)>30)and(GetHeroLevel(it)>3)and((KQF(it,200.,$D00C4,1093682521))or(KQF(it,450.,$D026C,1093682760))or(KQF(it,700.,$D0277,1093682736)))
if(not J4)then
if(IMF==1093682521)then
set UP=$C8
elseif(IMF==1093682760)then
set UP=450
else
set UP=700
endif
call MoveLocation(Ha,GetUnitX(it)+UP*Cos(GetUnitFacing(it)*bj_DEGTORAD),GetUnitY(it)+UP*Sin(GetUnitFacing(it)*bj_DEGTORAD))
set m5=K2(250.,Ha)
set J4=(MVF)and(m5!=null)and(IssueTargetOrderById(it,$D000F,m5))
endif
if((m5!=null)and(GetUnitLifePercent(m5)<50.))then
call FNF(it,m5)
endif
endif
elseif(i1==1429221446)then
if(IMF==1093678665)then
set hq[16+O5]=Bz+14.
if MVF then
set m5=S17($E1,it)
if m5!=null then
call WQE(O5,m5,false,false)
set J4=M_7(it,$D0200,1093682764,1093747544,m5)
endif
endif
elseif(IMF==1093682764)then
set hq[O5]=Bz+30.
if MVF and GetUnitLifePercent(m5)<30 then
set J4=WKE(it,m5)
endif
endif
elseif(i1==1429221445)then
if((IMF==1093678647)or(IMF==1093679184))then
call K6F(it,m5,true)
endif
elseif(i1==1332963428)then
if(IMF==1093678169)then
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(IsUnitEnemy(m5,GetOwningPlayer(it))))then
call J3(it,false)
loop
exitwhen(GetUnitAbilityLevel(m5,1110454854)==0)
call J_7(1.)
endloop
call K3F(it,m5)
set J4=(MVF)and(G0[$80+O5])and(is(it))and(M_7(it,$D0097,1093683019,0,m5))
endif
elseif(IMF==1093677649)then
set J4=(MVF)and(M87(m5))and(not ME7(it))and((M_7(it,$D0097,1093683019,0,m5))or(IssueTargetOrderById(it,$D000F,m5)))
set hq[O5]=Bz+120.
endif
elseif(i1==1332109682)then
if(IMF==1093678134)then
call K6F(it,m5,true)
set hq[O5]=Bz+12.
elseif(IMF==1093810505)then
call K6F(it,S17(550.,it),true)
set hq[16+O5]=Bz+150.
endif
elseif(i1==1430468406)then
if((IMF==1093678899)or(IMF==1093677898)or(IMF==1093678154)or(IMF==1093678157)or(IMF==1093678158))then
if(not ME7(it))then
set m5=K2(600.,HC[O5])
if(m5!=null)then
call K6F(it,m5,true)
call H7F(it,m5)
endif
endif
endif
elseif(i1==1160786242)then
if(IMF==1093683287)then
if((m5==null)or(not IsUnitType(m5,UNIT_TYPE_HERO)))then
elseif(GetUnitLifePercent(m5)<60.)then
call K6F(it,m5,true)
if((ME7(m5))and(MVF))then
set J4=IssueImmediateOrderById(it,$D020A)
endif
else
call FNF(it,m5)
endif
elseif(IMF==1093683257)then
call K6F(it,S17(1000.,it),true)
set hq[$F0+O5]=Bz+2.+(1.5*GetUnitAbilityLevel(it,1093683257))
set hq[16+O5]=Bz+180.-(30.*GetUnitAbilityLevel(it,1093683257))
elseif(IMF==1093683265)then
call K6F(it,S17(500.,it),true)
if(MVF)then
call UQ7(it)
endif
endif
elseif(i1==1160786241)then
if(IMF==1093684813)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
call K6F(it,m5,GetUnitLifePercent(it)>50.)
if((MVF)and((GetUnitLifePercent(it)>50.)or(GetUnitLifePercent(m5)<40.)))then
call J_7(.5)
set J4=M_7(it,$D0079,1093684815,0,m5)
endif
endif
elseif(IMF==1093684815)then
set m5=K2(300.,HC[O5])
if(m5!=null)then
call K6F(it,m5,true)
set J4=(MVF)and(((not kr(it))and(M_7(it,$D0275,1093684820,1093684824,m5)))or(M_7(it,$D0097,1093684813,0,m5)))
endif
elseif((IMF==1093684820)or(IMF==1093684824))then
set hq[O5]=Bz+90.
endif
elseif(i1==1429221456)then
if(IMF==1093685066)then
call J_7(GetUnitAbilityLevel(it,1093685066)+.6)
if((m5!=null)and(M87(m5))and(IsUnitType(m5,UNIT_TYPE_HERO))and(IsUnitVisible(m5,GetOwningPlayer(it))))then
call K6F(it,m5,GetUnitLifePercent(it)>50.)
endif
elseif((IMF==1093685067)or(IMF==1093752407))then
set hq[O5]=Bz+160.
call K6F(it,K2(500.,HC[O5]),true)
elseif(IMF==1093685065)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.))then
call FNF(it,m5)
endif
endif
elseif(i1==1160786243)then
if(IMF==1093681491)then
if((IsUnitEnemy(m5,GetOwningPlayer(it)))and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call K6F(it,m5,true)
endif
elseif(IMF==1093683765)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
call FNF(it,m5)
call K3F(it,m5)
if(MVF)then
if((GetUnitLifePercent(m5)<80.)or(GZ[O5]))then
set GZ[O5]=true
set J4=J8(O5,M_7(it,$D0100,1395667000,0,m5))
endif
set J4=(J4)or(IssueTargetOrderById(it,$D0118,m5))
endif
endif
elseif(IMF==1395667000)or(IMF==1395667029)then
set hq[O5]=Bz+165.
set m5=K2(500.,HC[O5])
if(m5!=null)then
call K6F(it,m5,true)
call TriggerSleepAction(.7)
if((MVF)and(MR7(it,ZU[RW]))and(not IsUnitInRange(it,m5,250.))and(GetUnitLifePercent(it)>70.)and(GetUnitAbilityLevel(it,1093678672)>1)and(Bz>hq[16+O5]))then
set J4=(GetHeroLevel(it)>5)and(KVF(it,m5))
endif
call TriggerSleepAction(.1)
if((MVF)and(IMF==1395667029)and(MR7(it,ZU[D44]))and(GetUnitState(it,UNIT_STATE_MANA)>525+50*GetUnitAbilityLevel(it,1395667029)))then
set J4=(UnitUseItem(it,bj_lastCreatedItem))
if J4 then
call TriggerSleepAction(.1)
set J4=M_7(it,$D0100,1395667000,0,m5)
endif
endif
endif
elseif(IMF==1093678672)then
set hq[16+O5]=Bz+20.
endif
elseif((i1==1211117641)or(i1==1211117642))then
if(IMF==1093684802)then
set m5=K2(200.,HC[O5])
if(m5!=null)then
call K6F(it,m5,true)
if(MVF)then
call KYF(M7[O5],m5)
call KYF(M7[16+O5],m5)
call KYF(M7[32+O5],m5)
call KYF(M7[48+O5],m5)
endif
endif
elseif(IMF==1093684792)then
set m5=S17(400.,it)
if((MVF)and(not ME7(it))and(m5!=null))then
call J_7(.5)
set J4=(GetUnitAbilityLevel(m5,1110456120)==0)and(KZF(it,m5))
endif
endif
elseif(i1==1311781207)then
if(IMF==1093742673)then
if((IsUnitEnemy(m5,GetOwningPlayer(it)))and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call K6F(it,m5,true)
set J4=(MVF)and(M_7(it,$D007F,1093684817,0,m5))
endif
elseif(IMF==1093684817)then
call K6F(it,m5,true)
set J4=(MVF)and(IsUnitType(m5,UNIT_TYPE_HERO))and(IssueTargetOrderById(it,$D0118,m5))
elseif(IMF==1093742668)then
set hq[O5]=Bz+300.-(GetUnitAbilityLevel(it,IMF)*50.)
endif
elseif(i1==1311780946)then
if(IMF==1093677385)then
set m5=K2(250.,HC[O5])
if((m5!=null)and(GetUnitLifePercent(m5)<60.))then
call K6F(it,m5,true)
call H7F(it,m5)
endif
elseif(IMF==1093685825)then
set m5=K2(250.,HC[O5])
if(m5!=null)then
call K6F(it,m5,true)
if((not ME7(it))and(MVF))then
set J4=M_7(it,$D010E,1093677385,0,m5)
endif
endif
elseif(IMF==1093685808)then
call J_7(1.)
call IV(GetUnitX(it),GetUnitY(it),1000.,Condition(function Kq),function KAF)
if(MVF)then
call UQ7(it)
endif
endif
elseif((i1==1211117650)or(i1==1211119433))then
if(IMF==1093685590)then
set m5=S17(550.,it)
if(m5!=null)then
if(GetUnitLifePercent(m5)<60.)then
call H7F(it,m5)
endif
if((MVF)and((GetUnitLifePercent(m5)<60.)or(GetUnitManaPercent(it)>60.)))then
set IN4=it
set J4=(MP7(1000.,it,Condition(function ny))>6)and(IssueTargetOrderById(it,$D02DB,m5))
endif
endif
elseif((IMF==1093685813)or(IMF==1093685811))then
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(IsUnitEnemy(m5,GetOwningPlayer(it)))and(GetUnitLifePercent(m5)<60))then
call K6F(it,m5,true)
if(IMF==1093685811)then
call K3F(it,m5)
set h4[16+O5]=m5
if((MVF)and(not ME7(it)))then
set IN4=it
set J4=(N97(it,1093685590,$D0003))or((MP7(1000.,it,Condition(function ny))>4)and(IssueTargetOrderById(it,$D02DB,m5)))
endif
endif
endif
endif
elseif(i1==1211117646)then
if(IMF==1093685573)then
set m5=K2(250.,HC[O5])
if((m5!=null)and(GetUnitLifePercent(m5)<60.))then
call K6F(it,m5,true)
call H7F(it,m5)
endif
elseif(IMF==1093685575)then
set UP=R2I(50.+(100.*GetUnitAbilityLevel(it,1093685573)))
if(m5!=null)then
set m5=S17(I2R(UP),m5)
endif
if((MVF)and(m5!=null))then
set IMF=R2I(bj_RADTODEG*Atan2(GetUnitY(it)-GetUnitY(m5),GetUnitX(it)-GetUnitX(m5)))
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093685573,true)
set J4=IssuePointOrderById(it,$D0079,GetUnitX(m5)+I2R(IMF)*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+I2R(IMF)*Sin(UP*bj_DEGTORAD))
endif
elseif(IMF==1093685579 or IMF==1093808465)then
set hq[O5]=Bz+100.
endif
elseif(i1==1211117624)then
if(IMF==1093682775)then
call K6F(it,m5,true)
elseif(IMF==1093683024)then
set m5=S17(600.,it)
if((m5!=null)and(GetUnitLifePercent(m5)<65.))then
call K6F(it,m5,true)
endif
endif
elseif(i1==1160785973)then
if((IMF==1093678388)or(IMF==1093677141))then
set UP=GetUnitAbilityLevel(it,IMF)
call K6F(it,S17(650.,it),true)
call J_7(5.)
if(IMF==1093678388)then
set hq[O5]=Bz+155.-(UP*20.)
else
set hq[O5]=Bz+145.-(UP*20.)
endif
endif
elseif(i1==1315988077)then
if(IMF==1093678669)then
call K6F(it,S17(250.,it),true)
set hq[O5]=Bz+12.
endif
elseif(i1==1211117616)then
if(IMF==1093677139)then
call K6F(it,S17(300.,it),true)
set hq[O5]=Bz+15.
set J4=(MVF)and(IssueImmediateOrderById(it,$D022E))
endif
elseif(i1==1311788343 or i1==1311788355 or i1==1311788367 or i1==1311788353 or i1==1311788354)then
if MVF and(IMF==1093815877)then
set J4=(h4[O5]!=null)and IssueTargetOrderById(it,$D0097,R_7(h4[O5]))
if J4 then
call TriggerSleepAction(.3)
endif
call IssueTargetOrderById(it,$D000F,h4[O5])
endif
if MVF and(IMF==1093687856)then
set I77=GetSpellTargetUnit()
if GetUnitTypeId(it)==1311788343 then
call IssueImmediateOrderById(it,$D00D4)
call TriggerSleepAction(.125)
endif
set J4=IssueTargetOrderById(it,$D0097,R_7(it))
if J4 then
call TriggerSleepAction(.125)
endif
call IssueTargetOrderById(it,$D000F,I77)
set I77=null
endif
elseif(i1==1311788363 or i1==1311788365)then
if MVF and(IMF==1093815601)then
set h4[O5]=GetSpellTargetUnit()
set J4=IssuePointOrderByIdLoc(it,$D0278,WA7(it,h4[O5],$F423F,3.3,0))
call TriggerSleepAction(.3)
call IssueTargetOrderById(it,$D000F,h4[O5])
elseif MVF and(IMF==1093815600)then
set m5=JD7((m5!=null)and(G0[$80+O5]),m5,S27((500+100*(GetUnitAbilityLevel(it,1093815601))),it,Condition(function k6)))
set J4=(m5!=null)and(G0[$80+O5]and(GetUnitState(it,UNIT_STATE_MANA)>225. or MP7(600,it,Condition(function RG7))>=1))and IssueTargetOrderById(it,$D007F,m5)
set h4[O5]=JD7(h4[O5]!=null or(not J4),h4[O5],m5)
endif
elseif(i1==1315074670)then
if(IMF==1093677622)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.))then
call FNF(it,m5)
endif
endif
elseif((i1==1215063922)or(i1==1211117638)or(i1==1211117637)or(i1==1211117639))then
if(IMF==1093677895)then
set hq[O5]=Bz+135.
set m5=h4[O5]
if((m5==null)or(not MVF))then
set m5=S17(700.,it)
call WQE(O5,m5,false,false)
endif
if(m5!=null)then
call K6F(it,m5,true)
call H7F(it,m5)
set J4=(MVF)and(((IsUnitInRange(it,m5,350.))and(M57(it,$D007F,1093681490,m5)))or(IssueTargetOrderById(it,$D000F,m5)))
endif
endif
elseif(i1==1164207469)then
if(IMF==1093682483)then
call K6F(it,m5,true)
endif
elseif((i1==1311781174)or(i1==1311781175)or(i1==1311911984)or(i1==1311911985)or(i1==1311781442))then
set m5=h4[O5]
if(IMF==1093748042)then
if m5==null then
set m5=S17(700.,it)
endif
if(m5!=null)then
call K6F(it,m5,true)
call H7F(it,m5)
endif
elseif(IMF==1093808461)and(m5!=null)and MVF then
if(m5!=null)and(IsUnitInRange(it,m5,200.))then
set J4=(i1==1311781174)and(N97(it,$D00AA,1093681733))
if J4 then
set i1=1311781175
endif
elseif(m5!=null)and((GetUnitLifePercent(m5)<15.)or((not G0[256+O5])and(I27(it)<2000.)))then
elseif(GetHeroLevel(it)>=6 or h4[O5]!=null)and(MZ7(it,ZU[D0]))then
set J4=(i1==1311781174)and(N97(it,$D00AA,1093681733))
endif
if(not J4)then
call IssueTargetOrderById(it,$D000F,m5)
endif
elseif(IMF==1093681733)and(m5!=null)and MVF then
call IssueTargetOrderById(it,$D000F,m5)
if(not J4)and(h4[O5]!=null)then
call TriggerSleepAction(.1)
if(i1!=1311781174)then
set J4=M57(it,$D00FA,1093808461,m5)
else
set J4=(IsUnitInRange(it,m5,400.)and(N97(it,$D0080,1093808462)))
endif
endif
endif
elseif(i1==1433631084)then
if(IMF==1093678160)then
call FNF(it,m5)
set hq[O5]=Bz+40.-(10.*GetUnitAbilityLevel(it,1093678160))
endif
elseif(i1==1315007329)then
if(IMF==1093678913)then
set hq[O5]=Bz+20.
if(MVF)then
call ExecuteFunc("JHF")
set J4=true
endif
endif
elseif(i1==1332898670)then
if(IMF==1093677136)then
set J4=(MVF)and((M_7(it,$D0216,1093685848,0,m5))or(IssueTargetOrderById(it,$D000F,m5)))
set hq[16+O5]=Bz+16.
endif
elseif(i1==1215128178)then
if(IMF==1093677616)then
set J4=(MVF)and(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.)and(M_7(it,$D00FA,'A2QB',0,m5))
elseif(IMF=='A2QB')then
set J4=(MVF)and(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.)and(M_7(it,$D0097,1093677616,0,m5))
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.))then
call FNF(it,m5)
endif
elseif((IMF==1093810503)or(IMF==1093810504))then
set hq[O5]=Bz+120.
call K6F(it,S17(700.,it),true)
endif
elseif(i1==1164799855)then
if(IMF==1093682264)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
call K6F(it,m5,true)
endif
set hq[O5]=Bz+35.-(GetUnitAbilityLevel(it,IMF)*5.)
elseif(IMF==1093682265 or IMF==1093752642)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.))then
call FNF(it,m5)
endif
endif
elseif(i1==1433105516)then
if(IMF==1093683511)then
set hq[16+O5]=Bz+15.
call K6F(it,m5,true)
if((MVF)and(IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(it)>5)or(ME7(m5))))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(h8[16+O5])-GetUnitY(m5),GetUnitX(h8[16+O5])-GetUnitX(m5)))
set J4=IssuePointOrderById(it,$D0278,GetUnitX(m5)+100.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+100.*Sin(UP*bj_DEGTORAD))
endif
elseif(IMF==1093681713)then
set b5=HC[O5]
set m5=K2(400.,b5)
if(m5!=null)then
call H7F(it,m5)
endif
if((MVF)and(not kr(it)))then
set J4=(m5!=null)and(GetUnitLifePercent(m5)<75.)and((NG7(not IsUnitAlly(it,Z7[0]))<=2)or(GetHeroLevel(it)<$B))and(IssuePointOrderByIdLoc(it,$D00DC,b5))
if(not J4)then
set UP=MO7(400.,b5,Condition(function QN7))
set J4=((UP>1)or(UP==NG7(not IsUnitAlly(it,Z7[0])))or((UP>0)and(MO7(700.,b5,Condition(function QN7))>1)and(MO7(700.,b5,Condition(function QZ7))>0)))and(IssuePointOrderByIdLoc(it,$D00DC,b5))
endif
endif
elseif(IMF==1093747288)then
set UP=GetUnitAbilityLevel(it,IMF)
set hq[O5]=Bz+210.-(UP*10.)
set m5=S17(400.,it)
set J4=(MVF)and(m5!=null)and(IssueTargetOrderById(it,$D000F,m5))
endif
elseif(i1==1214409837)then
if(IMF==1093679157)then
set hq[O5]=Bz+10.
call MoveLocation(Ha,GetUnitX(it)+400*Cos(GetUnitFacing(it)*bj_DEGTORAD),GetUnitY(it)+400*Sin(GetUnitFacing(it)*bj_DEGTORAD))
set m5=K2(400.,Ha)
if(m5!=null)then
call H7F(it,m5)
endif
endif
elseif(i1==1316252014)then
if(IMF==1093678137)then
set hq[32+O5]=Bz+14.
if(GetUnitLifePercent(m5)<60.)then
call K6F(it,m5,true)
endif
elseif(IMF==1093678405)then
set hq[O5]=Bz+25.
elseif(IMF==1093681745)then
set hq[16+O5]=Bz+35.
set m5=K2(500.,HC[O5])
if(m5!=null)then
call H7F(it,m5)
endif
if((MVF)and(m5!=null)and(MR7(it,ZU[D74])))then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,m5)
endif
elseif(IMF==1093678645)then
set hq[O5]=Bz
set hq[16+O5]=Bz
set hq[32+O5]=Bz
set hq[80+O5]=Bz
set hq[96+O5]=Bz
endif
elseif(i1==1328558160)then
if(IMF==1093682998)then
if((MVF)and(GetHeroLevel(it)>5)and((not ME7(it))or(Id(O5))))then
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.)and(not IsUnitInRange(it,m5,300.)))then
set GZ[O5]=true
set J4=(J8(O5,M_7(it,$D00FA,1093682766,0,m5)))
endif
endif
elseif(IMF==1093683000)then
call K6F(it,S17(700.,it),true)
elseif(IMF==1093683011)then
call K6F(it,S17(500.,it),true)
endif
elseif(i1==1212363833)then
if(IMF==1093678933)then
set hq[32+O5]=Bz+120.
call J_7(.5)
set J4=(MVF)and(not ME7(it))and(N97(it,$D009B,1093678643))
elseif(IMF==1093809220)then
set hq[O5]=Bz+14.
call K6F(it,m5,true)
set J4=(MVF)and(not ME7(it))and((M57(it,$D00FA,1093815125,m5))or(N97(it,$D009B,1093678643)))
elseif(IMF==1093678643)and(MVF and(h4[O5]!=null)and(not ME7(it)))then
set J4=(X47(it,h4[O5]))and(N97(it,$D022E,1093815125))
endif
elseif(i1==1315070563)then
if(IMF==1093678407)then
set hq[$F0+O5]=Bz+5.
set m5=S17(600.,it)
if(m5!=null)then
call H7F(it,m5)
endif
if(MVF)then
loop
if((m5!=null)and(GetUnitLifePercent(m5)<GetUnitLifePercent(it)))then
call IssuePointOrderById(it,$D0012,GetUnitX(m5)+GetRandomReal(0,300.)-150.,GetUnitY(m5)+GetRandomReal(0,300.)-150.)
elseif((not G0[O5])and(G0[$80+O5])and(not ME7(it)))then
if(MP7(200.,it,Condition(function k3))==0)then
call jW(it,$D000F,h8[O5])
endif
endif
if(not G0[$80+O5])then
set m5=null
endif
exitwhen(Bz>=hq[$F0+O5])
call J_7(.5)
endloop
set m5=S17(500.,it)
if((m5!=null)and(not ke(m5))and(GetUnitState(m5,UNIT_STATE_LIFE)<1200.)and(GetUnitAbilityLevel(m5,1113815395)==0)and(GetUnitAbilityLevel(m5,1113815346)==0))then
set UP=MP7(850.,m5,Condition(function QN7))
set J4=((UP-(MP7(850.,m5,Condition(function k3))))>=0)and(M_7(it,$D0278,1093684529,1093747032,m5))
endif
else
call FNF(it,m5)
endif
endif
elseif(i1==1214931305)then
if(IMF==1093686067)then
set m5=S17(450.,it)
if((MVF)and(m5!=null)and(not ME7(it)))then
set J4=IssueImmediateOrderById(it,$D0278)
endif
elseif((IMF==1093677906)or(IMF==1093681494))then
set hq[O5]=Bz+180.-(GetUnitAbilityLevel(it,IMF)*30.)
endif
elseif(i1==1212365106)then
if(IMF==1093685831)then
set hq[O5]=Bz+15.
set b5=HC[O5]
set m5=K2(I2R($FA+(25*GetUnitAbilityLevel(it,1093685831))),b5)
if(m5!=null)then
call K6F(it,m5,true)
set J4=(MVF)and(not ME7(it))and(G0[$80+O5])and(not IsUnitInRangeLoc(m5,b5,200.))and(IssueTargetOrderById(it,$D0278,m5))
endif
endif
elseif(i1==1211117617)or(i1==1211122513)then
if(IMF==1093686067)then
set m5=S17(800.,it)
set J4=(MVF)and(m5!=null)and(N97(it,$D02B7,1093752648))
endif
elseif(i1==1211117633)then
if(IMF==1093684310)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(IsUnitEnemy(m5,GetOwningPlayer(it)))and(GetUnitLifePercent(m5)<60.))then
call K6F(it,m5,true)
endif
elseif(IMF==1093810260)then
set hq[O5]=Bz+30.
elseif(IMF==1093684308 or IMF==1093747539)then
set hq[16+O5]=Bz+120.
endif
elseif(i1==1211117620)then
if((IMF==1093677392)or(IMF==1093679450))then
if(UP!=3)then
set hq[O5]=Bz+210.-(UP*60.)
else
set hq[O5]=Bz+55.
endif
call K6F(it,m5,true)
endif
elseif(i1==1432580716 or i1==1429221720)then
if(IMF==1093684300)then
set b5=HC[O5]
set m5=K2(300.,b5)
if(m5!=null)then
call K6F(it,m5,true)
call TriggerSleepAction(1.)
set J4=(MVF)and(IsUnitInRange(it,m5,250.))and(MO7(300.,b5,Condition(function k0))<=2)and(IssueTargetOrderById(it,$D0278,m5))
endif
elseif(IMF==1093681754)then
set hq[O5]=Bz+15.
call J_7(1.2)
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call K6F(it,m5,true)
endif
elseif(IMF==1093752391)then
set T34[64+O5]=Bz+30
call J_7(.8)
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call K6F(it,m5,true)
endif
endif
elseif(i1==1333027688)then
if(IMF==1093682252)then
call K6F(it,S17(250.,it),true)
elseif(IMF==1093682248 or IMF==1093750594)then
set hq[O5]=Bz+170.-(GetUnitAbilityLevel(it,IMF)*20.)
call K6F(it,S17(500.,it),true)
elseif(IMF==1093686091)then
set m5=K3(900.,it,Condition(function Kr))
if(m5!=null)then
call K6F(it,m5,true)
set J4=(MVF)and(GetUnitLifePercent(it)>50.)and(GetUnitLifePercent(m5)<60.)and(G0[$80+O5])and(MP7(700.,m5,Condition(function QN7))<=2)and(KVF(it,m5))
endif
endif
elseif(i1==1311781185)then
if(IMF==1093743692)then
if(GetUnitLifePercent(m5)<60.)or(GetUnitManaPercent(it)>60 or GetUnitState(it,UNIT_STATE_MANA)>400.)then
set J4=(MVF)and IssueTargetOrderById(it,$D007F,m5)
call K6F(it,m5,true)
endif
elseif(IMF==1093684275)then
set hq[O5]=Bz+160.
elseif(IMF==1093684314)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.))then
call FNF(it,m5)
endif
endif
elseif(i1==1211117643)then
if(IMF==1093678658)then
call K6F(it,S17(300.,it),true)
endif
if(IMF==1093678410 or IMF==1093678664 or IMF==1093681483 or IMF==1093748313)and MVF then
set b5=HC[O5]
if(h9[48+O5]!=null)and(IsUnitInRangeLoc(h9[48+O5],b5,600.))then
set LD4=300
call MoveLocation(HA,GetUnitX(h9[48+O5]),GetUnitY(h9[48+O5]))
if GetUnitUserData(h9[48+O5])>100 then
set LD4=$96
endif
else
set LD4=$96
call MoveLocation(HA,GetLocationX(b5),GetLocationY(b5))
endif
if(not J4)and(Bz>T34[16+O5])and(GetUnitState(it,UNIT_STATE_MANA)>XKE(it,1093678410,4)+XKE(it,1093678658,4))then
call MoveLocation(HA,GetLocationX(HA)+GetRandomReal(-LD4,LD4),GetLocationY(HA)+GetRandomReal(-LD4,LD4))
set J4=(M27(it,$D0136,1093678410,HA))
endif
set bj_lastLoadedUnit=it
if(not J4)and(Bz>T34[32+O5])and(GetUnitState(it,UNIT_STATE_MANA)>XKE(it,1093678664,4)+XKE(it,1093678658,4))and(MO7(600.,HA,Condition(function SS7))==0)then
call MoveLocation(HA,GetLocationX(HA)+GetRandomReal(-100.,100.),GetLocationY(HA)+GetRandomReal(-100.,100.))
set J4=(M27(it,$D0092,1093678664,HA))
endif
if((not J4)and(GetHeroLevel(it)>5)and(Bz>T34[O5])and(GetUnitState(it,UNIT_STATE_MANA)>XKE(it,1093681483,4)+XKE(it,1093748313,4)+XKE(it,1093678658,4))and(MO7(600.,HA,Condition(function KG))<8))then
set hq[$F0+O5]=Bz+5.
set J4=(N47(it,$D0218,1093681483,1093748313,GetLocationX(HA)+GetRandomReal(-LD4,LD4),GetLocationY(HA)+GetRandomReal(-LD4,LD4)))
endif
if(not J4)and((IMF==1093678410)or(IMF==1093678664))and MVF then
call DPF(it,false)
endif
endif
elseif(i1==1215657064)then
if(IMF==1093684291)then
set m5=S17(550.,it)
set J4=(MVF)and(m5!=null)and(((IsUnitInRange(it,m5,250.))and(N97(it,$D0080,1093677913)))or(IssueTargetOrderById(it,$D000F,m5)))
endif
elseif(i1==1214344551)then
if(IMF==1093678938)then
set m5=S17(700.,it)
call K6F(it,m5,true)
if((MVF)and(m5!=null))then
set J4=KUF(it)
call J_7(1.)
call IssueTargetOrderById(it,$D000F,m5)
else
call J_7(1.)
endif
call J_7(7.)
set hq[O5]=Bz+152.
endif
elseif(i1==1211117636)then
if(IMF==1093685042 or IMF==1093810233)then
set hq[O5]=Bz+60.
call K6F(it,m5,true)
if(MVF)then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(it),GetUnitX(m5)-GetUnitX(it)))
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093685041,true)
set GZ[O5]=true
set J4=J8(O5,IssuePointOrderById(it,$D00FA,GetUnitX(it)+900.*Cos(UP*bj_DEGTORAD),GetUnitY(it)+900.*Sin(UP*bj_DEGTORAD)))
endif
elseif(IMF==1093685041)then
if(m5==null)then
set m5=K2(300.,HC[O5])
endif
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call K6F(it,m5,true)
endif
endif
elseif(i1==1160786000)then
if(IMF==1093685047)then
set m5=S17(500.,it)
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.))then
call K6F(it,m5,true)
set J4=(MVF)and(M27(it,$D0264,1093685046,WA7(it,m5,2000.,.65,1100.)))
endif
elseif(IMF==1093685046)then
set hq[O5]=Bz+16.
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call K6F(it,m5,true)
call J_7(1.5)
set J4=(MVF)and(GetUnitLifePercent(m5)<65.)and(GetUnitState(m5,UNIT_STATE_LIFE)>150.)and(IsUnitType(m5,UNIT_TYPE_STUNNED))and(M_7(it,$D009D,1093685045,0,m5))
endif
elseif(IMF==1093685045)then
if(m5==null)then
set m5=K2(650.,HC[O5])
endif
call K6F(it,m5,true)
if(m5!=null)then
call H7F(it,m5)
set J4=(MVF)and(M27(it,$D0264,1093685046,WA7(it,m5,2000.,.65,1100.)))
endif
endif
elseif((i1==1311781193)or(i1==1311781192)or(i1==1311781204)or(i1==1311781194))then
if(IMF==1093683532)then
set hq[O5]=Bz+22.
set m5=K2(600.,HC[O5])
if(m5!=null)then
call K6F(it,m5,true)
call H7F(it,m5)
endif
elseif(IMF==1093750345)then
if((M87(m5))and(GetUnitLifePercent(m5)<65.))then
call FNF(it,m5)
endif
elseif(IMF==1095656306)then
set hq[512+O5]=Bz+6.
set m5=S17(500.,it)
if(m5!=null)then
call H7F(it,m5)
set J4=(MVF)and(not ME7(it))and(IssueTargetOrderById(it,$D000F,m5))
endif
endif
elseif(i1==1311781206)then
if(IMF==1093684054)then
set hq[O5]=Bz+12.
set m5=S17(400.,it)
if((m5!=null)and(GetUnitLifePercent(m5)<60.))then
call K6F(it,m5,true)
endif
elseif(IMF==1093684280)then
set hq[32+O5]=Bz+25.
call J_7(.1)
if(m5==null)then
set m5=K2(200.,HC[O5])
endif
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call K6F(it,m5,true)
endif
elseif(IMF==1093684053)then
set hq[16+O5]=Bz+160.
endif
elseif(i1==1211117651)then
elseif(i1==1211117649)then
if(IMF==1093685586)then
call K6F(it,m5,true)
elseif(IMF==1093685582)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.))then
call FNF(it,m5)
endif
endif
elseif(i1==1160786265)then
if(IMF==1093748033)then
call K6F(it,S17(300.,it),true)
endif
elseif(i1==1311780930)then
if(IMF==1093686083)then
set hq[16+O5]=Bz+20.
set m5=S17(400.,it)
if(m5!=null)then
call K6F(it,m5,true)
if((MVF)and(GetUnitLifePercent(m5)<60.))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(NF7(m5)),GetUnitX(m5)-GetUnitX(NF7(m5))))
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093686072,true)
set GZ[O5]=true
set J4=J8(O5,IssuePointOrderById(it,$D0079,GetUnitX(m5)+250.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+250.*Sin(UP*bj_DEGTORAD)))
endif
endif
elseif((IMF==1093686072)or(IMF==1093751120))then
set hq[O5]=Bz+85.
set m5=K2(400.,HC[O5])
if(m5!=null)then
call K6F(it,m5,true)
set J4=(MVF)and(IsUnitInRange(it,m5,400.))and(IssueImmediateOrderById(it,$D0278))
endif
elseif(IMF==1093686081)then
set m5=S17(400.,it)
if((m5!=null)and(not ME7(it)))then
call K6F(it,m5,true)
set J4=(MVF)and(IssueImmediateOrderById(it,$D0278))
if((not J4)and(MVF)and(GetUnitLifePercent(m5)<60.))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(NF7(m5)),GetUnitX(m5)-GetUnitX(NF7(m5))))
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093686072,true)
set GZ[O5]=true
set J4=J8(O5,IssuePointOrderById(it,$D0079,GetUnitX(m5)+250.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+250.*Sin(UP*bj_DEGTORAD)))
endif
endif
if(MVF)then
call J_7(1.)
call UQ7(it)
endif
endif
elseif(i1==1311786311)then
if(IMF==1093743178)then
if MVF and GetUnitAbilityLevel(GetSpellTargetUnit(),1112560453)>1 then
call WQE(O5,m5,false,false)
set J4=IssueTargetOrderById(it,$D0265,m5)
endif
endif
elseif(i1==1211117652)then
if(IMF==1093687864)or(IMF==1093747542)or(IMF==1093687861)and MVF then
set m5=h4[O5]
if(m5==null)or(not IsUnitInRange(it,m5,$AA))then
set m5=S17(170.,it)
if m5!=null then
call WQE(O5,m5,false,false)
endif
endif
if(IMF==1093687861)then
if ME7(it)then
set bj_lastReplacedUnit=h9[16+O5]
set J4=true
elseif m5==null then
if h4[O5]!=null then
set bj_lastReplacedUnit=h4[O5]
else
set bj_lastReplacedUnit=h8[O5]
endif
set J4=true
endif
if J4 then
set m5=O77(GetHandleId(it),"AI|Cog1")
set bj_lastLoadedUnit=O77(GetHandleId(it),"AI|Cog2")
if KE7(m5,bj_lastReplacedUnit)>KE7(bj_lastLoadedUnit,bj_lastReplacedUnit)then
set m5=bj_lastLoadedUnit
endif
set bj_lastLoadedUnit=O77(GetHandleId(it),"AI|Cog3")
if KE7(m5,bj_lastReplacedUnit)>KE7(bj_lastLoadedUnit,bj_lastReplacedUnit)then
set m5=bj_lastLoadedUnit
endif
set bj_lastLoadedUnit=O77(GetHandleId(it),"AI|Cog4")
if KE7(m5,bj_lastReplacedUnit)>KE7(bj_lastLoadedUnit,bj_lastReplacedUnit)then
set m5=bj_lastLoadedUnit
endif
if m5!=null then
set h4[96+O5]=m5
set J4=IssueTargetOrderById(it,$D000F,m5)
if J4 then
set hq[832+O5]=Bz+1.
endif
loop
exitwhen GetWidgetLife(h4[96+O5])<.405
set J4=IssueTargetOrderById(it,$D000F,m5)
call J_7(.5)
endloop
call J3(it,false)
endif
endif
endif
if(not J4)and(m5!=null)then
if(not J4)and(Bz>T34[32+O5])and(m5!=null)and(IsUnitInRange(it,m5,$D2))then
set J4=IssueImmediateOrderById(it,$D0265)
endif
if(not J4)and(Bz>T34[16+O5])and(m5!=null)and(IsUnitInRange(it,m5,275))then
set J4=IssueImmediateOrderById(it,$D0278)
endif
endif
endif
elseif(i1==1211119187)then
set bj_forLoopAIndex=(GetUnitAbilityLevel(it,1093742926)-2)
if(IMF==1093742926)and(MVF)and(h4[O5]!=null)and(bj_forLoopAIndex>=0)and(Bz>T34[16+O5])and(not ME7(it))then
set T34[16+O5]=Bz+4.
set b5=HC[O5]
if bj_forLoopAIndex>0 then
call J_7(bj_forLoopAIndex)
endif
call M27(it,$D0079,1093743414,b5)
endif
elseif(i1==1328558389)then
if IMF==1093747000 and MVF then
set m5=h4[O5]
set b5=HC[O5]
if m5==null or((not IsUnitInRange(it,m5,300))and(not IsUnitInRangeLoc(it,b5,300)))then
set m5=S07(300.,it)
set bj_lastReplacedUnit=S57(300.,it,GetLocationX(b5),GetLocationY(b5))
endif
if(Bz>T34[16+O5])then
set J4=(h4[O5]!=null)
if GetUnitLifePercent(bj_lastReplacedUnit)<70. then
set J4=true
elseif GetUnitLifePercent(m5)<70. then
set J4=true
endif
set J4=((J4)and(IssueImmediateOrderById(it,$D0265)))
endif
if(not J4)then
set J4=IssueImmediateOrderById(it,$D00F9)
endif
elseif IMF==1093747009 and MVF then
set m5=h4[O5]
set b5=M07(it)
if(SK4[O5]!=null)and(GetWidgetLife(SK4[O5])>.405)then
call MoveLocation(b5,GetUnitX(SK4[O5]),GetUnitY(SK4[O5]))
endif
set J4=false
if((m5==null or((not IsUnitInRange(it,m5,475))and(not IsUnitInRangeLoc(m5,b5,475)))))then
if G0[256+O5]then
set m5=S07(475.,it)
set bj_lastReplacedUnit=S57(475.,it,GetLocationX(b5),GetLocationY(b5))
if GetUnitLifePercent(m5)<GetUnitLifePercent(bj_lastReplacedUnit)then
call WQE(O5,m5,false,false)
set J4=true
else
set h4[O5]=bj_lastReplacedUnit
set m5=bj_lastReplacedUnit
set J4=true
endif
endif
else
set J4=true
endif
if((J4)and(Bz>T34[O5])and(not IsUnitIllusion(m5))and(GetUnitLevel(it)>=6)and(h4[O5]!=null)and(IsUnitInRange(it,m5,1200.)))then
set J4=(IssuePointOrderByIdLoc(it,$D0278,M07(m5)))
else
set J4=false
endif
if(not J4)then
set J4=IssueImmediateOrderById(it,$D00F9)
endif
endif
elseif(i1==1328558390)then
if IMF==1093744975 then
if MVF then
set J4=N97(it,$D00D4,1093744986)
if J4 then
call J_7(.1)
call jW(it,$D0012,h9[O5])
endif
endif
endif
elseif(i1==1160786504)then
if IMF==1093751608 and MVF then
if(MP7(450,m5,Condition(function Q_7))<=1)then
set J4=M57(it,$D0079,1093751618,m5)
endif
elseif IMF==1093751618 then
set m5=O77(GetHandleId(it),"AI|SoulCatcherTgt")
if MVF then
if(h4[O5]==null)or(m5!=h4[O5]and GetUnitLifePercent(m5)<GetUnitLifePercent(h4[O5]))then
call WQE(O5,m5,false,false)
endif
endif
call K3F(it,m5)
endif
elseif(i1==1160786520)then
if(IMF==1093809991)then
set m5=S17(500.,it)
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.))then
call K6F(it,m5,true)
set J4=(MVF)and(M_7(it,$D00F6,1093809990,0,m5))
endif
elseif(IMF==1093809990)then
set hq[O5]=Bz+18.
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call K6F(it,m5,true)
endif
if(MVF)then
set CN4=m5
set bj_lastLoadedUnit=S17(600.,m5)
set CN4=null
if bj_lastLoadedUnit==null then
if ME7(it)then
set MXF=Atan2(GetUnitY(m5)-GetUnitY(it),GetUnitX(m5)-GetUnitX(it))
set J4=IssuePointOrderById(it,$D0276,GetUnitX(m5)+375*Cos(MXF),GetUnitY(m5)+375*Sin(MXF))
elseif ME7(m5)or(not IsUnitType(m5,UNIT_TYPE_MELEE_ATTACKER))then
set J4=jW(it,$D0276,it)
endif
else
set J4=jW(it,$D0276,bj_lastLoadedUnit)
endif
set bj_lastLoadedUnit=null
endif
elseif IMF!=1093809992 and IMF!=1093810008 and hq[816+O5]>Bz and MVF then
set G0[288+O5]=true
call MWF()
endif
elseif(i1==1160786507)then
if(IMF==1093813065)then
call K6F(it,m5,true)
call K6F(m5,it,true)
endif
elseif(i1==1311788336)then
if IMF==1093814860 and MVF then
call J_7(.2)
set m5=S17(350.,it)
set bj_lastCreatedUnit=it
if(m5!=null)and(Bz>T34[16+O5])and((h4[O5]!=null)or(GetUnitLifePercent(m5)<70))and(MP7(400.,it,Condition(function R47))<=2)then
set J4=N97(it,$D022E,1093814323)
endif
endif
elseif(i1==1211122767)then
if(m5==null)then
set m5=h4[O5]
endif
if(not J4)and(MVF)and(Bz>T34[O5])and(YO8(m5))then
set J4=(m5!=null)and(IssueTargetOrderById(it,$D02B6,m5))
endif
if(IMF==1093814350)then
if MVF and(not J4)and(Bz>T34[16+O5])then
set J4=(m5!=null)and(M57(it,$D0097,1093812805,m5))
endif
endif
elseif(i1==1160786738)then
if(IMF==1093813557)then
set b5=HC[O5]
set m5=K2(300.,b5)
if(m5!=null)then
call H7F(it,m5)
endif
endif
endif
if((MVF)and(not J4)and(GetUnitCurrentOrder(it)==0))then
call J3(it,true)
endif
set it=null
set m5=null
set b5=null
endfunction
function MYF takes nothing returns nothing
local unit I_7=GetTriggerUnit()
local integer IMF=GetSpellAbilityId()
local integer i1=GetUnitTypeId(I_7)
local integer O5=GetPlayerId(GetOwningPlayer(I_7))
local integer i
local boolean J4=false
if G0[288+O5]then
set G0[288+O5]=false
set i1=eY[400+O5]
endif
if(PT4)then
set hq[O5]=.0
set hq[16+O5]=.0
set hq[32+O5]=.0
if i1==1211117653 then
set i=1
loop
exitwhen i>$A
set T34[i*16+O5]=0
set i=i+1
endloop
endif
endif
if(not PT4)and i1!=1211117653 then
if i1==1160786520 then
if(IMF==1093809990)then
set T34[$B0+O5]=Bz+I2R(LoadInteger(C_4,IMF,-1+GetUnitAbilityLevel(I_7,IMF)))
elseif IMF==1093809991 then
set T34[$C0+O5]=Bz+I2R(LoadInteger(C_4,IMF,-1+GetUnitAbilityLevel(I_7,IMF)))
elseif IMF==1093809992 then
set T34[$A0+O5]=Bz+I2R(LoadInteger(C_4,IMF,-1+GetUnitAbilityLevel(I_7,IMF)))
elseif IMF!=1093810008 and hq[816+O5]>Bz then
set G0[288+O5]=true
call MYF()
endif
elseif(IMF==eY[336+O5])then
set T34[16+O5]=Bz+I2R(LoadInteger(C_4,IMF,-1+GetUnitAbilityLevel(I_7,IMF)))
elseif IMF==eY[352+O5]then
set T34[32+O5]=Bz+I2R(LoadInteger(C_4,IMF,-1+GetUnitAbilityLevel(I_7,IMF)))
elseif IMF==eY[368+O5]then
set T34[48+O5]=Bz+I2R(LoadInteger(C_4,IMF,-1+GetUnitAbilityLevel(I_7,IMF)))
elseif IMF==eY[$AC+O5]or IMF==eY[$BC+O5]then
set bj_forLoopAIndex=0
if IMF==eY[$BC+O5]then
set bj_forLoopAIndex=LoadInteger(C_4,IMF,-1+GetUnitAbilityLevel(I_7,IMF))
endif
if bj_forLoopAIndex==0 then
set bj_forLoopAIndex=LoadInteger(C_4,eY[$AC+O5],-1+GetUnitAbilityLevel(I_7,IMF))
endif
set T34[O5]=Bz+I2R(bj_forLoopAIndex)
elseif(IMF==1093682736)then
set T34[64+O5]=Bz+I2R(LoadInteger(C_4,IMF,-1+GetUnitAbilityLevel(I_7,IMF)))
elseif(IMF==1093682760)then
set T34[80+O5]=Bz+I2R(LoadInteger(C_4,IMF,-1+GetUnitAbilityLevel(I_7,IMF)))
elseif IMF==1093683265 then
set T34[64+O5]=Bz+8.
if TZ7(Player(O5))then
if h4[O5]!=null then
call TriggerSleepAction(.5)
set J4=(IsUnitInRange(I_7,h4[O5],700))and((IssueTargetOrderById(I_7,$D02B6,h4[O5]))or(IssueTargetOrderById(I_7,$D000F,h4[O5])))
endif
endif
endif
endif
endfunction
function MZF takes nothing returns boolean
return((IsUnitType(GetAttacker(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER)and(not IsUnitIllusion(GetAttacker()))and(IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))))!=null
endfunction
function MAF takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(hr)))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(Q87(GetFilterUnit())))!=null
endfunction
function MBF takes unit it returns integer
local integer kt=GetUnitAbilityLevel(it,1093682248)
local integer MCF
if(kt<1)then
set kt=GetUnitAbilityLevel(it,1093750594)
endif
if(kt>0)then
set hr=it
set MCF=MP7(500.,it,Condition(function MAF))-1
if(MCF<=2)then
return 0
endif
return $8C+(50*kt)+((25+($A*kt))*MCF)
endif
return 0
endfunction
function M3F takes nothing returns nothing
call IssueTargetOrderById(GetEnumUnit(),$D000F,GetTriggerUnit())
endfunction
function M6F takes nothing returns nothing
local boolexpr Ig=Condition(function KH)
call GroupClear(iH)
call GroupEnumUnitsOfPlayer(iH,GetOwningPlayer(GetAttacker()),Ig)
call ForGroup(iH,function M3F)
call DestroyBoolExpr(Ig)
set Ig=null
endfunction
function MLF takes nothing returns nothing
local unit IB=GetAttacker()
local unit m5=GetTriggerUnit()
local integer i1=GetUnitTypeId(IB)
local integer O5=GetPlayerId(GetOwningPlayer(IB))
local location b5=null
local integer UP
local boolean M1F
local boolean J4=false
set GZ[48+O5]=IsUnitType(m5,UNIT_TYPE_HERO)
set h4[80+O5]=m5
if((not Jw(IB))or(GZ[32+O5]))then
set IB=null
set m5=null
return
else
set GZ[32+O5]=true
call TriggerSleepAction(.7)
if((not M87(m5))or(not M87(IB))or(not is(IB)))then
set GZ[32+O5]=false
set IB=null
set m5=null
return
endif
endif
if(IsUnitType(m5,UNIT_TYPE_HERO))then
if(((GetUnitCurrentOrder(m5)==$D0005)or(GetUnitLifePercent(m5)<60.))and(Bz>hq[480+O5]))then
call FNF(IB,m5)
if(h4[O5]==null)then
call WQE(O5,m5,false,false)
endif
endif
if(not J4)and(MR7(IB,ZU[D74]))then
set J4=(GetUnitLifePercent(m5)<65.)and(UnitUseItemTarget(IB,bj_lastCreatedItem,m5))
endif
if(not J4)and(MR7(IB,ZU[U3]))then
set J4=(GetUnitLifePercent(m5)<50.)and(UnitUseItemTarget(IB,bj_lastCreatedItem,m5))
endif
if(not J4)and(MR7(IB,ZU[FC]))then
set J4=(GetUnitLifePercent(m5)<50.)and(UnitUseItemTarget(IB,bj_lastCreatedItem,m5))
endif
if(not J4)and(MR7(IB,ZU[R3]))then
set J4=(GetUnitLifePercent(m5)<50.)and(WH7(m5)!=1)and(UnitUseItemTarget(IB,bj_lastCreatedItem,m5))
endif
if(not J4)and(MR7(IB,ZU[DP4]))then
set J4=(GetUnitLifePercent(m5)<65.)and(UnitUseItem(IB,bj_lastCreatedItem))
endif
if(not J4)and(MR7(IB,ZU[DR4])and(Bz>T34[$F0+O5])and(YM8(m5)==false)and(UC7(m5)==false))then
set J4=(GetUnitLifePercent(m5)<60.)and(UnitUseItemTarget(IB,bj_lastCreatedItem,m5))
endif
if(not J4)and(MR7(IB,ZU[R7t])and(Bz>T34[$F0+O5])and(YM8(m5)==false)and(UC7(m5)==false))then
set J4=(GetUnitLifePercent(m5)<80.)and(UnitUseItemTarget(IB,bj_lastCreatedItem,m5))
endif
if(not J4)and(MR7(IB,ZU[P1]))then
set J4=(GetUnitLifePercent(m5)<50.)and(GetUnitLifePercent(IB)>70.)and(Bz>hq[64+O5])and(G0[256+O5])and(MC7(IB,ZU[P1]))
endif
if(not J4)and(MR7(IB,ZU[T2]))then
set J4=(GetUnitLifePercent(m5)<70.)and(h4[O5]!=null)and(UnitUseItem(IB,bj_lastCreatedItem))
endif
if(not J4)and(MR7(m5,ZU[AL])and(GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and(GetUnitLifePercent(m5)<90.)and(IsUnitType(IB,UNIT_TYPE_HERO))and(YM8(IB)==false)and((IsUnitInRange(IB,m5,200.)) or(IsUnitInRange(IB,m5,670.)))and(TA7(GetOwningPlayer(IB)))and(TA7(GetOwningPlayer(m5)))and((IsUnitType(IB,UNIT_TYPE_MELEE_ATTACKER))or(IsUnitType(IB,UNIT_TYPE_RANGED_ATTACKER))))then
set TB4=true
set J4=(UnitUseItem(m5,bj_lastCreatedItem))
endif
if(not J4)and(MR7(IB,ZU[D1])or MR7(IB,ZU[E1]))then
set J4=(GetUnitLifePercent(m5)<50. or MG7(m5))and(UnitCountBuffsExBJ(bj_BUFF_POLARITY_NEGATIVE,bj_BUFF_RESIST_EITHER,m5,false,false)==0)and(UnitUseItemTarget(IB,bj_lastCreatedItem,m5))
endif
if(not J4)and(MZ7(IB,ZU[Y0]))then
set GZ[$E0+O5]=true
set J4=(GetUnitLifePercent(m5)<70.)and(i1!=1164277357)and(UnitUseItem(IB,bj_lastCreatedItem))
set GZ[$E0+O5]=false
endif
if(not J4)and(MR7(IB,ZU[M3]))then
set J4=(m5!=null)and(UnitUseItemTarget(IB,bj_lastCreatedItem,m5))
endif
if(not J4)and(MR7(IB,ZU[DM4])and(OT7(IB,"ArmletOfMordigan|Active")==false)and(GetUnitLifePercent(IB)>90.)and(IsUnitInRange(IB,m5,150.)))then
set J4=(m5!=null)and(UnitUseItem(IB,bj_lastCreatedItem))
endif
if(not J4)and(MR7(IB,ZU[DK4])and(OT7(IB,"ArmletOfMordigan|Active"))and((not IsUnitInRange(IB,m5,150.))or(GetUnitLifePercent(IB)<60.)))then
set J4=(UnitUseItem(IB,bj_lastCreatedItem))
endif
if((h4[O5]!=null)and(KTF(IB)))then
set J4=KUF(IB)
endif
if(i1==1429221424)then
set J4=N97(IB,$D022E,1093815119)
endif
elseif(IsUnitType(m5,UNIT_TYPE_STRUCTURE))then
if(MR7(IB,ZU[P1]))then
set J4=(GetUnitLifePercent(m5)<20.)and(GetUnitLifePercent(IB)>60.)and(Bz>hq[64+O5])and(iy(IB))and(MC7(IB,ZU[P1]))
elseif(MR7(IB,ZU[Y0]))then
set GZ[$E0+O5]=true
set J4=(GetUnitLifePercent(m5)<40.)and(i1!=1164277357)and(UnitUseItem(IB,bj_lastCreatedItem))
set GZ[$E0+O5]=false
endif
if(i1==1211117653 and(not J4))then
call WQE(O5,m5,false,false)
set J4=((Bz>T34[64+O5])and(UG7(IB,A_4,A_4,A54,1093686863)and(IssueImmediateOrderById(IB,$D00A4))))or((Bz>T34[$80+O5])and(UG7(IB,A24,A24,A_4,1093686865))and M57(IB,$D020A,1093686865,IB))
endif
elseif((GetUnitTypeId(m5)==1848651861)or(GetUnitTypeId(m5)==1848651865)or(GetUnitTypeId(m5)==1848651866))then
if(MR7(IB,ZU[D1]))then
set J4=(GetUnitLifePercent(m5)>80.)and(UnitUseItemTarget(IB,bj_lastCreatedItem,m5))
endif
endif
set M1F=(m5==h4[O5])
if(J4)then
elseif((IsUnitType(m5,UNIT_TYPE_HERO))and((M37(IB,m5))or((GetUnitLifePercent(m5)<55.)and(GetRandomInt(1,3)==1)and(not T_4[O5])and(KSF(IB,m5)))))then
if((T14)and(T_4[O5]))then
call KSF(IB,m5)
endif
elseif(i1==1160785970)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
if(IsUnitInRange(IB,m5,400.)and(IssuePointOrderById(IB,$D02B6,GetUnitX(m5)+2,GetUnitY(m5)-2)))then
set J4=true
elseif((Bz>T34[O5])and(IsUnitInRange(IB,m5,480.))and(GetUnitLifePercent(m5)<40.))then
set J4=(((GetUnitAbilityLevel(IB,1093747023)>0)and(N97(IB,$D0105,1093747023)))or((GetUnitAbilityLevel(IB,1093752150)>0)and(N97(IB,$D0105,1093752150))))
endif
endif
elseif(i1==1211117653)then
if((GetUnitLifePercent(IB)<35.)and(GetUnitAbilityLevel(IB,1110456408)==0))then
set J4=(Bz>T34[80+O5])and UG7(IB,A54,A54,A24,1093687372)and(U87(IB,A24,A24,A24,false))and(IssueImmediateOrderById(IB,$D00A1))
if(not J4)then
set J4=(m5!=null)and(Bz>T34[$A0+O5])and(UG7(IB,A54,A54,A_4,1093686864))and(IssueImmediateOrderById(IB,$D00A6))
endif
else
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((Bz>T34[$80+O5])and(UG7(IB,A24,A24,A_4,1093686865))and M57(IB,$D020A,1093686865,IB))or((Bz>T34[64+O5])and(UG7(IB,A_4,A_4,A54,1093686863)and(IssueImmediateOrderById(IB,$D00A4))))
endif
endif
elseif(i1==1160786505)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
if(IsUnitInRange(IB,m5,250.)and(Bz>T34[O5])and(GetUnitLifePercent(m5)<47.))then
call WQE(O5,m5,false,false)
set J4=IssueImmediateOrderById(IB,$D022E)
elseif((Bz>T34[48+O5])and(IsUnitInRange(IB,m5,570.)))then
set J4=IssueImmediateOrderById(IB,$D0272)
elseif((Bz>T34[16+O5])and(IsUnitInRange(IB,m5,570.))and(not IsUnitInRange(IB,m5,200.)))then
set J4=(IssuePointOrderById(IB,$D02B6,GetUnitX(m5),GetUnitY(m5)))or(IssueTargetOrderById(IB,$D00D9,m5))
endif
endif
elseif(i1==1160786502)then
set J4=(GetUnitLifePercent(IB)>70.)and IssueImmediateOrderById(IB,$D020A)
elseif(i1==1160786506)then
if(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<30.)then
set GZ[O5]=true
set UP=GetUnitAbilityLevel(IB,1093751639)
set J4=(IsUnitInRange(IB,m5,840.))and(J8(O5,IssuePointOrderById(IB,$D0079,GetUnitX(m5)+2,GetUnitY(m5)-2)))
if((not(J4))and(Bz>T34[32+O5]))then
set m5=S17(2200.-(UP*400),IB)
if((m5!=null)and(GetUnitLifePercent(m5)<15.))then
set J4=(M57(IB,$D0097,1093751639,m5))
endif
endif
endif
elseif((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<(60*GetUnitAbilityLevel(IB,1093682994)))and(M57(IB,$D0097,1093682994,m5)))or((GetHeroLevel(IB)>5)and(GetUnitAbilityLevel(m5,1114665575)==0)and((M1F)or((GetUnitLifePercent(m5)<60.)and(IsUnitInRange(IB,m5,500.))))and(N97(IB,$D0265,1093747028)))
endif
elseif(i1==1429221443)then
set J4=(IsUnitType(m5,UNIT_TYPE_HERO))and(hq[$F0+O5]<=Bz)and((M1F)or(GetUnitLifePercent(m5)<50.))and(N97(IB,$D0131,1093686322))
if((not J4)and((GetUnitLifePercent(m5)<40.)))then
call SetPlayerAbilityAvailable(GetOwningPlayer(IB),1093744948,true)
set GZ[O5]=true
set J4=(IssueTargetOrderById(IB,$D0097,m5))
set GZ[O5]=false
call SetPlayerAbilityAvailable(GetOwningPlayer(IB),1093744948,false)
endif
elseif(i1==1162032951)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetHeroLevel(IB)>5))then
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
if((Bz>hq[O5])and(UP>$C8)and(UP<(400*GetUnitAbilityLevel(IB,1093679152))or UP<(460*GetUnitAbilityLevel(IB,1093752154)))and(M_7(IB,$D022F,1093679152,1093752154,m5)))then
elseif((GetHeroLevel(IB)>20)and(GetUnitAbilityLevel(IB,1112893542)==0)and(GetUnitLifePercent(IB)>85.)and(GetUnitLifePercent(m5)<45.))then
set GZ[O5]=true
call J8(O5,N97(IB,$D0084,1093678404))
endif
endif
elseif(i1==1162032181)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetHeroLevel(IB)>5)and(Bz>hq[O5]))then
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
if((IsUnitInRange(IB,m5,250.))and(UP<KHF(IB))and(UP>300))then
set GZ[O5]=true
set J4=J8(O5,M57(IB,$D02AC,1093683761,m5))
endif
endif
elseif(i1==1429221424)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>4)or(ME7(m5))))then
set J4=((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<(60*GetUnitAbilityLevel(IB,1093748789)))and(M57(IB,$D0118,1093748789,m5)))or(M57(IB,$D024B,1093687351,m5))
endif
if(not J4)then
set J4=(IsUnitType(m5,UNIT_TYPE_HERO))and(M37(IB,m5))
endif
elseif(i1==1160785972)then
if(GetUnitAbilityLevel(IB,1110454355)>0)then
set J4=(IsUnitType(m5,UNIT_TYPE_HERO))and(M1F)and(GetUnitLifePercent(IB)>50.)and(IssueTargetOrderById(IB,$D000F,m5))
elseif(IsUnitType(m5,UNIT_TYPE_HERO))then
if((GetUnitLifePercent(m5)<65.)and(M1F))then
set GZ[O5]=true
set J4=J8(O5,N97(IB,$D0084,1093677872))
endif
elseif((IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetUnitLifePercent(m5)<30.))then
set GZ[O5]=true
set J4=J8(O5,N97(IB,$D0084,1093677872))
endif
elseif(i1==1432646245)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>4)or(ME7(m5))))then
set J4=((not X67())and((M57(IB,$D007F,1093677640,m5))or((M1F)and(GetUnitLifePercent(IB)<60.)and(M57(IB,$D0269,1093679171,m5)))))or((X67())and(GetUnitLifePercent(m5)<50.)and((IssueImmediateOrderById(IB,$D028D))or(M57(IB,$D007F,1093677640,m5))))
endif
elseif(i1==1430466609)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
if((GetHeroLevel(IB)>4)or(ME7(m5)))then
call SetPlayerAbilityAvailable(GetOwningPlayer(IB),1093685559,true)
set J4=((IsUnitInRange(IB,m5,375.))and(N97(IB,$D022E,1093678145)))or((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<(70*GetUnitAbilityLevel(IB,1093685559)))and(IssueTargetOrderById(IB,$D022F,m5)))
endif
elseif((not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(GetHeroLevel(IB)>$C)and(GetUnitManaPercent(IB)>60.)and(G0[$80+O5]))then
set UP=MP7(400.,m5,Condition(function Ki))
set J4=(UP>5)and(Bz>hq[O5])and(M_7(IB,$D009D,1093810258,1093810259,m5))
if((not J4)and(Bz>hq[16+O5])and((UP>2)or((eY[O5]==$A)and(UP>1)))and(MP7(1000.,m5,Condition(function KI))<=1))then
if(not IsUnitInRange(IB,m5,400.))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(IB)-GetUnitY(m5),GetUnitX(IB)-GetUnitX(m5)))
set hq[$F0+O5]=Bz+3.
call IssuePointOrderById(IB,$D0012,GetUnitX(m5)+200.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+200.*Sin(UP*bj_DEGTORAD))
else
set J4=N97(IB,$D022E,1093678145)
endif
endif
endif
elseif(i1==1430468913)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((GetUnitAbilityLevel(m5,1110454356)==0)and(GetUnitLevel(IB)>5)and(M57(IB,$D00B5,1093677876,m5)))or(((GetUnitLifePercent(m5)<90.)or(M1F))and(GetHeroLevel(IB)>3)and(IsUnitInRange(IB,m5,300.))and(N97(IB,$D009F,1093810507)))
endif
elseif(i1==1430467634)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>5)or(ME7(m5))))then
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
set J4=((UP>$C8)and(UP<=($FA+(300*KIF(IB))))and(M_7(IB,$D0267,1093684565,1093681458,m5)))or(M57(IB,$D0107,1093679412,m5))
if((not J4)and(GetHeroLevel(IB)>7)and(GetUnitManaPercent(IB)>70.)and(M1F))then
set GZ[O5]=true
set J4=J8(O5,IssueTargetOrderById(IB,$D0208,m5))
endif
endif
elseif(i1==1313026096)then
set J4=(IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>4)or(ME7(m5)))and((GetUnitLifePercent(m5)<80.)or(M1F))and(M57(IB,$D007F,1095267426,m5))
elseif((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
call M6F()
set J4=((GetHeroLevel(IB)>5)and((GetUnitLifePercent(m5)-GetUnitLifePercent(IB))>25.)and(M57(IB,$D00DD,1093678929,m5)))
if((not J4)and(i1==1164277353)and(GetUnitLifePercent(m5)<50.))then
set GZ[O5]=true
set J4=J8(O5,N97(IB,$D02B7,1093751369))
endif
elseif((IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(i1==1164277353)and(GetUnitLifePercent(m5)<20.))then
set GZ[O5]=true
set J4=J8(O5,N97(IB,$D02B7,1093751369))
endif
elseif(i1==1164666213)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitAbilityLevel(IB,1110454836)>0))then
set J4=(G0[$80+O5])and(GetUnitLifePercent(IB)>60.)and(MP7(300.,IB,Condition(function KI))==0)and(IssueTargetOrderById(IB,$D0012,m5))
endif
elseif(i1==1429221430)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
call M6F()
set J4=((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<(55*GetUnitAbilityLevel(IB,1093681736)))and(M57(IB,$D0279,1093681736,m5)))or(((GetUnitLifePercent(m5)<60.)or(GetUnitLifePercent(IB)<65.))and(N97(IB,$D00C4,1093687121)))
if((not J4)and(GetUnitAbilityLevel(IB,1110454597)>0)and(M1F))then
call IssueTargetOrderById(IB,$D000F,m5)
endif
endif
elseif(i1==1430466872)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>5)or(ME7(m5))))then
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
if((UP>$96)and(UP<KJF(IB))and(not ke(m5)))then
set GZ[O5]=true
call J8(O5,(M_7(IB,$D0097,1093679413,1093679447,m5))or(M57(IB,$D0216,1093684558,m5))or(M57(IB,$D024B,1093687349,m5)))
elseif(((GetUnitLifePercent(m5)<80.)or(M1F))and(GetUnitAbilityLevel(m5,1112560453)==0)and(GetUnitAbilityLevel(m5,1110454344)==0))then
set J4=(M57(IB,$D024B,1093687349,m5))or((Bz>hq[O5])and(M57(IB,$D0216,1093684558,m5)))
endif
endif
elseif(i1==1162032439)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetHeroLevel(IB)>5)and(Bz>hq[16+O5]))then
set UP=GetUnitAbilityLevel(IB,1093677363)
if(UP==0)then
set UP=GetUnitAbilityLevel(IB,1093681462)
endif
if((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<(100+(300*UP)))and(GetUnitState(m5,UNIT_STATE_LIFE)>200.)and((Bz>hq[O5])or(GetUnitAbilityLevel(m5,1111847784)>0)))then
set GZ[O5]=true
call SetPlayerAbilityAvailable(GetOwningPlayer(IB),1093681462,true)
call J8(O5,(N97(IB,$D0272,1093677363))or(M57(IB,$D02BD,1093744435,m5)))
else
call M57(IB,$D02BD,1093744435,m5)
endif
endif
elseif(i1==1430466865)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>5)or(ME7(m5))))then
set J4=((GetUnitAbilityLevel(IB,1110454357)==0)and(GetUnitLifePercent(IB)>45.)and(M57(IB,$D0062,1093677879,IB)))or((GetUnitLifePercent(m5)<70.)and(GetUnitLifePercent(m5)>10.)and(IsUnitInRange(IB,m5,400.))and(R2I(GetUnitState(IB,UNIT_STATE_MANA))<($8C+(GetUnitAbilityLevel(IB,1093810508)*100)))and(N97(IB,$D009F,1093810508)))or(M57(IB,$D009D,1093677651,m5))
elseif((GetHeroLevel(IB)>7)and(not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(iy(IB))and(GetUnitManaPercent(IB)>60.)and(GetUnitState(m5,UNIT_STATE_LIFE)<200.))then
set UP=MP7(450.,m5,Condition(function Ki))
set GZ[O5]=true
set J4=((UP>2)or((eY[O5]==$A)and(UP>1)))and(M57(IB,$D009D,1093677651,m5))
set GZ[O5]=false
endif
elseif(i1==1430468144)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>4)or(ME7(m5))))then
if(GetUnitAbilityLevel(m5,1113813609)==0)then
call M57(IB,$D00DD,1093679192,m5)
elseif(IsUnitInRange(IB,m5,860.)and(OM7(GetHandleId(IB),"Level")>GetUnitAbilityLevel(IB,1093750337))and(GetUnitManaPercent(IB)>35.)and(GetHeroLevel(IB)>3))then
call IssueTargetOrderById(IB,$D0118,m5)
elseif(GetUnitLifePercent(IB)>75.)then
call IssueTargetOrderById(IB,$D000F,m5)
endif
endif
elseif((i1==1429221432)or(i1==1160786229))then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>5)or(ME7(m5))))then
call M6F()
set J4=((i1==1429221432)and((GetUnitLifePercent(m5)<60.)or(ME7(IB)))and(N97(IB,$D00D4,1093679411)))or(((i1==1160786229)or(R2I(GetUnitState(IB,UNIT_STATE_MANA))>($FA+(25*(GetUnitAbilityLevel(IB,1093679411))))))and((N97(IB,$D009E,1093677892))or(N97(IB,$D0278,1093687878))))
endif
elseif(i1==1429221441)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>5)or(ME7(m5))))then
call M6F()
set J4=((GetUnitLifePercent(m5)<65.)and((Bz>hq[O5])or(GetUnitCurrentOrder(m5)==$D0005))and(N97(IB,$D009B,1093677903)))or(M57(IB,$D0107,1093678389,m5))
endif
elseif(i1==1165451634)then
set J4=(IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>5)or(ME7(m5)))and((M1F)or(GetUnitLifePercent(m5)<70.))and(M57(IB,$D02B6,1093687629,m5))
elseif(i1==1432642913)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=(GetHeroLevel(IB)>3)and((GetUnitLifePercent(IB)>70.)or(GetUnitLifePercent(IB)>GetUnitLifePercent(m5)))and(IssueTargetOrderById(IB,$D02B6,m5))
elseif((IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetHeroLevel(IB)>2))then
call IssueTargetOrderById(IB,$D0097,IB)
endif
elseif(i1==1215722344)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((GetUnitLifePercent(IB)>70.)and(JR7(GetUnitTypeId(m5),5))and(GetUnitLifePercent(m5)<50.)and(M57(IB,$D02BC,1093682499,m5)))or((GetUnitLifePercent(m5)<60.)and(GetUnitLifePercent(IB)>60.)and(M57(IB,$D02BC,1093682499,IB)))
endif
elseif(i1==1332766568)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>5)or(ME7(m5))))then
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
if(((UP<(175+(75*GetUnitAbilityLevel(IB,1093682482))))or(UP<(175+(125*GetUnitAbilityLevel(IB,1093750098)))))and(UP>175))then
set J4=(M_7(IB,$D0097,1093682482,1093750098,m5))or((IsUnitInRange(IB,m5,275.))and(IssueImmediateOrderById(IB,$D0278)))
elseif(R2I(GetUnitState(IB,UNIT_STATE_MANA))>($C3+(40*GetUnitAbilityLevel(IB,1093682482)))or R2I(GetUnitState(IB,UNIT_STATE_MANA))>($C3+(40*GetUnitAbilityLevel(IB,1093750098))))then
set J4=((MP7(400.,m5,Condition(function KJ))>0)and(IssueTargetOrderById(IB,$D0118,m5)))or(((JR7(GetUnitTypeId(m5),5))or(GetUnitLifePercent(m5)<50.))and(IsUnitInRange(IB,m5,275.))and(IssueImmediateOrderById(IB,$D0278)))
elseif(MR7(IB,ZU[T2]))and(MR7(IB,ZU[AL]))then
set TB4=true
set J4=(GetUnitLifePercent(m5)<70.)and(h4[O5]!=null)and(IsUnitType(IB,UNIT_TYPE_HERO))and((IsUnitInRange(IB,m5,200.))or(i1==1315074670)or(i1==1160785972)or(i1==1211117654)or(i1==1433631084)or(i1==1164799855))and(UnitUseItem(m5,MV7(m5,ZU[AL])))and(UnitUseItem(m5,MV7(m5,ZU[T2])))
set TB4=false
endif
endif
elseif(i1==1315334514)then
if(GetHeroLevel(IB)>2)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=(IsUnitInRange(IB,m5,350.))and(GetUnitLifePercent(m5)>15.)and((GetUnitAbilityLevel(IB,1093682001))>(GetUnitAbilityLevel(IB,1093681746)*3))and(N97(IB,$D0131,1093810506))
elseif((GetHeroLevel(IB)>9)and(not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(GetUnitManaPercent(IB)>65.)and(GetUnitLifePercent(m5)<50.))then
set J4=MP7(200.,m5,Condition(function Ki))<2
else
set J4=true
endif
if(not J4)then
set UP=R2I(KF7(GetUnitX(IB),GetUnitY(IB),GetUnitX(m5),GetUnitY(m5)))
if((UP>=75)and(UP<=325))then
set J4=(KRF(IB,200.,Condition(function Ki)))and(N97(IB,$D00C4,1093682521))
elseif((UP>=325)and(UP<=575))then
set J4=(KRF(IB,450.,Condition(function Ki)))and(N97(IB,$D026C,1093682760))
elseif((UP>=575)and(UP<=825))then
set J4=(KRF(IB,700.,Condition(function Ki)))and(N97(IB,$D0277,1093682736))
endif
endif
endif
elseif(i1==1328558154)then
set J4=(IsUnitType(m5,UNIT_TYPE_HERO))and(GetHeroLevel(IB)>5)and(GetUnitLifePercent(m5)<55.)and(GetUnitState(m5,UNIT_STATE_LIFE)>250.)and(not ke(m5))and(not IsUnitInRange(IB,m5,250.))and(((MP7(900.,m5,Condition(function Ki))<=2)and(MR7(IB,ZU[J1]))or(MR7(IB,ZU[T2])))or((MP7(900.,m5,Condition(function Ki))<2)))and(IssueTargetOrderById(IB,$D0278,m5))
elseif(i1==1429221446)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((GetUnitAbilityLevel(IB,1110454868)==0)and(GetUnitLifePercent(IB)>55.)and((GetHeroLevel(IB)>6)or(ME7(m5)))and(GetUnitState(IB,UNIT_STATE_LIFE)>GetUnitState(m5,UNIT_STATE_LIFE))and(N97(IB,$D00D1,1093678667)))or(((GetUnitLifePercent(m5)<60.)or(M1F))and(GetUnitState(m5,UNIT_STATE_LIFE)>250.)and(G0[$80+O5])and(M_7(IB,$D0200,1093682764,1093747544,m5)))
endif
elseif(i1==1429221445)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set UP=GetUnitAbilityLevel(IB,1093679184)+1
if(UP<=1)then
set UP=GetUnitAbilityLevel(IB,1093678647)
endif
set J4=((UP>0)and(not ke(m5))and(GetUnitState(m5,UNIT_STATE_LIFE)>200.)and(GetUnitState(m5,UNIT_STATE_LIFE)<((.2+(I2R(UP)*.2))*(GetUnitState(m5,UNIT_STATE_MAX_LIFE)-GetUnitState(m5,UNIT_STATE_LIFE))))and(M_7(IB,$D007F,1093678647,1093679184,m5)))or((GetHeroLevel(IB)>2)and(IsUnitInRange(IB,m5,400.))and(N97(IB,$D022E,1093678422)))
elseif((not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(GetHeroLevel(IB)>8)and(GetUnitManaPercent(IB)>60.)and(G0[$80+O5]))then
set UP=MP7(400.,m5,Condition(function Ki))
if((UP>2)or((eY[O5]==$A)and(UP>1)))then
if(not IsUnitInRange(IB,m5,400.))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(IB)-GetUnitY(m5),GetUnitX(IB)-GetUnitX(m5)))
set hq[$F0+O5]=Bz+3.
call IssuePointOrderById(IB,$D0012,GetUnitX(m5)+200.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+200.*Sin(UP*bj_DEGTORAD))
else
set J4=N97(IB,$D022E,1093678422)
endif
endif
endif
elseif(i1==1332963428)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>3)or(ME7(m5))))then
set J4=((ME7(m5))and(GetUnitState(IB,UNIT_STATE_MANA)>hq[272+O5])and(M57(IB,$D0200,1093677649,m5)))or((GetUnitLifePercent(IB)<90.)and(M57(IB,$D0097,1093683019,m5)))
endif
elseif(i1==1332109682)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>3)or(ME7(m5))))then
set J4=((GetUnitLifePercent(m5)<75.)and(N97(IB,$D026C,1093810505)))or((GetUnitManaPercent(IB)>30.)and(M57(IB,$D02B6,1093678134,m5)))
endif
elseif(i1==1211117640)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((GetHeroLevel(IB)>4)and(GetUnitAbilityLevel(m5,1110454606)==0)and(GetUnitState(IB,UNIT_STATE_MANA)>250.)and(Bz>hq[O5])and(M57(IB,$D02BD,'A2WJ',m5)))or((GetHeroLevel(IB)>2)and(M1F)and(IssueTargetOrderById(IB,$D0079,m5)))
elseif((GetHeroLevel(IB)>9)and(GetUnitManaPercent(IB)>50.))then
set J4=(MP7(400.,m5,Condition(function Ki))>2)and(MP7(300.,m5,Condition(function Kj))>0)and(IssueTargetOrderById(IB,$D0079,m5))
endif
elseif(i1==1429221456)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set UP=GetHeroInt(IB,true)-GetHeroInt(m5,true)
set J4=((GetHeroLevel(IB)>5)and(UP>9)and(R2I(GetUnitState(m5,UNIT_STATE_LIFE))<($A*UP))and(M_7(IB,$D0079,1093685067,1093752407,m5)))or((i2(m5))and(M57(IB,$D0097,1093685066,m5)))
if((not J4)and(GetUnitManaPercent(IB)>70.)and(GetUnitLifePercent(m5)>60.)and(GetUnitManaPercent(m5)>40.))then
set GZ[O5]=true
set J4=J8(O5,(MP7(700.,m5,Condition(function Kk))==0)and(M57(IB,$D0097,1093685066,m5)))
endif
endif
elseif(i1==1160786243)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=(GetHeroLevel(IB)>2)and((GetUnitManaPercent(IB)>50.)and(GetUnitLifePercent(m5)<65.))and(IssueTargetOrderById(IB,$D0118,m5))
if((not J4)and(GetUnitAbilityLevel(IB,1093683765)>2))then
set J4=(MP7(500.,m5,Condition(function Ki))>3)and((GetUnitManaPercent(IB)>60.)or(GetUnitLifePercent(m5)<65.)or(MP7(500.,m5,Condition(function KJ))>0))and(IssueTargetOrderById(IB,$D007F,m5))
endif
if((not J4)and(GetUnitLifePercent(m5)<75.)and(GetHeroLevel(IB)>5)and(Bz>hq[O5]))then
set GZ[O5]=true
set J4=J8(O5,M57(IB,$D0100,1395667000,m5))
endif
elseif(IsUnitType(m5,UNIT_TYPE_STRUCTURE))then
if((GetHeroLevel(IB)>$A)and(GetUnitLifePercent(m5)<40.))then
set GZ[O5]=true
set J4=J8(O5,M57(IB,$D0100,1395667000,m5))
endif
elseif((not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(GetUnitAbilityLevel(IB,1093683765)>2)and(GetUnitManaPercent(IB)>60.))then
set J4=(MP7(400.,m5,Condition(function Ki))>3)and(IssueTargetOrderById(IB,$D007F,m5))
endif
elseif(i1==1430468406)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=(GetHeroLevel(m5)>5)and((GetUnitLifePercent(m5)<60.)or(GetUnitLifePercent(IB)<70.))and(M57(IB,$D0270,kS(IB),m5))
if((not J4)and((GetHeroLevel(IB)>5)or(ME7(m5))))then
set J4=((GetUnitLifePercent(m5)>10.)and(GetUnitLifePercent(m5)<50.)and(IssueImmediateOrderById(IB,$D024C)))or(M57(IB,$D00FA,kT(IB),m5))
endif
elseif((IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetUnitLifePercent(m5)<25.)and(GetUnitLifePercent(m5)>10.))then
set J4=(MP7(500.,m5,Condition(function Kj))>2)and(IssueImmediateOrderById(IB,$D024C))
endif
elseif(i1==1160786242)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>5)or(ME7(m5))))then
set J4=((GetUnitLifePercent(m5)<60.)and(IssueTargetOrderById(IB,$D02B6,m5)))or((GetUnitLifePercent(m5)<45.)and(IssueImmediateOrderById(IB,$D020A)))
endif
elseif((i1==1211117641)or(i1==1211117642))then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
if((ME7(m5))and(GetUnitAbilityLevel(m5,1110456120)==0))then
call KZF(IB,m5)
endif
elseif((i1==1211117641)and(GetHeroLevel(IB)>$B)and(GetUnitManaPercent(IB)>70.))then
set J4=(MP7(400.,IB,Condition(function Ki))>3)and(IssueTargetOrderById(IB,$D0249,IB))
endif
elseif(i1==1311781207)then
set J4=(IsUnitType(m5,UNIT_TYPE_HERO))and(M1F)and((GetHeroLevel(IB)>4)or(ME7(m5)))and(IssuePointOrderById(IB,$D0079,GetUnitX(m5),GetUnitY(m5)))
elseif((i1==1211117650)or(i1==1211119433))then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
call M6F()
endif
elseif(i1==1211117646)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=IssueTargetOrderById(IB,$D007F,IB)
elseif((not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(IsUnitType(m5,UNIT_TYPE_MELEE_ATTACKER))and(GetHeroLevel(IB)>5)and(GetUnitManaPercent(IB)>50.))then
set J4=(MP7(250.,IB,Condition(function Ki))>2)and(IssueTargetOrderById(IB,$D007F,IB))
endif
elseif(i1==1211117624)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((GetHeroLevel(IB)>3)or(ME7(m5)))and((N97(IB,$D022E,1093683024))or(IssueTargetOrderById(IB,$D0278,m5)))
if((not J4)and(GetUnitAbilityLevel(IB,1110455373)>0)and((GetUnitLifePercent(IB)>75.)or(ME7(m5))))then
call IssueTargetOrderById(IB,$D000F,m5)
endif
elseif((GetHeroLevel(IB)>6)and(not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(GetUnitLifePercent(m5)<75.)and(GetUnitManaPercent(IB)>75.))then
set J4=(MP7(400.,m5,Condition(function Ki))>2)and(N97(IB,$D022E,1093683024))
endif
elseif(i1==1160785973)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>4)or(ME7(m5))))then
set UP=MP7(700.,IB,Condition(function Ki))
set J4=((IsUnitInRange(m5,IB,400.))and(UP<2)and(GetUnitAbilityLevel(m5,1110454580)==0)and(IssueImmediateOrderById(IB,$D0278)))or((GetHeroLevel(IB)>20)and(GetUnitState(IB,UNIT_STATE_MANA)>450.)and(M57(IB,$D0107,1093678130,m5)))
endif
elseif(i1==1315988077)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
if(((GetUnitLifePercent(m5)<75.)or(M1F))and((GetHeroLevel(IB)>4)or(ME7(m5))))then
if(((not IsUnitInRange(IB,m5,200.))or(not N97(IB,$D0080,1093678669)))and(GetUnitLifePercent(m5)<70.)and(GetUnitLifePercent(m5)>15.))then
call WQE(O5,m5,false,false)
call N97(IB,$D026A,1093684561)
endif
endif
elseif((IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetUnitLifePercent(m5)<20.))then
set GZ[O5]=true
call N97(IB,$D026A,1093684561)
endif
elseif(i1==1211117616)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetUnitLifePercent(m5)<80.)or(M1F))and((GetHeroLevel(IB)>4)or(ME7(m5))))then
set J4=((IsUnitInRange(IB,m5,275.))and(N97(IB,$D009F,1093677139)))or((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<(40+(125*(GetUnitAbilityLevel(IB,1093816142)))))and(M57(IB,$D0107,1093816142,m5)))
endif
elseif(i1==1315074670)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>3)or(ME7(m5))))then
set J4=((GetUnitLifePercent(m5)<60.)or(GetUnitLifePercent(IB)<70.))and(GetUnitLifePercent(m5)>20.)and(IsUnitInRange(IB,m5,400.))and(M57(IB,$D0270,1093685570,m5))
if((not J4)and(G0[$80+O5])and(GetUnitAbilityLevel(m5,1113813860)>0)and(M1F)and((GetUnitLifePercent(IB)>70.)or(ME7(m5))))then
call IssueTargetOrderById(IB,$D000F,m5)
endif
endif
elseif((i1==1215063922)or(i1==1211117638)or(i1==1211117637)or(i1==1211117639))then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetUnitLifePercent(m5)<80.)or(M1F))and((GetHeroLevel(IB)>4)or(ME7(m5))))then
set J4=((GetUnitLifePercent(m5)<60.)and(N97(IB,$D02B7,1093677895)))or((IsUnitInRange(IB,m5,350.))and(M57(IB,$D007F,1093681490,m5)))
endif
elseif(i1==1164207469)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetHeroLevel(IB)>5)and(GetUnitState(m5,UNIT_STATE_LIFE)>200.)and(not ke(m5)))then
set J4=(((GetUnitManaPercent(m5)<15.)and(GetUnitLifePercent(m5)<50.))or(GetUnitState(m5,UNIT_STATE_LIFE)<((GetUnitState(m5,UNIT_STATE_MAX_MANA)-GetUnitState(m5,UNIT_STATE_MANA))*(.35+(I2R(GetUnitAbilityLevel(IB,1093682483))*.25)))))and(M57(IB,$D007F,1093682483,m5))
endif
elseif(i1==1433631084)then
set J4=(IsUnitType(m5,UNIT_TYPE_HERO))and(not ke(m5))and(R2I(GetUnitState(m5,UNIT_STATE_LIFE))<($B4+($96*GetUnitAbilityLevel(IB,1093678160))))and(M57(IB,$D007F,1093678160,m5))
elseif(i1==1214345830)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=(GetHeroLevel(IB)>2)and(GetUnitLifePercent(IB)<85.)and(M57(IB,$D0101,1093679182,IB))
elseif((GetHeroLevel(IB)>7)and(not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(GetUnitLifePercent(IB)<90.)and(GetUnitManaPercent(IB)>60.))then
set J4=(MP7(400.,IB,Condition(function Ki))>2)and(MP7(800.,IB,Condition(function Kk))==0)and(M57(IB,$D0101,1093679182,IB))
endif
elseif((i1==1311781174)or(i1==1311781175)or(i1==1311911984)or(i1==1311911985)or(i1==1311781442))then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetHeroLevel(IB)>5))then
if(GetUnitAbilityLevel(IB,1110454338)==0)then
if((GetUnitLifePercent(m5)<70.)or((M1F)and(GetUnitLifePercent(IB)<70.)))then
if((IsUnitInRange(IB,m5,280.)))then
set J4=IssueImmediateOrderById(IB,$D00AA)
call IssueTargetOrderById(IB,$D000F,m5)
endif
set GZ[O5]=true
call J8(O5,N97(IB,$D0084,1093748042))
endif
elseif((GetUnitLifePercent(IB)>70.)and(M1F))then
if((IsUnitInRange(IB,m5,280.)))then
set J4=IssueImmediateOrderById(IB,$D00AA)
call IssueTargetOrderById(IB,$D000F,m5)
else
set J4=IssueImmediateOrderById(IB,$D00AB)
call IssueTargetOrderById(IB,$D000F,m5)
endif
endif
endif
elseif(i1==1315007329)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>5)or(ME7(m5))))then
set J4=((GetUnitState(m5,UNIT_STATE_LIFE)<(hq[272+O5]))and(M57(IB,$D007F,1093677108,m5)))or((GetUnitLifePercent(m5)<75.)and(GetUnitAbilityLevel(m5,1110454348)==0)and(GetUnitCurrentOrder(m5)!=$D0005)and(M57(IB,$D00B5,1093681716,m5)))
endif
elseif(i1==1332898670)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>3)or(ME7(m5))))then
if(R2I(GetUnitState(m5,UNIT_STATE_LIFE))<(50*GetUnitAbilityLevel(IB,1093677136)))then
if(IsUnitInRange(IB,m5,400)or YO8(m5))then
set GZ[O5]=true
call J8(O5,M57(IB,$D0200,1093677136,m5))
endif
elseif((GetHeroLevel(IB)>$A)and(GetUnitLifePercent(m5)<70.))then
call M57(IB,$D0216,1093685848,m5)
elseif((GetUnitManaPercent(IB)>60.)or(ME7(m5)))then
call M57(IB,$D026B,1093677360,m5)
endif
elseif((not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(GetHeroLevel(IB)>9)and(GetUnitManaPercent(IB)>60.))then
set UP=MP7(450.,m5,Condition(function Ki))
set J4=((UP>2)or((eY[O5]==$A)and(UP>1)))and(M57(IB,$D026B,1093677360,m5))
endif
elseif(i1==1215723364)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>5)or(ME7(m5))))then
if(((GetUnitLifePercent(m5)<70.)or(M1F))and(M57(IB,$D007F,1093677633,m5)))then
elseif((ME7(m5))and(kA(IB,m5,400.)))then
call M_7(IB,$D026B,1093683534,1093747031,m5)
endif
endif
elseif(i1==1215128178)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetUnitLifePercent(m5)<70.)or(M1F))and((GetHeroLevel(IB)>3)or(ME7(m5))))then
set J4=(M57(IB,$D00FA,'A2QB',m5))or(((GetUnitManaPercent(IB)>40.)or(ME7(m5)))and(M57(IB,$D0097,1093677616,m5)))
endif
elseif(i1==1164799855)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=(GetUnitManaPercent(IB)>50.)and((GetHeroLevel(IB)>3)or(ME7(m5)))and(GetUnitLifePercent(m5)<80.)and(M57(IB,$D006B,1093682264,m5))
elseif((GetOwningPlayer(m5)!=Z7[0])and(GetOwningPlayer(m5)!=A7[0])and(not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetUnitManaPercent(IB)>60.)and(Bz>hq[O5]))then
set UP=GetUnitTypeId(m5)
set J4=(UP!=1848652113)and(UP!=1848652114)and(UP!=1752654196)and(UP!=1752658994)and(UP!=1752658995)and(UP!=1747988534)and(UP!=1966092339)and(UP!=1966092341)and(UP!=1966092345)and(UP!=1969711215)and(UP!=1966092337)and(UP!=1970169187)and(UP!=1966092338)and(UP!=1702061422)and(UP!=1697656918)and(UP!=1701081721)and(UP!=1697656919)and(GetUnitLifePercent(m5)>60.)and(M57(IB,$D006B,1093682264,m5))
endif
elseif(i1==1433105516)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
call M6F()
if((GetHeroLevel(IB)>5)or(ME7(m5)))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(h8[O5])-GetUnitY(IB),GetUnitX(h8[O5])-GetUnitX(IB)))
set J4=(IssuePointOrderById(IB,$D0278,GetUnitX(m5)+80.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+80.*Sin(UP*bj_DEGTORAD)))or((ME7(m5))and(GetUnitState(m5,UNIT_STATE_LIFE)>200.)and(GetUnitState(m5,UNIT_STATE_LIFE)<800.)and(not kr(IB))and(IssuePointOrderById(IB,$D00DC,GetUnitX(m5)+80.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+80.*Sin(UP*bj_DEGTORAD))))or(IssueTargetOrderById(IB,$D02B6,m5))
endif
elseif((not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(GetHeroLevel(IB)>9)and(iy(IB))and(GetUnitManaPercent(IB)>60.)and(((h4[$80+O5]!=null)and(IsUnitInRange(IB,h4[$80+O5],1200.)))or(eY[O5]==$A)))then
set UP=MP7(450.,m5,Condition(function Ki))
set J4=((UP>2)or((eY[O5]==$A)and(UP>1)))and(IssuePointOrderById(IB,$D0278,GetUnitX(m5),GetUnitY(m5)))
endif
elseif((i1==1214409837)or(i1==1211119192)or(i1==1211119193)or(i1==1211119191))then
if((not IsUnitType(m5,UNIT_TYPE_HERO))and(not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetHeroLevel(IB)>4)and(Bz>hq[O5])and(GetUnitManaPercent(IB)>30.))then
set b5=HC[16+O5]
call MoveLocation(b5,GetUnitX(IB),GetUnitY(IB))
if((MP7(600.,m5,Condition(function Ki))>2)and(not IsUnitInRange(IB,m5,150.))and((MO7(600.,b5,Condition(function KI))==0)or(MO7(500.,b5,Condition(function KJ))>0)or(MO7(500.,b5,Condition(function Kk))>0)))then
set UP=IMaxBJ(R2I(KF7(GetUnitX(m5),GetUnitY(m5),GetUnitX(IB),GetUnitY(IB)))-(435+(120*GetUnitAbilityLevel(IB,1093679157))),0)
set i1=R2I(bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(IB),GetUnitX(m5)-GetUnitX(IB)))
if((RAbsBJ(GetUnitFacing(IB)-I2R(i1))<25.)or(RAbsBJ(GetUnitFacing(IB)-360.-I2R(i1))<25.))then
call IssuePointOrderById(IB,$D0278,GetUnitX(IB)+I2R($96+UP)*Cos(i1*bj_DEGTORAD),GetUnitY(IB)+I2R($96+UP)*Sin(i1*bj_DEGTORAD))
endif
endif
endif
elseif(i1==1316252014)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((GetHeroLevel(IB)>4)or(ME7(m5)))and((M57(IB,$D0269,1093678137,m5))or(IssuePointOrderById(IB,$D00DE,GetUnitX(IB)+70.*Cos((GetUnitFacing(IB)-180.)*bj_DEGTORAD),GetUnitY(IB)+70.*Sin((GetUnitFacing(IB)-180.)*bj_DEGTORAD))))
elseif((GetHeroLevel(IB)>$A)and(GetUnitManaPercent(IB)>40.))then
set UP=MP7(400.,m5,Condition(function Ki))
set J4=((UP>2)or((eY[O5]==$A)and(UP>1)))and(IssuePointOrderById(IB,$D00DE,GetUnitX(IB)+70.*Cos((GetUnitFacing(IB)-180.)*bj_DEGTORAD),GetUnitY(IB)+70.*Sin((GetUnitFacing(IB)-180.)*bj_DEGTORAD)))
endif
elseif(i1==1164799603)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>3)or(ME7(m5))))then
call M6F()
set J4=((GetUnitLifePercent(m5)<70.)and(M_7(IB,$D0097,1093752632,1093752633,m5)))or((not IsUnitInRange(IB,m5,200.))and(IsUnitInRange(IB,m5,600))and(M57(IB,$D00FA,1093808453,m5)))
endif
elseif(i1==1328558160)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
if(GetUnitAbilityLevel(IB,1093683011)>0)then
call M6F()
endif
set J4=((GetHeroLevel(IB)>5)or(GetUnitLifePercent(m5)<60.))and(IssueTargetOrderById(IB,$D02B6,m5))
if((not J4)and(G0[$80+O5])and((GetHeroLevel(IB)>3)or(ME7(m5)))and(M1F)and(not IsUnitInRange(IB,m5,350.))and(MP7(600.,m5,Condition(function KI))<3)and(not IC(O5)))then
set b5=kL(IB,m5,200.)
if(b5!=null)then
if((GetUnitState(m5,UNIT_STATE_LIFE)<400.)and(GetUnitLifePercent(m5)<40.))then
call SetPlayerAbilityAvailable(GetOwningPlayer(IB),1093682766,true)
set GZ[O5]=true
set J4=J8(O5,IssuePointOrderByIdLoc(IB,$D00FA,b5))
endif
endif
endif
elseif((not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(GetHeroLevel(IB)>$A)and(GetUnitManaPercent(IB)>70.)and(not IsUnitInRange(IB,m5,350.)))then
if((MP7(400.,m5,Condition(function Ki))>2)and(MP7(500.,m5,Condition(function KI))==0)and(kJ(GetUnitX(m5),GetUnitY(m5))))then
call SetPlayerAbilityAvailable(GetOwningPlayer(IB),1093682766,true)
set GZ[O5]=true
set J4=J8(O5,IssuePointOrderById(IB,$D00FA,GetUnitX(m5),GetUnitY(m5)))
endif
endif
elseif(i1==1212363833)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
call M6F()
set UP=R2I(hq[16+O5]-Bz)
set J4=((GetHeroLevel(IB)>4)or(ME7(m5)))and((GetUnitLifePercent(m5)<80.)or(M1F))and((((UP<=0)or(UP>50))and(M57(IB,$D007F,1093809220,m5)))or((Bz>hq[O5])and(N97(IB,$D009B,1093678643))))
elseif((IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetUnitLifePercent(m5)<35.))then
set J4=(MP7(700.,m5,Condition(function Ki))>4)and(MP7(700.,m5,Condition(function Kj))>3)and(IssueImmediateOrderById(IB,$D0278))
endif
elseif(i1==1315070563)then
if((not GZ[O5])and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(not IsUnitType(m5,UNIT_TYPE_STRUCTURE)))then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((not ke(m5))and(GetUnitState(m5,UNIT_STATE_LIFE)<1200.)and(GetUnitState(m5,UNIT_STATE_LIFE)>200.)and((MP7(900.,m5,Condition(function KI))*2)>=MP7(900.,m5,Condition(function Ki)))and(GetUnitAbilityLevel(m5,1113815395)==0)and(GetUnitAbilityLevel(m5,1113815346)==0)and(M_7(IB,$D0278,1093684529,1093747032,m5)))or(((GetHeroLevel(IB)>4)or(ME7(m5)))and(not OT7(IB,"Omnislashing"))and(N97(IB,$D00A0,1093678407)))
elseif((GetHeroLevel(IB)>5)and(Bz>hq[O5])and((GetUnitState(IB,UNIT_STATE_MANA)>235.+(75*GetUnitAbilityLevel(IB,1093684529)))or(GetUnitState(IB,UNIT_STATE_MANA)>235.+(75*GetUnitAbilityLevel(IB,1093747032))))and(MP7(400.,m5,Condition(function KI))>0))then
set J4=(not OT7(IB,"Omnislashing"))and(N97(IB,$D00A0,1093678407))
endif
endif
elseif(i1==1212365106)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>4)or(ME7(m5))))then
set J4=(M57(IB,$D0079,1093685831,m5))
if((not J4)and(RAbsBJ((GetUnitFacing(m5)-GetUnitFacing(IB)))<=105.)and(GetUnitLifePercent(IB)>(GetUnitLifePercent(m5)+10.)))then
call IssueTargetOrderById(IB,$D000F,m5)
endif
endif
elseif(i1==1211117617)or(i1==1211122513)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>4)or(ME7(m5))))then
set J4=((GetUnitLifePercent(m5)<80.)or(M1F))and((((Bz>hq[O5])or(GetUnitCurrentOrder(m5)==$D0005))and(N97(IB,$D02B7,1093752648)))or(M57(IB,$D02B6,1093744944,m5))or(N97(IB,$D022E,1093814611)))
if((not J4)and(GetUnitAbilityLevel(IB,1110454329)>0)and((not ME7(IB))or(ME7(m5))))then
call IssueTargetOrderById(IB,$D000F,m5)
endif
endif
elseif(i1==1211117633)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>4)or(ME7(m5))))then
call M6F()
set J4=(M57(IB,$D0269,1093684045,m5))or(((GetUnitAbilityLevel(IB,1110455624)>0)or(GetUnitLifePercent(m5)<60.))and(M57(IB,$D007F,1093684310,m5)))
endif
elseif(i1==1211117620)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
if((ME7(m5))or((GetHeroLevel(IB)>3)and((M1F)or(GetUnitLifePercent(m5)<70.))))then
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
set J4=((UP>$96)and(UP<KKF(IB))and(not ke(m5))and(M_7(IB,$D0097,1093677392,1093679450,m5)))or(M57(IB,$D009D,1093677382,m5))
endif
elseif(eY[O5]==$A)then
set J4=(GetUnitManaPercent(IB)>60.)and(M57(IB,$D009D,1093677382,m5))
endif
elseif(i1==1432580716 or i1==1429221720)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=(M1F)and((GetHeroLevel(IB)>3)or(ME7(m5)))and(((Bz>hq[O5])and(M57(IB,$D0079,1093684300,m5)))or(IssueTargetOrderById(IB,$D0278,m5)))
elseif(GetHeroLevel(IB)>5)then
if(IsUnitType(m5,UNIT_TYPE_STRUCTURE))then
set J4=(GetUnitLifePercent(m5)<30.)and((MP7(275.,m5,Condition(function Ki))>0)or(MP7(275.,m5,Condition(function Kj))>0))and(IssueTargetOrderById(IB,$D0278,m5))
else
set J4=(GetUnitManaPercent(IB)>60.)and(MP7(400.,m5,Condition(function Ki))>2)and(IssueTargetOrderById(IB,$D0278,m5))
endif
endif
elseif(i1==1333027688)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=(M1F)and((GetHeroLevel(IB)>3)or(ME7(m5)))and(((IsUnitInRange(IB,m5,250.))and(N97(IB,$D00C4,1093682252)))or(M57(IB,$D0278,1093686091,m5))or((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<MBF(IB))and(GetUnitState(m5,UNIT_STATE_LIFE)>180.)and((N97(IB,$D022E,1093682248))or(N97(IB,$D022E,1093750594)))))
elseif((IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetHeroLevel(IB)>$A))then
set J4=((GetUnitLifePercent(m5)<40.)or(MP7(300.,IB,Condition(function Ki))>2))and(N97(IB,$D00C4,1093682252))
endif
elseif(i1==1311781185)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>3)or(ME7(m5))))then
set J4=(((GetUnitAbilityLevel(m5,1112437609)>0)or(GetUnitManaPercent(m5)<30.)or(GetUnitAbilityLevel(m5,1110454607)>0))and(IssueTargetOrderById(IB,$D02B6,m5)))or((M1F)and(GetUnitAbilityLevel(m5,1112437609)==0)and((JR7(GetUnitTypeId(m5),5))or(GetUnitLifePercent(m5)<60.)or(GetUnitLifePercent(IB)<60.))and(IssueImmediateOrderById(IB,$D0278)))
endif
elseif(i1==1211117643)then
if((not IsUnitType(m5,UNIT_TYPE_HERO))and(not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(GetHeroLevel(IB)>$A))then
set UP=MP7(300.,m5,Condition(function Ki))
set J4=((UP>1)and(GetHeroLevel(IB)>4)and(MP7(800.,m5,Condition(function KI))==0)and(GetUnitManaPercent(IB)>35.)and(M27(IB,$D0136,1093678410,M07(m5))))
elseif((IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetHeroLevel(IB)>$A)and(GetUnitLifePercent(IB)>70.))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(IB)-GetUnitY(m5),GetUnitX(IB)-GetUnitX(m5)))
call MoveLocation(HA,GetUnitX(m5)+70.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+70.*Sin(UP*bj_DEGTORAD))
if(IsUnitAlly(IB,Z7[0]))then
set LD4=KE7(m5,h7[100])
else
set LD4=KE7(m5,h7[0])
endif
set J4=(GetWidgetLife(m5)<450. or LD4>6000)and(MP7(800.,m5,Condition(function KI))==0)and(MP7(300.,m5,Condition(function Kj))>1)and(M27(IB,$D0136,1093678410,HA))
endif
elseif(i1==1215130471)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((GetHeroLevel(IB)>3)or(ME7(m5)))and((M57(IB,$D007F,QI7(IB),m5))or((GetUnitLifePercent(m5)<60)and(OO7(GetHandleId(IB),"AI|Magi2Blast")and M57(IB,$D0278,1093815121,m5)))or(M57(IB,$D02B6,QJ7(IB),m5)))
elseif((GetUnitManaPercent(IB)>50.)and(GetHeroLevel(IB)>$A))then
set J4=((not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(MP7(300.,m5,Condition(function Ki))>2)and(M57(IB,$D02B6,QJ7(IB),m5)))or((MP7(400.,m5,Condition(function Kj))>2)and(GetUnitAbilityLevel(IB,1113746543)==0)and(M57(IB,$D0085,QK7(IB),IB)))
endif
elseif(i1==1215657064)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
if(GetUnitAbilityLevel(IB,1110454863)==0)then
set J4=((GetHeroLevel(IB)>5)or(ME7(m5)))and(((IsUnitInRange(IB,m5,300.))and(N97(IB,$D0080,1093677913)))or(N97(IB,$D0084,1093684291))or(N97(IB,$D0278,1093750841)))
elseif(GetUnitLifePercent(IB)>50.)then
set J4=IssueTargetOrderById(IB,$D000F,m5)
endif
elseif(IsUnitType(m5,UNIT_TYPE_STRUCTURE))then
set J4=(GetUnitAbilityLevel(IB,1110454863)==0)and(GetUnitLifePercent(m5)<70.)and(N97(IB,$D0278,1093750841))
endif
elseif(i1==1332179560)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>5)or(ME7(m5))))then
call M6F()
set J4=(GetUnitLifePercent(m5)<35.)and(M57(IB,$D02B6,1093742660,m5))
endif
elseif(i1==1214344551)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((GetUnitLifePercent(m5)<70.)and(GetUnitAbilityLevel(m5,1110459185)==0)and(IssueImmediateOrderById(IB,$D0278)))or((GetUnitAbilityLevel(m5,1110459185)>0)and(IssueTargetOrderById(IB,$D000F,m5)))
endif
elseif((i1==1311781199)or(i1==1311781171)or(i1==1311781172)or(i1==1311781173))then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
call M6F()
set hq[$F0+O5]=Bz+4.
set J4=(IssueTargetOrderById(IB,$D0085,IB))or(IssueImmediateOrderById(IB,$D0277))
elseif(IsUnitType(m5,UNIT_TYPE_STRUCTURE))then
set J4=(IssueTargetOrderById(IB,$D0085,IB))or(IssueImmediateOrderById(IB,$D0277))
endif
elseif(i1==1211117636)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
call M6F()
set J4=(GetUnitLifePercent(m5)<55.)and(GetUnitState(m5,UNIT_STATE_LIFE)>200.)and(M_7(IB,$D007F,1093685042,1093810233,m5))
elseif((not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(GetHeroLevel(IB)>8)and(GetUnitManaPercent(IB)>45.)and(GetUnitLifePercent(m5)<75.))then
if(MP7(550.,m5,Condition(function Ki))>2)then
call SetPlayerAbilityAvailable(GetOwningPlayer(IB),1093685041,true)
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(IB),GetUnitX(m5)-GetUnitX(IB)))
set GZ[O5]=true
set J4=IssuePointOrderById(IB,$D00FA,GetUnitX(IB)+1000.*Cos(UP*bj_DEGTORAD),GetUnitY(IB)+1000.*Sin(UP*bj_DEGTORAD))
set GZ[O5]=false
endif
endif
elseif(i1==1160786000)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((GetHeroLevel(IB)>3)or(ME7(m5)))and((M57(IB,$D00FA,1093685047,m5))or((GetUnitLifePercent(m5)<60.)and(M27(IB,$D0264,1093685046,WA7(IB,m5,2000.,.65,1100.)))))
elseif((not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetHeroLevel(IB)>9)and(GetUnitManaPercent(IB)>60.)and(GetUnitLifePercent(m5)<75.))then
set J4=(MP7(400.,m5,Condition(function Ki))>2)and(M57(IB,$D00FA,1093685047,m5))
endif
elseif((i1==1311781193)or(i1==1311781192)or(i1==1311781204)or(i1==1311781194))then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=(((GetHeroLevel(IB)>3)or(ME7(m5)))and(M57(IB,$D0079,1093683532,m5)))or(((GetUnitLifePercent(m5)<75.)or(GetUnitLifePercent(IB)<65.))and(i1==1311781193)and(N97(IB,$D02B7,1095656306)))
if((not J4)and(i1!=1311781193)and(GetUnitLifePercent(IB)>75.))then
call IssueTargetOrderById(IB,$D000F,m5)
endif
elseif((not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL)))then
if((Bz>hq[O5])and(GetHeroLevel(IB)>6)and(GetUnitManaPercent(IB)>50.))then
set UP=MP7(500.,m5,Condition(function Ki))
set J4=((UP>3)or((eY[O5]==$A)and(UP>1)))and(M57(IB,$D0079,1093683532,m5))
endif
elseif((IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(i1==1311781193)and(GetUnitManaPercent(IB)>50.)and(GetHeroLevel(IB)>$A))then
set J4=(MP7(400.,m5,Condition(function Kj))>2)and(N97(IB,$D02B7,1095656306))
endif
elseif(i1==1311781206)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((GetHeroLevel(IB)>2)or(ME7(m5)))and(((IsUnitInRange(IB,m5,550.))and((GetUnitManaPercent(IB)>50.)or(GetUnitLifePercent(m5)<60.))and(IssueImmediateOrderById(IB,$D0278)))or(((GetUnitLifePercent(m5)<75.)or(M1F))and(WME(IB,m5))))
elseif((not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetHeroLevel(IB)>6)and(GetUnitManaPercent(IB)>60.))then
set UP=MP7(500.,IB,Condition(function Ki))
set J4=((UP>2)or((eY[O5]==$A)and(UP>1)))and(IssueImmediateOrderById(IB,$D0278))
endif
elseif(i1==1211117651)then
if(((GetHeroLevel(IB)>$B)and(GetUnitState(IB,UNIT_STATE_MANA)>600.))or(IsUnitType(m5,UNIT_TYPE_HERO))or((IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetUnitManaPercent(IB)>30.)and(GetUnitTypeId(m5)!=1700946284)and(GetUnitTypeId(m5)!=1970107511)and(GetUnitTypeId(m5)!=1697657398)and(GetUnitTypeId(m5)!=1966092370)))then
if(GetUnitAbilityLevel(IB,1093685594)>0)then
set hq[$F0+O5]=Bz+5.
else
set J4=IssueImmediateOrderById(IB,$D00D1)
endif
endif
elseif(i1==1160786265)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((M1F)and((GetUnitLifePercent(m5)<80.)or(GetUnitLifePercent(IB)<60.))and(IssueImmediateOrderById(IB,$D022E)))or((IsUnitInRange(IB,m5,$91+(40*GetUnitAbilityLevel(IB,1093685839))))and(N97(IB,$D00A1,1093685846)))
endif
elseif(i1==1311780930)then
if((GetHeroLevel(IB)>$A)and(not IsUnitType(m5,UNIT_TYPE_HERO))and(not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(iy(IB)))then
if(MP7(550.,m5,Condition(function Ki))>2)then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(IB),GetUnitX(m5)-GetUnitX(IB)))
set J4=IssuePointOrderById(IB,$D02B6,GetUnitX(IB)+200.*Cos(UP*bj_DEGTORAD),GetUnitY(IB)+200.*Sin(UP*bj_DEGTORAD))
set h4[16+O5]=null
endif
endif
elseif(i1==1311788615)then
if((IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetUnitLifePercent(m5)<35.)and(GetUnitLevel(IB)>5)and(Bz>T34[O5]))then
set J4=M_7(IB,$D0265,1093743184,1093747766,m5)
endif
elseif(i1==1160786520)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((GetHeroLevel(IB)>3)or(ME7(m5)))and((M57(IB,$D00D8,1093809991,m5))or((GetUnitLifePercent(m5)<60.)and(M57(IB,$D00F6,1093809990,m5))))
elseif((not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetHeroLevel(IB)>9)and(GetUnitManaPercent(IB)>60.)and(GetUnitLifePercent(m5)<75.))then
set J4=(MP7(400.,m5,Condition(function Ki))>2)and(M57(IB,$D00D8,1093809991,m5))
endif
endif
set GZ[32+O5]=false
set IB=null
set m5=null
set b5=null
endfunction
function M0F takes nothing returns boolean
return((GetSpellTargetUnit()!=null)and(IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO))and(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetSpellTargetUnit())))and(GetPlayerController(GetOwningPlayer(GetSpellTargetUnit()))==MAP_CONTROL_COMPUTER))!=null
endfunction
function M5F takes nothing returns boolean
return((IsUnitType(GetAttacker(),UNIT_TYPE_HERO))and(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker())))and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))!=null
endfunction
function M2F takes nothing returns nothing
local unit it
local unit FOF
local integer i1
local integer O5
local boolean M_F
local boolean J4
local real kl
if(GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED)then
set it=GetTriggerUnit()
set FOF=GetAttacker()
elseif(GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT)then
set it=GetSpellTargetUnit()
set FOF=GetTriggerUnit()
else
set it=GetEnumUnit()
set FOF=GetTriggerUnit()
endif
set O5=GetPlayerId(GetOwningPlayer(it))
if((not Jw(it))or(Bz<hq[304+O5]))then
set it=null
set FOF=null
return
endif
if G0[288+O5]then
set G0[288+O5]=false
set i1=eY[400+O5]
set G0[304+O5]=true
else
set G0[304+O5]=false
endif
if not G0[304+O5]then
set hq[496+O5]=Bz+1.5
set hq[304+O5]=Bz+1.
set hq[416+O5]=Bz+5.
if((not IsUnitVisible(FOF,GetOwningPlayer(it)))or(eY[32+GetPlayerId(GetOwningPlayer(FOF))]<=2))then
call TriggerSleepAction(.8)
else
call TriggerSleepAction(.2)
endif
if(Bz>hq[480+O5])then
call FNF(it,FOF)
endif
set M_F=(ME7(it))
if(not G0[256+O5])and(not M97(FOF,it))then
call DPF(it,false)
set it=null
set FOF=null
return
elseif((GetHeroLevel(it)>$D)and(GetUnitLifePercent(it)>75.)and(GetUnitState(FOF,UNIT_STATE_LIFE)<GetUnitState(it,UNIT_STATE_LIFE))and(h4[O5]==null))then
call WQE(O5,FOF,false,false)
endif
if((M87(it))and(not M_F)and((GetHeroLevel(it)<6)or((QD7(it))and(GetHeroLevel(it)<$A)))and(iU(it))and(h4[O5]!=FOF))then
if((GetUnitCurrentOrder(it)!=$D000F)or((GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED)and(not QF7(GetSpellAbilityId())))or(GetUnitLifePercent(it)<70.))then
call DPF(it,false)
set it=null
set FOF=null
return
endif
endif
set i1=GetUnitTypeId(it)
endif
if((not is(it))or(not M87(it)))then
if(M87(it))then
elseif((i1==1214409837))then
set J4=(GetUnitCurrentOrder(it)==$D0278)and(GetUnitLifePercent(it)<80.)and(jW(it,$D0012,h9[O5]))
elseif(i1==1160786243)then
set J4=(GetUnitCurrentOrder(it)==$D0079)and(GetUnitLifePercent(it)<50.)and(jW(it,$D0012,h9[O5]))
elseif(i1==1430466872)then
set J4=(GetUnitCurrentOrder(it)==$D0207)and(GetUnitLifePercent(it)<80.)and(jW(it,$D0012,h9[O5]))
endif
set it=null
set FOF=null
return
endif
if((M_F)and((GetUnitState(FOF,UNIT_STATE_LIFE)+200.)>GetUnitState(it,UNIT_STATE_LIFE))and(IsUnitInRange(it,FOF,500.)))then
if(not J4)and((MR7(it,ZU[Q1])))and((GetUnitLifePercent(it)<40)or(h4[O5]!=FOF))then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,FOF)
endif
if(not J4)and(MR7(it,ZU[D74]))then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,FOF)
endif
if(not J4)and(MR7(it,ZU[U3]))and(GetUnitLifePercent(FOF)<40)then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,FOF)
endif
if(not J4)and(MR7(it,ZU[R3]))and(OM7(GetHandleId(GetOwningPlayer(FOF)),"AI|Class")<=2)and(GetUnitLifePercent(it)<40)then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,FOF)
endif
if(not J4)and(MR7(it,ZU[DP4]))then
set J4=UnitUseItem(it,bj_lastCreatedItem)
endif
if(not J4)and((MR7(it,ZU[DR4])or MR7(it,ZU[R7t]))and(Bz>T34[$F0+O5])and(YM8(FOF)==false)and(UC7(FOF)==false))then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,FOF)
endif
if(not J4)and(MZ7(it,ZU[F5]))then
set J4=(M37(it,FOF))
endif
if(not J4)and((MR7(it,ZU[D1])or MR7(it,ZU[E1]))and(GetItemCharges(bj_lastCreatedItem)>0))and(UnitCountBuffsExBJ(bj_BUFF_POLARITY_NEGATIVE,bj_BUFF_RESIST_EITHER,FOF,false,false)==0)then
set J4=(UnitUseItemTarget(it,bj_lastCreatedItem,FOF))
endif
if(not J4)and(MZ7(it,ZU[Y0]))and(GetUnitTypeId(it)!=1164277357)then
set J4=(UnitUseItem(it,bj_lastCreatedItem))
endif
endif
if((not J4)and(IsUnitInRange(it,FOF,500.))and((GetUnitAbilityLevel(FOF,1110454329)>0)or(GetUnitAbilityLevel(FOF,1110454597)>0)or(GetUnitAbilityLevel(FOF,1110454338)>0)or(GetUnitAbilityLevel(FOF,1110454608)>0)))then
set J4=WNE(it,FOF,false)
if(not J4)then
if(not J4)and((MR7(it,ZU[Q1])))then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,FOF)
endif
if(not J4)and(MR7(it,ZU[D74]))then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,FOF)
endif
if(not J4)and(MR7(it,ZU[U3]))then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,FOF)
endif
if(not J4)and(MR7(it,ZU[DP4]))then
set J4=UnitUseItem(it,bj_lastCreatedItem)
endif
if(not J4)and(MZ7(it,ZU[F5]))then
set J4=(M37(it,FOF))
endif
if(not J4)and((MR7(it,ZU[D1])or MR7(it,ZU[E1]))and(GetItemCharges(bj_lastCreatedItem)>0))then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,FOF)
endif
endif
endif
if(not J4)and(OM7(GetHandleId(GetOwningPlayer(FOF)),"AI|Class")<=2)and(GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED)and(h4[O5]!=null or(GetUnitLifePercent(it)<30))then
if(not J4)and(MR7(it,ZU[DA4]))then
set J4=UnitUseItem(it,bj_lastCreatedItem)
endif
if(not J4)and(MR7(it,ZU[E24]))then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,FOF)
endif
if(not J4)and(MR7(it,ZU[AL]))then
set TB4=true
set J4=UnitUseItem(it,bj_lastCreatedItem)
endif
if(not J4)and(MR7(it,ZU[R3]))and((h4[O5]==FOF)or(GetUnitLifePercent(it)<70))then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,FOF)
endif
if(i1==1429221424)and(Bz>T34[48+O5]+4.)then
set J4=N97(it,$D022E,1093815119)
endif
endif
if(J4)then
elseif((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))then
set J4=((M_F)or(GetUnitAbilityLevel(FOF,1110454329)>0)or(GetUnitAbilityLevel(FOF,1110454597)>0)or(GetUnitAbilityLevel(FOF,1110454338)>0)or(GetUnitAbilityLevel(FOF,1112433522)>0)or(GetUnitAbilityLevel(FOF,1110454608)>0))and(IsUnitInRange(it,FOF,550.))and(N97(it,$D0265,1093747028))
elseif(i1==1162032951)then
set J4=(M_F)and(((GetUnitAbilityLevel(it,1093679152)>0)and(IsUnitInRange(it,FOF,450.)))or((GetUnitAbilityLevel(it,1093752154)>0)and(IsUnitInRange(it,FOF,780.))))and(M_7(it,$D022F,1093679152,1093752154,FOF))
elseif(i1==1160785972)then
set J4=(M_F)and(IssueImmediateOrderById(it,$D00A1))
elseif((i1==1162032181)or(i1==1164207469)or(i1==1429221451)or(i1==1430466609))then
set J4=(M_F)and(DDF(it))
elseif(i1==1429221424)then
set J4=(M_F)and(IsUnitInRange(it,FOF,400.))and(M57(it,$D024B,1093687351,FOF))
if((not J4)and(M_F)and(GetHeroLevel(it)>$F)and(GetUnitLifePercent(it)<20.))then
set GZ[O5]=true
set J4=J8(O5,N97(it,$D00A1,1093679445))
endif
elseif(i1==1430468913)then
if(M_F)then
set J4=(IsUnitInRange(FOF,it,300.))and(N97(it,$D009F,1093810507))
else
set J4=((IsUnitInRange(it,FOF,500.))and(M57(it,$D00B5,1093677876,FOF)))or((IsUnitInRange(FOF,it,300.))and(N97(it,$D009F,1093810507)))
endif
elseif(i1==1430467634)then
set J4=(M_F)and(IsUnitInRange(it,FOF,500.))and(M_7(it,$D0267,1093684565,1093681458,FOF))
elseif(i1==1313026096)then
set J4=(M_F)and(IsUnitInRange(it,FOF,450.))and(M57(it,$D007F,1095267426,FOF))
elseif((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))then
if(GetUnitLifePercent(FOF)>(GetUnitLifePercent(it)+35.))then
set J4=(IsUnitInRange(it,FOF,350.))and(M57(it,$D00DD,1093678929,FOF))
endif
elseif(i1==1164666213)then
set J4=((IsUnitInRange(FOF,it,300.))and(IssueImmediateOrderById(it,$D00D1)))or((IsUnitInRange(FOF,it,500.))and(N97(it,$D0272,1093677877)))
elseif(i1==1433168227)then
set J4=((M_F)and(IsUnitInRange(it,FOF,500.))and(M57(it,$D0102,1093678918,FOF)))or((GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED)and(M57(it,$D0101,1093679186,FOF)))
elseif(i1==1430466872)then
set J4=(M_F)and(((IsUnitInRange(it,FOF,450.))and(M57(it,$D0216,1093684558,FOF)))or((IsUnitInRange(it,FOF,350.))and(M57(it,$D024B,1093687349,FOF))))
elseif(i1==1162032439)then
set J4=(IsUnitInRange(it,FOF,350.))and(M57(it,$D02BD,1093744435,FOF))
elseif(i1==1430468144)then
set J4=(M_F)and((IsUnitInRange(it,FOF,500.))and(M57(it,$D00DD,1093679192,FOF)))or((IsUnitInRange(it,FOF,860.))and(OM7(GetHandleId(it),"Level")>GetUnitAbilityLevel(it,1093750337))and(GetUnitManaPercent(it)>35.)and(GetHeroLevel(it)>3)and(IssueTargetOrderById(it,$D0118,FOF)))
elseif((i1==1429221432)or(i1==1160786229))then
set J4=(M_F)and(IsUnitInRange(it,FOF,1000.))and(N97(it,$D00D4,1093679411))
elseif(i1==1429221441)then
set J4=(M_F)and(IsUnitInRange(it,FOF,450.))and(M57(it,$D0107,1093678389,FOF))
elseif(i1==1165451634)then
set J4=(M_F)and(((IsUnitInRange(it,FOF,350.))and(M57(it,$D02B6,1093687629,FOF)))or(DDF(it)))
elseif(i1==1432642913)then
set J4=((GetHeroLevel(it)>5)or(GetUnitLifePercent(it)<60.))and(IssueTargetOrderById(it,$D0097,it))
elseif(i1==1215722344)then
set J4=(M_F)and(IsUnitInRange(it,FOF,500.))and(GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED)and(JR7(GetUnitTypeId(FOF),5))and(M57(it,$D02BC,1093682499,FOF))
elseif(i1==1432510828)then
set J4=((KNF(it)>30.)and(N97(it,$D0278,1093682004)))or((GetUnitState(it,UNIT_STATE_MANA)>350.)and(IsUnitType(FOF,UNIT_TYPE_HERO))and(IssuePointOrderById(it,$D02B6,GetUnitX(FOF),GetUnitY(FOF))))or((M_F)and(IssueImmediateOrderById(it,$D00A1)))
if((not J4)and(not M_F)and(GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED))then
set h4[288+O5]=FOF
set J4=IssueImmediateOrderById(it,$D00A1)
endif
elseif(i1==1429221446)then
set J4=(not M_F)and(WKE(it,FOF))
elseif(i1==1332963428)then
set J4=(IsUnitInRange(it,FOF,450.))and(((M_F)and(M57(it,$D0103,1093678169,FOF)))or((GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED)and(kq(GetUnitTypeId(FOF)))and(M57(it,$D007F,1093816137,FOF)))or((GetUnitLifePercent(it)<90.)and(M57(it,$D0097,1093683019,FOF))))
elseif(i1==1332109682)then
set J4=(M_F)and(IsUnitInRange(it,FOF,600.))and(N97(it,$D026C,1093810505))
elseif(i1==1160786241)then
set J4=(M_F)and(IsUnitInRange(it,FOF,550.))and(M57(it,$D0097,1093684813,FOF))
elseif(i1==1429221456)then
set J4=(M_F)and(IsUnitInRange(it,FOF,500.))and(M57(it,$D0097,1093685066,FOF))
elseif(i1==1430468406)then
set J4=(M_F)and(IsUnitInRange(it,FOF,600.))and(IssueImmediateOrderById(it,$D024C))
elseif(i1==1160786242)then
if(M_F)then
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093683287,true)
set J4=(IsUnitInRange(it,FOF,500.))and(IssueTargetOrderById(it,$D02B6,FOF))
endif
elseif((i1==1211117641)or(i1==1211117642))then
set J4=(M_F)and(IsUnitInRange(it,FOF,600.))and(KZF(it,FOF))
elseif(i1==1311781207)then
set J4=(((GetHeroLevel(it)>2)or(M_F))and(GetUnitLifePercent(it)<85.)and(IssueTargetOrderById(it,$D0105,it)))or((GetHeroLevel(it)>$A)and(M_F)and(GetUnitAbilityLevel(it,1093685078)==0)and(IssueTargetOrderById(it,$D0238,it)))or((M_F)and(IsUnitInRange(it,FOF,500.))and(M57(it,$D007F,1093684817,FOF)))
elseif(i1==1311780946)then
set J4=(M_F)and(IsUnitInRange(it,FOF,550.))and(M57(it,$D0208,1093685825,FOF))
elseif(i1==1211117624)then
set J4=(M_F)and(IsUnitInRange(it,FOF,550.))and(IssueTargetOrderById(it,$D0278,FOF))
elseif(i1==1315988077)then
set J4=((M_F)and((N97(it,$D026A,1093684561))or((IsUnitInRange(it,FOF,200.))and(N97(it,$D0080,1093678669)))))or((not M_F)and(GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED)and(IsUnitInRange(it,FOF,500.))and(M57(it,$D0269,1097032808,FOF)))
elseif(i1==1211117616)then
set J4=(M_F)and(IsUnitInRange(FOF,it,250.))and(N97(it,$D009F,1093677139))
elseif(i1==1315074670)then
set J4=(JR7(GetUnitTypeId(it),5))and(GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED)and(N97(it,$D009F,1093677139))
elseif(i1==1214345830)then
set J4=((GetUnitLifePercent(it)<70.)and((M57(it,$D0101,1093679182,it))or((GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED)and(M57(it,$D00DA,1093679190,it)))))or((M_F)and(IssueImmediateOrderById(it,$D0277)))
elseif((i1==1311781174)or(i1==1311781175)or(i1==1311911984)or(i1==1311911985)or(i1==1311781442))then
set J4=(GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED)and((((IsUnitInRange(it,FOF,250.))and(IssueImmediateOrderById(it,$D00AA))and(IssueTargetOrderById(it,$D000F,FOF)))or((IsUnitInRange(it,FOF,550.))and(IssueImmediateOrderById(it,$D00AB))and(IssueTargetOrderById(it,$D000F,FOF)))))
elseif(i1==1315007329)then
set J4=(M_F)and((IssueImmediateOrderById(it,$D00A1))or((IsUnitInRange(it,FOF,650.))and(IsUnitVisible(it,GetOwningPlayer(FOF)))and(M57(it,$D00B5,1093681716,FOF))))
elseif(i1==1332898670)then
set J4=(M_F)and(IsUnitInRange(FOF,it,450.))and(M57(it,$D0216,1093685848,FOF))
elseif(i1==1215723364)then
set J4=(M_F)and((DDF(it))or((IsUnitInRange(FOF,it,450.))and(M57(it,$D007F,1093677633,FOF))))
elseif(i1==1164799855)then
set J4=((GetUnitLifePercent(it)<70.)and(N97(it,$D024C,1093677378)))or((IsUnitInRange(FOF,it,600.))and(M57(it,$D006B,1093682264,FOF)))
elseif(i1==1433105516)then
set J4=(M_F)and(IsUnitInRange(it,FOF,500.))and(IssueTargetOrderById(it,$D02B6,FOF))
elseif((i1==1214409837)or(i1==1211119192)or(i1==1211119193)or(i1==1211119191))then
set J4=(not M_F)and(GetUnitManaPercent(FOF)>30.)and(IsUnitInRange(it,FOF,600.))and(M57(it,$D02B6,1093742680,FOF))
elseif(i1==1164799603)then
set J4=(M_F)and(not IsUnitInRange(it,FOF,200.))and(IsUnitInRange(it,FOF,550.))and(M57(it,$D00FA,1093808453,FOF))
elseif(i1==1328558160)then
set J4=(M_F)and((DDF(it))or((GetHeroAgi(it,true)<GetHeroStr(it,true))and(IssueTargetOrderById(it,$D02B6,FOF))))
elseif(i1==1430466865)then
set J4=((M_F)and(DDF(it)))or(IsUnitInRange(it,FOF,350.)and(N97(it,$D009F,1093810508)))
elseif(i1==1212363833)then
set J4=(M_F)and((IssueImmediateOrderById(it,$D0278))or((IsUnitInRange(it,FOF,550.))and(M57(it,$D007F,1093809220,FOF)))or(N97(it,$D009B,1093678643)))
elseif(i1==1315070563)then
set J4=(M_F)and((((MR7(it,ZU[VW]))or(MR7(it,ZU[DG4])))and(not ke(FOF))and(M_7(it,$D0278,1093684529,1093747032,FOF)))or((GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED)and(not GZ[O5])and(not OT7(it,"Omnislashing"))and(N97(it,$D00A0,1093678407))))
elseif(i1==1212365106)then
set J4=(M_F)and(((IsUnitInRange(it,FOF,300.))and(M57(it,$D0079,1093685831,FOF)))or(DDF(it)))
elseif(i1==1214931305)then
set J4=(M_F)and(IsUnitInRange(it,FOF,450.))and(M57(it,$D00CB,1093678147,FOF))
elseif(i1==1311787088)then
elseif(i1==1211117617)or(i1==1211122513)then
set J4=(M_F)and(IsUnitInRange(it,FOF,450.))and((M57(it,$D02B6,1093744944,FOF))or(N97(it,$D022E,1093814611)))
elseif(i1==1211117633)then
set J4=(M_F)and((IssueImmediateOrderById(it,$D0278))or((IsUnitInRange(it,FOF,550.))and(M57(it,$D0269,1093684045,FOF))))
elseif(i1==1432580716 or i1==1429221720)then
set J4=(M_F)and(IsUnitInRange(it,FOF,550.))and(M57(it,$D0079,1093684300,FOF))
elseif(i1==1333027688)then
set J4=(M_F)and(IsUnitInRange(it,FOF,1000.))and(M57(it,$D0278,1093686091,FOF))
elseif(i1==1311781185)then
set J4=(GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED)and((not M_F)or(IsUnitInRange(it,FOF,550.)))and(IssueTargetOrderById(it,$D02B6,FOF))
elseif(i1==1211117643)then
if((GetUnitLifePercent(it)<20.)or(GetUnitState(it,UNIT_STATE_LIFE)<150.))then
set GZ[O5]=true
set J4=J8(O5,(IsUnitInRange(it,FOF,400.))and(M57(it,$D0048,1093678658,FOF)))
endif
elseif(i1==1215130471)then
set J4=(M_F)and(IsUnitInRange(it,FOF,550.))and((M57(it,$D007F,QI7(it),FOF))or((GetUnitLifePercent(FOF)<60)and(OO7(GetHandleId(it),"AI|Magi2Blast")and M57(it,$D0278,1093815121,FOF))))
elseif(i1==1214344551)then
if(GetUnitAbilityLevel(it,1110454833)>0)then
set GZ[272+O5]=true
endif
if(not M_F)then
set J4=(GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED)and(M57(it,$D007F,1093809742,it))
else
set J4=(K6(it))and(IssueTargetOrderById(it,$D0065,it))
endif
elseif((i1==1311781199)or(i1==1311781171)or(i1==1311781172)or(i1==1311781173))then
set h4[16+O5]=O77(GetHandleId(GetOwningPlayer(it)),"MyBear")
if((h4[16+O5]!=null)and(GetUnitAbilityLevel(it,1093681461)>1)and(not IsUnitInRange(it,h4[16+O5],800.))and(not GZ[288+O5])and(GetUnitLifePercent(h4[16+O5])>30.))then
endif
elseif(i1==1160786000)then
set J4=(M_F)and(IsUnitInRange(it,FOF,1000.))and(M27(it,$D0264,1093685046,WA7(it,FOF,2000.,.65,1100.)))
elseif(i1==1311781206)then
set J4=((M_F)and(IssueImmediateOrderById(it,$D020D)))or((IsUnitInRange(it,FOF,400.))and(IssueImmediateOrderById(it,$D0278)))or(((GetUnitLifePercent(FOF)<70.)or(M_F))and(not IsUnitInRange(it,FOF,400.))and(WME(it,FOF)))
elseif(i1==1160786520)then
set J4=(M_F)and(IsUnitInRange(it,FOF,1000.))and(M57(it,$D00F6,1093809990,FOF))
if(not J4)and hq[816+O5]>Bz then
set G0[288+O5]=true
call M2F()
endif
set G0[304+O5]=false
endif
if not G0[304+O5]then
if((not J4)and(iU(it)))then
if((M_F)and(GetUnitLifePercent(FOF)>70.))then
call PW7(it,false)
elseif((GetHeroLevel(it)>5)and(G0[$80+O5])and((GetUnitLifePercent(it)>80.)or(GetUnitState(it,UNIT_STATE_LIFE)>GetUnitState(FOF,UNIT_STATE_LIFE)))and(IsUnitInRange(it,FOF,800.))and(GetUnitCurrentOrder(it)!=$D0012))then
call IssueTargetOrderById(it,$D000F,FOF)
elseif((GetHeroLevel(it)<6)and(GetUnitLifePercent(FOF)>60.)and(((not IsUnitInRange(it,FOF,300.))and(QD7(it)))or((IsUnitInRange(it,FOF,300.))and(not QD7(it)))))then
set kl=Atan2(GetUnitY(h9[16+O5])-GetUnitY(it),GetUnitX(h9[16+O5])-GetUnitX(it))
call IssuePointOrderById(it,$D0012,GetUnitX(it)+300.*Cos(kl),GetUnitY(it)+300.*Sin(kl))
endif
endif
if((hq[656+O5]>Bz)and(GetUnitLifePercent(it)<65.))then
call PW7(it,false)
endif
if((J4)or(not is(it)))then
set hq[304+O5]=.0
endif
endif
set it=null
set FOF=null
endfunction
function DBF takes nothing returns nothing
local unit it=GetEnumUnit()
local integer i1=GetUnitTypeId(GetEnumUnit())
local integer O5=GetPlayerId(GetOwningPlayer(GetEnumUnit()))
local real kl=Atan2(GetUnitY(h9[O5])-GetUnitY(it),GetUnitX(h9[O5])-GetUnitX(it))
local real UI7
call WTE(O5,false)
if(MR7(it,ZU[RW]))then
if(kJ(GetUnitX(it)+700.*Cos(kl),GetUnitY(it)+700.*Sin(kl)))then
call MoveLocation(HB,GetUnitX(it)+700.*Cos(kl),GetUnitY(it)+700.*Sin(kl))
else
set kl=GetRandomReal(.0,6.28)
call MoveLocation(HB,GetUnitX(it)+500.*Cos(kl),GetUnitY(it)+500.*Sin(kl))
endif
call UnitUseItemPointLoc(it,MV7(it,ZU[RW]),HB)
elseif(i1==1162032181)then
set UI7=I2R(350+($C8*GetUnitAbilityLevel(it,1093684299)))
if(kJ(GetUnitX(it)+UI7*Cos(kl),GetUnitY(it)+UI7*Sin(kl)))then
call MoveLocation(HB,GetUnitX(it)+UI7*Cos(kl),GetUnitY(it)+UI7*Sin(kl))
else
set kl=GetRandomReal(.0,6.28)
call MoveLocation(HB,GetUnitX(it)+(UI7-100.)*Cos(kl),GetUnitY(it)+(UI7-100.)*Sin(kl))
endif
call IssuePointOrderByIdLoc(it,$D00FA,HB)
elseif((i1==1430466609)or(i1==1164207469))then
if(kJ(GetUnitX(it)+800.*Cos(kl),GetUnitY(it)+800.*Sin(kl)))then
call MoveLocation(HB,GetUnitX(it)+800.*Cos(kl),GetUnitY(it)+800.*Sin(kl))
else
set kl=GetRandomReal(.0,6.28)
call MoveLocation(HB,GetUnitX(it)+550.*Cos(kl),GetUnitY(it)+550.*Sin(kl))
endif
call IssuePointOrderByIdLoc(it,$D022D,HB)
elseif(i1==1429221451)then
set UI7=I2R(650+(0*GetUnitAbilityLevel(it,1093678671)))
if(kJ(GetUnitX(it)+UI7*Cos(kl),GetUnitY(it)+UI7*Sin(kl)))then
call MoveLocation(HB,GetUnitX(it)+UI7*Cos(kl),GetUnitY(it)+UI7*Sin(kl))
else
set kl=GetRandomReal(.0,6.28)
call MoveLocation(HB,GetUnitX(it)+(UI7-100.)*Cos(kl),GetUnitY(it)+(UI7-100.)*Sin(kl))
endif
call IssuePointOrderByIdLoc(it,$D00FA,HB)
elseif(i1==1328558160)then
if(kJ(GetUnitX(it)+550.*Cos(kl),GetUnitY(it)+550.*Sin(kl)))then
call MoveLocation(HB,GetUnitX(it)+550.*Cos(kl),GetUnitY(it)+550.*Sin(kl))
else
set kl=GetRandomReal(.0,6.28)
call MoveLocation(HB,GetUnitX(it)+450.*Cos(kl),GetUnitY(it)+450.*Sin(kl))
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093682766,true)
call IssuePointOrderByIdLoc(it,$D00FA,HB)
elseif(i1==1311781206)then
set GZ[O5]=true
call J8(O5,N97(it,$D00A1,1093684302))
elseif(i1==1211119409 or i1=='H0EV')then
set GZ[O5]=true
call J8(O5,N97(it,$D0278,1093749303))
elseif(i1==1211117651)then
if(kJ(GetUnitX(it)+700.*Cos(kl),GetUnitY(it)+700.*Sin(kl)))then
call MoveLocation(HB,GetUnitX(it)+700.*Cos(kl),GetUnitY(it)+700.*Sin(kl))
else
set kl=GetRandomReal(.0,6.28)
call MoveLocation(HB,GetUnitX(it)+550.*Cos(kl),GetUnitY(it)+550.*Sin(kl))
endif
call IssuePointOrderByIdLoc(it,$D00FA,HB)
else
call DDF(it)
endif
call J_7(1.)
if KE7(it,h9[O5])<400 then
call jW(it,$D000F,h8[O5])
else
call jW(it,$D0012,h9[O5])
endif
set it=null
endfunction
function N4F takes nothing returns boolean
local unit it=GetEnumUnit()
local integer i1=GetUnitTypeId(GetEnumUnit())
local player pl=GetOwningPlayer(GetEnumUnit())
local location b5=HC[16+GetPlayerId(pl)]
local unit m5=null
local boolean J4=false
local integer N7F
local integer UP
local integer O5=GetPlayerId(pl)
if G0[288+O5]then
set G0[288+O5]=false
set i1=eY[400+O5]
set G0[304+O5]=true
else
set G0[304+O5]=false
endif
if(not M47(it))and(M77(it))then
return true
endif
if((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))then
set m5=MN7(700.,b5,Condition(function Kn))
set J4=(m5!=null)and(N97(it,$D0265,1093747028))
elseif(i1==1160785972)then
set J4=IssueImmediateOrderById(it,$D00A1)
if((not J4)and(GetHeroLevel(it)>6)and(GetUnitAbilityLevel(it,1110456148)==0)and(GetUnitState(it,UNIT_STATE_MANA)>350.))then
set m5=MN7(500.,b5,Condition(function KD))
set J4=(m5!=null)and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(M57(it,$D0062,1093678161,m5))
endif
elseif((i1==1162032181)or(i1==1164207469)or(i1==1212365106)or(i1==1429221451)or(i1==1311781206))then
set J4=DDF(it)
elseif(i1==1429221424)then
if(not kD(it))then
set m5=MN7(400.,b5,Condition(function Kn))
set J4=(m5!=null)and(M57(it,$D024B,1093687351,m5))
endif
if((GetHeroLevel(it)>10.)and(GetUnitLifePercent(it)<30.)and(MO7(700.,b5,Condition(function Kn))>0))then
set GZ[GetPlayerId(pl)]=true
set J4=J8(GetPlayerId(pl),N97(it,$D00A1,1093679445))
endif
elseif(i1==1432646245)then
if(not X67())then
set m5=MN7(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(M57(it,$D007F,1093677640,m5))
endif
elseif(i1==1430466609)then
set J4=DDF(it)
if(not J4)then
set m5=MN7(450.,b5,Condition(function Kn))
set J4=(m5!=null)and(M57(it,$D022F,1093685559,m5))
endif
elseif(i1==1160786502)then
set J4=DDF(it)
elseif(i1==1429221443)then
set UP=GetUnitAbilityLevel(it,1093686103)
if(UP==1)then
set m5=MN7(250.,M07(it),Condition(function SF7))
else
set m5=MN7(250.,M07(it),Condition(function SG7))
endif
set J4=(m5!=null)and(jW(it,$D0012,m5))and(M57(it,$D0278,1093686103,m5))
if(not J4)then
set J4=(hq[$F0+GetPlayerId(pl)]<=Bz)and(N97(it,$D0131,1093686322))
endif
elseif(i1==1430468913)then
set J4=(MO7(300.,b5,Condition(function k6))>0)and(N97(it,$D009F,1093810507))
if((not J4)and(ME7(it)))then
set GZ[GetPlayerId(pl)]=true
set J4=J8(GetPlayerId(pl),N97(it,$D0084,1093678403))
endif
elseif(i1==1430467634)then
set b5=kk(it,400.,h9[GetPlayerId(pl)])
if(b5!=null)then
call SetPlayerAbilityAvailable(pl,1093750608,true)
set GZ[GetPlayerId(pl)]=true
set J4=J8(GetPlayerId(pl),IssuePointOrderByIdLoc(it,$D0208,b5))
endif
set b5=HC[16+GetPlayerId(pl)]
elseif(i1==1313026096)then
set m5=MN7(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(M57(it,$D007F,1095267426,m5))
elseif((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))then
set bj_lastLoadedUnit=it
set IN4=null
set IP4=null
set LD4=GetUnitLifePercent(it)+10.
set LE4=GetUnitLifePercent(it)+10.
call MN7(700.,b5,Condition(function RD7))
if IN4!=null then
set m5=IN4
else
set m5=IP4
endif
set J4=(m5!=null)and(M57(it,$D00DD,1093678929,m5))
elseif(i1==1430466872)then
set m5=MN7(400.,b5,Condition(function Kn))
set J4=(m5!=null)and((M57(it,$D024B,1093687349,m5))or(M57(it,$D0216,1093684558,m5))or(M37(it,m5)))
elseif(i1==1162032439)then
set m5=MN7(450.,b5,Condition(function Kn))
set J4=(m5!=null)and(M57(it,$D02BD,1093744435,m5))
elseif(i1==1430468144)then
set m5=MN7(600.,b5,Condition(function Kn))
if((m5!=null)and(MR7(it,ZU[DR4]))and(YM8(m5)==false)and(UC7(m5)==false))then
set J4=UnitUseItemTarget(it,MV7(it,ZU[DR4]),m5)
elseif((m5!=null)and(MR7(it,ZU[R7t]))and(YM8(m5)==false)and(UC7(m5)==false))then
set J4=UnitUseItemTarget(it,MV7(it,ZU[R7t]),m5)
endif
if(not J4)then
set J4=(m5!=null)and(M57(it,$D00DD,1093679192,m5))or((IsUnitInRange(it,m5,860.))and(OM7(GetHandleId(it),"Level")>GetUnitAbilityLevel(it,1093750337))and(IssueTargetOrderById(it,$D0118,m5)))
endif
elseif(i1==1429221441)then
if(not J4)then
set m5=MN7(550.,b5,Condition(function Kn))
set J4=(m5!=null)and(M57(it,$D0107,1093678389,m5))
endif
elseif(i1==1165451634)then
set J4=DDF(it)
if(not J4)then
set m5=MN7(450.,b5,Condition(function Kn))
set J4=(m5!=null)and(M57(it,$D02B6,1093687629,m5))
endif
elseif(i1==1432510828)then
if(GetUnitLifePercent(it)<25.)then
set J4=IssueImmediateOrderById(it,$D00A1)
call jW(it,$D0012,NF7(it))
endif
if(not J4)then
set m5=MN7(1200.,b5,Condition(function k6))
set J4=((KNF(it)>30.)and(MO7(900.,b5,Condition(function Kn))>0)and(N97(it,$D0278,1093682004)))or((m5!=null)and(GetUnitState(it,UNIT_STATE_MANA)>350.)and(IssuePointOrderById(it,$D02B6,GetUnitX(m5),GetUnitY(m5))))or(IssueImmediateOrderById(it,$D00A1))
endif
elseif(i1==1429221446)then
set J4=(GetUnitAbilityLevel(it,1110454868)>0)and(IssueImmediateOrderById(it,$D00D2))
elseif(i1==1429221445)then
set J4=N97(it,$D022E,1093678422)
elseif(i1==1332963428)then
set m5=MN7(600.,b5,Condition(function k8))
set J4=(m5!=null)and(UnitCountBuffsExBJ(bj_BUFF_POLARITY_NEGATIVE,bj_BUFF_RESIST_EITHER,m5,false,false)==0)and(M57(it,$D0103,1093678169,m5))
if(not J4)then
if(m5==null)then
set m5=MN7(500.,b5,Condition(function k8))
endif
set J4=(m5!=null)and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(M57(it,$D0097,1093683019,m5))
endif
elseif(i1==1332109682)then
set m5=MN7(700.,b5,Condition(function Kn))
set J4=((m5!=null)and(M57(it,$D02B6,1093678134,m5)))or((GetHeroLevel(it)>5)and(Bz>hq[16+GetPlayerId(pl)])and(Kz(600.,b5)>1)and(N97(it,$D026C,1093810505)))
elseif(i1==1211117640)then
set m5=MN7(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(M57(it,$D02BD,'A2WJ',m5))
if(not J4)then
set J4=(IsUnitType(m5,UNIT_TYPE_HERO))and(M37(it,m5))
endif
elseif(i1==1160786241)then
call SetPlayerAbilityAvailable(pl,1093684805,true)
set m5=MN7(700.,b5,Condition(function Kn))
set J4=((m5!=null)and(M57(it,$D0097,1093684813,m5)))or((GetUnitAbilityLevel(it,1110455882)==0)and(IssueImmediateOrderById(it,$D00D1)))
elseif(i1==1429221456)then
set m5=MN7(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(M57(it,$D0097,1093685066,m5))
elseif(i1==1160786243)then
set J4=IssueTargetOrderById(it,$D0118,it)
elseif(i1==1160786505)then
set J4=IssueImmediateOrderById(it,$D0272)
elseif(i1==1160786242)then
call SetPlayerAbilityAvailable(pl,1093683287,true)
set m5=MN7(900.,b5,Condition(function Kn))
set J4=(m5!=null)and(IssueTargetOrderById(it,$D02B6,m5))
elseif((i1==1211117641)or(i1==1211117642))then
set m5=MN7(550.,b5,Condition(function Kn))
set J4=(m5!=null)and(KZF(it,m5))
elseif(i1==1311781207)then
set J4=(IssueTargetOrderById(it,$D0105,it))or((GetUnitAbilityLevel(it,1093685078)==0)and(IssueTargetOrderById(it,$D0238,it)))
elseif(i1==1311780946)then
set J4=(is(it))and(KE7(it,NF7(it))>5000.)and(MO7(1200.,b5,Condition(function KX))==0)and(KEF(3))
if(not J4)then
set m5=MN7(500.,b5,Condition(function Kn))
set J4=(m5!=null)and(M57(it,$D0208,1093685825,m5))
endif
elseif((i1==1211117650)or(i1==1211119433))then
set IN4=it
set J4=(MO7(1000.,b5,Condition(function ny))>3)and(IssueTargetOrderById(it,$D02DB,it))
elseif(i1==1211117646)then
set J4=M57(it,$D0085,1093685815,it)
elseif(i1==1211117624)then
set m5=MN7(600.,b5,Condition(function k6))
set J4=(m5!=null)and(IssueTargetOrderById(it,$D0278,m5))
elseif(i1==1160785973)then
if((GetHeroLevel(it)>5)and(Bz>hq[GetPlayerId(pl)]))then
set m5=MN7(400.,b5,Condition(function k6))
set J4=(m5!=null)and(MH7(m5))and(GetUnitAbilityLevel(m5,1110454580)==0)and(MO7(700.,b5,Condition(function KA))<(MO7(700.,b5,Condition(function k6))+2))and(IssueImmediateOrderById(it,$D0278))
endif
elseif(i1==1315988077)then
set m5=MN7(600.,b5,Condition(function k6))
if(m5!=null)then
set J4=((IsUnitInRange(it,m5,200.))and(N97(it,$D0080,1093678669)))or((GetHeroLevel(it)>5)and(GetUnitLifePercent(it)<50.)and(N97(it,$D026A,1093684561)))
endif
elseif(i1==1211117616)then
set J4=(MO7(280.,b5,Condition(function k6))>0)and(N97(it,$D009F,1093677139))
elseif(i1==1211117617)or(i1==1211122513)then
set m5=MN7(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(M57(it,$D02B6,1093744944,m5))
elseif((i1==1215063922)or(i1==1211117638)or(i1==1211117637)or(i1==1211117639))then
if(i1==1215063922)then
set UP=$FA
else
set UP=400
endif
set m5=MN7(I2R(UP),b5,Condition(function Kn))
set J4=(m5!=null)and(M57(it,$D007F,1093681490,m5))
elseif(i1==1214345830)then
set J4=M57(it,$D0101,1093679182,it)
elseif((i1==1315007329)or(i1==1332179560))then
set J4=IssueImmediateOrderById(it,$D00A1)
if((not J4)and(i1==1315007329)and(GetHeroLevel(it)>5)and(GetUnitAbilityLevel(it,1110455858)==0))then
set m5=MN7(750.,b5,Condition(function k6))
set J4=(m5!=null)and(M57(it,$D00B5,1093681716,m5))
endif
elseif(i1==1211117653)then
if((GetUnitAbilityLevel(it,1110456408)==0))then
set J4=((Bz>T34[80+GetPlayerId(pl)])and UG7(it,A54,A54,A24,1093687372)and(U87(it,A24,A24,A24,false))and(IssueImmediateOrderById(it,$D00A1)))
if(not J4 and(Bz>T34[80+GetPlayerId(pl)])and(GetUnitLevel(it)>5))then
call SetPlayerAbilityAvailable(GetOwningPlayer(it),BS[4],true)
set J4=(IssueImmediateOrderById(it,$D00A1))
call SetPlayerAbilityAvailable(GetOwningPlayer(it),BS[4],false)
endif
if(not J4)then
set m5=MN7(500.,b5,Condition(function k6))
set J4=(m5!=null)and(UG7(it,A54,A54,A_4,1093686864))and(IssueImmediateOrderById(it,$D00A6))
endif
elseif((GetUnitAbilityLevel(it,1110456408)>0))then
set N7F=TC7(1215128178,it)
if((N7F>0)and(M87(M7[N7F]))and((Bz>hq[N7F])or((hq[N7F]-Bz)>.0)and((hq[N7F]-Bz)<60.))and((GetUnitAbilityLevel(M7[N7F],1093810503)>0)or(GetUnitAbilityLevel(M7[N7F],1093810504)>0)))then
set UP=GetUnitAbilityLevel(M7[N7F],1093810503)
if(UP==0)then
set UP=GetUnitAbilityLevel(M7[N7F],1093810504)
set N7F=350+(UP*100)
else
set N7F=$AA+(UP*100)
endif
if((GetUnitState(it,UNIT_STATE_LIFE)>N7F)and(GetUnitAbilityLevel(it,1093808472)<6))then
set J4=(KE7(it,NF7(it))<5900.)and(MO7(1400.,b5,Condition(function KX))==0)and(IssueImmediateOrderById(it,A24))
endif
elseif(TC7(1164799603,it)>0 or TC7(1160786242,it)>0)then
else
set J4=(GetUnitAbilityLevel(it,1093808472)<6)and(MO7(1700.,b5,Condition(function KX))==0)and(IssueImmediateOrderById(it,A24))
endif
endif
elseif(i1==1332898670)then
set m5=MN7(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(M57(it,$D0216,1093685848,m5))
elseif(i1==1215723364)then
set J4=DDF(it)
if(not J4)then
set m5=MN7(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(M57(it,$D007F,1093677633,m5))
endif
elseif(i1==1164799855)then
set J4=N97(it,$D024C,1093677378)
if(not J4)then
set m5=MN7(700.,b5,Condition(function Kn))
set J4=(m5!=null)and(M57(it,$D006B,1093682264,m5))
endif
elseif(i1==1433105516)then
set m5=MN7(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(IssueTargetOrderById(it,$D02B6,m5))
elseif(i1==1164666213)then
set m5=MN7(600.,b5,Condition(function Kn))
if(GetHeroLevel(it)>=6)then
set J4=(MO7(400.,b5,Condition(function Kn))>0)
if not OT7(it,"AI|PulseNova")then
if(J4)then
call SetPlayerAbilityAvailable(Player(O5),1093808455,true)
call N97(it,$D0084,1093808454)
call TriggerSleepAction(.1)
endif
else
if(not J4)then
call N97(it,$D0084,1093808456)
call TriggerSleepAction(.1)
endif
endif
endif
if(m5!=null)then
call MoveLocation(HA,GetUnitX(m5)+(90.+(25*GetUnitAbilityLevel(it,1093678679)))*Cos(GetUnitFacing(m5)*bj_DEGTORAD),GetUnitY(m5)+(90.+(25*GetUnitAbilityLevel(it,1093678679)))*Sin(GetUnitFacing(m5)*bj_DEGTORAD))
set J4=M27(it,$D02B6,1093678679,HA)
endif
elseif(i1==1164799603)then
set J4=(is(it))and(KE7(it,NF7(it))>5000.)and(MO7(1200.,b5,Condition(function KX))==0)and(KEF(3))
if(not J4)then
set m5=MN7(650.,b5,Condition(function Kn))
set J4=(m5!=null)and(not IsUnitInRange(it,m5,250.))and(IsUnitInRange(it,m5,600))and(M57(it,$D00FA,1093808453,m5))
endif
elseif(i1==1328558160)then
if((GetUnitAbilityLevel(it,1093684056)>0))then
if(IsTriggerEnabled(OE7(GetHandleId(pl),"MorphAgi")))then
call IssueImmediateOrderById(it,$D0246)
elseif(not IsTriggerEnabled(OE7(GetHandleId(pl),"MorphStr")))then
call IssueImmediateOrderById(it,$D0242)
endif
set G0[32+GetPlayerId(pl)]=true
endif
set J4=DDF(it)
elseif(i1==1212363833)then
set m5=MN7(750.,M07(it),Condition(function k6))
set UP=OL7(H9)
if(m5!=null and(UP>1 or GetUnitLifePercent(it)<30.))then
set J4=(GetHeroLevel(it)>5)and(IssueImmediateOrderById(it,$D0278))
endif
if(not J4)and(m5!=null and UP==1)then
set J4=M57(it,$D007F,1093809220,m5)
endif
elseif(i1==1214931305)then
set m5=MN7(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(M57(it,$D00CB,1093678147,m5))
elseif(i1==1429221430)then
set m5=MN7(600.,b5,Condition(function Kn))
if(not J4)and(m5!=null)and(MO7(1500.,b5,Condition(function KR))==0)and(KE7(it,IZ4)>$5DC)and(KE7(it,JA4)>$5DC)then
set J4=M27(it,$D0100,1093681735,b5)
endif
elseif(i1==1328558389)then
set m5=MN7(1600.,b5,Condition(function Kn))
if((m5!=null)and(not IsUnitIllusion(m5))and(GetUnitLevel(it)>=6)and(IsUnitInRange(it,m5,1600.))and(GetUnitLifePercent(m5)<33.))then
set J4=(IssuePointOrderByIdLoc(it,$D0278,GetUnitLoc(m5)))
endif
if((GetUnitLifePercent(it)<80.)or(GetUnitManaPercent(it)<60.))then
call jW(it,$D0012,NF7(it))
call J_7(2.)
call jW(it,$D0012,NF7(it))
endif
elseif(i1==1160786506)then
set m5=MN7(800.,b5,Condition(function Kn))
set N7F=GetPlayerId(GetOwningPlayer(it))
set UF4[N7F]=true
if(m5!=null)then
set J4=(J27(N7F))and(J8(N7F,IssuePointOrderByIdLoc(it,$D0079,WC7(it,m5,1.2,900))))
endif
if(not(J4))then
set UP=GetUnitAbilityLevel(it,1093751639)
set m5=MN7(2200.-(UP*400),b5,Condition(function Kn))
set J4=(m5!=null)and(M57(it,$D0097,1093751639,m5))
endif
set UF4[N7F]=false
if((GetUnitLifePercent(it)<80.)or(GetUnitManaPercent(it)<60.))then
call jW(it,$D0012,NF7(it))
call J_7(2.)
call jW(it,$D0012,NF7(it))
endif
elseif(i1==1311787088)then
set m5=MN7(700.,b5,Condition(function Kn))
set J4=(m5!=null)and((GetUnitState(it,UNIT_STATE_LIFE))>(GetUnitState(it,UNIT_STATE_MAX_LIFE)/2.8))and(M57(it,$D0278,1093750087,m5))
elseif(i1==1211117633)then
set m5=MN7(600.,b5,Condition(function Kn))
set J4=((m5!=null)and(M57(it,$D0269,1093684045,m5)))or((MN7(900.,b5,Condition(function Kn))!=null)and(GetUnitLifePercent(it)<35.)and(IssueImmediateOrderById(it,$D0278)))
elseif(i1==1432580716 or i1==1429221720)then
set m5=MN7(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(M57(it,$D0079,1093684300,m5))
elseif(i1==1333027688)then
set m5=MN7(1000.,b5,Condition(function Kn))
set J4=(m5!=null)and(M57(it,$D0278,1093686091,m5))
elseif(i1==1211117643)then
set m5=S07(700.,it)
if(m5!=null)and(GetWidgetLife(it)<50.)then
set J4=M57(it,$D0048,1093678658,it)
elseif((m5!=null)and(not IsUnitIllusion(m5))and(IsUnitInRange(it,m5,700.))and(GetUnitAbilityLevel(m5,1113815395)==0)and(GetUnitAbilityLevel(m5,1113815346)==0)and((GetUnitLifePercent(it)<50.)or(GetHeroLevel(it)<8))and(R2I(GetUnitState(m5,UNIT_STATE_LIFE))<(300+(120*GetUnitAbilityLevel(it,1093678658)))))then
set J4=M57(it,$D0048,1093678658,it)
endif
if(not J4)and(GetUnitLifePercent(it)<35.)then
set m5=MN7(350.,b5,Condition(function k6))
if((m5!=null)and((GetUnitLifePercent(it)<20.)or(MO7(350.,b5,Condition(function k6))>1)))then
set J4=M57(it,$D0048,1093678658,m5)
endif
if((not J4)and(GetUnitLifePercent(it)<20.)and(GetUnitState(it,UNIT_STATE_LIFE)<150.)and(MO7(600.,b5,Condition(function k6))>0))then
set J4=M57(it,$D0048,1093678658,it)
endif
endif
elseif(i1==1211119409 or i1=='H0EV')then
set N7F=GetPlayerId(GetOwningPlayer(it))
set UF4[N7F]=true
set J4=IssueImmediateOrderById(it,$D00A1)or(N97(it,$D0278,1093749303))
set UF4[N7F]=false
elseif(i1==1215657064)then
set J4=(MO7(320.,b5,Condition(function k6))>0)and(N97(it,$D0080,1093677913))
elseif(i1==1215130471)then
set m5=MN7(600.,b5,Condition(function Kn))
set J4=(m5!=null)and((M57(it,$D0085,QK7(it),m5))or(M57(it,$D02B6,QJ7(it),m5))or(M57(it,$D007F,QI7(it),m5))or(OO7(GetHandleId(it),"AI|Magi2Blast")and M57(it,$D0278,1093815121,m5)))
elseif(i1==1214344551)then
if((GetUnitAbilityLevel(it,1110454833)==0)and(MO7(900.,b5,Condition(function S37))>0)and(K57(it)))then
if(not K6(it))then
call MoveLocation(HC[$F0+GetPlayerId(pl)],.0,.0)
call SetRect(He,GetUnitX(it)-600.,GetUnitY(it)-600.,GetUnitX(it)+600.,GetUnitY(it)+600.)
set hr=it
call EnumDestructablesInRect(He,Q24,function J2F)
if(GetLocationX(HC[$F0+GetPlayerId(pl)])!=.0)then
set J4=IssuePointOrderByIdLoc(it,$D0012,HC[$F0+GetPlayerId(pl)])
call MoveLocation(HC[$F0+GetPlayerId(pl)],.0,.0)
else
set J4=jW(it,$D0012,h9[GetPlayerId(pl)])
endif
else
set J4=IssueTargetOrderById(it,$D0065,it)
endif
endif
elseif(i1==1160786000)then
set m5=MN7(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(M27(it,$D0264,1093685046,WA7(it,m5,2000.,.65,1100.)))
elseif(i1==1311781193)then
set J4=N97(it,$D02B7,1095656306)
elseif(i1==1211117651)then
set m5=MN7(900.,b5,Condition(function k6))
set J4=(((m5==null)or(not IsUnitInRange(it,m5,250.)))and(DDF(it)))or((m5!=null)and(M57(it,$D00DA,1093685814,it)))
elseif(i1==1211117649)then
set J4=IssueTargetOrderById(it,$D007F,it)
elseif(i1==1160786265)then
set J4=IssueImmediateOrderById(it,$D022E)
elseif(i1==1311780930)then
call SetPlayerAbilityAvailable(pl,1093686082,true)
if(PN4[GetPlayerId(pl)]==null)then
set i1=R2I(bj_RADTODEG*Atan2(GetUnitY(NF7(it))-GetUnitY(it),GetUnitX(NF7(it))-GetUnitX(it)))
set h4[16+GetPlayerId(pl)]=it
set J4=IssuePointOrderById(it,$D02B6,GetUnitX(it)+150.*Cos(i1*bj_DEGTORAD),GetUnitY(it)+150.*Sin(i1*bj_DEGTORAD))
if J4 then
call J_7(.3)
call N97(it,$D0222,1093686082)
endif
endif
elseif(i1==1211119187)then
set m5=MN7(950.,b5,Condition(function Kn))
if(not J4)and(Bz>T34[32+O5])and(m5!=null)and(KE7(it,m5)<350+GetUnitAbilityLevel(it,1093742926)*$96)then
set J4=IssueTargetOrderById(it,$D0265,m5)
endif
if(not J4)and(Bz>T34[16+O5])and(m5!=null)then
if WC7(it,m5,2.,1500.)!=null then
set J4=M27(it,$D0079,1093743414,DH7)
endif
endif
elseif((i1==1211117650)or(i1==1211119433))then
if(not J4)and(Bz>T34[32+O5])then
set IN4=it
set UP=MO7(1000.,M07(it),Condition(function ny))
set J4=(UP>=3)and(GetUnitLifePercent(it)<75.)and(IssueTargetOrderById(it,$D02BD,it))
endif
elseif(i1==1311786311)then
if(not J4)and(Bz>T34[48+O5])then
set J4=N97(it,$D022E,1093743689)
endif
if(not J4)and(Bz>T34[32+O5])then
set m5=MN7(950.,b5,Condition(function Kn))
set J4=(m5!=null)and(M57(it,$D0097,1093743178,m5))
endif
elseif(i1==1211117643)then
if(Bz>T34[16+O5])then
set m5=MN7(400.,b5,Condition(function Kn))
if(m5!=null)and(GetUnitLifePercent(m5)<60.)and(eY[320+O5]>=0)then
set m5=MN7(700.,b5,Condition(function Kn))
set J4=(m5!=null)and(M57(it,$D0136,1093678410,it))
endif
endif
elseif(i1==1211117652)then
set m5=MN7(400.,b5,Condition(function Kn))
if(m5!=null)and(Bz>T34[32+O5])and(KE7(it,m5)>200.)then
set J4=(m5!=null)and(IssueImmediateOrderById(it,$D0265))
endif
elseif(i1==1160786510)then
set m5=MN7(700.,b5,Condition(function Kn))
if(not J4)and(Bz>T34[O5])then
if((m5!=null))then
if(GetUnitLifePercent(m5)<50.)and(GetUnitLevel(it)>=6)and(not IsUnitIllusion(m5))then
if WC7(it,m5,2,1000.)!=null then
set J4=N47(it,$D0079,1093751861,1093808949,GetLocationX(DH7),GetLocationY(DH7))
endif
endif
endif
endif
if(not J4)and(m5!=null)and(Bz>T34[16+O5])and(IsUnitInRange(it,m5,400))then
set J4=N97(it,$D0278,1093751631)
endif
if(not J4)and(m5!=null)and(Bz>T34[32+O5])then
set J4=M57(it,$D0097,1093751633,m5)
endif
elseif(i1==1160786504)then
if(m5==null)then
set m5=MK7(600.,b5,Condition(function k6))
endif
if(not J4)and(m5!=null)and(Bz>T34[16+O5])then
set J4=M57(it,$D0097,1093751608,m5)
endif
if(not J4)and(m5!=null)and(Bz>T34[O5])and(GetUnitLifePercent(it)<25.)then
set J4=M57(it,$D008F,1093751617,m5)
endif
if(not J4)and(m5!=null)and(Bz>T34[32+O5])then
set J4=M57(it,$D0079,1093751618,m5)
endif
elseif(i1==1328558390)then
if(m5==null)then
set m5=MK7(600.,b5,Condition(function k6))
endif
if(not J4)and(m5!=null)and(Bz>T34[48+O5])then
call N97(it,$D00D4,1093744986)
call J_7(.1)
endif
if(not J4)and(m5!=null)and((h4[O5]!=null)or(GetUnitLifePercent(m5)<60)or(OM7(GetHandleId(m5),"StickyNapalm|Count")>3))and(Bz>T34[32+O5])then
if(WA7(it,m5,900,.2,$5DC)!=null)then
set J4=(M27(it,$D00FA,1093744982,W07(DH7,100,J47(m5,it))))
endif
endif
elseif(i1==1328558406)then
set J4=DDF(it)
elseif((i1==1214409837)or(i1==1211119192)or(i1==1211119193)or(i1==1211119191))then
if(m5==null)then
set m5=MK7(600.,b5,Condition(function k6))
endif
if((not J4)and(m5!=null)and(Bz>T34[32+O5]))then
set J4=M57(it,$D02B6,1093742680,m5)
endif
if((not J4)and(m5!=null)and(i1!=1214409837))then
set LD4=J47(m5,it)
set J4=IssuePointOrderById(it,$D0079,GetUnitX(m5)+200.*Cos(LD4*bj_DEGTORAD),GetUnitY(m5)+200.*Sin(LD4*bj_DEGTORAD))
endif
if((not J4)and(Bz>T34[16+O5])and(i1!=1214409837))then
set LD4=J47(it,h9[O5])
set J4=IssuePointOrderById(it,$D0278,GetUnitX(it)+150.*Cos(LD4*bj_DEGTORAD),GetUnitY(it)+150.*Sin(LD4*bj_DEGTORAD))
endif
elseif(i1==1430466865)then
if(m5==null)then
set m5=MK7(400.,b5,Condition(function k6))
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(GetUnitLifePercent(it)<20 or GZ[$D0+O5]))then
set J4=(N97(it,$D00C4,1093810508))
endif
elseif(i1==1160786520)then
set m5=MN7(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(M57(it,$D00F6,1093809990,m5))
if(not J4)and hq[816+O5]>Bz then
set G0[288+O5]=true
call N4F()
set G0[304+O5]=false
endif
elseif(i1==1311788336)then
set m5=MN7(600.,b5,Condition(function Kn))
if(not J4)and(Bz>T34[16+O5])and(m5!=null)and(MP7(400.,it,Condition(function Q_7))<=2)then
set J4=N97(it,$D022E,1093814323)
endif
if(not J4)and(m5!=null)then
set J4=DDF(it)
endif
if(not J4)and(Bz>T34[48+O5])and(m5!=null)then
set J4=IssueImmediateOrderById(it,$D0278)
endif
elseif(i1==1160786507)then
set m5=MN7(600.,b5,Condition(function Kn))
if(not J4)and(Bz>T34[32+O5])then
set J4=IssueTargetOrderById(it,$D0118,it)
endif
elseif(i1==1211122767)then
set m5=MN7(600.,b5,Condition(function Kn))
if(not J4)and(m5!=null)and(Bz>T34[32+O5])then
set J4=N97(it,$D022E,1093814612)
endif
if(not J4)and(m5!=null)and(Bz>T34[48+O5])then
set J4=M57(it,$D02BC,1093814350,m5)
endif
elseif(i1==1160786738)then
set m5=MN7(600.,b5,Condition(function Kn))
if(not J4)then
if GetUnitAbilityLevel(it,1093813848)==0 then
set LD4=GetUnitFacing(it)
set J4=((m5!=null)and(IssuePointOrderById(it,$D00F8,GetUnitX(it)+20*Cos(LD4*bj_DEGTORAD),GetUnitY(it)+20*Sin(LD4*bj_DEGTORAD))))
else
set bj_lastCreatedUnit=O77(GetHandleId(it),"AI|ShredChakram")
if(m5==null)or(not IsUnitInRange(it,bj_lastCreatedUnit,400))then
set J4=IssueImmediateOrderById(it,$D00D1)
endif
endif
endif
if(not J4)and(Bz>T34[32+O5])then
set J4=DDF(it)
endif
if(not J4)and(m5!=null)and(Bz>T34[16+O5])and(IsUnitInRange(it,m5,300))then
set J4=N97(it,$D022E,1093813835)
endif
endif
if(not G0[304+O5])and(not J4)then
if(not J4)and((MR7(it,ZU[RW]))and(Bz>hq[112+GetPlayerId(pl)]))then
set J4=DDF(it)
endif
if(not J4)and(MR7(it,ZU[C0]) or MR7(it,ZU[RLL]))then
set J4=UnitUseItem(it,bj_lastCreatedItem)
endif
if(not J4)and((MR7(it,ZU[DS4]))and(MO7(1200.,b5,Condition(function k6))>0))then
set J4=UnitUseItem(it,bj_lastCreatedItem)
endif
if(not J4)and((MR7(it,ZU[Q1]))and(GetUnitLifePercent(it)<35.))then
set m5=MN7(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if(not J4)and((MR7(it,ZU[D1])or MR7(it,ZU[E1]))and(GetItemCharges(bj_lastCreatedItem)>0)and(GetUnitLifePercent(it)<35.))then
set m5=MN7(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if(not J4)and((MR7(it,ZU[D74]))and(Bz>hq[96+GetPlayerId(pl)]))then
set m5=MN7(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if(not J4)and((MR7(it,ZU[U3])))then
set m5=MN7(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if(not J4)and((MR7(it,ZU[R3])))then
set m5=MN7(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if(not J4)and((MR7(it,ZU[FC])))then
set m5=MN7(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if(not J4)and((MR7(it,ZU[DP4]))and(Bz>T34[$B0+GetPlayerId(pl)]))then
set m5=MN7(500.,b5,Condition(function Kn))
set J4=(m5!=null)and(UnitUseItem(it,bj_lastCreatedItem))
endif
if(not J4)and((MR7(it,ZU[T1]))and(not OO7(GetHandleId(it),"Mekansm"))and(Bz>hq[80+GetPlayerId(pl)])and(MO7(800.,b5,Condition(function k6))>0))then
set J4=UnitUseItem(it,bj_lastCreatedItem)
endif
if(not J4)and((MR7(it,ZU[DY4]))and(GetItemCharges(bj_lastCreatedItem)>0)and(Bz>T34[$E0+GetPlayerId(pl)])and(GetUnitLifePercent(it)<70.))then
set J4=(UnitUseItemTarget(it,bj_lastCreatedItem,it))
endif
if(not J4)and(MR7(it,ZU[DK4])and(OT7(it,"ArmletOfMordigan|Active"))and(GetUnitLifePercent(it)<50.))then
set J4=(UnitUseItem(it,bj_lastCreatedItem))
endif
if((not J4)and(MB7(it))and(Bz>T34[$C0+O5]))then
if(GetUnitState(it,UNIT_STATE_LIFE)<$96)or((GetItemCharges(bj_lastCreatedItem)>=8)and(MO7(1000.,M07(it),Condition(function k6))>0)and(GetUnitLifePercent(it)<50 or GetUnitManaPercent(it)<20)and(KE7(it,h9[16+O5])>600))then
set J4=UnitUseItem(it,bj_lastCreatedItem)
endif
endif
if(not J4)and((MR7(it,ZU[DR4])or MR7(it,ZU[R7t]))and(Bz>T34[$F0+GetPlayerId(pl)])and(YM8(m5)==false)and(UC7(m5)==false))then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,m5)
endif
if((not J4)and(is(it))and(GetUnitAbilityLevel(it,1110454874)==0)and(GetUnitAbilityLevel(it,1110456148)==0)and(GetUnitAbilityLevel(it,1110455864)==0)and(GetUnitAbilityLevel(it,1110454347)==0)and(KE7(it,NF7(it))>6000.)and(MO7(1400.,b5,Condition(function KX))==0))then
if(IsUnitAlly(it,Z7[0]))then
set J4=PB7(it,IZ4)
else
set J4=PB7(it,JA4)
endif
endif
endif
set it=null
set pl=null
set b5=null
set m5=null
return J4
endfunction
function N8F takes nothing returns nothing
local unit it=GetEnumUnit()
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer i=1
if((IsUnitType(it,UNIT_TYPE_HERO))and(not IsUnitIllusion(it)))then
if((GetPlayerController(GetOwningPlayer(it))==MAP_CONTROL_COMPUTER)and(GetWidgetLife(it)>.405)and(IsUnitType(it,UNIT_TYPE_DEAD)==false))then
call ExecuteFunc("N9F")
elseif IG4[O5]then
set h4[O5]=null
if((TimerGetRemaining(U[O5])>20.)and(GetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD)>5000)and(TimerGetElapsed(U[O5])>4.))then
loop
exitwhen NM4[i]==GetEnumUnit()or i>NP4
set i=i+1
endloop
if NM4[i]!=null and GetUnitAbilityLevel(KU4[O5],1093808213)==0 then
call IssueImmediateOrderById(KU4[O5],W9[O5])
endif
endif
endif
elseif((Q87(it))and(GetUnitTypeId(it)!=1852010352)and(M87(it)))then
set bj_lastLoadedUnit=GetEnumUnit()
call ExecuteFunc("NDF")
endif
set it=null
endfunction
function NEF takes nothing returns boolean
local unit I_7=GetEnteringUnit()
local integer i=GetUnitTypeId(I_7)
if(i==1966092359 or i==1966092361)and IsPlayerInForce(GetOwningPlayer(GetEnteringUnit()),QX4)then
call RemoveGuardPosition(I_7)
call GroupAddUnit(OF7(GetHandleId(GetOwningPlayer(GetEnteringUnit())),JK7(i==1966092359,"ExorG","NAttG")),I_7)
call IssueImmediateOrderById(I_7,$D024D)
endif
if not(TZ7(GetOwningPlayer(GetEnteringUnit())))then
set I_7=null
return false
endif
set bj_lastLoadedUnit=I_7
if(i==1966092594 or i==1966092595)then
call ExecuteFunc("NFF")
elseif(i==1865429059)or(i==1865429319)or(i==1865429320)or(i==1865429321)then
call IssueTargetOrderById(I_7,$D0012,M7[GetPlayerId(GetOwningPlayer(I_7))])
elseif(i==1747993683)then
call NT7(GetHandleId(M7[GetPlayerId(GetOwningPlayer(I_7))]),"AI|ShredChakram",I_7)
elseif(Q87(I_7)and IsUnitType(I_7,UNIT_TYPE_HERO)==false)then
call IssueTargetOrderById(I_7,$D0012,M7[GetPlayerId(GetOwningPlayer(I_7))])
set CM4=false
call ExecuteFunc("NDF")
endif
set I_7=null
return false
endfunction
function NGF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer VZ7=GetHandleId(t)
local integer O5=OM7(VZ7,"OwnerPID")
local unit m5=M7[O5]
local unit NHF=null
local string NIF=I2S(OM7(VZ7,"famID"))
local integer ENF
local unit it=O77(VZ7,"unitFamiliar")
local boolean J4=false
local group g=null
local unit u=null
if(GetTriggerEventId()==EVENT_UNIT_DEATH)then
call OX7(M7[O5],"AIFamiliar"+NIF+"|Status")
call OV7(M7[O5],"AIFamiliar"+NIF+"|Stone")
call FlushChildHashtable(L7,VZ7)
call OZ7(t)
call DestroyTrigger(t)
else
set ENF=GetUnitTypeId(it)
if NIF=="1" then
if(ENF==1966092596 or ENF==1966092597 or ENF==1966092598)then
call OX7(m5,"AIFamiliar"+NIF+"|Stone")
else
call OV7(m5,"AIFamiliar"+NIF+"|Stone")
call OX7(m5,"AIFamiliar|CastStone")
endif
elseif NIF=="2" then
if(ENF==1966092612 or ENF==1966092613 or ENF==1966092614)then
call OX7(m5,"AIFamiliar"+NIF+"|Stone")
else
call OV7(m5,"AIFamiliar"+NIF+"|Stone")
call OX7(m5,"AIFamiliar|CastStone")
endif
elseif NIF=="3" then
if(ENF==1966092626 or ENF==1966092627 or ENF==1966092628)then
call OX7(m5,"AIFamiliar"+NIF+"|Stone")
else
call OV7(m5,"AIFamiliar"+NIF+"|Stone")
call OX7(m5,"AIFamiliar|CastStone")
endif
endif
if(GetUnitState(it,UNIT_STATE_LIFE)<.55*($C8+(GetUnitAbilityLevel(m5,1093750341)*100)))then
set J4=IssueImmediateOrderById(it,$D00AA)or IssueImmediateOrderById(it,$D00BB)or IssueImmediateOrderById(it,$D02B0)or IssueImmediateOrderById(it,$D00AB)or IssueImmediateOrderById(it,$D00BC)or IssueImmediateOrderById(it,$D02B1)
if not J4 then
set J4=jW(it,$D0012,h9[O5])
endif
elseif((KE7(it,NF7(m5))<1000.)and(GetUnitLifePercent(it)<98.))then
set J4=(jW(it,$D0012,NF7(m5)))
elseif(not M87(m5))then
set J4=jW(it,$D0012,NF7(m5))
elseif(not IsUnitInRange(it,m5,1200.))then
set J4=IssueTargetOrderById(it,$D0012,m5)
endif
if not J4 then
set m5=null
if GetUnitState(h4[O5],UNIT_STATE_LIFE)>0 then
set m5=h4[O5]
endif
if m5==null then
set g=CreateGroup()
call GroupClear(g)
call GroupEnumUnitsInRangeOfLoc(g,GetUnitLoc(M7[O5]),700,Condition(function Q17))
if(not J37(g))then
loop
set u=FirstOfGroup(g)
call GroupRemoveUnit(g,u)
exitwhen(IsUnitEnemy(u,GetOwningPlayer(it))and(IsUnitVisible(u,GetOwningPlayer(it)))or u==null)
endloop
set m5=u
set u=null
endif
call DestroyGroup(g)
endif
set g=CreateGroup()
call GroupEnumUnitsInRangeOfLoc(g,GetUnitLoc(M7[O5]),700,Condition(function S97))
if(not J37(g))then
loop
set u=FirstOfGroup(g)
call GroupRemoveUnit(g,u)
exitwhen(IsUnitEnemy(u,GetOwningPlayer(it))or u==null)
endloop
set NHF=u
set u=null
endif
call DestroyGroup(g)
if NHF!=null and m5!=null then
if KE7(it,NHF)<KE7(it,m5)and m5!=h4[O5]then
set m5=null
endif
endif
if m5!=null then
if(IsUnitInRange(it,m5,250.)and YN8(m5)==false and IsUnitType(m5,UNIT_TYPE_MAGIC_IMMUNE)==false and OT7(M7[O5],"AIFamiliar|CastStone")==false)then
set J4=IssueImmediateOrderById(it,$D00AA)or IssueImmediateOrderById(it,$D00BB)or IssueImmediateOrderById(it,$D02B0)or IssueImmediateOrderById(it,$D00AB)or IssueImmediateOrderById(it,$D00BC)or IssueImmediateOrderById(it,$D02B1)
if J4 then
call OV7(M7[O5],"AIFamiliar|CastStone")
endif
else
set J4=IssueTargetOrderById(it,$D000F,m5)
endif
endif
if NHF!=null and J4==false then
if GetUnitCurrentOrder(M7[O5])==$D0012 then
set J4=IssueTargetOrderById(it,$D0012,M7[O5])
else
set J4=IssueTargetOrderById(it,$D000F,NHF)
endif
endif
endif
if(not J4)then
if(eY[O5]==$A)then
set J4=jW(it,$D000F,M7[O5])
else
set J4=IssueTargetOrderById(it,$D0012,M7[O5])
endif
endif
endif
set t=null
set m5=null
set NHF=null
set it=null
set g=null
return false
endfunction
function NJF takes integer JL7,unit NKF returns nothing
local trigger t=null
local integer VL7=0
local string NIF
local integer i1=GetUnitTypeId(NKF)
if(not((GetPlayerController(GetOwningPlayer(NKF))==MAP_CONTROL_COMPUTER)and(M87(NKF))))then
return
endif
if((i1==1966092596 or i1==1966092597 or i1==1966092598))then
set NIF="1"
elseif((i1==1966092612 or i1==1966092613 or i1==1966092614))then
set NIF="2"
elseif((i1==1966092626 or i1==1966092627 or i1==1966092628))then
set NIF="3"
else
return
endif
set t=CreateTrigger()
set VL7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,NKF,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,NKF,EVENT_UNIT_SPELL_FINISH)
call TriggerRegisterTimerEvent(t,1.4,true)
call TriggerRegisterTimerEvent(t,.1,false)
call TriggerAddCondition(t,Condition(function NGF))
call OV7(M7[JL7],"AIFamiliar"+NIF+"|Status")
call NT7(VL7,"unitFamiliar",NKF)
call NP7(VL7,"OwnerPID",JL7)
call NP7(VL7,"famID",S2I(NIF))
set t=null
endfunction
function NMF takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer VZ7=GetHandleId(t)
local unit V67=O77(VZ7,"NinjaScarab")
local unit V37=O77(VZ7,"NinjaSummoner")
local unit NNF=GetTriggerUnit()
if((IsUnitType(NNF,UNIT_TYPE_HERO))and(IsUnitEnemy(NNF,GetOwningPlayer(V37)))and(IsUnitVisible(NNF,GetOwningPlayer(V37)))and(not IsUnitIllusion(NNF)))then
call IssueImmediateOrderById(V67,$D009F)
call OZ7(t)
call DestroyTrigger(t)
endif
set t=null
set V67=null
set V37=null
set NNF=null
endfunction
function NOF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer VZ7=GetHandleId(t)
local unit V37=O77(VZ7,"NAScarabOwner")
local unit V67=O77(VZ7,"NAScarabUnit")
local unit NPF=null
local unit I77=null
local unit u=null
local group g=CreateGroup()
if((GetTriggerEventId()==EVENT_UNIT_DEATH)or(GetUnitState(V37,UNIT_STATE_LIFE)<=0))then
if((GetUnitState(V67,UNIT_STATE_LIFE)>0))then
call jW(V67,$D0012,NF7(V37))
else
call FlushChildHashtable(L7,VZ7)
call OZ7(t)
call DestroyTrigger(t)
endif
else
call GroupClear(g)
call GroupEnumUnitsInRangeOfLoc(g,GetUnitLoc(V67),700,Condition(function Q57))
if(not J37(g))then
loop
set u=FirstOfGroup(g)
call GroupRemoveUnit(g,u)
exitwhen IsUnitEnemy(u,GetOwningPlayer(V37))
endloop
set I77=u
set u=null
endif
call DestroyGroup(g)
if(I77!=null)then
set g=CreateGroup()
call GroupClear(g)
call GroupEnumUnitsInRangeOfLoc(g,GetUnitLoc(V67),$96,Condition(function Q27))
if(not J37(g))then
loop
set u=FirstOfGroup(g)
call GroupRemoveUnit(g,u)
exitwhen(GetUnitTypeId(u)==1966092594 or GetUnitTypeId(u)==1966092595)
endloop
set NPF=u
set u=null
endif
call DestroyGroup(g)
if(NPF==null)then
set g=CreateGroup()
call GroupClear(g)
call GroupEnumUnitsInRangeOfLoc(g,GetUnitLoc(V37),500,Condition(function Q27))
if(not J37(g))then
loop
set u=FirstOfGroup(g)
call GroupRemoveUnit(g,u)
exitwhen(GetUnitTypeId(u)==1966092594 or GetUnitTypeId(u)==1966092595)
endloop
set NPF=u
endif
endif
endif
if(I77!=null and NPF!=null and GetUnitState(I77,UNIT_STATE_LIFE)>0 and IsUnitVisible(I77,GetOwningPlayer(V37)))then
call IssueTargetOrderById(NPF,$D0012,I77)
call J_7(3)
if((GetUnitState(V67,UNIT_STATE_LIFE)>0)and(GetUnitCurrentOrder(V67)!=$D0012))then
call IssueTargetOrderById(V67,$D0012,V37)
endif
else
call IssueTargetOrderById(V67,$D0012,V37)
endif
endif
call DestroyGroup(g)
set t=null
set NPF=null
set V37=null
set V67=null
set I77=null
set u=null
set g=null
return false
endfunction
function NFF takes nothing returns nothing
local trigger t=CreateTrigger()
local unit V67=bj_lastLoadedUnit
local unit V37=M7[GetPlayerId(GetOwningPlayer(V67))]
local unit I77=null
local unit u=null
local group g=CreateGroup()
local boolexpr b=Condition(function Q57)
local boolean NQF=false
call GroupClear(g)
call GroupEnumUnitsInRangeOfLoc(g,GetUnitLoc(V67),700,Condition(function Q57))
if(not J37(g))then
loop
set u=FirstOfGroup(g)
call GroupRemoveUnit(g,u)
exitwhen IsUnitEnemy(u,GetOwningPlayer(V37))
endloop
set I77=u
endif
call DestroyGroup(g)
if(I77!=null and GetUnitState(I77,UNIT_STATE_LIFE)>0 and IsUnitVisible(I77,GetOwningPlayer(V37)))then
if(KE7(V67,I77)>250.)then
set NQF=true
call IssueTargetOrderById(V67,$D0012,V37)
else
call IssueImmediateOrderById(V67,$D009F)
call OZ7(t)
call DestroyTrigger(t)
endif
else
set NQF=true
call IssueTargetOrderById(V67,$D0012,V37)
endif
if(NQF)then
call NT7(GetHandleId(t),"NAScarabOwner",V37)
call NT7(GetHandleId(t),"NAScarabUnit",V67)
call TriggerRegisterUnitEvent(t,V67,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,2.1,true)
call TriggerAddCondition(t,Condition(function NOF))
set t=CreateTrigger()
call NT7(GetHandleId(t),"NinjaSummoner",V37)
call NT7(GetHandleId(t),"NinjaScarab",V67)
call TriggerRegisterUnitInRange(t,V67,70,b)
call TriggerAddAction(t,function NMF)
endif
call DestroyBoolExpr(b)
set t=null
set g=null
set u=null
set V67=null
set V37=null
set I77=null
endfunction
function NRF takes unit WI7,integer n5,integer AZ8 returns item
local real x=AV8(WI7)
local real y=AX8(WI7)
local item QU8=CreateItem(n5,x,y)
local integer i=0
local boolean array AA8
local item Z4
local boolean MA7=false
set GF7=IR4
call SetItemPlayer(QU8,IR4,false)
call SetItemUserData(QU8,1)
if n5>0 then
loop
exitwhen i>(UnitInventorySize(WI7)-1)
if UnitItemInSlot(WI7,i)==null and i!=AZ8 then
set Z4=CreateItem(1227895373,x,y)
call UnitAddItem(WI7,Z4)
set AA8[i]=true
else
set AA8[i]=false
endif
if i==AZ8 then
set MA7=UnitAddItem(WI7,QU8)
endif
set i=i+1
endloop
set i=0
loop
exitwhen i>5
if AA8[i] then
call RemoveItem(UnitItemInSlot(WI7,i))
endif
set i=i+1
endloop
endif
if(not MA7)then
call RemoveItem(QU8)
set QU8=null
endif
set HA4=QU8
set QU8=null
set Z4=null
return HA4
endfunction
function NSF takes integer O5,unit it returns nothing
local integer i
local integer j
if(G97[384+O5]!=0)and(Bz>G97[$A0+O5])and(Bz>G97[$B0+O5])then
if GetUnitLifePercent(it)<30 then
set i=2
elseif GetUnitState(it,UNIT_STATE_MANA)<120 then
set i=3
if G97[400+O5]!=3 then
set G97[416+O5]=R2I(140./GetUnitState(it,UNIT_STATE_MAX_MANA)*100)
endif
elseif G97[400+O5]==3 and GetUnitManaPercent(it)<I2R(G97[416+O5])then
set i=3
else
set i=G97[384+O5]
endif
if G97[400+O5]!=i then
set G97[400+O5]=i
set i=0
set j=0
loop
set LK4=UnitItemInSlot(it,j)
set LM4=GetItemTypeId(LK4)
if LM4==ZU[G6]then
set i=1
elseif LM4==ZU[H6]then
set i=2
elseif LM4==ZU[N6]then
set i=3
endif
if i!=0 then
call DisableTrigger(H94)
call RemoveItem(LK4)
set IR4=Player(O5)
set LK4=NRF(it,ZU[G6+G97[400+O5]-1],j)
call EnableTrigger(H94)
exitwhen true
endif
set j=j+1
exitwhen j>=bj_MAX_INVENTORY
endloop
set LK4=null
endif
endif
endfunction
function NTF takes nothing returns boolean
local integer NUF=MP7(600,GetEnumUnit(),Condition(function SJ7))
return(((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(M87(GetFilterUnit()))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0))and((GetUnitLifePercent(GetFilterUnit())<30.+7*MP7(600,GetEnumUnit(),Condition(function SJ7))+7*(MP7(350,GetFilterUnit(),Condition(function k6)))+3*(MP7(350,GetFilterUnit(),Condition(function Q_7))))or NUF>=3 or .73*GetWidgetLife(GetFilterUnit())<=350+NUF*70))!=null
endfunction
function N9F takes nothing returns nothing
local unit it=GetEnumUnit()
local unit m5=null
local integer i1=GetUnitTypeId(it)
local player pl=GetOwningPlayer(it)
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer UP
local location b5
local location NVF=null
local location NWF=null
local boolean J4=false
local item NXF=null
local boolean NYF=false
local integer NZF
local unit NAF=null
local unit RL7=null
call TriggerSleepAction(.1)
if G0[288+O5]then
set G0[288+O5]=false
set i1=eY[400+O5]
set G0[304+O5]=true
endif
set G0[64+O5]=false
if(i1!=1211117642)then
set b5=HC[16+O5]
else
if(OI7(GetHandleId(it),"MCSLoc")!=null)then
set b5=OI7(GetHandleId(it),"MCSLoc")
else
set b5=GetUnitLoc(it)
call NL7(GetHandleId(it),"MCSLoc",b5)
endif
endif
call MoveLocation(b5,GetUnitX(it),GetUnitY(it))
if not G0[304+O5]then
if(i1!=1211117642)and(M87(it))then
call NSF(O5,it)
endif
if(h4[O5]!=null)and((not M87(h4[O5]))or(not IsHeroUnitId(GetUnitTypeId(h4[O5])))or((IsUnitIllusion(h4[O5]))and((MO7(800.,b5,Condition(function K7))>0)or(lA(h4[O5],IsUnitAlly(it,Z7[0])))))or(IsUnitAlly(h4[O5],pl)))then
call WTE(O5,true)
if(K57(it))then
call J3(it,true)
endif
endif
if(i1==1429221451)and(GetUnitCurrentOrder(it)==$D0217)and(MP7(GetUnitAbilityLevel(it,1093683248)*50+100,it,Condition(function Q_7))<=2)then
set G0[272+O5]=true
call IssueImmediateOrderById(it,$D0004)
call J3(it,false)
set G0[272+O5]=false
endif
if((G0[O5])or(not K57(it))or(GetUnitAbilityLevel(it,1110459478)>0))then
set J4=true
if(GetUnitAbilityLevel(it,1110459478)>0)then
set G0[64+O5]=true
endif
elseif(((ME7(it))and(not Id(O5)))or((G0[32+O5])and(h4[O5]==null)))then
if(h4[O5]!=null)then
call FNF(it,h4[O5])
endif
if(eY[O5]!=2)then
if(i1==1211117642)then
set J4=(ME7(it))and(is(it))and(not Id(O5))and(jW(it,$D0012,h9[O5]))
elseif(not G0[32+O5])then
call PW7(it,false)
elseif(Jw(it))then
if(ME7(it))then
set J4=N4F()
endif
if(not J4)then
call DDF(it)
endif
endif
endif
set J4=true
elseif(h4[O5]==null)then
if((GetHeroLevel(it)>3)and(GetUnitLifePercent(it)>70.)and(G0[$80+O5]))then
if((MO7(800.,b5,Condition(function K7))>0)or(lA(h4[O5],IsUnitAlly(it,Z7[0]))))then
set m5=MN7(1100.,b5,Condition(function KK))
else
set m5=MN7(1100.,b5,Condition(function Kl))
endif
if(m5!=null)then
if(iy(it))then
set h4[$A0+O5]=m5
endif
if((KY(750.,M07(m5))<=2)and(not Q77(m5))and((M97(m5,it))or(MP7(400.,m5,Condition(function S47))==0)))then
call WQE(O5,m5,false,false)
endif
endif
endif
else
set m5=K3(600.,it,Condition(function k6))
if(m5!=h4[O5]and m5!=null)then
if(GetUnitLifePercent(m5)>50.)then
if((GetUnitState(m5,UNIT_STATE_LIFE)+(20.*GetHeroLevel(m5)))<GetUnitState(h4[O5],UNIT_STATE_LIFE))then
call WQE(O5,m5,false,false)
endif
elseif(GetUnitState(m5,UNIT_STATE_LIFE)<GetUnitState(h4[O5],UNIT_STATE_LIFE))then
call WQE(O5,m5,false,false)
endif
endif
if((GetUnitTypeId(h4[O5])==1211117641)and(GetUnitLifePercent(h4[O5])>50.))then
set m5=MN7(700.,b5,Condition(function KL))
if(m5!=null)then
call WQE(O5,m5,false,false)
endif
endif
if((GetHeroLevel(it)<6)and(not MF7(O5)))then
if((not IsUnitInRange(it,h4[O5],750.))or((GetUnitLifePercent(it)-20.)<GetUnitLifePercent(h4[O5])and G0[$90+O5]==false)or((not IsUnitVisible(h4[O5],pl))and(kD(h4[O5]))))then
call WTE(O5,false)
call J3(it,true)
endif
elseif(((not IsUnitInRange(it,h4[O5],1500.)or((GetUnitLifePercent(it)+20.)<GetUnitLifePercent(h4[O5])and G0[$90+O5]==false))and(not MF7(O5)))or(Q77(h4[O5])))then
call WTE(O5,true)
call J3(it,true)
elseif((not IsUnitVisible(h4[O5],pl))and(((IsVisibleToPlayer(GetUnitX(h4[O5]),GetUnitY(h4[O5]),pl))and(not IsUnitHidden(h4[O5])))or((eY[32+GetPlayerId(GetOwningPlayer(h4[O5]))]<2)and(kD(h4[O5])))))then
if(not ME7(h4[O5]))then
if((GetUnitTypeId(h4[O5])==1212365106)and(MR7(it,ZU[WC]))and(GetItemCharges(bj_lastCreatedItem)>1))then
set J4=((GetUnitX(h4[O5])!=0)or(GetUnitY(h4[O5])!=0))and(UnitUseItemPoint(it,MV7(it,ZU[WC]),GetUnitX(h4[O5]),GetUnitY(h4[O5])))
elseif((GetUnitTypeId(h4[O5])==1211119409 or GetUnitTypeId(h4[O5])=='HOEV')and(MR7(it,ZU[WC]))and(GetItemCharges(bj_lastCreatedItem)>1))then
set J4=((GetUnitX(h4[O5])!=0)or(GetUnitY(h4[O5])!=0))and(UnitUseItemPoint(it,MV7(it,ZU[WC]),GetUnitX(h4[O5]),GetUnitY(h4[O5])))
else
set h4[O5]=null
call J3(it,true)
endif
elseif(i1==1311781185)then
set J4=IssueImmediateOrderById(it,$D0278)
elseif(MR7(it,ZU[T5]))then
set J4=UnitUseItem(it,bj_lastCreatedItem)
elseif(MR7(it,ZU[CC]))then
set J4=(KE7(it,h4[O5])<=600)and(UnitUseItem(it,bj_lastCreatedItem))
elseif(MR7(it,ZU[WC]))then
set J4=((GetUnitX(h4[O5])!=0)or(GetUnitY(h4[O5])!=0))and(UnitUseItemPoint(it,bj_lastCreatedItem,GetUnitX(h4[O5]),GetUnitY(h4[O5])))
else
if(not OO7(R44,YNE(it)+"|W"))then
call NS7(R44,YNE(it)+"|W",true)
endif
call WTE(O5,true)
call J3(it,true)
endif
endif
endif
endif
if h4[O5]==null then
set hq[624+O5]=0
endif
set m5=h4[O5]
if((iy(it))and(m5!=null))then
set h4[$A0+O5]=m5
endif
set GZ[$80+O5]=(m5!=null)and((GetHeroLevel(it)>5)or(M97(m5,it)))
if((not J4)and(MR7(it,ZU[E24])))and(h4[O5]!=null)then
call UnitUseItemTarget(it,bj_lastCreatedItem,m5)
endif
if((not J4)and(MR7(it,ZU[N3])))and(h4[O5]!=null)then
call DisableTrigger(Q04[O5])
call UnitUseItemPoint(it,bj_lastCreatedItem,GetUnitX(m5),GetUnitY(m5))
call EnableTrigger(Q04[O5])
endif
if(J4)then
elseif(i1==1160785970)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>3))then
set m5=MK7(700.,b5,Condition(function k6))
endif
set J4=(m5!=null)and((GetHeroLevel(it)>3)or(M97(m5,it)))and(IsUnitInRange(it,m5,650.))and(GetUnitManaPercent(it)>25.)and(Bz>T34[16+O5])and(N97(it,$D022E,1093748023))
if((not J4)and(G0[$80+O5])and(GetHeroLevel(it)>3))then
set J4=(m5!=null)and(IsUnitInRange(it,m5,450.))and(IssuePointOrderById(it,$D02B6,GetUnitX(m5)+2,GetUnitY(m5)-2))
endif
if((not J4)and(G0[$80+O5])and(GetHeroLevel(it)>5))then
set m5=MK7(450.,b5,Condition(function k6))
set J4=(m5!=null)and(Bz>T34[O5])and(((GetUnitAbilityLevel(it,1093747023)>0)and(N97(it,$D0105,1093747023)))or((GetUnitAbilityLevel(it,1093752150)>0)and(N97(it,$D0105,1093752150))))
endif
elseif(i1==1160786506)then
if(GetHeroLevel(it)>3)then
set m5=MN7(800.,b5,Condition(function k6))
endif
set J4=(m5!=null)and(Bz>T34[16+O5])and(IsUnitInRange(it,m5,795.))and(((GetUnitAbilityLevel(it,1093751894)<4)and(GetUnitManaPercent(it)>50.))or(GetUnitLifePercent(m5)<40.)or(h4[O5]!=null))and(M57(it,$D007F,1093751894,m5))
if(not J4)and(m5!=null)and(Bz>T34[48+O5])and((GetUnitLifePercent(m5)<30.)or((h4[O5]!=null)and((GetUnitLifePercent(m5)<70.)or(eY[320+O5]>0))))then
if(YU7(it,m5))or(not IsUnitInRange(m5,it,800))then
call WC7(it,m5,1.2,900)
else
call MoveLocation(DH7,GetUnitX(m5),GetUnitY(m5))
endif
set J4=(J27(O5)and(J8(O5,IssuePointOrderByIdLoc(it,$D0079,DH7))))
endif
if(not J4)and(m5!=null)and(Bz>T34[32+O5])and(YU7(it,m5))and(not IsUnitInRangeLoc(m5,I_F(m5),600))then
set J4=M57(it,$D0097,1093751639,m5)
endif
if(not J4)and(h4[O5]!=null)and(YO8(m5)or GetUnitLifePercent(it)<80 or GZ[$D0+O5])then
set J4=(m5!=null)and(IssuePointOrderById(it,$D02B6,GetUnitX(m5),GetUnitY(m5)))
endif
if(not J4)and(Bz>T34[32+O5])then
set m5=MN7(1200.,b5,Condition(function J4F))
set J4=(m5!=null)and(M57(it,$D0097,1093751639,m5))
endif
elseif(i1==1160786502)then
if((m5==null)and(G0[$80+O5]))then
set m5=S27(900.,it,Condition(function k6))
endif
if((G0[$80+O5])and(O77(GetHandleId(it),"Bird4")!=null)and(XH7(O77(GetHandleId(it),"Bird4"))==false))then
if m5==null then
set m5=MN7(900.,b5,Condition(function Q_7))
endif
set NVF=WA7(it,m5,900,.01,$3E8)
if NVF!=null then
set J4=IssuePointOrderByIdLoc(it,$D00D9,NVF)
else
set J4=IssuePointOrderById(it,$D00D9,GetUnitX(m5)+GetRandomReal(-75,75)*GetRandomReal(0,1),GetUnitY(m5)+GetRandomReal(-75,75)*GetRandomReal(0,1))
endif
endif
if(not J4 and(Bz>T34[16+O5]))then
set UJ4[O5]=true
set J4=(m5!=null)and((GetUnitLifePercent(m5)>70.)or((GetUnitLifePercent(m5)<30. and MP7(900.,it,Condition(function S37))>=1))or(GZ[$D0+O5]))and(IssuePointOrderByIdLoc(it,$D0278,GetUnitLoc(m5)))
endif
if(not J4)then
set J4=((GetUnitLifePercent(it)>30.)and(GetUnitState(it,UNIT_STATE_MANA)>300. and GetUnitManaPercent(it)>40))and(MP7(900.,it,Condition(function S37))>=1)or(MP7(500.,it,Condition(function Q_7))>3)and IssueImmediateOrderById(it,$D020A)or((m5!=null)and(GetRandomInt(1,3)==1)and((GetUnitLevel(it)>5)or(GetUnitLifePercent(m5)<30.))and(IssuePointOrderByIdLoc(it,$D0278,GetUnitLoc(m5))))
endif
if((not J4)and(Bz>hq[O5])and(MP7(600.,it,Condition(function S37))>=2))and(MP7(550.,it,Condition(function SJ7))>=2 or GetUnitLifePercent(it)<25.)then
set J4=IssueImmediateOrderById(it,$D02B6)
endif
set UJ4[O5]=false
set IN4=it
if(not J4)then
set G=1
set RL7=S27(900,it,And(Condition(function SN7),Condition(function SP7)))
set G=3
set RL7=JD7(RL7==null,S27(900,it,And(Condition(function SN7),Condition(function SP7))),RL7)
set m5=JD7(RL7!=null,RL7,JD7(m5!=null,m5,S27($44C,it,And(Condition(function k6),Condition(function QL7)))))
if(m5!=null)and(GetUnitLifePercent(it)>40)and(G0[256+O5])and(not IsUnitInRange(it,m5,300))and(IsUnitInRange(it,m5,$514))then
set h4[O5]=m5
set J4=IssueTargetOrderById(it,$D00FA,m5)
endif
endif
elseif((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))then
if(GetUnitAbilityLevel(it,1112436083)>0)then
if((GetUnitState(it,UNIT_STATE_MANA)<100.)and(not ME7(it)))then
call IssueImmediateOrderById(it,$D026E)
call SetPlayerAbilityAvailable(pl,1093684560,false)
endif
elseif((GetHeroLevel(it)>3)and((GetUnitState(it,UNIT_STATE_MANA)>250.)or(ME7(it))))then
call SetPlayerAbilityAvailable(pl,1093684560,true)
call IssueImmediateOrderById(it,$D026D)
endif
if((h4[16+O5]!=null)and(G0[$80+O5]))then
if(GetUnitAbilityLevel(h4[16+O5],1114665575)==0)then
set J4=IssueTargetOrderById(it,$D000F,h4[16+O5])
else
set h4[16+O5]=null
endif
endif
call SetPlayerAbilityAvailable(pl,1093682994,(GetUnitManaPercent(it)>75.)and(GetHeroLevel(it)>8))
if((not J4)and(m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>3))then
set m5=K3(800.,it,Condition(function k6))
endif
set J4=(m5!=null)and(((GetUnitLifePercent(m5)<60.)and(not IsUnitIllusion(m5))and(GetUnitAbilityLevel(m5,1114665575)==0)and(N97(it,$D0265,1093747028)))or(((GetUnitManaPercent(it)>70.)or(GetUnitLifePercent(m5)<60.))and(M57(it,$D0097,1093682994,m5))))
elseif(i1==1429221443)then
if((m5==null)and(G0[$80+O5]))then
set m5=MN7(600.,b5,Condition(function k6))
endif
if((GetHeroLevel(it)>6)and(m5!=null)and(GetUnitLifePercent(it)>50.))then
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093744948,false)
if(MR7(it,ZU[DM4])and(OT7(it,"ArmletOfMordigan|Active")==false)and(GetUnitLifePercent(it)>90.)and(IsUnitInRange(it,m5,110.)))then
set J4=(m5!=null)and(UnitUseItem(it,MV7(it,ZU[DM4])))
elseif(MR7(it,ZU[DK4])and(OT7(it,"ArmletOfMordigan|Active"))and((not IsUnitInRange(it,m5,150.))or(GetUnitLifePercent(it)<60.)))then
set J4=(UnitUseItem(it,MV7(it,ZU[DK4])))
else
set J4=(Bz>hq[$F0+O5])and((hq[416+O5]>Bz)or(GetUnitLifePercent(m5)<60.))and((N97(it,$D0131,1093686322))or(MC7(it,ZU[D0])))
endif
if((not J4)and((GetUnitLifePercent(m5)<50.)))then
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093744948,true)
set GZ[O5]=true
set J4=(IssueTargetOrderById(it,$D0097,m5))
set GZ[O5]=false
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093744948,false)
endif
endif
elseif(i1==1162032951)then
if((GetHeroLevel(it)>20)and(MO7(1500.,b5,Condition(function k6))==0)and(GetUnitManaPercent(it)>70.))then
call SetPlayerAbilityAvailable(pl,1093678404,true)
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>5)and(Bz>hq[O5]))then
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
set J4=(UP>$C8)and(UP<(400*GetUnitAbilityLevel(it,1093679152))or UP<(460*GetUnitAbilityLevel(it,1093752154)))and(M_7(it,$D022F,1093679152,1093752154,m5))
endif
if((not J4)and(MR7(it,ZU[C0]) or MR7(it,ZU[RLL]))and(GetHeroLevel(it)>$A)and(GetUnitManaPercent(it)>50.)and(G0[$80+O5]))then
if((m5==null)and(GetUnitLifePercent(it)>70.))then
set m5=MK7(1500.,b5,Condition(function KK))
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(not MR7(m5,ZU[EW]))and(GetUnitTypeId(m5)!=1212365106)and(not IsUnitInRange(it,m5,800.))and(IsUnitInRange(it,m5,1500.)))then
if((MP7(600.,m5,Condition(function SR7))>0)or((GetUnitLifePercent(m5)<75.)and(MP7(800.,m5,Condition(function S47))==0)))then
set GZ[272+O5]=true
if(MR7(it,ZU[RLL]))then
set J4=UnitUseItem(it,MV7(it,ZU[RLL]))
else
set J4=UnitUseItem(it,MV7(it,ZU[C0]))
endif
set GZ[272+O5]=J4
endif
endif
endif
elseif(i1==1162032181)then
if((GetHeroLevel(it)>5)and(Bz>hq[O5]))then
if((m5==null)and(G0[$80+O5]))then
set m5=MK7(1000.,b5,Condition(function k6))
endif
if((m5!=null)and(not IsUnitIllusion(m5))and((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<(KHF(it)))or(PT4))and(GetUnitState(m5,UNIT_STATE_LIFE)>300.))then
set GZ[O5]=true
set J4=J8(O5,(IsUnitInRange(it,m5,250.))and(M57(it,$D02AC,1093683761,m5)))
if((not J4)and(IsUnitInRange(it,m5,700.))and(R2I(GetUnitState(it,UNIT_STATE_MANA))>270+(25*GetUnitAbilityLevel(it,1093683761))))then
set NWF=kL(it,m5,200.)
set J4=(NWF!=null)and(MO7(800.,NWF,Condition(function S37))<=2)and(IssuePointOrderByIdLoc(it,$D00FA,NWF))
endif
endif
if((not J4)and(GetHeroLevel(it)>$C)and(m5!=null)and(not IsUnitIllusion(m5))and(IsUnitInRange(it,m5,300.))and(Kz(600.,b5)>1)and(MO7(600.,b5,Condition(function SI7))>0))then
set GZ[O5]=true
set J4=J8(O5,M57(it,$D02AC,1093683761,m5))
endif
endif
if((not J4)and(m5!=null)and(M97(m5,it))and(not IC(O5))and(not IsUnitInRange(it,m5,250.))and(IsUnitInRange(it,m5,I2R(350+($C8*GetUnitAbilityLevel(it,1093684299))))))then
set NWF=kL(it,m5,200.)
set J4=(NWF!=null)and(MO7(800.,NWF,Condition(function S37))<=2)and(IssuePointOrderByIdLoc(it,$D00FA,NWF))
endif
elseif(i1==1160785972)then
call SetPlayerAbilityAvailable(pl,1093678161,(GetUnitLifePercent(it)<70.)and(R2I(GetUnitState(it,UNIT_STATE_MANA))>(120+(80*GetUnitAbilityLevel(it,1093677621)))))
call SetPlayerAbilityAvailable(pl,1093677872,(GetHeroLevel(it)>10.)and(iy(it))and(MO7(800.,b5,Condition(function k8))>0)and(GetUnitState(it,UNIT_STATE_MANA)>225.))
if((m5==null)and(G0[$80+O5]))then
set m5=MK7(800.,b5,Condition(function k6))
endif
set J4=(m5!=null)and(GetUnitManaPercent(it)>60.)and(GetRandomInt(1,3)==1)and(GetHeroLevel(it)>3)and((not IsUnitInRange(it,m5,550.))and(M57(it,$D00CD,1095263841,m5)))
if((GetHeroLevel(it)>8)and(G0[$80+O5])and(GetUnitAbilityLevel(it,1110456118)==0))then
if((m5==null)and(GetUnitLifePercent(it)>70.))then
if((eY[O5]==9)and(h4[$90+O5]!=null)and(M87(h4[$90+O5]))and(IsUnitInRange(it,h4[$90+O5],1500.))and(not IsUnitVisible(it,GetOwningPlayer(h4[$90+O5]))))then
set m5=h4[$90+O5]
else
set m5=MK7(1500.,b5,Condition(function KK))
endif
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(not kD(m5))and(GetUnitTypeId(m5)!=1212365106)and(not IsUnitInRange(it,m5,800.))and(IsUnitInRange(it,m5,1500.))and((GetUnitLifePercent(m5)<70.)or(MP7(650.,m5,Condition(function SR7))>0)))then
set h4[288+O5]=m5
set J4=(MP7(800.,m5,Condition(function S47))==0)and(IssueImmediateOrderById(it,$D00A1))
endif
endif
elseif(i1==1429221424)then
if(GetUnitAbilityLevel(it,1110454347)==0)then
call SetPlayerAbilityAvailable(pl,1093748789,(GetHeroLevel(it)>3)and(m5!=null))
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>3))then
set m5=MK7(800.,b5,Condition(function k6))
endif
else
set J4=true
endif
if((not J4)and(m5!=null)and(GetHeroLevel(it)>3))then
set UP=R2I(GetUnitState(m5,UNIT_STATE_MANA))
set J4=(UP>100.)and((R2I(GetUnitState(it,UNIT_STATE_MANA))>($DC+(50*GetUnitAbilityLevel(it,1093679445))))or((GetUnitState(m5,UNIT_STATE_LIFE)<200.)and(UP>$C8)))and(M57(it,$D0118,1093748789,m5))
if((not J4)and(GetUnitLifePercent(m5)<70.))then
set GZ[O5]=true
set J4=J8(O5,(M57(it,$D024B,1093687351,m5))or(M57(it,$D0118,1093748789,m5)))
endif
endif
if((not J4)and(GetHeroLevel(it)>5)and(GetUnitLifePercent(it)>70.)and(G0[$80+O5]))then
if(m5==null)then
if((eY[O5]==9)and(h4[$90+O5]!=null)and(M87(h4[$90+O5]))and(IsUnitInRange(it,h4[$90+O5],1500.))and(not IsUnitVisible(it,GetOwningPlayer(h4[$90+O5]))))then
set m5=h4[$90+O5]
else
set m5=MK7(1500.,b5,Condition(function KK))
endif
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(GetUnitLifePercent(m5)<75.)and(not kD(m5))and(GetUnitTypeId(m5)!=1212365106)and((not IsUnitVisible(it,GetOwningPlayer(m5)))or(not IsUnitInRange(it,m5,800.)))and(IsUnitInRange(it,m5,1500.))and(not MR7(m5,ZU[EW])))then
if(MP7(1000.,m5,Condition(function S47))==0)then
set GZ[O5]=true
set h4[288+O5]=h4[O5]
set J4=J8(O5,N97(it,$D00A1,1093679445))
endif
endif
endif
if((m5==null)and(GetUnitAbilityLevel(it,1110454347)==0)and(GetHeroLevel(it)>9)and(MO7(1500.,b5,Condition(function k6))==0)and(GetUnitManaPercent(it)>60.))then
call SetPlayerAbilityAvailable(pl,1093687351,true)
endif
elseif(i1==1432646245)then
if(not X67())then
if((Bz>hq[O5])and(not(GetFloatGameState(GAME_STATE_TIME_OF_DAY)==.0)))then
set J4=IssueImmediateOrderById(it,$D028D)
endif
if((m5==null)and(G0[$80+O5]))then
set m5=K3(900.,it,Condition(function k6))
if((m5!=null)and(GetUnitState(m5,UNIT_STATE_LIFE)<GetUnitState(it,UNIT_STATE_LIFE)))then
call WQE(O5,m5,false,false)
endif
endif
set J4=((m5!=null)and((M57(it,$D007F,1093677640,m5))or((kP(GetUnitTypeId(m5)))and(M57(it,$D0269,1093679171,m5)))))
else
set J4=(m5!=null)and(GetHeroLevel(it)>5)and(GetUnitLifePercent(m5)<65.)and(M57(it,$D007F,1093677640,m5))
endif
if((not J4)and(GetHeroLevel(it)>$A)and(hq[416+O5]>Bz)and(G0[$80+O5]))then
set UP=MO7(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==NG7(not IsUnitAlly(it,Z7[0]))))and((MO7(1000.,b5,Condition(function SJ7))>0)or(NG7(IsUnitAlly(it,Z7[0]))==1)))then
set m5=MN7(700.,b5,Condition(function KN))
if(m5==null)then
set m5=MN7(500.,b5,Condition(function k6))
endif
set J4=((m5!=null)and(GetUnitManaPercent(m5)>20.)and(M57(it,$D0269,1093679171,m5)))or((m5!=null)and(GetUnitLifePercent(m5)<70.)and(X67())and(Bz>hq[O5])and(IssueImmediateOrderById(it,$D028D)))
endif
endif
elseif(i1==1430466609)then
call SetPlayerAbilityAvailable(pl,1093678145,(GetHeroLevel(it)>$A)and(GetUnitManaPercent(it)>60.))
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>4))then
set m5=MK7(900.,b5,Condition(function k6))
endif
if(m5!=null)then
if((not IsUnitIllusion(m5))and(GetUnitLifePercent(m5)<50.)and(GetHeroLevel(it)>5)and(Bz>hq[O5])and(not IC(O5))and(not IsUnitInRange(it,m5,400.))and(IsUnitInRange(it,m5,750.)))then
set NWF=kL(it,m5,200.)
set J4=(NWF!=null)and((MO7(800.,NWF,Condition(function S37))-MO7(800.,NWF,Condition(function SJ7)))<=1)and(MO7(700.,NWF,Condition(function S47))==0)and(IssuePointOrderByIdLoc(it,$D022D,NWF))
endif
if((not J4)and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>5)and(Bz>hq[O5]))then
set J4=(((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<KGF(it))or(Kz(400.,M07(m5))>1))and(M_7(it,$D009D,1093810258,1093810259,m5)))
endif
if(not J4)then
set J4=(((GetUnitManaPercent(it)>60.)and(GetHeroLevel(it)>5))or(M97(m5,it)))and(M57(it,$D022F,1093685559,m5))
endif
endif
if(not J4)then
set J4=((MO7(400.,b5,Condition(function k6))>0)or((hq[$F0+O5]>Bz)and(MO7(400.,b5,Condition(function KA))>1)))and(N97(it,$D022E,1093678145))
endif
if((not J4)and(GetHeroLevel(it)>11.)and(GetUnitManaPercent(it)>70.)and(iy(it))and(MO7(1400.,b5,Condition(function Ky))==0)and(eY[O5]==1))then
set NWF=kk(it,800.,h8[O5])
set J4=(NWF!=null)and(IssuePointOrderByIdLoc(it,$D022D,NWF))
endif
elseif(i1==1430468913)then
if((not J4)and(m5!=null)and(GetHeroLevel(it)>5))then
set J4=(((GetUnitLifePercent(m5)<60.)or(h4[O5]!=null)or(MO7(800.,b5,Condition(function SJ7))>0))and(GetUnitAbilityLevel(m5,1110454356)==0)and(M57(it,$D00B5,1093677876,m5)))
endif
if((not J4)and(m5!=null)and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>5)and(GetUnitLifePercent(m5)<40.)and((GetUnitState(it,UNIT_STATE_LIFE)>1800.)or(MO7(1000.,b5,Condition(function k6))<=2))and(not IsUnitInRange(it,m5,350.)))then
set GZ[O5]=true
set J4=J8(O5,N97(it,$D0084,1093678403))
endif
if((G0[$80+O5])and(MR7(it,ZU[RW]))and(m5!=null)and(not IsUnitIllusion(m5))and(Bz>hq[O5])and(not IsUnitInRange(it,m5,250.))and(IsUnitInRange(it,m5,700.)))then
set J4=((MP7(800.,m5,Condition(function S37))-MP7(800.,m5,Condition(function SJ7)))<=1)and(KVF(it,m5))
endif
call SetPlayerAbilityAvailable(pl,1093810507,(GetHeroLevel(it)>$D)and(MO7(1500.,b5,Condition(function k6))==0)and(GetUnitManaPercent(it)>75.))
if((not J4)and(m5!=null))then
set J4=((IsUnitInRange(it,m5,275.))and(N97(it,$D00C4,1093810507)))
endif
if((not J4)and(GetHeroLevel(it)>$A)and(hq[416+O5]>Bz))then
set UP=MO7(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==NG7(not IsUnitAlly(it,Z7[0]))))and((MO7(1000.,b5,Condition(function SJ7))>0)or(NG7(IsUnitAlly(it,Z7[0]))==1)))then
set m5=K3(1000.,it,Condition(function k6))
set J4=(m5!=null)and(GetUnitAbilityLevel(m5,1110454356)==0)and(M57(it,$D00B5,1093677876,m5))
endif
endif
elseif(i1==1430467634)then
set UP=GetHeroLevel(it)
call SetPlayerAbilityAvailable(pl,1093742674,(GetUnitManaPercent(it)>40.)and(Bz>T34[16+O5]))
call SetPlayerAbilityAvailable(pl,1093750608,(UP>$A)and(GetUnitManaPercent(it)>55.))
if((m5==null)and(G0[$80+O5])and(UP>4))then
set m5=MK7(900.,b5,Condition(function k6))
endif
if((m5!=null)and(UP>4))then
set J4=((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<($FA+($FA*KIF(it))))and(not IsUnitIllusion(m5))and(M_7(it,$D0267,1093684565,1093681458,m5)))or((((GetHeroLevel(m5)==25)or(ModuloInteger(GetHeroLevel(m5),7-GetUnitAbilityLevel(it,1093679412))==0))or(GetUnitManaPercent(it)>60.)or(M97(m5,it)))and(M57(it,$D0107,1093679412,m5)))
if((not J4)and(GetUnitManaPercent(it)>60.))then
set GZ[O5]=true
set J4=J8(O5,N97(it,$D022E,1093750608))
endif
endif
if((not J4)and(GetHeroLevel(it)>$A)and(hq[416+O5]>Bz))then
set UP=MO7(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==NG7(not IsUnitAlly(it,Z7[0]))))and((MO7(1000.,b5,Condition(function SJ7))>0)or(NG7(IsUnitAlly(it,Z7[0]))==1)))then
set m5=K3(1000.,it,Condition(function k6))
set J4=(m5!=null)and(M_7(it,$D0267,1093684565,1093681458,m5))
endif
endif
if((not J4)and(IsUnitInRange(it,m5,200.)))then
set J4=(m5!=null)and IssueImmediateOrderById(it,$D009F)
endif
if((not J4)and Bz>T34[16+O5])then
set m5=MK7(300.,M07(it),Condition(function SE7))
set J4=(m5!=null)and(M57(it,$D0278,1093742674,m5))
endif
elseif(i1==1313026096)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>$A))then
set m5=MN7(800.,b5,Condition(function k6))
endif
set J4=(m5!=null)and(((GetUnitManaPercent(it)>50.)and(GetHeroLevel(it)>4))or(M97(m5,it)))and(M57(it,$D007F,1095267426,m5))
if((not J4)and(GetHeroLevel(it)>$A)and(m5!=null)and(not IsUnitIllusion(m5))and(GetUnitCurrentOrder(m5)!=$D0005)and(MP7(600.,m5,Condition(function SJ7))>1))then
set J4=M57(it,$D007F,1095267426,m5)
endif
elseif((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))then
if((not J4)and(GetHeroLevel(it)>5)and(GetUnitLifePercent(it)<50.)and(Bz>T34[O5]))then
set bj_lastLoadedUnit=it
set IN4=null
set IP4=null
set LD4=GetUnitLifePercent(it)+20.
set LE4=GetUnitLifePercent(it)+30.
call MN7(700.,M07(it),Condition(function RD7))
if IN4!=null then
set m5=IN4
else
set m5=IP4
endif
set J4=(m5!=null)and(M57(it,$D00DD,1093678929,m5))
if J4 then
call WQE(O5,m5,false,false)
endif
endif
if((not J4)and(GetHeroLevel(it)>5)and(GetUnitLifePercent(it)>75.)and(Bz>T34[O5]))then
set m5=MK7(600.,b5,Condition(function SN7))
if((m5!=null)and(T[GetPlayerId(GetOwningPlayer(m5))]>V[GetPlayerId(GetOwningPlayer(m5))]+3))then
set J4=(MP7(800.,m5,Condition(function k6))>0)and(M57(it,$D00DD,1093678929,m5))
endif
endif
set m5=h4[O5]
if((not J4)and(m5!=null)and(not IsUnitIllusion(m5)))then
if((not J4)and(i1==1164277353)and(GetUnitLifePercent(m5)<70.))then
set J4=N97(it,$D02B7,1093751369)
endif
if not J4 and(GetHeroLevel(it)>20 or(GetHeroLevel(it)-GetHeroLevel(m5)>3)or i1!=1164277353)then
set J4=IssueImmediateOrderById(it,$D0278)
endif
if((not J4)and((M97(m5,it))or(GZ[$D0+O5])or(GetUnitLifePercent(m5)<70. and GetUnitManaPercent(it)>70.)))then
set J4=M57(it,$D0097,1093815130,m5)
endif
endif
elseif(i1==1164666213)then
if(GetHeroLevel(it)>=6)then
set J4=(IsUnitInRange(it,h4[O5],400))or((MO7(400.,b5,Condition(function k6))>0)or((GetHeroLevel(it)>18)and(GetUnitManaPercent(it)>70.)and(MO7(400.,b5,Condition(function Q_7))>2)))
if not OT7(it,"AI|PulseNova")then
if(J4)then
call SetPlayerAbilityAvailable(pl,1093808455,true)
call N97(it,$D0084,1093808454)
call TriggerSleepAction(.1)
endif
else
if(not J4)then
call N97(it,$D0084,1093808456)
call TriggerSleepAction(.1)
endif
endif
call TriggerSleepAction(.1)
set J4=false
endif
set UP=GetHeroLevel(it)
if(not J4)and(MO7(300.,b5,Condition(function k6))>0)then
if(N97(it,$D022E,1093677877))then
call TriggerSleepAction(.1)
endif
endif
if((m5==null)and(G0[$80+O5])and(GetUnitManaPercent(it)>70.)and(UP>3))then
set m5=MK7(1000.,b5,Condition(function k6))
endif
if((not J4)and(m5!=null))then
set J4=(((UP>3)or(GetUnitLifePercent(m5)<60.))and(YO8(m5))and(M57(it,$D02B6,1093678679,m5)))
endif
if((not J4)and(m5!=null))then
set J4=(((UP>3)or(GetUnitLifePercent(m5)<60.))and(M57(it,$D0097,1093678678,m5)))
endif
if(not J4)and(m5==null)then
set m5=MK7(1000.,b5,Condition(function Q_7))
if(not J4)and(m5!=null)and(UP>8)and(GetUnitManaPercent(it)>60.)then
set J4=(M57(it,$D0097,1093678678,m5))
endif
if(not J4)and(m5!=null)and(UP>$E)and(GetUnitManaPercent(it)>60.)and(MP7(150.,it,Condition(function Q_7))>2)then
set J4=(M57(it,$D02B6,1093678679,m5))
endif
if(not J4)and(m5!=null)and((UP>$E)or((UP>$A)and(eY[O5]>9)))and(GetUnitManaPercent(it)>40.)and(MP7(500.,it,Condition(function Q_7))>2)then
set J4=(N97(it,$D022E,1093677877))
endif
endif
set bj_lastLoadedUnit=it
if(not J4)and(h4[O5]!=null)and(eY[320+O5]>=0)and(not IsUnitInRange(it,m5,300))and((GetUnitLifePercent(it)>80)or(GetUnitLifePercent(it)>(GetUnitLifePercent(m5)+30)))and(GetUnitManaPercent(it)>20)and(h4[304+O5]==null)and(MP7(900,m5,Condition(function MQ7))==0)then
set J4=IssuePointOrderById(it,$D02CE,GetUnitX(m5),GetUnitY(m5))
endif
elseif(i1==1433168227)then
call SetPlayerAbilityAvailable(pl,1093678918,(GetHeroLevel(it)>9)and((GetUnitManaPercent(it)>70.)or(m5!=null)or(MO7(900.,b5,Condition(function k6))>0)))
if GetUnitManaPercent(it)>60. then
call SetPlayerAbilityAvailable(pl,1093679186,true)
if IssueImmediateOrderById(it,$D01EA)then
call TriggerSleepAction(.1)
endif
else
call SetPlayerAbilityAvailable(pl,1093679186,false)
endif
if((m5==null)and(G0[$80+O5])and(GetUnitManaPercent(it)>70.)and(GetHeroLevel(it)>2))then
set m5=MK7(1000.,b5,Condition(function k6))
endif
if((m5!=null)and(GetHeroLevel(it)>2))then
if((GetHeroLevel(it)>5)and(Bz>hq[O5])and(not IsUnitIllusion(m5))and(GetUnitState(m5,UNIT_STATE_LIFE)>200.))then
set UP=MP7(550.,m5,Condition(function KA))
if((UP>1)and(UP<6)and((UP<=(MP7(550.,m5,Condition(function k6))*2))or((M97(m5,it))and(GetUnitState(m5,UNIT_STATE_LIFE)<450.))))then
set GZ[O5]=true
set J4=J8(O5,M_7(it,$D0103,1093678420,1093679176,m5))
endif
endif
if(not J4)then
set J4=((GetUnitManaPercent(it)>60.)or(GetUnitLifePercent(m5)<50.))and(M57(it,$D0102,1093678918,m5))
endif
endif
if((not J4)and(GetUnitManaPercent(it)<75.))then
set m5=MK7(600.,b5,Condition(function KD))
set J4=(m5!=null)and(M57(it,$D0062,1093678387,m5))
endif
elseif(i1==1429221430)then
if(m5==null)then
set m5=MK7(700.,b5,Condition(function k6))
endif
if(not J4)and(m5!=null)and((GetUnitState(m5,UNIT_STATE_LIFE)<56.25*GetUnitAbilityLevel(it,1093681736))or(GetUnitState(m5,UNIT_STATE_LIFE)>500. and GetUnitState(it,UNIT_STATE_MANA)>300.)or(GZ[$D0+O5]))then
set J4=M57(it,$D0279,1093681736,m5)
endif
if(not J4)and(GetUnitAbilityLevel(it,1110454597)>0)then
if(h4[O5]==null)then
call WQE(O5,m5,false,false)
endif
if((GetUnitCurrentOrder(it)==$D0012)and(not G0[O5])and(hq[512+O5]>Bz)and(G0[$80+O5])and(MO7(800.,b5,Condition(function KC))>1))then
call jW(it,$D000F,h8[O5])
endif
elseif(not J4)and((GetUnitAbilityLevel(it,1110454595)>0)and(GetUnitCurrentOrder(it)==$D0012)and((not IsUnitVisible(it,Z7[0]))or(not IsUnitVisible(it,A7[0])))and(((MO7(800.,b5,Condition(function k8))>0)or(MO7(800.,b5,Condition(function KC))>0))))then
call IssueImmediateOrderById(it,$D0019)
endif
if(not J4)and(m5!=null)and((MO7(1500.,b5,Condition(function KR))==0)and(MO7(400.,b5,Condition(function k6))==0)and(KE7(it,IZ4)>$5DC)and(KE7(it,JA4)>$5DC)and(GetUnitState(it,UNIT_STATE_MANA)>250.))then
set J4=M27(it,$D0100,1093681735,b5)
endif
if((not J4)and(GetHeroLevel(it)>$D)and(hq[416+O5]>Bz)and(G0[$80+O5])and(GetUnitAbilityLevel(it,1110454597)==0)and(GetUnitState(it,UNIT_STATE_MANA)>200.))then
set UP=MO7(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==NG7(not IsUnitAlly(it,Z7[0]))))and((MO7(1000.,b5,Condition(function SJ7))>0)or(NG7(IsUnitAlly(it,Z7[0]))==1)))then
if(((m5==null)or(not IsUnitInRange(it,m5,400.)))and(G0[$80+O5]))then
set m5=MK7(400.,b5,Condition(function k6))
endif
set J4=(m5!=null)and(GetUnitLifePercent(m5)<80.)and(KE7(it,m5)<300)and(N97(it,$D00C4,1093687121))
endif
endif
if(not J4)and(h4[O5]==null)and GZ[O5]and((GetUnitState(it,UNIT_STATE_MANA)>300 and GetUnitManaPercent(it)>50))then
set LD4=GetUnitAbilityLevel(it,1093681736)*75.
set m5=MK7(600.,b5,Condition(function SH7))
set J4=(m5!=null)and(M57(it,$D0279,1093681736,m5))
endif
elseif(i1==1430466872)then
call SetPlayerAbilityAvailable(pl,1093687349,(GetHeroLevel(it)>9)and(GetUnitManaPercent(it)>60.)and(MO7(1200.,b5,Condition(function k6))==0))
call SetPlayerAbilityAvailable(pl,1093677646,(GetHeroLevel(it)>$C)and(GetUnitManaPercent(it)<70.)and(iy(it)))
if(m5!=null)then
set GZ[O5]=true
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
if((G0[$80+O5])and(MR7(it,ZU[RW]))and(m5!=null)and(not IsUnitIllusion(m5))and(Bz>hq[O5])and(not IsUnitInRange(it,m5,250.))and(IsUnitInRange(it,m5,700.)))then
set J4=((MP7(800.,m5,Condition(function S37))-MP7(800.,m5,Condition(function SJ7)))<=1)and(KVF(it,m5))
endif
if((Bz>hq[O5])and(not IsUnitIllusion(m5))and(UP>$C8)and(UP<KJF(it)+100))then
set J4=J8(O5,(M57(it,$D0216,1093684558,m5))or(M57(it,$D024B,1093687349,m5))or((not ke(m5))and(M_7(it,$D0097,1093679413,1093679447,m5))))
elseif((GetHeroLevel(it)>2)or(M97(m5,it)))then
set J4=(M57(it,$D024B,1093687349,m5))or((GetUnitLifePercent(m5)<50.)and(not IsUnitIllusion(m5))and(M57(it,$D0216,1093684558,m5)))
endif
elseif((GetUnitManaPercent(it)>50.)and(G0[$80+O5])and(GetHeroLevel(it)>2))then
set m5=MK7(1000.,b5,Condition(function k6))
set J4=(m5!=null)and(M57(it,$D024B,1093687349,m5))
endif
if((not J4)and(GetHeroLevel(it)>$A)and((GetUnitState(it,UNIT_STATE_MAX_MANA)-GetUnitState(it,UNIT_STATE_MANA))>400.)and(iy(it))and(eY[O5]==1))then
set m5=MK7(700.,b5,Condition(function k9))
set J4=(m5!=null)and(M57(it,$D0062,1093678387,m5))
endif
if((not J4)and(GetHeroLevel(it)>$F)and(hq[416+O5]>Bz)and(Bz>hq[O5])and(G0[$80+O5]))then
set UP=MO7(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==NG7(not IsUnitAlly(it,Z7[0]))))and((MO7(1000.,b5,Condition(function SJ7))>0)or(NG7(IsUnitAlly(it,Z7[0]))==1)))then
set m5=K3(700.,it,Condition(function k6))
if(m5!=null)then
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
set J4=(GetUnitLifePercent(m5)<60.)and(UP<$640)and(UP>500)and(not ke(m5))and(M_7(it,$D0097,1093679413,1093679447,m5))
endif
endif
endif
elseif(i1==1162032439)then
set J4=GetUnitAbilityLevel(it,1110456148)>0
if((not J4)and(m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>3))then
set m5=MK7(900.,b5,Condition(function k6))
endif
if((not J4)and(m5!=null))then
set J4=(((GetUnitManaPercent(it)>50.)and(GetHeroLevel(it)>2))or(M97(m5,it)))and(M57(it,$D02BD,1093744435,m5))
endif
if((not J4)and(m5!=null)and(GetUnitLifePercent(m5)<70.)and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>$A)and(Bz>hq[16+O5])and(G0[$80+O5]))then
set UP=Kz(600.,b5)
if((UP>1)or((UP>0)and(MO7(800.,b5,Condition(function SJ7))>0)))then
set GZ[O5]=true
call SetPlayerAbilityAvailable(pl,1093681462,true)
set J4=J8(O5,(N97(it,$D0272,1093677363)))
endif
endif
if((not J4)and(G0[$80+O5])and(MR7(it,ZU[RW]))and(m5!=null)and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>$A)and(Bz>hq[16+O5])and(GetUnitLifePercent(it)>65.)and(GetUnitManaPercent(it)>50.)and(not IsUnitInRange(it,m5,300.))and(IsUnitInRange(it,m5,800.)))then
set h4[16+O5]=m5
set J4=KVF(it,m5)
endif
if(not J4)and(h4[O5]!=null)then
set J4=M57(it,$D0218,1093684563,m5)
endif
call SetPlayerAbilityAvailable(pl,1093684563,(not J4)and(((GetHeroLevel(it)>8)and(GetUnitManaPercent(it)>45.))or((GetHeroLevel(it)>$F)and(GetUnitManaPercent(it)>30.))))
elseif(i1==1430466865)then
if(m5==null)then
set m5=MK7(800.,b5,Condition(function k6))
endif
call SetPlayerAbilityAvailable(pl,1093677651,(GetHeroLevel(it)>$F)and(MO7(1500.,b5,Condition(function k6))==0)and(GetUnitManaPercent(it)>75.))
if((G0[$80+O5])and(not J4)and(m5!=null)and(not IsUnitIllusion(m5))and(GetUnitLifePercent(m5)<85. or M97(it,m5)or GZ[$D0+O5]or eY[320+O5]>=0)and(not IsUnitInRange(it,m5,250.))and(IsUnitInRange(it,m5,700.))and((not IC(O5))or(I27(it)>1600.))and(T34[32+O5]>Bz))then
if(MR7(it,ZU[RW]))then
set J4=(((Bz>hq[O5])and(GetUnitState(it,UNIT_STATE_MANA)>175.+(GetUnitAbilityLevel(it,1093810508)*100)))or(eY[320+O5]>=1)or(M97(it,m5)))and(GetUnitState(it,UNIT_STATE_MANA)>400.)and(KVF(it,m5))
endif
if not J4 then
set J4=((GetUnitState(it,UNIT_STATE_MANA)>180.+(GetUnitAbilityLevel(it,1093810508)*100))or(M97(it,m5)))and(M57(it,$D00FA,1093751364,m5))
endif
endif
if((not J4)and(GetHeroLevel(it)>5)and(Bz>hq[O5]))then
if((m5==null)and(G0[$80+O5]))then
set m5=S17(800.,it)
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(GetUnitLifePercent(m5)<80 or GZ[$D0+O5]))then
if(Kz(400.,M07(m5))>1 or GetUnitLifePercent(m5)<80)and(((not IsUnitInRange(it,m5,375.))and(KVF(it,m5)))or(IsUnitInRange(it,m5,375.)))then
if(not is(it))then
call J_7(.1)
endif
set J4=(N97(it,$D00C4,1093810508))
endif
endif
endif
if(not J4)and(IsUnitInRange(it,m5,200.))and(MO7(250.,b5,Condition(function k8))<=1)then
set LD4=J47(it,m5)
set LE4=J47(it,h9[O5])
set LD4=RAbsBJ(LD4-LE4)
if LD4<$F then
set LD4=RAbsBJ(GetUnitFacing(it)-LE4)
if LD4<$F then
set J4=((GetUnitState(it,UNIT_STATE_MANA)>180.+(GetUnitAbilityLevel(it,1093810508)*100))or(M97(it,m5)))and(M57(it,$D00FA,1093751364,m5))
endif
endif
endif
if((not J4)and(GetHeroLevel(it)>3)and(GetUnitManaPercent(it)>60.))then
if((m5==null)and(G0[$80+O5]))then
set m5=MK7(600.,b5,Condition(function k6))
endif
if((m5!=null)and(IsUnitInRange(it,m5,600.)))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(it),GetUnitX(m5)-GetUnitX(it)))
call SetPlayerAbilityAvailable(pl,1093677651,true)
set GZ[O5]=true
set J4=J8(O5,IssuePointOrderById(it,$D009D,GetUnitX(it)+300.*Cos(UP*bj_DEGTORAD),GetUnitY(it)+300.*Sin(UP*bj_DEGTORAD)))
endif
endif
if((not J4)and(GetHeroLevel(it)>$A)and(MO7(800.,b5,Condition(function k8))>0))then
set J4=(GetUnitAbilityLevel(it,1110454357)==0)and(GetUnitManaPercent(it)>65.)and(M57(it,$D0062,1093677879,it))
if((not J4)and(GetUnitAbilityLevel(it,1110454357)>0)and(GetUnitManaPercent(it)>75.))then
set m5=MK7(700.,b5,Condition(function SJ7))
set J4=(m5!=null)and(kq(GetUnitTypeId(m5)))and(GetUnitAbilityLevel(m5,1110454357)==0)and(M57(it,$D0062,1093677879,m5))
endif
endif
elseif(i1==1430468144)then
if((m5==null)and(G0[$80+O5]))then
set m5=MK7(800.,b5,Condition(function k6))
endif
set UP=OM7(GetHandleId(it),"Level")
if((m5!=null)and(IsUnitInRange(it,m5,860.))and GetUnitState(m5,UNIT_STATE_LIFE)<20+(60*UP))then
set J4=(IssueTargetOrderById(it,$D0118,m5))
else
set J4=((IsUnitInRange(it,m5,860.))and(UP>GetUnitAbilityLevel(it,1093750337))and(GetUnitManaPercent(it)>35.)and(GetHeroLevel(it)>3)and(IssueTargetOrderById(it,$D0118,m5)))
endif
if((not J4)and(m5!=null)and(MR7(it,ZU[DR4]))and(Bz>T34[$F0+O5])and(YM8(m5)==false)and(UC7(m5)==false))then
set J4=UnitUseItemTarget(it,MV7(it,ZU[DR4]),m5)
elseif((not J4)and(m5!=null)and(MR7(it,ZU[R7t]))and(Bz>T34[$F0+O5])and(YM8(m5)==false)and(UC7(m5)==false))then
set J4=UnitUseItemTarget(it,MV7(it,ZU[R7t]),m5)
endif
if(not J4 and m5!=null)then
set J4=(((GetUnitLifePercent(m5)<50.)or(MO7(500.,b5,Condition(function SJ7))>0))and((GetHeroLevel(it)>$A)and(M57(it,$D00DD,1093679192,m5))))
endif
if((not J4)and(GetHeroLevel(it)>5)and(Bz>T34[O5]))then
if(OT7(it,"AIFamiliar1|Status")==false or OT7(it,"AIFamiliar2|Status")==false or(GetUnitAbilityLevel(it,1093814599)!=0 and OT7(it,"AIFamiliar3|Status")==false))then
call SetPlayerAbilityAvailable(pl,1093750341,true)
set J4=IssueImmediateOrderById(it,$D022E)
elseif(OT7(it,"AIFamiliar1|Stone")and OT7(it,"AIFamiliar2|Stone")and(GetUnitAbilityLevel(it,1093814599)==0 or OT7(it,"AIFamiliar3|Stone")))then
call SetPlayerAbilityAvailable(pl,1093750341,true)
set J4=IssueImmediateOrderById(it,$D022E)
else
call SetPlayerAbilityAvailable(pl,1093750341,false)
endif
endif
elseif((i1==1429221432)or(i1==1160786229))then
call SetPlayerAbilityAvailable(pl,1093687878,(GetHeroLevel(it)>$F)and(GetUnitManaPercent(it)>70.))
call SetPlayerAbilityAvailable(pl,1093677892,(GetHeroLevel(it)>$A)and(GetUnitManaPercent(it)>60.))
if((m5==null)and(G0[$80+O5]))then
if(i1==1160786229)then
set m5=MK7(1000.,b5,Condition(function k6))
elseif(Bz>hq[O5])then
set m5=MN7(600.,b5,Condition(function k6))
endif
endif
if(m5!=null)then
set J4=(Bz>hq[O5])and(i1==1429221432)and(not IsUnitIllusion(m5))and((GetUnitLifePercent(m5)<60.)or((GetUnitLifePercent(m5)<75.)and(MO7(2000.,b5,Condition(function S47))==0)))and(N97(it,$D00D4,1093679411))
if((i1==1160786229)or((not J4)and((GetHeroLevel(it)>4)or(GetUnitLifePercent(m5)<60.))and(R2I(GetUnitState(it,UNIT_STATE_MANA))>($FA+(25*(GetUnitAbilityLevel(it,1093679411)))))))then
set J4=(N97(it,$D0278,1093687878))or(N97(it,$D009E,1093677892))
endif
endif
if((not J4)and(GetHeroLevel(it)>$C)and(hq[416+O5]>Bz)and(Bz>hq[O5])and(G0[$80+O5]))then
set UP=MO7(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==NG7(not IsUnitAlly(it,Z7[0]))))and((MO7(1000.,b5,Condition(function SJ7))>0)or(NG7(IsUnitAlly(it,Z7[0]))==1)))then
set m5=K3(700.,it,Condition(function k6))
set J4=(m5!=null)and(GetUnitLifePercent(m5)<80.)and(N97(it,$D00D4,1093679411))
endif
endif
elseif(i1==1429221441)then
set J4=(m5!=null)and(GetHeroLevel(it)>5)and(GetUnitLifePercent(m5)<70.)and(M57(it,$D0107,1093678389,m5))
if((not J4)and(m5!=null)and(not IsUnitIllusion(m5))and(((GetHeroLevel(it)>5)and(not IC(O5)))or(MI7(m5,it)))and(not IsUnitInRangeLoc(m5,b5,250.)))then
set J4=(kJ(GetUnitX(m5),GetUnitY(m5)))and((MP7(800.,m5,Condition(function S37))-MP7(800.,m5,Condition(function SJ7)))<=1)and(IssueTargetOrderById(it,$D0278,m5))
endif
if((not J4)and(GetHeroLevel(it)>$E)and(hq[416+O5]>Bz)and(Bz>hq[16+O5])and(G0[$80+O5]))then
set UP=MO7(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==NG7(not IsUnitAlly(it,Z7[0]))))and((MO7(1000.,b5,Condition(function SJ7))>0)or(NG7(IsUnitAlly(it,Z7[0]))==1)))then
set m5=K3(700.,it,Condition(function k6))
set J4=(m5!=null)and(GetUnitLifePercent(m5)<80.)and(N97(it,$D009B,1093677903))
endif
endif
if((not J4)and(GetHeroLevel(it)>17)and(Bz>hq[16+O5]))then
set m5=MN7(500.,b5,Condition(function S47))
set J4=(m5!=null)and(GetUnitLifePercent(m5)<55.)and(GetUnitLifePercent(m5)>15.)and(MP7(800.,m5,Condition(function KC))>2)and(N97(it,$D009B,1093677903))
endif
elseif(i1==1165451634)then
set J4=(m5!=null)and(((GetHeroLevel(it)>5)and(GetUnitLifePercent(m5)<70.))or(MI7(m5,it)))and(M57(it,$D02B6,1093687629,m5))
if((not J4)and(m5!=null)and(not IsUnitIllusion(m5))and(((GetHeroLevel(it)>5)and(not IC(O5)))or(MI7(m5,it)))and(not IsUnitInRangeLoc(m5,b5,250.)))then
set J4=(kJ(GetUnitX(m5),GetUnitY(m5)))and((MP7(800.,m5,Condition(function S37))-MP7(800.,m5,Condition(function SJ7)))<=1)and(IssueTargetOrderById(it,$D0278,m5))
endif
elseif(i1==1432642913)then
set J4=(m5!=null)and(GetHeroLevel(it)>5)and((GetUnitLifePercent(it)>75.)or((GetUnitLifePercent(it)-25.)>GetUnitLifePercent(m5)))and(IssueTargetOrderById(it,$D02B6,m5))
if(not J4)then
set m5=MK7(800.,b5,Condition(function SN7))
if(m5!=null)then
set J4=((MP7(800.,m5,Condition(function k6))>0)and(IssueTargetOrderById(it,$D0097,m5)))or((GetUnitLifePercent(it)>60.)and(IssueTargetOrderById(it,$D02B6,m5)))
endif
if((not J4)and(GetHeroLevel(it)>3)and(GetUnitManaPercent(it)>50.)and(MO7(600.,b5,Condition(function KA))>0))then
set J4=IssueTargetOrderById(it,$D0097,it)
endif
endif
elseif(i1==1215722344)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>5)and(Bz>hq[O5]))then
set m5=MK7(800.,b5,Condition(function k6))
endif
if(m5!=null)then
if((GetHeroLevel(it)>5)and(GetUnitAbilityLevel(it,1110454616)==0)and(not IsUnitIllusion(m5))and(Bz>hq[O5])and(GetUnitState(m5,UNIT_STATE_LIFE)>300.))then
if(((IsUnitInRange(it,m5,500.))and(GetUnitLifePercent(m5)<60.))or((MP7(700.,m5,Condition(function SJ7))>0)and(GetUnitLifePercent(m5)<80.))or((MP7(700.,m5,Condition(function SR7))>0)and(MP7(700.,m5,Condition(function k8))<4)))then
set GZ[O5]=true
set J4=J8(O5,M57(it,$D0107,1093684296,m5))
endif
else
set J4=(GetHeroLevel(it)>5)and(IsUnitInRange(it,m5,300.))and(GetUnitLifePercent(it)>70.)and(M57(it,$D02BC,1093682499,it))
endif
elseif((GetHeroLevel(it)>5)and(GetUnitAbilityLevel(it,1110454616)==0)and(GetUnitManaPercent(it)>70.))then
set J4=(MO7(1200.,b5,Condition(function k6))==0)and(MO7(700.,b5,Condition(function KA))>0)and(M57(it,$D02BC,1093682499,it))
else
call SetPlayerAbilityAvailable(pl,1093682499,false)
endif
elseif(i1==1432510828)then
set J4=(KNF(it)>35.)and((m5!=null)or(MO7(1000.,b5,Condition(function k6))>0))and(N97(it,$D0278,1093682004))
if(not J4)then
set m5=MK7(1500.,b5,Condition(function k6))
if(m5!=null)then
set J4=IssuePointOrderById(it,$D02B6,GetUnitX(m5),GetUnitY(m5))
set m5=null
endif
endif
if((not J4)and(G0[$80+O5]))then
if(m5==null)then
set m5=MK7(700.,b5,Condition(function k6))
endif
if(m5!=null)then
if(MP7(900.,m5,Condition(function S47))>0)then
if((MI7(m5,it))or((GetHeroLevel(it)>4)and(IsUnitInRange(it,m5,250.))and(not IC(O5))and(GetUnitLifePercent(it)>75.)))then
set h4[288+O5]=m5
set J4=IssueImmediateOrderById(it,$D00A1)
endif
else
if((MI7(m5,it))or((GetHeroLevel(it)>4)and((GetUnitManaPercent(it)>50.)or(GetHeroLevel(it)>10.))and(MP7(800.,m5,Condition(function S37))-MP7(800.,m5,Condition(function SJ7))<=1)))then
set h4[288+O5]=m5
set J4=IssueImmediateOrderById(it,$D00A1)
endif
endif
endif
endif
elseif(i1==1332766568)then
if((G0[$80+O5])and(MR7(it,ZU[RW]))and(GetHeroLevel(it)>$C)and(m5!=null)and(not IsUnitIllusion(m5))and(Bz>hq[O5])and(not IsUnitInRange(it,m5,250.))and(IsUnitInRange(it,m5,700.)))then
set J4=((MP7(800.,m5,Condition(function S37))-MP7(800.,m5,Condition(function SJ7)))<=1)and(KVF(it,m5))
endif
if(m5!=null)then
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
set J4=(GetHeroLevel(it)>5)and(not IsUnitIllusion(m5))and((UP<($96+($96*GetUnitAbilityLevel(it,1093682482))))or(UP<($96+($96*GetUnitAbilityLevel(it,1093750098)))))and(UP>$96)and(M_7(it,$D0097,1093682482,1093750098,m5))
if((not J4)and((GetHeroLevel(it)>3)or(M97(m5,it)))and(R2I(GetUnitState(it,UNIT_STATE_MANA))>($C3+(40*GetUnitAbilityLevel(it,1093682482)))))then
set J4=IssueTargetOrderById(it,$D0118,m5)
endif
endif
if((not J4)and(GetHeroLevel(it)>$A)and(hq[416+O5]>Bz)and(G0[$80+O5]))then
set UP=MO7(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==NG7(not IsUnitAlly(it,Z7[0]))))and((MO7(1000.,b5,Condition(function SJ7))>0)or(NG7(IsUnitAlly(it,Z7[0]))==1)))then
set J4=(GetUnitLifePercent(it)>70.)and(((UP>1)and(MO7(280.,b5,Condition(function k6))>1))or((UP<=2)and(MO7(280.,b5,Condition(function k6))>0)))and(IssueImmediateOrderById(it,$D0278))
endif
endif
if((not J4)and(GetHeroLevel(it)>3))then
if(m5==null)then
set m5=K3(800.,it,Condition(function k6))
endif
set J4=(m5!=null)and((GetUnitManaPercent(it)>60.)or(MI7(m5,it)))and(IssueTargetOrderById(it,$D0118,m5))
endif
if((not J4)and(MO7(800.,b5,Condition(function SN7))>0))then
set J4=(MO7(280.,b5,Condition(function k6))>0)and(IssueImmediateOrderById(it,$D0278))
endif
elseif(i1==1429221451)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>5))then
set m5=MK7(1000.,b5,Condition(function k6))
endif
if((m5!=null)and(not IsUnitInRange(it,m5,200.))and(GetUnitLifePercent(m5)<50.)and(GetUnitCurrentOrder(it)==$D000F))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(it),GetUnitX(m5)-GetUnitX(it)))
set J4=IssuePointOrderById(it,$D00FA,GetUnitX(m5)+100.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+100.*Sin(UP*bj_DEGTORAD))
endif
if((not J4)and(m5!=null)and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>5)and(R2I(GetUnitState(it,UNIT_STATE_MANA))>$FA+(75*GetUnitAbilityLevel(it,1093678674))))then
if((Bz>hq[O5])and(Bz>hq[112+O5])and(Bz>hq[$F0+O5])and(MR7(it,ZU[RW]))and(IsUnitInRange(it,m5,900.))and(not IsUnitInRange(it,m5,300.)))then
set UP=MO7(1000.,b5,Condition(function k6))
if((not IsUnitVisible(it,GetOwningPlayer(m5)))or((hq[416+O5]>Bz)and((UP>1)or(UP==NG7(not IsUnitAlly(it,Z7[0]))))and((MO7(800.,b5,Condition(function SJ7))>0)or(NG7(IsUnitAlly(it,Z7[0]))==1))))then
set J4=(MO7(500.,b5,Condition(function k6))==0)and(IssueImmediateOrderById(it,$D0265))
endif
endif
if(not J4)then
set J4=(Bz>hq[O5])and(IssueTargetOrderById(it,$D00FA,m5))
endif
if((not J4)and((hq[O5]-Bz)>20.)and(GetUnitLifePercent(it)>70.)and(not IC(O5))and(GetUnitState(it,UNIT_STATE_MANA)>500.)and(IsUnitInRange(it,m5,500.))and(MO7(500.,b5,Condition(function SJ7))>0))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(it),GetUnitX(m5)-GetUnitX(it)))
set J4=IssuePointOrderById(it,$D00FA,GetUnitX(m5)+100.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+100.*Sin(UP*bj_DEGTORAD))
endif
endif
if(not J4)and(Bz>T34[32+O5])and(GetUnitAbilityLevel(it,1093683248)>1)and(G0[256+O5])and(h4[304+O5]==null)and(MP7(GetUnitAbilityLevel(it,1093683248)*50+100,it,Condition(function Q_7))>4)then
set J4=IssueImmediateOrderById(it,$D0217)
endif
elseif(i1==1315334514)then
set J4=(GetUnitAbilityLevel(it,1110456148)==0)and(GetUnitManaPercent(it)>50.)and(GetHeroLevel(it)>3)and((KQF(it,200.,$D00C4,1093682521))or(KQF(it,450.,$D026C,1093682760))or(KQF(it,700.,$D0277,1093682736)))
if((not G0[$80+O5])or(J4))then
elseif((MR7(it,ZU[C0]) or MR7(it,ZU[RLL]))and(GetHeroLevel(it)>$A)and(Bz>hq[O5])and(GetUnitManaPercent(it)>50.)and((GetUnitAbilityLevel(it,1093682001))>(GetUnitAbilityLevel(it,1093681746)*4)))then
if(m5==null)then
set m5=MK7(1200.,b5,Condition(function KK))
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(GetUnitTypeId(m5)!=1212365106)and(MP7(800.,m5,Condition(function S47))==0)and((MP7(600.,m5,Condition(function SR7))>0)or(not IsUnitInRange(it,m5,800.))or(not IsUnitVisible(it,Z7[0]))or(not IsUnitVisible(it,A7[0]))))then
set GZ[272+O5]=true
if(MR7(it,ZU[RLL]))then
set J4=UnitUseItem(it,MV7(it,ZU[RLL]))
else
set J4=UnitUseItem(it,MV7(it,ZU[C0]))
endif
set GZ[272+O5]=J4
endif
elseif((MR7(it,ZU[RW]))and(m5!=null)and(not IsUnitIllusion(m5))and(not IC(O5))and(GetHeroLevel(it)>$A)and(Bz>hq[O5])and(GetUnitLifePercent(it)>65.)and(GetUnitManaPercent(it)>50.)and((GetUnitAbilityLevel(it,1093682001))>(GetUnitAbilityLevel(it,1093681746)*4)))then
set J4=((MP7(800.,m5,Condition(function S37))-MP7(800.,m5,Condition(function SJ7)))<=1)and(KVF(it,m5))
endif
if((not J4)and(GetHeroLevel(it)>$C)and(hq[416+O5]>Bz)and(Bz>hq[O5])and(G0[$80+O5])and(GetRandomInt(1,3)==1))then
set UP=MO7(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==NG7(not IsUnitAlly(it,Z7[0]))))and(MO7(1000.,b5,Condition(function SJ7))>0))then
set UP=MO7(650.,b5,Condition(function k6))
set J4=((UP>1)or(UP==NG7(not IsUnitAlly(it,Z7[0]))))and(N97(it,$D0131,1093810506))
endif
endif
elseif(i1==1328558154)then
if((GetUnitAbilityLevel(it,1110454618)>0))then
set J4=true
endif
if((m5!=null)and(not J4)and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>5)and(M97(m5,it)or((GetUnitLifePercent(m5)<60.)and(not IsUnitInRange(it,m5,600.))))and(((MP7(900.,m5,Condition(function S37))<=2)and(MR7(it,ZU[J1]))or(MR7(it,ZU[T2])))or((MP7(900.,m5,Condition(function S37))<2))))then
set J4=((not ke(m5))and(MO7(700.,GetUnitLoc(m5),Condition(function S47))==0)and(IssueTargetOrderById(it,$D0278,m5)))
endif
if((not J4)and(m5!=null)and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>5)and(GetUnitLifePercent(m5)<60.)and(IsUnitInRange(it,m5,T34[64+O5])))then
set J4=(IssueTargetOrderById(it,$D0118,m5))
endif
if((not J4)and MR7(it,ZU[DM4])and(OT7(it,"ArmletOfMordigan|Active")==false)and(GetUnitLifePercent(it)>90.)and(IsUnitInRange(it,m5,110.)))then
set J4=(m5!=null)and(UnitUseItem(it,MV7(it,ZU[DM4])))
elseif((not J4)and MR7(it,ZU[DK4])and(OT7(it,"ArmletOfMordigan|Active"))and((not IsUnitInRange(it,m5,150.))or(GetUnitLifePercent(it)<60.)))then
set J4=(UnitUseItem(it,MV7(it,ZU[DK4])))
endif
if((not J4)and(GetHeroLevel(it)>$A)and(hq[O5]>Bz))then
if((m5==null)or(IsUnitInRange(it,m5,500.)))then
set m5=K3(1500.,it,Condition(function k6))
endif
set J4=(m5!=null)and((GetUnitLifePercent(m5)<60.)and((GetUnitState(m5,UNIT_STATE_LIFE)+300.)<GetUnitState(it,UNIT_STATE_LIFE)))and(not IsUnitInRange(it,m5,600.))and(MP7(700.,m5,Condition(function S37))<=2)and(not Q77(m5))and(MO7(700.,GetUnitLoc(m5),Condition(function S47))==0)and(IssueTargetOrderById(it,$D0278,m5))
endif
if((not J4)and(not Id(O5))and(GetHeroLevel(it)>$A)and(hq[O5]>Bz))then
set m5=MN7(1300.,b5,Condition(function SN7))
if(m5!=null)then
set m5=MN7(700.,M07(m5),Condition(function k6))
set J4=(m5!=null)and(not IsUnitInRange(it,m5,300.))and(IssueTargetOrderById(it,$D0278,m5))
endif
endif
if(not J4 and Bz>T34[O5])then
set m5=MN7(T34[64+O5],b5,Condition(function k6))
set J4=(m5!=null)and(GetUnitLifePercent(m5)<40.)and(IssueTargetOrderById(it,$D0118,m5))
endif
if(not J4 and(GetUnitAbilityLevel(it,1093747768)>0))then
set m5=MN7(T34[64+O5],b5,Condition(function k6))
set J4=(m5!=null)and(GetRandomInt(1,2)==1)and(((MP7(500.,m5,Condition(function S37))<=2)and(MR7(it,ZU[J1]))or(MR7(it,ZU[T2])))or((MP7(500.,m5,Condition(function S37))<2)))and(IssueTargetOrderById(it,$D0118,m5))
endif
if(not J4)and(GetHeroLevel(it)>$A)then
set m5=MN7(2000.,b5,Condition(function k6))
set J4=(m5!=null)and(Bz>T34[16+O5])and(GetUnitLifePercent(it)>90.)and(not Q77(m5))and(not IsUnitInRange(it,m5,700.))and(((MP7(900.,m5,Condition(function S37))<=1)and(MR7(it,ZU[J1]))or(MR7(it,ZU[T2])))or((MP7(900.,m5,Condition(function S37))<2)))and(MP7(750.,m5,Condition(function S47))==0)and(IssueTargetOrderById(it,$D0278,m5))
endif
elseif(i1==1429221446)then
if((GetUnitAbilityLevel(it,1110454868)>0)and(MO7(275.,b5,Condition(function S37))==0))then
if((m5==null)or(not IsUnitInRange(it,m5,500.)))then
set m5=MN7(500.,b5,Condition(function k6))
endif
if((m5!=null)and(G0[$80+O5]))then
call IssueTargetOrderById(it,$D000F,m5)
else
call SetPlayerAbilityAvailable(pl,1093678667,true)
call IssueImmediateOrderById(it,$D00D2)
endif
elseif(GetUnitAbilityLevel(it,1110454868)==0)then
if(MO7(225.,b5,Condition(function S37))==0)then
call SetPlayerAbilityAvailable(pl,1093678667,false)
else
call SetPlayerAbilityAvailable(pl,1093678667,true)
call IssueImmediateOrderById(it,$D00D1)
endif
endif
if(not J4)and(h4[O5]!=null)and(IsUnitInRange(it,m5,$E1))and(GetUnitLifePercent(m5)<70)then
set J4=M_7(it,$D0200,1093682764,1093747544,m5)
endif
if(not J4)and(h4[O5]!=null)and(IsUnitInRange(it,m5,300))and(GetUnitLifePercent(m5)<30)then
set J4=WKE(it,m5)
endif
if((not J4)and(GetHeroLevel(it)>5)and(GetUnitState(it,UNIT_STATE_MANA)>=150.)and(Bz>hq[16+O5]))then
set UP=$C8+($C8*GetUnitAbilityLevel(it,1093678665))
if((m5==null)or(IsUnitIllusion(m5))or(IsUnitInRange(it,m5,200.))or(not IsUnitInRange(it,m5,UP)))then
set m5=MK7(UP,b5,Condition(function S37))
endif
set J4=(m5!=null)and(not IsUnitInRange(it,m5,200.))and((GetUnitLifePercent(m5)<80.)or(MO7(500.,b5,Condition(function SJ7))>0)or(Bz>hq[O5]))and(WKE(it,m5))
if((not J4)and(m5!=null)and(not IsUnitInRange(it,m5,450.))and(iU(it))and(G0[$80+O5])and(MO7(400.,M07(it),Condition(function k8))==0))then
set UP=R2I(KF7(GetUnitX(it),GetUnitY(it),GetUnitX(m5),GetUnitY(m5)))
if(GetRandomInt(1,2)==1)then
set i1=R2I(bj_RADTODEG*Atan2(GetUnitY(it)-GetUnitY(m5),GetUnitX(it)-GetUnitX(m5)))-$F
else
set i1=R2I(bj_RADTODEG*Atan2(GetUnitY(it)-GetUnitY(m5),GetUnitX(it)-GetUnitX(m5)))+$F
endif
set J4=IssuePointOrderById(it,$D0012,GetUnitX(m5)+UP*Cos(i1*bj_DEGTORAD),GetUnitY(m5)+UP*Sin(i1*bj_DEGTORAD))
endif
endif
elseif(i1==1311788343 or i1==1311788355 or i1==1311788367 or i1==1311788353 or i1==1311788354)or(i1==1311788363 or i1==1311788365)then
if(i1==1311788343 or i1==1311788355 or i1==1311788367 or i1==1311788353 or i1==1311788354)then
set RL7=R07(900,it)
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093815361,(RL7!=null)or(GetUnitState(it,UNIT_STATE_MANA)>600 or GetUnitManaPercent(it)>70.))
set J4=(RL7!=null)and IssueTargetOrderById(it,$D0097,RL7)
if not J4 and G0[$80+O5]then
if G57[O5]!=null and IsUnitInRange(it,G57[O5],950)and MP7(350,G57[O5],Condition(function k6))>=2 and(GetUnitLifePercent(G57[O5])<=60. and(JP7(GetUnitTypeId(G57[O5]))==1 or JP7(GetUnitTypeId(G57[O5]))==2))then
set m5=G57[O5]
else
set m5=R37(800,it,0,Condition(function k6))
endif
set J4=(m5!=null)and(G0[256+O5]or(GetUnitLifePercent(m5)<30.+7*MP7(600,it,Condition(function SJ7))+7*(MP7(350,m5,Condition(function k6)))+3*(MP7(350,m5,Condition(function Q_7))))or .73*GetWidgetLife(m5)<=350)or(MP7(600,it,Condition(function SJ7))>=3)and IssueTargetOrderById(it,$D0265,m5)
if J4 then
set h4[O5]=JD7(J4,m5,h4[O5])
else
set m5=S27(800,it,Condition(function NTF))
set J4=(m5!=null)and IssueTargetOrderById(it,$D0265,m5)
endif
endif
if not J4 then
if MP7(600,it,Condition(function SJ7))>=4 and MP7(600+100*GetUnitAbilityLevel(it,1093815877),it,Condition(function k6))>=1 and G0[256+O5]or(GetUnitLifePercent(it)<20. and Q77(it)==false)then
set J4=IssueImmediateOrderById(it,$D00D4)
endif
endif
if not J4 then
set m5=S27($4B0,it,Condition(function SO7))
set J4=(m5!=null)and((((not IO7(m5))or GetUnitLifePercent(m5)<=25.)or(GetUnitCurrentOrder(m5)!=$D000F or(MP7(600,m5,Condition(function k6))>=1 and GetUnitLifePercent(m5)<=25.)))or GetUnitState(m5,UNIT_STATE_LIFE)<=$E1)and IssueTargetOrderById(it,$D0238,m5)
endif
else
if(i1==1311788363 or i1==1311788365)then
set RL7=S27(500+100*GetUnitAbilityLevel(it,1093815601),it,Condition(function Q67))
set m5=JD7(RL7!=null,RL7,m5)
set J4=(G0[256+O5])and(m5!=null)and(GetUnitManaPercent(it)>70 or GetUnitLifePercent(m5)<=30.)and IssueTargetOrderById(it,$D007F,m5)
if not J4 then
set m5=JD7(m5!=null,m5,S27($7D0,it,Condition(function k6)))
if(not K87(it,m5,90))then
set J4=(m5!=null)and(G0[$80+O5]or(GetUnitManaPercent(it)>65. or GetUnitLifePercent(m5)<80.))and IssuePointOrderById(it,$D0278,(GetUnitX(m5)+125*Cos(GetUnitFacing(m5)*bj_DEGTORAD+GetRandomReal(-.52,.52))),(GetUnitY(m5)+125*Sin(GetUnitFacing(m5)*bj_DEGTORAD+GetRandomReal(-.52,.52))))
else
set NVF=WA7(it,m5,$F423F,3.3,0)
set J4=(m5!=null)and(G0[256+O5]or((GetUnitManaPercent(it)>35. or GetUnitState(it,UNIT_STATE_MANA)>=320)or GetUnitLifePercent(m5)<80.))and(NVF!=null)and IssuePointOrderByIdLoc(it,$D0278,NVF)
endif
endif
if not J4 then
set m5=S27(700,it,Condition(function RF7))
set RL7=S27($44C,it,Condition(function RE7))
if m5!=null and RL7!=null then
if IsUnitInRange(RL7,m5,325)then
set J4=((GetUnitManaPercent(it)>=30. or GetUnitState(it,UNIT_STATE_MANA)>=225.)or(GetUnitState(m5,UNIT_STATE_LIFE)<=500 or GetUnitLifePercent(m5)<70.)or(GetUnitLifePercent(RL7)<=100.))and IssuePointOrderById(it,$D02B6,.5*(GetUnitX(m5)+GetUnitX(RL7)),.5*(GetUnitY(m5)+GetUnitY(RL7)))
else
if MP7(600,RL7,Condition(function QB7))>=3 and GetUnitLifePercent(m5)>75. then
set m5=RL7
endif
set J4=(m5!=null)and((IsUnitType(m5,UNIT_TYPE_HERO) and(GetUnitLifePercent(m5)<=40. or IN7(m5)))or(IsUnitType(m5,UNIT_TYPE_STRUCTURE) and MP7(600,RL7,Condition(function QB7))>=2))and IssuePointOrderById(it,$D02B6,GetUnitX(m5)+GetRandomReal(0,100),GetUnitY(m5)+GetRandomReal(0,100))
endif
else
set m5=JD7(m5==null,RL7,m5)
if m5==null then
set m5=S27($44C,it,Condition(function SR7))
endif
set J4=(m5!=null)and((IsUnitType(m5,UNIT_TYPE_HERO) and(GetUnitLifePercent(m5)<=70. or IN7(m5)))or(IsUnitType(m5,UNIT_TYPE_STRUCTURE) and MP7(600,RL7,Condition(function QB7))>=2))and IssuePointOrderById(it,$D02B6,GetUnitX(m5)+GetRandomReal(0,100),GetUnitY(m5)+GetRandomReal(0,100))
endif
endif
if J4 then
endif
if not J4 then
set J4=(GetUnitTypeId(it)!=1311788365)and((G0[256+O5]and MP7(750,it,Condition(function k6))>=1)or eY[O5]==$A or((MR7(it,1227896388)and MP7(500,it,Condition(function Q_7))>=1)or(MR7(it,1227896916)and MP7(600,it,And(Condition(function Q37),Condition(function QB7)))>=1)))and GetUnitLifePercent(it)>20. and IssueImmediateOrderById(it,$D0272)
endif
endif
endif
elseif(i1==1429221445)then
call SetPlayerAbilityAvailable(pl,1093678422,(GetHeroLevel(it)>4)and(GetUnitManaPercent(it)>30.)or(MO7(400.,b5,Condition(function k6))>0))
if((m5!=null)and(not ke(m5))and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>5)and(GetUnitState(m5,UNIT_STATE_LIFE)>200.))then
set UP=GetUnitAbilityLevel(it,1093678647)
if(UP==0)then
set UP=GetUnitAbilityLevel(it,1093679184)+1
endif
set J4=(GetUnitState(m5,UNIT_STATE_LIFE)<((.2+(I2R(UP)*.2))*(GetUnitState(m5,UNIT_STATE_MAX_LIFE)-GetUnitState(m5,UNIT_STATE_LIFE))))and(M_7(it,$D007F,1093678647,1093679184,m5))
endif
if((not J4)and(GetHeroLevel(it)>6)and(GetUnitLifePercent(it)<85.)and(GetUnitManaPercent(it)>35.))then
set J4=((MO7(400.,b5,Condition(function KA))>0)or(MO7(400.,b5,Condition(function KC))>0))and(IssueImmediateOrderById(it,$D022E))
endif
if((not J4)and(hq[$F0+O5]>Bz))then
set J4=(MO7(400.,b5,Condition(function KA))>1)and(N97(it,$D022E,1093678422))
endif
if((not J4)and(GetUnitManaPercent(it)>35.)and(GetUnitState(it,UNIT_STATE_MANA)>250.))then
set m5=MK7(400.,b5,Condition(function SI7))
set J4=(m5!=null)and(((GetUnitLevel(it)>4)and(GetUnitLifePercent(m5)<80.))or(GetUnitLifePercent(m5)<55.))and(N97(it,$D022E,1093678422))
endif
elseif(i1==1332963428)then
if(GetHeroLevel(it)>2)then
if((m5==null)and(G0[$80+O5]))then
set m5=MK7(900.,b5,Condition(function k6))
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(GetUnitLifePercent(m5)>60.))then
set J4=((MP7(600.,m5,Condition(function SR7))>0)or((MP7(800.,m5,Condition(function SI7))==0)and(MP7(800.,m5,Condition(function Ko))==0)and(GetUnitManaPercent(it)>65.)))and(M57(it,$D0103,1093678169,m5))
endif
if((not J4)and(GetHeroLevel(it)>8)and(m5!=null)and(not IsUnitIllusion(m5))and(GetUnitLifePercent(m5)<80.)and(IsUnitInRange(it,m5,600.)))then
set J4=(GetUnitState(it,UNIT_STATE_MANA)>hq[272+O5])and(MO7(600.,b5,Condition(function SJ7))>0)and(M57(it,$D0200,1093677649,m5))
endif
if((not J4)and(GetHeroLevel(it)>$B)and(m5!=null)and(kq(GetUnitTypeId(m5))))then
set J4=M57(it,$D007F,1093816137,m5)
endif
if(GetUnitLifePercent(it)<85.)then
if((m5==null)and(GetUnitManaPercent(it)>70.)and(MO7(1200.,b5,Condition(function k6))==0))then
set m5=MK7(600.,b5,Condition(function KA))
endif
set J4=(m5!=null)and(M57(it,$D0097,1093683019,m5))
endif
endif
elseif(i1==1332109682)then
if((G0[$80+O5])and(MR7(it,ZU[RW]))and(m5!=null)and(not IsUnitIllusion(m5))and((GetUnitLifePercent(m5)<70.)or(GetUnitAbilityLevel(m5,1112432994)>0)or(Bz>hq[O5]))and(not IsUnitInRange(it,m5,300.))and(IsUnitInRange(it,m5,700.)))then
set J4=((MP7(800.,m5,Condition(function S37))-MP7(800.,m5,Condition(function SJ7)))<=1)and(KVF(it,m5))
endif
if(GetHeroLevel(it)>4)then
if((m5==null)and(G0[$80+O5])and(GetUnitManaPercent(it)>40.))then
set m5=MK7(800.,b5,Condition(function k6))
endif
else
call SetPlayerAbilityAvailable(pl,1093678134,false)
endif
if((not J4)and(m5!=null)and((GetHeroLevel(it)>5)or(ME7(m5))))then
set J4=((GetUnitManaPercent(it)>30.)and(M57(it,$D02B6,1093678134,m5)))or((GetUnitLifePercent(m5)<75.)and(not IsUnitIllusion(m5))and(IsUnitInRange(it,m5,600.))and(N97(it,$D026C,1093810505)))
endif
if((not J4)and(GetHeroLevel(it)>5)and(Bz>hq[16+O5]))then
set J4=(GetHeroLevel(it)>$A)and(hq[416+O5]>Bz)and(MO7(600.,b5,Condition(function SI7))>0)and(Kz(600.,b5)>1)and(N97(it,$D026C,1093810505))
if(not J4)then
set m5=MN7(800.,b5,Condition(function SN7))
set J4=((m5!=null)and(MP7(600.,it,Condition(function k6))>0)and(N97(it,$D026C,1093810505)))
endif
endif
if((not J4)and(m5!=null)and((h4[O5]!=null)or(GetUnitLifePercent(m5)<80.))and(IsUnitInRange(it,m5,300)))then
set J4=((GetUnitState(it,UNIT_STATE_MANA)>XKE(it,1093810505,4)+60)or(Bz+$A<T34[O5]))and(IssueImmediateOrderById(it,$D00C4))
endif
if((not J4)and((GetUnitState(it,UNIT_STATE_MANA)>XKE(it,1093810505,4)+$96))and(GetUnitAbilityLevel(it,1093808694)>1)and(MP7(400.,it,Condition(function Q_7))>3))then
set J4=(IssueImmediateOrderById(it,$D00C4))
endif
elseif(i1==1211117640)then
if(h4[16+O5]!=null)then
if((M87(h4[16+O5]))and(GetUnitAbilityLevel(h4[16+O5],1110454606)>0))then
set J4=(KSF(it,h4[16+O5]))or(IssueTargetOrderById(it,$D0079,h4[16+O5]))
call K3F(it,h4[16+O5])
else
set h4[16+O5]=null
endif
elseif((m5!=null)and(not IsUnitIllusion(m5))and(IsUnitInRange(it,m5,500.))and((GetHeroLevel(it)>4)))then
set J4=(GetUnitAbilityLevel(m5,1110454606)==0)and(GetUnitState(it,UNIT_STATE_MANA)>250.)and(Bz>hq[O5])and(M57(it,$D02BD,'A2WJ',m5))
endif
if((not J4)and(GetHeroLevel(it)>$B)and(Bz>hq[16+O5])and(MO7(I2R(270+($FA*GetUnitAbilityLevel(it,1093679428))),b5,Condition(function k6))>0))then
set GZ[O5]=true
set J4=J8(O5,N97(it,$D0272,1093679428))
endif
if((not J4)and(GetHeroLevel(it)>5)and((m5!=null)or(GetUnitLifePercent(it)<70.)))then
if((m5==null)or(IsUnitIllusion(m5)))then
if(MO7(800.,b5,Condition(function k6))==0)then
set m5=MK7(500.,b5,Condition(function KA))
set J4=(m5!=null)and(GetUnitLifePercent(m5)>80.)and(M_7(it,$D0207,1093681987,1093677658,m5))
endif
elseif((IsUnitInRange(it,m5,400.))and((GetUnitLifePercent(m5)<50.)or(GetUnitAbilityLevel(m5,1110454606)>0)))then
set J4=M_7(it,$D0207,1093681987,1093677658,m5)
endif
if((not J4)and(iy(it)))then
call SetPlayerAbilityAvailable(pl,1093681987,true)
call SetPlayerAbilityAvailable(pl,1093677658,true)
endif
else
call SetPlayerAbilityAvailable(pl,1093681987,false)
call SetPlayerAbilityAvailable(pl,1093677658,false)
endif
elseif(i1==1430468406)then
call SetPlayerAbilityAvailable(pl,kT(it),(GetHeroLevel(it)>$A)and((GetUnitManaPercent(it)>60.)or(m5!=null)))
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>3))then
set m5=MK7(1000.,b5,Condition(function k6))
endif
if((m5!=null)and(((GetHeroLevel(it)>3)and(GetUnitManaPercent(it)>40.))or(M97(m5,it))))then
set J4=M57(it,$D00FA,kT(it),m5)
endif
if((not J4)and(GetHeroLevel(it)>5)and(m5!=null)and(not IsUnitIllusion(m5))and(Bz>hq[O5])and(G0[$80+O5]))then
set J4=(Kz(500.,b5)>1)and(hq[416+O5]>Bz)and(IssueImmediateOrderById(it,$D024C))
if((not J4)and(m5!=null)and(MR7(it,ZU[RW]))and(G0[$80+O5])and(GetHeroLevel(it)>$D)and(GetUnitLifePercent(it)>70.)and(GetUnitManaPercent(it)>30.))then
set h4[16+O5]=m5
set J4=KVF(it,m5)
endif
endif
elseif(i1==1160786241)then
if(GetUnitManaPercent(it)<50.)then
if(GetUnitAbilityLevel(it,1110455882)>0)then
call IssueImmediateOrderById(it,$D00D2)
endif
call SetPlayerAbilityAvailable(pl,1093684805,false)
elseif((GetHeroLevel(it)>$C)and(GetUnitManaPercent(it)>70.))then
call SetPlayerAbilityAvailable(pl,1093684805,true)
if((GetUnitAbilityLevel(it,1110455882)==0)and(hG[O5]>$E)and(not D4 and not RZ4))then
call IssueImmediateOrderById(it,$D00D1)
endif
endif
call SetPlayerAbilityAvailable(pl,1093684813,(m5==null)and(GetHeroLevel(it)>7)and(MO7(1500.,b5,Condition(function k6))==0)and(GetUnitManaPercent(it)>70.))
if(m5!=null)then
set J4=((GetHeroLevel(it)>4)or(M97(m5,it)))and((((GetUnitCurrentOrder(m5)==$D0005)or(IsUnitInRange(it,m5,200.)))and(not IsUnitIllusion(m5))and(M57(it,$D0079,1093684815,m5)))or((GetUnitLifePercent(m5)<70.)and(M57(it,$D0097,1093684813,m5))))
if((not J4)and(GetHeroLevel(it)>5)and(not IsUnitIllusion(m5))and(Bz>hq[O5])and(not kr(it)))then
set UP=Kz(700.,M07(m5))
if((UP>2)or((UP>1)and(MO7(700.,b5,Condition(function SI7))>0)))then
set J4=((MO7(700.,b5,Condition(function SI7))>0)and(M57(it,$D0097,1093684813,m5)))or(M_7(it,$D0275,1093684820,1093684824,m5))
endif
endif
endif
elseif(i1==1429221456)then
if((m5!=null)and(GetHeroLevel(it)>5)and(not IsUnitIllusion(m5))and(Bz>hq[O5]))then
set UP=Kz(700.,M07(m5))
if((UP>2)or((UP>1)and(MO7(730.,b5,Condition(function SJ7))>0)))then
set J4=M_7(it,$D0079,1093685067,1093752407,m5)
endif
endif
elseif(i1==1160786243)then
call SetPlayerAbilityAvailable(pl,1093678672,GZ[O5])
set m5=MK7(600.,b5,Condition(function SN7))
if(m5==null)then
set m5=MK7(500.,b5,Condition(function SI7))
endif
set J4=(m5!=null)and(GetUnitLifePercent(m5)<60.)and(MO7(900.,b5,Condition(function k6))>0)and(IssueTargetOrderById(it,$D0118,m5))
set m5=h4[O5]
if((not J4)and(m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>4)and(GetUnitManaPercent(it)>60.)and(GetUnitLifePercent(it)>70.))then
set m5=MK7(800.,b5,Condition(function k6))
endif
if(not J4)then
set J4=((GetUnitLifePercent(it)<65.)and(IssueTargetOrderById(it,$D0118,it)))or((m5!=null)and(((GetHeroLevel(it)>3)and(GetUnitManaPercent(it)>70.))or(M97(m5,it)))and(IssueTargetOrderById(it,$D0118,m5)))
endif
if((not J4)and(m5!=null)and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>5))then
set UP=Kz(700.,M07(m5))
if((UP>2)or(GetUnitLifePercent(m5)<50.)or((UP>1)and(MP7(700.,m5,Condition(function SJ7))>0)))then
set GZ[O5]=true
set J4=J8(O5,M57(it,$D0100,1395667000,m5))
endif
if((not J4)and(M97(m5,it))and(GetHeroLevel(it)>$A)and(GetUnitLifePercent(it)>60.)and(MP7(700.,m5,Condition(function SJ7))>0))then
if((not IsUnitInRange(it,m5,250.))and(MR7(it,ZU[RW]))and(G0[$80+O5])and(Bz>hq[16+O5]))then
set J4=KVF(it,m5)
endif
if(not J4)then
set GZ[O5]=true
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(h8[O5])-GetUnitY(it),GetUnitX(h8[O5])-GetUnitX(it)))
call SetPlayerAbilityAvailable(pl,1093678672,true)
set J4=J8(O5,IssuePointOrderById(it,$D0079,GetUnitX(m5)+200.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+200.*Sin(UP*bj_DEGTORAD)))
endif
endif
endif
elseif(i1==1160786242)then
call SetPlayerAbilityAvailable(pl,1093683287,(GetHeroLevel(it)>3)or((m5!=null)and(M97(m5,it))))
set J4=(m5!=null)and(GetHeroLevel(it)>4)and(GetUnitManaPercent(it)>60.)and(IssueTargetOrderById(it,$D02B6,m5))
if((not J4)and(GetHeroLevel(it)>5)and(Bz>hq[16+O5]))then
set m5=Ie(bj_mapInitialPlayableArea,Condition(function k7))
set J4=(m5!=null)and(R2I(GetUnitState(m5,UNIT_STATE_LIFE))<50+($F*GetHeroLevel(it)))and(IssueImmediateOrderById(it,$D020A))
endif
if((not J4)and(Bz<=hq[$F0+O5])and((hq[$F0+O5]-Bz)<2.5)and(not IC(O5))and(not Id(O5)))then
set m5=MN7(2500.,b5,Condition(function k7))
set J4=(m5!=null)and(MI7(m5,it))and(not IsUnitInRange(m5,it,800.))and((MP7(800.,m5,Condition(function k6))-MP7(800.,m5,Condition(function SJ7))<=1))and(MP7(1000.,m5,Condition(function S47))==0)and(IssueTargetOrderById(it,$D00D9,m5))
endif
elseif((i1==1211117641)or(i1==1211117642))then
if(i1==1211117642)then
set J4=((not IsUnitInRange(it,M7[O5],3000.))and(IssueTargetOrderById(it,$D0249,M7[O5])))or(((eY[O5]==2)or(G0[16+O5]))and(jW(it,$D0012,h9[O5])))
if((not J4)and(kA(it,M7[O5],800.)))then
call jW(it,$D0012,h9[O5])
endif
set UP=1
else
set UP=0
endif
if(not J4)and(h4[O5]!=null)and(not YO8(m5))then
set J4=KZF(it,m5)
endif
if(not J4)then
if(h4[O5]!=null)and(YO8(m5))and(IsUnitInRange(it,m5,300))then
set J4=IssuePointOrderByIdLoc(it,$D0249,M07(m5))
endif
if not J4 then
set RL7=S27(300,it,Condition(function Q_7))
set J4=(RL7!=null)and(GetUnitManaPercent(it)>=65.)and(GetHeroLevel(it)>=$C)and(GetRandomReal(0,100)<=75 and IssuePointOrderByIdLoc(it,$D0249,M07(m5)))
endif
endif
if((not J4)and(GetHeroLevel(it)>8)and(m5!=null)and(GetUnitAbilityLevel(m5,1110456120)==0))then
if((Kz(700.,M07(m5))>1)or(MP7(500.,m5,Condition(function SJ7))>UP))then
set J4=KZF(it,m5)
endif
endif
if((not J4)and(GetHeroLevel(it)>2)and(MO7(800.,b5,Condition(function SN7))>0))then
set m5=MK7(800.,b5,Condition(function k6))
set J4=(m5!=null)and(KZF(it,m5))
endif
if(not J4)and(i1==1211117641)and(GetUnitManaPercent(it)>70)and(MO7(300.,M07(it),Condition(function Q_7))>2)then
set J4=IssuePointOrderByIdLoc(it,$D0249,M07(m5))
endif
elseif(i1==1311781207)then
set J4=((GetUnitLifePercent(it)<80.)and(IssueTargetOrderById(it,$D0105,it)))or((m5!=null)and(GetHeroLevel(it)>5)and(GetUnitLifePercent(m5)<70.)and(M57(it,$D007F,1093684817,m5)))
if((not J4)and(GetHeroLevel(it)>3))then
set m5=MK7(800.,b5,Condition(function SN7))
if(m5==null)then
set m5=MK7(600.,b5,Condition(function SI7))
endif
if((m5!=null)and(not IsUnitIllusion(m5)))then
set UP=R2I(GetUnitLifePercent(m5))
if((UP<50)and(GetHeroLevel(it)>$A)and(Bz>hq[O5]))then
set J4=(MP7(800.,m5,Condition(function k6))>0)and((IssueTargetOrderById(it,$D0238,m5))or(IssueTargetOrderById(it,$D0105,m5)))
elseif(UP<70)then
set J4=(m5!=null)and(IssueTargetOrderById(it,$D0105,m5))
endif
elseif((GetHeroLevel(it)>9)and(GetUnitManaPercent(it)>75.))then
set m5=MK7(600.,b5,Condition(function Kd))
set J4=(m5!=null)and(MP7(300.,m5,Condition(function k8))>1)and(IssueTargetOrderById(it,$D0105,m5))
endif
endif
elseif(i1==1311780946)then
call SetPlayerAbilityAvailable(pl,1093677385,(GetHeroLevel(it)>7)and(GetUnitManaPercent(it)>55.))
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>4))then
set m5=MK7(700.,b5,Condition(function k6))
endif
if(m5!=null)then
set J4=(((GetUnitLifePercent(m5)<50.)or(IsUnitInRange(it,m5,250.)))and(M57(it,$D0208,1093685825,m5)))or((MP7(300.,it,Condition(function BE7))>1)and(N97(it,$D022E,1093810232)))
if((not J4)and((GetUnitCurrentOrder(m5)==$D0005)or(IsUnitInRange(it,m5,300.))or(GetUnitLifePercent(m5)<50.)))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(h8[16+O5])-GetUnitY(m5),GetUnitX(h8[16+O5])-GetUnitX(m5)))
call SetPlayerAbilityAvailable(pl,1093677385,true)
set GZ[O5]=true
set J4=J8(O5,IssuePointOrderById(it,$D010E,GetUnitX(m5)+150.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+150.*Sin(UP*bj_DEGTORAD)))
endif
endif
if(not J4)then
set m5=MN7(700.,b5,Condition(function SN7))
set J4=(m5!=null)and(MP7(400.,m5,Condition(function k6))>0)and(M57(it,$D0208,1093685825,m5))
endif
if((not J4)and(GetHeroLevel(it)>9)and((eY[O5]==3)or(eY[O5]==4)or(GetUnitManaPercent(it)>60.)))then
set m5=MN7(700.,b5,Condition(function k8))
set J4=(m5!=null)and(MP7(300.,m5,Condition(function k8))>2)and(MP7(400.,it,Condition(function BE7))>2)and(N97(it,$D022E,1093810232))
endif
if((not J4)and(is(it))and(GetHeroLevel(it)>9))then
set UP=R2I(KE7(it,NF7(it)))
if((UP>$7D0)and(UP<$DAC)and(eY[O5]==1)and(GetUnitAbilityLevel(it,1093685808)>1))then
if(h8[16+O5]==h7[$E])then
set J4=KEF(0)
elseif(h8[16+O5]==h7[35])then
set J4=KEF(1)
elseif(h8[16+O5]==h7[55])then
set J4=KEF(2)
endif
elseif(((eY[O5]==3)or(eY[O5]==4))and(UP>5000)and(MO7(1200.,b5,Condition(function k6))==0))then
set J4=KEF(3)
endif
endif
elseif((i1==1211117650)or(i1==1211119433))then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>4))then
set m5=MN7(700.,b5,Condition(function k6))
endif
if((h4[O5]!=null)or M97(it,m5))and(IsUnitInRange(it,m5,300.))then
set J4=(Bz>T34[O5])and(N97(it,$D00D4,1093743946))
endif
if(not J4)and(Bz>T34[48+O5])and((GZ[$D0+O5])or(GetUnitState(it,UNIT_STATE_MANA)>300.)or(h4[O5]!=null))then
set IN4=it
set RL7=(S27($E1+$AF*GetUnitAbilityLevel(it,1093743958),it,Condition(function k6)))
set HR7=MP7(25+$C8+$C8*GetUnitAbilityLevel(it,1093743958),it,Condition(function k6))
set bj_forLoopAIndex=MO7(25+$C8+$C8*GetUnitAbilityLevel(it,1093743958),b5,Condition(function AX7))
if((HR7>=1+JH7(MP7(800,it,Condition(function RG7))>=3,2,0)and(bj_forLoopAIndex>=R2I(($A-.1*GetUnitLifePercent(it)))or MP7(800,it,Condition(function RG7))>=3))and h4[O5]!=null)then
set J4=(MP7(800,it,Condition(function RG7))>=2 or(GetWidgetLife(RL7)<=400. or GetUnitLifePercent(RL7)<=30.))and M27(it,$D02B6,1093743958,b5)
endif
endif
if(not J4)and(Bz>T34[32+O5])then
set IN4=it
set UP=MO7(1000.,b5,Condition(function ny))
if((not J4)and(UP>=4)and(h4[O5]!=null)and(GetUnitLifePercent(it)>50.))then
set m5=h4[O5]
set J4=(((GetHeroLevel(it)>4)and(GetUnitLifePercent(m5)<70.))or(M97(m5,it)))and(IssueTargetOrderById(it,$D02BD,m5))
endif
if((not J4)and(UP>=4)and(GetUnitManaPercent(it)>40.))then
set m5=MK7(800.,b5,Condition(function SN7))
if(m5==null)then
set m5=MK7(600.,b5,Condition(function SI7))
endif
set J4=(m5!=null)and(((GetHeroLevel(it)>4)and(GetUnitLifePercent(m5)<70.))or(ME7(m5)))and(IssueTargetOrderById(it,$D02BD,m5))
endif
if(not J4)then
set J4=(UP>=3)and(GetUnitLifePercent(it)<75.)and(IssueTargetOrderById(it,$D02BD,it))
endif
endif
if(not J4)and((h4[O5]!=null)or(GetUnitState(it,UNIT_STATE_MANA)>400)or ME7(m5))and(GetUnitState(it,UNIT_STATE_MANA)>$C8)then
set J4=(Bz>T34[16+O5])and(M57(it,$D0079,1093743955,h4[O5]))
endif
elseif(i1==1211119187)then
if(not J4)and(GetUnitLevel(it)>5)and(Bz>T34[O5])and(h4[O5]!=null)then
if(not J4)and(WA7(it,h4[O5],650.,.5,1300.)!=null)then
if((M97(it,h4[O5])or GetUnitLifePercent(h4[O5])<50.)and(KF7(GetUnitX(it),GetUnitY(it),GetLocationX(DH7),GetLocationY(DH7))>600.))then
set J4=M27(it,$D02B6,1093742923,DH7)
endif
endif
if(not J4)then
set m5=TG7(it)
if(m5!=null)and(WA7(it,m5,650.,.5,1300.)!=null)and(KF7(GetUnitX(it),GetUnitY(it),GetLocationX(DH7),GetLocationY(DH7))>600.)then
set J4=M27(it,$D02B6,1093742923,DH7)
endif
endif
if(not J4)then
set m5=h4[O5]
if(m5==null)then
set m5=S07(1500.,it)
endif
if(m5!=null)and(GZ[$D0+O5]or(GetUnitLifePercent(it)<50.)or((GetUnitLifePercent(m5)<50)and(WA7(it,m5,650.,.5,1300.)!=null)and(KF7(GetUnitX(it),GetUnitY(it),GetLocationX(DH7),GetLocationY(DH7))>600.)))then
set J4=M27(it,$D02B6,1093742923,M07(m5))
if J4 then
call WQE(O5,m5,false,false)
endif
endif
endif
endif
set m5=h4[O5]
if m5==null then
set m5=S07(1300.,it)
endif
if(not J4)and(not IsUnitIllusion(m5))and(Bz>T34[32+O5])and((Bz>T34[16+O5])or(GetUnitAbilityLevel(it,1093742926)<=1)or(GetUnitState(it,UNIT_STATE_MANA)<=120.))and((h4[O5]!=null and GetUnitLifePercent(h4[O5])<50.)or((m5!=null)and(ME7(m5))))then
set J4=IssueTargetOrderById(it,$D0265,m5)
if J4 then
call WQE(O5,m5,false,false)
endif
endif
if(not J4)and(Bz>T34[16+O5])and(T34[32+O5]>Bz+2. or(GetUnitAbilityLevel(it,1093743414)>1 and h4[O5]==null)or(h4[O5]!=null and GetUnitLifePercent(h4[O5])>80.)or(GetUnitAbilityLevel(it,1093742926)<=1))and(m5!=null)and((h4[O5]!=null)or(M97(m5,it))or((GetUnitManaPercent(it)>50.)and(GetUnitLifePercent(m5)<70. or GetUnitState(it,UNIT_STATE_MANA)>400.)))then
if WC7(it,m5,2.,1500.)!=null then
set J4=M27(it,$D0079,1093743414,DH7)
set h4[16+O5]=m5
endif
endif
elseif(i1==1211117646)then
call SetPlayerAbilityAvailable(pl,1093685573,(GetHeroLevel(it)>6)and(GetUnitManaPercent(it)>70.)and(MO7(700.,b5,Condition(function k6))==0))
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>4))then
set m5=MN7(700.,b5,Condition(function k6))
endif
if((m5!=null)and((GetUnitLifePercent(m5)<60.)or((GetHeroLevel(it)>4)and((GetUnitManaPercent(it)>60.)or(MP7(600.,m5,Condition(function SI7))>0)))))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(it)-GetUnitY(m5),GetUnitX(it)-GetUnitX(m5)))
call SetPlayerAbilityAvailable(pl,1093685573,true)
set J4=IssuePointOrderById(it,$D0079,GetUnitX(m5)+(50.+100.*GetUnitAbilityLevel(it,1093685573))*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+(50.+100.*GetUnitAbilityLevel(it,1093685573))*Sin(UP*bj_DEGTORAD))
endif
if((not J4)and(GetHeroLevel(it)>6)and(GetUnitManaPercent(it)>50.)and(GetRandomInt(1,4)==1))then
set m5=MK7(700.,b5,Condition(function Kd))
set J4=(m5!=null)and(GetUnitLifePercent(m5)>65.)and(IsUnitType(m5,UNIT_TYPE_MELEE_ATTACKER))and(MP7(250.,m5,Condition(function k8))>2)and(IssueTargetOrderById(it,$D007F,m5))
endif
if(not J4)then
set m5=MN7(700.,b5,Condition(function SN7))
set J4=(m5!=null)and(MP7(250.,m5,Condition(function k6))>0)and(M57(it,$D0085,1093685815,m5))
endif
if(not J4)then
set m5=MN7(700.,b5,Condition(function k7))
if(m5!=null)then
set m5=MN7(700.,M07(m5),Condition(function SI7))
set J4=((m5!=null)and(IsUnitAlly(m5,GetOwningPlayer(it)))and(M57(it,$D0085,1093685815,m5)))or(M57(it,$D0085,1093685815,it))
endif
endif
if((not J4)and(GetHeroLevel(it)>14.)and(Bz>hq[O5])and(hq[416+O5]>Bz))then
set UP=MO7(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==NG7(not IsUnitAlly(it,Z7[0]))))and((MO7(1000.,b5,Condition(function SJ7))>0)or(NG7(IsUnitAlly(it,Z7[0]))==1)))then
set m5=MN7(1000.,b5,Condition(function k7))
if(m5!=null)then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(h8[16+O5])-GetUnitY(m5),GetUnitX(h8[16+O5])-GetUnitX(m5)))
set J4=IssuePointOrderById(it,$D00DE,GetUnitX(m5)+300*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+300*Sin(UP*bj_DEGTORAD))
else
set m5=MN7(1000.,b5,Condition(function k6))
if(m5!=null)then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(h9[16+O5])-GetUnitY(m5),GetUnitX(h9[16+O5])-GetUnitX(m5)))
set J4=IssuePointOrderById(it,$D00DE,GetUnitX(m5)+300*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+300*Sin(UP*bj_DEGTORAD))
endif
endif
endif
endif
elseif(i1==1211117624)then
call SetPlayerAbilityAvailable(pl,1093683024,(GetHeroLevel(it)>$A)and((GetUnitManaPercent(it)>70.)or(m5!=null)))
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>4))then
set m5=MN7(700.,b5,Condition(function k6))
endif
set J4=(m5!=null)and((IsUnitInRange(it,m5,600.))and((M97(m5,it))or(GetUnitState(it,UNIT_STATE_MANA)>100 and GetUnitManaPercent(it)>40)or(GetUnitLifePercent(m5)<60))and(N97(it,$D022E,1093683024)))
set J4=(m5!=null)and(((GetUnitLifePercent(m5)<40.)or((GetUnitAbilityLevel(m5,1110454869)==0)and(hq[416+O5]>Bz)))and(IssueTargetOrderById(it,$D0278,m5)))
elseif(i1==1160785973)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>3))then
set m5=MK7(600.,b5,Condition(function k6))
if((m5==null)and(GetHeroLevel(it)>$A)and(GetUnitManaPercent(it)>30.)and(MR7(it,ZU[RW])))then
set m5=MK7(1200.,b5,Condition(function k6))
endif
endif
if(m5!=null)then
if((GetHeroLevel(it)>5)and(not IsUnitIllusion(m5))and(Bz>hq[O5])and(G0[$80+O5]))then
if(IsUnitInRange(m5,it,500.))then
set UP=MO7(700.,b5,Condition(function k8))-MO7(700.,b5,Condition(function k6))
set J4=(UP<2)and(GetUnitAbilityLevel(m5,1110454580)==0)and(IssueImmediateOrderById(it,$D0278))
if J4 then
call TriggerSleepAction(0)
call M57(it,$D0107,1093678130,m5)
endif
elseif((MR7(it,ZU[RW]))and(G0[$80+O5])and(IsUnitInRange(m5,it,1000.))and(GetHeroLevel(it)>$A)and(GetUnitManaPercent(it)>30.))then
set UP=MP7(700.,m5,Condition(function k8))-MP7(700.,m5,Condition(function k6))
set h4[16+O5]=m5
set J4=(UP<2)and(GetUnitAbilityLevel(m5,1110454580)==0)and(KVF(it,m5))
endif
endif
if((not J4)and(M97(m5,it)))then
set J4=(M57(it,$D0107,1093678130,m5))
endif
if((not J4)and(GetHeroLevel(it)>20))then
set J4=(GetUnitState(it,UNIT_STATE_MANA)>450.)and(M57(it,$D0107,1093678130,m5))
endif
endif
elseif(i1==1315988077)then
if((G0[$80+O5])and(MR7(it,ZU[RW]))and(m5!=null)and(not IsUnitIllusion(m5))and(Bz>hq[O5])and(not IsUnitInRange(it,m5,250.))and(IsUnitInRange(it,m5,700.)))then
set J4=((MP7(800.,m5,Condition(function S37))-MP7(800.,m5,Condition(function SJ7)))<=1)and(KVF(it,m5))
endif
if((not J4)and(m5!=null)and(GetHeroLevel(it)>2))then
set J4=((M97(m5,it))and(M57(it,$D0269,1097032808,m5)))or((IsUnitInRange(it,m5,200.))and(N97(it,$D0080,1093678669)))
endif
call SetPlayerAbilityAvailable(pl,1093678669,(GetHeroLevel(it)>$C)and(MO7(1500.,b5,Condition(function k6))==0)and(GetUnitManaPercent(it)>75.))
if((not J4)and(GetHeroLevel(it)>$C)and(hq[416+O5]>Bz)and(G0[$80+O5]))then
set UP=MO7(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==NG7(not IsUnitAlly(it,Z7[0]))))and((MO7(1000.,b5,Condition(function SJ7))>0)or(NG7(IsUnitAlly(it,Z7[0]))==1)))then
set m5=MN7(800.,b5,Condition(function k6))
if(m5!=null)then
set J4=((kq(GetUnitTypeId(m5)))and(M57(it,$D0269,1097032808,m5)))or((IsUnitInRange(it,m5,200.))and(N97(it,$D0080,1093678669)))
endif
endif
endif
elseif(i1==1211117616)then
if((G0[$80+O5])and(MR7(it,ZU[RW]))and(m5!=null)and(not IsUnitIllusion(m5))and(Bz>hq[O5])and(not IsUnitInRange(it,m5,250.))and(IsUnitInRange(it,m5,700.)))then
set J4=((MP7(800.,m5,Condition(function S37))-MP7(800.,m5,Condition(function SJ7)))<=1)and(KVF(it,m5))
endif
if((not J4)and(m5!=null)and IsUnitInRange(it,m5,500))then
set J4=((GetHeroLevel(it)>5)and(GetUnitLifePercent(m5)<70.)and((GetUnitState(m5,UNIT_STATE_LIFE)+1000.)<GetUnitState(it,UNIT_STATE_LIFE))and(M57(it,$D0107,1093816142,m5)))or((IsUnitInRange(it,m5,250.))and(GetHeroLevel(it)>3)and(N97(it,$D009F,1093677139)))
elseif(not J4)and(m5==null or(not IsUnitInRange(it,m5,800)))then
set RL7=RO7(300,$BE,it,0,Condition(function Q_7),Condition(function QC7))
set J4=(RL7!=null)and(GetUnitLifePercent(it)>=70. or GetWidgetLife(it)>950.)and(GetHeroLevel(it)>=4)and(GetRandomReal(0,100)<=40 and M57(it,$D0107,1093816142,RL7))
endif
call SetPlayerAbilityAvailable(pl,1093677139,(GetHeroLevel(it)>$C)and(MO7(1500.,b5,Condition(function k6))==0)and(GetUnitManaPercent(it)>75.))
if(not J4)then
set RL7=MN7(800.,b5,Condition(function R87))
if(GetUnitLifePercent(it)<20.)or(((G0[256+O5])and GetUnitState(it,UNIT_STATE_LIFE)>=300. and RL7!=null and GetUnitLifePercent(RL7)<=70.))then
set J4=IssueImmediateOrderById(it,$D022E)
if(h4[O5]==null or(not IsUnitInRange(it,h4[O5],$5DC)))and GetUnitLifePercent(it)>30. then
set h4[O5]=JD7(((m5!=null or RL7==null)and(IsUnitInRange(m5,it,$3E8))and(GetUnitState(m5,UNIT_STATE_LIFE)<GetUnitState(RL7,UNIT_STATE_LIFE))),m5,RL7)
endif
endif
endif
elseif(i1==1315074670)then
if((m5!=null)and(GetUnitManaPercent(it)>60.)and(kP(GetUnitTypeId(m5)))and(GetUnitCurrentOrder(it)!=$D000F))then
set J4=M57(it,$D0270,1093685570,m5)
endif
if((m5==null)and(not J4)and(G0[$80+O5])and(GetHeroLevel(it)>3))then
set m5=MK7(800.,b5,Condition(function k6))
endif
set J4=(m5!=null)and(not IsUnitInRange(it,m5,550.))and(GetUnitManaPercent(it)>60.)and(GetRandomInt(1,3)==1)and(GetHeroLevel(it)>3)and(M57(it,$D0113,1093677622,m5))
if((not J4)and(MR7(it,ZU[C0]) or MR7(it,ZU[RLL]))and(GetHeroLevel(it)>$A)and(GetUnitManaPercent(it)>50.)and(G0[$80+O5]))then
if((m5==null)and(GetUnitLifePercent(it)>70.))then
if((eY[O5]==9)and(h4[$90+O5]!=null)and(M87(h4[$90+O5]))and(IsUnitInRange(it,h4[$90+O5],1500.))and(not IsUnitVisible(it,GetOwningPlayer(h4[$90+O5]))))then
set m5=h4[$90+O5]
else
set m5=MK7(1500.,b5,Condition(function KK))
endif
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(not kD(m5))and(not MR7(m5,ZU[EW]))and(GetUnitTypeId(m5)!=1212365106)and(not IsUnitInRange(it,m5,800.))and(IsUnitInRange(it,m5,1500.))and(MP7(600.,m5,Condition(function SR7))>0)or((GetUnitLifePercent(m5)<75.)and(MP7(1000.,m5,Condition(function S47))==0)))then
set h4[288+O5]=m5
set GZ[272+O5]=true
if(MR7(it,ZU[RLL]))then
set J4=UnitUseItem(it,MV7(it,ZU[RLL]))
else
set J4=UnitUseItem(it,MV7(it,ZU[C0]))
endif
set GZ[272+O5]=J4
endif
endif
elseif((i1==1215063922)or(i1==1211117638)or(i1==1211117637)or(i1==1211117639))then
call SetPlayerAbilityAvailable(pl,1093677894,(GetHeroLevel(it)>6)and(GetUnitManaPercent(it)>60.))
if((m5==null)and(G0[$80+O5]))then
if(i1!=1215063922)then
set m5=MK7(1000.,b5,Condition(function k6))
call WQE(O5,m5,false,false)
elseif((GetHeroLevel(it)>3)and(GetUnitManaPercent(m5)>70.))then
set m5=MK7(700.,b5,Condition(function k6))
endif
endif
set J4=(m5!=null)and((GetUnitLifePercent(m5)<60)or(h4[O5]!=null))and(M57(it,$D007F,1093681490,m5))
set J4=(m5!=null)and(((GetHeroLevel(it)>3)and(GetUnitManaPercent(it)>40.))or(ME7(m5)))and(M57(it,$D0264,1093677894,m5))
if((not J4)and(GetHeroLevel(it)>$C)and(hq[416+O5]>Bz)and(Bz>hq[O5])and(G0[$80+O5]))then
set UP=MO7(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==NG7(not IsUnitAlly(it,Z7[0]))))and((MO7(1000.,b5,Condition(function SJ7))>0)or(NG7(IsUnitAlly(it,Z7[0]))==1)))then
set m5=K3(900.,it,Condition(function k6))
set J4=(m5!=null)and(GetUnitLifePercent(m5)<80.)and(N97(it,$D02B7,1093677895))
endif
endif
elseif(i1==1164207469)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>5))then
set m5=MK7(800.,b5,Condition(function k6))
endif
if((m5!=null)and(GetHeroLevel(it)>5))then
if(((GetUnitManaPercent(m5)<15.)and(GetUnitLifePercent(m5)<50.))or(GetUnitState(m5,UNIT_STATE_LIFE)<((GetUnitState(m5,UNIT_STATE_MAX_MANA)-GetUnitState(m5,UNIT_STATE_MANA))*(.35+(I2R(GetUnitAbilityLevel(it,1093682483))*.25)))))then
set J4=(not IsUnitIllusion(m5))and(not ke(m5))and(M57(it,$D007F,1093682483,m5))
endif
if((not J4)and(GetUnitLifePercent(m5)<70.)and(G0[$80+O5])and(not IsUnitInRange(m5,it,300.))and(GetUnitLifePercent(it)>70.)and(MP7(800.,m5,Condition(function S47))==0)and((MP7(800.,m5,Condition(function S37))-MP7(800.,m5,Condition(function SJ7)))<=1))then
set NWF=kL(it,m5,200.)
set J4=(NWF!=null)and(IssuePointOrderByIdLoc(it,$D022D,NWF))
endif
endif
if((not J4)and(GetHeroLevel(it)>11.)and(GetUnitManaPercent(it)>70.)and(iy(it))and(MO7(1400.,b5,Condition(function Ky))==0)and(eY[O5]==1))then
set NWF=kk(it,800.,h8[O5])
set J4=(NWF!=null)and(IssuePointOrderByIdLoc(it,$D022D,NWF))
endif
elseif(i1==1433631084)then
call SetPlayerAbilityAvailable(pl,1093678644,(GetHeroLevel(it)>7)and(GetUnitManaPercent(it)>70.))
if((GetHeroLevel(it)>5)and(Bz>hq[O5]))then
if(m5==null)then
set m5=MK7(1200.+(500.*GetUnitAbilityLevel(it,1093678160)),b5,Condition(function k7))
endif
set J4=(m5!=null)and(not IsUnitIllusion(m5))and(not ke(m5))and(R2I(GetUnitState(m5,UNIT_STATE_LIFE))<($C8+($96*GetUnitAbilityLevel(it,1093678160))))and(M57(it,$D007F,1093678160,m5))
if((not J4)and(hq[416+O5]>Bz)and(GetHeroLevel(it)>$A)and(MO7(800.,b5,Condition(function SJ7))>0))then
if(m5==null)then
set m5=MK7(1200.,b5,Condition(function k6))
endif
set J4=(m5!=null)and(not IsUnitIllusion(m5))and(M57(it,$D007F,1093678160,m5))
endif
endif
elseif(i1==1214345830)then
call SetPlayerAbilityAvailable(pl,1093679190,MO7(1000.,b5,Condition(function k6))>0)
set m5=MK7(800.,b5,Condition(function SN7))
if(m5==null)then
set m5=MK7(600.,b5,Condition(function SI7))
endif
if((m5!=null)and(GetUnitLifePercent(m5)<70.))then
set J4=(((GetHeroLevel(it)>4)or(M97(m5,it)))and(M57(it,$D0101,1093679182,m5)))or((GetUnitLifePercent(m5)<40.)and(MP7(600.,m5,Condition(function k6))>0)and(M57(it,$D00DA,1093679190,m5)))
endif
if((not J4)and(GetHeroLevel(it)>$C)and(hq[416+O5]>Bz)and(G0[$80+O5]))then
set UP=MO7(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==NG7(not IsUnitAlly(it,Z7[0]))))and((MO7(1000.,b5,Condition(function SJ7))>0)or(NG7(IsUnitAlly(it,Z7[0]))==1)))then
set J4=(m5!=null)and(GetUnitLifePercent(m5)<60.)and(MP7(600.,m5,Condition(function k6))>0)and(IssueImmediateOrderById(it,$D0277))
endif
endif
if(not J4)then
set J4=(GetUnitLifePercent(it)<75.)and(M57(it,$D0101,1093679182,it))
endif
if((not J4)and(GetHeroLevel(it)>$A))then
set m5=MK7(450.,b5,Condition(function S47))
if((m5!=null)and(GetUnitLifePercent(m5)<30.)and(GetUnitLifePercent(m5)>10.))then
set J4=(MO7(600.,b5,Condition(function KC))>4)and(IssueImmediateOrderById(it,$D0277))
endif
endif
elseif((i1==1311781174)or(i1==1311781175)or(i1==1311911984)or(i1==1311911985)or(i1==1311781442))then
if((m5==null)and(G0[$80+O5]))then
set m5=MK7(700.,b5,Condition(function k6))
if(GetUnitAbilityLevel(it,1110454338)>0 or M97(it,m5))then
call WQE(O5,m5,false,false)
endif
endif
if(not J4)and(h4[O5]!=null)then
if(i1==1311781174)then
set J4=(IsUnitInRange(it,h4[O5],500.)and(N97(it,$D022E,1093748042)))
else
set J4=(IsUnitInRange(it,h4[O5],200.)and(N97(it,$D022E,1093748042)))
endif
endif
if(not J4)and(h4[O5]!=null)then
if(i1==1311781174)then
set J4=M57(it,$D00FA,1093808461,m5)
else
set J4=(IsUnitInRange(it,h4[O5],400.)and(N97(it,$D0080,1093808462)))
endif
endif
if(not J4)then
if(m5!=null)and(IsUnitInRange(it,m5,200.))then
if(i1==1311781174)then
set J4=(N97(it,$D00AA,1093681733))
if J4 then
set i1=1311781175
endif
endif
elseif(m5!=null)and((GetUnitLifePercent(m5)<15.)or((not G0[256+O5])and(I27(it)<2000.)))then
if(i1!=1311781174)then
set J4=(N97(it,$D00AB,1093681733))
if J4 then
set i1=1311781174
endif
endif
elseif(h4[O5]!=null)and(not IsUnitInRange(it,m5,200.))and(Bz>T34[32+O5])then
if(i1!=1311781174)then
set J4=(N97(it,$D00AB,1093681733))
if J4 then
set i1=1311781174
endif
endif
elseif(GetHeroLevel(it)>=6 or h4[O5]!=null)and(MZ7(it,ZU[D0]))then
set J4=(i1==1311781174)and(N97(it,$D00AA,1093681733))
else
set J4=(i1!=1311781174)and(N97(it,$D00AB,1093681733))
endif
endif
elseif(i1==1315007329)then
set J4=GetUnitAbilityLevel(it,1110455864)>0
if((m5==null)or(GetUnitLifePercent(m5)>50.))then
set m5=K3(1000.,it,Condition(function k6))
endif
if((not J4)and(m5!=null))then
set J4=(((GetUnitState(m5,UNIT_STATE_LIFE)<hq[272+O5])or((GetHeroLevel(it)>3)and(GetUnitManaPercent(it)>55.)))and(M57(it,$D007F,1093677108,m5)))or((GetUnitAbilityLevel(m5,1110454348)==0)and((GetUnitLifePercent(m5)<75.)or((GetHeroLevel(it)>$B)and(GetUnitState(it,UNIT_STATE_MANA)>250.)))and(not IsUnitIllusion(m5))and(M57(it,$D00B5,1093681716,m5)))
endif
if((not J4)and(GetHeroLevel(it)>8)and(G0[$80+O5])and(Bz>hq[O5]))then
if((m5==null)and(GetUnitLifePercent(it)>70.))then
if((eY[O5]==9)and(h4[$90+O5]!=null)and(M87(h4[$90+O5]))and(IsUnitInRange(it,h4[$90+O5],1500.))and(not IsUnitVisible(it,GetOwningPlayer(h4[$90+O5]))))then
set m5=h4[$90+O5]
else
set m5=MN7(1500.,b5,Condition(function KK))
endif
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(not kD(m5))and(GetUnitTypeId(m5)!=1212365106)and((not IsUnitInRange(it,m5,600.))or(not IsUnitVisible(it,GetOwningPlayer(m5))))and(IsUnitInRange(it,m5,1500.))and((GetUnitLifePercent(m5)<70.)or(MP7(650.,m5,Condition(function SR7))>0)))then
set h4[288+O5]=m5
set J4=(MP7(800.,m5,Condition(function S47))==0)and(IssueImmediateOrderById(it,$D00A1))
endif
endif
elseif(i1==1332898670)then
call SetPlayerAbilityAvailable(pl,1093677360,(GetHeroLevel(it)>7)and(GetUnitManaPercent(it)>60.))
if((m5==null)and(G0[$80+O5]))then
set m5=MK7(900.,b5,Condition(function k6))
endif
if((m5!=null)and((M97(m5,it))or((GetUnitLifePercent(m5)<70.)and(MP7(500.,m5,Condition(function SI7))>0))))then
set J4=(IsUnitInRange(it,m5,400)or YO8(m5))and(M57(it,$D0200,1093677136,m5))
endif
if((not J4)and(m5!=null)and((GetHeroLevel(it)>3)or(M97(m5,it))))then
set J4=((GetUnitLifePercent(m5)<70.)and(Bz>hq[O5])and(not IsUnitIllusion(m5))and(M57(it,$D0216,1093685848,m5)))or((GetUnitManaPercent(it)>60.)and(M57(it,$D026B,1093677360,m5)))
endif
if((not J4)and(GetHeroLevel(it)>5)and(Bz>hq[O5]))then
if((m5==null)or(GetUnitCurrentOrder(m5)!=$D0005)or(not IsUnitInRange(it,m5,500.)))then
set m5=MK7(900.,b5,Condition(function KM))
endif
if(m5!=null)then
set GZ[O5]=true
set J4=J8(O5,M_7(it,$D0218,1093677128,1093681457,m5))
endif
endif
if((not J4)and(GetHeroLevel(it)>17)and(Bz>hq[O5]))then
set m5=MN7(900.,b5,Condition(function S47))
if((m5!=null)and(GetUnitLifePercent(m5)<55.)and(GetUnitLifePercent(m5)>15.)and(MP7(800.,m5,Condition(function KC))>2))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(it)-GetUnitY(m5),GetUnitX(it)-GetUnitX(m5)))
set GZ[O5]=true
call SetPlayerAbilityAvailable(pl,1093677128,true)
call SetPlayerAbilityAvailable(pl,1093681457,true)
set J4=IssuePointOrderById(it,$D0218,GetUnitX(m5)+300.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+300.*Sin(UP*bj_DEGTORAD))
set GZ[O5]=false
endif
endif
elseif(i1==1215723364)then
call SetPlayerAbilityAvailable(pl,1093744463,GetUnitManaPercent(it)>60.)
if((m5!=null)and((GetHeroLevel(it)>4)or(M97(m5,it))))then
set J4=M57(it,$D007F,1093677633,m5)
if((not J4)and(GetUnitLifePercent(m5)<60.)and(not IsUnitIllusion(m5))and(kA(it,m5,600.)))then
set J4=M_7(it,$D026B,1093683534,1093747031,m5)
endif
endif
if((not J4)and(Bz>hq[O5])and(Bz>hq[16+O5])and(G0[$80+O5])and(GetHeroLevel(it)>$A)and(GetUnitLifePercent(it)>80.)and(MO7(400.,b5,Condition(function SJ7))>0))then
if(m5==null)then
set m5=K3(1000.,it,Condition(function k6))
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(GetUnitLifePercent(m5)<70.)and(not IsUnitInRange(it,m5,500.)))then
if((MP7(500.,m5,Condition(function k6))<=2)and(MO7(500.,b5,Condition(function k6))==0))then
set J4=M_7(it,$D026B,1093683534,1093747031,m5)
endif
endif
endif
if((not J4)and(GetHeroLevel(it)>$C)and(GetUnitLifePercent(it)>60.))then
set J4=(MO7(700.,b5,Condition(function k6))>0)and(MO7(700.,b5,Condition(function SJ7))>0)and(M57(it,$D02BD,1093744463,m5))
endif
elseif(i1==1215128178)then
call SetPlayerAbilityAvailable(pl,1093677616,(GetHeroLevel(it)>5)and(GetUnitManaPercent(it)>70.))
set UP=GetUnitAbilityLevel(it,1093810503)
if(UP==0)then
set UP=GetUnitAbilityLevel(it,1093810504)+1
endif
set LD4=90+(120*UP)
if((GetHeroLevel(it)>5)and(Bz>hq[O5])and((Ie(bj_mapInitialPlayableArea,Condition(function KXF))!=null)or(PT4)))then
set GZ[O5]=true
call SetPlayerAbilityAvailable(pl,1093810504,true)
set J4=J8(O5,N97(it,$D00C4,1093810503))
endif
if((not J4)and(GetHeroLevel(it)>4))then
if((m5==null)and(G0[$80+O5]))then
set m5=MK7(1000.,b5,Condition(function k6))
endif
set J4=(m5!=null)and((GetUnitManaPercent(it)>60.)or(M97(m5,it)))and(M57(it,$D00FA,'A2QB',m5))
endif
elseif(i1==1164799855)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>3))then
set m5=MK7(800.,b5,Condition(function k6))
endif
set J4=((GetUnitLifePercent(it)<60.)and(N97(it,$D024C,1093677378)))or((m5!=null)and(GetUnitLifePercent(m5)<50.)and(M57(it,$D006B,1093682264,m5)))or((m5!=null)and(GetUnitAbilityLevel(it,1093682265)>0)and(not IsUnitInRange(it,m5,550.))and(GetUnitManaPercent(it)>60.)and(GetRandomInt(1,3)==1)and(GetHeroLevel(it)>3)and(M57(it,$D011E,1093682265,m5)))or((m5!=null)and(GetUnitAbilityLevel(it,1093752642)>0)and(not IsUnitInRange(it,m5,700.))and(GetUnitManaPercent(it)>55.)and(GetRandomInt(1,2)==1)and(M57(it,$D011E,1093752642,m5)))
elseif(i1==1433105516)then
if((not J4)and(GetHeroLevel(it)>3))then
set J4=(m5!=null)and((GetUnitManaPercent(it)>60.)or(M97(m5,it)))and(IssueTargetOrderById(it,$D02B6,m5))
if((not J4)and(m5!=null)and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>7)and(((GetUnitLifePercent(m5)<75.)and(Bz>hq[O5]))or((GetUnitLifePercent(m5)<50.)and(Bz>hq[16+O5])))and(not kr(it))and(G0[$80+O5]))then
set J4=(Kz(400.,M07(m5))>0)and(IssuePointOrderById(it,$D0278,GetUnitX(m5),GetUnitY(m5)))
endif
if((not J4)and(GetHeroLevel(it)>10.)and(Bz>hq[O5])and(hq[416+O5]>Bz))then
set UP=MO7(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==NG7(not IsUnitAlly(it,Z7[0]))))and((MO7(1000.,b5,Condition(function SJ7))>0)or(NG7(IsUnitAlly(it,Z7[0]))==1)))then
set m5=MN7(800.,b5,Condition(function k6))
if(m5!=null)then
set UP=MP7(400.,m5,Condition(function k6))
set J4=((UP>1)or(UP==NG7(not IsUnitAlly(it,Z7[0]))))and(IssuePointOrderById(it,$D0278,GetUnitX(m5),GetUnitY(m5)))
endif
endif
endif
if((not J4)and(GetUnitAbilityLevel(it,1093744688)>0)and(GetUnitManaPercent(it)>50.)and GZ[O5])then
if(GetUnitAbilityLevel(it,1093744688)>1)then
set m5=MK7(600.,b5,Condition(function KD))
set J4=(m5!=null)and(IssueTargetOrderById(it,$D007F,m5))
elseif(GetUnitManaPercent(it)>70.)then
set m5=MK7(600.,b5,Condition(function KD))
set J4=(m5!=null)and(GetUnitState(m5,UNIT_STATE_LIFE)<150.)and(IssueTargetOrderById(it,$D007F,m5))
endif
endif
if((not J4)and(GetUnitAbilityLevel(it,1093681713)>0)and(GetUnitManaPercent(it)>50.))then
set m5=MN7(500.,b5,Condition(function k6))
set J4=(m5!=null)and(M57(it,$D0278,1093681713,m5))
endif
endif
elseif((i1==1214409837)or(i1==1211119192)or(i1==1211119193)or(i1==1211119191))then
if(not J4)and((i1==1214409837)and(GetHeroLevel(it)>=6)and(Bz>T34[O5])and(h4[O5]!=null))then
set J4=N97(it,$D00D4,1093742932)
if J4 then
set i1=1211119192
call J_7(.3)
set J4=false
endif
endif
if((not J4)and(GetHeroLevel(it)>5))then
set bj_lastLoadedUnit=m5
set m5=Ie(bj_mapInitialPlayableArea,Condition(function SN7))
if(m5!=null)and(GetUnitLifePercent(m5)<30)and(K57(m5))and(KE7(m5,NF7(m5))>KE7(it,NF7(it))+1500.)and(MP7(750.,m5,Condition(function k6))==0)and(not MR7(m5,ZU[QC]))then
set J4=(i1!=1214409837 or N97(it,$D00D4,1093742932))and(IssueTargetOrderById(it,$D0118,m5))
if J4 then
call J_7(1.)
call DPF(it,true)
endif
endif
set m5=bj_lastLoadedUnit
endif
if((not J4)and(h4[O5]!=null)and(Bz>T34[32+O5]))then
set J4=(m5!=null)and(GetUnitManaPercent(m5)>20.)and(GetUnitAbilityLevel(m5,1110455126)==0)and(M57(it,$D02B6,1093742680,m5))
endif
if((not J4)and(GetUnitManaPercent(it)>40.))then
set m5=MK7(700.,b5,Condition(function SI7))
set J4=(m5!=null)and(GetUnitManaPercent(m5)<75.)and(M57(it,$D00D9,1093742898,m5))
endif
if((not J4)and((GetUnitManaPercent(it)<50.)))then
set J4=M57(it,$D00D9,1093742898,it)
endif
if((not J4)and(G0[$80+O5])and(GetUnitAbilityLevel(it,1093679157)>1)and((GetUnitManaPercent(it)>30.)or((MO7(1300.,b5,Condition(function k6))<=1)and((GetUnitState(it,UNIT_STATE_MANA)>$96+XKE(it,1093742898,4))and(Bz>T34[48+O5]))))and(Bz>T34[16+O5])and((i1!=1214409837)or(((MO7(300.,b5,Condition(function k8))<=2)and(MO7(800.,b5,Condition(function R77))>2))and((MO7(500.,b5,Condition(function k6))==0)or(MO7(400.,b5,Condition(function SR7))>0)))))then
set m5=h4[O5]
if m5==null then
set m5=MK7(1300.,M07(it),Condition(function k6))
endif
if m5==null then
set m5=MK7(1300.,M07(it),Condition(function Q_7))
endif
if m5!=null then
set LD4=J47(it,m5)
if(IsUnitType(m5,UNIT_TYPE_HERO)and((not M47(it))or YO8(m5))and GetUnitLifePercent(m5)>30)or(h4[O5]==null)then
set LD4=J47(it,m5)
if(not WW7(it,m5,GetUnitX(it)+1300.*Cos(LD4*bj_DEGTORAD),GetUnitY(it)+1300.*Sin(LD4*bj_DEGTORAD),400,Condition(function k8)))and(bj_forLoopAIndex>2)then
set J4=IssuePointOrderById(it,$D00FA,GetUnitX(it)+150.*Cos(LD4*bj_DEGTORAD),GetUnitY(it)+150.*Sin(LD4*bj_DEGTORAD))
endif
endif
endif
endif
if((not J4)and(h4[O5]!=null)and(i1!=1214409837))then
set LD4=GetUnitFacing(m5)
set J4=(m5!=null)and(IssuePointOrderById(it,$D0079,GetUnitX(m5)+200.*Cos(LD4*bj_DEGTORAD),GetUnitY(m5)+200.*Sin(LD4*bj_DEGTORAD)))
endif
elseif(i1==1316252014)then
call SetPlayerAbilityAvailable(pl,1093678405,(GetHeroLevel(it)>4)and(GetUnitManaPercent(it)>60.)and((m5!=null)or(MO7(1500.,b5,Condition(function k6))>0)))
if(GetHeroLevel(it)>4)then
set J4=(m5!=null)and((GetUnitManaPercent(it)>60.)or(M97(m5,it)))and(M57(it,$D0269,1093678137,m5))
if(not J4)then
if(m5==null)then
set m5=MK7(2400.,b5,Condition(function k7))
endif
set J4=(m5!=null)and(N97(it,$D022E,1093678405))
endif
endif
if((not J4)and(GetHeroLevel(it)>$A)and(GetUnitManaPercent(it)>50.))then
set UP=0
if((Bz+10.)<hq[O5])then
set UP=UP+1
endif
if((Bz+10.)<hq[16+O5])then
set UP=UP+1
endif
if((Bz+10.)<hq[32+O5])then
set UP=UP+1
endif
if(((Bz+10.)<hq[80+O5])or((Bz+10.)<hq[96+O5]))then
set UP=UP+1
endif
if(((UP>1)and(MO7(800.,b5,Condition(function k6))==0))or((UP>2)and(GetUnitLifePercent(it)>50.)))then
set J4=IssueImmediateOrderById(it,$D0278)
endif
endif
elseif(i1==1164799603)then
call SetPlayerAbilityAvailable(pl,1095067246,(GetHeroLevel(it)>4)and(GetUnitManaPercent(it)>30.))
if(not J4)and(Bz>T34[O5])and(GetUnitLevel(it)>=6)then
if GetUnitAbilityLevel(it,1093752632)>0 then
set LD4=105+GetUnitAbilityLevel(it,1093752632)*30
else
set LD4=116.25+GetUnitAbilityLevel(it,1093752633)*41.25
endif
set LG4=true
set m5=Ie(bj_mapInitialPlayableArea,Condition(function KXF))
if m5==null then
set LG4=false
if h4[O5]!=null then
set CN4=h4[O5]
endif
set m5=S17(99999.,it)
set CN4=null
if m5==null then
set m5=Ie(bj_mapInitialPlayableArea,Condition(function Q_7))
endif
endif
if((m5!=null))then
if(LG4)or((not IsUnitType(m5,UNIT_TYPE_HERO))and((Bz-20>T34[O5])and(GetUnitState(it,UNIT_STATE_MANA)>300.)))or(IsUnitType(m5,UNIT_TYPE_HERO)and((GetUnitLifePercent(m5)<50. or(GZ[$D0+O5]and h4[O5]!=null)or((Bz-$F>T34[O5])and(GetUnitState(it,UNIT_STATE_MANA)>200.)))))then
set J4=M_7(it,$D0097,1093752632,1093752633,m5)
endif
endif
endif
if(is(it))then
if((KE7(it,NF7(it))<1500.)and(eY[O5]==1))then
if(h8[16+O5]==h7[$E])then
set J4=KEF(0)
elseif(h8[16+O5]==h7[35])then
set J4=KEF(1)
elseif(h8[16+O5]==h7[55])then
set J4=KEF(2)
endif
elseif(((eY[O5]==3)or(eY[O5]==4))and(KE7(it,NF7(it))>6000.)and(MO7(1200.,b5,Condition(function k6))==0))then
set J4=KEF(3)
endif
endif
if(not J4)then
if(((m5==null)or(not M97(m5,it)))and(G0[$80+O5]))then
set m5=K3(800.,it,Condition(function k7))
endif
set J4=(m5!=null)and(M97(m5,it))and(not IsUnitInRange(it,m5,250.))and(IsUnitInRange(it,m5,600))and(M57(it,$D00FA,1093808453,m5))
endif
elseif(i1==1328558160)then
if(MR7(it,ZU[E24]))then
call SetPlayerAbilityAvailable(pl,1093682998,false)
endif
if((GetUnitAbilityLevel(it,1093684056)>0)and(KE7(it,NF7(it))>2000.)and(GetUnitState(it,UNIT_STATE_MANA)>100.))then
if((GetHeroStr(it,true)>(30+(2*GetHeroLevel(it))))and(GetHeroStr(it,false)>($F+GetHeroLevel(it))))then
if(GetUnitLifePercent(it)>75.)then
set J4=IssueImmediateOrderById(it,$D0245)
else
set J4=jW(it,$D0012,h9[O5])
endif
elseif((GetHeroStr(it,true)<(20+(2*GetHeroLevel(it))))and(IsTriggerEnabled(OE7(GetHandleId(pl),"MorphAgi"))))then
set J4=IssueImmediateOrderById(it,$D0246)
endif
endif
if((not J4)and(m5!=null)and(GetHeroLevel(it)>9)and(Bz>T34[32+O5])and(MR7(it,ZU[E24]))and(Bz>T34[$D0+O5])and(GetUnitState(it,UNIT_STATE_MANA)>315.))then
call WQE(O5,m5,false,false)
call SetPlayerAbilityAvailable(pl,1093682998,true)
set J4=UnitUseItemTarget(it,MV7(it,ZU[E24]),m5)
endif
if((not J4)and(m5!=null)and(GetHeroLevel(it)>5))then
set J4=IssueTargetOrderById(it,$D02B6,m5)
if((not J4)and(IsUnitInRange(it,m5,850.))and(not IsUnitInRange(it,m5,400.))and(GetUnitLifePercent(it)>75.)and((not IC(O5))or(GetUnitLifePercent(m5)<55.)))then
set NWF=kL(it,m5,200.)
if((NWF!=null)and((MO7(800.,NWF,Condition(function S37))-MO7(800.,NWF,Condition(function SJ7)))<=1)and(MO7(700.,NWF,Condition(function S47))==0))then
call SetPlayerAbilityAvailable(pl,1093682766,true)
set GZ[O5]=true
set J4=J8(O5,IssuePointOrderByIdLoc(it,$D00FA,NWF))
endif
endif
endif
if((not J4)and(GetHeroLevel(it)>$F)and(m5!=null)and(GetUnitAbilityLevel(it,1093683011)==0)and((GetUnitLifePercent(m5)<60.)or((MO7(600.,b5,Condition(function k6))>=2)and(MO7(600.,b5,Condition(function SI7))>0))))then
set m5=L5E(800.,it)
set J4=(m5!=null)and(M57(it,$D0132,1093683000,m5))
endif
elseif(i1==1212363833)then
call SetPlayerAbilityAvailable(pl,1093678643,(GetHeroLevel(it)>4)and(GetUnitManaPercent(it)>70.))
set UP=R2I(hq[16+O5]-Bz)
set J4=(m5!=null)and((GetHeroLevel(it)>$D)or((GetHeroLevel(it)>4)and(GetUnitLifePercent(m5)<70.)))and((UP<=0)or(UP>50))and(M57(it,$D007F,1093809220,m5))
if(not J4)and((h4[O5]!=null)or(GetUnitLifePercent(m5)<30))and(X47(it,m5))then
set J4=N97(it,$D022E,1093815125)
endif
if((not J4)and(GetHeroLevel(it)>$A)and(Bz>hq[32+O5]))then
set m5=MK7(500.,b5,Condition(function S47))
if((m5!=null)and(GetUnitLifePercent(m5)<35.))then
set J4=(MP7(600.,m5,Condition(function k8))>4)and(MP7(700.,m5,Condition(function KC))>3)and(IssueImmediateOrderById(it,$D0278))
endif
if(not J4)then
set m5=MN7(800.,b5,Condition(function SN7))
set J4=(m5!=null)and(MP7(600.,m5,Condition(function k6))>0)and(IssueImmediateOrderById(it,$D0278))
endif
endif
elseif(i1==1315070563)then
if(not GZ[O5])then
call SetPlayerAbilityAvailable(pl,1093678407,(GetHeroLevel(it)>4)and((not iy(it))or(GetHeroLevel(it)>$B))and(GetUnitManaPercent(it)>70.))
endif
if((GetHeroLevel(it)>5)and(Bz>T34[O5])and(G0[$80+O5]))then
if(m5==null)then
set m5=MK7(700.,b5,Condition(function k6))
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(not ke(m5)))then
set UP=MP7(600.,m5,Condition(function k6))+1
if(GetHeroLevel(it)<$B)then
set J4=(GetUnitState(m5,UNIT_STATE_LIFE)<600.)and(UP>=MP7(700.,m5,Condition(function KA)))and(M_7(it,$D0278,1093684529,1093747032,m5))
elseif((GetUnitState(m5,UNIT_STATE_LIFE)<1200.)or(UP>2)or((UP>1)and(MP7(600.,m5,Condition(function SI7))>0)))then
set J4=(UP>=MP7(700.,m5,Condition(function KA)))and(M_7(it,$D0278,1093684529,1093747032,m5))
endif
endif
endif
elseif(i1==1214931305)then
set UP=GetHeroLevel(it)
call SetPlayerAbilityAvailable(pl,1093748025,(UP>9)and((GetUnitManaPercent(it)>55.)or(m5!=null)or(MO7(900.,b5,Condition(function k6))>0)))
set J4=(h4[O5]!=null)and(M57(it,$D00CB,1093678147,m5))
if((m5==null)and(G0[$80+O5])and(UP>3))then
set m5=MK7(1000.,b5,Condition(function k6))
endif
if(m5!=null)then
if((GetUnitState(it,UNIT_STATE_LIFE)>GetUnitState(m5,UNIT_STATE_LIFE))and((GetUnitState(it,UNIT_STATE_LIFE)-GetUnitState(m5,UNIT_STATE_LIFE))>(40*GetHeroLevel(it))))then
if((MR7(it,ZU[RW]))and(not IsUnitIllusion(m5))and(G0[$80+O5])and(GetUnitLifePercent(it)>75.)and(GetHeroLevel(it)>$A)and(GetUnitState(it,UNIT_STATE_MANA)>hq[272+O5]+120.)and(Bz>hq[O5]))then
set h4[16+O5]=m5
set J4=KVF(it,m5)
endif
if(not J4)then
set J4=((((UP>5)and(Bz>hq[O5])and(not IsUnitIllusion(m5))and(GetUnitState(it,UNIT_STATE_MANA)>hq[272+O5]+150.))or(GetUnitLifePercent(m5)<50.))and(M57(it,$D00CB,1093678147,m5)))or((((GetUnitManaPercent(it)>55.)and(UP>3))or(M97(m5,it)))and(GetUnitAbilityLevel(m5,1110454583)==0)and(M57(it,$D0079,1093748025,m5)))
endif
if((not J4)and(not IsUnitIllusion(m5))and(IsUnitInRange(it,m5,600.))and(Bz>hq[O5]))then
set J4=(Kz(500.,b5)>1)and(GetUnitState(it,UNIT_STATE_MANA)>hq[272+O5]+100.)and((GetUnitAbilityLevel(m5,1110454583)>0)or(MO7(850.,b5,Condition(function SJ7))>0))and((MC7(it,ZU[D0]))or(IssueImmediateOrderById(it,$D0278)))
endif
endif
endif
elseif(i1==1328558389)then
if((m5==null)and(G0[$80+O5]))then
set m5=MK7(1500.,b5,Condition(function k6))
endif
if((not J4)and(Bz>T34[O5])and(not IsUnitIllusion(m5))and(GetUnitLevel(it)>=6)and(h4[O5]!=null)and(IsUnitInRange(it,m5,1200.))and((GetUnitLifePercent(m5)<60.)or((YO8(m5)or GZ[$D0+O5])and(GetUnitLifePercent(m5)<80.))))then
if YO8(m5)or(K87(it,m5,30))then
set J4=(IssuePointOrderByIdLoc(it,$D0278,M07(m5)))
endif
endif
if((not J4)and(m5!=null)and(Bz>T34[32+O5])and(not IsUnitIllusion(m5))and(GetUnitAbilityLevel(it,1093747000)>1)and(((((GetUnitState(it,UNIT_STATE_MANA)>XKE(it,1093747000,4)+XKE(it,1093747009,4))and(Bz+$A<T34[O5]))or(GetUnitState(it,UNIT_STATE_MANA)>430))and(GetUnitLifePercent(m5)>40.))or(GetWidgetLife(m5)<80*GetUnitAbilityLevel(it,1093747000))))then
set J4=(M57(it,$D02BD,1093747000,m5))
endif
if(not J4)and(m5!=null)and(Bz>T34[16+O5])and(not G0[O5])and(IsUnitInRange(it,m5,300))and(GetUnitLifePercent(m5)<90.)and((GetUnitState(it,UNIT_STATE_MANA)>XKE(it,1093747009,4)+XKE(it,1093746993,4))or(Bz+$A<T34[O5]))then
set J4=(IssueImmediateOrderById(it,$D0265))
endif
elseif(i1==1328558390)then
if((m5==null))then
set m5=MK7(1200.,b5,Condition(function k6))
endif
if(not J4)and(h4[O5]!=null)and(Bz>T34[O5])and(GetUnitLevel(it)>=6)and(GetUnitLifePercent(m5)<60.)then
set J4=(M57(it,$D0097,1093744975,m5))
endif
if(not J4)and(h4[O5]!=null)and(Bz>T34[48+O5])and(ME7(m5))and(not IsUnitInRange(it,m5,400.))and(GetUnitState(it,UNIT_STATE_MANA)>XKE(it,1093744982,4)+100)then
call N97(it,$D00D4,1093744986)
call J_7(.1)
endif
if(not J4)and(Bz>T34[16+O5])and(GetUnitLevel(it)>=4)and((GetUnitState(it,UNIT_STATE_MANA)>390.)or((h4[O5]!=null)and(GetUnitState(it,UNIT_STATE_MANA)>100+XKE(it,1093744982,4)))or(GetUnitLifePercent(m5)<70.))then
set J4=(M57(it,$D0079,1093748044,m5))
endif
if(not J4)and(Bz>T34[32+O5])and(m5!=null)and((h4[O5]!=null)or(GetUnitLifePercent(m5)<70.)or(GetUnitState(it,UNIT_STATE_MANA)>=400.))then
if(WA7(it,m5,750,.2,$5DC)!=null)then
set J4=(M27(it,$D00FA,1093744982,DH7))
endif
endif
if(not J4)and(Bz>T34[32+O5])and(h4[O5]==null)and(GetUnitAbilityLevel(it,1093744982)>1)and((GetUnitState(it,UNIT_STATE_MANA)>=400.)or(GetUnitLifePercent(m5)<70.))then
if((not J4)and(m5!=null)and(not IsUnitInRange(it,m5,450.))and(iU(it))and(G0[$80+O5])and(not G0[48+O5])and(MO7(400.,b5,Condition(function k8))==0))then
set UP=R2I(KF7(GetUnitX(it),GetUnitY(it),GetUnitX(m5),GetUnitY(m5)))
if(GetRandomInt(1,2)==1)then
set i1=R2I(bj_RADTODEG*Atan2(GetUnitY(it)-GetUnitY(m5),GetUnitX(it)-GetUnitX(m5)))-25
else
set i1=R2I(bj_RADTODEG*Atan2(GetUnitY(it)-GetUnitY(m5),GetUnitX(it)-GetUnitX(m5)))+25
endif
set J4=IssuePointOrderById(it,$D0012,GetUnitX(m5)+UP*Cos(i1*bj_DEGTORAD),GetUnitY(m5)+UP*Sin(i1*bj_DEGTORAD))
endif
endif
elseif(i1==1160786510)then
if(not J4)and(Bz>T34[O5])and(GetUnitLevel(it)>=6)then
if GetUnitAbilityLevel(it,1093808949)>0 then
set UP=99999
elseif GetUnitAbilityLevel(it,1093751861)>0 then
set UP=$3E8
else
set UP=0
endif
if UP!=0 then
set LG4=true
set m5=MK7(UP,GetUnitLoc(it),Condition(function KXF))
if m5==null then
set LG4=false
if h4[O5]==null then
set m5=MK7(UP,GetUnitLoc(it),Condition(function k6))
else
set m5=h4[O5]
endif
endif
if((m5!=null))then
if(LG4)or((GetUnitLifePercent(m5)<50. or(GZ[$D0+O5]and h4[O5]!=null)or((Bz-20>T34[O5])and(GetUnitState(it,UNIT_STATE_MANA)>300.))and(not IsUnitIllusion(m5))))then
if ME7(m5)or(YU7(it,m5))then
if WC7(it,m5,2,UP)!=null then
set J4=N47(it,$D0079,1093751861,1093808949,GetLocationX(DH7),GetLocationY(DH7))
endif
else
set J4=N47(it,$D0079,1093751861,1093808949,GetUnitX(m5),GetUnitY(m5))
endif
endif
if J4 then
call J_7(.1)
set J4=false
endif
endif
endif
endif
set m5=h4[O5]
if((m5==null))then
set m5=MK7(800.,b5,Condition(function k6))
endif
if(not J4)and(Bz>T34[16+O5])and(h4[O5]!=null or GetUnitLifePercent(m5)<70.)and(IsUnitInRange(it,m5,400))then
set J4=N97(it,$D0278,1093751631)
endif
if(not J4)and(Bz>T34[32+O5])and(h4[O5]!=null or GetUnitLifePercent(m5)<70. or M97(m5,it))then
set J4=M57(it,$D0097,1093751633,m5)
endif
set UP=MP7(800.,it,Condition(function k6))
if(not J4)and(Bz>T34[48+O5])and((h4[O5]!=null and UP>1 and IsUnitInRange(it,m5,500))or(UP>2 and GetUnitState(it,UNIT_STATE_MANA)>350)or(GetUnitState(it,UNIT_STATE_MANA)>450 and MP7(800,it,Condition(function Q_7))>5))then
set J4=N97(it,$D022E,1093808697)
endif
elseif(i1==1328558406)then
if(not J4)and(h4[O5]!=null)and(is(it))and(Bz>T34[16+O5])then
set m5=SU7(900.,it,false)
if m5!=null then
set J4=M57(it,$D0097,1093751873,m5)
endif
endif
if(not J4)and(is(it))and(h8[$A0+O5]!=null)then
set GZ[$E0+O5]=(LoadUnitHandle(L7,(GetHandleId(it)),(652))!=null)
set J4=IssuePointOrderById(it,$D02B6,GetUnitX(h8[$A0+O5])+GetRandomReal(-200.,200.),GetUnitY(h8[$A0+O5])+GetRandomReal(-200.,200.))
set h8[$A0+O5]=null
endif
if(not J4)then
set m5=h4[O5]
if(m5==null)then
set m5=MK7(800.,b5,Condition(function k6))
endif
if(h4[O5]!=null)and(GetUnitLifePercent(it)+10.>GetUnitLifePercent(m5))then
call SetPlayerAbilityAvailable(Player(O5),1093810257,true)
set GZ[O5]=true
set J4=(GetUnitAbilityLevel(it,1110456385)==0)and(IssueImmediateOrderById(it,$D026D))
else
set GZ[O5]=false
set J4=(GetUnitAbilityLevel(it,1110456385)!=0)and(N97(it,$D026E,1093810257))
endif
if J4 then
call J_7(.1)
set J4=false
endif
if(not J4)and(m5!=null)and(h4[O5]!=null or GetUnitManaPercent(it)>90 or(GetUnitLifePercent(m5)<70 and GetUnitManaPercent(it)>60))then
if OT7(it,"AI|IoSpirits")then
set UP=R2I(KE7(it,m5))
if UP<425 then
set J4=(OO7(GetHandleId(it),"AI|IoSpiritsFar"))and(IssueImmediateOrderById(it,$D00F9))
else
set J4=(not OO7(GetHandleId(it),"AI|IoSpiritsFar"))and(IssueImmediateOrderById(it,$D020A))
endif
else
if(Bz>T34[32+O5])then
set J4=N97(it,$D022E,1093751864)and(IssueImmediateOrderById(it,$D020A))
endif
endif
endif
endif
elseif(i1==1160786504)then
if(m5==null)then
set m5=MK7(800.,b5,Condition(function k6))
endif
if(not J4)and(m5!=null)and(Bz>T34[O5])and((GetUnitLifePercent(m5)<50. and(UnitCountBuffsExBJ(bj_BUFF_POLARITY_NEGATIVE,bj_BUFF_RESIST_EITHER,m5,false,false)==0))or MG7(m5))then
set J4=M57(it,$D008F,1093751617,m5)
if J4 then
call WQE(O5,m5,false,false)
endif
endif
if(not J4)and(m5!=null)and(Bz>T34[32+O5])and(IsUnitInRange(it,m5,600))and(h4[O5]!=null or GetUnitLifePercent(m5)<70. or M97(m5,it))then
if MO7(450,M07(m5),Condition(function Q_7))<=1 then
set J4=M57(it,$D0079,1093751618,m5)
endif
endif
if(not J4)and(m5!=null)and(Bz>T34[16+O5])and(h4[O5]!=null or GetUnitLifePercent(m5)<70. or M97(m5,it))and(MP7(450,m5,Condition(function Q_7))<=1)then
set J4=M57(it,$D0097,1093751608,m5)
endif
if(not J4)then
if(m5==null)then
set m5=MK7(1200.,b5,Condition(function k6))
endif
if(m5!=null)and(Bz>T34[48+O5])and(h4[O5]!=null or GetUnitLifePercent(m5)<70. or M97(m5,it)or GetUnitManaPercent(it)>50.)and(IsUnitVisible(m5,Player(O5)))then
set J4=IssuePointOrderByIdLoc(it,$D0278,M07(m5))
call J_7(.5)
endif
endif
elseif i1==1211119409 or i1=='H0EV' then
if((m5==null)and(G0[$80+O5]))then
set m5=MK7(800.,b5,Condition(function k6))
endif
if((not J4)and(Bz>T34[32+O5])and(m5!=null)and(GetUnitLifePercent(m5)<90.)and((not IsUnitInRange(it,m5,200.))or(ME7(m5))))then
if(WA7(it,m5,28/.03,0,(GetUnitAbilityLevel(it,1093749303)+3)*100)!=null)and(WW7(it,m5,GetLocationX(DH7),GetLocationY(DH7),120,Condition(function A37)))then
set J4=(K87(it,m5,$F))and(IssueImmediateOrderById(it,$D0278))
call WQE(O5,m5,false,false)
endif
endif
if((not J4)and(Bz>T34[16+O5])and(m5!=null)and(IsUnitInRange(it,m5,300.))and(GetUnitLifePercent(it)>GetUnitLifePercent(m5)+20.)and(G0[256+O5])and((GetUnitState(it,UNIT_STATE_MANA)>200.)or ME7(m5)))then
set J4=IssueImmediateOrderById(it,$D022E)
endif
if(not J4)and(h4[O5]!=null)and(Bz>T34[O5])and(not IsUnitIllusion(m5))and(IsUnitInRange(it,m5,200.))then
set J4=N97(it,$D00A1,1093749070)
endif
if(not J4)and(h4[O5]==null)and(Bz>T34[16+O5])and(MP7(325.,it,Condition(function SD7))>3)and(GetUnitState(it,UNIT_STATE_MANA)>400.)then
set J4=IssueImmediateOrderById(it,$D022E)
endif
elseif(i1==1211117653)then
if(m5==null and(G0[$80+O5]))then
set m5=MK7(800.,b5,Condition(function k6))
endif
set UP=(MO7(1200.,b5,Condition(function KX)))
set J4=(GetUnitAbilityLevel(it,1110456408)>0)and(UP>0)and(GetUnitLifePercent(it)<70.)
if((not J4)and((GetUnitState(it,UNIT_STATE_MANA))>$AF)and((Bz>T34[O5])or(T57(it,1093686855)))and(Bz>T34[$90+O5]))then
set LD4=(37.5+(46.87*GetUnitAbilityLevel(it,1093808470)))
set NAF=Ie(bj_mapInitialPlayableArea,Condition(function KXF))
set J4=(NAF!=null)and UG7(it,A_4,A_4,A_4,1093686855)and IssuePointOrderByIdLoc(it,$D0079,WC7(it,NAF,1.7,99999))
elseif((not J4)and((GetUnitState(it,UNIT_STATE_MANA))>$AF)and(Bz>T34[$90+O5]))then
set LD4=(37.5+(46.87*GetUnitAbilityLevel(it,1093808470)))
set NAF=Ie(bj_mapInitialPlayableArea,Condition(function KXF))
if(NAF!=null)then
call SetPlayerAbilityAvailable(GetOwningPlayer(it),BS[9],true)
set J4=IssuePointOrderByIdLoc(it,$D0079,WC7(it,NAF,1.7,99999))
call SetPlayerAbilityAvailable(GetOwningPlayer(it),BS[9],false)
endif
endif
if((not J4)and(m5!=null)and(not IsUnitIllusion(m5)))then
call WQE(O5,m5,false,false)
if(((GetUnitState(it,UNIT_STATE_MANA))>410)and(GetUnitLevel(it)>=$A)and(Bz>T34[O5])and(Bz>T34[48+O5])and(Bz>T34[112+O5])and((T57(it,1093686862))or(T57(it,1093686861))))then
set J4=UG7(it,A_4,A_4,A24,1093686862)and(U87(it,A_4,A_4,A_4,false))and IssuePointOrderById(it,$D00F8,GetUnitX(m5),GetUnitY(m5))
endif
if((not J4)and((GetUnitState(it,UNIT_STATE_MANA))>350)and(GetUnitLevel(it)>=$E)and(Bz>T34[O5])and(Bz>T34[96+O5])and(Bz>T34[$90+O5])and((T57(it,1093686859))or(T57(it,1093686855))))then
set J4=UG7(it,A24,A24,A54,1093686859)and IssuePointOrderById(it,$D020B,GetUnitX(m5),GetUnitY(m5))
endif
if(not J4 and(GetUnitLevel(it)<$E)and((GetUnitState(it,UNIT_STATE_MANA))>290)and(T57(it,1093686861)or(Bz>T34[O5])))then
set J4=(UG7(it,A54,A24,A_4,1093686861)and IssuePointOrderById(it,$D00F7,GetUnitX(m5),GetUnitY(m5)))
endif
if(not J4)then
set J4=(((Bz>T34[64+O5])and UG7(it,A_4,A_4,A54,1093686863)and(IssueImmediateOrderById(it,$D00A4)))or((Bz>T34[16+O5])and UG7(it,A54,A54,A54,1093686874)and(M57(it,$D0219,1093686874,m5)))or(((GetUnitState(it,UNIT_STATE_MANA))>350)and(Bz>T34[112+O5])and UG7(it,A54,A24,A_4,1093686861)and IssuePointOrderById(it,$D00F7,GetUnitX(m5),GetUnitY(m5))))
endif
if((not J4)and((GetUnitState(it,UNIT_STATE_MANA))>120))then
set J4=((Bz>T34[$A0+O5])and(IsUnitInRange(it,m5,106.))and UG7(it,A54,A54,A_4,1093686864)and(IssueImmediateOrderById(it,$D00A6)))or((Bz>T34[48+O5])and UG7(it,A_4,A_4,A24,1093686862)and IssuePointOrderById(it,$D00F8,GetUnitX(m5),GetUnitY(m5)))or((Bz>T34[32+O5])and UG7(it,A24,A24,A24,1093686867)and(U87(it,A_4,A_4,A_4,false))and(IssuePointOrderByIdLoc(it,$D00F9,GetUnitLoc(m5))))
endif
endif
if((GetUnitAbilityLevel(it,1110456408)==0))then
if(not J4 and(Bz>T34[O5])and(Bz>T34[48+O5])and(not T57(it,1093686862))and(GetRandomInt(1,2)==1))then
call UG7(it,A_4,A_4,A24,1093686862)
elseif(not J4 and(GetUnitLevel(it)<$E)and(Bz>T34[O5])and(Bz>T34[112+O5])and(not T57(it,1093686861)))then
call UG7(it,A54,A24,A_4,1093686861)
elseif(not J4 and(GetUnitLevel(it)>=$E)and(Bz>T34[O5])and(Bz>T34[96+O5])and(not T57(it,1093686859))and(GetRandomInt(1,2)==1))then
call UG7(it,A24,A24,A54,1093686859)
elseif(not J4 and(Bz>T34[O5])and(Bz>T34[16+O5])and(not T57(it,1093686874)))then
call UG7(it,A54,A54,A54,1093686874)
endif
set UP=MP7(1500.,it,Condition(function k8))
if((m5!=null and(T07(it)<3))or((GetUnitLevel(it)<5)and(T07(it)<3))or((T07(it)<3)and(UP>1)))then
call U87(it,A_4,A_4,A_4,false)
elseif(m5==null and(not J4)and(GetUnitLevel(it)>5)and(GetUnitAbilityLevel(it,1093808472)>0)and(GetUnitLifePercent(it)>80.)and(T67(it)<3)and(UP<2))then
call U87(it,A24,A24,A24,false)
elseif(m5==null and(not J4)and(GetUnitAbilityLevel(it,1093808471)>0)and(GetUnitLifePercent(it)<58.)and(T17(it)<3))then
call U87(it,A54,A54,A54,false)
endif
if(not J4)then
set m5=null
set m5=MK7(700.,b5,Condition(function SQ7))
set J4=(m5!=null)and(GetUnitCurrentOrder(m5)==$D000F)and UG7(it,A24,A24,A_4,1093686865)and M57(it,$D020A,1093686865,m5)
endif
endif
elseif(i1==1311787088)then
if(not J4)and(Bz>T34[O5])and(GetUnitLevel(it)>=6)then
set LD4=100+GetUnitAbilityLevel(it,1093750089)*$96
set LG4=true
set m5=Ie(bj_mapInitialPlayableArea,Condition(function KXF))
if m5==null then
set LG4=false
if h4[O5]==null then
set m5=MK7(99999.,GetUnitLoc(it),Condition(function k6))
else
set m5=h4[O5]
endif
endif
if((m5!=null))then
if(LG4)or((GetUnitLifePercent(m5)<50. or(GZ[$D0+O5]and h4[O5]!=null)or((Bz-20>T34[O5])and(GetUnitState(it,UNIT_STATE_MANA)>300.))and(not IsUnitIllusion(m5))))then
if ME7(m5)or(YU7(it,m5))then
if WA7(it,m5,500.,.02,1500.)!=null then
set J4=IssuePointOrderByIdLoc(it,$D02B6,DH7)
if J4 then
call NP7(GetHandleId(it),"AI|IBClose",1)
endif
elseif WA7(it,m5,1500.,2.02,99999.)!=null then
set J4=IssuePointOrderByIdLoc(it,$D02B6,DH7)
if J4 then
call NP7(GetHandleId(it),"AI|IBClose",0)
endif
endif
else
set J4=IssuePointOrderById(it,$D02B6,GetUnitX(m5),GetUnitY(m5))
if J4 then
call NP7(GetHandleId(it),"AI|IBClose",2)
endif
endif
endif
if J4 then
call NT7(GetHandleId(it),"AI|IBTgt",m5)
call TriggerSleepAction(.1)
set J4=false
endif
endif
endif
if(m5==null)then
set m5=MK7(800.,b5,Condition(function k6))
endif
if(not J4)and(not IsUnitIllusion(m5)and(IsUnitInRange(it,m5,750.))and((GetUnitState(it,UNIT_STATE_MANA))>(GetUnitState(it,UNIT_STATE_MAX_MANA)/2.5)))then
set J4=(m5!=null)and(M57(it,$D0278,1093750087,m5))
endif
if((not J4)and(not IsUnitIllusion(m5))and(IsUnitInRange(it,m5,1500.))and((GetUnitState(it,UNIT_STATE_MANA))>(GetUnitState(it,UNIT_STATE_MAX_MANA)/2.5))and((GetUnitLevel(it)>$A)or(GetUnitManaPercent(it)>65.)))then
set J4=(m5!=null)and(M57(it,$D0079,1093748819,m5))
endif
if((not J4)and(not IsUnitIllusion(m5))and(IsUnitInRange(it,m5,600.))and(GetUnitManaPercent(it)>30.))then
set J4=(m5!=null)and(M57(it,$D0084,1093748817,it))
endif
if(not J4)then
set J4=(IsUnitType(m5,UNIT_TYPE_HERO))and(M37(it,m5))
endif
elseif(i1==1160786505)then
if(m5==null and(G0[$80+O5]))then
set m5=MK7(1100.,b5,Condition(function k6))
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(GetUnitLifePercent(m5)<60.))then
set J4=(IssuePointOrderById(it,$D02B6,GetUnitX(m5),GetUnitY(m5)))or(IssueTargetOrderById(it,$D00D9,m5))
endif
if((not J4)and(G0[$80+O5])and(Bz>T34[32+O5])and(Bz>T34[16+O5])and(GetUnitLevel(it)>6))then
set J4=(m5!=null)and(GetUnitLevel(it)>3)and((GetUnitLifePercent(it)>75.)or(IsUnitInRange(it,m5,300.)))and(not IsUnitIllusion(m5))and((MP7(800.,m5,Condition(function S37))-MP7(800.,m5,Condition(function SJ7)))<=2)and((MO7(750.,GetUnitLoc(m5),Condition(function S47))==0)or(GetRandomInt(1,2)==1))and(GetUnitState(it,UNIT_STATE_MANA)>300.)and(IssueTargetOrderById(it,$D00D9,m5))
endif
if(not J4 and(m5!=null))then
set J4=(not IsUnitIllusion(m5))and(Bz>T34[O5])and(GetUnitLifePercent(m5)<48.)and(IsUnitInRange(it,m5,200.))and(IssueImmediateOrderById(it,$D022E))
endif
if(not J4 and(m5!=null))then
set UP=MO7(780.,GetUnitLoc(m5),Condition(function S47))
set NZF=MP7(800.,m5,Condition(function S37))
set J4=((Bz>T34[32+O5])and(GetUnitLevel(it)>3)and(IsUnitInRange(it,m5,800.))and((NZF-MP7(800.,m5,Condition(function SJ7)))<=2)and((UP>0)and(NZF<2)or(UP==0)and(NZF<=2))and(IssueTargetOrderById(it,$D00D9,m5)))or((Bz>T34[16+O5])and(GetUnitLevel(it)>3)and(GetUnitState(it,UNIT_STATE_MANA)>$96)and(GetUnitLifePercent(m5)<90.)and(IssuePointOrderById(it,$D02B6,GetUnitX(m5),GetUnitY(m5))))
endif
elseif(i1==1212365106)then
call SetPlayerAbilityAvailable(pl,1093685831,(GetHeroLevel(it)>$D)and(MO7(1200.,b5,Condition(function k6))==0)and(GetUnitManaPercent(it)>70.))
if((m5!=null)and(not IsUnitIllusion(m5))and(((GetHeroLevel(it)>5)and(not IC(O5)))or(MI7(m5,it)))and(not IsUnitInRangeLoc(m5,b5,250.)))then
set J4=(kJ(GetUnitX(m5),GetUnitY(m5)))and((MP7(800.,m5,Condition(function S37))-MP7(800.,m5,Condition(function SJ7)))<=1)and(IssueTargetOrderById(it,$D0278,m5))
endif
if((not J4)and(GetHeroLevel(it)>$E)and(hq[416+O5]>Bz)and(Bz>hq[O5])and(G0[$80+O5]))then
set UP=MO7(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==NG7(not IsUnitAlly(it,Z7[0]))))and((MO7(1000.,b5,Condition(function SJ7))>0)or(NG7(IsUnitAlly(it,Z7[0]))==1)))then
set m5=K3(700.,it,Condition(function k6))
set J4=(m5!=null)and((MP7(I2R($E1+(25*GetUnitAbilityLevel(it,1093685831))),m5,Condition(function k6))>1)or(GetUnitLifePercent(m5)<80.))and(M57(it,$D0079,1093685831,m5))
endif
endif
elseif(i1==1211117617)or(i1==1211122513)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>$A))then
set m5=MK7(800.,b5,Condition(function k6))
endif
set J4=(m5!=null)and(((GetHeroLevel(it)>4)and(not IsUnitInRange(it,m5,300.)))or(M97(m5,it)))and(M57(it,$D02B6,1093744944,m5))
if((not J4)and(m5!=null)and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>$A)and(hq[416+O5]>Bz)and(G0[$80+O5])and(GetUnitAbilityLevel(it,1110454329)==0)and(GetUnitState(it,UNIT_STATE_MANA)>200.))then
set UP=MO7(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==NG7(not IsUnitAlly(it,Z7[0]))))and((MO7(1000.,b5,Condition(function SJ7))>0)or(NG7(IsUnitAlly(it,Z7[0]))==1)))then
set J4=((((Bz>hq[O5])or(GetUnitCurrentOrder(m5)==$D0005))and(IsUnitInRange(it,m5,600.)))or(IsUnitInRange(it,m5,300.)))and((N97(it,$D022E,1093814611))or(MC7(it,ZU[D0]))or(N97(it,$D02B7,1093752648)))
endif
endif
if(GetUnitAbilityLevel(it,1110454329)>0)and(GetUnitLifePercent(it)>70)then
if(h4[O5]==null)then
set LN4=MK7(700.,b5,Condition(function k6))
call WQE(O5,LN4,false,false)
endif
if((GetUnitCurrentOrder(it)==$D0012)and(G0[$80+O5])and(hq[512+O5]>Bz)and(not G0[O5])and(MO7(800.,b5,Condition(function KC))>1))then
call jW(it,$D000F,h8[O5])
endif
endif
elseif(i1==1211117633)then
set J4=(m5!=null)and(GetUnitLifePercent(m5)<60.)and((not IsUnitIllusion(m5))or(GetUnitLifePercent(m5)>35.))and(M57(it,$D0269,1093684045,m5))
if((not J4)and(GetHeroLevel(it)>5)and(Bz>hq[16+O5]))then
set m5=Ie(bj_mapInitialPlayableArea,Condition(function SN7))
set J4=(m5!=null)and(MP7(800.,m5,Condition(function k6))>0)and(IssueImmediateOrderById(it,$D0278))
if((not J4)and(m5!=null)and(IsUnitInRange(it,m5,800.)))then
set J4=(GetUnitLifePercent(m5)<25.)and(not Id(GetPlayerId(GetOwningPlayer(m5))))and(M57(it,$D0080,1093815619,m5))
endif
endif
if((not J4)and(h4[16+O5]!=null))then
if((M87(h4[16+O5]))and(GetUnitAbilityLevel(h4[16+O5],1110455624)>0))then
set J4=M57(it,$D007F,1093684310,h4[16+O5])
call K3F(it,h4[16+O5])
else
set h4[16+O5]=null
endif
endif
if((KE7(it,NF7(it))<1500.)and(eY[O5]==1)and(GetHeroLevel(it)>5)and(IH(pl,Condition(function WY9))<2))then
if(IsUnitAlly(it,Z7[0]))then
if((h8[16+O5]==h7[35])and(G2!=1)and(G4!=1))then
set h8[16+O5]=h7[55]
set h8[O5]=h7[51]
endif
else
if((h8[16+O5]==h7[$9B])and(G1!=2)and(G3!=2))then
set h8[16+O5]=h7[$87]
set h8[O5]=h7[$83]
endif
endif
endif
if((not J4)and(GetHeroLevel(it)>21)and(IH(pl,Condition(function WY9))==0))then
set m5=MK7(600.,b5,Condition(function k8))
set J4=(m5!=null)and(GetUnitState(m5,UNIT_STATE_LIFE)>800.)and(M57(it,$D00A3,1093810260,m5))
endif
elseif(i1==1211117620)then
call SetPlayerAbilityAvailable(pl,1093677382,(GetHeroLevel(it)>$A)and(iy(it))and(GetUnitManaPercent(it)>60.))
call SetPlayerAbilityAvailable(pl,1093677105,(GetUnitManaPercent(it)>70.)and(GetUnitAbilityLevel(it,1110454324)==0))
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>3))then
set m5=MK7(1000.,b5,Condition(function k6))
endif
if(m5!=null)then
if((GetHeroLevel(it)>5)and(not IsUnitIllusion(m5))and(not ke(m5))and(Bz>hq[O5]))then
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
set J4=(UP<KKF(it))and(UP>$96)and(M_7(it,$D0097,1093677392,1093679450,m5))
endif
if((not J4)and((GetUnitManaPercent(it)>40.)or(M97(m5,it))))then
if(((Bz>hq[16+O5])and(GetHeroLevel(it)>3))or(GetUnitLifePercent(m5)<55.))then
set GZ[64+O5]=true
set J4=M27(it,$D0108,1093677623,WC7(it,m5,.95,600.))
set GZ[64+O5]=false
endif
if(not J4)then
set J4=(Bz>hq[16+O5])and(GetHeroLevel(it)>3)and(GetRandomInt(1,2)==1)and(M57(it,$D009D,1093677382,m5))
endif
endif
endif
if((not J4)and(GetHeroLevel(it)>$F)and(hq[416+O5]>Bz)and(Bz>hq[O5])and(G0[$80+O5]))then
set UP=MO7(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==NG7(not IsUnitAlly(it,Z7[0]))))and((MO7(1000.,b5,Condition(function SJ7))>0)or(NG7(IsUnitAlly(it,Z7[0]))==1)))then
if(m5==null)then
set m5=K3(700.,it,Condition(function k6))
endif
if(m5!=null)then
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
set J4=(GetUnitLifePercent(m5)<60.)and(UP<$640)and(UP>500)and(not ke(m5))and(M_7(it,$D0097,1093677392,1093679450,m5))
endif
endif
endif
elseif(i1==1432580716 or i1==1429221720)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>5)and(GetUnitManaPercent(it)>60.))then
set m5=MK7(600.,b5,Condition(function k6))
endif
if((G0[$80+O5])and(MR7(it,ZU[RW]))and(GetHeroLevel(it)>8)and(m5!=null)and(not IsUnitIllusion(m5))and(Bz>hq[O5])and(not IsUnitInRange(it,m5,250.))and(IsUnitInRange(it,m5,600.)))then
set J4=((MP7(800.,m5,Condition(function S37))-MP7(800.,m5,Condition(function SJ7)))<=1)and(KVF(it,m5))
endif
call SetPlayerAbilityAvailable(pl,1093684300,(GetHeroLevel(it)>9)and(GetUnitManaPercent(it)>60.))
if(not J4)then
set J4=(m5!=null)and((M97(m5,it))or((GetHeroLevel(it)>7)and(GetUnitState(it,UNIT_STATE_MANA)>350.)and(Bz>hq[O5])and(IsUnitInRange(it,m5,220.))))and(M57(it,$D0079,1093684300,m5))
endif
elseif(i1==1333027688)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>4)and(GetUnitManaPercent(it)>60.))then
set m5=MK7(1000.,b5,Condition(function k6))
endif
if(m5!=null)then
if((G0[$80+O5])and(MR7(it,ZU[RW]))and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>$A)and(Bz>hq[O5])and(MP7(500.,m5,Condition(function k8))>5))then
set J4=KVF(it,m5)
endif
if((not J4)and(Bz>hq[O5])and(IsUnitInRange(it,m5,400.))and(GetUnitState(m5,UNIT_STATE_LIFE)>180.))then
set UP=MBF(it)
if((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<UP)or((UP>100)and((R2I(GetUnitState(m5,UNIT_STATE_LIFE))-UP)<GetHeroLevel(it)*30)))then
set J4=N97(it,$D022E,1093682248)or(N97(it,$D022E,1093750594))
endif
endif
if((not J4)and(GetUnitCurrentOrder(m5)==$D0012)and(GetUnitLifePercent(m5)<50.))then
set J4=M57(it,$D0278,1093686091,m5)
endif
if((not J4)and(GetHeroLevel(it)>3))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(h8[16+O5])-GetUnitY(m5),GetUnitX(h8[16+O5])-GetUnitX(m5)))
call SetPlayerAbilityAvailable(pl,1093686091,true)
set J4=IssuePointOrderById(it,$D0278,GetUnitX(m5)+50.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+50.*Sin(UP*bj_DEGTORAD))
endif
endif
set m5=MN7(400.,b5,Condition(function k6))
if((not J4)and(Bz>hq[O5])and(m5!=null))then
set hr=it
set UP=MO7(500.,b5,Condition(function MAF))
set J4=(((UP>3)and(MO7(400.,b5,Condition(function k6))>1))or((UP>4)and(GetUnitLifePercent(m5)<60.)))and((N97(it,$D022E,1093682248))or(N97(it,$D022E,1093750594)))
endif
if(not J4)then
call SetPlayerAbilityAvailable(pl,1093686091,(GetHeroLevel(it)>5)and(GetUnitManaPercent(it)>70.))
set J4=(GetHeroLevel(it)>$A)and(Bz>hq[O5])and(MO7(500.,b5,Condition(function KA))>8)and((N97(it,$D022E,1093682248))or(N97(it,$D022E,1093750594)))
endif
elseif(i1==1311781185)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>3))then
set m5=MK7(800.,b5,Condition(function k6))
endif
if(m5!=null)then
set J4=((GetHeroLevel(it)>$F)and((M97(m5,it))or(GetUnitManaPercent(m5)<35.)or(GetUnitAbilityLevel(m5,1110454607)>0))and(IssueTargetOrderById(it,$D02B6,m5)))or((m5!=null)and(not IsUnitInRange(it,m5,550.))and(GetUnitManaPercent(it)>60.)and(GetRandomInt(1,3)==1)and(GetHeroLevel(it)>3)and(M57(it,$D011E,1093684314,m5)))
endif
if(not J4)and(m5!=null)and((h4[O5]!=null)or(GetUnitManaPercent(it)>70))then
set J4=M57(it,$D0079,1093743692,m5)
endif
if(not J4)then
if h4[O5]!=null and IsUnitInRange(h4[O5],it,850)and GetUnitLifePercent(h4[O5])<GetUnitLifePercent(m5)or GetUnitManaPercent(h4[O5])<GetUnitManaPercent(m5)then
set m5=h4[O5]
endif
if m5==null then
set G=1
set m5=S27(900,it,Condition(function SP7))
endif
set G=5
set RL7=S27(900,it,Condition(function SP7))
set m5=JD7((m5!=null)and(((GetHeroLevel(m5)>$B and GetHeroLevel(m5)>GetHeroLevel(RL7))or GetUnitManaPercent(RL7)<30.)or RL7==null),m5,RL7)
if m5==null then
set m5=JD7(GetUnitManaPercent(it)>40.or GetUnitState(it,UNIT_STATE_MANA)>700.,S27(700,it,Condition(function k6)),null)
endif
set J4=(m5!=null)and(G0[$80+O5]and(GetUnitLifePercent(m5)<=50)or GetUnitManaPercent(it)>50.)and IssueTargetOrderById(it,$D007F,m5)
if h4[O5]==null then
set h4[O5]=m5
endif
endif
if((not J4)and(GetHeroLevel(it)>5)and(Bz>hq[O5]))then
set m5=Ie(bj_mapInitialPlayableArea,Condition(function SN7))
set J4=(m5!=null)and(MP7(700.,m5,Condition(function k6))>0)and(IssueImmediateOrderById(it,$D0278))
endif
elseif(i1==1211117643)then
if m5==null then
set m5=S07(700.,it)
endif
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(not IsUnitIllusion(m5))and(IsUnitInRange(it,m5,400.))and(GetUnitAbilityLevel(m5,1113815395)==0)and(GetUnitAbilityLevel(m5,1113815346)==0)and((GetUnitLifePercent(it)<50.)or(GetHeroLevel(it)<8))and(R2I(GetUnitState(m5,UNIT_STATE_LIFE))<(300+(120*GetUnitAbilityLevel(it,1093678658)))))then
set J4=M57(it,$D0048,1093678658,m5)
endif
if(not J4)and(is(it))then
if(h4[O5]!=null)then
if(not J4)and(Bz>T34[O5])then
set J4=M_7(it,$D0218,1093681483,1093748313,m5)
endif
if(not J4)and(Bz>T34[32+O5])and(MP7(600.,it,Condition(function SS7))==0)then
set J4=M57(it,$D0092,1093678664,it)
endif
if(not J4)then
set LD4=Atan2(GetUnitY(it)-GetUnitY(m5),GetUnitX(it)-GetUnitX(m5))
call MoveLocation(HA,GetUnitX(m5)+Cos(LD4)*$C8,GetUnitY(m5)+Sin(LD4)*$C8)
if(not J4)and(Bz>T34[16+O5])and(GetUnitLifePercent(it)>60.)then
set J4=M27(it,$D0136,1093678410,HA)
endif
if(not J4)and(Bz>T34[32+O5])and(GetUnitLifePercent(it)>60.)and(MP7(600.,m5,Condition(function SS7))==0)then
set J4=M27(it,$D0092,1093678664,HA)
endif
endif
elseif(eY[O5]==1 or eY[O5]==3 or eY[O5]==4)then
if((not J4)and(is(it))and(eY[O5]==1)and((MO7(400.,b5,Condition(function Ka))>1)or((h4[$80+O5]!=null)and(M87(h4[$80+O5]))and(IsUnitInRange(it,h4[$80+O5],400.)))))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(h9[O5])-GetUnitY(it),GetUnitX(h9[O5])-GetUnitX(it)))
call IssuePointOrderById(it,$D0012,GetUnitX(it)+350.*Cos(UP*bj_DEGTORAD),GetUnitY(it)+350.*Sin(UP*bj_DEGTORAD))
endif
if((not J4)and(is(it))and(not Q77(it))and(MO7(1200.,b5,Condition(function S47))==0)and(not M47(it)))then
set UP=GetUnitUserData(h8[32+O5])
set LD4=300
if((eY[O5]==3)or(eY[O5]==4))and(h8[64+O5]!=null)then
set h9[48+O5]=h8[64+O5]
if MP7(600.,it,Condition(function k6))>0 or MP7(600.,h9[48+O5],Condition(function k6))>0 then
set LD4=-1
endif
elseif(h9[48+O5]==null)or(not IsUnitInRange(it,h9[48+O5],1800.))then
set LG4=IsUnitAlly(it,Z7[O5])
set UP=B_E(GetUnitUserData(h8[80+O5]),(not LG4),0)
if UP==35 then
set UP=351
elseif UP==55 then
set UP=352
endif
if UP!=0 and(MP7(900.,h7[UP],Condition(function S47))==0)and((LG4 and(not IsVisibleToPlayer(GetUnitX(h7[UP]),GetUnitY(h7[UP]),A7[0])))or((not LG4)and(not IsVisibleToPlayer(GetUnitX(h7[UP]),GetUnitY(h7[UP]),Z7[0]))))then
set h9[48+O5]=h7[UP]
endif
endif
if LD4!=-1 then
if(not J4)and(h9[48+O5]!=null)and(Bz>T34[16+O5])and(GetUnitState(it,UNIT_STATE_MANA)>XKE(it,1093678410,4)+XKE(it,1093678658,4))then
call MoveLocation(HA,GetUnitX(h9[48+O5])+GetRandomReal(-LD4,LD4),GetUnitY(h9[48+O5])+GetRandomReal(-LD4,LD4))
set J4=(M27(it,$D0136,1093678410,HA))
endif
set bj_lastLoadedUnit=it
if(not J4)and(h9[48+O5]!=null)and(Bz>T34[32+O5])and(GetUnitState(it,UNIT_STATE_MANA)>XKE(it,1093678664,4)+XKE(it,1093678658,4))and(MP7(600.,h9[48+O5],Condition(function SS7))==0)then
call MoveLocation(HA,GetUnitX(h9[48+O5])+GetRandomReal(-100.,100.),GetUnitY(h9[48+O5])+GetRandomReal(-100.,100.))
set J4=(M27(it,$D0092,1093678664,HA))
endif
if((not J4)and(GetHeroLevel(it)>5)and(Bz>T34[O5]))then
set m5=MK7(1800.,b5,Condition(function SR7))
set bj_forLoopAIndex=(MP7(600.,m5,Condition(function KG)))
if((m5!=null)and(not YU8(m5))and(bj_forLoopAIndex<4))then
set UP=R2I(KMF(m5))
set GZ[272+O5]=false
if(bj_forLoopAIndex>0)then
set hq[$F0+O5]=Bz+5.
else
set hq[$F0+O5]=.0
endif
set J4=N47(it,$D0218,1093681483,1093748313,GetUnitX(m5)+GetRandomReal(400.,450.)*Cos(UP*bj_DEGTORAD)+GetRandomReal(-300.,300.),GetUnitY(m5)+GetRandomReal(400.,450.)*Sin(UP*bj_DEGTORAD)+GetRandomReal(-300.,300.))
endif
set bj_forLoopAIndex=(MP7(600.,h8[64+O5],Condition(function KG)))
if((not J4)and((eY[O5]==3)or(eY[O5]==4))and(h8[64+O5]!=null)and(IsUnitInRange(it,h8[64+O5],900.))and(bj_forLoopAIndex<6))then
set GZ[272+O5]=false
if(bj_forLoopAIndex>0)then
set hq[$F0+O5]=Bz+5.
else
set hq[$F0+O5]=.0
endif
set J4=N47(it,$D0218,1093681483,1093748313,GetUnitX(h8[64+O5])+GetRandomReal(-300,300),GetUnitY(h8[64+O5])+GetRandomReal(-300.,300.))
endif
if(not J4)then
set GZ[272+O5]=true
set m5=MK7(1800.,b5,Condition(function KG))
set bj_forLoopAIndex=(MP7(600.,h9[48+O5],Condition(function KG)))
if(m5!=null)then
set hq[$F0+O5]=Bz+5.
set J4=N47(it,$D0218,1093681483,1093748313,GetUnitX(m5)+GetRandomReal(-100.,100.),GetUnitY(m5)+GetRandomReal(-100.,100.))
elseif(h9[48+O5]!=null)and(GetUnitState(it,UNIT_STATE_MANA)>XKE(it,1093681483,4)+XKE(it,1093748313,4)+XKE(it,1093678658,4))and(bj_forLoopAIndex<8)then
set hq[$F0+O5]=Bz+5.
set J4=(N47(it,$D0218,1093681483,1093748313,GetUnitX(h9[48+O5])+GetRandomReal(-LD4,LD4),GetUnitY(h9[48+O5])+GetRandomReal(-LD4,LD4)))
endif
endif
endif
endif
endif
if((not J4)and(Bz>T34[O5])and(G0[256+O5])and(GetUnitManaPercent(it)>50.))then
set m5=MK7(700.,b5,Condition(function k8))
set J4=(m5!=null)and(not IsUnitType(m5,UNIT_TYPE_HERO))and(MP7(400.,m5,Condition(function k8))>2)and(M_7(it,$D0218,1093681483,1093748313,m5))
endif
if((not J4)and(Bz>T34[16+O5])and(G0[256+O5])and(GetUnitAbilityLevel(it,1093678410)>1)and(GetUnitManaPercent(it)>50.))then
set m5=MK7(700.,b5,Condition(function Q_7))
set J4=(m5!=null)and(MP7(500.,m5,Condition(function Q_7))>2)and(M27(it,$D0136,1093678410,M07(m5)))
endif
endif
endif
elseif(i1==1215657064)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>$A))then
set m5=MK7(800.,b5,Condition(function k6))
endif
call SetPlayerAbilityAvailable(pl,1093677913,(GetHeroLevel(it)>$E)and(MO7(1500.,b5,Condition(function k6))==0)and(GetUnitManaPercent(it)>75.))
call SetPlayerAbilityAvailable(pl,1093750841,false)
if(m5!=null)then
set UP=R2I(KF7(GetUnitX(it),GetUnitY(it),GetUnitX(m5),GetUnitY(m5)))
endif
if((G0[$80+O5])and(MR7(it,ZU[RW]))and(m5!=null)and(not IsUnitIllusion(m5))and(Bz>hq[O5]))then
set J4=(GetHeroLevel(it)>5)and(UP>$FA)and(UP<700)and((MP7(800.,m5,Condition(function S37))-MP7(800.,m5,Condition(function SJ7)))<=1)and(KVF(it,m5))
endif
call SetPlayerAbilityAvailable(pl,1093684291,(GetUnitAbilityLevel(it,1110454856)>0)or(m5!=null))
if((not J4)and(m5!=null)and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>5))then
set J4=((UP<300)and(GetUnitAbilityLevel(it,1110454856)==0)and(N97(it,$D0084,1093684291)))or((UP<$C8)and(N97(it,$D0278,1093750841)))or((UP<280)and(N97(it,$D0080,1093677913)))
endif
elseif(i1==1332179560)then
set J4=(m5!=null)and((GetUnitLifePercent(m5)<50.)or(i2(m5)))and(M57(it,$D02B6,1093742660,m5))
if((not J4)and(GetUnitManaPercent(it)>70.)and(GetHeroLevel(it)>4)and(MO7(800.,b5,Condition(function SR7))>0))then
if((m5==null)or(not IsUnitInRange(it,m5,800.)))then
set m5=MK7(800.,b5,Condition(function k6))
endif
set J4=(m5!=null)and(M57(it,$D02B6,1093742660,m5))
endif
elseif(i1==1214344551)then
if((m5!=null)and(not IsUnitIllusion(m5))and(GetUnitLifePercent(m5)<70.)and(MO7(700.,b5,Condition(function k6))>1)and(MO7(700.,b5,Condition(function SJ7))>0))then
set J4=IssueImmediateOrderById(it,$D0278)
endif
if(m5!=null)then
set J4=M57(it,$D007F,1093809742,m5)
endif
if(not J4)then
set m5=S_7(99999,it)
set RL7=S27(99999,it,Condition(function AI7))
set m5=JD7(((m5!=null and GetUnitLifePercent(m5)<=45.)or(RL7==null and m5!=null and GetUnitLifePercent(m5)<=70)),m5,RL7)
set J4=((m5!=null)and IssueTargetOrderById(it,$D0118,m5))
endif
if((not J4)and(GetUnitManaPercent(it)>50.)and(GetHeroLevel(it)>2))then
set m5=MK7(1500.,b5,Condition(function SR7))
if((not J4)and(m5!=null)and(GetUnitLifePercent(m5)<40.)and(GetUnitCurrentOrder(m5)==$D0012))then
set J4=(K6(m5))and(IssueTargetOrderById(it,$D0065,m5))
endif
endif
if((not J4)and(GetHeroLevel(it)>$A)and(hq[416+O5]>Bz)and(Bz>hq[O5])and(G0[$80+O5]))then
set UP=MO7(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==NG7(not IsUnitAlly(it,Z7[0]))))and(MO7(1000.,b5,Condition(function SJ7))>0))then
set m5=MN7(500.,b5,Condition(function k6))
if(m5!=null)and(GetUnitLifePercent(m5)<70.)then
set UP=MO7(700.,b5,Condition(function k6))
set J4=((UP>1)or(UP==NG7(not IsUnitAlly(it,Z7[0]))))and(IssueImmediateOrderById(it,$D0278))
endif
endif
endif
elseif((i1==1311781199)or(i1==1311781171)or(i1==1311781172)or(i1==1311781173))then
if((GetHeroLevel(it)>$F)and(GetUnitTypeId(it)==1311781199)and(GetUnitAbilityLevel(it,1093681479)>2)and(KE7(it,NF7(it))<2000.))then
set J4=N97(it,$D00AA,1093681479)
endif
if((GetUnitTypeId(it)==1311781199)and(GetUnitAbilityLevel(it,1093681479)>1))then
set J4=N97(it,$D00AA,1093681479)
endif
if((MO7(700.,b5,Condition(function Q07))==0)and(((GetUnitTypeId(it)==1311781171)and(GetUnitAbilityLevel(it,1093681479)>1))or((GetUnitTypeId(it)==1311781172)and(GetUnitAbilityLevel(it,1093681479)>2))))then
set J4=N97(it,$D00AB,1093681479)
endif
set m5=O77(GetHandleId(pl),"MyBear")
if((m5==null)or(not M87(m5))or(GetUnitLifePercent(m5)<20 and Bz>T34[16+O5]))then
set J4=IssueImmediateOrderById(it,$D0272)
endif
if((not J4)and(IsUnitInRange(it,m5,600.))and(GetUnitAbilityLevel(m5,1110454582)==0)and((h4[O5]!=null)or((GetUnitManaPercent(it)>50.)and(MO7(700.,b5,Condition(function KA))>0))))then
set J4=IssueImmediateOrderById(it,$D022E)
endif
if((not J4)and(GetUnitAbilityLevel(it,1110454582)==0)and((h4[O5]!=null)or((GetUnitManaPercent(it)>30.)and(MO7(700.,b5,Condition(function KA))>0))))then
set J4=IssueImmediateOrderById(it,$D022E)
endif
if(MO7(700.,b5,Condition(function SR7))>0)then
set hq[$F0+O5]=Bz+4.
endif
if((not J4)and(GetUnitTypeId(it)!=1311781199)and(m5!=null)and(IsUnitInRange(it,m5,600.))and(hq[416+O5]>Bz))then
set J4=IssueImmediateOrderById(it,$D0277)
endif
elseif(i1==1215130471)then
call SetPlayerAbilityAvailable(pl,QI7(it),(GetHeroLevel(it)>4)and(GetUnitManaPercent(it)>40.))
call SetPlayerAbilityAvailable(pl,QJ7(it),(GetHeroLevel(it)>$C)and(GetUnitManaPercent(it)>70.))
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>2))then
set m5=MK7(1000.,b5,Condition(function k6))
endif
set J4=(m5!=null)and(((((GetUnitManaPercent(it)>40.)and(GetHeroLevel(it)>2))or(M97(m5,it)))and(M57(it,$D007F,QI7(it),m5)))or((M97(m5,it))and(M57(it,$D02B6,QJ7(it),m5))))
if((not J4)and(GetUnitManaPercent(it)>70.)and(GetHeroLevel(it)>$C))then
set J4=(MO7(700.,b5,Condition(function k6))==0)and(MO7(700.,b5,Condition(function k8))>0)and(GetUnitAbilityLevel(it,1113746543)==0)and(M57(it,$D0085,QK7(it),it))
if(not J4)then
set m5=MK7(700.,b5,Condition(function SJ7))
set J4=(m5!=null)and(kq(GetUnitTypeId(m5)))and(MO7(700.,b5,Condition(function KA))>0)and(GetUnitAbilityLevel(m5,1113746543)==0)and(M57(it,$D0085,QK7(it),m5))
endif
endif
if(not J4)and(m5!=null)and((h4[O5]!=null)or(GetUnitLifePercent(m5)<60))then
set J4=(OO7(GetHandleId(it),"AI|Magi2Blast")and M57(it,$D0278,1093815121,m5))
endif
elseif(i1==1211117636)then
set UP=GetHeroLevel(it)
if(UP>7)then
call SetPlayerAbilityAvailable(pl,1093685041,(m5==null)and(GetUnitManaPercent(it)>50.))
else
call SetPlayerAbilityAvailable(pl,1093685041,false)
endif
if((h4[16+O5]!=null)and(not M87(h4[16+O5])))then
set h4[16+O5]=null
endif
call SetPlayerAbilityAvailable(pl,1093685071,(UP>9)and(h4[16+O5]==null)and(GetUnitManaPercent(it)>60.))
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>4)and(GetUnitManaPercent(it)>70.))then
set m5=MK7(800.,b5,Condition(function k6))
endif
if((m5!=null)and(UP>2)and(GetUnitManaPercent(it)>30.)and(not IsUnitInRange(it,m5,250.))and(IsUnitInRange(it,m5,900.)))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(it),GetUnitX(m5)-GetUnitX(it)))
call SetPlayerAbilityAvailable(pl,1093685041,true)
set GZ[O5]=true
set J4=J8(O5,IssuePointOrderById(it,$D00FA,GetUnitX(it)+1100.*Cos(UP*bj_DEGTORAD),GetUnitY(it)+1100.*Sin(UP*bj_DEGTORAD)))
endif
if((not J4)and(m5!=null)and(GetHeroLevel(it)>$A)and(hq[416+O5]>Bz)and(Bz>hq[O5])and(G0[$80+O5]))then
set UP=MO7(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==NG7(not IsUnitAlly(it,Z7[0]))))and(MO7(1000.,b5,Condition(function SJ7))>0))then
set J4=(GetUnitLifePercent(m5)<75.)and(M_7(it,$D007F,1093685042,1093810233,m5))
endif
endif
elseif(i1==1160786000)then
call SetPlayerAbilityAvailable(pl,1093685047,(GetHeroLevel(it)>9)and(GetUnitManaPercent(it)>70.))
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>3)and(GetUnitManaPercent(it)>70.))then
set m5=MK7(700.,b5,Condition(function k6))
endif
set J4=(m5!=null)and(GetHeroLevel(it)>3)and((GetUnitManaPercent(it)>40.)or(M97(m5,it)))and(M57(it,$D00FA,1093685047,m5))
if((not J4)and(m5!=null)and(GetHeroLevel(it)>5))then
set J4=(Kz(700.,M07(m5))>1)and((Bz>hq[O5])or(MP7(700.,m5,Condition(function SI7))>0))and(M57(it,$D009D,1093685045,m5))
endif
elseif((i1==1311781193)or(i1==1311781192)or(i1==1311781204)or(i1==1311781194))then
if(i1==1311781193)then
set J4=(((GetHeroLevel(it)>=6)and(h4[O5]!=null))or((GetHeroLevel(it)>$A)and(GetUnitLifePercent(it)<80.)and(MO7(700.,b5,Condition(function k8))>0)))and(IssueImmediateOrderById(it,$D02B7))
elseif((m5==null)and(G0[$80+O5])and(i1!=1311781193))then
set m5=MK7(700.,b5,Condition(function k6))
call WQE(O5,m5,false,false)
endif
if((not J4)and(G0[$80+O5])and(eY[320+O5]>=-1)and(h4[O5]!=null or GetUnitManaPercent(it)>70)and(GetUnitAbilityLevel(it,1093750345)>1))then
if m5==null then
if((eY[O5]==9)and(h4[$90+O5]!=null)and(M87(h4[$90+O5]))and(IsUnitInRange(it,h4[$90+O5],1000.))and(not IsUnitVisible(it,GetOwningPlayer(h4[$90+O5])))and(IsUnitVisible(h4[$90+O5],GetOwningPlayer(it))))then
set m5=h4[$90+O5]
else
set m5=MK7(800.,b5,Condition(function k6))
endif
endif
set J4=(m5!=null)and(IsUnitInRange(it,m5,300))and(IssueImmediateOrderById(it,$D022E))
endif
if((not J4)and(m5!=null)and(GetHeroLevel(it)>5))then
set J4=(MP7(700.,m5,Condition(function k6))>1)and(MP7(700.,m5,Condition(function SI7))>0)and(M57(it,$D0079,1093683532,m5))
endif
if((not J4)and(GetHeroLevel(it)>$B)and(GetUnitManaPercent(it)>55.)and(MO7(500.,b5,Condition(function KA))>2)and(Bz>hq[O5]))then
call SetPlayerAbilityAvailable(pl,1093683532,true)
set J4=IssuePointOrderById(it,$D0079,GetUnitX(it)+GetRandomReal(0,200.)-100.,GetUnitY(it)+GetRandomReal(0,200.)-100.)
else
call SetPlayerAbilityAvailable(pl,1093683532,(GetHeroLevel(it)>$B)and(GetUnitManaPercent(it)>50.))
endif
elseif(i1==1311781206)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>4))then
if((eY[O5]==9)and(h4[$90+O5]!=null)and(M87(h4[$90+O5]))and(IsUnitInRange(it,h4[$90+O5],1200.))and(not IsUnitVisible(it,GetOwningPlayer(h4[$90+O5]))))then
set m5=h4[$90+O5]
else
set m5=MK7(800.,b5,Condition(function k6))
endif
endif
if((m5!=null)and(GetHeroLevel(it)>4))then
if(not IsUnitInRange(it,m5,800.))then
set J4=((eY[O5]==9)or(not IsUnitVisible(it,GetOwningPlayer(m5))))and(WME(it,m5))
elseif(not IsUnitInRange(it,m5,300.))then
set UP=R2I(RAbsBJ((bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(it),GetUnitX(m5)-GetUnitX(it)))-GetUnitFacing(it)))
set J4=((GetUnitLifePercent(m5)<60.)or(MP7(600.,m5,Condition(function SI7))>0))and((WME(it,m5))or((Bz>hq[O5])and(UP<50)and(GetUnitState(it,UNIT_STATE_MANA)>230.)and(D4F(it,true))))
elseif(GetUnitLifePercent(m5)<40. and IsUnitInRange(it,m5,300.))then
set J4=WME(it,m5)
endif
if(not J4)and((GetUnitManaPercent(it)>50.)or(GetUnitLifePercent(m5)<60.))then
set J4=IssueImmediateOrderById(it,$D0278)
endif
endif
if((not J4)and(GetHeroLevel(it)>5)and(Bz>hq[16+O5]))then
set bj_lastLoadedUnit=m5
set m5=Ie(bj_mapInitialPlayableArea,Condition(function SN7))
set J4=(m5!=null)and(MP7(800.,m5,Condition(function k6))>0)and(IssueImmediateOrderById(it,$D020D))
set m5=bj_lastLoadedUnit
endif
if(not J4)and(Bz>T34[32+O5])and(h4[O5]==null)and(GetUnitAbilityLevel(it,1093684280)>1)and(GetUnitState(it,UNIT_STATE_MANA)>=230.)then
if((not J4)and(m5!=null)and(not IsUnitInRange(it,m5,450.))and(iU(it))and(G0[$80+O5])and(not G0[48+O5])and(MO7(400.,b5,Condition(function k8))==0))then
set UP=R2I(KF7(GetUnitX(it),GetUnitY(it),GetUnitX(m5),GetUnitY(m5)))
if(GetRandomInt(1,2)==1)then
set i1=R2I(bj_RADTODEG*Atan2(GetUnitY(it)-GetUnitY(m5),GetUnitX(it)-GetUnitX(m5)))-25
else
set i1=R2I(bj_RADTODEG*Atan2(GetUnitY(it)-GetUnitY(m5),GetUnitX(it)-GetUnitX(m5)))+25
endif
set J4=IssuePointOrderById(it,$D0012,GetUnitX(m5)+UP*Cos(i1*bj_DEGTORAD),GetUnitY(m5)+UP*Sin(i1*bj_DEGTORAD))
endif
endif
elseif(i1==1211117651)then
if m5==null then
set m5=S07(450.,it)
if m5==null then
set m5=S07(1000.,it)
endif
endif
if OT7(it,"OverloadActive")then
if(h4[O5]!=null)and(GetUnitLevel(it)>5)and(not IsUnitInRange(it,h4[O5],450.))and(M97(m5,it))then
call WA7(it,m5,625*(GetUnitAbilityLevel(it,1093743695)+1),1.,99999)
if DH7!=null then
set J4=M27(it,$D00FA,1093743695,DH7)
endif
endif
if(not J4)then
set J4=IssueTargetOrderById(it,$D000F,m5)
endif
elseif m5!=null and(GetUnitLevel(it)>3)then
if(not J4)and((h4[O5]!=null)or(GetUnitState(it,UNIT_STATE_MANA)>200.))and((IsUnitInRange(it,m5,300.)or G0[256+O5]))then
set J4=(M57(it,$D0097,1093743698,m5))
endif
if(not J4)and(IsUnitInRange(it,m5,200.))then
set J4=(N97(it,$D022E,1093743696))
endif
if(not J4)and(h4[O5]!=null)then
if(not IsUnitInRange(it,h4[O5],450.))and((M97(m5,it))or(G0[256+O5]))then
call WA7(it,m5,625*(GetUnitAbilityLevel(it,1093743695)+1),1.,99999)
if DH7!=null then
set J4=M27(it,$D00FA,1093743695,DH7)
endif
elseif GetUnitState(it,UNIT_STATE_MANA)>300. then
set LD4=Atan2(GetUnitY(m5)-GetUnitY(it),GetUnitX(m5)-GetUnitX(it))
call MoveLocation(HB,GetUnitX(it)+$96*Cos(LD4),GetUnitY(it)+$96*Sin(LD4))
set J4=M27(it,$D00FA,1093743695,HB)
endif
endif
if(not J4)then
if MP7(200.,it,Condition(function Q_7))>2 and(GetUnitState(it,UNIT_STATE_MANA)>500. or GetUnitManaPercent(it)>90.)then
set J4=(N97(it,$D022E,1093743696))
endif
endif
endif
elseif(i1==1211117649)then
if(GetHeroLevel(it)>6)then
set m5=K3(700.,it,Condition(function k6))
set J4=(m5!=null)and((GetUnitState(it,UNIT_STATE_LIFE)*.5)>GetUnitState(m5,UNIT_STATE_LIFE))and(IssueTargetOrderById(it,$D0107,m5))
endif
if(not J4)then
set m5=MK7(800.,b5,Condition(function SN7))
if(m5==null)then
set m5=MK7(600.,b5,Condition(function SI7))
endif
set J4=((m5!=null)and(GetUnitLifePercent(m5)<70.)and((GetHeroLevel(it)>4)or(M97(m5,it)))and(IssueTargetOrderById(it,$D007F,m5)))or((GetUnitLifePercent(it)<70.)and(IssueTargetOrderById(it,$D007F,it)))
endif
elseif(i1==1160786265)then
call SetPlayerAbilityAvailable(pl,1093685844,false)
call SetPlayerAbilityAvailable(pl,1093685846,false)
set J4=(m5!=null)and(IsUnitInRange(it,m5,$91+(40*GetUnitAbilityLevel(it,1093685839))))and(N97(it,$D00A1,1093685846))
if((not J4)and(GetHeroLevel(it)>5)and(MO7(900.,b5,Condition(function S47))==0))then
set J4=(GetRandomInt(1,3)==1)and(GetUnitManaPercent(it)>60.)and(MO7(800.,b5,Condition(function k8))>2)and(MO7(800.,b5,Condition(function Kh))==0)and(not Q77(it))and(IssuePointOrderById(it,$D00DE,GetUnitX(it)+GetRandomReal(-100.,100.),GetUnitY(it)+GetRandomReal(-100.,100.)))
if((not J4)and(m5!=null)and(GetUnitAbilityLevel(m5,1110456397)==0))then
set J4=((GetUnitManaPercent(it)>60.)or(GetUnitLifePercent(m5)<70.))and(MP7(600.,m5,Condition(function Kh))==0)and(IssuePointOrderById(it,$D00DE,GetUnitX(m5)+GetRandomReal(-100.,100.),GetUnitY(m5)+GetRandomReal(-100.,100.)))
endif
endif
elseif(i1==1311780930)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>3)and(GetUnitManaPercent(it)>70.))then
set m5=MK7(1100.,b5,Condition(function k6))
endif
if((m5!=null)and(((GetHeroLevel(it)>3)and(GetUnitManaPercent(it)>50.))or(GetUnitLifePercent(m5)<60.)))then
set J4=IssuePointOrderById(it,$D02B6,GetUnitX(m5)+150.*Cos(GetUnitFacing(m5)*bj_DEGTORAD),GetUnitY(m5)+150.*Sin(GetUnitFacing(m5)*bj_DEGTORAD))
if((GetUnitLifePercent(it)>70.)and((Bz>hq[16+O5])or(MI7(m5,it)))and(G0[$80+O5])and(GetUnitLifePercent(m5)<60.)and(GetUnitState(it,UNIT_STATE_LIFE)>(GetUnitState(m5,UNIT_STATE_LIFE)+(15.*GetHeroLevel(m5))))and((MP7(800.,m5,Condition(function S37))-MP7(800.,m5,Condition(function SJ7)))<=1))then
set h4[16+O5]=m5
else
set h4[16+O5]=null
endif
set hq[$F0+O5]=Bz+3.
endif
if((not J4)and(m5!=null)and(GetUnitLifePercent(m5)<60.)and(IsUnitInRange(it,m5,700.)))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(NF7(m5)),GetUnitX(m5)-GetUnitX(NF7(m5))))
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093686072,true)
set GZ[O5]=true
call J8(O5,IssuePointOrderById(it,$D0079,GetUnitX(m5)+250.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+250.*Sin(UP*bj_DEGTORAD)))
endif
if(not J4)then
set m5=K3(400.,it,Condition(function k6))
set J4=(m5!=null)and(IssueImmediateOrderById(it,$D0278))
endif
if((not J4)and(GetHeroLevel(it)>$D)and(hq[416+O5]>Bz)and(Bz>hq[O5])and(G0[$80+O5]))then
set UP=MO7(1000.,b5,Condition(function k6))
if((UP>1)and((MO7(1000.,b5,Condition(function SJ7))>0)or(NG7(IsUnitAlly(it,Z7[0]))==1)))then
set m5=MK7(800.,b5,Condition(function k6))
if(MP7(375.,m5,Condition(function k6))>0)then
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093686072,true)
set GZ[O5]=true
call J8(O5,IssuePointOrderById(it,$D0079,GetUnitX(m5),GetUnitY(m5)))
endif
endif
endif
elseif(i1==1311786311)then
if m5==null then
set m5=MK7(700.,b5,Condition(function k6))
endif
if(not J4)and(m5!=null)and(Bz>T34[16+O5])and((GetUnitLifePercent(m5)<60)or(h4[O5]!=null))then
set LD4=Atan2(GetUnitY(m5)-GetUnitY(it),GetUnitX(m5)-GetUnitX(it))
if(BX7(it,m5,LD4)!=null)or(BT7(it,m5,LD4)!=null)then
set J4=M57(it,$D0097,1093743178,m5)
if J4 then
call WQE(O5,m5,false,false)
endif
endif
if(not J4)and(not WW7(it,m5,GetUnitX(m5),GetUnitY(m5),64,Condition(function AY7)))and(IsUnitInRange(it,bj_lastLoadedUnit,550.))then
set J4=M57(it,$D0097,1093743178,bj_lastLoadedUnit)
if J4 then
call WQE(O5,m5,false,false)
endif
endif
if(not J4)and(h4[O5]!=null)and(GetUnitLifePercent(m5)<20.)then
set J4=M57(it,$D0097,1093743178,m5)
endif
endif
if(not J4)and(Bz>T34[O5])and(m5!=null)and(YO8(m5)or GetUnitMoveSpeed(m5)<300.)and(IsUnitInRange(it,m5,700.))and((m5==h4[O5])or(GetUnitLifePercent(m5)<70))then
set J4=M_7(it,$D0265,1093743184,1093747766,m5)
if J4 then
call WQE(O5,m5,false,false)
endif
endif
if m5==null then
set m5=MK7(1200.,b5,Condition(function k6))
endif
set UP=GetUnitAbilityLevel(it,1093743184)
if UP==0 then
set UP=GetUnitAbilityLevel(it,1093747766)
endif
if(not J4)and(m5!=null)and(Bz>T34[32+O5])and(GetUnitAbilityLevel(it,1093743179)>1)and((GetUnitState(it,UNIT_STATE_MANA)>200.+UP*100.)or(h4[O5]!=null))and((GetUnitLifePercent(m5)>40.)or(GetWidgetLife(m5)<GetUnitAbilityLevel(it,1093743179)*70))and(WA7(it,m5,3000.,1.,1800.)!=null)then
set J4=IssuePointOrderByIdLoc(it,$D02B6,DH7)
endif
if(not J4)and(Bz>T34[48+O5])and(((hq[704+O5]<-.1)and(m5!=null))or((hq[704+O5]<-.8)and(GetUnitLifePercent(it)<60.)))then
set J4=N97(it,$D022E,1093743689)
endif
if(not J4)and(Bz>T34[32+O5])and(GetUnitAbilityLevel(it,1093743179)>1)and(GetUnitState(it,UNIT_STATE_MANA)>300.+UP*100.)then
set m5=K3(1500.,it,Condition(function S87))
if(m5!=null)then
set IN4=it
call WW7(it,m5,GetUnitX(m5),GetUnitY(m5),$AF,Condition(function AJ7))
if bj_forLoopAIndex>2 then
set J4=IssuePointOrderById(it,$D02B6,GetUnitX(m5),GetUnitY(m5))
endif
endif
endif
if(not J4)and(Bz>T34[16+O5])and(h4[O5]==null)and(GetUnitAbilityLevel(it,1093743178)>1)and(GetUnitState(it,UNIT_STATE_MANA)>=250.)then
if m5==null or(not IsUnitInRange(m5,it,700))then
set m5=MK7(700.,b5,Condition(function k6))
endif
if((not J4)and(m5!=null)and(not IsUnitInRange(it,m5,450.))and(iU(it))and(G0[$80+O5])and(not G0[48+O5])and(MO7(400.,b5,Condition(function k8))==0))then
set UP=R2I(KF7(GetUnitX(it),GetUnitY(it),GetUnitX(m5),GetUnitY(m5)))
if(GetRandomInt(1,2)==1)then
set i1=R2I(bj_RADTODEG*Atan2(GetUnitY(it)-GetUnitY(m5),GetUnitX(it)-GetUnitX(m5)))-25
else
set i1=R2I(bj_RADTODEG*Atan2(GetUnitY(it)-GetUnitY(m5),GetUnitX(it)-GetUnitX(m5)))+25
endif
set J4=IssuePointOrderById(it,$D0012,GetUnitX(m5)+UP*Cos(i1*bj_DEGTORAD),GetUnitY(m5)+UP*Sin(i1*bj_DEGTORAD))
endif
endif
elseif(i1==1211117652)then
if(m5==null)then
set m5=MK7(1200.,b5,Condition(function k6))
endif
if(not J4)and(GetUnitLevel(it)>5)and(Bz>T34[O5])and(not IsUnitInRange(it,m5,300))and(h4[O5]!=null)and(GZ[$D0+O5]or((MP7(700.,m5,Condition(function MQ7))==0)and(GetUnitLifePercent(m5)<70. or MF7(O5))))then
set UP=GetUnitAbilityLevel(it,1093687864)
if UP==0 then
set UP=GetUnitAbilityLevel(it,1093747542)
endif
if(WC7(it,m5,.5,(UP+3)*500)!=null)then
if(WW7(it,m5,GetLocationX(DH7),GetLocationY(DH7),125,Condition(function AU7)))or(IsUnitInRange(bj_lastReplacedUnit,m5,$AF)and(IsUnitEnemy(bj_lastReplacedUnit,Player(O5))or MR7(it,ZU[G44])))then
set J4=(N47(it,$D02AC,1093687864,1093747542,GetLocationX(DH7),GetLocationY(DH7)))
endif
endif
if J4 then
call J_7(.1)
set J4=false
endif
endif
if(not J4)and(Bz>T34[48+O5])and(GetUnitAbilityLevel(it,1093687862)>1)then
if(m5==null)then
set m5=MK7(99999.,GetUnitLoc(it),Condition(function k6))
endif
if((m5!=null))then
if(GetUnitLifePercent(m5)<50. or GetUnitState(it,UNIT_STATE_MANA)>300.)then
if M97(m5,it)or GZ[$D0+O5]or h4[O5]!=null then
if WA7(it,m5,1200.,0,99999.)!=null then
set J4=M27(it,$D0079,1093687862,DH7)
endif
else
set J4=M27(it,$D0079,1093687862,M07(m5))
endif
endif
endif
endif
if(not J4)and(Bz>T34[32+O5])and(m5!=null)and(I27(it)>1000.)and(G0[256+O5])and(GetUnitState(it,UNIT_STATE_MANA)>200.)and(IsUnitInRange(it,m5,$D2))then
set J4=IssueImmediateOrderById(it,$D0265)
endif
if(not J4)and(Bz>T34[16+O5])and(h4[O5]!=null)and(IsUnitInRange(it,m5,275))then
set J4=IssueImmediateOrderById(it,$D0278)
endif
elseif(i1==1160786520)then
call SetPlayerAbilityAvailable(pl,1093809991,(GetHeroLevel(it)>9)and(GetUnitManaPercent(it)>70.))
if eY[448+O5]!=0 and K57(it)then
if(IsUnitInRange(it,h4[320+O5],950.))and(LoadInteger(L7,(GetHandleId(h4[320+O5])),(705))==eY[448+O5])then
set J4=IssueTargetOrderById(it,$D02B9,h4[320+O5])
else
set eY[448+O5]=0
endif
endif
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>3)and(GetUnitManaPercent(it)>70.))then
set m5=MK7(700.,b5,Condition(function k6))
endif
if not J4 then
set J4=(m5!=null)and(GetHeroLevel(it)>3)and((GetUnitManaPercent(it)>40.)or(M97(m5,it)))and(M57(it,$D00D8,1093809991,m5))
endif
if(not J4)and hq[816+O5]>Bz then
set G0[288+O5]=true
call N9F()
endif
set G0[304+O5]=false
elseif(i1==1311788336)then
if m5==null then
set m5=MK7(700.,b5,Condition(function k6))
endif
if(not J4)and(m5!=null)and((h4[O5]!=null)or(GetUnitLifePercent(m5)<60))and(GetUnitState(it,UNIT_STATE_MANA)>100)then
set UP=1
loop
exitwhen UP>3
set bj_lastCreatedUnit=(LoadUnitHandle(L7,GetHandleId(it),($5AA+UP)))
exitwhen bj_lastCreatedUnit==null
if(GetWidgetLife(bj_lastCreatedUnit)>0)and(IsUnitInRange(bj_lastCreatedUnit,m5,300))then
set J4=IssuePointOrderById(it,$D00D9,GetUnitX(bj_lastCreatedUnit),GetUnitY(bj_lastCreatedUnit))
exitwhen true
endif
set UP=UP+1
endloop
if(not J4)and(not IsUnitInRange(it,m5,400))and(LoadInteger(L7,GetHandleId(it),(747))>0)and(WA7(it,m5,GetUnitMoveSpeed(it)*2.5,.2,1500.)!=null)then
set J4=IssuePointOrderByIdLoc(it,$D020A,DH7)
endif
if J4 then
call WQE(O5,m5,false,false)
endif
endif
if(not J4)and(m5!=null)and(Bz>T34[16+O5])and((h4[O5]!=null)or(GetUnitLifePercent(m5)<70))and(IsUnitInRange(it,m5,350))and(MP7(400.,it,Condition(function Q_7))<=2)then
set J4=N97(it,$D022E,1093814323)
endif
if(not J4)and(m5!=null)and(Bz>T34[32+O5])and((h4[O5]!=null)or(GetUnitManaPercent(it)>50 and GetUnitState(it,UNIT_STATE_MANA)>$DC))then
set J4=M57(it,$D0079,1093814320,m5)
endif
if(not J4)and(m5!=null)and(Bz>T34[48+O5])and(h4[O5]!=null)then
set J4=IssueImmediateOrderById(it,$D0278)
endif
if(not J4)and(Bz>T34[32+O5])and(GetUnitManaPercent(it)>50 and GetUnitState(it,UNIT_STATE_MANA)>400)then
set m5=MK7(700.,b5,Condition(function Q_7))
if(m5!=null)then
set J4=M57(it,$D0079,1093814320,m5)
endif
endif
elseif(i1==1160786507)then
if m5==null then
set m5=MK7(700.,b5,Condition(function k6))
endif
if(not J4)and(m5!=null)and(Bz>T34[16+O5])and((GetUnitLifePercent(m5)<70.)or(h4[O5]!=null))then
set UP=MO7(315.,M07(m5),Condition(function k8))
if(not J4)then
set J4=(UP>=3)and(M57(it,$D0079,1093814850,m5))
endif
endif
if(not J4)and(Bz>T34[32+O5])and((GetUnitLifePercent(it)<60)or((h4[O5]!=null)and((GetUnitLifePercent(it)<80)or(UnitCountBuffsEx(it,false,true,true,true,false,false,false)>=0))))then
set J4=IssueTargetOrderById(it,$D0118,it)
endif
if(not J4)and(Bz>T34[O5])and(G0[256+O5])and((GetUnitLifePercent(m5)<30 and GetUnitLifePercent(it)>GetUnitLifePercent(m5)+25)or(GZ[$D0+O5]and GetUnitLifePercent(m5)<60))then
set J4=IssueTargetOrderById(it,$D007F,m5)
endif
if(not J4)and(Bz>T34[32+O5])then
set m5=MK7(800.,b5,Condition(function SN7))
set J4=(m5!=null)and(IssueTargetOrderById(it,$D0118,m5))
endif
elseif(i1==1211122767)then
if m5==null then
set m5=MK7(800.,b5,Condition(function k6))
endif
if(not J4)and(m5!=null)and(Bz>T34[48+O5])and((h4[O5]!=null)or(GetUnitManaPercent(m5)>60 and GetUnitLifePercent(m5)<70))and((Bz<T34[O5])or(GetUnitState(it,UNIT_STATE_MANA)>XKE(it,1093812807,4)+100))then
set J4=M57(it,$D02BC,1093814350,m5)
endif
if(not J4)and(m5!=null)and(Bz>T34[O5])and((GetUnitLifePercent(m5)<30)or(YO8(m5))or(GetUnitAbilityLevel(m5,1110459993)!=0))then
set J4=(WC7(it,m5,.5,$4B0)!=null)and(IssuePointOrderByIdLoc(it,$D02B6,DH7))
endif
if(not J4)and(m5!=null)and(Bz>T34[32+O5])and((GetUnitLifePercent(m5)<70)or(h4[O5]!=null))and(MP7(KE7(it,m5),it,Condition(function k6))<=1)then
set J4=N97(it,$D022E,1093814612)
endif
if(not J4)and(m5!=null)and(Bz>T34[16+O5])and((GetUnitLifePercent(m5)<70)or(h4[O5]!=null)or(GetUnitManaPercent(m5)>80))and((Bz<T34[O5])or(GetUnitState(it,UNIT_STATE_MANA)>XKE(it,1093812807,4)+100))then
set J4=M57(it,$D0097,1093812805,m5)
endif
elseif(i1==1160786738)then
if m5==null then
set m5=MK7(700.,b5,Condition(function k6))
endif
if(not J4)then
if GetUnitAbilityLevel(it,1093813848)==0 then
if(h4[O5]!=null)and(not IsUnitInRange(it,m5,400))then
if WA7(it,m5,$3E8,.1,$4B0)!=null then
call IssuePointOrderByIdLoc(it,$D00F8,DH7)
endif
endif
else
if(h4[O5]==null)or(IsUnitInRange(it,m5,400))or(MP7($E1,O77(GetHandleId(it),"AI|ShredChakram"),Condition(function k6))==0)then
call IssueImmediateOrderById(it,$D00D1)
endif
endif
call TriggerSleepAction(.1)
endif
if(not J4)and(m5!=null)and(Bz>T34[32+O5])and((h4[O5]!=null)or(GetUnitLifePercent(it)<70))then
set UP=600+$C8*GetUnitAbilityLevel(it,1093813555)
if WA7(it,m5,2*UP,.8,UP)!=null then
if TN7(it,UP)or((V54!=null)and(bj_enumDestructableRadius==0)and(KE7(V54,it)>400.))then
set J4=IssuePointOrderByIdLoc(it,$D02B6,DH7)
endif
endif
if(not J4)and(GetUnitLifePercent(m5)<30)then
if TK7(M07(m5),300)and(KE7(V54,it)>400.)then
set J4=IssuePointOrderById(it,$D02B6,GetDestructableX(V54),GetDestructableY(V54))
endif
endif
endif
if(not J4)and(m5!=null)and(Bz>T34[16+O5])and(IsUnitInRange(it,m5,300))then
set J4=N97(it,$D022E,1093813835)
endif
endif
if not G0[304+O5]then
if((not J4)and(is(it)))then
if(GetUnitAbilityLevel(it,1110454609)>0)then
set m5=MK7(250.,b5,Condition(function k6))
if(m5!=null)then
call UnitRemoveAbility(it,1110454609)
set J4=IssueTargetOrderById(it,$D000F,m5)
else
set m5=MK7(800.,b5,Condition(function k6))
set J4=(m5!=null)and(not IsUnitVisible(it,GetOwningPlayer(m5)))and(IssueTargetOrderById(it,$D0012,m5))
endif
elseif((KE7(it,NF7(it))<1000.)and(eY[O5]==1))then
if(MR7(it,ZU[F6])or MR7(it,ZU[FF6]))then
if(h8[16+O5]==h7[$E])then
set J4=KEF(0)
elseif(h8[16+O5]==h7[35])then
set J4=KEF(1)
elseif(h8[16+O5]==h7[55])then
set J4=KEF(2)
endif
elseif((GetHeroLevel(it)<$B)and(not MS7(it)))then
set m5=null
if(((i1==1211117641)and(GetHeroLevel(it)>5))or(i1==1211117642))then
elseif((IsPlayerAlly(pl,A7[0]))and(h8[16+O5]==h7[$E])and(P14<1))then
set m5=JL4
elseif((IsPlayerAlly(pl,Z7[0]))and(h8[16+O5]==h7[$E])and(P34<1))then
set m5=JH4
elseif((IsPlayerAlly(pl,A7[0]))and(h8[16+O5]==h7[35])and(P04<1))then
set m5=J64
elseif((IsPlayerAlly(pl,Z7[0]))and(h8[16+O5]==h7[35])and(P64<1))then
set m5=JG4
elseif((IsPlayerAlly(pl,A7[0]))and(h8[16+O5]==h7[55])and(P54<1))then
set m5=J14
elseif((IsPlayerAlly(pl,Z7[0]))and(h8[16+O5]==h7[55])and(PL4<1))then
set m5=JI4
endif
if(m5!=null)then
loop
call TriggerSleepAction(.5)
exitwhen(Bz>G97[$A0+O5])
endloop
set J4=PB7(it,m5)
if(not J4 or not NYF)then
call DisableTrigger(H94)
call RemoveItem(NXF)
call EnableTrigger(H94)
else
call SetPlayerStateBJ(pl,PLAYER_STATE_RESOURCE_GOLD,(GetPlayerState(pl,PLAYER_STATE_RESOURCE_GOLD)-0))
call NP7(StringHash("Stats"+I2S(O5)),"NumOfConsumables",OM7(StringHash("Stats"+I2S(O5)),"NumOfConsumables")+1)
endif
endif
endif
endif
if((not J4)and(MR7(it,ZU[DP4])))then
set m5=MK7(700.,b5,Condition(function KA))
if((m5!=null)and(GetUnitState(m5,UNIT_STATE_LIFE)>100.)and(GetUnitState(m5,UNIT_STATE_LIFE)<400.))then
if(not(IsUnitInRange(m5,it,550)))then
call IssuePointOrderById(it,$D0012,GetUnitX(m5),GetUnitY(m5))
call J_7(.5)
endif
set J4=(MP7(600.,it,Condition(function KA))>3)and(UnitUseItem(it,bj_lastCreatedItem))
endif
set m5=null
set J4=false
endif
if((not J4)and(MR7(it,ZU[S6])))then
if((GetRandomInt(1,$A)<=4)and(Bz>hq[$90+O5]))then
set m5=MK7(700.,b5,Condition(function k8))
set J4=(m5!=null)and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(not IsUnitType(m5,UNIT_TYPE_HERO))and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
endif
if((not J4)and MR7(it,ZU[M3]))then
set J4=(m5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if((not J4)and MR7(it,ZU[DM4])and(OT7(it,"ArmletOfMordigan|Active")==false)and(GetUnitLifePercent(it)>90.)and(IsUnitInRange(it,m5,150.)))then
set J4=(m5!=null)and(UnitUseItem(it,bj_lastCreatedItem))
elseif(MR7(it,ZU[DK4])and(OT7(it,"ArmletOfMordigan|Active"))and((not IsUnitInRange(it,m5,150.))or(GetUnitLifePercent(it)<60.)))then
set J4=(UnitUseItem(it,bj_lastCreatedItem))
endif
if((not J4)and MR7(it,ZU[FC]))then
set J4=(m5!=null)and(GetUnitLifePercent(m5)<40)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if((not J4)and(MR7(it,ZU[DU4])))then
set J4=(m5!=null)and(GetUnitLifePercent(m5)<30)and(G0[256+O5]or GZ[$D0+O5])and(K87(m5,it,30))and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if((not J4)and(MR7(it,ZU[DY4]))and(GetItemCharges(bj_lastCreatedItem)>0)and(Bz>T34[$E0+O5])and(GetUnitState(m5,UNIT_STATE_LIFE)<120))then
set J4=(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if((not J4)and(MR7(it,ZU[VB]))and(GetItemCharges(bj_lastCreatedItem)>0)and(Bz>T34[256+O5]))then
set J4=((MP7(900.,it,Condition(function S37)))>2)and((MP7(900.,it,Condition(function SJ7)))>1)and(UnitUseItem(it,bj_lastCreatedItem))
endif
if((not J4)and(MB7(it))and(Bz>T34[$C0+O5]))then
if(GetUnitState(it,UNIT_STATE_LIFE)<$96)or((GetItemCharges(bj_lastCreatedItem)>=8)and(GetUnitLifePercent(it)<50 or GetUnitManaPercent(it)<20)and(KE7(it,h9[16+O5])>600))then
set J4=UnitUseItem(it,bj_lastCreatedItem)
endif
endif
if((not J4)and(MR7(it,ZU[F74])))then
set J4=(Bz>hq[$80+O5])and((GetUnitState(it,UNIT_STATE_MAX_MANA)-GetUnitState(it,UNIT_STATE_MANA))>150.)and(UnitUseItem(it,bj_lastCreatedItem))
endif
if((not J4)and(MR7(it,ZU[D44])))then
set J4=((Bz+20.)<hq[O5]or(Bz+20.)<T34[O5])and(UnitUseItem(it,bj_lastCreatedItem))
endif
if((not J4)and(MR7(it,ZU[T2])))then
set J4=(GetUnitLifePercent(it)<50)and((h4[O5]!=null)or(G0[256+O5])or(GZ[$D0+O5]))and(UnitUseItem(it,bj_lastCreatedItem))
endif
if((not J4)and(MR7(it,ZU[WC])))then
if(OO7(R44,YNE(it)+"|G"))then
set m5=MN7(700.,b5,Condition(function Km))
set J4=(m5!=null)and(GetRandomInt(1,8)==1)and(UnitUseItemPoint(it,bj_lastCreatedItem,GetUnitX(m5)+GetRandomReal(.0,200.)-100.,GetUnitY(m5)+GetRandomReal(.0,200.)-100.))
if((not J4)and(GetRandomInt(1,4)==1)and(MN7(1000.,b5,Condition(function S47))==null)and(MN7(1200.,b5,Condition(function Km))!=null))then
set J4=(UnitUseItemPoint(it,bj_lastCreatedItem,GetUnitX(it)+GetRandomReal(.0,200.)-100.,GetUnitY(it)+GetRandomReal(.0,200.)-100.))
endif
endif
if((not J4)and(GetRandomInt(1,5)==1)and(KE7(it,NF7(it))>5000.)and(GetItemCharges(bj_lastCreatedItem)>1)and(MN7(800.,b5,Condition(function k8))!=null)and(MN7(1000.,b5,Condition(function S47))==null)and(MN7(1100.,b5,Condition(function K7))==null))then
set J4=(UnitUseItemPoint(it,bj_lastCreatedItem,GetUnitX(it)+GetRandomReal(.0,200.)-100.,GetUnitY(it)+GetRandomReal(.0,200.)-100.))
endif
endif
if((not J4)and(MR7(it,ZU[W6])))then
if(m5!=null)and(GetUnitLifePercent(m5)<30)then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,m5)
else
set m5=T97(500.,it)
set J4=(m5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
endif
if((not J4)and(MR7(it,ZU[DE4])))then
if not((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(IsUnitEnemy(m5,Player(O5))))then
set m5=MN7(900.,b5,Condition(function k6))
endif
if(m5!=null)then
set m5=T77(900.,it)
set J4=(m5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
endif
if((not J4)and(MR7(it,ZU[R3])))and(h4[O5]!=null)then
set m5=TE7(600,it)
set J4=(m5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if((not J4)and(MR7(it,ZU[DU4])))then
set m5=T47(800,it)
if(ME7(m5))then
set bj_forLoopAIndexEnd=GetPlayerId(GetOwningPlayer(m5))
if K87(m5,h9[16+bj_forLoopAIndexEnd],20)then
set b5=kk(m5,600.,h9[16+bj_forLoopAIndexEnd])
set J4=(b5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
if J4 then
set h9[bj_forLoopAIndexEnd]=h9[16+bj_forLoopAIndexEnd]
endif
elseif(K87(m5,h9[bj_forLoopAIndexEnd],20))and(h9[bj_forLoopAIndexEnd]!=h9[16+bj_forLoopAIndexEnd])then
set b5=kk(m5,600.,h9[bj_forLoopAIndexEnd])
set J4=(b5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
endif
endif
endif
if((not J4)and(h4[O5]!=null)and(G0[$80+O5])and(GetHeroLevel(it)>5))then
set UP=GetUnitCurrentOrder(it)
set m5=h4[O5]
if(((UP==$D000F)or(UP==$D0019))and(IsUnitVisible(m5,pl))and(GetUnitAbilityLevel(m5,1110454854)==0)and(not IC(O5))and((GetUnitLifePercent(it)+15.)>GetUnitLifePercent(m5))and(not G0[48+O5]))then
call IssueTargetOrderById(it,$D000F,m5)
elseif((UP==$D0012)and(IsUnitInRange(it,m5,600.)))then
call FNF(it,m5)
endif
endif
endif
set it=null
set pl=null
set b5=null
set NWF=null
set m5=null
set NAF=null
set RL7=null
set NVF=null
endfunction
function NDF takes nothing returns nothing
local unit it=bj_lastLoadedUnit
local unit m5=null
local integer i1=GetUnitTypeId(it)
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer UP
local boolean J4=false
if CM4 then
call TriggerSleepAction(GetRandomReal(.2,.4))
endif
set CM4=true
if((i1==1848651848)or(i1==1848651847)or(i1==1848651851)or(i1==1848651850)or(i1==1848651841)or(i1==1848651830))then
set m5=h4[O5]
if(m5==null)then
set m5=MK7(1000.,M07(it),Condition(function k6))
endif
if((m5!=null)and(GetUnitLifePercent(M7[O5])>50.)and(GetHeroLevel(M7[O5])>5)and(not G0[O5])and(G0[$80+O5])and(is(M7[O5]))and(IsUnitInRange(M7[O5],m5,800.)))then
set UP=GetUnitTypeId(M7[O5])
if(UP==1332963428)then
set J4=(Bz>hq[O5])and(GetUnitLifePercent(m5)<70.)and(GetUnitState(M7[O5],UNIT_STATE_MANA)>hq[272+O5])and(M57(M7[O5],$D0200,1093677649,m5))
elseif(UP==1429221446)then
set J4=(Bz>hq[O5])and(GetUnitLifePercent(m5)<80.)and(IsUnitInRange(M7[O5],m5,450.))and(M_7(M7[O5],$D0200,1093682764,1093747544,m5))
elseif(UP==1164799855)then
call M57(M7[O5],$D006B,1093682264,m5)
elseif(UP==1433105516)then
set J4=(Bz>hq[O5])and(GetUnitLifePercent(m5)<70.)and(not kr(M7[O5]))and(IssueTargetOrderById(M7[O5],$D00DC,m5))
elseif(UP==1332898670)then
if(IsUnitInRange(M7[O5],m5,400)or YO8(m5))then
set GZ[O5]=true
call J8(O5,M57(M7[O5],$D0200,1093677136,m5))
endif
elseif(UP==1214931305)then
call M57(M7[O5],$D00CB,1093678147,m5)
elseif(UP==1211117633)then
call M57(M7[O5],$D0269,1093684045,m5)
elseif(UP==1211117636)then
set J4=(GetUnitLifePercent(m5)<50.)and(M_7(M7[O5],$D007F,1093685042,1093810233,m5))
elseif(UP==1160786243)then
if((GetUnitLifePercent(m5)<50.)and(IsUnitInRange(M7[O5],m5,650.)))then
set GZ[O5]=true
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(h8[O5])-GetUnitY(M7[O5]),GetUnitX(h8[O5])-GetUnitX(M7[O5])))
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093678672,true)
call J8(O5,IssuePointOrderById(M7[O5],$D0079,GetUnitX(m5)+200.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+200.*Sin(UP*bj_DEGTORAD)))
endif
elseif(UP==1311781207)then
set J4=M57(M7[O5],$D007F,1093684817,m5)
endif
endif
set J4=(m5!=null)and(GetUnitAbilityLevel(m5,1110454854)==0)and((IssueTargetOrderById(it,$D0118,m5))or(IssueTargetOrderById(it,$D000F,m5)))
elseif((i1==1429221441)or(i1==1212363833)or(i1==1164277357)or(i1==1865429047)or(i1==1865429062)or(i1==1752654196)or(i1==1752658994)or(i1==1752658995)or(i1==1747988534)or(GetUnitAbilityLevel(it,1110455088)>0))then
set m5=h4[O5]
if(m5==null)then
set m5=MK7(800.,M07(it),Condition(function k6))
endif
if((m5!=null)and(GetUnitLifePercent(M7[O5])>50.)and(not G0[O5])and(G0[$80+O5])and(is(M7[O5]))and(IsUnitInRange(M7[O5],m5,800.)))then
set UP=GetUnitTypeId(M7[O5])
if(UP==1429221441)then
set J4=(M57(M7[O5],$D0107,1093678389,m5))or(IssueTargetOrderById(M7[O5],$D000F,m5))
elseif(UP==1212363833)then
set J4=(M57(M7[O5],$D007F,1093809220,m5))or(IssueTargetOrderById(M7[O5],$D000F,m5))
elseif((UP==1160786229)or(UP==1164277357)or(UP==1433105516))then
call IssueTargetOrderById(M7[O5],$D000F,m5)
endif
endif
set J4=(m5!=null)and(GetUnitAbilityLevel(m5,1110454854)==0)and(IssueTargetOrderById(it,$D000F,m5))
elseif(i1==1848652343)then
set m5=h4[O5]
if(m5==null)then
set m5=MK7(800.,M07(it),Condition(function k6))
endif
if((m5!=null)and(GetUnitLifePercent(M7[O5])>50.)and(not G0[O5])and(G0[$80+O5])and(is(M7[O5]))and(IsUnitInRange(M7[O5],m5,800.)))then
set UP=GetUnitTypeId(M7[O5])
if(UP==1211117653)then
set J4=((Bz>T34[16+O5])and UG7(M7[O5],A54,A54,A54,1093686874)and(M57(M7[O5],$D0219,1093686874,m5)))or(IssueTargetOrderById(M7[O5],$D000F,m5))
endif
endif
set J4=(m5!=null)and(GetUnitAbilityLevel(m5,1110454854)==0)and((GetUnitLevel(M7[O5])>16)or(GetUnitLifePercent(m5)<10.))and(GetUnitLifePercent(m5)<25.)and(IssueTargetOrderById(it,$D000F,m5))
elseif((i1==1848652103)or(i1==1848652099)or(i1==1848652088)or(i1==1848651828))then
if(((GetUnitLifePercent(it)<25.)or(GZ[288+O5]))and((h4[O5]==null)or(not IsUnitInRange(it,M7[O5],99999.))))then
set J4=jW(it,$D0012,NF7(it))
set GZ[288+O5]=GetUnitLifePercent(it)<50.
elseif((not GZ[272+O5])and(not G0[16+O5])and(G0[$80+O5]))then
set m5=M7[O5]
set J4=(GetUnitLifePercent(it)<90.)and(KE7(NF7(it),it)<400.)and(jW(it,$D0012,NF7(it)))
set UP=R2I(KF7(GetUnitX(it),GetUnitY(it),GetUnitX(m5),GetUnitY(m5)))
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093681463,UP>800)
if(not J4)then
if(UP>$3E8)then
set J4=((UP>$BB8)and(IssueImmediateOrderById(it,$D0272)))or(IssueTargetOrderById(it,$D0003,m5))
else
set J4=((not G0[$80+O5])or((GetUnitCurrentOrder(m5)==$D0012)and((KE7(it,h8[O5])+700.)<KE7(m5,h8[O5]))))and(jW(it,$D0012,h9[O5]))
endif
endif
if((not J4)and(GetHeroLevel(M7[O5])<$C)and(Bz>hq[$F0+O5])and(eY[O5]==1))then
set m5=MK7(600.,M07(it),Condition(function KD))
if(m5==null)then
set m5=MK7(600.,M07(it),Condition(function Kc))
endif
set J4=(m5!=null)and(IssueTargetOrderById(it,$D0003,m5))
if((not J4)and(MO7(400.,M07(it),Condition(function Ka))>0))then
set m5=MK7(400.,M07(it),Condition(function k6))
if(m5==null)then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(h9[O5])-GetUnitY(it),GetUnitX(h9[O5])-GetUnitX(it)))
set J4=IssuePointOrderById(it,$D0012,GetUnitX(it)+350.*Cos(UP*bj_DEGTORAD),GetUnitY(it)+350.*Sin(UP*bj_DEGTORAD))
else
set J4=IssueTargetOrderById(it,$D0003,m5)
endif
endif
endif
else
set J4=jW(it,$D0012,NF7(it))
endif
elseif(GetUnitTypeId(M7[O5])==1211117633)then
set m5=M7[O5]
set J4=(((GetUnitLifePercent(it)<90.)and(KE7(NF7(it),it)<400.))or(not M87(m5)))and(jW(it,$D0012,NF7(it)))
if((not J4)and(GetUnitLifePercent(it)<30.))then
set J4=((i1==1852796263)or(i1==1852207203)or(i1==1853060200)or(i1==1852010091))and(jW(it,$D0012,NF7(it)))
endif
if(i1==1852796263)then
if((not J4)and(GetRandomInt(0,5)>1))then
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1094936114,true)
set J4=((GetUnitAbilityLevel(m5,1112893025)==0)and(IsUnitInRange(it,m5,800.))and(IssueTargetOrderById(it,$D0101,m5)))or((GetUnitAbilityLevel(it,1112893025)==0)and(IssueTargetOrderById(it,$D0101,it)))
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1094936114,J4)
else
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1094936114,false)
endif
endif
if(not J4)then
if(not IsUnitInRange(it,m5,1000.))then
if((h9[O5]!=NF7(it))and(not IsUnitInRange(it,m5,3000.))and((RAbsBJ(GetUnitX(it)-GetUnitX(m5))>3000.)and(RAbsBJ(GetUnitY(it)-GetUnitY(m5))>3000.)))then
set J4=jW(it,$D000F,h9[O5])
else
set J4=IssueTargetOrderById(it,$D0003,m5)
endif
else
set J4=((not G0[$80+O5])or((GetUnitCurrentOrder(m5)==$D0012)and((KE7(it,h8[O5])+450.)<KE7(m5,h8[O5]))))and(jW(it,$D0012,h9[O5]))
endif
endif
if((GetUnitLifePercent(it)<50.)and(IsUnitInRange(it,m5,600.))and(iU(m5)))then
if(((i1==1852796263)or(i1==1852207203)or(i1==1853060200)or(i1==1852010091))and(KE7(it,NF7(it))>4000.))then
call M57(m5,$D00A3,1093810260,it)
endif
endif
if((not J4)and(h4[O5]!=null))then
set m5=h4[O5]
if(i1==1853060200)then
set J4=(IsUnitInRange(it,m5,700.))and(IssueTargetOrderById(it,$D009D,m5))
elseif((i1==1852207203)or(i1==1852010091))then
set J4=(IsUnitInRange(it,m5,250.))and(IssueTargetOrderById(it,$D009F,m5))
endif
endif
elseif((i1==1848652113)or(i1==1848652114))then
set J4=((M87(M7[O5]))and(IssueTargetOrderById(it,$D0012,M7[O5])))
elseif((i1==1966092339)or(i1==1966092341)or(i1==1966092345))then
elseif((i1==1966092596)or(i1==1966092597)or(i1==1966092598))then
if(OT7(M7[O5],"AIFamiliar1|Status")==false)then
call NJF(O5,it)
endif
set J4=true
elseif((i1==1966092612)or(i1==1966092613)or(i1==1966092614))then
if(OT7(M7[O5],"AIFamiliar2|Status")==false)then
call NJF(O5,it)
endif
set J4=true
elseif((i1==1697656907)or(i1==1697656905)or(i1==1697656908))then
set h4[16+O5]=it
if(is(it))then
set J4=(((G0[16+O5])or((GetUnitLifePercent(it)<90.)and(KE7(NF7(it),it)<400.)))and(jW(it,$D0012,NF7(it))))or((GetUnitState(it,UNIT_STATE_LIFE)<175.)and((jW(it,$D022D,NF7(it)))or(jW(it,$D0012,NF7(it)))))
if((h8[528+O5]!=null)and(not J4))then
set UP=GetUnitUserData(h8[528+O5])
if((UP<$A)or(UP>60))then
set UP=GetUnitUserData(h9[512+O5])
endif
if((UP>=$A)and(UP<=18))then
set m5=h7[$A+P24]
elseif((UP>=30)and(UP<=40))then
set m5=h7[30+P_4]
elseif((UP>=50)and(UP<=60))then
set m5=h7[50+Q44]
endif
if((Bz>hq[$F0+O5])and(GetRandomInt(1,2)==1))then
if((m5!=h7[$A+P24])and(MP7(900.,h7[$A+P24],Condition(function KC))>4)and(MP7(900.,h7[$A+P24],Condition(function S47))>0))then
set m5=h7[$A+P24]
set hq[$F0+O5]=Bz+30.
elseif((m5!=h7[30+P_4])and(MP7(900.,h7[30+P_4],Condition(function KC))>4)and(MP7(900.,h7[30+P_4],Condition(function S47))>0))then
set m5=h7[30+P_4]
set hq[$F0+O5]=Bz+30.
elseif((m5!=h7[50+Q44])and(MP7(900.,h7[50+Q44],Condition(function KC))>4)and(MP7(900.,h7[50+Q44],Condition(function S47))>0))then
set m5=h7[50+Q44]
set hq[$F0+O5]=Bz+30.
endif
endif
if((UP>=$A)and(UP<=60))then
if(IsUnitAlly(it,A7[0]))then
set UP=hj[512+GetUnitUserData(m5)]
else
set UP=GetUnitUserData(m5)
endif
set h8[512+O5]=h7[UP+1]
set h8[528+O5]=h7[UP]
set h9[512+O5]=h7[UP-1]
endif
endif
if(GZ[O5])then
set J4=IssueImmediateOrderById(it,$D0229)
set GZ[O5]=false
else
if(h8[512+O5]!=null)then
set J4=((not IsUnitInRange(it,h8[528+O5],3500.))and(jW(it,$D022D,h8[528+O5])))or(jW(it,$D000F,h8[512+O5]))
else
set J4=((M7[O5]!=null)and(not IsUnitInRange(it,M7[O5],400.))and(jW(it,$D000F,M7[O5])))
endif
endif
endif
elseif((i1==1697656909)or(i1==1697656910)or(i1==1697656911))then
if((eY[O5]!=3)and(eY[O5]!=4))then
if(((GetUnitY(it)>4000.)and(GetUnitY(it)<7000.))or((GetUnitX(it)>-7500.)and(GetUnitX(it)<-5000.)))then
set m5=h7[30+P_4]
elseif(((GetUnitY(it)>-8000.)and(GetUnitY(it)<-5500.))or((GetUnitX(it)>4500.)and(GetUnitX(it)<7000.)))then
set m5=h7[50+Q44]
else
set m5=h7[$A+P24]
endif
if(IsUnitAlly(it,A7[0]))then
set UP=hj[512+GetUnitUserData(m5)]
else
set UP=GetUnitUserData(m5)
endif
set J4=jW(it,$D000F,h7[UP+1])
endif
elseif((i1==1848651861)or(i1==1848651865)or(i1==1848651866))then
set m5=h4[O5]
if(m5==null)then
set m5=MK7(800.,M07(it),Condition(function k6))
endif
set J4=(GetUnitLifePercent(it)<90.)and(GetUnitLifePercent(M7[O5])>50.)and(not G0[O5])and(is(M7[O5]))and(IsUnitInRange(M7[O5],it,800.))and(IssueTargetOrderById(M7[O5],$D0118,it))
if((not J4)and(m5!=null)and(GetUnitLifePercent(m5)<50.)and(GetUnitLifePercent(M7[O5])>50.)and(not G0[O5])and(is(M7[O5]))and(IsUnitInRange(M7[O5],m5,800.)))then
set GZ[O5]=true
set J4=J8(O5,M57(M7[O5],$D0079,1093678672,m5))
endif
set J4=(m5!=null)and(GetUnitAbilityLevel(m5,1110454854)==0)and(IssueTargetOrderById(it,$D000F,m5))
elseif(GetUnitAbilityLevel(it,1110455105)>0)then
set J4=(GetUnitLifePercent(it)<50.)and(jW(it,$D0012,h9[O5]))
elseif((i1==1852862003)or(i1==1852862006)or(i1==1848652080)or(i1==1848657754))then
call JWF(it,16+O5)
if(GZ[272+O5])then
set J4=jW(it,$D0012,h9[16+O5])
else
set m5=h4[O5]
if(m5==null)then
set m5=MK7(800.,M07(it),Condition(function k6))
endif
set J4=(m5!=null)and((IssueTargetOrderById(it,$D011C,m5))or(IssueImmediateOrderById(it,$D0228))or((GetUnitAbilityLevel(m5,1110454854)==0)and(IssueTargetOrderById(it,$D000F,m5))))
endif
call JXF(it,16+O5,J4)
set J4=true
elseif((i1==1852862002)or(i1==1852862005)or(i1==1848652082)or(i1==1848657969))then
call JWF(it,512+O5)
set m5=h4[O5]
if(m5==null)then
set m5=MK7(800.,M07(it),Condition(function k6))
endif
if(m5!=null)then
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1094935417,true)
set J4=(GZ[272+O5])and(IssueTargetOrderById(it,$D00B0,m5))
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1094935417,J4)
if(not J4)then
set J4=((UnitCountBuffsExBJ(bj_BUFF_POLARITY_POSITIVE,bj_BUFF_RESIST_EITHER,GetFilterUnit(),false,false)>0)and(IssueTargetOrderById(it,$D0059,m5)))or((GetUnitAbilityLevel(m5,1110454854)==0)and(IssueTargetOrderById(it,$D000F,m5)))
endif
else
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1094935417,false)
endif
call JXF(it,512+O5,J4)
if(GetUnitLifePercent(it)<25.)then
set J4=IssueImmediateOrderById(it,$D00A1)
elseif(GetUnitAbilityLevel(it,1112504171)>0)then
set J4=jW(it,$D0012,h9[16+O5])
endif
set J4=true
elseif((i1==1852862001)or(i1==1852862004)or(i1==1848652081)or(i1==1848657968))then
call JWF(it,528+O5)
set m5=h4[O5]
if(m5==null)then
set m5=MK7(800.,M07(it),Condition(function k6))
endif
set J4=(m5!=null)and(GetUnitAbilityLevel(m5,1110454854)==0)and(IssueTargetOrderById(it,$D000F,m5))
call JXF(it,528+O5,J4)
set J4=true
elseif((i1==1848652109)or(i1==1848652115))then
set m5=h4[O5]
set h4[16+O5]=it
if(m5==null)then
set m5=MK7(800.,M07(it),Condition(function k6))
endif
set J4=(m5!=null)and(GetUnitAbilityLevel(m5,1110454854)==0)and(IssueTargetOrderById(it,$D000F,m5))
endif
if(not J4)then
if h4[O5]!=null then
call IssueTargetOrderById(it,$D000F,h4[O5])
elseif((eY[O5]>=9))then
call IssueTargetOrderById(it,$D0016,M7[O5])
elseif((eY[O5]!=3)and(eY[O5]!=4))then
call jW(it,$D000F,h8[O5])
else
if((M87(M7[O5]))and(IsUnitInRange(it,M7[O5],1200.)))then
set m5=M7[O5]
else
set m5=MK7(1200.,M07(it),Condition(function k8))
endif
set J4=((m5!=null)and(IssuePointOrderById(it,$D000F,GetUnitX(m5),GetUnitY(m5))))or(jW(it,$D000F,h8[64+O5]))
endif
endif
set it=null
set m5=null
endfunction
function NBF takes nothing returns nothing
local integer O5=1
local real KD7
loop
exitwhen O5>$B
if(IsPlayerInForce(Player(O5),QX4))then
call GroupClear(Q54)
call GroupEnumUnitsOfPlayer(Q54,Player(O5),Q24)
call ForGroup(Q54,function N8F)
endif
if M7[O5]!=null and GetWidgetLife(M7[O5])>.405 then
set KD7=GetUnitState(M7[O5],UNIT_STATE_LIFE)/GetUnitState(M7[O5],UNIT_STATE_MAX_LIFE)
set hq[704+O5]=(KD7-hq[688+O5])
if(Bz>hq[736+O5])or(hq[720+O5]>hq[704+O5])then
set hq[720+O5]=hq[704+O5]
set hq[736+O5]=Bz+10.
endif
set hq[688+O5]=KD7
endif
set O5=O5+1
endloop
endfunction
function NCF takes nothing returns boolean
return(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)and(not QF7(GetSpellAbilityId())))!=null
endfunction
function N3F takes nothing returns nothing
local unit j5=GetTriggerUnit()
local unit m5=GetEnumUnit()
local integer i1=GetUnitTypeId(m5)
if((ME7(m5))or(not iU(m5)))then
elseif((i1==1430466609)and(GetUnitLifePercent(m5)<40.))then
call M_7(m5,$D009D,1093810258,1093810259,j5)
elseif(i1==1429221446)then
call WKE(m5,j5)
elseif((i1==1332766568)and(IsUnitInRange(m5,j5,400.)))then
call IssueImmediateOrderById(m5,$D0278)
elseif((i1==1332109682)and(IsUnitInRange(m5,j5,500.)))then
call N97(m5,$D026C,1093810505)
elseif(i1==1433105516)then
call IssueTargetOrderById(m5,$D0278,j5)
elseif((i1==1214409837)or(i1==1211119192)or(i1==1211119193)or(i1==1211119191))then
set i1=R2I(bj_RADTODEG*Atan2(GetUnitY(j5)-GetUnitY(m5),GetUnitX(j5)-GetUnitX(m5)))
call IssuePointOrderById(m5,$D0278,GetUnitX(m5)+150.*Cos(i1*bj_DEGTORAD),GetUnitY(j5)+150.*Sin(i1*bj_DEGTORAD))
elseif(i1==1316252014)then
call IssueTargetOrderById(m5,$D00DE,j5)
elseif((i1==1214931305)and(IsUnitInRange(m5,j5,500.))and(GetUnitLifePercent(m5)<50.))then
call IssueImmediateOrderById(m5,$D0278)
elseif(i1==1311787088)then
elseif(i1==1211117643)then
call N47(m5,$D0218,1093681483,1093748313,GetUnitX(j5),GetUnitY(j5))
elseif(i1==1311781206)then
call WME(m5,j5)
elseif(i1!=1429221445)then
call KBF(m5,j5)
endif
set j5=null
set m5=null
endfunction
function N6F takes unit u returns boolean
local real NLF=1.
if(TA4)then
if(Y74[GetPlayerId(GetOwningPlayer(u))]==1)then
set NLF=10.-GetRandomReal(0,100)
elseif(Y74[GetPlayerId(GetOwningPlayer(u))]==3)then
set NLF=45.-GetRandomReal(0,100)
elseif(Y74[GetPlayerId(GetOwningPlayer(u))]==5)then
set NLF=65.-GetRandomReal(0,100)
endif
else
if(Y74[GetPlayerId(GetOwningPlayer(u))]==1)then
set NLF=.0
endif
endif
return(NLF>0)
endfunction
function N1F takes unit j5,unit N0F,real kl returns nothing
local real IW=bj_RADTODEG*Atan2(GetUnitY(N0F)-GetUnitY(j5),GetUnitX(N0F)-GetUnitX(j5))
if(IW>kl)then
set IW=IW+90
else
set IW=IW-90
endif
if not((GetUnitAbilityLevel(N0F,1311780930)>0)and(N97(N0F,$D0222,1093686082)))then
call IssuePointOrderById(N0F,$D0012,GetUnitX(N0F)+250.*Cos(IW*bj_DEGTORAD),GetUnitY(N0F)+250.*Sin(IW*bj_DEGTORAD))
endif
endfunction
function N5F takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),QM4))and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(GetWidgetLife(GetFilterUnit())>.405)and(K57(GetFilterUnit())))!=null
endfunction
function N2F takes aidifficulty d returns real
if d==AI_DIFFICULTY_NEWBIE then
return .2
elseif d==AI_DIFFICULTY_NORMAL then
return .1
endif
return .05
endfunction
function N_F takes nothing returns nothing
local integer O4F=GetHandleId(GetExpiredTimer())
local unit u
local real x0
local real y0
local real x1
local real y1
local real r
if LoadReal(L7,O4F,7)<TimerGetElapsed(W)then
call FlushChildHashtable(L7,O4F)
call DestroyTimer(GetExpiredTimer())
else
set u=LoadUnitHandle(L7,O4F,1)
set x0=LoadReal(L7,O4F,2)
set y0=LoadReal(L7,O4F,3)
set x1=LoadReal(L7,O4F,4)
set y1=LoadReal(L7,O4F,5)
set r=LoadReal(L7,O4F,6)
set u=null
endif
endfunction
function AI_DodgeLineStarter takes nothing returns nothing
local integer O4F
set bj_lastStartedTimer=CreateTimer()
set O4F=GetHandleId(bj_lastStartedTimer)
call SaveUnitHandle(L7,O4F,1,GetEnumUnit())
call SaveReal(L7,O4F,2,QF4)
call SaveReal(L7,O4F,3,QG4)
call SaveReal(L7,O4F,4,QH4)
call SaveReal(L7,O4F,5,QI4)
call SaveReal(L7,O4F,6,QJ4)
call SaveReal(L7,O4F,7,QK4)
call TimerStart(bj_lastStartedTimer,N2F(GetAIDifficulty(GetOwningPlayer(GetEnumUnit()))),true,function N_F)
endfunction
function O7F takes nothing returns nothing
local unit WX7=GetEnumUnit()
local real x1=GetUnitX(WX7)
local real y1=GetUnitY(WX7)
local real dx=QH4-QF4
local real dy=QI4-QG4
local real r=SquareRoot(dx*dx+dy*dy)
local real r1=((x1-QF4)*dx+(y1-QG4)*dy)/r
if r1>0 and r1<=r then
set dx=x1-QF4-dx*r1/r
set dy=y1-QG4-dy*r1/r
set r=SquareRoot(dx*dx+dy*dy)
if not((GetUnitAbilityLevel(WX7,1311780930)>0)and(N97(WX7,$D0222,1093686082)))then
if r==.0 then
call IssuePointOrderById(WX7,$D0012,x1-(y1-QG4)*QJ4/r1,y1+(x1-QF4)*QJ4/r1)
elseif r<QJ4 then
call IssuePointOrderById(WX7,$D0012,x1+dx*(QJ4/r-1),y1+dy*(QJ4/r-1))
endif
endif
endif
set WX7=null
endfunction
function O8F takes nothing returns nothing
local unit j5=GetTriggerUnit()
local unit WX7=GetEnumUnit()
local real IW
local real kl
set IW=KF7(GetUnitX(j5),GetUnitY(j5),GetUnitX(WX7),GetUnitY(WX7))
set kl=RAbsBJ(Atan2(GetLocationY(Hb)-GetUnitY(j5),GetLocationX(Hb)-GetUnitX(j5)))
if((K57(WX7))and(KF7(GetUnitX(WX7),GetUnitY(WX7),GetUnitX(j5)+IW*Cos(kl),GetUnitY(j5)+IW*Sin(kl))<300.))then
call N1F(j5,WX7,kl*bj_RADTODEG)
if h4[352+GetPlayerId(GetOwningPlayer(WX7))]==null then
set h4[352+GetPlayerId(GetOwningPlayer(WX7))]=j5
endif
endif
set j5=null
set WX7=null
endfunction
function O9F takes nothing returns nothing
local unit j5=GetTriggerUnit()
local unit WX7=GetEnumUnit()
local real IW=KF7(GetUnitX(j5),GetUnitY(j5),GetUnitX(WX7),GetUnitY(WX7))
local real kl=Atan2(GetLocationY(Hb)-GetUnitY(j5),GetLocationX(Hb)-GetUnitX(j5))
if((N6F(WX7))and(K57(WX7))and(KF7(GetUnitX(WX7),GetUnitY(WX7),GetUnitX(j5)+IW*Cos(kl),GetUnitY(j5)+IW*Sin(kl))<300.))then
call N1F(j5,WX7,kl*bj_RADTODEG)
if h4[352+GetPlayerId(GetOwningPlayer(WX7))]==null then
set h4[352+GetPlayerId(GetOwningPlayer(WX7))]=j5
endif
endif
set j5=null
set WX7=null
endfunction
function ODF takes nothing returns nothing
local unit WX7=GetEnumUnit()
local unit j5=GetTriggerUnit()
local real IW
local real kl
set IW=KF7(GetUnitX(j5),GetUnitY(j5),GetUnitX(WX7),GetUnitY(WX7))
set kl=RAbsBJ(Atan2(GetLocationY(Hb)-GetUnitY(j5),GetLocationX(Hb)-GetUnitX(j5)))
if((K57(WX7))and(((IsUnitInRange(WX7,j5,750.))and(not WNE(WX7,j5,true)))or(not DDF(WX7)))and(KF7(GetUnitX(WX7),GetUnitY(WX7),GetUnitX(j5)+IW*Cos(kl),GetUnitY(j5)+IW*Sin(kl))<700.))then
call N1F(j5,WX7,kl*bj_RADTODEG)
set G0[64+GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=true
if h4[352+GetPlayerId(GetOwningPlayer(WX7))]==null then
set h4[352+GetPlayerId(GetOwningPlayer(WX7))]=j5
endif
endif
set j5=null
set WX7=null
endfunction
function OEF takes nothing returns nothing
local unit WX7=GetEnumUnit()
local unit j5=GetTriggerUnit()
local real IW
local real kl
set IW=KF7(GetUnitX(j5),GetUnitY(j5),GetUnitX(WX7),GetUnitY(WX7))
set kl=RAbsBJ(Atan2(GetLocationY(Hb)-GetUnitY(j5),GetLocationX(Hb)-GetUnitX(j5)))
if((N6F(WX7))and(K57(WX7))and(KF7(GetUnitX(WX7),GetUnitY(WX7),GetUnitX(j5)+IW*Cos(kl),GetUnitY(j5)+IW*Sin(kl))<700.))then
call N1F(j5,WX7,kl*bj_RADTODEG)
set G0[64+GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=true
if h4[352+GetPlayerId(GetOwningPlayer(WX7))]==null then
set h4[352+GetPlayerId(GetOwningPlayer(WX7))]=j5
endif
endif
set j5=null
set WX7=null
endfunction
function OFF takes nothing returns nothing
local unit WX7=GetEnumUnit()
local unit IB=null
local real kl
if(K57(GetEnumUnit()))then
set IB=h4[272+GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]
if((IB!=null)and(IsUnitVisible(IB,GetOwningPlayer(GetEnumUnit()))))then
set kl=RAbsBJ((bj_RADTODEG*Atan2(GetUnitY(GetEnumUnit())-GetUnitY(IB),GetUnitX(GetEnumUnit())-GetUnitX(IB)))-GetUnitFacing(IB))
if(kl<50.)then
call N1F(IB,GetEnumUnit(),GetUnitFacing(IB))
set G0[64+GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=true
if h4[352+GetPlayerId(GetOwningPlayer(WX7))]==null then
set h4[352+GetPlayerId(GetOwningPlayer(WX7))]=GetTriggerUnit()
endif
endif
endif
set IB=null
endif
set WX7=null
endfunction
function OGF takes nothing returns nothing
local unit WX7=GetEnumUnit()
local unit IB=null
local real kl
if((N6F(WX7))and(K57(WX7)))then
set IB=h4[272+GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]
if((IB!=null)and(IsUnitVisible(IB,GetOwningPlayer(WX7))))then
set kl=RAbsBJ((bj_RADTODEG*Atan2(GetUnitY(WX7)-GetUnitY(IB),GetUnitX(WX7)-GetUnitX(IB)))-GetUnitFacing(IB))
if(kl<50.)then
call N1F(IB,WX7,GetUnitFacing(IB))
set G0[64+GetPlayerId(GetOwningPlayer(WX7))]=true
if h4[352+GetPlayerId(GetOwningPlayer(WX7))]==null then
set h4[352+GetPlayerId(GetOwningPlayer(WX7))]=GetTriggerUnit()
endif
endif
endif
set IB=null
endif
endfunction
function OHF takes nothing returns nothing
local unit j5=GetTriggerUnit()
local unit m5=GetEnumUnit()
local integer O5=GetPlayerId(GetOwningPlayer(m5))
local real kl=RAbsBJ((bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(j5),GetUnitX(m5)-GetUnitX(j5)))-GetUnitFacing(j5))
local real IW=KF7(GetUnitX(m5),GetUnitY(m5),GetUnitX(j5),GetUnitY(j5))
local boolean M1F
local boolean J4
if(IW>900)then
set M1F=kl<140.
elseif(IW>600)then
set M1F=(GetWidgetLife(m5)<1500.)and(kl<110.)
elseif(IW>300)then
set M1F=(GetWidgetLife(m5)<1000.)and(kl<80.)
else
set M1F=(GetWidgetLife(m5)<1000.)and(kl<50.)
endif
if(not iU(m5))then
elseif(not M1F)then
set J4=(IW<700.)and((h4[O5]==null)or(h4[O5]==j5))and((WNE(m5,j5,true))or(IssueTargetOrderById(m5,$D000F,j5)))
else
if(IW<600.)then
if(bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(j5),GetUnitX(m5)-GetUnitX(j5))>GetUnitFacing(j5))then
call IssuePointOrderById(m5,$D0012,GetUnitX(j5)+300.*Cos((GetUnitFacing(j5)+90.)*bj_DEGTORAD),GetUnitY(j5)+300.*Sin((GetUnitFacing(j5)+90.)*bj_DEGTORAD))
else
call IssuePointOrderById(m5,$D0012,GetUnitX(j5)+300.*Cos((GetUnitFacing(j5)-90.)*bj_DEGTORAD),GetUnitY(j5)+300.*Sin((GetUnitFacing(j5)-90.)*bj_DEGTORAD))
endif
elseif((GetWidgetLife(m5)<1200.)or((IW>800.)and(h4[O5]==null)))then
set G0[64+O5]=true
call jW(m5,$D0012,h9[O5])
if((GetUnitAbilityLevel(m5,1093681461)>0)and(O77(GetHandleId(GetOwningPlayer(m5)),"MyBear")!=null))then
call jW(O77(GetHandleId(GetOwningPlayer(m5)),"MyBear"),$D0012,h9[O5])
endif
endif
endif
set j5=null
set m5=null
endfunction
function OIF takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and((GetUnitAbilityLevel(GetFilterUnit(),1097102451)>0)or(GetUnitAbilityLevel(GetFilterUnit(),1097102385)>0)or(GetUnitAbilityLevel(GetFilterUnit(),1093684533)>0)or(GetUnitAbilityLevel(GetFilterUnit(),1098150517)>0)or(GetUnitAbilityLevel(GetFilterUnit(),1093683785)>0)))
endfunction
function OJF takes nothing returns boolean
return((GetUnitTypeId(GetFilterUnit())==GetUnitTypeId(GetTriggerUnit()))and(GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())))
endfunction
function OKF takes nothing returns nothing
local unit m5=GetEnumUnit()
local unit j5=GetTriggerUnit()
local item jp=MV7(m5,ZU[WC])
if((jp!=null)and((GetUnitLifePercent(j5)<50.)or((h4[GetPlayerId(GetOwningPlayer(m5))]==j5)and(GetUnitLifePercent(j5)<70.))))then
if(IsUnitInRange(j5,m5,1000.))then
call UnitUseItemPoint(m5,jp,GetUnitX(j5),GetUnitY(j5))
endif
endif
set m5=null
set j5=null
set jp=null
endfunction
function OMF takes nothing returns nothing
local unit m5=GetEnumUnit()
local unit j5=null
local integer O5=GetPlayerId(GetOwningPlayer(m5))
if(h4[O5]==GetTriggerUnit())then
set j5=MK7(500.,M07(GetTriggerUnit()),Condition(function OJF))
if(j5!=null)then
set h4[O5]=j5
if(not K57(m5))then
elseif(not iU(m5))then
call IssueTargetOrderById(m5,$D000F,j5)
else
call J3(m5,false)
endif
endif
endif
set m5=null
set j5=null
endfunction
function ONF takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return(((i1==1848651848)or(i1==1848651847)or(i1==1848651851))and(GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())))
endfunction
function OOF takes nothing returns nothing
local unit m5=GetEnumUnit()
local integer i1=GetUnitTypeId(m5)
local unit OPF=MN7(800.,M07(GetTriggerUnit()),Condition(function ONF))
if((not K57(m5))or(OPF==null))then
elseif((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))then
call N97(m5,$D0265,1093747028)
elseif(i1==1164799855)then
call M57(m5,$D006B,1093682264,OPF)
elseif(MR7(m5,ZU[J1]))then
call UnitUseItemTarget(m5,MV7(m5,ZU[J1]),OPF)
elseif(MR7(m5,ZU[D1]))then
call UnitUseItemTarget(m5,MV7(m5,ZU[D1]),OPF)
endif
set m5=null
set OPF=null
endfunction
function OQF takes nothing returns nothing
local unit j5=GetTriggerUnit()
local unit m5=GetEnumUnit()
local integer O5=GetPlayerId(GetOwningPlayer(m5))
if((K57(m5))and((not IsUnitInRange(j5,m5,500.))or(not WNE(m5,j5,false))))then
if((ME7(j5))and(not ME7(m5))and(IsUnitInRange(j5,m5,500.)))then
call IssueTargetOrderById(m5,$D000F,j5)
else
if(MP7(900.,j5,Condition(function k2))<(1+GetUnitAbilityLevel(j5,GetSpellAbilityId())))then
call jW(m5,$D0012,h9[O5])
endif
endif
endif
set j5=null
set m5=null
endfunction
function ORF takes nothing returns nothing
if((GetUnitAbilityLevel(GetEnumUnit(),1110459185)==0)or(not DDF(GetEnumUnit())))then
call ExecuteFunc("M2F")
if((GetUnitTypeId(GetEnumUnit())==1315070563)and(GetUnitAbilityLevel(GetEnumUnit(),1110459185)>0)and(not OT7(GetEnumUnit(),"Omnislashing")))then
call N97(GetEnumUnit(),$D00A0,1093678407)
endif
endif
endfunction
function OSF takes nothing returns nothing
call ExecuteFunc("OTF")
endfunction
function OTF takes nothing returns nothing
local unit m5=GetEnumUnit()
local integer i1=GetUnitTypeId(m5)
local integer IMF=GetSpellAbilityId()
if(not K57(m5))then
elseif((MR7(m5,ZU[C0]) or MR7(m5,ZU[RLL]))and(IMF!=1093678674)and(IMF!=1093677906)and(IMF!=1093681494)and(UnitUseItem(m5,MV7(m5,ZU[C0])) or UnitUseItem(m5,MV7(m5,ZU[RLL]))))then
elseif((MR7(m5,ZU[Y0]))and(IMF!=1093678674)and(IMF!=1093677906)and(IMF!=1093681494)and(UnitUseItem(m5,MV7(m5,ZU[Y0]))))then
elseif(DDF(m5))then
elseif((IMF!=1093678674)and(IMF!=1093677906)and(IMF!=1093681494)and((i1==1315007329)or(i1==1160785972)or(i1==1432510828)))then
call IssueImmediateOrderById(m5,$D00A1)
elseif((IMF!=1093678674)and(IMF!=1093677906)and(IMF!=1093681494)and(i1==1429221424))then
call N97(m5,$D00A1,1093679445)
elseif((IMF!=1093678674)and(IMF!=1093677906)and(IMF!=1093681494)and(i1==1212363833))then
call N97(m5,$D009B,1093678643)
elseif(((IMF!=1093684529)or(IMF!=1093747032))and(i1==1429221443))then
call N97(m5,$D0131,1093686322)
elseif((IMF!=1093678674)and(IMF!=1093677906)and(IMF!=1093681494)and(i1==1429221441))then
call N97(m5,$D009B,1093677903)
elseif(i1==1315988077)then
set GZ[GetPlayerId(GetOwningPlayer(m5))]=true
call J8(GetPlayerId(GetOwningPlayer(m5)),N97(m5,$D026A,1093684561))
elseif((IMF==1093684529)and(i1==1332963428))then
call M57(m5,$D0103,1093678169,m5)
elseif(i1==1214345830)then
if(IMF!=1093684529)then
set GZ[GetPlayerId(GetOwningPlayer(m5))]=true
call J8(GetPlayerId(GetOwningPlayer(m5)),M57(m5,$D00DA,1093679190,m5))
else
call IssueImmediateOrderById(m5,$D0277)
endif
elseif(i1==1311781206)then
if((IMF!=1093677906)and(IMF!=1093681494)and(IMF!=1093678674))then
call IssueImmediateOrderById(m5,$D020D)
endif
endif
set m5=null
endfunction
function OUF takes nothing returns nothing
local unit j5=GetTriggerUnit()
local unit m5=GetEnumUnit()
local integer IMF
local integer O5=GetPlayerId(GetOwningPlayer(m5))
set G0[64+O5]=true
if(K57(m5))then
if((i2(j5))and(WNE(m5,j5,false)))then
elseif(KE7(m5,h9[O5])<KE7(j5,h9[O5]))then
call jW(m5,$D0012,h9[O5])
else
call jW(m5,$D0012,h8[O5])
endif
set IMF=GetSpellAbilityId()
if((IMF==1093678388)or(IMF==1093677141)or(IMF==1093677906)or(IMF==1093681494)or((IMF==1093678674)and(GZ[GetPlayerId(GetOwningPlayer(j5))])))then
call OSF()
endif
endif
set j5=null
set m5=null
endfunction
function OVF takes nothing returns nothing
local unit m5=GetEnumUnit()
if((not iU(m5))and(GetUnitLifePercent(m5)<95.)and(h4[GetPlayerId(GetOwningPlayer(m5))]==null)and(not IsUnitInRange(GetTriggerUnit(),m5,300.)))then
call IssuePointOrderById(m5,$D0012,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
endif
set m5=null
endfunction
function OWF takes nothing returns nothing
local unit m5=GetEnumUnit()
local integer IMF=GetSpellAbilityId()
local integer O5=GetPlayerId(GetOwningPlayer(m5))
set G0[64+O5]=true
if((IMF==1093683761)or(IMF==1093747288))then
if(K57(m5))then
if(KE7(m5,h9[O5])<KF7(GetLocationX(Hb),GetLocationY(Hb),GetUnitX(h9[O5]),GetUnitY(h9[O5])))then
call jW(m5,$D0012,h9[O5])
else
call jW(m5,$D0012,h8[O5])
endif
endif
else
if((K57(m5))and((GetUnitLevel(m5)<6)or(GetUnitLifePercent(m5)<75.)or(not Id(O5))))then
if(((IMF==1093683532)or(IMF==1093681745))and(GetUnitLevel(m5)>5)and(GetUnitState(m5,UNIT_STATE_LIFE)>1300.))then
elseif((IMF==1093685825)and(KE7(m5,h9[O5])<KF7(GetLocationX(Hb),GetLocationY(Hb),GetUnitX(h9[O5]),GetUnitY(h9[O5]))))then
call jW(m5,$D0012,h9[O5])
else
call jW(m5,$D0012,h9[O5])
endif
endif
endif
set m5=null
endfunction
function OXF takes nothing returns nothing
local unit m5=GetEnumUnit()
set G0[64+GetPlayerId(GetOwningPlayer(m5))]=true
if((is(m5))and((GetUnitLevel(m5)<5)or(GetUnitLifePercent(m5)<75.)or(h4[GetPlayerId(GetOwningPlayer(m5))]==null)))then
if((GetSpellAbilityId()!=1093677877)or(MP7(500.,GetTriggerUnit(),Condition(function k0))<3))then
call jW(m5,$D0012,h9[GetPlayerId(GetOwningPlayer(m5))])
endif
endif
set m5=null
endfunction
function OYF takes nothing returns nothing
local unit m5=GetEnumUnit()
local unit j5=GetTriggerUnit()
if((GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and(K57(m5))and(IsUnitType(m5,UNIT_TYPE_HERO)))then
if(not WNE(m5,j5,true))then
set G0[64+GetPlayerId(GetOwningPlayer(m5))]=true
call jW(m5,$D0012,h9[GetPlayerId(GetOwningPlayer(m5))])
endif
endif
set m5=null
set j5=null
endfunction
function OZF takes nothing returns nothing
local unit m5=GetEnumUnit()
local unit j5=GetTriggerUnit()
if((GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and(K17(m5))and(IsUnitType(m5,UNIT_TYPE_HERO)))then
if((GetUnitLifePercent(m5)>45. or GetUnitState(m5,UNIT_STATE_LIFE)>500.)and((MP7(800.,j5,Condition(function SM7))>=2)or(MP7(650.,j5,Condition(function SK7))>=2)or((MP7(800.,j5,Condition(function SM7))>=1)and(MP7(650.,j5,Condition(function SK7))>=1))))then
set j5=MN7(800.,M07(m5),Condition(function S77))
if(j5!=null)then
set h4[GetPlayerId(GetOwningPlayer(m5))]=j5
call FNF(m5,j5)
call IssueTargetOrderById(m5,$D000F,j5)
endif
else
if(DDF(m5))then
elseif(KE7(m5,h9[GetPlayerId(GetOwningPlayer(m5))])<KE7(j5,h9[GetPlayerId(GetOwningPlayer(m5))]))then
set G0[64+GetPlayerId(GetOwningPlayer(m5))]=true
call jW(m5,$D0012,h9[GetPlayerId(GetOwningPlayer(m5))])
else
call jW(m5,$D0012,h8[GetPlayerId(GetOwningPlayer(m5))])
endif
endif
endif
set m5=null
set j5=null
endfunction
function OAF takes real OBF,real OCF returns boolean
return OBF!=null and OCF!=null
endfunction
function O3F takes location O6F,real c,real OLF,boolean O1F returns location
local real O0F=GetLocationX(O6F)
local real O5F=GetLocationY(O6F)
local real OBF=X17(O0F+(Cos(OLF*bj_DEGTORAD)*c))
local real OCF=X07(O5F+(Sin(OLF*bj_DEGTORAD)*c))
if((O1F)and(OAF(OBF,OCF)!=true))then
return null
endif
return Location(OBF,OCF)
endfunction
function O2F takes nothing returns nothing
local unit M67=GetTriggerUnit()
local unit I77=GetEnumUnit()
local location O_F=GetUnitLoc(M67)
local location P4F=GetUnitLoc(I77)
local real OLF=AngleBetweenPoints(O_F,P4F)
local real P7F=DistanceBetweenPoints(O_F,P4F)
local real c=P7F+100.
local location P8F=O3F(O_F,c,OLF,true)
if((GetPlayerController(GetOwningPlayer(I77))==MAP_CONTROL_COMPUTER)and(K57(I77))and(IsUnitType(I77,UNIT_TYPE_HERO)))then
if(P8F!=null)then
call IssuePointOrderByIdLoc(I77,$D0012,P8F)
endif
endif
set M67=null
set I77=null
call RemoveLocation(O_F)
set O_F=null
call RemoveLocation(P4F)
set P4F=null
call RemoveLocation(P8F)
set P8F=null
endfunction
function P9F takes nothing returns nothing
local unit m5=GetEnumUnit()
local integer i=0
if(GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and((MR7(m5,ZU[BA])or MR7(m5,ZU[TC])))then
set IJ4=KE7(LF4,m5)
if(IN4==null)or(IJ4<LD4)then
set IN4=m5
set LD4=IJ4
endif
endif
set m5=null
endfunction
function PDF takes nothing returns nothing
call ExecuteFunc("M2F")
endfunction
function PEF takes nothing returns nothing
local unit j5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer PFF=GetSpellAbilityId()
local integer O5=GetPlayerId(GetOwningPlayer(j5))
local real JD
local real Je
local integer UP
local real DJF
local integer i=1
local real x0
local real y0
local real x1
local real y1
local real r
if(PFF==1093684296)then
if((GetPlayerController(GetOwningPlayer(m5))!=MAP_CONTROL_USER)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
set DJF=Bz
set UP=3+(2*GetUnitAbilityLevel(j5,PFF))
loop
set JD=GetUnitX(m5)
set Je=GetUnitY(m5)
call J_7(.2)
if((GetWidgetLife(m5)<1500.)and(GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and(K57(m5))and((GetUnitX(m5)!=JD)or(GetUnitY(m5)!=Je)))then
call IssueImmediateOrderById(m5,$D0019)
endif
exitwhen((RAbsBJ(Bz-DJF)>=UP)or(not M87(m5)))
endloop
endif
elseif(PFF==1093744975)then
if((GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call J_7(.5)
loop
set i=i+1
if((IsUnitInRange(j5,m5,500.))and(is(m5))and(WNE(m5,j5,true)))then
elseif((IsUnitInRange(j5,m5,800.))and(is(m5)))then
call jW(m5,$D0012,h9[GetPlayerId(GetOwningPlayer(m5))])
set G0[64+GetPlayerId(GetOwningPlayer(m5))]=true
endif
exitwhen((i==6)or(not M87(j5))or(not M87(m5)))
call J_7(.5)
endloop
endif
elseif(PFF==1093744986)then
if((GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
loop
if(K57(m5))then
if(not WNE(m5,j5,true))then
call jW(m5,$D0012,h9[GetPlayerId(GetOwningPlayer(m5))])
set G0[64+GetPlayerId(GetOwningPlayer(m5))]=true
endif
endif
set i=i+1
exitwhen((i>$F)or(not M87(m5))or(not M87(j5)))
call J_7(.5)
endloop
endif
elseif(PFF==1093743692)then
if((GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and(IsUnitType(m5,UNIT_TYPE_HERO))and(is(m5)))then
call J_7(1.5)
set UP=GetUnitTypeId(m5)
if(UP==1429221446)then
call N97(m5,$D00D1,1093678667)
elseif(UP==1430466865)then
call M57(m5,$D0062,1093677879,m5)
elseif(UP==1214344551)then
call M57(m5,$D007F,1093809742,m5)
elseif(UP==1211117643)then
call M57(m5,$D0136,1093678410,m5)
else
call KBF(m5,j5)
endif
endif
elseif(PFF==1093750840)then
if((GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call J_7(.5)
loop
if((IsUnitInRange(j5,m5,600.))and(is(m5))and(WNE(m5,j5,true)))then
elseif((MO7(700.,M07(m5),Condition(function QX7))==0)and(MO7(700.,M07(m5),Condition(function KQ))==0)and(IsUnitInRange(j5,m5,1500.))and(is(m5)))then
call jW(m5,$D0012,h9[GetPlayerId(GetOwningPlayer(m5))])
endif
exitwhen((GetUnitAbilityLevel(m5,1110454617)==0)or(not M87(j5))or(not M87(m5)))
call J_7(.5)
endloop
endif
elseif((PFF==1093808453)or(PFF==1093681729)or(PFF==1093678147))then
set LG4=false
if(PFF==1093808453)then
call J_7(1)
set bj_lastLoadedUnit=j5
set m5=MN7($96,HC[O5],Condition(function QP7))
if m5!=null then
set LD4=99999
set IH4=GetPlayerId(GetOwningPlayer(m5))
set LF4=null
if((h4[IH4]!=null)or((G0[256+IH4])and(not ME7(m5))and(GetHeroLevel(m5)>4)))then
if(h4[IH4]!=null)then
set IN4=h4[IH4]
else
set IN4=h8[IH4]
endif
else
set IN4=h9[IH4]
endif
set UP=1
loop
exitwhen UP>8
set bj_lastCreatedDestructable=O47(GetHandleId(j5),"AI|SproutTree"+I2S(UP))
set IJ4=KE7(bj_lastCreatedDestructable,IN4)
if IJ4<LD4 then
set LF4=bj_lastCreatedDestructable
set LD4=IJ4
endif
call NY7(GetHandleId(j5),"AI|SproutTree"+I2S(UP),null)
set UP=UP+1
endloop
set LD4=99999
set IN4=null
call IV(GetLocationX(HC[O5]),GetLocationY(HC[O5]),350,Condition(function QP7),function P9F)
set m5=IN4
if(m5!=null)and(MR7(m5,ZU[BA])or MR7(m5,ZU[TC]))then
call UnitUseItemTarget(m5,bj_lastCreatedItem,LF4)
endif
endif
endif
if((PFF!=1093808453)or(LD4>600))and((m5!=null)and(GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and(IsUnitType(m5,UNIT_TYPE_HERO))and(K57(m5)))then
if(PFF!=1093808453)then
call J_7(1)
endif
set UP=GetUnitTypeId(m5)
if((UP==1211117653)and(Bz>T34[80+GetPlayerId(GetOwningPlayer(m5))])and UG7(m5,A54,A54,A24,1093687372)and(U87(m5,A24,A24,A24,false)))then
call IssueImmediateOrderById(m5,$D00A1)
elseif((UP==1429221441)or(UP==1165451634)or(UP==1212365106))then
call IssueTargetOrderById(m5,$D0278,j5)
elseif((PFF==1093678147)and(UP==1315070563))then
if(not OT7(m5,"Omnislashing"))then
call N97(m5,$D00A0,1093678407)
endif
elseif((PFF==1093808453)and(UP==1164666213))then
set GZ[64+GetPlayerId(GetOwningPlayer(m5))]=true
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093678679,true)
call IssuePointOrderById(m5,$D02B6,GetUnitX(m5)+10.,GetUnitY(m5)+10.)
set GZ[64+GetPlayerId(GetOwningPlayer(m5))]=false
elseif((PFF==1093808453)and(UP==1211117636))then
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093685041,true)
if((GetUnitLifePercent(m5)>50.)or(GetUnitLifePercent(j5)<50.))then
set DJF=bj_RADTODEG*Atan2(GetUnitY(j5)-GetUnitY(m5),GetUnitX(j5)-GetUnitX(m5))
else
set DJF=bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(j5),GetUnitX(m5)-GetUnitX(j5))
endif
set GZ[GetPlayerId(GetOwningPlayer(m5))]=true
call J8(GetPlayerId(GetOwningPlayer(m5)),IssuePointOrderById(m5,$D00FA,GetUnitX(m5)+900.*Cos(DJF*bj_DEGTORAD),GetUnitY(m5)+900.*Sin(DJF*bj_DEGTORAD)))
elseif((PFF==1093808453)and(UP==1211117620))then
set GZ[64+GetPlayerId(GetOwningPlayer(m5))]=true
call MoveLocation(HA,GetWidgetX(m5)+$A,GetWidgetY(m5)+$A)
call M27(m5,$D0108,1093677623,HA)
set GZ[64+GetPlayerId(GetOwningPlayer(m5))]=false
elseif((PFF==1093808453)and(UP==1212365106))then
set GZ[64+GetPlayerId(GetOwningPlayer(m5))]=true
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093685831,true)
call IssuePointOrderById(m5,$D0079,GetUnitX(m5)+10.,GetUnitY(m5)+10.)
set GZ[64+GetPlayerId(GetOwningPlayer(m5))]=false
elseif((GetUnitLifePercent(j5)<50.)and(kJ(GetUnitX(j5),GetUnitY(j5)))and(GetUnitLifePercent(m5)>50.))then
if(UP==1162032181)then
call IssueTargetOrderById(m5,$D00FA,j5)
elseif((UP==1430466609)or(UP==1164207469))then
call IssueTargetOrderById(m5,$D022D,j5)
elseif(UP==1429221451)then
call IssueTargetOrderById(m5,$D00FA,j5)
elseif(UP==1328558160)then
call M57(m5,$D00FA,1093682766,j5)
elseif(MR7(m5,ZU[RW]))then
call UnitUseItemPoint(m5,MV7(m5,ZU[RW]),GetUnitX(j5),GetUnitY(j5))
else
call DDF(m5)
endif
else
call DDF(m5)
endif
endif
elseif((PFF==1093684565)or(PFF==1093681458)or(PFF==1093679152)or(PFF==1093752154))then
if((GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and(IsUnitType(m5,UNIT_TYPE_HERO))and(not IsUnitIllusion(m5))and(GetWidgetLife(m5)<1200.))then
call PW7(m5,false)
endif
elseif(PFF==1093750345)then
elseif(PFF==1093677646)then
if((GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
loop
if((iU(m5))and(not ME7(m5)))then
call IssueTargetOrderById(m5,$D000F,j5)
endif
exitwhen((GetUnitCurrentOrder(j5)!=$D0207)or(not M87(m5))or(not M87(j5)))
call J_7(.5)
endloop
endif
elseif((PFF==1093753177)or(PFF==1093808181))then
if((IsUnitVisible(j5,Z7[0]))and(IsUnitVisible(j5,A7[0])))then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
call J_7(.2)
call MoveLocation(Hb,JD,Je)
call TriggerSleepAction(.5)
loop
call IV(GetUnitX(j5),GetUnitY(j5),1800.,Condition(function SW7),function ODF)
call J_7(.8)
exitwhen((GetUnitAbilityLevel(m5,1110459478)==0)or(not M87(m5))or(not M87(j5)))
endloop
endif
elseif(PFF==1093751371)then
call J_7(.2)
set DJF=Bz
loop
call IV(GetUnitX(j5),GetUnitY(j5),1100.,Condition(function SW7),function OZF)
call J_7(1.)
exitwhen((RAbsBJ(Bz-DJF)>=7.7)or(not M87(j5)))
endloop
elseif((PFF==1093681987)or(PFF==1093677658)or(PFF==1093678156))then
if((GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
loop
if(K57(m5))then
if(not WNE(m5,j5,true))then
call jW(m5,$D0012,h9[GetPlayerId(GetOwningPlayer(m5))])
set G0[64+GetPlayerId(GetOwningPlayer(m5))]=true
endif
endif
exitwhen((GetUnitCurrentOrder(j5)!=$D0207)or(not M87(m5))or(not M87(j5)))
call J_7(.5)
endloop
endif
elseif((PFF==1093677367)or(PFF==1093816646)or(PFF==1093678913)or(PFF==1093677621)or(PFF==1093679445)or(PFF==1093677402))then
call TriggerSleepAction(.5)
if((not IsUnitVisible(j5,Z7[0]))or(not IsUnitVisible(j5,A7[0])))then
call IV(GetUnitX(j5),GetUnitY(j5),1000.,Condition(function KO),function OKF)
endif
elseif((PFF==1093681720)or(PFF==1093678643)or(PFF==1093677903))then
call TriggerSleepAction(1.)
if((MP7(800.,j5,Condition(function OIF))==0)and(not lA(j5,not IsUnitAlly(j5,Z7[0]))))then
call IV(GetUnitX(j5),GetUnitY(j5),1000.,Condition(function SW7),function OMF)
endif
elseif(PFF=='A2W7')then
call TriggerSleepAction(.5)
if((not IsUnitVisible(j5,Z7[0]))or(not IsUnitVisible(j5,A7[0])))then
call IV(GetUnitX(j5),GetUnitY(j5),1000.,Condition(function SW7),function OMF)
endif
elseif((PFF==1093687351)or(PFF==1093687349)or(PFF==1093678671)or(PFF==1093686091))then
if((IsUnitVisible(j5,Z7[0]))and(IsUnitVisible(j5,A7[0])))then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set x0=GetUnitX(j5)
set y0=GetUnitY(j5)
set QJ4=SquareRoot((JD-x0)*(JD-x0)+(Je-y0)*(Je-y0))
if(PFF==1093686091)then
set r=1400.
else
set r=700.
endif
set x1=x0+(JD-x0)*r/QJ4
set y1=y0+(Je-y0)*r/QJ4
call J_7(.1)
set QM4=GetOwningPlayer(j5)
set QJ4=300.
set QF4=x0
set QG4=y0
set QH4=x1
set QI4=y1
call IV(x0,y0,r,Condition(function N5F),function O7F)
endif
elseif(PFF==1093686861)then
set r=1500
set DJF=TimerGetElapsed(W)
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set x0=GetUnitX(j5)
set y0=GetUnitY(j5)
set QJ4=SquareRoot((JD-x0)*(JD-x0)+(Je-y0)*(Je-y0))
set x1=x0+(JD-x0)*r/QJ4
set y1=y0+(Je-y0)*r/QJ4
set m5=j5
loop
exitwhen((m5!=null)and(IsUnitVisible(m5,Z7[0]))and(IsUnitVisible(m5,A7[0])))
call J_7(.3)
call GroupClear(iF)
set bj_groupEnumTypeId=1848652120
call GroupEnumUnitsOfPlayer(iF,GetOwningPlayer(j5),filterGetUnitsOfPlayerAndTypeId)
set m5=GroupPickRandomUnit(iF)
exitwhen(RAbsBJ(TimerGetElapsed(W)-DJF)>1.5)
endloop
call J_7(.2)
loop
exitwhen(RAbsBJ(TimerGetElapsed(W)-DJF)>1.5)
set QM4=GetOwningPlayer(j5)
set QJ4=400
set QF4=GetUnitX(m5)
set QG4=GetUnitY(m5)
set QH4=x1
set QI4=y1
call IV(QF4,QG4,r,Condition(function N5F),function O7F)
call J_7(.4)
endloop
elseif(PFF==1093686862)then
set DJF=TimerGetElapsed(W)+3.5
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set x0=JD-GetUnitX(j5)
set y0=Je-GetUnitY(j5)
set r=SquareRoot(x0*x0+y0*y0)
set x0=x0*1800./r
set y0=y0*1800./r
loop
set bj_groupEnumTypeId=1697657164
call GroupEnumUnitsOfPlayer(iF,GetOwningPlayer(j5),filterGetUnitsOfPlayerAndTypeId)
loop
set m5=FirstOfGroup(iF)
exitwhen m5==null or(GetWidgetLife(m5)>.405)
call GroupRemoveUnit(iF,m5)
endloop
set h4[272+O5]=m5
exitwhen((m5!=null)and(IsUnitVisible(m5,Z7[0]))and(IsUnitVisible(m5,A7[0])))
call J_7(.4)
exitwhen TimerGetElapsed(W)>DJF
endloop
call J_7(.2)
loop
exitwhen(TimerGetElapsed(W)>DJF)or(GetWidgetLife(m5)<.405)
set QM4=GetOwningPlayer(j5)
set QF4=GetUnitX(m5)
set QG4=GetUnitY(m5)
set QH4=QF4+x0
set QI4=QG4+y0
set QJ4=400.
call IV(QF4,QG4,1800.,Condition(function N5F),function O7F)
call J_7(.5)
endloop
elseif(PFF==1093686859)then
set DJF=TimerGetElapsed(W)+3.
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set x0=JD-GetUnitX(j5)
set y0=Je-GetUnitY(j5)
set r=SquareRoot(x0*x0+y0*y0)
set x0=x0*1800./r
set y0=y0*1800./r
loop
set bj_groupEnumTypeId=1848652117
call GroupEnumUnitsOfPlayer(iF,GetOwningPlayer(j5),filterGetUnitsOfPlayerAndTypeId)
loop
set m5=FirstOfGroup(iF)
exitwhen m5==null or(GetWidgetLife(m5)>.405)
call GroupRemoveUnit(iF,m5)
endloop
set h4[272+O5]=m5
exitwhen((m5!=null)and(IsUnitVisible(m5,Z7[0]))and(IsUnitVisible(m5,A7[0])))
call J_7(.8)
exitwhen TimerGetElapsed(W)>DJF
endloop
call J_7(.2)
loop
exitwhen(TimerGetElapsed(W)>DJF)or(GetWidgetLife(m5)<.405)
set QM4=GetOwningPlayer(j5)
set QF4=GetUnitX(m5)
set QG4=GetUnitY(m5)
set QH4=QF4+x0
set QI4=QG4+y0
set QJ4=450.
call IV(QF4,QG4,1800.,Condition(function N5F),function O7F)
call J_7(.5)
endloop
elseif((PFF==1093750841)or(PFF==1093684291))then
if(MO7(1200.,GetUnitLoc(j5),Condition(function QU7))>1)then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
call IV(JD,Je,1100.,Condition(function SW7),function OYF)
endif
elseif(PFF==1093678665 or PFF==1093817137)then
set r=900+($64*(GetUnitAbilityLevel(j5,1093678697)+GetUnitAbilityLevel(j5,1093817137)))
set DJF=TimerGetElapsed(W)
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set x0=GetUnitX(j5)
set y0=GetUnitY(j5)
set QJ4=SquareRoot((JD-x0)*(JD-x0)+(Je-y0)*(Je-y0))
set x1=x0+(JD-x0)*r/QJ4
set y1=y0+(Je-y0)*r/QJ4
set m5=j5
loop
exitwhen((m5!=null)and(IsUnitVisible(m5,Z7[0]))and(IsUnitVisible(m5,A7[0])))
call J_7(.3)
call GroupClear(iF)
set bj_groupEnumTypeId=1966092360
call GroupEnumUnitsOfPlayer(iF,GetOwningPlayer(j5),filterGetUnitsOfPlayerAndTypeId)
set m5=GroupPickRandomUnit(iF)
exitwhen(RAbsBJ(TimerGetElapsed(W)-DJF)>1.)
endloop
call J_7(.2)
loop
exitwhen(RAbsBJ(TimerGetElapsed(W)-DJF)>1.)
set QM4=GetOwningPlayer(j5)
set QJ4=275.
set QF4=GetUnitX(m5)
set QG4=GetUnitY(m5)
set QH4=x1
set QI4=y1
call IV(QF4,QG4,r,Condition(function N5F),function O7F)
call J_7(.4)
endloop
elseif(PFF==1093751604)then
set r=1500
set DJF=TimerGetElapsed(W)
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set x0=GetUnitX(j5)
set y0=GetUnitY(j5)
set QJ4=SquareRoot((JD-x0)*(JD-x0)+(Je-y0)*(Je-y0))
set x1=x0+(JD-x0)*r/QJ4
set y1=y0+(Je-y0)*r/QJ4
set m5=j5
loop
exitwhen((m5!=null)and(IsUnitVisible(m5,Z7[0]))and(IsUnitVisible(m5,A7[0])))
call J_7(.3)
call GroupClear(iF)
set bj_groupEnumTypeId=1747993394
call GroupEnumUnitsOfPlayer(iF,GetOwningPlayer(j5),filterGetUnitsOfPlayerAndTypeId)
set m5=GroupPickRandomUnit(iF)
exitwhen(RAbsBJ(TimerGetElapsed(W)-DJF)>1.5)
endloop
call J_7(.2)
loop
exitwhen(RAbsBJ(TimerGetElapsed(W)-DJF)>1.5)
set QM4=GetOwningPlayer(j5)
set QJ4=300
set QF4=GetUnitX(m5)
set QG4=GetUnitY(m5)
set QH4=x1
set QI4=y1
call IV(QF4,QG4,r,Condition(function N5F),function O7F)
call J_7(.4)
endloop
elseif(PFF==1095716681)then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
call J_7(.1)
loop
call GroupClear(iF)
set bj_groupEnumTypeId=1697657172
call GroupEnumUnitsOfPlayer(iF,GetOwningPlayer(j5),filterGetUnitsOfPlayerAndTypeId)
set m5=GroupPickRandomUnit(iF)
exitwhen((m5!=null)and(IsUnitVisible(m5,Z7[0]))and(IsUnitVisible(m5,A7[0])))
call J_7(.3)
exitwhen(m5==null)
endloop
loop
call GroupClear(iF)
set bj_groupEnumTypeId=1697657172
call GroupEnumUnitsOfPlayer(iF,GetOwningPlayer(j5),filterGetUnitsOfPlayerAndTypeId)
set m5=FirstOfGroup(iF)
exitwhen(m5==null)
call MoveLocation(Hb,JD,Je)
call IV(JD,Je,1000.,Condition(function SW7),function OEF)
call J_7(.5)
endloop
elseif(PFF==1093679157)then
call J_7(.1)
set DJF=I2R($258+($FA*GetUnitAbilityLevel(j5,1093679157)))
loop
call GroupClear(iF)
set bj_groupEnumTypeId=1966092362
call GroupEnumUnitsOfPlayer(iF,GetOwningPlayer(j5),filterGetUnitsOfPlayerAndTypeId)
set m5=FirstOfGroup(iF)
exitwhen((m5!=null)and(IsUnitVisible(m5,Z7[0]))and(IsUnitVisible(m5,A7[0])))
call J_7(.3)
exitwhen((GetUnitCurrentOrder(j5)!=$D0278)or(not M87(j5)))
endloop
loop
exitwhen((GetUnitCurrentOrder(j5)!=$D0278)or(not M87(j5)))
call IV(GetUnitX(j5),GetUnitY(j5),DJF,Condition(function SW7),function OHF)
call J_7(.5)
endloop
elseif(PFF==1093684280)then
set DJF=TimerGetElapsed(W)+3.5
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set x0=JD-GetUnitX(j5)
set y0=Je-GetUnitY(j5)
set r=SquareRoot(x0*x0+y0*y0)
set x0=x0*1000./r
set y0=y0*1000./r
loop
set bj_groupEnumTypeId=1747988533
call GroupEnumUnitsOfPlayer(iF,GetOwningPlayer(j5),filterGetUnitsOfPlayerAndTypeId)
loop
set m5=FirstOfGroup(iF)
exitwhen m5==null or(GetWidgetLife(m5)>.405)
call GroupRemoveUnit(iF,m5)
endloop
set h4[272+O5]=m5
exitwhen((m5!=null)and(IsUnitVisible(m5,Z7[0]))and(IsUnitVisible(m5,A7[0])))
call J_7(.1)
exitwhen TimerGetElapsed(W)>DJF
endloop
call J_7(.1)
loop
exitwhen(TimerGetElapsed(W)>DJF)or(GetWidgetLife(m5)<.405)
set QM4=GetOwningPlayer(j5)
set QF4=GetUnitX(m5)
set QG4=GetUnitY(m5)
set QH4=QF4+x0
set QI4=QG4+y0
set QJ4=300.
call IV(QF4,QG4,1000.,Condition(function N5F),function O7F)
call J_7(.1)
endloop
elseif(PFF==1093677136)then
loop
call J_7(.8)
exitwhen((GetUnitAbilityLevel(m5,1110454328)==0)or(GetUnitCurrentOrder(j5)!=$D0200))
call FNF(j5,m5)
endloop
elseif((PFF==1093684815)or(PFF==1093686072)or(PFF==1093685573))then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
if(PFF==1093684815)then
set UP=$B4
elseif(PFF==1093685573)then
set UP=$C8+100*GetUnitAbilityLevel(j5,1093685573)
else
set UP=400
endif
call IV(JD,Je,UP,Condition(function SW7),function PDF)
elseif((PFF=='A11K')or(PFF=='A136')or(PFF==1093684564)or(PFF==1093812807)or(PFF==1093817153)or(PFF==1093677623)or(PFF==1093678644)or(PFF==1093681754)or(PFF==1093678679)or(PFF==1093686855))then
if((IsUnitVisible(j5,Z7[0]))and(IsUnitVisible(j5,A7[0])))then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
if(PFF==1093678679)then
set UP=$82+(25*GetUnitAbilityLevel(j5,1093678679))
elseif(PFF==1093677623)then
set UP=$FA
elseif(PFF==1093812807 or PFF==1093817153)then
set UP=185
elseif(PFF==1093686855 or PFF=='A136')then
set UP=225
elseif(PFF=='A11K')then
set UP=425
else
set UP=500
if(PFF==1093678644)then
call J_7(.5)
endif
endif
set DJF=Bz
loop
exitwhen(RAbsBJ(Bz-DJF)>=1.5)
call IV(JD,Je,UP,Condition(function SW7),function OWF)
call J_7(.4)
endloop
call J_7(.4)
call IV(JD,Je,UP,Condition(function SW7),function PDF)
endif
elseif((PFF==1093678420)or(PFF==1093679176)or(PFF==1093684529)or(PFF==1093747032))then
call J_7(.5)
call IV(GetUnitX(m5),GetUnitY(m5),600.,Condition(function SW7),function OSF)
elseif((PFF==1093677382)or(PFF==1093677651)or(PFF==1093685047)or(PFF==1093677645)or(PFF==1093678670)or(PFF==1093678898)or(PFF==1093678900)or(PFF==1093678904)or(PFF==1093682766)or(PFF==1093677894)or(PFF==1093810258)or(PFF==1093810259))then
call IV(GetUnitX(j5)+350.*Cos(GetUnitFacing(j5)*bj_DEGTORAD),GetUnitY(j5)+350.*Sin(GetUnitFacing(j5)*bj_DEGTORAD),450.,Condition(function SW7),function PDF)
elseif((PFF==1093678405)or(PFF==1093810505)or(PFF==1093677363)or(PFF==1093681462))then
call J_7(.5)
call IV(GetUnitX(j5),GetUnitY(j5),900.,Condition(function SW7),function PDF)
elseif((PFF==1093678669)or(PFF==1093679182)or(PFF==1093677913)or(PFF==1093677139)or(PFF==1093810507)or(PFF==1093682252)or(PFF==1093686083))then
call IV(GetUnitX(j5),GetUnitY(j5),350.,Condition(function SW7),function PDF)
elseif((PFF==1093678422)or(PFF==1093682248)or(PFF==1093810508)or(PFF==1093684054))then
call IV(GetUnitX(j5),GetUnitY(j5),550.,Condition(function SW7),function PDF)
elseif((PFF==1093677145)or(PFF==1093682994)or(PFF==1093677360)or(PFF==1093677616))then
call IV(GetUnitX(m5),GetUnitY(m5),450.,Condition(function SW7),function PDF)
elseif(PFF==1093678938)then
call J_7(1.)
call IV(GetUnitX(j5),GetUnitY(j5),950.,Condition(function SW7),function ORF)
elseif((PFF==1093683266)or(PFF==1093682227)or(PFF==1093682246))then
call J_7(1.)
call IV(GetUnitX(j5),GetUnitY(j5),1000.,Condition(function SW7),function OOF)
elseif((PFF==1093682521)or(PFF==1093682760)or(PFF==1093682736))then
if(PFF==1093682521)then
set DJF=200.
elseif(PFF==1093682760)then
set DJF=450.
elseif(PFF==1093682736)then
set DJF=700.
endif
call IV(GetUnitX(j5)+DJF*Cos(GetUnitFacing(j5)*bj_DEGTORAD),GetUnitY(j5)+DJF*Sin(GetUnitFacing(j5)*bj_DEGTORAD),350.,Condition(function SW7),function PDF)
elseif((PFF==1093678388)or(PFF==1093677141)or(PFF==1093810506))then
call IV(GetUnitX(j5),GetUnitY(j5),850.,Condition(function SW7),function OUF)
elseif((PFF==1093683248)or(PFF==1093685846))then
call TriggerSleepAction(.1)
loop
call IV(GetUnitX(j5),GetUnitY(j5),700.,Condition(function SW7),function N3F)
exitwhen(((IsUnitVisible(j5,Z7[0]))and(IsUnitVisible(j5,A7[0])))or(not M87(j5)))
call J_7(1.5)
endloop
elseif(PFF==1093677378)then
set DJF=Bz
loop
exitwhen(RAbsBJ(Bz-DJF)>=9.)
call IV(GetUnitX(j5),GetUnitY(j5),700.,Condition(function Kq),function OVF)
call J_7(.8)
endloop
elseif(PFF==1093681713)then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set DJF=Bz
call J_7(.5)
loop
exitwhen(RAbsBJ(Bz-DJF)>=7.5)
call IV(JD,Je,550.,Condition(function SW7),function OWF)
call J_7(.6)
endloop
elseif(PFF==1093677385)then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set DJF=Bz
call J_7(.5)
loop
exitwhen(RAbsBJ(Bz-DJF)>=6.5)
call IV(JD,Je,300.,Condition(function SW7),function OWF)
call J_7(.6)
endloop
elseif(PFF==1093685825)then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set DJF=Bz
call J_7(.5)
loop
exitwhen(RAbsBJ(Bz-DJF)>=9.)
call IV(JD,Je,450.,Condition(function SW7),function OWF)
call J_7(.6)
endloop
elseif(PFF==1093683532)then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set DJF=Bz
call J_7(.5)
loop
exitwhen(RAbsBJ(Bz-DJF)>=10.5)
call IV(JD,Je,630.,Condition(function SW7),function OWF)
call J_7(.6)
endloop
elseif(PFF==1093681745)then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set DJF=Bz
call J_7(.5)
loop
exitwhen(RAbsBJ(Bz-DJF)>=7.5)
call IV(JD,Je,1000.,Condition(function SW7),function OWF)
call J_7(.6)
endloop
elseif(PFF==1093685831)then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set UP=360+(80*GetUnitAbilityLevel(j5,1093685831))
set DJF=Bz
call J_7(.5)
loop
exitwhen(RAbsBJ(Bz-DJF)>=6.5)
call IV(JD,Je,UP,Condition(function SW7),function OWF)
call J_7(.6)
endloop
elseif(PFF==1093678407)then
set DJF=Bz
loop
exitwhen(RAbsBJ(Bz-DJF)>=4.5)
call IV(GetUnitX(j5),GetUnitY(j5),420.,Condition(function SW7),function OXF)
call J_7(.6)
endloop
elseif(PFF==1093677877)then
set DJF=Bz
call J_7(.5)
loop
exitwhen(RAbsBJ(Bz-DJF)>=7.5)
call IV(GetUnitX(j5),GetUnitY(j5),680.,Condition(function SW7),function OXF)
call J_7(.6)
endloop
elseif(PFF==1093685045)then
set DJF=Bz
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
loop
exitwhen(RAbsBJ(Bz-DJF)>=4.5)
call IV(JD,Je,950.,Condition(function SW7),function OWF)
call J_7(.5)
endloop
elseif(PFF==1093683761)then
call J_7(1.)
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set DJF=Bz
loop
exitwhen((not GZ[384+O5])or(RAbsBJ(Bz-DJF)>=5.))
call MoveLocation(Hb,JD,Je)
call IV(JD,Je,750.,Condition(function SW7),function OWF)
call J_7(.5)
endloop
set GZ[384+O5]=false
elseif(PFF==1093678674)then
loop
call J_7(.5)
exitwhen((GetUnitCurrentOrder(j5)!=$D0265)or(not M87(j5)))
call IV(GetUnitX(j5),GetUnitY(j5),750.,Condition(function SW7),function OUF)
endloop
call J_7(.5)
if(GZ[384+O5])then
set UP=0
loop
exitwhen((not GZ[384+O5])or(UP>$C))
call IV(GetUnitX(j5),GetUnitY(j5),550.,Condition(function SW7),function OUF)
call J_7(.6)
set UP=UP+1
endloop
set GZ[384+O5]=false
endif
elseif((PFF==1093684820)or(PFF==1093684824))then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
call J_7(.5)
loop
call J_7(.6)
exitwhen((GetUnitCurrentOrder(j5)!=$D0275)or(not M87(j5)))
call IV(JD,Je,900.,Condition(function SW7),function OUF)
endloop
elseif((PFF==1093677906)or(PFF==1093681494))then
call J_7(.5)
loop
call J_7(.6)
exitwhen((GetUnitCurrentOrder(j5)!=$D0278)or(not M87(j5)))
call IV(GetUnitX(j5),GetUnitY(j5),900.,Condition(function SW7),function OUF)
endloop
elseif((PFF==1093678899)or(PFF==1093677898)or(PFF==1093678154)or(PFF==1093678157)or(PFF==1093678158))then
set DJF=Bz
loop
exitwhen((RAbsBJ(Bz-DJF)>=29.)or(not M87(j5)))
call IV(GetUnitX(j5),GetUnitY(j5),1200.,Condition(function SW7),function OQF)
call J_7(.8)
endloop
elseif(PFF==1093747288)then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
loop
call J_7(.6)
exitwhen((GetUnitCurrentOrder(j5)!=$D00DC)or(not M87(j5)))
call MoveLocation(Hb,JD,Je)
call IV(JD,Je,1000.,Condition(function SW7),function OWF)
endloop
elseif((PFF==1093808454)or(PFF==1093808455))then
loop
call J_7(1.)
exitwhen((GetUnitAbilityLevel(j5,1110454836)==0)or(not M87(j5)))
call IV(GetUnitX(j5),GetUnitY(j5),350.,Condition(function SW7),function OXF)
endloop
elseif(PFF==1093686867)then
if((IsUnitVisible(j5,Z7[0]))and(IsUnitVisible(j5,A7[0])))then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set x0=GetUnitX(j5)
set y0=GetUnitX(j5)
set DJF=Bz
call H7F(j5,j5)
loop
exitwhen(RAbsBJ(Bz-DJF)>=3.5)
call IV(JD,Je,700,Condition(function SW7),function OWF)
call IV(x0,y0,700,Condition(function SW7),function OWF)
call J_7(.4)
endloop
call J_7(.4)
call IV(JD,Je,UP,Condition(function SW7),function PDF)
endif
elseif(PFF==1093747009)then
if((IsUnitVisible(j5,Z7[0]))and(IsUnitVisible(j5,A7[0])))then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set x0=GetUnitX(j5)
set y0=GetUnitX(j5)
set DJF=Bz
call H7F(j5,j5)
loop
exitwhen(RAbsBJ(Bz-DJF)>=1.3)
call IV(JD,Je,525,Condition(function SW7),function OWF)
call IV(x0,y0,525,Condition(function SW7),function OWF)
call J_7(.4)
endloop
call J_7(.4)
call IV(JD,Je,UP,Condition(function SW7),function PDF)
endif
elseif(PFF==1093746993)then
set r=2400
set DJF=TimerGetElapsed(W)
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set x0=GetUnitX(j5)
set y0=GetUnitY(j5)
set QJ4=SquareRoot((JD-x0)*(JD-x0)+(Je-y0)*(Je-y0))
set x1=x0+(JD-x0)*r/QJ4
set y1=y0+(Je-y0)*r/QJ4
set m5=j5
call J_7(1.)
loop
exitwhen(RAbsBJ(TimerGetElapsed(W)-DJF)>2.9)
set QM4=GetOwningPlayer(j5)
set QJ4=375.
set QF4=GetUnitX(m5)
set QG4=GetUnitY(m5)
set QH4=x1
set QI4=y1
call IV(QF4,QG4,r,Condition(function N5F),function O7F)
call J_7(.4)
endloop
elseif(PFF==1093686091)then
set r=1400
set DJF=TimerGetElapsed(W)
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set x0=GetUnitX(j5)
set y0=GetUnitY(j5)
set QJ4=SquareRoot((JD-x0)*(JD-x0)+(Je-y0)*(Je-y0))
set x1=x0+(JD-x0)*r/QJ4
set y1=y0+(Je-y0)*r/QJ4
set m5=j5
call J_7(0.1)
loop
exitwhen(RAbsBJ(TimerGetElapsed(W)-DJF)>0.2)
set QM4=GetOwningPlayer(j5)
set QJ4=300.
set QF4=GetUnitX(m5)
set QG4=GetUnitY(m5)
set QH4=x1
set QI4=y1
call IV(QF4,QG4,r,Condition(function N5F),function O7F)
call J_7(.1)
endloop
elseif(PFF==1093678929)then
if GetPlayerController(GetOwningPlayer(j5))==MAP_CONTROL_COMPUTER then
call RemoveGuardPosition(j5)
endif
elseif(PFF==1093678658)then
call H7F(j5,j5)
elseif(PFF==1093813555)then
set r=600+($C8*GetUnitAbilityLevel(j5,1093813555))
set DJF=TimerGetElapsed(W)
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set x0=GetUnitX(j5)
set y0=GetUnitY(j5)
set QJ4=SquareRoot((JD-x0)*(JD-x0)+(Je-y0)*(Je-y0))
set x1=x0+(JD-x0)*r/QJ4
set y1=y0+(Je-y0)*r/QJ4
set m5=j5
loop
exitwhen((m5!=null)and(IsUnitVisible(m5,Z7[0]))and(IsUnitVisible(m5,A7[0])))
call J_7(.3)
call GroupClear(iF)
set bj_groupEnumTypeId=1966092360
call GroupEnumUnitsOfPlayer(iF,GetOwningPlayer(j5),filterGetUnitsOfPlayerAndTypeId)
set m5=GroupPickRandomUnit(iF)
exitwhen(RAbsBJ(TimerGetElapsed(W)-DJF)>1.)
endloop
call J_7(.2)
loop
exitwhen(RAbsBJ(TimerGetElapsed(W)-DJF)>1.)
set QM4=GetOwningPlayer(j5)
set QJ4=250.
set QF4=GetUnitX(m5)
set QG4=GetUnitY(m5)
set QH4=x1
set QI4=y1
call IV(QF4,QG4,r,Condition(function N5F),function O7F)
call J_7(.4)
endloop
elseif(PFF==DZ7[1]or PFF==DZ7[2]or PFF==DZ7[3])and TZ7(Player(O5))then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set LD4=KF7(GetUnitX(j5),GetUnitY(j5),JD,Je)/(2.5*GetUnitMoveSpeed(j5))-.4
if LD4>0 then
call PolledWait(LD4)
else
call PolledWait(.1)
endif
set bj_lastLoadedUnit=j5
call MoveLocation(HA,JD,Je)
set LG4=(iU(j5))and((OT7(j5,"AI|EmberEscape")or(MO7(300,HA,Condition(function QP7))!=0))and IssuePointOrderById(j5,$D00D9,JD,Je))
call OX7(j5,"AI|EmberEscape")
elseif(PFF==1093751349 or PFF==1093743415 or PFF==1093808945 or PFF==1093816630)then
set eY[$E0+O5]=R2I(Bz)+67
set hq[832+O5]=R2I(Bz)+9
endif
set j5=null
set m5=null
endfunction
function PGF takes nothing returns nothing
local unit j5=GetTriggerUnit()
local integer O5=GetPlayerId(GetOwningPlayer(j5))
local integer PFF=GetSpellAbilityId()
local boolean MVF=(GetPlayerController(Player(O5))==MAP_CONTROL_COMPUTER)
local unit m5=GetSpellTargetUnit()
local integer X5
local integer i1
local integer UP=1
if(PFF==1093751349 or PFF==1093743415 or PFF==1093808945 or PFF==1093816630)then
set hq[832+O5]=0
endif
if(PFF==1093751349 or PFF==1093743415)and MVF then
call J_7(.1)
if(U84[O5]!=null)and(not UnitHasItem(j5,U84[O5]))then
if MR7(j5,ZU[YC])then
call RemoveItem(bj_lastCreatedItem)
endif
if UnitAddItem(j5,U84[O5])then
set U84[O5]=null
endif
endif
endif
if(PFF==1093751349 or PFF==1093743415)or(PFF==1093808945)or(PFF==1093816630)or(PFF==1093677391)or(PFF==1093683265)then
call J_7(.1)
call UQ7(j5)
endif
if(PFF==1093751874)then
call J_7(11.)
set DN7=LoadUnitHandle(L7,(GetHandleId(j5)),(652))
set bj_forLoopAIndex=GetPlayerId(GetOwningPlayer(DN7))
if(not GZ[$E0+O5])or(h4[bj_forLoopAIndex]!=null)or TY7(Player(bj_forLoopAIndex))then
call IssueImmediateOrderById(j5,$D0278)
endif
endif
call J_7(2)
loop
exitwhen UP>$B
if h4[352+UP]==j5 then
set i1=GetUnitTypeId(M7[UP])
set X5=GetUnitCurrentOrder(M7[UP])
set G0[272+UP]=true
if i1==1429221451 and(X5==$D0217)then
call IssueImmediateOrderById(M7[UP],$D0004)
call J3(M7[UP],false)
elseif i1==1311780930 and(X5==$D0222)then
call IssueImmediateOrderById(M7[UP],$D0004)
call J3(M7[UP],false)
endif
set G0[272+UP]=false
set h4[352+UP]=null
endif
set UP=UP+1
endloop
set j5=null
endfunction
function PHF takes nothing returns nothing
call G1F(GetEnumUnit())
endfunction
function PIF takes unit u returns nothing
if(ME7(u))then
if K57(u)then
call jW(u,$D0012,h9[GetPlayerId(GetOwningPlayer(u))])
endif
elseif(KE7(u,NF7(u))>5500.)then
if K57(u)then
call jW(u,$D0012,h9[GetPlayerId(GetOwningPlayer(u))])
endif
set h4[GetPlayerId(GetOwningPlayer(u))]=null
else
if K57(u)then
call jW(u,$D000F,JW(u))
endif
endif
if((eY[GetPlayerId(GetOwningPlayer(u))]!=4)and(eY[GetPlayerId(GetOwningPlayer(u))]!=2))then
set eY[GetPlayerId(GetOwningPlayer(u))]=3
endif
endfunction
function PJF takes unit u returns nothing
if(ME7(u))then
if K57(u)then
call jW(u,$D0012,h9[GetPlayerId(GetOwningPlayer(u))])
endif
elseif(KE7(u,NF7(u))>5500.)then
if K57(u)then
call jW(u,$D0012,h9[GetPlayerId(GetOwningPlayer(u))])
endif
set h4[GetPlayerId(GetOwningPlayer(u))]=null
else
if K57(u)then
call jW(u,$D000F,JW(u))
endif
endif
set eY[GetPlayerId(GetOwningPlayer(u))]=4
set GZ[480+GetPlayerId(GetOwningPlayer(u))]=true
endfunction
function PKF takes nothing returns nothing
call PIF(GetEnumUnit())
endfunction
function PMF takes nothing returns nothing
call PJF(GetEnumUnit())
endfunction
function PNF takes nothing returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(GetEnumUnit()))
if((KE7(GetEnumUnit(),NF7(GetEnumUnit()))<5000.)and(eY[O5]!=4))then
if(IsUnitAlly(GetEnumUnit(),A7[0]))then
if(G3==0)then
set h8[O5]=h7[111]
set h8[16+O5]=h7[114]
elseif(G3==1)then
set h8[O5]=h7[$83]
set h8[16+O5]=h7[$87]
elseif(G3==2)then
set h8[O5]=h7[$97]
set h8[16+O5]=h7[$9B]
endif
elseif(IsUnitAlly(GetEnumUnit(),Z7[0]))then
if(G4==0)then
set h8[O5]=h7[$B]
set h8[16+O5]=h7[$E]
elseif(G4==1)then
set h8[O5]=h7[31]
set h8[16+O5]=h7[35]
elseif(G4==2)then
set h8[O5]=h7[51]
set h8[16+O5]=h7[55]
endif
endif
set h9[O5]=NF7(GetEnumUnit())
set h9[16+O5]=NF7(GetEnumUnit())
if(K57(GetEnumUnit()))then
call jW(GetEnumUnit(),$D000F,h8[O5])
endif
set eY[O5]=1
elseif((IsUnitAlly(GetEnumUnit(),Z7[0]))and(eY[O5]!=9))then
if(((G4==1)and(KH7(GetEnumUnit())==2))or((G4==2)and(KH7(GetEnumUnit())==1)))then
set G0[32+O5]=true
call J3(GetEnumUnit(),true)
elseif(G4==0)then
call DVF(GetEnumUnit(),h7[9+P24])
elseif(G4==1)then
call DVF(GetEnumUnit(),h7[29+P_4])
elseif(G4==2)then
call DVF(GetEnumUnit(),h7[49+Q44])
endif
elseif((IsUnitAlly(GetEnumUnit(),A7[0]))and(eY[O5]!=9))then
if(((G3==1)and(KH7(GetEnumUnit())==2))or((G3==2)and(KH7(GetEnumUnit())==1)))then
set G0[32+O5]=true
call J3(GetEnumUnit(),true)
elseif(G3==0)then
call DVF(GetEnumUnit(),h7[117-P24])
elseif(G3==1)then
call DVF(GetEnumUnit(),h7[$8B-P_4])
elseif(G3==2)then
call DVF(GetEnumUnit(),h7[$9F-Q44])
endif
endif
endfunction
function POF takes nothing returns nothing
set eY[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=$B
set h8[48+GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=h7[$FA]
endfunction
function LUE takes nothing returns nothing
local unit it=O77(R44,"OB|U")
local integer DOF
if(K57(it))then
call jW(it,$D0012,h9[GetPlayerId(GetOwningPlayer(it))])
endif
set G0[48+GetPlayerId(GetOwningPlayer(it))]=true
set DOF=DFF(6.,it,false,true)
set G0[48+GetPlayerId(GetOwningPlayer(it))]=false
if(GetWidgetLife(it)<=.405)then
elseif((DOF==2)and(not ME7(it))and(not G0[32+GetPlayerId(GetOwningPlayer(it))])and(K57(it)))then
call IssueImmediateOrderById(it,$D0019)
elseif(DOF==3)then
if((not ME7(it))and(not G0[32+GetPlayerId(GetOwningPlayer(it))]))then
if K57(it)then
call jW(it,$D000F,h8[GetPlayerId(GetOwningPlayer(it))])
endif
else
call PW7(it,false)
endif
endif
endfunction
function PPF takes player PQF,player PRF,boolean PSF,string PTF returns nothing
if(PSF)then
call DisplayTimedTextToPlayer(PRF,0,0,10.,Q[GetPlayerId(PQF)]+GetPlayerName(PQF)+"|r已经学习了 "+PTF)
else
call DisplayTimedTextToPlayer(PRF,0,0,10.,Q[GetPlayerId(PQF)]+GetPlayerName(PQF)+"|r还没有学习 "+PTF)
endif
endfunction
function PUF takes player PRF,unit PVF,integer PWF,string PXF returns nothing
call DisplayTimedTextToPlayer(PRF,0,0,10.,"        - |c0000cc00"+GetAbilityName(PWF)+"|r "+PXF+"[|c00ffff00等级 "+I2S(GetUnitAbilityLevel(PVF,PWF))+"|r]")
endfunction
function PYF takes player PZF,player PAF returns nothing
local integer iZ=GetPlayerId(PZF)
local unit it=M7[iZ]
local integer PBF
local integer PCF=0
local integer array P3F
local boolean array P6F
if(it==null)then
return
endif
set P3F[1]=eY[336+iZ]
if(GetUnitAbilityLevel(it,P3F[1])!=0)then
set P6F[1]=true
set PCF=PCF+1
else
set P6F[1]=false
endif
set P3F[2]=eY[352+iZ]
if(GetUnitAbilityLevel(it,P3F[2])!=0)then
set P6F[2]=true
set PCF=PCF+1
else
set P6F[2]=false
endif
set P3F[3]=eY[368+iZ]
if((GetUnitTypeId(it)==1311781199)or(GetUnitTypeId(it)==1311781171)or(GetUnitTypeId(it)==1311781172)or(GetUnitTypeId(it)==1311781173))then
set P3F[3]=1093681477
endif
if(GetUnitAbilityLevel(it,P3F[3])!=0)then
set P6F[3]=true
set PCF=PCF+1
else
set P6F[3]=false
endif
set P3F[4]=eY[$AC+iZ]
if(GetUnitAbilityLevel(it,P3F[4])!=0)then
set P6F[4]=true
set PCF=PCF+1
else
set P6F[4]=false
endif
set P3F[5]=eY[$BC+iZ]
if(GetUnitAbilityLevel(it,P3F[5])!=0)then
set P6F[5]=true
set PCF=PCF+1
else
set P6F[5]=false
endif
set P3F[6]=1096904043
if((GetUnitTypeId(it)==1315334514)or(GetUnitTypeId(it)==1328558160)or(GetUnitTypeId(it)==1311781199)or(GetUnitTypeId(it)==1311781171)or(GetUnitTypeId(it)==1311781172)or(GetUnitTypeId(it)==1311781173)or(GetUnitTypeId(it)==1214409837))then
set P3F[6]=1093684818
endif
if(GetUnitAbilityLevel(it,P3F[6])!=0)then
set P6F[6]=true
set PCF=PCF+1
else
set P6F[6]=false
endif
if(PCF==0)then
call PPF(PZF,PAF,false,"任何技能！")
return
endif
if((PCF==1))then
call PPF(PZF,PAF,true,"以下技能:")
endif
if((PCF>1))then
call PPF(PZF,PAF,true,"以下技能:")
endif
set PBF=1
loop
if(P6F[PBF])then
if(GetUnitAbilityLevel(it,P3F[PBF])==1)then
call PUF(PAF,it,P3F[PBF],"")
else
call PUF(PAF,it,P3F[PBF],"升到 ")
endif
endif
exitwhen PBF>2
set PBF=PBF+1
endloop
if(GetUnitAbilityLevel(it,P3F[4])>=GetUnitAbilityLevel(it,P3F[5]))then
if(P6F[4])then
if(GetUnitAbilityLevel(it,P3F[4])==1)then
call PUF(PAF,it,P3F[4],"")
else
call PUF(PAF,it,P3F[4],"升到 ")
endif
endif
elseif(P6F[5])then
if(GetUnitAbilityLevel(it,P3F[5])==1)then
call PUF(PAF,it,P3F[5],"")
else
call PUF(PAF,it,P3F[5],"升到 ")
endif
endif
if(P6F[6])then
if(GetUnitAbilityLevel(it,P3F[6])==1)then
call PUF(PAF,it,P3F[6],"")
else
call PUF(PAF,it,P3F[6],"升到 ")
endif
endif
if((PCF<4))then
call PPF(PZF,PAF,false,"以下技能:")
endif
if((PCF==4))then
call PPF(PZF,PAF,false,"以下技能:")
endif
set PBF=1
loop
if(not(P6F[PBF]))then
call PUF(PAF,it,P3F[PBF],"")
endif
exitwhen PBF>2
set PBF=PBF+1
endloop
if((GetUnitAbilityLevel(it,P3F[4])==0)and(GetUnitAbilityLevel(it,P3F[5])==0))then
call PUF(PAF,it,P3F[4],"")
endif
if(not(P6F[6]))then
call PUF(PAF,it,P3F[6],"")
endif
set it=null
endfunction
function PLF takes string VH returns nothing
local player pl=null
local unit m5=null
local integer UP
local integer CCE=0
local integer kg
local boolean DLF=false
local string P1F=""
local group P0F=null
local integer i=0
if((SubString(VH,0,2)=="-o")or(SubString(VH,0,2)=="-c")or(SubString(VH,0,2)==" c"))then
set VH=SubString(VH,2,StringLength(VH))
else
return
endif
set LI4=null
if(VH=="tango")then
if(Bz<60.)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,GetObjectName(1496330553))
set PY4=true
endif
elseif(VH=="flask")then
if(Bz<60.)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,GetObjectName(1496330800))
set PY4=false
endif
elseif(VH=="ld")then
if(TA4==false)then
set TA4=true
call IL7(GetObjectName(1496330801))
else
set TA4=false
call IL7(GetObjectName(1496330802))
endif
elseif(VH=="aen")then
if(GetTriggerPlayer()==QT4 and QU4==null)then
call ju(HW7(bj_mapInitialPlayableArea,Condition(function SA7)),function PHF)
set bj_lastLoadedUnit=JA4
set DLF=true
elseif(GetTriggerPlayer()==QU4 and QT4==null)then
call ju(HW7(bj_mapInitialPlayableArea,Condition(function SZ7)),function PHF)
set bj_lastLoadedUnit=IZ4
set DLF=true
endif
set P1F=GetObjectName(1496330803)
elseif(VH=="den")then
if(GetTriggerPlayer()==QT4 and QU4==null)then
call ju(HW7(bj_mapInitialPlayableArea,Condition(function SA7)),function PKF)
set bj_lastLoadedUnit=JA4
set DLF=true
elseif(GetTriggerPlayer()==QU4 and QT4==null)then
call ju(HW7(bj_mapInitialPlayableArea,Condition(function SZ7)),function PKF)
set bj_lastLoadedUnit=IZ4
set DLF=true
endif
set P1F=GetObjectName(1496330804)
elseif(VH=="sden")then
if(GetTriggerPlayer()==QT4 and QU4==null)then
call ju(HW7(bj_mapInitialPlayableArea,Condition(function SA7)),function PMF)
set bj_lastLoadedUnit=JA4
set DLF=true
elseif(GetTriggerPlayer()==QU4 and QT4==null)then
call ju(HW7(bj_mapInitialPlayableArea,Condition(function SZ7)),function PMF)
set bj_lastLoadedUnit=IZ4
set DLF=true
endif
set P1F=GetObjectName(1496330806)
elseif(VH=="roshanen")then
if GetWidgetLife(V4)<.405 then
if(GetTriggerPlayer()==QT4)then
set bj_lastLoadedUnit=JA4
elseif(GetTriggerPlayer()==QU4)then
set bj_lastLoadedUnit=IZ4
endif
set DLF=true
set P1F=GetObjectName(1496330807)
else
if(GetTriggerPlayer()==QT4)then
call ju(HW7(bj_mapInitialPlayableArea,Condition(function SA7)),function POF)
set bj_lastLoadedUnit=JA4
set DLF=true
elseif(GetTriggerPlayer()==QU4)then
call ju(HW7(bj_mapInitialPlayableArea,Condition(function SZ7)),function POF)
set bj_lastLoadedUnit=IZ4
set DLF=true
endif
set P1F=GetObjectName(1496330546)
endif
elseif(SubString(VH,0,7)=="itemfix")then
set VH=SubString(VH,7,StringLength(VH))
set LI4=CreateForce()
call ForceAddPlayer(LI4,GetTriggerPlayer())
loop
call TriggerSleepAction(.0)
set kg=kh(VH)
if(kg>=0)then
set pl=K_7(SubString(VH,0,kg))
set VH=SubString(VH,kg+1,StringLength(VH))
else
set pl=K_7(SubString(VH,0,StringLength(VH)))
endif
if((pl!=null)and(TZ7(pl))and((IsPlayerAlly(pl,Z7[0])and(QT4==null or GetTriggerPlayer()==QT4))or(IsPlayerAlly(pl,A7[0])and(QU4==null or GetTriggerPlayer()==QU4))))then
set UP=GetPlayerId(pl)
if M7[UP]==null then
else
if GetWidgetLife(M7[UP])>.405 then
call PW7(M7[UP],true)
set hq[528+UP]=Bz+30.
call NT7(R44,"OB|U",M7[UP])
call ExecuteFunc("LUE")
if(eY[UP]>=9)then
set eY[UP]=1
endif
endif
set GZ[$C0+UP]=true
call PU7(M7[UP],LI4)
call PP7(M7[UP],LI4,"Fixing itembuild")
endif
endif
exitwhen kg<0
endloop
call DestroyForce(LI4)
elseif((VH=="neut")or(VH=="neu"))then
if(GetTriggerPlayer()==QT4)then
set bj_lastLoadedUnit=IZ4
set Gv=not Gv
if(Gv)then
set CCE=1
endif
else
set bj_lastLoadedUnit=JA4
set Gw=not Gw
if(Gw)then
set CCE=1
endif
endif
set DLF=true
set P1F=GetObjectName(1496330550)+JK7(CCE==1,GetObjectName(1496403790),GetObjectName(1498369862))
elseif(VH=="ui")then
call ExecuteFunc("P5F")
elseif(SubString(VH,0,2)=="sv")then
set VH=SubString(VH,2,StringLength(VH))
loop
call TriggerSleepAction(.0)
set kg=kh(VH)
if(kg>=0)then
set pl=K_7(SubString(VH,0,kg))
set VH=SubString(VH,kg+1,StringLength(VH))
else
set pl=K_7(SubString(VH,0,StringLength(VH)))
endif
if((pl!=null)and(TZ7(pl)))then
call PYF(pl,GetTriggerPlayer())
endif
exitwhen kg<0
endloop
elseif(SubString(VH,0,1)=="b")then
set LI4=CreateForce()
call ForceAddPlayer(LI4,GetTriggerPlayer())
if VH=="b" then
set VH=JK7(IsPlayerAlly(GetTriggerPlayer(),Z7[0]),"1,2,3,4,5","6,7,8,9,0")
else
set VH=SubString(VH,1,StringLength(VH))
endif
loop
set kg=kh(VH)
if(kg>=0)then
set pl=K_7(SubString(VH,0,kg))
set VH=SubString(VH,kg+1,StringLength(VH))
else
set pl=K_7(SubString(VH,0,StringLength(VH)))
endif
set DLF=false
if((pl!=null)and(TA7(pl))and(GetPlayerController(pl)==MAP_CONTROL_COMPUTER)and(IsPlayerAlly(pl,GetTriggerPlayer())))then
set DLF=true
set UP=GetPlayerId(pl)
if(M7[UP]==null)then
set DLF=false
elseif not M87(M7[UP])then
set P1F=GetObjectName(1496330808)
else
call NT7(R44,"OB|U",M7[UP])
call ExecuteFunc("LUE")
if(eY[UP]>=9)then
set eY[UP]=1
endif
set P1F=GetObjectName(1496330291)
endif
endif
if DLF then
call PU7(M7[UP],LI4)
call PP7(M7[UP],LI4,P1F)
endif
exitwhen kg<0
endloop
set DLF=false
call DestroyForce(LI4)
elseif(SubString(VH,0,1)=="f")then
set LI4=CreateForce()
call ForceAddPlayer(LI4,GetTriggerPlayer())
if VH=="f" then
set VH=JK7(IsPlayerAlly(GetTriggerPlayer(),Z7[0]),"1,2,3,4,5","6,7,8,9,0")
else
set VH=SubString(VH,1,StringLength(VH))
endif
loop
set kg=kh(VH)
if(kg>=0)then
set pl=K_7(SubString(VH,0,kg))
set VH=SubString(VH,kg+1,StringLength(VH))
else
set pl=K_7(SubString(VH,0,StringLength(VH)))
endif
set DLF=false
if((pl!=null)and(TA7(pl))and(GetPlayerController(pl)==MAP_CONTROL_COMPUTER)and(IsPlayerAlly(pl,GetTriggerPlayer())))then
set DLF=true
set UP=GetPlayerId(pl)
if(M7[UP]==null)then
set DLF=false
elseif not M87(M7[UP])then
set P1F=GetObjectName(1496330808)
else
call PW7(M7[UP],true)
set hq[528+UP]=Bz+30.
call NT7(R44,"OB|U",M7[UP])
call ExecuteFunc("LUE")
if(eY[UP]>=9)then
set eY[UP]=1
endif
set P1F=GetObjectName(1496330290)
endif
endif
if DLF then
call PU7(M7[UP],LI4)
call PP7(M7[UP],LI4,P1F)
endif
exitwhen kg<0
endloop
set DLF=false
call DestroyForce(LI4)
elseif((SubString(VH,0,1)=="a")and(VH!="auto"))then
set LI4=CreateForce()
call ForceAddPlayer(LI4,GetTriggerPlayer())
if VH=="a" then
set VH=JK7(IsPlayerAlly(GetTriggerPlayer(),Z7[0]),"1,2,3,4,5","6,7,8,9,0")
else
set VH=SubString(VH,1,StringLength(VH))
endif
loop
set kg=kh(VH)
if(kg>=0)then
set pl=K_7(SubString(VH,0,kg))
set VH=SubString(VH,kg+1,StringLength(VH))
else
set pl=K_7(SubString(VH,0,StringLength(VH)))
endif
set DLF=false
if((pl!=null)and(TA7(pl))and(GetPlayerController(pl)==MAP_CONTROL_COMPUTER)and(IsPlayerAlly(pl,GetTriggerPlayer())))then
set DLF=true
set UP=GetPlayerId(pl)
if(M7[UP]==null)then
set DLF=false
elseif not M87(M7[UP])then
set P1F=GetObjectName(1496330808)
elseif ME7(M7[UP])then
set P1F=GetObjectName(1496330809)
else
call G1F(M7[UP])
set P1F=GetObjectName(1496330289)
endif
endif
if DLF then
call PU7(M7[UP],LI4)
call PP7(M7[UP],LI4,P1F)
endif
exitwhen kg<0
endloop
set DLF=false
call DestroyForce(LI4)
elseif(SubString(VH,0,1)=="d")then
set LI4=CreateForce()
call ForceAddPlayer(LI4,GetTriggerPlayer())
if VH=="d" then
set VH=JK7(IsPlayerAlly(GetTriggerPlayer(),Z7[0]),"1,2,3,4,5","6,7,8,9,0")
else
set VH=SubString(VH,1,StringLength(VH))
endif
loop
set kg=kh(VH)
if(kg>=0)then
set pl=K_7(SubString(VH,0,kg))
set VH=SubString(VH,kg+1,StringLength(VH))
else
set pl=K_7(SubString(VH,0,StringLength(VH)))
endif
set DLF=false
if((pl!=null)and(TA7(pl))and(GetPlayerController(pl)==MAP_CONTROL_COMPUTER)and(IsPlayerAlly(pl,GetTriggerPlayer())))then
set UP=GetPlayerId(pl)
set DLF=true
if(M7[UP]==null)then
set DLF=false
elseif not M87(M7[UP])then
set P1F=GetObjectName(1496330808)
elseif ME7(M7[UP])then
set P1F=GetObjectName(1496330809)
else
call PIF(M7[UP])
set P1F=GetObjectName(1496330804)
endif
endif
if DLF then
call PU7(M7[UP],LI4)
call PP7(M7[UP],LI4,P1F)
endif
exitwhen kg<0
endloop
set DLF=false
call DestroyForce(LI4)
elseif(SubString(VH,0,2)=="sd")then
set LI4=CreateForce()
call ForceAddPlayer(LI4,GetTriggerPlayer())
if VH=="sd" then
set VH=JK7(IsPlayerAlly(GetTriggerPlayer(),Z7[0]),"1,2,3,4,5","6,7,8,9,0")
else
set VH=SubString(VH,2,StringLength(VH))
endif
loop
set kg=kh(VH)
if(kg>=0)then
set pl=K_7(SubString(VH,0,kg))
set VH=SubString(VH,kg+1,StringLength(VH))
else
set pl=K_7(SubString(VH,0,StringLength(VH)))
endif
set DLF=false
if((pl!=null)and(TA7(pl))and(GetPlayerController(pl)==MAP_CONTROL_COMPUTER)and(IsPlayerAlly(pl,GetTriggerPlayer())))then
set UP=GetPlayerId(pl)
set DLF=true
if(M7[UP]==null)then
set DLF=false
elseif not M87(M7[UP])then
set P1F=GetObjectName(1496330808)
elseif ME7(M7[UP])then
set P1F=GetObjectName(1496330809)
else
call PJF(M7[UP])
set P1F=GetObjectName(1496330805)
endif
endif
if DLF then
call PU7(M7[UP],LI4)
call PP7(M7[UP],LI4,P1F)
endif
exitwhen kg<0
endloop
set DLF=false
call DestroyForce(LI4)
elseif(SubString(VH,0,6)=="roshan")then
if GetWidgetLife(V4)<.405 then
if(GetTriggerPlayer()==QT4)then
set bj_lastLoadedUnit=JA4
elseif(GetTriggerPlayer()==QU4)then
set bj_lastLoadedUnit=IZ4
endif
set DLF=true
set P1F=GetObjectName(1496330807)
else
set LI4=CreateForce()
call ForceAddPlayer(LI4,GetTriggerPlayer())
if VH=="roshan" then
set VH=JK7(IsPlayerAlly(GetTriggerPlayer(),Z7[0]),"1,2,3,4,5","6,7,8,9,0")
else
set VH=SubString(VH,6,StringLength(VH))
endif
loop
set kg=kh(VH)
if(kg>=0)then
set pl=K_7(SubString(VH,0,kg))
set VH=SubString(VH,kg+1,StringLength(VH))
else
set pl=K_7(SubString(VH,0,StringLength(VH)))
endif
set DLF=false
if((pl!=null)and(TA7(pl))and(GetPlayerController(pl)==MAP_CONTROL_COMPUTER)and(IsPlayerAlly(pl,GetTriggerPlayer())))then
set UP=GetPlayerId(pl)
set DLF=true
if(M7[UP]==null)then
set DLF=false
elseif not M87(M7[UP])then
set P1F=GetObjectName(1496330808)
elseif ME7(M7[UP])then
set P1F=GetObjectName(1496330809)
else
set eY[UP]=$B
set h8[48+UP]=h7[$FA]
set P1F=GetObjectName(1496330546)
endif
if DLF then
call PU7(M7[UP],LI4)
call PP7(M7[UP],LI4,P1F)
endif
endif
exitwhen kg<0
endloop
set DLF=false
call DestroyForce(LI4)
endif
elseif(PE4)then
elseif(VH=="auto")then
if(GetTriggerPlayer()==QT4)then
set PZ4=(not PZ4)
set bj_lastLoadedUnit=IZ4
set P1F=GetObjectName(1496331831)+JK7(PZ4,GetObjectName(1496403790),GetObjectName(1498369862))
else
set PA4=(not PA4)
set bj_lastLoadedUnit=JA4
set P1F=GetObjectName(1496331831)+JK7(PA4,GetObjectName(1496403790),GetObjectName(1498369862))
endif
set DLF=true
elseif(VH=="p")then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,GetObjectName(1496332082)+"
"+GetObjectName(1497446194)+"
"+GetObjectName(1497517121)+"
"+"|c00dd8dff"+GetObjectName(1496332083)+"
"+"|c00dd8dff"+GetObjectName(1496332084)+"
"+"|c00dd8dff"+GetObjectName(1496332085)+"
"+"|c00dd8dff"+GetObjectName(1496332086))
elseif(VH=="pn")then
if(GetTriggerPlayer()==QT4)then
set G4=-1
set bj_lastLoadedUnit=IZ4
else
set G3=-1
set bj_lastLoadedUnit=JA4
endif
set DLF=true
set P1F=GetObjectName(1496332081)
elseif((VH=="pl")or(VH=="pr")or(VH=="pm"))then
if(VH=="pl")then
set CCE=1
elseif(VH=="pr")then
set CCE=2
else
set CCE=0
endif
if(GetTriggerPlayer()==QT4)then
set G4=CCE
call ju(HW7(bj_mapInitialPlayableArea,Condition(function SZ7)),function PNF)
set bj_lastLoadedUnit=IZ4
else
set G3=CCE
call ju(HW7(bj_mapInitialPlayableArea,Condition(function SA7)),function PNF)
set bj_lastLoadedUnit=JA4
endif
set DLF=true
if(CCE==1)then
set P1F=GetObjectName(1496332087)
elseif(CCE==2)then
set P1F=GetObjectName(1496332088)
else
set P1F=GetObjectName(1496332089)
endif
elseif(SubString(VH,0,1)=="t")then
if VH!="t" then
set VH=SubString(VH,1,StringLength(VH))
set kg=kE(VH," ")
if kg==0 then
set VH=SubString(VH,1,StringLength(VH))
set kg=kE(VH," ")
endif
set bj_lastLoadedUnit=JD7(IsPlayerAlly(GetTriggerPlayer(),Z7[0]),IZ4,JA4)
if(kg>=0)then
set L94=SubString(VH,kg+1,StringLength(VH))
if L94=="0" then
set CCE=$A
else
set CCE=S2I(L94)
endif
set pl=K27(CCE)
set bj_forLoopAIndex=GetPlayerId(pl)
if(M7[bj_forLoopAIndex]==null)then
set P1F=GetObjectName(1496332336)
set CCE=0
elseif(not M87(M7[bj_forLoopAIndex]))then
set P1F=GetObjectName(1496332337)
set CCE=0
set kg=0
elseif(not IsUnitVisible(M7[bj_forLoopAIndex],GetTriggerPlayer()))and(eY[32+bj_forLoopAIndex]<=2)then
set P1F=GetObjectName(1496332338)
set CCE=0
set kg=0
elseif(not IsPlayerEnemy(GetTriggerPlayer(),pl))then
set P1F=GetObjectName(1496332339)
set CCE=0
set kg=0
else
set VH=SubString(VH,0,kg+1)
set m5=M7[bj_forLoopAIndex]
endif
set DLF=(CCE==0)
else
set CCE=0
set VH="t"
endif
if(CCE>0)then
set CCE=KH7(m5)
set LI4=CreateForce()
call ForceAddPlayer(LI4,GetTriggerPlayer())
if SubString(VH,0,1)==" " then
set VH=SubString(VH,1,StringLength(VH))
endif
set kg=kh(VH)
if(kg==-1)then
set VH=SubString(VH,0,1)
if VH=="a" or VH=="x" then
set VH=JK7(IsPlayerAlly(GetTriggerPlayer(),Z7[0]),"1,2,3,4,5","6,7,8,9,0")
endif
endif
loop
set kg=kh(VH)
if(kg>=0)then
set pl=K_7(SubString(VH,0,kg))
set VH=SubString(VH,kg+1,StringLength(VH))
else
set pl=K_7(SubString(VH,0,StringLength(VH)))
endif
set DLF=false
if((pl!=null)and(TA7(pl))and(GetPlayerController(pl)==MAP_CONTROL_COMPUTER)and(IsPlayerAlly(pl,GetTriggerPlayer())))then
set UP=GetPlayerId(pl)
set DLF=true
if(M7[UP]==null)then
set DLF=false
elseif not M87(M7[UP])then
set P1F=GetObjectName(1496330808)
elseif ME7(M7[UP])then
set P1F=GetObjectName(1496330809)
elseif h4[UP]!=null and ME7(h4[UP])then
set P1F=GetObjectName(1496331056)
elseif((((CCE==1)and(KH7(M7[UP])==2))or((CCE==2)and(KH7(M7[UP])==1)))and KE7(M7[UP],NF7(M7[UP]))>10000.)then
set P1F=GetObjectName(1496331057)
else
call DPF(M7[UP],false)
call DWF(M7[UP],m5)
set G0[$A0+UP]=true
set h4[$90+UP]=m5
set P1F=GetObjectName(1496330295)+Q[GetPlayerId(GetOwningPlayer(m5))]+GetPlayerName(GetOwningPlayer(m5))+"|r"
endif
endif
if DLF then
call PU7(M7[UP],LI4)
call PP7(M7[UP],LI4,P1F)
endif
exitwhen kg<0
endloop
call DestroyForce(LI4)
set DLF=false
endif
endif
if VH=="t" then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,GetObjectName(1496332341)+"
"+GetObjectName(1497446453)+"
"+GetObjectName(1497511989)+"
"+"
"+"|c00dd8dff"+GetObjectName(1496332342)+"
"+"|c00dd8dff"+GetObjectName(1496332343)+"
")
endif
elseif(VH=="g")then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,GetObjectName(1496332344)+"
"+GetObjectName(1497446456)+"
"+GetObjectName(1497511992)+"
"+"
"+"|c00dd8dff"+GetObjectName(1496332345)+"
"+"|c00dd8dff"+GetObjectName(1496332592)+"
"+"|c00dd8dff"+GetObjectName(1496332593)+"
")
elseif((SubString(VH,0,2)=="gl")or(SubString(VH,0,2)=="gr")or(SubString(VH,0,2)=="gm"))then
set LI4=CreateForce()
call ForceAddPlayer(LI4,GetTriggerPlayer())
if(SubString(VH,0,2)=="gl")then
set CCE=1
elseif(SubString(VH,0,2)=="gr")then
set CCE=2
else
set CCE=0
endif
set VH=SubString(VH,2,StringLength(VH))
set P0F=CreateGroup()
set i=1
loop
exitwhen i>5
if IsPlayerAlly(GetTriggerPlayer(),Z7[0])then
set pl=Z7[i]
else
set pl=A7[i]
endif
set UP=GetPlayerId(pl)
if(TZ7(pl)and M7[UP]!=null and M87(M7[UP])and ME7(M7[UP])==false and KH7(M7[UP])==0)then
call GroupAddUnit(P0F,M7[UP])
endif
set i=i+1
endloop
loop
set kg=kh(VH)
if(kg>=0)then
set pl=K_7(SubString(VH,0,kg))
set VH=SubString(VH,kg+1,StringLength(VH))
else
set pl=K_7(SubString(VH,0,StringLength(VH)))
endif
set DLF=false
if((pl!=null)and(TZ7(pl))and(IsPlayerAlly(pl,GetTriggerPlayer())))then
set UP=GetPlayerId(pl)
set DLF=true
if M7[UP]==null then
set DLF=false
elseif not M87(M7[UP])then
set P1F=GetObjectName(1496330808)
elseif ME7(M7[UP])then
set P1F=GetObjectName(1496330809)
elseif h4[UP]!=null and ME7(h4[UP])then
set P1F=GetObjectName(1496331056)
else
set G0[64+UP]=true
set h4[UP]=null
call DPF(M7[UP],false)
if(CCE==KH7(M7[UP]))then
set CCE=-1
elseif((((CCE==1)and(KH7(M7[UP])==2))or((CCE==2)and(KH7(M7[UP])==1)))and KE7(M7[UP],NF7(M7[UP]))>10000.)then
if(eY[$E0+UP]<R2I(Bz))then
if(CCE==1)then
set eY[$D0+UP]=JH7(GetTriggerPlayer()==QT4,29+P_4,$8B-P_4)
elseif(CCE==2)then
set eY[$D0+UP]=JH7(GetTriggerPlayer()==QT4,49+Q44,$9F-Q44)
endif
else
set CCE=$A+CCE
call DVF(M7[UP],JD7(GetTriggerPlayer()==QT4,h7[9+P24],h7[117-P24]))
endif
elseif(CCE==1)then
call DVF(M7[UP],JD7(GetTriggerPlayer()==QT4,h7[29+P_4],h7[$8B-P_4]))
elseif(CCE==2)then
call DVF(M7[UP],JD7(GetTriggerPlayer()==QT4,h7[49+Q44],h7[$9F-Q44]))
else
call DVF(M7[UP],JD7(GetTriggerPlayer()==QT4,h7[9+P24],h7[117-P24]))
endif
set G0[$A0+UP]=true
set hq[320+UP]=Bz+45.
if(CCE==1)then
set P1F=GetObjectName(1496331060)
elseif(CCE==2)then
set P1F=GetObjectName(1496331061)
elseif(CCE==$B)then
set P1F=GetObjectName(1496331062)
elseif(CCE==$C)then
set P1F=GetObjectName(1496331063)
elseif(CCE==-1)then
set P1F=GetObjectName(1496331059)
else
set P1F=GetObjectName(1496331058)
endif
endif
endif
if DLF then
call PU7(M7[UP],LI4)
call PP7(M7[UP],LI4,P1F)
endif
if(CCE>$A)then
set CCE=CCE-$A
set bj_lastLoadedUnit=FirstOfGroup(P0F)
if bj_lastLoadedUnit!=null then
call GroupRemoveUnit(P0F,bj_lastLoadedUnit)
set UP=GetPlayerId(GetOwningPlayer(bj_lastLoadedUnit))
if(CCE==1)then
call DVF(M7[UP],JD7(GetTriggerPlayer()==QT4,h7[29+P_4],h7[$8B-P_4]))
call PU7(M7[UP],LI4)
call PP7(M7[UP],LI4,GetObjectName(1496330552))
elseif(CCE==2)then
call DVF(M7[UP],JD7(GetTriggerPlayer()==QT4,h7[49+Q44],h7[$9F-Q44]))
call PU7(M7[UP],LI4)
call PP7(M7[UP],LI4,GetObjectName(1496330551))
endif
endif
endif
exitwhen kg<0
endloop
call DestroyForce(LI4)
call DestroyGroup(P0F)
set DLF=false
endif
if DLF and P1F!="" then
call O_7(bj_lastLoadedUnit,P1F,GetTriggerPlayer())
endif
call DestroyForce(LI4)
set pl=null
set m5=null
set LI4=null
set P0F=null
endfunction
function P2F takes nothing returns nothing
if(GetEventPlayerChatString()==" ")then
call PLF("-oui")
else
call PLF(GetEventPlayerChatString())
endif
endfunction
function P_F takes unit I_7 returns integer
local integer i1=GetUnitTypeId(I_7)
if i1==1211117643 then
return 0
endif
if(i1==1212363833 or i1==1212365106 or(i1==1311781199 or i1==1311781171 or i1==1311781172 or i1==1311781173)or i1==1315070563 or i1==1215657064 or i1==1332179560 or i1==1160785973 or((i1==1311781174)or(i1==1311781175)or(i1==1311911984)or(i1==1311911985)or(i1==1311781442))or i1==1315074670 or((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))or i1==1429221430 or i1==1165451634 or i1==1160785972 or i1==1162032181 or i1==1162032951 or i1==1315334514 or i1==1215722344 or i1==1160786242 or i1==1211117641 or i1==1211119409)then
return 0+GetHeroLevel(I_7)/5
endif
if(i1==1215723364 or i1==1328558160 or i1==1211117617 or i1==1211122513 or i1==1212363833 or i1==1212365106 or i1==1311781199 or i1==1315070563 or i1==1215657064 or i1==1332179560 or i1==1160785973 or i1==1433631084 or i1==1211117624 or i1==1315007329 or i1==1215063922 or i1==1164207469 or i1==1315074670 or i1==1211117636 or i1==1311781206 or i1==1211117649 or i1==1160786265 or i1==1211117652 or i1==1211119187 or((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))or i1==1162032439 or i1==1430466865 or i1==1429221441 or i1==1429221432 or i1==1429221430 or((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))or i1==1432646245 or i1==1430467634 or i1==1429221424 or i1==1430468913 or i1==1162032181 or i1==1162032951 or i1==1160785970 or i1==1429221443 or i1==1328558154 or i1==1432510828 or i1==1315334514 or i1==1429221451 or i1==1215722344 or i1==1160786242 or i1==1211117641 or i1==1211119409 or i1==1160786505 or i1==1160786510 or i1==1311788336 or i1==1160786507)then
return 3
endif
if(i1==1211117617 or i1==1211122513 or i1==1214344551 or i1==1432580716 or i1==1211117624 or i1==1315988077 or i1==1211117616 or i1==1215063922 or i1==1311781193 or i1==1211119187 or i1==1430466865 or i1==1429221441 or i1==1429221432 or i1==1313026096 or i1==1429221443 or i1==1332109682 or i1==1429221446 or i1==1332766568 or i1==1432642913 or i1==1211117650 or i1==1328558389 or i1==1328558406 or i1==1160786502 or i1==1160786738)then
return 2
endif
if(i1==1164799855 or i1==1333027688 or i1==1311781185 or i1==1433105516 or((i1==1214409837)or(i1==1211119192)or(i1==1211119193)or(i1==1211119191))or i1==1215130471 or i1==1164799603 or i1==1432580716 or i1==1211117633 or i1==1332898670 or i1==1214345830 or i1==1160786000 or i1==1311780930 or i1==1311786311 or i1==1430466872 or i1==1430468144 or i1==1430466609 or i1==1211117640 or i1==1332963428 or i1==1429221445 or i1==1160786241 or i1==1429221456 or i1==1160786243 or i1==1311781207 or i1==1311780946 or i1==1211117646 or i1==1211117653 or i1==1311787088 or i1==1328558390 or i1==1160786506 or i1==1160786504 or i1==1211122767)then
return 3
endif
if(i1==1215128178 or i1==1164799855 or i1==1214931305 or i1==1211117620 or i1==1215130471 or i1==1316252014 or i1==1160786000 or i1==1211117651 or i1==1164666213 or i1==1433168227 or i1==1430468406 or i1==1430466872 or i1==1211117640 or i1==1332963428 or i1==1160786241 or i1==1429221456 or i1==1211117653 or i1==1160786520)then
return 3
endif
return 0
endfunction
function Q4F takes unit I_7 returns integer
local integer i1=GetUnitTypeId(I_7)
if(i1==1212363833 or i1==1212365106 or(i1==1311781199 or i1==1311781171 or i1==1311781172 or i1==1311781173)or i1==1315070563 or i1==1215657064 or i1==1332179560 or i1==1160785973 or((i1==1311781174)or(i1==1311781175)or(i1==1311781442)or(i1==1311911984)or(i1==1311911985))or i1==1315074670 or((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))or i1==1429221430 or i1==1165451634 or i1==1160785972 or i1==1162032181 or i1==1162032951 or i1==1315334514 or i1==1215722344 or i1==1160786242 or i1==1211117641 or i1==1211119409)then
return 3
endif
if(i1==1215723364 or i1==1328558160 or i1==1211117617 or i1==1211122513 or i1==1212363833 or i1==1212365106 or i1==1311781199 or i1==1315070563 or i1==1215657064 or i1==1332179560 or i1==1160785973 or i1==1433631084 or i1==1211117624 or i1==1315007329 or i1==1215063922 or i1==1164207469 or i1==1315074670 or i1==1211117636 or i1==1311781206 or i1==1211117649 or i1==1160786265 or i1==1211117652 or i1==1211119187 or((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))or i1==1162032439 or i1==1430466865 or i1==1429221441 or i1==1429221432 or i1==1429221430 or((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))or i1==1432646245 or i1==1430467634 or i1==1429221424 or i1==1430468913 or i1==1162032181 or i1==1162032951 or i1==1160785970 or i1==1429221443 or i1==1328558154 or i1==1432510828 or i1==1315334514 or i1==1429221451 or i1==1215722344 or i1==1160786242 or i1==1211117641 or i1==1211119409 or i1==1160786505 or i1==1160786510 or i1==1311788336)then
return 2
endif
if(i1==1211117617 or i1==1211122513 or i1==1214344551 or i1==1432580716 or i1==1211117624 or i1==1315988077 or i1==1211117616 or i1==1215063922 or i1==1311781193 or i1==1211119187 or i1==1430466865 or i1==1429221441 or i1==1429221432 or i1==1313026096 or i1==1429221443 or i1==1332109682 or i1==1429221446 or i1==1332766568 or i1==1432642913 or i1==1211117650 or i1==1328558389 or i1==1328558406 or i1==1160786502 or i1==1160786507 or i1==1160786738)then
return 1
endif
if(i1==1164799855 or i1==1333027688 or i1==1311781185 or i1==1433105516 or((i1==1214409837)or(i1==1211119192)or(i1==1211119193)or(i1==1211119191))or i1==1215130471 or i1==1164799603 or i1==1432580716 or i1==1211117633 or i1==1332898670 or i1==1214345830 or i1==1160786000 or i1==1311780930 or i1==1311786311 or i1==1430466872 or i1==1430468144 or i1==1430466609 or i1==1211117640 or i1==1332963428 or i1==1429221445 or i1==1160786241 or i1==1429221456 or i1==1160786243 or i1==1311781207 or i1==1311780946 or i1==1211117646 or i1==1211117653 or i1==1311787088 or i1==1328558390 or i1==1160786506 or i1==1160786504 or i1==1211122767)then
return 1
endif
if(i1==1215128178 or i1==1164799855 or i1==1214931305 or i1==1211117620 or i1==1215130471 or i1==1316252014 or i1==1211117643 or i1==1160786000 or i1==1211117651 or i1==1164666213 or i1==1433168227 or i1==1430468406 or i1==1430466872 or i1==1211117640 or i1==1332963428 or i1==1160786241 or i1==1429221456 or i1==1211117653 or i1==1160786520)then
return 2
endif
return 1
endfunction
function Q7F takes boolean JY7 returns nothing
local integer O5=0
local integer i=1
if JY7 then
set LI4=X7
else
set LI4=Y7
endif
set i=1
loop
exitwhen i>5
if JY7 then
set O5=GetPlayerId(Z7[i])
else
set O5=GetPlayerId(A7[i])
endif
if M7[O5]!=null and GetUnitLifePercent(M7[O5])>50 and TZ7(Player(O5))and eY[O5]!=$B then
call PU7(M7[O5],LI4)
call PP7(M7[O5],LI4,GetObjectName(1496330546))
set eY[O5]=$B
set h8[48+O5]=h7[$FA]
endif
set i=i+1
endloop
set LI4=null
endfunction
function Q8F takes nothing returns nothing
local integer O5=0
local integer PY7=0
local integer i
local integer ZPE=-1
local integer j
local integer k
local integer Q9F
local integer QDF
local boolean QEF=false
local boolean QFF=false
local boolean JY7
local real QGF=0
local real QHF=0
set k=0
set i=1
loop
exitwhen i>5
set O5=GetPlayerId(Z7[i])
if(M7[O5]!=null)then
if GetHeroLevel(M7[O5])>=6 then
set QEF=true
endif
if(GetHeroLevel(M7[O5])>$B and GetUnitLifePercent(M7[O5])>50)then
set QGF=QGF+L74
endif
endif
set O5=GetPlayerId(A7[i])
if(M7[O5]!=null)then
if GetHeroLevel(M7[O5])>=6 then
set QFF=true
endif
if(GetHeroLevel(M7[O5])>$B and GetUnitLifePercent(M7[O5])>50)then
set QHF=QHF+L84
endif
endif
set i=i+1
endloop
set i=1
loop
exitwhen i>5
set O5=GetPlayerId(Z7[i])
if(eY[O5]==9 and eY[272+O5]!=0)then
set QEF=false
endif
if(M7[O5]!=null and(GetUnitLifePercent(M7[O5])>$A))then
set QHF=QHF-L74
endif
set O5=GetPlayerId(A7[i])
if(eY[O5]==9 and eY[272+O5]!=0)then
set QFF=false
endif
if(M7[O5]!=null and(GetUnitLifePercent(M7[O5])>$A))then
set QGF=QGF-L84
endif
set i=i+1
endloop
if(not QEF)and(not QFF)then
return
endif
if GetWidgetLife(V4)>.405 then
if(QGF>=3 and(P24>4 and P_4>5 and Q44>5))then
call Q7F(true)
endif
if(QGF>=3 and(P24<4 and P_4<5 and Q44<5))then
call Q7F(false)
endif
endif
set i=0
set k=0
if QFF then
set i=i+HB4
set bj_forLoopAIndex=1
else
set bj_forLoopAIndex=6
endif
if QEF then
set i=i+HC4
set bj_forLoopAIndexEnd=$A
else
set bj_forLoopAIndexEnd=5
endif
set PY7=-1
loop
exitwhen((bj_forLoopAIndex>bj_forLoopAIndexEnd)or(PY7!=-1))
set O5=GetPlayerId(K27(bj_forLoopAIndex))
set JY7=(bj_forLoopAIndex<6)
if(M7[O5]!=null)then
if((GetWidgetLife(M7[O5])>.405)and(not ME7(M7[O5])))then
call GroupClear(H8)
set bj_lastLoadedUnit=M7[O5]
set j=GetUnitUserData(h8[80+O5])
if((PY7==-1)and(MP7(1200.,M7[O5],Condition(function QV7))<=1)and(M47(M7[O5]))and((GetRandomInt(1,i)==1)and(GetRandomInt(1,$A)<=7+Q4F(M7[O5]))))then
if((j>$B and j<17)or(j==$B and JY7==false)or(j==17 and JY7)or(j>$B and j<17)or(j==$B and JY7==false)or(j==17 and JY7)or(j>31 and j<39)or(j==31 and JY7==false)or(j==39 and JY7)or(j>$B and j<17)or(j==$B and JY7==false)or(j==17 and JY7)or(j>51 and j<59)or(j==51 and JY7==false)or(j==59 and JY7))then
set PY7=O5
endif
endif
endif
set i=i-1
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
if PY7!=-1 then
set QDF=KH7(M7[PY7])
if(QDF==0 and PG4)or(QDF==1 and PH4)or(QDF==2 and PF4)or(QDF!=0 and PE4)then
return
endif
set bj_forLoopAIndex=1
set i=JH7(JY7,HC4,HB4)
set j=0
set k=0
loop
exitwhen((bj_forLoopAIndex>$A)or(eY[320+PY7]+j+k>LA4 and k!=0))
if bj_forLoopAIndex==6 then
set i=JH7(JY7,HC4,HB4)
endif
if bj_forLoopAIndex<=5 then
if JY7 then
set O5=GetPlayerId(A7[bj_forLoopAIndex])
else
set O5=GetPlayerId(Z7[bj_forLoopAIndex])
endif
else
if JY7 then
set O5=GetPlayerId(A7[bj_forLoopAIndex-5])
else
set O5=GetPlayerId(Z7[bj_forLoopAIndex-5])
endif
endif
if(M7[O5]!=null)then
if(GetUnitLifePercent(M7[O5])>70)and(GetUnitManaPercent(M7[O5])>50. and GetUnitState(M7[O5],UNIT_STATE_MANA)>$C8)then
set Q9F=KH7(M7[O5])
if(Q9F==QDF)and(bj_forLoopAIndex<=5)then
set j=j+1
if(TZ7(Player(O5)))and((ZPE==-1)or(GetRandomInt(1,3)<=P_F(M7[O5])))then
set ZPE=O5
endif
elseif((Q9F!=QDF)and((QDF==0)or(Q9F==0)))and(eY[272+O5]!=-1)then
if((TZ7(Player(O5)))and(GetHeroLevel(M7[O5])>=6)and(eY[O5]==1)and(h4[O5]==null)and(Bz>hq[320+O5])and(Bz>hq[480+O5])and(Bz>hq[528+O5])and(Bz>hq[576+O5])and(eY[544+O5]==0)and(Bz>hq[848+O5]))then
if(GetRandomInt(1,3)<=P_F(M7[O5]))and((GetRandomInt(1,i)<=2)or(bj_forLoopAIndex>5))then
set k=k+1
set eY[272+O5]=-1
endif
endif
endif
endif
set i=i-1
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
if(h4[304+PY7]!=null)then
set k=k-1
endif
if(j>2)then
set ZPE=-1
endif
if(k>eY[320+PY7]+LA4)then
if JY7 then
set LI4=Y7
else
set LI4=X7
endif
set O5=1
if k==0 and ZPE!=-1 then
set O5=ZPE
endif
loop
if(eY[272+O5]==-1)or((O5==ZPE)and(k==0))then
call PU7(M7[O5],LI4)
call PP7(M7[O5],LI4,GetObjectName(1496330295)+Q[PY7]+GetUnitName(M7[PY7])+"|r")
call DWF(M7[O5],M7[PY7])
endif
set O5=O5+1
exitwhen(O5>$B)or(k==0)
endloop
set LZ4=GetRandomInt(0,2)
endif
set O5=1
loop
exitwhen O5>$B
if eY[272+O5]==-1 then
set eY[272+O5]=0
endif
set O5=O5+1
endloop
endif
set LI4=null
endfunction
function QIF takes nothing returns nothing
local button QJF=GetClickedButton()
local integer ki=GetHandleId(GetTriggeringTrigger())
local string VH=OP7(ki,"PlHost")
local string kf=OP7(ki,"Oid")
local integer UP=0
if(GetTriggerPlayer()!=QT4)then
set UP=5
endif
if(QJF==OQ7(R44,VH+"|Btn11"))then
call PLF(kf+" "+I2S(1+UP))
elseif(QJF==OQ7(R44,VH+"|Btn12"))then
call PLF(kf+" "+I2S(2+UP))
elseif(QJF==OQ7(R44,VH+"|Btn13"))then
call PLF(kf+" "+I2S(3+UP))
elseif(QJF==OQ7(R44,VH+"|Btn14"))then
call PLF(kf+" "+I2S(4+UP))
elseif(QJF==OQ7(R44,VH+"|Btn15"))then
call PLF(kf+" "+I2S(5+UP))
elseif(QJF==OQ7(R44,VH+"|Btn1A"))then
call PLF(kf)
endif
call NM7(ki)
call DestroyTrigger(GetTriggeringTrigger())
call DialogDestroy(GetClickedDialog())
set QJF=null
endfunction
function QKF takes string ki,boolean J4 returns nothing
local dialog QMF=DialogCreate()
local trigger t=CreateTrigger()
local string VH=""
local integer O5=1
if(GetTriggerPlayer()==QT4)then
set VH="Sent"
else
set VH="Scrg"
endif
call DialogSetMessage(QMF,GetObjectName(1496331827))
loop
if(IsPlayerInForce(NI7(O5,GetTriggerPlayer()==QT4),QX4))then
call N07(R44,VH+"|Btn1"+I2S(O5),DialogAddButton(QMF,GetPlayerName(NI7(O5,GetTriggerPlayer()==QT4)),0))
endif
set O5=O5+1
exitwhen O5>5
endloop
if(J4)then
call N07(R44,VH+"|Btn1A",DialogAddButton(QMF,GetObjectName(1496331826),0))
endif
call N07(R44,VH+"|Btn1X",DialogAddButton(QMF,GetObjectName(1496331568),0))
call NR7(GetHandleId(t),"PlHost",VH)
call NR7(GetHandleId(t),"Oid",ki)
call TriggerRegisterDialogEvent(t,QMF)
call TriggerAddAction(t,function QIF)
call DialogDisplay(GetTriggerPlayer(),QMF,true)
set t=null
endfunction
function QNF takes nothing returns nothing
local button QJF=GetClickedButton()
local integer ki=GetHandleId(GetTriggeringTrigger())
local string VH=OP7(ki,"PlHost")
local string kf=OP7(ki,"Oid")
if(QJF==OQ7(R44,VH+"|Btn21"))then
call QKF(kf+"l",false)
elseif(QJF==OQ7(R44,VH+"|Btn22"))then
call QKF(kf+"r",false)
elseif(QJF==OQ7(R44,VH+"|Btn23"))then
call QKF(kf+"m",false)
elseif(QJF==OQ7(R44,VH+"|Btn21X"))then
call PLF(kf+"l")
elseif(QJF==OQ7(R44,VH+"|Btn22X"))then
call PLF(kf+"r")
elseif(QJF==OQ7(R44,VH+"|Btn23X"))then
call PLF(kf+"m")
elseif(QJF==OQ7(R44,VH+"|Btn24"))then
call PLF(kf+"n")
endif
call NM7(ki)
call DestroyTrigger(GetTriggeringTrigger())
call DialogDestroy(GetClickedDialog())
set QJF=null
endfunction
function QOF takes string ki,boolean J4 returns nothing
local dialog QMF=DialogCreate()
local trigger t=CreateTrigger()
local string VH=""
local string kf=""
local string QPF=""
if(J4)then
set QPF="X"
endif
if(GetTriggerPlayer()==QT4)then
set VH="Sent"
else
set VH="Scrg"
endif
call DialogSetMessage(QMF,GetObjectName(1496331569))
call N07(R44,VH+"|Btn21"+QPF,DialogAddButton(QMF,GetObjectName(1496331571),0))
call N07(R44,VH+"|Btn22"+QPF,DialogAddButton(QMF,GetObjectName(1496331570),0))
call N07(R44,VH+"|Btn23"+QPF,DialogAddButton(QMF,GetObjectName(1496331572),0))
if(J4)then
call N07(R44,VH+"|Btn24",DialogAddButton(QMF,GetObjectName(1496331573),0))
endif
call DialogAddButton(QMF,GetObjectName(1496331568),0)
call NR7(GetHandleId(t),"PlHost",VH)
call NR7(GetHandleId(t),"Oid",ki)
call TriggerRegisterDialogEvent(t,QMF)
call TriggerAddAction(t,function QNF)
call DialogDisplay(GetTriggerPlayer(),QMF,true)
set t=null
endfunction
function QQF takes nothing returns nothing
local button QJF=GetClickedButton()
local integer ki=GetHandleId(GetTriggeringTrigger())
local string VH=OP7(ki,"PlHost")
if(QJF==OQ7(R44,VH+"|Btn61"))then
call QKF("-osd",true)
elseif(QJF==OQ7(R44,VH+"|Btn62"))then
call QKF("-oroshan",true)
elseif(QJF==OQ7(R44,VH+"|Btn63"))then
call PLF("-oneut")
elseif(QJF==OQ7(R44,VH+"|Btn64"))then
call PLF("-oauto")
endif
call NM7(ki)
call DestroyTrigger(GetTriggeringTrigger())
call DialogDestroy(GetClickedDialog())
set QJF=null
endfunction
function QRF takes nothing returns nothing
local dialog QMF=DialogCreate()
local trigger t=CreateTrigger()
local string VH=""
if(GetTriggerPlayer()==QT4)then
set VH="Sent"
else
set VH="Scrg"
endif
call DialogSetMessage(QMF,GetObjectName(1496331315))
call N07(R44,VH+"|Btn61",DialogAddButton(QMF,GetObjectName(1496331574),0))
call N07(R44,VH+"|Btn62",DialogAddButton(QMF,GetObjectName(1496331575),0))
if(((GetTriggerPlayer()==QT4)and(Gv))or((GetTriggerPlayer()==QU4)and(Gw)))then
call N07(R44,VH+"|Btn63",DialogAddButton(QMF,GetObjectName(1496331576),0))
else
call N07(R44,VH+"|Btn63",DialogAddButton(QMF,GetObjectName(1496331577),0))
endif
if(PE4)then
elseif(((GetTriggerPlayer()==QT4)and(PZ4))or((GetTriggerPlayer()==QU4)and(PA4)))then
call N07(R44,VH+"|Btn64",DialogAddButton(QMF,GetObjectName(1496331824),0))
else
call N07(R44,VH+"|Btn64",DialogAddButton(QMF,GetObjectName(1496331825),0))
endif
call DialogAddButton(QMF,GetObjectName(1496331568),0)
call NR7(GetHandleId(t),"PlHost",VH)
call TriggerRegisterDialogEvent(t,QMF)
call TriggerAddAction(t,function QQF)
call DialogDisplay(GetTriggerPlayer(),QMF,true)
set t=null
endfunction
function QSF takes nothing returns nothing
local button QJF=GetClickedButton()
local integer ki=GetHandleId(GetTriggeringTrigger())
local string VH=OP7(ki,"PlHost")
if(QJF==OQ7(R44,VH+"|Btn01"))then
call QKF("-oa",true)
elseif(QJF==OQ7(R44,VH+"|Btn02"))then
call QKF("-od",true)
elseif(QJF==OQ7(R44,VH+"|Btn03"))then
call QKF("-ob",false)
elseif(QJF==OQ7(R44,VH+"|Btn04"))then
call QKF("-of",false)
elseif(QJF==OQ7(R44,VH+"|Btn05"))then
call QOF("-og",false)
elseif(QJF==OQ7(R44,VH+"|Btn06"))then
call QOF("-op",true)
elseif(QJF==OQ7(R44,VH+"|Btn07"))then
call QRF()
endif
call NM7(ki)
call DestroyTrigger(GetTriggeringTrigger())
call DialogDestroy(GetClickedDialog())
set QJF=null
endfunction
function P5F takes nothing returns nothing
local dialog QMF=DialogCreate()
local trigger t=CreateTrigger()
local string VH=""
if(GetTriggerPlayer()==QT4)then
set VH="Sent"
else
set VH="Scrg"
endif
call DialogSetMessage(QMF,GetObjectName(1496331315))
call N07(R44,VH+"|Btn01",DialogAddButton(QMF,GetObjectName(1496331316),0))
call N07(R44,VH+"|Btn02",DialogAddButton(QMF,GetObjectName(1496331317),0))
call N07(R44,VH+"|Btn03",DialogAddButton(QMF,GetObjectName(1496331318),0))
call N07(R44,VH+"|Btn04",DialogAddButton(QMF,GetObjectName(1496331319),0))
if(not PE4)then
call N07(R44,VH+"|Btn05",DialogAddButton(QMF,GetObjectName(1496331320),0))
call N07(R44,VH+"|Btn06",DialogAddButton(QMF,GetObjectName(1496332340),0))
endif
call N07(R44,VH+"|Btn07",DialogAddButton(QMF,GetObjectName(1496331321),0))
call DialogAddButton(QMF,GetObjectName(1496331568),0)
call NR7(GetHandleId(t),"PlHost",VH)
call TriggerRegisterDialogEvent(t,QMF)
call TriggerAddAction(t,function QSF)
call DialogDisplay(GetTriggerPlayer(),QMF,true)
set t=null
endfunction
function QTF takes nothing returns nothing
local integer QUF
local integer IMF
local integer L7E
local integer QVF=1
local location QWF=null
local location QXF=null
local string QYF=""
local string QZF=""
if(Bz<150.)then
set QUF=0
elseif(Bz<1200.)then
set QUF=GetRandomInt(1,2)
else
set QUF=GetRandomInt(1,3)
endif
if(QUF==0)then
return
elseif(QUF==1)then
set IMF=1848651827
set QYF="攻城傀儡"
elseif(QUF==2)then
set IMF=1848651845
set QYF="恐怖怪鱼"
else
set IMF=1848651844
set QYF="远古九头蛇"
endif
if(Bz>2400.)then
set QVF=QVF+1
endif
if PE4 then
set L7E=3
else
set L7E=GetRandomInt(2,4)
endif
if(L7E==2)then
set QWF=Wv
set QXF=qv
set QZF="上路"
elseif(L7E==3)then
set QWF=Tv
set QXF=mv
set QZF="中路"
elseif(L7E==4)then
set QWF=Uv
set QXF=pv
set QZF="下路"
endif
call CreateNUnitsAtLoc(QVF,IMF,Z7[0],QWF,bj_UNIT_FACING)
call L78(bj_lastCreatedGroup,L7E)
call CreateNUnitsAtLoc(QVF,IMF,A7[0],QXF,bj_UNIT_FACING)
call L78(bj_lastCreatedGroup,L7E)
call VV7(bj_FORCE_ALL_PLAYERS,10.,"|c000000ff"+QYF+"|r向"+QZF+"进发！")
set QWF=null
set QXF=null
endfunction
function QAF takes boolean O6,string VH,integer QBF returns nothing
local integer QCF=0
local integer Q3F=0
local integer Q6F=0
local boolean QLF=false
local boolean Q1F=false
local integer O5=1
local integer i1
local player pl
loop
set pl=NI7(O5,not O6)
if((TA7(pl))and(M7[GetPlayerId(pl)]!=null))then
set i1=GetUnitTypeId(M7[GetPlayerId(pl)])
if((i1==1211117643)or(i1==1212365106)or(i1==1211119409))then
set Q1F=true
elseif((i1==1315007329)or(i1==1160785972)or(i1==1429221424)or(i1==1332179560)or(i1==1311781206)or(i1==1429221430)or(i1==1214344551))then
set QLF=true
endif
if(IsUnitType(M7[GetPlayerId(pl)],UNIT_TYPE_MELEE_ATTACKER))then
set QCF=QCF+1
endif
if(JR7(i1,5))then
set Q3F=Q3F+1
endif
if(JP7(i1)<=2)then
set Q6F=Q6F+1
endif
endif
set O5=O5+1
exitwhen O5>5
endloop
if(Q1F)then
call NS7(R44,VH+"|G",true)
call NS7(R44,VH+"|W",true)
elseif(QLF)then
call NS7(R44,VH+"|W",true)
endif
if(QCF!=0)and((QCF==QBF)or((QBF>3)and(QCF>=3)))then
call NS7(R44,VH+"|M",true)
endif
if(Q3F!=0)and((Q3F==QBF)or((QBF>3)and(Q3F>=3)))then
call NS7(R44,VH+"|X",true)
endif
if(QBF>3 and Q3F<=2)or(QBF<=3 and Q3F<QBF)then
call NS7(R44,VH+"|Xb",true)
endif
if(Q6F!=0)and((Q6F==QBF)or((QBF>3)and(Q6F>=3)))then
call NS7(R44,VH+"|D",true)
endif
set pl=null
endfunction
function Q0F takes nothing returns nothing
call DestroyTrigger(GetTriggeringTrigger())
call QAF(true,"Sent",HC4)
call QAF(false,"Scrg",HB4)
endfunction
function Q5F takes player pl returns nothing
if((LT or BT))then
if(Y74[GetPlayerId(pl)]==1)then
if(not BT)then
call SetPlayerHandicapXPBJ(pl,(GetPlayerHandicapXPBJ(pl)+25.))
else
call SetPlayerHandicapXPBJ(pl,(GetPlayerHandicapXPBJ(pl)+50.))
endif
elseif(Y74[GetPlayerId(pl)]==3)then
if(not BT)then
call SetPlayerHandicapXPBJ(pl,(GetPlayerHandicapXPBJ(pl)+50.))
else
call SetPlayerHandicapXPBJ(pl,(GetPlayerHandicapXPBJ(pl)+80.))
endif
elseif(Y74[GetPlayerId(pl)]==5)then
if(not BT)then
call SetPlayerHandicapXPBJ(pl,(GetPlayerHandicapXPBJ(pl)+80.))
else
call SetPlayerHandicapXPBJ(pl,(GetPlayerHandicapXPBJ(pl)+120.))
endif
endif
endif
if(RZZZ and FX70==false and DG0==false and LT==false and BT==false)then
if(Y74[GetPlayerId(pl)]==1)then
call SetPlayerHandicapXPBJ(pl,(GetPlayerHandicapXPBJ(pl)+40.))
elseif(Y74[GetPlayerId(pl)]==3)then
call SetPlayerHandicapXPBJ(pl,(GetPlayerHandicapXPBJ(pl)+70.))
elseif(Y74[GetPlayerId(pl)]==5)then
call SetPlayerHandicapXPBJ(pl,(GetPlayerHandicapXPBJ(pl)+100.))
endif
endif
if(FX70)then
if(Y74[GetPlayerId(pl)]==1)then
call SetPlayerHandicapXPBJ(pl,(GetPlayerHandicapXPBJ(pl)+30.))
elseif(Y74[GetPlayerId(pl)]==3)then
call SetPlayerHandicapXPBJ(pl,(GetPlayerHandicapXPBJ(pl)+60.))
elseif(Y74[GetPlayerId(pl)]==5)then
call SetPlayerHandicapXPBJ(pl,(GetPlayerHandicapXPBJ(pl)+90.))
endif
endif
if(DG0)then
if(Y74[GetPlayerId(pl)]==1)then
call SetPlayerHandicapXPBJ(pl,(GetPlayerHandicapXPBJ(pl)+100.))
elseif(Y74[GetPlayerId(pl)]==3)then
call SetPlayerHandicapXPBJ(pl,(GetPlayerHandicapXPBJ(pl)+140.))
elseif(Y74[GetPlayerId(pl)]==5)then
call SetPlayerHandicapXPBJ(pl,(GetPlayerHandicapXPBJ(pl)+180.))
endif
endif
set Y74[16+GetPlayerId(pl)]=R2I(GetPlayerHandicapXPBJ(pl))
endfunction
function Q2F takes player pl,integer O5 returns nothing
local integer i=0
local integer O27=GetPlayerId(pl)
set hG[48+O27]=GetRandomInt(0,1)
if(D4 or RZ4)then
set hG[48+O27]=GetRandomInt(0,2)
endif
set hG[64+O27]=GetRandomInt(0,2)
set hG[80+O27]=GetRandomInt(0,2)
set OL4[O27]=false
call ForceRemovePlayer(L8,pl)
if Y4 then
set i=i+5
endif
if(RZZZ)then
set i=i+5
endif
if(RZZ0)then
set i=i+15
endif
if(FX70)then
set i=i+20
endif
if(DG0)then
set i=i+15
endif
if(CT)then
set i=i+10
endif
if((WT)or(O5==0))then
elseif(Y74[O27]==1)then
call SetPlayerStateBJ(pl,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(pl,PLAYER_STATE_RESOURCE_GOLD)+(120/O5)+(10*(O5-1)))
set i=i+5
elseif(Y74[O27]==3)then
call SetPlayerStateBJ(pl,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(pl,PLAYER_STATE_RESOURCE_GOLD)+(360/O5)+(30*(O5-1)))
set i=i+10
else
call SetPlayerStateBJ(pl,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(pl,PLAYER_STATE_RESOURCE_GOLD)+(600/O5)+(50*(O5-1)))
set i=i+15
endif
if(CT)then
call SetPlayerStateBJ(pl,PLAYER_STATE_RESOURCE_GOLD,R2I(GetPlayerState(pl,PLAYER_STATE_RESOURCE_GOLD)*1.1))
endif
set Y74[32+O27]=i
set Y74[48+O27]=i
set Y74[64+O27]=0
endfunction
function Q_F takes trigger t,boolean O6,boolean R4F,boolean R7F returns nothing
if(NJ7(O6)!=null)then
call TriggerRegisterPlayerChatEvent(t,NJ7(O6),"-o",false)
call TriggerRegisterPlayerChatEvent(t,NJ7(O6),"-c",false)
call TriggerRegisterPlayerChatEvent(t,NJ7(O6)," c",false)
call TriggerRegisterPlayerChatEvent(t,NJ7(O6)," ",true)
if(IsTriggerEnabled(QA4))then
call TriggerRegisterPlayerChatEvent(QA4,NJ7(O6),"-pa",true)
call TriggerRegisterPlayerChatEvent(QA4,NJ7(O6),"-px",true)
if((NJ7(not O6)==null)and(R7F))then
if(R4F)then
call DisplayTimedTextToPlayer(NJ7(O6),0,0,10.,"你可以使用"+"|c00dd8dff"+"-pa|r/"+"|c00dd8dff"+"-pe|r为友方/敌方选择英雄")
else
call DisplayTimedTextToPlayer(NJ7(O6),0,0,10.,"你可以使用"+"|c00dd8dff"+"-pe|r为友方/敌方选择英雄")
endif
call TriggerRegisterPlayerChatEvent(QA4,NJ7(O6),"-pe",true)
elseif(R4F)then
call DisplayTimedTextToPlayer(NJ7(O6),0,0,10.,"你可以使用"+"|c00dd8dff"+"-pa|r为友方选择英雄")
endif
endif
endif
endfunction
function R8F takes nothing returns nothing
local integer i=0
loop
exitwhen i>$F
if M7[i]!=null and GetPlayerController(Player(i))==MAP_CONTROL_COMPUTER and IsUnitInRange(M7[i],IZ4,$3E8)==false and IsUnitInRange(M7[i],JA4,$3E8)==false then
set G97[$B0+i]=0
endif
set i=i+1
endloop
endfunction
function R9F takes nothing returns nothing
local trigger t
set t=CreateTrigger()
call TriggerRegisterUnitInRange(t,JA4,700.,null)
call TriggerAddCondition(t,Condition(function SY7))
call TriggerAddAction(t,function B6E)
set t=CreateTrigger()
call TriggerRegisterUnitInRange(t,IZ4,700.,null)
call TriggerAddCondition(t,Condition(function SX7))
call TriggerAddAction(t,function B6E)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$A,true)
call TriggerAddAction(t,function R8F)
set t=null
endfunction
function RDF takes nothing returns nothing
local trigger t=null
local string VH=GetEventPlayerChatString()
local player pl=K27(S2I(SubString(VH,8,StringLength(VH))))
if(pl!=null)and(pl!=GetTriggerPlayer())and TY7(pl)then
if GetTriggerPlayer()==QT4 then
if IsPlayerAlly(GetLocalPlayer(),QT4)then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10.,Q[0]+"近卫军团|r的AI队长被授予给"+Q[GetPlayerId(pl)]+GetPlayerName(pl)+"|r.")
endif
set QT4=pl
set t=GetTriggeringTrigger()
call DestroyTrigger(t)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,QT4,"-aigrant",false)
call TriggerAddAction(t,function RDF)
call DestroyTrigger(CP4)
set CP4=CreateTrigger()
call Q_F(CP4,true,false,false)
call TriggerAddAction(CP4,function P2F)
else
if IsPlayerAlly(GetLocalPlayer(),QU4)then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10.,Q[6]+"天灾军团|r的AI队长被授予给"+Q[GetPlayerId(pl)]+GetPlayerName(pl)+"|r.")
endif
set QU4=pl
set t=GetTriggeringTrigger()
call DestroyTrigger(t)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,QU4,"-aigrant",false)
call TriggerAddAction(t,function RDF)
call DestroyTrigger(CQ4)
set CQ4=CreateTrigger()
call Q_F(CQ4,false,false,false)
call TriggerAddAction(CQ4,function P2F)
endif
else
call X37(GetTriggerPlayer(),"无效的队长选择")
endif
endfunction
function REF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=(LoadUnitHandle(L7,(OB7),2))
local unit m5=LoadUnitHandle(L7,(OB7),30)
local real YM7=(LoadReal(L7,(OB7),20))
local real so
local real YNG
if GetTriggerEventId()==EVENT_UNIT_DAMAGED and GetUnitAbilityLevel(GetTriggerUnit(),'B0HP')==1 then
if GetEventDamage()>1 then
set YNG=GetEventDamage()*(0.45)
set so=GetEventDamage()*(1.45)
call YW7("+"+I2S(R2I(so)),1,m5,.023,$FF,0,0,$D8)
call DisableTrigger(t)
call B67(GetEventDamageSource(),GetTriggerUnit(),6,YNG)
call EnableTrigger(t)
endif
endif
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED or(GetUnitAbilityLevel(GetTriggerUnit(),'B031')==0 and GetUnitAbilityLevel(GetTriggerUnit(),'B0HP')==0)then
call DestroyEffect((LoadEffectHandle(L7,(OB7),32)))
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
call B67(p5,m5,1,YM7)
if YM7>0 then
call YW7("+"+I2S(R2I(YM7)),1,m5,.023,$FF,0,0,$D8)
endif
elseif GetEventDamage()>1 then
call SaveReal(L7,(OB7),20,((YM7+GetEventDamage()*.3)*1.))
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function RFF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=(LoadUnitHandle(L7,(OB7),2))
local unit m5=(LoadUnitHandle(L7,(OB7),17))
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
set t=CreateTrigger()
set OB7=GetHandleId(t)
call SaveUnitHandle(L7,(OB7),2,(p5))
call SaveUnitHandle(L7,(OB7),30,m5)
call SaveEffectHandle(L7,(OB7),32,(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Silence\\SilenceTarget.mdl",m5,"overhead")))
call SaveReal(L7,(OB7),20,(0*1.))
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,5,false)
call TriggerAddCondition(t,Condition(function REF))
set t=null
set p5=null
set m5=null
return false
endfunction
function RGF takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function RFF))
call SaveUnitHandle(L7,(OB7),17,(GetSpellTargetUnit()))
call SaveUnitHandle(L7,(OB7),2,(GetTriggerUnit()))
set t=null
endfunction
function RIF takes nothing returns nothing
local unit u=GetTriggerUnit()
local item QU8
local integer i=0
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local integer Y68
local item RJF
call DisableTrigger(H94)
loop
exitwhen i>5
set QU8=UnitItemInSlot(u,i)
set Y68=KY7(QU8)
if Y68==Y3 then
set IR4=GetItemPlayer(QU8)
call RemoveItem(QU8)
set RJF=CreateItem(SU[ZX],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
set RJF=CreateItem(SU[RZ],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
elseif Y68==C3 or Y68==E6 then
set IR4=GetItemPlayer(QU8)
call RemoveItem(QU8)
set RJF=CreateItem(SU[AX],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
set RJF=CreateItem(SU[ZY],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
elseif Y68==DP4 then
set IR4=GetItemPlayer(QU8)
call RemoveItem(QU8)
set RJF=CreateItem(SU[SX],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
set RJF=CreateItem(SU[GX],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
set RJF=CreateItem(SU[EB4],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
elseif Y68==DQ4 then
set IR4=GetItemPlayer(QU8)
call RemoveItem(QU8)
set RJF=CreateItem(SU[SX],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
set RJF=CreateItem(SU[GX],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
set RJF=CreateItem(SU[EB4],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
elseif Y68==DE4 then
set IR4=GetItemPlayer(QU8)
call RemoveItem(QU8)
set RJF=CreateItem(SU[OW],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
set RJF=CreateItem(SU[LL],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
set RJF=CreateItem(SU[EL4],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
elseif Y68==F74 then
set IR4=GetItemPlayer(QU8)
call RemoveItem(QU8)
set RJF=CreateItem(SU[FV],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
set RJF=CreateItem(SU[CV],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
elseif Y68==J1 then
set IR4=GetItemPlayer(QU8)
call RemoveItem(QU8)
set RJF=CreateItem(SU[NW],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
set RJF=CreateItem(SU[VW],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
elseif Y68==O1 then
set IR4=GetItemPlayer(QU8)
call RemoveItem(QU8)
set RJF=CreateItem(SU[NW],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
set RJF=CreateItem(SU[VW],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
elseif Y68==Y0 then
set IR4=GetItemPlayer(QU8)
call RemoveItem(QU8)
set RJF=CreateItem(SU[OL],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
set RJF=CreateItem(SU[NZ],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
set RJF=CreateItem(SU[EK4],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
elseif Y68==E24 then
set IR4=GetItemPlayer(QU8)
call RemoveItem(QU8)
set RJF=CreateItem(SU[BV],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
set RJF=CreateItem(SU[DA4],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
elseif Y68==LB then
set IR4=GetItemPlayer(QU8)
call RemoveItem(QU8)
set RJF=CreateItem(SU[FV],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
set RJF=CreateItem(SU[AX],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
set RJF=CreateItem(SU[GY],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
elseif Y68==U1 then
set IR4=GetItemPlayer(QU8)
call RemoveItem(QU8)
set RJF=CreateItem(SU[RL],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
set RJF=CreateItem(SU[OL],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
elseif Y68==JC or Y68==NC then
set IR4=GetItemPlayer(QU8)
call RemoveItem(QU8)
set RJF=CreateItem(SU[DL],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
set RJF=CreateItem(SU[C3],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
elseif Y68==U3 then
set IR4=GetItemPlayer(QU8)
call RemoveItem(QU8)
set RJF=CreateItem(SU[D84],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
set RJF=CreateItem(SU[WL],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
set RJF=CreateItem(SU[EM4],x,y)
call SetItemPlayer(RJF,IR4,false)
call SetItemUserData(RJF,1)
endif
set i=i+1
endloop
call EnableTrigger(H94)
set u=null
set QU8=null
set RJF=null
endfunction
function RKF takes nothing returns boolean
if GetSpellAbilityId()==1093684021 or GetSpellAbilityId()==1093751366 then
call RIF()
endif
return false
endfunction
function RMF takes nothing returns nothing
local unit m5=GetEnumUnit()
local group T69=pw
local unit p5=qw
if IsUnitInGroup(m5,T69)==false then
call GroupAddUnit(T69,m5)
call IssueTargetOrderById(Qw,$D006B,m5)
set E97=true
call B67(p5,m5,1,$C8)
set E97=false
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl",m5,"origin"))
endif
set m5=null
set T69=null
set p5=null
endfunction
function RNF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit BB7=O77(OB7,"Caster")
local group T69=OF7(OB7,"AlreadyDamaged")
local real d
local real x
local real x0=GetUnitX(p5)
local real y
local real y0=GetUnitY(p5)
local group g=WS7()
local integer SV9=GetTriggerEvalCount(t)
local integer i
call SetUnitX(BB7,GetUnitX(p5))
call SetUnitY(BB7,GetUnitY(p5))
set pw=T69
set qw=p5
set Qw=O77(OB7,"Nuker")
if GetTriggerEvalCount(t)>33 then
call KillUnit(BB7)
call WR7(T69)
call NM7(OB7)
call OZ7(t)
else
set d=SV9*18
set i=0
loop
exitwhen i>36
set x=x0+d*Cos(360*i/ 36*bj_DEGTORAD)
set y=y0+d*Sin(360*i/ 36*bj_DEGTORAD)
set IN4=p5
call GroupEnumUnitsInRange(g,x,y,$96,Condition(function AX7))
call ForGroup(g,function RMF)
set i=i+1
endloop
endif
call WR7(g)
set t=null
set BB7=null
set T69=null
set p5=null
set g=null
return false
endfunction
function ROF takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local real x=GetUnitX(WI7)
local real y=GetUnitY(WI7)
local group T69=WS7()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit BB7=CreateUnit(GetOwningPlayer(WI7),1747990833,x,y,0)
local unit RPF=CreateUnit(GetOwningPlayer(WI7),1697656901,GetUnitX(WI7),GetUnitY(WI7),0)
call UnitAddAbility(RPF,1093686320)
call NB7(OB7,"AlreadyDamaged",T69)
call NT7(OB7,"Caster",BB7)
call NT7(OB7,"Nuker",RPF)
call NT7(OB7,"Source",WI7)
call TriggerRegisterTimerEvent(t,.06,true)
call TriggerAddCondition(t,Condition(function RNF))
set t=null
set T69=null
set BB7=null
set RPF=null
set WI7=null
endfunction
function RQF takes nothing returns nothing
if GetSpellAbilityId()==1093686329 then
call ROF()
endif
endfunction
function RRF takes unit ZX7,integer N5E returns nothing
local integer I97=GetHandleId(ZX7)
call SaveInteger(L7,(I97),(750),(N5E))
endfunction
function RSF takes nothing returns nothing
local integer i=0
local integer RTF=0
local boolean RUF=false
if GetSpellAbilityId()==1093683801 then
loop
exitwhen i>5
if KZ7(UnitItemInSlot(GetTriggerUnit(),i))==ZA or KZ7(UnitItemInSlot(GetTriggerUnit(),i))==DT4 then
set RTF=GetItemCharges(UnitItemInSlot(GetTriggerUnit(),i))
if RTF>0 then
call SetItemCharges(UnitItemInSlot(GetTriggerUnit(),i),0)
call RRF(GetTriggerUnit(),0)
if RUF==false then
set RUF=true
call SetUnitState(GetTriggerUnit(),UNIT_STATE_MANA,GetUnitState(GetTriggerUnit(),UNIT_STATE_MANA)+$F*RTF)
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+$F*RTF)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIre\\AIreTarget.mdl",GetTriggerUnit(),"origin"))
endif
endif
return
endif
set i=i+1
endloop
endif
endfunction
function RVF takes integer id returns boolean
local integer i=1
loop
exitwhen i>MC4
if id==MB4[i]then
return false
endif
set i=i+1
endloop
return true
endfunction
function RWF takes unit RXF,unit p5 returns nothing
if IsUnitVisible(RXF,GetOwningPlayer(p5))==false and GetRandomInt(1,100)<$A then
call PlaySoundOnUnitBJ(RI,100,p5)
endif
endfunction
function RYF takes nothing returns nothing
local unit WI7=GetEnumUnit()
local integer i=0
loop
exitwhen i>5
if IsUnitVisible(GetTriggerUnit(),GetOwningPlayer(GetEnumUnit())) then
if KZ7(UnitItemInSlot(WI7,i))==ZA or KZ7(UnitItemInSlot(WI7,i))==DT4 then
if KZ7(UnitItemInSlot(WI7,i))==DT4 then
if GetItemCharges(UnitItemInSlot(WI7,i))==$11 then
call RWF(GetTriggerUnit(),WI7)
endif
call RRF(WI7,YG7(GetItemCharges(UnitItemInSlot(WI7,i))+1,$11))
call SetItemCharges(UnitItemInSlot(WI7,i),YG7(GetItemCharges(UnitItemInSlot(WI7,i))+1,$11))
else
if GetItemCharges(UnitItemInSlot(WI7,i))==$A then
call RWF(GetTriggerUnit(),WI7)
endif
call RRF(WI7,YG7(GetItemCharges(UnitItemInSlot(WI7,i))+1,$A))
call SetItemCharges(UnitItemInSlot(WI7,i),YG7(GetItemCharges(UnitItemInSlot(WI7,i))+1,$A))
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",WI7,"chest"))
set i=5
endif
endif
set i=i+1
endloop
set WI7=null
endfunction
function RZF takes nothing returns nothing
local group g=WS7()
local unit p5=GetTriggerUnit()
local real x=GetUnitX(p5)
local real y=GetUnitY(p5)
call GroupEnumUnitsInRange(g,x,y,$4C9,Condition(function A57))
call ForGroup(g,function RYF)
call WR7(g)
set g=null
set p5=null
endfunction
function RAF takes nothing returns nothing
if RVF(GetSpellAbilityId()) and UL7(GetSpellAbilityId()) and GetUnitAbilityLevel(GetTriggerUnit(),1093678162)==0 and L67(GetSpellAbilityId())==false then
call RZF()
endif
endfunction
function RBF takes unit p5,unit m5 returns nothing
local integer V77=GetUnitAbilityLevel(p5,1093686099)
local real YM7=(.03+.01*V77)*GetUnitState(m5,UNIT_STATE_LIFE)
if GetUnitAbilityLevel(m5,1093678162)==0 then
call SetUnitState(p5,UNIT_STATE_LIFE,YM7+GetUnitState(p5,UNIT_STATE_LIFE))
call B67(p5,m5,2,YM7)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl",p5,"origin"))
endif
endfunction
function RCF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
local unit p5=O77(OB7,"Source")
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==p5 then
call DisableTrigger(t)
call RBF(p5,m5)
call NM7(OB7)
call OZ7(t)
endif
else
call NM7(OB7)
call OZ7(t)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function R3F takes nothing returns nothing
local trigger t=CreateTrigger()
local unit m5=GetTriggerUnit()
local unit p5=GetAttacker()
local integer OB7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,1,false)
call TriggerAddCondition(t,Condition(function RCF))
call NT7(OB7,"Target",m5)
call NT7(OB7,"Source",p5)
set m5=null
set p5=null
set t=null
endfunction
function R6F takes nothing returns nothing
local unit p5=GetAttacker()
if OT7(p5,"CooldownState")==false then
call O37(p5,"CooldownState",.42)
call R3F()
endif
endfunction
function RLF takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093686099)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==O77(GetHandleId(GetTriggeringTrigger()),"Hero")and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))then
call R6F()
endif
return false
endfunction
function R1F takes unit WI7,boolean UA9 returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function RLF))
call NT7(GetHandleId(t),"Hero",WI7)
if UA9 then
set aj[GetPlayerId(GetOwningPlayer(WI7))]=t
endif
set t=null
endfunction
function R0F takes nothing returns boolean
if GetLearnedSkill()==1093686099 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093686099)==1 then
call R1F(GetTriggerUnit(),false)
endif
return false
endfunction
function MK8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function R0F))
set t=null
endfunction
function R5F takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
if GetUnitTypeId(WI7)==1160786520 then
call SetUnitVertexColor(WI7,$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(WI7,$FF,$FF,$FF,$FF)
endif
call DestroyEffect(OG7(OB7,"FX1"))
call DestroyEffect(OG7(OB7,"FX2"))
call UnitRemoveAbility(WI7,1093686098)
call UnitRemoveAbility(WI7,1093686100)
call NM7(OB7)
call OZ7(t)
set t=null
set WI7=null
return false
endfunction
function R2F takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=GetTriggerUnit()
local integer V77=GetUnitAbilityLevel(WI7,1093686322)
local real YM7=V77+2
call SetUnitVertexColor(WI7,$80,0,0,$FF)
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),1093686100,false)
call XF7(WI7,1093686100)
call XF7(WI7,1093686098)
call SetUnitAbilityLevel(WI7,1093686098,V77)
call YW8(WI7,0,0)
call NT7(OB7,"Hero",WI7)
call NU7(OB7,"FX1",AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl",WI7,"right hand"))
call NU7(OB7,"FX2",AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl",WI7,"left hand"))
call TriggerRegisterTimerEvent(t,YM7,false)
call TriggerAddCondition(t,Condition(function R5F))
set WI7=null
set t=null
endfunction
function R_F takes nothing returns boolean
if GetSpellAbilityId()==1093686322 then
call R2F()
endif
return false
endfunction
function MM8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function R_F))
set t=null
endfunction
function Snatch_Damage takes nothing returns nothing
call B67(A64,GetEnumUnit(),1,AL4*175+100)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaBlood\\NagaBloodWindserpent.mdl",GetEnumUnit(),"overhead"))
endfunction
function S4F takes nothing returns nothing
local integer I97=GetHandleId(GetTriggeringTrigger())
local unit ZX7=IN4
local unit IH7=IP4
local real VW9=ON7(I97,"Damage")
call B67(ZX7,IH7,1,VW9)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaBlood\\NagaBloodWindserpent.mdl",IH7,"overhead"))
set ZX7=null
set IH7=null
endfunction
function S7F takes nothing returns nothing
local unit ZX7=A64
local unit IH7=GetEnumUnit()
local integer BC7=AL4
local trigger t=ZF7(ZX7,IH7,'h0DF',"CND",600)
local integer I97=GetHandleId(t)
call NQ7(I97,"Damage",((BC7*175+100)*1.))
set ZX7=null
set IH7=null
endfunction
function S8F takes unit ZX7,unit IH7,integer BC7 returns nothing
local group g=WS7()
set IN4=ZX7
set A64=ZX7
set AL4=BC7
call GroupEnumUnitsInRange(g,GetUnitX(IH7),GetUnitY(IH7),700+25,Condition(function AJ7))
call ForGroup(g,function S7F)
call WR7(g)
set g=null
endfunction
function SEF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit IH7=O77(I97,"Target")
local unit WX7=O77(I97,"Hero")
local unit BB7=O77(I97,"Caster")
local integer BC7=OM7(I97,"Level")
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call UnitShareVision(IH7,GetOwningPlayer(WX7),false)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Human\\HumanLargeDeathExplode\\HumanLargeDeathExplode.mdl",GetUnitX(IH7),GetUnitY(IH7)))
call SetUnitPosition(WX7,GetUnitX(IH7),GetUnitY(IH7))
call PauseUnit(WX7,false)
call ShowUnit(WX7,true)
call SetUnitPathing(WX7,true)
call ClearSelectionForPlayer(GetOwningPlayer(WX7))
call SelectUnitForPlayerSingle(WX7,GetOwningPlayer(WX7))
call SetUnitInvulnerable(WX7,false)
call DestroyEffect(OG7(I97,"FX"))
call DestroyEffect(OG7(I97,"FX3"))
call RemoveUnit(BB7)
call NM7(I97)
call OZ7(t)
call S8F(WX7,IH7,BC7)
call SaveInteger(L7,(GetHandleId((WX7))),((4310)),(2))
elseif(IsUnitType(IH7,UNIT_TYPE_HERO) or ASA(IH7))and IsUnitEnemy(IH7,GetOwningPlayer(WX7)) then
call UnitShareVision(IH7,GetOwningPlayer(WX7),false)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Human\\HumanLargeDeathExplode\\HumanLargeDeathExplode.mdl",GetUnitX(IH7),GetUnitY(IH7)))
call SetUnitPosition(WX7,GetUnitX(IH7),GetUnitY(IH7))
call PauseUnit(WX7,false)
call ShowUnit(WX7,true)
call SetUnitPathing(WX7,true)
call ClearSelectionForPlayer(GetOwningPlayer(WX7))
call SelectUnitForPlayerSingle(WX7,GetOwningPlayer(WX7))
call SetUnitInvulnerable(WX7,false)
call DestroyEffect(OG7(I97,"FX"))
call DestroyEffect(OG7(I97,"FX3"))
call RemoveUnit(BB7)
call NM7(I97)
call OZ7(t)
call S8F(WX7,IH7,BC7)
call SaveInteger(L7,(GetHandleId((WX7))),((4310)),(2))
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()=='A0SX' then
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Human\\HumanLargeDeathExplode\\HumanLargeDeathExplode.mdl",GetUnitX(IH7),GetUnitY(IH7)))
if IsUnitType(IH7,UNIT_TYPE_HERO)==false and ASA(IH7)==false then
call SetUnitState(WX7,UNIT_STATE_LIFE,GetUnitState(WX7,UNIT_STATE_LIFE)+GetUnitState(IH7,UNIT_STATE_LIFE))
endif
call UnitShareVision(IH7,GetOwningPlayer(WX7),false)
call SetUnitPosition(WX7,GetUnitX(IH7),GetUnitY(IH7))
call PauseUnit(WX7,false)
call ShowUnit(WX7,true)
call SetUnitPathing(WX7,true)
call SetUnitAnimation(WX7,"Stand Victory")
call ZP7(WX7,1.5)
call ClearSelectionForPlayer(GetOwningPlayer(WX7))
call SelectUnitForPlayerSingle(WX7,GetOwningPlayer(WX7))
call SetUnitInvulnerable(WX7,false)
call DestroyEffect(OG7(I97,"FX"))
call DestroyEffect(OG7(I97,"FX3"))
call RemoveUnit(BB7)
call NM7(I97)
call OZ7(t)
call S8F(WX7,IH7,BC7)
if IsUnitType(IH7,UNIT_TYPE_HERO)==false and ASA(IH7)==false then
if TV7(GetOwningPlayer(IH7))then
set BB7=CreateUnit(A7[0],1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
call SetUnitOwner(IH7,A7[0],false)
else
set BB7=CreateUnit(Z7[0],1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
call SetUnitOwner(IH7,Z7[0],false)
endif
call UnitAddAbility(BB7,'A2S3')
call IssueTargetOrder(BB7,"charm",IH7)
call UnitRemoveBuffs(IH7,true,true)
call YW8(IH7,0,0)
call B67(WX7,IH7,1,100000)
call B67(WX7,IH7,2,100000)
call B67(WX7,IH7,3,100000)
endif
call SaveInteger(L7,(GetHandleId((WX7))),((4310)),(2))
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELECTED then
if IsUnitType(IH7,UNIT_TYPE_HERO)==true or IsUnitIllusion(IH7)==true or ASA(IH7)==true then
call ClearSelectionForPlayer(GetOwningPlayer(WX7))
call SelectUnitAddForPlayer(BB7,GetOwningPlayer(WX7))
endif
else
call SetUnitPosition(WX7,GetUnitX(IH7),GetUnitY(IH7))
endif
set t=null
set IH7=null
set WX7=null
return false
endfunction
function SFF takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local trigger SGF=CreateTrigger()
local unit BB7=CreateUnit(GetOwningPlayer(WI7),'e010',7260,-7732,0)
local string SHF="Objects\\Spawnmodels\\Naga\\NagaBlood\\NagaBloodWindserpent.mdl"
local string SIF="Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBase.mdl"
local string SJF="Abilities\\Spells\\Other\\Aneu\\AneuTarget.mdl"
if IsPlayerEnemy(GetLocalPlayer(),GetOwningPlayer(WI7))and WG7(GetLocalPlayer())==false then
set SHF=""
set SIF=""
set SJF=""
endif
call UnitRemoveBuffs(WI7,true,true)
call YW8(WI7,0,0)
call SetUnitInvulnerable(BB7,true)
call XF7(BB7,'A0SX')
call ClearSelectionForPlayer(GetOwningPlayer(WI7))
call SelectUnitForPlayerSingle(BB7,GetOwningPlayer(WI7))
call UnitShareVision(m5,GetOwningPlayer(WI7),true)
call SetUnitInvulnerable(WI7,true)
call ShowUnit(WI7,false)
call PauseUnit(WI7,true)
call SetUnitPathing(WI7,false)
call DestroyEffect(AddSpecialEffectTarget(SHF,m5,"overhead"))
call NT7(OB7,"Target",m5)
call NT7(OB7,"Hero",WI7)
call NT7(OB7,"Caster",BB7)
call NU7(OB7,"FX",AddSpecialEffectTarget(SIF,m5,"overhead"))
call NU7(OB7,"FX3",AddSpecialEffectTarget(SJF,m5,"overhead"))
call NP7(OB7,"Level",(GetUnitAbilityLevel(WI7,'A0SW')))
call TriggerRegisterDeathEvent(t,m5)
call TriggerRegisterPlayerUnitEvent(t,GetOwningPlayer(WI7),EVENT_PLAYER_UNIT_SELECTED,Condition(function TO7))
call TriggerRegisterUnitEvent(t,BB7,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterTimerEvent(t,.2,true)
call TriggerAddCondition(t,Condition(function SEF))
call SaveInteger(L7,(GetHandleId((WI7))),((4310)),(1))
if IsUnitType(m5,UNIT_TYPE_HERO)==false and IsUnitIllusion(m5)==false and ASA(m5)==false then
call XF7(m5,'A0SX')
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_SPELL_EFFECT)
set BB7=CreateUnit(GetOwningPlayer(WI7),1697656901,GetUnitX(m5),GetUnitY(m5),0)
call UnitAddAbility(BB7,'A2S3')
call IssueTargetOrder(BB7,"charm",m5)
call ClearSelectionForPlayer(GetOwningPlayer(WI7))
call SelectUnitForPlayerSingle(m5,GetOwningPlayer(WI7))
call SetUnitState(m5,UNIT_STATE_MANA,GetUnitState(m5,UNIT_STATE_MAX_MANA))
endif
set t=null
set SGF=null
set WI7=null
set m5=null
endfunction
function SKF takes nothing returns boolean
if GetSpellAbilityId()=='A0SW' then
call SFF()
endif
return false
endfunction
function SMF takes nothing returns boolean
if GetSpellAbilityId()=='A0SW' and IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and(IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO) or IsUnitIllusion(GetSpellTargetUnit()) or ASA(GetSpellTargetUnit()))then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),GetObjectName('n0LV'))
endif
return false
endfunction
function MO8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SKF))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function SMF))
set t=null
endfunction
function SNF takes integer WF8,unit ZX7,unit IH7 returns nothing
local unit BB7=CreateUnit(GetOwningPlayer(IH7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
if WF8==0 then
call IssueTargetOrderById(ZX7,$D000F,IH7)
elseif WF8==1 then
call XF7(BB7,1093686344)
call SetUnitAbilityLevel(BB7,1093686344,1)
call IssueTargetOrderById(BB7,$D006B,IH7)
elseif WF8==2 then
call XF7(BB7,1093686344)
call SetUnitAbilityLevel(BB7,1093686344,1)
call IssueTargetOrderById(BB7,$D006B,IH7)
elseif WF8==3 then
call XF7(BB7,1093686344)
call SetUnitAbilityLevel(BB7,1093686344,2)
call IssueTargetOrderById(BB7,$D006B,IH7)
elseif WF8==4 then
call XF7(BB7,1093686344)
call SetUnitAbilityLevel(BB7,1093686344,3)
call IssueTargetOrderById(BB7,$D006B,IH7)
elseif WF8==5 then
call XF7(BB7,1093686344)
call SetUnitAbilityLevel(BB7,1093686344,4)
call IssueTargetOrderById(BB7,$D006B,IH7)
elseif WF8==6 then
call XF7(BB7,1093686344)
call SetUnitAbilityLevel(BB7,1093686344,5)
call IssueTargetOrderById(BB7,$D006B,IH7)
elseif WF8==7 then
call XF7(BB7,1093686344)
call SetUnitAbilityLevel(BB7,1093686344,5)
call IssueTargetOrderById(BB7,$D006B,IH7)
elseif WF8==8 then
call XF7(BB7,1093686344)
call SetUnitAbilityLevel(BB7,1093686344,4)
call IssueTargetOrderById(BB7,$D006B,IH7)
endif
set BB7=null
endfunction
function SOF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer V77=OM7(OB7,"Level")
local integer U38=OM7(OB7,"Count")
local unit p5=O77(OB7,"Source")
local integer B07=OM7(OB7,"TargetIndex")
local unit m5=TQ7(B07)
local real SPF=0.5
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
set U38=U38+1
call SNF(U38,p5,m5)
if U38==8 then
call TP7(B07)
call NM7(OB7)
call OZ7(t)
else
call NP7(OB7,"Count",U38)
endif
elseif C67(GetEventDamage())and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))and IsUnitType(GetEventDamageSource(),UNIT_TYPE_STRUCTURE)==false then
if IsUnitType(GetEventDamageSource(),UNIT_TYPE_HERO)or GetUnitAbilityLevel(GetEventDamageSource(),1093678162)==0 then
call SetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE,GetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE)+GetEventDamage()*SPF)
else
call SetUnitState(M7[GetPlayerId(GetOwningPlayer(GetEventDamageSource()))],UNIT_STATE_LIFE,GetUnitState(M7[GetPlayerId(GetOwningPlayer(GetEventDamageSource()))],UNIT_STATE_LIFE)+GetEventDamage()*SPF)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl",GetEventDamageSource(),"origin"))
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function SQF takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call SNF(0,p5,m5)
call NP7(OB7,"Count",0)
call NP7(OB7,"Level",GetUnitAbilityLevel(p5,1093744948))
call NT7(OB7,"Source",p5)
call NP7(OB7,"TargetIndex",TS7(m5))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterTimerEvent(t,.01,false)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function SOF))
set t=null
set p5=null
set m5=null
endfunction
function SRF takes nothing returns boolean
if GetSpellAbilityId()==1093744948 and WQ7(GetSpellTargetUnit())==false then
call SQF()
endif
return false
endfunction
function MN8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SRF))
set t=null
call X_7(1093686344)
endfunction
function IsUnitHeroFilter takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))!=null
endfunction
function SSF takes unit u returns boolean
call PauseUnit(u,true)
call IssueImmediateOrderById(u,$D0004)
call PauseUnit(u,false)
return true
endfunction
function STF takes unit u returns boolean
return(LoadInteger(C_4,D,GetHandleId(u))==0 or(not HaveSavedInteger(C_4,D,GetHandleId(u))))and SSF(u)
endfunction
function SUF takes unit u returns boolean
call HC7("Refresh "+GetUnitName(u))
call RemoveSavedInteger(C_4,D,GetHandleId(u))
return false
endfunction
function SVF takes nothing returns boolean
local integer i1=GetSpellAbilityId()
if(i1==1093681473 or i1==1093748054 or i1==1093686104 or i1==1093683018 or i1==1093683013 or i1==1093683027 or i1==1093681474 or i1==1093748818 or i1==1093751605 or i1==1093749070 or i1==1093751608 or i1==1093681475 or i1==1093681476 or i1==1093681477 or i1==1093747023 or i1==1093752150 or i1==1093747786 or i1==1093752119)or i1==1093751607 or i1==1093687350 or i1==1093810228 or i1==1093683277 or(i1==1093678936 or i1==1093681484)or i1==1093678932 or i1==1093687350 or i1=='A0FZ' then
elseif i1==1093743697 then
call KillUnit(GetTriggerUnit())
else
call UnitRemoveAbility(GetTriggerUnit(),i1)
endif
return true
endfunction
function SWF takes nothing returns boolean
local unit u=GetTriggerUnit()
local boolean SXF
if GetUnitAbilityLevel(u,1097625443)>0 and GetPlayerController(GetOwningPlayer(u))==MAP_CONTROL_COMPUTER then
if AXJ7("(not LoadBoolean(C_4,D,GetHandleId(u)))")and(GetUnitAbilityLevel(u,1093686104)==0 and GetUnitAbilityLevel(u,1093748823)==0 and GetUnitAbilityLevel(u,1093748824)==0 and GetUnitAbilityLevel(u,1093750342)==0 and GetUnitAbilityLevel(u,1093682778)==0 and GetUnitAbilityLevel(u,1093748301)==0 and GetUnitAbilityLevel(u,1093747786)==0 and GetUnitAbilityLevel(u,1093752119)==0 and GetUnitTypeId(u)!=1747993137 and GetUnitTypeId(u)!=1697657136 and GetUnitTypeId(u)!=1747993395 and GetUnitTypeId(u)!=1697657424 and GetUnitTypeId(u)!=1747988559 and GetUnitTypeId(u)!=1697657412 and GetUnitTypeId(u)!=1747990577 and GetUnitTypeId(u)!=1865429305)then
set SXF=GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_ENDCAST and SVF()
endif
endif
set u=null
return false
endfunction
function SYF takes unit I_7,integer Z48 returns item
local integer ID7
local item SZF
set ID7=0
loop
exitwhen ID7>5
set SZF=UnitItemInSlot(I_7,ID7)
if(SZF!=null)and(KY7(SZF)==Z48)then
set SZF=null
return UnitItemInSlot(I_7,ID7)
endif
set ID7=ID7+1
endloop
set SZF=null
return null
endfunction
function QV8 takes nothing returns nothing
local unit WI7=IN4
local integer i=1
local integer SAF
if GetUnitTypeId(WI7)!=1211117653 then
return
endif
loop
exitwhen i>$B
set SAF=BS[i]
call XF7(WI7,SAF)
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),SAF,false)
set i=i+1
endloop
set WI7=null
endfunction
function SBF takes nothing returns boolean
local integer id
local integer i
if IsUnitIllusion(GetTriggerUnit())==false then
set id=GetUnitTypeId(GetTriggerUnit())
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)then
if hZZ(id)==false then
call GroupAddUnit(Uz,GetTriggerUnit())
set IN4=GetTriggerUnit()
call ExecuteFunc("PWE")
elseif id=='H00M' then
call GroupAddUnit(Uz,GetTriggerUnit())
endif
endif
if GetUnitTypeId(GetTriggerUnit())==1211117653 then
set IN4=GetTriggerUnit()
call QV8()
elseif GetUnitTypeId(GetTriggerUnit())==1211117641 then
set IN4=GetTriggerUnit()
call ExecuteFunc("XUD")
endif
endif
return false
endfunction
function SCF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
call UnitRemoveAbility(m5,1093686858)
call UnitRemoveAbility(m5,1093742649)
if GetUnitAbilityLevel(m5,1093686858)==0 or GetUnitAbilityLevel(m5,1093742649)==0 then
call NM7(OB7)
call OZ7(t)
endif
set t=null
set m5=null
return false
endfunction
function S3F takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
call DestroyEffect(OG7(OB7,"FX"))
call NM7(OB7)
call OZ7(t)
call UnitRemoveAbility(m5,1093686858)
call UnitRemoveAbility(m5,1093742649)
if GetUnitAbilityLevel(m5,1093686858)>0 or GetUnitAbilityLevel(m5,1093742649)>0 then
set t=CreateTrigger()
set OB7=GetHandleId(t)
call NT7(OB7,"Target",m5)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function SCF))
endif
set t=null
set m5=null
return false
endfunction
function S6F takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=GetTriggerUnit()
local integer SLF=GetHandleId(WI7)
local unit m5=GetSpellTargetUnit()
local integer S1F=OM7(SLF,"WexLevel")
local integer S0F=OM7(SLF,"ExortLevel")
call XF7(m5,1093686858)
call SetUnitAbilityLevel(m5,1093686858,S1F)
call XF7(m5,1093742649)
call SetUnitAbilityLevel(m5,1093742649,S0F)
call TriggerRegisterTimerEvent(t,9,false)
call TriggerAddCondition(t,Condition(function S3F))
call NT7(OB7,"Target",m5)
call NU7(OB7,"FX",AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIsp\\SpeedTarget.mdl",m5,"origin"))
set t=null
set WI7=null
set m5=null
endfunction
function S5F takes nothing returns boolean
if GetSpellAbilityId()==1093686865 then
call S6F()
endif
return false
endfunction
function S2F takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function S5F))
call Y97(1093686858,GetRandomReal(1,25))
call Y97(1093742649,GetRandomReal(1,25))
set t=null
endfunction
function S_F takes unit p5 returns real
return 400+400.*(OM7(GetHandleId(p5),"WexLevel"))
endfunction
function T4F takes unit p5,unit m5,integer S1F,integer T7F returns nothing
local unit oA=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
local unit T8F=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
local real T9F=.5+.3*T7F
if T7F==7 then
set T9F=2.5
endif
call XF7(oA,1093687371)
call SetUnitAbilityLevel(oA,1093687371,T7F)
call IssueTargetOrderById(oA,$D00B0,m5)
call B27(T8F,m5,1,70+(S1F+T7F)*20.,T9F)
set oA=null
set T8F=null
endfunction
function TDF takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),IQ4)==false then
call GroupAddUnit(IQ4,GetEnumUnit())
call T4F(IN4,GetEnumUnit(),IH4,tl)
endif
endfunction
function TEF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit oA=O77(OB7,"Caster")
local real x2=ON7(OB7,"x2")
local real y2=ON7(OB7,"y2")
local real a=ON7(OB7,"a")
local integer S1F=OM7(OB7,"WexLevel")
local integer T7F=OM7(OB7,"QuasLevel")
local group g=OF7(OB7,"g")
local real x=GetUnitX(oA)+25*Cos(a)
local real y=GetUnitY(oA)+25*Sin(a)
local group TFF=WS7()
local real TGF=KF7(x,y,x2,y2)
if TGF<=30 then
set x=x2
set y=y2
endif
call SetUnitX(oA,X17(x))
call SetUnitY(oA,X07(y))
set IN4=oA
set IQ4=g
set IH4=S1F
set tl=T7F
call GroupEnumUnitsInRange(TFF,x,y,$C8,Condition(function AJ7))
call ForGroup(TFF,function TDF)
call WR7(TFF)
if TGF<=30 or GetTriggerEvalCount(t)>125 then
call KillUnit(oA)
call NM7(OB7)
call OZ7(t)
endif
set t=null
set oA=null
set g=null
set TFF=null
return false
endfunction
function THF takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local location l=GetSpellTargetLoc()
local unit p5=GetTriggerUnit()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=Atan2(y-GetUnitY(p5),x-GetUnitX(p5))
local unit oA
set x=GetUnitX(p5)
set y=GetUnitY(p5)
set oA=CreateUnit(GetOwningPlayer(p5),1848652117,x,y,a*bj_RADTODEG)
call TriggerRegisterTimerEvent(t,.025,true)
call TriggerAddCondition(t,Condition(function TEF))
call NT7(OB7,"Caster",oA)
call NQ7(OB7,"x2",x+S_F(p5)*Cos(a))
call NQ7(OB7,"y2",y+S_F(p5)*Sin(a))
call NP7(OB7,"WexLevel",(OM7(GetHandleId(p5),"WexLevel")))
call NP7(OB7,"QuasLevel",(OM7(GetHandleId(p5),"QuasLevel")))
call NQ7(OB7,"a",a)
call NB7(OB7,"g",WS7())
call RemoveLocation(l)
set t=null
set l=null
set p5=null
endfunction
function TIF takes nothing returns boolean
if GetSpellAbilityId()==1093686859 then
call THF()
endif
return false
endfunction
function TJF takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TIF))
call Y97(1093687371,GetRandomReal(1,25))
set t=null
endfunction
function TKF takes nothing returns nothing
local real TMF=YK7(YJ7(GetUnitState(GetEnumUnit(),UNIT_STATE_MANA),pB),0)
local real TNF=TMF*0.5
if WF7(GetEnumUnit())==false and TMF>0 and VP7(GetEnumUnit())==false then
if GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)>(TNF+0.5)then
call SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)-TNF)
else
call SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,1)
call B67(PB,GetEnumUnit(),1,TNF)
endif
call SetUnitState(GetEnumUnit(),UNIT_STATE_MANA,GetUnitState(GetEnumUnit(),UNIT_STATE_MANA)-TMF)
if(IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO) and IsUnitIllusion(GetEnumUnit())==false)then
call SetUnitState(PB,UNIT_STATE_MANA,GetUnitState(PB,UNIT_STATE_MANA)+TMF*0.5)
endif
endif
endfunction
function TOF takes unit p5,unit oA,integer S1F,integer S0F returns nothing
local group g=WS7()
set PB=p5
set IN4=p5
set pB=S1F*75+25
call GroupEnumUnitsInRange(g,GetUnitX(oA),GetUnitY(oA),700,Condition(function AJ7))
call ForGroup(g,function TKF)
call WR7(g)
set g=null
endfunction
function TPF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer iX=GetTriggerEvalCount(t)
local unit oA=(LoadUnitHandle(L7,(OB7),(19)))
local unit p5=(LoadUnitHandle(L7,(OB7),(2)))
local unit TQF
local real TRF=XN-.285*OM7(OB7,"WexLevel")
local real TSF=VN+(EN-VN)*iX/(TRF/0.05)
call SetUnitScale(oA,TSF,TSF,TSF)
if iX>(TRF/0.05)then
call TOF(p5,oA,OM7(OB7,"WexLevel"),OM7(OB7,"ExortLevel"))
set TQF=CreateUnit(GetOwningPlayer(oA),1697657167,GetUnitX(oA),GetUnitY(oA),0)
call SetUnitTimeScale(TQF,0.3)
call RemoveUnit(oA)
call KillUnit(TQF)
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
endif
set t=null
set oA=null
set TQF=null
return false
endfunction
function TTF takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local location l=GetSpellTargetLoc()
local unit p5=GetTriggerUnit()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=Atan2(y-GetUnitY(p5),x-GetUnitX(p5))
local unit oA=CreateUnit(GetOwningPlayer(p5),1697657165,x,y,a*bj_RADTODEG)
call TriggerRegisterTimerEvent(t,0.05,true)
call TriggerAddCondition(t,Condition(function TPF))
call SaveUnitHandle(L7,(OB7),(19),(oA))
call SaveUnitHandle(L7,(OB7),(2),(p5))
call NP7(OB7,"WexLevel",((OM7(GetHandleId(p5),"WexLevel"))))
call NP7(OB7,"QuasLevel",((OM7(GetHandleId(p5),"QuasLevel"))))
call NP7(OB7,"ExortLevel",((OM7(GetHandleId(p5),"ExortLevel"))))
call RemoveLocation(l)
set t=null
set l=null
set p5=null
endfunction
function TUF takes nothing returns boolean
if GetSpellAbilityId()==1093686867 then
call TTF()
endif
return false
endfunction
function TVF takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TUF))
set t=null
endfunction
function TWF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit TXF=O77(OB7,"Caster")
local unit hn=O77(OB7,"Hero")
if GetUnitAbilityLevel(hn,1110456408)==0 then
call KillUnit(TXF)
call NM7(OB7)
call OZ7(t)
else
call SetUnitAbilityLevel(TXF,1093686856,(OM7(GetHandleId(hn),"QuasLevel")))
call SetUnitX(TXF,GetUnitX(hn))
call SetUnitY(TXF,GetUnitY(hn))
endif
set t=null
set TXF=null
set hn=null
return false
endfunction
function TYF takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit hn=GetTriggerUnit()
local unit TXF=CreateUnit(GetOwningPlayer(hn),1697657174,GetUnitX(hn),GetUnitY(hn),0)
call XF7(TXF,1093686856)
call SetUnitAbilityLevel(TXF,1093686856,(OM7(GetHandleId(hn),"QuasLevel")))
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function TWF))
call NT7(OB7,"Caster",TXF)
call NT7(OB7,"Hero",hn)
set t=null
set hn=null
endfunction
function TZF takes nothing returns boolean
if GetSpellAbilityId()==1093687372 then
call TYF()
endif
return false
endfunction
function TAF takes unit hn returns nothing
if GetUnitAbilityLevel(hn,1093687372)>0 then
call SetUnitAbilityLevel(hn,1093687372,(OM7(GetHandleId(hn),"WexLevel")))
endif
endfunction
function TBF takes nothing returns boolean
if IsUnitIllusion(GetTriggerUnit())==false then
call TAF(GetTriggerUnit())
endif
return false
endfunction
function TCF takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TZF))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function TBF))
call Y97(1093686856,GetRandomReal(1,25))
set t=null
endfunction
function T3F takes unit T6F,unit m5,integer S1F returns nothing
local unit TLF=CreateUnit(GetOwningPlayer(m5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
call XF7(TLF,1093686868)
call SetUnitAbilityLevel(TLF,1093686868,S1F)
call IssueTargetOrderById(TLF,$D0269,m5)
set TLF=null
endfunction
function T1F takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit T6F=O77(OB7,"Source")
local unit m5=O77(OB7,"Target")
local real T0F=ON7(OB7,"Angle")
local real T5F=ON7(OB7,"Rate")
local integer S1F=OM7(OB7,"WexLevel")
local integer T7F=OM7(OB7,"QuasLevel")
local integer T2F=T7F*25/ 3
local real x
local real y
local integer GYE=GetTriggerEvalCount(t)
if GYE>T2F/ 3 then
call NQ7(OB7,"Rate",T5F*.98)
endif
if GYE>T2F or GetTriggerEventId()==EVENT_UNIT_DEATH then
call NM7(OB7)
call OZ7(t)
if GetTriggerEventId()!=EVENT_UNIT_DEATH then
call T3F(T6F,m5,S1F)
endif
else
set x=X17(GetUnitX(m5)+T5F*Cos(T0F))
set y=X07(GetUnitY(m5)+T5F*Sin(T0F))
call Y67(x,y,$96)
call SetUnitPosition(m5,x,y)
endif
set t=null
set T6F=null
set m5=null
return false
endfunction
function T_F takes unit T6F,unit m5,integer S1F,integer T7F,integer U4F returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local real T0F=Atan2(GetUnitY(m5)-GetUnitY(T6F),GetUnitX(m5)-GetUnitX(T6F))
call B67(T6F,m5,1,U4F*40)
call NT7(OB7,"Source",T6F)
call NT7(OB7,"Target",m5)
call NQ7(OB7,"Angle",T0F)
call NQ7(OB7,"Rate",6)
call NP7(OB7,"WexLevel",S1F)
call NP7(OB7,"QuasLevel",T7F)
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function T1F))
set t=null
endfunction
function U7F takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),IQ4)==false and WF7(GetEnumUnit())==false then
call GroupAddUnit(IQ4,GetEnumUnit())
call T_F(IN4,GetEnumUnit(),IH4,tl,Tl)
endif
endfunction
function U8F takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit TLF=O77(OB7,"Caster")
local real a=ON7(OB7,"a")
local real x2=ON7(OB7,"x2")
local real y2=ON7(OB7,"y2")
local group g=OF7(OB7,"g")
local integer S1F=OM7(OB7,"WexLevel")
local integer T7F=OM7(OB7,"QuasLevel")
local integer U4F=OM7(OB7,"ExortLevel")
local real x=GetUnitX(TLF)
local real y=GetUnitY(TLF)
local group g2
if KF7(x,y,x2,y2)<100 then
set x=x2
set y=y2
else
set x=x+33*Cos(a)
set y=y+33*Sin(a)
endif
call SetUnitX(TLF,X17(x))
call SetUnitY(TLF,X07(y))
set g2=WS7()
set IN4=TLF
set IQ4=g
set IH4=S1F
set tl=T7F
set Tl=U4F
call GroupEnumUnitsInRange(g2,x,y,$C8,Condition(function AJ7))
call ForGroup(g2,function U7F)
call WR7(g2)
if(x==x2 and y==y2)or GetTriggerEvalCount(t)>35 then
set g2=WS7()
set IN4=TLF
set IQ4=g
set IH4=S1F
set tl=T7F
set Tl=U4F
call GroupEnumUnitsInRange(g2,x,y,$FA,Condition(function AJ7))
call ForGroup(g2,function U7F)
call WR7(g2)
call NM7(OB7)
call OZ7(t)
call KillUnit(TLF)
call WR7(g)
endif
set t=null
set TLF=null
set g=null
set g2=null
return false
endfunction
function U9F takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local location l=GetSpellTargetLoc()
local unit T6F=GetTriggerUnit()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=Atan2(y-GetUnitY(T6F),x-GetUnitX(T6F))
local unit TLF=CreateUnit(GetOwningPlayer(T6F),1848652120,GetUnitX(T6F),GetUnitY(T6F),a*bj_RADTODEG)
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerAddCondition(t,Condition(function U8F))
call NT7(OB7,"Caster",TLF)
call NQ7(OB7,"a",a)
call NQ7(OB7,"x2",GetUnitX(T6F)+$3E8*Cos(a))
call NQ7(OB7,"y2",GetUnitY(T6F)+$3E8*Sin(a))
call NB7(OB7,"g",WS7())
call NP7(OB7,"WexLevel",(OM7(GetHandleId(T6F),"WexLevel")))
call NP7(OB7,"QuasLevel",(OM7(GetHandleId(T6F),"QuasLevel")))
call NP7(OB7,"ExortLevel",(OM7(GetHandleId(T6F),"ExortLevel")))
call RemoveLocation(l)
set t=null
set l=null
set T6F=null
endfunction
function Zov takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local group g=(LoadGroupHandle(L7,(OB7),(22)))
local integer i=0
local unit TLF
local real a
local real x2
local real y2
local real x
local real y
local group g3
set g3=WS7()
loop
set TLF=LoadUnitHandle(L7,OB7,100+i)
set x2=LoadReal(L7,OB7,$C8+i)
set y2=LoadReal(L7,OB7,300+i)
set a=LoadReal(L7,OB7,100+i)
set x=GetUnitX(TLF)
set y=GetUnitY(TLF)
if KF7(x,y,x2,y2)<100 then
set x=x2
set y=y2
else
set x=x+33*Cos(a)
set y=y+33*Sin(a)
endif
call SetUnitX(TLF,X17(x))
call SetUnitY(TLF,X07(y))
set IN4=TLF
set IQ4=g
set IH4=7
set tl=7
set Tl=7
call GroupEnumUnitsInRange(g3,x,y,$C8,Condition(function AJ7))
call ForGroup(g3,function U7F)
if GetTriggerEvalCount(t)>30 then
call GroupClear(g3)
set IN4=TLF
set IQ4=g
set IH4=7
set tl=7
set Tl=7
call GroupEnumUnitsInRange(g3,x,y,$FA,Condition(function AJ7))
call ForGroup(g3,function U7F)
call GroupClear(g3)
call KillUnit(TLF)
endif
call GroupClear(g3)
set i=i+1
exitwhen i==$C
endloop
call WR7(g3)
if GetTriggerEvalCount(t)>33 then
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
call WR7(g)
endif
set t=null
set TLF=null
set g=null
set g3=null
return false
endfunction
function Zrv takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit T6F=GetTriggerUnit()
local real a=0
local unit TLF
local integer i=0
local integer C2D=$C
loop
set a=30*i
set TLF=CreateUnit(GetOwningPlayer(T6F),'n01X',GetUnitX(T6F),GetUnitY(T6F),a)
call SaveUnitHandle(L7,OB7,100+i,TLF)
call SaveReal(L7,OB7,100+i,a*bj_DEGTORAD)
call SetUnitX(TLF,GetUnitX(T6F))
call SetUnitY(TLF,GetUnitY(T6F))
call SaveReal(L7,OB7,$C8+i,X17(GetUnitX(TLF)+$3E8*Cos(a*bj_DEGTORAD)))
call SaveReal(L7,OB7,300+i,X07(GetUnitY(TLF)+$3E8*Sin(a*bj_DEGTORAD)))
set i=i+1
exitwhen i==C2D
endloop
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerAddCondition(t,Condition(function Zov))
call SaveGroupHandle(L7,(OB7),(22),(WS7()))
call NP7(OB7,"WexLevel",7)
call NP7(OB7,"QuasLevel",7)
call NP7(OB7,"ExortLevel",7)
call SaveInteger(L7,OB7,0,$A)
set t=null
set T6F=null
endfunction
function UDF takes nothing returns boolean
if GetSpellAbilityId()==1093686861 then
if OM7(GetHandleId(GetTriggerUnit()),"WexLevel")==7 and OM7(GetHandleId(GetTriggerUnit()),"QuasLevel")==7 and OM7(GetHandleId(GetTriggerUnit()),"ExortLevel")==7 then
call Zrv()
else
call U9F()
endif
endif
return false
endfunction
function UEF takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function UDF))
call Y97(1093686868,GetRandomReal(1,25))
set t=null
endfunction
function UFF takes unit hn returns real
local integer UGF=(OM7(GetHandleId(hn),"ExortLevel"))
return(80+UGF*35.)/ 2
endfunction
function UHF takes unit hn returns real
local integer UIF=(OM7(GetHandleId(hn),"WexLevel"))
return 325+UIF*175.
endfunction
function UJF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit T6F=O77(OB7,"Source")
local unit m5=O77(OB7,"Target")
local real YM7=ON7(OB7,"Damage")
local effect FX=OG7(OB7,"FX")
local integer GYE=GetTriggerEvalCount(t)
call B67(T6F,m5,1,YM7)
if GYE==3 then
call NM7(OB7)
call OZ7(t)
call DestroyEffect(FX)
endif
set t=null
set T6F=null
set m5=null
set FX=null
return false
endfunction
function UKF takes unit T6F,unit m5,real YM7 returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call NT7(OB7,"Source",T6F)
call NT7(OB7,"Target",m5)
call NQ7(OB7,"Damage",YM7)
call NU7(OB7,"FX",AddSpecialEffectTarget("Environment\\SmallBuildingFire\\SmallBuildingFire2.mdl",m5,"chest"))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function UJF))
set t=null
endfunction
function UMF takes nothing returns nothing
call UKF(IN4,GetEnumUnit(),IJ4/ 5)
call B67(IN4,GetEnumUnit(),1,IJ4)
endfunction
function UNF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local real x=ON7(OB7,"x")
local real y=ON7(OB7,"y")
local real a=ON7(OB7,"a")
local integer GYE=GetTriggerEvalCount(t)-26
local unit T6F=O77(OB7,"Source")
local real UOF
local real UPF
local unit UQF
local group g
if GYE==1 then
set UQF=CreateUnit(GetOwningPlayer(T6F),1697657164,x,y,a*bj_RADTODEG)
call NT7(OB7,"Caster",UQF)
elseif GYE>1 then
set UQF=O77(OB7,"Caster")
endif
if GYE>0 then
set UOF=X17(GetUnitX(UQF)+$F*Cos(a))
set UPF=X07(GetUnitY(UQF)+$F*Sin(a))
call SetUnitX(UQF,UOF)
call SetUnitY(UQF,UPF)
if(GYE>1 and ModuloInteger(GYE,$A)==0)or GYE==1 then
set g=WS7()
set IN4=T6F
set IJ4=UFF(T6F)
call GroupEnumUnitsInRange(g,UOF,UPF,300,Condition(function AJ7))
call ForGroup(g,function UMF)
call WR7(g)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl",UOF,UPF))
endif
if GYE>UHF(T6F)/ 16.6 then
call NM7(OB7)
call OZ7(t)
call KillUnit(UQF)
endif
endif
set t=null
set g=null
set UQF=null
set T6F=null
return false
endfunction
function URF takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local location l=GetSpellTargetLoc()
local unit T6F=GetTriggerUnit()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=Atan2(y-GetUnitY(T6F),x-GetUnitX(T6F))
local unit USF=CreateUnit(GetOwningPlayer(T6F),1697657163,x,y,a*bj_RADTODEG)
call SetUnitTimeScale(USF,.58)
call UnitApplyTimedLife(USF,1112820806,1.75)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function UNF))
call NT7(OB7,"Source",T6F)
call NQ7(OB7,"x",x)
call NQ7(OB7,"y",y)
call NQ7(OB7,"a",a)
call RemoveLocation(l)
set t=null
set l=null
set T6F=null
endfunction
function UTF takes nothing returns boolean
if GetSpellAbilityId()==1093686862 then
call URF()
endif
return false
endfunction
function UUF takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function UTF))
set t=null
endfunction
function UVF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
local real UWF=ON7(GetHandleId(m5),"MeltingStrike|Last")
if UWF+5<=KQ7()then
call UnitRemoveAbility(m5,1093686871)
endif
call NM7(OB7)
call OZ7(t)
set t=null
set m5=null
return false
endfunction
function UXF takes unit m5 returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local integer V77=GetUnitAbilityLevel(m5,1093686871)
if V77==0 then
call XF7(m5,1093686871)
endif
call SetUnitAbilityLevel(m5,1093686871,V77+1)
call NT7(OB7,"Target",m5)
call NQ7(GetHandleId(m5),"MeltingStrike|Last",KQ7())
call TriggerRegisterTimerEvent(t,5,false)
call TriggerAddCondition(t,Condition(function UVF))
set t=null
endfunction
function UYF takes nothing returns boolean
local real d
if GetUnitAbilityLevel(GetTriggerUnit(),1110456625)>0 and GetUnitAbilityLevel(GetEventDamageSource(),1093686870)>0 and O77(GetHandleId(GetTriggeringTrigger()),"Source")==GetEventDamageSource()then
call UnitRemoveAbility(GetTriggerUnit(),1110456625)
call DisableTrigger(GetTriggeringTrigger())
call UXF(GetTriggerUnit())
call NM7(GetHandleId(GetTriggeringTrigger()))
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function UZF takes nothing returns nothing
local trigger t
local unit m5
local unit p5
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
set m5=GetSpellTargetUnit()
set p5=GetTriggerUnit()
else
set m5=GetTriggerUnit()
set p5=GetAttacker()
endif
if IsUnitIllusion(p5)==false then
set t=CreateTrigger()
call NT7(GetHandleId(t),"Source",p5)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function UYF))
endif
set t=null
set m5=null
set p5=null
endfunction
function UAF takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if GetUnitAbilityLevel(GetAttacker(),1093686870)>0 and OO7(GetHandleId(GetTriggeringTrigger()),"OrbOn")and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==O77(GetHandleId(GetTriggeringTrigger()),"Source")then
call UZF()
endif
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if(GetIssuedOrderId()==$D011F)then
call NS7(GetHandleId(GetTriggeringTrigger()),"OrbOn",true)
elseif(GetIssuedOrderId()==$D0120)then
call NS7(GetHandleId(GetTriggeringTrigger()),"OrbOn",false)
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093686870 then
call UZF()
endif
return false
endfunction
function UBF takes unit p5 returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function UAF))
call NT7(GetHandleId(t),"Source",p5)
call NS7(GetHandleId(t),"OrbOn",true)
set t=null
endfunction
function UCF takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function U3F takes nothing returns boolean
return(GetUnitTypeId(GetFilterUnit())==1848652343)
endfunction
function U6F takes player p returns nothing
local group g=WS7()
call GroupEnumUnitsOfPlayer(g,p,Condition(function U3F))
call ForGroup(g,function UCF)
call WR7(g)
set g=null
endfunction
function ULF takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit oA
local integer T7F=(OM7(GetHandleId(p5),"QuasLevel"))
local integer S0F=(OM7(GetHandleId(p5),"ExortLevel"))
call U6F(GetOwningPlayer(p5))
set oA=CreateUnit(GetOwningPlayer(p5),1848652343,GetUnitX(p5),GetUnitY(p5),GetUnitFacing(p5))
call SetUnitColor(oA,GetPlayerColor(Z7[0]))
call AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl",oA,"chest")
call UnitApplyTimedLife(oA,1112820806,$A+$A*T7F)
call SetUnitAbilityLevel(oA,1093686870,S0F)
call UBF(oA)
if Ab[GetPlayerId(GetOwningPlayer(p5))]then
call SelectUnitAddForPlayer(oA,GetOwningPlayer(p5))
endif
if T7F>3 and S0F>3 then
set oA=CreateUnit(GetOwningPlayer(p5),1848652343,GetUnitX(p5),GetUnitY(p5),GetUnitFacing(p5))
call SetUnitColor(oA,GetPlayerColor(Z7[0]))
call AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl",oA,"chest")
call UnitApplyTimedLife(oA,1112820806,$A+$A*T7F)
call SetUnitAbilityLevel(oA,1093686870,S0F)
call UBF(oA)
if Ab[GetPlayerId(GetOwningPlayer(p5))]then
call SelectUnitAddForPlayer(oA,GetOwningPlayer(p5))
endif
endif
call SetPlayerTechResearched(GetOwningPlayer(p5),1378889799,S0F)
call SetPlayerTechResearched(GetOwningPlayer(p5),1378889800,T7F)
set p5=null
set oA=null
endfunction
function U1F takes nothing returns boolean
if GetSpellAbilityId()==1093686863 then
call ULF()
endif
return false
endfunction
function U0F takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function U1F))
call Y97(1093686870,GetRandomReal(1,25))
call Y97(1093686871,GetRandomReal(1,25))
set t=null
endfunction
function U5F takes unit ZX7 returns integer
local integer BC7=(OM7(GetHandleId(ZX7),"QuasLevel"))
if BC7==1 then
return 1093808944
elseif BC7==2 then
return 1093808730
elseif BC7==3 then
return 1093808729
elseif BC7==4 then
return 1093808725
elseif BC7==5 then
return 1093808726
elseif BC7==6 then
return 1093808727
elseif BC7==7 then
return 1093808728
endif
return 1093808944
endfunction
function U2F takes unit IH7 returns nothing
call UnitRemoveAbility(IH7,1093808944)
call UnitRemoveAbility(IH7,1093808730)
call UnitRemoveAbility(IH7,1093808729)
call UnitRemoveAbility(IH7,1093808725)
call UnitRemoveAbility(IH7,1093808726)
call UnitRemoveAbility(IH7,1093808727)
call UnitRemoveAbility(IH7,1093808728)
call UnitRemoveAbility(IH7,1110456410)
endfunction
function U_F takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local real GKD=(LoadReal(L7,(GetHandleId(IH7)),(681)))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if GetTriggerEventId()==EVENT_WIDGET_DEATH or GKD<(TimerGetElapsed(W))then
call U2F(IH7)
endif
set t=null
set IH7=null
return false
endfunction
function V4F takes nothing returns nothing
local unit ZX7=IN4
local unit IH7=GetEnumUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local real GKD=(LoadReal(L7,(GetHandleId(IH7)),(681)))
if GKD<(TimerGetElapsed(W))then
call XF7(IH7,U5F(ZX7))
endif
call SaveReal(L7,(GetHandleId(IH7)),(681),(((TimerGetElapsed(W))+2)*1.))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call TriggerRegisterTimerEvent(t,2.01,false)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerAddCondition(t,Condition(function U_F))
set t=null
set ZX7=null
endfunction
function V7F takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real AQ9=(LoadReal(L7,(I97),(6)))
local real AR9=(LoadReal(L7,(I97),(7)))
local real a=(LoadReal(L7,(I97),($89)))
local real BZ7=(LoadReal(L7,(I97),(57)))
local real x
local real y
local integer i=1
local integer WF8=GetTriggerEvalCount(t)
local group g
if WF8*.1>BZ7 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
set g=WS7()
set IN4=ZX7
loop
exitwhen i>7
set x=AQ9+80*i*Cos((a+90)*bj_DEGTORAD)
set y=AR9+80*i*Sin((a+90)*bj_DEGTORAD)
call GroupEnumUnitsInRange(g,x,y,105,Condition(function AR7))
call ForGroup(g,function V4F)
set x=AQ9+80*i*Cos((a-90)*bj_DEGTORAD)
set y=AR9+80*i*Sin((a-90)*bj_DEGTORAD)
call GroupEnumUnitsInRange(g,x,y,105,Condition(function AR7))
call ForGroup(g,function V4F)
set i=i+1
endloop
call WR7(g)
set g=null
endif
set t=null
set ZX7=null
return false
endfunction
function V8F takes nothing returns nothing
local unit p5=GetTriggerUnit()
local real a=GetUnitFacing(p5)
local integer i=1
local unit oA
local real x
local real y
local real AQ9=GetUnitX(p5)+$E1*Cos(a*bj_DEGTORAD)
local real AR9=GetUnitY(p5)+$E1*Sin(a*bj_DEGTORAD)
local integer T7F=(OM7(GetHandleId(p5),"QuasLevel"))
local integer S0F=(OM7(GetHandleId(p5),"ExortLevel"))
local real BZ7=1.5+1.5*T7F
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
loop
exitwhen i>7
set x=AQ9+80*i*Cos((a+90)*bj_DEGTORAD)
set y=AR9+80*i*Sin((a+90)*bj_DEGTORAD)
set oA=CreateUnit(GetOwningPlayer(p5),1966092367,x,y,GetRandomReal(0,360))
call SetUnitAbilityLevel(oA,1395667016,T7F)
call SetUnitAbilityLevel(oA,1093687374,S0F)
call SetUnitAnimation(oA,"birth")
call QueueUnitAnimation(oA,"stand")
call UnitApplyTimedLife(oA,1112820806,BZ7)
set x=AQ9+80*i*Cos((a-90)*bj_DEGTORAD)
set y=AR9+80*i*Sin((a-90)*bj_DEGTORAD)
set oA=CreateUnit(GetOwningPlayer(p5),1966092367,x,y,GetRandomReal(0,360))
call SetUnitAbilityLevel(oA,1395667016,T7F)
call SetUnitAbilityLevel(oA,1093687374,S0F)
call SetUnitAnimation(oA,"birth")
call QueueUnitAnimation(oA,"stand")
call UnitApplyTimedLife(oA,1112820806,BZ7)
set i=i+1
endloop
call TriggerAddCondition(t,Condition(function V7F))
call TriggerRegisterTimerEvent(t,.1,true)
call SaveReal(L7,(I97),(6),((AQ9)*1.))
call SaveReal(L7,(I97),(7),((AR9)*1.))
call SaveReal(L7,(I97),($89),((a)*1.))
call SaveUnitHandle(L7,(I97),(2),(p5))
call SaveReal(L7,(I97),(57),((BZ7)*1.))
set oA=null
set p5=null
set t=null
endfunction
function V9F takes nothing returns boolean
if GetSpellAbilityId()==1093686864 then
call V8F()
endif
return false
endfunction
function VDF takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function V9F))
call Y97(1395667016,GetRandomReal(1,25))
call Y97(1093687374,GetRandomReal(1,25))
set t=null
endfunction
function VEF takes nothing returns nothing
if KW7(GetEnumUnit())==false then
call B67(IN4,GetEnumUnit(),3,IJ4)
endif
endfunction
function VFF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit hn=O77(OB7,"Hero")
local real YM7=ON7(OB7,"Damage")
local real x=ON7(OB7,"x")
local real y=ON7(OB7,"y")
local group g=WS7()
local integer GYE
set IN4=hn
call GroupEnumUnitsInRange(g,x,y,$E1,Condition(function AJ7))
set GYE=CountUnitsInGroup(g)
if GYE<1 then
set GYE=1
endif
set IJ4=YM7/ GYE
call ForGroup(g,function VEF)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl",x,y))
call WR7(g)
call DestroyEffect(OG7(OB7,"Effect"))
call NM7(OB7)
call OZ7(t)
set t=null
set hn=null
set g=null
return false
endfunction
function VGF takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit hn=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real YM7=(OM7(GetHandleId(hn),"ExortLevel"))*62.5+12.5+25
local string s=""
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(hn)) or(V8 and(GetLocalPlayer()==KX4 or GetLocalPlayer()==KY4))then
set s="Abilities\\Spells\\Items\\VampiricPotion\\VampPotionCaster.mdl"
endif
call Y57(GetOwningPlayer(hn),5.7,x,y,400)
call TriggerRegisterTimerEvent(t,1.7,false)
call TriggerAddCondition(t,Condition(function VFF))
call NT7(OB7,"Hero",hn)
call NQ7(OB7,"x",x)
call NQ7(OB7,"y",y)
call NQ7(OB7,"Damage",YM7)
call NU7(OB7,"Effect",AddSpecialEffect(s,x,y))
call RemoveLocation(l)
set t=null
set hn=null
set l=null
endfunction
function VHF takes nothing returns boolean
if GetSpellAbilityId()==1093686855 then
call VGF()
endif
return false
endfunction
function VIF takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VHF))
set t=null
endfunction
function VJF takes unit T6F,unit m5 returns nothing
local unit VKF=CreateUnit(GetOwningPlayer(m5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
call XF7(VKF,1093686857)
call IssueTargetOrderById(VKF,$D007F,m5)
if WF7(m5)==false then
call B67(T6F,m5,1,30)
endif
set VKF=null
endfunction
function VMF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
local integer V77=OM7(OB7,"Level")
local unit T6F=O77(OB7,"Source")
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamage()>$A and OU7(t,"Cooldown")==false and GetOwningPlayer(GetEventDamageSource())!=GetOwningPlayer(GetTriggerUnit())then
call DisableTrigger(t)
call VJF(T6F,m5)
call EnableTrigger(t)
call O67(t,"Cooldown",.8-V77*.0285)
endif
else
call DestroyEffect(OG7(OB7,"FX"))
call NM7(OB7)
call OZ7(t)
endif
set t=null
set m5=null
set T6F=null
return false
endfunction
function VNF takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit hn=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer V77=(OM7(GetHandleId(hn),"QuasLevel"))
call TriggerRegisterTimerEvent(t,2.5+V77*.5,false)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function VMF))
call NT7(OB7,"Target",m5)
call NP7(OB7,"Level",V77)
call NT7(OB7,"Source",hn)
call NU7(OB7,"FX",AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl",m5,"overhead"))
call VJF(hn,m5)
set t=null
set hn=null
set m5=null
endfunction
function VOF takes nothing returns boolean
if GetSpellAbilityId()==1093686874 then
call VNF()
endif
return false
endfunction
function VPF takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VOF))
call Y97(1093686857,GetRandomReal(1,25))
set t=null
endfunction
function VQF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit hn=O77(OB7,"Hero")
local integer V77=OM7(OB7,"Level")
call SetUnitState(hn,UNIT_STATE_LIFE,GetUnitState(hn,UNIT_STATE_LIFE)+V77*1)
return false
endfunction
function VRF takes unit hn,integer V77 returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(hn)
call NS7(OB7,"Invoker|HasQuas",true)
call NV7(OB7,"Invoker|QuasTrigger",t)
call NT7(GetHandleId(t),"Hero",hn)
call NP7(GetHandleId(t),"Level",V77)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function VQF))
set t=null
endfunction
function VSF takes unit hn returns nothing
local integer OB7=GetHandleId(hn)
local boolean VTF=OO7(OB7,"Invoker|HasQuas")
local trigger t
if VTF then
call NS7(OB7,"Invoker|HasQuas",false)
set t=OE7(OB7,"Invoker|QuasTrigger")
call NM7(GetHandleId(t))
call OZ7(t)
endif
set t=null
endfunction
function VUF takes unit hn returns nothing
local integer OB7=GetHandleId(hn)
local integer VVF=OM7(OB7,"Invoker|Wex")
local integer VWF=OM7(OB7,"Invoker|Quas")
local integer VXF=OM7(OB7,"Invoker|Exort")
local integer S1F=GetUnitAbilityLevel(hn,1093808472)
local integer T7F=GetUnitAbilityLevel(hn,1093808471)
local integer S0F=GetUnitAbilityLevel(hn,1093808470)
call UnitRemoveAbility(hn,1093687108)
call UnitRemoveAbility(hn,1093686853)
call VSF(hn)
call UnitRemoveAbility(hn,1093686839)
if VVF>0 then
call XF7(hn,1093687108)
call XF7(hn,1093686853)
call SetUnitAbilityLevel(hn,1093687108,VVF*S1F)
call SetUnitAbilityLevel(hn,1093686853,VVF*S1F)
call SetPlayerAbilityAvailable(GetOwningPlayer(hn),1093687108,false)
endif
if VWF>0 then
call VRF(hn,VWF*T7F)
endif
if VXF>0 then
call XF7(hn,1093686839)
call SetUnitAbilityLevel(hn,1093686839,VXF*S0F)
endif
endfunction
function VYF takes nothing returns boolean
if IsUnitIllusion(GetTriggerUnit())==false and(GetLearnedSkill()==1093808472 or GetLearnedSkill()==1093808471 or GetLearnedSkill()==1093808470)then
call VUF(GetTriggerUnit())
if GetLearnedSkill()==1093808472 then
call SetHeroAgi(GetTriggerUnit(),GetHeroAgi(GetTriggerUnit(),false)+2,true)
call NP7((GetHandleId(GetTriggerUnit())),"WexLevel",(GetUnitAbilityLevel(GetTriggerUnit(),1093808472)))
endif
if GetLearnedSkill()==1093808471 then
call SetHeroStr(GetTriggerUnit(),GetHeroStr(GetTriggerUnit(),false)+2,true)
call NP7((GetHandleId(GetTriggerUnit())),"QuasLevel",(GetUnitAbilityLevel(GetTriggerUnit(),1093808471)))
endif
if GetLearnedSkill()==1093808470 then
call SetHeroInt(GetTriggerUnit(),GetHeroInt(GetTriggerUnit(),false)+2,true)
call NP7((GetHandleId(GetTriggerUnit())),"ExortLevel",(GetUnitAbilityLevel(GetTriggerUnit(),1093808470)))
endif
endif
return false
endfunction
function VZF takes unit hn returns nothing
if GetUnitAbilityLevel(hn,1093687372)>0 then
call SetUnitAbilityLevel(hn,1093687372,GetUnitAbilityLevel(hn,1093808472))
endif
endfunction
function VAF takes nothing returns nothing
local integer VBF=0
local unit hn=GetTriggerUnit()
local integer T_7=GetHandleId(hn)
local integer VCF=OM7(T_7,"Invoker|Wex")
local integer V3F=OM7(T_7,"Invoker|Quas")
local integer V6F=OM7(T_7,"Invoker|Exort")
local integer U47=OM7(T_7,"Invoker|Current1")
local integer U77=OM7(T_7,"Invoker|Current2")
if VCF==3 and V3F==0 and V6F==0 then
set VBF=1
elseif VCF==2 and V3F==1 and V6F==0 then
set VBF=2
elseif VCF==2 and V3F==0 and V6F==1 then
set VBF=3
elseif VCF==1 and V3F==2 and V6F==0 then
set VBF=4
elseif VCF==1 and V3F==1 and V6F==1 then
set VBF=5
elseif VCF==1 and V3F==0 and V6F==2 then
set VBF=6
elseif VCF==0 and V3F==1 and V6F==2 then
set VBF=7
elseif VCF==0 and V3F==2 and V6F==1 then
set VBF=8
elseif VCF==0 and V3F==0 and V6F==3 then
set VBF=9
elseif VCF==0 and V3F==3 and V6F==0 then
set VBF=$A
endif
if BS[VBF]==U77 then
return
endif
if GetUnitAbilityLevel(hn,1093808473)==5 or GetUnitAbilityLevel(hn,1093748565)==5 then
call SetPlayerAbilityAvailable(GetOwningPlayer(hn),U77,false)
set U77=BS[VBF]
call SetPlayerAbilityAvailable(GetOwningPlayer(hn),U77,true)
else
if U47!=0 and U77!=0 then
call SetPlayerAbilityAvailable(GetOwningPlayer(hn),U47,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(hn),U77,false)
set U47=U77
set U77=BS[VBF]
call SetPlayerAbilityAvailable(GetOwningPlayer(hn),U47,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(hn),U77,true)
elseif U47==0 and U77!=0 then
call SetPlayerAbilityAvailable(GetOwningPlayer(hn),U77,false)
set U47=U77
set U77=BS[VBF]
call SetPlayerAbilityAvailable(GetOwningPlayer(hn),U47,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(hn),U77,true)
else
set U77=BS[VBF]
call SetPlayerAbilityAvailable(GetOwningPlayer(hn),U77,true)
endif
endif
call NP7(T_7,"Invoker|Current1",U47)
call NP7(T_7,"Invoker|Current2",U77)
call VZF(hn)
set hn=null
endfunction
function VLF takes unit WX7,integer V1F,integer V0F,integer V5F returns nothing
local integer Orb1=0
local integer Orb2=0
local integer Orb3=0
local integer V2F
local integer V_F
local integer W4F
local integer W7F
local integer W8F
local integer W9F
local integer WDF
local integer WEF
local integer WFF
call UnitRemoveAbility(WX7,1093682254)
call UnitRemoveAbility(WX7,1093682247)
call UnitRemoveAbility(WX7,1093683544)
call UnitRemoveAbility(WX7,1093683505)
call UnitRemoveAbility(WX7,1093683504)
call UnitRemoveAbility(WX7,1093683290)
call UnitRemoveAbility(WX7,1093683523)
call UnitRemoveAbility(WX7,1093683522)
call UnitRemoveAbility(WX7,1093683524)
call UnitRemoveAbility(WX7,1093808707)
call UnitRemoveAbility(WX7,1093808708)
call UnitRemoveAbility(WX7,1093808709)
call UnitRemoveAbility(WX7,1093808710)
call UnitRemoveAbility(WX7,1093808711)
call UnitRemoveAbility(WX7,1093808712)
call UnitRemoveAbility(WX7,1093808713)
call UnitRemoveAbility(WX7,1093808714)
call UnitRemoveAbility(WX7,1093808715)
if SYF(WX7,GJ4)==null then
set V2F=1093682254
set V_F=1093682247
set W4F=1093683544
set W7F=1093683505
set W8F=1093683504
set W9F=1093683290
set WDF=1093683523
set WEF=1093683522
set WFF=1093683524
else
set V2F=1093808707
set V_F=1093808708
set W4F=1093808709
set W7F=1093808710
set W8F=1093808711
set W9F=1093808712
set WDF=1093808713
set WEF=1093808714
set WFF=1093808715
endif
if V1F==1 and V0F==0 and V5F==0 then
call XF7(WX7,V2F)
elseif V1F==0 and V0F==1 and V5F==0 then
call XF7(WX7,W7F)
elseif V1F==0 and V0F==0 and V5F==1 then
call XF7(WX7,WDF)
elseif V1F==2 and V0F==0 and V5F==0 then
call XF7(WX7,V2F)
call XF7(WX7,V_F)
elseif V1F==1 and V0F==1 and V5F==0 then
call XF7(WX7,V2F)
call XF7(WX7,W8F)
elseif V1F==1 and V0F==0 and V5F==1 then
call XF7(WX7,V2F)
call XF7(WX7,WEF)
elseif V1F==0 and V0F==2 and V5F==0 then
call XF7(WX7,W7F)
call XF7(WX7,W8F)
elseif V1F==0 and V0F==1 and V5F==1 then
call XF7(WX7,W7F)
call XF7(WX7,WEF)
elseif V1F==0 and V0F==0 and V5F==2 then
call XF7(WX7,WDF)
call XF7(WX7,WEF)
elseif V1F==3 and V0F==0 and V5F==0 then
call XF7(WX7,V2F)
call XF7(WX7,V_F)
call XF7(WX7,W4F)
elseif V1F==2 and V0F==1 and V5F==0 then
call XF7(WX7,V2F)
call XF7(WX7,V_F)
call XF7(WX7,W9F)
elseif V1F==2 and V0F==0 and V5F==1 then
call XF7(WX7,V2F)
call XF7(WX7,V_F)
call XF7(WX7,WFF)
elseif V1F==1 and V0F==2 and V5F==0 then
call XF7(WX7,V2F)
call XF7(WX7,W8F)
call XF7(WX7,W9F)
elseif V1F==1 and V0F==1 and V5F==1 then
call XF7(WX7,V2F)
call XF7(WX7,W8F)
call XF7(WX7,WFF)
elseif V1F==1 and V0F==0 and V5F==2 then
call XF7(WX7,V2F)
call XF7(WX7,WEF)
call XF7(WX7,WFF)
elseif V1F==0 and V0F==1 and V5F==2 then
call XF7(WX7,WDF)
call XF7(WX7,WEF)
call XF7(WX7,W9F)
elseif V1F==0 and V0F==2 and V5F==1 then
call XF7(WX7,W7F)
call XF7(WX7,W8F)
call XF7(WX7,WFF)
elseif V1F==0 and V0F==0 and V5F==3 then
call XF7(WX7,WDF)
call XF7(WX7,WEF)
call XF7(WX7,WFF)
elseif V1F==0 and V0F==3 and V5F==0 then
call XF7(WX7,W7F)
call XF7(WX7,W8F)
call XF7(WX7,W9F)
endif
endfunction
function A0E takes nothing returns nothing
local unit WX7=IN4
local integer I97=GetHandleId(WX7)
local integer WGF=OM7(I97,"Invoker|OrbFirst")
local integer WHF=OM7(I97,"Invoker|OrbSecond")
local integer WIF=OM7(I97,"Invoker|OrbThird")
local integer V1F=0
local integer V0F=0
local integer V5F=0
if WGF==1093808472 then
set V1F=V1F+1
elseif WGF==1093808471 then
set V0F=V0F+1
elseif WGF==1093808470 then
set V5F=V5F+1
endif
if WHF==1093808472 then
set V1F=V1F+1
elseif WHF==1093808471 then
set V0F=V0F+1
elseif WHF==1093808470 then
set V5F=V5F+1
endif
if WIF==1093808472 then
set V1F=V1F+1
elseif WIF==1093808471 then
set V0F=V0F+1
elseif WIF==1093808470 then
set V5F=V5F+1
endif
call VLF(WX7,V1F,V0F,V5F)
set WX7=null
endfunction
function WJF takes nothing returns nothing
local unit hn=GetTriggerUnit()
local integer OB7=GetHandleId(hn)
local integer WKF=GetSpellAbilityId()
local integer WMF=OM7(OB7,"Invoker|OrbFirst")
local integer WNF=OM7(OB7,"Invoker|OrbSecond")
local integer WOF=OM7(OB7,"Invoker|OrbThird")
local integer VVF=0
local integer VWF=0
local integer VXF=0
set WMF=WNF
set WNF=WOF
set WOF=WKF
if WMF==1093808472 then
set VVF=VVF+1
elseif WMF==1093808471 then
set VWF=VWF+1
elseif WMF==1093808470 then
set VXF=VXF+1
endif
if WNF==1093808472 then
set VVF=VVF+1
elseif WNF==1093808471 then
set VWF=VWF+1
elseif WNF==1093808470 then
set VXF=VXF+1
endif
if WOF==1093808472 then
set VVF=VVF+1
elseif WOF==1093808471 then
set VWF=VWF+1
elseif WOF==1093808470 then
set VXF=VXF+1
endif
call NP7(OB7,"Invoker|OrbFirst",WMF)
call NP7(OB7,"Invoker|OrbSecond",WNF)
call NP7(OB7,"Invoker|OrbThird",WOF)
call NP7(OB7,"Invoker|Wex",VVF)
call NP7(OB7,"Invoker|Quas",VWF)
call NP7(OB7,"Invoker|Exort",VXF)
call VLF(hn,VVF,VWF,VXF)
call VUF(hn)
call VZF(hn)
endfunction
function WPF takes nothing returns boolean
if GetSpellAbilityId()==1093808472 or GetSpellAbilityId()==1093808471 or GetSpellAbilityId()==1093808470 then
call WJF()
elseif GetSpellAbilityId()==1093808473 or GetSpellAbilityId()==1093748565 then
call VAF()
endif
return false
endfunction
function MP8 takes nothing returns nothing
local trigger t=CreateTrigger()
set BS[1]=1093686867
set BS[2]=1093686859
set BS[3]=1093686865
set BS[4]=1093687372
set BS[5]=1093686861
set BS[6]=1093686862
set BS[7]=1093686863
set BS[8]=1093686864
set BS[9]=1093686855
set BS[$A]=1093686874
call X_7(BS[1])
call X_7(BS[2])
call X_7(BS[3])
call X_7(BS[4])
call X_7(BS[5])
call X_7(BS[6])
call X_7(BS[7])
call X_7(BS[8])
call X_7(BS[9])
call X_7(BS[$A])
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WPF))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function VYF))
set t=null
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,15.,GetObjectName(1848653383))
call Y97(1093687375,GetRandomReal(1,25))
call Y97(1093687108,GetRandomReal(1,25))
call Y97(1093686853,GetRandomReal(1,25))
call Y97(1093686839,GetRandomReal(1,25))
call Y97(1093808470,GetRandomReal(1,25))
call Y97(1093808472,GetRandomReal(1,25))
call Y97(1093808471,GetRandomReal(1,25))
call S2F()
call TJF()
call TVF()
call TCF()
call UEF()
call UUF()
call U0F()
call VDF()
call VIF()
call VPF()
endfunction
function WQF takes nothing returns nothing
if YS8(GetEnumUnit())then
return
endif
call Z57(GetEnumUnit(),RB4,1,8,1110458966)
call UnitMakeAbilityPermanent(GetEnumUnit(),true,RB4)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),RB4,false)
endfunction
function WRF takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093814611)
local group g=WS7()
if BC7==1 then
set RB4=1093748278
elseif BC7==2 then
set RB4=1093748279
elseif BC7==3 then
set RB4=1093748275
elseif BC7==4 then
set RB4=1093748277
endif
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),925,Condition(function A97))
call ForGroup(g,function WQF)
call WR7(g)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl",ZX7,"overhead"))
set ZX7=null
set g=null
endfunction
function WSF takes nothing returns boolean
if GetSpellAbilityId()==1093814611 then
call WRF()
endif
return false
endfunction
function MR8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WSF))
set t=null
endfunction
function WTF takes nothing returns nothing
call BA7(RC4,GetEnumUnit(),2)
call B67(RC4,GetEnumUnit(),1,FP7*75+25)
endfunction
function WUF takes player p,unit m5,integer V77 returns nothing
local unit BB7=CreateUnit(p,1697656901,GetUnitX(m5),GetUnitY(m5),0)
local integer o6
local group g=WS7()
set FP7=V77
set IN4=M7[GetPlayerId(p)]
call GroupEnumUnitsInRange(g,GetUnitX(m5),GetUnitY(m5),280,Condition(function AJ7))
call GroupAddUnit(g,m5)
set RC4=BB7
call ForGroup(g,function WTF)
call WR7(g)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl",m5,"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl",m5,"origin"))
set BB7=null
set g=null
endfunction
function WVF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local player p=O97(OB7,"p")
local integer B07=OM7(OB7,"TargetIndex")
local unit m5=TQ7(B07)
local integer V77=OM7(OB7,"Level")
local unit BU7=O77(OB7,"Projectile")
local real x=GetUnitX(BU7)
local real y=GetUnitY(BU7)
local real Y5=GetUnitX(m5)
local real Z5=GetUnitY(m5)
local real F4=$3E8*.035
local real l4=J77(x,y,Y5,Z5)
local real BV9=x+F4*Cos(l4*bj_DEGTORAD)
local real BW9=y+F4*Sin(l4*bj_DEGTORAD)
local boolean Z18=OO7(OB7,"Active")
call SetUnitX(BU7,BV9)
call SetUnitY(BU7,BW9)
call SetUnitFacing(BU7,l4)
if KF7(Y5,Z5,BV9,BW9)<=F4 then
if Z18 then
call WUF(p,m5,V77)
endif
call KillUnit(BU7)
call TP7(B07)
call NM7(OB7)
call OZ7(t)
endif
set t=null
set m5=null
set BU7=null
return false
endfunction
function WWF takes nothing returns nothing
local unit p5=GetTriggerUnit()
local integer V77=GetUnitAbilityLevel(p5,1093744944)
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit BU7=CreateUnit(GetOwningPlayer(p5),1747990353,GetUnitX(p5),GetUnitY(p5),J77(GetUnitX(p5),GetUnitY(p5),GetUnitX(m5),GetUnitY(m5)))
local boolean Z18=WQ7(GetSpellTargetUnit())==false
call NS7(OB7,"Active",Z18)
call NZ7(OB7,"p",GetOwningPlayer(p5))
call NP7(OB7,"TargetIndex",TS7(m5))
call NT7(OB7,"Projectile",BU7)
call NP7(OB7,"Level",V77)
call TriggerRegisterTimerEvent(t,.035,true)
call TriggerAddCondition(t,Condition(function WVF))
set t=null
set p5=null
set m5=null
set BU7=null
endfunction
function WXF takes nothing returns boolean
if GetSpellAbilityId()==1093744944 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl",GetTriggerUnit(),"weapon"))
else
call WWF()
endif
endif
return false
endfunction
function MQ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function WXF))
set t=null
endfunction
function WYF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit WX7=O77(I97,"Hero")
local integer WF8=(OM7(I97,"Count"))
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_SPELL_EFFECT then
set WF8=WF8+1
call NP7(I97,"Count",WF8)
endif
if(GetTriggerEventId()!=EVENT_PLAYER_UNIT_SPELL_EFFECT and WF8>1)or(GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT and YA8(GetSpellAbilityId())and GetSpellTargetUnit()==WX7)then
if(GetTriggerEventId()!=EVENT_PLAYER_UNIT_SPELL_EFFECT and WF8>1)then
if XH7(WX7)==false then
call UnitRemoveAbility(WX7,1093687119)
call UnitRemoveAbility(WX7,1093817176)
call UnitRemoveAbility(WX7,1110454329)
call UnitRemoveAbility(WX7,1110459472)
endif
call NM7(I97)
call OZ7(t)
endif
elseif GetTriggerEventId()!=EVENT_PLAYER_UNIT_SPELL_EFFECT then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\BattleCryCaster.mdx",WX7,"overhead"))
call XF7(WX7,1093687119)
call SetUnitAbilityLevel(WX7,1093687119,GetUnitAbilityLevel(WX7,1093752648))
call UnitMakeAbilityPermanent(WX7,true,1093687119)
call SetPlayerAbilityAvailable(GetOwningPlayer(WX7),1093687119,false)
if GetUnitAbilityLevel(WX7,1093817177)>0 then
call XF7(WX7,1093817176)
call SetUnitAbilityLevel(WX7,1093817176,GetUnitAbilityLevel(WX7,1093817177))
call UnitMakeAbilityPermanent(WX7,true,1093817176)
call SetPlayerAbilityAvailable(GetOwningPlayer(WX7),1093817176,false)
endif
endif
set t=null
set WX7=null
return false
endfunction
function WZF takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit WX7=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,25,false)
call TriggerRegisterTimerEvent(t,.31,false)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WYF))
call NT7(I97,"Hero",WX7)
call SaveBoolean(L7,I97,0,GetSpellAbilityId()==1093817177)
call NP7(I97,"Count",0)
set t=null
set WX7=null
endfunction
function WAF takes nothing returns boolean
if(GetSpellAbilityId()==1093752648 or GetSpellAbilityId()==1093817177)and(GetUnitTypeId(GetTriggerUnit())==1211117617)then
call WZF()
endif
return false
endfunction
function MS8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WAF))
set t=null
endfunction
function WBF takes nothing returns nothing
local location l
local unit WI7=GetTriggerUnit()
local real x1=GetUnitX(WI7)
local real y1=GetUnitY(WI7)
local real a
local real x2
local real y2
local integer V77=GetUnitAbilityLevel(WI7,1093687349)
local real YM7
local real Hk
local unit m5=null
if GetSpellTargetUnit()!=null then
set l=GetUnitLoc(GetSpellTargetUnit())
else
set l=GetSpellTargetLoc()
endif
set x2=GetLocationX(l)
set y2=GetLocationY(l)
set a=Atan2(y2-y1,x2-x1)
set x2=x1+700*Cos(a)
set y2=y1+700*Sin(a)
if V77==1 then
set YM7=80
set Hk=1.1
elseif V77==2 then
set YM7=140
set Hk=1.6
elseif V77==3 then
set YM7=200
set Hk=2.1
elseif V77==4 then
set YM7=260
set Hk=2.6
endif
if GetSpellTargetUnit()!=null and WQ7(GetSpellTargetUnit())then
set m5=GetSpellTargetUnit()
endif
call H8E(WI7,m5,YM7,Hk,.52,x1,y1,x2,y2,$96,null,true,$640)
call RemoveLocation(l)
set l=null
set WI7=null
endfunction
function WCF takes nothing returns boolean
if GetSpellAbilityId()==1093687349 then
call WBF()
endif
return false
endfunction
function MT8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WCF))
call X_7(1093687350)
set t=null
endfunction
function SXI takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer I97=GetHandleId(t)
local unit ZX7=LoadUnitHandle(L7,I97,0)
local unit IH7=LoadUnitHandle(L7,I97,1)
local integer BC7=LoadInteger(L7,I97,0)
local group g=WS7()
local unit u
set IN4=ZX7
call GroupEnumUnitsInRange(g,GetUnitX(IH7),GetUnitY(IH7),300+25,Condition(function AR7))
call GroupRemoveUnit(g,IH7)
loop
set u=FirstOfGroup(g)
exitwhen u==null
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Demon\\DemonBoltImpact\\DemonBoltImpact.mdl",u,"origin"))
call B67(ZX7,u,1,575+150*BC7)
call GroupRemoveUnit(g,u)
endloop
call WR7(g)
call FlushChildHashtable(L7,I97)
call DestroyTimer(t)
set t=null
set g=null
set u=null
set IH7=null
set ZX7=null
endfunction
function SOI takes nothing returns nothing
local timer t=CreateTimer()
local integer I97=GetHandleId(t)
call TimerStart(t,.25,false,function SXI)
call SaveUnitHandle(L7,I97,0,GetTriggerUnit())
call SaveUnitHandle(L7,I97,1,GetSpellTargetUnit())
call SaveInteger(L7,I97,0,GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()))
set t=null
endfunction
function SRI takes nothing returns boolean
if GetSpellAbilityId()==1093679447 and WQ7(GetSpellTargetUnit())==false then
call SOI()
endif
return false
endfunction
function SII takes nothing returns boolean
if(GetSpellAbilityId()==1093679413 or GetSpellAbilityId()==1093679447)and WF7(GetSpellTargetUnit())then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848659026))
endif
return false
endfunction
function J1X takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function SII))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SRI))
set t=null
endfunction
function W6F takes nothing returns nothing
local location l
local unit WI7=GetTriggerUnit()
local real x1=GetUnitX(WI7)
local real y1=GetUnitY(WI7)
local real a
local real x2
local real y2
local integer V77=GetUnitAbilityLevel(WI7,1093687351)
local real YM7
local real Hk
local unit m5=null
if GetSpellTargetUnit()!=null then
set l=GetUnitLoc(GetSpellTargetUnit())
else
set l=GetSpellTargetLoc()
endif
set x2=GetLocationX(l)
set y2=GetLocationY(l)
set a=Atan2(y2-y1,x2-x1)
set x2=x1+700*Cos(a)
set y2=y1+700*Sin(a)
if V77==1 then
set YM7=80
set Hk=1.6
elseif V77==2 then
set YM7=$8C
set Hk=2
elseif V77==3 then
set YM7=$C8
set Hk=2.4
elseif V77==4 then
set YM7=260
set Hk=2.8
endif
if GetSpellTargetUnit()!=null and WQ7(GetSpellTargetUnit())then
set m5=GetSpellTargetUnit()
endif
call H8E(WI7,m5,YM7,Hk,.52,x1,y1,x2,y2,$96,null,true,$640)
call RemoveLocation(l)
set l=null
set WI7=null
endfunction
function WLF takes nothing returns boolean
if GetSpellAbilityId()==1093687351 then
call W6F()
endif
return false
endfunction
function MV8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WLF))
call X_7(1093687350)
set t=null
endfunction
function W1F takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer BC7=GetUnitAbilityLevel(p5,1093748789)
local real r=GetHeroInt(m5,true)*(3+.5*BC7)
local integer W0F=IMinBJ(R2I(r),R2I(GetUnitState(m5,UNIT_STATE_MANA)))
call SetUnitState(m5,UNIT_STATE_MANA,GetUnitState(m5,UNIT_STATE_MANA)-W0F)
call B67(p5,m5,1,W0F)
call MA9("MBUR",p5,m5,1,1,1,1,.5)
call YW7("-"+I2S(W0F),3,m5,.023,82,82,$FF,$FF)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\ManaBurn\\ManaBurnTarget.mdl",m5,"chest"))
set p5=null
set m5=null
endfunction
function W5F takes nothing returns boolean
if GetSpellAbilityId()==1093748789 and WQ7(GetSpellTargetUnit())==false then
call W1F()
endif
return false
endfunction
function MW8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function W5F))
set t=null
endfunction
function W2F takes nothing returns nothing
call IssueTargetOrderById(TY4,$D02BC,GetEnumUnit())
endfunction
function W_F takes nothing returns nothing
local unit Z69=GetTriggerUnit()
local real x=GetUnitX(Z69)
local real y=GetUnitY(Z69)
local unit LOD=CreateUnit(GetOwningPlayer(Z69),1697656901,x,y,0)
local group g=WS7()
set TY4=LOD
call XF7(LOD,1093748551)
call GroupEnumUnitsInRange(g,x,y,325,Condition(function AW7))
call ForGroup(g,function W2F)
call WR7(g)
call KillUnit(Z69)
call SetUnitAnimation(Z69,"death")
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadLargeDeathExplode\\UndeadLargeDeathExplode.mdl",x,y))
set Z69=null
set LOD=null
set g=null
endfunction
function X4F takes nothing returns boolean
if GetSpellAbilityId()==1093748808 then
call W_F()
endif
return false
endfunction
function MX8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function X4F))
call X_7(1093748551)
set t=null
endfunction
function X7F takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7
local integer BC7=GetUnitAbilityLevel(ZX7,1093815119)
local group BQ9=(LoadGroupHandle(L7,(I97),(22)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamage()>0 and IsPlayerEnemy(GetOwningPlayer(GetEventDamageSource()),GetOwningPlayer(ZX7)) then
if TX7(GetOwningPlayer(GetEventDamageSource()))and C67(GetEventDamage())then
set IH7=M7[GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
if IsUnitInGroup(IH7,BQ9)==false then
call GroupAddUnit(BQ9,IH7)
call YN7(ZX7,GetEventDamage())
if XH7(IH7)==false then
call BA7(ZX7,IH7,0.6*BC7)
call B67(ZX7,IH7,3,GetEventDamage())
endif
set IH7=null
endif
endif
endif
else
call UnitRemoveAbility(ZX7,1093815120)
call WR7(BQ9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
return false
endfunction
function X8F takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,2.25,false)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function X7F))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveGroupHandle(L7,(I97),(22),(WS7()))
call XF7(ZX7,1093815120)
set ZX7=null
set t=null
endfunction
function X9F takes nothing returns boolean
if GetSpellAbilityId()==1093815119 then
call X8F()
endif
return false
endfunction
function MY8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function X9F))
set t=null
endfunction
function XDF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer XEF=GetHandleId(t)
local group g=OF7(XEF,"g")
call WR7(g)
call NM7(XEF)
call OZ7(t)
set t=null
set g=null
return false
endfunction
function XFF takes group g returns nothing
local trigger t=CreateTrigger()
local integer XEF=GetHandleId(t)
call NB7(XEF,"g",g)
call TriggerRegisterTimerEvent(t,$A,false)
call TriggerAddCondition(t,Condition(function XDF))
set t=null
endfunction
function XGF takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit oA
local integer i=1
local real x1=GetUnitX(WI7)
local real y1=GetUnitY(WI7)
local real x2
local real y2
local real YM7
local real Hk
local integer V77=GetUnitAbilityLevel(WI7,1093810505)+GetUnitAbilityLevel(WI7,1093817676)
local group g=WS7()
if V77==1 then
set Hk=2.25
set YM7=250
elseif V77==2 then
set Hk=3.
set YM7=350
elseif V77==3 then
set Hk=3.75
set YM7=450
endif
loop
exitwhen i>16
set x2=x1+(800)*Cos(22.5*i*bj_DEGTORAD)
set y2=y1+(800)*Sin(22.5*i*bj_DEGTORAD)
call H8E(WI7,null,YM7,Hk,.75,x1,y1,x2,y2,$FA,g,false,775)
set i=i+1
endloop
call XFF(g)
set WI7=null
set oA=null
set g=null
endfunction
function XHF takes nothing returns boolean
if GetSpellAbilityId()==1093810505 or GetSpellAbilityId()==1093817676 then
call XGF()
endif
return false
endfunction
function I68 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function XHF))
call X_7(1093687350)
set t=null
endfunction
function XIF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local real GKD=(LoadReal(L7,(GetHandleId(IH7)),(715)))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if GetTriggerEventId()==EVENT_WIDGET_DEATH or GKD<(TimerGetElapsed(W))then
call UnitRemoveAbility(IH7,1093808696)
call UnitRemoveAbility(IH7,1093817673)
call UnitRemoveAbility(IH7,1093817674)
call UnitRemoveAbility(IH7,1093817675)
call UnitRemoveAbility(IH7,1110459704)
call UnitRemoveAbility(IH7,1110460466)
call UnitRemoveAbility(IH7,1110460467)
call UnitRemoveAbility(IH7,1110460468)
endif
set t=null
set IH7=null
return false
endfunction
function XJF takes unit IH7 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
if Y_4==1 then
call UnitRemoveAbility(IH7,1093817673)
call UnitRemoveAbility(IH7,1093817674)
call UnitRemoveAbility(IH7,1093817675)
call UnitRemoveAbility(IH7,1110460466)
call UnitRemoveAbility(IH7,1110460467)
call UnitRemoveAbility(IH7,1110460468)
call XF7(IH7,1093808696)
elseif Y_4==2 then
call UnitRemoveAbility(IH7,1093808696)
call UnitRemoveAbility(IH7,1093817674)
call UnitRemoveAbility(IH7,1093817675)
call UnitRemoveAbility(IH7,1110459704)
call UnitRemoveAbility(IH7,1110460467)
call UnitRemoveAbility(IH7,1110460468)
call XF7(IH7,1093817673)
elseif Y_4==3 then
call UnitRemoveAbility(IH7,1093808696)
call UnitRemoveAbility(IH7,1093817673)
call UnitRemoveAbility(IH7,1093817675)
call UnitRemoveAbility(IH7,1110459704)
call UnitRemoveAbility(IH7,1110460466)
call UnitRemoveAbility(IH7,1110460468)
call XF7(IH7,1093817674)
elseif Y_4==4 then
call UnitRemoveAbility(IH7,1093808696)
call UnitRemoveAbility(IH7,1093817673)
call UnitRemoveAbility(IH7,1093817674)
call UnitRemoveAbility(IH7,1110459704)
call UnitRemoveAbility(IH7,1110460466)
call UnitRemoveAbility(IH7,1110460467)
call XF7(IH7,1093817675)
endif
call TriggerRegisterDeathEvent(t,IH7)
call TriggerRegisterTimerEvent(t,6.,false)
call TriggerAddCondition(t,Condition(function XIF))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveReal(L7,(GetHandleId(IH7)),(715),((5.9+(TimerGetElapsed(W)))*1.))
set t=null
endfunction
function XKF takes nothing returns nothing
if YS8(GetEnumUnit())==false then
call XJF(GetEnumUnit())
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093808696,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093817673,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093817674,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093817675,false)
call B67(Y24,GetEnumUnit(),2,25+50*Y_4)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl",GetEnumUnit(),"chest"))
endfunction
function XMF takes nothing returns nothing
local group g=WS7()
local unit ZX7=GetTriggerUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093808694)
set IN4=ZX7
set Y_4=BC7
set Y24=ZX7
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),425,Condition(function AJ7))
call ForGroup(g,function XKF)
call WR7(g)
set g=null
set ZX7=null
endfunction
function XNF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call SetUnitTimeScale(ZX7,1)
set t=null
set ZX7=null
return false
endfunction
function XOF takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,.3,false)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerAddCondition(t,Condition(function XNF))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SetUnitTimeScale(ZX7,2)
set t=null
set ZX7=null
endfunction
function XPF takes nothing returns boolean
if GetSpellAbilityId()==1093808694 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
call XMF()
else
call XOF()
endif
endif
return false
endfunction
function IL8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function XPF))
set t=null
endfunction
function XQF takes nothing returns nothing
local integer I97=GetHandleId(GetTriggeringTrigger())
local unit ZX7=IN4
local unit IH7=IP4
local integer BC7=OM7(I97,"Level")
local real VW9=BC7*75
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
local integer MQQ=GetUnitAbilityLevel(ZX7,1093677905)
call XF7(BB7,1093687628)
call SetUnitAbilityLevel(BB7,1093687628,BC7)
call IssueTargetOrderById(BB7,$D006B,IH7)
if IsUnitType(IH7,UNIT_TYPE_HERO) then
set VW9=VW9/3
endif
if MQQ>0 and GetRandomReal(0,100)<=(16+3*MQQ) then
set VW9=VW9*(1.5+MQQ)
call YW7(I2S(R2I(VW9))+"!",3,IH7,0.02,255,0,0,255)
endif
call B67(ZX7,IH7,3,VW9)
set ZX7=null
set IH7=null
set BB7=null
endfunction
function XRF takes nothing returns nothing
local unit WX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local trigger t=ZF7(WX7,IH7,1747988784,"XQF",$4B0)
local integer XSF=GetHandleId(t)
call NP7(XSF,"Level",GetUnitAbilityLevel(WX7,1093687629))
set WX7=null
set IH7=null
set t=null
endfunction
function XTF takes nothing returns boolean
if GetSpellAbilityId()==1093687629 and WQ7(GetSpellTargetUnit())==false then
call XRF()
endif
return false
endfunction
function IG8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function XTF))
set t=null
endfunction
function XUF takes nothing returns nothing
local location l=GetSpellTargetLoc()
call YT7("Abilities\\Spells\\Orc\\EarthQuake\\EarthQuakeTarget.mdl",GetLocationX(l),GetLocationY(l),2)
call TerrainDeformationRippleBJ(.3,false,l,0,300,100,.4,20)
call RemoveLocation(l)
set l=null
endfunction
function XVF takes nothing returns boolean
if GetSpellAbilityId()==1093678679 then
call XUF()
endif
return false
endfunction
function HV8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function XVF))
endfunction
function CO1 takes unit ZX7,unit IH7 returns nothing
call Z57(IH7,1093817433,1,0.75,1110460465)
endfunction
function CO2 takes nothing returns nothing
local real d
if IsUnitInGroup(GetEnumUnit(),ZOI)==false then
set d=KE7(GetEnumUnit(),Z1I)
if d<Z2I then
set Z2I=d
set ZII=GetEnumUnit()
endif
endif
endfunction
function CO3 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(OB7),(2)))
local unit IH7=(LoadUnitHandle(L7,(OB7),(17)))
local group BQ9=(LoadGroupHandle(L7,(OB7),(187)))
local real x=GetUnitX(IH7)
local real y=GetUnitY(IH7)
local group g=WS7()
local integer BC7=GetUnitAbilityLevel(ZX7,1093678678)
call GroupAddUnit(BQ9,IH7)
call CO1(ZX7,IH7)
set IN4=ZX7
set ZII=null
set Z1I=IH7
set ZOI=BQ9
set Z2I=999999
call GroupEnumUnitsInRange(g,x,y,650+25,Condition(function A17))
call ForGroup(g,function CO2)
call WR7(g)
if ZII==null or GetTriggerEvalCount(t)>3+BC7 then
call WR7(BQ9)
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
else
set IH7=ZII
call SaveUnitHandle(L7,(OB7),(17),(IH7))
endif
set g=null
set t=null
set ZX7=null
set IH7=null
set BQ9=null
return false
endfunction
function CO4 takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local group BQ9=WS7()
call SaveUnitHandle(L7,(OB7),(2),(ZX7))
call SaveUnitHandle(L7,(OB7),(17),(IH7))
call SaveGroupHandle(L7,(OB7),(187),(BQ9))
call TriggerRegisterTimerEvent(t,0.25,true)
call TriggerAddCondition(t,Condition(function CO3))
set ZX7=null
set IH7=null
set t=null
endfunction
function CO5 takes nothing returns boolean
if GetSpellAbilityId()==1093678678 and WQ7(GetSpellTargetUnit())==false then
call CO4()
endif
return false
endfunction
function HM1 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CO5))
set t=null
endfunction
function XWF takes itemtype XXF,integer XYF returns nothing
local group g
set bj_stockPickedItemType=XXF
set bj_stockPickedItemLevel=XYF
set g=CreateGroup()
call GroupEnumUnitsOfType(g,"marketplace",bH)
call ForGroup(g,function UpdateEachStockBuildingEnum)
call DestroyGroup(g)
set g=null
endfunction
function XZF takes nothing returns nothing
local integer pickedItemId
local itemtype XAF
local integer XBF=0
local integer XCF=0
local integer XYF
set XYF=1
loop
if(bj_stockAllowedPermanent[XYF])then
set XCF=XCF+1
if(GetRandomInt(1,XCF)==1)then
set XAF=ITEM_TYPE_PERMANENT
set XBF=XYF
endif
endif
if(bj_stockAllowedCharged[XYF])then
set XCF=XCF+1
if(GetRandomInt(1,XCF)==1)then
set XAF=ITEM_TYPE_CHARGED
set XBF=XYF
endif
endif
if(bj_stockAllowedArtifact[XYF])then
set XCF=XCF+1
if(GetRandomInt(1,XCF)==1)then
set XAF=ITEM_TYPE_ARTIFACT
set XBF=XYF
endif
endif
set XYF=XYF+1
exitwhen XYF>$A
endloop
if(XCF==0)then
set XAF=null
return
endif
call XWF(XAF,XBF)
set XAF=null
endfunction
function X3F takes nothing returns nothing
call XZF()
call TimerStart(bj_stockUpdateTimer,bj_STOCK_RESTOCK_INTERVAL,true,function XZF)
endfunction
function X6F takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local integer KB7=OM7(I97,"itemId")
local real x=ON7(I97,"x")
local real y=ON7(I97,"y")
local player p=O97(I97,"p")
local boolean XLF=OO7(I97,"consumable")
local integer VV8=OM7(I97,"charges")
local item X1F=CreateItem(KB7,x,y)
call SetItemPlayer(X1F,p,true)
call SetItemUserData(X1F,0)
if XLF then
call SetItemCharges(X1F,VV8)
endif
call NM7(I97)
call OZ7(t)
set eY[512+GetPlayerId(p)]=3
set G87[288+GetPlayerId(p)]=X1F
set t=null
set p=null
return false
endfunction
function X0F takes integer KB7,real x,real y,player p,boolean XLF,integer VV8 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call NP7(I97,"itemId",KB7)
call NQ7(I97,"x",x*1.)
call NQ7(I97,"y",y*1.)
call NZ7(I97,"p",p)
call NS7(I97,"consumable",XLF)
call NP7(I97,"charges",VV8)
call TriggerAddCondition(t,Condition(function X6F))
call TriggerRegisterTimerEvent(t,0,false)
set eY[512+GetPlayerId(p)]=2
set t=null
endfunction
function X5F takes player p,unit I_7,integer Z48,item X2F returns item
local integer ID7
local item SZF
set ID7=0
loop
exitwhen ID7>5
set SZF=UnitItemInSlot(I_7,ID7)
if SZF!=null and SZF!=X2F and KY7(SZF)==Z48 and(GetItemPlayer(SZF)==p or Z48==VC or Z48==WC)then
set SZF=null
return UnitItemInSlot(I_7,ID7)
endif
set ID7=ID7+1
endloop
set SZF=null
return null
endfunction
function X_F takes player p,unit I_7,integer Z48 returns item
local integer ID7
local item SZF
set ID7=0
loop
exitwhen ID7>5
set SZF=UnitItemInSlot(I_7,ID7)
if(SZF!=null)and(KY7(SZF)==Z48)and(GetItemPlayer(SZF)==p or Z48==VC or Z48==WC)then
set SZF=null
return UnitItemInSlot(I_7,ID7)
endif
set ID7=ID7+1
endloop
set SZF=null
return null
endfunction
function Y4F takes item Z4 returns integer
local integer n5
local integer i=1
if Z4==null then
return-2
endif
set n5=GetItemTypeId(Z4)
loop
exitwhen i>EV
if BU[i]==n5 then
return ZU[i]
endif
set i=i+1
endloop
return-1
endfunction
function Y7F takes item Z4 returns boolean
return GetItemType(Z4)==ITEM_TYPE_POWERUP or GetItemType(Z4)==ITEM_TYPE_PURCHASABLE or GetItemType(Z4)==ITEM_TYPE_MISCELLANEOUS
endfunction
function Y8F takes unit p5 returns nothing
local real x
local real y
if TV7(GetOwningPlayer(p5))then
set x=GetRectCenterX(ED)
set y=GetRectCenterY(ED)
else
set x=GetRectCenterX(L9)
set y=GetRectCenterY(L9)
endif
call IssuePointOrderById(p5,$D0012,x,y)
call NS7(GetHandleId(p5),"aiCrow|Away",false)
endfunction
function Y9F takes nothing returns nothing
local item D88=GetEnumItem()
if GetWidgetLife(D88)>0 and GetItemPlayer(D88)==G_4 and TJ4==0 and IsItemVisible(D88) then
set TJ4=TJ4+1
call UnitAddItem(H44,D88)
endif
set D88=null
endfunction
function YDF takes nothing returns nothing
local item D88=GetEnumItem()
if GetWidgetLife(D88)>0 and GetItemPlayer(D88)==G_4 and IsItemVisible(D88) then
call UnitAddItem(zh,D88)
endif
set D88=null
endfunction
function YEF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit EK9=O77(OB7,"Courier")
local player p=O97(OB7,"p")
local real x=ON7(OB7,"x")
local real y=ON7(OB7,"y")
local rect r=Rect(x-300,y-300,x+300,y+300)
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call NM7(OB7)
call OZ7(t)
set G_4=p
set H44=p5
set zh=EK9
call EnumItemsInRect(r,Condition(function TO7),function YDF)
else
if GetTriggerEvalCount(t)>9 then
call NM7(OB7)
call OZ7(t)
set G_4=p
set H44=p5
set zh=EK9
call EnumItemsInRect(r,Condition(function TO7),function YDF)
else
set G_4=p
set H44=p5
set TJ4=0
call EnumItemsInRect(r,Condition(function TO7),function Y9F)
endif
endif
call RemoveRect(r)
set t=null
set p5=null
set EK9=null
set r=null
return false
endfunction
function YFF takes unit EK9,unit p5 returns nothing
local player p=GetOwningPlayer(p5)
local integer i
local item D88
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local real x=GetUnitX(EK9)
local real y=GetUnitY(EK9)
local integer Z48
if IsTerrainPathable(x,y,PATHING_TYPE_WALKABILITY)then
set x=GetUnitX(p5)
set y=GetUnitY(p5)
endif
call TriggerRegisterDeathEvent(t,p5)
call TriggerRegisterTimerEvent(t,.01,true)
call TriggerAddCondition(t,Condition(function YEF))
call NT7(OB7,"Source",p5)
call NT7(OB7,"Courier",EK9)
call NZ7(OB7,"p",p)
call NQ7(OB7,"x",x*1.)
call NQ7(OB7,"y",y*1.)
set i=0
loop
exitwhen i>5
set D88=UnitItemInSlot(EK9,i)
set Z48=KY7(D88)
if D88!=null and GetItemPlayer(D88)==p and F_9(D88)==false and(Z48!=JA and Z48!=NA and Z48!=QA and Z48!=WA and Z48!=YA and Z48!=HJ0 and Z48!=HJ1)then
call UnitRemoveItem(EK9,D88)
call SetItemPosition(D88,x,y)
endif
set i=i+1
endloop
set t=null
set D88=null
endfunction
function YGF takes trigger t returns nothing
local integer I97=GetHandleId(t)
local unit X_8=O77(I97,"Courier")
local unit WX7=O77(I97,"Source")
local real x
local real y
local real YHF
local real YIF
local real YJF
local real YKF
local real YMF
local real ZFD
local real YNF
local real YOF=GetUnitX(WX7)
local real YPF=GetUnitY(WX7)
if(K37(WX7)==false)then
set x=GetUnitX(WX7)
set y=GetUnitY(WX7)
set YKF=ON7(I97,"DeliveryTargetX")
set YMF=ON7(I97,"DeliveryTargetY")
call NQ7(I97,"DeliveryTargetX",x*1.)
call NQ7(I97,"DeliveryTargetY",y*1.)
set YJF=Atan2(y-YMF,x-YKF)
set YHF=SquareRoot((x-YKF)*(x-YKF)+(y-YMF)*(y-YMF))/.2
set YIF=GetUnitMoveSpeed(X_8)
set ZFD=KF7(GetUnitX(WX7),GetUnitY(WX7),GetUnitX(X_8),GetUnitY(X_8))
set YNF=RAbsBJ(YJF*bj_RADTODEG-GetUnitFacing(X_8))
if(ZFD<YIF-YHF and YIF>YHF)or(ZFD<RMaxBJ(YIF,YHF)and YNF>=90)then
else
set YOF=x+YHF*Cos(YJF)
set YPF=y+YHF*Sin(YJF)
endif
endif
call NP7(I97,"OnDelivery",(1))
call IssuePointOrderById(X_8,$D0012,YOF,YPF)
set X_8=null
set WX7=null
set t=null
endfunction
function YQF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit EK9=O77(I97,"Courier")
local unit ZX7=O77(I97,"Source")
local real x
local real y
local integer i
local player p=GetOwningPlayer(ZX7)
local item D88
local integer O5=GetPlayerId(p)
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
if GetTriggerUnit()==ZX7 then
call Y8F(EK9)
endif
call NM7(I97)
call OZ7(t)
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER then
if(OM7(I97,"OnDelivery"))==1 then
call NP7(I97,"OnDelivery",0)
elseif GetIssuedOrderId()!=$D0084 and GetIssuedOrderId()!=$D007A and(not QY4[O5])then
call OZ7(t)
endif
elseif(QY4[O5]and IG4[O5])then
call Y8F(EK9)
else
if KE7(EK9,ZX7)<$96 then
call NM7(I97)
call OZ7(t)
if QY4[O5]and OM7(GetHandleId(EK9),"aiCrow|CurrentOwner")==O5 then
set G97[432+O5]=2
call BVE(O5,M7[O5],false)
set G97[432+O5]=0
else
call YFF(EK9,ZX7)
endif
call Y8F(EK9)
else
if QY4[O5]then
set IN4=EK9
set i=MP7(800.,IN4,Condition(function BQ7))
if(i==0)then
call YGF(t)
else
call IssuePointOrderByIdLoc(EK9,$D0012,M07(KU4[O5]))
endif
else
call YGF(t)
endif
if(Bz>hq[880+O5])and TZ7(p)and(KE7(EK9,ZX7)<$708)then
call IssueImmediateOrderById(EK9,$D0084)
set hq[880+O5]=Bz+5
endif
endif
endif
set t=null
set EK9=null
set ZX7=null
set D88=null
return false
endfunction
function YRF takes unit WX7,boolean YSF returns nothing
local trigger t=null
local integer I97=0
local unit X_8=GetSellingUnit()
local integer YTF=OM7(GetHandleId(X_8),"DeliveryIndex")
local integer O5=GetPlayerId(GetOwningPlayer(WX7))
if WX7!=null then
if QY4[O5]and(OM7(GetHandleId(X_8),"aiCrow|CurrentOwner")==O5)then
set t=OE7(GetHandleId(X_8),"aiCrow|DeliverTrigger")
if(t!=null and IsTriggerEnabled(t))then
set t=null
set X_8=null
return
endif
endif
set t=CreateTrigger()
set I97=GetHandleId(t)
if WX7!=O77(GetHandleId(X_8),"DeliveryTarget"+I2S(YTF))and YSF then
set YTF=YTF+1
call NP7(GetHandleId(X_8),"DeliveryIndex",YTF)
call NT7(GetHandleId(X_8),"DeliveryTarget"+I2S(YTF),(WX7))
endif
call NQ7(I97,"DeliveryTargetX",(GetUnitX(WX7)*1.))
call NQ7(I97,"DeliveryTargetY",(GetUnitY(WX7)*1.))
call IssueTargetOrderById(X_8,$D0012,WX7)
call TriggerRegisterDeathEvent(t,X_8)
call TriggerRegisterDeathEvent(t,WX7)
call TriggerRegisterUnitEvent(t,X_8,EVENT_UNIT_ISSUED_ORDER)
call TriggerRegisterUnitEvent(t,X_8,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(t,X_8,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterTimerEvent(t,.2,true)
call TriggerAddCondition(t,Condition(function YQF))
call NT7(I97,"Source",WX7)
call NT7(I97,"Courier",X_8)
call NV7(GetHandleId(X_8),"aiCrow|DeliverTrigger",t)
endif
set t=null
set X_8=null
endfunction
function YUF takes nothing returns nothing
local item D88=GetEnumItem()
local unit u=OI4
local player p=GetOwningPlayer(u)
local integer id=GetPlayerId(p)
if GetWidgetLife(D88)>0 and GetItemPlayer(D88)==p and IsItemVisible(D88) then
call SetItemPosition(D88,KV4[id],KW4[id])
call UnitAddItem(OJ4,D88)
endif
set D88=null
set u=null
set p=null
endfunction
function YVF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit u=(LoadUnitHandle(L7,(I97),(53)))
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
set OI4=u
set OJ4=ZX7
if TV7(GetOwningPlayer(u))then
call EnumItemsInRect(OD,Condition(function TO7),function YUF)
else
call EnumItemsInRect(PD,Condition(function TO7),function YUF)
endif
if GetTriggerEvalCount(t)==3 then
call KillUnit(u)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set u=null
set ZX7=null
return false
endfunction
function YWF takes unit G8D returns nothing
local unit u=GetSoldUnit()
local integer i=0
local item D88
local integer id=GetPlayerId(GetOwningPlayer(u))
local region r=CreateRegion()
local trigger t
local integer I97
local unit ZX7=GetSellingUnit()
if TV7(GetOwningPlayer(u))then
call RegionAddRect(r,OD)
else
call RegionAddRect(r,PD)
endif
if IsUnitInRegion(r,ZX7)then
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function YVF))
call SaveUnitHandle(L7,(I97),(53),(u))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
loop
exitwhen i>5
set D88=UnitItemInSlot(ZX7,i)
if W47(KY7(D88))==false and KY7(D88)!=X0 and F_9(D88)==false then
call UnitRemoveItemFromSlot(ZX7,i)
if IsUnitInRegion(r,ZX7)and IsPlayerAlly(GetItemPlayer(D88),GetOwningPlayer(ZX7)) then
set id=GetPlayerId(GetItemPlayer(D88))
call SetItemPosition(D88,KV4[id],KW4[id])
endif
endif
set i=i+1
endloop
endif
call RemoveRegion(r)
set u=null
set D88=null
set t=null
set r=null
set ZX7=null
endfunction
function YXF takes nothing returns nothing
if GetUnitTypeId(GetSoldUnit())==1747990581 then
if M7[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]!=null and XH7(M7[GetPlayerId(GetOwningPlayer(GetSoldUnit()))])==false then
call YRF(M7[GetPlayerId(GetOwningPlayer(GetSoldUnit()))],true)
endif
call KillUnit(GetSoldUnit())
elseif GetUnitTypeId(GetSoldUnit())==1747993174 then
if M7[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]!=null then
call YWF(M7[GetPlayerId(GetOwningPlayer(GetSoldUnit()))])
endif
call KillUnit(GetSoldUnit())
elseif GetUnitTypeId(GetSoldUnit())==1747993669 then
if M7[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]!=null then
call YRF(O77(GetHandleId(GetSellingUnit()),("DeliveryTarget"+I2S(OM7(GetHandleId(GetSellingUnit()),"DeliveryIndex")-1))),false)
endif
call KillUnit(GetSoldUnit())
elseif CM7(GetUnitTypeId(GetSoldUnit()))then
if M7[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]!=null then
if XH7(M7[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]) and GetOwningPlayer(GetSoldUnit())==GetOwningPlayer(GetSellingUnit())and(OT7(M7[GetPlayerId(GetOwningPlayer(GetSoldUnit()))],"JustUseAegis")==false)and(HSS[GetPlayerId((GetOwningPlayer(GetSoldUnit())))]==false)then
call VR8(M7[GetPlayerId(GetOwningPlayer(GetSoldUnit()))])
set D87=true
call ReviveHero(M7[GetPlayerId(GetOwningPlayer(GetSoldUnit()))],GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),true)
set D87=false
call SetUnitState(M7[GetPlayerId(GetOwningPlayer(GetSoldUnit()))],UNIT_STATE_MANA,$2710)
set VH4[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]=IMaxBJ(0,VH4[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]-X9[CO7(GetHeroLevel(M7[GetPlayerId(GetOwningPlayer(GetSellingUnit()))]))])
call CA7(GetOwningPlayer(GetSoldUnit()))
else
call SetPlayerState(GetOwningPlayer(GetSoldUnit()),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(GetOwningPlayer(GetSoldUnit()),PLAYER_STATE_RESOURCE_GOLD)+X9[CO7(GetHeroLevel(M7[GetPlayerId(GetOwningPlayer(GetSellingUnit()))]))])
if(HSS[GetPlayerId((GetOwningPlayer(GetSoldUnit())))]==false)==false then
call X37(GetOwningPlayer(GetSoldUnit()),GetObjectName(1848659290))
endif
endif
endif
call KillUnit(GetSoldUnit())
endif
endfunction
function YYF takes player p4,unit S4,integer ZCE,integer Z3E,integer DXD,integer DYD,integer DZD,integer Z6E,integer ZLE returns nothing
local item QU8
call DisableTrigger(SV4)
if Z3E>0 then
set QU8=UnitItemInSlot(S4,0)
call KX7(QU8)
endif
if DXD>0 then
set QU8=UnitItemInSlot(S4,1)
call KX7(QU8)
endif
if DYD>0 then
set QU8=UnitItemInSlot(S4,2)
call KX7(QU8)
endif
if DZD>0 then
set QU8=UnitItemInSlot(S4,3)
call KX7(QU8)
endif
if Z6E>0 then
set QU8=UnitItemInSlot(S4,4)
call KX7(QU8)
endif
if ZLE>0 then
set QU8=UnitItemInSlot(S4,5)
call KX7(QU8)
endif
set GG7=ZCE
set GF7=p4
set QU8=UnitAddItemById(S4,ZU[ZCE])
call SetItemPlayer(QU8,p4,true)
call SetItemUserData(QU8,0)
if IsPlayerInForce(p4,QX4)and(S4==O77(GetHandleId(p4),"aiBearDummy"))then
set GV7=O77(GetHandleId(p4),"MyBear")
if GV7!=null and GetUnitState(GV7,UNIT_STATE_LIFE)>0 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GV7,"origin"))
endif
else
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",S4,"origin"))
endif
if KY7(QU8)==DI4 then
call SetItemCharges(QU8,12)
endif
call EnableTrigger(SV4)
if IsPlayerAlly(GetLocalPlayer(),p4) then
if ZCE==T1 then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,Q[GetPlayerId(p4)]+(KZ4[GetPlayerId((p4))])+"|r |c00ffff00"+GetObjectName(1848659032)+"|r")
elseif ZCE==B5 then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,Q[GetPlayerId(p4)]+(KZ4[GetPlayerId((p4))])+"|r |c00ffff00"+GetObjectName(1848659033)+"|r")
endif
endif
set G87[288+GetPlayerId(p4)]=QU8
set QU8=null
endfunction
function YZF takes player p,unit S4,integer Y68 returns boolean
local integer i
local integer x
local integer y
local integer array Z5E
local boolean array Z2E
local integer array Z_E
local boolean array A4E
local boolean array A7E
local integer array A8E
local player A9E
local integer YAF=1
local integer k
local player array ADE
local integer m
local item AEE
local item AFE
local item AGE
local item AHE
local item AIE
local item AJE
local player AKE
local player AME
local player ANE
local player APE
local player AQE
local player ARE
local integer ASE
local integer ATE
local integer AUE
local integer AVE
local integer AWE
local integer AXE
local integer AYE
local integer AZE
local integer AAE
local integer ABE
local integer ACE
local integer A3E
local boolean YBF=false
local boolean A6E=true
set AEE=UnitItemInSlot(S4,0)
set AFE=UnitItemInSlot(S4,1)
set AGE=UnitItemInSlot(S4,2)
set AHE=UnitItemInSlot(S4,3)
set AIE=UnitItemInSlot(S4,4)
set AJE=UnitItemInSlot(S4,5)
set AKE=GetItemPlayer(AEE)
set AME=GetItemPlayer(AFE)
set ANE=GetItemPlayer(AGE)
set APE=GetItemPlayer(AHE)
set AQE=GetItemPlayer(AIE)
set ARE=GetItemPlayer(AJE)
set ASE=GetItemUserData(AEE)
set ATE=GetItemUserData(AFE)
set AUE=GetItemUserData(AGE)
set AVE=GetItemUserData(AHE)
set AWE=GetItemUserData(AIE)
set AXE=GetItemUserData(AJE)
set AYE=KY7(AEE)
set AZE=KY7(AFE)
set AAE=KY7(AGE)
set ABE=KY7(AHE)
set ACE=KY7(AIE)
set A3E=KY7(AJE)
if(GetPlayerSlotState((p))==PLAYER_SLOT_STATE_LEFT)then
set YAF=5
set YBF=true
endif
set ADE[1]=p
if YBF then
set k=2
set m=1
loop
exitwhen k>YAF
if TV7(p)then
if p!=Z7[m]then
set ADE[k]=Z7[m]
set k=k+1
endif
else
if p!=A7[m]then
set ADE[k]=A7[m]
set k=k+1
endif
endif
set m=m+1
endloop
endif
set k=1
loop
exitwhen k>YAF
set A9E=ADE[k]
set i=0
if AEE!=null and ASE==1 and(AKE==A9E or PK4 or(GetPlayerSlotState((AKE))==PLAYER_SLOT_STATE_LEFT))then
set Z5E[i+1]=AYE
else
set Z5E[i+1]=0
endif
set i=1
if AFE!=null and ATE==1 and(AME==A9E or PK4 or(GetPlayerSlotState((AME))==PLAYER_SLOT_STATE_LEFT))then
set Z5E[i+1]=AZE
else
set Z5E[i+1]=0
endif
set i=2
if AGE!=null and AUE==1 and(ANE==A9E or PK4 or(GetPlayerSlotState((ANE))==PLAYER_SLOT_STATE_LEFT))then
set Z5E[i+1]=AAE
else
set Z5E[i+1]=0
endif
set i=3
if AHE!=null and AVE==1 and(APE==A9E or PK4 or(GetPlayerSlotState((APE))==PLAYER_SLOT_STATE_LEFT))then
set Z5E[i+1]=ABE
else
set Z5E[i+1]=0
endif
set i=4
if AIE!=null and AWE==1 and(AQE==A9E or PK4 or(GetPlayerSlotState((AQE))==PLAYER_SLOT_STATE_LEFT))then
set Z5E[i+1]=ACE
else
set Z5E[i+1]=0
endif
set i=5
if AJE!=null and AXE==1 and(ARE==A9E or PK4 or(GetPlayerSlotState((ARE))==PLAYER_SLOT_STATE_LEFT))then
set Z5E[i+1]=A3E
else
set Z5E[i+1]=0
endif
set Z5E[0]=Y68
set i=1
loop
exitwhen i>(FQ4)
set Z_E[0]=FJ4[i]
set Z_E[1]=FK4[i]
set Z_E[2]=FM4[i]
set Z_E[3]=FN4[i]
set Z_E[4]=FO4[i]
if A6E then
set A4E[0]=true
set A4E[1]=true
set A4E[2]=true
set A4E[3]=true
set A4E[4]=true
set A4E[5]=true
set A4E[6]=true
set Z2E[0]=true
set Z2E[1]=true
set Z2E[2]=true
set Z2E[3]=true
set Z2E[4]=true
set Z2E[5]=true
set Z2E[6]=true
set A8E[0]=0
set A8E[1]=0
set A8E[2]=0
set A8E[3]=0
set A8E[4]=0
set A8E[5]=0
set A8E[6]=0
set A6E=false
endif
set A7E[0]=false
set A7E[1]=false
set A7E[2]=false
set A7E[3]=false
set A7E[4]=false
set x=0
loop
exitwhen x==5
if Z_E[x]==0 then
set A7E[x]=true
else
set y=0
loop
exitwhen y==7
if Z5E[y]==Z_E[x]and Z2E[y]and A4E[x]then
set Z2E[y]=false
set A4E[x]=false
set A7E[x]=true
set A8E[y]=1
set y=7
set A6E=true
else
set y=y+1
endif
endloop
endif
if A7E[x] then
set x=x+1
else
set x=5
endif
endloop
if A7E[0]and A7E[1]and A7E[2]and A7E[3]and A7E[4]then
call YYF(A9E,S4,FP4[i],A8E[1],A8E[2],A8E[3],A8E[4],A8E[5],A8E[6])
set i=FQ4+2
else
set i=i+1
endif
endloop
set EL=A8E[0]==1
if i==(FQ4+2)then
set AEE=null
set AFE=null
set AGE=null
set AHE=null
set AIE=null
set AJE=null
return true
endif
set k=k+1
endloop
set AEE=null
set AFE=null
set AGE=null
set AHE=null
set AIE=null
set AJE=null
return false
endfunction
function YCF takes player p4,unit S4,integer Y68 returns boolean
local boolean AF8
set EL=false
set AF8=YZF(p4,S4,Y68)
return AF8
endfunction
function Y3F takes nothing returns boolean
if IsUnitAlly(GetFilterUnit(),GetOwningPlayer(IN4)) and GetUnitAbilityLevel(GetFilterUnit(),1097625443)==0 and UnitInventorySize(GetFilterUnit())>1 and GetUnitTypeId(GetFilterUnit())!=1852010352 and GetPlayerAlliance(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(IN4),ALLIANCE_SHARED_CONTROL)and GetOwningPlayer(IN4)!=GetOwningPlayer(GetFilterUnit())and IsUnitIllusion(GetFilterUnit())==false and XH7(GetFilterUnit())==false then
if KW7(GetFilterUnit()) then
set IH4=IH4+1
set IP4=GetFilterUnit()
endif
endif
return false
endfunction
function Y6F takes nothing returns boolean
if IsUnitAlly(GetFilterUnit(),GetOwningPlayer(IN4)) and GetUnitAbilityLevel(GetFilterUnit(),1097625443)==0 and UnitInventorySize(GetFilterUnit())>1 and GetUnitTypeId(GetFilterUnit())!=1852010352 and IsUnitIllusion(GetFilterUnit())==false and XH7(GetFilterUnit())==false then
if GetOwningPlayer(IN4)==GetOwningPlayer(GetFilterUnit())then
if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) then
if GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 then
set IP4=GetFilterUnit()
endif
elseif IsUnitType(IP4,UNIT_TYPE_HERO)==false then
set IP4=GetFilterUnit()
endif
endif
endif
return false
endfunction
function YLF takes unit S4,integer Y1F returns unit
local group g=WS7()
set IN4=S4
set IP4=null
call GroupEnumUnitsInRange(g,GetUnitX(eH),GetUnitY(eH),$514+Y1F,Condition(function Y6F))
if IP4==null then
set IH4=0
call WR7(g)
set g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(eH),GetUnitY(eH),$44C+Y1F,Condition(function Y3F))
if IH4>1 then
set IP4=null
endif
endif
call WR7(g)
set g=null
return IP4
endfunction
function Y0F takes player p4,unit S4,unit Y5F,integer Y68,real x,real y,integer RTF,integer Y2F returns nothing
local unit Y_F
local item RJF=null
set eH=Y5F
if GetUnitPointValue(S4)==$C8 then
set Y_F=YLF(S4,0)
if Y_F==null then
set Y_F=YLF(S4,300)
endif
else
set Y_F=S4
endif
set GG7=Y68
set GF7=p4
if Y_F==null or YCF(p4,Y_F,Y38(Y68))==false or EL==false then
if Z88(Y38(Y68))then
if YRE(Y_F)==0 or Y_F==null then
call X0F(SU[Y68],x,y,p4,true,RTF)
else
set RJF=UnitAddItemById(Y_F,ZU[Y68])
call SetItemCharges(RJF,RTF)
call SetItemPlayer(RJF,p4,true)
call SetItemUserData(RJF,Y2F)
endif
elseif Z78(Y38(Y68))then
if Y_F==null or(YRE(Y_F)==0 and MV7(Y_F,ZU[Y68])==null)then
call X0F(SU[Y68],x,y,p4,true,Z98(Y68))
else
set RJF=CreateItem(SU[Y68],x,y)
call SetItemPlayer(RJF,p4,true)
call SetItemUserData(RJF,Y2F)
call SetItemCharges(RJF,Z98(Y68))
call UnitAddItem(Y_F,RJF)
endif
else
if YRE(Y_F)==0 or Y_F==null then
call X0F(SU[Y68],x,y,p4,false,0)
else
set RJF=UnitAddItemById(Y_F,ZU[Y68])
call SetItemPlayer(RJF,p4,true)
call SetItemUserData(RJF,0)
endif
endif
endif
if RJF!=null then
set G87[288+GetPlayerId(p4)]=RJF
endif
set Y_F=null
set RJF=null
endfunction
function Z4F takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit Z7F=O77(OB7,"Tower")
if GetTriggerEventId()!=EVENT_UNIT_DEATH then
call UnitRemoveAbility(Z7F,1093744466)
call UnitRemoveAbility(Z7F,1093809222)
endif
call DestroyEffect(OG7(OB7,"FX"))
call NM7(OB7)
call OZ7(t)
set t=null
set Z7F=null
return false
endfunction
function Z8F takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>.5 and IsUnitAlly(GetFilterUnit(),Sh) and GetOwningPlayer(GetFilterUnit())!=C7 and GetUnitTypeId(GetFilterUnit())!=1852010352 and GetUnitTypeId(GetFilterUnit())!=1848657482 and GetUnitTypeId(GetFilterUnit())!=1848657481 and GetUnitTypeId(GetFilterUnit())!=1848657462 and GetUnitTypeId(GetFilterUnit())!=1848657480)!=null
endfunction
function Z9F takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit S4=GetEnumUnit()
local string s
call UnitAddAbility(S4,1093744466)
call UnitAddAbility(S4,1093809222)
if TV7(Sh)then
set s="effects\\GlyphSent.mdx"
else
set s="effects\\GlyphScourge.mdx"
endif
call NU7(OB7,"FX",AddSpecialEffectTarget(s,S4,"origin"))
call NT7(OB7,"Tower",S4)
call TriggerRegisterUnitEvent(t,S4,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,F47,false)
call TriggerAddCondition(t,Condition(function Z4F))
set t=null
set S4=null
endfunction
function ZDF takes unit ZEF,player p returns nothing
local integer i
if TV7(p)then
set i=1
if ZEF!=KU4[i]then
call IssueImmediateOrderById(KU4[i],$D0114)
endif
set i=2
if ZEF!=KU4[i]then
call IssueImmediateOrderById(KU4[i],$D0114)
endif
set i=3
if ZEF!=KU4[i]then
call IssueImmediateOrderById(KU4[i],$D0114)
endif
set i=4
if ZEF!=KU4[i]then
call IssueImmediateOrderById(KU4[i],$D0114)
endif
set i=5
if ZEF!=KU4[i]then
call IssueImmediateOrderById(KU4[i],$D0114)
endif
else
set i=7
if ZEF!=KU4[i]then
call IssueImmediateOrderById(KU4[i],$D0114)
endif
set i=8
if ZEF!=KU4[i]then
call IssueImmediateOrderById(KU4[i],$D0114)
endif
set i=9
if ZEF!=KU4[i]then
call IssueImmediateOrderById(KU4[i],$D0114)
endif
set i=$A
if ZEF!=KU4[i]then
call IssueImmediateOrderById(KU4[i],$D0114)
endif
set i=$B
if ZEF!=KU4[i]then
call IssueImmediateOrderById(KU4[i],$D0114)
endif
endif
endfunction
function ZFF takes nothing returns nothing
local group g
local unit ZEF=GetTriggerUnit()
local player p=GetOwningPlayer(ZEF)
if(TV7(p)and Th==false)or(TV7(p)==false and Uh==false)then
set g=WS7()
set Sh=p
call GroupEnumUnitsInRange(g,0,0,$2EE0,Condition(function Z8F))
call ForGroup(g,function Z9F)
call WR7(g)
if TV7(p)then
set Th=true
call ZDF(ZEF,p)
set Th=false
call NQ7(R44,"AI|Glyph|Sent",Bz+300.)
else
set Uh=true
call ZDF(ZEF,p)
set Uh=false
call NQ7(R44,"AI|Glyph|Scrg",Bz+300.)
endif
endif
set g=null
set ZEF=null
set p=null
endfunction
function ZGF takes nothing returns nothing
if GetSpellAbilityId()==1093743665 or GetSpellAbilityId()==1093752649 then
call ZFF()
endif
endfunction
function ZHF takes player p,integer Y68 returns nothing
local integer i=GetPlayerId(p)
if Y68==OC then
set Zh[i]=Zh[i]+1
elseif Y68==QC then
set Zh[i]=Zh[i]+1
elseif Y68==TC then
set Zh[i]=Zh[i]+3
elseif Y68==VC then
set Zh[i]=Zh[i]+2
set H74[i]=H74[i]+2
elseif Y68==WC then
set Zh[i]=Zh[i]+2
set H74[i]=H74[i]+2
elseif Y68==XC then
set Zh[i]=Zh[i]+1
elseif Y68==YC then
set Zh[i]=Zh[i]+1
elseif Y68==CC then
set Zh[i]=Zh[i]+2
elseif Y68==PC then
set Zh[i]=Zh[i]+2
elseif Y68==LC then
set Zh[i]=Zh[i]+2
endif
endfunction
function ZIF takes unit ZJF,unit ZKF returns boolean
local integer Y68
if GetUnitTypeId(ZKF)==1311788365 then
return true
endif
if(ZJF==JC4 or ZJF==JB4)and IsUnitAlly(ZKF,A7[0])then
return false
elseif(ZJF==I_4 or ZJF==I34)and IsUnitAlly(ZKF,Z7[0])then
return false
endif
set Y68=WD7(ZKF)
if Y68==VC or Y68==EW or Y68==H3 then
return true
endif
return false
endfunction
function ZMF takes unit Y5F,unit ZNF returns real
if Y5F==I34 or Y5F==IL4 or Y5F==I04 or Y5F==I_4 or Y5F==J44 or Y5F==J74 or Y5F==UJ74 or Y5F==J84 or Y5F==J94 or Y5F==JD4 or Y5F==JE4 then
return KV4[GetPlayerId(GetOwningPlayer(ZNF))]
elseif Y5F==JB4 or Y5F==zs or Y5F==Zs or Y5F==JC4 or Y5F==eS or Y5F==oS or Y5F==oSS or Y5F==rS or Y5F==aS or Y5F==nS or Y5F==VS then
return KV4[GetPlayerId(GetOwningPlayer(ZNF))]
elseif Y5F==B44 or Y5F==B94 then
return-7133.
elseif Y5F==B74 or Y5F==B84 then
return 7207.
endif
return GetUnitX(ZNF)
endfunction
function ZOF takes unit Y5F,unit ZNF returns real
if Y5F==I34 or Y5F==IL4 or Y5F==I04 or Y5F==I_4 or Y5F==J44 or Y5F==J74 or Y5F==UJ74 or Y5F==J84 or Y5F==J94 or Y5F==JD4 or Y5F==JE4 then
return KW4[GetPlayerId(GetOwningPlayer(ZNF))]
elseif Y5F==JB4 or Y5F==zs or Y5F==Zs or Y5F==JC4 or Y5F==eS or Y5F==oS or Y5F==oSS or Y5F==rS or Y5F==aS or Y5F==nS or Y5F==VS then
return KW4[GetPlayerId(GetOwningPlayer(ZNF))]
elseif Y5F==B44 or Y5F==B94 then
return 4317.
elseif Y5F==B74 or Y5F==B84 then
return-4243.
endif
return GetUnitY(ZNF)
endfunction
function ZPF takes unit Y5F,unit ZNF returns real
if Y5F==I34 or Y5F==IL4 or Y5F==I04 or Y5F==I_4 or Y5F==J44 or Y5F==J74 or Y5F==UJ74 or Y5F==J84 or Y5F==J94 or Y5F==JD4 or Y5F==JE4 then
return GetRectCenterX(ED)
elseif Y5F==JB4 or Y5F==zs or Y5F==Zs or Y5F==JC4 or Y5F==eS or Y5F==oS or Y5F==oSS or Y5F==rS or Y5F==aS or Y5F==nS or Y5F==VS then
return GetRectCenterX(L9)
endif
return GetUnitX(ZNF)
endfunction
function ZQF takes unit Y5F,unit ZNF returns real
if Y5F==I34 or Y5F==IL4 or Y5F==I04 or Y5F==I_4 or Y5F==J44 or Y5F==J74 or Y5F==UJ74 or Y5F==J84 or Y5F==J94 or Y5F==JD4 or Y5F==JE4 then
return GetRectCenterY(ED)
elseif Y5F==JB4 or Y5F==zs or Y5F==Zs or Y5F==JC4 or Y5F==eS or Y5F==oS or Y5F==oSS or Y5F==rS or Y5F==aS or Y5F==nS or Y5F==VS then
return GetRectCenterY(L9)
endif
return GetUnitY(ZNF)
endfunction
function ZRF takes nothing returns nothing
local unit u=GetSoldUnit()
local player p=GetOwningPlayer(u)
local integer Y68=WD7(u)
local real x
local real y
if ZIF(GetSellingUnit(),u)then
call X37(p,(GetObjectName((1848652359))))
if IsUnitAlly(u,Z7[0])then
set p=A7[0]
else
set p=Z7[0]
endif
set x=ZPF(GetSellingUnit(),u)
set y=ZQF(GetSellingUnit(),u)
call X0F(SU[WD7(u)],x,y,p,true,Z98(WD7(u)))
else
call ZHF(p,Y38(Y68))
if ZU[Y68]==0 then
call X37(p,GetObjectName(1848652360))
else
set x=ZMF(GetSellingUnit(),u)
set y=ZOF(GetSellingUnit(),u)
if Y68==CC then
call Y0F(p,u,GetSellingUnit(),Y38(Y68),x,y,2,0)
else
call Y0F(p,u,GetSellingUnit(),Y38(Y68),x,y,0,0)
endif
endif
endif
call UnitAddAbility(u,1097625443)
call ShowUnit(u,true)
call UnitApplyTimedLife(u,1112820806,2)
set u=null
set p=null
endfunction
function ZSF takes nothing returns boolean
if VI4==false then
if GetUnitPointValue(GetSoldUnit())>=$C8 then
call ZRF()
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(GetSoldUnit()))or(V8 and(GetLocalPlayer()==KX4 or GetLocalPlayer()==KY4))then
if GetUnitTypeId(GetSoldUnit())==1747989062 then
call PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,$FF,$FF,$FF,false)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,20,Q[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(KZ4[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848658005)+"|r")
elseif GetUnitTypeId(GetSoldUnit())==1747989329 then
call PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,$FF,$FF,$FF,false)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,20,Q[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(KZ4[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848658759)+"|r")
elseif GetUnitTypeId(GetSoldUnit())==1747990326 then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,Q[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(KZ4[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848658767)+"|r")
elseif GetUnitTypeId(GetSoldUnit())==1747989059 then
call PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,$FF,$FF,$FF,false)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,Q[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(KZ4[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848658768)+"|r")
elseif GetUnitTypeId(GetSoldUnit())==1747989060 then
call PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,$FF,$FF,$FF,false)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,Q[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(KZ4[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848658769)+"|r")
elseif GetUnitTypeId(GetSoldUnit())==1747993153 then
call PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,$FF,$FF,$FF,false)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,Q[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(KZ4[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848658772)+"|r")
elseif GetUnitTypeId(GetSoldUnit())==1747988807 then
call PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,$FF,$FF,$FF,false)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,Q[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(KZ4[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848659010)+"|r")
elseif GetUnitTypeId(GetSoldUnit())==1747993651 then
call PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,$FF,$FF,$FF,false)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,Q[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(KZ4[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848659024)+"|r")
endif
endif
else
call YXF()
endif
endif
return false
endfunction
function ZTF takes unit u returns boolean
local integer id=GetUnitTypeId(u)
return id==1164277353 or id==1164277357 or id==1160786518 or id==1160786519 or id==1160786517
endfunction
function ZUF takes unit WX7,item D88 returns nothing
local unit u=WX7
local integer CN7=GetUnitTypeId(u)
local integer Z48=KZ7(D88)
if IsUnitType(u,UNIT_TYPE_MELEE_ATTACKER) or IsUnitType(u,UNIT_TYPE_HERO)==false then
if Z48==X2 then
set IR4=GetItemPlayer(D88)
call KX7(D88)
set HA4=UnitAddItemById(u,ZU[W2])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Z48==GB then
set IR4=GetItemPlayer(D88)
call KX7(D88)
set HA4=UnitAddItemById(u,ZU[BA])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Z48==HZ then
set IR4=GetItemPlayer(D88)
call KX7(D88)
set HA4=UnitAddItemById(u,ZU[EZ])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Z48==DX4 then
set IR4=GetItemPlayer(D88)
call KX7(D88)
set HA4=UnitAddItemById(u,ZU[DW4])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Z48==D94 then
set IR4=GetItemPlayer(D88)
call KX7(D88)
set HA4=UnitAddItemById(u,ZU[D84])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Z48==F44 then
set IR4=GetItemPlayer(D88)
call KX7(D88)
set HA4=UnitAddItemById(u,ZU[E_4])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Z48==B0 then
if ZTF(u)==false then
set IR4=GetItemPlayer(D88)
call KX7(D88)
set HA4=UnitAddItemById(u,ZU[Y0])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
endif
elseif Z48==Y0 then
if ZTF(u) then
set IR4=GetItemPlayer(D88)
call KX7(D88)
set HA4=UnitAddItemById(u,ZU[B0])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
endif
elseif Z48==RB then
set IR4=GetItemPlayer(D88)
call KX7(D88)
set HA4=UnitAddItemById(u,ZU[QB])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
endif
else
if Z48==W2 then
set IR4=GetItemPlayer(D88)
call KX7(D88)
set HA4=UnitAddItemById(u,ZU[X2])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Z48==BA then
set IR4=GetItemPlayer(D88)
call KX7(D88)
set HA4=UnitAddItemById(u,ZU[GB])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Z48==EZ then
set IR4=GetItemPlayer(D88)
call KX7(D88)
set HA4=UnitAddItemById(u,ZU[HZ])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Z48==DW4 then
set IR4=GetItemPlayer(D88)
call KX7(D88)
set HA4=UnitAddItemById(u,ZU[DX4])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Z48==D84 then
set IR4=GetItemPlayer(D88)
call KX7(D88)
set HA4=UnitAddItemById(u,ZU[D94])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Z48==E_4 then
set IR4=GetItemPlayer(D88)
call KX7(D88)
set HA4=UnitAddItemById(u,ZU[F44])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Z48==Y0 then
set IR4=GetItemPlayer(D88)
call KX7(D88)
set HA4=UnitAddItemById(u,ZU[B0])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Z48==QB then
set IR4=GetItemPlayer(D88)
call KX7(D88)
set HA4=UnitAddItemById(u,ZU[RB])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
endif
endif
set u=null
endfunction
function ZVF takes unit WX7,item D88 returns nothing
local unit u=WX7
local integer CN7=GetUnitTypeId(u)
local integer Z48=KZ7(D88)
if IsUnitType(u,UNIT_TYPE_MELEE_ATTACKER)==false or IsUnitType(u,UNIT_TYPE_HERO)==false then
if Z48==X2 then
set IR4=GetItemPlayer(D88)
call RemoveItem(D88)
set HA4=UnitAddItemById(u,ZU[W2])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Z48==GB then
set IR4=GetItemPlayer(D88)
call RemoveItem(D88)
set HA4=UnitAddItemById(u,ZU[BA])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Z48==HZ then
set IR4=GetItemPlayer(D88)
call RemoveItem(D88)
set HA4=UnitAddItemById(u,ZU[EZ])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Z48==DX4 then
set IR4=GetItemPlayer(D88)
call RemoveItem(D88)
set HA4=UnitAddItemById(u,ZU[DW4])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Z48==D94 then
set IR4=GetItemPlayer(D88)
call RemoveItem(D88)
set HA4=UnitAddItemById(u,ZU[D84])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Z48==F44 then
set IR4=GetItemPlayer(D88)
call RemoveItem(D88)
set HA4=UnitAddItemById(u,ZU[E_4])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Z48==B0 then
if ZTF(u)==false then
set IR4=GetItemPlayer(D88)
call RemoveItem(D88)
set HA4=UnitAddItemById(u,ZU[Y0])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
endif
elseif Z48==RB then
set IR4=GetItemPlayer(D88)
call RemoveItem(D88)
set HA4=UnitAddItemById(u,ZU[QB])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
endif
else
if Z48==W2 then
set IR4=GetItemPlayer(D88)
call RemoveItem(D88)
set HA4=UnitAddItemById(u,ZU[X2])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Z48==BA then
set IR4=GetItemPlayer(D88)
call RemoveItem(D88)
set HA4=UnitAddItemById(u,ZU[GB])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Z48==EZ then
set IR4=GetItemPlayer(D88)
call RemoveItem(D88)
set HA4=UnitAddItemById(u,ZU[HZ])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Z48==DW4 then
set IR4=GetItemPlayer(D88)
call RemoveItem(D88)
set HA4=UnitAddItemById(u,ZU[DX4])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Z48==D84 then
set IR4=GetItemPlayer(D88)
call RemoveItem(D88)
set HA4=UnitAddItemById(u,ZU[D94])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Z48==E_4 then
set IR4=GetItemPlayer(D88)
call RemoveItem(D88)
set HA4=UnitAddItemById(u,ZU[F44])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Z48==Y0 then
set IR4=GetItemPlayer(D88)
call RemoveItem(D88)
set HA4=UnitAddItemById(u,ZU[B0])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Z48==QB then
set IR4=GetItemPlayer(D88)
call RemoveItem(D88)
set HA4=UnitAddItemById(u,ZU[RB])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
endif
endif
set u=null
endfunction
function ZWF takes unit WX7 returns nothing
local integer i=0
local item D88
call DisableTrigger(H94)
loop
exitwhen i>5
set D88=UnitItemInSlot(WX7,i)
if D88!=null then
call ZVF(WX7,D88)
endif
set i=i+1
endloop
call EnableTrigger(H94)
set D88=null
endfunction
function ZXF takes nothing returns boolean
if GetSpellAbilityId()==1093751369 or GetSpellAbilityId()==1093681733 then
if XH7(GetTriggerUnit())==false then
call ZWF(GetTriggerUnit())
endif
endif
return false
endfunction
function RestrictedItems_UpdateMeleeRange_All2 takes nothing returns nothing
call ZWF(IN4)
endfunction
function ZYF takes unit WX7,item D88 returns boolean
local unit u=WX7
local integer z8=GetUnitTypeId(u)
local integer Z48=KY7(D88)
local real x
local real y
local boolean ZZF=true
set x=GetUnitX(u)
set y=GetUnitY(u)
set GF7=GetItemPlayer(D88)
if Z48==XZ then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",u,"overhead"))
call XC7(GetOwningPlayer(u),"Abilities\\Spells\\Human\\Heal\\HealTarget.wav")
set IR4=GetItemPlayer(D88)
call KX7(D88)
set HA4=UnitAddItemById(u,ZU[IA])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
endif
if Z48==D1 and GetItemCharges(D88)==0 then
set IR4=GetItemPlayer(D88)
call KX7(D88)
set HA4=UnitAddItemById(u,ZU[F1])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
endif
if Z48==VB and GetItemCharges(D88)==0 then
set IR4=GetItemPlayer(D88)
call KX7(D88)
set HA4=UnitAddItemById(u,ZU[WB])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
endif
call DisableTrigger(H94)
if(Z48==H6 or Z48==G6 or Z48==N6)and(MU7(u,ZU[H6],D88)!=null or MU7(u,ZU[G6],D88)!=null or MU7(u,ZU[N6],D88)!=null)then
call X37(GetOwningPlayer(u),(GetObjectName((1848652364))))
set IR4=GetItemPlayer(D88)
call RemoveItem(D88)
set HA4=CreateItem(SU[Z48],x,y)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
endif
if(Z48==BA or Z48==X1)and(MU7(u,ZU[BA],D88)!=null or MU7(u,ZU[GB],D88)!=null or MU7(u,ZU[X1],D88)!=null)and(z8==121111)then
call X37(GetOwningPlayer(u),(GetObjectName((1848657996))))
set IR4=GetItemPlayer(D88)
call RemoveItem(D88)
set HA4=CreateItem(SU[Z48],x,y)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
set ZZF=false
endif
if ZZF and(Z48==GB or Z48==X1)and(MU7(u,ZU[BA],D88)!=null or MU7(u,ZU[GB],D88)!=null or MU7(u,ZU[X1],D88)!=null)and(z8==121111)then
call X37(GetOwningPlayer(u),(GetObjectName((1848657996))))
set IR4=GetItemPlayer(D88)
call RemoveItem(D88)
set HA4=CreateItem(SU[Z48],x,y)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
set ZZF=false
endif
if(Z48==DM4 or Z48==DK4 or Z48==DO4 or Z48==DN4)and(MU7(u,ZU[DM4],D88)!=null or MU7(u,ZU[DK4],D88)!=null or MU7(u,ZU[DO4],D88)!=null or MU7(u,ZU[DN4],D88)!=null)then
call X37(GetOwningPlayer(u),(GetObjectName((1848652355))))
set IR4=GetItemPlayer(D88)
call RemoveItem(D88)
set HA4=CreateItem(SU[Z48],x,y)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
endif
if(Z48==B5 and IsPlayerEnemy(GetItemPlayer(D88),GetOwningPlayer(u)))then
set IR4=GetItemPlayer(D88)
call KX7(D88)
set HA4=UnitAddItemById(u,ZU[C5])
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
endif
if(Z48==X0)and(KV7(u)or AS7(u))then
if KV7(u)then
call X37(GetOwningPlayer(u),(GetObjectName((1848652363))))
endif
set IR4=GetItemPlayer(D88)
set IH4=GetItemCharges(D88)
call RemoveItem(D88)
if Z48==X0 then
set HA4=CreateItem(SU[Z48],GetRectCenterX(ND),GetRectCenterY(ND))
endif
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
if Z48==X0 then
call SetItemCharges(HA4,IH4)
endif
endif
if Z48==RW and(z8==12150 or z8==14290)then
call X37(GetOwningPlayer(u),(GetObjectName((1848652362))))
set IR4=GetItemPlayer(D88)
call RemoveItem(D88)
set HA4=CreateItem(SU[Z48],x,y)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
endif
if ZZF and(Z48==BA or Z48==GB or Z48==X1)and(z8==12111191870)then
call X37(GetOwningPlayer(u),(GetObjectName((1848652362))))
set IR4=GetItemPlayer(D88)
call RemoveItem(D88)
set HA4=CreateItem(SU[Z48],x,y)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
set ZZF=false
endif
if(Z48==D0 or Z48==E0 or Z48==J0 or Z48==N0 or Z48==O0 or Z48==R0)and z8==1429221443 then
call DisplayTimedTextToPlayer(GetOwningPlayer(u),0,E9,$A,"|c00ff0303"+(GetObjectName((1848652368)))+"|r")
endif
call EnableTrigger(H94)
if ZZF then
call ZUF(WX7,D88)
endif
set u=null
set D88=null
return false
endfunction
function ZAF takes integer Z48 returns boolean
return Z48==O1 or Z48==DN4 or Z48==DO4 or Z48==DQ4 or Z48==J1 or Z48==DK4 or Z48==DM4 or Z48==DP4 or Z48==EW or Z48==HW or Z48==S6 or Z48==V6 or Z48==R00 or Z48==R01
endfunction
function ZBF takes integer Z48 returns boolean
return Z48==EW or Z48==HW
endfunction
function ZCF takes unit WI7,item QU8 returns boolean
local item KA7=QU8
local integer Z48=KZ7(KA7)
local integer Z3F=0
local boolean AF8=false
local integer Z6F=KC7(KA7)
local boolean ZLF=false
if IsUnitType(WI7,UNIT_TYPE_HERO) then
if Z48==O1 then
set Z3F=J1
endif
if Z48==V6 then
set Z3F=S6
endif
if Z48==DN4 then
set Z3F=DK4
endif
if Z48==DO4 then
set Z3F=DM4
endif
if Z48==DQ4 then
set Z3F=DP4
endif
if Z48==HW then
set Z3F=EW
endif
if Z6F==HW then
set Z3F=EW
set ZLF=true
endif
if Z3F!=0 then
set IR4=GetItemPlayer(KA7)
call KX7(KA7)
if ZLF then
set HA4=UnitAddItemById(WI7,BU[Z3F])
else
set HA4=UnitAddItemById(WI7,ZU[Z3F])
endif
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
set AF8=true
endif
else
if Z48==J1 then
set Z3F=O1
endif
if Z48==S6 then
set Z3F=V6
endif
if Z48==DK4 then
set Z3F=DN4
endif
if Z48==DM4 then
set Z3F=DO4
endif
if Z48==DP4 then
set Z3F=DQ4
endif
if Z48==EW then
set Z3F=HW
endif
if Z6F==EW then
set Z3F=HW
set ZLF=true
endif
if Z3F!=0 then
set IR4=GetItemPlayer(KA7)
call KX7(KA7)
if ZLF then
set HA4=UnitAddItemById(WI7,BU[Z3F])
else
set HA4=UnitAddItemById(WI7,ZU[Z3F])
endif
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
set AF8=true
endif
endif
set KA7=null
return AF8
endfunction
function Z1F takes unit WI7,item QU8 returns boolean
if ZAF(KZ7(QU8))or ZBF(KC7(QU8))then
return ZCF(WI7,QU8)
endif
return false
endfunction
function Z0F takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit Y_F=O77(OB7,"Unit")
local integer Z5F=OM7(OB7,"EventType")
local integer Y68=OM7(OB7,"indexId")
local boolean Z2F=OO7(OB7,"Temporary")
local item QU8
local player p=GetOwningPlayer(Y_F)
local player Z_F
local integer RTF
local boolean A4F=false
local item RJF
local integer n5
local integer A1E
local integer newCharges
local item Z4
local integer targetCount
local item A7F
local boolean A8F=false
local integer YC7
call DisableTrigger(SV4)
if Z2F then
set A7F=null
set Z_F=O97(OB7,"p")
set RTF=OM7(OB7,"charges")
else
set QU8=OJ7(OB7,"Item")
set A7F=QU8
set Z_F=GetItemPlayer(QU8)
set RTF=GetItemCharges(QU8)
endif
set GG7=Y68
set GF7=Z_F
set eY[512+GetPlayerId(GF7)]=1
if Z2F then
set G87[288+GetPlayerId(Z_F)]=null
else
set G87[288+GetPlayerId(Z_F)]=QU8
endif
if Z2F==false and QU8==null then
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
call EnableTrigger(SV4)
set t=null
set Y_F=null
set p=null
return false
endif
if Z5F==1 then
if p!=Z_F and GetUnitTypeId(Y_F)==1852010352 then
if Z78(Y38(Y68))or Z88(Y38(Y68))then
set A4F=true
endif
if IsPlayerEnemy(p,Z_F)then
call X0F(SU[Y68],KV4[GetPlayerId(p)],KW4[GetPlayerId(p)],Z_F,A4F,RTF)
else
call X0F(SU[Y68],KV4[GetPlayerId(Z_F)],KW4[GetPlayerId(Z_F)],Z_F,A4F,RTF)
endif
call X37(p,(GetObjectName((1848656978))))
if Z2F==false then
set A8F=true
call KX7(QU8)
endif
elseif PK4==false and Z2F==false and GetItemType(QU8)==ITEM_TYPE_CAMPAIGN and Y4F(QU8)!=0 and(p==Z_F or(GetPlayerSlotState((Z_F))==PLAYER_SLOT_STATE_LEFT))then
if Z88(Y68)then
set A4F=true
else
set A4F=false
endif
if(GetPlayerSlotState((Z_F))==PLAYER_SLOT_STATE_LEFT)and W47(Y68)then
else
call KX7(QU8)
set A8F=true
set RJF=UnitAddItemById(Y_F,ZU[Y68])
set A7F=RJF
call SetItemPlayer(RJF,Z_F,false)
call SetItemUserData(RJF,0)
if A4F then
call SetItemCharges(RJF,RTF)
endif
endif
elseif PK4==false and Z2F==false and GetItemType(QU8)==ITEM_TYPE_PERMANENT and p!=Z_F and BU[KY7(QU8)]!=0 and(GetPlayerSlotState((Z_F))==PLAYER_SLOT_STATE_LEFT)==false then
if Z88(Y68)then
set A4F=true
else
set A4F=false
endif
call KX7(QU8)
set A8F=true
set RJF=UnitAddItemById(Y_F,BU[Y68])
set A7F=RJF
call SetItemPlayer(RJF,Z_F,false)
call SetItemUserData(RJF,0)
if A4F then
call SetItemCharges(RJF,RTF)
endif
elseif Z2F==false and GetItemType(QU8)==ITEM_TYPE_PERMANENT and Y_8(QU8)and IsUnitType(Y_F,UNIT_TYPE_HERO) then
set n5=F59(Y_F)
set A1E=F29(Y_F)
if A1E!=0 then
call UnitAddAbility(Y_F,A1E)
call UnitMakeAbilityPermanent(Y_F,true,A1E)
call SetPlayerAbilityAvailable(p,A1E,false)
if GetUnitTypeId(Y_F)==1211117653 then
set IN4=Y_F
call ExecuteFunc("A0E")
elseif GetUnitTypeId(Y_F)==1215130471 then
set IN4=Y_F
call ExecuteFunc("E3D")
endif
endif
set YC7=Y08(Y_F,4)
if n5==GX4 and HQ4[YC7]!=0 then
call UnitRemoveAbility(Y_F,HU4[YC7])
call UnitAddAbility(Y_F,HV4[YC7])
call SetPlayerAbilityAvailable(p,HV4[YC7],false)
endif
if Y68!=n5 then
call KX7(QU8)
set RJF=UnitAddItemById(Y_F,ZU[n5])
set A7F=RJF
call SetItemPlayer(RJF,Z_F,false)
call SetItemUserData(RJF,1)
endif
elseif Z2F==false and GetItemType(QU8)==ITEM_TYPE_ARTIFACT then
call DisableTrigger(H94)
set Z4=X5F(Z_F,Y_F,Y68,QU8)
if Z4==null then
else
call SetItemCharges(Z4,RTF+GetItemCharges(Z4))
call KX7(QU8)
set A7F=null
endif
call EnableTrigger(H94)
elseif Z2F and Z78(Y38(Y68))then
call DisableTrigger(H94)
if YRE(Y_F)==0 and X_F(Z_F,Y_F,Y68)==null then
call X37(p,(GetObjectName((1848652367))))
call X0F(SU[(Y68)],((ON7(OB7,"x"))*1.),((ON7(OB7,"y"))*1.),(Z_F),(true),(RTF))
else
set Z4=X_F(Z_F,Y_F,Y68)
if Z4==null then
call DisableTrigger(H94)
set RJF=UnitAddItemById(Y_F,ZU[Y68])
set A7F=RJF
call SetItemPlayer(RJF,Z_F,false)
call SetItemUserData(RJF,1)
call SetItemCharges(RJF,RTF)
else
call SetItemCharges(Z4,RTF+GetItemCharges(Z4))
set G87[288+GetPlayerId(Z_F)]=Z4
endif
endif
call EnableTrigger(H94)
elseif Z2F then
call Y0F(Z_F,Y_F,null,Y68,ON7(OB7,"x"),ON7(OB7,"y"),RTF,1)
elseif Z2F==false and(GetItemType(QU8)==ITEM_TYPE_PERMANENT or GetItemType(QU8)==ITEM_TYPE_CAMPAIGN)then
call SetItemUserData(QU8,1)
set A8F=YCF(Z_F,Y_F,0)
endif
if A8F==false and A7F!=null and Y7F(A7F)==false then
set A8F=Z1F(Y_F,A7F)
endif
if A8F==false and A7F!=null and Y7F(A7F)==false then
call ZYF(Y_F,A7F)
endif
else
if GetWidgetLife(QU8)>0 then
set n5=F59(Y_F)
set A1E=F29(Y_F)
if MV7(Y_F,ZU[n5])==null and GetUnitAbilityLevel(Y_F,A1E)>0 then
call UnitRemoveAbility(Y_F,A1E)
if GetUnitTypeId(Y_F)==1215130471 then
set IN4=Y_F
call ExecuteFunc("E6D")
endif
endif
set YC7=Y08(Y_F,4)
if n5==GX4 and HQ4[YC7]!=0 then
call UnitRemoveAbility(Y_F,HV4[YC7])
call UnitAddAbility(Y_F,HU4[YC7])
call SetPlayerAbilityAvailable(p,HU4[YC7],false)
endif
if IsItemOwned(QU8)==false then
if GetItemType(QU8)==ITEM_TYPE_ARTIFACT or Z88(Y68)then
set A4F=true
endif
call X0F(SU[Y68],GetItemX(QU8),GetItemY(QU8),Z_F,A4F,RTF)
call KX7(QU8)
endif
endif
endif
call NM7(OB7)
call OZ7(t)
call EnableTrigger(SV4)
if A7F!=null then
set G87[288+GetPlayerId(Z_F)]=A7F
endif
set t=null
set QU8=null
set Y_F=null
set p=null
set Z_F=null
set RJF=null
set Z4=null
set A7F=null
return false
endfunction
function A9F takes nothing returns boolean
local item QU8
local integer Z5F
local unit Y_F=GetTriggerUnit()
local trigger t
local integer OB7
local integer n5
local integer A1E
local integer id
set id=GetPlayerId(GetOwningPlayer(Y_F))
if(IsUnitType(Y_F,UNIT_TYPE_HERO) or AS7(Y_F))and IsUnitIllusion(Y_F)==false and GetUnitTypeId(Y_F)!=1311788365 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM then
if GetItemTypeId(GetManipulatedItem())==ZU[UZ]then
set HE4=HE4+1
set RK4[id]=RK4[id]+1
elseif GetItemTypeId(GetManipulatedItem())==ZU[RW]then
set HF4=HF4+1
set RM4[id]=RM4[id]+1
elseif GetItemTypeId(GetManipulatedItem())==ZU[DI4]then
set HG4=HG4+1
set RN4[id]=RN4[id]+1
elseif GetItemTypeId(GetManipulatedItem())==ZU[WL]or GetItemTypeId(GetManipulatedItem())==ZU[U3]or GetItemTypeId(GetManipulatedItem())==ZU[ZL]then
set HH4=HH4+1
set RO4[id]=RO4[id]+1
elseif GetItemTypeId(GetManipulatedItem())==ZU[W5]and GetUnitAbilityLevel(Y_F,'A2XU')==1 then
set HD4=HD4+1
set RP4[id]=RP4[id]+1
call F71(Y_F,1227901005)
elseif GetItemTypeId(GetManipulatedItem())==ZU[R2]then
set HI4=HI4+1
set RQ4[id]=RQ4[id]+1
elseif GetItemTypeId(GetManipulatedItem())==ZU[R1C]then
set R6c=R6c+1
set R6d[id]=R6d[id]+1
elseif GetItemTypeId(GetManipulatedItem())==ZU[R00]and AS7(Y_F)==false then
set R4z=R4z+1
set R5a[id]=R5a[id]+1
if LoadBoolean(L7,GetHandleId(GetOwningPlayer(Y_F)),'R00L')==false then
call SetPlayerTechResearched(GetOwningPlayer(Y_F),'R00L',GetPlayerTechCount(GetOwningPlayer(Y_F),'R00L',true)+1)
call SaveBoolean(L7,GetHandleId(GetOwningPlayer(Y_F)),'R00L',true)
endif
elseif GetItemTypeId(GetManipulatedItem())==ZU[U1]then
set BD4=BD4+1
set RR4[id]=RR4[id]+1
elseif GetItemTypeId(GetManipulatedItem())==ZU[X2]or GetItemTypeId(GetManipulatedItem())==ZU[W2]then
set aBD4=aBD4+1
set aRR4[id]=aRR4[id]+1
elseif GetItemTypeId(GetManipulatedItem())==ZU[RL]then
set BE4=BE4+1
set RS4[id]=RS4[id]+1
elseif GetItemTypeId(GetManipulatedItem())==ZU[RLL]then
set BEE4=BEE4+1
set RSS4[id]=RSS4[id]+1
elseif GetItemTypeId(GetManipulatedItem())==ZU[X1]or GetItemTypeId(GetManipulatedItem())==ZU[BA]or GetItemTypeId(GetManipulatedItem())==ZU[GB]or GetItemTypeId(GetManipulatedItem())==ZU[R11]then
set ABE4=ABE4+1
set ARS4[id]=ARS4[id]+1
elseif GetItemTypeId(GetManipulatedItem())==ZU[R3]then
set EY7=EY7+1
set EA7[id]=EA7[id]+1
elseif GetItemTypeId(GetManipulatedItem())==ZU[LB]then
set EZ7=EZ7+1
set E37[id]=E37[id]+1
elseif GetItemTypeId(GetManipulatedItem())==ZU[D1]or GetItemTypeId(GetManipulatedItem())==ZU[E1]or GetItemTypeId(GetManipulatedItem())==ZU[F1]or GetItemTypeId(GetManipulatedItem())==ZU[H1]then
set ABO4=ABO4+1
set ARO4[id]=ARO4[id]+1
endif
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_DROP_ITEM then
if GetItemTypeId(GetManipulatedItem())==ZU[UZ]then
set RK4[id]=RK4[id]-1
set HE4=HE4-1
elseif GetItemTypeId(GetManipulatedItem())==ZU[RW]and GetUnitTypeId(Y_F)!=1311788365 then
set RM4[id]=RM4[id]-1
set HF4=HF4-1
elseif GetItemTypeId(GetManipulatedItem())==ZU[LB]then
set E37[id]=E37[id]-1
set EZ7=EZ7-1
elseif GetItemTypeId(GetManipulatedItem())==ZU[DI4]then
set RN4[id]=RN4[id]-1
set HG4=HG4-1
elseif GetItemTypeId(GetManipulatedItem())==ZU[WL]or GetItemTypeId(GetManipulatedItem())==ZU[U3]or GetItemTypeId(GetManipulatedItem())==ZU[ZL]then
set HH4=HH4-1
set RO4[id]=RO4[id]-1
if RO4[id]<1 or MU7(Y_F,ZU[WL],GetManipulatedItem())==null or MU7(Y_F,ZU[U3],GetManipulatedItem())==null or MU7(Y_F,ZU[ZL],GetManipulatedItem())==null then
call UnitRemoveAbility(Y_F,1093744436)
call UnitRemoveAbility(Y_F,1093744437)
endif
elseif GetItemTypeId(GetManipulatedItem())==ZU[RLL]then
set BEE4=BEE4-1
set RSS4[id]=RSS4[id]-1
elseif GetItemTypeId(GetManipulatedItem())==ZU[X1]or GetItemTypeId(GetManipulatedItem())==ZU[R11]or GetItemTypeId(GetManipulatedItem())==ZU[BA]or GetItemTypeId(GetManipulatedItem())==ZU[GB]then
set ARS4[id]=ARS4[id]-1
set ABE4=ABE4-1
elseif GetItemTypeId(GetManipulatedItem())==ZU[D1]or GetItemTypeId(GetManipulatedItem())==ZU[E1]or GetItemTypeId(GetManipulatedItem())==ZU[F1]or GetItemTypeId(GetManipulatedItem())==ZU[H1]then
set ARO4[id]=ARO4[id]-1
set ABO4=ABO4-1
elseif GetItemTypeId(GetManipulatedItem())==ZU[W5]then
set HD4=IMaxBJ(HD4-1,0)
set RP4[id]=IMaxBJ(RP4[id]-1,0)
call UnitRemoveAbility(Y_F,1110458953)
elseif GetItemTypeId(GetManipulatedItem())==ZU[R2]and GetUnitTypeId(Y_F)!=1311788365 then
set RQ4[id]=RQ4[id]-1
set HI4=HI4-1
elseif GetItemTypeId(GetManipulatedItem())==ZU[R1C]then
set R6d[id]=IMaxBJ(R6d[id]-1,0)
set R6c=IMaxBJ(R6c-1,0)
elseif GetItemTypeId(GetManipulatedItem())==ZU[R00]and AS7(Y_F)==false then
set R5a[id]=IMaxBJ(R5a[id]-1,0)
set R4z=IMaxBJ(R4z-1,0)
if LoadBoolean(L7,GetHandleId(GetOwningPlayer(Y_F)),'R00L') and MU7(Y_F,ZU[R00],GetManipulatedItem())==null then
call SetPlayerTechResearched(GetOwningPlayer(Y_F),'R00M',GetPlayerTechCount(GetOwningPlayer(Y_F),'R00M',true)+1)
call SaveBoolean(L7,GetHandleId(GetOwningPlayer(Y_F)),'R00L',false)
endif
endif
endif
endif
if QY4[id]and(not GE7[304+id])and(GetManipulatedItem()!=G87[336+id])then
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_PAWN_ITEM then
set QU8=GetSoldItem()
call SetItemUserData(QU8,-2)
set n5=F59(Y_F)
set A1E=F29(Y_F)
if MU7(Y_F,ZU[n5],QU8)==null and GetUnitAbilityLevel(Y_F,A1E)>0 then
call UnitRemoveAbility(Y_F,A1E)
if GetUnitTypeId(Y_F)==1215130471 then
set IN4=Y_F
call ExecuteFunc("E6D")
endif
endif
elseif GetItemTypeId(GetManipulatedItem())!=1227894853 and GetItemTypeId(GetManipulatedItem())!=1227895373 then
set QU8=GetManipulatedItem()
if IsUnitIllusion(Y_F)or GetItemUserData(QU8)==-2 then
set QU8=null
set Y_F=null
set t=null
return false
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM then
set Z5F=1
else
set Z5F=2
endif
if(Z5F==1 or(Z5F==2 and Y7F(QU8)==false and GetWidgetLife(QU8)>0))and GetUnitTypeId(Y_F)!=1211117642 then
set GG7=KY7(QU8)
if(GetItemPlayer(QU8)!=Player($F))then
set GF7=GetItemPlayer(QU8)
endif
set G87[288+GetPlayerId(GF7)]=null
set t=CreateTrigger()
set OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function Z0F))
call NT7(OB7,"Unit",Y_F)
call NP7(OB7,"EventType",Z5F)
call NP7(OB7,"indexId",GG7)
if Y7F(QU8)then
call NS7(OB7,"Temporary",true)
call NZ7(OB7,"p",GF7)
call NP7(OB7,"charges",GetItemCharges(QU8))
call NQ7(OB7,"x",(GetItemX(QU8))*1.)
call NQ7(OB7,"y",(GetItemY(QU8))*1.)
else
call NS7(OB7,"Temporary",false)
call NA7(OB7,"Item",QU8)
call SetItemUserData(QU8,0)
endif
endif
endif
set GE7[304+id]=false
set QU8=null
set Y_F=null
set t=null
return false
endfunction
function ADF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
if GetUnitAbilityLevel(WI7,1110454611)==0 then
call UnitRemoveAbility(WI7,1110454611)
call UnitRemoveAbility(WI7,1110455361)
call NM7(OB7)
call OZ7(t)
elseif GetUnitState(WI7,UNIT_STATE_LIFE)==GetUnitState(WI7,UNIT_STATE_MAX_LIFE)and GetUnitState(WI7,UNIT_STATE_MANA)==GetUnitState(WI7,UNIT_STATE_MAX_MANA)then
call UnitRemoveAbility(WI7,1110454611)
call UnitRemoveAbility(WI7,1110455361)
call NM7(OB7)
call OZ7(t)
endif
set t=null
set WI7=null
return false
endfunction
function AEF takes unit WI7,item QU8 returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function ADF))
call NT7(OB7,"Hero",WI7)
set t=null
endfunction
function FUO takes unit WI7,item QU8 returns nothing
local integer G0O=R2I((TimerGetElapsed(W))/60)
local integer XXP
local integer hY
local integer Eov=1
local boolean GIO=(LoadBoolean(L7,(GetHandleId(QU8)),(835)))
if GetUnitAbilityLevel(WI7,'A0O3')>0 then
set Eov=2+GetUnitAbilityLevel(WI7,'A0O3')
endif
call DestroyEffect(AddSpecialEffectTarget("UI\\Feedback\\GoldCredit\\GoldCredit.mdl",WI7,"origin"))
if GetItemTypeId(QU8)=='I0Q5' then
set hY=100*Eov
set XXP=0
else
set hY=(50+2*B)*Eov
set XXP=(50+5*B)
endif
if IsUnitType(WI7,UNIT_TYPE_HERO)then
call AddHeroXP(WI7,XXP,true)
endif
call U27(GetOwningPlayer(WI7),hY)
call PlaySoundOnUnitBJ(GOO,100,WI7)
endfunction
function AFF takes unit WI7,item QU8 returns nothing
local unit u=WI7
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local unit BB7=CreateUnit(GetOwningPlayer(u),1697656901,x,y,0)
local unit AGF=CreateUnit(GetOwningPlayer(u),1697656901,x,y,0)
call UnitAddAbility(BB7,1093683026)
call UnitAddAbility(AGF,1093683026)
call IssueTargetOrderById(BB7,$D0132,u)
call IssueTargetOrderById(AGF,$D0132,u)
set u=null
set BB7=null
set AGF=null
endfunction
function AHF takes unit WI7,item QU8 returns nothing
if GetItemTypeId(QU8)==1227894839 or GetItemTypeId(QU8)==1227894838 or GetItemTypeId(QU8)==1227894840 or GetItemTypeId(QU8)==1227894859 or GetItemTypeId(QU8)==1227894858 or GetItemTypeId(QU8)==1227903050 or GetItemTypeId(QU8)==1227903285 then
call FN9(WI7,GetItemTypeId(QU8),false)
endif
if GetItemTypeId(QU8)==1227894839 then
call AFF(WI7,QU8)
elseif GetItemTypeId(QU8)==1227894858 then
if GetUnitAbilityLevel(WI7,1110456665)>0 then
call UnitRemoveAbility(WI7,1110456665)
call UnitRemoveAbility(WI7,1110454609)
call DisableTrigger(GetTriggeringTrigger())
call UnitAddItemById(WI7,1227894858)
call EnableTrigger(GetTriggeringTrigger())
endif
elseif GetItemTypeId(QU8)==1227894840 then
call AEF(WI7,QU8)
elseif GetItemTypeId(QU8)==1227903050 or GetItemTypeId(QU8)==1227903285 then
call FUO(WI7,QU8)
endif
endfunction
function AIF takes unit WX7,item D88 returns nothing
local integer XG7
local integer BC7
call UnitRemoveAbility(WX7,1093810003)
call UnitRemoveAbility(WX7,1093810001)
call UnitRemoveAbility(WX7,1093810002)
call UnitRemoveAbility(WX7,1093810004)
if GetUnitAbilityLevel(WX7,1093810246)>0 then
call UnitRemoveAbility(WX7,1093810246)
call UnitAddAbility(WX7,1093810246)
endif
if GetUnitTypeId(WX7)==1164207469 then
set XG7=1093684057
elseif GetUnitTypeId(WX7)==1429221446 then
set XG7=1093678660
elseif GetUnitTypeId(WX7)==1162032951 then
set XG7=1093684557
elseif GetUnitTypeId(WX7)==1332179560 then
set XG7='A0DB'
else
set WX7=null
return
endif
set BC7=GetUnitAbilityLevel(WX7,XG7)
if BC7>0 then
call UnitRemoveAbility(WX7,XG7)
call UnitAddAbility(WX7,XG7)
call SetUnitAbilityLevel(WX7,XG7,BC7)
endif
endfunction
function AJF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit u=O77(OB7,"Unit")
local integer AKF=OM7(OB7,"itemslot")
local item QU8=UnitItemInSlot(u,AKF)
if QU8!=null and W47(KY7(QU8))==false and GetWidgetLife(QU8)>0 and F_9(QU8)==false then
call SetItemDroppable(QU8,true)
endif
call NM7(OB7)
call OZ7(t)
set t=null
set QU8=null
return false
endfunction
function AMF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit u=O77(OB7,"Unit")
local integer AKF=OM7(OB7,"itemslot")
local item QU8=UnitItemInSlot(u,AKF)
call NM7(OB7)
call OZ7(t)
if(u!=null and GetUnitTypeId(u)>1 and IsUnitType(u,UNIT_TYPE_DEAD)==false)and(QU8!=null and GetWidgetLife(QU8)>0)then
set t=CreateTrigger()
set OB7=GetHandleId(t)
call SetItemDroppable(QU8,false)
call NP7(OB7,"itemslot",AKF)
call NT7(OB7,"Unit",u)
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerAddCondition(t,Condition(function AJF))
endif
set QU8=null
set u=null
set t=null
return false
endfunction
function ANF takes nothing returns nothing
local integer AKF
local unit u=GetTriggerUnit()
local trigger t
local integer OB7
local item QU8
if GetIssuedOrderId()==$D0028 then
set AKF=0
elseif GetIssuedOrderId()==$D0029 then
set AKF=1
elseif GetIssuedOrderId()==$D002A then
set AKF=2
elseif GetIssuedOrderId()==$D002B then
set AKF=3
elseif GetIssuedOrderId()==$D002C then
set AKF=4
elseif GetIssuedOrderId()==$D002D then
set AKF=5
endif
set QU8=UnitItemInSlot(u,AKF)
if QU8!=null and GetWidgetLife(QU8)>0 then
set t=CreateTrigger()
set OB7=GetHandleId(t)
call NP7(OB7,"itemslot",AKF)
call NT7(OB7,"Unit",u)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function AMF))
endif
set QU8=null
set u=null
set t=null
endfunction
function AOF takes nothing returns boolean
if GetIssuedOrderId()==$D0028 or GetIssuedOrderId()==$D0029 or GetIssuedOrderId()==$D002A or GetIssuedOrderId()==$D002B or GetIssuedOrderId()==$D002C or GetIssuedOrderId()==$D002D then
call ANF()
endif
return false
endfunction
function APF takes integer Y68 returns boolean
return Y68!=B5 and Y68!=DI4 and Y68!=EW and Y68!=X0
endfunction
function AQF takes nothing returns nothing
if GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM then
call SetItemPawnable(GetManipulatedItem(),false)
else
call SetItemPawnable(GetManipulatedItem(),true)
endif
endfunction
function ARF takes nothing returns boolean
if GetItemType(GetManipulatedItem())==ITEM_TYPE_PERMANENT and APF(KZ7(GetManipulatedItem()))and KW7(GetTriggerUnit())then
call AQF()
endif
return false
endfunction
function ASF takes nothing returns boolean
local unit WI7=GetTriggerUnit()
local integer V77=1
if MU7(WI7,ZU[FV],GetManipulatedItem())!=null or MV7(WI7,ZU[EC])!=null then
set V77=2
endif
if MU7(WI7,ZU[DS4],GetManipulatedItem())!=null or MU7(WI7,ZU[R06],GetManipulatedItem())!=null then
set V77=3
endif
if MU7(WI7,ZU[G6],GetManipulatedItem())!=null or MU7(WI7,ZU[H6],GetManipulatedItem())!=null or MU7(WI7,ZU[N6],GetManipulatedItem())!=null then
set V77=4
endif
if MU7(WI7,ZU[F74],GetManipulatedItem())!=null then
set V77=5
endif
if MU7(WI7,ZU[LB],GetManipulatedItem())!=null then
set V77=6
endif
if MU7(WI7,ZU[F6],GetManipulatedItem())!=null or MU7(WI7,ZU[FF6],GetManipulatedItem())!=null then
set V77=7
endif
if MU7(WI7,ZU[Q1],GetManipulatedItem())!=null then
call UnitAddAbility(WI7,1093686832)
call SetUnitAbilityLevel(WI7,1093686832,V77)
call UnitMakeAbilityPermanent(WI7,true,1093686832)
else
call UnitRemoveAbility(WI7,1093686832)
endif
set WI7=null
return false
endfunction
function ATF takes nothing returns boolean
local unit WI7=GetTriggerUnit()
local integer V77=1
if MV7(WI7,ZU[FV])!=null or MV7(WI7,ZU[EC])!=null then
set V77=2
endif
if MV7(WI7,ZU[DS4])!=null or MV7(WI7,ZU[R06])!=null then
set V77=3
endif
if MV7(WI7,ZU[G6])!=null or MU7(WI7,ZU[H6],GetManipulatedItem())!=null or MU7(WI7,ZU[N6],GetManipulatedItem())!=null then
set V77=4
endif
if MV7(WI7,ZU[F74])!=null then
set V77=5
endif
if MU7(WI7,ZU[LB],GetManipulatedItem())!=null then
set V77=6
endif
if MV7(WI7,ZU[F6])!=null or MV7(WI7,ZU[FF6])!=null then
set V77=7
endif
if MV7(WI7,ZU[Q1])!=null then
call UnitAddAbility(WI7,1093686832)
call SetUnitAbilityLevel(WI7,1093686832,V77)
call UnitMakeAbilityPermanent(WI7,true,1093686832)
endif
set WI7=null
return false
endfunction
function AUF takes nothing returns nothing
local unit WI7=GetTriggerUnit()
if GetTriggerEventId()==EVENT_PLAYER_UNIT_DROP_ITEM or GetTriggerEventId()==EVENT_PLAYER_UNIT_PAWN_ITEM then
if KZ7(GetManipulatedItem())==DM4 then
call UnitRemoveAbility(WI7,1093685333)
endif
if KZ7(GetManipulatedItem())==T2 then
call UnitRemoveAbility(WI7,1093747287)
endif
if KZ7(GetManipulatedItem())==DK4 then
call UnitRemoveAbility(WI7,1093685333)
call UnitRemoveAbility(WI7,1093686339)
call UnitRemoveAbility(WI7,1093686603)
endif
if KZ7(GetManipulatedItem())==EZB then
call UnitRemoveAbility(WI7,'A2QS')
call UnitRemoveAbility(WI7,'A2QT')
call UnitRemoveAbility(WI7,'A2T9')
endif
if KZ7(GetManipulatedItem())==R16 or KZ7(GetManipulatedItem())==R1K then
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),1093817161,false)
call UnitRemoveAbility(WI7,1093817161)
endif
if KZ7(GetManipulatedItem())==WL or KZ7(GetManipulatedItem())==U3 or KZ7(GetManipulatedItem())==ZL then
call UnitRemoveAbility(WI7,'A174')
call UnitRemoveAbility(WI7,'A175')
endif
if KZ7(GetManipulatedItem())==U3 then
call UnitRemoveAbility(WI7,'A2XC')
call UnitRemoveAbility(WI7,'A2XF')
call UnitRemoveAbility(WI7,'A2XG')
endif
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM then
if KZ7(GetManipulatedItem())==DM4 then
call UnitAddAbility(WI7,1093685333)
call UnitMakeAbilityPermanent(WI7,true,1093685333)
endif
if KZ7(GetManipulatedItem())==T2 then
call UnitAddAbility(WI7,1093747287)
call UnitMakeAbilityPermanent(WI7,true,1093747287)
endif
if KZ7(GetManipulatedItem())==DK4 then
call UnitAddAbility(WI7,1093685333)
call UnitMakeAbilityPermanent(WI7,true,1093685333)
call UnitAddAbility(WI7,1093686339)
call UnitMakeAbilityPermanent(WI7,true,1093686339)
call UnitAddAbility(WI7,1093686603)
call UnitMakeAbilityPermanent(WI7,true,1093686603)
endif
if KZ7(GetManipulatedItem())==EZB then
call XF7(WI7,'A2T9')
if IsUnitType(WI7,UNIT_TYPE_MELEE_ATTACKER)==true then
call XF7(WI7,'A2QS')
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),'A2QS',false)
else
call XF7(WI7,'A2QT')
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),'A2QT',false)
endif
endif
if KZ7(GetManipulatedItem())==R16 then
call XF7(WI7,1093817161)
call SetUnitAbilityLevel(WI7,1093817161,GetUnitAbilityLevel(WI7,1093813557)+GetUnitAbilityLevel(WI7,1093817160))
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),1093817161,true)
endif
if KZ7(GetManipulatedItem())==U3 then
call XF7(WI7,'A2XC')
if IsUnitType(WI7,UNIT_TYPE_MELEE_ATTACKER)==true then
call XF7(WI7,'A2XF')
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),'A2XF',false)
else
call XF7(WI7,'A2XG')
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),'A2XG',false)
endif
endif
endif
set WI7=null
endfunction
function AVF takes nothing returns boolean
if GetItemType(GetManipulatedItem())==ITEM_TYPE_PERMANENT and(KZ7(GetManipulatedItem())==R1K or KZ7(GetManipulatedItem())==U3 or KZ7(GetManipulatedItem())==ZL or KZ7(GetManipulatedItem())==WL or KZ7(GetManipulatedItem())==DK4 or KZ7(GetManipulatedItem())==DM4 or KZ7(GetManipulatedItem())==T2 or KZ7(GetManipulatedItem())==EZB or KZ7(GetManipulatedItem())==Z2 or KZ7(GetManipulatedItem())==R03 or KZ7(GetManipulatedItem())==R16)then
call AUF()
endif
return false
endfunction
function AWF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local item QU8=OJ7(OB7,"Item")
if GetTriggerEventId()==EVENT_UNIT_DROP_ITEM and GetManipulatedItem()==QU8 then
call NM7(OB7)
call OZ7(t)
elseif GetTriggerEventId()!=EVENT_UNIT_DROP_ITEM then
if((LoadInteger(L7,(GetHandleId((WI7))),((4310))))==1)==false then
call SetUnitState(WI7,UNIT_STATE_LIFE,YK7(GetUnitState(WI7,UNIT_STATE_LIFE)-HJ4,1))
endif
endif
set t=null
set WI7=null
set QU8=null
return false
endfunction
function AXF takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_DROP_ITEM)
call TriggerAddCondition(t,Condition(function AWF))
call NT7(OB7,"Hero",WI7)
call NA7(OB7,"Item",GetManipulatedItem())
call TriggerEvaluate(t)
set t=null
set WI7=null
endfunction
function AYF takes nothing returns boolean
if GetItemType(GetManipulatedItem())==ITEM_TYPE_PERMANENT and KZ7(GetManipulatedItem())==DK4 then
call AXF()
endif
return false
endfunction
function VJO takes unit u returns boolean
local integer i=0
local item it
if GetUnitTypeId(u)=='H00J'then
return false
endif
loop
set it=UnitItemInSlot(u,i)
if it!=null then
if KZ7(it)==W5 or KZ7(it)==A5 then
set it=null
return true
endif
endif
set i=i+1
exitwhen i>5
endloop
set it=null
return false
endfunction
function AZF takes unit u returns boolean
local item AAF=CreateItem(1227901771,GetUnitX(u),GetUnitY(u))
local boolean AW8=UnitAddItem(u,AAF)
if AW8==false then
call RemoveItem(AAF)
endif
return AW8
endfunction
function ABF takes unit WI7,item QU8,integer AZ8 returns item
local real x=AV8(WI7)
local real y=AX8(WI7)
local integer i=0
local boolean array AA8
local item Z4
loop
exitwhen i>(UnitInventorySize(WI7)-1)
if UnitItemInSlot(WI7,i)==null and i!=AZ8 then
set Z4=CreateItem(1227895373,x,y)
call UnitAddItem(WI7,Z4)
set AA8[i]=true
else
set AA8[i]=false
endif
if i==AZ8 then
call UnitAddItem(WI7,QU8)
endif
set i=i+1
endloop
set i=0
loop
exitwhen i>5
if AA8[i]==true then
call RemoveItem(UnitItemInSlot(WI7,i))
endif
set i=i+1
endloop
set HA4=QU8
set Z4=null
return HA4
endfunction
function VEO takes unit WI7,integer VFO returns nothing
local integer i=0
local item A3F
local integer Y68
local unit BB7
local item A6F
if XH7(WI7)then
return
endif
call DisableTrigger(H94)
if RP4[GetPlayerId(GetOwningPlayer(WI7))]>0 and VFO==W5 and GetUnitAbilityLevel(WI7,'A2XU')==1 then
if VJO(WI7)then
call F71(WI7,1227901005)
endif
endif
loop
exitwhen i>5
set A3F=UnitItemInSlot(WI7,i)
set Y68=KZ7(A3F)
if Y68==A5 or Y68==W5 then
set IR4=GetItemPlayer(A3F)
call RemoveItem(A3F)
set BB7=CreateUnit(GetOwningPlayer(WI7),1697656901,GetUnitX(WI7),GetUnitY(WI7),0)
call UnitAddAbility(BB7,1095331446)
set A6F=UnitAddItemById(BB7,ZU[VFO])
call UnitResetCooldown(BB7)
call UnitUseItem(BB7,A6F)
set HA4=ABF(WI7,A6F,i)
call SetItemPlayer(A6F,IR4,false)
call SetItemUserData(A6F,1)
call UnitRemoveAbility(BB7,1095331446)
set BB7=null
set A6F=null
endif
set A3F=null
set i=i+1
endloop
call EnableTrigger(H94)
endfunction
function ACF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=(LoadUnitHandle(L7,(OB7),(14)))
local integer i=0
local integer Y68
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call SaveBoolean(L7,(GetHandleId(WI7)),(102),(false))
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
elseif AZF(WI7)==false then
call TriggerRegisterTimerEvent(t,5.5,false)
else
call SaveBoolean(L7,(GetHandleId(WI7)),(102),(false))
call VEO(WI7,W5)
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
endif
set t=null
set WI7=null
return false
endfunction
function ALF takes unit WI7 returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call SaveBoolean(L7,(GetHandleId(WI7)),(102),(true))
call TriggerRegisterTimerEvent(t,13,false)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function ACF))
call SaveUnitHandle(L7,(OB7),(14),(WI7))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\DispelMagic\\DispelMagicTarget.mdl",WI7,"origin"))
call VEO(WI7,A5)
set t=null
endfunction
function A1F takes nothing returns boolean
local integer i=1
local unit WI7
local integer id
if D9 then
return false
endif
if HD4>0 then
loop
exitwhen i>5
set id=GetPlayerId(Z7[i])
set WI7=M7[id]
if RP4[id]>0 and WI7!=null and GetUnitTypeId(WI7)>1 and IsUnitType(WI7,UNIT_TYPE_DEAD)==false and(LoadBoolean(L7,(GetHandleId(WI7)),(102)))==false and WQ7(WI7)==false and(LoadBoolean(L7,(GetHandleId(WI7)),(129)))==false then
call ALF(WI7)
endif
set id=GetPlayerId(A7[i])
set WI7=M7[id]
if RP4[id]>0 and WI7!=null and GetUnitTypeId(WI7)>1 and IsUnitType(WI7,UNIT_TYPE_DEAD)==false and(LoadBoolean(L7,(GetHandleId(WI7)),(102)))==false and WQ7(WI7)==false and(LoadBoolean(L7,(GetHandleId(WI7)),(129)))==false then
call ALF(WI7)
endif
set i=i+1
endloop
endif
set WI7=null
return false
endfunction
function VXO takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(OB7),(2)))
local unit IH7=(LoadUnitHandle(L7,(OB7),(17)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetUnitAbilityLevel(IH7,1110458953)==0 then
call ALF(ZX7)
if GetTriggerEventId()!=EVENT_WIDGET_DEATH then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\DispelMagic\\DispelMagicTarget.mdl",IH7,"origin"))
endif
call DestroyEffect((LoadEffectHandle(L7,(OB7),(32))))
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
elseif GetTriggerEvalCount(t)>=R2I(13/0.1)then
call SaveBoolean(L7,(GetHandleId(ZX7)),(102),(false))
call VEO(ZX7,W5)
call UnitRemoveAbility(IH7,1110458953)
call DestroyEffect((LoadEffectHandle(L7,(OB7),(32))))
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function VYO takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
call F71(IH7,1227901005)
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerAddCondition(t,Condition(function VXO))
call SaveUnitHandle(L7,(OB7),(2),(ZX7))
call SaveUnitHandle(L7,(OB7),(17),(IH7))
call SaveEffectHandle(L7,(OB7),(32),(AddSpecialEffectTarget("effects\\Linkens_Main.mdx",IH7,"chest")))
call SaveBoolean(L7,(GetHandleId(ZX7)),(102),(true))
call UnitRemoveAbility(ZX7,1110458953)
call VEO(ZX7,A5)
set t=null
set ZX7=null
set IH7=null
endfunction
function VZO takes nothing returns boolean
if GetSpellAbilityId()==1093816918 and IsUnitIllusion(GetSpellTargetUnit())==false then
call VYO()
endif
return false
endfunction
function A0F takes unit hn,item x5 returns integer
local integer i=0
loop
exitwhen i>5
if UnitItemInSlot(hn,i)==x5 then
return i
endif
set i=i+1
endloop
return-1
endfunction
function A5F takes nothing returns nothing
local unit S4=GetTriggerUnit()
local item Z4=GetManipulatedItem()
local integer Y68=KZ7(Z4)
local integer AZ8
call DisableTrigger(H94)
if Y68==C3 then
set AZ8=A0F(S4,Z4)
set IR4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HA4=AY8(S4,ZU[E6],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Y68==E6 then
set AZ8=A0F(S4,Z4)
set IR4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HA4=AY8(S4,ZU[C3],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
endif
if Y68==JC then
set AZ8=A0F(S4,Z4)
set IR4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HA4=AY8(S4,ZU[NC],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Y68==NC then
set AZ8=A0F(S4,Z4)
set IR4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HA4=AY8(S4,ZU[JC],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
endif
if Y68==E2 then
set AZ8=A0F(S4,Z4)
set IR4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HA4=AY8(S4,ZU[F2],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Y68==F2 then
set AZ8=A0F(S4,Z4)
set IR4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HA4=AY8(S4,ZU[E2],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
endif
call EnableTrigger(H94)
set S4=null
set Z4=null
endfunction
function A2F takes nothing returns nothing
local unit A_F=GetTriggerUnit()
local item B4F=GetManipulatedItem()
local integer B7F=KZ7(B4F)
local integer AKF
call DisableTrigger(H94)
if B7F==H2 then
set AKF=A0F(A_F,B4F)
set IR4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(B4F)
set HA4=AY8(A_F,ZU[P2],AKF)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif B7F==P2 then
set AKF=A0F(A_F,B4F)
set IR4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(B4F)
set HA4=AY8(A_F,ZU[H2],AKF)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
endif
call EnableTrigger(H94)
set A_F=null
set B4F=null
endfunction
function B8F takes nothing returns nothing
local unit S4=GetTriggerUnit()
local item Z4=GetManipulatedItem()
local integer Y68=KZ7(Z4)
local integer AZ8
call DisableTrigger(H94)
if GetUnitTypeId(S4)!=1211117642 then
if Y68==G6 then
set AZ8=A0F(S4,Z4)
set IR4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
call DisableTrigger(H94)
set HA4=AY8(S4,ZU[H6],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Y68==H6 then
set AZ8=A0F(S4,Z4)
set IR4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
call DisableTrigger(H94)
set HA4=AY8(S4,ZU[N6],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Y68==N6 then
set AZ8=A0F(S4,Z4)
set IR4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
call DisableTrigger(H94)
set HA4=AY8(S4,ZU[G6],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
endif
endif
call EnableTrigger(H94)
set S4=null
set Z4=null
endfunction
function B9F takes integer n5 returns integer
if n5==1227894838 then
return QA
elseif n5==1227894840 then
return WA
elseif n5==1227894858 then
return JA
elseif n5==1227894859 then
return NA
elseif n5==1227894839 then
return YA
elseif n5==1227903050 then
return HJ0
elseif n5==1227903285 then
return HJ1
endif
return-1
endfunction
function BDF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit u=O77(OB7,"Unit")
local integer AKF=OM7(OB7,"itemslot")
local item QU8=UnitItemInSlot(u,AKF)
local integer BEF=OM7(OB7,"itemhandleid")
local item A6F
local integer AZ8
if QU8!=null and W47(KY7(QU8))and GetHandleId(QU8)==BEF and XH7(u)==false then
set A6F=CreateItem(LoadInteger(L7,GetHandleId(QU8),GetHandleId(u)),GetUnitX(u),GetUnitY(u))
call NM7(GetHandleId(QU8))
set AZ8=A0F(u,QU8)
set IR4=GetItemPlayer(QU8)
call KX7(QU8)
set HA4=AY8(u,ZU[IA],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
call NM7(OB7)
call OZ7(t)
call UnitAddItem(u,A6F)
endif
set t=null
set u=null
set QU8=null
set A6F=null
return false
endfunction
function BFF takes unit u,item A6F returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local integer AKF=A0F(u,A6F)
call NP7(OB7,"itemslot",AKF)
call NP7(OB7,"itemhandleid",GetHandleId(A6F))
call NT7(OB7,"Unit",u)
call TriggerRegisterTimerEvent(t,120.,true)
call TriggerAddCondition(t,Condition(function BDF))
set t=null
endfunction
function BGF takes nothing returns nothing
local unit u=GetTriggerUnit()
local item QU8=GetManipulatedItem()
local integer Y68=KY7(QU8)
local unit BHF
local integer BIF
local boolean TargetFrog
local integer AZ8
local item A6F
local integer BJF
if Y68==AZ then
set AZ8=A0F(u,QU8)
set BHF=O77(GetHandleId(u),"BottleTargetUnit")
set BIF=OM7(GetHandleId(u),"BottleTargetItemId")
if GetUnitTypeId(BHF)==1852206952 or GetUnitTypeId(BHF)==1852073580 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",u,"overhead"))
call XC7(GetOwningPlayer(u),"Abilities\\Spells\\Human\\Heal\\HealTarget.wav")
set IR4=GetItemPlayer(QU8)
call KX7(QU8)
set HA4=AY8(u,ZU[IA],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif ED9(BIF)then
set BJF=B9F(BIF)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",u,"overhead"))
set IR4=GetItemPlayer(QU8)
call KX7(QU8)
call DisableTrigger(H94)
if GetOwningPlayer(u)==IR4 then
set HA4=AY8(u,ZU[BJF],AZ8)
else
set HA4=AY8(u,BU[BJF],AZ8)
endif
call EnableTrigger(H94)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
set A6F=UnitItemInSlot(u,AZ8)
call SaveInteger(L7,GetHandleId(A6F),GetHandleId(u),BIF)
call BFF(u,A6F)
endif
elseif Y68==IA then
set AZ8=A0F(u,QU8)
set IR4=GetItemPlayer(QU8)
call KX7(QU8)
set HA4=AY8(u,ZU[CZ],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Y68==CZ then
set AZ8=A0F(u,QU8)
set IR4=GetItemPlayer(QU8)
call KX7(QU8)
set HA4=AY8(u,ZU[BZ],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Y68==BZ then
set AZ8=A0F(u,QU8)
set IR4=GetItemPlayer(QU8)
call KX7(QU8)
set HA4=AY8(u,ZU[AZ],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,0)
elseif W47(Y68)then
if LoadInteger(L7,GetHandleId(QU8),GetHandleId(u))>0 then
set NH=true
set AZ8=A0F(u,QU8)
set A6F=CreateItem(LoadInteger(L7,GetHandleId(QU8),GetHandleId(u)),GetUnitX(u),GetUnitY(u))
call NM7(GetHandleId(QU8))
set IR4=GetItemPlayer(QU8)
call KX7(QU8)
set HA4=AY8(u,ZU[IA],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
call UnitAddItem(u,A6F)
set NH=false
endif
endif
set u=null
set QU8=null
set BHF=null
set A6F=null
endfunction
function BKF takes nothing returns boolean
local integer AZ8
local real BS7
call DisableTrigger(H94)
if KZ7(GetManipulatedItem())==DM4 then
set BS7=GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)-GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)
set AZ8=A0F(GetTriggerUnit(),GetManipulatedItem())
set IR4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(GetManipulatedItem())
set HA4=AY8(GetTriggerUnit(),ZU[DK4],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,YK7(GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)-BS7,1))
call O37(GetTriggerUnit(),"ArmletOfMordiganState",.04)
call OV7(GetTriggerUnit(),"ArmletOfMordigan|Active")
endif
if KZ7(GetManipulatedItem())==DK4 then
set BS7=GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)-GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)
set AZ8=A0F(GetTriggerUnit(),GetManipulatedItem())
set IR4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(GetManipulatedItem())
set HA4=AY8(GetTriggerUnit(),ZU[DM4],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,YK7(GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)-BS7,1))
call OX7(GetTriggerUnit(),"ArmletOfMordigan|Active")
endif
call EnableTrigger(H94)
return false
endfunction
function BMF takes nothing returns nothing
if GetItemTypeId(GetManipulatedItem())==ZU[Y3]then
call X37(GetOwningPlayer(GetTriggerUnit()),(GetObjectName((1848657713))))
endif
endfunction
function BNF takes nothing returns nothing
local unit S4=GetTriggerUnit()
local item Z4=GetManipulatedItem()
local integer Y68=KZ7(Z4)
local integer AZ8
call DisableTrigger(H94)
if Y68==D0 then
set AZ8=A0F(S4,Z4)
set IR4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HA4=AY8(S4,ZU[E0],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
call F19(HA4)
elseif Y68==E0 then
set AZ8=A0F(S4,Z4)
set IR4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HA4=AY8(S4,ZU[J0],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
call F19(HA4)
elseif Y68==J0 then
set AZ8=A0F(S4,Z4)
set IR4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HA4=AY8(S4,ZU[N0],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
call F19(HA4)
elseif Y68==N0 then
set AZ8=A0F(S4,Z4)
set IR4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HA4=AY8(S4,ZU[O0],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
call F19(HA4)
elseif Y68==O0 then
set AZ8=A0F(S4,Z4)
set IR4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HA4=AY8(S4,ZU[R0],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
call F19(HA4)
endif
if Y68==Z2 then
set AZ8=A0F(S4,Z4)
set IR4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HA4=AY8(S4,ZU[Z2],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
call F19(HA4)
endif
if Y68==R03 then
set AZ8=A0F(S4,Z4)
set IR4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HA4=AY8(S4,ZU[R03],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
call F19(HA4)
endif
call EnableTrigger(H94)
set S4=null
set Z4=null
endfunction
function BOF takes nothing returns nothing
local unit S4=GetTriggerUnit()
local item Z4=GetManipulatedItem()
local integer Y68=KZ7(Z4)
local integer AZ8
call DisableTrigger(H94)
if Y68==D1 and GetItemCharges(Z4)==0 then
set AZ8=A0F(S4,Z4)
set IR4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HA4=AY8(S4,ZU[F1],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Y68==E1 and GetItemCharges(Z4)==0 then
set AZ8=A0F(S4,Z4)
set IR4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HA4=AY8(S4,ZU[H1],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
elseif Y68==VB and GetItemCharges(Z4)==0 then
set AZ8=A0F(S4,Z4)
set IR4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HA4=AY8(S4,ZU[WB],AZ8)
call SetItemPlayer(HA4,IR4,false)
call SetItemUserData(HA4,1)
endif
call EnableTrigger(H94)
set S4=null
set Z4=null
endfunction
function BPF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
if AZF(p5)and VJO(p5)then
call F71(p5,1227901005)
endif
call NM7(OB7)
call OZ7(t)
call NS7(GetHandleId(p5),"MantaBlocked",false)
set t=null
set p5=null
return false
endfunction
function R7f takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(L7,GetHandleId(t),0)
if IssueImmediateOrderById(u,$D026D)or XH7(u)then
call FlushChildHashtable(L7,GetHandleId(t))
call PauseTimer(t)
call DestroyTimer(t)
endif
set t=null
set u=null
endfunction
function R7g takes unit u returns nothing
local timer t=CreateTimer()
call TimerStart(t,.1,true,function R7f)
call SaveUnitHandle(L7,GetHandleId(t),0,u)
set t=null
endfunction
function BQF takes nothing returns nothing
local unit p5=GetTriggerUnit()
local item Z4=GetManipulatedItem()
local integer Y68=KZ7(Z4)
local trigger t
if(Y68==Y0 or Y68==B0)and OO7(GetHandleId(p5),"MantaBlocked") then
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.41,false)
call TriggerAddCondition(t,Condition(function BPF))
call NT7(GetHandleId(t),"Source",p5)
set t=null
endif
if GetUnitAbilityLevel(p5,'BNms')>0 then
call R7g(p5)
endif
set p5=null
set Z4=null
endfunction
function BRF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=O77(I97,"Source")
local integer WF8=OM7(I97,"Count")
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1097163124 then
call NP7(I97,"Count",16)
endif
elseif XH7(ZX7)or GetTriggerEventId()==EVENT_UNIT_DEATH or WF8==0 then
call UnitRemoveAbility(ZX7,1093685334)
call UnitRemoveAbility(ZX7,1110456140)
call OX7(ZX7,"ActiveTango")
call NM7(I97)
call OZ7(t)
else
if IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetSpellTargetUnit()))and(GetUnitTypeId(GetSpellTargetUnit())=='oeye' or GetUnitTypeId(GetSpellTargetUnit())=='o004')then
call SetUnitState(ZX7,UNIT_STATE_LIFE,GetUnitState(ZX7,UNIT_STATE_LIFE)+230/16)
else
call SetUnitState(ZX7,UNIT_STATE_LIFE,GetUnitState(ZX7,UNIT_STATE_LIFE)+115/16)
endif
call NP7(I97,"Count",WF8-1)
endif
return false
endfunction
function BSF takes nothing returns nothing
local unit p5=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call OV7(p5,"ActiveTango")
call XF7(p5,1093685334)
call NT7(OB7,"Source",p5)
call NP7(OB7,"Count",16)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BRF))
call TriggerEvaluate(t)
set p5=null
set t=null
endfunction
function BTF takes nothing returns nothing
if GetSpellAbilityId()==1097163124 and OT7(GetTriggerUnit(),"ActiveTango")==false then
call BSF()
endif
endfunction
function BUF takes integer id,real x,real y returns nothing
if IsPointInRegion(T94,x,y)==false then
set T84=T84+1
set S24[T84]=Player(id)
set S_4[T84]=x
set T44[T84]=y
set T74[T84]=(TimerGetElapsed(W))
endif
endfunction
function BVF takes integer id,real x,real y returns integer
local real CP7=(TimerGetElapsed(W))
local integer i=0
local integer U38=0
if IsPointInRegion(T94,x,y) then
return U38
endif
loop
exitwhen i>T84
if(CP7<T74[i]+e4)and(KF7(x,y,S_4[i],T44[i])<o4*2+50)and IsPlayerAlly(Player(id),S24[i]) then
set U38=U38+1
endif
set i=i+1
endloop
return U38
endfunction
function BWF takes integer BXF returns integer
if BXF==GetPlayerId(Z7[1])then
return 1747993161
elseif BXF==GetPlayerId(Z7[2])then
return 1747993163
elseif BXF==GetPlayerId(Z7[3])then
return 1747993159
elseif BXF==GetPlayerId(Z7[4])then
return 1747993158
elseif BXF==GetPlayerId(Z7[5])then
return 1747993164
elseif BXF==GetPlayerId(A7[1])then
return 1747993160
elseif BXF==GetPlayerId(A7[2])then
return 1747993162
elseif BXF==GetPlayerId(A7[3])then
return 1747993165
elseif BXF==GetPlayerId(A7[4])then
return 1747992885
elseif BXF==GetPlayerId(A7[5])then
return 1747993166
endif
return 1747993166
endfunction
function BYF takes integer BXF returns integer
return 1747992920
endfunction
function BZF takes integer BXF returns string
if BXF==GetPlayerId(Z7[1])then
return"war3mapImported\\TeleportTarget_Blue.mdx"
elseif BXF==GetPlayerId(Z7[2])then
return"war3mapImported\\TeleportTarget_Teal.mdx"
elseif BXF==GetPlayerId(Z7[3])then
return"war3mapImported\\TeleportTarget_Purple.mdx"
elseif BXF==GetPlayerId(Z7[4])then
return"war3mapImported\\TeleportTarget_Yellow.mdx"
elseif BXF==GetPlayerId(Z7[5])then
return"war3mapImported\\TeleportTarget_Orange.mdx"
elseif BXF==GetPlayerId(A7[1])then
return"war3mapImported\\TeleportTarget_Pink.mdx"
elseif BXF==GetPlayerId(A7[2])then
return"war3mapImported\\TeleportTarget_Gray.mdx"
elseif BXF==GetPlayerId(A7[3])then
return"war3mapImported\\TeleportTarget_LightBlue.mdx"
elseif BXF==GetPlayerId(A7[4])then
return"war3mapImported\\TeleportTarget_DarkGreen.mdx"
elseif BXF==GetPlayerId(A7[5])then
return"war3mapImported\\TeleportTarget_Brown.mdx"
endif
return"Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl"
endfunction
function BAF takes integer BXF returns string
return"Abilities\\Spells\\Human\\MassTeleport\\MassTeleportCaster.mdl"
endfunction
function BBF takes nothing returns boolean
local real d
if IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>0 and GetUnitAbilityLevel(GetFilterUnit(),1098085732)==0 and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(IP4)) and GetUnitTypeId(GetFilterUnit())!=1966092371 and GetUnitTypeId(GetFilterUnit())!=1852010352 and IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false then
set d=KF7(IK4,IM4,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))
if d<IJ4 then
set IJ4=d
set IN4=GetFilterUnit()
endif
endif
return false
endfunction
function BCF takes unit S4,real x,real y returns unit
local group g=WS7()
set IN4=null
set IP4=S4
set IJ4=99999
set IK4=x
set IM4=y
call GroupEnumUnitsInRange(g,x,y,99999,Condition(function BBF))
call WR7(g)
set g=null
return IN4
endfunction
function B3F takes unit u returns boolean
local integer id=GetUnitTypeId(u)
return id==1848657480 or id==1848657462 or id==1848657481 or id==1848657482
endfunction
function B6F takes unit u returns boolean
local integer id=GetUnitTypeId(u)
return id==1966092370 or id==1970107511 or id==1697657398 or id==1700946284
endfunction
function BLF takes nothing returns boolean
local real d
if(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 or B6F(GetFilterUnit())or GetUnitTypeId(GetFilterUnit())==1852206952 or GetUnitTypeId(GetFilterUnit())==1852073580 or B3F(GetFilterUnit()))and XH7(GetFilterUnit())==false and GetUnitAbilityLevel(GetFilterUnit(),1098085732)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(IP4)) and GetOwningPlayer(GetFilterUnit())!=C7 and IsUnitIllusion(GetFilterUnit())==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_FLYING)==false and GetUnitTypeId(GetFilterUnit())!=1848657461 then
set d=KF7(IK4,IM4,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))
if d<IJ4 then
set IJ4=d
set IN4=GetFilterUnit()
endif
endif
return false
endfunction
function B1F takes unit I_7,real x,real y returns unit
local group g=WS7()
set IN4=null
set IP4=I_7
set IJ4=99999
set IK4=x
set IM4=y
call GroupEnumUnitsInRange(g,x,y,99999,Condition(function BLF))
call WR7(g)
set g=null
return IN4
endfunction
function BLLF takes nothing returns boolean
local real d
if(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 or B6F(GetFilterUnit())or GetUnitTypeId(GetFilterUnit())==1852206952 or GetUnitTypeId(GetFilterUnit())==1852073580 or B3F(GetFilterUnit()))and XH7(GetFilterUnit())==false and GetUnitAbilityLevel(GetFilterUnit(),1098085732)==0 and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(IP4)) and GetOwningPlayer(GetFilterUnit())!=C7 and IsUnitIllusion(GetFilterUnit())==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_FLYING)==false and GetUnitTypeId(GetFilterUnit())!=1848657461 then
set d=KF7(IK4,IM4,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))
if d<IJ4 then
set IJ4=d
set IN4=GetFilterUnit()
endif
endif
return false
endfunction
function B11F takes unit I_7,real x,real y returns unit
local group g=WS7()
set IN4=null
set IP4=I_7
set IJ4=99999
set IK4=x
set IM4=y
call GroupEnumUnitsInRange(g,x,y,99999,Condition(function BLLF))
call WR7(g)
set g=null
return IN4
endfunction
function B0F takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=(LoadUnitHandle(L7,(OB7),($E)))
local real x=(LoadReal(L7,(OB7),(6)))
local real y=(LoadReal(L7,(OB7),(7)))
local unit B5F=(LoadUnitHandle(L7,(OB7),(448)))
local unit B2F=(LoadUnitHandle(L7,(OB7),(447)))
local ubersplat B_F=(LoadUbersplatHandle(L7,(OB7),($83)))
local integer U38=(LoadInteger(L7,(OB7),(34)))
local real Z27=(LoadReal(L7,(OB7),(57)))
local real CP7=ON7(OB7,"OriginalTime")
local integer id=GetPlayerId(GetOwningPlayer(WI7))
local boolean C4F=false
local integer i=0
if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
if GetSpellAbilityId()==1093751349 or GetSpellAbilityId()==1093743415 then
set C4F=true
endif
else
set U38=U38+1
call SaveInteger(L7,(OB7),(34),(U38))
if U38==1 then
if Z27>3 then
call SetUnitAnimationByIndex(B5F,1)
call SetUnitAnimationByIndex(B2F,1)
endif
elseif U38==2 then
set C4F=true
endif
endif
if C4F then
call SaveInteger(L7,(GetHandleId((WI7))),((4256)),(2))
call KillUnit(B5F)
call KillUnit(B2F)
call DestroyUbersplat(B_F)
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
if U38==2 then
call DestroyEffect(AddSpecialEffect(BAF(id),GetUnitX(WI7),GetUnitY(WI7)))
call DestroyEffect(AddSpecialEffect(BZF(id),x,y))
call SetUnitX(WI7,x)
call SetUnitY(WI7,y)
call PauseUnit(WI7,true)
call PauseUnit(WI7,false)
call Y67(x,y,$F0)
set IN4=WI7
call ExecuteFunc("C7F")
endif
endif
set hq[832+GetPlayerId(GetOwningPlayer(WI7))]=0
set t=null
set WI7=null
set B5F=null
set B2F=null
set B_F=null
return false
endfunction
function C8F takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit WX7=(LoadUnitHandle(L7,(I97),($E)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local real x=(LoadReal(L7,(I97),(6)))
local real y=(LoadReal(L7,(I97),(7)))
local unit C9F=(LoadUnitHandle(L7,(I97),(448)))
local unit CDF=(LoadUnitHandle(L7,(I97),(447)))
local ubersplat ML9=(LoadUbersplatHandle(L7,(I97),($83)))
local integer WF8=(LoadInteger(L7,(I97),(34)))
local real BZ7=(LoadReal(L7,(I97),(57)))
local real VM8=(LoadReal(L7,(I97),(442)))
local integer id=GetPlayerId(GetOwningPlayer(WX7))
local boolean H57=false
local integer i=0
local integer VV8
if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
if GetSpellAbilityId()==1093808945 or GetSpellAbilityId()==1093816630 then
call DestroyEffect((LoadEffectHandle(L7,(I97),($AF))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B1))))
call SaveInteger(L7,(GetHandleId((WX7))),((4256)),(2))
call KillUnit(C9F)
call KillUnit(CDF)
call DestroyUbersplat(ML9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call UnitRemoveType(IH7,UNIT_TYPE_PEON)
set h8[$B0+id]=null
endif
elseif GetTriggerEventId()==EVENT_UNIT_DEATH then
call DestroyEffect((LoadEffectHandle(L7,(I97),($AF))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B1))))
call UnitRemoveType(IH7,UNIT_TYPE_PEON)
call SaveInteger(L7,(GetHandleId((WX7))),((4256)),(2))
call KillUnit(C9F)
call KillUnit(CDF)
call DestroyUbersplat(ML9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set h8[$B0+id]=null
else
call DestroyEffect((LoadEffectHandle(L7,(I97),($AF))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B1))))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",GetUnitX(WX7),GetUnitY(WX7)))
call SaveInteger(L7,(GetHandleId((WX7))),((4256)),(2))
call KillUnit(C9F)
call KillUnit(CDF)
call DestroyUbersplat(ML9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call UnitRemoveType(IH7,UNIT_TYPE_PEON)
call Y67(GetUnitX(IH7)-1,GetUnitY(IH7)-1,$F0)
call SetUnitX(WX7,GetUnitX(IH7)-1)
call SetUnitY(WX7,GetUnitY(IH7)-1)
call PauseUnit(WX7,true)
call PauseUnit(WX7,false)
set IN4=WX7
call ExecuteFunc("C7F")
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",GetUnitX(WX7),GetUnitY(WX7)))
set h8[$B0+id]=null
endif
set t=null
set WX7=null
set C9F=null
set CDF=null
set ML9=null
set IH7=null
return false
endfunction
function CEF takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local location l
local real x
local real y
local real a
local trigger t
local integer OB7
local unit B5F
local unit B2F
local ubersplat B_F
local integer id=GetPlayerId(GetOwningPlayer(WI7))
local integer U38
local real CFF
if(WY4 and GetSpellAbilityId()==1093743415)then
set WY4=false
call SetUnitState(WI7,UNIT_STATE_MANA,GetUnitState(WI7,UNIT_STATE_MANA)+75)
return
endif
set t=CreateTrigger()
set OB7=GetHandleId(t)
call SaveInteger(L7,(GetHandleId((WI7))),((4256)),(1))
if m5==null then
set l=GetSpellTargetLoc()
set x=GetLocationX(l)
set y=GetLocationY(l)
if GetSpellAbilityId()==1093751349 then
if x==TW4[id]and y==TX4[id]then
if TV7(GetOwningPlayer(WI7))then
set x=GetUnitX(IZ4)
set y=GetUnitY(IZ4)
else
set x=GetUnitX(JA4)
set y=GetUnitY(JA4)
endif
endif
endif
set m5=BCF(WI7,x,y)
call RemoveLocation(l)
else
set x=GetUnitX(m5)
set y=GetUnitY(m5)
endif
if KF7(x,y,GetUnitX(m5),GetUnitY(m5))>o4 then
set a=Atan2(y-GetUnitY(m5),x-GetUnitX(m5))
set x=GetUnitX(m5)+o4*Cos(a)
set y=GetUnitY(m5)+o4*Sin(a)
elseif KF7(x,y,GetUnitX(m5),GetUnitY(m5))<50 then
set a=Atan2(y-GetUnitY(m5),x-GetUnitX(m5))
set x=GetUnitX(m5)+120*Cos(a)
set y=GetUnitY(m5)+120*Sin(a)
endif
if IsPointInRegion(IU4,x,y) then
set a=Atan2(y-GetUnitY(m5),x-GetUnitX(m5))
set x=GetUnitX(m5)+$C8*Cos(a)
set y=GetUnitY(m5)+$C8*Sin(a)
endif
set x=X17(x)
set y=X07(y)
if(IsUnitAlly(WI7,GetLocalPlayer())and GetLocalPlayer()!=GetOwningPlayer(WI7))or(V8 and(GetLocalPlayer()==KX4 or GetLocalPlayer()==KY4))then
call PingMinimapEx(x,y,3,$FF,$FF,$FF,false)
endif
set B2F=CreateUnit(GetOwningPlayer(WI7),BWF(id),x,y,0)
set B5F=CreateUnit(GetOwningPlayer(WI7),BYF(id),GetUnitX(WI7),GetUnitY(WI7),0)
set B_F=CreateUbersplat(GetUnitX(WI7),GetUnitY(WI7),"SCTP",$FF,$FF,$FF,$FF,false,false)
if IsUnitVisible(WI7,GetLocalPlayer()) then
call SetUbersplatRenderAlways(B_F,true)
else
call SetUbersplatRenderAlways(B_F,false)
endif
set U38=BVF(GetPlayerId(GetOwningPlayer(WI7)),x,y)
if U38>0 then
set U38=U38+1
endif
set CFF=2.5+.5*U38
call BUF(GetPlayerId(GetOwningPlayer(WI7)),x,y)
if U38>0 then
call SetUnitAnimationByIndex(B5F,2)
call SetUnitAnimationByIndex(B2F,2)
endif
call TriggerRegisterTimerEvent(t,CFF-3,false)
call TriggerRegisterTimerEvent(t,CFF,false)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function B0F))
call Y57(GetOwningPlayer(WI7),CFF,x,y,$C8)
call SaveUnitHandle(L7,(OB7),(447),(B2F))
call SaveUnitHandle(L7,(OB7),(448),(B5F))
call SaveReal(L7,(OB7),(6),((x)*1.))
call SaveReal(L7,(OB7),(7),((y)*1.))
call NQ7(OB7,"OriginalTime",TimerGetElapsed(W))
call SaveReal(L7,(OB7),(57),((CFF)*1.))
call SaveUbersplatHandle(L7,(OB7),($83),(B_F))
call SaveUnitHandle(L7,(OB7),($E),(WI7))
call SaveInteger(L7,(OB7),(34),(0))
call ZW7(WI7,VS4,x,y,$960)
set h8[$B0+id]=m5
set WI7=null
set m5=null
set B5F=null
set B2F=null
set l=null
set t=null
set B_F=null
endfunction
function CGF takes nothing returns nothing
local unit WX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local location l
local real x
local real y
local real a
local trigger t
local integer I97
local unit C9F
local unit CDF
local ubersplat ML9
local integer id=GetPlayerId(GetOwningPlayer(WX7))
local integer WF8
local real CHF
set t=CreateTrigger()
set I97=GetHandleId(t)
if IH7==null then
set l=GetSpellTargetLoc()
set x=GetLocationX(l)
set y=GetLocationY(l)
if x==TW4[id]and y==TX4[id]then
if TV7(GetOwningPlayer(WX7))then
set x=GetUnitX(IZ4)
set y=GetUnitY(IZ4)
else
set x=GetUnitX(JA4)
set y=GetUnitY(JA4)
endif
endif
if GetSpellAbilityId()==1093816630 then
set IH7=B11F(WX7,x,y)
else
set IH7=B1F(WX7,x,y)
endif
call RemoveLocation(l)
endif
set x=GetUnitX(IH7)
set y=GetUnitY(IH7)
if(IsUnitAlly(WX7,GetLocalPlayer())and GetLocalPlayer()!=GetOwningPlayer(WX7))or(V8 and(GetLocalPlayer()==KX4 or GetLocalPlayer()==KY4))then
call PingMinimapEx(x,y,3,$FF,$FF,$FF,false)
endif
set ML9=CreateUbersplat(GetUnitX(WX7),GetUnitY(WX7),"SCTP",$FF,$FF,$FF,$FF,false,false)
if IsUnitVisible(WX7,GetLocalPlayer()) then
call SetUbersplatRenderAlways(ML9,true)
else
call SetUbersplatRenderAlways(ML9,false)
endif
set CHF=3
call UnitAddType(IH7,UNIT_TYPE_PEON)
call TriggerRegisterTimerEvent(t,CHF,false)
call TriggerRegisterUnitEvent(t,WX7,EVENT_UNIT_SPELL_ENDCAST)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function C8F))
call Y57(GetOwningPlayer(WX7),CHF,x,y,$C8)
call SaveReal(L7,(I97),(6),((x)*1.))
call SaveReal(L7,(I97),(7),((y)*1.))
call SaveReal(L7,(I97),(442),(((TimerGetElapsed(W)))*1.))
call SaveReal(L7,(I97),(57),((CHF)*1.))
call SaveUbersplatHandle(L7,(I97),($83),(ML9))
call SaveUnitHandle(L7,(I97),($E),(WX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveInteger(L7,(I97),(34),(0))
call SaveEffectHandle(L7,(I97),($AF),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",WX7,"origin")))
call SaveEffectHandle(L7,(I97),($B0),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportCaster.mdl",WX7,"origin")))
call SaveEffectHandle(L7,(I97),($B1),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",IH7,"origin")))
call ZW7(WX7,VS4,x,y,$960)
set WX7=null
set IH7=null
set C9F=null
set CDF=null
set l=null
set t=null
set ML9=null
endfunction
function CIF takes nothing returns nothing
if(GetSpellAbilityId()==1093751349 or GetSpellAbilityId()==1093743415)and KW7(GetTriggerUnit())==false then
call CEF()
endif
if GetSpellAbilityId()==1093808945 or GetSpellAbilityId()==1093816630 then
call CGF()
endif
endfunction
function CJF takes nothing returns nothing
if GetSpellAbilityId()==1093743415 and GetSpellTargetItem()!=null then
call IssueImmediateOrderById(GetTriggerUnit(),$D0004)
if TV7(GetOwningPlayer(GetTriggerUnit()))then
call UnitUseItemTarget(GetTriggerUnit(),MV7(GetTriggerUnit(),YC),IZ4)
set WY4=true
else
call UnitUseItemTarget(GetTriggerUnit(),MV7(GetTriggerUnit(),YC),JA4)
set WY4=true
endif
endif
endfunction
function CKF takes nothing returns nothing
if E_7==(LoadInteger(L7,(GetHandleId(GetEnumUnit())),(784)))then
call KillUnit(GetEnumUnit())
endif
endfunction
function CMF takes nothing returns boolean
local integer i=GetUnitTypeId(GetFilterUnit())
return i==1848651848 or i==1848651847 or i==1848651851 or i==1848651850 or i==1848651841 or i==1848651830
endfunction
function CNF takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit COF
local unit CPF
local integer CQF
local integer CRF
local group g=WS7()
local real a=GetUnitFacing(ZX7)*bj_DEGTORAD
local real x1=GetUnitX(ZX7)+50*Cos(a)
local real y1=GetUnitY(ZX7)+50*Sin(a)
local real x2=GetUnitX(ZX7)+50*Cos(a)
local real y2=GetUnitY(ZX7)+50*Sin(a)
if GetSpellAbilityId()==1093683266 then
set CQF=1848651848
set CRF=1848651850
elseif GetSpellAbilityId()==1093682227 then
set CQF=1848651847
set CRF=1848651841
elseif GetSpellAbilityId()==1093682246 then
set CQF=1848651851
set CRF=1848651830
endif
set E_7=GetUnitTypeId(ZX7)
call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(GetTriggerUnit()),Condition(function CMF))
call ForGroup(g,function CKF)
call WR7(g)
set COF=CreateUnit(GetOwningPlayer(ZX7),CQF,x1,y1,GetUnitFacing(ZX7))
call SaveInteger(L7,(GetHandleId(COF)),(784),(E_7))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",COF,"origin"))
call UnitApplyTimedLife(COF,1112820806,35)
set CPF=CreateUnit(GetOwningPlayer(ZX7),CRF,x2,y2,GetUnitFacing(ZX7))
call SaveInteger(L7,(GetHandleId(CPF)),(784),(E_7))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",CPF,"origin"))
call UnitApplyTimedLife(CPF,1112820806,35)
set g=null
set COF=null
set CPF=null
set ZX7=null
endfunction
function CSF takes nothing returns nothing
if GetSpellAbilityId()==1093683266 or GetSpellAbilityId()==1093682227 or GetSpellAbilityId()==1093682246 then
call CNF()
endif
endfunction
function CTF takes nothing returns nothing
if GetSpellAbilityId()==1093748304 then
call YS7("Abilities\\Spells\\Items\\VampiricPotion\\VampPotionCaster.mdl",GetTriggerUnit(),"origin",3.5)
call Z67(GetTriggerUnit(),1093747534,1,3.5)
endif
endfunction
function CUF takes nothing returns boolean
return(OT7(GetFilterUnit(),"4323"))
endfunction
function CVF takes nothing returns nothing
local group g
local unit u
if GetSpellAbilityId()==1094935400 then
set g=WS7()
call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(GetTriggerUnit()),Condition(function CUF))
set u=FirstOfGroup(g)
call WR7(g)
if u!=null then
call KillUnit(u)
endif
call OV7(GetSpellTargetUnit(),"4323")
call UnitAddAbility(GetSpellTargetUnit(),1097167976)
call UnitAddAbility(GetSpellTargetUnit(),1094939243)
call YP7(GetSpellTargetUnit())
set g=null
set u=null
endif
endfunction
function CWF takes integer i returns integer
if i==OK4 then
return OS4
endif
if i==OM4 then
return OT4
endif
if i==ON4 then
return OU4
endif
if i==OO4 then
return OV4
endif
if i==OP4 then
return OW4
endif
if i==OQ4 then
return OX4
endif
if i==OR4 then
return OY4
endif
return 0
endfunction
function CXF takes integer i returns integer
if i==OK4 then
return $A
endif
if i==OM4 then
return 9
endif
if i==ON4 then
return 8
endif
if i==OO4 then
return 7
endif
if i==OP4 then
return 6
endif
if i==OQ4 then
return 5
endif
if i==OR4 then
return 4
endif
return 0
endfunction
function CYF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
if XH7(WI7)==false and WI7!=null then
call SetUnitScale(WI7,XX7(WI7)*CS,XX7(WI7)*CS,XX7(WI7)*CS)
endif
call NM7(OB7)
call OZ7(t)
set t=null
set WI7=null
return false
endfunction
function CZF takes nothing returns nothing
local unit WX7=GetTriggerUnit()
local unit BB7=CreateUnit(GetOwningPlayer(WX7),1697656901,GetUnitX(WX7),GetUnitY(WX7),0)
local trigger t=CreateTrigger()
local real BZ7=CXF(GetSpellAbilityId())
call ZH7(WX7,OZ4,BZ7)
call UnitMakeAbilityPermanent(WX7,true,OZ4)
call SetPlayerAbilityAvailable(GetOwningPlayer(WX7),OZ4,false)
call UnitAddAbility(BB7,CWF(GetSpellAbilityId()))
call IssueTargetOrderById(BB7,$D00DA,WX7)
call YW8(WX7,0,0)
if KW7(WX7)then
call ZG7(WX7,BZ7,3)
else
call ZG7(WX7,BZ7,1.4)
endif
call TriggerRegisterTimerEvent(t,BZ7+7.,false)
call TriggerAddCondition(t,Condition(function CYF))
call NT7(GetHandleId(t),"Hero",WX7)
set t=null
set WX7=null
set BB7=null
endfunction
function CAF takes nothing returns nothing
if CWF(GetSpellAbilityId())>0 then
call CZF()
endif
endfunction
function CBF takes nothing returns nothing
if GetSpellAbilityId()==1093677655 then
call UnitResetCooldown(GetTriggerUnit())
endif
endfunction
function CCF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit EK9=O77(OB7,"chicken")
local integer ES9=OM7(OB7,"newability")
local integer ET9=OM7(OB7,"itemId0")
local integer EU9=OM7(OB7,"itemId1")
local integer EV9=OM7(OB7,"itemId2")
local integer EW9=OM7(OB7,"itemId3")
local integer EX9=OM7(OB7,"itemId4")
local integer EY9=OM7(OB7,"itemId5")
local player EZ9=O97(OB7,"pPlayer0")
local player EA9=O97(OB7,"pPlayer1")
local player EB9=O97(OB7,"pPlayer2")
local player EC9=O97(OB7,"pPlayer3")
local player E39=O97(OB7,"pPlayer4")
local player E69=O97(OB7,"pPlayer5")
local integer EL9=OM7(OB7,"charges0")
local integer E19=OM7(OB7,"charges1")
local integer E09=OM7(OB7,"charges2")
local integer E59=OM7(OB7,"charges3")
local integer E29=OM7(OB7,"charges4")
local integer E_9=OM7(OB7,"charges5")
call DisableTrigger(H94)
if GetTriggerEvalCount(t)==1 then
call UnitAddAbility(EK9,ES9)
if OT[GetPlayerId(GetOwningPlayer(EK9))]==false then
call UnitRemoveType(EK9,UNIT_TYPE_PEON)
else
call UnitAddType(EK9,UNIT_TYPE_PEON)
endif
else
if ET9>0 then
set HA4=CreateItem(ET9,GetUnitX(EK9),GetUnitY(EK9))
call UnitAddItem(EK9,HA4)
call SetItemPlayer(HA4,EZ9,false)
call SetItemUserData(HA4,1)
endif
if EL9>0 then
call SetItemCharges(HA4,EL9)
endif
if EU9>0 then
set HA4=CreateItem(EU9,GetUnitX(EK9),GetUnitY(EK9))
call UnitAddItem(EK9,HA4)
call SetItemPlayer(HA4,EA9,false)
call SetItemUserData(HA4,1)
endif
if E19>0 then
call SetItemCharges(HA4,E19)
endif
if EV9>0 then
set HA4=CreateItem(EV9,GetUnitX(EK9),GetUnitY(EK9))
call UnitAddItem(EK9,HA4)
call SetItemPlayer(HA4,EB9,false)
call SetItemUserData(HA4,1)
endif
if E09>0 then
call SetItemCharges(HA4,E09)
endif
if EW9>0 then
set HA4=CreateItem(EW9,GetUnitX(EK9),GetUnitY(EK9))
call UnitAddItem(EK9,HA4)
call SetItemPlayer(HA4,EC9,false)
call SetItemUserData(HA4,1)
endif
if E59>0 then
call SetItemCharges(HA4,E59)
endif
if EX9>0 then
set HA4=CreateItem(EX9,GetUnitX(EK9),GetUnitY(EK9))
call UnitAddItem(EK9,HA4)
call SetItemPlayer(HA4,E39,false)
call SetItemUserData(HA4,1)
endif
if E29>0 then
call SetItemCharges(HA4,E29)
endif
if EY9>0 then
set HA4=CreateItem(EY9,GetUnitX(EK9),GetUnitY(EK9))
call UnitAddItem(EK9,HA4)
call SetItemPlayer(HA4,E69,false)
call SetItemUserData(HA4,1)
endif
if E_9>0 then
call SetItemCharges(HA4,E_9)
endif
if OT[GetPlayerId(GetOwningPlayer(EK9))]==false then
call UnitRemoveType(EK9,UNIT_TYPE_PEON)
else
call UnitAddType(EK9,UNIT_TYPE_PEON)
endif
call SetUnitFlyHeight(EK9,$F0,0)
call NM7(OB7)
call OZ7(t)
endif
call EnableTrigger(H94)
set t=null
set EK9=null
set EZ9=null
set EA9=null
set EB9=null
set EC9=null
set E39=null
set E69=null
return false
endfunction
function C3F takes unit EK9 returns nothing
local integer F79=GetUnitTypeId(EK9)
local real x=GetUnitX(EK9)
local real y=GetUnitY(EK9)
local item F89
local item F99
local item FD9
local item FE9
local item FF9
local item FG9
local player EZ9
local player EA9
local player EB9
local player EC9
local player E39
local player E69
local integer ET9
local integer EU9
local integer EV9
local integer EW9
local integer EX9
local integer EY9
local integer EL9=-1
local integer E19=-1
local integer E09=-1
local integer E59=-1
local integer E29=-1
local integer E_9=-1
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local integer ES9
local item QU8
local integer i
local item C6F
set i=0
loop
exitwhen i>5
set C6F=UnitItemInSlot(EK9,i)
if KY7(C6F)==EW then
call UnitRemoveItem(EK9,C6F)
endif
set i=i+1
endloop
set F89=UnitItemInSlot(EK9,0)
set F99=UnitItemInSlot(EK9,1)
set FD9=UnitItemInSlot(EK9,2)
set FE9=UnitItemInSlot(EK9,3)
set FF9=UnitItemInSlot(EK9,4)
set FG9=UnitItemInSlot(EK9,5)
set ET9=GetItemTypeId(F89)
set EU9=GetItemTypeId(F99)
set EV9=GetItemTypeId(FD9)
set EW9=GetItemTypeId(FE9)
set EX9=GetItemTypeId(FF9)
set EY9=GetItemTypeId(FG9)
set EZ9=GetItemPlayer(F89)
set EA9=GetItemPlayer(F99)
set EB9=GetItemPlayer(FD9)
set EC9=GetItemPlayer(FE9)
set E39=GetItemPlayer(FF9)
set E69=GetItemPlayer(FG9)
set QU8=F89
if GetItemType(QU8)==ITEM_TYPE_ARTIFACT or Z88(KY7(QU8))then
set EL9=GetItemCharges(QU8)
endif
set QU8=F99
if GetItemType(QU8)==ITEM_TYPE_ARTIFACT or Z88(KY7(QU8))then
set E19=GetItemCharges(QU8)
endif
set QU8=FD9
if GetItemType(QU8)==ITEM_TYPE_ARTIFACT or Z88(KY7(QU8))then
set E09=GetItemCharges(QU8)
endif
set QU8=FE9
if GetItemType(QU8)==ITEM_TYPE_ARTIFACT or Z88(KY7(QU8))then
set E59=GetItemCharges(QU8)
endif
set QU8=FF9
if GetItemType(QU8)==ITEM_TYPE_ARTIFACT or Z88(KY7(QU8))then
set E29=GetItemCharges(QU8)
endif
set QU8=FG9
if GetItemType(QU8)==ITEM_TYPE_ARTIFACT or Z88(KY7(QU8))then
set E_9=GetItemCharges(QU8)
endif
call KX7(F89)
call KX7(F99)
call KX7(FD9)
call KX7(FE9)
call KX7(FF9)
call KX7(FG9)
if TV7(GetOwningPlayer(EK9))then
set ES9=1395667017
else
set ES9=1395667018
endif
if GetRandomInt(1,3)==1 then
set ES9=1395667034
endif
call NZ7(OB7,"pPlayer0",EZ9)
call NZ7(OB7,"pPlayer1",EA9)
call NZ7(OB7,"pPlayer2",EB9)
call NZ7(OB7,"pPlayer3",EC9)
call NZ7(OB7,"pPlayer4",E39)
call NZ7(OB7,"pPlayer5",E69)
call NP7(OB7,"itemId0",ET9)
call NP7(OB7,"itemId1",EU9)
call NP7(OB7,"itemId2",EV9)
call NP7(OB7,"itemId3",EW9)
call NP7(OB7,"itemId4",EX9)
call NP7(OB7,"itemId5",EY9)
call NP7(OB7,"charges0",EL9)
call NP7(OB7,"charges1",E19)
call NP7(OB7,"charges2",E09)
call NP7(OB7,"charges3",E59)
call NP7(OB7,"charges4",E29)
call NP7(OB7,"charges5",E_9)
call NT7(OB7,"chicken",EK9)
call NP7(OB7,"newability",ES9)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function CCF))
set t=null
set EK9=null
set F89=null
set F99=null
set FD9=null
set FE9=null
set FF9=null
set FG9=null
set EZ9=null
set EA9=null
set EB9=null
set EC9=null
set E39=null
set E69=null
endfunction
function CLF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(O77(I97,"Source"))
local item C1F=MV7(ZX7,ZU[EX4])
if C1F==null then
set C1F=MV7(ZX7,BU[EX4])
endif
if C1F!=null then
call RemoveItem(C1F)
call C3F(ZX7)
else
call X37(GetOwningPlayer(ZX7),GetObjectName(1848652369))
endif
call NM7(I97)
call OZ7(t)
set t=null
set ZX7=null
return false
endfunction
function C0F takes unit ZX7 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call EF9(ZX7)
call TriggerRegisterTimerEvent(t,.05,false)
call TriggerAddCondition(t,Condition(function CLF))
call NT7(I97,"Source",ZX7)
set t=null
endfunction
function C5F takes nothing returns boolean
if GetSpellAbilityId()==1093683012 then
call C0F(GetTriggerUnit())
endif
return false
endfunction
function C2F takes nothing returns boolean
local unit WX7=GetTriggerUnit()
local item D88=GetManipulatedItem()
local integer id=GetItemTypeId(D88)
local integer i
if(id==ZU[XC]or id==ZU[F6]or id==ZU[FF6])and IsUnitType(WX7,UNIT_TYPE_HERO) then
set TW4[GetPlayerId(GetOwningPlayer(WX7))]=GetItemX(D88)
set TX4[GetPlayerId(GetOwningPlayer(WX7))]=GetItemY(D88)
endif
call AHF(WX7,D88)
call AIF(WX7,D88)
if(GetItemTypeId(D88)==ZU[DK4]or GetItemTypeId(D88)==ZU[DM4])and KW7(WX7)then
call UnitRemoveItem(WX7,D88)
elseif GetItemTypeId(D88)==ZU[DT4]and IsUnitType(WX7,UNIT_TYPE_HERO) then
set i=(LoadInteger(L7,(GetHandleId(WX7)),(750)))
if i>0 then
if(LoadBoolean(L7,(GetHandleId(WX7)),(751)))==false then
call SaveBoolean(L7,(GetHandleId(WX7)),(751),(true))
call SetItemCharges(D88,i)
endif
endif
elseif GetItemTypeId(D88)==ZU[X0]and GetUnitTypeId(WX7)!=1848651852 and NX4==false then
set NW4=WX7
set NX4=true
call C27("AegisOn",GetPlayerId(GetOwningPlayer(WX7)))
call VV7(bj_FORCE_ALL_PLAYERS,10.,Q[GetPlayerId(GetOwningPlayer(WX7))]+GetUnitName(WX7)+"|r "+GetObjectName(1848657233))
elseif GetItemTypeId(D88)==ZU[EX4]and KU7(WX7)then
call C0F(WX7)
elseif GetItemTypeId(D88)==ZU[G64]and GetUnitTypeId(WX7)==1164799855 then
call SetPlayerTechResearched(GetOwningPlayer(WX7),1378889802,1)
elseif GetItemTypeId(D88)==ZU[G04]and GetUnitTypeId(WX7)==1211117641 then
set IN4=WX7
call ExecuteFunc("XSD")
elseif GetItemTypeId(D88)==ZU[GB4]and GetUnitTypeId(WX7)==1432580716 then
call UnitAddAbility(WX7,1093815106)
call UnitRemoveAbility(WX7,1093815106)
call AddUnitAnimationProperties(WX7,"upgrade",true)
call SetPlayerTechResearched(GetOwningPlayer(WX7),1378889803,1)
endif
set WX7=null
set D88=null
return false
endfunction
function C_F takes nothing returns nothing
local unit L4F=GetTriggerUnit()
local item L7F=MV7(L4F,ZU[EX4])
if L7F==null then
set L7F=MV7(L4F,BU[EX4])
endif
if L7F!=null then
call KX7(L7F)
call UnitRemoveAbility(L4F,1093686866)
call UnitAddAbility(L4F,1093686869)
call SetUnitState(L4F,UNIT_STATE_MANA,400)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",L4F,"origin"))
else
call X37(GetOwningPlayer(L4F),(GetObjectName((1848652369))))
endif
set L4F=null
endfunction
function L8F takes nothing returns nothing
if GetSpellAbilityId()==1093686866 then
call C_F()
endif
endfunction
function L9F takes nothing returns nothing
local unit u=GetEnumUnit()
local integer i=0
local player p=GetOwningPlayer(GetTriggerUnit())
local item QU8
local integer id=GetPlayerId(p)
loop
exitwhen i>5
set QU8=UnitItemInSlot(u,i)
if QU8!=null and GetItemPlayer(QU8)==p then
call UnitRemoveItem(u,QU8)
call SetItemPosition(QU8,KV4[id],KW4[id])
endif
set i=i+1
endloop
set u=null
set QU8=null
endfunction
function LDF takes nothing returns nothing
local item QU8=GetEnumItem()
local unit u=OI4
local player p=GetOwningPlayer(u)
local integer id=GetPlayerId(p)
if GetWidgetLife(QU8)>0 and GetItemPlayer(QU8)==p and IsItemVisible(QU8) then
call SetItemPosition(QU8,KV4[id],KW4[id])
call UnitAddItem(KU4[id],QU8)
endif
set QU8=null
set u=null
set p=null
endfunction
function LEF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit u=O77(OB7,"u")
set OI4=u
if TV7(GetOwningPlayer(OI4))then
call EnumItemsInRect(OD,Condition(function TO7),function LDF)
else
call EnumItemsInRect(PD,Condition(function TO7),function LDF)
endif
if GetTriggerEvalCount(t)==2 then
call NM7(OB7)
call OZ7(t)
endif
set t=null
set u=null
return false
endfunction
function LFF takes nothing returns boolean
return KW7(GetFilterUnit())
endfunction
function Y6E takes nothing returns nothing
local unit u=GetTriggerUnit()
local integer i=0
local group g=WS7()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),$514,Condition(function LFF))
call ForGroup(g,function L9F)
call WR7(g)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function LEF))
call NT7(OB7,"u",u)
set u=null
set g=null
endfunction
function LGF takes nothing returns nothing
if GetSpellAbilityId()==1093743684 then
call Y6E()
endif
endfunction
function LHF takes nothing returns nothing
local unit u=GetTriggerUnit()
local integer i=0
local item QU8
local integer id=GetPlayerId(GetOwningPlayer(u))
local region r=CreateRegion()
if TV7(GetOwningPlayer(u))then
call RegionAddRect(r,OD)
else
call RegionAddRect(r,PD)
endif
loop
exitwhen i>5
set QU8=UnitItemInSlot(u,i)
if W47(KY7(QU8))==false and KY7(QU8)!=X0 and F_9(QU8)==false then
call UnitRemoveItemFromSlot(u,i)
if(GetUnitTypeId(u)==1852010352 or IsUnitInRegion(r,u))and IsPlayerAlly(GetItemPlayer(QU8),GetOwningPlayer(u)) then
set id=GetPlayerId(GetItemPlayer(QU8))
call SetItemPosition(QU8,KV4[id],KW4[id])
endif
endif
set i=i+1
endloop
call RemoveRegion(r)
set u=null
set r=null
endfunction
function LIF takes nothing returns nothing
if GetSpellAbilityId()==1093743416 or GetSpellAbilityId()==1093743683 then
call LHF()
endif
endfunction
function LJF takes nothing returns nothing
if GetSpellAbilityId()==1093743191 and GetUnitAbilityLevel(GetTriggerUnit(),1114665832)>0 then
call UnitRemoveAbility(GetTriggerUnit(),1114665832)
endif
endfunction
function LKF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call DestroyEffect(OG7(OB7,"FX"))
call NM7(OB7)
call OZ7(t)
else
if C67(GetEventDamage())and IsUnitAlly(GetEventDamageSource(),GetOwningPlayer(GetTriggerUnit()))==false and IsUnitType(GetEventDamageSource(),UNIT_TYPE_STRUCTURE)==false and p3==false then
if IsUnitType(GetEventDamageSource(),UNIT_TYPE_HERO)or GetUnitAbilityLevel(GetEventDamageSource(),1093678162)==0 then
call DisableTrigger(t)
set p3=true
call B67(GetTriggerUnit(),GetEventDamageSource(),3,GetEventDamage())
set p3=false
call EnableTrigger(t)
else
call DisableTrigger(t)
set p3=true
call B67(GetTriggerUnit(),M7[GetPlayerId(GetOwningPlayer(GetEventDamageSource()))],3,GetEventDamage())
set p3=false
call EnableTrigger(t)
endif
endif
endif
set t=null
return false
endfunction
function LMF takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit p5=GetTriggerUnit()
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,4.5,false)
call TriggerAddCondition(t,Condition(function LKF))
call NU7(OB7,"FX",AddSpecialEffectTarget("Abilities\\Spells\\Orc\\SpikeBarrier\\SpikeBarrier.mdl",p5,"chest"))
set t=null
set p5=null
endfunction
function LNF takes nothing returns nothing
if GetSpellAbilityId()==1093743959 then
call LMF()
endif
endfunction
function LOF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
local real a=ON7(OB7,"a")
local real d=ON7(OB7,"d")
local real x=X17(GetUnitX(m5)+d/ $A*Cos(a*bj_DEGTORAD))
local real y=X07(GetUnitY(m5)+d/ $A*Sin(a*bj_DEGTORAD))
if GetTriggerEvalCount(t)==$B or GetTriggerEventId()==EVENT_UNIT_DEATH or OT7(m5,"PowerCogShocked") then
call NM7(OB7)
call OZ7(t)
else
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",x,y))
if OT7(m5,"4306")==false and OT7(m5,"4324")==false and GetUnitAbilityLevel(m5,1110456406)==0 and GetUnitAbilityLevel(m5,1110459975)==0 then
call Y67(x,y,$96)
call SetUnitX(m5,x)
call SetUnitY(m5,y)
endif
endif
set m5=null
set t=null
return false
endfunction
function LPF takes nothing returns nothing
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local real x
local real y
local real d
local real a
local integer i=-1
local boolean LQF=false
if GetSpellTargetItem()!=null then
set m5=GetTriggerUnit()
endif
call O37(m5,"4414",3)
set a=GetUnitFacing(m5)
loop
exitwhen LQF or i==23
set i=i+1
set x=X17(GetUnitX(m5)+(600-i*25)*Cos(a*bj_DEGTORAD))
set y=X07(GetUnitY(m5)+(600-i*25)*Sin(a*bj_DEGTORAD))
if(IsPointInRegion(IU4,((x)*1.),((y)*1.)))==false then
set LQF=true
endif
endloop
set d=KF7(x,y,GetUnitX(m5),GetUnitY(m5))
call TriggerRegisterTimerEvent(t,.04,true)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function LOF))
call NT7(OB7,"Target",m5)
call NQ7(OB7,"a",(a)*1.)
call NQ7(OB7,"d",(d)*1.)
call NS7(OB7,"AI",(TZ7(GetOwningPlayer(m5)))and(IsUnitAlly(m5,GetOwningPlayer(GetTriggerUnit()))))
set m5=null
set t=null
endfunction
function LRF takes nothing returns nothing
if GetSpellAbilityId()==1093744973 and GetUnitTypeId(GetSpellTargetUnit())!=1848651852 then
if IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit())) or OO7(GetHandleId(GetOwningPlayer(GetSpellTargetUnit())),"DisableHelp")==false then
call LPF()
endif
endif
endfunction
function LSF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
if GetTriggerEvalCount(t)>40 or GetTriggerEventId()==EVENT_UNIT_DEATH or WF7(p5)or OT7(p5,"Teleporting")then
call UnitRemoveAbility(p5,1097167980)
call NM7(OB7)
call OZ7(t)
endif
set p5=null
set t=null
return false
endfunction
function LTF takes nothing returns nothing
local unit p5=GetTriggerUnit()
local trigger t
local integer I97
if KW7(p5)==false then
set t=CreateTrigger()
set I97=GetHandleId(t)
call UnitAddAbility(p5,1097167980)
call UnitMakeAbilityPermanent(p5,true,1097167980)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1097167980,false)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function LSF))
call NT7(I97,"Source",p5)
endif
set p5=null
set t=null
endfunction
function LUF takes nothing returns nothing
if GetSpellAbilityId()==1093747011 and WF7(GetTriggerUnit())==false then
call LTF()
endif
endfunction
function LVF takes nothing returns nothing
local unit p5=GetTriggerUnit()
local real x
local real y
if TV7(GetOwningPlayer(p5))then
set x=GetRectCenterX(ED)
set y=GetRectCenterY(ED)
else
set x=GetRectCenterX(L9)
set y=GetRectCenterY(L9)
endif
call IssuePointOrderById(p5,$D0012,x,y)
set p5=null
endfunction
function LWF takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local real x
local real y
if TV7(GetOwningPlayer(ZX7))then
set x=-4533
set y=$486
else
set x=$C76
set y=-35
endif
call IssuePointOrderById(ZX7,$D0012,x,y)
set ZX7=null
endfunction
function LXF takes nothing returns nothing
if GetSpellAbilityId()==1093747027 then
call LVF()
elseif GetSpellAbilityId()==1093815123 then
call LWF()
endif
endfunction
function LYF takes nothing returns nothing
if OT7(GetEnumUnit(),"PipeOfInsightOn") then
call X37(GetOwningPlayer(GetEnumUnit()),GetObjectName(1848652365))
else
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO) then
call O37(GetEnumUnit(),"PipeOfInsightOn",50)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1110458964)==0 and GetUnitAbilityLevel(GetEnumUnit(),1110458965)==0 then
call IssueTargetOrderById(Mw,$D00DA,GetEnumUnit())
endif
endif
endfunction
function LZF takes nothing returns nothing
local unit p5=GetTriggerUnit()
local group g=WS7()
set Mw=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(p5),GetUnitY(p5),0)
call UnitAddAbility(Mw,1093748054)
call GroupEnumUnitsInRange(g,GetUnitX(p5),GetUnitY(p5),925,Condition(function BN7))
call ForGroup(g,function LYF)
call WR7(g)
set p5=null
set g=null
endfunction
function LAF takes nothing returns nothing
if GetSpellAbilityId()==1093748055 then
call LZF()
endif
endfunction
function LBF takes nothing returns nothing
local unit WI7=GetTriggerUnit()
call NS7(GetHandleId(WI7),"MantaBlocked",true)
set WI7=null
endfunction
function LCF takes nothing returns nothing
if(GetSpellAbilityId()==1093681720 or GetSpellAbilityId()==1093752645)and WQ7(GetTriggerUnit()) then
call LBF()
endif
endfunction
function L3F takes integer id returns boolean
return id==1969711215 or id==1970169187 or id==1702061422 or id==1701081721 or id==1966092337 or id==1966092338 or id==1697656918 or id==1697656919 or id==1700946284 or id==1697657398 or id==1970107511 or id==1966092370
endfunction
function L6F takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local unit m5=O77(OB7,"Target")
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>8 then
call DestroyEffect(OG7(OB7,"FX"))
call NM7(OB7)
call OZ7(t)
else
if GetUnitState(m5,UNIT_STATE_LIFE)>(150./8.+.5)then
call SetUnitState(m5,UNIT_STATE_LIFE,GetUnitState(m5,UNIT_STATE_LIFE)-150./8.)
else
set V04[GetPlayerId(GetOwningPlayer(m5))]=true
set E97=true
call B67(p5,m5,1,50)
set V04[GetPlayerId(GetOwningPlayer(m5))]=false
set E97=false
endif
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function LLF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_DAMAGED and(L3F(GetUnitTypeId(GetEventDamageSource()))==false and(GetOwningPlayer(GetEventDamageSource())!=B7 or GetUnitTypeId(GetEventDamageSource())==1848651852)and GetEventDamage()>0)or V14)then
call UnitRemoveAbility(m5,1110459207)
call NM7(OB7)
call OZ7(t)
endif
set t=null
set m5=null
return false
endfunction
function L1F takes nothing returns nothing
local trigger t
local integer OB7
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local unit BB7
local integer i=0
local boolean L0F=false
local boolean L5F=false
local integer VV8
if m5==null then
set m5=GetTriggerUnit()
endif
set BB7=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
loop
exitwhen i>5 or L5F
if KZ7(UnitItemInSlot(p5,i))==DY4 then
set VV8=GetItemCharges(UnitItemInSlot(p5,i))
if VV8>0 then
set L0F=true
set VV8=VV8-1
else
set L5F=true
set L0F=false
endif
endif
set i=i+1
endloop
if L0F then
set t=CreateTrigger()
set OB7=GetHandleId(t)
if IsUnitAlly(m5,GetOwningPlayer(p5)) then
call UnitAddAbility(BB7,1093750093)
call IssueTargetOrderById(BB7,$D0281,m5)
call NT7(OB7,"Target",m5)
call TriggerRegisterTimerEvent(t,L3,false)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function LLF))
else
call NT7(OB7,"Target",m5)
call NT7(OB7,"Source",p5)
call NU7(OB7,"FX",AddSpecialEffectTarget("war3mapImported\\Urn_Enemy.mdx",m5,"overhead"))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function L6F))
endif
endif
set p5=null
set BB7=null
set m5=null
set t=null
endfunction
function L2F takes nothing returns nothing
if GetSpellAbilityId()==1093750095 then
call L1F()
endif
endfunction
function L_F takes nothing returns nothing
local integer i=0
loop
exitwhen i>16
set V04[i]=false
set i=i+1
endloop
endfunction
function D4G takes nothing returns nothing
if YS8(GetEnumUnit())==false then
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093753432,false)
call Z57(GetEnumUnit(),1093753432,1,X64,1110459480)
endif
endfunction
function D7G takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local integer i=0
local boolean D8G=false
local boolean D9G=false
local integer VV8
local group g
set g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),925,Condition(function AD7))
call ForGroup(g,function D4G)
call WR7(g)
set g=null
set ZX7=null
endfunction
function DDG takes nothing returns nothing
if GetSpellAbilityId()==1093753431 then
call D7G()
endif
endfunction
function DEG takes unit u returns boolean
local integer HB7=GetUnitTypeId(u)
return HB7==1211122232 or HB7==1848657482 or HB7==1848657481 or HB7==1848657462 or HB7==1848657480 or HB7==1966092371
endfunction
function DFG takes unit u returns boolean
local integer id=GetUnitTypeId(u)
return VS7(id)
endfunction
function DGG takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),XL4)and XH7(GetFilterUnit())==false and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) or IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE) or DFG(GetFilterUnit()))and DEG(GetFilterUnit())==false)!=null
endfunction
function DHG takes unit ZX7 returns boolean
local group g=WS7()
local boolean D8G
set XL4=GetOwningPlayer(ZX7)
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),$41A,Condition(function DGG))
set D8G=FirstOfGroup(g)!=null
call WR7(g)
return D8G
endfunction
function DIG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local group g
local integer WF8
local boolean DJG
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if GetAttacker()==ZX7 then
call UnitRemoveAbility(ZX7,1093808204)
call UnitRemoveAbility(ZX7,1093808211)
call UnitRemoveAbility(ZX7,1110459698)
call UnitRemoveAbility(ZX7,1110456665)
if((LoadInteger(L7,(GetHandleId((ZX7))),((4302))))==1)==false then
call UnitSetUsesAltIcon(ZX7,false)
endif
call SaveInteger(L7,(GetHandleId((ZX7))),((4420)),(2))
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
else
set DJG=(LoadBoolean(L7,(I97),(671)))
set WF8=(LoadInteger(L7,(I97),(34)))
set WF8=WF8+1
call SaveInteger(L7,(I97),(34),(WF8))
set g=WS7()
set XL4=GetOwningPlayer(ZX7)
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),$41A,Condition(function DGG))
if GetUnitAbilityLevel(ZX7,1110456665)>0 then
call SaveBoolean(L7,(I97),(671),(true))
elseif DJG then
call SaveBoolean(L7,(I97),(671),(false))
call UnitRemoveAbility(ZX7,1093808204)
call XF7(ZX7,1093808204)
endif
if WF8>350 or FirstOfGroup(g)!=null then
call UnitRemoveAbility(ZX7,1093808204)
call UnitRemoveAbility(ZX7,1093808211)
call UnitRemoveAbility(ZX7,1110459698)
call UnitRemoveAbility(ZX7,1110456665)
if((LoadInteger(L7,(GetHandleId((ZX7))),((4302))))==1)==false and((LoadInteger(L7,(GetHandleId((ZX7))),((4421))))==1)==false then
call UnitSetUsesAltIcon(ZX7,false)
endif
call SaveInteger(L7,(GetHandleId((ZX7))),((4420)),(2))
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
call WR7(g)
endif
set t=null
set ZX7=null
set g=null
return false
endfunction
function DKG takes nothing returns nothing
local unit ZX7=GetEnumUnit()
local trigger t
local integer I97
if TX7(GetOwningPlayer(ZX7))and DHG(ZX7)==false then
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(ZX7))==false and WG7(GetLocalPlayer())==false then
call UnitSetUsesAltIcon(ZX7,true)
endif
call XF7(ZX7,1093808204)
call UnitMakeAbilityPermanent(ZX7,true,1093808204)
if YS8(ZX7)==false then
call XF7(ZX7,1093808211)
call UnitMakeAbilityPermanent(ZX7,true,1093808211)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093808211,false)
endif
set t=CreateTrigger()
set I97=GetHandleId(t)
call SaveInteger(L7,(I97),(34),(0))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveBoolean(L7,(I97),(671),(false))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("war3mapImported\\SmokeOfDeceit.mdx",ZX7,"chest")))
call SaveInteger(L7,(GetHandleId((ZX7))),((4420)),(1))
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function DIG))
set t=null
endif
set ZX7=null
endfunction
function DMG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local group g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),$4C9,Condition(function A97))
call ForGroup(g,function DKG)
call WR7(g)
set ZX7=null
set g=null
endfunction
function DNG takes nothing returns nothing
if GetSpellAbilityId()==1093808182 then
call DMG()
endif
endfunction
function InitTrig_Smoke_of_Deceit takes nothing returns nothing
call SetAltMinimapIcon("war3mapImported\\black.blp")
endfunction
function DOG takes nothing returns nothing
if YS8(GetEnumUnit())==false then
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093810246,false)
call Z57(GetEnumUnit(),1093810246,1,ZP4,1110459729)
endif
endfunction
function DPG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local group g=WS7()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
call GroupEnumUnitsInRange(g,x,y,575,Condition(function AW7))
call ForGroup(g,function DOG)
call WR7(g)
call DestroyEffect(AddSpecialEffect("war3mapImported\\DarkLightningNova.mdx",x,y))
set ZX7=null
set g=null
endfunction
function DQG takes nothing returns nothing
if GetSpellAbilityId()==1093810244 then
call DPG()
endif
endfunction
function DRG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
call UnitAddAbility(BB7,1093815091)
call IssueTargetOrderById(BB7,$D006B,IH7)
set ZX7=null
set IH7=null
set BB7=null
endfunction
function DSG takes nothing returns nothing
if GetSpellAbilityId()==1093813569 and WQ7(GetSpellTargetUnit())==false then
call DRG()
endif
endfunction
function DTG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local integer WF8=(LoadInteger(L7,(I97),(34)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH or WF8==$A or(GetTriggerEventId()==EVENT_UNIT_DAMAGED and GetEventDamage()>20)then
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
set WF8=WF8+1
call SaveInteger(L7,(I97),(34),(WF8))
call SetUnitState(ZX7,UNIT_STATE_LIFE,GetUnitState(ZX7,UNIT_STATE_LIFE)+17)
endif
set t=null
set ZX7=null
return false
endfunction
function DUG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function DTG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveInteger(L7,(I97),(34),(0))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("war3mapImported\\TranquilBootsHeal.mdx",ZX7,"origin")))
set ZX7=null
set t=null
endfunction
function DVG takes nothing returns nothing
if GetSpellAbilityId()==1093815089 then
call DUG()
endif
endfunction
function DWG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real x=(LoadReal(L7,(I97),(6)))
local real y=(LoadReal(L7,(I97),(7)))
local unit BB7
if GetUnitX(ZX7)!=x or GetUnitY(ZX7)!=y or(GetUnitAbilityLevel(ZX7,1110460216)==0 and GetTriggerEvalCount(t)>R2I(2.6/.05))then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call OX7(ZX7,"ShadowAmu|4330")
call UnitRemoveAbility(ZX7,1110460214)
call UnitRemoveAbility(ZX7,1110460216)
elseif GetTriggerEvalCount(t)==R2I(2.6/.05)then
set BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(ZX7),GetUnitY(ZX7),0)
call UnitAddAbility(BB7,1093815861)
call IssueTargetOrderById(BB7,$D0065,ZX7)
call OX7(ZX7,"ShadowAmu|4330")
set BB7=null
endif
set t=null
set ZX7=null
return false
endfunction
function DXG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real x=(LoadReal(L7,(I97),(6)))
local real y=(LoadReal(L7,(I97),(7)))
local integer DYG=(LoadInteger(L7,(I97),(375)))
local integer id=GetUnitCurrentOrder(ZX7)
if GetUnitX(ZX7)!=x or GetUnitY(ZX7)!=y then
call IssueImmediateOrderById(ZX7,$D0019)
call SaveReal(L7,(DYG),(6),((GetUnitX(ZX7))*1.))
call SaveReal(L7,(DYG),(7),((GetUnitY(ZX7))*1.))
elseif id==0 or id==$D0005 or id==$D000F or id==$D0003 then
call IssueImmediateOrderById(ZX7,$D0019)
endif
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set ZX7=null
return false
endfunction
function DZG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local trigger t2=CreateTrigger()
local integer IED=GetHandleId(t2)
local string DAG="Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayTarget.mdl"
if GetLocalPlayer()!=GetOwningPlayer(ZX7)then
set DAG=""
endif
call OV7(ZX7,"ShadowAmu|4330")
call DestroyEffect(AddSpecialEffectTarget(DAG,ZX7,"chest"))
call DestroyEffect(AddSpecialEffectTarget(DAG,ZX7,"hand left"))
call DestroyEffect(AddSpecialEffectTarget(DAG,ZX7,"hand right"))
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function DWG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveReal(L7,(I97),(6),((GetUnitX(ZX7))*1.))
call SaveReal(L7,(I97),(7),((GetUnitY(ZX7))*1.))
call TriggerRegisterTimerEvent(t2,.01,false)
call TriggerAddCondition(t2,Condition(function DXG))
call SaveUnitHandle(L7,(IED),(2),(ZX7))
call SaveReal(L7,(IED),(6),((GetUnitX(ZX7))*1.))
call SaveReal(L7,(IED),(7),((GetUnitY(ZX7))*1.))
call SaveInteger(L7,(IED),(375),(I97))
set ZX7=null
set t=null
endfunction
function DBG takes nothing returns nothing
if GetSpellAbilityId()==1093815857 and OT7(GetTriggerUnit(),"ShadowAmu|4330")==false then
call DZG()
endif
endfunction
function DCG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local unit BB7=CreateUnit(GetOwningPlayer(IH7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
local integer BC7=2
if IsUnitType(IH7,UNIT_TYPE_MELEE_ATTACKER) then
set BC7=1
endif
call UnitAddAbility(BB7,1093815093)
call SetUnitAbilityLevel(BB7,1093815093,BC7)
call IssueTargetOrderById(BB7,$D0269,IH7)
set ZX7=null
set IH7=null
set BB7=null
endfunction
function D3G takes nothing returns nothing
if GetSpellAbilityId()==1093815092 and WQ7(GetSpellTargetUnit())==false then
call DCG()
endif
endfunction
function D6G takes integer BC7,unit ZX7,unit IH7 returns nothing
set E97=true
call B67(ZX7,IH7,1,300+100*BC7)
set E97=false
endfunction
function DLG takes nothing returns nothing
local integer D1G=0
if GetSpellAbilityId()==1093677647 then
set D1G=1
endif
if GetSpellAbilityId()==1093679193 then
set D1G=2
endif
if GetSpellAbilityId()==1093679194 then
set D1G=3
endif
if GetSpellAbilityId()==1093679408 then
set D1G=4
endif
if GetSpellAbilityId()==1093679410 then
set D1G=5
endif
if D1G>0 and WQ7(GetSpellTargetUnit())==false then
call D6G(D1G,GetTriggerUnit(),GetSpellTargetUnit())
endif
endfunction
function D0G takes nothing returns nothing
if GetSpellAbilityId()==1093814353 then
call VB8(GetTriggerUnit(),GetSpellTargetUnit())
endif
endfunction
function D5G takes unit ZX7,integer U57,real x,real y returns nothing
local unit D2G=CreateUnit(GetOwningPlayer(ZX7),U57,x,y,0)
call UnitApplyTimedLife(D2G,1112820806,$F)
set D2G=null
endfunction
function D_G takes nothing returns nothing
local unit D2G
local real x
local real y
if GetSpellAbilityId()==1093753420 then
set x=GetDestructableX(GetSpellTargetDestructable())
set y=GetDestructableY(GetSpellTargetDestructable())
call D5G(GetTriggerUnit(),1848659021,x,y)
elseif GetSpellAbilityId()==1093753421 then
set x=GetDestructableX(GetSpellTargetDestructable())
set y=GetDestructableY(GetSpellTargetDestructable())
call D5G(GetTriggerUnit(),1848659022,x,y)
endif
set D2G=null
endfunction
function E4G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
call UnitRemoveAbility(ZX7,1093753418)
call UnitRemoveAbility(IH7,1093753418)
call DestroyEffect((LoadEffectHandle(L7,(I97),(175))))
call DestroyEffect((LoadEffectHandle(L7,(I97),(176))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function NIOZ takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
call UnitRemoveAbility(ZX7,1093753418)
call UnitRemoveAbility(IH7,1093816901)
call DestroyEffect((LoadEffectHandle(L7,(I97),(175))))
call DestroyEffect((LoadEffectHandle(L7,(I97),(176))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function E7G takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,7,false)
if IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==false then
call TriggerAddCondition(t,Condition(function E4G))
call SaveUnitHandle(L7,(I97),(2),(GetTriggerUnit()))
call SaveUnitHandle(L7,(I97),(17),(GetSpellTargetUnit()))
call SaveEffectHandle(L7,(I97),(175),(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Cripple\\CrippleTarget.mdl",GetSpellTargetUnit(),"chest")))
call SaveEffectHandle(L7,(I97),(176),(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Cripple\\CrippleTarget.mdl",GetTriggerUnit(),"chest")))
call UnitAddAbility(GetTriggerUnit(),1093753418)
call UnitAddAbility(GetSpellTargetUnit(),1093753418)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,1093753418)
call UnitMakeAbilityPermanent(GetSpellTargetUnit(),true,1093753418)
else
call TriggerAddCondition(t,Condition(function NIOZ))
call SaveUnitHandle(L7,(I97),(2),(GetTriggerUnit()))
call SaveUnitHandle(L7,(I97),(17),(GetSpellTargetUnit()))
call SaveEffectHandle(L7,(I97),(175),(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Cripple\\CrippleTarget.mdl",GetSpellTargetUnit(),"chest")))
call SaveEffectHandle(L7,(I97),(176),(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Cripple\\CrippleTarget.mdl",GetTriggerUnit(),"chest")))
call UnitAddAbility(GetTriggerUnit(),1093753418)
call UnitAddAbility(GetSpellTargetUnit(),1093816901)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,1093753418)
call UnitMakeAbilityPermanent(GetSpellTargetUnit(),true,1093816901)
endif
set t=null
endfunction
function E8G takes nothing returns nothing
if GetSpellAbilityId()==1093753417 then
call E7G()
endif
endfunction
function A1v takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer OB7=GetHandleId(t)
local unit ZX7=LoadUnitHandle(L7,OB7,0)
if TimerGetElapsed(W)<LoadReal(L7,OB7,0)and GetUnitAbilityLevel(ZX7,'A2RG')>0 then
if GetUnitAbilityLevel(ZX7,'A2RK')==1 then
call SetUnitAbilityLevel(ZX7,'A2RK',2)
call GT1(ZX7)
endif
else
if HaveSavedHandle(L7,OB7,1)then
if GetUnitAbilityLevel(LoadUnitHandle(L7,OB7,1),'A2T5')==0 then
call GT1(LoadUnitHandle(L7,OB7,1))
call DestroyTimer(t)
call FlushChildHashtable(L7,OB7)
endif
else
call DestroyTimer(t)
call FlushChildHashtable(L7,OB7)
endif
call SetUnitAbilityLevel(ZX7,'A2RK',1)
call GT1(ZX7)
endif
set ZX7=null
set t=null
endfunction
function A2v takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local timer t=CreateTimer()
local integer OB7=GetHandleId(t)
local unit BB7
if IsUnitAlly(ZX7,GetOwningPlayer(IH7))then
call Z57(IH7,'A2RH',1,7,'A2RH')
call Z57(IH7,'A2T6',1,7,'A2T5')
call yS('A2T6')
call Z57(ZX7,'A2RG',1,7,'A2RG')
call GT1(IH7)
call SaveUnitHandle(L7,OB7,1,IH7)
else
call Z57(IH7,'A2RG',1,7,'A2RG')
call Z57(ZX7,'A2RG',1,7,'A2RG')
set BB7=CreateUnit(GetOwningPlayer(IH7),'e00E',GetUnitX(IH7),GetUnitY(IH7),0)
call UnitAddAbility(BB7,'A2RL')
if GetUnitTypeId(IH7)=='n00L' then
call SetUnitAbilityLevel(IH7,'A2RG',2)
call SetUnitAbilityLevel(BB7,'A2RL',2)
endif
call IssueTargetOrderById(BB7,$D00DE,IH7)
call UnitRemoveAbility(BB7,'A2RL')
set BB7=null
endif
call TimerStart(t,.1,true,function A1v)
call SaveUnitHandle(L7,OB7,0,ZX7)
call SetUnitAbilityLevel(ZX7,'A2RK',2)
call SaveReal(L7,OB7,0,TimerGetElapsed(W)+7.01)
call GT1(ZX7)
set t=null
set ZX7=null
set IH7=null
endfunction
function A3v takes nothing returns nothing
if WQ7(GetSpellTargetUnit())==false or IsUnitAlly(GetSpellTargetUnit(),GetTriggerPlayer())then
call A2v()
endif
endfunction
function iQv takes nothing returns nothing
local destructable BB7=CreateDestructable('B005',GetSpellTargetX(),GetSpellTargetY(),GetRandomReal(0,360),1,0)
call SetWidgetLife(BB7,1)
call ZN7(BB7,20)
set BB7=null
endfunction
function R2Y takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
if GetTriggerEventId()==EVENT_UNIT_SPELL_CAST then
call UnitRemoveAbility(GetTriggerUnit(),'A2X7')
call UnitRemoveAbility(GetTriggerUnit(),'A2X8')
call UnitRemoveAbility(GetTriggerUnit(),'B09Y')
endif
call DestroyTrigger(t)
set t=null
return false
endfunction
function R2Z takes unit u returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_SPELL_CAST)
call TriggerRegisterDeathEvent(t,u)
call TriggerRegisterTimerEvent(t,3,false)
call TriggerAddCondition(t,Condition(function R2Y))
if IsUnitType(u,UNIT_TYPE_MELEE_ATTACKER)then
call Z57(u,'A2X8',1,3.6,'B09Y')
else
call Z57(u,'A2X7',1,3.6,'B09Y')
endif
set t=null
endfunction
function R30 takes unit u returns nothing
if IsUnitType(u,UNIT_TYPE_MELEE_ATTACKER)then
call F71(u,'I0SI')
else
call F71(u,'I0SJ')
endif
endfunction
function R31 takes nothing returns nothing
call Xnv()
if GetUnitAbilityLevel(GetTriggerUnit(),'Bpsh')>0 then
call UnitRemoveAbility(GetTriggerUnit(),'Bpsh')
endif
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_FLYING)then
call R2Z(GetTriggerUnit())
else
call R30(GetTriggerUnit())
endif
endfunction
function SDEE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local unit BB7=O77(OB7,"Caster")
if GetTriggerEvalCount(t)>5/.1 then
call KillUnit(BB7)
call NM7(OB7)
call OZ7(t)
else
call SetUnitX(BB7,GetUnitX(m5))
call SetUnitY(BB7,GetUnitY(m5))
endif
set t=null
set p5=null
set m5=null
set BB7=null
return false
endfunction
function SEEE takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local real d=5
local unit BB7=CreateUnit(GetOwningPlayer(m5),1747993137,GetUnitX(m5),GetUnitY(m5),0)
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call Z67(m5,'A2RY',1,d)
call Z67(m5,'A2RZ',1,d)
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),'A2RY',false)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_SPELL_EFFECT)
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function SDEE))
call NT7(OB7,"Caster",BB7)
call NT7(OB7,"Source",m5)
set p5=null
set m5=null
set BB7=null
set t=null
endfunction
function ZEEG takes nothing returns nothing
if GetSpellAbilityId()==1093816911 then
call SEEE()
endif
endfunction
function E9G takes nothing returns nothing
local unit I_7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local unit BB7
if GetSpellTargetUnit()==null then
if GetSpellAbilityId()==1095331948 then
set BB7=CreateUnit(GetOwningPlayer(I_7),1697656901,GetUnitX(I_7),GetUnitY(I_7),0)
call UnitAddAbility(BB7,1093752641)
call IssueTargetOrderById(BB7,$D0281,I_7)
set BB7=null
elseif GetSpellAbilityId()==1095331954 then
set BB7=CreateUnit(GetOwningPlayer(I_7),1697656901,GetUnitX(I_7),GetUnitY(I_7),0)
call UnitAddAbility(BB7,1095331954)
call IssueTargetOrderById(BB7,$D0281,I_7)
set BB7=null
endif
endif
set I_7=null
set IH7=null
endfunction
function EDG takes nothing returns nothing
if GetSpellAbilityId()==1095331948 or GetSpellAbilityId()==1095331954 then
call E9G()
endif
endfunction
function AWv takes nothing returns nothing
if GetSpellAbilityId()==1093816650 then
if GetSpellTargetItem()!=null then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_MANA,GetUnitState(GetTriggerUnit(),UNIT_STATE_MANA)+$96)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\MoonWell\\MoonWellCasterArt.mdx",GetTriggerUnit(),"origin"))
else
call SetUnitState(GetSpellTargetUnit(),UNIT_STATE_MANA,GetUnitState(GetSpellTargetUnit(),UNIT_STATE_MANA)+$96)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\MoonWell\\MoonWellCasterArt.mdx",GetSpellTargetUnit(),"origin"))
endif
endif
endfunction
function AWw takes nothing returns nothing
if GetSpellAbilityId()==1093816900 then
if GetSpellTargetItem()!=null then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+75)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\MoonWell\\MoonWellCasterArt.mdx",GetTriggerUnit(),"origin"))
else
call SetUnitState(GetSpellTargetUnit(),UNIT_STATE_LIFE,GetUnitState(GetSpellTargetUnit(),UNIT_STATE_LIFE)+75)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\MoonWell\\MoonWellCasterArt.mdx",GetSpellTargetUnit(),"origin"))
endif
endif
endfunction
function R42 takes nothing returns nothing
if GetSpellAbilityId()=='A2XM' then
if GetSpellTargetItem()!=null then
call AddHeroXP(GetTriggerUnit(),425,true)
else
call AddHeroXP(GetSpellTargetUnit(),425,true)
endif
endif
endfunction
function MBO takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer OB7=GetHandleId(t)
local unit WI7=LoadUnitHandle(L7,OB7,0)
local integer I97=GetHandleId(WI7)
call SaveInteger(L7,I97,'BFLY',YH7(LoadInteger(L7,I97,'BFLY')-1,0))
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),'AIev',LoadInteger(L7,I97,'BFLY')<=0)
call GT1(WI7)
call DestroyTimer(t)
call FlushChildHashtable(L7,OB7)
set WI7=null
set t=null
endfunction
function MCO takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local timer t=CreateTimer()
local integer OB7=GetHandleId(t)
local integer I97=GetHandleId(WI7)
call TimerStart(t,6,false,function MBO)
call SaveUnitHandle(L7,OB7,0,WI7)
call SaveInteger(L7,I97,'BFLY',LoadInteger(L7,I97,'BFLY')+1)
call SetPlayerAbilityAvailable(GetOwningPlayer(WI7),'AIev',LoadInteger(L7,I97,'BFLY')<=0)
call GT1(WI7)
call Z57(WI7,'A2R2',1,6,'B0GU')
set t=null
set WI7=null
endfunction
function NCv takes nothing returns nothing
call SaveStr(ZCS,0,'A0FD',"RGF")
call SaveStr(ZCS,0,'A32X',"RGF")
call SaveStr(ZCS,0,'A2R1',"MCO")
call SaveStr(ZCS,0,'A2RF',"A3v")
call SaveStr(ZCS,0,'A2RM',"iQv")
call SaveStr(ZCS,0,'A12W',"R31")
call SaveStr(ZCS,0,'A1T7',"ECG")
call SaveStr(ZCS,0,'A00P',"R45")
call SaveStr(ZCS,0,'A02W',"R7c")
call SaveStr(ZCS,0,'A0O6',"EI8")
call SaveStr(ZCS,0,'A29J',"R7r")
call SaveStr(ZCS,0,'A1MP',"R7r")
endfunction
function Xo5 takes unit WX7,integer XK1 returns nothing
local integer Xin=0
local integer Xr5=0
local integer id=GetUnitTypeId(WX7)
local boolean Xi5=false
if AK7(WX7)==false then
if id=='H00S' then
if XK1=='A14O' then
set Xin='A3D5'
set Xr5='A3D6'
endif
elseif id=='Emns' then
if XK1=='A01O' then
set Xin='A3D7'
set Xr5='A3D8'
set Xi5=true
endif
endif
endif
if Xin>0 then
call UnitAddAbility(WX7,Xin)
call UnitRemoveAbility(WX7,Xin)
endif
call XF7(WX7,XK1)
if Xr5>0 then
call UnitAddAbility(WX7,Xr5)
call UnitRemoveAbility(WX7,Xr5)
if Xi5 then
call SetUnitVertexColor(WX7,$FF,$FF,$FF,$FF)
endif
endif
endfunction
function Xa5 takes unit WX7,integer id returns nothing
local integer V77=GetUnitAbilityLevel(WX7,id)
local real Xn5
if V77>0 then
if id=='A02N' and V77==4 then
return
endif
call UnitRemoveAbility(WX7,id)
call Xo5(WX7,id)
call SetUnitAbilityLevel(WX7,id,V77)
if LoadBoolean(ZCC,-id,1)then
call TimerStart(N84[GetPlayerId(GetOwningPlayer(WX7))],0,false,null)
endif
if(id=='A0NS' or id=='A1DA')and HaveSavedInteger(L7,GetHandleId(WX7),4251)then
call RemoveSavedInteger(L7,GetHandleId(WX7),4251)
elseif(id=='A0SB')and HaveSavedInteger(L7,GetHandleId(WX7),4266)then
call RemoveSavedInteger(L7,GetHandleId(WX7),4266)
endif
endif
endfunction
function VV5 takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local integer id=LoadInteger(L7,I97,0)
local unit WI7=LoadUnitHandle(L7,I97,0)
if WI7!=null and id!=0 then
if LoadTriggerHandle(ZCC,GetHandleId(WI7),id)==t then
call RemoveSavedHandle(ZCC,GetHandleId(WI7),id)
if id!='A0H0' or GetUnitCurrentOrder(WI7)!=$D0217 then
call Xa5(WI7,id)
endif
endif
endif
call FlushChildHashtable(L7,I97)
call DestroyTrigger(t)
set WI7=null
set t=null
endfunction
function EE5 takes unit WI7,integer id,boolean XX5,real XO5 returns nothing
local trigger t
local integer I97
local integer OB7=GetHandleId(WI7)
local real XR5
local real I5=TimerGetElapsed(W)
local real XA5
local real Xn5=LoadReal(ZCC,-id,GetUnitAbilityLevel(WI7,id))
if Xn5==0 then
if LoadBoolean(ZCC,-id,0)then
set Xn5=LoadReal(ZCC,-id,1)
endif
endif
if XX5 then
set XO5=XO5*Xn5/100
endif
if XO5==0 then
return
endif
if HaveSavedHandle(ZCC,OB7,id)then
set t=LoadTriggerHandle(ZCC,OB7,id)
set I97=GetHandleId(t)
set XR5=LoadReal(L7,I97,0)
set XA5=LoadReal(L7,I97,1)
call TriggerRegisterTimerEvent(t,YK7(XR5+XA5-I5-XO5,0),false)
call SaveReal(L7,I97,1,XA5+XO5)
else
set t=CreateTrigger()
set I97=GetHandleId(t)
call SaveTriggerHandle(ZCC,OB7,id,t)
call SaveInteger(L7,I97,$A,I97)
call TriggerRegisterTimerEvent(t,YK7(Xn5-XO5,0),false)
call TriggerAddCondition(t,Condition(function VV5))
call SaveInteger(L7,I97,0,id)
call SaveReal(L7,I97,0,I5)
call SaveReal(L7,I97,1,YK7(Xn5-XO5,0))
call SaveUnitHandle(L7,I97,0,WI7)
endif
set t=null
endfunction
function ivv takes nothing returns boolean
local integer Cw=GetUnitTypeId(GetTriggerUnit())
local integer id=GetSpellAbilityId()
if id=='A03G' then
if Cw=='H00F' or Cw=='H00E' or Cw=='H00G' then
return true
endif
elseif id=='ANcr' then
if Cw=='N01H' or Cw=='N01T' or Cw=='N01J' then
return true
endif
elseif id=='A093' then
if Cw=='E015' then
return true
endif
elseif id=='A15J' then
if Cw=='H07I' then
return true
endif
endif
return false
endfunction
function iev takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local real XB4=0
local real Xn5
local integer id=GetSpellAbilityId()
if IsUnitType(WI7,UNIT_TYPE_HERO)and LoadBoolean(ZCC,-id,1)then
set Xn5=LoadReal(ZCC,-id,GetUnitAbilityLevel(WI7,id))
if Xn5==0 then
if LoadBoolean(ZCC,-id,0)then
set Xn5=LoadReal(ZCC,-id,1)
endif
endif
if Xn5>0 then
if ivv()==false then
if HaveSavedHandle(ZCC,GetHandleId(WI7),id)then
set XB4=LoadReal(L7,GetHandleId(LoadTriggerHandle(ZCC,GetHandleId(WI7),id)),1)
else
set XB4=Xn5
endif
call TimerStart(N84[GetPlayerId(GetOwningPlayer(WI7))],XB4,false,null)
endif
endif
endif
if id=='A02W' then
call TimerStart(N84[GetPlayerId(GetOwningPlayer(WI7))],0,false,null)
endif
set WI7=null
endfunction
function ixv takes nothing returns nothing
local trigger t=CreateTrigger()
local integer i
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function iev))
set t=null
set i=0
loop
exitwhen(i>$D)
set N84[i]=CreateTimer()
set i=i+1
endloop
set NCC=InitHashtable()
endfunction
function R7d takes nothing returns nothing
call SaveBoolean(ZCC,-'A004',0,true)
call SaveReal(ZCC,-'A004',1,$A)
call SaveBoolean(ZCC,-'A00H',0,true)
call SaveBoolean(ZCC,-'A00H',1,true)
call SaveReal(ZCC,-'A00H',1,'x')
call SaveBoolean(ZCC,-'A00P',0,true)
call SaveReal(ZCC,-'A00P',1,10)
call SaveBoolean(ZCC,-'A00S',0,true)
call SaveReal(ZCC,-'A00S',1,$D)
call SaveBoolean(ZCC,-'A00U',1,true)
call SaveReal(ZCC,-'A00U',1,$A0)
call SaveReal(ZCC,-'A00U',2,$96)
call SaveReal(ZCC,-'A00U',3,$8C)
call SaveBoolean(ZCC,-'A010',0,true)
call SaveReal(ZCC,-'A010',1,8)
call SaveBoolean(ZCC,-'A011',0,true)
call SaveReal(ZCC,-'A011',1,$F)
call SaveBoolean(ZCC,-'A013',1,true)
call SaveReal(ZCC,-'A013',1,$8C)
call SaveReal(ZCC,-'A013',2,'x')
call SaveReal(ZCC,-'A013',3,'d')
call SaveBoolean(ZCC,-'A01B',0,true)
call SaveReal(ZCC,-'A01B',1,45)
call SaveBoolean(ZCC,-'A01F',0,true)
call SaveReal(ZCC,-'A01F',1,8.5)
call SaveReal(ZCC,-'A01I',1,30)
call SaveReal(ZCC,-'A01I',2,25)
call SaveReal(ZCC,-'A01I',3,20)
call SaveReal(ZCC,-'A01I',4,$F)
call SaveReal(ZCC,-'A01O',1,50)
call SaveReal(ZCC,-'A01O',2,40)
call SaveReal(ZCC,-'A01O',3,30)
call SaveReal(ZCC,-'A01O',4,20)
call SaveBoolean(ZCC,-'A01P',1,true)
call SaveReal(ZCC,-'A01P',1,70)
call SaveReal(ZCC,-'A01P',2,60)
call SaveReal(ZCC,-'A01P',3,50)
call SaveReal(ZCC,-'A01Y',1,260)
call SaveReal(ZCC,-'A01Y',2,$A0)
call SaveReal(ZCC,-'A01Y',3,60)
call SaveReal(ZCC,-'A01Z',1,$A)
call SaveReal(ZCC,-'A01Z',2,8)
call SaveReal(ZCC,-'A01Z',3,6)
call SaveReal(ZCC,-'A01Z',4,4)
call SaveBoolean(ZCC,-'A020',0,true)
call SaveReal(ZCC,-'A020',1,1.75)
call SaveReal(ZCC,-'A025',1,20)
call SaveReal(ZCC,-'A025',2,19)
call SaveReal(ZCC,-'A025',3,18)
call SaveReal(ZCC,-'A025',4,17)
call SaveBoolean(ZCC,-'A027',0,true)
call SaveReal(ZCC,-'A027',1,7)
call SaveReal(ZCC,-'A02A',1,$D)
call SaveReal(ZCC,-'A02A',2,$C)
call SaveReal(ZCC,-'A02A',3,$B)
call SaveReal(ZCC,-'A02A',4,$A)
call SaveBoolean(ZCC,-'A02H',0,true)
call SaveReal(ZCC,-'A02H',1,8)
call SaveBoolean(ZCC,-'A02M',0,true)
call SaveReal(ZCC,-'A02M',1,8)
call SaveReal(ZCC,-'A02N',1,16)
call SaveReal(ZCC,-'A02N',2,12)
call SaveReal(ZCC,-'A02N',3,8)
call SaveReal(ZCC,-'A02N',4,4)
call SaveBoolean(ZCC,-'A02Q',0,true)
call SaveBoolean(ZCC,-'A02Q',1,true)
call SaveReal(ZCC,-'A02Q',1,'d')
call SaveReal(ZCC,-'A02S',1,$A)
call SaveReal(ZCC,-'A02S',2,9)
call SaveReal(ZCC,-'A02S',3,8)
call SaveReal(ZCC,-'A02S',4,7)
call SaveReal(ZCC,-'A030',1,45)
call SaveReal(ZCC,-'A030',2,40)
call SaveReal(ZCC,-'A030',3,35)
call SaveReal(ZCC,-'A030',4,30)
call SaveBoolean(ZCC,-'A034',0,true)
call SaveBoolean(ZCC,-'A034',1,true)
call SaveReal(ZCC,-'A034',1,5)
call SaveReal(ZCC,-'A037',1,$C)
call SaveReal(ZCC,-'A037',2,$C)
call SaveReal(ZCC,-'A037',3,$C)
call SaveReal(ZCC,-'A037',4,$A)
call SaveBoolean(ZCC,-'A03D',0,true)
call SaveReal(ZCC,-'A03D',1,30)
call SaveBoolean(ZCC,-'A03F',0,true)
call SaveReal(ZCC,-'A03F',1,$C)
call SaveReal(ZCC,-'A0AR',1,$C)
call SaveReal(ZCC,-'A0AR',2,$B)
call SaveReal(ZCC,-'A0AR',3,$A)
call SaveReal(ZCC,-'A0AR',4,9)
call SaveReal(ZCC,-'A0AR',5,$C)
call SaveReal(ZCC,-'A0AR',6,$B)
call SaveReal(ZCC,-'A0AR',7,$A)
call SaveReal(ZCC,-'A0AR',8,9)
call SaveBoolean(ZCC,-'A03G',0,true)
call SaveBoolean(ZCC,-'A03G',1,true)
call SaveReal(ZCC,-'A03G',1,'s')
call SaveBoolean(ZCC,-'A03J',1,true)
call SaveBoolean(ZCC,-'A03K',1,true)
call SaveReal(ZCC,-'A03K',1,$A0)
call SaveReal(ZCC,-'A03K',2,'x')
call SaveReal(ZCC,-'A03K',3,80)
call SaveBoolean(ZCC,-'A03O',0,true)
call SaveBoolean(ZCC,-'A03O',1,true)
call SaveReal(ZCC,-'A03O',1,$8C)
call SaveBoolean(ZCC,-'A03R',0,true)
call SaveBoolean(ZCC,-'A03R',1,true)
call SaveReal(ZCC,-'A03R',1,90)
call SaveBoolean(ZCC,-'A03Y',0,true)
call SaveReal(ZCC,-'A03Y',1,6)
call SaveBoolean(ZCC,-'A042',0,true)
call SaveReal(ZCC,-'A042',1,6)
call SaveBoolean(ZCC,-'A046',0,true)
call SaveReal(ZCC,-'A046',1,$C)
call SaveBoolean(ZCC,-'A049',0,true)
call SaveReal(ZCC,-'A049',1,$E)
call SaveBoolean(ZCC,-'A04A',0,true)
call SaveReal(ZCC,-'A04A',1,7)
call SaveReal(ZCC,-'A04C',1,9)
call SaveReal(ZCC,-'A04C',2,8)
call SaveReal(ZCC,-'A04C',3,7)
call SaveReal(ZCC,-'A04C',4,6)
call SaveBoolean(ZCC,-'A04J',1,true)
call SaveBoolean(ZCC,-'A04M',1,true)
call SaveBoolean(ZCC,-'A04N',1,true)
call SaveBoolean(ZCC,-'A04P',1,true)
call SaveReal(ZCC,-'A04P',1,20)
call SaveReal(ZCC,-'A04P',2,$F)
call SaveReal(ZCC,-'A04P',3,$A)
call SaveBoolean(ZCC,-'A04Q',1,true)
call SaveReal(ZCC,-'A04Q',1,45)
call SaveReal(ZCC,-'A04Q',2,35)
call SaveReal(ZCC,-'A04Q',3,25)
call SaveBoolean(ZCC,-'A04W',0,true)
call SaveReal(ZCC,-'A04W',1,$C)
call SaveReal(ZCC,-'A04Y',1,16)
call SaveReal(ZCC,-'A04Y',2,$F)
call SaveReal(ZCC,-'A04Y',3,$E)
call SaveReal(ZCC,-'A04Y',4,$D)
call SaveReal(ZCC,-'A053',1,44)
call SaveReal(ZCC,-'A053',2,36)
call SaveReal(ZCC,-'A053',3,28)
call SaveReal(ZCC,-'A053',4,20)
call SaveBoolean(ZCC,-'A054',1,true)
call SaveReal(ZCC,-'A054',1,$A0)
call SaveReal(ZCC,-'A054',2,$96)
call SaveReal(ZCC,-'A054',3,$8C)
call SaveBoolean(ZCC,-'A055',0,true)
call SaveReal(ZCC,-'A055',1,$A)
call SaveBoolean(ZCC,-'A05C',0,true)
call SaveReal(ZCC,-'A05C',1,23)
call SaveBoolean(ZCC,-'A2US',0,true)
call SaveReal(ZCC,-'A2US',1,25)
call SaveBoolean(ZCC,-'A05E',0,true)
call SaveReal(ZCC,-'A05E',1,25)
call SaveReal(ZCC,-'A05G',1,42)
call SaveReal(ZCC,-'A05G',2,34)
call SaveReal(ZCC,-'A05G',3,26)
call SaveReal(ZCC,-'A05G',4,18)
call SaveReal(ZCC,-'A05J',1,9)
call SaveReal(ZCC,-'A05J',2,8)
call SaveReal(ZCC,-'A05J',3,7)
call SaveReal(ZCC,-'A05J',4,5)
call SaveBoolean(ZCC,-'A05T',1,true)
call SaveReal(ZCC,-'A05T',1,120)
call SaveReal(ZCC,-'A05T',2,90)
call SaveReal(ZCC,-'A05T',3,60)
call SaveReal(ZCC,-'A05V',1,8)
call SaveReal(ZCC,-'A05V',2,7)
call SaveReal(ZCC,-'A05V',3,6)
call SaveReal(ZCC,-'A05V',4,5)
call SaveBoolean(ZCC,-'A063',0,true)
call SaveReal(ZCC,-'A063',1,40)
call SaveBoolean(ZCC,-'A064',0,true)
call SaveReal(ZCC,-'A064',1,15)
call SaveBoolean(ZCC,-'A067',1,true)
call SaveReal(ZCC,-'A067',1,'d')
call SaveReal(ZCC,-'A067',2,85)
call SaveReal(ZCC,-'A067',3,70)
call SaveReal(ZCC,-'A06B',1,$A0)
call SaveReal(ZCC,-'A06B',2,$8C)
call SaveReal(ZCC,-'A06B',3,'x')
call SaveReal(ZCC,-'A06B',4,'d')
call SaveReal(ZCC,-'A06H',1,20)
call SaveReal(ZCC,-'A06H',2,16)
call SaveReal(ZCC,-'A06H',3,$D)
call SaveReal(ZCC,-'A06H',4,$A)
call SaveReal(ZCC,-'A06I',1,$E)
call SaveReal(ZCC,-'A06I',2,$D)
call SaveReal(ZCC,-'A06I',3,$C)
call SaveReal(ZCC,-'A06I',4,$B)
call SaveBoolean(ZCC,-'A2S1',0,true)
call SaveReal(ZCC,-'A2S1',1,4)
call SaveBoolean(ZCC,-'A06M',0,true)
call SaveReal(ZCC,-'A06M',1,$D)
call SaveBoolean(ZCC,-'A06O',0,true)
call SaveReal(ZCC,-'A06O',1,$B)
call SaveReal(ZCC,-'A06P',1,50)
call SaveReal(ZCC,-'A06P',2,46)
call SaveReal(ZCC,-'A06P',3,42)
call SaveReal(ZCC,-'A06P',4,38)
call SaveBoolean(ZCC,-'A06R',1,true)
call SaveReal(ZCC,-'A06R',1,$8C)
call SaveReal(ZCC,-'A06R',2,'x')
call SaveReal(ZCC,-'A06R',3,'d')
call SaveBoolean(ZCC,-'A06V',0,true)
call SaveReal(ZCC,-'A06V',1,4)
call SaveBoolean(ZCC,-'A06W',0,true)
call SaveReal(ZCC,-'A06W',1,9)
call SaveBoolean(ZCC,-'A073',0,true)
call SaveBoolean(ZCC,-'A073',1,true)
call SaveReal(ZCC,-'A073',1,$91)
call SaveBoolean(ZCC,-'A07A',0,true)
call SaveReal(ZCC,-'A07A',1,$F)
call SaveBoolean(ZCC,-'A07F',0,true)
call SaveReal(ZCC,-'A07F',1,8)
call SaveBoolean(ZCC,-'A07K',1,true)
call SaveBoolean(ZCC,-'A07Q',1,true)
call SaveReal(ZCC,-'A07Q',1,'x')
call SaveReal(ZCC,-'A07Q',2,80)
call SaveReal(ZCC,-'A07Q',3,40)
call SaveBoolean(ZCC,-'A07U',1,true)
call SaveReal(ZCC,-'A07U',1,$B4)
call SaveReal(ZCC,-'A07U',2,'x')
call SaveReal(ZCC,-'A07U',3,60)
call SaveBoolean(ZCC,-'A07Z',0,true)
call SaveBoolean(ZCC,-'A07Z',1,true)
call SaveReal(ZCC,-'A07Z',1,70)
call SaveBoolean(ZCC,-'A080',1,true)
call SaveReal(ZCC,-'A080',1,70)
call SaveReal(ZCC,-'A080',2,50)
call SaveReal(ZCC,-'A080',3,30)
call SaveBoolean(ZCC,-'A083',0,true)
call SaveReal(ZCC,-'A083',1,20)
call SaveBoolean(ZCC,-'A085',0,true)
call SaveReal(ZCC,-'A085',1,$A)
call SaveBoolean(ZCC,-'A08H',1,true)
call SaveReal(ZCC,-'A08H',1,120)
call SaveReal(ZCC,-'A08H',2,90)
call SaveReal(ZCC,-'A08H',3,60)
call SaveBoolean(ZCC,-'A08N',0,true)
call SaveReal(ZCC,-'A08N',1,$A)
call SaveBoolean(ZCC,-'A08P',0,true)
call SaveBoolean(ZCC,-'A08P',1,true)
call SaveReal(ZCC,-'A08P',1,70)
call SaveBoolean(ZCC,-'A08R',0,true)
call SaveReal(ZCC,-'A08R',1,5)
call SaveBoolean(ZCC,-'A08V',0,true)
call SaveReal(ZCC,-'A08V',1,$E)
call SaveReal(ZCC,-'A08X',1,16)
call SaveReal(ZCC,-'A08X',2,$E)
call SaveReal(ZCC,-'A08X',3,$C)
call SaveReal(ZCC,-'A08X',4,$A)
call SaveBoolean(ZCC,-'A093',0,true)
call SaveReal(ZCC,-'A093',1,'d')
call SaveReal(ZCC,-'A093',2,70)
call SaveReal(ZCC,-'A093',3,40)
call SaveBoolean(ZCC,-'A094',0,true)
call SaveReal(ZCC,-'A094',1,8)
call SaveBoolean(ZCC,-'A095',1,true)
call SaveReal(ZCC,-'A095',1,$A0)
call SaveReal(ZCC,-'A095',2,'d')
call SaveReal(ZCC,-'A095',3,40)
call SaveBoolean(ZCC,-'A09D',0,true)
call SaveReal(ZCC,-'A09D',1,35)
call SaveBoolean(ZCC,-'A09U',1,true)
call SaveReal(ZCC,-'A09U',1,70)
call SaveReal(ZCC,-'A09U',2,60)
call SaveReal(ZCC,-'A09U',3,50)
call SaveBoolean(ZCC,-'A09W',1,true)
call SaveReal(ZCC,-'A09W',1,'d')
call SaveReal(ZCC,-'A09W',2,60)
call SaveReal(ZCC,-'A09W',3,20)
call SaveBoolean(ZCC,-'A09Z',1,true)
call SaveReal(ZCC,-'A09Z',1,70)
call SaveReal(ZCC,-'A09Z',2,60)
call SaveReal(ZCC,-'A09Z',3,50)
call SaveBoolean(ZCC,-'A0A1',0,true)
call SaveBoolean(ZCC,-'A0A1',1,true)
call SaveReal(ZCC,-'A0A1',1,'x')
call SaveBoolean(ZCC,-'A0A2',0,true)
call SaveBoolean(ZCC,-'A0A2',1,true)
call SaveReal(ZCC,-'A0A2',1,'d')
call SaveReal(ZCC,-'A0A5',1,$B4)
call SaveReal(ZCC,-'A0A5',2,$A0)
call SaveReal(ZCC,-'A0A5',3,$8C)
call SaveReal(ZCC,-'A0A5',4,'x')
call SaveBoolean(ZCC,-'A0A6',1,true)
call SaveReal(ZCC,-'A0A6',1,$8C)
call SaveReal(ZCC,-'A0A6',2,'x')
call SaveReal(ZCC,-'A0A6',3,60)
call SaveBoolean(ZCC,-'A0AK',0,true)
call SaveBoolean(ZCC,-'A0AK',1,true)
call SaveReal(ZCC,-'A0AK',1,$A)
call SaveBoolean(ZCC,-'A0AS',0,true)
call SaveReal(ZCC,-'A0AS',1,16)
call SaveBoolean(ZCC,-'A0AV',0,true)
call SaveBoolean(ZCC,-'A0AV',1,true)
call SaveReal(ZCC,-'A0AV',1,90)
call SaveBoolean(ZCC,-'A0B1',0,true)
call SaveReal(ZCC,-'A0B1',1,35)
call SaveBoolean(ZCC,-'A0B4',0,true)
call SaveBoolean(ZCC,-'A0B4',1,true)
call SaveReal(ZCC,-'A0B4',1,4)
call SaveBoolean(ZCC,-'A0BH',0,true)
call SaveReal(ZCC,-'A0BH',1,$A)
call SaveBoolean(ZCC,-'A0BQ',0,true)
call SaveReal(ZCC,-'A0BQ',1,35)
call SaveBoolean(ZCC,-'A0BZ',0,true)
call SaveReal(ZCC,-'A0BZ',1,9)
call SaveReal(ZCC,-'A0CA',1,$C)
call SaveReal(ZCC,-'A0CA',2,$A)
call SaveReal(ZCC,-'A0CA',3,8)
call SaveReal(ZCC,-'A0CA',4,6)
call SaveBoolean(ZCC,-'A0CC',0,true)
call SaveBoolean(ZCC,-'A0CC',1,true)
call SaveReal(ZCC,-'A0CC',1,22)
call SaveBoolean(ZCC,-'A0CT',1,true)
call SaveReal(ZCC,-'A0CT',1,60)
call SaveReal(ZCC,-'A0CT',2,50)
call SaveReal(ZCC,-'A0CT',3,40)
call SaveBoolean(ZCC,-'A0DH',1,true)
call SaveReal(ZCC,-'A0DH',1,$96)
call SaveReal(ZCC,-'A0DH',2,$82)
call SaveReal(ZCC,-'A0DH',3,'n')
call SaveBoolean(ZCC,-'A0DL',0,true)
call SaveReal(ZCC,-'A0DL',1,5)
call SaveReal(ZCC,-'A0DX',1,30)
call SaveReal(ZCC,-'A0DX',2,25)
call SaveReal(ZCC,-'A0DX',3,20)
call SaveReal(ZCC,-'A0DX',4,$F)
call SaveBoolean(ZCC,-'A0E2',1,true)
call SaveReal(ZCC,-'A0E2',1,75)
call SaveReal(ZCC,-'A0E2',2,65)
call SaveReal(ZCC,-'A0E2',3,55)
call SaveBoolean(ZCC,-'A0E3',0,true)
call SaveReal(ZCC,-'A0E3',1,70)
call SaveBoolean(ZCC,-'A0ER',0,true)
call SaveBoolean(ZCC,-'A0ER',1,true)
call SaveReal(ZCC,-'A0ER',1,$96)
call SaveBoolean(ZCC,-'A0ES',0,true)
call SaveReal(ZCC,-'A0ES',1,$C)
call SaveBoolean(ZCC,-'A0EY',0,true)
call SaveReal(ZCC,-'A0EY',1,$A)
call SaveBoolean(ZCC,-'A0FL',0,true)
call SaveBoolean(ZCC,-'A0FL',1,true)
call SaveReal(ZCC,-'A0FL',1,30)
call SaveBoolean(ZCC,-'A0FN',0,true)
call SaveReal(ZCC,-'A0FN',1,$B)
call SaveBoolean(ZCC,-'A0FW',0,true)
call SaveReal(ZCC,-'A0FW',1,1.5)
call SaveBoolean(ZCC,-'A0G2',0,true)
call SaveReal(ZCC,-'A0G2',1,$B)
call SaveBoolean(ZCC,-'A0G4',1,true)
call SaveReal(ZCC,-'A0G4',1,80)
call SaveReal(ZCC,-'A0G4',2,70)
call SaveReal(ZCC,-'A0G4',3,60)
call SaveBoolean(ZCC,-'A0G6',0,true)
call SaveReal(ZCC,-'A0G6',1,$A)
call SaveBoolean(ZCC,-'A0G8',0,true)
call SaveBoolean(ZCC,-'A0G8',1,true)
call SaveReal(ZCC,-'A0G8',1,80)
call SaveBoolean(ZCC,-'A0GK',0,true)
call SaveReal(ZCC,-'A0GK',1,$E)
call SaveBoolean(ZCC,-'A0GP',0,true)
call SaveReal(ZCC,-'A0GP',1,3)
call SaveReal(ZCC,-'A0H0',1,40)
call SaveReal(ZCC,-'A0H0',2,30)
call SaveReal(ZCC,-'A0H0',3,20)
call SaveReal(ZCC,-'A0H0',4,$A)
call SaveBoolean(ZCC,-'A0H4',0,true)
call SaveReal(ZCC,-'A0H4',1,16)
call SaveBoolean(ZCC,-'A0H9',1,true)
call SaveReal(ZCC,-'A0H9',1,140)
call SaveReal(ZCC,-'A0H9',2,130)
call SaveReal(ZCC,-'A0H9',3,120)
call SaveBoolean(ZCC,-'A0HW',0,true)
call SaveReal(ZCC,-'A0HW',1,16)
call SaveBoolean(ZCC,-'A0I3',0,true)
call SaveReal(ZCC,-'A0I3',1,5)
call SaveReal(ZCC,-'A0I6',1,16)
call SaveReal(ZCC,-'A0I6',2,$E)
call SaveReal(ZCC,-'A0I6',3,$C)
call SaveReal(ZCC,-'A0I6',4,$A)
call SaveBoolean(ZCC,-'A0I7',0,true)
call SaveReal(ZCC,-'A0I7',1,$F)
call SaveBoolean(ZCC,-'A0IL',0,true)
call SaveReal(ZCC,-'A0IL',1,22)
call SaveBoolean(ZCC,-'A0IN',0,true)
call SaveBoolean(ZCC,-'A0IN',1,true)
call SaveReal(ZCC,-'A0IN',1,45)
call SaveBoolean(ZCC,-'A0J1',1,true)
call SaveReal(ZCC,-'A0J1',1,$82)
call SaveReal(ZCC,-'A0J1',2,'s')
call SaveReal(ZCC,-'A0J1',3,'d')
call SaveBoolean(ZCC,-'A0J5',0,true)
call SaveReal(ZCC,-'A0J5',1,25)
call SaveReal(ZCC,-'A0KM',1,$E)
call SaveReal(ZCC,-'A0KM',2,$D)
call SaveReal(ZCC,-'A0KM',3,$C)
call SaveReal(ZCC,-'A0KM',4,$B)
call SaveBoolean(ZCC,-'A0KU',1,true)
call SaveReal(ZCC,-'A0KU',1,$8C)
call SaveReal(ZCC,-'A0KU',2,'x')
call SaveReal(ZCC,-'A0KU',3,'d')
call SaveBoolean(ZCC,-'A0KV',0,true)
call SaveReal(ZCC,-'A0KV',1,$C)
call SaveBoolean(ZCC,-'A0L3',0,true)
call SaveBoolean(ZCC,-'A0L3',1,true)
call SaveReal(ZCC,-'A0L3',1,$82)
call SaveBoolean(ZCC,-'A0L8',0,true)
call SaveReal(ZCC,-'A0L8',1,17)
call SaveBoolean(ZCC,-'A0LC',1,true)
call SaveReal(ZCC,-'A0LC',1,50)
call SaveReal(ZCC,-'A0LC',2,45)
call SaveReal(ZCC,-'A0LC',3,40)
call SaveBoolean(ZCC,-'A0LH',0,true)
call SaveBoolean(ZCC,-'A0LH',1,true)
call SaveReal(ZCC,-'A0LH',1,60)
call SaveReal(ZCC,-'A0LK',1,19)
call SaveReal(ZCC,-'A0LK',2,17)
call SaveReal(ZCC,-'A0LK',3,$F)
call SaveReal(ZCC,-'A0LK',4,$D)
call SaveBoolean(ZCC,-'A0LL',0,true)
call SaveReal(ZCC,-'A0LL',1,17)
call SaveReal(ZCC,-'A0LN',1,30)
call SaveReal(ZCC,-'A0LN',2,26)
call SaveReal(ZCC,-'A0LN',3,22)
call SaveReal(ZCC,-'A0LN',4,18)
call SaveBoolean(ZCC,-'A0LT',1,true)
call SaveReal(ZCC,-'A0LT',1,160)
call SaveReal(ZCC,-'A0LT',2,140)
call SaveReal(ZCC,-'A0LT',3,120)
call SaveBoolean(ZCC,-'A0LV',0,true)
call SaveReal(ZCC,-'A0LV',1,16)
call SaveBoolean(ZCC,-'A2MC',0,true)
call SaveReal(ZCC,-'A2MC',1,24)
call SaveBoolean(ZCC,-'A0M1',1,true)
call SaveReal(ZCC,-'A0M1',1,130)
call SaveReal(ZCC,-'A0M1',2,120)
call SaveReal(ZCC,-'A0M1',3,110)
call SaveReal(ZCC,-'A0ME',1,$F)
call SaveReal(ZCC,-'A0ME',2,$C)
call SaveReal(ZCC,-'A0ME',3,9)
call SaveReal(ZCC,-'A0ME',4,6)
call SaveReal(ZCC,-'A0MF',1,$C)
call SaveReal(ZCC,-'A0MF',2,$A)
call SaveReal(ZCC,-'A0MF',3,8)
call SaveReal(ZCC,-'A0MF',4,6)
call SaveReal(ZCC,-'A0MN',1,30)
call SaveReal(ZCC,-'A0MN',2,24)
call SaveReal(ZCC,-'A0MN',3,18)
call SaveReal(ZCC,-'A0MN',4,$C)
call SaveBoolean(ZCC,-'A0MQ',1,true)
call SaveReal(ZCC,-'A0MQ',1,$8C)
call SaveReal(ZCC,-'A0MQ',2,'x')
call SaveReal(ZCC,-'A0MQ',3,'d')
call SaveBoolean(ZCC,-'A0MS',0,true)
call SaveReal(ZCC,-'A0MS',1,5)
call SaveBoolean(ZCC,-'A0MT',0,true)
call SaveReal(ZCC,-'A0MT',1,5.5)
call SaveBoolean(ZCC,-'A0MU',0,true)
call SaveBoolean(ZCC,-'A0MU',1,true)
call SaveReal(ZCC,-'A0MU',1,'d')
call SaveReal(ZCC,-'A0N8',1,$C)
call SaveReal(ZCC,-'A0N8',2,$A)
call SaveReal(ZCC,-'A0N8',3,8)
call SaveReal(ZCC,-'A0N8',4,6)
call SaveReal(ZCC,-'A0NB',1,20)
call SaveReal(ZCC,-'A0NB',2,16)
call SaveReal(ZCC,-'A0NB',3,$C)
call SaveReal(ZCC,-'A0NB',4,8)
call SaveReal(ZCC,-'A0NM',1,20)
call SaveReal(ZCC,-'A0NM',2,18)
call SaveReal(ZCC,-'A0NM',3,16)
call SaveReal(ZCC,-'A0NM',4,$E)
call SaveBoolean(ZCC,-'A0NO',0,true)
call SaveReal(ZCC,-'A0NO',1,20)
call SaveReal(ZCC,-'A0NS',1,60)
call SaveReal(ZCC,-'A0NS',2,50)
call SaveReal(ZCC,-'A0NS',3,40)
call SaveBoolean(ZCC,-'A0NT',0,true)
call SaveBoolean(ZCC,-'A0NT',1,true)
call SaveReal(ZCC,-'A0NT',1,80)
call SaveBoolean(ZCC,-'A0NX',0,true)
call SaveBoolean(ZCC,-'A0NX',1,true)
call SaveReal(ZCC,-'A0NX',1,80)
call SaveBoolean(ZCC,-'A0O1',0,true)
call SaveReal(ZCC,-'A0O1',1,$D)
call SaveBoolean(ZCC,-'A0O2',1,true)
call SaveReal(ZCC,-'A0O2',1,80)
call SaveReal(ZCC,-'A0O2',2,75)
call SaveReal(ZCC,-'A0O2',3,70)
call SaveBoolean(ZCC,-'A0O5',0,true)
call SaveBoolean(ZCC,-'A0O5',1,true)
call SaveReal(ZCC,-'A0O5',1,60)
call SaveReal(ZCC,-'A0O6',1,$C)
call SaveReal(ZCC,-'A0O6',2,$B)
call SaveReal(ZCC,-'A0O6',3,$A)
call SaveReal(ZCC,-'A0O6',4,9)
call SaveBoolean(ZCC,-'A0O7',0,true)
call SaveReal(ZCC,-'A0O7',1,$A)
call SaveReal(ZCC,-'A0OJ',1,18)
call SaveReal(ZCC,-'A0OJ',2,16)
call SaveReal(ZCC,-'A0OJ',3,$E)
call SaveReal(ZCC,-'A0OJ',4,$C)
call SaveBoolean(ZCC,-'A0OK',0,true)
call SaveBoolean(ZCC,-'A0OK',1,true)
call SaveReal(ZCC,-'A0OK',1,$A0)
call SaveBoolean(ZCC,-'A0OO',0,true)
call SaveReal(ZCC,-'A0OO',1,40)
call SaveReal(ZCC,-'A0OR',1,$C)
call SaveReal(ZCC,-'A0OR',2,$A)
call SaveReal(ZCC,-'A0OR',3,8)
call SaveReal(ZCC,-'A0OR',4,6)
call SaveBoolean(ZCC,-'A0P6',0,true)
call SaveReal(ZCC,-'A0P6',1,$F)
call SaveReal(ZCC,-'A0PL',1,$E)
call SaveReal(ZCC,-'A0PL',2,$B)
call SaveReal(ZCC,-'A0PL',3,8)
call SaveReal(ZCC,-'A0PL',4,5)
call SaveReal(ZCC,-'A0Q7',1,16)
call SaveReal(ZCC,-'A0Q7',2,$C)
call SaveReal(ZCC,-'A0Q7',3,8)
call SaveReal(ZCC,-'A0Q7',4,4)
call SaveBoolean(ZCC,-'A0QE',0,true)
call SaveReal(ZCC,-'A0QE',1,28)
call SaveBoolean(ZCC,-'A0QG',0,true)
call SaveReal(ZCC,-'A0QG',1,9)
call SaveBoolean(ZCC,-'A0QK',0,true)
call SaveBoolean(ZCC,-'A0QK',1,true)
call SaveReal(ZCC,-'A0QK',1,'d')
call SaveReal(ZCC,-'A0QP',1,22)
call SaveReal(ZCC,-'A0QP',2,18)
call SaveReal(ZCC,-'A0QP',3,$E)
call SaveReal(ZCC,-'A0QP',4,$A)
call SaveBoolean(ZCC,-'A0QR',0,true)
call SaveBoolean(ZCC,-'A0QR',1,true)
call SaveReal(ZCC,-'A0QR',1,$C)
call SaveBoolean(ZCC,-'A0R0',1,true)
call SaveReal(ZCC,-'A0R0',1,$82)
call SaveReal(ZCC,-'A0R0',2,'n')
call SaveReal(ZCC,-'A0R0',3,90)
call SaveReal(ZCC,-'A0R5',1,24)
call SaveReal(ZCC,-'A0R5',2,18)
call SaveReal(ZCC,-'A0R5',3,$C)
call SaveReal(ZCC,-'A0R5',4,6)
call SaveReal(ZCC,-'A0R7',1,$C)
call SaveReal(ZCC,-'A0R7',2,$B)
call SaveReal(ZCC,-'A0R7',3,$A)
call SaveReal(ZCC,-'A0R7',4,9)
call SaveReal(ZCC,-'A0RA',1,24)
call SaveReal(ZCC,-'A0RA',2,21)
call SaveReal(ZCC,-'A0RA',3,18)
call SaveReal(ZCC,-'A0RA',4,$F)
call SaveBoolean(ZCC,-'A0RG',0,true)
call SaveReal(ZCC,-'A0RG',1,$B)
call SaveBoolean(ZCC,-'A0RP',1,true)
call SaveReal(ZCC,-'A0RP',1,$B)
call SaveReal(ZCC,-'A0RP',2,8)
call SaveReal(ZCC,-'A0RP',3,5)
call SaveBoolean(ZCC,-'A0RV',0,true)
call SaveReal(ZCC,-'A0RV',1,6)
call SaveBoolean(ZCC,-'A0RW',1,true)
call SaveReal(ZCC,-'A0RW',1,24)
call SaveReal(ZCC,-'A0RW',2,18)
call SaveReal(ZCC,-'A0RW',3,$C)
call SaveReal(ZCC,-'A0RW',4,6)
call SaveBoolean(ZCC,-'A0RX',0,true)
call SaveReal(ZCC,-'A0RX',1,$D)
call SaveReal(ZCC,-'A0S1',1,20)
call SaveReal(ZCC,-'A0S1',2,$F)
call SaveReal(ZCC,-'A0S1',3,$A)
call SaveReal(ZCC,-'A0S1',4,5)
call SaveBoolean(ZCC,-'A0S8',0,true)
call SaveBoolean(ZCC,-'A0S8',1,true)
call SaveReal(ZCC,-'A0S8',1,85)
call SaveBoolean(ZCC,-'A0S9',0,true)
call SaveReal(ZCC,-'A0S9',1,$C)
call SaveBoolean(ZCC,-'A0SB',0,true)
call SaveReal(ZCC,-'A0SB',1,6)
call SaveBoolean(ZCC,-'A0SC',0,true)
call SaveReal(ZCC,-'A0SC',1,16)
call SaveBoolean(ZCC,-'A0SK',0,true)
call SaveReal(ZCC,-'A0SK',1,$F)
call SaveBoolean(ZCC,-'A0SW',0,true)
call SaveBoolean(ZCC,-'A0SW',1,true)
call SaveReal(ZCC,-'A0SW',1,'d')
call SaveBoolean(ZCC,-'A0WQ',0,true)
call SaveBoolean(ZCC,-'A0WQ',1,true)
call SaveReal(ZCC,-'A0WQ',1,45)
call SaveBoolean(ZCC,-'A0X5',0,true)
call SaveReal(ZCC,-'A0X5',1,$C)
call SaveBoolean(ZCC,-'A0X7',0,true)
call SaveReal(ZCC,-'A0X7',1,$D)
call SaveBoolean(ZCC,-'A0YM',0,true)
call SaveReal(ZCC,-'A0YM',1,6)
call SaveBoolean(ZCC,-'A0Z0',1,true)
call SaveReal(ZCC,-'A0Z0',1,'n')
call SaveReal(ZCC,-'A0Z0',2,'d')
call SaveReal(ZCC,-'A0Z0',3,90)
call SaveReal(ZCC,-'A0Z4',1,32)
call SaveReal(ZCC,-'A0Z4',2,28)
call SaveReal(ZCC,-'A0Z4',3,24)
call SaveReal(ZCC,-'A0Z4',4,20)
call SaveBoolean(ZCC,-'A0Z5',0,true)
call SaveReal(ZCC,-'A0Z5',1,$F)
call SaveReal(ZCC,-'A0Z6',1,20)
call SaveReal(ZCC,-'A0Z6',2,18)
call SaveReal(ZCC,-'A0Z6',3,16)
call SaveReal(ZCC,-'A0Z6',4,$E)
call SaveBoolean(ZCC,-'A0Z8',1,true)
call SaveReal(ZCC,-'A0Z8',1,70)
call SaveReal(ZCC,-'A0Z8',2,55)
call SaveReal(ZCC,-'A0Z8',3,40)
call SaveReal(ZCC,-'A0ZF',1,50)
call SaveReal(ZCC,-'A0ZF',2,45)
call SaveReal(ZCC,-'A0ZF',3,40)
call SaveReal(ZCC,-'A0ZF',4,35)
call SaveBoolean(ZCC,-'A10D',0,true)
call SaveReal(ZCC,-'A10D',1,7)
call SaveReal(ZCC,-'A10L',1,60)
call SaveReal(ZCC,-'A10L',2,45)
call SaveReal(ZCC,-'A10L',3,30)
call SaveReal(ZCC,-'A10L',4,$F)
call SaveBoolean(ZCC,-'A10Q',0,true)
call SaveBoolean(ZCC,-'A10Q',1,true)
call SaveReal(ZCC,-'A10Q',1,40)
call SaveReal(ZCC,-'A10X',1,16)
call SaveReal(ZCC,-'A10X',2,$E)
call SaveReal(ZCC,-'A10X',3,$C)
call SaveReal(ZCC,-'A10X',4,$A)
call SaveReal(ZCC,-'A112',1,19)
call SaveReal(ZCC,-'A112',2,18)
call SaveReal(ZCC,-'A112',3,17)
call SaveReal(ZCC,-'A112',4,16)
call SaveBoolean(ZCC,-'A11K',1,true)
call SaveBoolean(ZCC,-'A11K',1,true)
call SaveReal(ZCC,-'A11K',1,60)
call SaveReal(ZCC,-'A11K',2,50)
call SaveReal(ZCC,-'A11K',3,40)
call SaveReal(ZCC,-'A11N',1,19)
call SaveReal(ZCC,-'A11N',2,16)
call SaveReal(ZCC,-'A11N',3,$D)
call SaveReal(ZCC,-'A11N',4,$A)
call SaveBoolean(ZCC,-'A11T',1,true)
call SaveBoolean(ZCC,-'A12J',0,true)
call SaveReal(ZCC,-'A12J',1,$C)
call SaveBoolean(ZCC,-'A12K',0,true)
call SaveReal(ZCC,-'A12K',1,9)
call SaveBoolean(ZCC,-'A12P',0,true)
call SaveBoolean(ZCC,-'A12P',1,true)
call SaveReal(ZCC,-'A12P',1,60)
call SaveReal(ZCC,-'A130',1,60)
call SaveReal(ZCC,-'A130',2,50)
call SaveReal(ZCC,-'A130',3,40)
call SaveReal(ZCC,-'A130',4,30)
call SaveBoolean(ZCC,-'A136',0,true)
call SaveReal(ZCC,-'A136',1,$A)
call SaveBoolean(ZCC,-'A14I',0,true)
call SaveReal(ZCC,-'A14I',1,$F)
call SaveReal(ZCC,-'A14L',1,20)
call SaveReal(ZCC,-'A14L',2,16)
call SaveReal(ZCC,-'A14L',3,$C)
call SaveReal(ZCC,-'A14L',4,8)
call SaveBoolean(ZCC,-'A14P',0,true)
call SaveReal(ZCC,-'A14P',1,3.5)
call SaveReal(ZCC,-'A14R',1,21)
call SaveReal(ZCC,-'A14R',2,20)
call SaveReal(ZCC,-'A14R',3,19)
call SaveReal(ZCC,-'A14R',4,18)
call SaveBoolean(ZCC,-'A15J',0,true)
call SaveBoolean(ZCC,-'A15J',1,true)
call SaveReal(ZCC,-'A15J',1,75)
call SaveReal(ZCC,-'A15S',1,$A)
call SaveReal(ZCC,-'A15S',2,8)
call SaveReal(ZCC,-'A15S',3,6)
call SaveReal(ZCC,-'A15S',4,4)
call SaveBoolean(ZCC,-'A15V',0,true)
call SaveReal(ZCC,-'A15V',1,60)
call SaveBoolean(ZCC,-'A173',0,true)
call SaveReal(ZCC,-'A173',1,22)
call SaveBoolean(ZCC,-'A17O',0,true)
call SaveReal(ZCC,-'A17O',1,20)
call SaveBoolean(ZCC,-'A180',0,true)
call SaveReal(ZCC,-'A180',1,35)
call SaveBoolean(ZCC,-'A190',0,true)
call SaveReal(ZCC,-'A190',1,$D)
call SaveReal(ZCC,-'A194',1,24)
call SaveReal(ZCC,-'A194',2,20)
call SaveReal(ZCC,-'A194',3,16)
call SaveReal(ZCC,-'A194',4,$C)
call SaveBoolean(ZCC,-'A19O',1,true)
call SaveReal(ZCC,-'A19O',1,90)
call SaveReal(ZCC,-'A19O',2,75)
call SaveReal(ZCC,-'A19O',3,60)
call SaveBoolean(ZCC,-'A19V',0,true)
call SaveReal(ZCC,-'A19V',1,$E)
call SaveBoolean(ZCC,-'A19Z',0,true)
call SaveReal(ZCC,-'A19Z',1,40)
call SaveBoolean(ZCC,-'A1A1',0,true)
call SaveBoolean(ZCC,-'A1A1',1,true)
call SaveReal(ZCC,-'A1A1',1,'d')
call SaveBoolean(ZCC,-'A1A8',0,true)
call SaveReal(ZCC,-'A1A8',1,16)
call SaveReal(ZCC,-'A1AA',1,$E)
call SaveReal(ZCC,-'A1AA',2,$D)
call SaveReal(ZCC,-'A1AA',3,$C)
call SaveReal(ZCC,-'A1AA',4,$B)
call SaveBoolean(ZCC,-'A1AO',1,true)
call SaveReal(ZCC,-'A1AO',1,80)
call SaveReal(ZCC,-'A1AO',2,70)
call SaveReal(ZCC,-'A1AO',3,60)
call SaveBoolean(ZCC,-'A1AT',0,true)
call SaveBoolean(ZCC,-'A1AT',1,true)
call SaveReal(ZCC,-'A1AT',1,90)
call SaveBoolean(ZCC,-'A1AV',0,true)
call SaveReal(ZCC,-'A1AV',1,$A)
call SaveBoolean(ZCC,-'A1AW',0,true)
call SaveBoolean(ZCC,-'A1AW',1,true)
call SaveReal(ZCC,-'A1AW',1,$A)
call SaveBoolean(ZCC,-'A1AX',0,true)
call SaveBoolean(ZCC,-'A1AX',1,true)
call SaveReal(ZCC,-'A1AX',1,70)
call SaveBoolean(ZCC,-'A1AY',0,true)
call SaveReal(ZCC,-'A1AY',1,$8C)
call SaveReal(ZCC,-'A1AZ',1,260)
call SaveReal(ZCC,-'A1AZ',2,$A0)
call SaveReal(ZCC,-'A1AZ',3,60)
call SaveBoolean(ZCC,-'A1B0',1,true)
call SaveReal(ZCC,-'A1B0',1,$A0)
call SaveReal(ZCC,-'A1B0',2,'x')
call SaveReal(ZCC,-'A1B0',3,80)
call SaveBoolean(ZCC,-'A1B1',0,true)
call SaveBoolean(ZCC,-'A1B1',1,true)
call SaveReal(ZCC,-'A1B1',1,60)
call SaveBoolean(ZCC,-'A1B3',0,true)
call SaveBoolean(ZCC,-'A1B3',1,true)
call SaveReal(ZCC,-'A1B3',1,4)
call SaveBoolean(ZCC,-'A1B4',1,true)
call SaveReal(ZCC,-'A1B4',1,'x')
call SaveReal(ZCC,-'A1B4',2,'d')
call SaveReal(ZCC,-'A1B4',3,80)
call SaveBoolean(ZCC,-'A1B6',1,true)
call SaveReal(ZCC,-'A1B6',1,$8C)
call SaveReal(ZCC,-'A1B6',2,'x')
call SaveReal(ZCC,-'A1B6',3,'d')
call SaveBoolean(ZCC,-'A1BX',1,true)
call SaveReal(ZCC,-'A1BX',1,200)
call SaveReal(ZCC,-'A1BX',2,180)
call SaveReal(ZCC,-'A1BX',3,160)
call SaveBoolean(ZCC,-'A1CS',0,true)
call SaveBoolean(ZCC,-'A1CS',1,true)
call SaveReal(ZCC,-'A1CS',1,30)
call SaveBoolean(ZCC,-'A1CV',0,true)
call SaveBoolean(ZCC,-'A1CV',1,true)
call SaveReal(ZCC,-'A1CV',1,$C)
call SaveBoolean(ZCC,-'A1CX',0,true)
call SaveBoolean(ZCC,-'A1CX',1,true)
call SaveReal(ZCC,-'A1CX',1,30)
call SaveBoolean(ZCC,-'A1D6',0,true)
call SaveBoolean(ZCC,-'A1D6',1,true)
call SaveReal(ZCC,-'A1D6',1,$F)
call SaveBoolean(ZCC,-'A1D7',0,true)
call SaveBoolean(ZCC,-'A1D7',1,true)
call SaveReal(ZCC,-'A1D7',1,60)
call SaveBoolean(ZCC,-'A1D8',0,true)
call SaveBoolean(ZCC,-'A1D8',1,true)
call SaveReal(ZCC,-'A1D8',1,20)
call SaveBoolean(ZCC,-'A1D9',0,true)
call SaveBoolean(ZCC,-'A1D9',1,true)
call SaveReal(ZCC,-'A1D9',1,'d')
call SaveReal(ZCC,-'A1DA',1,60)
call SaveReal(ZCC,-'A1DA',2,50)
call SaveReal(ZCC,-'A1DA',3,40)
call SaveBoolean(ZCC,-'A1DB',0,true)
call SaveBoolean(ZCC,-'A1DB',1,true)
call SaveReal(ZCC,-'A1DB',1,40)
call SaveReal(ZCC,-'A1DP',1,32)
call SaveReal(ZCC,-'A1DP',2,30)
call SaveReal(ZCC,-'A1DP',3,28)
call SaveReal(ZCC,-'A1DP',4,26)
call SaveBoolean(ZCC,-'A1E7',0,true)
call SaveReal(ZCC,-'A1E7',1,$E)
call SaveReal(ZCC,-'A1E9',1,12)
call SaveReal(ZCC,-'A1E9',2,11)
call SaveReal(ZCC,-'A1E9',3,10)
call SaveReal(ZCC,-'A1E9',4,9)
call SaveBoolean(ZCC,-'A1EA',0,true)
call SaveReal(ZCC,-'A1EA',1,17)
call SaveBoolean(ZCC,-'A1EF',0,true)
call SaveReal(ZCC,-'A1EF',1,30)
call SaveBoolean(ZCC,-'A21N',0,true)
call SaveReal(ZCC,-'A21N',1,$C)
call SaveReal(ZCC,-'A21M',1,19)
call SaveReal(ZCC,-'A21M',2,16)
call SaveReal(ZCC,-'A21M',3,13)
call SaveReal(ZCC,-'A21M',4,$A)
call SaveBoolean(ZCC,-'A1EJ',0,true)
call SaveBoolean(ZCC,-'A1EJ',1,true)
call SaveReal(ZCC,-'A1EJ',1,30)
call SaveBoolean(ZCC,-'A1EL',0,true)
call SaveReal(ZCC,-'A1EL',1,3)
call SaveBoolean(ZCC,-'A1FY',0,true)
call SaveBoolean(ZCC,-'A1FY',1,true)
call SaveReal(ZCC,-'A1FY',1,$A)
call SaveReal(ZCC,-'A1GU',1,16)
call SaveReal(ZCC,-'A1GU',2,8)
call SaveReal(ZCC,-'A1GU',3,4)
call SaveReal(ZCC,-'A1GU',4,2)
call SaveReal(ZCC,-'A1H5',1,28)
call SaveReal(ZCC,-'A1H5',2,20)
call SaveReal(ZCC,-'A1H5',3,$C)
call SaveReal(ZCC,-'A1H5',4,4)
call SaveReal(ZCC,-'A1HQ',1,50)
call SaveReal(ZCC,-'A1HQ',2,42)
call SaveReal(ZCC,-'A1HQ',3,34)
call SaveReal(ZCC,-'A1HQ',4,26)
call SaveBoolean(ZCC,-'A1HS',0,true)
call SaveReal(ZCC,-'A1HS',1,4)
call SaveReal(ZCC,-'A1IM',1,9)
call SaveReal(ZCC,-'A1IM',2,8)
call SaveReal(ZCC,-'A1IM',3,7)
call SaveReal(ZCC,-'A1IM',4,6)
call SaveBoolean(ZCC,-'A1IN',0,true)
call SaveBoolean(ZCC,-'A1IN',1,true)
call SaveReal(ZCC,-'A1IN',1,60)
call SaveReal(ZCC,-'A1J7',1,20)
call SaveReal(ZCC,-'A1J7',2,16)
call SaveReal(ZCC,-'A1J7',3,$C)
call SaveReal(ZCC,-'A1J7',4,8)
call SaveReal(ZCC,-'A1MG',1,$F)
call SaveReal(ZCC,-'A1MG',2,$D)
call SaveReal(ZCC,-'A1MG',3,$B)
call SaveReal(ZCC,-'A1MG',4,9)
call SaveBoolean(ZCC,-'A1MI',0,true)
call SaveBoolean(ZCC,-'A1MI',1,true)
call SaveReal(ZCC,-'A1MI',1,40)
call SaveBoolean(ZCC,-'A1MR',0,true)
call SaveBoolean(ZCC,-'A1MR',1,true)
call SaveReal(ZCC,-'A1MR',1,6)
call SaveBoolean(ZCC,-'A1MV',1,true)
call SaveReal(ZCC,-'A1MV',1,90)
call SaveReal(ZCC,-'A1MV',2,75)
call SaveReal(ZCC,-'A1MV',3,60)
call SaveBoolean(ZCC,-'A1NA',0,true)
call SaveReal(ZCC,-'A1NA',1,4)
call SaveBoolean(ZCC,-'A1NE',1,true)
call SaveReal(ZCC,-'A1NE',1,$B4)
call SaveReal(ZCC,-'A1NE',2,$A0)
call SaveReal(ZCC,-'A1NE',3,$8C)
call SaveBoolean(ZCC,-'A1NI',0,true)
call SaveReal(ZCC,-'A1NI',1,16)
call SaveBoolean(ZCC,-'A1OB',1,true)
call SaveReal(ZCC,-'A1OB',1,$96)
call SaveReal(ZCC,-'A1OB',2,$82)
call SaveReal(ZCC,-'A1OB',3,'n')
call SaveReal(ZCC,-'A1OP',1,60)
call SaveReal(ZCC,-'A1OP',2,55)
call SaveReal(ZCC,-'A1OP',3,50)
call SaveReal(ZCC,-'A1OP',4,45)
call SaveBoolean(ZCC,-'A1P9',0,true)
call SaveReal(ZCC,-'A1P9',1,$A)
call SaveBoolean(ZCC,-'A1QP',0,true)
call SaveBoolean(ZCC,-'A1QP',1,true)
call SaveReal(ZCC,-'A1QP',1,85)
call SaveReal(ZCC,-'A1QW',1,35)
call SaveReal(ZCC,-'A1QW',2,30)
call SaveReal(ZCC,-'A1QW',3,25)
call SaveReal(ZCC,-'A1QW',4,20)
call SaveBoolean(ZCC,-'A1RD',0,true)
call SaveReal(ZCC,-'A1RD',1,30)
call SaveBoolean(ZCC,-'A1RI',0,true)
call SaveReal(ZCC,-'A1RI',1,$8C)
call SaveBoolean(ZCC,-'A1RJ',0,true)
call SaveReal(ZCC,-'A1RJ',1,36)
call SaveBoolean(ZCC,-'A1RK',0,true)
call SaveBoolean(ZCC,-'A1RK',1,true)
call SaveReal(ZCC,-'A1RK',1,110)
call SaveBoolean(ZCC,-'A1S4',0,true)
call SaveReal(ZCC,-'A1S4',1,2.75)
call SaveReal(ZCC,-'A1S7',1,21)
call SaveReal(ZCC,-'A1S7',2,20)
call SaveReal(ZCC,-'A1S7',3,19)
call SaveReal(ZCC,-'A1S7',4,18)
call SaveReal(ZCC,-'A1S8',1,25)
call SaveReal(ZCC,-'A1S8',2,22)
call SaveReal(ZCC,-'A1S8',3,19)
call SaveReal(ZCC,-'A1S8',4,16)
call SaveBoolean(ZCC,-'A1SB',0,true)
call SaveReal(ZCC,-'A1SB',1,$D)
call SaveReal(ZCC,-'A1SO',1,7)
call SaveReal(ZCC,-'A1SO',2,6.5)
call SaveReal(ZCC,-'A1SO',3,6)
call SaveReal(ZCC,-'A1SO',4,5.5)
call SaveReal(ZCC,-'A1SQ',1,20)
call SaveReal(ZCC,-'A1SQ',2,17)
call SaveReal(ZCC,-'A1SQ',3,$E)
call SaveReal(ZCC,-'A1SQ',4,$B)
call SaveReal(ZCC,-'A1SU',1,$D)
call SaveReal(ZCC,-'A1SU',2,$C)
call SaveReal(ZCC,-'A1SU',3,$B)
call SaveReal(ZCC,-'A1SU',4,$A)
call SaveReal(ZCC,-'A1SW',1,60)
call SaveReal(ZCC,-'A1SW',2,46)
call SaveReal(ZCC,-'A1SW',3,32)
call SaveReal(ZCC,-'A1SW',4,18)
call SaveBoolean(ZCC,-'A1T5',1,true)
call SaveReal(ZCC,-'A1T5',1,55)
call SaveReal(ZCC,-'A1T5',2,50)
call SaveReal(ZCC,-'A1T5',3,45)
call SaveReal(ZCC,-'A1T8',1,20)
call SaveReal(ZCC,-'A1T8',2,18)
call SaveReal(ZCC,-'A1T8',3,16)
call SaveReal(ZCC,-'A1T8',4,$E)
call SaveBoolean(ZCC,-'A1TB',1,true)
call SaveReal(ZCC,-'A1TB',1,90)
call SaveReal(ZCC,-'A1TB',2,75)
call SaveReal(ZCC,-'A1TB',3,60)
call SaveReal(ZCC,-'A1TV',1,12)
call SaveReal(ZCC,-'A1TV',1,11)
call SaveReal(ZCC,-'A1TV',1,10)
call SaveReal(ZCC,-'A1TV',1,9)
call SaveBoolean(ZCC,-'A1U6',1,true)
call SaveReal(ZCC,-'A1U6',1,90)
call SaveReal(ZCC,-'A1U6',2,80)
call SaveReal(ZCC,-'A1U6',3,70)
call SaveBoolean(ZCC,-'A1UV',1,true)
call SaveReal(ZCC,-'A1UV',1,80)
call SaveReal(ZCC,-'A1UV',2,70)
call SaveReal(ZCC,-'A1UV',3,60)
call SaveBoolean(ZCC,-'A1UZ',0,true)
call SaveReal(ZCC,-'A1UZ',1,$C)
call SaveBoolean(ZCC,-'A1VW',0,true)
call SaveBoolean(ZCC,-'A1VW',1,true)
call SaveReal(ZCC,-'A1VW',1,$A0)
call SaveBoolean(ZCC,-'A1W8',1,true)
call SaveReal(ZCC,-'A1W8',1,90)
call SaveReal(ZCC,-'A1W8',2,75)
call SaveReal(ZCC,-'A1W8',3,60)
call SaveBoolean(ZCC,-'A1W9',1,true)
call SaveReal(ZCC,-'A1W9',1,90)
call SaveReal(ZCC,-'A1W9',2,75)
call SaveReal(ZCC,-'A1W9',3,60)
call SaveBoolean(ZCC,-'A1WH',0,true)
call SaveBoolean(ZCC,-'A1WH',1,true)
call SaveReal(ZCC,-'A1WH',1,80)
call SaveReal(ZCC,-'A1YO',1,19)
call SaveReal(ZCC,-'A1YO',2,16)
call SaveReal(ZCC,-'A1YO',3,$D)
call SaveReal(ZCC,-'A1YO',4,$A)
call SaveBoolean(ZCC,-'A1YQ',1,true)
call SaveReal(ZCC,-'A1YQ',1,20)
call SaveReal(ZCC,-'A1YQ',2,16)
call SaveReal(ZCC,-'A1YQ',3,$C)
call SaveBoolean(ZCC,-'A1YR',0,true)
call SaveReal(ZCC,-'A1YR',1,50)
call SaveBoolean(ZCC,-'A1YY',0,true)
call SaveReal(ZCC,-'A1YY',1,20)
call SaveBoolean(ZCC,-'A035',0,true)
call SaveReal(ZCC,-'A035',1,22)
call SaveReal(ZCC,-'A21E',1,$B)
call SaveReal(ZCC,-'A21E',2,$A)
call SaveReal(ZCC,-'A21E',3,9)
call SaveReal(ZCC,-'A21E',4,8)
call SaveBoolean(ZCC,-'A21Q',0,true)
call SaveReal(ZCC,-'A21Q',1,'d')
call SaveReal(ZCC,-'A21Y',1,22)
call SaveReal(ZCC,-'A21Y',2,17)
call SaveReal(ZCC,-'A21Y',3,$C)
call SaveReal(ZCC,-'A21Y',4,5)
call SaveReal(ZCC,-'A226',1,7)
call SaveReal(ZCC,-'A226',2,6)
call SaveReal(ZCC,-'A226',3,5)
call SaveReal(ZCC,-'A226',4,4)
call SaveBoolean(ZCC,-'A229',0,true)
call SaveReal(ZCC,-'A229',1,30)
call SaveBoolean(ZCC,-'A235',1,true)
call SaveBoolean(ZCC,-'A235',1,true)
call SaveReal(ZCC,-'A235',1,55)
call SaveReal(ZCC,-'A235',2,50)
call SaveReal(ZCC,-'A235',3,45)
call SaveBoolean(ZCC,-'A24D',0,true)
call SaveReal(ZCC,-'A24D',1,$C)
call SaveReal(ZCC,-'A26N',1,16)
call SaveReal(ZCC,-'A26N',2,$E)
call SaveReal(ZCC,-'A26N',3,$C)
call SaveReal(ZCC,-'A26N',4,$A)
call SaveBoolean(ZCC,-'A27F',0,true)
call SaveReal(ZCC,-'A27F',1,22)
call SaveReal(ZCC,-'A27G',1,16)
call SaveReal(ZCC,-'A27G',2,$E)
call SaveReal(ZCC,-'A27G',3,$C)
call SaveReal(ZCC,-'A27G',4,$A)
call SaveBoolean(ZCC,-'A27H',1,true)
call SaveReal(ZCC,-'A27H',1,20)
call SaveReal(ZCC,-'A27H',2,18)
call SaveReal(ZCC,-'A27H',3,16)
call SaveBoolean(ZCC,-'A289',0,true)
call SaveBoolean(ZCC,-'A289',1,true)
call SaveReal(ZCC,-'A289',1,45)
call SaveBoolean(ZCC,-'A28Q',0,true)
call SaveReal(ZCC,-'A28Q',1,2)
call SaveBoolean(ZCC,-'A28R',1,true)
call SaveReal(ZCC,-'A28R',1,135)
call SaveReal(ZCC,-'A28R',2,135)
call SaveReal(ZCC,-'A28R',3,135)
call SaveBoolean(ZCC,-'A28S',0,true)
call SaveBoolean(ZCC,-'A28S',1,true)
call SaveReal(ZCC,-'A28S',1,40)
call SaveReal(ZCC,-'A28T',1,30)
call SaveReal(ZCC,-'A28T',2,26)
call SaveReal(ZCC,-'A28T',3,22)
call SaveReal(ZCC,-'A28T',4,18)
call SaveReal(ZCC,-'A2S2',1,30)
call SaveReal(ZCC,-'A2S2',2,26)
call SaveReal(ZCC,-'A2S2',3,22)
call SaveReal(ZCC,-'A2S2',4,18)
call SaveBoolean(ZCC,-'A29G',0,true)
call SaveBoolean(ZCC,-'A29G',1,true)
call SaveReal(ZCC,-'A29G',1,90)
call SaveBoolean(ZCC,-'A29H',0,true)
call SaveBoolean(ZCC,-'A29H',1,true)
call SaveReal(ZCC,-'A29H',1,90)
call SaveBoolean(ZCC,-'A29I',0,true)
call SaveBoolean(ZCC,-'A29I',1,true)
call SaveReal(ZCC,-'A29I',1,$96)
call SaveBoolean(ZCC,-'A2UL',0,true)
call SaveBoolean(ZCC,-'A2UL',1,true)
call SaveReal(ZCC,-'A2UL',1,$96)
call SaveBoolean(ZCC,-'A29J',1,true)
call SaveReal(ZCC,-'A29J',1,'x')
call SaveReal(ZCC,-'A29J',2,'n')
call SaveReal(ZCC,-'A29J',3,'d')
call SaveBoolean(ZCC,-'A29K',0,true)
call SaveReal(ZCC,-'A29K',1,8)
call SaveBoolean(ZCC,-'A29L',1,true)
call SaveReal(ZCC,-'A29L',1,'x')
call SaveReal(ZCC,-'A29L',2,'n')
call SaveReal(ZCC,-'A29L',3,'d')
call SaveBoolean(ZCC,-'A2A8',0,true)
call SaveReal(ZCC,-'A2A8',1,$C)
call SaveReal(ZCC,-'A2BE',1,5)
call SaveReal(ZCC,-'A2BE',2,4)
call SaveReal(ZCC,-'A2BE',3,3)
call SaveReal(ZCC,-'A2BE',4,2)
call SaveBoolean(ZCC,-'A2BG',1,true)
call SaveReal(ZCC,-'A2BG',1,60)
call SaveReal(ZCC,-'A2BG',2,40)
call SaveReal(ZCC,-'A2BG',3,20)
call SaveBoolean(ZCC,-'A2CI',0,true)
call SaveBoolean(ZCC,-'A2CI',1,true)
call SaveReal(ZCC,-'A2CI',1,50)
call SaveReal(ZCC,-'A2DW',1,$C)
call SaveReal(ZCC,-'A2DW',2,$A)
call SaveReal(ZCC,-'A2DW',3,8)
call SaveReal(ZCC,-'A2DW',4,6)
call SaveBoolean(ZCC,-'A2DX',0,true)
call SaveReal(ZCC,-'A2DX',1,30)
call SaveBoolean(ZCC,-'A2E0',0,true)
call SaveReal(ZCC,-'A2E0',1,1)
call SaveBoolean(ZCC,-'A2E3',0,true)
call SaveReal(ZCC,-'A2E3',1,4)
call SaveBoolean(ZCC,-'A2E5',0,true)
call SaveBoolean(ZCC,-'A2E5',1,true)
call SaveReal(ZCC,-'A2E5',1,8)
call SaveBoolean(ZCC,-'A2EE',0,true)
call SaveReal(ZCC,-'A2EE',1,$A)
call SaveBoolean(ZCC,-'A2F0',0,true)
call SaveReal(ZCC,-'A2F0',1,$C)
call SaveBoolean(ZCC,-'A2F4',0,true)
call SaveReal(ZCC,-'A2F4',1,18)
call SaveBoolean(ZCC,-'A2F5',0,true)
call SaveReal(ZCC,-'A2F5',1,60)
call SaveBoolean(ZCC,-'A2FK',0,true)
call SaveReal(ZCC,-'A2FK',1,6)
call SaveReal(ZCC,-'A2H0',1,30)
call SaveReal(ZCC,-'A2H0',2,22)
call SaveReal(ZCC,-'A2H0',3,$E)
call SaveReal(ZCC,-'A2H0',4,6)
call SaveReal(ZCC,-'A2H3',1,$E)
call SaveReal(ZCC,-'A2H3',2,$C)
call SaveReal(ZCC,-'A2H3',3,$A)
call SaveReal(ZCC,-'A2H3',4,8)
call SaveBoolean(ZCC,-'A2HA',0,true)
call SaveReal(ZCC,-'A2HA',1,4)
call SaveReal(ZCC,-'A2HB',1,$A)
call SaveReal(ZCC,-'A2HB',2,9)
call SaveReal(ZCC,-'A2HB',3,8)
call SaveReal(ZCC,-'A2HB',4,7)
call SaveBoolean(ZCC,-'A2HD',0,true)
call SaveReal(ZCC,-'A2HD',1,$F)
call SaveBoolean(ZCC,-'A2HG',0,true)
call SaveReal(ZCC,-'A2HG',1,20)
call SaveBoolean(ZCC,-'A2HN',0,true)
call SaveReal(ZCC,-'A2HN',1,$E)
call SaveBoolean(ZCC,-'A2HS',0,true)
call SaveReal(ZCC,-'A2HS',1,35)
call SaveBoolean(ZCC,-'A2IG',1,true)
call SaveReal(ZCC,-'A2IG',1,$B4)
call SaveReal(ZCC,-'A2IG',2,$A0)
call SaveReal(ZCC,-'A2IG',3,$8C)
call SaveReal(ZCC,-'A2IS',1,32)
call SaveReal(ZCC,-'A2IS',2,26)
call SaveReal(ZCC,-'A2IS',3,20)
call SaveReal(ZCC,-'A2IS',4,$E)
call SaveReal(ZCC,-'A2IT',1,18)
call SaveReal(ZCC,-'A2IT',2,16)
call SaveReal(ZCC,-'A2IT',3,14)
call SaveReal(ZCC,-'A2IT',4,$C)
call SaveReal(ZCC,-'A2J2',1,16)
call SaveReal(ZCC,-'A2J2',2,$F)
call SaveReal(ZCC,-'A2J2',3,$E)
call SaveReal(ZCC,-'A2J2',4,$D)
call SaveBoolean(ZCC,-'A2JB',0,true)
call SaveReal(ZCC,-'A2JB',1,15)
call SaveReal(ZCC,-'A2KO',1,22)
call SaveReal(ZCC,-'A2KO',2,18)
call SaveReal(ZCC,-'A2KO',3,14)
call SaveReal(ZCC,-'A2KO',4,$A)
call SaveBoolean(ZCC,-'A2KU',0,true)
call SaveReal(ZCC,-'A2KU',1,$A)
call SaveReal(ZCC,-'A2KZ',1,22)
call SaveReal(ZCC,-'A2KZ',2,18)
call SaveReal(ZCC,-'A2KZ',3,$E)
call SaveReal(ZCC,-'A2KZ',4,$A)
call SaveBoolean(ZCC,-'A2LA',0,true)
call SaveReal(ZCC,-'A2LA',1,7)
call SaveReal(ZCC,-'A2LB',1,17)
call SaveReal(ZCC,-'A2LB',2,16)
call SaveReal(ZCC,-'A2LB',3,$F)
call SaveReal(ZCC,-'A2LB',4,$E)
call SaveBoolean(ZCC,-'A2LL',0,true)
call SaveReal(ZCC,-'A2LL',1,4)
call SaveReal(ZCC,-'A2LM',1,35)
call SaveReal(ZCC,-'A2LM',2,30)
call SaveReal(ZCC,-'A2LM',3,25)
call SaveReal(ZCC,-'A2LM',4,20)
call SaveBoolean(ZCC,-'A2M0',1,true)
call SaveReal(ZCC,-'A2M0',1,40)
call SaveReal(ZCC,-'A2M0',2,35)
call SaveReal(ZCC,-'A2M0',3,30)
call SaveBoolean(ZCC,-'A2M1',0,true)
call SaveReal(ZCC,-'A2M1',1,18)
call SaveReal(ZCC,-'A2ML',1,32)
call SaveReal(ZCC,-'A2ML',2,26)
call SaveReal(ZCC,-'A2ML',3,20)
call SaveReal(ZCC,-'A2ML',4,$E)
call SaveReal(ZCC,-'A2NE',1,50)
call SaveReal(ZCC,-'A2NE',2,40)
call SaveReal(ZCC,-'A2NE',3,30)
call SaveReal(ZCC,-'A2NE',4,20)
call SaveReal(ZCC,-'A2NT',1,30)
call SaveReal(ZCC,-'A2NT',2,24)
call SaveReal(ZCC,-'A2NT',3,18)
call SaveReal(ZCC,-'A2NT',4,$C)
call SaveBoolean(ZCC,-'A2O2',0,true)
call SaveReal(ZCC,-'A2O2',1,'x')
call SaveBoolean(ZCC,-'A2O6',1,true)
call SaveReal(ZCC,-'A2O6',1,90)
call SaveReal(ZCC,-'A2O6',2,75)
call SaveReal(ZCC,-'A2O6',3,60)
call SaveBoolean(ZCC,-'A2OI',0,true)
call SaveReal(ZCC,-'A2OI',1,$A)
call SaveBoolean(ZCC,-'A2ON',0,true)
call SaveReal(ZCC,-'A2ON',1,8)
call SaveBoolean(ZCC,-'A2SU',0,true)
call SaveBoolean(ZCC,-'A2SU',1,true)
call SaveReal(ZCC,-'A2SU',1,$82)
call SaveBoolean(ZCC,-'A2SE',0,true)
call SaveBoolean(ZCC,-'A2SE',1,true)
call SaveReal(ZCC,-'A2SE',1,40)
call SaveBoolean(ZCC,-'A2V5',0,true)
call SaveReal(ZCC,-'A2V5',1,$D)
call SaveReal(ZCC,-'A2V1',1,$F)
call SaveReal(ZCC,-'A2V1',2,$C)
call SaveReal(ZCC,-'A2V1',3,9)
call SaveReal(ZCC,-'A2V1',4,6)
call SaveBoolean(ZCC,-'A2U2',0,true)
call SaveBoolean(ZCC,-'A2U2',1,true)
call SaveReal(ZCC,-'A2U2',1,$96)
call SaveBoolean(ZCC,-'A2V3',0,true)
call SaveReal(ZCC,-'A2V3',1,2.25)
call SaveBoolean(ZCC,-'A2XP',0,true)
call SaveReal(ZCC,-'A2XP',1,1)
call SaveReal(ZCC,-'A2SQ',1,20)
call SaveReal(ZCC,-'A2SQ',2,$F)
call SaveReal(ZCC,-'A2SQ',3,$A)
call SaveReal(ZCC,-'A2V2',1,16)
call SaveReal(ZCC,-'A2V2',2,$D)
call SaveReal(ZCC,-'A2V2',3,$A)
call SaveReal(ZCC,-'A2V2',4,7)
call SaveReal(ZCC,-'A2WJ',1,$F)
call SaveReal(ZCC,-'A2WJ',2,$C)
call SaveReal(ZCC,-'A2WJ',3,9)
call SaveReal(ZCC,-'A2WJ',4,6)
call SaveBoolean(ZCC,-'A2V0',1,true)
call SaveReal(ZCC,-'A2V0',1,90)
call SaveReal(ZCC,-'A2V0',2,60)
call SaveReal(ZCC,-'A2V0',3,30)
call SaveBoolean(ZCC,-'A2V7',0,true)
call SaveBoolean(ZCC,-'A2V7',1,true)
call SaveReal(ZCC,-'A2V7',1,80)
call SaveReal(ZCC,-'A2V4',1,16)
call SaveReal(ZCC,-'A2V4',2,$C)
call SaveReal(ZCC,-'A2V4',3,8)
call SaveReal(ZCC,-'A2V4',4,4)
call SaveBoolean(ZCC,-'A2TT',0,true)
call SaveReal(ZCC,-'A2TT',1,19)
call SaveReal(ZCC,-'A2SA',1,20)
call SaveReal(ZCC,-'A2SA',2,$A)
call SaveReal(ZCC,-'A2SA',3,5)
call SaveBoolean(ZCC,-'A2SL',1,true)
call SaveReal(ZCC,-'A2SL',1,200)
call SaveReal(ZCC,-'A2SL',2,180)
call SaveReal(ZCC,-'A2SL',3,160)
call SaveReal(ZCC,-'A2V6',1,22)
call SaveReal(ZCC,-'A2V6',2,18)
call SaveReal(ZCC,-'A2V6',3,$E)
call SaveReal(ZCC,-'A2V6',4,$A)
call SaveBoolean(ZCC,-'A2UO',1,true)
call SaveReal(ZCC,-'A2UO',1,90)
call SaveReal(ZCC,-'A2UO',2,80)
call SaveReal(ZCC,-'A2UO',3,70)
call SaveBoolean(ZCC,-'A2TZ',0,true)
call SaveBoolean(ZCC,-'A2TZ',1,true)
call SaveReal(ZCC,-'A2TZ',1,2)
call SaveBoolean(ZCC,-'A2UR',0,true)
call SaveReal(ZCC,-'A2UR',1,$E)
call SaveBoolean(ZCC,-'A2WE',0,true)
call SaveBoolean(ZCC,-'A2WE',1,true)
call SaveReal(ZCC,-'A2WE',1,70)
call SaveBoolean(ZCC,-'A0QB',0,true)
call SaveReal(ZCC,-'A0QB',1,$D)
call SaveBoolean(ZCC,-'A2QB',0,true)
call SaveReal(ZCC,-'A2QB',1,6)
call SaveReal(ZCC,-'A2X6',1,$F)
call SaveReal(ZCC,-'A2X6',2,$D)
call SaveReal(ZCC,-'A2X6',3,$B)
call SaveReal(ZCC,-'A2X6',4,9)
call SaveReal(ZCC,-'A2X8',1,29)
call SaveReal(ZCC,-'A2X8',2,26)
call SaveReal(ZCC,-'A2X8',3,23)
call SaveReal(ZCC,-'A2X8',4,20)
call SaveReal(ZCC,-'A2X9',1,$C)
call SaveReal(ZCC,-'A2X9',2,$A)
call SaveReal(ZCC,-'A2X9',3,8)
call SaveReal(ZCC,-'A2X9',4,6)
call SaveBoolean(ZCC,-'A30P',0,true)
call SaveBoolean(ZCC,-'A30P',1,true)
call SaveReal(ZCC,-'A30P',1,80)
call SaveBoolean(ZCC,-'A30S',0,true)
call SaveBoolean(ZCC,-'A30S',1,true)
call SaveReal(ZCC,-'A30S',1,'d')
call SaveReal(ZCC,-'A2W7',1,25)
call SaveReal(ZCC,-'A2W7',2,20)
call SaveReal(ZCC,-'A2W7',3,$F)
call SaveReal(ZCC,-'A2W7',4,$A)
call SaveBoolean(ZCC,-'A315',0,true)
call SaveBoolean(ZCC,-'A315',1,true)
call SaveReal(ZCC,-'A315',1,'n')
call SaveBoolean(ZCC,-'A31F',0,true)
call SaveReal(ZCC,-'A31F',1,50)
call SaveBoolean(ZCC,-'A2SY',0,true)
call SaveBoolean(ZCC,-'A2SY',1,true)
call SaveReal(ZCC,-'A2SY',1,80)
call SaveBoolean(ZCC,-'A2SH',0,true)
call SaveBoolean(ZCC,-'A2SH',1,true)
call SaveReal(ZCC,-'A2SH',1,8)
call SaveBoolean(ZCC,-'A324',0,true)
call SaveBoolean(ZCC,-'A324',1,true)
call SaveReal(ZCC,-'A324',1,70)
call SaveBoolean(ZCC,-'A338',0,true)
call SaveReal(ZCC,-'A338',1,60)
call SaveBoolean(ZCC,-'A384',1,true)
call SaveReal(ZCC,-'A384',1,90)
call SaveReal(ZCC,-'A384',2,75)
call SaveReal(ZCC,-'A384',3,60)
call SaveBoolean(ZCC,-'A2SB',0,true)
call SaveBoolean(ZCC,-'A2SB',1,true)
call SaveReal(ZCC,-'A2SB',1,50)
call SaveBoolean(ZCC,-'A2SR',1,true)
call SaveReal(ZCC,-'A2SR',1,$B4)
call SaveReal(ZCC,-'A2SR',2,'x')
call SaveReal(ZCC,-'A2SR',3,60)
call SaveReal(ZCC,-'A3CY',1,28)
call SaveReal(ZCC,-'A3CY',2,20)
call SaveReal(ZCC,-'A3CY',3,$C)
call SaveReal(ZCC,-'A3CY',4,4)
call SaveBoolean(ZCC,-'A3D0',0,true)
call SaveReal(ZCC,-'A3D0',1,9)
call SaveBoolean(ZCC,-'A3D1',1,true)
call SaveReal(ZCC,-'A3D1',1,70)
call SaveReal(ZCC,-'A3D1',2,60)
call SaveReal(ZCC,-'A3D1',3,50)
call SaveBoolean(ZCC,-'A3DE',1,true)
call SaveReal(ZCC,-'A3DE',1,20)
call SaveReal(ZCC,-'A3DE',2,16)
call SaveReal(ZCC,-'A3DE',3,$C)
call SaveBoolean(ZCC,-'A2UX',0,true)
call SaveBoolean(ZCC,-'A2UX',1,true)
call SaveReal(ZCC,-'A2UX',1,15)
call SaveBoolean(ZCC,-'A3DR',0,true)
call SaveBoolean(ZCC,-'A3DR',1,true)
call SaveReal(ZCC,-'A3DR',1,'d')
call SaveBoolean(ZCC,-'Acdh',0,true)
call SaveReal(ZCC,-'Acdh',1,8)
call SaveReal(ZCC,-'AEbl',1,$C)
call SaveReal(ZCC,-'AEbl',2,9)
call SaveReal(ZCC,-'AEbl',3,7)
call SaveReal(ZCC,-'AEbl',4,5)
call SaveBoolean(ZCC,-'AEfn',0,true)
call SaveReal(ZCC,-'AEfn',1,37)
call SaveBoolean(ZCC,-'AHtb',0,true)
call SaveReal(ZCC,-'AHtb',1,8)
call SaveBoolean(ZCC,-'ANcr',0,true)
call SaveBoolean(ZCC,-'ANcr',1,true)
call SaveReal(ZCC,-'ANcr',1,45)
call SaveBoolean(ZCC,-'S008',0,true)
call SaveBoolean(ZCC,-'S008',1,true)
call SaveReal(ZCC,-'S008',1,$A5)
call SaveBoolean(ZCC,-'S00U',0,true)
call SaveBoolean(ZCC,-'S00U',1,true)
call SaveReal(ZCC,-'S00U',1,$A5)
call SaveReal(ZCC,-'A0VN',1,55)
call SaveReal(ZCC,-'A0VS',1,30)
call SaveReal(ZCC,-'A0VK',1,30)
call SaveReal(ZCC,-'A0VQ',1,$F)
call SaveReal(ZCC,-'A0XL',1,35)
call SaveBoolean(ZCC,-'A0XL',0,true)
call SaveReal(ZCC,-'A0VM',1,40)
call SaveReal(ZCC,-'A0VO',1,30)
call SaveReal(ZCC,-'A0VG',1,25)
call SaveReal(ZCC,-'A0VP',1,25)
call SaveReal(ZCC,-'A0VZ',1,20)
call SaveReal(ZCC,-'A3CZ',1,23)
call SaveReal(ZCC,-'A3CZ',2,20)
call SaveReal(ZCC,-'A3CZ',3,17)
call SaveReal(ZCC,-'A3CZ',4,$E)
call SaveReal(ZCC,-'A3CY',1,28)
call SaveReal(ZCC,-'A3CY',2,20)
call SaveReal(ZCC,-'A3CY',3,$C)
call SaveReal(ZCC,-'A3CY',4,4)
call SaveReal(ZCC,-'A3D0',1,9)
call SaveBoolean(ZCC,-'A3D0',0,true)
call SaveReal(ZCC,-'A10U',1,$F)
call SaveReal(ZCC,-'A11Y',1,$F)
call SaveReal(ZCC,-'A11Y',1,$F)
call SaveReal(ZCC,-'A1N1',1,$F)
call SaveReal(ZCC,-'A11V',1,16)
call SaveReal(ZCC,-'A11W',1,$C)
call SaveReal(ZCC,-'A11X',1,20)
call SaveReal(ZCC,-'A3DF',1,$C)
call SaveReal(ZCC,-'A10R',1,70)
call SaveReal(ZCC,-'A10R',2,60)
call SaveReal(ZCC,-'A10R',3,50)
call SaveReal(ZCC,-'A10R',4,40)
call SaveReal(ZCC,-'A1OQ',1,4)
call SaveReal(ZCC,-'A1OR',1,5)
call SaveReal(ZCC,-'A1OS',1,$C)
call SaveReal(ZCC,-'A1OT',1,18)
call SaveReal(ZCC,-'A1OU',1,5)
call SaveReal(ZCC,-'A1OV',1,8)
call SaveReal(ZCC,-'A1P0',1,20)
call SaveReal(ZCC,-'A1P4',1,70)
call SaveReal(ZCC,-'A1P5',1,25)
call SaveReal(ZCC,-'A1P6',1,20)
call SaveReal(ZCC,-'A37K',1,30)
call SaveReal(ZCC,-'A0FH',1,$A)
call SaveBoolean(ZCC,-'A0FH',0,true)
call SaveReal(ZCC,-'A0F0',1,$A)
call SaveBoolean(ZCC,-'A0F0',0,true)
call SaveReal(ZCC,-'A08C',1,$C)
call SaveBoolean(ZCC,-'A08C',0,true)
call SaveReal(ZCC,-'A1YX',1,45)
call SaveReal(ZCC,-'A1YX',2,40)
call SaveReal(ZCC,-'A1YX',3,35)
call SaveReal(ZCC,-'A1YX',4,30)
call SaveReal(ZCC,-'A2SI',1,8)
call SaveBoolean(ZCC,-'A2SI',0,true)
call SaveReal(ZCC,-'A01V',1,25)
call SaveReal(ZCC,-'A007',1,$F)
call SaveBoolean(ZCC,-'A007',0,true)
call SaveReal(ZCC,-'A01T',1,$F)
call SaveBoolean(ZCC,-'A01T',0,true)
call SaveReal(ZCC,-'A00F',1,$F)
call SaveBoolean(ZCC,-'A00F',0,true)
call SaveReal(ZCC,-'A089',1,$A)
call SaveBoolean(ZCC,-'A089',0,true)
call SaveReal(ZCC,-'A08A',1,8)
call SaveBoolean(ZCC,-'A08A',0,true)
call SaveReal(ZCC,-'A08D',1,6)
call SaveBoolean(ZCC,-'A08D',0,true)
call SaveReal(ZCC,-'A08F',1,$F)
call SaveBoolean(ZCC,-'A08F',0,true)
call SaveReal(ZCC,-'A08G',1,$A)
call SaveBoolean(ZCC,-'A08G',0,true)
call SaveReal(ZCC,-'A08I',1,5)
call SaveBoolean(ZCC,-'A08I',0,true)
call SaveReal(ZCC,-'A06N',1,7)
call SaveBoolean(ZCC,-'A06N',0,true)
call SaveReal(ZCC,-'A072',1,6)
call SaveBoolean(ZCC,-'A072',0,true)
call SaveReal(ZCC,-'A074',1,5)
call SaveBoolean(ZCC,-'A074',0,true)
call SaveReal(ZCC,-'A078',1,4)
call SaveBoolean(ZCC,-'A078',0,true)
call SaveReal(ZCC,-'A04N',1,$91)
call SaveBoolean(ZCC,-'A04N',0,true)
call SaveReal(ZCC,-'A04M',1,$91)
call SaveBoolean(ZCC,-'A04M',0,true)
call SaveReal(ZCC,-'A04J',1,$91)
call SaveBoolean(ZCC,-'A04J',0,true)
call SaveReal(ZCC,-'A03J',1,$91)
call SaveBoolean(ZCC,-'A03J',0,true)
call SaveReal(ZCC,-'A07H',1,$E)
call SaveBoolean(ZCC,-'A07H',0,true)
call SaveReal(ZCC,-'A07I',1,$D)
call SaveBoolean(ZCC,-'A07I',0,true)
call SaveReal(ZCC,-'A07J',1,$C)
call SaveBoolean(ZCC,-'A07J',0,true)
call SaveReal(ZCC,-'A07M',1,$B)
call SaveBoolean(ZCC,-'A07M',0,true)
endfunction
function Fee takes unit WI7,integer V77 returns nothing
call SetUnitAbilityLevel(WI7,'A1R5',V77)
call SetUnitAbilityLevel(WI7,'A1FD',V77)
call SetUnitAbilityLevel(WI7,'A1T7',V77)
call SetUnitAbilityLevel(WI7,'A1ZI',V77)
call SetUnitAbilityLevel(WI7,'A206',V77)
call SetUnitAbilityLevel(WI7,'A2RV',V77)
call SetUnitAbilityLevel(WI7,'A2K1',V77)
call SetUnitAbilityLevel(WI7,'A2LI',V77)
call SetUnitAbilityLevel(WI7,'A2Q6',V77)
call SetUnitAbilityLevel(WI7,'A2QF',V77)
call SetUnitAbilityLevel(WI7,'A2QK',V77)
call SetUnitAbilityLevel(WI7,'A2R8',V77)
call SetUnitAbilityLevel(WI7,'A2R1',V77)
call SetUnitAbilityLevel(WI7,'A2RF',V77)
call SetUnitAbilityLevel(WI7,'A2RO',V77)
call SetUnitAbilityLevel(WI7,'A2RS',V77)
call SetUnitAbilityLevel(WI7,'A2S0',V77)
call SetUnitAbilityLevel(WI7,'ACch',V77)
call SetUnitAbilityLevel(WI7,'A15W',V77)
call SetUnitAbilityLevel(WI7,'AIda',V77)
call SetUnitAbilityLevel(WI7,'A11F',V77)
call SetUnitAbilityLevel(WI7,'A11E',V77)
call SetUnitAbilityLevel(WI7,'A0S3',V77)
call SetUnitAbilityLevel(WI7,'A11D',V77)
call SetUnitAbilityLevel(WI7,'A11G',V77)
call SetUnitAbilityLevel(WI7,'A11H',V77)
call SetUnitAbilityLevel(WI7,'A0T9',V77)
call SetUnitAbilityLevel(WI7,'A1WE',V77)
call SetUnitAbilityLevel(WI7,'A0B8',V77)
call SetUnitAbilityLevel(WI7,'AChx',V77)
call SetUnitAbilityLevel(WI7,'A0FD',V77)
call SetUnitAbilityLevel(WI7,'A19M',V77)
call SetUnitAbilityLevel(WI7,'A02O',V77)
call SetUnitAbilityLevel(WI7,'A08Y',V77)
call SetUnitAbilityLevel(WI7,'A08Z',V77)
call SetUnitAbilityLevel(WI7,'A090',V77)
call SetUnitAbilityLevel(WI7,'A092',V77)
call SetUnitAbilityLevel(WI7,'A0HB',V77)
call SetUnitAbilityLevel(WI7,'A0D3',V77)
call SetUnitAbilityLevel(WI7,'A0DF',V77)
call SetUnitAbilityLevel(WI7,'A02W',V77)
call SetUnitAbilityLevel(WI7,'A28D',V77)
call SetUnitAbilityLevel(WI7,'A2EA',V77)
call SetUnitAbilityLevel(WI7,'A0CK',V77)
call SetUnitAbilityLevel(WI7,'A0K7',V77)
call SetUnitAbilityLevel(WI7,'A1EW',V77)
call SetUnitAbilityLevel(WI7,'A1MO',V77)
call SetUnitAbilityLevel(WI7,'A1ZW',V77)
call SetUnitAbilityLevel(WI7,'A2K7',V77)
call SetUnitAbilityLevel(WI7,'A017',V77)
call SetUnitAbilityLevel(WI7,'A1QD',V77)
call SetUnitAbilityLevel(WI7,'A1FP',V77)
call SetUnitAbilityLevel(WI7,'AIxk',V77)
call SetUnitAbilityLevel(WI7,'A0JL',V77)
call SetUnitAbilityLevel(WI7,'A2K4',V77)
call SetUnitAbilityLevel(WI7,'A231',V77)
call SetUnitAbilityLevel(WI7,'A28Y',V77)
call SetUnitAbilityLevel(WI7,'A12W',V77)
call SetUnitAbilityLevel(WI7,'A1Q8',V77)
call SetUnitAbilityLevel(WI7,'A0JY',V77)
call SetUnitAbilityLevel(WI7,'AIbk',V77)
call SetUnitAbilityLevel(WI7,'A1AC',V77)
call SetUnitAbilityLevel(WI7,'AItb',V77)
call SetUnitAbilityLevel(WI7,'A32X',V77)
endfunction
function OIv takes nothing returns nothing
call Fee(IN4,1)
endfunction
function ORv takes nothing returns boolean
local unit p5=GetTriggerUnit()
if GetItemTypeId(GetManipulatedItem())==ZU[R1Q]then
if MU7(p5,ZU[R1Q],GetManipulatedItem())==null then
set IN4=p5
call ExecuteFunc("OIv")
endif
set p5=null
return false
endif
set p5=null
return false
endfunction
function ONv takes nothing returns nothing
local timer t=GetExpiredTimer()
if GetWidgetLife(LoadItemHandle(L7,GetHandleId(t),0))<.405 then
call SetWidgetLife(LoadItemHandle(L7,GetHandleId(t),0),1.)
call RemoveItem(LoadItemHandle(L7,GetHandleId(t),0))
endif
call FlushChildHashtable(L7,GetHandleId(t))
call DestroyTimer(t)
set t=null
endfunction
function Obv takes nothing returns boolean
local timer t
if(GetWidgetLife(GetManipulatedItem())==0)then
set t=CreateTimer()
call TimerStart(t,.0,false,function ONv)
call SaveItemHandle(L7,GetHandleId(t),0,GetManipulatedItem())
set t=null
endif
return false
endfunction
function Dte takes unit u,integer id returns boolean
if id=='ANcr' then
return GetUnitTypeId(u)!='N01I'
elseif id=='A03G' then
return GetUnitTypeId(u)!='Hlgr'
elseif id=='A093' then
return GetUnitTypeId(u)!='U008'
elseif id=='A19Z' then
return GetUnitTypeId(u)!='O016'
elseif id=='A1RI' then
return GetUnitTypeId(u)!='Eevi'
elseif id=='A1TX' then
return GetUnitTypeId(u)!='E02N'
elseif id=='A1WH' then
return GetUnitTypeId(u)!='H001'
elseif id=='A2SY' then
return GetUnitTypeId(u)!='H001'
elseif id=='A11T' then
return GetUnitTypeId(u)!='Hblm'
elseif id=='A15J' then
return GetUnitTypeId(u)!='H00R'
elseif id=='A2NE' then
return GetUnitTypeId(u)!='N0M7'
endif
return false
endfunction
function R7o takes unit BB7,unit u returns nothing
if GetUnitAbilityLevel(BB7,'A0HG')>0 then
call B67(M7[GetPlayerId(GetOwningPlayer(BB7))],u,1,40+40*GetUnitAbilityLevel(BB7,'A0HG'))
elseif GetUnitAbilityLevel(BB7,'A32W')>0 then
call B67(M7[GetPlayerId(GetOwningPlayer(BB7))],u,1,(40+40*GetUnitAbilityLevel(BB7,'A0HG'))*.4)
if IsUnitIdType(GetUnitTypeId(u),UNIT_TYPE_HERO)then
call SetWidgetLife(BB7,GetWidgetLife(BB7)-1)
endif
endif
endfunction
function FAe takes nothing returns nothing
local integer id=GetSpellAbilityId()
local unit u=GetTriggerUnit()
if Dte(u,id)then
set u=null
return
endif
if HaveSavedString(ZCS,0,id)then
call ExecuteFunc(LoadStr(ZCS,0,id))
endif
if GetUnitAbilityLevel(u,'A2VW')==1 then
call EE5(u,id,true,25)
call Fee(u,2)
endif
set u=null
endfunction
function nPv takes unit u,unit t returns boolean
local integer id=GetUnitTypeId(t)
if TV7(GetOwningPlayer(u))then
return id=='u00M' or id=='u00D' or id=='u00N' or id=='u00T'
else
return id=='e00R' or id=='e011' or id=='e00S' or id=='e019'
endif
endfunction
function Ffe takes nothing returns boolean
local unit m5
local unit ZX7
local unit IH7
local real YM7
local integer OB7
local real Fge
local player p
if Gge==false then
return false
endif
set m5=GetTriggerUnit()
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
set ZX7=GetEventDamageSource()
set bj_cineModePriorFogSetting=(TX7(GetOwningPlayer(ZX7))or TX7(GetOwningPlayer(m5)))
set YM7=GetEventDamage()
set Fge=.0
set bj_cineModePriorDawnDusk=IsUnitType(m5,UNIT_TYPE_HERO)
if bj_cineModePriorFogSetting then
if GetUnitTypeId(ZX7)==1697656901 then
call R1R(m5)
elseif GetUnitTypeId(ZX7)==1697657904 then
call R7o(ZX7,m5)
endif
endif
if YM7>0 and YM7<9000 then
if(GetUnitAbilityLevel(ZX7,'Aloc')==1)and IsUnitType(ZX7,UNIT_TYPE_HERO)==false then
set IH7=pI4[GetPlayerId(GetOwningPlayer(ZX7))]
else
set IH7=ZX7
endif
if bj_cineModePriorFogSetting then
set OB7=GetHandleId(m5)
set p=GetOwningPlayer(ZX7)
if p!=Z7[0]and p!=A7[0]and p!=B7 then
if bj_cineModePriorDawnDusk then
set yv[GetPlayerId(p)]=yv[GetPlayerId(p)]+R2I(YM7)
elseif IsUnitType(m5,UNIT_TYPE_STRUCTURE)then
if nPv(ZX7,m5)then
set Yvv[GetPlayerId(p)]=Yvv[GetPlayerId(p)]+R2I(YM7)
endif
endif
if GetUnitAbilityLevel(IH7,'A2VW')==1 and GetWidgetLife(IH7)>=1 then
if GetUnitCurrentOrder(ZX7)==$D0207 and(GetUnitAbilityLevel(ZX7,'A0CC')!=0 or GetUnitAbilityLevel(ZX7,'A02Z')!=0)then
if bj_cineModePriorDawnDusk then
call SetWidgetLife(ZX7,YM7*.25+GetWidgetLife(ZX7))
else
call SetWidgetLife(ZX7,YM7*.05+GetWidgetLife(ZX7))
endif
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\SpellFizzle.mdx",ZX7,"overhead"))
elseif V00==false and(GetUnitAbilityLevel(ZX7,'Aloc')==1 or Fe)then
if bj_cineModePriorDawnDusk then
call SetWidgetLife(IH7,YM7*.25+GetWidgetLife(IH7))
else
call SetWidgetLife(IH7,YM7*.05+GetWidgetLife(IH7))
endif
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\SpellFizzle.mdx",IH7,"overhead"))
endif
endif
endif
endif
endif
endif
set m5=null
set ZX7=null
return false
endfunction
function FGe takes nothing returns boolean
local unit u=GetTriggerUnit()
local integer OB7=GetHandleId(u)
if GetUnitAbilityLevel(u,'Aloc')==0 and GetOwningPlayer(u)!=Player($F)then
call TriggerRegisterUnitEvent(JJe,u,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(JJe,u,EVENT_UNIT_ATTACKED)
endif
set u=null
return false
endfunction
function MGO takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=(LoadUnitHandle(L7,(OB7),(2)))
call SetItemCharges(MV7(WI7,ZU[DI4]),GetItemCharges(MV7(WI7,ZU[DI4]))+1)
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
if GetUnitTypeId(WI7)==1315988077 then
set YM4=WI7
endif
call KillUnit(WI7)
set WI7=null
set t=null
return false
endfunction
function MHO takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call SaveUnitHandle(L7,(OB7),(2),(WI7))
call TriggerAddCondition(t,Condition(function MGO))
call TriggerRegisterTimerEvent(t,0.01,false)
set t=null
set WI7=null
endfunction
function MZO takes nothing returns nothing
if GetSpellAbilityId()==1093816888 then
call MHO()
endif
endfunction
function kUU takes unit u returns boolean
local integer id=GetUnitTypeId(u)
return id=='o018' or id=='o002' or id=='o00B' or id=='o01B'
endfunction
function KUU takes unit u returns boolean
local integer id=GetUnitTypeId(u)
return id=='n00Q' or id=='n00O' or id=='n00P' or id=='n00N'
endfunction
function lUU takes unit u returns boolean
local integer id=GetUnitTypeId(u)
return kUU(u)or KUU(u)or id=='otot'
endfunction
function Aov takes nothing returns nothing
if IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==false then
call B67(GetTriggerUnit(),GetSpellTargetUnit(),10,999999)
endif
endfunction
function Arv takes nothing returns nothing
local integer id=GetUnitTypeId(GetSpellTargetUnit())
call SetUnitAbilityLevel(GetTriggerUnit(),'A2S0',1)
if id=='o004' or id=='oeye' or lUU(GetSpellTargetUnit())then
call Aov()
else
call SetUnitState(GetSpellTargetUnit(),UNIT_STATE_LIFE,GetUnitState(GetSpellTargetUnit(),UNIT_STATE_LIFE)*0.6)
call SetUnitAbilityLevel(GetTriggerUnit(),'A2S0',2)
endif
endfunction
function ARv takes nothing returns nothing
local integer id=GetUnitTypeId(GetSpellTargetUnit())
if id=='o004' or id=='oeye' or lUU(GetSpellTargetUnit())then
call Aov()
endif
endfunction
function MaO takes nothing returns nothing
if GetSpellAbilityId()=='A2S0' then
call Arv()
endif
endfunction
function MAO takes nothing returns nothing
if GetSpellAbilityId()=='A1FD' then
call ARv()
endif
endfunction
function EEG takes integer BC7 returns integer
if BC7==1 then
return 25
elseif BC7==2 then
return 41
elseif BC7==3 then
return 62
elseif BC7==4 then
return 88
elseif BC7==5 then
return 119
elseif BC7==6 then
return $9B
endif
return 25
endfunction
function EFG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=(LoadInteger(L7,(I97),(34)))
if(GetTriggerEventId()==EVENT_UNIT_DEATH and GetKillingUnit()==ZX7)or(GetTriggerEventId()==EVENT_UNIT_DAMAGED and GetUnitAbilityLevel(IH7,1110459731)>0)then
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Transmute\\PileofGold.mdl",GetUnitX(IH7),GetUnitY(IH7)))
call AddHeroXP(ZX7,R2I(EEG(BC7)*2.5),true)
call ZQ7(GetOwningPlayer(ZX7),IH7,$BE)
set VH4[GetPlayerId(GetOwningPlayer(ZX7))]=VH4[GetPlayerId(GetOwningPlayer(ZX7))]+$BE
set EV0[GetPlayerId(GetOwningPlayer(ZX7))]=EV0[GetPlayerId(GetOwningPlayer(ZX7))]+$BE
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call KillUnit(IH7)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function EGG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local integer BC7=GetUnitLevel(IH7)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveInteger(L7,(I97),(34),(BC7))
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function EFG))
set t=null
set ZX7=null
set IH7=null
endfunction
function EHG takes nothing returns nothing
if GetSpellAbilityId()==1093810265 then
call EGG()
endif
endfunction
function EIG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer V07=GetHandleId(t)
local unit Z69=(LoadUnitHandle(L7,(V07),(2)))
local real EJG=(LoadReal(L7,(V07),($F2)))
local real EKG=(LoadReal(L7,(V07),(529)))
local real EMG=(LoadReal(L7,(V07),(530)))
local real ENG=GetUnitState(Z69,UNIT_STATE_MANA)
local real EOG=GetUnitState(Z69,UNIT_STATE_MAX_MANA)
local real EPG=EJG-ENG
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(L7,(V07))
call OZ7(t)
elseif GetTriggerEvalCount(t)==20*$A then
call FlushChildHashtable(L7,(V07))
call OZ7(t)
if EKG<$96 then
call SetUnitState(Z69,UNIT_STATE_MANA,ENG-($96-EKG-EMG))
endif
else
if EPG>0 then
set EKG=EKG+(EJG-ENG)
if EMG>0 then
if EPG>EMG then
call SetUnitState(Z69,UNIT_STATE_MANA,ENG+EMG)
set EMG=0
else
if EMG>(EOG-ENG)then
set EMG=EMG-(EOG-ENG)
call SetUnitState(Z69,UNIT_STATE_MANA,ENG+EOG-ENG)
else
set EMG=EMG-EPG
call SetUnitState(Z69,UNIT_STATE_MANA,ENG+EPG)
endif
endif
endif
endif
set EJG=ENG
call SaveReal(L7,(V07),($F2),((EJG)*1.))
call SaveReal(L7,(V07),(529),((EKG)*1.))
call SaveReal(L7,(V07),(530),((EMG)*1.))
endif
set t=null
set Z69=null
return false
endfunction
function EQG takes nothing returns nothing
local unit Z69=GetTriggerUnit()
local real C7D=GetUnitState(Z69,UNIT_STATE_LIFE)
local trigger t=CreateTrigger()
local integer V07=GetHandleId(t)
local real ENG=GetUnitState(Z69,UNIT_STATE_MANA)
if C7D>$97 then
call SetUnitState(Z69,UNIT_STATE_LIFE,C7D-$96)
else
call SetUnitState(Z69,UNIT_STATE_LIFE,1)
endif
call YS7("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkZapTarget.mdl",Z69,"origin",2)
call SetUnitState(Z69,UNIT_STATE_MANA,ENG+$96)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterUnitEvent(t,Z69,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function EIG))
call SaveUnitHandle(L7,(V07),(2),(Z69))
call SaveReal(L7,(V07),($F2),((GetUnitState(Z69,UNIT_STATE_MANA))*1.))
call SaveReal(L7,(V07),(529),((0)*1.))
if(ENG+$96)>GetUnitState(Z69,UNIT_STATE_MAX_MANA)then
call SaveReal(L7,(V07),(530),(((ENG+$96)-GetUnitState(Z69,UNIT_STATE_MAX_MANA))*1.))
endif
set Z69=null
endfunction
function ERG takes nothing returns nothing
if GetSpellAbilityId()==1093751096 then
call EQG()
endif
endfunction
function ESG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
if GetTriggerEvalCount(t)>30 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitRemoveAbility(ZX7,1093751107)
call UnitRemoveAbility(ZX7,1110459225)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set ZX7=null
set t=null
return false
endfunction
function ETG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
if GetTriggerEvalCount(t)>30 or GetTriggerEventId()==EVENT_UNIT_DEATH or((LoadInteger(L7,(GetHandleId((ZX7))),((4256))))==1)then
call UnitRemoveAbility(ZX7,1097167980)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set ZX7=null
set t=null
return false
endfunction
function EUG takes unit u returns nothing
local unit ZX7=u
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call UnitAddAbility(ZX7,1097167980)
call UnitMakeAbilityPermanent(ZX7,true,1097167980)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1097167980,false)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function ETG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set ZX7=null
set t=null
endfunction
function EVG takes nothing returns nothing
local integer I97=GetHandleId(GetTriggeringTrigger())
local unit ZX7=IN4
local unit IH7=IP4
local real QHD=(LoadReal(L7,(I97),(20)))
local trigger t
if IsPlayerAlly(GetOwningPlayer(IH7),GetOwningPlayer(ZX7)) and ZX7!=IH7 then
call EUG(IH7)
elseif ZX7!=IH7 then
set t=CreateTrigger()
set I97=GetHandleId(t)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093751107,false)
call UnitAddAbility(IH7,1093751107)
call UnitMakeAbilityPermanent(IH7,true,1093751107)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function ESG))
call SaveUnitHandle(L7,(I97),(2),(IH7))
call EUG(IH7)
call YW7("+"+I2S(R2I(QHD)),2,IH7,.027,3,$D8,120,$D8)
set E97=true
call B67(ZX7,IH7,1,QHD)
set E97=false
endif
call EUG(ZX7)
set ZX7=null
set IH7=null
endfunction
function EWG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local trigger t2=ZF7(ZX7,IH7,1747993171,"EVG",$3E8)
local integer IED=GetHandleId(t2)
local integer ZN9=WH7(ZX7)
local real EXG
if ZN9==2 then
set EXG=GetHeroAgi(ZX7,true)
elseif ZN9==3 then
set EXG=GetHeroStr(ZX7,true)
elseif ZN9==1 then
set EXG=GetHeroInt(ZX7,true)
endif
call SaveReal(L7,(IED),(20),((EXG*2.+75)*1.))
set ZX7=null
set IH7=null
set t2=null
endfunction
function EYG takes nothing returns nothing
if GetSpellAbilityId()==1093751108 and(IsPlayerAlly(GetOwningPlayer(GetSpellTargetUnit()),GetOwningPlayer(GetTriggerUnit())) or WQ7(GetSpellTargetUnit())==false)then
call EWG()
endif
endfunction
function EZG takes nothing returns nothing
call SetUnitState(GetEnumUnit(),UNIT_STATE_MANA,GetUnitState(GetEnumUnit(),UNIT_STATE_MANA)+$87)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl",GetEnumUnit(),"origin"))
endfunction
function EAG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local group g=WS7()
set IN4=ZX7
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),25+900,Condition(function AB7))
call ForGroup(g,function EZG)
call WR7(g)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set g=null
set ZX7=null
set t=null
return false
endfunction
function EBG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local group g
local trigger t
if GetSpellAbilityId()==1093684023 then
if GetUnitTypeId(ZX7)!=1211117642 then
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function EAG))
call SaveUnitHandle(L7,(GetHandleId(t)),(2),(ZX7))
set t=null
else
call SetUnitState(ZX7,UNIT_STATE_MANA,GetUnitState(ZX7,UNIT_STATE_MANA)+25)
endif
endif
set ZX7=null
set g=null
set t=null
endfunction
function R36 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
if ZX7!=IH7 then
call B67(ZX7,IH7,1,50)
endif
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function R40 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local unit BB7
if IH7==null then
set IH7=ZX7
endif
set BB7=CreateUnit(GetOwningPlayer(IH7),'e00E',GetUnitX(IH7),GetUnitY(IH7),0)
call UnitAddAbility(BB7,'A13V')
call IssueTargetOrderById(BB7,$D00B0,IH7)
call TriggerRegisterTimerEvent(t,2.51,true)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerAddCondition(t,Condition(function R36))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
set t=null
set ZX7=null
set IH7=null
endfunction
function ECG takes nothing returns nothing
if GetTriggerUnit()==GetSpellTargetUnit()or WF7(GetSpellTargetUnit())==false then
if WQ7(GetSpellTargetUnit())==false or GetTriggerUnit()==GetSpellTargetUnit()then
call R40()
endif
endif
endfunction
function E3G takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==1697656901 then
return false
endif
call FS9()
call EQ9()
call FI9()
call BTF()
call CIF()
call CSF()
call CVF()
call CAF()
call FM9()
call YNO()
call CTF()
call CBF()
call E99()
call RQF()
call L8F()
call RAF()
call RSF()
call LIF()
call LGF()
call ZGF()
call LNF()
call LRF()
call LUF()
call LXF()
call C5F()
call LAF()
call LCF()
call L2F()
call ERG()
call EYG()
call EBG()
call EHG()
call EDG()
call E8G()
call D_G()
call DDG()
call DNG()
call DQG()
call DSG()
call D0G()
call DLG()
call DVG()
call D3G()
call DBG()
call AWv()
call MZO()
call AWw()
call FMM9()
call ZEEG()
call MAO()
call MaO()
call M2O()
call R42()
if GetSpellAbilityId()==1093815095 and WQ7(GetSpellTargetUnit())==false then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\LevelerStunFX.mdx",GetSpellTargetUnit(),"head"))
endif
return false
endfunction
function E6G takes nothing returns boolean
call A5F()
call A2F()
call B8F()
call BGF()
call FY9()
call BKF()
call BMF()
call BNF()
call BOF()
call BQF()
return false
endfunction
function ELG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local unit E1G=O77(OB7,"Caster")
local unit m5=O77(OB7,"Target")
local effect FX=OG7(OB7,"FX")
local player p=GetOwningPlayer(WI7)
call UnitShareVision(m5,p,false)
call DestroyEffect(FX)
call RemoveUnit(E1G)
call UnitRemoveAbility(m5,1110455880)
call NM7(OB7)
call OZ7(t)
set t=null
set WI7=null
set E1G=null
set m5=null
set FX=null
set p=null
return false
endfunction
function E0G takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local player p=GetOwningPlayer(WI7)
local unit E1G
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local string s="effects\\Snipe Target.mdx"
if IsPlayerAlly(GetLocalPlayer(),p)==false and WG7(GetLocalPlayer())==false then
set s=""
endif
call UnitShareVision(m5,p,true)
set E1G=CreateUnit(GetOwningPlayer(m5),1697657170,0,0,0)
call XF7(E1G,1093684809)
call NT7(OB7,"Target",m5)
call NT7(OB7,"Hero",WI7)
call NT7(OB7,"Caster",E1G)
call NU7(OB7,"FX",AddSpecialEffectTarget(s,m5,"overhead"))
call TriggerRegisterTimerEvent(t,4,false)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function ELG))
set t=null
set WI7=null
set m5=null
set E1G=null
set p=null
endfunction
function E5G takes nothing returns boolean
if GetSpellAbilityId()==1093678160 then
call E0G()
endif
return false
endfunction
function G98 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CHANNEL)
call TriggerAddCondition(t,Condition(function E5G))
set t=null
endfunction
function E2G takes nothing returns boolean
local real d
if IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(IP4)) then
set d=KF7(IK4,IM4,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))
if d<IJ4 then
set IJ4=d
set IN4=GetFilterUnit()
endif
endif
return false
endfunction
function E_G takes unit F4G,real x,real y returns unit
local group g=WS7()
set IN4=null
set IP4=F4G
set IJ4=99999
set IK4=x
set IM4=y
call GroupEnumUnitsInRange(g,x,y,$7D0,Condition(function E2G))
call WR7(g)
set g=null
return IN4
endfunction
function F7G takes nothing returns boolean
local real d
if GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and XH7(GetFilterUnit())==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(IP4)) then
set d=KF7(IK4,IM4,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))
if d<IJ4 then
set IJ4=d
set IN4=GetFilterUnit()
endif
endif
return false
endfunction
function F8G takes unit F4G,real x,real y returns unit
local group g=WS7()
set IN4=null
set IP4=F4G
set IJ4=99999
set IK4=x
set IM4=y
call GroupEnumUnitsInRange(g,x,y,$7D0,Condition(function F7G))
call WR7(g)
set g=null
return IN4
endfunction
function F9G takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local location l
local real x
local real y
local unit m5=GetSpellTargetUnit()
if m5==null then
set l=GetSpellTargetLoc()
set x=GetLocationX(l)
set y=GetLocationY(l)
call RemoveLocation(l)
if GetSpellAbilityId()==1093682008 then
set m5=E_G(WI7,x,y)
else
set m5=F8G(WI7,x,y)
endif
set x=GetUnitX(m5)
set y=GetUnitY(m5)
else
set x=GetUnitX(GetSpellTargetUnit())
set y=GetUnitY(GetSpellTargetUnit())
endif
if(IsUnitAlly(WI7,GetLocalPlayer())and GetLocalPlayer()!=GetOwningPlayer(WI7))or(V8 and(GetLocalPlayer()==KX4 or GetLocalPlayer()==KY4))then
call PingMinimapEx(x,y,3,$FF,$FF,$FF,false)
endif
set WI7=null
set l=null
endfunction
function FDG takes nothing returns boolean
if GetSpellAbilityId()==1093682008 or GetSpellAbilityId()==1095331188 then
call F9G()
endif
return false
endfunction
function FEG takes unit FFG returns nothing
local group g=WS7()
local real x=GetUnitX(FFG)
local real y=GetUnitY(FFG)
local unit FGG
local unit FHG=CreateUnit(GetOwningPlayer(FFG),1697656901,x,y,0)
local integer FIG=GetUnitAbilityLevel(FFG,1093687860)
set IN4=FFG
call GroupEnumUnitsInRange(g,x,y,300,Condition(function A17))
set FGG=GroupPickRandomUnit(g)
call WR7(g)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",FFG,"origin"))
if FGG!=null then
call XF7(FHG,1093687863)
call SetUnitAbilityLevel(FHG,1093687863,FIG)
call IssueTargetOrderById(FHG,$D007F,FGG)
endif
set g=null
set FGG=null
set FHG=null
endfunction
function FJG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer FKG=GetHandleId(t)
local integer FMG=GetTriggerEvalCount(t)
local unit FNG=O77(FKG,"Hero")
if FMG>$E or GetTriggerEventId()==EVENT_UNIT_DEATH then
call NM7(FKG)
call OZ7(t)
else
call FEG(FNG)
endif
set t=null
set FNG=null
return false
endfunction
function FOG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer FKG=GetHandleId(t)
local unit FNG=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,.7,true)
call TriggerRegisterUnitEvent(t,FNG,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function FJG))
call NT7(FKG,"Hero",FNG)
call TriggerEvaluate(t)
set t=null
set FNG=null
endfunction
function FPG takes nothing returns boolean
if GetSpellAbilityId()==1093687860 then
call FOG()
endif
return false
endfunction
function MZ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FPG))
set t=null
endfunction
function FQG takes real s,real FRG,real FSG,real FTG returns boolean
return s<=FRG and s<=FSG and s<=FTG
endfunction
function FUG takes unit u,real x,real y,real d returns real
local real x2=GetUnitX(u)
local real y2=GetUnitY(u)
local real FVG=KF7(x-d,y,x2,y2)
local real FWG=KF7(x+d,y,x2,y2)
local real FXG=KF7(x,y+d,x2,y2)
local real FYG=KF7(x,y-d,x2,y2)
if FQG(FVG,FWG,FYG,FXG)then
return 180.
elseif FQG(FWG,FVG,FYG,FXG)then
return .0
elseif FQG(FYG,FWG,FVG,FXG)then
return 270.
endif
return 90.
endfunction
function FZG takes real s,real FRG,real FSG,real FTG,real FAG,real FBG,real FCG,real F3G returns boolean
return s<=FRG and s<=FSG and s<=FTG and s<=FAG and s<=FBG and s<=FCG and s<=F3G
endfunction
function F6G takes unit u,integer OB7 returns unit
local real x1=GetUnitX(u)
local real y1=GetUnitY(u)
local unit FLG=O77(OB7,"Cog1")
local unit F1G=O77(OB7,"Cog2")
local unit F0G=O77(OB7,"Cog3")
local unit F5G=O77(OB7,"Cog4")
local unit F2G=O77(OB7,"Cog5")
local unit F_G=O77(OB7,"Cog6")
local unit G4G=O77(OB7,"Cog7")
local unit G7G=O77(OB7,"Cog8")
local real FRG=KF7(x1,y1,GetUnitX(FLG),GetUnitY(FLG))
local real FSG=KF7(x1,y1,GetUnitX(F1G),GetUnitY(F1G))
local real FTG=KF7(x1,y1,GetUnitX(F0G),GetUnitY(F0G))
local real FAG=KF7(x1,y1,GetUnitX(F5G),GetUnitY(F5G))
local real FBG=KF7(x1,y1,GetUnitX(F2G),GetUnitY(F2G))
local real FCG=KF7(x1,y1,GetUnitX(F_G),GetUnitY(F_G))
local real F3G=KF7(x1,y1,GetUnitX(G4G),GetUnitY(G4G))
local real G8G=KF7(x1,y1,GetUnitX(G7G),GetUnitY(G7G))
if FZG(FRG,FSG,FTG,FAG,FBG,FCG,F3G,G8G)then
return FLG
elseif FZG(FSG,FRG,FTG,FAG,FBG,FCG,F3G,G8G)then
return F1G
elseif FZG(FTG,FSG,FRG,FAG,FBG,FCG,F3G,G8G)then
return F0G
elseif FZG(FAG,FSG,FTG,FRG,FBG,FCG,F3G,G8G)then
return F5G
elseif FZG(FBG,FSG,FTG,FAG,FRG,FCG,F3G,G8G)then
return F2G
elseif FZG(FCG,FSG,FTG,FAG,FBG,FRG,F3G,G8G)then
return F_G
elseif FZG(F3G,FSG,FTG,FAG,FBG,FCG,FRG,G8G)then
return G4G
elseif FZG(G8G,FSG,FTG,FAG,FBG,FCG,F3G,FRG)then
return G7G
endif
call IL7("WTF????")
return null
endfunction
function G9G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
local real GDG=ON7(OB7,"Angle")
local real x=GetUnitX(m5)
local real y=GetUnitY(m5)
local real T5F=$C
local unit p5=O77(OB7,"Source")
local integer V77=OM7(OB7,"Level")
local integer GEG=40+40*V77
if GetTriggerEvalCount(t)>21 then
call NM7(OB7)
call OZ7(t)
call OX7(m5,"PowerCogShocked")
call B67(p5,m5,1,I2R(GEG))
call SetUnitState(m5,UNIT_STATE_MANA,YK7(GetUnitState(m5,UNIT_STATE_MANA)-GEG,0))
else
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",x,y))
call Y67(x,y,$96)
if OT7(m5,"TimeWalk|Active")==false then
call SetUnitPosition(m5,x+T5F*Cos(GDG*bj_DEGTORAD),y+T5F*Sin(GDG*bj_DEGTORAD))
endif
endif
set t=null
set m5=null
return false
endfunction
function GFG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit m5=GetEnumUnit()
local real x=IJ4
local real y=IK4
local real d=IM4
local real GDG=FUG(m5,x,y,d)
local real GGG=$C8
local real GHG=d-KF7(GetUnitX(m5),GetUnitY(m5),x,y)+GGG/2
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",m5,"chest"))
call OV7(m5,"PowerCogShocked")
if GHG>0 then
call SetUnitX(m5,GetUnitX(m5)+GHG*Cos(GDG*bj_DEGTORAD))
call SetUnitY(m5,GetUnitY(m5)+GHG*Sin(GDG*bj_DEGTORAD))
endif
call NT7(OB7,"Target",m5)
call NQ7(OB7,"Angle",GDG*1.)
call NP7(OB7,"Level",IH4)
call NT7(OB7,"Source",IN4)
call TriggerRegisterTimerEvent(t,.04,true)
call TriggerAddCondition(t,Condition(function G9G))
set t=null
set m5=null
endfunction
function GIG takes unit u,integer OB7 returns boolean
local unit GJG=F6G(u,OB7)
local boolean GKG=true
if XH7(GJG)or OM7(GetHandleId(GJG),"PowerCogUsed")==1 then
set GKG=false
endif
call NP7(GetHandleId(GJG),"PowerCogUsed",1)
call SetUnitVertexColor(GJG,25,25,25,$AF)
set GJG=null
return GKG
endfunction
function GMG takes nothing returns nothing
if GetUnitState(GetEnumUnit(),UNIT_STATE_MANA)>0 and IsUnitInGroup(GetEnumUnit(),IQ4)==false and OT7(GetEnumUnit(),"PowerCogShocked")==false and GIG(GetEnumUnit(),tl)then
call OV7(GetEnumUnit(),"PowerCogShocked")
call GroupAddUnit(aL,GetEnumUnit())
endif
endfunction
function GNG takes trigger t,unit WI7,real x,real y,real d,integer V77 returns nothing
local integer OB7=GetHandleId(t)
local real GOG=$C8
local rect r1=Rect(x-d,y-d,x+d,y+d)
local rect r2=Rect(x-d-GOG,y-d-GOG,x+d+GOG,y+d+GOG)
local group g1=WS7()
local group g2=WS7()
local group g3=WS7()
set IN4=WI7
call GroupEnumUnitsInRect(g1,r1,Condition(function AJ7))
call GroupEnumUnitsInRect(g2,r2,Condition(function AJ7))
set IQ4=g1
set aL=g3
set IJ4=x
set IK4=y
set IM4=d
set tl=OB7
call ForGroup(g2,function GMG)
set IH4=V77
call ForGroup(g3,function GFG)
call WR7(g1)
call WR7(g2)
call WR7(g3)
call RemoveRect(r1)
call RemoveRect(r2)
set g1=null
set g2=null
set g3=null
set r1=null
set r2=null
endfunction
function GPG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local real x=ON7(OB7,"x")
local real y=ON7(OB7,"y")
local player p=O97(OB7,"p")
local boolean GQG=OO7(OB7,"NeedFix")
call NM7(OB7)
call OZ7(t)
if GQG then
call Y57(p,.2,x,y,500)
endif
set t=null
set p=null
return false
endfunction
function GRG takes unit GJG returns nothing
local real x=GetUnitX(GJG)
local real y=GetUnitY(GJG)
local player p=GetOwningPlayer(GJG)
local unit oA=CreateUnit(p,1966092375,x,y,0)
call KillUnit(oA)
set p=null
set oA=null
endfunction
function GSG takes integer OB7,real x,real y,boolean GQG,player p returns nothing
local unit FLG=O77(OB7,"Cog1")
local unit F1G=O77(OB7,"Cog2")
local unit F0G=O77(OB7,"Cog3")
local unit F5G=O77(OB7,"Cog4")
local unit F2G=O77(OB7,"Cog5")
local unit F_G=O77(OB7,"Cog6")
local unit G4G=O77(OB7,"Cog7")
local unit G7G=O77(OB7,"Cog8")
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.1,false)
call TriggerAddCondition(t,Condition(function GPG))
call NQ7(GetHandleId(t),"x",x*1.)
call NQ7(GetHandleId(t),"y",y*1.)
call NZ7(GetHandleId(t),"p",p)
call NS7(GetHandleId(t),"NeedFix",GQG)
call GRG(FLG)
call RemoveUnit(FLG)
call GRG(F1G)
call RemoveUnit(F1G)
call GRG(F0G)
call RemoveUnit(F0G)
call GRG(F5G)
call RemoveUnit(F5G)
call GRG(F2G)
call RemoveUnit(F2G)
call GRG(F_G)
call RemoveUnit(F_G)
call GRG(G4G)
call RemoveUnit(G4G)
call GRG(G7G)
call RemoveUnit(G7G)
set FLG=null
set F1G=null
set F0G=null
set F5G=null
set F2G=null
set F_G=null
set G4G=null
set G7G=null
endfunction
function GTG takes unit GJG,integer OB7,integer GUG,player p returns nothing
if IsUnitVisible(GJG,p)then
call NS7(OB7,"NeedFix",true)
endif
call NT7(OB7,"Cog"+I2S(GUG),GJG)
endfunction
function GVG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local real Hk=ON7(OB7,"Duration")
local integer GYE=GetTriggerEvalCount(t)
if GYE>R2I(Hk*100)then
call GSG(OB7,ON7(OB7,"x"),ON7(OB7,"y"),OO7(OB7,"NeedFix"),O97(OB7,"Enemy"))
call NM7(OB7)
call OZ7(t)
else
call GNG(t,O77(OB7,"Hero"),ON7(OB7,"x"),ON7(OB7,"y"),ON7(OB7,"d"),OM7(OB7,"Level"))
endif
set t=null
return false
endfunction
function GWG takes nothing returns nothing
call SetUnitX(GetEnumUnit(),GetUnitX(IN4))
call SetUnitY(GetEnumUnit(),GetUnitY(IN4))
endfunction
function GXG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local integer V77=GetUnitAbilityLevel(WI7,1093687861)
local integer ID=1966092371
local real x1=GetUnitX(WI7)
local real y1=GetUnitY(WI7)
local real x2
local real y2
local real d=125
local unit GJG
local real Hk=4+V77
local real BufferDuration=5
local group g
local rect GYG
local player GZG
if TV7(GetOwningPlayer(WI7))then
set GZG=A7[0]
else
set GZG=Z7[0]
endif
call NM7(OB7)
call OZ7(t)
set t=CreateTrigger()
set OB7=GetHandleId(t)
call NS7(OB7,"NeedFix",false)
set x2=x1+d
set y2=y1
set GJG=CreateUnit(GetOwningPlayer(WI7),ID,x2,y2,0)
call SetUnitPosition(GJG,x2,y2)
call GTG(GJG,OB7,1,GZG)
if TZ7(GetOwningPlayer(WI7))then
call NT7(GetHandleId(WI7),"AI|Cog1",GJG)
endif
set x2=x1+d
set y2=y1+d
set GJG=CreateUnit(GetOwningPlayer(WI7),ID,x2,y2,0)
call SetUnitPosition(GJG,x2,y2)
call GTG(GJG,OB7,2,GZG)
set x2=x1
set y2=y1+d
set GJG=CreateUnit(GetOwningPlayer(WI7),ID,x2,y2,0)
call SetUnitPosition(GJG,x2,y2)
call GTG(GJG,OB7,3,GZG)
if TZ7(GetOwningPlayer(WI7))then
call NT7(GetHandleId(WI7),"AI|Cog2",GJG)
endif
set x2=x1-d
set y2=y1+d
set GJG=CreateUnit(GetOwningPlayer(WI7),ID,x2,y2,0)
call SetUnitPosition(GJG,x2,y2)
call GTG(GJG,OB7,4,GZG)
set x2=x1-d
set y2=y1
set GJG=CreateUnit(GetOwningPlayer(WI7),ID,x2,y2,0)
call SetUnitPosition(GJG,x2,y2)
call GTG(GJG,OB7,5,GZG)
if TZ7(GetOwningPlayer(WI7))then
call NT7(GetHandleId(WI7),"AI|Cog3",GJG)
endif
set x2=x1-d
set y2=y1-d
set GJG=CreateUnit(GetOwningPlayer(WI7),ID,x2,y2,0)
call SetUnitPosition(GJG,x2,y2)
call GTG(GJG,OB7,6,GZG)
set x2=x1
set y2=y1-d
set GJG=CreateUnit(GetOwningPlayer(WI7),ID,x2,y2,0)
call SetUnitPosition(GJG,x2,y2)
call GTG(GJG,OB7,7,GZG)
if TZ7(GetOwningPlayer(WI7))then
call NT7(GetHandleId(WI7),"AI|Cog4",GJG)
endif
set x2=x1+d
set y2=y1-d
set GJG=CreateUnit(GetOwningPlayer(WI7),ID,x2,y2,0)
call SetUnitPosition(GJG,x2,y2)
call GTG(GJG,OB7,8,GZG)
call TriggerRegisterTimerEvent(t,.01,true)
call TriggerAddCondition(t,Condition(function GVG))
call NQ7(OB7,"Duration",Hk*1.)
call NQ7(OB7,"x",x1*1.)
call NQ7(OB7,"y",y1*1.)
call NQ7(OB7,"d",d*1.)
call NT7(OB7,"Hero",WI7)
call NP7(OB7,"Level",V77)
call NZ7(OB7,"Enemy",GZG)
set d=d+110
set g=WS7()
set GYG=Rect(x1-d,y1-d,x1+d,y1+d)
set IN4=WI7
call GroupEnumUnitsInRect(g,GYG,Condition(function A_7))
call ForGroup(g,function GWG)
call WR7(g)
set t=null
set g=null
set WI7=null
set GJG=null
set GYG=null
set GZG=null
return false
endfunction
function GAG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,.1,false)
call TriggerAddCondition(t,Condition(function GXG))
call NT7(OB7,"Hero",WI7)
set t=null
set WI7=null
endfunction
function GBG takes nothing returns boolean
if GetSpellAbilityId()==1093687861 then
call GAG()
endif
return false
endfunction
function MA8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function GBG))
set t=null
endfunction
function GCG takes nothing returns nothing
if KW7(GetEnumUnit())==false then
call B67(IN4,GetEnumUnit(),1,IJ4)
endif
endfunction
function G3G takes unit G6G,real x,real y returns nothing
local real x1
local real y1
local group g=WS7()
local integer GLG=GetUnitAbilityLevel(G6G,1093687862)
local real G1G=40+40*GLG
set IN4=G6G
set IJ4=G1G
call GroupEnumUnitsInRange(g,x,y,600,Condition(function AJ7))
call ForGroup(g,function GCG)
call WR7(g)
set x1=x
set y1=y
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x1,y1))
set x1=x+$C8
set y1=y+$C8
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x1,y1))
set x1=x+$C8
set y1=y-$C8
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x1,y1))
set x1=x-$C8
set y1=y+$C8
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x1,y1))
set x1=x-$C8
set y1=y-$C8
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x1,y1))
call Y57(GetOwningPlayer(G6G),$A,x,y,600)
set g=null
endfunction
function G0G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit hn
local unit G5G=O77(OB7,"Projectile")
local real G2G=ON7(OB7,"TargetX")
local real G_G=ON7(OB7,"TargetY")
local real H4G=ON7(OB7,"Angle")
local real H7G=ON7(OB7,"SourceX")
local real H8G=ON7(OB7,"SourceY")
local real H9G=X17(H7G+30*Cos(H4G))
local real HDG=X07(H8G+30*Sin(H4G))
call SetUnitX(G5G,H9G)
call SetUnitY(G5G,HDG)
call NQ7(OB7,"SourceX",H9G)
call NQ7(OB7,"SourceY",HDG)
if KF7(G2G,G_G,H9G,HDG)<=35 then
call KillUnit(G5G)
set hn=O77(OB7,"Hero")
call G3G(hn,H9G,HDG)
call NM7(OB7)
call OZ7(t)
endif
set t=null
set hn=null
set G5G=null
return false
endfunction
function HEG takes nothing returns nothing
local unit hn=GetTriggerUnit()
local real H7G=X17(GetUnitX(hn))
local real H8G=X07(GetUnitY(hn))
local location HFG=GetSpellTargetLoc()
local real G2G=X17(GetLocationX(HFG))
local real G_G=X07(GetLocationY(HFG))
local real H4G=Atan2(G_G-H8G,G2G-H7G)
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit G5G=CreateUnit(GetOwningPlayer(hn),1747989337,H7G,H8G,H4G*bj_RADTODEG)
call RemoveLocation(HFG)
call SetUnitFacing(G5G,H4G*bj_RADTODEG)
call SetUnitPathing(G5G,false)
call XF7(G5G,1097625443)
call ShowUnit(G5G,false)
call UnitRemoveAbility(G5G,1097625443)
call ShowUnit(G5G,true)
call NQ7(OB7,"OriginalX",H7G)
call NQ7(OB7,"OriginalY",H8G)
call NQ7(OB7,"SourceX",H7G)
call NQ7(OB7,"SourceY",H8G)
call NQ7(OB7,"TargetX",G2G)
call NQ7(OB7,"TargetY",G_G)
call NQ7(OB7,"Angle",H4G)
call NT7(OB7,"Hero",hn)
call NT7(OB7,"Projectile",G5G)
call TriggerRegisterTimerEvent(t,.025,true)
call TriggerAddCondition(t,Condition(function G0G))
set hn=null
set HFG=null
set t=null
set G5G=null
endfunction
function HGG takes nothing returns boolean
if GetSpellAbilityId()==1093687862 then
call HEG()
endif
return false
endfunction
function MB8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function HGG))
set t=null
endfunction
function HHG takes unit p5,unit m5 returns nothing
local unit BB7=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
local integer V77=GetUnitAbilityLevel(p5,1093687864)
if V77==0 then
set V77=GetUnitAbilityLevel(p5,1093747542)
endif
call XF7(BB7,1093687865)
call SetUnitAbilityLevel(BB7,1093687865,V77)
call IssueTargetOrderById(BB7,$D007F,m5)
set BB7=null
endfunction
function HIG takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),IQ4)==false then
call GroupAddUnit(IQ4,GetEnumUnit())
call HHG(IN4,GetEnumUnit())
endif
endfunction
function HJG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local unit m5=O77(OB7,"Target")
local integer HKG=OM7(OB7,"MaxLinks")
local integer U38=GetTriggerEvalCount(t)
local unit HMG
local group HNG=OF7(OB7,"AlreadyAdded")
local group g
local real HOG=$C8
if m5==null then
set HMG=O77(OB7,"HPG"+I2S(HKG+1-U38))
call RemoveUnit(HMG)
else
set HMG=O77(OB7,"HPG"+I2S(U38))
call SetUnitX(WI7,GetUnitX(HMG))
call SetUnitY(WI7,GetUnitY(HMG))
call RemoveUnit(HMG)
if U38==HKG then
set HOG=$E1
endif
set g=WS7()
set IN4=WI7
set IQ4=HNG
call GroupEnumUnitsInRange(g,GetUnitX(WI7),GetUnitY(WI7),HOG,Condition(function AJ7))
call ForGroup(g,function HIG)
call WR7(g)
endif
if U38==HKG then
if m5!=null then
call PauseUnit(m5,false)
endif
call Y67(GetUnitX(WI7),GetUnitY(WI7),100)
call WR7(HNG)
call NM7(OB7)
call OZ7(t)
endif
set t=null
set WI7=null
set m5=null
set HMG=null
set HNG=null
set g=null
return false
endfunction
function HQG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local real l4=ON7(OB7,"Angle")
local integer OBD=OM7(OB7,"MaxCount")
local integer U38=GetTriggerEvalCount(t)
local real x=GetUnitX(WI7)+U38*50*Cos(l4*bj_DEGTORAD)
local real y=GetUnitY(WI7)+U38*50*Sin(l4*bj_DEGTORAD)
local boolean EWD=OO7(OB7,"Scepter")
local unit HRG
local trigger HSG=OE7(OB7,"Retract")
local integer FGE=GetHandleId(HSG)
local group g=WS7()
local unit m5
local integer ID=1966092374
local real HOG=125
if U38==1 then
set HOG=100
endif
set IN4=WI7
call GroupEnumUnitsInRange(g,x,y,HOG,Condition(function AU7))
call GroupRemoveUnit(g,WI7)
set m5=GroupPickRandomUnit(g)
call WR7(g)
if m5!=null or U38==OBD or U38==(OBD-1)or U38==(OBD-2)then
set ID=1966092373
endif
set HRG=CreateUnit(GetOwningPlayer(WI7),ID,x,y,l4)
call NT7(FGE,"HPG"+I2S(U38),HRG)
if m5!=null then
if(IsUnitAlly(m5,GetOwningPlayer(WI7)) and EWD==false)or GetOwningPlayer(m5)==B7 or OT7(m5,"Frozen") then
set m5=null
endif
call NM7(OB7)
call OZ7(t)
if m5!=null and IsUnitAlly(m5,GetOwningPlayer(WI7))==false then
call PauseUnit(m5,true)
endif
call TriggerRegisterTimerEvent(HSG,.5/ OBD,true)
call TriggerAddCondition(HSG,Condition(function HJG))
call NP7(FGE,"MaxLinks",U38)
call NT7(FGE,"Target",m5)
call NT7(FGE,"Hero",WI7)
call NB7(FGE,"AlreadyAdded",WS7())
elseif U38>OBD then
set m5=null
call NM7(OB7)
call OZ7(t)
call TriggerRegisterTimerEvent(HSG,.5/ OBD,true)
call TriggerAddCondition(HSG,Condition(function HJG))
call NP7(FGE,"MaxLinks",U38)
call NT7(FGE,"Target",m5)
call NT7(FGE,"Hero",WI7)
call NB7(FGE,"AlreadyAdded",WS7())
endif
set t=null
set WI7=null
set HRG=null
set HSG=null
set g=null
set m5=null
return false
endfunction
function HPG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real l4=J77(GetUnitX(WI7),GetUnitY(WI7),GetLocationX(l),GetLocationY(l))
local integer V77=GetUnitAbilityLevel(WI7,1093687864)
local integer HTG
local integer OBD
local boolean EWD=true
if V77==0 then
set V77=GetUnitAbilityLevel(WI7,1093747542)
set EWD=true
endif
set HTG=$5DC+500*V77
set OBD=HTG/ 50
call NT7(OB7,"Hero",WI7)
call NP7(OB7,"Level",V77)
call NQ7(OB7,"Angle",l4*1.)
call NP7(OB7,"MaxCount",OBD)
call NV7(OB7,"Retract",CreateTrigger())
call NS7(OB7,"Scepter",EWD)
call TriggerRegisterTimerEvent(t,.5/ OBD,true)
call TriggerAddCondition(t,Condition(function HQG))
call RemoveLocation(l)
set t=null
set WI7=null
set l=null
endfunction
function HUG takes nothing returns boolean
if GetSpellAbilityId()==1093687864 or GetSpellAbilityId()==1093747542 then
call HPG()
endif
return false
endfunction
function MC8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function HUG))
set t=null
endfunction
function HVG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=(LoadInteger(L7,(I97),(5)))
local real VW9
if BC7==1 and(GetTriggerEvalCount(t)==3 or GetTriggerEvalCount(t)==4)then
set VW9=$F
call B67(ZX7,IH7,1,VW9)
elseif BC7==2 and(GetTriggerEvalCount(t)==3 or GetTriggerEvalCount(t)==4 or GetTriggerEvalCount(t)==5)then
set VW9=20
call B67(ZX7,IH7,1,VW9)
elseif BC7==3 and(GetTriggerEvalCount(t)==3 or GetTriggerEvalCount(t)==4 or GetTriggerEvalCount(t)==5 or GetTriggerEvalCount(t)==6)then
set VW9=25
call B67(ZX7,IH7,1,VW9)
elseif BC7==4 and(GetTriggerEvalCount(t)==3 or GetTriggerEvalCount(t)==4 or GetTriggerEvalCount(t)==5 or GetTriggerEvalCount(t)==6 or GetTriggerEvalCount(t)==7)then
set VW9=30
call B67(ZX7,IH7,1,VW9)
endif
if GetTriggerEvalCount(t)==3+BC7 then
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call UnitRemoveAbility(IH7,1093752403)
call UnitRemoveAbility(IH7,1110459470)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function HWG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=GetUnitAbilityLevel(ZX7,1095267426)
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif GetEventDamageSource()==ZX7 and GetEventDamage()==0 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function HVG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveInteger(L7,(I97),(5),(BC7))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",IH7,"chest")))
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093752403,false)
call XF7(IH7,1093752403)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function HXG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local real d=KE7(ZX7,IH7)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,8,false)
call TriggerAddCondition(t,Condition(function HWG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
set t=null
set ZX7=null
set IH7=null
endfunction
function HYG takes nothing returns nothing
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl",GetTriggerUnit(),"weapon"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl",GetTriggerUnit(),"hand"))
endfunction
function HZG takes nothing returns boolean
if GetSpellAbilityId()==1095267426 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
call HYG()
elseif WQ7(GetSpellTargetUnit())==false then
call HXG()
endif
endif
return false
endfunction
function M18 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function HZG))
set t=null
endfunction
function HAG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
call SelectUnitForPlayerSingle(ZX7,GetOwningPlayer(ZX7))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set ZX7=null
return false
endfunction
function HBG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093677401)
local real BZ7=360-100*BC7
local unit BB7
if BC7==3 then
endif
if TimerGetRemaining(N84[GetPlayerId(GetOwningPlayer(ZX7))])==0 and GetUnitState(ZX7,UNIT_STATE_MANA)>=140 then
set BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(ZX7),GetUnitY(ZX7),0)
call UnitAddAbility(BB7,1093809972)
call SetUnitAbilityLevel(BB7,1093809972,BC7)
call IssueImmediateOrder(BB7,"thunderclap")
call TimerStart(N84[GetPlayerId(GetOwningPlayer(ZX7))],BZ7,false,null)
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,3+.01,false)
call TriggerAddCondition(t,Condition(function HAG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
endif
set t=null
set ZX7=null
set BB7=null
return false
endfunction
function HCG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerAddCondition(t,Condition(function HBG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set t=null
set ZX7=null
endfunction
function H3G takes nothing returns boolean
if GetLearnedSkill()==1093677401 and GetUnitAbilityLevel(GetTriggerUnit(),1093677401)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call HCG()
endif
return false
endfunction
function M08 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function H3G))
set t=null
endfunction
function H6G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
call NM7(OB7)
call OZ7(t)
call B_7(p5,0)
set t=null
set p5=null
return false
endfunction
function HLG takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==GetUnitTypeId(BB)and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(BB)and IsUnitIllusion(GetFilterUnit()) then
call SetUnitX(GetFilterUnit(),OB)
call SetUnitY(GetFilterUnit(),AB)
call IssueTargetOrderById(GetFilterUnit(),$D000F,cB)
endif
return false
endfunction
function H1G takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local real t5=GetUnitX(p5)
local real w5=GetUnitY(p5)
local real Y5=GetUnitX(m5)
local real Z5=GetUnitY(m5)
local real l4=J77(t5,w5,Y5,Z5)
local real BAD=KF7(t5,w5,Y5,Z5)
local real d=GetRandomReal(BAD*.3,BAD*.8)
local integer V77=GetUnitAbilityLevel(p5,1093685847)
local real SIE=t5+d*Cos(l4*bj_DEGTORAD)
local real SJE=w5+d*Sin(l4*bj_DEGTORAD)
local unit u=CreateUnit(GetOwningPlayer(p5),EB,SIE,SJE,0)
local unit u2
local group g
local trigger t
local integer OB7
call SetUnitX(p5,SIE)
call SetUnitY(p5,SJE)
call SetUnitFacing(p5,-l4)
call PlaySoundOnUnitBJ(zE,100,m5)
if IsUnitEnemy(m5,GetOwningPlayer(p5))and GetUnitTypeId(m5)!=1848651852 then
set t=CreateTrigger()
set OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1.2,false)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function H6G))
call NT7(OB7,"Source",p5)
set t=null
call B_7(p5,75+25*V77)
set SIE=t5+(d-25)*Cos(l4*bj_DEGTORAD)
set SJE=w5+(d-25)*Sin(l4*bj_DEGTORAD)
call O37(m5,"4405",1)
call SetUnitX(m5,SIE)
call SetUnitY(m5,SJE)
call SetUnitFacing(m5,l4)
call IssueTargetOrderById(p5,$D000F,m5)
set g=WS7()
set OB=SIE
set AB=SJE
set BB=p5
set cB=m5
call GroupEnumUnitsInRange(g,t5,w5,$578,Condition(function HLG))
call WR7(g)
set u2=CreateUnit(GetOwningPlayer(p5),EB,SIE,SJE,0)
call KillUnit(u2)
endif
call KillUnit(u)
set p5=null
set m5=null
set u=null
set u2=null
set g=null
endfunction
function H0G takes nothing returns boolean
if GetSpellAbilityId()==1093685847 then
call H1G()
endif
return false
endfunction
function H5G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local unit u=CreateUnit(GetOwningPlayer(WI7),EB,GetUnitX(WI7),GetUnitY(WI7),0)
call PlaySoundOnUnitBJ(zE,100,WI7)
call KillUnit(u)
call NM7(OB7)
call OZ7(t)
set u=null
set t=null
set WI7=null
return false
endfunction
function H2G takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerAddCondition(t,Condition(function H5G))
call TriggerRegisterTimerEvent(t,.3,false)
call NT7(OB7,"Hero",GetTriggerUnit())
set t=null
endfunction
function H_G takes nothing returns boolean
if GetSpellAbilityId()==1093685847 then
call H2G()
endif
return false
endfunction
function HM8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function H0G))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function H_G))
set t=null
endfunction
function CA4 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(ZX7),GetUnitY(ZX7),0)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call XF7(BB7,1093816370)
call IssueTargetOrderById(BB7,852274,ZX7)
set t=null
set ZX7=null
return false
endfunction
function CB4 takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t
local integer I97
if GetRandomInt(0,1)==0 then
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.65,false)
call TriggerAddCondition(t,Condition(function CA4))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
endif
set t=null
set ZX7=null
endfunction
function CC4 takes nothing returns boolean
if GetSpellAbilityId()==1093677903 then
call CB4()
endif
return false
endfunction
function YP1 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CC4))
set t=null
endfunction
function I4G takes nothing returns boolean
return GetSpellAbilityId()==1093678645
endfunction
function I7G takes nothing returns nothing
local integer T8=0
local integer U8=5
local integer array I8G
local player array I9G
local integer Y68
local item Z4
set I8G[0]=0
set I8G[1]=0
set I8G[2]=0
set I8G[3]=0
set I8G[4]=0
set I8G[5]=0
call DisableTrigger(H94)
loop
exitwhen T8>U8
set Y68=KZ7(UnitItemInSlot(GetTriggerUnit(),T8))
if Y68==D0 or Y68==E0 or Y68==J0 or Y68==N0 or Y68==O0 or Y68==R0 or Y68==J1 or Y68==R5 or Y68==S5 or Y68==T5 or Y68==S6 or Y68==D44 or Y68==DD4 or Y68==F74 then
set I8G[T8]=GetItemTypeId(UnitItemInSlot(GetTriggerUnit(),T8))
set I9G[T8]=GetItemPlayer(UnitItemInSlot(GetTriggerUnit(),T8))
call RemoveItem(UnitItemInSlot(GetTriggerUnit(),T8))
endif
set T8=T8+1
endloop
call UnitResetCooldown(GetTriggerUnit())
set T8=0
set U8=5
loop
exitwhen T8>U8
if I8G[T8]>0 then
set Z4=CreateItem(I8G[T8],0,0)
call SetItemPlayer(Z4,I9G[T8],false)
call SetItemUserData(Z4,1)
call UnitAddItem(GetTriggerUnit(),Z4)
endif
set T8=T8+1
endloop
call EnableTrigger(H94)
set Z4=null
endfunction
function GO8 takes nothing returns nothing
set XJ=CreateTrigger()
call YB7(XJ,EVENT_PLAYER_UNIT_SPELL_FINISH)
call TriggerAddCondition(XJ,Condition(function I4G))
call TriggerAddAction(XJ,function I7G)
endfunction
function IDG takes nothing returns nothing
call B67(XC4,GetEnumUnit(),1,(55+25*X34)*.25)
endfunction
function IEG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local integer WF8=GetTriggerEvalCount(t)
local group g
if WF8==20 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
set IN4=ZX7
set XC4=ZX7
set X34=GetUnitAbilityLevel(ZX7,1093678407)
set g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),325,Condition(function AJ7))
call ForGroup(g,function IDG)
call WR7(g)
set g=null
endif
set t=null
set ZX7=null
return false
endfunction
function IFG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function IEG))
call SaveUnitHandle(L7,(I97),(2),(GetTriggerUnit()))
call TriggerEvaluate(t)
call O37(GetTriggerUnit(),"BladeFury|Active",5)
endfunction
function IGG takes nothing returns boolean
if GetSpellAbilityId()==1093678407 then
call IFG()
endif
return false
endfunction
function FJ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function IGG))
set t=null
endfunction
function IHG takes nothing returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
local integer i1
local unit it=null
local item KA7=null
local integer i
local boolean J4=false
local player p=null
if(not QY4[O5])or(GetItemTypeId(GetManipulatedItem())==1227895373)or(not IsTriggerEnabled(H94))or(GetUnitTypeId(GetTriggerUnit())==1697656901)then
return
elseif(GetItemType(GetManipulatedItem())==ITEM_TYPE_POWERUP)then
call J3(it,false)
return
endif
set KA7=GetManipulatedItem()
set p=GetItemPlayer(KA7)
if(p==Player($F))then
set p=GF7
endif
if(p!=Player(O5))or(KA7==G87[336+O5])then
set it=GetTriggerUnit()
set i1=KY7(KA7)
if(IsUnitType(it,UNIT_TYPE_HERO)and(GetUnitTypeId(it)!=1211117642))then
set bj_lastCreatedItem=null
if G97[288+O5]==0 and(Bz>G97[$A0+O5])and((YSE(i1)or YTE(i1))and((not IsItemPowerup(KA7))or(not MS7(it))or(MR7(it,ZU[QW]))))then
set G97[288+O5]=i1
if bj_lastCreatedItem!=null and IsItemPowerup(KA7)then
set J4=true
endif
endif
if(i1==G97[288+O5]or i1==X0 or i1==B5 or i1==C5)then
set G97[288+O5]=i1
if IsItemPowerup(KA7)and MS7(it)and(ZTE(O5,it)!=-1 or ZUE(O5,it))then
set J4=(i1!=KY7(bj_lastCreatedItem))
endif
endif
if J4 then
set eY[512+O5]=0
set GE7[304+O5]=true
call UnitRemoveItem(it,bj_lastCreatedItem)
call SetItemPosition(bj_lastCreatedItem,GetUnitX(it),GetUnitY(it))
loop
exitwhen eY[512+O5]!=0
call TriggerSleepAction(.1)
endloop
set G87[320+O5]=G87[288+O5]
call J3(it,false)
call GXF(it)
endif
endif
if(not IsItemPowerup(KA7))then
if i1==G97[288+O5]then
call J_7(1.)
set G97[288+O5]=0
else
if PK4 and GetItemType(KA7)==ITEM_TYPE_PERMANENT and GetItemTypeId(KA7)==ZU[i1]then
else
set GE7[304+O5]=true
call UnitDropItemPoint(it,KA7,GetUnitX(it),GetUnitY(it))
endif
endif
endif
set it=null
endif
set KA7=null
set p=null
endfunction
function DisplayOrder takes nothing returns nothing
call DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,$A,I2S(GetIssuedOrderId())+": "+OrderId2String(GetIssuedOrderId()))
endfunction
function IIG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer iX=GetTriggerEvalCount(t)
local unit p5=O77(OB7,"Source")
local unit m5=O77(OB7,"Target")
local integer V77=OM7(OB7,"Level")
local real IJG
local unit IKG
set IJG=.6*(iX-25)*(iX-25)
if iX<51 then
if ModuloInteger(iX,5)==0 then
call B67(p5,m5,1,3+3*V77)
endif
if KCD(m5)==false then
call SetUnitFlyHeight(m5,500-IJG,0)
endif
else
set IKG=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
call XF7(IKG,1093742924)
call SetUnitAbilityLevel(IKG,1093742924,V77)
call IssueTargetOrderById(IKG,$D006B,m5)
if KCD(m5)==false then
call SetUnitFlyHeight(m5,GetUnitDefaultFlyHeight(m5),0)
endif
if D9==false then
call PauseUnit(m5,false)
endif
call SetUnitPathing(m5,true)
call NM7(OB7)
call OZ7(t)
endif
set t=null
set p5=null
set m5=null
set IKG=null
return false
endfunction
function IMG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit p5=IN4
local unit m5=GetEnumUnit()
local integer V77=IH4
call PauseUnit(m5,true)
call SetUnitPathing(m5,false)
if KCD(m5)==false then
call XF7(m5,1097691750)
call UnitRemoveAbility(m5,1097691750)
endif
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerAddCondition(t,Condition(function IIG))
call NT7(OB7,"Source",p5)
call NT7(OB7,"Target",m5)
call NP7(OB7,"Level",V77)
call B67(p5,m5,1,30+30*V77)
set t=null
set p5=null
set m5=null
endfunction
function ING takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
local real x=ON7(OB7,"x")
local real y=ON7(OB7,"y")
local integer V77=OM7(OB7,"Level")
local group g=WS7()
local ubersplat ML9=CreateUbersplat(x,y,"THNN",$FF,$FF,$FF,$FF,false,false)
call SetUbersplatRenderAlways(ML9,true)
call Y57(GetOwningPlayer(WI7),4,x,y,400)
call DestroyEffect(OG7(OB7,"FX1"))
call DestroyEffect(OG7(OB7,"FX2"))
call DestroyEffect(OG7(OB7,"FX3"))
call DestroyEffect(OG7(OB7,"FX4"))
call DestroyEffect(OG7(OB7,"FX5"))
call DestroyEffect(OG7(OB7,"FX6"))
call NM7(OB7)
call OZ7(t)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",x,y))
call DestroyEffect(AddSpecialEffect("effects\\TidalErruption.mdx",x,y))
set IN4=WI7
set IH4=V77
call GroupEnumUnitsInRange(g,x,y,$E1+25,Condition(function AR7))
call ForGroup(g,function IMG)
call WR7(g)
set t=null
set WI7=null
return false
endfunction
function IOG takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local integer V77=GetUnitAbilityLevel(WI7,1093743414)
local string s=""
local real a
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(WI7)) or WG7(GetLocalPlayer())then
set s="Objects\\Spawnmodels\\Other\\IllidanFootprint\\IllidanWaterSpawnFootPrint.mdl"
endif
call RemoveLocation(l)
call NP7(OB7,"Level",V77)
call NT7(OB7,"Hero",WI7)
call NQ7(OB7,"x",x)
call NQ7(OB7,"y",y)
call NP7(OB7,"Level",V77)
set a=0
call NU7(OB7,"FX1",AddSpecialEffect(s,x+40*Cos(a/ 6*360*bj_DEGTORAD),y+40*Sin(a/ 6*360*bj_DEGTORAD)))
set a=1
call NU7(OB7,"FX2",AddSpecialEffect(s,x+40*Cos(a/ 6*360*bj_DEGTORAD),y+40*Sin(a/ 6*360*bj_DEGTORAD)))
set a=2
call NU7(OB7,"FX3",AddSpecialEffect(s,x+40*Cos(a/ 6*360*bj_DEGTORAD),y+40*Sin(a/ 6*360*bj_DEGTORAD)))
set a=3
call NU7(OB7,"FX4",AddSpecialEffect(s,x+40*Cos(a/ 6*360*bj_DEGTORAD),y+40*Sin(a/ 6*360*bj_DEGTORAD)))
set a=4
call NU7(OB7,"FX5",AddSpecialEffect(s,x+40*Cos(a/ 6*360*bj_DEGTORAD),y+40*Sin(a/ 6*360*bj_DEGTORAD)))
set a=5
call NU7(OB7,"FX6",AddSpecialEffect(s,x+40*Cos(a/ 6*360*bj_DEGTORAD),y+40*Sin(a/ 6*360*bj_DEGTORAD)))
call TriggerRegisterTimerEvent(t,1.6,false)
call TriggerAddCondition(t,Condition(function ING))
set WI7=null
set t=null
set l=null
endfunction
function IPG takes nothing returns boolean
if GetSpellAbilityId()==1093743414 then
call IOG()
endif
return false
endfunction
function M58 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function IPG))
set t=null
endfunction
function KX9 takes nothing returns nothing
call SetPlayerAbilityAvailable(GetOwningPlayer(B2),1093743671,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(B2),1093743672,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(B2),1093742933,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(B2),1093743673,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(C2),1093743671,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(C2),1093743672,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(C2),1093742933,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(C2),1093743673,false)
endfunction
function IQG takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer T_7=GetHandleId(t)
local unit WX7=O77(T_7,"Hero")
local real IRG=KQ7()
local integer BC7=GetUnitAbilityLevel(WX7,1093743444)
local real ISG=ON7(GetHandleId(WX7),"WaterSword|LastUsed")
local boolean ITG=OO7(GetHandleId(WX7),"WaterSword|Active")
if IRG-ISG>16-4*3 and ITG==false and GetUnitTypeId(WX7)==1211119187 and XH7(WX7)==false then
call NS7(GetHandleId(WX7),"WaterSword|Active",true)
call UnitAddAbility(WX7,1093742927)
call SetUnitAbilityLevel(WX7,1093742927,BC7)
call UnitAddAbility(WX7,1093742930)
if BC7==1 then
call XF7(WX7,1093743671)
elseif BC7==2 then
call XF7(WX7,1093743672)
elseif BC7==3 then
call XF7(WX7,1093742933)
elseif BC7==4 then
call XF7(WX7,1093743673)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(WX7),1093743671,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(WX7),1093743672,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(WX7),1093742933,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(WX7),1093743673,false)
elseif ITG==false then
call UnitRemoveAbility(WX7,1093742927)
call UnitRemoveAbility(WX7,1093742930)
call UnitRemoveAbility(WX7,1093743671)
call UnitRemoveAbility(WX7,1093743672)
call UnitRemoveAbility(WX7,1093742933)
call UnitRemoveAbility(WX7,1093743673)
endif
set t=null
set WX7=null
endfunction
function IUG takes nothing returns boolean
local unit WX7=GetTriggerUnit()
call NS7(GetHandleId(WX7),"WaterSword|Active",false)
call NQ7(GetHandleId(WX7),"WaterSword|LastUsed",KQ7())
call UnitRemoveAbility(WX7,1093742927)
call UnitRemoveAbility(WX7,1093742930)
call UnitRemoveAbility(WX7,1093743671)
call UnitRemoveAbility(WX7,1093743672)
call UnitRemoveAbility(WX7,1093742933)
call UnitRemoveAbility(WX7,1093743673)
set WX7=null
return false
endfunction
function IVG takes nothing returns nothing
local unit WX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer T_7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddAction(t,function IQG)
call NT7(T_7,"Hero",WX7)
call NQ7(T_7,"WaterSword|LastUsed",.0)
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,WX7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function IUG))
set WX7=null
set t=null
endfunction
function IWG takes nothing returns boolean
if GetLearnedSkill()==1093743444 and GetUnitAbilityLevel(GetTriggerUnit(),1093743444)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call IVG()
endif
return false
endfunction
function IXG takes nothing returns boolean
return GetUnitAbilityLevel(GetAttacker(),1093743444)>0
endfunction
function IYG takes nothing returns nothing
local unit WX7=GetEventDamageSource()
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetUnitAbilityLevel(WX7,1093743444)>0 and IsPlayerEnemy(GetOwningPlayer(WX7),GetOwningPlayer(GetTriggerUnit()))then
if OO7(GetHandleId(WX7),"WaterSword|Active") then
call NS7(GetHandleId(WX7),"WaterSword|Active",false)
call NQ7(GetHandleId(WX7),"WaterSword|LastUsed",KQ7())
call UnitRemoveAbility(WX7,1093742927)
call UnitRemoveAbility(WX7,1093742930)
call UnitRemoveAbility(WX7,1093743671)
call UnitRemoveAbility(WX7,1093743672)
call UnitRemoveAbility(WX7,1093742933)
call UnitRemoveAbility(WX7,1093743673)
call VX7(GetTriggeringTrigger())
endif
endif
else
call VX7(GetTriggeringTrigger())
endif
set WX7=null
endfunction
function IZG takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddAction(t,function IYG)
set t=null
endfunction
function M28 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function IWG))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function IXG))
call TriggerAddAction(t,function IZG)
set t=null
endfunction
function IAG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
local image i=OK7(OB7,"i")
local real x=ON7(OB7,"x")
local real y=ON7(OB7,"y")
local unit ZX7=O77(OB7,"Source")
if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093743428)then
if GetTriggerEventId()!=EVENT_UNIT_DEATH and WF7(m5)==false then
call SetUnitPosition(m5,x,y)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093743428,false)
if(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==0 or(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==1093742926 then
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093742926,true)
endif
call NS7(GetHandleId(m5),"XMarked",false)
call DestroyEffect(OG7(OB7,"FX"))
call ShowImage(i,false)
call DestroyImage(i)
call NM7(OB7)
call OZ7(t)
endif
set t=null
set m5=null
set i=null
set ZX7=null
return false
endfunction
function IBG takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local real x=GetUnitX(m5)
local real y=GetUnitY(m5)
local real ICG=90
local image i=CreateImage("Fonts\\X.blp",ICG,ICG,0,x-ICG/ 2,y-ICG/ 2,0,0,0,0,2)
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local string fx=""
local integer V77=4
call O37(m5,"4401",5)
call XF7(p5,1093743428)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093743428,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093742926,false)
call SetImageRenderAlways(i,true)
if IsUnitAlly(p5,GetOwningPlayer(m5))then
set V77=V77*2
endif
if IsUnitAlly(p5,GetOwningPlayer(m5))==false or IsUnitAlly(m5,GetLocalPlayer()) or WG7(GetLocalPlayer())then
set fx="effects\\BlackTide.mdx"
call ShowImage(i,true)
else
call ShowImage(i,false)
endif
call SetImageColor(i,$FF,0,0,$FF)
call UnitApplyTimedLife(CreateUnit(GetOwningPlayer(p5),1865429063,x,y,0),1112820806,5)
call TriggerRegisterTimerEvent(t,V77,false)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function IAG))
call NS7(GetHandleId(m5),"XMarked",true)
call N57(OB7,"i",i)
call NT7(OB7,"Target",m5)
call NQ7(OB7,"x",x)
call NQ7(OB7,"y",y)
call NU7(OB7,"FX",AddSpecialEffectTarget(fx,m5,"overhead"))
call NT7(OB7,"Source",p5)
call NQ7(GetHandleId(m5),"AI|XMark|X",x)
call NQ7(GetHandleId(m5),"AI|XMark|Y",y)
set p5=null
set m5=null
set i=null
set t=null
endfunction
function I3G takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093742926 and(IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))or WQ7(GetSpellTargetUnit())==false)then
call IBG()
endif
else
if GetLearnedSkill()==1093742926 then
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093743428,false)
call XF7(GetTriggerUnit(),1093743428)
endif
endif
return false
endfunction
function I6G takes nothing returns boolean
if GetSpellAbilityId()==1093742926 then
if OO7(GetHandleId(GetOwningPlayer(GetSpellTargetUnit())),"DisableHelp")and IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit())) then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),VU7(1848652600))
endif
endif
return false
endfunction
function M_8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function I3G))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function I6G))
set t=null
endfunction
function ILG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local integer I1G=1
local player p
local real d
local unit m5=O77(OB7,"Target")
local integer I0G=OM7(OB7,"MaxIndex")
local unit IKG
local integer Hk=OM7(OB7,"Duration")
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>Hk then
call NM7(OB7)
call OZ7(t)
else
loop
exitwhen I1G>I0G
set p=O97(OB7,"Player|"+I2S(I1G))
set d=ON7(OB7,"Damage|"+I2S(I1G))
if p==null then
set I1G=I0G
else
set IKG=CreateUnit(p,1697656901,0,0,0)
call SetUnitState(m5,UNIT_STATE_LIFE,YK7(1,GetUnitState(m5,UNIT_STATE_LIFE)-d/ Hk))
endif
set I1G=I1G+1
endloop
endif
set t=null
set p=null
set m5=null
set IKG=null
return false
endfunction
function I5G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
local player p=O97(OB7,"p")
local trigger I2G=OE7(OB7,"Phase2")
local integer I1G=GetTriggerEvalCount(t)
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call NM7(OB7)
call OZ7(t)
call TriggerRegisterTimerEvent(I2G,1,true)
call TriggerAddCondition(I2G,Condition(function ILG))
call UnitRemoveAbility(m5,1110456661)
else
set OB7=GetHandleId(I2G)
call SetUnitState(m5,UNIT_STATE_LIFE,GetUnitState(m5,UNIT_STATE_LIFE)+.5*GetEventDamage())
call NZ7(OB7,"Player|"+I2S(I1G),GetOwningPlayer(GetEventDamageSource()))
call NQ7(OB7,"Damage|"+I2S(I1G),.5*GetEventDamage())
call NP7(OB7,"MaxIndex",I1G)
endif
set t=null
set m5=null
set p=null
set I2G=null
return false
endfunction
function I_G takes nothing returns nothing
local unit p5=FT
local unit m5=GetEnumUnit()
local integer V77=IT
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local integer Hk=8
local trigger I2G=CreateTrigger()
call Z67(m5,1093743158,1,Hk)
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093743158,false)
call TriggerRegisterTimerEvent(t,Hk+.01,false)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function I5G))
call NZ7(OB7,"p",GetOwningPlayer(p5))
call NT7(OB7,"Target",m5)
call NV7(OB7,"Phase2",I2G)
call NT7(GetHandleId(I2G),"Target",m5)
call NP7(GetHandleId(I2G),"Duration",Hk)
set p5=null
set m5=null
set t=null
set I2G=null
endfunction
function J4G takes nothing returns boolean
if(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))and IsUnitInGroup(GetFilterUnit(),gN)==false then
call GroupAddUnit(gN,GetFilterUnit())
return true
endif
return false
endfunction
function J7G takes nothing returns nothing
local unit p5=FT
local unit m5=GetEnumUnit()
local integer V77=IT
call BA7(p5,m5,1.4)
call B67(p5,m5,1,300+100*V77)
set p5=null
set m5=null
endfunction
function J8G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit IJ=O77(OB7,"Projectile")
local unit J9G
local real RK=ON7(OB7,"Angle")
local real iN=GetUnitX(IJ)
local real io=GetUnitY(IJ)
local real JDG=ON7(OB7,"x2")
local real JEG=ON7(OB7,"y2")
local integer iX=GetTriggerEvalCount(t)
local real JFG=X17(JDG+13.33*iX*Cos(RK))
local real JGG=X07(JEG+13.33*iX*Sin(RK))
local integer V77=OM7(OB7,"Level")
local group JHG=OF7(OB7,"AlreadyHit")
local group g
if iX<19 then
call SetUnitVertexColor(IJ,$FF,$FF,$FF,5+iX*$A)
set J9G=O77(OB7,"Projectile2")
call SetUnitVertexColor(J9G,$FF,$FF,$FF,5+iX*$A)
elseif iX<125 then
call SetUnitVertexColor(IJ,$FF,$FF,$FF,$BE)
elseif iX<$96 then
endif
set g=WS7()
set gN=JHG
set IN4=IJ
set FT=IJ
set IT=V77
call GroupEnumUnitsInRange(g,GetUnitX(IJ),GetUnitY(IJ),425,Condition(function J4G))
call ForGroup(g,function I_G)
call WR7(g)
call SetUnitX(IJ,JFG)
call SetUnitY(IJ,JGG)
if iX==$8C then
set J9G=O77(OB7,"Projectile2")
call KillUnit(J9G)
elseif iX<$8C then
set J9G=O77(OB7,"Projectile2")
call SetUnitX(J9G,JFG)
call SetUnitY(J9G,JGG)
endif
if iX==$96 then
set g=WS7()
set IN4=IJ
call GroupEnumUnitsInRange(g,JFG,JGG,425+25,Condition(function AJ7))
call ForGroup(g,function J7G)
call WR7(g)
call KillUnit(IJ)
call WR7(JHG)
call NM7(OB7)
call OZ7(t)
endif
set t=null
set IJ=null
set J9G=null
set JHG=null
set g=null
return false
endfunction
function JIG takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local real iN=GetUnitX(WI7)
local real io=GetUnitY(WI7)
local location l=GetSpellTargetLoc()
local real IPD=GetLocationX(l)
local real IQD=GetLocationY(l)
local real RK
local real x1
local real y1
local real x2
local real y2
local trigger t
local integer OB7
local integer V77
local unit IJ
local unit J9G
local string s=""
local integer JJG=1747990101
if GetRandomInt(0,5)==0 then
set JJG=1747993674
endif
if IsPlayerAlly(GetOwningPlayer(WI7),GetLocalPlayer())or WG7(GetLocalPlayer())then
set s="war3mapImported\\Whirlpool.mdx"
endif
if IPD==GetUnitX(WI7)and IQD==GetUnitY(WI7)then
set IPD=IPD+50*Cos(GetUnitFacing(WI7)*bj_DEGTORAD)
set IQD=IQD+50*Sin(GetUnitFacing(WI7)*bj_DEGTORAD)
endif
set RK=Atan2(IQD-io,IPD-iN)
set x1=iN-$3E8*Cos(RK)
set y1=io-$3E8*Sin(RK)
set x2=iN+$3E8*Cos(RK)
set y2=io+$3E8*Sin(RK)
set t=CreateTrigger()
set OB7=GetHandleId(t)
set V77=GetUnitAbilityLevel(WI7,1093742923)
set IJ=CreateUnit(GetOwningPlayer(WI7),JJG,x1,y1,Atan2(IQD-io,IPD-iN)*bj_RADTODEG)
set J9G=CreateUnit(GetOwningPlayer(WI7),1747990102,x1,y1,Atan2(IQD-io,IPD-iN)*bj_RADTODEG)
call SetUnitVertexColor(IJ,$FF,$FF,$FF,0)
call SetUnitPathing(IJ,false)
call RemoveLocation(l)
call NP7(OB7,"Level",V77)
call NQ7(OB7,"Angle",RK)
call NT7(OB7,"Projectile",IJ)
call NT7(OB7,"Projectile2",J9G)
call NQ7(OB7,"x2",x1)
call NQ7(OB7,"y2",y1)
call NB7(OB7,"AlreadyHit",WS7())
call DestroyEffect(AddSpecialEffect(s,X17(x2),X07(y2)))
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function J8G))
set WI7=null
set t=null
set IJ=null
set J9G=null
set l=null
endfunction
function JKG takes nothing returns boolean
if GetSpellAbilityId()==1093742923 then
call JIG()
endif
return false
endfunction
function N48 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function JKG))
call X_7(1093742924)
set t=null
endfunction
function JMG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
if OH7(OB7,"Light")!=null then
call DestroyLightning(OH7(OB7,"Light"))
endif
call NM7(OB7)
call OZ7(t)
set t=null
return false
endfunction
function JNG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit BU7=O77(OB7,"Projectile")
local unit m5=O77(OB7,"Target")
local real JOG=ON7(OB7,"OriginalAngle")
local real l4=Atan2(GetUnitY(m5)-GetUnitY(BU7),GetUnitX(m5)-GetUnitX(BU7))
local integer V77=OM7(OB7,"Level")
local real x=GetUnitX(BU7)+50*Cos(l4)
local real y=GetUnitY(BU7)+50*Sin(l4)
local unit BB7
local destructable d
local lightning G9E
local unit AGF
local boolean Z18=OO7(OB7,"Active")
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call NM7(OB7)
call OZ7(t)
call KillUnit(BU7)
else
call SetUnitX(BU7,x)
call SetUnitY(BU7,y)
call SetUnitFacing(BU7,l4*bj_RADTODEG)
if KF7(x,y,GetUnitX(m5),GetUnitY(m5))<45 then
set WV4=(LoadReal(L7,(OB7),(6)))
set WW4=(LoadReal(L7,(OB7),(7)))
call NM7(OB7)
call OZ7(t)
if GetUnitTypeId(m5)!=1848651852 and Z18 then
set BB7=BW7(BU7,m5,JOG)
set d=BT7(BU7,m5,JOG)
if BB7!=null then
set t=CreateTrigger()
set OB7=GetHandleId(t)
set AGF=CreateUnit(GetOwningPlayer(m5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
call XF7(AGF,1093743177)
call SetUnitAbilityLevel(AGF,1093743177,V77+1)
call IssueTargetOrderById(AGF,$D007F,m5)
set AGF=CreateUnit(GetOwningPlayer(m5),1697656901,GetUnitX(BB7),GetUnitY(BB7),0)
call XF7(AGF,1093743177)
call SetUnitAbilityLevel(AGF,1093743177,V77+1)
call IssueTargetOrderById(AGF,$D007F,BB7)
call TriggerRegisterTimerEvent(t,.25+V77*.75,false)
call TriggerAddCondition(t,Condition(function JMG))
set G9E=AddLightning("MFPB",true,GetUnitX(m5),GetUnitY(m5),GetUnitX(BB7),GetUnitY(BB7))
call SetLightningColor(G9E,.5,.5,1,1)
call NW7(OB7,"Light",G9E)
elseif d!=null then
set t=CreateTrigger()
set OB7=GetHandleId(t)
set AGF=CreateUnit(GetOwningPlayer(m5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
call XF7(AGF,1093743177)
call SetUnitAbilityLevel(AGF,1093743177,V77+1)
call IssueTargetOrderById(AGF,$D007F,m5)
call TriggerRegisterTimerEvent(t,.25+V77*.75,false)
call TriggerAddCondition(t,Condition(function JMG))
set G9E=AddLightning("MFPB",true,GetUnitX(m5),GetUnitY(m5),GetDestructableX(d),GetDestructableY(d))
call SetLightningColor(G9E,.5,.5,1,1)
call NW7(OB7,"Light",G9E)
call SetDestructableAnimation(d,"stand hit")
else
set AGF=CreateUnit(GetOwningPlayer(m5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
call XF7(AGF,1093743177)
call SetUnitAbilityLevel(AGF,1093743177,1)
call IssueTargetOrderById(AGF,$D007F,m5)
endif
endif
call KillUnit(BU7)
endif
endif
set t=null
set BU7=null
set m5=null
set G9E=null
set BB7=null
set d=null
set AGF=null
return false
endfunction
function JPG takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local real l4=Atan2(GetUnitY(m5)-GetUnitY(p5),GetUnitX(m5)-GetUnitX(p5))
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit BU7=CreateUnit(GetOwningPlayer(p5),1747990327,GetUnitX(p5),GetUnitY(p5),l4*bj_RADTODEG)
local integer V77=GetUnitAbilityLevel(p5,1093743178)
local boolean Z18=WQ7(GetSpellTargetUnit())==false
call NT7(OB7,"Projectile",BU7)
call NT7(OB7,"Target",m5)
call NP7(OB7,"Level",V77)
call NQ7(OB7,"OriginalAngle",(l4)*1.)
call NS7(OB7,"Active",Z18)
call SaveReal(L7,(OB7),(6),((GetUnitX(p5))*1.))
call SaveReal(L7,(OB7),(7),((GetUnitY(p5))*1.))
call TriggerRegisterTimerEvent(t,.033,true)
call TriggerAddCondition(t,Condition(function JNG))
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
set p5=null
set m5=null
set t=null
endfunction
function JQG takes nothing returns boolean
if GetSpellAbilityId()==1093743178 then
call JPG()
endif
return false
endfunction
function N78 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function JQG))
set t=null
endfunction
function JRG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local integer V77=OM7(OB7,"Level")
local integer JSG=OM7(OB7,"BonusID")
call DestroyEffect(AddSpecialEffect("effects\\Tornado.mdx",GetUnitX(p5),GetUnitY(p5)))
if GetTriggerEvalCount(t)>$A*(2+1*V77)or GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitRemoveAbility(p5,JSG)
call UnitRemoveAbility(p5,1110456663)
call DestroyEffect(OG7(OB7,"FX1"))
call DestroyEffect(OG7(OB7,"FX2"))
call NM7(OB7)
call OZ7(t)
endif
set t=null
set p5=null
return false
endfunction
function JTG takes nothing returns nothing
local unit p5=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local integer V77=GetUnitAbilityLevel(p5,1093743689)
local integer JSG
if V77==1 then
set JSG=1093743413
elseif V77==2 then
set JSG=1093743183
elseif V77==3 then
set JSG=1093743412
elseif V77==4 then
set JSG=1093743417
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),JSG,false)
call Z67(p5,JSG,1,2+1*V77)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function JRG))
call NT7(OB7,"Source",p5)
call NP7(OB7,"Level",V77)
call NP7(OB7,"BonusID",JSG)
call NU7(OB7,"FX1",AddSpecialEffectTarget("effects\\Tornado.mdx",p5,"hand,left"))
call NU7(OB7,"FX2",AddSpecialEffectTarget("effects\\Tornado.mdx",p5,"hand,right"))
set p5=null
set t=null
endfunction
function JUG takes nothing returns boolean
if GetSpellAbilityId()==1093743689 then
call JTG()
endif
return false
endfunction
function N88 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function JUG))
set t=null
endfunction
function JVG takes unit p5,unit m5,real YM7,integer JWG,integer JXG returns nothing
call B67(p5,m5,3,(YM7)*Pow(0.9,JWG))
endfunction
function JYG takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),ZB)==false and GetUnitAbilityLevel(GetEnumUnit(),1113815395)==0 then
call JVG(vc,GetEnumUnit(),ec,ac,xc)
call GroupAddUnit(ZB,GetEnumUnit())
set ac=ac+1
endif
endfunction
function JZG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit IJ=O77(OB7,"Projectile")
local real JDG=ON7(OB7,"TargetX")
local real JEG=ON7(OB7,"TargetY")
local real RK=ON7(OB7,"Angle")
local real YM7=ON7(OB7,"Damage")
local integer JXG=OM7(OB7,"TreeCount")
local integer JWG=OM7(OB7,"UnitCount")
local group JHG=OF7(OB7,"AlreadyHit")
local real x=X17(GetUnitX(IJ)+(60*Pow(1.1,JWG)*Pow(1.01,JXG))*Cos(RK))
local real y=X07(GetUnitY(IJ)+(60*Pow(1.1,JWG)*Pow(1.01,JXG))*Sin(RK))
local group g=WS7()
local real d
if GetTriggerEvalCount(t)>2 then
set d=175
else
set d=100
endif
call DestroyEffect(AddSpecialEffect("effects\\Tornado.mdx",x,y))
set JXG=JXG+Y67(x,y,75)
call NP7(OB7,"TreeCount",JXG)
set ZB=JHG
set vc=IJ
set ec=YM7
set xc=JXG
set ac=JWG
set IN4=IJ
call GroupEnumUnitsInRange(g,x,y,d,Condition(function AJ7))
call ForGroup(g,function JYG)
call WR7(g)
call NP7(OB7,"UnitCount",ac)
call SetUnitX(IJ,x)
call SetUnitY(IJ,y)
if GetTriggerEvalCount(t)>46 then
call KillUnit(IJ)
call WR7(JHG)
call NM7(OB7)
call OZ7(t)
endif
set t=null
set IJ=null
set JHG=null
set g=null
return false
endfunction
function JAG takes nothing returns nothing
local unit p5=GetTriggerUnit()
local real x2=ON7(GetHandleId(p5),"ReverseLance|x")
local real y2=ON7(GetHandleId(p5),"ReverseLance|y")
local real JBG=YJ7(KQ7()-ON7(GetHandleId(p5),"ReverseLance|Time"),1.)
local real RK=Atan2(y2-GetUnitY(p5),x2-GetUnitX(p5))
local trigger t
local integer OB7
local unit IJ
local integer V77=GetUnitAbilityLevel(p5,1093743179)
local real YM7=(40+80*V77)*(JBG)
set t=CreateTrigger()
set OB7=GetHandleId(t)
set IJ=CreateUnit(GetOwningPlayer(p5),1747990328,GetUnitX(p5),GetUnitY(p5),RK*bj_RADTODEG)
set x2=GetUnitX(p5)+2600*Cos(RK)
set y2=GetUnitY(p5)+2600*Sin(RK)
call NT7(OB7,"Projectile",IJ)
call NQ7(OB7,"TargetX",x2)
call NQ7(OB7,"TargetY",y2)
call NQ7(OB7,"Angle",RK)
call NQ7(OB7,"Damage",YM7)
call NP7(OB7,"TreeCount",0)
call NP7(OB7,"UnitCount",0)
call NB7(OB7,"AlreadyHit",WS7())
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function JZG))
set p5=null
set t=null
set IJ=null
endfunction
function JCG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=O77(OB7,"Hero")
call SetUnitTimeScale(WI7,1)
call NM7(OB7)
call OZ7(t)
set t=null
set WI7=null
return false
endfunction
function J3G takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit WI7=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
call RemoveLocation(l)
call NQ7(GetHandleId(WI7),"ReverseLance|x",x)
call NQ7(GetHandleId(WI7),"ReverseLance|y",y)
call NQ7(GetHandleId(WI7),"ReverseLance|Time",KQ7())
call SetUnitTimeScale(WI7,.75)
call NT7(OB7,"Hero",WI7)
call TriggerRegisterTimerEvent(t,.75,false)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function JCG))
set t=null
set WI7=null
endfunction
function J6G takes nothing returns boolean
if GetSpellAbilityId()==1093743179 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
call NS7(GetHandleId(GetTriggerUnit()),"ReverseLance|Active",false)
call J3G()
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
call NS7(GetHandleId(GetTriggerUnit()),"ReverseLance|Active",true)
elseif OO7(GetHandleId(GetTriggerUnit()),"ReverseLance|Active") then
call JAG()
endif
endif
return false
endfunction
function N98 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_ENDCAST)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function J6G))
set t=null
endfunction
function JLG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
local integer B07=OM7(OB7,"TargetIndex")
local unit m5=TQ7(B07)
local real J1G=ON7(OB7,"Rate")
local boolean EWD=OO7(OB7,"Scepter")
if GetTriggerEvalCount(t)==1 then
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_EFFECT)
endif
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==p5 and EWD==false then
call SetUnitState(m5,UNIT_STATE_LIFE,GetUnitState(m5,UNIT_STATE_LIFE)+(J1G)*GetEventDamage()*0)
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093743184 or GetSpellAbilityId()==1093747766 then
call TP7(B07)
call NM7(OB7)
call OZ7(t)
endif
else
call UnitRemoveAbility(p5,1093743186)
call UnitRemoveAbility(p5,1110456664)
call TP7(B07)
call NM7(OB7)
call OZ7(t)
call UnitRemoveAbility(p5,1093748299)
call UnitRemoveAbility(p5,1093748300)
call UnitRemoveAbility(p5,1093748298)
call UnitRemoveAbility(p5,1093816403)
call UnitRemoveAbility(p5,1093816404)
call UnitRemoveAbility(p5,1093816405)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function J0G takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local integer V77=GetUnitAbilityLevel(ZX7,1093743184)
local real R9D=.6-V77*.1
local boolean TGD=false
call UnitRemoveAbility(ZX7,1093743186)
call UnitRemoveAbility(ZX7,1110456664)
if V77>0 then
call UnitRemoveAbility(ZX7,1093816403)
call UnitRemoveAbility(ZX7,1093816404)
call UnitRemoveAbility(ZX7,1093816405)
if V77==1 then
call XF7(ZX7,1093748299)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093748299,false)
elseif V77==2 then
call XF7(ZX7,1093748300)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093748300,false)
elseif V77==3 then
call XF7(ZX7,1093748298)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093748298,false)
endif
endif
if V77==0 then
call UnitRemoveAbility(ZX7,1093748299)
call UnitRemoveAbility(ZX7,1093748300)
call UnitRemoveAbility(ZX7,1093748298)
set TGD=true
set V77=GetUnitAbilityLevel(ZX7,1093747766)
set R9D=.45-V77*.15
if V77==1 then
call XF7(ZX7,1093816403)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093816403,false)
elseif V77==2 then
call XF7(ZX7,1093816404)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093816404,false)
elseif V77==3 then
call XF7(ZX7,1093816405)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093816405,false)
endif
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093743186,false)
call XF7(ZX7,1093743186)
call IssueTargetOrderById(ZX7,$D000F,IH7)
call NT7(OB7,"Source",ZX7)
call NS7(OB7,"Scepter",TGD)
call NP7(OB7,"TargetIndex",TS7(IH7))
call NQ7(OB7,"Rate",R9D)
call NP7(OB7,"Attacks",0)
call NT7(GetHandleId(ZX7),"Target",IH7)
call TriggerRegisterTimerEvent(t,20,false)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function JLG))
set ZX7=null
set IH7=null
set t=null
endfunction
function J5G takes nothing returns boolean
if(GetSpellAbilityId()==1093743184 or GetSpellAbilityId()==1093747766)and WQ7(GetSpellTargetUnit())==false then
call J0G()
endif
return false
endfunction
function J2G takes unit ZX7 returns nothing
local unit IH7=O77(GetHandleId(ZX7),"Target")
if GetTriggerUnit()==IH7 then
call DestroyEffect(AddSpecialEffectTarget("effects\\Tornado.mdx",ZX7,"hand,left"))
call DestroyEffect(AddSpecialEffectTarget("effects\\Tornado.mdx",ZX7,"hand,right"))
elseif GetTriggerUnit()!=IH7 then
call UnitRemoveAbility(ZX7,1093743186)
call UnitRemoveAbility(ZX7,1110456664)
call UnitRemoveAbility(ZX7,1093748299)
call UnitRemoveAbility(ZX7,1093748300)
call UnitRemoveAbility(ZX7,1093748298)
call UnitRemoveAbility(ZX7,1093816403)
call UnitRemoveAbility(ZX7,1093816404)
call UnitRemoveAbility(ZX7,1093816405)
endif
set IH7=null
endfunction
function J_G takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093743186)>0 then
call J2G(GetAttacker())
endif
return false
endfunction
function ND8 takes nothing returns nothing
local trigger t=CreateTrigger()
local trigger t2=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function J5G))
call YB7(t2,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t2,Condition(function J_G))
set t=null
set t2=null
endfunction
function K4G takes unit WI7,integer V77 returns integer
local integer K7G
local integer K8G
if V77==1 then
set K8G=1110458929
set K7G=1093744730
if GetUnitAbilityLevel(WI7,K8G)>0 then
call UnitRemoveAbility(WI7,K8G)
return K7G
endif
set K8G=1110458928
set K7G=1093744970
if GetUnitAbilityLevel(WI7,K8G)>0 then
call UnitRemoveAbility(WI7,K8G)
return K7G
endif
set K8G=1110458713
set K7G=1093744970
if GetUnitAbilityLevel(WI7,K8G)>0 then
call UnitRemoveAbility(WI7,K8G)
return K7G
endif
return 1093744729
elseif V77==2 then
set K8G=1110458936
set K7G=1093744968
if GetUnitAbilityLevel(WI7,K8G)>0 then
call UnitRemoveAbility(WI7,K8G)
return K7G
endif
set K8G=1110458935
set K7G=1093744967
if GetUnitAbilityLevel(WI7,K8G)>0 then
call UnitRemoveAbility(WI7,K8G)
return K7G
endif
set K8G=1110458930
set K7G=1093744967
if GetUnitAbilityLevel(WI7,K8G)>0 then
call UnitRemoveAbility(WI7,K8G)
return K7G
endif
return 1093744969
elseif V77==3 then
set K8G=1110458931
set K7G=1093744965
if GetUnitAbilityLevel(WI7,K8G)>0 then
call UnitRemoveAbility(WI7,K8G)
return K7G
endif
set K8G=1110458937
set K7G=1093744964
if GetUnitAbilityLevel(WI7,K8G)>0 then
call UnitRemoveAbility(WI7,K8G)
return K7G
endif
set K8G=1110458934
set K7G=1093744964
if GetUnitAbilityLevel(WI7,K8G)>0 then
call UnitRemoveAbility(WI7,K8G)
return K7G
endif
return 1093744971
elseif V77==4 then
set K8G=1110458933
set K7G=1093744950
if GetUnitAbilityLevel(WI7,K8G)>0 then
call UnitRemoveAbility(WI7,K8G)
return K7G
endif
set K8G=1110458932
set K7G=1093744949
if GetUnitAbilityLevel(WI7,K8G)>0 then
call UnitRemoveAbility(WI7,K8G)
return K7G
endif
set K8G=1110458945
set K7G=1093744949
if GetUnitAbilityLevel(WI7,K8G)>0 then
call UnitRemoveAbility(WI7,K8G)
return K7G
endif
return 1093744972
endif
return 0
endfunction
function K9G takes nothing returns nothing
local unit WI7=GetTriggerUnit()
local integer V77=GetUnitAbilityLevel(WI7,1093744728)
local integer K8G=K4G(WI7,V77)
local unit BB7=CreateUnit(GetOwningPlayer(WI7),1697656901,GetUnitX(WI7),GetUnitY(WI7),0)
call XF7(BB7,K8G)
call IssueTargetOrderById(BB7,$D0085,WI7)
set WI7=null
set BB7=null
endfunction
function KDG takes nothing returns boolean
if GetSpellAbilityId()==1093677382 or GetSpellAbilityId()==1093677623 or GetSpellAbilityId()==1093677392 or GetSpellAbilityId()==1093679450 or(GetUnitPointValue(GetTriggerUnit())==500 and UL7(GetSpellAbilityId()))then
call K9G()
endif
return false
endfunction
function KEG takes unit WI7,boolean UA9 returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,WI7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function KDG))
if UA9 then
set nj[GetPlayerId(GetOwningPlayer(WI7))]=t
endif
set t=null
set WI7=null
endfunction
function KFG takes nothing returns boolean
if GetLearnedSkill()==1093744728 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093744728)==1 then
call KEG(GetTriggerUnit(),false)
endif
return false
endfunction
function NE8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function KFG))
set t=null
endfunction
function ZI3 takes nothing returns nothing
local integer V77=GetUnitAbilityLevel(GetTriggerUnit(),1093679450)
local real YM7
set YM7=250+200*V77
call B67(GetTriggerUnit(),GetSpellTargetUnit(),7,YM7)
endfunction
function Z13 takes nothing returns boolean
if(GetSpellAbilityId()==1093679450)and WQ7(GetSpellTargetUnit())==false then
call ZI3()
endif
return false
endfunction
function ZO3 takes nothing returns boolean
if(GetSpellAbilityId()==1093677392)and WF7(GetSpellTargetUnit())then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848659026))
endif
return false
endfunction
function NF8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function ZO3))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Z13))
set t=null
endfunction
function KHG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=O77(I97,"Source")
local unit IH7=O77(I97,"Target")
local integer WF8=OM7(GetHandleId(IH7),"StickyNapalm|Count")
local boolean KIG=OO7(I97,"Locked")
local real YM7
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call SetUnitTurnSpeed(IH7,GetUnitDefaultTurnSpeed(IH7))
call NP7(GetHandleId(IH7),"StickyNapalm|Count",0)
call NM7(I97)
call OZ7(t)
call YW8(IH7,0,0)
elseif WF8==0 then
call SetUnitTurnSpeed(IH7,GetUnitDefaultTurnSpeed(IH7))
call NP7(GetHandleId(IH7),"StickyNapalm|Count",0)
call NM7(I97)
call OZ7(t)
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED and KIG==false then
if WF8>0 and GetUnitAbilityLevel(GetEventDamageSource(),1093748044)>0 and O77(GetHandleId(GetTriggeringTrigger()),"Source")==GetEventDamageSource()then
call NS7(I97,"Locked",true)
if S44 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\LordofFlameMissile\\LordofFlameMissile.mdl",IH7,"chest"))
set YM7=.5*(5+5*GetUnitAbilityLevel(ZX7,1093748044))*WF8
elseif bJ==false and GetEventDamage()>$C then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\LordofFlameMissile\\LordofFlameMissile.mdl",IH7,"chest"))
set YM7=(5+5*GetUnitAbilityLevel(ZX7,1093748044))*WF8
endif
if IsUnitType(IH7,UNIT_TYPE_HERO)==false then
set YM7=YM7*0.5
endif
if S44 then
call B67(ZX7,IH7,1,YM7)
elseif bJ==false and GetEventDamage()>$C then
call B67(ZX7,IH7,1,YM7)
endif
call NS7(I97,"Locked",false)
endif
else
call SetUnitTurnSpeed(IH7,GetUnitDefaultTurnSpeed(IH7)*.3)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function KJG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(O77(I97,"Source"))
local unit IH7=(O77(I97,"Target"))
local real ZV8=(ON7(GetHandleId(IH7),"StickyNapalm|LastTime"))
local integer StickyCount=(OM7(GetHandleId(IH7),"StickyNapalm|Count"))
if(TimerGetElapsed(W))-ZV8>=8 then
call SetUnitTurnSpeed(IH7,GetUnitDefaultTurnSpeed(IH7))
call NP7(GetHandleId(IH7),"StickyNapalm|Count",0)
call YW8(IH7,0,0)
endif
call NM7(I97)
call OZ7(t)
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function KKG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetEnumUnit()
local trigger t
local integer I97
local integer BC7=GetUnitAbilityLevel(ZX7,1093748044)
local integer WF8=IMinBJ(OM7(GetHandleId(IH7),"StickyNapalm|Count")+1,$A)
if WF7(IH7)then
set ZX7=null
set IH7=null
return
endif
call YW8(IH7,BC7,WF8)
call NP7(GetHandleId(IH7),"StickyNapalm|Count",WF8)
call NQ7(GetHandleId(IH7),"StickyNapalm|LastTime",(TimerGetElapsed(W))*1.)
call SetUnitTurnSpeed(IH7,GetUnitDefaultTurnSpeed(IH7)*.3)
if IsUnitType(IH7,UNIT_TYPE_HERO) then
call YX7(GetOwningPlayer(ZX7),I2S(WF8)+"!",2,IH7,.026,50,0,$FF,$D8)
endif
if WF8==1 then
set t=CreateTrigger()
set I97=GetHandleId(t)
call NT7(I97,"Source",ZX7)
call NT7(I97,"Target",IH7)
call NS7(I97,"Locked",false)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function KHG))
endif
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,8,false)
call TriggerAddCondition(t,Condition(function KJG))
call NT7(I97,"Source",ZX7)
call NT7(I97,"Target",IH7)
set t=null
set ZX7=null
set IH7=null
endfunction
function KMG takes nothing returns nothing
local group g=WS7()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local unit p5=GetTriggerUnit()
call GroupEnumUnitsInRange(g,x,y,400,Condition(function AW7))
call ForGroup(g,function KKG)
call Y57(GetOwningPlayer(p5),2,x,y,500)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x,y))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x,y+$82))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x,y-$82))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x+$82,y))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x+$82,y+$82))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x+$82,y-$82))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x-$82,y))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x-$82,y+$82))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x-$82,y-$82))
call RemoveLocation(l)
call WR7(g)
set g=null
set l=null
set p5=null
endfunction
function KNG takes nothing returns boolean
if GetSpellAbilityId()==1093748044 then
call KMG()
endif
return false
endfunction
function NG8 takes nothing returns nothing
local integer i
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function KNG))
set WI4[1]=1093752899
set WI4[2]=1093752898
set WI4[3]=1093752884
set WI4[4]=1093752885
set WI4[5]=1093752886
set WI4[6]=1093752887
set WI4[7]=1093752897
set WI4[8]=1093752888
set WI4[9]=1093752889
set WI4[$A]=1093752900
set WJ4[1]=1093752909
set WJ4[2]=1093752901
set WJ4[3]=1093752902
set WJ4[4]=1093752903
set WJ4[5]=1093752904
set WJ4[6]=1093752905
set WJ4[7]=1093752906
set WJ4[8]=1093752907
set WJ4[9]=1093752910
set WJ4[$A]=1093752908
set WK4[1]=1093752911
set WK4[2]=1093752918
set WK4[3]=1093752919
set WK4[4]=1093752913
set WK4[5]=1093752914
set WK4[6]=1093752915
set WK4[7]=1093752920
set WK4[8]=1093752916
set WK4[9]=1093752917
set WK4[$A]=1093752912
set WM4[1]=1093752921
set WM4[2]=1093752922
set WM4[3]=1093753141
set WM4[4]=1093753142
set WM4[5]=1093753143
set WM4[6]=1093753137
set WM4[7]=1093753138
set WM4[8]=1093753139
set WM4[9]=1093753140
set WM4[$A]=1093753136
set i=1
loop
exitwhen i>$A
call X_7(WI4[i])
set i=i+1
endloop
set i=1
loop
exitwhen i>$A
call X_7(WJ4[i])
set i=i+1
endloop
set i=1
loop
exitwhen i>$A
call X_7(WK4[i])
set i=i+1
endloop
set i=1
loop
exitwhen i>$A
call X_7(WM4[i])
set i=i+1
endloop
set t=null
endfunction
function KOG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit m5=O77(OB7,"Target")
local real a=ON7(OB7,"a")
local real d=ON7(OB7,"d")
local real x1=ON7(OB7,"x")
local real y1=ON7(OB7,"y")
local real x2
local real y2
local real x
local real y
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>$A then
call Y67(GetUnitX(m5),GetUnitY(m5),$C8)
call DestroyEffect(OG7(OB7,"FX"))
call NM7(OB7)
call OZ7(t)
else
set x2=x1+d*Cos(a)
set y2=y1+d*Sin(a)
if(IsPointInRegion(IU4,((x2)*1.),((y2)*1.)))==false then
call NQ7(OB7,"x",(x2)*1.)
call NQ7(OB7,"y",(y2)*1.)
set x=x2
set y=y2
else
set x=x1
set y=y1
endif
if IsUnitType(m5,UNIT_TYPE_HERO) then
call SetUnitPosition(m5,x,y)
else
call SetUnitX(m5,x)
call SetUnitY(m5,y)
endif
endif
set t=null
set m5=null
return false
endfunction
function R1Z takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer I97=GetHandleId(t)
local integer c=LoadInteger(L7,I97,0)
local unit u=LoadUnitHandle(L7,I97,1)
if c==1 or XH7(u)or GetUnitAbilityLevel(u,'A2W9')==0 then
if GetUnitAbilityLevel(u,'A2W9')!=0 then
call B67(LoadUnitHandle(L7,I97,0),u,1,LoadReal(L7,I97,0))
endif
call UnitRemoveAbility(u,'A2W9')
call UnitRemoveAbility(u,'B0HC')
call FlushChildHashtable(L7,I97)
call PauseTimer(t)
call DestroyTimer(t)
else
call B67(LoadUnitHandle(L7,I97,0),u,1,LoadReal(L7,I97,0))
call SaveInteger(L7,I97,0,c-1)
endif
set u=null
set t=null
endfunction
function R20 takes unit ZX7,unit IH7 returns nothing
local timer t=CreateTimer()
local integer I97=GetHandleId(t)
call FlushChildHashtable(L7,I97)
call SaveUnitHandle(L7,I97,0,ZX7)
call SaveUnitHandle(L7,I97,1,IH7)
call SaveInteger(L7,I97,0,S84+2)
call XF7(IH7,'A2W9')
call SaveReal(L7,I97,0,S84*5+20)
call TimerStart(t,1,true,function R1Z)
set t=null
endfunction
function KPG takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetEnumUnit()
local integer V77=GetUnitAbilityLevel(p5,1093744982)
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function KOG))
call NT7(OB7,"Target",m5)
call NQ7(OB7,"a",(Atan2(GetUnitY(m5)-C1,GetUnitX(m5)-B1))*1.)
call NQ7(OB7,"d",(YK7((400-KF7(B1,C1,GetUnitX(m5),GetUnitY(m5))),$A)/ $A)*1.)
call NQ7(OB7,"x",(GetUnitX(m5))*1.)
call NQ7(OB7,"y",(GetUnitY(m5))*1.)
call R20(S74,m5)
set p5=null
set m5=null
set t=null
endfunction
function KQG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit BB7=O77(OB7,"Caster")
local unit p5=O77(OB7,"Source")
local real a=ON7(OB7,"a")
local group g=WS7()
local unit m5
local real x=GetUnitX(BB7)
local real y=GetUnitY(BB7)
local real HME=ON7(OB7,"FinalX")
local real HNE=ON7(OB7,"FinalY")
set x=X17(x+36*Cos(a))
set y=X07(y+36*Sin(a))
call SetUnitX(BB7,x)
call SetUnitY(BB7,y)
set IN4=BB7
call GroupEnumUnitsInRange(g,x,y,125,Condition(function AR7))
set m5=FirstOfGroup(g)
call WR7(g)
if KF7(x,y,HME,HNE)<40 or GetTriggerEvalCount(t)>100 then
set m5=null
set x=HME
set y=HNE
set S74=p5
set S84=OM7(OB7,"Level")
set N1=m5
if m5==null then
set B1=x
set C1=y
else
set B1=GetUnitX(m5)
set C1=GetUnitY(m5)
endif
set g=WS7()
call GroupEnumUnitsInRange(g,x,y,400,Condition(function AR7))
if m5!=null then
call GroupRemoveUnit(g,m5)
call BA7(p5,m5,.3)
call B67(S74,m5,1,S84*75)
endif
call ForGroup(g,function KPG)
call KillUnit(BB7)
call WR7(g)
call NM7(OB7)
call OZ7(t)
endif
set t=null
set m5=null
set BB7=null
set p5=null
set g=null
return false
endfunction
function KRG takes nothing returns nothing
local unit p5=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=Atan2(y-GetUnitY(p5),x-GetUnitX(p5))
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local integer V77=GetUnitAbilityLevel(p5,1093744982)
local unit BB7
set BB7=CreateUnit(GetOwningPlayer(p5),1747993924,GetUnitX(p5),GetUnitY(p5),a*bj_RADTODEG)
call RemoveLocation(l)
call NQ7(OB7,"a",a)
call NP7(OB7,"Level",V77)
call NT7(OB7,"Source",p5)
call NT7(OB7,"Caster",BB7)
call NQ7(OB7,"FinalX",((x)*1.))
call NQ7(OB7,"FinalY",((y)*1.))
call TriggerRegisterTimerEvent(t,.04,true)
call TriggerAddCondition(t,Condition(function KQG))
set p5=null
set BB7=null
set l=null
set t=null
endfunction
function KSG takes nothing returns boolean
if GetSpellAbilityId()==1093744982 then
call KRG()
endif
return false
endfunction
function NH8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function KSG))
set t=null
endfunction
function KTG takes nothing returns nothing
local unit ZX7=S94
local unit Z7F=GetEnumUnit()
local unit IH7
local group g
if GetUnitCurrentOrder(Z7F)==0 then
set g=WS7()
set IN4=Z7F
call GroupEnumUnitsInRange(g,GetUnitX(Z7F),GetUnitY(Z7F),825,Condition(function AJ7))
set IH7=FirstOfGroup(g)
if IH7!=null then
call GroupRemoveUnit(g,IH7)
endif
if FirstOfGroup(g)==null and IH7==ZX7 then
call IssueTargetOrderById(Z7F,$D000F,IH7)
endif
call WR7(g)
set IH7=null
set g=null
endif
set ZX7=null
set Z7F=null
endfunction
function KUG takes unit ZX7 returns nothing
local group g=WS7()
set IN4=ZX7
set S94=ZX7
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),$3E8,Condition(function BF7))
call ForGroup(g,function KTG)
call WR7(g)
set g=null
endfunction
function KVG takes nothing returns nothing
call B67(S94,GetEnumUnit(),1,SD4*$A-5)
endfunction
function KWG takes unit ZX7,integer I97,integer WF8 returns nothing
local group g1=WS7()
local group g2=WS7()
local integer i=0
set IN4=ZX7
loop
exitwhen i>WF8
call GroupEnumUnitsInRange(g2,ON7(I97,"X"+I2S(i)),ON7(I97,"Y"+I2S(i)),$E1,Condition(function AJ7))
call GroupAddGroup(g2,g1)
call GroupClear(g2)
set i=i+1
endloop
call WR7(g2)
if FirstOfGroup(g1)!=null then
set S94=ZX7
set SD4=GetUnitAbilityLevel(ZX7,1093744986)
call ForGroup(g1,function KVG)
endif
call WR7(g1)
set g1=null
set g2=null
endfunction
function KXG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=O77(I97,"Source")
local real TP9=ON7(I97,"LastX")
local real TQ9=ON7(I97,"LastY")
local integer WF8=OM7(I97,"Count")
local integer i
local real x
local real y
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>360 then
set i=0
loop
exitwhen i>WF8
call DestroyEffect(OG7(I97,"FX"+I2S(i)))
set i=i+1
endloop
call NM7(I97)
call OZ7(t)
else
set x=GetUnitX(ZX7)
set y=GetUnitY(ZX7)
if V8 then
call KUG(ZX7)
endif
if KF7(x,y,TP9,TQ9)>125 then
set WF8=WF8+1
call NP7(I97,"Count",WF8)
call NQ7(I97,"LastX",x)
call NQ7(I97,"LastY",y)
call NU7(I97,"FX"+I2S(WF8),AddSpecialEffect("War3MapImported\\FireFlyGroundEffect.mdx",x,y))
call NQ7(I97,"X"+I2S(WF8),x)
call NQ7(I97,"Y"+I2S(WF8),y)
endif
if ModuloInteger(GetTriggerEvalCount(t),$A)==0 then
set S44=true
call KWG(ZX7,I97,WF8)
set S44=false
endif
call Y67(GetUnitX(ZX7),GetUnitY(ZX7),100)
endif
return false
endfunction
function KYG takes nothing returns nothing
local unit p5=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function KXG))
call NT7(OB7,"Source",p5)
call NU7(OB7,"FX"+I2S(0),AddSpecialEffect("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",GetUnitX(p5),GetUnitY(p5)))
call NQ7(OB7,"LastX",GetUnitX(p5))
call NQ7(OB7,"LastY",GetUnitY(p5))
call NQ7(OB7,"X"+I2S(0),GetUnitX(p5))
call NQ7(OB7,"Y"+I2S(0),GetUnitY(p5))
set p5=null
set t=null
endfunction
function KZG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=O77(OB7,"Source")
if XH7(p5)then
return false
endif
if GetUnitTypeId(p5)==1328558390 then
call SetUnitFlyHeight(p5,$AA,0)
elseif GetUnitTypeId(p5)==1328558391 then
call SetUnitFlyHeight(p5,$DC,0)
endif
set t=null
set p5=null
return false
endfunction
function KAG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit p5=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,2,true)
call TriggerAddCondition(t,Condition(function KZG))
call NT7(OB7,"Source",p5)
set t=null
set p5=null
endfunction
function KBG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local real x=(LoadReal(L7,(I97),(6)))
local real y=(LoadReal(L7,(I97),(7)))
call SetTerrainPathable(x,y,PATHING_TYPE_WALKABILITY,false)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
return false
endfunction
function KCG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local real x=GetUnitX(ZX7)
local real y=GetUnitY(ZX7)
call SetTerrainPathable(x,y,PATHING_TYPE_WALKABILITY,true)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function KBG))
call SaveReal(L7,(I97),(6),((x)*1.))
call SaveReal(L7,(I97),(7),((y)*1.))
set ZX7=null
set t=null
endfunction
function K3G takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093744986 then
if GetUnitTypeId(GetTriggerUnit())==1328558390 then
call KYG()
elseif IsTerrainPathable(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),PATHING_TYPE_WALKABILITY)then
call KCG()
endif
endif
else
if GetLearnedSkill()==1093744986 and GetUnitAbilityLevel(GetTriggerUnit(),1093744986)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call KAG()
endif
endif
return false
endfunction
function NI8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function K3G))
set t=null
endfunction
function K6G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit p5=(LoadUnitHandle(L7,I97,2))
local unit m5=(LoadUnitHandle(L7,I97,17))
local unit BB7=(LoadUnitHandle(L7,I97,19))
local unit ZX7=LoadUnitHandle(L7,I97,$F)
local real d=KF7(GetUnitX(p5),GetUnitY(p5),GetUnitX(m5),GetUnitY(m5))
local real a
local real Z27=(LoadReal(L7,I97,57))
local real GEE=(LoadReal(L7,I97,282))
local real GFE=(LoadReal(L7,I97,283))
local real x
local real y
local integer c=GetTriggerEvalCount(t)
if GetTriggerEventId()==EVENT_WIDGET_DEATH or c>R2I(20*Z27)then
call DestroyEffect((LoadEffectHandle(L7,I97,32)))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call KillUnit(BB7)
call SetUnitPathing(m5,true)
call UnitRemoveAbility(p5,1096971630)
call Y67(GetUnitX(m5),GetUnitY(m5),$AF)
else
call SetUnitX(BB7,GetUnitX(p5))
call SetUnitY(BB7,GetUnitY(p5))
if LoadBoolean(L7,I97,$F)and ModuloInteger(c,9)==0 then
call B67(ZX7,m5,1,50)
endif
if GetUnitAbilityLevel(m5,'B0BE')==0 or KF7(GEE,GFE,GetUnitX(p5),GetUnitY(p5))>400 or(KE7(p5,m5)>400 and LoadInteger(L7,GetHandleId(m5),4407)==1)then
call DestroyEffect((LoadEffectHandle(L7,I97,32)))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call KillUnit(BB7)
call SetUnitPathing(m5,true)
call UnitRemoveAbility(p5,1096971630)
call Y67(GetUnitX(m5),GetUnitY(m5),$AF)
else
call SaveReal(L7,I97,282,((GetUnitX(p5))*1.))
call SaveReal(L7,I97,283,((GetUnitY(p5))*1.))
if d>300 then
set a=Atan2(GetUnitY(m5)-GetUnitY(p5),GetUnitX(m5)-GetUnitX(p5))
set x=GetUnitX(p5)+300*Cos(a)
set y=GetUnitY(p5)+300*Sin(a)
if(IsPointInRegion(IU4,((x)*1.),((y)*1.)))==false then
call SetUnitX(m5,x)
call SetUnitY(m5,y)
endif
endif
endif
endif
set t=null
set p5=null
set m5=null
set BB7=null
set ZX7=null
return false
endfunction
function KLG takes unit WI7,unit ZX7,unit m5,boolean Utv,integer BC7,boolean L8v returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit BB7=CreateUnit(GetOwningPlayer(WI7),'u00Y',GetUnitX(WI7),GetUnitY(WI7),0)
local group g
local unit p5
if L8v then
set g=WS7()
set IN4=ZX7
call GroupEnumUnitsInRange(g,GetUnitX(m5),GetUnitY(m5),425,Condition(function AN7))
call GroupRemoveUnit(g,m5)
set p5=M59(g,GetUnitX(m5),GetUnitY(m5))
call WR7(g)
if p5!=null then
call SaveUnitHandle(dvv,'A1MV',0,m5)
call SaveUnitHandle(dvv,'A1MV',1,p5)
call SaveUnitHandle(dvv,'A1MV',2,WI7)
call SaveBoolean(dvv,'A1MV',0,L8v)
call SaveInteger(dvv,'A1MV',0,BC7)
call ExecuteFunc("UTv")
endif
set p5=null
endif
call XF7(BB7,'A19N')
call SetUnitAbilityLevel(BB7,'A19N',BC7)
call IssueTargetOrderById(BB7,$D0200,m5)
call SetUnitPathing(BB7,false)
call SetUnitPathing(m5,false)
if Utv then
call XF7(WI7,1096971630)
endif
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterDeathEvent(t,WI7)
call TriggerRegisterDeathEvent(t,m5)
if m5!=ZX7 then
call TriggerRegisterDeathEvent(t,ZX7)
endif
call TriggerAddCondition(t,Condition(function K6G))
call SaveUnitHandle(L7,I97,2,(WI7))
call SaveUnitHandle(L7,I97,17,(m5))
call SaveUnitHandle(L7,I97,$F,ZX7)
call SaveBoolean(L7,I97,$F,L8v)
call SaveUnitHandle(L7,I97,19,(BB7))
call SaveReal(L7,I97,57,((2.5+BC7*.5)*1.))
call SaveEffectHandle(L7,I97,32,(AddSpecialEffectTarget("Abilities\\Spells\\Human\\AerialShackles\\AerialShacklesTarget.mdl",m5,"chest")))
call SaveReal(L7,I97,282,((GetUnitX(WI7))*1.))
call SaveReal(L7,I97,283,((GetUnitY(WI7))*1.))
set t=null
set BB7=null
endfunction
function UTv takes nothing returns nothing
local unit WI7=LoadUnitHandle(dvv,'A1MV',2)
local unit m5=LoadUnitHandle(dvv,'A1MV',0)
local unit p5=LoadUnitHandle(dvv,'A1MV',1)
if WQ7(p5)==false then
call KLG(m5,WI7,p5,false,LoadInteger(dvv,'A1MV',0),false)
else
call UnitRemoveAbility(p5,'B0BI')
endif
call FlushChildHashtable(dvv,'A1MV')
set WI7=null
set p5=null
set m5=null
endfunction
function K1G takes nothing returns boolean
if(GetSpellAbilityId()=='A19O' or GetSpellAbilityId()=='A1MV')and WQ7(GetSpellTargetUnit())==false and GetUnitTypeId(GetSpellTargetUnit())!=1848651852 then
call KLG(GetTriggerUnit(),GetTriggerUnit(),GetSpellTargetUnit(),true,GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()),GetSpellAbilityId()=='A1MV')
endif
return false
endfunction
function NJ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function K1G))
set t=null
endfunction
function K0G takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if TX7(GetOwningPlayer(GetEventDamageSource()))and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) and w1==false then
if W1==false then
call UnitRemoveAbility(GetTriggerUnit(),1110458957)
call OZ7(GetTriggeringTrigger())
endif
endif
if W1 then
set W1=false
endif
if w1 then
set w1=false
endif
else
call OZ7(GetTriggeringTrigger())
endif
return false
endfunction
function K5G takes nothing returns nothing
local unit m5=GetEnumUnit()
local trigger t=CreateTrigger()
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,6,false)
call TriggerAddCondition(t,Condition(function K0G))
set m5=null
set t=null
endfunction
function K2G takes nothing returns boolean
return GetUnitAbilityLevel(GetFilterUnit(),1110458957)>0 and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0
endfunction
function K_G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local real x=(LoadReal(L7,(OB7),(6)))
local real y=(LoadReal(L7,(OB7),(7)))
local group g=WS7()
call GroupEnumUnitsInRange(g,x,y,$3E8,Condition(function K2G))
call ForGroup(g,function K5G)
call WR7(g)
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
set t=null
set g=null
return false
endfunction
function M4G takes nothing returns nothing
if SE4==1 or SE4==2 then
call B67(GetTriggerUnit(),GetEnumUnit(),2,70+10*D77)
endif
if SE4==1 or SE4==3 then
call B67(GetTriggerUnit(),GetEnumUnit(),1,70+10*D77)
endif
endfunction
function M7G takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local real x=GetUnitX(p5)
local real y=GetUnitY(p5)
local unit BB7=CreateUnit(GetOwningPlayer(p5),1747990362,x,y,0)
local group g=WS7()
local unit u
set D77=GetUnitAbilityLevel(p5,1093747009)
if((LoadInteger(L7,(GetHandleId((p5))),((4270))))==1)==false then
call SetUnitTimeScale(BB7,2.5)
call UnitApplyTimedLife(BB7,1112820806,2)
set BB7=CreateUnit(GetOwningPlayer(p5),1697656901,x,y,0)
call XF7(BB7,1093747001)
call SetUnitAbilityLevel(BB7,1093747001,GetUnitAbilityLevel(p5,1093747009))
call IssueImmediateOrderById(BB7,$D009F)
call GroupEnumUnitsInRange(g,x,y,500,Condition(function AW7))
set SE4=1
call ForGroup(g,function M4G)
call WR7(g)
call TriggerRegisterTimerEvent(t,.65,false)
call TriggerAddCondition(t,Condition(function K_G))
call SaveReal(L7,(OB7),(6),((x)*1.))
call SaveReal(L7,(OB7),(7),((y)*1.))
else
call SetUnitTimeScale(BB7,2.5)
call UnitApplyTimedLife(BB7,1112820806,2)
set BB7=CreateUnit(GetOwningPlayer(p5),1697656901,x,y,0)
call XF7(BB7,1093747001)
call SetUnitAbilityLevel(BB7,1093747001,GetUnitAbilityLevel(p5,1093747009))
call IssueImmediateOrderById(BB7,$D009F)
call GroupEnumUnitsInRange(g,x,y,500,Condition(function AW7))
set SE4=2
call ForGroup(g,function M4G)
call TriggerRegisterTimerEvent(t,.65,false)
call TriggerAddCondition(t,Condition(function K_G))
call SaveReal(L7,(OB7),(6),((x)*1.))
call SaveReal(L7,(OB7),(7),((y)*1.))
set t=CreateTrigger()
set OB7=GetHandleId(t)
set u=(SK4[GetPlayerId(GetOwningPlayer((p5)))])
call IssueImmediateOrderById(u,$D0004)
set x=GetUnitX(u)
set y=GetUnitY(u)
set BB7=CreateUnit(GetOwningPlayer(p5),1747990362,x,y,0)
call SetUnitTimeScale(BB7,2.5)
call UnitApplyTimedLife(BB7,1112820806,2)
set BB7=CreateUnit(GetOwningPlayer(p5),1697656901,x,y,0)
call XF7(BB7,1093747001)
call SetUnitAbilityLevel(BB7,1093747001,GetUnitAbilityLevel(p5,1093747009))
call IssueImmediateOrderById(BB7,$D009F)
call GroupEnumUnitsInRange(g,x,y,500,Condition(function AW7))
set SE4=3
call ForGroup(g,function M4G)
call WR7(g)
call TriggerRegisterTimerEvent(t,.65,false)
call TriggerAddCondition(t,Condition(function K_G))
call SaveReal(L7,(OB7),(6),((x)*1.))
call SaveReal(L7,(OB7),(7),((y)*1.))
call SetUnitAnimationByIndex(u,3)
endif
set t=null
set p5=null
set BB7=null
set g=null
endfunction
function M8G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=(LoadUnitHandle(L7,(OB7),(2)))
local unit M9G=(LoadUnitHandle(L7,(OB7),(335)))
local boolean MDG=(LoadBoolean(L7,(OB7),(336)))
if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
call SaveInteger(L7,(GetHandleId((p5))),((4269)),(2))
call SaveBoolean(L7,(GetHandleId(M9G)),(337),(true))
if MDG then
call ShowUnit(M9G,false)
call KillUnit(M9G)
else
call ShowUnit(M9G,false)
call UnitRemoveAbility(M9G,1097625443)
call ShowUnit(M9G,true)
endif
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
else
if MDG then
call SetUnitFacing(M9G,GetUnitFacing(p5))
endif
endif
set t=null
set M9G=null
return false
endfunction
function MEG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local unit M9G
local boolean KillImage
call SaveBoolean(L7,(OB7),(336),(false))
if((LoadInteger(L7,(GetHandleId((p5))),((4270))))==1)==false then
call SaveBoolean(L7,(OB7),(336),(true))
set M9G=CreateUnit(GetOwningPlayer(p5),1747990357,GetUnitX(p5),GetUnitY(p5),GetUnitFacing(p5))
call XF7(M9G,1097625443)
call XF7(M9G,1097167980)
call SetUnitPosition(M9G,GetUnitX(p5),GetUnitY(p5))
call SetUnitScale(M9G,1.4,1.4,1.4)
else
set M9G=(SK4[GetPlayerId(GetOwningPlayer((p5)))])
call UnitAddAbility(M9G,1097625443)
endif
call IssueImmediateOrderById(M9G,$D0004)
call SaveInteger(L7,(GetHandleId((p5))),((4269)),(1))
call SetUnitAnimation(M9G,"spell slam")
call QueueUnitAnimation(M9G,"spell slam")
call SaveUnitHandle(L7,(OB7),(335),(M9G))
call SaveUnitHandle(L7,(OB7),(2),(p5))
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function M8G))
call SaveUnitHandle(L7,(OB7),(335),(M9G))
set t=null
set p5=null
set M9G=null
endfunction
function MFG takes nothing returns boolean
if GetSpellAbilityId()==1093747009 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_FINISH then
call M7G()
else
call MEG()
endif
endif
return false
endfunction
function NO8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_FINISH)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function MFG))
set t=null
endfunction
function MGG takes nothing returns nothing
if YS8(GetEnumUnit())then
return
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093747521)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093747521)
call UnitRemoveAbility(GetEnumUnit(),1110458960)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093747513)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093747513)
call UnitRemoveAbility(GetEnumUnit(),1110458960)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093747522)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093747522)
call UnitRemoveAbility(GetEnumUnit(),1110458960)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093747523)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093747523)
call UnitRemoveAbility(GetEnumUnit(),1110458960)
endif
call CD7(GetEnumUnit(),0)
endfunction
function MHG takes nothing returns nothing
if YS8(GetEnumUnit())then
return
endif
if m1==1 then
if GetUnitAbilityLevel(GetEnumUnit(),1093747521)==0 then
call XF7(GetEnumUnit(),1093747521)
endif
elseif m1==2 then
if GetUnitAbilityLevel(GetEnumUnit(),1093747513)==0 then
call XF7(GetEnumUnit(),1093747513)
endif
elseif m1==3 then
if GetUnitAbilityLevel(GetEnumUnit(),1093747522)==0 then
call XF7(GetEnumUnit(),1093747522)
endif
elseif m1==4 then
if GetUnitAbilityLevel(GetEnumUnit(),1093747523)==0 then
call XF7(GetEnumUnit(),1093747523)
endif
endif
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO) then
call CD7(GetEnumUnit(),R2I((I2R(GetHeroAgi(GetEnumUnit(),true))/ 7)*I2R(m1)/ 5))
endif
endfunction
function MIG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=(LoadUnitHandle(L7,(OB7),(2)))
local group QLE=(LoadGroupHandle(L7,(OB7),(340)))
local real x=GetUnitX(p5)
local real y=GetUnitY(p5)
local group g=WS7()
local group g2
if p5==null then
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
call WR7(QLE)
call WR7(g)
return false
endif
set IN4=p5
set m1=GetUnitAbilityLevel(p5,1093747524)
call GroupEnumUnitsInRange(g,x,y,300,Condition(function AJ7))
if((LoadInteger(L7,(GetHandleId((p5))),((4270))))==1) then
set g2=WS7()
call GroupEnumUnitsInRange(g2,GetUnitX((SK4[GetPlayerId(GetOwningPlayer((p5)))])),GetUnitY((SK4[GetPlayerId(GetOwningPlayer((p5)))])),300,Condition(function AJ7))
call GroupAddGroup(g2,g)
call WR7(g2)
set g2=null
endif
call GroupRemoveGroup(g,QLE)
call ForGroup(QLE,function MGG)
if XH7(p5)==false then
call ForGroup(g,function MHG)
endif
call SaveGroupHandle(L7,(OB7),(340),(g))
call WR7(QLE)
set t=null
set p5=null
set QLE=null
return false
endfunction
function MJG takes unit p5,boolean UA9 returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local integer i
local player p
call XF7(p5,1093747537)
call TriggerRegisterTimerEvent(t,.3,true)
call TriggerAddCondition(t,Condition(function MIG))
call SaveUnitHandle(L7,(OB7),(2),(p5))
call SaveGroupHandle(L7,(OB7),(340),(WS7()))
call SaveTriggerHandle(L7,(GetHandleId(p5)),(338),(t))
call SaveBoolean(L7,(GetHandleId(p5)),(339),(true))
set i=0
loop
exitwhen i>5
set p=Z7[i]
call SetPlayerAbilityAvailable(p,1093747521,false)
call SetPlayerAbilityAvailable(p,1093747513,false)
call SetPlayerAbilityAvailable(p,1093747522,false)
call SetPlayerAbilityAvailable(p,1093747523,false)
set p=A7[i]
call SetPlayerAbilityAvailable(p,1093747521,false)
call SetPlayerAbilityAvailable(p,1093747513,false)
call SetPlayerAbilityAvailable(p,1093747522,false)
call SetPlayerAbilityAvailable(p,1093747523,false)
set i=i+1
endloop
if UA9 then
set nj[GetPlayerId(GetOwningPlayer(p5))]=t
endif
set t=null
set p5=null
endfunction
function MKG takes nothing returns boolean
if GetLearnedSkill()==1093747524 and GetUnitAbilityLevel(GetTriggerUnit(),1093747524)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call MJG(GetTriggerUnit(),false)
endif
return false
endfunction
function NN8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function MKG))
set t=null
endfunction
function W88E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=(LoadUnitHandle(L7,(OB7),($E)))
local integer I97=(LoadInteger(L7,(OB7),(52)))
if p5!=null then
call UnitRemoveAbility(p5,I97)
endif
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
set t=null
set p5=null
return false
endfunction
function W99E takes unit p5,integer OB7,real x1 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call XF7(p5,OB7)
call TriggerRegisterTimerEvent(t,x1,false)
call TriggerAddCondition(t,Condition(function W88E))
call SaveUnitHandle(L7,(I97),($E),(p5))
call SaveInteger(L7,(I97),(52),(OB7))
set t=null
endfunction
function MMG takes nothing returns nothing
local real x1=Z1
local real y1=v2
local real x2=SM4
local real y2=o2
local real x3=GetUnitX(GetEnumUnit())
local real y3=GetUnitY(GetEnumUnit())
local real u=((x3-x1)*(x2-x1)+(y3-y1)*(y2-y1))/((x1-x2)*(x1-x2)+(y1-y2)*(y1-y2))
local real x4=x1+u*(x2-x1)
local real y4=y1+u*(y2-y1)
local real YM7=GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)*(0.1+0.05*GetUnitAbilityLevel(z1,1093746993))
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO) then
call SetUnitPosition(GetEnumUnit(),x4,y4)
else
call SetUnitX(GetEnumUnit(),x4)
call SetUnitY(GetEnumUnit(),y4)
endif
call IssueTargetOrderById(Y1,$D006B,GetEnumUnit())
call B67(z1,GetEnumUnit(),2,YM7)
call B67(z1,GetEnumUnit(),20,YM7)
call W99E(GetEnumUnit(),1093816625,GetUnitAbilityLevel(Y1,1093747525)+2)
call W99E(GetEnumUnit(),1093816626,GetUnitAbilityLevel(Y1,1093747525)+2)
endfunction
function MNG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=(LoadUnitHandle(L7,(OB7),(2)))
local real x0=(LoadReal(L7,(OB7),(282)))
local real y0=(LoadReal(L7,(OB7),(283)))
local real a0=(LoadReal(L7,(OB7),(341)))
local integer i=0
local real x
local real y
local group g=WS7()
local group A1D=WS7()
local integer V77=GetUnitAbilityLevel(p5,1093746993)
local integer Z49=(LoadInteger(L7,(OB7),(34)))
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
set IN4=p5
set z1=p5
set Y1=CreateUnit(GetOwningPlayer(p5),1697656901,x0,y0,0)
call XF7(Y1,1093747525)
call SetUnitAbilityLevel(Y1,1093747525,V77)
loop
exitwhen i>Z49
set x=x0+i*$C8*Cos(a0)
set y=y0+i*$C8*Sin(a0)
call YT7("Abilities\\Spells\\Orc\\EarthQuake\\EarthQuakeTarget.mdl",x,y,1.6)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",x,y-$FA))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",x,y))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",x+$FA,y))
call Y67(x,y,300)
call GroupEnumUnitsInRange(g,x,y,325,Condition(function AJ7))
call GroupAddGroup(g,A1D)
call GroupClear(g)
set i=i+1
endloop
set Z1=x0
set v2=y0
set SM4=x
set o2=y
call ForGroup(A1D,function MMG)
call WR7(A1D)
call WR7(g)
set t=null
set p5=null
return false
endfunction
function MOG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=(LoadUnitHandle(L7,(OB7),(2)))
local real a=(LoadReal(L7,(OB7),($89)))
local real x0=(LoadReal(L7,(OB7),(282)))
local real y0=(LoadReal(L7,(OB7),(283)))
local real a0
local real MPG
local real MQG
local real MRG
local real MSG
local real MTG
local real MUG
local real MVG
local real MWG
local real MXG
local real MYG
local real MZG
local real MAG
local real x
local real y
local ubersplat B_F
local integer U38=GetTriggerEvalCount(t)
local integer Z49=(LoadInteger(L7,(OB7),(34)))
set x=x0+$C8*U38*Cos(a)
set y=y0+$C8*U38*Sin(a)
set B_F=CreateUbersplat(x,y,"THND",$FF,$FF,$FF,$FF,false,false)
call SetUbersplatRenderAlways(B_F,true)
set MPG=x+$C8*Cos(bj_DEGTORAD*(a*bj_RADTODEG-45))
set MQG=y+$C8*Sin(bj_DEGTORAD*(a*bj_RADTODEG-45))
set MRG=x+$C8*Cos(bj_DEGTORAD*(a*bj_RADTODEG+45))
set MSG=y+$C8*Sin(bj_DEGTORAD*(a*bj_RADTODEG+45))
set MTG=x-100*Cos(bj_DEGTORAD*(a*bj_RADTODEG-45))
set MUG=y-100*Sin(bj_DEGTORAD*(a*bj_RADTODEG-45))
set MVG=x-100*Cos(bj_DEGTORAD*(a*bj_RADTODEG+45))
set MWG=y-100*Sin(bj_DEGTORAD*(a*bj_RADTODEG+45))
set MXG=x
set MYG=y
set MZG=x
set MAG=y
call Y57(GetOwningPlayer(p5),4,x,y,500)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",MPG,MQG))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",MRG,MSG))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",MTG,MUG))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",MVG,MWG))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",MXG,MYG))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",MZG,MAG))
if GetTriggerEvalCount(t)>Z49 then
set x0=(LoadReal(L7,(OB7),(282)))
set y0=(LoadReal(L7,(OB7),(283)))
set a0=(LoadReal(L7,(OB7),(341)))
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
set t=CreateTrigger()
set OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.5,false)
call TriggerAddCondition(t,Condition(function MNG))
call SaveUnitHandle(L7,(OB7),(2),(p5))
call SaveReal(L7,(OB7),(282),((x0)*1.))
call SaveReal(L7,(OB7),(283),((y0)*1.))
call SaveReal(L7,(OB7),(341),((a0)*1.))
call SaveInteger(L7,(OB7),(34),(Z49))
endif
set t=null
set p5=null
return false
endfunction
function MBG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=Atan2(y-GetUnitY(p5),x-GetUnitX(p5))
local integer Z49=$B
call TriggerRegisterTimerEvent(t,.22,true)
call TriggerAddCondition(t,Condition(function MOG))
call SaveUnitHandle(L7,(OB7),(2),(p5))
call SaveReal(L7,(OB7),(6),((GetUnitX(p5))*1.))
call SaveReal(L7,(OB7),(7),((GetUnitY(p5))*1.))
call SaveReal(L7,(OB7),($89),((a)*1.))
call SaveReal(L7,(OB7),(282),((GetUnitX(p5))*1.))
call SaveReal(L7,(OB7),(283),((GetUnitY(p5))*1.))
call SaveReal(L7,(OB7),(341),((a)*1.))
call SaveInteger(L7,(OB7),(34),(Z49))
set t=null
set p5=null
endfunction
function MCG takes nothing returns boolean
if GetSpellAbilityId()==1093746993 then
call MBG()
endif
return false
endfunction
function NK8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function MCG))
set t=null
endfunction
function M3G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
call UnitRemoveAbility(ZX7,1093815881)
call UnitAddAbility(ZX7,1093815881)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set ZX7=null
return false
endfunction
function M6G takes unit ZX7 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function M3G))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set t=null
endfunction
function MLG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=(LoadUnitHandle(L7,(OB7),(2)))
call DestroyEffect((LoadEffectHandle(L7,(OB7),(32))))
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
call B_7(p5,0)
set t=null
set p5=null
return false
endfunction
function M1G takes unit p5,unit M9G,integer M0G,integer M5G returns nothing
local trigger t
local integer OB7
local unit BB7
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",M9G,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",p5,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",p5,"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",p5,"hand,left"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",p5,"hand,right"))
call ShowUnit(M9G,false)
call KillUnit(M9G)
call SaveInteger(L7,(GetHandleId((p5))),((4270)),(2))
if M5G>0 or M0G>0 then
set t=CreateTrigger()
set OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,9.1,false)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function MLG))
call SaveUnitHandle(L7,(OB7),(2),(p5))
set BB7=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(p5),GetUnitY(p5),0)
call XF7(BB7,1093748537)
call SetUnitAbilityLevel(BB7,1093748537,M5G)
call IssueTargetOrderById(BB7,$D0085,p5)
call B_7(p5,M0G)
call SaveEffectHandle(L7,(OB7),(32),(AddSpecialEffectTarget("war3mapImported\\RadianceHands.mdx",p5,"weapon")))
endif
set t=null
set BB7=null
endfunction
function M2G takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),M1)==false then
if IsUnitIllusion(GetEnumUnit())==false then
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO) then
set SI4=SI4+(SH4*$A)
set SJ4=SJ4+5
else
set SI4=SI4+(SH4*3)
set SJ4=SJ4+1
endif
endif
call GroupAddUnit(M1,GetEnumUnit())
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",GetEnumUnit(),"chest"))
set w1=true
set W1=true
call B67(SF4,GetEnumUnit(),1,SG4)
set w1=false
set W1=false
endif
endfunction
function M_G takes real N4G,real N7G,real N8G,real N9G,real NDG,real NEG returns real
local real NFG
local real NGG
local real NHG
local real NIG
local real NJG
local real NKG
local real NMG
local real REFLECTED_SCALED_V_X
local real REFLECTED_SCALED_V_Y
local real NNG
local real NOG
local real NPG
local real NQG
local real NRG
local real NSG
local real NTG
local real NUG
set NPG=N8G-NDG
set NQG=N9G-NEG
set NRG=-1*NQG
set NSG=NPG
set NTG=SquareRoot(NRG*NRG+NSG*NSG)
set NRG=NRG/ NTG
set NSG=NSG/ NTG
set NFG=N4G-N8G
set NGG=N7G-N9G
set NHG=SquareRoot(NFG*NFG+NGG*NGG)
set NIG=NFG/ NHG
set NJG=NGG/ NHG
set NUG=NFG*NRG+NGG*NSG
set NKG=-1*N4G+2*N8G+2*NRG*NUG
set NMG=-1*N7G+2*N9G+2*NSG*NUG
set NNG=NDG+N8G-NKG
set NOG=NEG+N9G-NMG
return NNG
endfunction
function NVG takes real N4G,real N7G,real N8G,real N9G,real NDG,real NEG returns real
local real NFG
local real NGG
local real NHG
local real NIG
local real NJG
local real NKG
local real NMG
local real REFLECTED_SCALED_V_X
local real REFLECTED_SCALED_V_Y
local real NNG
local real NOG
local real NPG
local real NQG
local real NRG
local real NSG
local real NTG
local real NUG
set NPG=N8G-NDG
set NQG=N9G-NEG
set NRG=-1*NQG
set NSG=NPG
set NTG=SquareRoot(NRG*NRG+NSG*NSG)
set NRG=NRG/ NTG
set NSG=NSG/ NTG
set NFG=N4G-N8G
set NGG=N7G-N9G
set NHG=SquareRoot(NFG*NFG+NGG*NGG)
set NIG=NFG/ NHG
set NJG=NGG/ NHG
set NUG=NFG*NRG+NGG*NSG
set NKG=-1*N4G+2*N8G+2*NRG*NUG
set NMG=-1*N7G+2*N9G+2*NSG*NUG
set NNG=NDG+N8G-NKG
set NOG=NEG+N9G-NMG
return NOG
endfunction
function NWG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer OB7=GetHandleId(t)
local unit p5=(LoadUnitHandle(L7,(OB7),(2)))
local unit M9G=(LoadUnitHandle(L7,(OB7),(335)))
local real x0=(LoadReal(L7,(OB7),(282)))
local real y0=(LoadReal(L7,(OB7),(283)))
local real x1=GetUnitX(p5)
local real y1=GetUnitY(p5)
local real x2=GetUnitX(M9G)
local real y2=GetUnitY(M9G)
local real x3
local real y3
local real a
local group A1D=(LoadGroupHandle(L7,(OB7),($BB)))
local group g
local real d
local integer V77=GetUnitAbilityLevel(p5,1093747000)
local real NXG=(LoadReal(L7,(OB7),(342)))
local real CP7=(TimerGetElapsed(W))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call WR7(A1D)
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
call ShowUnit(M9G,false)
call KillUnit(M9G)
call SaveInteger(L7,(GetHandleId((p5))),((4270)),(2))
if(LoadInteger(L7,(GetHandleId(p5)),(704)))==0 or(LoadInteger(L7,(GetHandleId(p5)),(704)))==1093747000 then
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093747000,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093815881,false)
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093815881 then
call IssueImmediateOrderById(M9G,$D0004)
call SaveBoolean(L7,(OB7),($F9),(true))
call SetUnitAnimationByIndex(M9G,3)
call M6G(GetTriggerUnit())
elseif GetSpellAbilityId()==1093815371 then
if IssueImmediateOrderById(p5,$D0265)then
call UnitRemoveAbility(M9G,1093815371)
endif
endif
elseif KF7(x1,y1,x2,y2)<100 then
call M1G(p5,M9G,(LoadInteger(L7,(OB7),(344))),(LoadInteger(L7,(OB7),(345))))
call WR7(A1D)
call FlushChildHashtable(L7,(OB7))
call OZ7(t)
if(LoadInteger(L7,(GetHandleId(p5)),(704)))==0 or(LoadInteger(L7,(GetHandleId(p5)),(704)))==1093747000 then
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093747000,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093815881,false)
elseif GetTriggerEvalCount(t)>400 or(LoadBoolean(L7,(OB7),($F9))) then
call XF7(M9G,1097625443)
if GetTriggerEvalCount(t)==401 and(LoadBoolean(L7,(OB7),($F9)))==false then
call IssueImmediateOrderById(M9G,$D0004)
call SetUnitAnimationByIndex(M9G,3)
endif
set g=WS7()
set SH4=V77
set SI4=(LoadInteger(L7,(OB7),(344)))
set SJ4=(LoadInteger(L7,(OB7),(345)))
set SG4=80+40*V77
set SF4=p5
set IN4=p5
set M1=A1D
call GroupEnumUnitsInRange(g,GetUnitX(M9G),GetUnitY(M9G),300,Condition(function AJ7))
call ForGroup(g,function M2G)
call WR7(g)
set g=null
call SaveInteger(L7,(OB7),(344),(SI4))
call SaveInteger(L7,(OB7),(345),(SJ4))
if((LoadInteger(L7,(GetHandleId((p5))),((4269))))==1)==false then
set a=Atan2(y1-y2,x1-x2)
call SetUnitFacing(M9G,a*bj_RADTODEG)
set x3=GetUnitX(M9G)+$C*Cos(a)
set y3=GetUnitY(M9G)+$C*Sin(a)
call SetUnitX(M9G,X17(x3))
call SetUnitY(M9G,X07(y3))
call SaveReal(L7,(OB7),(282),((x1)*1.))
call SaveReal(L7,(OB7),(283),((y1)*1.))
endif
else
call SetUnitMoveSpeed(M9G,GetUnitMoveSpeed(p5))
call UnitRemoveAbility(M9G,1097625443)
set g=WS7()
set SH4=V77
set SI4=(LoadInteger(L7,(OB7),(344)))
set SJ4=(LoadInteger(L7,(OB7),(345)))
set SG4=80+40*V77
set SF4=p5
set IN4=p5
set M1=A1D
call GroupEnumUnitsInRange(g,GetUnitX(M9G),GetUnitY(M9G),300,Condition(function AJ7))
call ForGroup(g,function M2G)
call WR7(g)
set g=null
call SaveInteger(L7,(OB7),(344),(SI4))
call SaveInteger(L7,(OB7),(345),(SJ4))
if x0!=x1 or y0!=y1 then
set NXG=CP7
call SaveReal(L7,(OB7),(342),((NXG)*1.))
endif
if((LoadInteger(L7,(GetHandleId((p5))),((4269))))==1)==false then
if NXG==CP7 then
set x3=M_G(x0,y0,x1,y1,x2,y2)
set y3=NVG(x0,y0,x1,y1,x2,y2)
set a=Atan2(y3-y2,x3-x2)*bj_RADTODEG
call SaveReal(L7,(OB7),(282),((x1)*1.))
call SaveReal(L7,(OB7),(283),((y1)*1.))
endif
if(NXG+.3)<CP7 then
call SaveInteger(L7,(OB7),(343),(1))
elseif(NXG+.3)>CP7 and(LoadInteger(L7,(OB7),(343)))==1 then
call SaveInteger(L7,(OB7),(343),(2))
elseif(LoadInteger(L7,(OB7),(343)))==3 then
call SaveInteger(L7,(OB7),(343),(1))
endif
else
call SaveInteger(L7,(OB7),(343),(3))
endif
endif
set t=null
set p5=null
set M9G=null
set A1D=null
return false
endfunction
function NYG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer OB7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local real x0=GetUnitX(p5)
local real y0=GetUnitY(p5)
local location l=GetSpellTargetLoc()
local real ILD=GetLocationX(l)
local real I1D=GetLocationY(l)
local real a=Atan2(I1D-y0,ILD-x0)
local real d=YK7(KF7(x0,y0,ILD,I1D),300)
local real x1=X17(x0+d*Cos(a))
local real y1=X07(y0+d*Sin(a))
local unit M9G=CreateUnit(GetOwningPlayer(p5),1747990357,x1,y1,(a*bj_RADTODEG)-$B4)
call SetUnitMoveSpeed(M9G,GetUnitMoveSpeed(p5))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",M9G,"chest"))
if GetUnitAbilityLevel(p5,1093747524)>0 then
call XF7(M9G,1093747537)
endif
if GetUnitAbilityLevel(p5,1093747009)==0 then
call UnitRemoveAbility(M9G,1093815371)
endif
call UnitAddAbility(p5,1093815881)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093747000,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093815881,true)
call RemoveLocation(l)
set SK4[GetPlayerId(GetOwningPlayer(p5))]=M9G
call SaveInteger(L7,(GetHandleId((p5))),((4270)),(1))
call XF7(M9G,1098282348)
call XF7(M9G,1097167980)
if(LoadBoolean(L7,(GetHandleId(p5)),(339))) then
call TriggerEvaluate((LoadTriggerHandle(L7,(OB7),(338))))
endif
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,M9G,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function NWG))
call SaveUnitHandle(L7,(OB7),(2),(p5))
call SaveUnitHandle(L7,(OB7),(335),(M9G))
call SaveReal(L7,(OB7),(282),((x0)*1.))
call SaveReal(L7,(OB7),(283),((y0)*1.))
call SaveGroupHandle(L7,(OB7),($BB),(WS7()))
call SaveInteger(L7,(OB7),(343),(2))
call SaveReal(L7,(OB7),(342),(((TimerGetElapsed(W))-5)*1.))
call SaveBoolean(L7,(OB7),($F9),(false))
set t=null
set p5=null
set M9G=null
endfunction
function NZG takes nothing returns boolean
if GetSpellAbilityId()==1093747000 then
call NYG()
endif
return false
endfunction
function NM8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function NZG))
call X_7(1093748537)
set t=null
endfunction
function NAG takes nothing returns boolean
if GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER and(GetItemTypeId(GetManipulatedItem())==ZU[H6]or GetItemTypeId(GetManipulatedItem())==ZU[G6]or GetItemTypeId(GetManipulatedItem())==ZU[N6])then
call UnitRemoveAbility(GetTriggerUnit(),1093743681)
endif
return false
endfunction
function NBG takes unit u,integer d returns nothing
local texttag t=CreateTextTag()
call SetTextTagText(t,"+"+I2S(d)+" "+GetObjectName(1848659025),.03)
call SetTextTagPosUnit(t,u,0)
call SetTextTagColorBJ(t,50,75,$FF,$F)
call SetTextTagVelocity(t,0,.035)
call SetTextTagFadepoint(t,3)
call SetTextTagLifespan(t,2.5)
call SetTextTagPermanent(t,false)
call SetTextTagVisibility(t,false)
call SetTextTagVisibility(t,true)
if IsUnitVisible(u,GetLocalPlayer())or WG7(GetLocalPlayer())then
call SetTextTagVisibility(t,true)
else
call SetTextTagVisibility(t,false)
endif
set t=null
endfunction
function NCG takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
if GetSpellAbilityId()==1093678387 and GetUnitState(p5,UNIT_STATE_LIFE)>1 then
call SetUnitState(p5,UNIT_STATE_MANA,GetUnitState(p5,UNIT_STATE_MANA)+GetUnitState(m5,UNIT_STATE_LIFE)*(GetUnitAbilityLevel(p5,1093678387)*.15+.1))
call NBG(m5,R2I(GetUnitState(m5,UNIT_STATE_LIFE)*(GetUnitAbilityLevel(p5,1093678387)*.15+.1)))
set Ovv=true
call B67(p5,m5,1,99999)
call B67(p5,m5,2,99999)
call B67(p5,m5,3,99999)
endif
set p5=null
set m5=null
endfunction
function N3G takes nothing returns boolean
if GetSpellAbilityId()==1093678387 and KW7(GetSpellTargetUnit())==false then
call NCG()
endif
return false
endfunction
function N6G takes item D88,unit ZX7,boolean XRD returns nothing
local integer Z48=KY7(D88)
local integer I97=GetHandleId(ZX7)
local string s=""
if(Z48==EW and MU7(ZX7,EW,D88)==null)or(Z48==HW and MU7(ZX7,HW,D88)==null)then
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(ZX7)) or WG7(GetLocalPlayer())then
set s="Abilities\\Spells\\Human\\MagicSentry\\MagicSentryCaster.mdl"
endif
if XRD then
if YRE(ZX7)>0 or GetItemType(D88)==ITEM_TYPE_PERMANENT or GetItemType(D88)==ITEM_TYPE_CAMPAIGN then
if GetUnitAbilityLevel(ZX7,1093809729)==0 and GetUnitAbilityLevel(ZX7,1093809730)==0 then
if s=="Abilities\\Spells\\Human\\MagicSentry\\MagicSentryCaster.mdl" then
call XF7(ZX7,1093809729)
else
call XF7(ZX7,1093809730)
endif
endif
endif
else
if not(GetUnitAbilityLevel(ZX7,1093809729)==0 and GetUnitAbilityLevel(ZX7,1093809730)==0)then
call UnitRemoveAbility(ZX7,1093809730)
call UnitRemoveAbility(ZX7,1093809729)
call RemoveSavedHandle(L7,(I97),(670))
endif
endif
endif
endfunction
function NLG takes nothing returns boolean
local unit p5=GetTriggerUnit()
local item D88=GetManipulatedItem()
local integer id=GetItemTypeId(D88)
if D88==null or IsUnitIllusion(p5) or IsUnitType(p5,UNIT_TYPE_HERO)==false or LB7(GetUnitTypeId(p5))or GetItemTypeId(D88)==1227894853 or GetItemTypeId(D88)==1227895373 then
set p5=null
set D88=null
return false
endif
if(GetTriggerEventId()==EVENT_PLAYER_UNIT_DROP_ITEM and GetItemType(D88)!=ITEM_TYPE_PURCHASABLE)or GetTriggerEventId()==EVENT_PLAYER_UNIT_PAWN_ITEM then
call N6G(D88,p5,false)
call C27("DRI_"+I2S(GetPlayerId(GetOwningPlayer(p5))),ZU[Y38(KY7(D88))])
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM then
call N6G(D88,p5,true)
call C27("PUI_"+I2S(GetPlayerId(GetOwningPlayer(p5))),ZU[Y38(KY7(D88))])
endif
set p5=null
set D88=null
return false
endfunction
function N1G takes unit Y58 returns nothing
local integer N0G=GetPlayerId(GetOwningPlayer(Y58))
local integer N5G=Y08(Y58,1)
local integer N2G=GetUnitAbilityLevel(Y58,HM4[N5G])
call UnitRemoveAbility(Y58,HR4[N5G])
call UnitRemoveAbility(Y58,1094004784)
call DisableTrigger(rj[N0G])
call DisableTrigger(Ej[N0G])
call UnitRemoveAbility(Y58,1093686081)
if N5G==43 then
call NP7(GetHandleId(Y58),"RefractionPrevent_Remaining",0)
call NP7(GetHandleId(Y58),"RefractionDamage_Remaining",0)
call UnitRemoveAbility(Y58,1093685830)
call UnitRemoveAbility(Y58,1093685837)
call UnitRemoveAbility(Y58,1093685838)
endif
call VX7(rj[N0G])
call VX7(Ej[N0G])
if N2G>0 then
call UnitAddAbility(Y58,1094004784)
call SetUnitAbilityLevel(Y58,1094004784,N2G)
endif
set rj[N0G]=null
set Ej[N0G]=null
endfunction
function N_G takes unit Y58 returns nothing
local integer N0G=GetPlayerId(GetOwningPlayer(Y58))
local integer N5G=Y08(Y58,2)
local integer O4G=GetUnitAbilityLevel(Y58,HN4[N5G])
local integer i=1
call UnitRemoveAbility(Y58,HS4[N5G])
call UnitRemoveAbility(Y58,1094004785)
call DisableTrigger(aj[N0G])
call DisableTrigger(Rj[N0G])
if N5G==59 then
call UnitRemoveAbility(Y58,1093677617)
call NP7(GetHandleId(Y58),"TotalWebs",0)
loop
exitwhen i>8
call RemoveUnit(O77(GetHandleId(Y58),"Web"+I2S(i)))
set i=i+1
endloop
endif
if N5G==62 then
call UnitRemoveAbility(Y58,1093679171)
call RemoveUnit(O77(GetHandleId(Rj[N0G]),"VisionUnit"))
if GetUnitAbilityLevel(Y58,1093679158)==0 then
call UnitRemoveAbility(Y58,1093742902)
call UnitRemoveAbility(Y58,1093742903)
endif
endif
if N5G==78 then
call B_7(Y58,0)
endif
call VX7(aj[N0G])
call VX7(Rj[N0G])
if O4G>0 then
call UnitAddAbility(Y58,1094004785)
call SetUnitAbilityLevel(Y58,1094004785,O4G)
endif
set aj[N0G]=null
set Rj[N0G]=null
endfunction
function Vge takes nothing returns nothing
call UnitShareVision(GetEnumUnit(),GetOwningPlayer(D8),false)
endfunction
function O7G takes unit Y58 returns nothing
local integer N0G=GetPlayerId(GetOwningPlayer(Y58))
local integer N5G=Y08(Y58,3)
local integer O8G=GetUnitAbilityLevel(Y58,HO4[N5G])
local group g=null
call UnitRemoveAbility(Y58,HT4[N5G])
call UnitRemoveAbility(Y58,1094004786)
call DisableTrigger(nj[N0G])
call DisableTrigger(Aj[N0G])
call UnitRemoveAbility(Y58,1093743428)
if N5G==$F then
call UnitRemoveAbility(Y58,1093747537)
call ForGroup(OF7(GetHandleId(nj[N0G]),"ActiveGroup"),function MGG)
call WR7(OF7(GetHandleId(nj[N0G]),"ActiveGroup"))
endif
if N5G==27 then
call UnitRemoveAbility(Y58,1093684826)
endif
if N5G==38 then
call UnitRemoveAbility(Y58,1093748291)
endif
if N5G==41 then
call DestroyEffect(OG7(GetHandleId(Y58),"OverloadFX1"))
call DestroyEffect(OG7(GetHandleId(Y58),"OverloadFX2"))
endif
if N5G==42 then
call DestroyEffect(OG7(GetHandleId(nj[N0G]),"FX1"))
call DestroyEffect(OG7(GetHandleId(nj[N0G]),"FX2"))
call G81(Y58,0)
call C97(Y58,0)
endif
if N5G==58 then
call RemoveUnit(O77(GetHandleId(Y58),"FeralHeartCaster"))
endif
if N5G==60 then
call SetUnitVertexColorBJ(Y58,100,100,100,0)
call UnitRemoveAbility(Y58,1093743430)
call UnitRemoveAbility(Y58,1093743432)
call UnitRemoveAbility(Y58,1093743431)
call UnitRemoveAbility(Y58,1110458674)
call UnitRemoveAbility(Y58,1110458673)
call UnitRemoveAbility(Y58,1110458675)
call UnitRemoveAbility(Y58,1093743433)
call UnitRemoveAbility(Y58,1110458672)
endif
if N5G==62 then
call UnitRemoveAbility(Y58,1395667009)
call RemoveUnit(O77(GetHandleId(Aj[N0G]),"VisionUnit"))
if GetUnitAbilityLevel(Y58,1093679173)==0 then
call UnitRemoveAbility(Y58,1093742902)
call UnitRemoveAbility(Y58,1093742903)
endif
endif
if N5G==87 then
call UnitRemoveAbility(Y58,1093685068)
call UnitRemoveAbility(Y58,1093685069)
call UnitRemoveAbility(Y58,1093685070)
call UnitRemoveAbility(Y58,1093685064)
endif
call VX7(nj[N0G])
call VX7(Aj[N0G])
if O8G>0 then
call UnitAddAbility(Y58,1094004786)
call SetUnitAbilityLevel(Y58,1094004786,O8G)
endif
set nj[N0G]=null
set Aj[N0G]=null
set g=null
endfunction
function O9G takes unit Y58 returns nothing
local integer N0G=GetPlayerId(GetOwningPlayer(Y58))
local integer N5G=Y08(Y58,4)
local boolean EWD=MR7(Y58,ZU[GX4])
local integer ODG=GetUnitAbilityLevel(Y58,HP4[N5G])
if EWD and HQ4[N5G]!=0 then
set ODG=GetUnitAbilityLevel(Y58,HQ4[N5G])
endif
call UnitRemoveAbility(Y58,HU4[N5G])
call UnitRemoveAbility(Y58,HV4[N5G])
call UnitRemoveAbility(Y58,1094004787)
call DisableTrigger(Vj[N0G])
call DisableTrigger(Nj[N0G])
call UnitRemoveAbility(Y58,1093684546)
call UnitRemoveAbility(Y58,1093677652)
call UnitRemoveAbility(Y58,1093685844)
call UnitRemoveAbility(Y58,1093683265)
call UnitRemoveAbility(Y58,1093749061)
call UnitRemoveAbility(Y58,1110459193)
call UnitRemoveAbility(Y58,1093749062)
call UnitRemoveAbility(Y58,1110459193)
call UnitRemoveAbility(Y58,1093749063)
call UnitRemoveAbility(Y58,1110459193)
if N5G==29 then
call RemoveUnit(O77(GetHandleId(Y58),"Warpath|Caster"))
call B_7(Y58,0)
endif
call VX7(Vj[N0G])
call VX7(Nj[N0G])
if ODG>0 then
call UnitAddAbility(Y58,1094004787)
call SetUnitAbilityLevel(Y58,1094004787,ODG)
endif
call TimerStart(N84[N0G],0,false,null)
set Vj[N0G]=null
set Nj[N0G]=null
endfunction
function OEG takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit Y58=O77(GetHandleId(t),"FormlessUnit")
local integer OFG=OM7(GetHandleId(t),"PU8")
call IssueImmediateOrderById(Y58,$D00D2)
if OFG==1094004788 then
call N1G(Y58)
call N_G(Y58)
call O7G(Y58)
call O9G(Y58)
elseif OFG==1094004789 then
call N1G(Y58)
elseif OFG==1094004790 then
call N_G(Y58)
elseif OFG==1094004791 then
call O7G(Y58)
elseif OFG==1094004792 then
call O9G(Y58)
endif
call DestroyTimer(t)
set Y58=null
set t=null
endfunction
function OGG takes unit Y58,integer OFG returns nothing
local integer N0G=GetPlayerId(GetOwningPlayer(Y58))
local timer t=CreateTimer()
call IssueImmediateOrderById(Y58,$D0004)
call NT7(GetHandleId(t),"FormlessUnit",Y58)
call NP7(GetHandleId(t),"PU8",OFG)
call TimerStart(t,0,false,function OEG)
set t=null
endfunction
function OHG takes nothing returns boolean
if GetSpellAbilityId()==1094004788 or GetSpellAbilityId()==1094004789 or GetSpellAbilityId()==1094004790 or GetSpellAbilityId()==1094004791 or GetSpellAbilityId()==1094004792 then
call OGG(GetTriggerUnit(),GetSpellAbilityId())
endif
return false
endfunction
function PU8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function OHG))
set t=null
endfunction
function OIG takes nothing returns boolean
return GetSpellAbilityId()==1094004784 or GetSpellAbilityId()==1094004785 or GetSpellAbilityId()==1094004786 or GetSpellAbilityId()==1094004787
endfunction
function OJG takes nothing returns nothing
local unit Y58=GetTriggerUnit()
local player p=GetOwningPlayer(Y58)
local integer OKG=GetUnitPointValue(GetSpellTargetUnit())
local integer OMG=GetUnitAbilityLevel(Y58,GetSpellAbilityId())
local integer ONG=GetSpellAbilityId()
local integer N0G=GetPlayerId(p)
local unit D_8=null
local integer OOG=0
local integer OPG=0
local integer OQG=0
local string ORG=""
local string OSG=""
local boolean EWD=MR7(Y58,ZU[GX4])
local trigger t
local integer OTG=Y08(Y58,1)
local integer OUG=Y08(Y58,2)
local integer OVG=Y08(Y58,3)
local integer OWG=Y08(Y58,4)
if ONG==1094004784 then
set OOG=HM4[OKG]
set OPG=HR4[OKG]
set ORG=HW4[OKG]
set OSG="Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"
elseif ONG==1094004785 then
set OOG=HN4[OKG]
set OPG=HS4[OKG]
set ORG=HX4[OKG]
set OSG="Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl"
elseif ONG==1094004786 then
set OOG=HO4[OKG]
set OPG=HT4[OKG]
set ORG=HY4[OKG]
set OSG="Abilities\\Spells\\Items\\AIam\\AIamTarget.mdl"
elseif ONG==1094004787 then
set OOG=HP4[OKG]
set OPG=HU4[OKG]
set ORG=HZ4[OKG]
set OSG="Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl"
if EWD and HQ4[OKG]!=0 then
set OOG=HQ4[OKG]
set OPG=HV4[OKG]
endif
endif
if OPG==0 then
call X37(p,"Unable to copy "+GetAbilityName(OOG)+".")
elseif bj[N0G]==false and ORG!="passive" and(ORG==HW4[OTG]or ORG==HX4[OUG]or ORG==HY4[OVG]or ORG==HZ4[OWG])then
if ORG==HW4[OTG]then
set OQG=HM4[OTG]
elseif ORG==HX4[OUG]then
set OQG=HN4[OUG]
elseif ORG==HY4[OVG]then
set OQG=HO4[OVG]
elseif ORG==HZ4[OWG]then
set OQG=HP4[OWG]
endif
call X37(p,"Cannot copy "+GetAbilityName(OOG)+" because you already
        have an ability with this base order ("+GetAbilityName(OQG)+").
        Use -override to disable this.")
else
call DestroyEffect(AddSpecialEffectTarget(OSG,Y58,"origin"))
call UnitRemoveAbility(Y58,ONG)
call UnitAddAbility(Y58,OOG)
call UnitAddAbility(Y58,OPG)
call SetPlayerAbilityAvailable(p,OPG,false)
call SetUnitAbilityLevel(Y58,OOG,OMG)
if OOG==1093686073 then
call UnitAddAbility(Y58,1093686081)
elseif OOG==1093742926 then
call UnitAddAbility(Y58,1093743428)
elseif OOG==1093677130 then
call UnitAddAbility(Y58,1093684546)
call SetUnitAbilityLevel(Y58,1093684546,OMG)
elseif OOG==1093681483 or OOG==1093748313 then
call UnitAddAbility(Y58,1093687110)
elseif OOG==1093685840 then
call UnitAddAbility(Y58,1093685844)
elseif OOG==1093683257 then
call UnitAddAbility(Y58,1093683265)
endif
if OOG==1093682265 then
call Y99(Y58,true)
elseif OOG==1093744728 then
call KEG(Y58,true)
elseif OOG==1093684314 then
call G_D(Y58,true)
elseif OOG==1093747524 then
call MJG(Y58,true)
elseif OOG==1093744977 then
call MAD(Y58,true)
elseif OOG==1093684531 then
call VP9(Y58,true)
elseif OOG==1093682774 then
call VG9(Y58,true)
elseif OOG==1093749073 then
call UZ9(Y58,true)
elseif OOG==1093685591 then
call IAD(Y58,true)
elseif OOG==1093685582 then
call A89(Y58,true)
elseif OOG==1093685585 then
call AH9(Y58,true)
elseif OOG==1093748033 then
call NLD(Y58,true)
elseif OOG==1093677893 then
call W7E(Y58,true)
elseif OOG==1093681735 then
call RXD(Y58,true)
elseif OOG==1093679173 or OOG==1093679158 then
call LVD(Y58,true,OOG)
elseif OOG==1093682010 then
call TXD(Y58,true)
elseif OOG==1093679153 then
call URD(Y58,true)
elseif OOG==1093748022 then
call FLE(Y58,true)
elseif OOG==1093686099 then
call R1F(Y58,true)
elseif OOG==1093678149 then
call KPE(Y58,true)
elseif OOG==1093677390 then
call CFD(Y58,true)
elseif OOG==1093678660 then
elseif OOG==1093682515 then
call JDE(Y58,true)
elseif OOG==1093682004 then
elseif OOG==1093684819 or OOG==1093747777 then
call Q7D(Y58,true)
elseif OOG==1093684801 then
call IUE(Y58,true)
elseif OOG==1093685065 then
call SMD(Y58,true)
elseif OOG==1093683526 then
call SJD(Y58,true)
elseif OOG==1093749070 then
call RBE(Y58,true)
endif
endif
set Y58=null
set p=null
set t=null
endfunction
function PT8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function OIG))
call TriggerAddAction(t,function OJG)
set t=null
endfunction
function OXG takes nothing returns boolean
return(GetLearnedSkill()==1094004784 or GetLearnedSkill()==1094004785 or GetLearnedSkill()==1094004786 or GetLearnedSkill()==1094004787)and GetUnitAbilityLevel(GetTriggerUnit(),1094004788)==0 and GetUnitAbilityLevel(GetTriggerUnit(),1094004789)==0 and GetUnitAbilityLevel(GetTriggerUnit(),1094004790)==0 and GetUnitAbilityLevel(GetTriggerUnit(),1094004791)==0 and GetUnitAbilityLevel(GetTriggerUnit(),1094004792)==0
endfunction
function OYG takes nothing returns boolean
return GetIssuedOrderId()==$D023F
endfunction
function OZG takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit OAG=O77(GetHandleId(t),"FormlessUnit")
local integer OBG
call IssueImmediateOrderById(OAG,$D0240)
if GetUnitAbilityLevel(OAG,1094004788)>0 then
set OBG=1094004793
elseif GetUnitAbilityLevel(OAG,1094004789)>0 then
set OBG=1094004801
elseif GetUnitAbilityLevel(OAG,1094004790)>0 then
set OBG=1094004802
elseif GetUnitAbilityLevel(OAG,1094004791)>0 then
set OBG=1094004803
elseif GetUnitAbilityLevel(OAG,1094004792)>0 then
set OBG=0
endif
call UnitRemoveAbility(OAG,1094004793)
call UnitRemoveAbility(OAG,1094004801)
call UnitRemoveAbility(OAG,1094004802)
call UnitRemoveAbility(OAG,1094004803)
if OBG!=0 then
call UnitAddAbility(OAG,OBG)
call SetPlayerAbilityAvailable(GetOwningPlayer(OAG),OBG,false)
endif
call NM7(GetHandleId(t))
call DestroyTimer(t)
set t=null
set OAG=null
endfunction
function OCG takes nothing returns nothing
local unit OAG=GetTriggerUnit()
local timer t=CreateTimer()
call NT7(GetHandleId(t),"FormlessUnit",OAG)
call TimerStart(t,0,false,function OZG)
set OAG=null
set t=null
endfunction
function O3G takes nothing returns nothing
local integer N0G=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
local trigger t=CreateTrigger()
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function OYG))
call TriggerAddAction(t,function OCG)
if GetLearnedSkill()!=1094004784 then
call UnitAddAbility(GetTriggerUnit(),1094004784)
call UnitRemoveAbility(GetTriggerUnit(),1094004784)
elseif GetLearnedSkill()!=1094004785 then
call UnitAddAbility(GetTriggerUnit(),1094004785)
call UnitRemoveAbility(GetTriggerUnit(),1094004785)
elseif GetLearnedSkill()!=1094004786 then
call UnitAddAbility(GetTriggerUnit(),1094004786)
call UnitRemoveAbility(GetTriggerUnit(),1094004786)
elseif GetLearnedSkill()!=1094004787 then
call UnitAddAbility(GetTriggerUnit(),1094004787)
call UnitRemoveAbility(GetTriggerUnit(),1094004787)
endif
call UnitAddAbility(GetTriggerUnit(),1094004789)
call UnitRemoveAbility(GetTriggerUnit(),1094004789)
call UnitAddAbility(GetTriggerUnit(),1094004790)
call UnitRemoveAbility(GetTriggerUnit(),1094004790)
call UnitAddAbility(GetTriggerUnit(),1094004791)
call UnitRemoveAbility(GetTriggerUnit(),1094004791)
call UnitAddAbility(GetTriggerUnit(),1094004792)
call UnitRemoveAbility(GetTriggerUnit(),1094004792)
call UnitAddAbility(GetTriggerUnit(),1094004788)
set t=null
endfunction
function PV8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function OXG))
call TriggerAddAction(t,function O3G)
set t=null
endfunction
function O6G takes nothing returns nothing
local unit WX7=GetTriggerUnit()
local player p=GetOwningPlayer(WX7)
local real x
local real y
local integer DX8
set HSS[GetPlayerId((p))]=false
set IG4[GetPlayerId(GetOwningPlayer((WX7)))]=false
if TV7(GetOwningPlayer(WX7))then
set x=GetRectCenterX(ED)
set y=GetRectCenterY(ED)
else
set x=GetRectCenterX(L9)
set y=GetRectCenterY(L9)
endif
if D87 then
set ZSS[GetPlayerId(p)]=R2I(TimerGetRemaining(U[GetPlayerId(p)])*0.25)
set VSS[GetPlayerId(p)]=(TimerGetElapsed(W))+TimerGetRemaining(U[GetPlayerId(p)])
else
set ZSS[GetPlayerId(p)]=0
endif
call TimerStart(U[GetPlayerId(p)],0.0,false,null)
if DU8(WX7)then
call D18(WX7)
else
call DS8(WX7,p,x,y,false)
endif
call SetUnitX(WX7,x)
call SetUnitY(WX7,y)
call DP8(WX7)
call SetUnitPathing(WX7,true)
if MV7(WX7,ZU[DI4])!=null and GetUnitTypeId(WX7)!=1211117642 then
set DX8=(R2I(((GetItemCharges(MV7(WX7,ZU[DI4]))*0.67)*1.0)))
if GetItemCharges(MV7(WX7,ZU[DI4]))==1 then
set DX8=0
endif
call SetItemCharges(MV7(WX7,ZU[DI4]),DX8)
call AddHeroXP(WX7,GetHeroXP(OA4[GetPlayerId(GetOwningPlayer(WX7))]),true)
call RemoveUnit(OA4[GetPlayerId(GetOwningPlayer(WX7))])
endif
if RZ4 and GetUnitPointValue(WX7)==500 then
call OGG(WX7,1094004788)
endif
set WX7=null
set p=null
endfunction
function OLG takes unit O1G,integer O0G returns nothing
call UnitRemoveAbility(O1G,1094006068)
call UnitRemoveAbility(O1G,1094006069)
call UnitRemoveAbility(O1G,1094006070)
call UnitRemoveAbility(O1G,1094006071)
call UnitRemoveAbility(O1G,1094006072)
if O0G>=16 then
call UnitAddAbility(O1G,1094006072)
set O0G=O0G-16
endif
if O0G>=8 then
call UnitAddAbility(O1G,1094006071)
set O0G=O0G-8
endif
if O0G>=4 then
call UnitAddAbility(O1G,1094006070)
set O0G=O0G-4
endif
if O0G>=2 then
call UnitAddAbility(O1G,1094006069)
set O0G=O0G-2
endif
if O0G>=1 then
call UnitAddAbility(O1G,1094006068)
set O0G=O0G-1
endif
endfunction
function O5G takes nothing returns boolean
return GetSpellAbilityId()==1094006064
endfunction
function O2G takes nothing returns nothing
local unit O1G=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer O_G=(1+GetUnitAbilityLevel(O1G,1094006064))*GetHeroStr(O1G,true)
local integer P4G=OM7(GetHandleId(O1G),"iPFCount")+1
local integer O0G=OM7(GetHandleId(O1G),"iPFStrength")
local integer P7G=O0G
if P4G>9 then
set P4G=0
set P7G=YG7(5*GetUnitAbilityLevel(O1G,1094006064),O0G+1)
if P7G!=O0G then
call OLG(O1G,P7G)
if m5!=O1G then
call YW7("+1 Strength",3,O1G,.023,$FF,0,0,$FF)
endif
endif
endif
call SetUnitState(m5,UNIT_STATE_LIFE,GetUnitState(m5,UNIT_STATE_LIFE)+O_G)
if P4G!=0 or m5!=O1G or P7G==O0G then
call YW7("+"+I2S(O_G)+" HP",3,m5,.023,$FF,0,0,$FF)
else
call YW7("+"+I2S(O_G)+" HP
        +1 Strength",3,O1G,.023,$FF,0,0,$FF)
endif
call NP7(GetHandleId(O1G),"iPFCount",P4G)
call NP7(GetHandleId(O1G),"iPFStrength",P7G)
set O1G=null
set m5=null
endfunction
function P8G takes nothing returns boolean
return C67(GetEventDamage())
endfunction
function P9G takes nothing returns nothing
local unit O1G=GetTriggerUnit()
local real PDG=ON7(GetHandleId(O1G),"rPFDamage")+GetEventDamage()
local integer O0G=OM7(GetHandleId(O1G),"iPFStrength")
local integer P7G=O0G
if PDG>=500 then
set PDG=PDG-500
set P7G=YG7(5*GetUnitAbilityLevel(O1G,1094006064),O0G+1)
if P7G!=O0G then
call OLG(O1G,P7G)
call YW7("+1 Strength",3,O1G,.023,$FF,0,0,$FF)
endif
endif
call NQ7(GetHandleId(O1G),"rPFDamage",PDG)
call NP7(GetHandleId(O1G),"iPFStrength",P7G)
set O1G=null
endfunction
function PEG takes nothing returns boolean
return GetLearnedSkill()==1094006064 and GetUnitAbilityLevel(GetTriggerUnit(),1094006064)==1
endfunction
function PFG takes nothing returns nothing
local unit O1G=GetTriggerUnit()
local trigger t=CreateTrigger()
call TriggerRegisterUnitEvent(t,O1G,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function P8G))
call TriggerAddAction(t,function P9G)
call NQ7(GetHandleId(O1G),"rPFDamage",0)
call NP7(GetHandleId(O1G),"iPFCount",0)
call NP7(GetHandleId(O1G),"iPFStrength",0)
set t=null
set O1G=null
endfunction
function PW8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function O5G))
call TriggerAddAction(t,function O2G)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function PEG))
call TriggerAddAction(t,function PFG)
set t=null
endfunction
function PGG takes unit O1G,integer PHG returns nothing
call UnitRemoveAbility(O1G,1094006073)
call UnitRemoveAbility(O1G,1094006081)
call UnitRemoveAbility(O1G,1094006082)
call UnitRemoveAbility(O1G,1094006083)
call UnitRemoveAbility(O1G,1094006084)
if PHG>=16 then
call UnitAddAbility(O1G,1094006084)
set PHG=PHG-16
endif
if PHG>=8 then
call UnitAddAbility(O1G,1094006083)
set PHG=PHG-8
endif
if PHG>=4 then
call UnitAddAbility(O1G,1094006082)
set PHG=PHG-4
endif
if PHG>=2 then
call UnitAddAbility(O1G,1094006081)
set PHG=PHG-2
endif
if PHG>=1 then
call UnitAddAbility(O1G,1094006073)
set PHG=PHG-1
endif
endfunction
function PIG takes nothing returns boolean
return GetSpellAbilityId()==1094006065
endfunction
function PJG takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local unit m5=O77(GetHandleId(t),"SFluxTarget")
call UnitRemoveAbility(m5,1094006090)
call UnitRemoveAbility(m5,1094006094)
call UnitRemoveAbility(m5,1094006095)
call UnitRemoveAbility(m5,1094006096)
call UnitRemoveAbility(m5,1110783306)
call UnitRemoveAbility(m5,1110783310)
call UnitRemoveAbility(m5,1110783311)
call UnitRemoveAbility(m5,1110783312)
call VX7(t)
set t=null
set m5=null
endfunction
function PKG takes nothing returns nothing
local unit O1G=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local real PMG=.25*GetHeroAgi(O1G,true)
local integer PNG=OM7(GetHandleId(O1G),"iSFCount")+1
local integer PHG=OM7(GetHandleId(O1G),"iSFAgility")
local integer POG=PHG
local trigger t=CreateTrigger()
local integer V77=GetUnitAbilityLevel(O1G,1094006065)
if PNG>9 then
set PNG=0
set POG=YG7(5*V77,PHG+1)
if POG!=PHG then
call PGG(O1G,POG)
if m5!=O1G then
call YW7("+1 Agility",3,O1G,.023,0,$FF,0,$FF)
endif
endif
endif
call VX7(OE7(GetHandleId(m5),"SFluxEndTrig"))
call UnitRemoveAbility(m5,1094006090)
call UnitRemoveAbility(m5,1094006094)
call UnitRemoveAbility(m5,1094006095)
call UnitRemoveAbility(m5,1094006096)
call UnitRemoveAbility(m5,1110783306)
call UnitRemoveAbility(m5,1110783310)
call UnitRemoveAbility(m5,1110783311)
call UnitRemoveAbility(m5,1110783312)
if V77==1 then
call UnitAddAbility(m5,1094006090)
elseif V77==2 then
call UnitAddAbility(m5,1094006094)
elseif V77==3 then
call UnitAddAbility(m5,1094006095)
elseif V77==4 then
call UnitAddAbility(m5,1094006096)
endif
call TriggerRegisterTimerEvent(t,PMG,false)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerAddAction(t,function PJG)
call NT7(GetHandleId(t),"SFluxTarget",m5)
call NV7(GetHandleId(m5),"SFluxEndTrig",t)
if PNG!=0 or m5!=O1G or POG==PHG then
call YW7(R2S(PMG)+" s",3,m5,.023,0,$FF,0,$FF)
else
call YW7(R2S(PMG)+" s
        +1 Agility",3,O1G,.023,0,$FF,0,$FF)
endif
call NP7(GetHandleId(O1G),"iSFCount",PNG)
call NP7(GetHandleId(O1G),"iSFAgility",POG)
set O1G=null
set m5=null
set t=null
endfunction
function PPG takes nothing returns boolean
return C67(GetEventDamage())
endfunction
function PQG takes nothing returns nothing
local unit O1G=GetTriggerUnit()
local integer PRG=OM7(GetHandleId(O1G),"iSFHit")+1
local integer PHG=OM7(GetHandleId(O1G),"iSFAgility")
local integer POG=PHG
if PRG>=20 then
set PRG=0
set POG=YG7(5*GetUnitAbilityLevel(O1G,1094006065),PHG+1)
if POG!=PHG then
call PGG(O1G,POG)
call YW7("+1 Agility",3,O1G,.023,0,$FF,0,$FF)
endif
endif
call NP7(GetHandleId(O1G),"iSFHit",PRG)
call NP7(GetHandleId(O1G),"iSFAgility",POG)
set O1G=null
endfunction
function PSG takes nothing returns boolean
return GetLearnedSkill()==1094006065 and GetUnitAbilityLevel(GetTriggerUnit(),1094006065)==1
endfunction
function PTG takes nothing returns nothing
local unit O1G=GetTriggerUnit()
local trigger t=CreateTrigger()
call TriggerRegisterUnitEvent(t,O1G,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function PPG))
call TriggerAddAction(t,function PQG)
call NP7(GetHandleId(O1G),"iSFHit",0)
call NP7(GetHandleId(O1G),"iSFCount",0)
call NP7(GetHandleId(O1G),"iSFAgility",0)
set t=null
set O1G=null
endfunction
function PX8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function PIG))
call TriggerAddAction(t,function PKG)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function PSG))
call TriggerAddAction(t,function PTG)
set t=null
endfunction
function PUG takes unit O1G,integer PVG returns nothing
call UnitRemoveAbility(O1G,1094006085)
call UnitRemoveAbility(O1G,1094006086)
call UnitRemoveAbility(O1G,1094006087)
call UnitRemoveAbility(O1G,1094006088)
call UnitRemoveAbility(O1G,1094006089)
if PVG>=16 then
call UnitAddAbility(O1G,1094006089)
set PVG=PVG-16
endif
if PVG>=8 then
call UnitAddAbility(O1G,1094006088)
set PVG=PVG-8
endif
if PVG>=4 then
call UnitAddAbility(O1G,1094006087)
set PVG=PVG-4
endif
if PVG>=2 then
call UnitAddAbility(O1G,1094006086)
set PVG=PVG-2
endif
if PVG>=1 then
call UnitAddAbility(O1G,1094006085)
set PVG=PVG-1
endif
endfunction
function PWG takes nothing returns boolean
return GetSpellAbilityId()==1094006066
endfunction
function PXG takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local unit m5=O77(GetHandleId(t),"MFluxTarget")
local integer PYG=OM7(GetHandleId(t),"iMFluxMP")
call SetUnitState(m5,UNIT_STATE_MANA,GetUnitState(m5,UNIT_STATE_MANA)+PYG)
call VX7(t)
set t=null
set m5=null
endfunction
function PZG takes nothing returns nothing
local unit O1G=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer PYG=R2I(.75*GetUnitAbilityLevel(O1G,1094006066)*GetHeroInt(O1G,true))
local integer PAG=OM7(GetHandleId(O1G),"iMFCount")+1
local integer PVG=OM7(GetHandleId(O1G),"iMFIntelligence")
local integer PBG=PVG
local trigger t=CreateTrigger()
if PAG>9 then
set PAG=0
set PBG=YG7(5*GetUnitAbilityLevel(O1G,1094006066),PVG+1)
if PBG!=PVG then
call PUG(O1G,PBG)
if m5!=O1G then
call YW7("+1 Intelligence",3,O1G,.023,0,0,$FF,$FF)
endif
endif
endif
call NT7(GetHandleId(t),"MFluxTarget",m5)
call NP7(GetHandleId(t),"iMFluxMP",PYG)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddAction(t,function PXG)
if PAG!=0 or m5!=O1G or PBG==PVG then
call YW7("+"+I2S(PYG)+" MP",3,m5,.023,0,0,$FF,$FF)
else
call YW7("+"+I2S(PYG)+" MP
        +1 Intelligence",3,O1G,.023,0,0,$FF,$FF)
endif
call NP7(GetHandleId(O1G),"iMFCount",PAG)
call NP7(GetHandleId(O1G),"iMFIntelligence",PBG)
set O1G=null
set m5=null
set t=null
endfunction
function PCG takes nothing returns boolean
return GetSpellTargetUnit()==O77(GetHandleId(GetTriggeringTrigger()),"uKappa")and IsUnitEnemy(O77(GetHandleId(GetTriggeringTrigger()),"uKappa"),GetOwningPlayer(GetTriggerUnit()))
endfunction
function P3G takes nothing returns nothing
local unit O1G=GetSpellTargetUnit()
local integer P6G=OM7(GetHandleId(O1G),"iMFCast")+1
local integer PVG=OM7(GetHandleId(O1G),"iMFIntelligence")
local integer PBG=PVG
if P6G>=3 then
set P6G=0
set PBG=YG7(5*GetUnitAbilityLevel(O1G,1094006066),PVG+1)
if PBG!=PVG then
call PUG(O1G,PBG)
call YW7("+1 Intelligence",3,O1G,.023,0,0,$FF,$FF)
endif
endif
call NP7(GetHandleId(O1G),"iMFCast",P6G)
call NP7(GetHandleId(O1G),"iMFIntelligence",PBG)
set O1G=null
endfunction
function PLG takes nothing returns boolean
return GetLearnedSkill()==1094006066 and GetUnitAbilityLevel(GetTriggerUnit(),1094006066)==1
endfunction
function P1G takes nothing returns nothing
local unit O1G=GetTriggerUnit()
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function PCG))
call TriggerAddAction(t,function P3G)
call NT7(GetHandleId(t),"uKappa",O1G)
call NP7(GetHandleId(O1G),"iMFCast",0)
call NP7(GetHandleId(O1G),"iMFCount",0)
call NP7(GetHandleId(O1G),"iMFIntelligence",0)
set t=null
set O1G=null
endfunction
function PY8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function PWG))
call TriggerAddAction(t,function PZG)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function PLG))
call TriggerAddAction(t,function P1G)
set t=null
endfunction
function P0G takes nothing returns boolean
return GetSpellAbilityId()==1094006067
endfunction
function P5G takes nothing returns nothing
local unit O1G=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer P2G=0
local integer P_G=0
if GetUnitAbilityLevel(O1G,1094006091)>0 then
set P_G=OM7(GetHandleId(O1G),"iPFStrength")
elseif GetUnitAbilityLevel(O1G,1094006092)>0 then
set P_G=OM7(GetHandleId(O1G),"iSFAgility")
elseif GetUnitAbilityLevel(O1G,1094006093)>0 then
set P_G=OM7(GetHandleId(O1G),"iMFIntelligence")
endif
set P2G=P_G/2
if ModuloInteger(P_G,2)>0 then
set P2G=P2G+1
endif
set P_G=P_G/2
if GetUnitAbilityLevel(O1G,1094006091)>0 then
call OLG(O1G,0)
call NP7(GetHandleId(O1G),"iPFStrength",0)
call SetHeroStr(m5,GetHeroStr(m5,false)+P2G,true)
call SetHeroStr(O1G,GetHeroStr(O1G,false)+P_G,true)
call YW7("+"+I2S(P2G)+" Strength",3,m5,.023,$FF,0,0,$FF)
call YW7("+"+I2S(P_G)+" Strength",3,O1G,.023,$FF,0,0,$FF)
call NP7(GetHandleId(m5),"FluxStr",OM7(GetHandleId(m5),"FluxStr")+P2G)
call NP7(GetHandleId(O1G),"FluxStr",OM7(GetHandleId(O1G),"FluxStr")+P_G)
elseif GetUnitAbilityLevel(O1G,1094006092)>0 then
call PGG(O1G,0)
call NP7(GetHandleId(O1G),"iSFAgility",0)
call SetHeroAgi(m5,GetHeroAgi(m5,false)+P2G,true)
call SetHeroAgi(O1G,GetHeroAgi(O1G,false)+P_G,true)
call YW7("+"+I2S(P2G)+" Agility",3,m5,.023,0,$FF,0,$FF)
call YW7("+"+I2S(P_G)+" Agility",3,O1G,.023,0,$FF,0,$FF)
call NP7(GetHandleId(m5),"FluxAgi",OM7(GetHandleId(m5),"FluxAgi")+P2G)
call NP7(GetHandleId(O1G),"FluxAgi",OM7(GetHandleId(O1G),"FluxAgi")+P_G)
elseif GetUnitAbilityLevel(O1G,1094006093)>0 then
call PUG(O1G,0)
call NP7(GetHandleId(O1G),"iMFIntelligence",0)
call SetHeroInt(m5,GetHeroInt(m5,false)+P2G,true)
call SetHeroInt(O1G,GetHeroInt(O1G,false)+P_G,true)
call YW7("+"+I2S(P2G)+" Intelligence",3,m5,.023,0,0,$FF,$FF)
call YW7("+"+I2S(P_G)+" Intelligence",3,O1G,.023,0,0,$FF,$FF)
call NP7(GetHandleId(m5),"FluxInt",OM7(GetHandleId(m5),"FluxInt")+P2G)
call NP7(GetHandleId(O1G),"FluxInt",OM7(GetHandleId(O1G),"FluxInt")+P_G)
endif
set O1G=null
set m5=null
endfunction
function Q4G takes nothing returns boolean
return GetLearnedSkill()==1094006067 and GetUnitAbilityLevel(GetTriggerUnit(),1094006067)==1
endfunction
function Q7G takes nothing returns nothing
call UnitAddAbility(GetTriggerUnit(),1094006091)
endfunction
function Q8G takes nothing returns boolean
return GetSpellAbilityId()==1094006091 or GetSpellAbilityId()==1094006092 or GetSpellAbilityId()==1094006093
endfunction
function Q9G takes nothing returns nothing
if GetSpellAbilityId()==1094006091 then
call UnitRemoveAbility(GetTriggerUnit(),1094006091)
call UnitAddAbility(GetTriggerUnit(),1094006092)
elseif GetSpellAbilityId()==1094006092 then
call UnitRemoveAbility(GetTriggerUnit(),1094006092)
call UnitAddAbility(GetTriggerUnit(),1094006093)
else
call UnitRemoveAbility(GetTriggerUnit(),1094006093)
call UnitAddAbility(GetTriggerUnit(),1094006091)
endif
endfunction
function PZ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function P0G))
call TriggerAddAction(t,function P5G)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function Q4G))
call TriggerAddAction(t,function Q7G)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Q8G))
call TriggerAddAction(t,function Q9G)
set t=null
endfunction
function QDG takes nothing returns nothing
local unit QEG=M7[GetPlayerId(GetTriggerPlayer())]
local player p=GetTriggerPlayer()
local integer QFG=GetHandleId(QEG)
local integer QGG=OM7(QFG,"FluxStr")
local integer QHG=OM7(QFG,"FluxAgi")
local integer QIG=OM7(QFG,"FluxInt")
local integer QJG=OM7(QFG,"iPFStrength")
local integer QKG=OM7(QFG,"iSFAgility")
local integer QMG=OM7(QFG,"iMFIntelligence")
if GetUnitTypeId(QEG)==1211510832 then
call DisplayTimedTextToPlayer(p,0,0,$F,"Bonus Strength: "+I2S(QJG))
call DisplayTimedTextToPlayer(p,0,0,$F,"Bonus Agility: "+I2S(QKG))
call DisplayTimedTextToPlayer(p,0,0,$F,"Bonus Intelligence: "+I2S(QMG))
endif
call DisplayTimedTextToPlayer(p,0,0,$F,"Flux Strength: "+I2S(QGG))
call DisplayTimedTextToPlayer(p,0,0,$F,"Flux Agility: "+I2S(QHG))
call DisplayTimedTextToPlayer(p,0,0,$F,"Flux Intelligence: "+I2S(QIG))
set QEG=null
set p=null
endfunction
function PA8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-flux",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-flux",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-flux",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-flux",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-flux",true)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-flux",true)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-flux",true)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-flux",true)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-flux",true)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-flux",true)
call TriggerAddAction(t,function QDG)
set t=null
endfunction
function QNG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer WF8=(LoadInteger(L7,(GetHandleId(IH7)),(627)))
local real QOG=(LoadReal(L7,(GetHandleId(IH7)),(628)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093751604)
local real VW9=(5+BC7*$F)*Pow(2,IMinBJ(WF8,5)-1)
set VW9=VW9+IMaxBJ(WF8-5,0)*50
if GetTriggerEventId()==EVENT_UNIT_DEATH then
if IsUnitType(IH7,UNIT_TYPE_HERO) then
call KillUnit((LoadUnitHandle(L7,(I97),(45))))
endif
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call SaveInteger(L7,(GetHandleId(IH7)),(627),(0))
call SaveReal(L7,(GetHandleId(IH7)),(628),((0)*1.))
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093751609 then
if IsUnitType(IH7,UNIT_TYPE_HERO) then
call KillUnit((LoadUnitHandle(L7,(I97),(45))))
endif
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call SaveInteger(L7,(GetHandleId(IH7)),(627),(0))
call SaveReal(L7,(GetHandleId(IH7)),(628),((0)*1.))
if(OT7(IH7,"DisruptionState"))then
call SetUnitInvulnerable(IH7,false)
endif
call B67(ZX7,IH7,1,VW9)
if(OT7(IH7,"DisruptionState"))then
call SetUnitInvulnerable(IH7,true)
endif
call YW7(I2S(R2I(VW9))+"!",2,IH7,.025,100,0,$C8,$D8)
endif
elseif(TimerGetElapsed(W))>QOG then
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
if IsUnitType(IH7,UNIT_TYPE_HERO) then
call KillUnit((LoadUnitHandle(L7,(I97),(45))))
endif
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call SaveInteger(L7,(GetHandleId(IH7)),(627),(0))
call SaveReal(L7,(GetHandleId(IH7)),(628),((0)*1.))
if(OT7(IH7,"DisruptionState"))then
call SetUnitInvulnerable(IH7,false)
endif
call B67(ZX7,IH7,1,VW9)
if(OT7(IH7,"DisruptionState"))then
call SetUnitInvulnerable(IH7,true)
endif
call YW7(I2S(R2I(VW9))+"!",2,IH7,.025,100,0,$C8,$D8)
else
if IsUnitType(IH7,UNIT_TYPE_HERO) then
call SetUnitX((LoadUnitHandle(L7,(I97),(45))),GetUnitX(IH7))
call SetUnitY((LoadUnitHandle(L7,(I97),(45))),GetUnitY(IH7))
endif
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function QPG takes unit ZX7,unit IH7 returns nothing
local trigger t
local integer I97
local integer BC7=GetUnitAbilityLevel(ZX7,1093751604)
local unit Y27
if(LoadInteger(L7,(GetHandleId(IH7)),(627)))>0 then
call SaveInteger(L7,(GetHandleId(IH7)),(627),((LoadInteger(L7,(GetHandleId(IH7)),(627)))+1))
call SaveReal(L7,(GetHandleId(IH7)),(628),(((TimerGetElapsed(W))+8)*1.))
else
set t=CreateTrigger()
set I97=GetHandleId(t)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
if IsUnitType(IH7,UNIT_TYPE_HERO) then
set Y27=CreateUnit(GetOwningPlayer(ZX7),1865429305,GetUnitX(IH7),GetUnitY(IH7),0)
call SaveUnitHandle(L7,(I97),(45),(Y27))
endif
call SaveInteger(L7,(GetHandleId(IH7)),(627),(1))
if IsUnitType(IH7,UNIT_TYPE_HERO) then
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("war3mapImported\\shamanyouranus-ShadowyMissile.mdl",IH7,"chest")))
else
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("war3mapImported\\shamanyouranus-ShadowyMissile.mdl",IH7,"origin")))
endif
call SaveReal(L7,(GetHandleId(IH7)),(628),(((TimerGetElapsed(W))+$A)*1.))
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function QNG))
set Y27=null
endif
call YW7("+"+I2S((LoadInteger(L7,(GetHandleId(IH7)),(627)))),3,IH7,.025,100,0,$C8,$D8)
call B67(ZX7,IH7,1,50)
set t=null
set Y27=null
endfunction
function QQG takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),VG4)==false then
call GroupAddUnit(VG4,GetEnumUnit())
call QPG(VF4,GetEnumUnit())
endif
endfunction
function QRG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit Y27=(LoadUnitHandle(L7,(I97),(45)))
local integer QSG=GetTriggerEvalCount(t)
local real a=(LoadReal(L7,(I97),($89)))
local real x=X17(GetUnitX(Y27)+(20)*Cos(a))
local real y=X07(GetUnitY(Y27)+(20)*Sin(a))
local group g
local group QTG=(LoadGroupHandle(L7,(I97),($85)))
local unit IH7
if QSG==75 then
call WR7(QTG)
call KillUnit(Y27)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
set IN4=ZX7
set VF4=ZX7
set VG4=QTG
call SetUnitX(Y27,x)
call SetUnitY(Y27,y)
set g=WS7()
call GroupEnumUnitsInRange(g,x,y,$B4+25,Condition(function AR7))
call ForGroup(g,function QQG)
set IH7=FirstOfGroup(g)
call WR7(g)
endif
set t=null
set ZX7=null
set Y27=null
set g=null
set IH7=null
set QTG=null
return false
endfunction
function QUG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local real a=J77(GetUnitX(ZX7),GetUnitY(ZX7),x,y)*bj_DEGTORAD
local unit Y27=CreateUnit(GetOwningPlayer(ZX7),1747993394,GetUnitX(ZX7),GetUnitY(ZX7),a*bj_RADTODEG)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function QRG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(45),(Y27))
call SaveReal(L7,(I97),($89),((a)*1.))
call SaveGroupHandle(L7,(I97),($85),(WS7()))
call XF7(ZX7,1093751609)
set t=null
set ZX7=null
set Y27=null
endfunction
function QVG takes nothing returns boolean
if GetSpellAbilityId()==1093751604 then
call QUG()
endif
return false
endfunction
function N58 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function QVG))
set t=null
endfunction
function QWG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local unit QXG=GetSummonedUnit()
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_SUMMON then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif GetUnitAbilityLevel(QXG,1110459457)>0 and GetOwningPlayer(GetSummoningUnit())==GetOwningPlayer(ZX7)then
if IsUnitAlly(IH7,GetOwningPlayer(ZX7)) then
call SelectUnitAddForPlayer(QXG,GetOwningPlayer(ZX7))
else
call IssueTargetOrderById(QXG,$D000F,IH7)
endif
endif
set t=null
set ZX7=null
set IH7=null
set QXG=null
return false
endfunction
function QYG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call OX7(IH7,"DisruptionState")
call SetUnitInvulnerable(IH7,false)
call PauseUnit(IH7,false)
call ShowUnit(IH7,true)
call RemoveSavedHandle(L7,(GetHandleId(IH7)),(673))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if GetTriggerEventId()!=EVENT_UNIT_DEATH then
call ClearSelectionForPlayer(GetOwningPlayer(IH7))
call SelectUnitAddForPlayer(IH7,GetOwningPlayer(IH7))
call Y17(VD4,GetUnitX(IH7),GetUnitY(IH7))
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,3,false)
call YB7(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function QWG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call XF7(BB7,1093751605)
call SetUnitAbilityLevel(BB7,1093751605,GetUnitAbilityLevel(ZX7,1093751608))
call IssueTargetOrderById(BB7,$D0132,IH7)
call IssueTargetOrderById(BB7,$D0132,IH7)
endif
set t=null
set ZX7=null
set IH7=null
set BB7=null
return false
endfunction
function QZG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093751608)
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit BB7=CreateUnit(GetOwningPlayer(IH7),1865429305,GetUnitX(IH7),GetUnitY(IH7),0)
call UnitApplyTimedLife(BB7,1112820806,2.6)
if IsUnitAlly(IH7,GetOwningPlayer(ZX7))==false then
set BB7=CreateUnit(GetOwningPlayer(ZX7),1865429305,GetUnitX(IH7),GetUnitY(IH7),0)
call UnitApplyTimedLife(BB7,1112820806,2.6)
endif
call SetUnitInvulnerable(IH7,true)
call PauseUnit(IH7,true)
call ShowUnit(IH7,false)
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffect("war3mapImported\\WILLTHEALMIGHTY-Void5.mdx",GetUnitX(IH7),GetUnitY(IH7))))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function QYG))
call SaveUnitHandle(L7,GetHandleId(ZX7),(673),IH7)
call OV7(IH7,"DisruptionState")
set ZX7=null
set IH7=null
set t=null
set BB7=null
endfunction
function QAG takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093751608 and(IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit())) or WQ7(GetSpellTargetUnit())==false)then
call QZG()
endif
else
if GetSpellAbilityId()==1093751608 and GetSpellTargetUnit()!=GetTriggerUnit()and IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit())) and OO7(GetHandleId(GetOwningPlayer(GetSpellTargetUnit())),"DisableHelp")then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652600))
endif
endif
return false
endfunction
function N28 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function QAG))
set t=null
endfunction
function QBG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093751618)
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call NT7(GetHandleId(ZX7),"AI|SoulCatcherTgt",null)
elseif GetEventDamage()>5 then
call DisableTrigger(t)
call B67(GetEventDamageSource(),GetTriggerUnit(),3,(.1+.1*BC7)*GetEventDamage())
call EnableTrigger(t)
endif
set ZX7=null
set t=null
return false
endfunction
function QCG takes nothing returns nothing
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local group g=WS7()
local unit ZX7=GetTriggerUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093751618)
local unit IH7
local trigger t
local integer I97
set IN4=ZX7
call GroupEnumUnitsInRange(g,x,y,475,Condition(function AR7))
set IH7=(LoadUnitHandle(L7,(GetHandleId(ZX7)),(673)))
if IH7!=null then
if KF7(GetUnitX(IH7),GetUnitY(IH7),x,y)<475 and IsUnitEnemy(IH7,GetOwningPlayer(ZX7)) then
call GroupAddUnit(g,IH7)
endif
endif
set IH7=GroupPickRandomUnit(g)
call WR7(g)
call DestroyEffect(AddSpecialEffect("war3mapImported\\Desecrate.mdx",x,y))
if IH7!=null then
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,$C,false)
call TriggerAddCondition(t,Condition(function QBG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("war3mapImported\\void.mdx",IH7,"chest")))
if IsUnitType(IH7,UNIT_TYPE_HERO)then
call O37(IH7,"AI|SoulCatcher",$C)
call NT7(GetHandleId(ZX7),"AI|SoulCatcherTgt",IH7)
endif
endif
set g=null
set ZX7=null
set IH7=null
set t=null
endfunction
function Q3G takes nothing returns boolean
if GetSpellAbilityId()==1093751618 then
call QCG()
endif
return false
endfunction
function N_8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Q3G))
set t=null
endfunction
function Q6G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer QSG=GetTriggerEvalCount(t)
local integer BC7=GetUnitAbilityLevel(ZX7,1093751617)
if QSG==5 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if(OT7(IH7,"DisruptionState"))then
call SetUnitInvulnerable(IH7,false)
endif
call B67(ZX7,IH7,1,4*(25+25*BC7))
if(OT7(IH7,"DisruptionState"))then
call SetUnitInvulnerable(IH7,true)
endif
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function QLG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function Q6G))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call TriggerEvaluate(t)
set t=null
set ZX7=null
set IH7=null
endfunction
function Q1G takes nothing returns boolean
if GetSpellAbilityId()==1093751617 and IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit())) and WQ7(GetSpellTargetUnit())==false then
call QLG()
endif
return false
endfunction
function O48 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Q1G))
set t=null
endfunction
function Q0G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local integer QSG=GetTriggerEvalCount(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
call UnitRemoveAbility(ZX7,1093751632)
set t=null
set ZX7=null
return false
endfunction
function Q5G takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
call XF7(ZX7,1093751632)
call UnitMakeAbilityPermanent(ZX7,true,1093751632)
call SetUnitAbilityLevel(ZX7,1093751632,GetUnitAbilityLevel(ZX7,1093751631))
call TriggerRegisterTimerEvent(t,3,false)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function Q0G))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set t=null
set ZX7=null
endfunction
function Q2G takes nothing returns boolean
if GetSpellAbilityId()==1093751631 then
call Q5G()
endif
return false
endfunction
function O78 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Q2G))
set t=null
endfunction
function Q_G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local integer WF8=GetTriggerEvalCount(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local unit Y27=(LoadUnitHandle(L7,(I97),(45)))
local real x
local real y
local real d
local real R4G
local real TP9=(LoadReal(L7,(I97),(23)))
local real TQ9=(LoadReal(L7,(I97),(24)))
local real a=J77(TP9,TQ9,GetUnitX(IH7),GetUnitY(IH7))*bj_DEGTORAD
local integer BC7=GetUnitAbilityLevel(ZX7,1093751633)
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitShareVision(Y27,GetOwningPlayer(IH7),false)
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if GetTriggerUnit()!=Y27 then
call KillUnit(Y27)
endif
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
call UnitRemoveBuffs(Y27,true,true)
elseif WF8<3/.02 then
call SetUnitFacing(Y27,a*bj_RADTODEG)
else
if WF8==4/.02 then
call UnitShareVision(Y27,GetOwningPlayer(IH7),true)
endif
call SetUnitFacing(Y27,a*bj_RADTODEG)
set x=TP9+(380+UW4*WF8*.05)*.02*Cos(a)
set y=TQ9+(380+UW4*WF8*.05)*.02*Sin(a)
call SetUnitPosition(Y27,x,y)
call SaveReal(L7,(I97),(23),((x)*1.))
call SaveReal(L7,(I97),(24),((y)*1.))
if KF7(x,y,GetUnitX(IH7),GetUnitY(IH7))<20 then
set d=RMinBJ(KF7(x,y,(LoadReal(L7,(I97),(6))),(LoadReal(L7,(I97),(7)))),$5DC)
set R4G=(d/$5DC)*(125*GetUnitAbilityLevel(ZX7,1093751633))
set R4G=RMaxBJ(R4G,0)
call KillUnit(Y27)
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if AK7(IH7)==false or IsUnitVisible(IH7,GetOwningPlayer(ZX7)) then
call B67(ZX7,IH7,5,R4G)
call BA7(ZX7,IH7,.8+.5*BC7)
endif
endif
endif
set t=null
set ZX7=null
set IH7=null
set Y27=null
return false
endfunction
function R7G takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local real a=J77(GetUnitX(ZX7),GetUnitY(ZX7),GetUnitX(IH7),GetUnitY(IH7))*bj_DEGTORAD
local real x=X17(GetUnitX(ZX7)+$96*Cos(a))
local real y=X07(GetUnitY(ZX7)+$96*Sin(a))
local integer BC7=GetUnitAbilityLevel(ZX7,1093751633)
local unit Y27
local integer R8G
local string R9G="effects\\Snipe Target.mdx"
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(ZX7))==false and WG7(GetLocalPlayer())==false then
set R9G=""
endif
if BC7==1 then
set R8G=1747993415
elseif BC7==2 then
set R8G=1747993393
elseif BC7==3 then
set R8G=1747993414
elseif BC7==4 then
set R8G=1747993416
endif
set Y27=CreateUnit(GetOwningPlayer(ZX7),R8G,x,y,a*bj_RADTODEG)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,Y27,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,Y27,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function Q_G))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveUnitHandle(L7,(I97),(45),(Y27))
call SaveReal(L7,(I97),(6),((GetUnitX(ZX7))*1.))
call SaveReal(L7,(I97),(7),((GetUnitY(ZX7))*1.))
call SaveReal(L7,(I97),(23),((GetUnitX(Y27))*1.))
call SaveReal(L7,(I97),(24),((GetUnitY(Y27))*1.))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget(R9G,IH7,"overhead")))
set t=null
set ZX7=null
set IH7=null
set Y27=null
endfunction
function RDG takes nothing returns boolean
if GetSpellAbilityId()==1093751633 and WQ7(GetSpellTargetUnit())==false then
call R7G()
endif
return false
endfunction
function O88 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function RDG))
call X_7(1093687350)
set t=null
endfunction
function REG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call UnitRemoveAbility(IH7,1110459461)
call UnitRemoveAbility(IH7,1093751635)
set t=null
set IH7=null
return false
endfunction
function RFG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call UnitRemoveAbility(IH7,1110459463)
call UnitRemoveAbility(IH7,1093751860)
set t=null
set IH7=null
return false
endfunction
function RGG takes nothing returns nothing
local trigger t
local integer I97
local integer BC7=GetUnitAbilityLevel(UP4,1093751861)
local boolean TGD=false
if BC7==0 then
set BC7=GetUnitAbilityLevel(UP4,1093808949)
set TGD=true
endif
if YS8(GetEnumUnit())==false then
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,2,false)
call TriggerRegisterUnitEvent(t,GetEnumUnit(),EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function REG))
call SaveUnitHandle(L7,(I97),(17),(GetEnumUnit()))
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093751635,false)
call XF7(GetEnumUnit(),1093751635)
endif
call B67(UP4,GetEnumUnit(),5,BC7*150+$64)
set t=null
endfunction
function RHG takes nothing returns nothing
local trigger t
local integer I97
local integer BC7=GetUnitAbilityLevel(UP4,1093751861)
local boolean TGD=false
if BC7==0 then
set BC7=GetUnitAbilityLevel(UP4,1093808949)
set TGD=true
endif
if YS8(GetEnumUnit())==false then
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,3,false)
call TriggerRegisterUnitEvent(t,GetEnumUnit(),EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function RFG))
call SaveUnitHandle(L7,(I97),(17),(GetEnumUnit()))
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093751860,false)
call XF7(GetEnumUnit(),1093751860)
endif
if TGD then
call B67(UP4,GetEnumUnit(),3,BC7*100+150)
else
call B67(UP4,GetEnumUnit(),3,BC7*75+75)
endif
set t=null
endfunction
function RIG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real x=(LoadReal(L7,(I97),(6)))
local real y=(LoadReal(L7,(I97),(7)))
local group g
local integer QSG=GetTriggerEvalCount(t)
local fogmodifier RJG=(LoadFogModifierHandle(L7,(I97),(42)))
if QSG==1 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Calldown_FlyUp.mdx",ZX7,"chest"))
elseif QSG==2 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Calldown_FlyUp.mdx",ZX7,"chest"))
elseif QSG==3 then
call DestroyEffect(AddSpecialEffect("war3mapImported\\Calldown_FlyDown.mdx",x,y))
elseif QSG==4 then
set g=WS7()
set IN4=ZX7
set UP4=ZX7
call GroupEnumUnitsInRange(g,x,y,600+25,Condition(function AJ7))
call ForGroup(g,function RGG)
call WR7(g)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\DemolisherFireMissile\\DemolisherFireMissile.mdl",x,y))
elseif QSG==5 then
call DestroyEffect(AddSpecialEffect("war3mapImported\\Calldown_FlyDown.mdx",x,y))
elseif QSG==6 then
set g=WS7()
set IN4=ZX7
set UP4=ZX7
call GroupEnumUnitsInRange(g,x,y,600+25,Condition(function AJ7))
call ForGroup(g,function RHG)
call WR7(g)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\DemolisherFireMissile\\DemolisherFireMissile.mdl",x,y))
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FogModifierStop(RJG)
call DestroyFogModifier(RJG)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
set g=null
set RJG=null
return false
endfunction
function RKG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local string s=""
local fogmodifier Q0D=CreateFogModifierRadius(GetOwningPlayer(ZX7),FOG_OF_WAR_VISIBLE,x,y,350,true,true)
call FogModifierStart(Q0D)
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(ZX7)) or WG7(GetLocalPlayer())then
set s="war3mapImported\\CallDown_4.mdx"
endif
call TriggerRegisterTimerEvent(t,.1,false)
call TriggerRegisterTimerEvent(t,.8,false)
call TriggerRegisterTimerEvent(t,1.6,false)
call TriggerRegisterTimerEvent(t,2,false)
call TriggerRegisterTimerEvent(t,3.6,false)
call TriggerRegisterTimerEvent(t,4,false)
call TriggerAddCondition(t,Condition(function RIG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveReal(L7,(I97),(6),((x)*1.))
call SaveReal(L7,(I97),(7),((y)*1.))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffect(s,x,y)))
call SaveFogModifierHandle(L7,(I97),(42),(Q0D))
set t=null
set ZX7=null
set Q0D=null
endfunction
function RMG takes nothing returns boolean
if GetSpellAbilityId()==1093751861 or GetSpellAbilityId()==1093808949 then
call RKG()
endif
return false
endfunction
function O98 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function RMG))
set t=null
endfunction
function RNG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer T_7=GetHandleId(t)
local unit ZX7=O77(T_7,"Source")
local integer MHD
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==ZX7 and(GetEventDamage()>20 or IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE))then
set MHD=OM7(GetHandleId(ZX7),"Count")
if MHD>0 then
call NP7(GetHandleId(ZX7),"Count",(MHD+1))
endif
call NM7(T_7)
call OZ7(t)
endif
else
call NM7(T_7)
call OZ7(t)
endif
set t=null
set ZX7=null
return false
endfunction
function ROG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=O77(I97,"Source")
if VR7(ZX7)==false then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call UnitRemoveAbility(ZX7,1093808951)
call UnitAddAbility(ZX7,1093808706)
call UnitRemoveAbility(ZX7,1093808706)
if(MV7((ZX7),ZU[G14])!=null)then
call UnitAddAbility(ZX7,1093808951)
endif
endif
set t=null
set ZX7=null
return false
endfunction
function RPG takes unit ZX7 returns nothing
local trigger t
if VR7(ZX7)==false then
call UnitRemoveAbility(ZX7,1093808951)
call UnitAddAbility(ZX7,1093808706)
call UnitRemoveAbility(ZX7,1093808706)
if(MV7((ZX7),ZU[G14])!=null)then
call UnitAddAbility(ZX7,1093808951)
endif
else
set t=CreateTrigger()
call NT7(GetHandleId(t),"Source",ZX7)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function ROG))
set t=null
endif
endfunction
function RQG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer T_7=GetHandleId(t)
local unit ZX7=O77(T_7,"Source")
call UnitRemoveAbility(ZX7,1093751895)
call UnitRemoveAbility(ZX7,1110459466)
call RPG(ZX7)
call NM7(T_7)
call OZ7(t)
set t=null
return false
endfunction
function RRG takes nothing returns nothing
local unit CV7=GetAttacker()
local integer T_7=GetHandleId(CV7)
local integer MHD=OM7(T_7,"Count")
local integer CW7=GetUnitAbilityLevel(CV7,1093808697)
local trigger t
if IsUnitIllusion(GetAttacker()) and GetUnitAbilityLevel(GetAttacker(),1093751895)>0 then
call RPG(GetAttacker())
call UnitRemoveAbility(GetAttacker(),1093751895)
endif
if GetAttacker()==CV7 then
set MHD=MHD+1
if MHD>3+CW7 then
call UnitRemoveAbility(CV7,1093751895)
call UnitRemoveAbility(CV7,1110459466)
call RPG(CV7)
set t=OE7(T_7,"FlakCannon_EndTrig")
call NM7(GetHandleId(t))
call OZ7(t)
else
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2,false)
call TriggerAddCondition(t,Condition(function RNG))
call NT7(GetHandleId(t),"Source",CV7)
endif
endif
set t=null
set CV7=null
endfunction
function RSG takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093751895)>0 then
call RRG()
endif
return false
endfunction
function RTG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer T_7=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,$F,false)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function RQG))
call NT7(T_7,"Source",ZX7)
call NV7(GetHandleId(ZX7),"FlakCannon_EndTrig",t)
call NP7(GetHandleId(ZX7),"Count",(1))
call UnitRemoveAbility(ZX7,1093808951)
call UnitAddAbility(ZX7,1093808705)
call UnitRemoveAbility(ZX7,1093808705)
if(MV7((ZX7),ZU[G14])!=null)then
call UnitAddAbility(ZX7,1093808951)
endif
set t=null
set ZX7=null
endfunction
function RUG takes nothing returns boolean
if IsUnitIllusion(GetTriggerUnit()) and GetUnitTypeId(GetTriggerUnit())==1160786511 then
call RPG(GetTriggerUnit())
endif
return false
endfunction
function RVG takes nothing returns boolean
if GetSpellAbilityId()==1093808697 and GetUnitTypeId(GetTriggerUnit())==1160786510 then
call RTG()
endif
return false
endfunction
function OD8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function RVG))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function RSG))
set t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,GetWorldBounds())
call TriggerAddCondition(t,Condition(function RUG))
set t=null
endfunction
function RWG takes nothing returns boolean
local unit IH7=GetFilterUnit()
local unit ZX7=UQ4
local real RXG=UR4
local real RYG=US4
local real ON2=UT4
local real OS2=UU4
local real x
local real y
local real a
local real d
if(WF7(GetFilterUnit())==false and IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))then
if(OT7(IH7,"4324")==false)then
call O37(IH7,"4324",.3)
endif
set d=KF7(RXG,RYG,GetUnitX(IH7),GetUnitY(IH7))
set a=J77(RXG,RYG,GetUnitX(IH7),GetUnitY(IH7))*bj_DEGTORAD
if d>UV4 then
set x=GetUnitX(IH7)+$B*Cos(a)
set y=GetUnitY(IH7)+$B*Sin(a)
else
set x=GetUnitX(IH7)-$B*Cos(a)
set y=GetUnitY(IH7)-$B*Sin(a)
endif
call SetUnitX(IH7,x)
call SetUnitY(IH7,y)
endif
set IH7=null
set ZX7=null
return false
endfunction
function RZG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real RXG=(LoadReal(L7,(I97),(6)))
local real RYG=(LoadReal(L7,(I97),(7)))
local real x
local real y
local integer i=0
local group g
if GetTriggerEvalCount(t)>(50*(2+.6*GetUnitAbilityLevel(ZX7,1093751637)))then
loop
exitwhen i>16
set i=i+1
endloop
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
set g=WS7()
set UR4=RXG
set US4=RYG
set UQ4=ZX7
set IN4=ZX7
loop
exitwhen i>16
set x=RXG+UV4*Cos(bj_DEGTORAD*360.*i/16.)
set y=RYG+UV4*Sin(bj_DEGTORAD*360.*i/16.)
set UT4=x
set UU4=y
call GroupEnumUnitsInRange(g,x,y,75,Condition(function RWG))
set i=i+1
endloop
call WR7(g)
set g=null
endif
set t=null
set ZX7=null
return false
endfunction
function RAG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real RXG=(LoadReal(L7,(I97),(6)))
local real RYG=(LoadReal(L7,(I97),(7)))
local real x
local real y
local integer i=0
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=CreateTrigger()
set I97=GetHandleId(t)
loop
exitwhen i>16
set x=RXG+UV4*Cos(bj_DEGTORAD*360.*i/16.)
set y=RYG+UV4*Sin(bj_DEGTORAD*360.*i/16.)
set i=i+1
endloop
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffect("war3mapImported\\KineticField_FX_Stand.mdx",RXG,RYG)))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveReal(L7,(I97),(6),((RXG)*1.))
call SaveReal(L7,(I97),(7),((RYG)*1.))
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function RZG))
set t=null
set ZX7=null
return false
endfunction
function RBG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local real RXG=GetSpellTargetX()
local real RYG=GetSpellTargetY()
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffect("war3mapImported\\KineticField_FX_Start.mdx",RXG,RYG)))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveReal(L7,(I97),(6),((RXG)*1.))
call SaveReal(L7,(I97),(7),((RYG)*1.))
call TriggerRegisterTimerEvent(t,1.2,false)
call TriggerAddCondition(t,Condition(function RAG))
call Y57(GetOwningPlayer(ZX7),5.5,RXG,RYG,325)
set t=null
set ZX7=null
endfunction
function RCG takes nothing returns boolean
if GetSpellAbilityId()==1093751637 then
call RBG()
endif
return false
endfunction
function OE8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function RCG))
set t=null
endfunction
function R3G takes nothing returns nothing
local unit BB7
if XTI then
set BB7=CreateUnit(GetOwningPlayer(GetEnumUnit()),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
call UnitRemoveAbility(GetEnumUnit(),1110460231)
call XF7(BB7,1093816154)
call IssueTargetOrder(BB7,"doom",GetEnumUnit())
set BB7=null
endif
call B67(U_4,GetEnumUnit(),1,U24)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Purge_NoBirth.mdx",GetEnumUnit(),"origin"))
endfunction
function R6G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local integer BC7=(LoadInteger(L7,(I97),(5)))
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit Y27=(LoadUnitHandle(L7,(I97),(45)))
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
local boolean TGD=(LoadBoolean(L7,(I97),(15)))
local group g
local integer QSG=GetTriggerEvalCount(t)
local integer OBD=20
if TGD then
set OBD=28
endif
if QSG>OBD then
call StopSound(VE4,false,true)
call KillUnit(Y27)
call ShowUnit(Y27,false)
call KillUnit(BB7)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
set g=WS7()
set IN4=ZX7
set U_4=ZX7
if TGD then
set U24=0.25*(150+50*BC7)*(QSG/20)
else
set U24=0.25*(150+50*BC7)*(QSG/I2R(OBD))
endif
set V44=false
set XTI=TGD
if ModuloInteger(QSG,4)==0 then
set V44=true
endif
call GroupEnumUnitsInRange(g,GetUnitX(Y27),GetUnitY(Y27),475,Condition(function AQ7))
call ForGroup(g,function R3G)
call WR7(g)
set g=null
endif
set t=null
set ZX7=null
set Y27=null
set BB7=null
return false
endfunction
function RLG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local real R1G=GetSpellTargetX()
local real R0G=GetSpellTargetY()
local unit Y27=CreateUnit(GetOwningPlayer(ZX7),1747993419,R1G,R0G,0)
local integer BC7=GetUnitAbilityLevel(ZX7,1093752118)
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,R1G,R0G,0)
local boolean TGD=false
if BC7==0 then
set BC7=GetUnitAbilityLevel(ZX7,1093817679)
set TGD=true
endif
call SetSoundVolume(VE4,200)
call StartSound(VE4)
call SetSoundPosition(VE4,R1G,R0G,100)
if TW7(GetOwningPlayer(ZX7))then
call XF7(BB7,1093752117)
if TGD then
call SetUnitAbilityLevel(BB7,1093752117,2)
endif
else
call XF7(BB7,1093752116)
if TGD then
call SetUnitAbilityLevel(BB7,1093752116,2)
endif
endif
call IssuePointOrder(BB7,"cloudoffog",R1G,R0G)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(45),(Y27))
call SaveUnitHandle(L7,(I97),(19),(BB7))
call SaveInteger(L7,(I97),(5),(BC7))
call SaveBoolean(L7,(I97),(15),(TGD))
call TriggerRegisterTimerEvent(t,0.25,true)
call TriggerAddCondition(t,Condition(function R6G))
set t=null
set ZX7=null
set Y27=null
set BB7=null
endfunction
function R5G takes nothing returns boolean
if GetSpellAbilityId()==1093752118 or GetSpellAbilityId()==1093817679 then
call RLG()
endif
return false
endfunction
function OF8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function R5G))
set t=null
endfunction
function R2G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local unit Y27=(LoadUnitHandle(L7,(I97),(45)))
local real R1G=(LoadReal(L7,(I97),(6)))
local real R0G=(LoadReal(L7,(I97),(7)))
local real x=GetUnitX(Y27)
local real y=GetUnitY(Y27)
local real a=J77(x,y,R1G,R0G)
local real d=KF7(x,y,R1G,R0G)
local real r=(LoadReal(L7,(I97),(671)))
call SetUnitFacing(Y27,a)
set x=x+r*Cos(a*bj_DEGTORAD)
set y=y+r*Sin(a*bj_DEGTORAD)
call SetUnitX(Y27,x)
call SetUnitY(Y27,y)
if d<40 then
call KillUnit(Y27)
call DestroyEffect((LoadEffectHandle(L7,(I97),($AF))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call O37(IH7,"4411",1)
call SetUnitPosition(IH7,R1G,R0G)
call PanCameraToTimedForPlayer(GetOwningPlayer(IH7),R1G,R0G,0)
elseif WF7(IH7)then
call KillUnit(Y27)
call DestroyEffect((LoadEffectHandle(L7,(I97),($AF))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set IH7=null
set Y27=null
return false
endfunction
function R_G takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local real x=(LoadReal(L7,(GetHandleId(IH7)),(7400)))
local real y=(LoadReal(L7,(GetHandleId(IH7)),(7500)))
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit Y27=CreateUnit(GetOwningPlayer(ZX7),1747993398,GetUnitX(IH7),GetUnitY(IH7),0)
local real d=KF7(x,y,GetUnitX(IH7),GetUnitY(IH7))
local real r=.02*(RMaxBJ(d/1.8,600))
call TriggerAddCondition(t,Condition(function R2G))
call TriggerRegisterTimerEvent(t,.02,true)
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveUnitHandle(L7,(I97),(45),(Y27))
call SaveReal(L7,(I97),(6),((x)*1.))
call SaveReal(L7,(I97),(7),((y)*1.))
call SaveReal(L7,(I97),(671),((r)*1.))
call SaveEffectHandle(L7,(I97),($AF),(AddSpecialEffectTarget("effects\\Lightning_Ball_Tail_FX.mdx",IH7,"overhead")))
call SaveEffectHandle(L7,(I97),($B0),(AddSpecialEffect("effects\\Lightning_Ball_Tail_FX.mdx",x,y)))
call TriggerEvaluate(t)
set ZX7=null
set IH7=null
set Y27=null
set t=null
endfunction
function S4G takes nothing returns boolean
if GetSpellAbilityId()==1093751639 and WQ7(GetSpellTargetUnit())==false then
if IsUnitIllusion(GetSpellTargetUnit())then
call KillUnit(GetSpellTargetUnit())
else
call R_G()
endif
endif
return false
endfunction
function C7F takes nothing returns nothing
local unit IH7=IN4
local integer i=0
loop
exitwhen i>$F
set i=i+1
endloop
set IH7=null
endfunction
function S7G takes nothing returns nothing
local unit IH7=GetEnumUnit()
local integer I97=GetHandleId(IH7)
local integer i=1
loop
exitwhen i>$E
call SaveReal(L7,(I97),(7400+i-1),(((LoadReal(L7,(I97),(7400+i))))*1.))
call SaveReal(L7,(I97),(7500+i-1),(((LoadReal(L7,(I97),(7500+i))))*1.))
set i=i+1
endloop
call SaveReal(L7,(I97),(7400+$E),((GetUnitX(IH7))*1.))
call SaveReal(L7,(I97),(7500+$E),((GetUnitY(IH7))*1.))
set IH7=null
endfunction
function S8G takes nothing returns boolean
local group g=WS7()
call GroupEnumUnitsInRange(g,0,0,99999,Condition(function AC7))
call ForGroup(g,function S7G)
call WR7(g)
set g=null
return false
endfunction
function OG8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function S4G))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerAddCondition(t,Condition(function S8G))
set t=null
endfunction
function S9G takes nothing returns nothing
if UX4!=GetEnumUnit()then
call B67(UY4,GetEnumUnit(),1,UZ4*20+20)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl",GetEnumUnit(),"chest"))
endif
endfunction
function SDG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
local unit Y27=(LoadUnitHandle(L7,(I97),(45)))
local integer BC7=(LoadInteger(L7,(I97),(5)))
local group g
local integer QSG=GetTriggerEvalCount(t)
local unit SEG=null
call SetUnitX(BB7,GetUnitX(IH7))
call SetUnitY(BB7,GetUnitY(IH7))
call SetUnitX(Y27,GetUnitX(IH7))
call SetUnitY(Y27,GetUnitY(IH7))
if QSG==1 or QSG==100 or QSG==$C8 or QSG==300 then
set g=WS7()
if XH7(IH7)then
set SEG=CreateUnit(GetOwningPlayer(IH7),1697656899,GetUnitX(IH7),GetUnitY(IH7),0)
call UnitApplyTimedLife(SEG,1112820806,.2)
call IssueTargetOrderById(BB7,$D0097,SEG)
else
call IssueTargetOrderById(BB7,$D0097,IH7)
call B67(ZX7,IH7,1,BC7*20+20)
endif
call YS7("war3mapImported\\ThunderStorm_Groundeffect.mdx",IH7,"origin",.6)
set IN4=ZX7
set UY4=ZX7
set UX4=IH7
set UZ4=BC7
call GroupEnumUnitsInRange(g,GetUnitX(IH7),GetUnitY(IH7),240+25,Condition(function AJ7))
call ForGroup(g,function S9G)
call WR7(g)
if GetTriggerEvalCount(t)==300 then
call KillUnit(BB7)
call KillUnit(Y27)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
endif
set t=null
set ZX7=null
set IH7=null
set BB7=null
set g=null
set SEG=null
set Y27=null
return false
endfunction
function SFG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local integer BC7=GetUnitAbilityLevel(ZX7,1093751894)
local unit BB7=CreateUnit(GetOwningPlayer(IH7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
local unit Y27=CreateUnit(GetOwningPlayer(ZX7),1697657424,GetUnitX(IH7),GetUnitY(IH7),0)
call XF7(Y27,1097625443)
call XF7(BB7,1093752119)
call SetUnitAbilityLevel(BB7,1093752119,BC7)
call XF7(BB7,1097625443)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function SDG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveUnitHandle(L7,(I97),(19),(BB7))
call SaveUnitHandle(L7,(I97),(45),(Y27))
call SaveInteger(L7,(I97),(5),(BC7))
set ZX7=null
set IH7=null
set BB7=null
set t=null
set Y27=null
endfunction
function SGG takes nothing returns boolean
if GetSpellAbilityId()==1093751894 and WQ7(GetSpellTargetUnit())==false then
call SFG()
endif
return false
endfunction
function OH8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SGG))
set t=null
endfunction
function SHG takes nothing returns nothing
local integer SIG=U64
local unit IH7=GetEnumUnit()
local integer SJG=662-1+SIG
local real SKG=(LoadReal(L7,(GetHandleId(IH7)),(SJG)))
local real SMG=(TimerGetElapsed(W))
if SKG<SMG then
call SaveReal(L7,(GetHandleId(IH7)),(SJG),((SMG+2)*1.))
if IsUnitType(GetEnumUnit(),UNIT_TYPE_STRUCTURE)==false then
call B67(UM4,IH7,1,2+6*UL4)
endif
endif
set IH7=null
endfunction
function SNG takes nothing returns nothing
local integer SOG=U64
local unit IH7=GetEnumUnit()
local integer SPG=662-1+SOG
local real SQG=(LoadReal(L7,(GetHandleId(IH7)),(SPG)))
local real SRG=(TimerGetElapsed(W))
if SQG<SRG then
call SaveReal(L7,(GetHandleId(IH7)),(SPG),((SRG+2)*1.))
if IsUnitType(GetEnumUnit(),UNIT_TYPE_STRUCTURE)==false then
call B67(UM4,IH7,1,$F+$A*UL4)
endif
endif
set IH7=null
endfunction
function SSG takes nothing returns nothing
if IsUnitType(GetEnumUnit(),UNIT_TYPE_STRUCTURE)==false then
call B67(UM4,GetEnumUnit(),1,UC4)
endif
endfunction
function STG takes unit ZX7,unit SUG returns nothing
local group g=WS7()
set IN4=ZX7
set UC4=25*UL4
set UM4=ZX7
set UN4=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(SUG),GetUnitY(SUG),0)
call GroupEnumUnitsInRange(g,GetUnitX(SUG),GetUnitY(SUG),325,Condition(function AA7))
call ForGroup(g,function SSG)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl",GetUnitX(SUG),GetUnitY(SUG)))
call KillUnit(SUG)
call WR7(g)
set g=null
endfunction
function SVG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit SWG=(LoadUnitHandle(L7,(I97),(393)))
local unit SXG=(LoadUnitHandle(L7,(I97),(394)))
local unit SYG=(LoadUnitHandle(L7,(I97),(395)))
local unit SZG=(LoadUnitHandle(L7,(I97),(396)))
local unit SAG=(LoadUnitHandle(L7,(I97),(397)))
local real x
local real y
local real a
local real d=(LoadReal(L7,(I97),($8A)))
local real RXG=GetUnitX(ZX7)
local real RYG=GetUnitY(ZX7)
local real SBG
local integer QSG=GetTriggerEvalCount(t)
local real SCG
local group g
local integer S3G=0
local real B98=2.25
local real S6G
if XH7(SWG)==false then
set S3G=S3G+1
endif
if XH7(SXG)==false then
set S3G=S3G+1
endif
if XH7(SYG)==false then
set S3G=S3G+1
endif
if XH7(SZG)==false then
set S3G=S3G+1
endif
if XH7(SAG)==false then
set S3G=S3G+1
endif
if S3G==5 then
set B98=2.25
elseif S3G==4 then
set B98=2.1
elseif S3G==3 then
set B98=1.95
elseif S3G==2 then
set B98=1.8
elseif S3G==1 then
set B98=1.65
endif
set SBG=-1*360*.02/B98
set S6G=(LoadReal(L7,(I97),($89)))+SBG
call SaveReal(L7,(I97),($89),((S6G)*1.))
set UL4=GetUnitAbilityLevel(ZX7,1093751864)
set UM4=ZX7
if QSG==50 then
call ShowUnit(SXG,true)
call SaveBoolean(L7,(I97),(512),(true))
call XF7(SXG,1097625443)
endif
if QSG==100 then
call ShowUnit(SYG,true)
call SaveBoolean(L7,(I97),(513),(true))
call XF7(SYG,1097625443)
endif
if QSG==$96 then
call ShowUnit(SZG,true)
call SaveBoolean(L7,(I97),(514),(true))
call XF7(SZG,1097625443)
endif
if QSG==$C8 then
call ShowUnit(SAG,true)
call SaveBoolean(L7,(I97),(515),(true))
call XF7(SAG,1097625443)
endif
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093752115 then
if(LoadBoolean(L7,(I97),(655))) then
call SaveBoolean(L7,(I97),(655),(false))
call SaveBoolean(L7,(I97),(656),(false))
else
call SaveBoolean(L7,(I97),(655),(true))
call SaveBoolean(L7,(I97),(656),(false))
endif
elseif GetSpellAbilityId()==1093752114 then
if(LoadBoolean(L7,(I97),(656))) then
call SaveBoolean(L7,(I97),(655),(false))
call SaveBoolean(L7,(I97),(656),(false))
else
call SaveBoolean(L7,(I97),(655),(false))
call SaveBoolean(L7,(I97),(656),(true))
endif
endif
endif
if(LoadBoolean(L7,(I97),(655)))then
set d=RMaxBJ(d-5,100)
call SaveReal(L7,(I97),($8A),((d)*1.))
elseif(LoadBoolean(L7,(I97),(656)))then
set d=RMinBJ(d+5,875)
call SaveReal(L7,(I97),($8A),((d)*1.))
endif
if GetTriggerEventId()==EVENT_UNIT_DEATH or QSG==950 or(XH7(SWG)and XH7(SXG)and XH7(SYG)and XH7(SZG)and XH7(SAG))or(QSG>1 and GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093751864)then
if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT then
call UnitRemoveAbility(ZX7,1093752115)
call UnitRemoveAbility(ZX7,1093752114)
endif
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if XH7(SWG)==false then
call STG(ZX7,SWG)
endif
if XH7(SXG)==false then
call STG(ZX7,SXG)
endif
if XH7(SYG)==false then
call STG(ZX7,SYG)
endif
if XH7(SZG)==false then
call STG(ZX7,SZG)
endif
if XH7(SAG)==false then
call STG(ZX7,SAG)
endif
else
set g=WS7()
if XH7(SWG)==false and(LoadBoolean(L7,(I97),(511)))then
set SCG=360*5/5.
set a=SCG+S6G
set x=X17(RXG+d*Cos(a*bj_DEGTORAD))
set y=X07(RYG+d*Sin(a*bj_DEGTORAD))
call SetUnitX(SWG,x)
call SetUnitY(SWG,y)
set IN4=ZX7
call GroupEnumUnitsInRange(g,x,y,95,Condition(function A37))
if FirstOfGroup(g)!=null then
call STG(ZX7,SWG)
endif
call GroupClear(g)
set UO4=SWG
set U64=1
set UM4=ZX7
call GroupEnumUnitsInRange(g,x,y,$AF,Condition(function A67))
call ForGroup(g,function SHG)
call GroupClear(g)
endif
if XH7(SXG)==false and(LoadBoolean(L7,(I97),(512)))then
set SCG=360*4/5.
set a=SCG+S6G
set x=X17(RXG+d*Cos(a*bj_DEGTORAD))
set y=X07(RYG+d*Sin(a*bj_DEGTORAD))
call SetUnitX(SXG,x)
call SetUnitY(SXG,y)
set IN4=ZX7
call GroupEnumUnitsInRange(g,x,y,95,Condition(function A37))
if FirstOfGroup(g)!=null then
call STG(ZX7,SXG)
endif
call GroupClear(g)
set UO4=SXG
set U64=2
set UM4=ZX7
call GroupEnumUnitsInRange(g,x,y,$AF,Condition(function A67))
call ForGroup(g,function SHG)
call GroupClear(g)
endif
if XH7(SYG)==false and(LoadBoolean(L7,(I97),(513)))then
set SCG=360*3/5.
set a=SCG+S6G
set x=X17(RXG+d*Cos(a*bj_DEGTORAD))
set y=X07(RYG+d*Sin(a*bj_DEGTORAD))
call SetUnitX(SYG,x)
call SetUnitY(SYG,y)
set IN4=ZX7
call GroupEnumUnitsInRange(g,x,y,95,Condition(function A37))
if FirstOfGroup(g)!=null then
call STG(ZX7,SYG)
endif
call GroupClear(g)
set UO4=SYG
set U64=3
set UM4=ZX7
call GroupEnumUnitsInRange(g,x,y,$AF,Condition(function A67))
call ForGroup(g,function SHG)
call GroupClear(g)
endif
if XH7(SZG)==false and(LoadBoolean(L7,(I97),(514)))then
set SCG=360*2/5.
set a=SCG+S6G
set x=X17(RXG+d*Cos(a*bj_DEGTORAD))
set y=X07(RYG+d*Sin(a*bj_DEGTORAD))
call SetUnitX(SZG,x)
call SetUnitY(SZG,y)
set IN4=ZX7
call GroupEnumUnitsInRange(g,x,y,95,Condition(function A37))
if FirstOfGroup(g)!=null then
call STG(ZX7,SZG)
endif
call GroupClear(g)
set UO4=SZG
set U64=4
set UM4=ZX7
call GroupEnumUnitsInRange(g,x,y,$AF,Condition(function A67))
call ForGroup(g,function SHG)
call GroupClear(g)
endif
if XH7(SAG)==false and(LoadBoolean(L7,(I97),(515)))then
set SCG=360*1/5.
set a=SCG+S6G
set x=X17(RXG+d*Cos(a*bj_DEGTORAD))
set y=X07(RYG+d*Sin(a*bj_DEGTORAD))
call SetUnitX(SAG,x)
call SetUnitY(SAG,y)
set IN4=ZX7
call GroupEnumUnitsInRange(g,x,y,95,Condition(function A37))
if FirstOfGroup(g)!=null then
call STG(ZX7,SAG)
endif
call GroupClear(g)
set UO4=SAG
set U64=5
set UM4=ZX7
call GroupEnumUnitsInRange(g,x,y,$AF,Condition(function A67))
call ForGroup(g,function SHG)
call GroupClear(g)
endif
call WR7(g)
endif
set t=null
set ZX7=null
set SWG=null
set SXG=null
set SYG=null
set SZG=null
set SAG=null
set g=null
return false
endfunction
function SLG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit SWG
local unit SXG
local unit SYG
local unit SZG
local unit S1G
local real x
local real y
set x=GetUnitX(ZX7)+$FA*Cos(bj_DEGTORAD*360*5/5.*-1.)
set y=GetUnitY(ZX7)+$FA*Sin(bj_DEGTORAD*360*5/5.*-1.)
set SWG=CreateUnit(GetOwningPlayer(ZX7),1747993418,x,y,360*5/5.*-1.)
call XF7(SWG,1097625443)
set x=GetUnitX(ZX7)+$FA*Cos(bj_DEGTORAD*360*4/5.*-1.)
set y=GetUnitY(ZX7)+$FA*Sin(bj_DEGTORAD*360*4/5.*-1.)
set SXG=CreateUnit(GetOwningPlayer(ZX7),1747993418,x,y,360*4/5.*-1.)
call ShowUnit(SXG,false)
call SetUnitInvulnerable(SXG,true)
set x=GetUnitX(ZX7)+$FA*Cos(bj_DEGTORAD*360*3/5.*-1.)
set y=GetUnitY(ZX7)+$FA*Sin(bj_DEGTORAD*360*3/5.*-1.)
set SYG=CreateUnit(GetOwningPlayer(ZX7),1747993418,x,y,360*3/5.*-1.)
call ShowUnit(SYG,false)
call SetUnitInvulnerable(SXG,true)
set x=GetUnitX(ZX7)+$FA*Cos(bj_DEGTORAD*360*2/5.*-1.)
set y=GetUnitY(ZX7)+$FA*Sin(bj_DEGTORAD*360*2/5.*-1.)
set SZG=CreateUnit(GetOwningPlayer(ZX7),1747993418,x,y,360*2/5.*-1.)
call ShowUnit(SZG,false)
call SetUnitInvulnerable(SZG,true)
set x=GetUnitX(ZX7)+$FA*Cos(bj_DEGTORAD*360*1/5.*-1.)
set y=GetUnitY(ZX7)+$FA*Sin(bj_DEGTORAD*360*1/5.*-1.)
set S1G=CreateUnit(GetOwningPlayer(ZX7),1747993418,x,y,360*1/5.*-1.)
call ShowUnit(S1G,false)
call SetUnitInvulnerable(S1G,true)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(393),(SWG))
call SaveUnitHandle(L7,(I97),(394),(SXG))
call SaveUnitHandle(L7,(I97),(395),(SYG))
call SaveUnitHandle(L7,(I97),(396),(SZG))
call SaveUnitHandle(L7,(I97),(397),(S1G))
call SaveBoolean(L7,(I97),(511),(true))
call SaveBoolean(L7,(I97),(512),(false))
call SaveBoolean(L7,(I97),(513),(false))
call SaveBoolean(L7,(I97),(514),(false))
call SaveBoolean(L7,(I97),(515),(false))
call SaveBoolean(L7,(I97),(655),(false))
call SaveBoolean(L7,(I97),(656),(false))
call SaveReal(L7,(I97),($8A),(($96)*1.))
call XF7(ZX7,1093752114)
call XF7(ZX7,1093752115)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SVG))
set ZX7=null
set t=null
set SWG=null
set SXG=null
set SYG=null
set SZG=null
set S1G=null
endfunction
function S0G takes nothing returns boolean
if GetSpellAbilityId()==1093751864 then
call SLG()
endif
return false
endfunction
function OI8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function S0G))
set t=null
endfunction
function S5G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local integer BC7=(LoadInteger(L7,(I97),(5)))
call YN7(ZX7,GetEventDamage()*.05*BC7)
set t=null
set ZX7=null
return false
endfunction
function S2G takes unit u returns nothing
local trigger t
call UnitRemoveAbility(u,1093751891)
call UnitRemoveAbility(u,1093751890)
call UnitRemoveAbility(u,1093751892)
call UnitRemoveAbility(u,1093751888)
if(LoadBoolean(L7,(GetHandleId(u)),(708)))then
call SaveBoolean(L7,(GetHandleId(u)),(708),(false))
set t=(LoadTriggerHandle(L7,(GetHandleId(u)),(709)))
call FlushChildHashtable(L7,(GetHandleId(t)))
call OZ7(t)
call RemoveSavedHandle(L7,(GetHandleId(u)),(709))
set t=null
endif
endfunction
function S_G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
call S2G(ZX7)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
return false
endfunction
function T4G takes unit u,integer i returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call SaveUnitHandle(L7,(I97),(2),(u))
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function S_G))
if i==1 then
call XF7(u,1093751891)
call SetPlayerAbilityAvailable(GetOwningPlayer(u),1093751891,false)
elseif i==2 then
call XF7(u,1093751890)
call SetPlayerAbilityAvailable(GetOwningPlayer(u),1093751890,false)
elseif i==3 then
call XF7(u,1093751892)
call SetPlayerAbilityAvailable(GetOwningPlayer(u),1093751892,false)
elseif i==4 then
call XF7(u,1093751888)
call SetPlayerAbilityAvailable(GetOwningPlayer(u),1093751888,false)
endif
if(LoadBoolean(L7,(GetHandleId(u)),(708)))==false then
call SaveBoolean(L7,(GetHandleId(u)),(708),(true))
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function S5G))
call SaveTriggerHandle(L7,(GetHandleId(u)),(709),(t))
call SaveUnitHandle(L7,(GetHandleId(t)),(2),(u))
call SaveInteger(L7,(GetHandleId(t)),(5),(i))
endif
set t=null
endfunction
function T7G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local integer QSG=(LoadInteger(L7,(I97),(34)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093810257)
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local unit T8G=(LoadUnitHandle(L7,(GetHandleId(ZX7)),(652)))
local boolean T9G=false
local real TDG=.2*(GetUnitState(ZX7,UNIT_STATE_LIFE)*.035)
local real TEG=.2*(GetUnitState(ZX7,UNIT_STATE_MANA)*.035)
if GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if GetIssuedOrderId()==852589then
call T4G(ZX7,BC7)
elseif GetIssuedOrderId()==852590then
call S2G(ZX7)
endif
endif
if GetUnitAbilityLevel(ZX7,1093751891)>0 or GetUnitAbilityLevel(ZX7,1093751890)>0 or GetUnitAbilityLevel(ZX7,1093751892)>0 or GetUnitAbilityLevel(ZX7,1093751888)>0 then
set T9G=true
call SetUnitState(ZX7,UNIT_STATE_LIFE,RMaxBJ(GetUnitState(ZX7,UNIT_STATE_LIFE)-TDG,1))
call SetUnitState(ZX7,UNIT_STATE_MANA,RMaxBJ(GetUnitState(ZX7,UNIT_STATE_MANA)-TEG,1))
endif
if T8G==null then
if IH7!=null then
call S2G(IH7)
set IH7=null
call SaveUnitHandle(L7,(I97),(17),(IH7))
endif
else
if IH7==null then
set IH7=T8G
if T9G then
call SaveUnitHandle(L7,(I97),(17),(IH7))
call T4G(IH7,BC7)
else
call S2G(IH7)
endif
elseif IH7!=T8G then
call S2G(IH7)
if T9G then
set IH7=T8G
call SaveUnitHandle(L7,(I97),(17),(IH7))
call T4G(IH7,BC7)
endif
elseif T9G==false then
call S2G(IH7)
elseif IH7==T8G then
if T9G then
set IH7=T8G
call SaveUnitHandle(L7,(I97),(17),(IH7))
call T4G(IH7,BC7)
endif
endif
endif
set t=null
set ZX7=null
set IH7=null
set T8G=null
return false
endfunction
function TFG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local integer BC7=GetUnitAbilityLevel(ZX7,1093810257)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(null))
call TriggerRegisterTimerEvent(t,.2,true)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function T7G))
set ZX7=null
set t=null
endfunction
function TGG takes nothing returns boolean
if GetLearnedSkill()==1093810257 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093810257)==1 then
call TFG()
endif
return false
endfunction
function OJ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function TGG))
set t=null
endfunction
function THG takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),UA4)==false then
call GroupAddUnit(UA4,GetEnumUnit())
call BA7(UK4,GetEnumUnit(),.25+.5*U34)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl",GetEnumUnit(),"chest"))
endif
endfunction
function TIG takes unit ZX7,unit IH7,group QTG returns nothing
local real x1=GetUnitX(ZX7)
local real y1=GetUnitY(ZX7)
local real x2=GetUnitX(IH7)
local real y2=GetUnitY(IH7)
local real a=J77(x1,y1,x2,y2)*bj_DEGTORAD
local real x
local real y
local real d=KF7(x1,y1,x2,y2)
local group g=WS7()
local integer i=1
set UA4=QTG
set UK4=ZX7
set U34=GetUnitAbilityLevel(ZX7,1093751873)
set UB4=U34*50+50
loop
exitwhen i>8
set IN4=ZX7
set x=x1+d*i/8*Cos(a)
set y=y1+d*i/8*Sin(a)
call GroupEnumUnitsInRange(g,x,y,100,Condition(function AJ7))
call ForGroup(g,function THG)
call GroupClear(g)
set i=i+1
endloop
call WR7(g)
set g=null
endfunction
function TJG takes unit ZX7,unit IH7 returns boolean
return(OT7(ZX7,"Relocate|Active"))
endfunction
function TKG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local real d=KE7(ZX7,IH7)
local real a=J47(ZX7,IH7)*bj_DEGTORAD
local real x=GetUnitX(ZX7)+20*Cos(a)
local real y=GetUnitY(ZX7)+20*Sin(a)
local location l
if d<300 or d>$866 then
set l=YV8(x,y)
set x=GetLocationX(l)
set y=GetLocationY(l)
call SetUnitX(ZX7,X17(x))
call SetUnitY(ZX7,X17(y))
call Y67(x,y,350)
call RemoveLocation(l)
set l=null
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call SaveInteger(L7,(GetHandleId((ZX7))),((4295)),(2))
else
call SetUnitX(ZX7,x)
call SetUnitY(ZX7,y)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function TMG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local group QTG=(LoadGroupHandle(L7,(I97),($85)))
local lightning TNG=(LoadLightningHandle(L7,(I97),($C4)))
local integer WF8=GetTriggerEvalCount(t)
local real d=KE7(ZX7,IH7)
local real a=1
local real AD9=GetUnitState(ZX7,UNIT_STATE_LIFE)
local real D9D=GetUnitState(ZX7,UNIT_STATE_MANA)
local real TOG=(LoadReal(L7,(I97),(670)))
local real TPG=(LoadReal(L7,(I97),(667)))
local real TQG
local real TRG
local real TSG=1.5
if IH7==null or ZX7==null or XH7(ZX7) or(WF8>600 and TJG(ZX7,IH7)==false and((LoadInteger(L7,(GetHandleId((ZX7))),((4295))))==1)==false)or(d>925 and((LoadInteger(L7,(GetHandleId((ZX7))),((4295))))==1)==false)or GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093751893)then
call WR7(QTG)
call DestroyLightning(TNG)
call UnitRemoveAbility(IH7,1093751880)
call UnitRemoveAbility(IH7,1093751881)
call UnitRemoveAbility(IH7,1093751879)
call UnitRemoveAbility(IH7,1093751882)
call UnitRemoveAbility(IH7,1110459464)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call UnitRemoveAbility(ZX7,1093751880)
call UnitRemoveAbility(ZX7,1093751881)
call UnitRemoveAbility(ZX7,1093751879)
call UnitRemoveAbility(ZX7,1093751882)
call UnitRemoveAbility(ZX7,1110459464)
call UnitRemoveAbility(ZX7,1093751893)
if(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==0 or(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==1093751873 then
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093751873,true)
endif
call RemoveSavedHandle(L7,GetHandleId(ZX7),652)
call RemoveSavedHandle(L7,GetHandleId(IH7),StringHash("AI|TetherSource"))
else
set TQG=AD9/GetUnitState(ZX7,UNIT_STATE_MAX_LIFE)
set TRG=D9D/GetUnitState(ZX7,UNIT_STATE_MAX_MANA)
if TQG-TOG>0 and(TQG-TOG)<.5 then
if OT7(ZX7,"ArmletOfMordiganState")==false then
call SetUnitState(IH7,UNIT_STATE_LIFE,GetUnitState(IH7,UNIT_STATE_LIFE)+TSG*(TQG-TOG)*GetUnitState(ZX7,UNIT_STATE_MAX_LIFE))
endif
endif
if TRG-TPG>0 and(TQG-TOG)<.5 then
call SetUnitState(IH7,UNIT_STATE_MANA,GetUnitState(IH7,UNIT_STATE_MANA)+TSG*(TRG-TPG)*GetUnitState(ZX7,UNIT_STATE_MAX_MANA))
endif
call SaveReal(L7,(I97),(670),((GetUnitState(ZX7,UNIT_STATE_LIFE)/GetUnitState(ZX7,UNIT_STATE_MAX_LIFE))*1.))
call SaveReal(L7,(I97),(667),((GetUnitState(ZX7,UNIT_STATE_MANA)/GetUnitState(ZX7,UNIT_STATE_MAX_MANA))*1.))
call MoveLightning(TNG,true,GetUnitX(ZX7),GetUnitY(ZX7),GetUnitX(IH7),GetUnitY(IH7))
call TIG(ZX7,IH7,QTG)
if IsUnitVisible(ZX7,GetLocalPlayer())==false and IsUnitVisible(IH7,GetLocalPlayer())==false then
set a=0
endif
if WG7(GetLocalPlayer())then
set a=1
endif
if d<700 or((LoadInteger(L7,(GetHandleId((ZX7))),((4295))))==1) then
call SetLightningColor(TNG,.0,1.,1.,a)
else
call SetLightningColor(TNG,.8,.7,.4,a)
endif
endif
set t=null
set ZX7=null
set IH7=null
set QTG=null
set TNG=null
return false
endfunction
function TTG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local lightning TNG=AddLightning("CHIM",true,GetUnitX(ZX7),GetUnitY(ZX7),GetUnitX(IH7),GetUnitY(IH7))
local integer BC7=GetUnitAbilityLevel(ZX7,1093751873)
local integer TUG
local real d=KE7(ZX7,IH7)
local real a=J47(ZX7,IH7)*bj_DEGTORAD
local location l
local real x
local real y
call SetLightningColor(TNG,.0,1.,1.,1)
call XF7(ZX7,1093751893)
if BC7==1 then
set TUG=1093751880
elseif BC7==2 then
set TUG=1093751881
elseif BC7==3 then
set TUG=1093751879
elseif BC7==4 then
set TUG=1093751882
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093751873,false)
call XF7(ZX7,TUG)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),TUG,false)
call XF7(IH7,TUG)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),TUG,false)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveGroupHandle(L7,(I97),($85),(WS7()))
call SaveLightningHandle(L7,(I97),($C4),(TNG))
call SaveReal(L7,(I97),(670),((GetUnitState(ZX7,UNIT_STATE_LIFE)/GetUnitState(ZX7,UNIT_STATE_MAX_LIFE))*1.))
call SaveReal(L7,(I97),(667),((GetUnitState(ZX7,UNIT_STATE_MANA)/GetUnitState(ZX7,UNIT_STATE_MAX_MANA))*1.))
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TMG))
call SaveUnitHandle(L7,(GetHandleId(ZX7)),(652),(IH7))
if IsUnitType(IH7,UNIT_TYPE_HERO)then
call NT7((GetHandleId(IH7)),"AI|TetherSource",ZX7)
endif
if d>700 then
set t=CreateTrigger()
set I97=GetHandleId(t)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl",ZX7,"chest")))
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function TKG))
call SaveInteger(L7,(GetHandleId((ZX7))),((4295)),(1))
endif
set ZX7=null
set t=null
endfunction
function TVG takes nothing returns boolean
if GetSpellAbilityId()==1093751873 then
call TTG()
endif
return false
endfunction
function OK8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TVG))
set t=null
endfunction
function TWG takes unit ZX7,real x,real y returns boolean
local boolean G9D=false
local player p=GetOwningPlayer(ZX7)
local unit BB7=CreateUnit(p,1697657425,GetUnitX(ZX7),GetUnitY(ZX7),0)
call XF7(BB7,1093752372)
if IssuePointOrderById(BB7,$D022D,x,y) then
call KillUnit(BB7)
set BB7=null
return true
else
call KillUnit(BB7)
set BB7=null
return false
endif
endfunction
function TXG takes string TYG,unit IH7 returns nothing
local texttag tt=CreateTextTag()
call SetTextTagText(tt,TYG,.033)
call SetTextTagPosUnit(tt,IH7,64)
call SetTextTagColor(tt,0,50,$FF,$FF)
call SetTextTagVelocity(tt,0,.0355)
call SetTextTagFadepoint(tt,.15)
call SetTextTagPermanent(tt,false)
call SetTextTagLifespan(tt,.85)
call SetTextTagVisibility(tt,true)
set tt=null
endfunction
function TZG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local integer QSG=GetTriggerEvalCount(t)
if XH7(ZX7)==false and QSG<$C then
call TXG(I2S($C-QSG),ZX7)
endif
if QSG==$C then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
return false
endfunction
function TAG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(GetHandleId(ZX7)),(652)))
local real R1G=(LoadReal(L7,(I97),(47)))
local real R0G=(LoadReal(L7,(I97),(48)))
local real RXG=(LoadReal(L7,(I97),($BD)))
local real RYG=(LoadReal(L7,(I97),($BE)))
local fogmodifier RJG=(LoadFogModifierHandle(L7,(I97),(42)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call OX7(ZX7,"Relocate|Active")
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FogModifierStop(RJG)
call DestroyFogModifier(RJG)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
call Y67(R1G,R0G,$FA)
call Y67(RXG,RYG,$FA)
if GetTriggerEvalCount(t)==1 then
if XH7(ZX7)==false then
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(ZX7),GetUnitY(ZX7)))
call SetUnitPosition(ZX7,R1G,R0G)
call PanCameraToTimedForPlayer(GetOwningPlayer(ZX7),R1G,R0G,0)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(ZX7),GetUnitY(ZX7)))
call UQ7(ZX7)
endif
if IH7!=null and XH7(IH7)==false and GetOwningPlayer(IH7)!=Z7[0]and GetOwningPlayer(IH7)!=A7[0]and((OO7(GetHandleId(GetOwningPlayer((IH7))),"DisableHelp"))==false)then
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(IH7),GetUnitY(IH7)))
call O37(IH7,"4402",1)
call SetUnitPosition(IH7,R1G,R0G)
if IsUnitType(IH7,UNIT_TYPE_HERO) and XH7(IH7)==false then
call PanCameraToTimedForPlayer(GetOwningPlayer(IH7),R1G,R0G,0)
endif
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(IH7),GetUnitY(IH7)))
call UQ7(IH7)
endif
else
if XH7(ZX7)==false then
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(ZX7),GetUnitY(ZX7)))
call SetUnitPosition(ZX7,RXG,RYG)
call PanCameraToTimedForPlayer(GetOwningPlayer(ZX7),RXG,RYG,0)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(ZX7),GetUnitY(ZX7)))
call UQ7(ZX7)
endif
if IH7!=null and XH7(IH7)==false and GetOwningPlayer(IH7)!=Z7[0]and GetOwningPlayer(IH7)!=A7[0]and((OO7(GetHandleId(GetOwningPlayer((IH7))),"DisableHelp"))==false)then
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(IH7),GetUnitY(IH7)))
call O37(IH7,"4402",1)
call SetUnitPosition(IH7,RXG,RYG)
if IsUnitType(IH7,UNIT_TYPE_HERO) and XH7(IH7)==false then
call PanCameraToTimedForPlayer(GetOwningPlayer(IH7),RXG,RYG,0)
endif
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(IH7),GetUnitY(IH7)))
call UQ7(IH7)
endif
call OX7(ZX7,"Relocate|Active")
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FogModifierStop(RJG)
call DestroyFogModifier(RJG)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
endif
set t=null
set ZX7=null
set IH7=null
set RJG=null
return false
endfunction
function TBG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real R1G=(LoadReal(L7,(I97),(47)))
local real R0G=(LoadReal(L7,(I97),(48)))
local fogmodifier RJG
local integer BC7=GetUnitAbilityLevel(ZX7,1093751874)
if YM8(ZX7)or AF7(ZX7)or XH7(ZX7)then
call OX7(ZX7,"Relocate|Active")
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif GetTriggerEvalCount(t)==(2.75-.25*BC7)/.05 then
set RJG=CreateFogModifierRadius(GetOwningPlayer(ZX7),FOG_OF_WAR_VISIBLE,GetUnitX(ZX7),GetUnitY(ZX7),400,true,true)
call FogModifierStart(RJG)
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=CreateTrigger()
set I97=GetHandleId(t)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call TriggerRegisterTimerEvent(t,.01,false)
call TriggerRegisterTimerEvent(t,$C,false)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function TAG))
call SaveReal(L7,(I97),($BD),((GetUnitX(ZX7))*1.))
call SaveReal(L7,(I97),($BE),((GetUnitY(ZX7))*1.))
call SaveReal(L7,(I97),(47),((R1G)*1.))
call SaveReal(L7,(I97),(48),((R0G)*1.))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffect("war3mapImported\\EarthlyEminence.mdl",GetUnitX(ZX7),GetUnitY(ZX7))))
call SaveFogModifierHandle(L7,(I97),(42),(RJG))
set t=CreateTrigger()
set I97=GetHandleId(t)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TZG))
endif
set ZX7=null
set t=null
set RJG=null
return false
endfunction
function TCG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local unit IH7=(LoadUnitHandle(L7,(GetHandleId(ZX7)),(652)))
local integer id=GetPlayerId(GetOwningPlayer(ZX7))
local integer BC7=GetUnitAbilityLevel(ZX7,1093751874)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",ZX7,"chest"))
if IH7!=null then
endif
call PingMinimapEx(x,y,4.,$FF,0,0,false)
call Y57(Z7[1],2.5,x,y,300)
call Y57(A7[1],2.5,x,y,300)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function TBG))
call SaveReal(L7,(I97),(47),((x)*1.))
call SaveReal(L7,(I97),(48),((y)*1.))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffect("war3mapImported\\EarthlyEminence.mdl",x,y)))
call OV7(ZX7,"Relocate|Active")
set ZX7=null
set t=null
endfunction
function T3G takes nothing returns boolean
if GetSpellAbilityId()==1093751874 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
call TCG()
else
if TWG(GetTriggerUnit(),GetSpellTargetX(),GetSpellTargetY())==false then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848658776))
else
if TV7(GetOwningPlayer(GetTriggerUnit()))then
if IsPointInRegion(U54,GetSpellTargetX(),GetSpellTargetY()) then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652633))
endif
else
if IsPointInRegion(U14,GetSpellTargetX(),GetSpellTargetY()) then
call KR7(GetTriggerUnit())
call X37(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652633))
endif
endif
endif
endif
endif
return false
endfunction
function OM8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function T3G))
set U14=CreateRegion()
call RegionAddRect(U14,HD)
call RegionAddRect(U14,OD)
set U54=CreateRegion()
call RegionAddRect(U54,GD)
call RegionAddRect(U54,PD)
set t=null
endfunction
function T6G takes unit ZX7,unit U2E,real TLG,real T1G,real a2 returns nothing
local integer i=0
local real T0G
local real T5G=GetUnitY(U2E)
local real a
local real x
local real y
local real T2G
if U2E!=null then
set T0G=GetUnitX(U2E)
set T5G=GetUnitY(U2E)
set a=J77(TLG,T1G,T0G,T5G)
else
set a=a2
set T0G=TLG+50*Cos(a*bj_DEGTORAD)
set T5G=T1G+50*Sin(a*bj_DEGTORAD)
endif
set T2G=a
set x=T0G+$C8*Cos(T2G*bj_DEGTORAD)
set y=T5G+$C8*Sin(T2G*bj_DEGTORAD)
call ZN7(CreateDestructable(1110454326,x,y,-1*T2G,.6,1),5)
call Y67(x,y,300)
set T2G=a-40
set x=T0G+$C8*Cos(T2G*bj_DEGTORAD)
set y=T5G+$C8*Sin(T2G*bj_DEGTORAD)
call ZN7(CreateDestructable(1110454326,x,y,-1*T2G,.6,1),5)
call Y67(x,y,300)
set T2G=a-80
set x=T0G+$C8*Cos(T2G*bj_DEGTORAD)
set y=T5G+$C8*Sin(T2G*bj_DEGTORAD)
call ZN7(CreateDestructable(1110454326,x,y,-1*T2G,.6,1),5)
call Y67(x,y,300)
set T2G=a+40
set x=T0G+$C8*Cos(T2G*bj_DEGTORAD)
set y=T5G+$C8*Sin(T2G*bj_DEGTORAD)
call ZN7(CreateDestructable(1110454326,x,y,-1*T2G,.6,1),5)
call Y67(x,y,300)
set T2G=a+80
set x=T0G+$C8*Cos(T2G*bj_DEGTORAD)
set y=T5G+$C8*Sin(T2G*bj_DEGTORAD)
call ZN7(CreateDestructable(1110454326,x,y,-1*T2G,.6,1),5)
call Y67(x,y,300)
if U2E!=null then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\ChainFreeze_F6.mdx",U2E,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",U2E,"chest"))
call B67(XJ4,U2E,1,XM4*70)
endif
endfunction
function T_G takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),XN4)==false then
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==false then
call GroupAddUnit(XN4,GetEnumUnit())
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\ChainFreeze_F6.mdx",GetEnumUnit(),"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",GetEnumUnit(),"chest"))
call B67(XJ4,GetEnumUnit(),1,XM4*70)
else
set XK4=GetEnumUnit()
endif
endif
endfunction
function U4G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer ZK7=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(ZK7),(2)))
local unit U2E=(LoadUnitHandle(L7,(ZK7),(17)))
local unit U7G=(LoadUnitHandle(L7,(ZK7),(45)))
local real U8G=(LoadReal(L7,(ZK7),(683)))
local real U9G=(LoadReal(L7,(ZK7),(684)))
local real TLG=GetUnitX(U7G)
local real T1G=GetUnitY(U7G)
local real UDG=Atan2(U9G-T1G,U8G-TLG)
local real UEG=TLG+18*Cos(UDG)
local real UFG=T1G+18*Sin(UDG)
local group UGG=(LoadGroupHandle(L7,(ZK7),($85)))
local integer R1G=GetUnitAbilityLevel(ZX7,1093753167)
local group g=WS7()
set IN4=ZX7
set XJ4=ZX7
set XN4=UGG
set XM4=R1G
set XK4=null
call GroupEnumUnitsInRange(g,UEG,UFG,$E1,Condition(function AJ7))
call ForGroup(g,function T_G)
call WR7(g)
call SetUnitPosition(U7G,UEG,UFG)
if KF7(UEG,UFG,U8G,U9G)<40 or XK4!=null then
call Y67(UEG,UFG,300)
call KillUnit(U7G)
call ShowUnit(U7G,false)
call SetUnitPathing(U7G,true)
if XK4!=null then
call T6G(ZX7,XK4,UEG,UFG,UDG*bj_RADTODEG)
else
call T6G(ZX7,null,UEG,UFG,UDG*bj_RADTODEG)
endif
call WR7(UGG)
call FlushChildHashtable(L7,(ZK7))
call OZ7(t)
endif
set t=null
set U7G=null
set UGG=null
set g=null
return false
endfunction
function UHG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer ZK7=GetHandleId(t)
local unit U7G=CreateUnit(GetOwningPlayer(ZX7),1747993427,GetUnitX(ZX7),GetUnitY(ZX7),0)
local real TLG=GetUnitX(ZX7)
local real T1G=GetUnitY(ZX7)
local real T0G=GetSpellTargetX()
local real T5G=GetSpellTargetY()
local real UDG=Atan2(T5G-T1G,T0G-TLG)
local real U8G=X17(TLG+$640*Cos(UDG))
local real U9G=X07(T1G+$640*Sin(UDG))
call SetUnitFacing(U7G,UDG*bj_RADTODEG)
call SetUnitPathing(U7G,false)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function U4G))
call SaveUnitHandle(L7,(ZK7),(2),(ZX7))
call SaveReal(L7,(ZK7),(683),((U8G)*1.))
call SaveReal(L7,(ZK7),(684),((U9G)*1.))
call SaveReal(L7,(ZK7),($D),((UDG)*1.))
call SaveUnitHandle(L7,(ZK7),(45),(U7G))
call SaveGroupHandle(L7,(ZK7),($85),(WS7()))
set ZX7=null
set U7G=null
set t=null
endfunction
function UIG takes nothing returns boolean
if GetSpellAbilityId()==1093753167 then
call UHG()
endif
return false
endfunction
function ON8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function UIG))
set t=null
endfunction
function UJG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093753169)
local integer WF8=GetTriggerEvalCount(t)
local real y=(WF8-50)*(WF8-50)/4.3
local real VW9
if BC7==1 then
set VW9=75
elseif BC7==2 then
set VW9=$96
else
set VW9=$E1
endif
if WF8==1 then
call IssueTargetOrderById(ZX7,$D000F,IH7)
endif
if WF8<50 then
if KCD(IH7)==false then
call SetUnitFlyHeight(IH7,700*WF8/50,0)
endif
elseif WF8<100 then
if KCD(IH7)==false then
call SetUnitFlyHeight(IH7,700-700*(WF8-50)/50,0)
endif
else
if KCD(IH7)==false then
call SetUnitFlyHeight(IH7,GetUnitDefaultFlyHeight(IH7),0)
endif
call DestroyEffect((LoadEffectHandle(L7,(I97),($AF))))
call NM7(I97)
call OZ7(t)
call Z57(IH7,1093808180,1,1+BC7,1110459481)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093808180,false)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function UKG takes unit ZX7,unit IH7 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local integer BC7=GetUnitAbilityLevel(ZX7,1093753169)
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
call YW7("WALRUS PUNCH !!",3.5,ZX7,.03,$FF,0,0,$FF)
call Y17(WZ4,GetUnitX(IH7),GetUnitY(IH7))
call XF7(BB7,1093752144)
call IssueTargetOrderById(BB7,$D007F,IH7)
if KCD(IH7)==false then
call XF7(IH7,1097691750)
call UnitRemoveAbility(IH7,1097691750)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",IH7,"overhead"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",IH7,"head"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",IH7,"left,hand"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",IH7,"right,hand"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",IH7,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",IH7,"origin"))
call TriggerRegisterTimerEvent(t,.01,true)
call TriggerAddCondition(t,Condition(function UJG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveEffectHandle(L7,(I97),($AF),(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl",IH7,"chest")))
set t=null
endfunction
function UMG takes nothing returns boolean
local trigger t2=GetTriggeringTrigger()
local integer IED=GetHandleId(t2)
local unit ZX7=(LoadUnitHandle(L7,(IED),(2)))
local unit IH7=(LoadUnitHandle(L7,(IED),(17)))
local integer T_7=GetHandleId(ZX7)
local trigger t=OE7(T_7,"WalrusPunch|Clear")
if GetTriggerEvalCount(t2)==1 then
call IssueTargetOrderById(ZX7,$D000F,IH7)
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==ZX7 and GetEventDamage()>30 then
if IH7==O77(T_7,"WalrusPunch|Target")then
call Z67(ZX7,1093752136,1,.1)
call Z67(ZX7,1093752137,1,.1)
call UKG(ZX7,IH7)
if t!=null then
call TriggerEvaluate(t)
endif
endif
call OZ7(t2)
call NM7(IED)
endif
else
call UnitRemoveAbility(ZX7,1093752136)
call UnitRemoveAbility(ZX7,1093752137)
call NM7(IED)
call OZ7(t2)
endif
set t2=null
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function UNG takes nothing returns boolean
local unit ZX7=GetAttacker()
local unit IH7=GetTriggerUnit()
local integer T_7=GetHandleId(ZX7)
local trigger t=OE7(T_7,"WalrusPunch|Clear")
local trigger t2
local integer IED
if OT7(ZX7,"WalrusPunch|Active") and t!=null and IH7!=O77(T_7,"WalrusPunch|Target")and IsUnitAlly(IH7,GetOwningPlayer(ZX7))==false and IsUnitType(IH7,UNIT_TYPE_STRUCTURE)==false then
call NT7(T_7,"WalrusPunch|Target",IH7)
call UnitRemoveAbility(ZX7,1093752136)
call UnitRemoveAbility(ZX7,1093752137)
if GetUnitState(IH7,UNIT_STATE_LIFE)/GetUnitState(IH7,UNIT_STATE_MAX_LIFE)>.5 then
call XF7(ZX7,1093752136)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093752136,false)
else
call XF7(ZX7,1093752137)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093752137,false)
endif
call IssueImmediateOrderById(ZX7,$D0004)
set t2=CreateTrigger()
set IED=GetHandleId(t2)
call TriggerRegisterTimerEvent(t2,.0,false)
call TriggerRegisterTimerEvent(t2,2.,false)
call TriggerRegisterUnitEvent(t2,IH7,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t2,Condition(function UMG))
call SaveUnitHandle(L7,(IED),(2),(ZX7))
call SaveUnitHandle(L7,(IED),(17),(IH7))
endif
set ZX7=null
set IH7=null
return false
endfunction
function UOG takes nothing returns boolean
if OT7(GetAttacker(),"WalrusPunch|Active") then
call UNG()
endif
return false
endfunction
function UPG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local integer T_7=GetHandleId(ZX7)
call OX7(ZX7,"WalrusPunch|Active")
call DestroyEffect(OG7(T_7,"WalrusPunch|Visual"))
call UnitRemoveAbility(ZX7,1093752136)
call UnitRemoveAbility(ZX7,1093752137)
call NN7(T_7,"WalrusPunch|Visual")
call NN7(T_7,"WalrusPunch|Target")
call NN7(T_7,"WalrusPunch|Clear")
call NM7(I97)
call OZ7(t)
set ZX7=null
set t=null
return false
endfunction
function UQG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local integer T_7=GetHandleId(ZX7)
call TriggerRegisterTimerEvent(t,10.,false)
call TriggerAddCondition(t,Condition(function UPG))
call OV7(ZX7,"WalrusPunch|Active")
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call NT7(T_7,"WalrusPunch|Target",ZX7)
call NU7(T_7,"WalrusPunch|Visual",(AddSpecialEffectTarget("war3mapImported\\WalrusPunchWeaponFX.mdx",ZX7,"weapon")))
call NV7(T_7,"WalrusPunch|Clear",t)
set t=null
set ZX7=null
endfunction
function URG takes nothing returns boolean
if GetSpellAbilityId()==1093753169 then
call UQG()
endif
return false
endfunction
function OO8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function URG))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function UOG))
set t=null
endfunction
function USG takes nothing returns nothing
call ShowUnit(GetEnumUnit(),true)
call UnitRemoveAbility(GetEnumUnit(),1093678162)
call SetUnitInvulnerable(GetEnumUnit(),false)
call PauseUnit(GetEnumUnit(),false)
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO) then
call SetUnitPosition(GetEnumUnit(),XT4,XU4)
call SelectUnitForPlayerSingle(GetEnumUnit(),GetOwningPlayer(GetEnumUnit()))
else
call SetUnitX(GetEnumUnit(),XT4)
call SetUnitY(GetEnumUnit(),XU4)
endif
if GetEnumUnit()==XP4 and XQ4!=null then
call IssueTargetOrderById(XP4,$D000F,XQ4)
endif
call DestroyEffect(AddSpecialEffect("war3mapImported\\ChainFreeze_F6.mdx",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))
endfunction
function UTG takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),XO4)==false then
call GroupAddUnit(XO4,GetEnumUnit())
if GetEnumUnit()==XQ4 then
call B67(XP4,GetEnumUnit(),1,40*XS4+40)
call SetUnitAbilityLevel(XR4,1093687350,BY7(.25*XS4+.25))
else
call B67(XP4,GetEnumUnit(),1,40*XS4)
call SetUnitAbilityLevel(XR4,1093687350,BY7(.25*XS4))
endif
call SetUnitX(XR4,GetUnitX(GetEnumUnit()))
call SetUnitY(XR4,GetUnitY(GetEnumUnit()))
call IssueTargetOrderById(XR4,$D007F,GetEnumUnit())
endif
endfunction
function UUG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local unit Y27=(LoadUnitHandle(L7,(I97),(45)))
local real Y_7=GetUnitX(IH7)
local real Z47=GetUnitY(IH7)
local real r=(LoadReal(L7,(I97),(671)))
local real a=J77(GetUnitX(Y27),GetUnitY(Y27),Y_7,Z47)*bj_DEGTORAD
local real x=GetUnitX(Y27)+r*Cos(a)
local real y=GetUnitY(Y27)+r*Sin(a)
local group UGG=(LoadGroupHandle(L7,(I97),($85)))
local group g
local integer WF8=GetTriggerEvalCount(t)
local real VWE=RMinBJ(2.5+(WF8*.02),$A)
local real UVG=$E1+40*(WF8*.02)
set XS4=GetUnitAbilityLevel(ZX7,1093751607)
set IN4=ZX7
set XO4=UGG
set XP4=ZX7
set XQ4=IH7
set XR4=(LoadUnitHandle(L7,(I97),(19)))
call SetUnitX(Y27,x)
call SetUnitY(Y27,y)
call SetUnitFacing(Y27,a*bj_RADTODEG-$B4)
call SetUnitScale(Y27,VWE,VWE,VWE)
if KF7(x,y,Y_7,Z47)<r*2 or WF8==$96 then
call Y67(x,y,300)
set g=WS7()
call GroupEnumUnitsInRange(g,x,y,UVG,Condition(function AJ7))
call ForGroup(g,function UTG)
call WR7(g)
set g=null
set XT4=x
set XU4=y
call ForGroup((LoadGroupHandle(L7,(I97),(22))),function USG)
call WR7((LoadGroupHandle(L7,(I97),(22))))
call WR7(UGG)
call KillUnit(Y27)
call NM7(I97)
call OZ7(t)
else
if ModuloInteger(GetTriggerEvalCount(t),5)==0 then
call Y67(x,y,300)
set g=WS7()
call GroupEnumUnitsInRange(g,x,y,UVG,Condition(function AJ7))
call ForGroup(g,function UTG)
call WR7(g)
set g=null
endif
endif
set t=null
set ZX7=null
set Y27=null
set UGG=null
return false
endfunction
function UWG takes nothing returns nothing
call DestroyEffect(AddSpecialEffect("war3mapImported\\ChainFreeze_F6.mdx",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))
call ShowUnit(GetEnumUnit(),false)
call XF7(GetEnumUnit(),1093678162)
call SetUnitInvulnerable(GetEnumUnit(),true)
call PauseUnit(GetEnumUnit(),true)
if XP4!=GetEnumUnit()then
set XW4=XW4+1
endif
endfunction
function UXG takes nothing returns boolean
return(((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))or(GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit()))))and((LoadBoolean(L7,(GetHandleId(GetOwningPlayer(GetFilterUnit()))),($8B)))==false or XP4==GetFilterUnit()))!=null
endfunction
function UYG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit U2E=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer ZK7=GetHandleId(t)
local real TLG=GetUnitX(ZX7)
local real T1G=GetUnitY(ZX7)
local real T0G=GetUnitX(U2E)
local real T5G=GetUnitY(U2E)
local real a=J77(TLG,T1G,T0G,T5G)*bj_DEGTORAD
local unit UZG=CreateUnit(GetOwningPlayer(ZX7),1747993395,GetUnitX(ZX7),GetUnitY(ZX7),GetUnitFacing(ZX7))
local group g=WS7()
set XV4=0
set XW4=1
set XP4=ZX7
set XV4=1.5*RMaxBJ($85,GetUnitMoveSpeed(ZX7))
call GroupEnumUnitsInRange(g,TLG,T1G,$FF,Condition(function UXG))
call ForGroup(g,function UWG)
set XR4=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(ZX7),GetUnitY(ZX7),0)
call XF7(XR4,1093687350)
call SetUnitTimeScale(UZG,2)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function UUG))
call SaveUnitHandle(L7,(ZK7),(2),(ZX7))
call SaveUnitHandle(L7,(ZK7),(17),(U2E))
call SaveUnitHandle(L7,(ZK7),(19),(XR4))
call SaveUnitHandle(L7,(ZK7),(45),(UZG))
call SaveReal(L7,(ZK7),($89),((a)*1.))
call SaveReal(L7,(ZK7),(671),((XV4*.02)*1.))
call SaveReal(L7,(ZK7),(47),((T0G)*1.))
call SaveReal(L7,(ZK7),(48),((T5G)*1.))
call SaveGroupHandle(L7,(ZK7),(22),(g))
call SaveGroupHandle(L7,(ZK7),($85),(WS7()))
set t=null
set ZX7=null
set UZG=null
set g=null
endfunction
function UAG takes nothing returns boolean
if GetSpellAbilityId()==1093751607 then
call UYG()
endif
return false
endfunction
function OP8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function UAG))
call X_7(1093687350)
set t=null
endfunction
function UBG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer ZK7=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(ZK7),(2)))
local unit U2E=(LoadUnitHandle(L7,(ZK7),(17)))
call NM7(ZK7)
call OZ7(t)
call IssueTargetOrderById(ZX7,$D0012,U2E)
set t=null
set ZX7=null
set U2E=null
return false
endfunction
function UCG takes nothing returns nothing
local unit ZX7=GetSummonedUnit()
local unit U2E=GetSummoningUnit()
local trigger t=CreateTrigger()
local integer ZK7=GetHandleId(t)
call TriggerAddCondition(t,Condition(function UBG))
call TriggerRegisterTimerEvent(t,.2,false)
call SaveUnitHandle(L7,(ZK7),(2),(ZX7))
call SaveUnitHandle(L7,(ZK7),(17),(U2E))
set t=null
set ZX7=null
set U2E=null
endfunction
function U3G takes nothing returns boolean
local integer id=GetUnitTypeId(GetSummonedUnit())
if id==1865429322 or id==1865429323 or id==1865429324 or id==1865429325 then
call UCG()
endif
return false
endfunction
function OQ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function U3G))
endfunction
function U6G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
set YM4=GetEventDamageSource()
else
call SetUnitX(ZX7,GetUnitX(IH7))
call SetUnitY(ZX7,GetUnitY(IH7))
call SetUnitX(BB7,GetUnitX(IH7))
call SetUnitY(BB7,GetUnitY(IH7))
endif
set t=null
set ZX7=null
set IH7=null
set BB7=null
return false
endfunction
function ULG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
set YM4=GetEventDamageSource()
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function U1G takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetSummoningUnit()
local unit IH7=GetSummonedUnit()
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(ZX7),GetUnitY(ZX7),0)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function U6G))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveUnitHandle(L7,(I97),(19),(BB7))
if MR7(ZX7,1227899192)then
call UnitAddAbility(BB7,1093678153)
endif
set t=null
set ZX7=null
set IH7=null
set BB7=null
endfunction
function U0G takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetSummoningUnit()
local unit IH7=GetSummonedUnit()
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function ULG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
set t=null
set ZX7=null
set IH7=null
endfunction
function U5G takes nothing returns boolean
local integer U57=GetUnitTypeId(GetSummonedUnit())
if U57==1852862003 or U57==1852862006 or U57==1848652080 or U57==1848657754 then
call U1G()
elseif VS7(U57)then
call U0G()
endif
return false
endfunction
function OS8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function U5G))
set t=null
endfunction
function U2G takes nothing returns nothing
call BA7(ZG4,GetEnumUnit(),.75+.25*GetUnitAbilityLevel(ZG4,1093809990))
endfunction
function U_G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local real a=(LoadReal(L7,(I97),($89)))
local real Y_7=(LoadReal(L7,(I97),(47)))
local real Z47=(LoadReal(L7,(I97),(48)))
local real AQ9=(LoadReal(L7,(I97),($BD)))
local real AR9=(LoadReal(L7,(I97),($BE)))
local group g
local real d=KF7(AQ9,AR9,Y_7,Z47)/25
local location l
local integer WF8=GetTriggerEvalCount(t)
local real x=AQ9+d*WF8*Cos(a)
local real y=AR9+d*WF8*Sin(a)
call SetUnitX(IH7,X17(x))
call SetUnitY(IH7,X07(y))
if KCD(IH7)==false then
call SetUnitFlyHeight(IH7,325-$D*WF8,0)
endif
if WF8==25 then
call SetUnitX(IH7,X17(Y_7))
call SetUnitY(IH7,X07(Z47))
if IsPointInRegion(IU4,GetUnitX(IH7),GetUnitY(IH7)) then
set l=YV8(GetUnitX(IH7),GetUnitY(IH7))
call SetUnitX(IH7,X57(GetLocationX(l)))
call SetUnitY(IH7,X27(GetLocationY(l)))
call RemoveLocation(l)
set l=null
endif
set IN4=ZX7
set ZG4=ZX7
set g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(IH7),GetUnitY(IH7),350,Condition(function AJ7))
call GroupRemoveUnit(g,IH7)
call ForGroup(g,function U2G)
call WR7(g)
call Y67(GetUnitX(IH7),GetUnitY(IH7),$96)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",GetUnitX(IH7),GetUnitY(IH7)))
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if KCD(IH7)==false then
call SetUnitFlyHeight(IH7,GetUnitDefaultFlyHeight(IH7),0)
endif
call SetUnitPathing(IH7,true)
endif
set t=null
set ZX7=null
set IH7=null
set g=null
return false
endfunction
function V4G takes unit ZX7,unit IH7,unit Target2,real V7G,real V8G,effect FX,effect V9G returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local real Y_7=V7G
local real Z47=V8G
local real a=J77(GetUnitX(IH7),GetUnitY(IH7),V7G,V8G)*bj_DEGTORAD
if KF7(GetUnitX(IH7),GetUnitY(IH7),V7G,V8G)>375 then
set Y_7=GetUnitX(IH7)+375*Cos(a)
set Z47=GetUnitY(IH7)+375*Sin(a)
endif
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveReal(L7,(I97),($89),((a)*1.))
call SaveReal(L7,(I97),(47),((Y_7)*1.))
call SaveReal(L7,(I97),(48),((Z47)*1.))
call SaveReal(L7,(I97),($BD),((GetUnitX(IH7))*1.))
call SaveReal(L7,(I97),($BE),((GetUnitY(IH7))*1.))
call SaveEffectHandle(L7,(I97),(32),(FX))
call SaveEffectHandle(L7,(I97),($B0),(V9G))
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function U_G))
set t=null
endfunction
function VDG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer WF8=(LoadInteger(L7,(I97),(34)))
local integer Z49=(LoadInteger(L7,(I97),($C)))
local real Y_7=(LoadReal(L7,(I97),(47)))
local real Z47=(LoadReal(L7,(I97),(48)))
local integer VEG=(LoadInteger(L7,(I97),(706)))
local real a
if GetTriggerEventId()==EVENT_WIDGET_DEATH or(GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT and YM8(IH7)==false)then
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093809990,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093810008,false)
call V4G(ZX7,IH7,(LoadUnitHandle(L7,(I97),(711))),Y_7,Z47,(LoadEffectHandle(L7,(I97),(32))),(LoadEffectHandle(L7,(I97),($B0))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093810008 then
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
set a=J77(GetUnitX(IH7),GetUnitY(IH7),GetSpellTargetX(),GetSpellTargetY())*bj_DEGTORAD
if KF7(GetUnitX(IH7),GetUnitY(IH7),GetSpellTargetX(),GetSpellTargetY())>375 then
set Y_7=GetUnitX(IH7)+375*Cos(a)
set Z47=GetUnitY(IH7)+375*Sin(a)
else
set Y_7=GetSpellTargetX()
set Z47=GetSpellTargetY()
endif
call SaveEffectHandle(L7,(I97),($B0),(AddSpecialEffect("Abilities\\Spells\\Other\\GeneralAuraTarget\\GeneralAuraTarget.mdl",Y_7,Z47)))
call SaveReal(L7,(I97),(47),((Y_7)*1.))
call SaveReal(L7,(I97),(48),((Z47)*1.))
call SaveUnitHandle(L7,(I97),(711),(GetSpellTargetUnit()))
call SaveEffectHandle(L7,(I97),($B0),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\GeneralAuraTarget\\GeneralAuraTarget.mdl",GetSpellTargetUnit(),"origin")))
endif
else
set WF8=WF8+1
call SaveInteger(L7,(I97),(34),(WF8))
call SetUnitPathing(IH7,false)
if(LoadInteger(L7,(I97),(707)))==1 then
set VEG=VEG+3
else
set VEG=VEG-3
endif
call SaveInteger(L7,(I97),(706),(VEG))
if VEG==30 then
call SaveInteger(L7,(I97),(707),(-1))
elseif VEG==-30 then
call SaveInteger(L7,(I97),(707),(1))
endif
if KCD(IH7)==false then
if WF8<$F then
call SetUnitFlyHeight(IH7,WF8*20,0)
else
call SetUnitFlyHeight(IH7,300+VEG,0)
endif
endif
if WF8>(Z49-25)then
if KCD(IH7)==false then
call SetUnitFlyHeight(IH7,300,0)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093809990,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093810008,false)
call V4G(ZX7,IH7,(LoadUnitHandle(L7,(I97),(711))),Y_7,Z47,(LoadEffectHandle(L7,(I97),(32))),(LoadEffectHandle(L7,(I97),($B0))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function VFG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local integer BC7=GetUnitAbilityLevel(ZX7,1093809990)
local unit BB7=CreateUnit(GetOwningPlayer(IH7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
call UnitAddAbility(BB7,1093810226)
call SetUnitAbilityLevel(BB7,1093810226,BC7)
call IssueTargetOrderById(BB7,$D007F,IH7)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093809990,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093810008,true)
call UnitAddAbility(ZX7,1093810008)
call SetUnitPathing(IH7,false)
if KCD(IH7)==false then
call XF7(IH7,1097691750)
call UnitRemoveAbility(IH7,1097691750)
endif
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveUnitHandle(L7,(I97),(711),(IH7))
call SaveInteger(L7,(I97),($C),(R2I((1.25+.25*BC7)/.02)))
call SaveInteger(L7,(I97),(34),(0))
call SaveInteger(L7,(I97),(706),(0))
call SaveInteger(L7,(I97),(707),(1))
call SaveReal(L7,(I97),(47),((GetUnitX(IH7))*1.))
call SaveReal(L7,(I97),(48),((GetUnitY(IH7))*1.))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("war3mapImported\\AntiGravityTarget.mdx",IH7,"origin")))
call SaveEffectHandle(L7,(I97),($B0),(AddSpecialEffect("Abilities\\Spells\\Other\\GeneralAuraTarget\\GeneralAuraTarget.mdl",GetUnitX(IH7),GetUnitY(IH7))))
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VDG))
set ZX7=null
set IH7=null
endfunction
function VGG takes nothing returns boolean
if GetSpellAbilityId()==1093809990 and WQ7(GetSpellTargetUnit())==false then
call VFG()
endif
return false
endfunction
function OT8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VGG))
call X_7(1093687350)
call X_7(1093810226)
set t=null
endfunction
function VHG takes unit ZX7,unit IH7 returns nothing
local integer BC7=GetUnitAbilityLevel(ZX7,1093809991)
if IsUnitType(IH7,UNIT_TYPE_HERO) then
if BC7==1 then
call Z67(IH7,1093810007,1,$A)
elseif BC7==2 then
call Z67(IH7,1093810230,1,$A)
elseif BC7==3 then
call Z67(IH7,1093810229,1,$A)
elseif BC7==4 then
call Z67(IH7,1093810231,1,$A)
endif
else
if BC7==1 then
call Z67(IH7,1093810481,1,$A)
elseif BC7==2 then
call Z67(IH7,1093810266,1,$A)
elseif BC7==3 then
call Z67(IH7,1093810482,1,$A)
elseif BC7==4 then
call Z67(IH7,1093810480,1,$A)
endif
endif
call Y17(Y04,GetUnitX(IH7),GetUnitY(IH7))
endfunction
function VIG takes nothing returns nothing
local real d
if IsUnitInGroup(GetEnumUnit(),ZJ4)==false then
set d=KE7(GetEnumUnit(),ZI4)
if d<ZK4 then
set ZK4=d
set ZH4=GetEnumUnit()
endif
endif
endfunction
function VJG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local group BQ9=(LoadGroupHandle(L7,(I97),($BB)))
local real x=GetUnitX(IH7)
local real y=GetUnitY(IH7)
local group g=WS7()
call GroupAddUnit(BQ9,IH7)
call VHG(ZX7,IH7)
set IN4=ZX7
set ZH4=null
set ZI4=IH7
set ZJ4=BQ9
set ZK4=$F423F
call GroupEnumUnitsInRange(g,x,y,650+25,Condition(function A17))
call ForGroup(g,function VIG)
call WR7(g)
if ZH4==null or GetTriggerEvalCount(t)>26 then
call WR7(BQ9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
set IH7=ZH4
call SaveUnitHandle(L7,(I97),(17),(IH7))
endif
set g=null
set t=null
set ZX7=null
set IH7=null
set BQ9=null
return false
endfunction
function VKG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local group BQ9=WS7()
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(ZX7),GetUnitY(ZX7),GetUnitFacing(ZX7))
call Y17(Y04,GetUnitX(ZX7),GetUnitY(ZX7))
call XF7(BB7,1093810228)
call SetUnitAbilityLevel(BB7,1093810228,GetUnitAbilityLevel(ZX7,1093809991))
call IssueTargetOrderById(BB7,$D0097,IH7)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveGroupHandle(L7,(I97),($BB),(BQ9))
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerAddCondition(t,Condition(function VJG))
set ZX7=null
set IH7=null
set t=null
set BB7=null
endfunction
function VMG takes nothing returns boolean
if GetSpellAbilityId()==1093809991 and WQ7(GetSpellTargetUnit())==false then
call VKG()
endif
return false
endfunction
function OU8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VMG))
set t=null
endfunction
function VNG takes nothing returns boolean
if IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),GetLearnedSkill())==1 then
if GetLearnedSkill()==1093809990 then
call UnitRemoveAbility(GetTriggerUnit(),1093809993)
elseif GetLearnedSkill()==1093809991 then
call UnitRemoveAbility(GetTriggerUnit(),1093809995)
elseif GetLearnedSkill()==1093810006 then
call UnitRemoveAbility(GetTriggerUnit(),1093809994)
endif
endif
return false
endfunction
function RZ5 takes integer RV5,integer RW5 returns nothing
set YTI[YPI]=RV5
set YRI[YPI]=RW5
set YPI=YPI+1
endfunction
function RX5 takes integer RV5 returns integer
local integer RW5=0
loop
exitwhen RW5==YPI
if RV5==YTI[RW5]or RV5==YRI[RW5]then
return RW5
endif
set RW5=RW5+1
endloop
return-1
endfunction
function VOG takes integer id returns nothing
set ZM4[ZN4]=id
set ZN4=ZN4+1
endfunction
function VPG takes integer id returns boolean
local integer i=0
loop
exitwhen i==ZN4
if id==ZM4[i]then
return true
endif
set i=i+1
endloop
return false
endfunction
function VQG takes nothing returns boolean
local integer i1=GetSpellAbilityId()
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) and VPG(i1)==false then
call SaveInteger(L7,(GetHandleId(GetTriggerUnit())),(705),(i1))
call SaveInteger(L7,(GetHandleId(GetTriggerUnit())),(712),(GetUnitAbilityLevel(GetTriggerUnit(),i1)))
endif
return false
endfunction
function VRG takes unit u returns nothing
call UnitRemoveAbility(u,1093743428)
call UnitRemoveAbility(u,1093815881)
call UnitRemoveAbility(u,1093751126)
call UnitRemoveAbility(u,1093751893)
call UnitRemoveAbility(u,1093809217)
call UnitRemoveAbility(u,1093809218)
call UnitRemoveAbility(u,1093750344)
call UnitRemoveAbility(u,1093808206)
call UnitRemoveAbility(u,1093753394)
call UnitRemoveAbility(u,1093753395)
call UnitRemoveAbility(u,1093808181)
call UnitRemoveAbility(u,1093752405)
call UnitRemoveAbility(u,1093683011)
call UnitRemoveAbility(u,1093809221)
call UnitRemoveAbility(u,1093685844)
call UnitRemoveAbility(u,1093751361)
call UnitRemoveAbility(u,1093683265)
call UnitRemoveAbility(u,1093686081)
call UnitRemoveAbility(u,1093743153)
call UnitRemoveAbility(u,1093752646)
call UnitRemoveAbility(u,1093677652)
call UnitRemoveAbility(u,1093751609)
call UnitRemoveAbility(u,1093808456)
call UnitRemoveAbility(u,1093750094)
call UnitRemoveAbility(u,1093678667)
call UnitRemoveAbility(u,1093684805)
call UnitRemoveAbility(u,1093684560)
call UnitRemoveAbility(u,1093815618)
endfunction
function VSG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local integer VTG=(LoadInteger(L7,(I97),(704)))
local integer VUG=(LoadInteger(L7,(I97),(713)))
if VTG==(LoadInteger(L7,(GetHandleId(ZX7)),(704)))then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif GetTriggerEvalCount(t)>($F-VUG)and XH7(ZX7)==false then
call UnitRemoveAbility(ZX7,VTG)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
return false
endfunction
function VVG takes unit ZX7,integer VTG,real ZV8 returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1.,true)
call TriggerAddCondition(t,Condition(function VSG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveInteger(L7,(I97),(704),(VTG))
call SaveInteger(L7,(GetHandleId(ZX7)),(704),(-1))
call SaveInteger(L7,(I97),(713),(R2I((TimerGetElapsed(W))-ZV8)))
set t=null
endfunction
function VWG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local integer VTG=(LoadInteger(L7,(I97),(704)))
local integer WF8=(LoadInteger(L7,(I97),(34)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093809992)+GetUnitAbilityLevel(ZX7,1093817434)
local real ZV8=(LoadReal(L7,(I97),(411)))
if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT and GetTriggerEventId()!=EVENT_WIDGET_DEATH then
if WF8==0 then
call SaveInteger(L7,(I97),(34),(1))
call DisplayTimedTextToPlayer(GetOwningPlayer(ZX7),0,0,$A,"|c00ff0303"+GetObjectName(1848659031)+"|r")
else
call VRG(ZX7)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),VTG,false)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call VVG(ZX7,VTG,ZV8)
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093809992 or GetSpellAbilityId()==1093817434 then
call VRG(ZX7)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),VTG,false)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call VVG(ZX7,VTG,ZV8)
elseif GetSpellAbilityId()==VTG then
call SaveReal(L7,(I97),(411),(((TimerGetElapsed(W)))*1.))
endif
elseif GetTriggerEventId()==EVENT_WIDGET_DEATH then
call VRG(ZX7)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),VTG,false)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call VVG(ZX7,VTG,ZV8)
endif
set t=null
set ZX7=null
return false
endfunction
function VXG takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer VTG=(LoadInteger(L7,(I97),(704)))
local integer BC7=(LoadInteger(L7,(I97),(5)))
local real VYG=60*(2+GetUnitAbilityLevel(ZX7,1093809992)+GetUnitAbilityLevel(ZX7,1093817434))
local integer VZG=GetHandleId(ZX7)
local integer VAG=GetHandleId(IH7)
if(OM7(VAG,"WexLevel"))>0 then
call NP7(VZG,"WexLevel",(OM7(VAG,"WexLevel")))
endif
if(OM7(VAG,"QuasLevel"))>0 then
call NP7(VZG,"QuasLevel",(OM7(VAG,"QuasLevel")))
endif
if(OM7(VAG,"ExortLevel"))>0 then
call NP7(VZG,"ExortLevel",(OM7(VAG,"ExortLevel")))
endif
if(LoadInteger(L7,(GetHandleId(IH7)),(710)))>0 then
call SaveInteger(L7,(GetHandleId(ZX7)),(710),((LoadInteger(L7,(GetHandleId(IH7)),(710)))))
endif
call Y17(Y64,GetUnitX(ZX7),GetUnitY(ZX7))
call YW7(GetObjectName(VTG),3.5,ZX7,.024,$AA,0,$FF,$D8)
call SaveInteger(L7,(GetHandleId(ZX7)),(704),(VTG))
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),VTG,true)
call XF7(ZX7,VTG)
call SetUnitAbilityLevel(ZX7,VTG,BC7)
set t=CreateTrigger()
set I97=GetHandleId(t)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveInteger(L7,(I97),(34),(0))
call SaveInteger(L7,(I97),(704),(VTG))
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterTimerEvent(t,VYG,false)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerRegisterTimerEvent(t,VYG-20,false)
call TriggerAddCondition(t,Condition(function VWG))
if TZ7(GetOwningPlayer(ZX7))then
call MRF(ZX7,VTG,IH7)
endif
set t=null
set ZX7=null
set IH7=null
endfunction
function VBG takes unit ZX7,unit IH7,integer VTG,integer BC7 returns nothing
local trigger t=ZF7(IH7,ZX7,1747993666,"VXG",900)
local integer I97=GetHandleId(t)
call Y17(Y34,GetUnitX(IH7),GetUnitY(IH7))
call YW7(GetObjectName(VTG),3.75,IH7,.024,$AA,0,$FF,$D8)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveInteger(L7,(I97),(704),(VTG))
call SaveInteger(L7,(I97),(5),(BC7))
set t=null
endfunction
function VCG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if VPG(GetSpellAbilityId()) then
else
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
else
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function V3G takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local integer PI5
local integer P15=(LoadInteger(L7,(GetHandleId(IH7)),(705)))
if P15!=0 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Nebula.mdx",IH7,"origin"))
set PI5=RX5(P15)
if PI5!=-1 then
if GetSpellAbilityId()==1093809992 then
set P15=YTI[PI5]
else
set P15=YRI[PI5]
endif
endif
call VBG(ZX7,IH7,P15,(LoadInteger(L7,(GetHandleId(IH7)),(712))))
endif
set ZX7=null
set IH7=null
endfunction
function V6G takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local string fx=""
if IsPlayerAlly(GetOwningPlayer(ZX7),GetLocalPlayer())or WG7(GetLocalPlayer())then
set fx="war3mapImported\\Nebula.mdx"
endif
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget(fx,IH7,"origin")))
call TriggerRegisterTimerEvent(t,20,false)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VCG))
set ZX7=null
set IH7=null
endfunction
function VLG takes nothing returns boolean
if(GetSpellAbilityId()==1093809992 or GetSpellAbilityId()==1093817434)and WQ7(GetSpellTargetUnit())==false then
call V3G()
endif
return false
endfunction
function V1G takes nothing returns nothing
call VOG(1093752648)
call VOG(1093817177)
call VOG(1095656306)
call VOG(1093677895)
call VOG(1093679411)
call VOG(1093743946)
call VOG(1093681479)
call VOG(1093681733)
call VOG(1093751896)
call VOG(1093808697)
call VOG(1093751369)
call VOG(1093747504)
call VOG(1093742932)
call VOG(1093744986)
call VOG(1093815877)
call VOG(1093743428)
call VOG(1093815881)
call VOG(1093751126)
call VOG(1093751893)
call VOG(1093809217)
call VOG(1093809218)
call VOG(1093750344)
call VOG(1093808206)
call VOG(1093753394)
call VOG(1093753395)
call VOG(1093808181)
call VOG(1093752405)
call VOG(1093683011)
call VOG(1093809221)
call VOG(1093685844)
call VOG(1093751361)
call VOG(1093683265)
call VOG(1093686081)
call VOG(1093743153)
call VOG(1093752646)
call VOG(1093677652)
call VOG(1093751609)
call VOG(1093808456)
call VOG(1093750094)
call VOG(1093684056)
call VOG(1093684055)
call VOG(1093681461)
call VOG(1093817167)
call VOG(1093681735)
call VOG(1093808471)
call VOG(1093808472)
call VOG(1093808470)
call VOG(1093808473)
call VOG(1093748565)
call VOG(1093752392)
call VOG(1093752391)
call VOG(1093815600)
call VOG(1093815618)
call VOG(1093677625)
call VOG(1093816121)
call VOG(1093685582)
call VOG(1093677622)
call VOG(1095263841)
call VOG(1093679446)
call VOG(1093682265)
call VOG(1093752642)
call VOG(1093684314)
call VOG(1093685065)
call VOG(1093750337)
call VOG(1093748033)
call VOG(1093684819)
call VOG(1093747777)
call VOG(1093810257)
call VOG(1093687121)
call VOG(1093751864)
call VOG(1093742674)
call VOG(1093742926)
call VOG(1093682521)
call VOG(1093682760)
call VOG(1093686859)
call VOG(1093686865)
call VOG(1093678899)
call VOG(1093677898)
call VOG(1093678154)
call VOG(1093678157)
call VOG(1093678158)
call VOG(1093809990)
call VOG(1093810008)
call VOG(1093809991)
call VOG(1093809992)
call VOG(1093685557)
call VOG(1093686347)
call VOG(1095328363)
call VOG(1093683801)
call VOG(1093747011)
call VOG(1095331948)
call VOG(1095331954)
call VOG(1093816650)
call VOG(1097163124)
call VOG(1093684016)
call VOG(1093683255)
call VOG(1093683254)
call VOG(1093682767)
call VOG(1093677656)
call VOG(1095332727)
call VOG(1095332962)
call VOG(1093681718)
call VOG(1093751349)
call VOG(1093808182)
call VOG(1093748292)
call VOG(1093748303)
call VOG(1093748305)
call VOG(1093749071)
call VOG(1093681720)
call VOG(1093752645)
call VOG(1093686328)
call VOG(1093686327)
call VOG(1093677367)
call VOG(1093751108)
call VOG(1093748304)
call VOG(1093683788)
call VOG(1094935400)
call VOG(1095333995)
call VOG(1095331943)
call VOG(1093742918)
call VOG(1093742917)
call VOG(1093686067)
call VOG(1093742916)
call VOG(1093742919)
call VOG(1093742920)
call VOG(1093686329)
call VOG(1093743959)
call VOG(1094936696)
call VOG(1093682756)
call VOG(1093686341)
call VOG(1093751863)
call VOG(1093744973)
call VOG(1093677647)
call VOG(1093679193)
call VOG(1093679194)
call VOG(1093679408)
call VOG(1093679410)
call VOG(1093683266)
call VOG(1093682227)
call VOG(1093682246)
call VOG(1093677655)
call VOG(1093681995)
call VOG(1093816651)
call VOG(1093684023)
call VOG(1093683796)
call VOG(1095328865)
call VOG(1093809721)
call VOG(1093752655)
call VOG(1093748055)
call VOG(1093750095)
call VOG(1093753417)
call VOG(1093753416)
call VOG(1093753431)
call VOG(1093808945)
call VOG(1093816630)
call VOG(1093743191)
call VOG(1093743681)
call VOG(1093751096)
call VOG(1093810265)
call VOG(1093810244)
call VOG(1093810246)
call VOG(1093815857)
call VOG(1093814863)
call VOG(1093814865)
call VOG(1093814864)
call VOG(1093814866)
call VOG(1093814860)
call VOG(1093813848)
call VOG(1093815089)
call VOG(1093815092)
call VOG(1093815095)
call VOG(1093815111)
call VOG(1093815109)
call VOG(1093815112)
call VOG(1093815097)
call VOG(1093813569)
call VOG(1093751349)
call VOG(1093743415)
call VOG(1093816646)
call VOG(1093816900)
call VOG(1093816888)
call VOG(1093816915)
call VOG(1093816918)
call VOG(1093816911)
call VOG('A2XO')
call VOG('A2RS')
call VOG('A32X')
call RZ5(1093752118,1093817679)
call RZ5(1093752632,1093752633)
call RZ5(1093808454,1093808455)
call RZ5(1093678420,1093679176)
call RZ5(1093677392,1093679450)
call RZ5(1093679413,1093679447)
call RZ5(1093684565,1093681458)
call RZ5(1093678388,1093677141)
call RZ5(1093678647,1093679184)
call RZ5(1093681987,1093677658)
call RZ5(1093810258,1093810259)
call RZ5(1093677128,1093681457)
call RZ5(1093677906,1093681494)
call RZ5(1093677363,1093681462)
call RZ5(1093684820,1093684824)
call RZ5(1093810503,1093810504)
call RZ5(1093678160,1093747029)
call RZ5(1093687864,1093747542)
call RZ5(1093683534,1093747031)
call RZ5(1093684529,1093747032)
call RZ5(1093677903,1093747033)
call RZ5(1093684308,1093747539)
call RZ5(1093677899,1093747248)
call RZ5(1093685045,1093747249)
call RZ5(1093678674,1093747252)
call RZ5(1093685586,1093747251)
call RZ5(1093808473,1093748565)
call RZ5(1093677401,1093747034)
call RZ5(1093684561,1093747254)
call RZ5(1093682764,1093747544)
call RZ5(1093743184,1093747766)
call RZ5(1093683761,1093747767)
call RZ5(1093682996,1093747768)
call RZ5(1093677649,1093747769)
call RZ5(1093684819,1093747777)
call RZ5(1093742673,1093747778)
call RZ5(1093681483,1093748313)
call RZ5(1093682482,1093750098)
call RZ5(1093744975,1093750102)
call RZ5(1093682248,1093750594)
call RZ5(1093686072,1093751120)
call RZ5(1395667000,1395667029)
call RZ5(1093747023,1093752150)
call RZ5(1093679152,1093752154)
call RZ5(1093685067,1093752407)
call RZ5(1093682265,1093752642)
call RZ5(1093685579,1093808465)
call RZ5(1093751861,1093808949)
call RZ5(1093684567,1093809987)
call RZ5(1093685042,1093810233)
call RZ5(1093750341,1093814599)
call RZ5(1093684275,1093817173)
call RZ5(1093750089,1093817157)
call RZ5(1093812807,1093817153)
call RZ5(1093747288,1093817164)
call RZ5(1093809992,1093817434)
call RZ5(1093678933,1093817170)
call RZ5(1093813557,1093817160)
call RZ5(1093813065,1093817154)
call RZ5(1093810260,1093817138)
call RZ5(1093678665,1093817137)
call RZ5(1093682514,1093817650)
call RZ5(1093810505,1093817676)
call RZ5(1093678137,1093817682)
call RZ5(1093678405,1093817683)
call RZ5(1093682004,1093817688)
call RZ5(1093817907,1093818448)
endfunction
function OV8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VLG))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VQG))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function VNG))
set t=null
call V1G()
endfunction
function V0G takes nothing returns nothing
if YS8(GetEnumUnit())then
return
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093810003)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093810003)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093810001)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093810001)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093810002)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093810002)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093810004)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093810004)
endif
endfunction
function V5G takes nothing returns nothing
if YS8(GetEnumUnit())then
return
endif
if ZO4==1 then
if GetUnitAbilityLevel(GetEnumUnit(),1093810003)==0 then
call XF7(GetEnumUnit(),1093810003)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093810003,false)
endif
elseif ZO4==2 then
if GetUnitAbilityLevel(GetEnumUnit(),1093810001)==0 then
call UnitRemoveAbility(GetEnumUnit(),1093810003)
call XF7(GetEnumUnit(),1093810001)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093810001,false)
endif
elseif ZO4==3 then
if GetUnitAbilityLevel(GetEnumUnit(),1093810002)==0 then
call UnitRemoveAbility(GetEnumUnit(),1093810003)
call UnitRemoveAbility(GetEnumUnit(),1093810001)
call XF7(GetEnumUnit(),1093810002)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093810002,false)
endif
elseif ZO4==4 then
if GetUnitAbilityLevel(GetEnumUnit(),1093810004)==0 then
call UnitRemoveAbility(GetEnumUnit(),1093810003)
call UnitRemoveAbility(GetEnumUnit(),1093810001)
call UnitRemoveAbility(GetEnumUnit(),1093810002)
call XF7(GetEnumUnit(),1093810004)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093810004,false)
endif
endif
endfunction
function V2G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local group AID=(LoadGroupHandle(L7,(I97),(340)))
local real x=GetUnitX(ZX7)
local real y=GetUnitY(ZX7)
local group g=WS7()
if ZX7==null or GetUnitTypeId(ZX7)!=1160786520 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call ForGroup(AID,function V0G)
call WR7(AID)
call WR7(g)
return false
endif
set IN4=ZX7
set ZO4=GetUnitAbilityLevel(ZX7,1093810006)
if XH7(ZX7)==false then
call GroupEnumUnitsInRange(g,x,y,925,Condition(function B87))
endif
call GroupRemoveGroup(g,AID)
call ForGroup(AID,function V0G)
if XH7(ZX7)==false then
call ForGroup(g,function V5G)
endif
call SaveGroupHandle(L7,(I97),(340),(g))
call WR7(AID)
set t=null
set ZX7=null
set AID=null
set g=null
return false
endfunction
function V_G takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local integer i
local player p
call TriggerRegisterTimerEvent(t,.3,true)
call TriggerAddCondition(t,Condition(function V2G))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveGroupHandle(L7,(I97),(340),(WS7()))
set i=0
loop
exitwhen i>5
set p=Z7[i]
call SetPlayerAbilityAvailable(p,1093810003,false)
call SetPlayerAbilityAvailable(p,1093810001,false)
call SetPlayerAbilityAvailable(p,1093810002,false)
call SetPlayerAbilityAvailable(p,1093810004,false)
set p=A7[i]
call SetPlayerAbilityAvailable(p,1093810003,false)
call SetPlayerAbilityAvailable(p,1093810001,false)
call SetPlayerAbilityAvailable(p,1093810002,false)
call SetPlayerAbilityAvailable(p,1093810004,false)
set i=i+1
endloop
set t=null
set ZX7=null
endfunction
function W4G takes nothing returns boolean
if GetLearnedSkill()==1093810006 and GetUnitAbilityLevel(GetTriggerUnit(),1093810006)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call V_G()
endif
return false
endfunction
function OW8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function W4G))
set t=null
endfunction
function W7G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
call AddUnitAnimationProperties(ZX7,"alternate",false)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set ZX7=null
return false
endfunction
function W8G takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function W7G))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set t=null
set ZX7=null
endfunction
function W9G takes nothing returns boolean
if(GetSpellAbilityId()==1093678899 or GetSpellAbilityId()==1093677898 or GetSpellAbilityId()==1093678154 or GetSpellAbilityId()==1093678157 or GetSpellAbilityId()==1093678158)and GetUnitTypeId(GetTriggerUnit())==1160786520 then
call W8G()
endif
return false
endfunction
function OX8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function W9G))
set t=null
endfunction
function WDG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093810518)
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093810519 then
call UnitRemoveAbility(ZX7,1093810519)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093810519,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093810518,true)
call DestroyEffect((LoadEffectHandle(L7,(I97),($AF))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call BA7(ZX7,IH7,.5+.5*BC7)
call SetUnitX(ZX7,GetUnitX(IH7))
call SetUnitY(ZX7,GetUnitY(IH7))
call IssueTargetOrderById(ZX7,$D000F,IH7)
call UnitShareVision(IH7,GetOwningPlayer(ZX7),false)
endif
else
call UnitRemoveAbility(ZX7,1093810519)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093810519,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093810518,true)
call DestroyEffect((LoadEffectHandle(L7,(I97),($AF))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
call UnitShareVision(IH7,GetOwningPlayer(ZX7),false)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
return false
endfunction
function WEG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
if GetTriggerEvalCount(GetTriggeringTrigger())>30 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
call YZ8(ZX7)
endif
set t=null
set ZX7=null
return false
endfunction
function WFG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7
local integer WF8=(LoadInteger(L7,(I97),(34)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093810518)
if WF8>60 then
call UnitRemoveAbility(ZX7,1110459734)
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamage()>100 and IsUnitType(GetEventDamageSource(),UNIT_TYPE_STRUCTURE)==false then
call YN7(ZX7,GetEventDamage())
set IH7=M7[GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call YZ8(ZX7)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if XH7(IH7)==false then
call UnitShareVision(IH7,GetOwningPlayer(ZX7),true)
call XF7(ZX7,1093810519)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093810519,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093810518,false)
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterTimerEvent(t,4,false)
call TriggerAddCondition(t,Condition(function WDG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveEffectHandle(L7,(I97),($AF),(AddSpecialEffectTarget("war3mapImported\\RetaliationTarget.mdx",ZX7,"origin")))
call SaveEffectHandle(L7,(I97),($B0),(AddSpecialEffectTarget("war3mapImported\\RetaliationTarget.mdx",IH7,"origin")))
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function WEG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
endif
endif
else
call SaveInteger(L7,(I97),(34),(WF8+1))
endif
set t=null
set ZX7=null
return false
endfunction
function WGG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function WFG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveInteger(L7,(I97),(34),(0))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("war3mapImported\\RetaliationShield.mdx",ZX7,"chest")))
set ZX7=null
set t=null
endfunction
function WHG takes nothing returns boolean
if GetSpellAbilityId()==1093810518 then
call WGG()
endif
return false
endfunction
function Register_Retaliation takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WHG))
set t=null
endfunction
function WIG takes nothing returns nothing
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\ImmolationRed\\ImmolationRedDamage.mdl",GetEnumUnit(),"chest"))
call B67(DR7,GetEnumUnit(),1,(20+10*DS7)/5)
endfunction
function WJG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093814355)
local group g
if GetUnitAbilityLevel(ZX7,1110459984)==0 and GetUnitAbilityLevel(ZX7,1110459985)==0 then
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call UnitRemoveAbility(ZX7,1093814327)
call UnitRemoveAbility(ZX7,1110459983)
call UnitRemoveAbility(ZX7,1093814616)
call UnitRemoveAbility(ZX7,1093814615)
call UnitRemoveAbility(ZX7,1093814614)
call UnitRemoveAbility(ZX7,1093814617)
else
set IN4=ZX7
set DR7=ZX7
set DS7=BC7
set g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),400+25,Condition(function AJ7))
call ForGroup(g,function WIG)
call WR7(g)
endif
set g=null
set t=null
set ZX7=null
return false
endfunction
function WKG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(ZX7),GetUnitY(ZX7),0)
local integer BC7=GetUnitAbilityLevel(ZX7,1093814355)
call UnitAddAbility(BB7,1093814325)
call SetUnitAbilityLevel(BB7,1093814325,BC7)
call IssueTargetOrderById(BB7,$D00DA,ZX7)
call TriggerRegisterTimerEvent(t,.2,true)
call TriggerAddCondition(t,Condition(function WJG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("war3mapImported\\FlameGuard.mdx",ZX7,"origin")))
if BC7==1 then
elseif BC7==2 then
elseif BC7==3 then
elseif BC7==4 then
endif
set ZX7=null
set BB7=null
set t=null
endfunction
function WMG takes nothing returns boolean
if GetSpellAbilityId()==1093814355 then
call WKG()
endif
return false
endfunction
function OZ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WMG))
set t=null
endfunction
function WNG takes unit ZX7 returns nothing
call UnitRemoveAbility(ZX7,1112500344)
call UnitRemoveAbility(ZX7,1110454344)
endfunction
function WOG takes unit ZX7 returns nothing
call UnitRemoveAbility(ZX7,1093814329)
call UnitRemoveAbility(ZX7,1110459981)
endfunction
function WPG takes unit ZX7 returns nothing
call UnitRemoveAbility(ZX7,1093814856)
call UnitRemoveAbility(ZX7,1093814855)
call UnitRemoveAbility(ZX7,1093814858)
call UnitRemoveAbility(ZX7,1093814857)
call UnitRemoveAbility(ZX7,1110459980)
endfunction
function WQG takes unit ZX7 returns nothing
call XF7(ZX7,1093814329)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093814329,false)
endfunction
function WRG takes unit ZX7 returns nothing
local integer BC7=GetUnitAbilityLevel(ZX7,1093814320)
if BC7==1 then
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093814856,false)
call XF7(ZX7,1093814856)
elseif BC7==2 then
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093814855,false)
call XF7(ZX7,1093814855)
elseif BC7==3 then
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093814858,false)
call XF7(ZX7,1093814858)
elseif BC7==4 then
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093814857,false)
call XF7(ZX7,1093814857)
endif
endfunction
function WSG takes unit ZX7,unit IH7 returns nothing
local real a=GetRandomReal(0,360)
local real x=GetUnitX(IH7)+50*Cos(a*bj_DEGTORAD)
local real y=GetUnitY(IH7)+50*Sin(a*bj_DEGTORAD)
call SetUnitPosition(ZX7,x,y)
call SetUnitFacing(ZX7,bj_RADTODEG*Atan2(GetUnitY(IH7)-GetUnitY(ZX7),GetUnitX(IH7)-GetUnitX(ZX7)))
call SetUnitAnimation(ZX7,"Attack")
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Fire_Blink_2.mdx",ZX7,"chest"))
call WPG(ZX7)
if IsUnitType(IH7,UNIT_TYPE_HERO) or IsUnitIllusion(IH7) then
call WRG(ZX7)
call UnitRemoveAbility(ZX7,1093814854)
else
call XF7(ZX7,1093814854)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093814854,false)
endif
call IssueTargetOrderById(ZX7,$D000F,IH7)
endfunction
function WTG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real x=(LoadReal(L7,(I97),(6)))
local real y=(LoadReal(L7,(I97),(7)))
local real AQ9=(LoadReal(L7,(I97),($BD)))
local real AR9=(LoadReal(L7,(I97),($BE)))
local group BQ9=(LoadGroupHandle(L7,(I97),($BB)))
local group g=(LoadGroupHandle(L7,(I97),(22)))
local unit IH7=null
local boolean D8G=false
local fogmodifier Q0D=(LoadFogModifierHandle(L7,(I97),(42)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093814320)
loop
exitwhen FirstOfGroup(g)==null or D8G
set IH7=FirstOfGroup(g)
call GroupRemoveUnit(g,IH7)
if IsUnitInGroup(IH7,BQ9)and IH7!=null then
set IH7=null
set D8G=false
else
set D8G=true
endif
endloop
call SetUnitPathing(ZX7,false)
call SetUnitInvulnerable(ZX7,true)
call AG7(ZX7)
if D8G==false or((LoadInteger(L7,(GetHandleId((ZX7))),((4319))))==1) then
call SaveInteger(L7,(GetHandleId((ZX7))),((4318)),(2))
call WOG(ZX7)
call UnitRemoveAbility(ZX7,1093814854)
call WPG(ZX7)
call AG7(ZX7)
call WNG(ZX7)
call UnitAddAbility(ZX7,1093814322)
call UnitRemoveAbility(ZX7,1093814322)
call AG7(ZX7)
if((LoadInteger(L7,(GetHandleId((ZX7))),((4319))))==1)==false then
call SetUnitX(ZX7,AQ9)
call SetUnitY(ZX7,AR9)
endif
call SetUnitVertexColor(ZX7,$FF,$FF,$FF,$FF)
call SetUnitPathing(ZX7,true)
call SetUnitInvulnerable(ZX7,false)
call SetUnitTimeScale(ZX7,1)
call WR7(BQ9)
call WR7(g)
call RemoveUnit((LoadUnitHandle(L7,(I97),(19))))
call FogModifierStop(Q0D)
call DestroyFogModifier(Q0D)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
call GroupAddUnit(BQ9,IH7)
call WSG(ZX7,IH7)
endif
set t=null
set ZX7=null
set IH7=null
set g=null
set BQ9=null
set Q0D=null
return false
endfunction
function WUG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local fogmodifier Q0D=CreateFogModifierRadius(GetOwningPlayer(ZX7),FOG_OF_WAR_VISIBLE,x,y,625,true,true)
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1747993911,GetUnitX(ZX7),GetUnitY(ZX7),GetUnitFacing(ZX7))
local group g=WS7()
local integer BC7=GetUnitAbilityLevel(ZX7,1093814320)
call SetUnitVertexColor(BB7,$FF,$FF,$FF,100)
call FogModifierStart(Q0D)
call SaveInteger(L7,(GetHandleId((ZX7))),((4318)),(1))
set IN4=ZX7
call GroupEnumUnitsInRange(g,x,y,$96+100*BC7+25,Condition(function A87))
call AG7(ZX7)
call WNG(ZX7)
call UnitAddAbility(ZX7,1093814321)
call UnitRemoveAbility(ZX7,1093814321)
call SetUnitVertexColor(ZX7,$FF,$FF,$FF,125)
call SetUnitPathing(ZX7,false)
call SetUnitInvulnerable(ZX7,true)
call SetUnitTimeScale(ZX7,3)
call TriggerRegisterTimerEvent(t,.2,true)
call TriggerAddCondition(t,Condition(function WTG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveReal(L7,(I97),(6),((x)*1.))
call SaveReal(L7,(I97),(7),((y)*1.))
call SaveReal(L7,(I97),($BD),((GetUnitX(ZX7))*1.))
call SaveReal(L7,(I97),($BE),((GetUnitY(ZX7))*1.))
call SaveGroupHandle(L7,(I97),($BB),(WS7()))
call SaveGroupHandle(L7,(I97),(22),(g))
call SaveFogModifierHandle(L7,(I97),(42),(Q0D))
call SaveUnitHandle(L7,(I97),(19),(BB7))
call WQG(ZX7)
call TriggerEvaluate(t)
set ZX7=null
set t=null
set Q0D=null
set BB7=null
set g=null
endfunction
function WVG takes nothing returns boolean
if GetSpellAbilityId()==1093814320 then
call WUG()
endif
return false
endfunction
function WWG takes nothing returns boolean
local unit VZ8=GetSummonedUnit()
if IsUnitIllusion(VZ8) and GetUnitTypeId(VZ8)==1311788360 then
call WOG(VZ8)
call UnitRemoveAbility(VZ8,1093814854)
call WPG(VZ8)
call UnitAddAbility(VZ8,1093814322)
call UnitRemoveAbility(VZ8,1093814322)
endif
set VZ8=null
return false
endfunction
function OA8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WVG))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function WWG))
set t=null
endfunction
function WXG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093814323)
local integer Z49=1
local real VW9
if BC7==1 then
set Z49=1
set VW9=80
endif
if BC7==2 then
set Z49=2
set VW9=60
endif
if BC7==3 then
set Z49=2
set VW9=120
endif
if BC7==4 then
set Z49=3
set VW9=100
endif
if GetTriggerEvalCount(t)==Z49 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
call B67(ZX7,IH7,1,VW9)
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function WYG takes nothing returns nothing
local unit ZX7=IN4
local unit IH7=IP4
local unit BB7=CreateUnit(GetOwningPlayer(IH7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local integer BC7=GetUnitAbilityLevel(ZX7,1093814323)
call UnitAddAbility(BB7,1093814324)
call SetUnitAbilityLevel(BB7,1093814324,BC7)
call IssueTargetOrderById(BB7,$D008A,IH7)
call TriggerAddCondition(t,Condition(function WXG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call TriggerRegisterTimerEvent(t,0,false)
call TriggerRegisterTimerEvent(t,1,true)
set BB7=null
set ZX7=null
set IH7=null
endfunction
function WZG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local group g=WS7()
local real x=GetUnitX(ZX7)
local real y=GetUnitY(ZX7)
local unit u1=null
local unit u2=null
local unit u3=null
local integer BKE=0
local unit u
local trigger t
set IN4=ZX7
call GroupEnumUnitsInRange(g,x,y,425,Condition(function A17))
loop
exitwhen FirstOfGroup(g)==null or BKE==2
set u=GroupPickRandomUnit(g)
if u!=null then
if BKE==0 then
set u1=u
elseif BKE==1 then
set u2=u
elseif BKE==2 then
set u3=u
endif
set BKE=BKE+1
call GroupRemoveUnit(g,u)
endif
endloop
call WR7(g)
if u1!=null then
call ZF7(ZX7,u1,1747993904,"WYG",9000)
endif
if u2!=null then
call ZF7(ZX7,u2,1747993904,"WYG",9000)
endif
if u3!=null then
endif
set g=null
set ZX7=null
set u=null
set u1=null
set u2=null
set u3=null
endfunction
function WAG takes nothing returns boolean
if GetSpellAbilityId()==1093814323 then
call WZG()
endif
return false
endfunction
function OY8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WAG))
set t=null
endfunction
function WBG takes nothing returns boolean
local unit ZX7=(LoadUnitHandle(L7,(GetHandleId(GetTriggeringTrigger())),(2)))
local integer I97=GetHandleId(ZX7)
local integer i=0
local real SRG=(TimerGetElapsed(W))
local integer WCG=(LoadInteger(L7,(I97),(749)))
local real x
local real y
local real t
loop
exitwhen i>WCG
set t=(LoadReal(L7,(I97),($2710+i)))
if t+$A>SRG then
set x=(LoadReal(L7,(I97),($2AF8+i)))
set y=(LoadReal(L7,(I97),($2EE0+i)))
endif
set i=i+1
endloop
set ZX7=null
return false
endfunction
function W3G takes integer I97,integer WCG,real Z97,real ZD7 returns boolean
local real x
local real y
local real t
local integer i=0
local real SRG=(TimerGetElapsed(W))
loop
exitwhen i>WCG
set t=(LoadReal(L7,(I97),($2710+i)))
if t+$A>SRG then
set x=(LoadReal(L7,(I97),($2AF8+i)))
set y=(LoadReal(L7,(I97),($2EE0+i)))
if KF7(x,y,Z97,ZD7)<75 then
return true
endif
endif
set i=i+1
endloop
return false
endfunction
function W6G takes integer I97,integer WCG returns integer
local real t
local integer i=0
local real SRG=(TimerGetElapsed(W))
loop
exitwhen i>WCG
set t=(LoadReal(L7,(I97),($2710+i)))
if t+$A<SRG then
return i
endif
set i=i+1
endloop
return-1
endfunction
function WLG takes unit ZX7,integer W1G,real x,real y returns nothing
local integer I97=GetHandleId(ZX7)
local integer WCG=(LoadInteger(L7,(I97),(749)))
local integer W0G
if W3G(I97,WCG,x,y)then
return
endif
set W0G=W6G(I97,WCG)
if W0G==-1 then
set W0G=WCG
set WCG=WCG+1
call SaveInteger(L7,(I97),(749),(WCG))
endif
call SaveInteger(L7,(I97),($32C8),(W1G))
call SaveReal(L7,(I97),($2710),(((TimerGetElapsed(W)))*1.))
call SaveReal(L7,(I97),($2AF8),((x)*1.))
call SaveReal(L7,(I97),($2AF8),((y)*1.))
endfunction
function W5G takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function WBG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set ZX7=null
set t=null
endfunction
function W2G takes nothing returns nothing
call B67(DU7,GetEnumUnit(),1,50+DT7*50)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\LordofFlameMissile\\LordofFlameMissile.mdl",GetEnumUnit(),"origin"))
endfunction
function W_G takes unit ZX7,unit IGD,real x,real y returns nothing
local group g
call KillUnit(IGD)
call YT7("war3mapImported\\Firaga_2.mdx",x,y,2)
set g=WS7()
set IN4=ZX7
set DU7=ZX7
set DT7=GetUnitAbilityLevel(ZX7,1093814859)
call GroupEnumUnitsInRange(g,x,y,450+25,Condition(function AJ7))
call UnitRemoveAbility(ZX7,1093678162)
call ForGroup(g,function W2G)
call XF7(ZX7,1093678162)
call WR7(g)
set g=null
endfunction
function X4G takes unit ZX7,unit X7G returns nothing
local integer I97=GetHandleId(ZX7)
local integer X8G=(LoadInteger(L7,(I97),(746)))
local unit X9G
local integer i=1
local integer x
loop
exitwhen i>X8G
set X9G=(LoadUnitHandle(L7,(I97),($5AA+i)))
if X9G==X7G then
set X8G=X8G-1
call SaveUnitHandle(L7,(I97),($5AA+i),((LoadUnitHandle(L7,(I97),($5AA+i+1)))))
call SaveInteger(L7,(I97),(746),(X8G))
set x=i+1
loop
exitwhen x>X8G
call SaveUnitHandle(L7,(I97),($5AA+x),((LoadUnitHandle(L7,(I97),($5AA+x+1)))))
set x=x+1
endloop
endif
set i=i+1
endloop
set X9G=null
endfunction
function XDG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IGD=(LoadUnitHandle(L7,(I97),(19)))
local real TR9=GetUnitX(IGD)
local real TS9=GetUnitY(IGD)
local real Y_7=(LoadReal(L7,(I97),(47)))
local real Z47=(LoadReal(L7,(I97),(48)))
local real a=J77(TR9,TS9,Y_7,Z47)*bj_DEGTORAD
local real Z97
local real ZD7
local real d=KF7(TR9,TS9,Y_7,Z47)
local real D4D=GetUnitMoveSpeed(ZX7)*2.5*.02
local group g
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call X4G(ZX7,IGD)
call DestroyEffect((LoadEffectHandle(L7,(I97),($AF))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B1))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif d<2 then
call SetUnitAnimationByIndex(IGD,1)
else
if d<D4D then
set Z97=Y_7
set ZD7=Z47
else
set Z97=TR9+D4D*Cos(a)
set ZD7=TS9+D4D*Sin(a)
endif
call SetUnitX(IGD,Z97)
call SetUnitY(IGD,ZD7)
endif
set t=null
set ZX7=null
set IGD=null
return false
endfunction
function XEG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local real a=J77(GetUnitX(ZX7),GetUnitY(ZX7),GetSpellTargetX(),GetSpellTargetY())*bj_DEGTORAD
local integer I97=GetHandleId(ZX7)
local integer X8G=(LoadInteger(L7,(I97),(746)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093814859)
local unit X9G=(LoadUnitHandle(L7,(I97),($5AA+1)))
local unit XFG=CreateUnit(GetOwningPlayer(ZX7),1747993912,GetUnitX(ZX7),GetUnitY(ZX7),a*bj_RADTODEG)
local trigger t
local integer i=1
set X8G=X8G+1
call SaveUnitHandle(L7,(I97),($5AA+X8G),(XFG))
call SaveInteger(L7,(I97),(746),(X8G))
set t=CreateTrigger()
set I97=GetHandleId(t)
call SetUnitVertexColor(XFG,$FF,$FF,$FF,$FF)
call SetUnitTimeScale(XFG,2)
call SetUnitAnimationByIndex(XFG,0)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function XDG))
call TriggerRegisterDeathEvent(t,XFG)
call UnitApplyTimedLife(XFG,1112820806,45)
call SaveEffectHandle(L7,(I97),($AF),(AddSpecialEffectTarget("war3mapImported\\Phoenix_Missile_smaller.mdx",XFG,"hand right alternate")))
call SaveEffectHandle(L7,(I97),($B0),(AddSpecialEffectTarget("war3mapImported\\Phoenix_Missile_smaller.mdx",XFG,"hand left alternate")))
call SaveEffectHandle(L7,(I97),($B1),(AddSpecialEffectTarget("war3mapImported\\FlameDash_Ground.mdx",XFG,"origin")))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(19),(XFG))
call SaveReal(L7,(I97),(47),((GetSpellTargetX())*1.))
call SaveReal(L7,(I97),(48),((GetSpellTargetY())*1.))
set ZX7=null
set t=null
set X9G=null
set XFG=null
endfunction
function XGG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local integer N5E=(LoadInteger(L7,(GetHandleId(ZX7)),(747)))
if N5E>0 then
call XEG()
call UnitRemoveAbility(ZX7,DZ7[N5E])
set N5E=N5E-1
call SaveInteger(L7,(GetHandleId(ZX7)),(747),(N5E))
call XF7(ZX7,DZ7[N5E])
else
call X37(GetOwningPlayer(GetTriggerUnit()),"No more charges")
endif
set ZX7=null
endfunction
function XHG takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==1747993912
endfunction
function XIG takes nothing returns nothing
local real ZFD=KF7(GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),DV7,DW7)
if ZFD>DX7 and XH7(GetEnumUnit())==false then
set DY7=GetEnumUnit()
set DX7=ZFD
endif
endfunction
function XJG takes unit ZX7,real x,real y returns unit
local group g=WS7()
set DY7=null
set DX7=-1
set DV7=x
set DW7=y
call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(ZX7),Condition(function XHG))
call ForGroup(g,function XIG)
call WR7(g)
set g=null
return DY7
endfunction
function FireRemnant_FindTargetClosest takes nothing returns nothing
local real ZFD=KF7(GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),DV7,DW7)
if ZFD<DX7 and XH7(GetEnumUnit())==false then
set DY7=GetEnumUnit()
set DX7=ZFD
endif
endfunction
function XKG takes unit u1,unit u2 returns real
local real Y79=KE7(u1,u2)
local real B98=Y79/1300.
if B98>.4 then
return Y79/.4
endif
return 1300.
endfunction
function XMG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real HME=(LoadReal(L7,(I97),(47)))
local real HNE=(LoadReal(L7,(I97),(48)))
local unit IGD=(LoadUnitHandle(L7,(I97),(19)))
local real TR9=GetUnitX(ZX7)
local real TS9=GetUnitY(ZX7)
local real Y_7=(LoadReal(L7,(I97),(6)))
local real Z47=(LoadReal(L7,(I97),(7)))
local real a
local real Z97
local real ZD7
local real d
local real XNG=(LoadReal(L7,(I97),(44)))
local real D4D=XNG*.02
local group g
local integer WF8=(LoadInteger(L7,(I97),(34)))
if IGD!=null then
set Y_7=GetUnitX(IGD)
set Z47=GetUnitY(IGD)
call SaveReal(L7,(I97),(6),((Y_7)*1.))
call SaveReal(L7,(I97),(7),((Z47)*1.))
endif
set a=J77(TR9,TS9,Y_7,Z47)*bj_DEGTORAD
set d=KF7(TR9,TS9,Y_7,Z47)
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call SaveInteger(L7,(GetHandleId((ZX7))),((4319)),(2))
call SetUnitVertexColor(ZX7,$FF,$FF,$FF,$FF)
call SetUnitTimeScale(ZX7,1)
call SetUnitAnimationByIndex(ZX7,0)
call SetUnitPathing(ZX7,true)
call SetUnitInvulnerable(ZX7,false)
call UnitRemoveAbility(ZX7,1093678162)
call DestroyEffect((LoadEffectHandle(L7,(I97),($AF))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B1))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif d<D4D then
call SetUnitX(ZX7,Y_7)
call SetUnitY(ZX7,Z47)
call W_G(ZX7,IGD,Y_7,Z47)
set IGD=XJG(ZX7,HME,HNE)
if IGD==null then
call SaveInteger(L7,(GetHandleId((ZX7))),((4319)),(2))
call Y67(Y_7,Z47,100)
call SetUnitVertexColor(ZX7,$FF,$FF,$FF,$FF)
call SetUnitTimeScale(ZX7,1)
call SetUnitAnimationByIndex(ZX7,1)
call SetUnitPathing(ZX7,true)
call SetUnitInvulnerable(ZX7,false)
call UnitRemoveAbility(ZX7,1093678162)
call DestroyEffect((LoadEffectHandle(L7,(I97),($AF))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B1))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
call SaveInteger(L7,(I97),(34),(WF8+1))
call SaveUnitHandle(L7,(I97),(19),(IGD))
call SaveReal(L7,(I97),(44),((XKG(ZX7,IGD))*1.))
call SaveReal(L7,(I97),(6),((GetUnitX(IGD))*1.))
call SaveReal(L7,(I97),(7),((GetUnitY(IGD))*1.))
endif
else
call SetUnitAnimationByIndex(ZX7,0)
call SetUnitPathing(ZX7,false)
set Z97=TR9+D4D*Cos(a)
set ZD7=TS9+D4D*Sin(a)
call SetUnitX(ZX7,Z97)
call SetUnitY(ZX7,ZD7)
call SetUnitFacing(ZX7,a*bj_RADTODEG)
endif
call WLG(ZX7,WF8,GetUnitX(ZX7),GetUnitY(ZX7))
set t=null
set ZX7=null
set IGD=null
return false
endfunction
function XOG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
call SetUnitState(ZX7,UNIT_STATE_MANA,GetUnitState(ZX7,UNIT_STATE_MANA)+$96)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set ZX7=null
return false
endfunction
function XPG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t
local integer I97=GetHandleId(ZX7)
local integer X8G=(LoadInteger(L7,(I97),(746)))
local unit IGD
if X8G>0 and((LoadInteger(L7,(GetHandleId((ZX7))),((4319))))==1)==false then
set t=CreateTrigger()
set I97=GetHandleId(t)
call SetUnitVertexColor(ZX7,$FF,0,0,75)
call SetUnitTimeScale(ZX7,2)
call SetUnitAnimationByIndex(ZX7,0)
call SetUnitPathing(ZX7,false)
call SetUnitInvulnerable(ZX7,true)
call XF7(ZX7,1093678162)
call SaveInteger(L7,(GetHandleId((ZX7))),((4319)),(1))
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function XMG))
call TriggerRegisterDeathEvent(t,ZX7)
call SaveEffectHandle(L7,(I97),($AF),(AddSpecialEffectTarget("war3mapImported\\Phoenix_Missile_smaller.mdx",ZX7,"hand right alternate")))
call SaveEffectHandle(L7,(I97),($B0),(AddSpecialEffectTarget("war3mapImported\\Phoenix_Missile_smaller.mdx",ZX7,"hand left alternate")))
call SaveEffectHandle(L7,(I97),($B1),(AddSpecialEffectTarget("war3mapImported\\FlameDash_Ground.mdx",ZX7,"origin")))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveReal(L7,(I97),(47),((GetSpellTargetX())*1.))
call SaveReal(L7,(I97),(48),((GetSpellTargetY())*1.))
set IGD=XJG(ZX7,GetSpellTargetX(),GetSpellTargetY())
call SaveUnitHandle(L7,(I97),(19),(IGD))
call SaveReal(L7,(I97),(44),((XKG(ZX7,IGD))*1.))
call SaveReal(L7,(I97),(6),((GetUnitX(IGD))*1.))
call SaveReal(L7,(I97),(7),((GetUnitY(IGD))*1.))
call SaveInteger(L7,(I97),(34),(1))
else
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.0,false)
call TriggerAddCondition(t,Condition(function XOG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
endif
set t=null
set ZX7=null
set IGD=null
endfunction
function XQG takes nothing returns boolean
if GetSpellAbilityId()==DZ7[0]or GetSpellAbilityId()==DZ7[1]or GetSpellAbilityId()==DZ7[2]or GetSpellAbilityId()==DZ7[3]then
call XGG()
elseif GetSpellAbilityId()==1093814860 then
call XPG()
endif
return false
endfunction
function XRG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local integer N5E=(LoadInteger(L7,(GetHandleId(ZX7)),(747)))
local integer WF8=(LoadInteger(L7,(I97),(34)))
if N5E<3 then
set WF8=WF8-1
call SaveInteger(L7,(I97),(34),(WF8))
if WF8==0 then
call UnitRemoveAbility(ZX7,DZ7[N5E])
set WF8=35
call SaveInteger(L7,(I97),(34),(WF8))
set N5E=N5E+1
call SaveInteger(L7,(GetHandleId(ZX7)),(747),(N5E))
call XF7(ZX7,DZ7[N5E])
endif
endif
set t=null
set ZX7=null
return false
endfunction
function XSG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call SaveInteger(L7,(GetHandleId(ZX7)),(747),(3))
call XF7(ZX7,DZ7[3])
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function XRG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveInteger(L7,(I97),(34),(30))
set ZX7=null
set t=null
endfunction
function XTG takes nothing returns boolean
if GetLearnedSkill()==1093814859 and IsUnitIllusion(GetTriggerUnit())==false then
call XF7(GetTriggerUnit(),1093814860)
call SetUnitAbilityLevel(GetTriggerUnit(),1093814860,GetUnitAbilityLevel(GetTriggerUnit(),1093814859))
if GetUnitAbilityLevel(GetTriggerUnit(),1093814859)==1 then
call XSG()
call W5G()
endif
endif
return false
endfunction
function OB8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function XQG))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function XTG))
set t=null
set DZ7[0]=1093814863
set DZ7[1]=1093814865
set DZ7[2]=1093814864
set DZ7[3]=1093814866
endfunction
function XUG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamage()>2 and DA7 then
set DA7=false
call B67(GetEventDamageSource(),IH7,3,GetEventDamage()*.25)
set DA7=true
endif
else
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function XVG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
local integer BC7=GetUnitAbilityLevel(ZX7,1093812536)
set DA7=true
call UnitAddAbility(BB7,1093812535)
call SetUnitAbilityLevel(BB7,1093812535,BC7)
call IssueTargetOrderById(BB7,$D02BC,IH7)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerRegisterTimerEvent(t,2+BC7,false)
call TriggerAddCondition(t,Condition(function XUG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
set ZX7=null
set IH7=null
set t=null
endfunction
function XWG takes nothing returns boolean
if GetSpellAbilityId()==1093812536 then
call XVG()
endif
return false
endfunction
function Register_ArcaneSeal takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function XWG))
set t=null
endfunction
function XXG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local real a=(LoadReal(L7,(I97),($89)))
local real d=(LoadReal(L7,(I97),($8A)))
local real x=X17(GetUnitX(IH7)+d/$A*Cos(a))
local real y=X07(GetUnitY(IH7)+d/$A*Sin(a))
if GetTriggerEvalCount(t)==$B or GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
call DestroyEffect(AddSpecialEffect("war3mapImported\\ThrustMovement.mdx",x,y))
call Y67(x,y,$96)
call SetUnitX(IH7,x)
call SetUnitY(IH7,y)
endif
set IH7=null
set t=null
return false
endfunction
function XYG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local integer BC7=GetUnitAbilityLevel(ZX7,1093812537)
local real a
local real x
local real y
local real d
local integer i=-1
local boolean D9G=false
if ZX7==IH7 then
set a=GetUnitFacing(ZX7)*bj_DEGTORAD
else
set a=J47(ZX7,IH7)*bj_DEGTORAD
endif
loop
exitwhen D9G or i==23
set i=i+1
set x=X17(GetUnitX(IH7)+(350-i*25)*Cos(a))
set y=X07(GetUnitY(IH7)+(350-i*25)*Sin(a))
if(IsPointInRegion(IU4,((x)*1.),((y)*1.)))==false then
set D9G=true
endif
endloop
set d=KF7(x,y,GetUnitX(IH7),GetUnitY(IH7))
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function XXG))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveReal(L7,(I97),($89),((a)*1.))
call SaveReal(L7,(I97),($8A),((d)*1.))
if IsUnitAlly(ZX7,GetOwningPlayer(IH7)) then
call SetUnitState(IH7,UNIT_STATE_LIFE,GetUnitState(IH7,UNIT_STATE_LIFE)+50+50*BC7)
else
call B67(ZX7,IH7,3,50+50*BC7)
endif
set ZX7=null
set IH7=null
set t=null
endfunction
function XZG takes nothing returns boolean
if GetSpellAbilityId()==1093812537 then
call XYG()
endif
return false
endfunction
function Register_Thrust takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function XZG))
set t=null
endfunction
function XAG takes nothing returns nothing
call IssueTargetOrderById(DB7,$D008A,GetEnumUnit())
call B67(GetTriggerUnit(),GetEnumUnit(),1,60*DC7)
endfunction
function XBG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local group g1=WS7()
local group g2=WS7()
local integer BC7=GetUnitAbilityLevel(ZX7,1093812534)
local real x=GetUnitX(ZX7)
local real y=GetUnitY(ZX7)
set DC7=BC7
set DB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,x,y,0)
call UnitAddAbility(DB7,1093812549)
call SetUnitAbilityLevel(DB7,1093812549,BC7)
call GroupEnumUnitsInRange(g1,x,y,425,Condition(function AW7))
call GroupEnumUnitsInRange(g2,x,y,825,Condition(function AW7))
call GroupRemoveGroup(g1,g2)
call ForGroup(g2,function XAG)
call WR7(g1)
call WR7(g2)
call DestroyEffect(AddSpecialEffect("war3mapImported\\ConjureForceAoE.mdx",x,y))
set ZX7=null
set g1=null
set g2=null
endfunction
function XCG takes nothing returns boolean
if GetSpellAbilityId()==1093812534 then
call XBG()
endif
return false
endfunction
function Register_ConjureForce takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function XCG))
set t=null
endfunction
function X3G takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),D67)==false then
call GroupAddUnit(D67,GetEnumUnit())
call B67(D37,GetEnumUnit(),3,DL7)
endif
endfunction
function X6G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local group g=(LoadGroupHandle(L7,(I97),(22)))
local unit Y27=(LoadUnitHandle(L7,(I97),(45)))
local integer BC7=(LoadInteger(L7,(I97),(5)))
local real TA9=(LoadReal(L7,(I97),($D)))
local real VW9=(LoadReal(L7,(I97),(20)))
local group XLG
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real x
local real y
if GetTriggerEvalCount(t)>67 then
call WR7(g)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call KillUnit(Y27)
else
set x=GetUnitX(Y27)
set y=GetUnitY(Y27)
set XLG=WS7()
set D67=g
set IN4=Y27
set D37=ZX7
set DL7=VW9
call GroupEnumUnitsInRange(XLG,x,y,$E1,Condition(function AQ7))
call ForGroup(XLG,function X3G)
call WR7(XLG)
call SetUnitX(Y27,X17(x+$F*Cos(TA9*bj_DEGTORAD)))
call SetUnitY(Y27,X07(y+$F*Sin(TA9*bj_DEGTORAD)))
endif
set t=null
set g=null
set XLG=null
set ZX7=null
set Y27=null
return false
endfunction
function X1G takes unit ZX7,real VW9,real x,real y returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local group g=WS7()
local real x1=GetUnitX(ZX7)
local real y1=GetUnitY(ZX7)
local real x2=x
local real y2=y
local real TA9=J77(x1,y1,x2,y2)
local integer BC7=GetUnitAbilityLevel(ZX7,1093812545)
local unit Y27=CreateUnit(GetOwningPlayer(ZX7),1747993673,x1,y1,TA9)
call SetUnitScale(Y27,1.5,1.5,1.5)
call SaveUnitHandle(L7,(I97),(45),(Y27))
call SaveInteger(L7,(I97),(5),(BC7))
call SaveGroupHandle(L7,(I97),(22),(g))
call SaveReal(L7,(I97),($D),((TA9)*1.))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveReal(L7,(I97),(20),((VW9)*1.))
call TriggerRegisterTimerEvent(t,.015,true)
call TriggerAddCondition(t,Condition(function X6G))
set t=null
set Y27=null
set g=null
endfunction
function X0G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local boolean X5G=(LoadBoolean(L7,(I97),(95)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093812546,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093812545,true)
call DestroyEffect((LoadEffectHandle(L7,(I97),($AF))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if X5G==false and GetEventDamage()>2 and GetEventDamage()<$BB8 and IsUnitIllusion(IH7)==false then
call SaveReal(L7,(I97),(20),(((LoadReal(L7,(I97),(20)))+GetEventDamage())*1.))
call YN7(IH7,GetEventDamage())
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
if GetSpellAbilityId()==1093812545 then
call DestroyEffect((LoadEffectHandle(L7,(I97),($AF))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
call SaveBoolean(L7,(I97),(95),(true))
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093812546 then
call X1G(ZX7,(LoadReal(L7,(I97),(20))),GetSpellTargetX(),GetSpellTargetY())
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093812546,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093812545,true)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
else
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093812546,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093812545,true)
call DestroyEffect((LoadEffectHandle(L7,(I97),($AF))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function X2G takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call XF7(ZX7,1093812546)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093812546,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093812545,false)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_SPELL_ENDCAST)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerRegisterTimerEvent(t,20,false)
call TriggerAddCondition(t,Condition(function X0G))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveBoolean(L7,(I97),(95),(false))
call SaveEffectHandle(L7,(I97),($AF),(AddSpecialEffectTarget("war3mapImported\\WispShellBlue_2.mdx",ZX7,"origin")))
call SaveEffectHandle(L7,(I97),($B0),(AddSpecialEffectTarget("war3mapImported\\DivineWrathTarget.mdx",IH7,"origin")))
set ZX7=null
set IH7=null
set t=null
endfunction
function X_G takes nothing returns boolean
if GetSpellAbilityId()==1093812545 then
call X2G()
endif
return false
endfunction
function Register_DivineWrath takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function X_G))
set t=null
endfunction
function Y4G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT or GetSpellAbilityId()==1093812804 then
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093812803,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093812804,false)
call UnitRemoveAbility(ZX7,1097167980)
call UnitRemoveAbility(ZX7,1093812787)
call UnitRemoveAbility(ZX7,1093812784)
call UnitRemoveAbility(ZX7,1093812785)
call UnitRemoveAbility(ZX7,1093812786)
call UnitRemoveAbility(ZX7,1110459954)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
return false
endfunction
function Y7G takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093812803)
call TriggerRegisterTimerEvent(t,5,false)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Y4G))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call UnitAddAbility(ZX7,1093812804)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093812803,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093812804,true)
call UnitAddAbility(ZX7,1097167980)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1097167980,false)
if BC7==1 then
call UnitAddAbility(ZX7,1093812787)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093812787,false)
elseif BC7==2 then
call UnitAddAbility(ZX7,1093812784)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093812784,false)
elseif BC7==3 then
call UnitAddAbility(ZX7,1093812785)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093812785,false)
elseif BC7==4 then
call UnitAddAbility(ZX7,1093812786)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093812786,false)
endif
set t=null
set ZX7=null
endfunction
function Y8G takes nothing returns boolean
if GetSpellAbilityId()==1093812803 then
call Y7G()
endif
return false
endfunction
function Register_Wraith takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Y8G))
set t=null
endfunction
function Y9G takes unit ZX7,unit PZE,unit IH7,integer BC7 returns nothing
call BA7(ZX7,IH7,1.25+.25*BC7)
call B67(ZX7,IH7,1,40*BC7)
call KillUnit(PZE)
endfunction
function YDG takes nothing returns boolean
if(IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IN4)) or AK7(GetFilterUnit())==false)then
return IsUnitInGroup(GetFilterUnit(),FV7)==false
endif
return false
endfunction
function YEG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local group g
local integer i=1
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real x=(LoadReal(L7,(I97),(6)))
local real y=(LoadReal(L7,(I97),(7)))
local real a=(LoadReal(L7,(I97),($89)))
local unit PZE
local unit IH7
local real Y_7=(LoadReal(L7,(I97),(47)))
local real Z47=(LoadReal(L7,(I97),(48)))
local group BQ9=(LoadGroupHandle(L7,(I97),($BB)))
set FV7=BQ9
set x=X17(x+$C*Cos(a))
set y=X07(y+$C*Sin(a))
call SaveReal(L7,(I97),(6),((x)*1.))
call SaveReal(L7,(I97),(7),((y)*1.))
if GetTriggerEvalCount(t)>39 then
loop
exitwhen i>3
call KillUnit((LoadUnitHandle(L7,(I97),(393+i-1))))
set i=i+1
endloop
call WR7(BQ9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
set g=WS7()
set IN4=ZX7
call GroupEnumUnitsInRange(g,x,y,275,Condition(function YDG))
loop
exitwhen i>3
if(LoadBoolean(L7,(I97),(511+i-1)))==false then
set PZE=(LoadUnitHandle(L7,(I97),(393+i-1)))
set x=(LoadReal(L7,(I97),(549+i-1)))
set y=(LoadReal(L7,(I97),(567+i-1)))
set x=X17(x+$C*Cos(a))
set y=X07(y+$C*Sin(a))
call SaveReal(L7,(I97),(549+i-1),((x)*1.))
call SaveReal(L7,(I97),(567+i-1),((y)*1.))
call SetUnitX(PZE,x)
call SetUnitY(PZE,y)
set IH7=GroupPickRandomUnit(g)
if IH7!=null then
call GroupRemoveUnit(g,IH7)
call SaveInteger(L7,(GetHandleId((IH7))),((4314)),(1))
call SaveBoolean(L7,(I97),(511+i-1),(true))
call Y9G(ZX7,PZE,IH7,GetUnitAbilityLevel(ZX7,1093812788))
endif
endif
set i=i+1
endloop
call WR7(g)
set g=null
set PZE=null
set IH7=null
endif
set t=null
set ZX7=null
return false
endfunction
function YFG takes nothing returns nothing
local real Y_7=GetSpellTargetX()
local real Z47=GetSpellTargetY()
local unit ZX7=GetTriggerUnit()
local real x=GetUnitX(ZX7)
local real y=GetUnitY(ZX7)
local real a=J77(x,y,Y_7,Z47)*bj_DEGTORAD
local real b
local unit BB7
local real Z97=X17(x+500*Cos(a))
local real ZD7=X07(y+500*Sin(a))
local integer i=0
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local real P59
local integer BC7=GetUnitAbilityLevel(ZX7,1093812788)
local integer U57=1747993678
set i=i+1
set b=a*bj_RADTODEG+90
if b>360 then
set b=b-360
endif
set b=b*bj_DEGTORAD
set BB7=CreateUnit(GetOwningPlayer(ZX7),U57,x+100*Cos(a)+100*Cos(b),y+100*Sin(a)+100*Sin(b),a*bj_RADTODEG)
call SaveUnitHandle(L7,(I97),(393+i-1),(BB7))
call SaveBoolean(L7,(I97),(511+i-1),(false))
call SaveReal(L7,(I97),(549+i-1),((GetUnitX(BB7))*1.))
call SaveReal(L7,(I97),(567+i-1),((GetUnitY(BB7))*1.))
set i=i+1
set b=a*bj_RADTODEG-90
if b<0 then
set b=360+b
endif
set b=b*bj_DEGTORAD
set BB7=CreateUnit(GetOwningPlayer(ZX7),U57,x+100*Cos(a)+100*Cos(b),y+100*Sin(a)+100*Sin(b),a*bj_RADTODEG)
call SaveUnitHandle(L7,(I97),(393+i-1),(BB7))
call SaveBoolean(L7,(I97),(511+i-1),(false))
call SaveReal(L7,(I97),(549+i-1),((GetUnitX(BB7))*1.))
call SaveReal(L7,(I97),(567+i-1),((GetUnitY(BB7))*1.))
set i=i+1
set BB7=CreateUnit(GetOwningPlayer(ZX7),U57,x+100*Cos(a),y+100*Sin(a),a*bj_RADTODEG)
call SaveUnitHandle(L7,(I97),(393+i-1),(BB7))
call SaveBoolean(L7,(I97),(511+i-1),(false))
call SaveReal(L7,(I97),(549+i-1),((GetUnitX(BB7))*1.))
call SaveReal(L7,(I97),(567+i-1),((GetUnitY(BB7))*1.))
call TriggerRegisterTimerEvent(t,.015,true)
call TriggerAddCondition(t,Condition(function YEG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveReal(L7,(I97),(6),((x)*1.))
call SaveReal(L7,(I97),(7),((y)*1.))
call SaveReal(L7,(I97),($89),((a)*1.))
call SaveReal(L7,(I97),(47),((Z97)*1.))
call SaveReal(L7,(I97),(48),((ZD7)*1.))
call SaveGroupHandle(L7,(I97),($BB),(WS7()))
set ZX7=null
set BB7=null
set t=null
endfunction
function YGG takes nothing returns boolean
if GetSpellAbilityId()==1093812788 then
call YFG()
endif
return false
endfunction
function PO8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YGG))
set t=null
endfunction
function YHG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer WF8=GetTriggerEvalCount(t)
local integer BC7=GetUnitAbilityLevel(ZX7,1093812789)
if WF8==6 then
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call UnitShareVision(IH7,GetOwningPlayer(ZX7),false)
endif
call B67(ZX7,IH7,1,20+$A*BC7)
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function YIG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function YHG))
call SaveUnitHandle(L7,(I97),(2),(GetTriggerUnit()))
call SaveUnitHandle(L7,(I97),(17),(GetEnumUnit()))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("Abilities\\Weapons\\BansheeMissile\\BansheeMissile.mdl",GetEnumUnit(),"overhead")))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl",GetEnumUnit(),"origin"))
call UnitShareVision(GetEnumUnit(),GetOwningPlayer(GetTriggerUnit()),true)
set t=null
endfunction
function YJG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local group g=WS7()
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(ZX7),GetUnitY(ZX7),0)
call UnitAddAbility(BB7,1093812791)
call IssueImmediateOrderById(BB7,$D0291)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl",GetUnitX(ZX7),GetUnitY(ZX7)))
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),625,Condition(function AW7))
call ForGroup(g,function YIG)
call WR7(g)
set g=null
set ZX7=null
set BB7=null
endfunction
function YKG takes nothing returns boolean
if GetSpellAbilityId()==1093812789 then
call YJG()
endif
return false
endfunction
function Register_Miasma takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YKG))
set t=null
endfunction
function GetTotalMinutes takes nothing returns integer
return R2I((TimerGetElapsed(W))/60)
endfunction
function YMG takes unit ZX7,integer YNG returns nothing
local integer D7D=GetHeroAgi(ZX7,false)
local integer D8D=GetHeroStr(ZX7,false)
local integer YOG=GetHeroInt(ZX7,false)
call SetHeroAgi(ZX7,D7D-YNG,true)
call SetHeroStr(ZX7,D8D-YNG,true)
call SetHeroInt(ZX7,YOG-YNG,true)
endfunction
function YPG takes unit ZX7,integer YNG returns nothing
local integer D7D=GetHeroAgi(ZX7,false)
local integer D8D=GetHeroStr(ZX7,false)
local integer YOG=GetHeroInt(ZX7,false)
call SetHeroAgi(ZX7,D7D+YNG,true)
call SetHeroStr(ZX7,D8D+YNG,true)
call SetHeroInt(ZX7,YOG+YNG,true)
endfunction
function YQG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer YRG=(LoadInteger(L7,(I97),(744)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093814066)
local integer YQ8=(R2I((TimerGetElapsed(W))/60))
local real YSG=BC7+1+(.1+.1*BC7)*YQ8
local integer YTG=3+3*BC7+R2I((.1+.1*BC7)*YQ8)
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093814066 then
if IH7!=null and IH7!=GetSpellTargetUnit()then
call UnitRemoveAbility(IH7,1093814607)
call YMG(IH7,YRG)
call YMG(ZX7,YRG)
call SaveInteger(L7,(I97),(744),(0))
endif
set IH7=GetSpellTargetUnit()
call SaveUnitHandle(L7,(I97),(17),(IH7))
call XF7(IH7,1093814607)
call YS7("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkZapTarget.mdl",ZX7,"chest",1.9)
call YS7("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkZapTarget.mdl",IH7,"chest",1.9)
return false
else
return false
endif
endif
if IH7==null then
elseif XH7(IH7)or XH7(ZX7)or KE7(ZX7,IH7)>$578 then
call YMG(ZX7,YRG)
call YMG(IH7,YRG)
call SaveInteger(L7,(I97),(744),(0))
call UnitRemoveAbility(ZX7,1093814607)
call UnitRemoveAbility(IH7,1093814607)
else
if GetUnitAbilityLevel(ZX7,1093814607)==0 then
call XF7(ZX7,1093814607)
endif
if GetUnitAbilityLevel(IH7,1093814607)==0 then
call XF7(IH7,1093814607)
endif
if YRG!=YTG then
call YPG(ZX7,YTG-YRG)
call YPG(IH7,YTG-YRG)
call SaveInteger(L7,(I97),(744),(YTG))
endif
call SetUnitState(ZX7,UNIT_STATE_LIFE,GetUnitState(ZX7,UNIT_STATE_LIFE)+YSG)
call SetUnitState(IH7,UNIT_STATE_LIFE,GetUnitState(IH7,UNIT_STATE_LIFE)+YSG)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function YUG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YQG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(null))
call SaveInteger(L7,(I97),(744),(0))
set t=null
set ZX7=null
endfunction
function YVG takes nothing returns boolean
if GetLearnedSkill()==1093814066 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093814066)==1 then
call YUG()
endif
return false
endfunction
function Register_Brotherhood takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function YVG))
set t=null
endfunction
function YWG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED or(GetEventDamage()>30 and GetEventDamageSource()!=GetTriggerUnit()and TX7(GetOwningPlayer(GetEventDamageSource())))then
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
call YN7(ZX7,GetEventDamage())
endif
call UnitRemoveAbility(ZX7,1093814604)
call UnitRemoveAbility(ZX7,1093814605)
call UnitRemoveAbility(ZX7,1093812825)
call UnitRemoveAbility(ZX7,1093814606)
call UnitRemoveAbility(ZX7,1110459956)
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
return false
endfunction
function YXG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetEnumUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093812822)
local real d
local integer id
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
if BC7==1 then
set d=4
set id=1093814604
elseif BC7==2 then
set d=5
set id=1093814605
elseif BC7==3 then
set d=6
set id=1093812825
elseif BC7==4 then
set d=7
set id=1093814606
endif
call XF7(IH7,id)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),id,false)
call TriggerAddCondition(t,Condition(function YWG))
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerRegisterTimerEvent(t,d,false)
call SaveUnitHandle(L7,(I97),(2),(IH7))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIsp\\SpeedTarget.mdl",IH7,"origin")))
set ZX7=null
set IH7=null
set t=null
endfunction
function YYG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local group g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),375,Condition(function B97))
call ForGroup(g,function YXG)
call WR7(g)
set g=null
set ZX7=null
endfunction
function YZG takes nothing returns boolean
if GetSpellAbilityId()==1093812822 then
call YYG()
endif
return false
endfunction
function Register_Gallop takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YZG))
endfunction
function YAG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IG7=(LoadUnitHandle(L7,(I97),(17)))
local integer YBG=(LoadInteger(L7,(I97),(59)))
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call UnitRemoveAbility(ZX7,YBG)
call UnitRemoveAbility(ZX7,1110459978)
call UnitRemoveAbility(ZX7,1110459979)
elseif GetEventDamageSource()==ZX7 and GetEventDamage()>0 then
call TriggerRegisterTimerEvent(t,0.3,false)
endif
set t=null
set ZX7=null
set IG7=null
return false
endfunction
function YCG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IG7=GetAttacker()
local integer BC7=GetUnitAbilityLevel(ZX7,1093813593)
local integer id
if ZX7==GetTriggerUnit()and GetRandomInt(1,100)<=25 and OT7(ZX7,"4316")==false and IsUnitAlly(ZX7,GetOwningPlayer(IG7))==false then
call O37(ZX7,"4316",3.2-0.6*BC7)
if BC7==1 then
set id=1093814084
elseif BC7==2 then
set id=1093814085
elseif BC7==3 then
set id=1093814086
elseif BC7==4 then
set id=1093814083
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),id,false)
call XF7(ZX7,id)
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerRegisterUnitEvent(t,IG7,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,1.,false)
call TriggerAddCondition(t,Condition(function YAG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IG7))
call SaveInteger(L7,(I97),(59),(id))
endif
set t=null
set ZX7=null
set IG7=null
return false
endfunction
function Y3G takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function YCG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set ZX7=null
set t=null
endfunction
function Y6G takes nothing returns boolean
if GetLearnedSkill()==1093813593 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093813593)==1 then
call Y3G()
endif
return false
endfunction
function O68 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function Y6G))
set t=null
endfunction
function YLG takes unit u,integer d returns nothing
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer UDD
if d<1 then
call UnitRemoveAbility(u,D17[0])
call UnitRemoveAbility(u,D17[1])
call UnitRemoveAbility(u,D17[2])
call UnitRemoveAbility(u,D17[3])
call UnitRemoveAbility(u,D17[4])
call UnitRemoveAbility(u,D17[5])
call UnitRemoveAbility(u,D17[6])
call UnitRemoveAbility(u,D17[7])
call UnitRemoveAbility(u,D17[8])
call UnitRemoveAbility(u,D17[9])
call UnitRemoveAbility(u,D17[10])
call UnitRemoveAbility(u,D17[11])
return
endif
loop
exitwhen c==0
set c=a/2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set UDD=11
set i=0
loop
exitwhen i>UDD
if b[i]==1 then
call XF7(u,D17[i])
else
call UnitRemoveAbility(u,D17[i])
endif
set i=i+1
endloop
endfunction
function Y1G takes unit ZX7,integer BC7,unit IH7 returns nothing
local integer I97=GetHandleId(ZX7)
local integer Y0G=(LoadInteger(L7,(I97),(739)))
if IsUnitType(IH7,UNIT_TYPE_HERO) then
set Y0G=Y0G+6+4*BC7
call SaveInteger(L7,(I97),(739),(Y0G))
call YW7(GetUnitName(ZX7)+" Winner!!",5,ZX7,.03,$FF,$FF,0,$FF)
call YLG(ZX7,Y0G)
endif
endfunction
function Y5G takes unit u returns boolean
return GetUnitAbilityLevel(u,1113815395)==0 or VP7(u)==false
endfunction
function Y2G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=(LoadInteger(L7,(I97),(5)))
local real VM8=(LoadReal(L7,(I97),(442)))
local unit BB7
if GetTriggerEvalCount(t)==1 then
set BB7=CreateUnit(GetOwningPlayer(IH7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
call UnitAddAbility(BB7,1093814069)
call IssueTargetOrderById(BB7,$D0267,IH7)
set BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(ZX7),GetUnitY(ZX7),0)
call UnitAddAbility(BB7,1093814069)
call IssueTargetOrderById(BB7,$D0267,ZX7)
set BB7=null
endif
if GetTriggerEventId()==EVENT_WIDGET_DEATH or VM8<(TimerGetElapsed(W))or Y5G(ZX7)==false or Y5G(IH7)==false or Ma(ZX7,IH7)>$7D0 then
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
if GetTriggerUnit()==ZX7 then
call Y1G(IH7,BC7,GetTriggerUnit())
else
call Y1G(ZX7,BC7,GetTriggerUnit())
endif
endif
call UnitRemoveAbility(ZX7,1110459975)
call UnitRemoveAbility(IH7,1110459975)
call DestroyEffect((LoadEffectHandle(L7,(I97),($AF))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call SetUnitPathing(ZX7,true)
call SetUnitPathing(IH7,true)
elseif GetIssuedOrderId()!=$D0005 then
call SetUnitPathing(ZX7,false)
call SetUnitPathing(IH7,false)
call DisableTrigger(t)
call IssueTargetOrderById(ZX7,$D000F,IH7)
call IssueTargetOrderById(IH7,$D000F,ZX7)
call EnableTrigger(t)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function Y_G takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093813065)+GetUnitAbilityLevel(ZX7,1093817154)
local trigger t
local integer I97
local boolean KMv=GetUnitAbilityLevel(ZX7,1093817154)>0
call SetUnitPathing(ZX7,false)
call SetUnitPathing(IH7,false)
call IssueTargetOrderById(ZX7,$D000F,IH7)
call IssueTargetOrderById(IH7,$D000F,ZX7)
set t=CreateTrigger()
set I97=GetHandleId(t)
call SaveEffectHandle(L7,(I97),($AF),(AddSpecialEffectTarget("war3mapImported\\DuelFX.mdx",ZX7,"overhead")))
call SaveEffectHandle(L7,(I97),($B0),(AddSpecialEffectTarget("war3mapImported\\DuelFX.mdx",IH7,"overhead")))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveInteger(L7,(I97),(5),(BC7))
if KMv then
call SaveReal(L7,(I97),(442),(((TimerGetElapsed(W))+9999999)*1.))
else
call SaveReal(L7,(I97),(442),(((TimerGetElapsed(W))+0.75*BC7+3.25)*1.))
endif
call TriggerAddCondition(t,Condition(function Y2G))
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterTimerEvent(t,.01,false)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_ISSUED_ORDER)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_ISSUED_ORDER)
set ZX7=null
set IH7=null
set t=null
endfunction
function Z4G takes nothing returns boolean
if(GetSpellAbilityId()==1093813065 or GetSpellAbilityId()==1093817154)and WQ7(GetSpellTargetUnit())==false then
call Y_G()
endif
return false
endfunction
function O18 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Z4G))
set t=null
set D17[0]=1093814091
set D17[1]=1093814090
set D17[2]=1093814089
set D17[3]=1093814088
set D17[4]=1093814094
set D17[5]=1093814095
set D17[6]=1093814093
set D17[7]=1093814092
set D17[8]=1093814096
set D17[9]=1096429633
set D17[10]=1096429634
set D17[11]=1096429635
endfunction
function Z7G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=(LoadInteger(L7,(I97),(5)))
local integer WF8=(LoadInteger(L7,(I97),(34)))
local real d
local unit IG7
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
set d=GetEventDamage()
if C67(d)and d>50 then
set WF8=WF8+1
call SaveInteger(L7,(I97),(34),(WF8))
set IG7=GetEventDamageSource()
if IsUnitType(IG7,UNIT_TYPE_HERO)==false and GetUnitAbilityLevel(IG7,1093678162)!=0 then
set IG7=M7[GetPlayerId(GetOwningPlayer(IG7))]
endif
call YN7(ZX7,d)
set d=d*(.4+.2*BC7)
if IsUnitAlly(IH7,GetOwningPlayer(ZX7)) then
call SetUnitState(IH7,UNIT_STATE_LIFE,GetUnitState(IH7,UNIT_STATE_LIFE)+d)
else
call B67(ZX7,IH7,3,d)
endif
endif
endif
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED or WF8==3 then
call DestroyEffect((LoadEffectHandle(L7,(I97),($AF))))
call DestroyEffect((LoadEffectHandle(L7,(I97),($B0))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function Z8G takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093814609)
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call YS7("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkZapTarget.mdl",ZX7,"chest",1.9)
call YS7("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkZapTarget.mdl",IH7,"chest",1.9)
call SaveEffectHandle(L7,(I97),($AF),(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkTarget.mdl",ZX7,"chest")))
call SaveEffectHandle(L7,(I97),($B0),(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkTarget.mdl",IH7,"chest")))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveInteger(L7,(I97),(5),(BC7))
call SaveInteger(L7,(I97),(34),(0))
call TriggerAddCondition(t,Condition(function Z7G))
call TriggerRegisterTimerEvent(t,$A,false)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_DAMAGED)
set ZX7=null
set IH7=null
set t=null
endfunction
function Z9G takes nothing returns boolean
if GetSpellAbilityId()==1093814609 then
call Z8G()
endif
return false
endfunction
function Register_Deflection takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Z9G))
set t=null
endfunction
function ZDG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=(LoadInteger(L7,(I97),(5)))
local integer WF8=(LoadInteger(L7,(I97),(34)))
set WF8=WF8+1
call SaveInteger(L7,(I97),(34),(WF8))
if GetTriggerEventId()==EVENT_WIDGET_DEATH or WF8>50 or GetUnitAbilityLevel(IH7,D07[BC7])==0 then
call UnitRemoveAbility(IH7,D07[BC7])
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
call SetUnitState(IH7,UNIT_STATE_LIFE,GetUnitState(IH7,UNIT_STATE_LIFE)+2+1*BC7)
if ModuloInteger(GetTriggerEvalCount(t),$A)==1 then
call YS7("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkZapTarget.mdl",IH7,"chest",1.9)
endif
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function ZEG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093814834)
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call YZ8(IH7)
call YW8(IH7,0,0)
call XF7(IH7,D07[BC7])
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),D07[BC7],false)
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\InnerFire\\InnerFireTarget.mdl",IH7,"overhead")))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveInteger(L7,(I97),(5),(BC7))
call SaveInteger(L7,(I97),(34),(0))
call TriggerAddCondition(t,Condition(function ZDG))
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerEvaluate(t)
set ZX7=null
set IH7=null
set t=null
endfunction
function ZFG takes nothing returns boolean
if GetSpellAbilityId()==1093814834 then
call ZEG()
endif
return false
endfunction
function O38 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZFG))
set D07[1]=1093814841
set D07[2]=1093814849
set D07[3]=1093814840
set D07[4]=1093814839
set t=null
endfunction
function ZGG takes unit ZX7,integer BC7 returns nothing
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,GetUnitX(ZX7),GetUnitY(ZX7),0)
call XF7(BB7,1093814851)
call SetUnitAbilityLevel(BB7,1093814851,BC7/3)
call IssueTargetOrderById(BB7,$D0085,ZX7)
set BB7=null
endfunction
function ZHG takes nothing returns nothing
if IsUnitType(GetEnumUnit(),UNIT_TYPE_SUMMONED) or IsUnitIllusion(GetEnumUnit()) then
call B67(GetTriggerUnit(),GetEnumUnit(),1,GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)*.25)
endif
call B67(GetTriggerUnit(),GetEnumUnit(),16,40*D_7+(12+2*D_7)*D57+(5+15*D_7)*D27)
endfunction
function ZIG takes nothing returns nothing
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO) then
set D27=D27+1
else
set D57=D57+1
endif
endfunction
function ZJG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local integer BC7=GetUnitAbilityLevel(ZX7,1093814850)
local group g=WS7()
call DestroyEffect(AddSpecialEffect("war3mapImported\\OverwhelmingOdds.mdx",x,y))
call GroupEnumUnitsInRange(g,x,y,330+25,Condition(function AW7))
set D57=0
set D27=0
set D_7=BC7
call ForGroup(g,function ZIG)
call ForGroup(g,function ZHG)
call WR7(g)
call ZGG(ZX7,9*D27+3*D57)
set ZX7=null
set g=null
endfunction
function ZKG takes nothing returns boolean
if GetSpellAbilityId()==1093814850 then
call ZJG()
endif
return false
endfunction
function OL8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZKG))
call X_7(1093814851)
set t=null
endfunction
function ZMG takes nothing returns nothing
set E97=true
call B67(E47,GetEnumUnit(),1,((200+400*E87)/E77)/24)
set E97=false
endfunction
function ZNG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real x=(LoadReal(L7,(I97),(6)))
local real y=(LoadReal(L7,(I97),(7)))
local group g
if GetUnitAbilityLevel(ZX7,1093817153)==0 and GetTriggerEvalCount(t)>24 then
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif GetUnitAbilityLevel(ZX7,1093812807)==0 and GetTriggerEvalCount(t)>120 then
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
set g=WS7()
set IN4=ZX7
call GroupEnumUnitsInRange(g,x,y,170+25,Condition(function A_7))
set E87=GetUnitAbilityLevel(ZX7,1093812807)
if E87==0 then
set E87=GetUnitAbilityLevel(ZX7,1093817153)
endif
set E47=ZX7
set E77=CountUnitsInGroup(g)
call ForGroup(g,function ZMG)
call WR7(g)
set g=null
endif
set t=null
set ZX7=null
return false
endfunction
function ZOG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local string s="war3mapImported\\DivineWrathTarget.mdx"
local location l=GetSpellTargetLoc()
call PlaySoundAtPointBJ(E67,100,l,0)
call RemoveLocation(l)
set l=null
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function ZNG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveReal(L7,(I97),(6),((x)*1.))
call SaveReal(L7,(I97),(7),((y)*1.))
call DestroyEffect(AddSpecialEffect(s,x,y))
set t=null
set ZX7=null
endfunction
function ZPG takes nothing returns boolean
if GetSpellAbilityId()==1093812807 or GetSpellAbilityId()==1093817153 then
call ZOG()
endif
return false
endfunction
function O58 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZPG))
set t=null
set E67=CreateSound("Abilities\\Spells\\Demon\\RainOfFire\\RainOfFireTarget2.wav",false,true,true,$A,$A,"SpellsEAX")
call SetSoundParamsFromLabel(E67,"StarfallTarget")
call SetSoundDuration(E67,$BB8)
endfunction
function ZQG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093812820)
local real d
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
set d=GetEventDamage()*(.2+.05*BC7)
else
call SaveInteger(L7,(GetHandleId((IH7))),((4317)),(2))
call UnitRemoveAbility(IH7,1093814582)
call UnitRemoveAbility(IH7,1093814581)
call UnitRemoveAbility(IH7,1093814583)
call UnitRemoveAbility(IH7,1093814584)
call UnitRemoveAbility(IH7,1110459987)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function ZRG takes unit ZX7,unit IH7 returns nothing
local trigger t
local integer I97
local integer BC7=GetUnitAbilityLevel(ZX7,1093812820)
local unit LastTarget=(LoadUnitHandle(L7,(GetHandleId(ZX7)),(741)))
local integer WF8=(LoadInteger(L7,(GetHandleId(IH7)),(742)))
local integer id
if((LoadInteger(L7,(GetHandleId((IH7))),((4317))))==1) then
call SaveInteger(L7,(GetHandleId(IH7)),(742),(0))
call SaveReal(L7,(GetHandleId(IH7)),(743),(((TimerGetElapsed(W)))*1.))
else
if(LoadReal(L7,(GetHandleId(IH7)),(743)))+$A<(TimerGetElapsed(W))then
set WF8=1
else
set WF8=WF8+1
endif
if IsUnitType(IH7,UNIT_TYPE_HERO) or IsUnitIllusion(IH7) then
call YX7(GetOwningPlayer(ZX7),I2S(WF8)+"!",2,IH7,.026,50,0,$FF,$D8)
endif
call SaveInteger(L7,(GetHandleId(IH7)),(742),(WF8))
call SaveReal(L7,(GetHandleId(IH7)),(743),(((TimerGetElapsed(W)))*1.))
if WF8==4 then
call SaveInteger(L7,(GetHandleId(IH7)),(742),(0))
call SaveInteger(L7,(GetHandleId((IH7))),((4317)),(1))
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.5+.5*BC7,false)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerAddCondition(t,Condition(function ZQG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
if BC7==1 then
set id=1093814582
elseif BC7==2 then
set id=1093814581
elseif BC7==3 then
set id=1093814583
elseif BC7==4 then
set id=1093814584
endif
call XF7(IH7,id)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),id,false)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\FarseerMissile_Purple_2.mdx",IH7,"chest"))
endif
endif
set t=null
endfunction
function ZSG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==ZX7 then
call DisableTrigger(t)
call ZRG(ZX7,IH7)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
else
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function ZTG takes nothing returns nothing
local trigger t=CreateTrigger()
local unit IH7=GetTriggerUnit()
local unit ZX7=GetAttacker()
local integer I97=GetHandleId(t)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,1.2,false)
call TriggerAddCondition(t,Condition(function ZSG))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set IH7=null
set ZX7=null
set t=null
endfunction
function ZUG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
if GetAttacker()==ZX7 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(ZX7))then
if OT7(ZX7,"4315")==false then
call O37(ZX7,"4315",.3)
call ZTG()
endif
endif
set t=null
set ZX7=null
return false
endfunction
function ZVG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function ZUG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set t=null
set ZX7=null
endfunction
function ZWG takes nothing returns boolean
if GetLearnedSkill()==1093812820 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093812820)==1 then
call ZVG()
endif
return false
endfunction
function Register_Amp takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function ZWG))
set t=null
endfunction
function ZXG takes nothing returns nothing
local integer I97=GetHandleId(GetTriggeringTrigger())
local unit ZX7=IN4
local unit IH7=IP4
local integer BC7=GetUnitAbilityLevel(ZX7,1093812805)
local real VW9=40+20*BC7+1.6*GetHeroInt(ZX7,true)
set E97=true
call B67(ZX7,IH7,1,VW9)
set E97=false
set ZX7=null
set IH7=null
endfunction
function ZYG takes nothing returns nothing
local trigger t=ZF7(GetTriggerUnit(),GetSpellTargetUnit(),1747993681,"ZXG",500)
local integer I97=GetHandleId(t)
set t=null
endfunction
function ZZG takes nothing returns boolean
if GetSpellAbilityId()==1093812805 and WQ7(GetSpellTargetUnit())==false then
call ZYG()
endif
return false
endfunction
function O28 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZZG))
set t=null
endfunction
function ZAG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local real d
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
else
call UnitRemoveAbility(IH7,1093814360)
call UnitRemoveAbility(IH7,1093814576)
call UnitRemoveAbility(IH7,1093814361)
call UnitRemoveAbility(IH7,1093814362)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set IH7=null
set t=null
return false
endfunction
function ZBG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093814350)
local real K47=2+BC7
local integer id=1093814360
if BC7==1 then
set id=1093814360
elseif BC7==2 then
set id=1093814576
elseif BC7==3 then
set id=1093814361
elseif BC7==4 then
set id=1093814362
endif
call XF7(IH7,id)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),id,false)
call TriggerRegisterTimerEvent(t,K47,false)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function ZAG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
set ZX7=null
set IH7=null
set t=null
endfunction
function ZCG takes nothing returns boolean
if GetSpellAbilityId()==1093814350 and IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO) and WQ7(GetSpellTargetUnit())==false then
call ZBG()
endif
return false
endfunction
function O_8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZCG))
set t=null
endfunction
function Z3G takes nothing returns nothing
local integer I97=GetHandleId(GetTriggeringTrigger())
local unit ZX7=IN4
local unit IH7=IP4
local real x=GetUnitX(IH7)
local real y=GetUnitY(IH7)
local integer BC7=GetUnitAbilityLevel(ZX7,1093814612)
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,x,y,0)
call UnitAddAbility(BB7,1093814613)
call SetUnitAbilityLevel(BB7,1093814613,BC7)
call IssueImmediateOrderById(BB7,$D0080)
set ZX7=null
set IH7=null
set BB7=null
endfunction
function Z6G takes unit ZX7,group g returns unit
local unit ZLG=null
local real d=99999
local unit EQE=FirstOfGroup(g)
call GroupRemoveUnit(g,EQE)
loop
exitwhen EQE==null
if KE7(ZX7,EQE)<d then
set d=KE7(ZX7,EQE)
set ZLG=EQE
endif
set EQE=FirstOfGroup(g)
call GroupRemoveUnit(g,EQE)
endloop
return ZLG
endfunction
function Z1G takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=null
local group g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),$640+25,Condition(function A27))
set IH7=Z6G(ZX7,g)
call WR7(g)
if IH7!=null then
call ZF7(ZX7,IH7,1747993910,"Z3G",800)
endif
set g=null
set IH7=null
set ZX7=null
endfunction
function Z0G takes nothing returns boolean
if GetSpellAbilityId()==1093814612 then
call Z1G()
endif
return false
endfunction
function O08 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Z0G))
set t=null
endfunction
function Z5G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093813335)
local unit VX8
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if GetTriggerEventId()==EVENT_UNIT_DEATH and IsPlayerEnemy(GetOwningPlayer(GetKillingUnit()),GetOwningPlayer(IH7)) then
set VX8=GetKillingUnit()
if C37(VX8)then
set VX8=(M7[GetPlayerId(GetOwningPlayer((VX8)))])
endif
if IsUnitType(VX8,UNIT_TYPE_STRUCTURE) then
call B67(ZX7,VX8,1,25*BC7)
else
call B67(ZX7,VX8,1,100*BC7)
endif
call BA7(ZX7,GetKillingUnit(),.5+.5*BC7)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function Z2G takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,$A,false)
call TriggerAddCondition(t,Condition(function Z5G))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("war3mapImported\\GaiaShield.mdx",IH7,"origin")))
set t=null
set ZX7=null
set IH7=null
endfunction
function Z_G takes nothing returns boolean
if GetSpellAbilityId()==1093813335 then
call Z2G()
endif
return false
endfunction
function Register_DeathWatch takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Z_G))
set t=null
endfunction
function A4G takes nothing returns nothing
if KE7(ED7,GetEnumUnit())>EE7 then
call UnitRemoveAbility(GetEnumUnit(),1093813337)
endif
endfunction
function A7G takes nothing returns nothing
call UnitRemoveAbility(GetEnumUnit(),1093813337)
endfunction
function A8G takes nothing returns boolean
return(IsUnitEnemy(IN4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and XH7(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or Z_7(GetFilterUnit())))!=null
endfunction
function A9G takes nothing returns nothing
call GroupAddUnit(EF7,GetEnumUnit())
call UnitAddAbility(GetEnumUnit(),1093813337)
endfunction
function ADG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit BB7=(LoadUnitHandle(L7,(I97),(19)))
local group BQ9=(LoadGroupHandle(L7,(I97),($BB)))
local group g
local integer BC7=GetUnitAbilityLevel(ZX7,1093813336)
if XH7(BB7)or GetTriggerEvalCount(t)>$C8 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call ForGroup(BQ9,function A7G)
call WR7(BQ9)
else
set EE7=$FA+25
set ED7=BB7
set IN4=ZX7
call ForGroup(BQ9,function A4G)
set EF7=BQ9
set g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(BB7),GetUnitY(BB7),EE7,Condition(function A8G))
call ForGroup(g,function A9G)
call WR7(g)
set g=null
endif
set t=null
set ZX7=null
return false
endfunction
function AEG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local integer id
local unit BB7
local integer BC7=GetUnitAbilityLevel(ZX7,1093813336)
if BC7==1 then
set id=1865429330
elseif BC7==2 then
set id=1865429331
elseif BC7==3 then
set id=1865429329
else
set id=1865429332
endif
set BB7=CreateUnit(GetOwningPlayer(ZX7),id,x,y,0)
call UnitApplyTimedLife(BB7,1112820806,$A)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function ADG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(19),(BB7))
call SaveGroupHandle(L7,(I97),($BB),(WS7()))
set t=null
set ZX7=null
set BB7=null
endfunction
function AFG takes nothing returns boolean
if GetSpellAbilityId()==1093813336 then
call AEG()
endif
return false
endfunction
function Register_RealityShift takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AFG))
set t=null
endfunction
function AGG takes nothing returns nothing
call B67(EG7,GetEnumUnit(),1,50+50*EH7)
endfunction
function AHG takes unit ZX7,real x,real y returns nothing
local unit BB7=CreateUnit(GetOwningPlayer(ZX7),1697656901,x,y,0)
local group g=WS7()
call UnitAddAbility(BB7,1093813553)
call IssuePointOrderById(BB7,$D0270,x,y)
set IN4=ZX7
set EH7=GetUnitAbilityLevel(ZX7,1093813552)
set EG7=ZX7
call GroupEnumUnitsInRange(g,x,y,325,Condition(function AJ7))
call ForGroup(g,function AGG)
call WR7(g)
call DestroyEffect(AddSpecialEffect("",x,y))
set g=null
set BB7=null
endfunction
function AIG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local integer i=0
local unit AJG
local boolean AKG=false
local real x
local real y
local integer I97=GetHandleId(ZX7)
loop
exitwhen i>2 or AKG
set AJG=(LoadUnitHandle(L7,(I97),(724+i)))
if AJG!=null and XH7(AJG)==false then
call KillUnit(AJG)
call RemoveSavedHandle(L7,(I97),(724+i))
set AKG=true
endif
set i=i+1
endloop
if AKG then
set x=GetSpellTargetX()
set y=GetSpellTargetY()
call AHG(ZX7,x,y)
endif
set AJG=null
set ZX7=null
endfunction
function AMG takes nothing returns boolean
if GetSpellAbilityId()==1093813552 then
call AIG()
endif
return false
endfunction
function ANG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit AJG
local integer i=0
local real x
local real y
set I97=GetHandleId(ZX7)
loop
exitwhen i>2
set AJG=(LoadUnitHandle(L7,(I97),(724+i)))
if AJG!=null and XH7(AJG)==false then
set x=GetUnitX(ZX7)
set y=GetUnitY(ZX7)
if i==0 then
set x=x-125
set y=y-125
elseif i==1 then
set x=x+125
set y=y-125
else
set x=x-125
set y=y+125
endif
call SetUnitX(AJG,x)
call SetUnitY(AJG,y)
if GetTriggerEventId()==EVENT_WIDGET_DEATH or XH7(ZX7)then
call KillUnit(AJG)
call RemoveSavedHandle(L7,(I97),(724+i))
endif
endif
set i=i+1
endloop
set AJG=null
set ZX7=null
set t=null
return false
endfunction
function AOG takes unit ZX7,integer ID7 returns nothing
local real x=GetUnitX(ZX7)
local real y=GetUnitY(ZX7)
local unit AJG
if ID7==0 then
set x=x-125
set y=y-125
elseif ID7==1 then
set x=x+125
set y=y-125
else
set x=x-125
set y=y+125
endif
set AJG=CreateUnit(GetOwningPlayer(ZX7),1747993682,x,y,0)
call SaveUnitHandle(L7,(GetHandleId(ZX7)),(724+ID7),(AJG))
set AJG=null
endfunction
function APG takes unit ZX7 returns nothing
local integer i=0
local boolean AQG=false
local integer ARG=-1
local unit AJG
local integer I97=GetHandleId(ZX7)
loop
exitwhen i>2 or AQG
set AJG=(LoadUnitHandle(L7,(I97),(724+i)))
if AJG==null or XH7(AJG)then
set ARG=i
set AQG=true
endif
set i=i+1
endloop
if AQG then
call AOG(ZX7,ARG)
endif
set AJG=null
endfunction
function ASG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093813552)
if XH7(ZX7)==false then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_DEATH then
if IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(ZX7)) and GetUnitAbilityLevel(GetTriggerUnit(),1093678162)==0 then
if KE7(GetTriggerUnit(),ZX7)<$401 and GetRandomInt(0,100)<($A+5*BC7)then
call APG(ZX7)
endif
endif
else
call APG(ZX7)
endif
endif
set t=null
set ZX7=null
return false
endfunction
function ATG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,20,true)
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function ASG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerAddCondition(t,Condition(function ANG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set t=null
set ZX7=null
endfunction
function AUG takes nothing returns boolean
if GetLearnedSkill()==1093813552 and GetUnitAbilityLevel(GetTriggerUnit(),1093813552)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call ATG()
endif
return false
endfunction
function Register_HauntingEchos takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AMG))
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function AUG))
set t=null
endfunction
function AVG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local real TP9=(LoadReal(L7,(I97),(6)))
local real TQ9=(LoadReal(L7,(I97),(7)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093813338)
local real D4D=(30*BC7)/$A
local real a=J47(IH7,ZX7)*bj_DEGTORAD
local real x=TP9+D4D*Cos(a)
local real y=TQ9+D4D*Sin(a)
call SetUnitX(IH7,x)
call SetUnitY(IH7,y)
call SaveReal(L7,(I97),(6),((x)*1.))
call SaveReal(L7,(I97),(7),((y)*1.))
if GetTriggerEvalCount(t)==$A then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call B67(ZX7,IH7,1,$A+$A*BC7)
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function AWG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetEnumUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.025,true)
call TriggerAddCondition(t,Condition(function AVG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveReal(L7,(I97),(6),((GetUnitX(IH7))*1.))
call SaveReal(L7,(I97),(7),((GetUnitY(IH7))*1.))
set t=null
set ZX7=null
set IH7=null
endfunction
function AXG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local integer i=0
local boolean AKG=false
local integer I97
local unit AJG
local group g
if GetSpellAbilityId()==1093813552 then
set I97=GetHandleId(ZX7)
loop
exitwhen i>2
set AJG=(LoadUnitHandle(L7,(I97),(724+i)))
if AJG!=null and XH7(AJG)==false then
set AKG=true
endif
set i=i+1
endloop
set AJG=null
if AKG==false then
set ZX7=null
return
endif
endif
set g=WS7()
call GroupEnumUnitsInRange(g,GetUnitX(ZX7),GetUnitY(ZX7),725,Condition(function AW7))
call ForGroup(g,function AWG)
call WR7(g)
set g=null
set ZX7=null
endfunction
function AYG takes nothing returns boolean
if GetSpellAbilityId()==1093813552 or GetSpellAbilityId()==1093813336 or GetSpellAbilityId()==1093813335 then
if GetUnitAbilityLevel(GetTriggerUnit(),1093813338)>0 then
call AXG()
endif
endif
return false
endfunction
function Register_FatalAttraction takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AYG))
set t=null
endfunction
function AZG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer RLE=(LoadInteger(L7,(I97),(422)))
local integer R1E=(LoadInteger(L7,(I97),(423)))
local integer SSD=(LoadInteger(L7,(I97),(424)))
call SetHeroAgi(IH7,GetHeroAgi(IH7,false)+RLE,true)
call SetHeroStr(IH7,GetHeroStr(IH7,false)+R1E,true)
call SetHeroInt(IH7,GetHeroInt(IH7,false)+SSD,true)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set IH7=null
return false
endfunction
function AAG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetEnumUnit()
local integer BC7=GetUnitAbilityLevel(ZX7,1093813835)
local trigger t
local integer I97
local integer ZN9
local integer RLE
local integer R1E
local integer SSD
local real D4D
if IsUnitType(IH7,UNIT_TYPE_HERO) then
set ZN9=WH7(IH7)
set D4D=.15
if ZN9==2 then
set RLE=R2I(D4D*GetHeroAgi(IH7,false))-1
set R1E=0
set SSD=0
elseif ZN9==3 then
set RLE=0
set R1E=R2I(D4D*GetHeroStr(IH7,false))-1
set SSD=0
elseif ZN9==1 then
set RLE=0
set R1E=0
set SSD=R2I(D4D*GetHeroInt(IH7,false))-1
endif
call SetHeroAgi(IH7,GetHeroAgi(IH7,false)-RLE,true)
call SetHeroStr(IH7,GetHeroStr(IH7,false)-R1E,true)
call SetHeroInt(IH7,GetHeroInt(IH7,false)-SSD,true)
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,11,false)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerAddCondition(t,Condition(function AZG))
call SaveInteger(L7,(I97),(422),(RLE))
call SaveInteger(L7,(I97),(424),(SSD))
call SaveInteger(L7,(I97),(423),(R1E))
call SaveUnitHandle(L7,(I97),(17),(IH7))
set t=null
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",IH7,"chest"))
call B67(ZX7,IH7,EJ7,50+50*BC7)
set ZX7=null
set IH7=null
endfunction
function ABG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local group g=WS7()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local real a=J77(GetUnitX(ZX7),GetUnitY(ZX7),x,y)*bj_DEGTORAD
set x=GetUnitX(ZX7)
set y=GetUnitY(ZX7)
if Y67(x,y,EI7)>0 then
set EJ7=7
else
set EJ7=1
endif
call GroupEnumUnitsInRange(g,x,y,EI7+25,Condition(function AW7))
call ForGroup(g,function AAG)
call WR7(g)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\WhirlingDeath_01.mdx",ZX7,"origin"))
set ZX7=null
set g=null
endfunction
function ACG takes nothing returns boolean
if GetSpellAbilityId()==1093813835 then
call ABG()
endif
return false
endfunction
function P48 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ACG))
set t=null
endfunction
function A3G takes unit ZX7,unit IH7 returns nothing
local integer BC7=GetUnitAbilityLevel(ZX7,1093813555)
call B67(ZX7,IH7,3,60+40*BC7)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",IH7,"origin"))
endfunction
function A6G takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),IQ4)==false then
call GroupAddUnit(IQ4,GetEnumUnit())
call A3G(IN4,GetEnumUnit())
endif
endfunction
function ALG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit WX7=(LoadUnitHandle(L7,(I97),($E)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer A1G=(LoadInteger(L7,(I97),(18)))
local integer WF8=GetTriggerEvalCount(t)
local unit A0G
local group A5G=(LoadGroupHandle(L7,(I97),(16)))
local group g
local boolean A2G=(LoadBoolean(L7,(I97),(727)))
local boolean A_G=(LoadBoolean(L7,(I97),(740)))
if YM8(WX7)then
set A_G=true
call SaveBoolean(L7,(I97),(740),(A_G))
endif
if A2G==false then
set A0G=(LoadUnitHandle(L7,(I97),(700+A1G+1-WF8)))
call RemoveUnit(A0G)
else
set A0G=(LoadUnitHandle(L7,(I97),(700+WF8)))
if A_G==false then
call SetUnitX(WX7,GetUnitX(A0G))
call SetUnitY(WX7,GetUnitY(A0G))
endif
call RemoveUnit(A0G)
set g=WS7()
set IN4=WX7
set IQ4=A5G
call GroupEnumUnitsInRange(g,GetUnitX(WX7),GetUnitY(WX7),250,Condition(function AO7))
call ForGroup(g,function A6G)
call WR7(g)
endif
if WF8==(A1G)then
call Y67(GetUnitX(WX7),GetUnitY(WX7),90)
call WR7(A5G)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set WX7=null
set A0G=null
set A5G=null
set g=null
return false
endfunction
function B4G takes nothing returns nothing
if VO7(GetEnumDestructable())and IsDestructableDeadBJ(GetEnumDestructable())==false then
set EK7=EK7+1
endif
endfunction
function B7G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit WX7=(LoadUnitHandle(L7,(I97),($E)))
local real TA9=(LoadReal(L7,(I97),($D)))
local integer Z49=(LoadInteger(L7,(I97),($C)))
local integer WF8=GetTriggerEvalCount(t)
local real x=(LoadReal(L7,(I97),(6)))+WF8*50*Cos(TA9*bj_DEGTORAD)
local real y=(LoadReal(L7,(I97),(7)))+WF8*50*Sin(TA9*bj_DEGTORAD)
local boolean TGD=(LoadBoolean(L7,(I97),($F)))
local unit B8G
local trigger B9G=(LoadTriggerHandle(L7,(I97),($B)))
local integer BDG=GetHandleId(B9G)
local integer ID=1966092625
local real UVG=$FA
local rect r
local real d=90
set r=Rect(x-d,y-d,x+d,y+d)
set EK7=0
call EnumDestructablesInRect(r,Condition(function TO7),function B4G)
if EK7>0 or WF8==Z49 or WF8==(Z49-1)or WF8==(Z49-2)then
set ID=1966092624
endif
set B8G=CreateUnit(GetOwningPlayer(WX7),ID,x,y,TA9)
call SaveUnitHandle(L7,(BDG),(700+WF8),(B8G))
if EK7>0 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call TriggerRegisterTimerEvent(B9G,.5/Z49,true)
call TriggerAddCondition(B9G,Condition(function ALG))
call SaveInteger(L7,(BDG),(18),(WF8))
call SaveBoolean(L7,(BDG),(727),(true))
call SaveUnitHandle(L7,(BDG),($E),(WX7))
call SaveGroupHandle(L7,(BDG),(16),(WS7()))
call SaveReal(L7,(BDG),(6),((x)*1.))
call SaveReal(L7,(BDG),(7),((y)*1.))
call SaveBoolean(L7,(BDG),(740),(false))
elseif WF8>Z49 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call TriggerRegisterTimerEvent(B9G,.5/Z49,true)
call TriggerAddCondition(B9G,Condition(function ALG))
call SaveInteger(L7,(BDG),(18),(WF8))
call SaveBoolean(L7,(BDG),(727),(false))
call SaveUnitHandle(L7,(BDG),($E),(WX7))
call SaveGroupHandle(L7,(BDG),(16),(WS7()))
call SaveBoolean(L7,(BDG),(740),(false))
endif
set t=null
set WX7=null
set B8G=null
set B9G=null
return false
endfunction
function BEG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit WX7=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real TA9=J77(GetUnitX(WX7),GetUnitY(WX7),GetLocationX(l),GetLocationY(l))
local integer BC7=GetUnitAbilityLevel(WX7,1093813555)
local integer BFG
local integer Z49
local trigger BGG=CreateTrigger()
set BFG=650+$C8*BC7
set Z49=BFG/50
call SaveUnitHandle(L7,(I97),($E),(WX7))
call SaveInteger(L7,(I97),(5),(BC7))
call SaveReal(L7,(I97),($D),((TA9)*1.))
call SaveInteger(L7,(I97),($C),(Z49))
call SaveTriggerHandle(L7,(I97),($B),(BGG))
call SaveReal(L7,(I97),(6),((GetUnitX(WX7))*1.))
call SaveReal(L7,(I97),(7),((GetUnitY(WX7))*1.))
call TriggerRegisterTimerEvent(t,.5/Z49,true)
call TriggerAddCondition(t,Condition(function B7G))
call RemoveLocation(l)
set t=null
set WX7=null
set l=null
endfunction
function BHG takes nothing returns boolean
if GetSpellAbilityId()==1093813555 then
call BEG()
endif
return false
endfunction
function P78 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BHG))
set t=null
endfunction
function BIG takes unit ZX7 returns nothing
local integer WF8=(LoadInteger(L7,(GetHandleId(ZX7)),(728)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093813556)
local integer i=1
set WF8=IMinBJ(WF8,5*BC7)
loop
exitwhen i>20
if WF8==i then
call XF7(ZX7,EM7[i])
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),EM7[i],false)
else
call UnitRemoveAbility(ZX7,EM7[i])
endif
set i=i+1
endloop
endfunction
function BJG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local integer WF8=(LoadInteger(L7,(GetHandleId(ZX7)),(728)))-1
call SaveInteger(L7,(GetHandleId(ZX7)),(728),(WF8))
call BIG(ZX7)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set ZX7=null
return false
endfunction
function BKG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local integer WF8=(LoadInteger(L7,(GetHandleId(ZX7)),(728)))+1
if IsUnitEnemy(GetAttacker(),GetOwningPlayer(ZX7)) then
call SaveInteger(L7,(GetHandleId(ZX7)),(728),(WF8))
call BIG(ZX7)
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,12+2*GetUnitAbilityLevel(ZX7,1093813556),false)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerAddCondition(t,Condition(function BJG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
endif
set t=null
set ZX7=null
return false
endfunction
function BMG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function BKG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set t=null
set ZX7=null
endfunction
function BNG takes nothing returns boolean
if GetLearnedSkill()==1093813556 and GetUnitAbilityLevel(GetTriggerUnit(),1093813556)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call BMG()
endif
return false
endfunction
function P88 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function BNG))
set t=null
set EM7[1]=1093813319
set EM7[2]=1093813318
set EM7[3]=1093813324
set EM7[4]=1093813325
set EM7[5]=1093813322
set EM7[6]=1093813321
set EM7[7]=1093813326
set EM7[8]=1093813327
set EM7[9]=1093813320
set EM7[$A]=1093813333
set EM7[$B]=1093813328
set EM7[$C]=1093813329
set EM7[$D]=1093813330
set EM7[$E]=1093813331
set EM7[$F]=1093813332
set EM7[16]=1093813323
set EM7[17]='A2X3'
set EM7[18]='A2X4'
set EM7[19]='A2X5'
set EM7[20]='A2X6'
endfunction
function BS1 takes unit u returns nothing
call UnitRemoveAbility(u,1096971630)
call SaveInteger(L7,(GetHandleId(u)),(790),(0))
endfunction
function BT1 takes unit u returns nothing
local integer I97=GetHandleId(u)
local integer BR1=(LoadInteger(L7,(I97),(790)))
call XF7(u,1096971630)
set BR1=BR1+1
call SaveInteger(L7,(I97),(790),(BR1))
endfunction
function BP1 takes unit u returns nothing
local integer I97=GetHandleId(u)
local integer BR1=(LoadInteger(L7,(I97),(790)))
set BR1=IMaxBJ(BR1-1,0)
call SaveInteger(L7,(I97),(790),(BR1))
if BR1==0 then
call BS1(u)
endif
endfunction
function BOG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
call UnitRemoveAbility(ZX7,1114663271)
call UnitRemoveAbility(ZX7,1111845217)
call UnitRemoveAbility(ZX7,1093813848)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set ZX7=null
return false
endfunction
function BPG takes unit ZX7,unit IH7 returns nothing
local unit BB7=CreateUnit(GetOwningPlayer(IH7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
local integer AE9=R2I(100*GetUnitState(IH7,UNIT_STATE_LIFE)/GetUnitState(IH7,UNIT_STATE_MAX_LIFE))
local integer BC7=YH7(YG7(R2I(100-AE9)/5,20),1)
call UnitAddAbility(BB7,1093813334)
call SetUnitAbilityLevel(BB7,1093813334,BC7)
call IssueTargetOrder(BB7,"slow",IH7)
set BB7=null
endfunction
function BQG takes nothing returns nothing
if D9==false and((LoadInteger(L7,(GetHandleId((GetEnumUnit()))),((4349))))==1)==false then
call O3O(GetEnumUnit(),4348,0.49)
call B67(EQ7,GetEnumUnit(),3,(25+25*ER7)*0.5)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",GetEnumUnit(),"origin"))
call BPG(EQ7,GetEnumUnit())
endif
endfunction
function BRG takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),EP7)==false then
call GroupAddUnit(EP7,GetEnumUnit())
call B67(EQ7,GetEnumUnit(),3,60+40*ER7)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",GetEnumUnit(),"origin"))
call BPG(EQ7,GetEnumUnit())
endif
endfunction
function BSG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit Y27=(LoadUnitHandle(L7,(I97),(45)))
local real Y_7=(LoadReal(L7,(I97),(6)))
local real Z47=(LoadReal(L7,(I97),(7)))
local real x
local real y
local real a
local integer BTG=(LoadInteger(L7,(I97),(33)))
local group BQ9=(LoadGroupHandle(L7,(I97),(187)))
local group g
local integer WF8=(LoadInteger(L7,(I97),(34)))
local real BUG
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093813848 then
call SaveInteger(L7,(I97),(33),(2))
call GroupClear(BQ9)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093813848,false)
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function BOG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
endif
elseif GetTriggerEventId()==EVENT_WIDGET_DEATH or(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==-1 then
call BP1(ZX7)
if(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==0 or(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==1093813557 or(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==1093817160 then
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093813557,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093817160,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093813848,false)
call UnitRemoveAbility(ZX7,1093813848)
call UnitRemoveAbility(ZX7,1114663271)
call UnitRemoveAbility(ZX7,1111845217)
call KillUnit(Y27)
call WR7(BQ9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif BTG==0 then
set a=J77(GetUnitX(Y27),GetUnitY(Y27),Y_7,Z47)*bj_DEGTORAD
set x=GetUnitX(Y27)+18*Cos(a)
set y=GetUnitY(Y27)+18*Sin(a)
call Y67(x,y,175)
if KF7(x,y,Y_7,Z47)<40 then
set x=Y_7
set y=Z47
endif
call SetUnitX(Y27,x)
call SetUnitY(Y27,y)
set IN4=ZX7
set EQ7=ZX7
if GetUnitAbilityLevel(ZX7,1093813557)>0 then
set ER7=GetUnitAbilityLevel(ZX7,1093813557)
else
set ER7=GetUnitAbilityLevel(ZX7,1093817160)
endif
set EP7=BQ9
set g=WS7()
call GroupEnumUnitsInRange(g,x,y,200+25,Condition(function AJ7))
call ForGroup(g,function BRG)
call WR7(g)
if x==Y_7 and y==Z47 then
call SaveInteger(L7,(I97),(33),(1))
call GroupClear(BQ9)
endif
elseif BTG==1 then
set WF8=WF8+1
if WF8==25 then
set x=GetUnitX(Y27)
set y=GetUnitY(Y27)
call Y67(x,y,175)
set WF8=0
set IN4=ZX7
set EQ7=ZX7
if GetUnitAbilityLevel(ZX7,1093813557)>0 then
set ER7=GetUnitAbilityLevel(ZX7,1093813557)
else
set ER7=GetUnitAbilityLevel(ZX7,1093817160)
endif
set g=WS7()
call GroupEnumUnitsInRange(g,x,y,200+25,Condition(function AJ7))
call ForGroup(g,function BQG)
call WR7(g)
set BUG=(15+5*ER7)/2
if GetUnitState(ZX7,UNIT_STATE_MANA)<BUG or KE7(ZX7,Y27)>2000 then
call SaveInteger(L7,(I97),(33),(2))
call GroupClear(BQ9)
call UnitRemoveAbility(ZX7,1093813848)
call UnitRemoveAbility(ZX7,1114663271)
call UnitRemoveAbility(ZX7,1111845217)
else
call SetUnitState(ZX7,UNIT_STATE_MANA,GetUnitState(ZX7,UNIT_STATE_MANA)-BUG)
endif
endif
call SaveInteger(L7,(I97),(34),(WF8))
elseif BTG==2 then
set a=J77(GetUnitX(Y27),GetUnitY(Y27),GetUnitX(ZX7),GetUnitY(ZX7))*bj_DEGTORAD
set x=GetUnitX(Y27)+16*Cos(a)
set y=GetUnitY(Y27)+16*Sin(a)
call Y67(x,y,175)
call SetUnitX(Y27,x)
call SetUnitY(Y27,y)
set IN4=ZX7
set EQ7=ZX7
if GetUnitAbilityLevel(ZX7,1093813557)>0 then
set ER7=GetUnitAbilityLevel(ZX7,1093813557)
else
set ER7=GetUnitAbilityLevel(ZX7,1093817160)
endif
set EP7=BQ9
set g=WS7()
call GroupEnumUnitsInRange(g,x,y,200+25,Condition(function AJ7))
call ForGroup(g,function BRG)
call WR7(g)
if KF7(x,y,GetUnitX(ZX7),GetUnitY(ZX7))<40 then
call BP1(ZX7)
call KillUnit(Y27)
call WR7(BQ9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==0 or(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==1093813557 or(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==1093817160 then
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093813557,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093817160,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093813848,false)
endif
endif
set t=null
set ZX7=null
set Y27=null
set BQ9=null
set g=null
return false
endfunction
function BVG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local real a=J77(GetUnitX(ZX7),GetUnitY(ZX7),x,y)*bj_DEGTORAD
local unit Y27=CreateUnit(GetOwningPlayer(ZX7),1747993683,GetUnitX(ZX7),GetUnitY(ZX7),a*bj_RADTODEG)
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BSG))
call SaveUnitHandle(L7,(I97),(45),(Y27))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveReal(L7,(I97),(6),((x)*1.0))
call SaveReal(L7,(I97),(7),((y)*1.0))
call SaveInteger(L7,(I97),(33),(0))
call SaveGroupHandle(L7,(I97),(187),(WS7()))
call BT1(ZX7)
call XF7(ZX7,1093813848)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093813557,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093817160,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093813848,true)
set ZX7=null
set t=null
set Y27=null
endfunction
function OP6 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
call UnitRemoveAbility(ZX7,1114663271)
call UnitRemoveAbility(ZX7,1111845217)
call UnitRemoveAbility(ZX7,1093813558)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set ZX7=null
return false
endfunction
function OQ6 takes unit ZX7,unit IH7 returns nothing
local unit BB7=CreateUnit(GetOwningPlayer(IH7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
local integer AE9=R2I(100*GetUnitState(IH7,UNIT_STATE_LIFE)/GetUnitState(IH7,UNIT_STATE_MAX_LIFE))
local integer BC7=YH7(YG7(R2I(100-AE9)/5,20),1)
call UnitAddAbility(BB7,1093813334)
call SetUnitAbilityLevel(BB7,1093813334,BC7)
call IssueTargetOrder(BB7,"slow",IH7)
set BB7=null
endfunction
function OU6 takes nothing returns nothing
if D9==false and((LoadInteger(L7,(GetHandleId((GetEnumUnit()))),((4348))))==1)==false then
call O3O(GetEnumUnit(),4349,0.49)
call B67(K1I,GetEnumUnit(),3,(25+25*KOI)*0.5)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",GetEnumUnit(),"origin"))
call OQ6(K1I,GetEnumUnit())
endif
endfunction
function A06 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),KII)==false then
call GroupAddUnit(KII,GetEnumUnit())
call B67(K1I,GetEnumUnit(),3,60+40*KOI)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",GetEnumUnit(),"origin"))
call OQ6(K1I,GetEnumUnit())
endif
endfunction
function AI6 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit Y27=(LoadUnitHandle(L7,(I97),(45)))
local real Y_7=(LoadReal(L7,(I97),(6)))
local real Z47=(LoadReal(L7,(I97),(7)))
local real x
local real y
local real a
local integer BTG=(LoadInteger(L7,(I97),(33)))
local group BQ9=(LoadGroupHandle(L7,(I97),(187)))
local group g
local integer WF8=(LoadInteger(L7,(I97),(34)))
local real BUG
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093813558 then
call SaveInteger(L7,(I97),(33),(2))
call GroupClear(BQ9)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093813558,false)
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function OP6))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
endif
elseif GetTriggerEventId()==EVENT_WIDGET_DEATH or(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==-1 then
call BP1(ZX7)
if(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==0 or(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==1093817161 then
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093817161,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093813558,false)
call UnitRemoveAbility(ZX7,1093813558)
call UnitRemoveAbility(ZX7,1114663271)
call UnitRemoveAbility(ZX7,1111845217)
call KillUnit(Y27)
call WR7(BQ9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
elseif BTG==0 then
set a=J77(GetUnitX(Y27),GetUnitY(Y27),Y_7,Z47)*bj_DEGTORAD
set x=GetUnitX(Y27)+18*Cos(a)
set y=GetUnitY(Y27)+18*Sin(a)
call Y67(x,y,175)
if KF7(x,y,Y_7,Z47)<40 then
set x=Y_7
set y=Z47
endif
call SetUnitX(Y27,x)
call SetUnitY(Y27,y)
set IN4=ZX7
set K1I=ZX7
set KOI=GetUnitAbilityLevel(ZX7,1093817161)
set KII=BQ9
set g=WS7()
call GroupEnumUnitsInRange(g,x,y,200+25,Condition(function AJ7))
call ForGroup(g,function A06)
call WR7(g)
if x==Y_7 and y==Z47 then
call SaveInteger(L7,(I97),(33),(1))
call GroupClear(BQ9)
endif
elseif BTG==1 then
set WF8=WF8+1
if WF8==25 then
set x=GetUnitX(Y27)
set y=GetUnitY(Y27)
call Y67(x,y,175)
set WF8=0
set IN4=ZX7
set K1I=ZX7
set KOI=GetUnitAbilityLevel(ZX7,1093817161)
set g=WS7()
call GroupEnumUnitsInRange(g,x,y,200+25,Condition(function AJ7))
call ForGroup(g,function OU6)
call WR7(g)
set BUG=(15+5*KOI)/2
if GetUnitState(ZX7,UNIT_STATE_MANA)<BUG or KE7(ZX7,Y27)>2000 then
call SaveInteger(L7,(I97),(33),(2))
call GroupClear(BQ9)
call UnitRemoveAbility(ZX7,1093813558)
call UnitRemoveAbility(ZX7,1114663271)
call UnitRemoveAbility(ZX7,1111845217)
else
call SetUnitState(ZX7,UNIT_STATE_MANA,GetUnitState(ZX7,UNIT_STATE_MANA)-BUG)
endif
endif
call SaveInteger(L7,(I97),(34),(WF8))
elseif BTG==2 then
set a=J77(GetUnitX(Y27),GetUnitY(Y27),GetUnitX(ZX7),GetUnitY(ZX7))*bj_DEGTORAD
set x=GetUnitX(Y27)+16*Cos(a)
set y=GetUnitY(Y27)+16*Sin(a)
call Y67(x,y,175)
call SetUnitX(Y27,x)
call SetUnitY(Y27,y)
set IN4=ZX7
set K1I=ZX7
set KOI=GetUnitAbilityLevel(ZX7,1093817161)
set KII=BQ9
set g=WS7()
call GroupEnumUnitsInRange(g,x,y,200+25,Condition(function AJ7))
call ForGroup(g,function A06)
call WR7(g)
if KF7(x,y,GetUnitX(ZX7),GetUnitY(ZX7))<40 then
call BP1(ZX7)
call KillUnit(Y27)
call WR7(BQ9)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==0 or(LoadInteger(L7,(GetHandleId(ZX7)),(704)))==1093817161 then
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093817161,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093813558,false)
endif
endif
set t=null
set ZX7=null
set Y27=null
set BQ9=null
set g=null
return false
endfunction
function A16 takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local real a=J77(GetUnitX(ZX7),GetUnitY(ZX7),x,y)*bj_DEGTORAD
local unit Y27=CreateUnit(GetOwningPlayer(ZX7),1747993683,GetUnitX(ZX7),GetUnitY(ZX7),a*bj_RADTODEG)
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0.02,true)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerRegisterUnitEvent(t,ZX7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AI6))
call SaveUnitHandle(L7,(I97),(45),(Y27))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveReal(L7,(I97),(6),((x)*1.0))
call SaveReal(L7,(I97),(7),((y)*1.0))
call SaveInteger(L7,(I97),(33),(0))
call SaveGroupHandle(L7,(I97),(187),(WS7()))
call BT1(ZX7)
call XF7(ZX7,1093813558)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093817161,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZX7),1093813558,true)
set ZX7=null
set t=null
set Y27=null
endfunction
function cNe takes nothing returns nothing
if GetUnitAbilityLevel(GetTriggerUnit(),1093817161)>0 then
call SetUnitAbilityLevel(GetTriggerUnit(),1093817161,GetUnitAbilityLevel(GetTriggerUnit(),1093813557)+GetUnitAbilityLevel(GetTriggerUnit(),1093817160))
endif
endfunction
function BWG takes nothing returns boolean
if GetSpellAbilityId()==1093813557 or GetSpellAbilityId()==1093817160 then
call BVG()
endif
if GetSpellAbilityId()==1093817161 then
call A16()
endif
if GetLearnedSkill()==1093813557 or GetLearnedSkill()==1093817160 or GetLearnedSkill()==1093817161 then
call cNe()
endif
return false
endfunction
function P98 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call YB7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function BWG))
call X_7(1093813334)
set t=null
endfunction
function Trap_RemoveBonus takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
if((LoadInteger(L7,(GetHandleId(ZX7)),(754)))==(LoadInteger(L7,(I97),(754))))then
call B_7((ZX7),(0))
endif
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set t=null
set ZX7=null
return false
endfunction
function BXG takes nothing returns nothing
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO) then
set FX7=FX7+60
else
set FX7=FX7+20
endif
call UnitRemoveAbility(GetEnumUnit(),1093815365)
call UnitRemoveAbility(GetEnumUnit(),1110460209)
endfunction
function BYG takes nothing returns nothing
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO) then
set FX7=FX7+60
else
set FX7=FX7+20
endif
endfunction
function BZG takes nothing returns nothing
call BA7(FY7,GetEnumUnit(),.5+FZ7*.5)
call B67(FY7,GetEnumUnit(),1,FX7)
endfunction
function BAG takes nothing returns boolean
return GetUnitAbilityLevel(GetFilterUnit(),1110460209)>0
endfunction
function OFD takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local group g=WS7()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
set FY7=ZX7
set FZ7=GetUnitAbilityLevel(ZX7,1093815353)
set FX7=0
call GroupEnumUnitsInRange(g,0,0,9999,Condition(function BAG))
call ForGroup(g,function BXG)
call ForGroup(g,function BZG)
call WR7(g)
set g=null
set ZX7=null
endfunction
function BBG takes nothing returns boolean
if GetSpellAbilityId()==1093815353 then
call OFD()
endif
return false
endfunction
function BCG takes string YY7,unit IH7,unit WX7 returns nothing
local texttag tt=CreateTextTag()
call SetTextTagText(tt,YY7,.033)
call SetTextTagPosUnit(tt,IH7,64)
call SetTextTagColor(tt,0,75,$FF,$FF)
call SetTextTagVelocity(tt,0,.0355)
call SetTextTagFadepoint(tt,.15)
call SetTextTagPermanent(tt,false)
call SetTextTagLifespan(tt,1.)
if IsUnitAlly(WX7,GetLocalPlayer())or WG7(GetLocalPlayer())then
call SetTextTagVisibility(tt,true)
else
call SetTextTagVisibility(tt,false)
endif
set tt=null
endfunction
function B3G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local real ZV8=(LoadReal(L7,(GetHandleId(IH7)),(753)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH or ZV8<(TimerGetElapsed(W))then
call UnitRemoveAbility(IH7,1093815365)
call UnitRemoveAbility(IH7,1110460209)
call SaveReal(L7,(GetHandleId(IH7)),(753),((0)*1.))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set IH7=null
return false
endfunction
function B6G takes unit ZX7,unit IH7 returns nothing
local trigger t
local integer I97
local group g=WS7()
call SaveReal(L7,(GetHandleId(IH7)),(753),(((TimerGetElapsed(W))+FW7)*1.))
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerRegisterDeathEvent(t,IH7)
call TriggerAddCondition(t,Condition(function B3G))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call XF7(IH7,1093815365)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093815365,false)
set FY7=ZX7
set FZ7=GetUnitAbilityLevel(ZX7,1093815353)
set FX7=0
call GroupEnumUnitsInRange(g,0,0,9999,Condition(function BAG))
call ForGroup(g,function BYG)
call WR7(g)
call BCG(I2S(FX7),IH7,ZX7)
set t=null
endfunction
function BLG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
if GetEventDamageSource()==ZX7 and GetEventDamage()>0 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if YS8(IH7)==false then
call B6G(ZX7,IH7)
endif
endif
endif
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function B1G takes nothing returns nothing
local unit ZX7=GetAttacker()
local unit IH7=GetTriggerUnit()
local trigger t
local integer I97
if OT7(ZX7,"4325")==false then
call O37(ZX7,"4325",.2)
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterUnitEvent(t,IH7,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function BLG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
endif
set ZX7=null
set IH7=null
endfunction
function B0G takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093815353)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))then
call B1G()
endif
return false
endfunction
function PG8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BBG))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function B0G))
set t=null
endfunction
function B5G takes nothing returns nothing
local integer I97=GetHandleId(GetTriggeringTrigger())
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit B2G=IN4
local unit IH7=IP4
local integer BC7=GetUnitAbilityLevel(ZX7,1093815361)
if WF7(IH7)==false then
call B67(ZX7,IH7,1,20+80*BC7)
call Z57(IH7,1093815627,1,4,1110460212)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093815627,false)
call UnitMakeAbilityPermanent(IH7,true,1093815626)
endif
set ZX7=null
set IH7=null
set B2G=null
endfunction
function B_G takes nothing returns nothing
local unit ZX7=FA7
local unit IH7=GetEnumUnit()
local trigger t=ZF7(FB7,IH7,1747993925,"B5G",1200)
local integer I97=GetHandleId(t)
call SaveUnitHandle(L7,(I97),(2),(ZX7))
set ZX7=null
set IH7=null
set t=null
endfunction
function C4G takes unit ZX7,unit IH7 returns nothing
local integer BC7=GetUnitAbilityLevel(ZX7,1093815361)
local group g=WS7()
set IN4=ZX7
set FA7=ZX7
set FB7=IH7
call GroupEnumUnitsInRange(g,GetUnitX(IH7),GetUnitY(IH7),600+25,Condition(function AJ7))
call GroupRemoveUnit(g,IH7)
call ForGroup(g,function B_G)
call WR7(g)
set ZX7=null
set IH7=null
set g=null
endfunction
function C7G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local unit Y27=(LoadUnitHandle(L7,(I97),(45)))
local real x=GetUnitX(Y27)
local real y=GetUnitY(Y27)
local real Y_7=GetUnitX(IH7)
local real Z47=GetUnitY(IH7)
local real C8G=KF7(Y_7,Z47,x,y)
local integer WF8=GetTriggerEvalCount(t)
local real Z87=J77(x,y,Y_7,Z47)
local real Z97
local real ZD7
local real Z77=C8G/((FC7/.02)-WF8)
if Z77<F37*.02 then
set Z77=F37*.02
endif
set Z97=x+Z77*Cos(Z87*bj_DEGTORAD)
set ZD7=y+Z77*Sin(Z87*bj_DEGTORAD)
call SetUnitX(Y27,Z97)
call SetUnitY(Y27,ZD7)
call SetUnitFacing(Y27,Z87)
if KF7(Y_7,Z47,Z97,ZD7)<=Z77 then
call KillUnit(Y27)
call C4G(ZX7,IH7)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set IH7=null
set ZX7=null
set Y27=null
return false
endfunction
function C9G takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit Y27=CreateUnit(GetOwningPlayer(ZX7),1747993930,GetUnitX(ZX7),GetUnitY(ZX7),0)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function C7G))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveUnitHandle(L7,(I97),(45),(Y27))
set ZX7=null
set IH7=null
set Y27=null
set t=null
endfunction
function CDG takes nothing returns boolean
if GetSpellAbilityId()==1093815361 then
call C9G()
endif
return false
endfunction
function PF8 takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CDG))
set t=null
endfunction
function CEG takes nothing returns nothing
call BA7(ES7,GetEnumUnit(),1.5)
call B67(ES7,GetEnumUnit(),2,50+50*ET7)
endfunction
function CFG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local real a=(LoadReal(L7,(I97),($89)))
local real Y_7=(LoadReal(L7,(I97),(47)))
local real Z47=(LoadReal(L7,(I97),(48)))
local real x=GetUnitX(ZX7)
local real y=GetUnitY(ZX7)
local group g=WS7()
local integer BC7=GetUnitAbilityLevel(ZX7,1093813812)
set x=X17(x+32*Cos(a))
set y=X07(y+32*Sin(a))
if KF7(x,y,Y_7,Z47)<40 then
set x=Y_7
set y=Z47
endif
call SetUnitX(ZX7,x)
call SetUnitY(ZX7,y)
call SetUnitFacing(ZX7,a*bj_RADTODEG)
set IN4=ZX7
call GroupEnumUnitsInRange(g,x,y,125+25,Condition(function AJ7))
if FirstOfGroup(g)!=null or(x==Y_7 and y==Z47)or GetTriggerEvalCount(t)>$C8 or GetTriggerEventId()==EVENT_WIDGET_DEATH then
call DestroyEffect(AddSpecialEffect("war3mapImported\\BlackDragonMissile.mdx",x,y))
call GroupEnumUnitsInRange(g,x,y,300+25,Condition(function AJ7))
set ET7=BC7
set ES7=ZX7
if GetTriggerEventId()!=EVENT_WIDGET_DEATH then
call ForGroup(g,function CEG)
endif
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
call WR7(g)
set t=null
set ZX7=null
set g=null
return false
endfunction
function CGG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local real x=GetUnitX(ZX7)
local real y=GetUnitY(ZX7)
local real Y_7=GetSpellTargetX()
local real Z47=GetSpellTargetY()
local real a=J77(x,y,Y_7,Z47)*bj_DEGTORAD
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterDeathEvent(t,ZX7)
call TriggerAddCondition(t,Condition(function CFG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveReal(L7,(I97),($89),((a)*1.))
call SaveReal(L7,(I97),(47),((Y_7)*1.))
call SaveReal(L7,(I97),(48),((Z47)*1.))
set ZX7=null
set t=null
endfunction
function CHG takes nothing returns boolean
if GetSpellAbilityId()==1093813812 then
call CGG()
endif
return false
endfunction
function Register_SonicBoom takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CHG))
set t=null
endfunction
function CIG takes nothing returns nothing
local unit ZX7=EU7
local unit IH7=GetEnumUnit()
call Z67(IH7,1093813811,1,$A)
call B67(ZX7,IH7,2,50*EV7+2*GetHeroAgi(ZX7,true))
set ZX7=null
set IH7=null
endfunction
function CJG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local real CKG=YJ7((TimerGetElapsed(W))-(LoadReal(L7,(GetHandleId(ZX7)),(358))),5.)
local integer BC7=GetUnitAbilityLevel(ZX7,1093813573)
local real VW9=(40+80*BC7)*(CKG)
local group g=WS7()
local real d=CKG*600
local real a=(LoadReal(L7,(GetHandleId(ZX7)),(736)))
local real x=GetUnitX(ZX7)+d*Cos(a)
local real y=GetUnitY(ZX7)+d*Sin(a)
set IN4=ZX7
call GroupEnumUnitsInRange(g,x,y,325,Condition(function AJ7))
set EV7=BC7
set EU7=ZX7
call ForGroup(g,function CIG)
call WR7(g)
call YT7("effects\\BasicWaterFlash.mdx",x,y,1)
set ZX7=null
set g=null
endfunction
function CMG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit WX7=(LoadUnitHandle(L7,(I97),($E)))
call SetUnitTimeScale(WX7,1)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if GetTriggerEventId()!=EVENT_UNIT_DEATH then
call KR7(WX7)
endif
set t=null
set WX7=null
return false
endfunction
function CNG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit WX7=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=J77(GetUnitX(WX7),GetUnitY(WX7),x,y)*bj_DEGTORAD
local real B98=RMaxBJ(KF7(GetUnitX(WX7),GetUnitY(WX7),x,y)/600,.32)
call RemoveLocation(l)
call SaveReal(L7,(GetHandleId(WX7)),(356),((x)*1.))
call SaveReal(L7,(GetHandleId(WX7)),(357),((y)*1.))
call SaveReal(L7,(GetHandleId(WX7)),(736),((a)*1.))
call SaveReal(L7,(GetHandleId(WX7)),(358),(((TimerGetElapsed(W)))*1.))
call SetUnitTimeScale(WX7,.75)
call SaveUnitHandle(L7,(I97),($E),(WX7))
call TriggerRegisterTimerEvent(t,B98-.01,false)
call TriggerRegisterUnitEvent(t,WX7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function CMG))
set t=null
set l=null
set WX7=null
endfunction
function COG takes nothing returns boolean
if GetSpellAbilityId()==1093813573 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
call SaveBoolean(L7,(GetHandleId(GetTriggerUnit())),(360),(false))
call CNG()
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
call SaveBoolean(L7,(GetHandleId(GetTriggerUnit())),(360),(true))
elseif(LoadBoolean(L7,(GetHandleId(GetTriggerUnit())),(360))) then
call CJG()
endif
endif
return false
endfunction
function Register_WindBlast takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_ENDCAST)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function COG))
set t=null
endfunction
function CPG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
if GetUnitAbilityLevel(ZX7,1110456374)==0 and GetUnitAbilityLevel(ZX7,1110456375)==0 then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call UnitRemoveAbility(ZX7,1093813810)
call UnitRemoveAbility(ZX7,1110459959)
endif
set t=null
set ZX7=null
return false
endfunction
function CQG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
local unit IH7=GetSpellTargetUnit()
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093813810,false)
call XF7(IH7,1093813810)
call TriggerRegisterTimerEvent(t,.2,true)
call TriggerAddCondition(t,Condition(function CPG))
call SaveUnitHandle(L7,(I97),(2),(IH7))
set ZX7=null
set t=null
endfunction
function CRG takes nothing returns boolean
if GetSpellAbilityId()==1093813808 then
call CQG()
endif
return false
endfunction
function Register_WindBarrier takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CRG))
set t=null
endfunction
function CSG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=GetUnitAbilityLevel(ZX7,1093813813)
local integer id
local integer CTG
call FlushChildHashtable(L7,(I97))
call OZ7(t)
if IsUnitAlly(IH7,GetOwningPlayer(ZX7)) then
set CTG=1110459960
if BC7==1 then
set id=1093813831
elseif BC7==2 then
set id=1093813830
elseif BC7==3 then
set id=1093813832
endif
call SetUnitState(IH7,UNIT_STATE_LIFE,GetUnitState(IH7,UNIT_STATE_LIFE)+100+50*BC7)
else
set CTG=1110459961
if BC7==1 then
set id=1093813828
elseif BC7==2 then
set id=1093813827
elseif BC7==3 then
set id=1093813829
endif
call B67(ZX7,IH7,1,100+50*BC7)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),id,false)
call Z57(IH7,id,1,4,CTG)
set t=null
set ZX7=null
set IH7=null
return false
endfunction
function CUG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetEnumUnit()
local unit BB7=CreateUnit(GetOwningPlayer(IH7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call YZ8(IH7)
call YW8(IH7,0,0)
call UnitAddAbility(BB7,1093813833)
call IssueTargetOrderById(BB7,$D00B0,IH7)
call TriggerRegisterTimerEvent(t,4,false)
call TriggerAddCondition(t,Condition(function CSG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(IH7))
set t=null
set ZX7=null
set IH7=null
set BB7=null
endfunction
function CVG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local real Y_7=GetSpellTargetX()
local real Z47=GetSpellTargetY()
local group g=WS7()
call Y57(GetOwningPlayer(ZX7),4,Y_7,Z47,300)
call GroupEnumUnitsInRange(g,Y_7,Z47,400+25,Condition(function A47))
call ForGroup(g,function CUG)
call WR7(g)
set ZX7=null
set g=null
endfunction
function CWG takes nothing returns boolean
if GetSpellAbilityId()==1093813813 then
call CVG()
endif
return false
endfunction
function Register_PrevailingWinds takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CWG))
set t=null
endfunction
function CXG takes nothing returns nothing
local integer I97=GetHandleId(GetTriggeringTrigger())
local unit ZX7=IN4
local unit IH7=IP4
local unit BB7=CreateUnit(GetOwningPlayer(IH7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
local real VW9=GetUnitAbilityLevel(ZX7,1093813844)*60+40
call UnitAddAbility(BB7,1093813845)
call IssueTargetOrderById(BB7,$D008A,IH7)
call B67(ZX7,IH7,1,VW9)
set BB7=null
set ZX7=null
set IH7=null
endfunction
function CYG takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local group g=WS7()
local real x=GetUnitX(ZX7)
local real y=GetUnitY(ZX7)
local unit u1=null
local unit u2=null
local unit u3=null
local integer BKE=0
local unit u
local trigger t
call GroupEnumUnitsInRange(g,x,y,425,Condition(function AW7))
loop
exitwhen FirstOfGroup(g)==null or BKE==3
set u=GroupPickRandomUnit(g)
if u!=null then
if BKE==0 then
set u1=u
elseif BKE==1 then
set u2=u
elseif BKE==2 then
set u3=u
endif
set BKE=BKE+1
call GroupRemoveUnit(g,u)
endif
endloop
call WR7(g)
if u1!=null then
call ZF7(ZX7,u1,1747993690,"CXG",400)
endif
if u2!=null then
call ZF7(ZX7,u2,1747993690,"CXG",400)
endif
if u3!=null then
call ZF7(ZX7,u3,1747993690,"CXG",400)
endif
set g=null
set ZX7=null
set u=null
set u1=null
set u2=null
set u3=null
endfunction
function CZG takes nothing returns boolean
if GetSpellAbilityId()==1093813844 then
call CYG()
endif
return false
endfunction
function Register_HolyShackles takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CZG))
set t=null
endfunction
function CAG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local integer TE9=(LoadInteger(L7,(I97),(30)))
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer WF8=(LoadInteger(L7,(GetHandleId(ZX7)),(737)))
local trigger CBG=(LoadTriggerHandle(L7,(GetHandleId(ZX7)),(738)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==ZX7 then
call DisableTrigger(t)
call FlushChildHashtable(L7,(I97))
call OZ7(t)
set WF8=WF8-1
if WF8==0 then
call FlushChildHashtable(L7,(GetHandleId(CBG)))
call OZ7(CBG)
call RemoveSavedHandle(L7,(GetHandleId(ZX7)),(738))
call SaveInteger(L7,(GetHandleId(ZX7)),(737),(-1))
call UnitRemoveAbility(ZX7,1093813838)
call UnitRemoveAbility(ZX7,1110459969)
else
call SaveInteger(L7,(GetHandleId(ZX7)),(737),(WF8))
endif
endif
else
call FlushChildHashtable(L7,(I97))
call OZ7(t)
endif
set t=null
set IH7=null
set ZX7=null
set CBG=null
return false
endfunction
function CCG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit ZX7=(LoadUnitHandle(L7,(I97),(2)))
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED then
call FlushChildHashtable(L7,(I97))
call OZ7(t)
call RemoveSavedHandle(L7,(GetHandleId(ZX7)),(738))
call SaveInteger(L7,(GetHandleId(ZX7)),(737),(-1))
call UnitRemoveAbility(ZX7,1093813838)
call UnitRemoveAbility(ZX7,1110459969)
elseif GetAttacker()==ZX7 then
set t=CreateTrigger()
set I97=GetHandleId(t)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2,false)
call TriggerAddCondition(t,Condition(function CAG))
call SaveUnitHandle(L7,(I97),(2),(ZX7))
call SaveUnitHandle(L7,(I97),(17),(GetTriggerUnit()))
endif
set t=null
set ZX7=null
return false
endfunction
function C3G takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call SetPlayerAbilityAvailable(GetOwningPlayer(IH7),1093813838,false)
call XF7(IH7,1093813838)
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterTimerEvent(t,$C,false)
call TriggerAddCondition(t,Condition(function CCG))
call SaveUnitHandle(L7,(I97),(2),(IH7))
call SaveInteger(L7,(GetHandleId(IH7)),(737),(GetUnitAbilityLevel(ZX7,1093813841)+1))
call SaveTriggerHandle(L7,(GetHandleId(IH7)),(738),(t))
set IH7=null
set t=null
set ZX7=null
endfunction
function C6G takes nothing returns boolean
if GetSpellAbilityId()==1093813841 then
call C3G()
endif
return false
endfunction
function Register_Focus takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function C6G))
set t=null
endfunction
function CLG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer I97=GetHandleId(t)
local unit IH7=(LoadUnitHandle(L7,(I97),(17)))
local integer BC7=(LoadInteger(L7,(I97),(5)))
local unit BB7
if GetTriggerEvalCount(t)==1 then
set BB7=CreateUnit(GetOwningPlayer(IH7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
call UnitAddAbility(BB7,1093813847)
call IssueTargetOrderById(BB7,$D0267,IH7)
endif
if(BC7+3)*$A<GetTriggerEvalCount(t)then
call UnitRemoveAbility(IH7,1110459974)
call UnitRemoveAbility(IH7,1098282348)
call UnitRemoveAbility(IH7,1093678162)
call UnitRemoveAbility(IH7,1096971630)
call DestroyEffect((LoadEffectHandle(L7,(I97),(32))))
call FlushChildHashtable(L7,(I97))
call OZ7(t)
else
call YZ8(IH7)
call YW8(IH7,0,0)
endif
set t=null
set IH7=null
return false
endfunction
function C1G takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer I97=GetHandleId(t)
call XF7(IH7,1098282348)
call XF7(IH7,1096971630)
call XF7(IH7,1093678162)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function CLG))
call SaveInteger(L7,(I97),(5),(GetUnitAbilityLevel(ZX7,1093813836)))
call SaveUnitHandle(L7,(I97),(17),(IH7))
call SaveEffectHandle(L7,(I97),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\DivineShield\\DivineShieldTarget.mdl",IH7,"origin")))
call YZ8(IH7)
call YW8(IH7,0,0)
set t=null
set IH7=null
set ZX7=null
endfunction
function C0G takes nothing returns boolean
if GetSpellAbilityId()==1093813836 then
call C1G()
endif
return false
endfunction
function Register_DivineIntervention takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function C0G))
set t=null
endfunction
function C5G takes nothing returns nothing
local unit ZX7=GetTriggerUnit()
local unit IH7=GetSpellTargetUnit()
local unit BB7=CreateUnit(GetOwningPlayer(IH7),1697656901,GetUnitX(IH7),GetUnitY(IH7),0)
local integer BC7=GetUnitAbilityLevel(ZX7,1093813583)
call UnitAddAbility(BB7,1093813584)
call IssuePointOrderById(BB7,$D0270,GetUnitX(IH7),GetUnitY(IH7))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\FrozenOrb_NoTrail.mdx",IH7,"chest"))
call B67(ZX7,IH7,1,BC7*75)
set ZX7=null
set BB7=null
set IH7=null
endfunction
function C2G takes nothing returns boolean
if GetSpellAbilityId()==1093813583 then
call C5G()
endif
return false
endfunction
function Register_Chill takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function C2G))
set t=null
endfunction
function InitCustomTeams takes nothing returns nothing
call SetPlayerTeam(Player(1),0)
call SetPlayerTeam(Player(2),0)
call SetPlayerTeam(Player(3),0)
call SetPlayerTeam(Player(4),0)
call SetPlayerTeam(Player(5),0)
call SetPlayerTeam(Player(7),1)
call SetPlayerTeam(Player(8),1)
call SetPlayerTeam(Player(9),1)
call SetPlayerTeam(Player($A),1)
call SetPlayerTeam(Player($B),1)
endfunction
function C_G takes string L4G,string L7G,integer L8G returns integer
local integer i=L8G
local string L9G=null
loop
exitwhen i==StringLength(L4G)
set L9G=SubString(L4G,i,i+1)
if(L9G==L7G)then
return i
endif
set i=i+1
endloop
return-1
endfunction
function LDG takes nothing returns nothing
local string LEG=GetEventPlayerChatString()
local integer LFG=C_G(LEG," ",0)
local integer LGG=C_G(LEG," ",LFG+1)
local integer LHG=S2I(SubString(LEG,LFG,LGG+1))
local string LIG=SubString(LEG,LGG+1,StringLength(LEG))
local boolean LJG=false
local integer i=0
set LIG="+"+LIG
if LHG<$C then
loop
exitwhen i==$E
if(LIG==GetPlayerName(Player(i)))then
set LJG=true
endif
set i=i+1
endloop
if((not LJG)and(UH4>0)and(GetPlayerController(Player(LHG))==MAP_CONTROL_COMPUTER)and(LHG!=0)and(LHG!=6)and(LHG<$C)and(StringLength(LIG)<20))then
call IL7("Renaming "+GetPlayerName(Player(LHG))+" : "+LIG)
set KZ4[LHG]=LIG
call SetPlayerName(Player(LHG),LIG)
set UH4=UH4-1
endif
endif
endfunction
function LKG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer i=0
loop
exitwhen i==$E
call TriggerRegisterPlayerChatEvent(t,Player(i),"-rn ",false)
set i=i+1
endloop
call TriggerAddAction(t,function LDG)
set t=null
endfunction
function LMG takes nothing returns nothing
local real dt=TimerGetElapsed(W)
local real X
local real Y
local real dx
local real dy
local real Vx
local real Vy
local group g=WS7()
local unit WX7=GetOrderedUnit()
local unit IH7
local integer i=1
local integer BC7
call IL7("LMG")
call SyncSelections()
call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
set IH7=FirstOfGroup(g)
call WR7(g)
set g=null
set dx=GetUnitX(IH7)
set dy=GetUnitY(IH7)
call J_7(.1)
set dt=TimerGetElapsed(W)-dt
set X=GetUnitX(IH7)
set Y=GetUnitY(IH7)
set dx=(X-dx)/dt
set dy=(Y-dy)/dt
loop
set WX7=M7[i]
set BC7=GetUnitAbilityLevel(WX7,1093678665)
if BC7>0 then
set dt=WT7(40./.03,X+dx*.3-GetUnitX(WX7),Y+dy*.3-GetUnitY(WX7),dx,dy)
if dt>0 and dt<=((400.+200.*BC7)*.03/40.)then
call IssuePointOrderById(WX7,$D0278,X+dx*(dt+.3),Y+dy*(dt+.3))
endif
endif
set i=i+1
exitwhen i>$A
endloop
set IH7=null
set WX7=null
endfunction
function aiIsWaypoint takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==1697656899
endfunction
function LNG takes nothing returns nothing
set WP4=CreateRegion()
call RegionAddRect(WP4,OD)
set WQ4=CreateRegion()
call RegionAddRect(WQ4,PD)
set WR4=CreateRegion()
call RegionAddRect(WR4,WD)
call RegionAddRect(WR4,XD)
call RegionAddRect(WR4,YD)
set WS4=CreateRegion()
call RegionAddRect(WS4,ZD)
call RegionAddRect(WS4,AD)
call RegionAddRect(WS4,BD)
set IU4=CreateRegion()
call RegionAddRect(IU4,LD)
call RegionAddRect(IU4,KE)
call RegionAddRect(IU4,RE)
call RegionAddRect(IU4,SE)
call RegionAddRect(IU4,TE)
call RegionAddRect(IU4,WE)
call RegionAddRect(IU4,YE)
call RegionAddRect(IU4,ZE)
call RegionAddRect(IU4,EF)
call RegionAddRect(IU4,FF)
call RegionAddRect(IU4,GF)
call RegionAddRect(IU4,HF)
call RegionAddRect(IU4,JF)
call RegionAddRect(IU4,KF)
call RegionAddRect(IU4,MF)
call RegionAddRect(IU4,NF)
call RegionAddRect(IU4,OF)
call RegionAddRect(IU4,PF)
call RegionAddRect(IU4,QF)
call RegionAddRect(IU4,RF)
call RegionAddRect(IU4,SF)
call RegionAddRect(IU4,TF)
call RegionAddRect(IU4,UF)
call RegionAddRect(IU4,WF)
call RegionAddRect(IU4,XF)
call RegionAddRect(IU4,YF)
call RegionAddRect(IU4,ZF)
call RegionAddRect(IU4,BF)
call RegionAddRect(IU4,CF)
call RegionAddRect(IU4,LF)
call RegionAddRect(IU4,DGg)
call RegionAddRect(IU4,EG)
call RegionAddRect(IU4,FG)
call RegionAddRect(IU4,GG)
call RegionAddRect(IU4,JG)
call RegionAddRect(IU4,MG)
call RegionAddRect(IU4,OG)
call RegionAddRect(IU4,PG)
call RegionAddRect(IU4,QG)
call RegionAddRect(IU4,RG)
call RegionAddRect(IU4,SG)
call RegionAddRect(IU4,TG)
call RegionAddRect(IU4,UG)
call RegionAddRect(IU4,VG)
call RegionAddRect(IU4,WG)
call RegionAddRect(IU4,XG)
call RegionAddRect(IU4,ZG)
call RegionAddRect(IU4,AG)
call RegionAddRect(IU4,BG)
call RegionAddRect(IU4,CG)
call RegionAddRect(IU4,LG)
call RegionAddRect(IU4,DH)
call RegionAddRect(IU4,EH)
call RegionAddRect(IU4,HH)
call RegionAddRect(IU4,OH)
call RegionAddRect(IU4,PH)
call RegionAddRect(IU4,QH)
call RegionAddRect(IU4,RH)
call RegionAddRect(IU4,TH)
call RegionAddRect(IU4,UH)
call RegionAddRect(IU4,WH)
call RegionAddRect(IU4,XH)
call RegionAddRect(IU4,YH)
call RegionAddRect(IU4,ZH)
call RegionAddRect(IU4,AH)
call RegionAddRect(IU4,CH)
call RegionAddRect(IU4,DI)
call RegionAddRect(IU4,EI)
call RegionAddRect(IU4,GI)
call RegionAddRect(IU4,HI)
call RegionAddRect(IU4,II)
call RegionAddRect(IU4,JI)
call RegionAddRect(IU4,NI)
call RegionAddRect(IU4,PI)
call RegionAddRect(IU4,SI)
call RegionAddRect(IU4,TI)
call RegionAddRect(IU4,UI)
call RegionAddRect(IU4,WI)
call RegionAddRect(IU4,XI)
call RegionAddRect(IU4,YI)
call RegionAddRect(IU4,BI)
call RegionAddRect(IU4,CI)
call RegionAddRect(IU4,LI)
call RegionAddRect(IU4,TJ)
call RegionAddRect(IU4,MK)
call RegionAddRect(IU4,UK)
call RegionAddRect(IU4,YK)
call RegionAddRect(IU4,SM)
call RegionAddRect(IU4,TM)
call RegionAddRect(IU4,UM)
call RegionAddRect(IU4,WM)
call RegionAddRect(IU4,YM)
call RegionAddRect(IU4,ZM)
call RegionAddRect(IU4,JN)
call RegionAddRect(IU4,MN)
endfunction
function LOG takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerAddCondition(t,Condition(function ZSF))
set t=null
endfunction
function LPG takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerAddCondition(t,Condition(function ZXF))
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
set WX4=t
set t=null
endfunction
function LQG takes nothing returns nothing
local trigger t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(t,Condition(function C2F))
set t=null
endfunction
function LRG takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,14.,false)
call TriggerAddCondition(t,Condition(function RL9))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,15.,false)
call TriggerAddCondition(t,Condition(function R39))
set t=null
endfunction
function LSG takes nothing returns nothing
set WT4=CreateTrigger()
call TriggerRegisterTimerEventSingle(WT4,65.)
call TriggerAddAction(WT4,function R19)
endfunction
function LTG takes nothing returns nothing
set WU4=CreateTrigger()
call TriggerRegisterTimerEventSingle(WU4,90.)
call TriggerAddAction(WU4,function R09)
endfunction
function LUG takes nothing returns nothing
set H54=CreateTrigger()
call TriggerRegisterTimerEventSingle(H54,120.)
call TriggerAddAction(H54,function R59)
endfunction
function LVG takes nothing returns nothing
local location LB8
set LB8=GetRectCenter(ND)
set V4=CreateUnit(Player($C),'n00L',GetRectCenterX(ND),GetRectCenterY(ND),180.)
call SetUnitAcquireRange(V4,$96)
call RemoveLocation(LB8)
call UnitAddItem(V4,CreateItem(ZU[X0],0,0))
call UnitAddAbility(V4,1093743666)
set LB8=GetRectCenter(Br)
call RemoveUnit(CreateUnitAtLoc(B7,1966092337,LB8,0))
call RemoveLocation(LB8)
set LB8=GetRectCenter(cr)
call RemoveUnit(CreateUnitAtLoc(B7,1966092337,LB8,0))
call RemoveLocation(LB8)
set LB8=GetRectCenter(Cr)
call RemoveUnit(CreateUnitAtLoc(B7,1966092337,LB8,0))
call RemoveLocation(LB8)
set LB8=GetRectCenter(fr0)
call RemoveUnit(CreateUnitAtLoc(B7,1966092337,LB8,0))
call RemoveLocation(LB8)
set LB8=GetRectCenter(Fr)
call RemoveUnit(CreateUnitAtLoc(B7,1966092337,LB8,0))
call RemoveLocation(LB8)
set LB8=GetRectCenter(Hr)
call RemoveUnit(CreateUnitAtLoc(B7,1966092337,LB8,0))
call RemoveLocation(LB8)
set LB8=GetRectCenter(jr)
call RemoveUnit(CreateUnitAtLoc(B7,1966092337,LB8,0))
call RemoveLocation(LB8)
set LB8=GetRectCenter(Jr)
call RemoveUnit(CreateUnitAtLoc(B7,1966092337,LB8,0))
call RemoveLocation(LB8)
set LB8=GetRectCenter(lr)
call RemoveUnit(CreateUnitAtLoc(B7,1966092337,LB8,0))
call RemoveLocation(LB8)
set LB8=GetRectCenter(mr)
call RemoveUnit(CreateUnitAtLoc(B7,1966092337,LB8,0))
call RemoveLocation(LB8)
set LB8=GetRectCenter(Ni)
call RemoveUnit(CreateUnitAtLoc(B7,1966092337,LB8,0))
call RemoveLocation(LB8)
set LB8=GetRectCenter(Bi)
call RemoveUnit(CreateUnitAtLoc(B7,1966092337,LB8,0))
call RemoveLocation(LB8)
set LB8=GetRectCenter(Bi0)
call RemoveUnit(CreateUnitAtLoc(B7,1966092337,LB8,0))
call RemoveLocation(LB8)
set LB8=GetRectCenter(Bi1)
call RemoveUnit(CreateUnitAtLoc(B7,1966092337,LB8,0))
call RemoveLocation(LB8)
set LB8=null
endfunction
function aiAutoInitDEDG takes nothing returns nothing
if not LT then
call OZ9()
endif
if not WT then
call OA9()
endif
endfunction
function QM9 takes nothing returns nothing
local integer O5=1
local integer LWG=0
local integer LXG=0
local boolean LYG=false
local boolean LZG=false
local trigger t=null
call DestroyTrigger(GetTriggeringTrigger())
if A04 then
return
endif
if false then
call FlushGameCache(InitGameCache("AIDebug.w3v"))
set E=InitGameCache("AIDebug.w3v")
endif
set O5=1
loop
exitwhen(O5>5 or(X_4!=null and Y44!=null))
if(GetPlayerSlotState(Z7[O5])==PLAYER_SLOT_STATE_PLAYING)and X_4==null then
set X_4=Z7[O5]
endif
if(GetPlayerSlotState(A7[O5])==PLAYER_SLOT_STATE_PLAYING)and Y44==null then
set Y44=A7[O5]
endif
set O5=O5+1
endloop
set O5=1
loop
exitwhen O5>5
if TZ7(Z7[O5])then
if(LWG<3)then
set eY[64+GetPlayerId(Z7[O5])]=LWG
elseif(LWG==3)then
set eY[64+GetPlayerId(Z7[O5])]=0
else
set eY[64+GetPlayerId(Z7[O5])]=GetRandomInt(1,2)
endif
call ForceAddPlayer(QX4,Z7[O5])
set QY4[GetPlayerId(Z7[O5])]=true
set LWG=LWG+1
set LYG=true
endif
if TZ7(A7[O5])then
if(LXG<3)then
if LXG==1 then
set eY[64+GetPlayerId(A7[O5])]=2
elseif LXG==2 then
set eY[64+GetPlayerId(A7[O5])]=1
else
set eY[64+GetPlayerId(A7[O5])]=LXG
endif
elseif(LXG==3)then
set eY[64+GetPlayerId(A7[O5])]=0
else
set eY[64+GetPlayerId(A7[O5])]=GetRandomInt(1,2)
endif
call ForceAddPlayer(QX4,A7[O5])
set QY4[GetPlayerId(A7[O5])]=true
set LXG=LXG+1
set LZG=true
endif
set O5=O5+1
endloop
set O5=1
loop
exitwhen O5>5
if(TZ7(Z7[O5]))then
call Q2F(Z7[O5],LWG)
endif
if(TZ7(A7[O5]))then
call Q2F(A7[O5],LXG)
endif
set O5=O5+1
endloop
if((LYG)or(LZG))then
if false then
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,"AI ver."+"6.8G8")
endif
set O5=1
loop
exitwhen O5>5
if(TZ7(Z7[O5]))then
call Q5F(Z7[O5])
endif
if(TZ7(A7[O5]))then
call Q5F(A7[O5])
endif
set O5=O5+1
endloop
set O5=1
loop
exitwhen O5>5
if(TY7(Z7[O5]))then
set QT4=Z7[O5]
if(LYG)then
call DisplayTimedTextToForce(X7,10.,Q[GetPlayerId(QT4)]+GetPlayerName(QT4)+GetObjectName(1496331828)+Q[0]+GetPlayerName(Z7[0])+"|r")
call DisplayTimedTextToPlayer(QT4,0,0,10.,GetObjectName(1496331833))
call KE9(QT4)
else
set LC4=false
endif
exitwhen true
endif
set O5=O5+1
endloop
set O5=1
loop
exitwhen O5>5
if(TY7(A7[O5]))then
set QU4=A7[O5]
if(LZG)then
call DisplayTimedTextToForce(Y7,10.,Q[GetPlayerId(QU4)]+GetPlayerName(QU4)+GetObjectName(1496331828)+Q[6]+GetPlayerName(A7[0])+"|r")
call DisplayTimedTextToPlayer(QU4,0,0,10.,GetObjectName(1496331833))
call KE9(QU4)
else
set L34=false
endif
exitwhen true
endif
set O5=O5+1
endloop
if(LYG and QT4==null and QU4!=null)then
call DisplayTimedTextToPlayer(QU4,0,0,10.,GetObjectName(1496331832))
endif
if(LZG and QT4!=null and QU4==null)then
call DisplayTimedTextToPlayer(QT4,0,0,10.,GetObjectName(1496331832))
endif
set CP4=CreateTrigger()
call Q_F(CP4,true,LYG,LZG)
call TriggerAddAction(CP4,function P2F)
set CQ4=CreateTrigger()
call Q_F(CQ4,false,LZG,LYG)
call TriggerAddAction(CQ4,function P2F)
call TriggerAddAction(QA4,function X1E)
if((not D4)and(not RZ4)and(not A8)and(not P74)and(not P84)and(not H34)and(not O9)and(not O04)and(not W8)and(not SN4))then
set t=CreateTrigger()
if(QT4!=null)then
call TriggerRegisterPlayerChatEvent(t,QT4,"-airepick",false)
call DisplayTimedTextToPlayer(QT4,0,0,10.,"你可以使用"+"|c00dd8dff"+"-airepick|r让AI重选英雄")
endif
if(QU4!=null)then
call TriggerRegisterPlayerChatEvent(t,QU4,"-airepick",false)
call DisplayTimedTextToPlayer(QU4,0,0,10.,"你可以使用"+"|c00dd8dff"+"-airepick|r让AI重选英雄")
endif
call TriggerAddAction(t,function XLE)
endif
if(QT4!=null)then
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,QT4,"-aigrant",false)
call TriggerAddAction(t,function RDF)
endif
if(QU4!=null)then
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,QU4,"-aigrant",false)
call TriggerAddAction(t,function RDF)
endif
set t=CreateTrigger()
call TriggerAddAction(t,function XLE)
call DisplayTimedTextToPlayer(QT4,0,0,10.," ")
call DisplayTimedTextToPlayer(QU4,0,0,10.," ")
if(T14)then
set T04[1]=ZU[F5]
set T04[2]=ZU[G5]
set T04[3]=ZU[J5]
set T04[4]=ZU[M5]
set T04[5]=ZU[N5]
set T54[1]=180.
set T54[2]=160.
set T54[3]=140.
set T54[4]=120.
set T54[5]=100.
endif
call CZE()
set Q64=CreateTrigger()
call TriggerRegisterUnitInRange(Q64,JA4,6000.,null)
call TriggerAddCondition(Q64,Condition(function LYE))
call DisableTrigger(Q64)
set Q14=CreateTrigger()
call TriggerRegisterTimerEvent(Q14,5.,true)
call TriggerAddCondition(Q14,Condition(function LZE))
call DisableTrigger(Q14)
set Q34=CreateTrigger()
call TriggerRegisterUnitInRange(Q34,IZ4,6000.,null)
call TriggerAddCondition(Q34,Condition(function LAE))
call DisableTrigger(Q34)
set QL4=CreateTrigger()
call TriggerRegisterTimerEvent(QL4,5.,true)
call TriggerAddCondition(QL4,Condition(function LBE))
call DisableTrigger(QL4)
set LW4[0]=GetUnitX(IZ4)
set LW4[1]=GetUnitY(IZ4)
set LW4[2]=(GetUnitX(JF4)+GetUnitX(JQ4)+GetUnitX(JR4))/3
set LW4[3]=(GetUnitY(JF4)+GetUnitY(JQ4)+GetUnitY(JR4))/3
set LW4[4]=(GetUnitX(JG4)+GetUnitX(JS4)+GetUnitX(JV4))/3
set LW4[5]=(GetUnitY(JG4)+GetUnitY(JS4)+GetUnitY(JV4))/3
set LW4[6]=(GetUnitX(JH4)+GetUnitX(JT4)+GetUnitX(JW4))/3
set LW4[7]=(GetUnitY(JH4)+GetUnitY(JT4)+GetUnitY(JW4))/3
set LW4[8]=(GetUnitX(JI4)+GetUnitX(JU4)+GetUnitX(JX4))/3
set LW4[9]=(GetUnitY(JI4)+GetUnitY(JU4)+GetUnitY(JX4))/3
set LW4[24]=GetUnitX(JA4)
set LW4[25]=GetUnitY(JA4)
set LW4[26]=(GetUnitX(J34)+GetUnitX(K84)+GetUnitX(K94))/3
set LW4[27]=(GetUnitY(J34)+GetUnitY(K84)+GetUnitY(K94))/3
set LW4[28]=(GetUnitX(J64)+GetUnitX(KD4)+GetUnitX(KG4))/3
set LW4[29]=(GetUnitY(J64)+GetUnitY(KD4)+GetUnitY(KG4))/3
set LW4[30]=(GetUnitX(JL4)+GetUnitX(KE4)+GetUnitX(KH4))/3
set LW4[31]=(GetUnitY(JL4)+GetUnitY(KE4)+GetUnitY(KH4))/3
set LW4[32]=(GetUnitX(J14)+GetUnitX(KF4)+GetUnitX(KI4))/3
set LW4[33]=(GetUnitY(J14)+GetUnitY(KF4)+GetUnitY(KI4))/3
set O5=0
loop
exitwhen O5>23
set LV4[O5]=null
set LV4[24+O5]=null
set O5=O5+1
endloop
set t=CreateTrigger()
call TriggerRegisterUnitInRange(t,JA4,1200.,Q24)
call TriggerAddCondition(t,Condition(function F9F))
call TriggerAddAction(t,function FFF)
set t=CreateTrigger()
call TriggerRegisterUnitInRange(t,IZ4,1200.,Q24)
call TriggerAddCondition(t,Condition(function FDF))
call TriggerAddAction(t,function FFF)
set t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,bj_mapInitialPlayableArea)
call TriggerAddCondition(t,Condition(function NEF))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,45.,false)
call TriggerAddAction(t,function R9F)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,20.,false)
call TriggerAddCondition(t,Condition(function NO9))
set O5=1
loop
if(IsPlayerInForce(Player(O5),QX4))then
set Q04[O5]=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(Q04[O5],Player(O5),EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER,Q24)
call TriggerRegisterPlayerUnitEvent(Q04[O5],Player(O5),EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER,Q24)
call TriggerAddCondition(Q04[O5],Condition(function MGF))
call TriggerAddAction(Q04[O5],function MHF)
set Q04[16+O5]=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(Q04[16+O5],Player(O5),EVENT_PLAYER_UNIT_ISSUED_ORDER,Q24)
call TriggerAddCondition(Q04[16+O5],Condition(function MGF))
call TriggerAddAction(Q04[16+O5],function MNF)
set Q04[96+O5]=CreateTrigger()
call DisableTrigger(Q04[96+O5])
call TriggerRegisterTimerEvent(Q04[16+O5],.2,true)
call TriggerAddCondition(Q04[96+O5],Condition(function PX7))
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_ATTACKED,Q24)
call TriggerAddCondition(t,Condition(function F7F))
call TriggerAddAction(t,function F8F)
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_ATTACKED,Q24)
call TriggerAddCondition(t,Condition(function FGF))
call TriggerAddAction(t,function FHF)
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER,Q24)
call TriggerAddCondition(t,Condition(function DRF))
call TriggerAddAction(t,function DSF)
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_USE_ITEM,Q24)
call TriggerAddCondition(t,Condition(function SB7))
call TriggerAddAction(t,function MOF)
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_ATTACKED,Q24)
call TriggerAddCondition(t,Condition(function M5F))
call TriggerAddAction(t,function M2F)
endif
if(GetPlayerSlotState(Player(O5))==PLAYER_SLOT_STATE_PLAYING)then
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER,Q24)
call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER,Q24)
call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_ISSUED_ORDER,Q24)
call TriggerAddCondition(t,Condition(function MFF))
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_DEATH,Q24)
call TriggerAddCondition(t,Condition(function F4F))
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_ATTACKED,Q24)
call TriggerAddCondition(t,Condition(function FJF))
call TriggerAddAction(t,function FRF)
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_SPELL_EFFECT,Q24)
call TriggerAddCondition(t,Condition(function FTF))
call TriggerAddAction(t,function FUF)
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_SPELL_EFFECT,Q24)
call TriggerAddCondition(t,Condition(function SC7))
call TriggerAddAction(t,function MTF)
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_SPELL_FINISH,Q24)
call TriggerAddCondition(t,Condition(function SC7))
call TriggerAddAction(t,function MWF)
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_SPELL_EFFECT,Q24)
call TriggerAddCondition(t,Condition(function SC7))
call TriggerAddAction(t,function MYF)
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_SPELL_EFFECT,Q24)
call TriggerAddCondition(t,Condition(function M0F))
call TriggerAddAction(t,function M2F)
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_SPELL_CAST,Q24)
call TriggerAddCondition(t,Condition(function NCF))
call TriggerAddAction(t,function PEF)
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_SPELL_ENDCAST,Q24)
call TriggerAddAction(t,function PGF)
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER,Q24)
call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER,Q24)
call TriggerAddCondition(t,Condition(function MKF))
call TriggerAddAction(t,function MMF)
if GetPlayerController(Player(O5))==MAP_CONTROL_USER and(not SN4)then
call QD9(Player(O5),true)
call QE9(Player(O5),true)
endif
endif
set O5=O5+1
exitwhen O5>$B
endloop
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,Z7[0],EVENT_PLAYER_UNIT_ATTACKED,Q24)
call TriggerRegisterPlayerUnitEvent(t,A7[0],EVENT_PLAYER_UNIT_ATTACKED,Q24)
call TriggerAddCondition(t,Condition(function FXF))
call TriggerAddAction(t,function FBF)
call GQF()
call GVF()
set t=CreateTrigger()
call B6(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterPlayerUnitEvent(t,Z7[0],EVENT_PLAYER_UNIT_ATTACKED,Q24)
call TriggerAddCondition(t,Condition(function MZF))
call TriggerAddAction(t,function MLF)
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,Z7[0],EVENT_PLAYER_UNIT_DEATH,Q24)
call TriggerRegisterPlayerUnitEvent(t,A7[0],EVENT_PLAYER_UNIT_DEATH,Q24)
call TriggerAddCondition(t,Condition(function FCF))
set t=CreateTrigger()
call c6(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterPlayerUnitEvent(t,A7[0],EVENT_PLAYER_UNIT_ATTACKED,Q24)
call TriggerRegisterPlayerUnitEvent(t,Player($C),EVENT_PLAYER_UNIT_ATTACKED,Q24)
call TriggerAddCondition(t,Condition(function MZF))
call TriggerAddAction(t,function MLF)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,200.,false)
call TriggerAddAction(t,function Q0F)
set DQ7=CreateTrigger()
call TriggerRegisterTimerEvent(DQ7,9.,true)
call TriggerAddAction(DQ7,function Q8F)
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,B7,EVENT_PLAYER_UNIT_DEATH,Condition(function TO7))
call TriggerAddAction(t,function G5F)
call R1W()
set PZ4=true
set PA4=true
if(((NG7(true)==1)and(NG7(false)>2))or((NG7(true)==2)and(NG7(false)==5)))then
set PC4=$A
else
set PC4=GetRandomInt($B,$F)
endif
if(((NG7(false)==1)and(NG7(true)>2))or((NG7(false)==2)and(NG7(true)==5)))then
set PB4=$A
else
set PB4=GetRandomInt($B,$F)
endif
if(R4)then
call VV7(bj_FORCE_ALL_PLAYERS,30.,"
AI有一个模拟物品掉落模式的系统
他们将掉落的物品换成自己的金钱")
endif
else
call DestroyTrigger(HK)
call DestroyTrigger(QZ4)
call DestroyTrigger(HN)
call DestroyTrigger(Ho)
call DestroyTrigger(QA4)
set QA4=null
call DestroyTrigger(Hn)
call DestroyTrigger(QB4)
call ForceClear(QX4)
endif
if(not C4)then
call DestroyTrigger(OS)
endif
if(not AT)then
call DestroyTrigger(QC4)
endif
call X_7(1093678665)
call X_7(1093817137)
call X_7(1093677645)
call X_7(1093750089)
call X_7(1093817157)
if HB4!=0 then
set L74=5/I2R(HB4)
endif
if HC4!=0 then
set L84=5/I2R(HC4)
endif
set t=null
endfunction
function R7P takes nothing returns nothing
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10,"TRIGSTR_50016")
call OZ7(GetTriggeringTrigger())
endfunction
function main takes nothing returns nothing
local weathereffect we
local integer i
local player p
local unit u
local integer unitID
local trigger t
local real life
local integer YC7
local integer LAG
local version LBG
local integer XYF
local real LCG
local real L3G
local real L6G
local real LLG
local real L1G
local real L0G
local real L5G
local real L2G
local real L_G
local real D4H
local real D7H
local real D8H
local real D9H
local real DDH
local real DEH
local real DFH
local real DGH
local real DHH
local real DIH
local real DJH
local integer LO7
local player j8
local real DKH
local real DMH
local real DNH
local real DOH
local real DPH
local real DQH
local real DRH
local real DSH
local real DTH
local real DUH
local real DVH
local real DWH
local real DXH
local real DYH
local real DZH
local real DAH
local real DBH
local real DCH
local real D3H
local real D6H
local real DLH
local real D1H
local real D0H
local real D5H
local location LB8
local region MUD
local integer OB7
local integer x
local integer y
call LKG()
set HO7[0]=CreateTrigger()
set HP7=GetHandleId(HO7[0])
set i=1
loop
exitwhen i>9
set HO7[i]=CreateTrigger()
set i=i+1
endloop
set i=0
call SetCameraBounds(-7552.+GetCameraMargin(CAMERA_MARGIN_LEFT),-7936.+GetCameraMargin(CAMERA_MARGIN_BOTTOM),7552.-GetCameraMargin(CAMERA_MARGIN_RIGHT),7424.-GetCameraMargin(CAMERA_MARGIN_TOP),-7552.+GetCameraMargin(CAMERA_MARGIN_LEFT),7424.-GetCameraMargin(CAMERA_MARGIN_TOP),7552.-GetCameraMargin(CAMERA_MARGIN_RIGHT),-7936.+GetCameraMargin(CAMERA_MARGIN_BOTTOM))
call SetDayNightModels("Environment\\DNC\\DNCFelwood\\DNCFelwoodTerrain\\DNCFelwoodTerrain.mdl","Environment\\DNC\\DNCFelwood\\DNCFelwoodUnit\\DNCFelwoodUnit.mdl")
call SetWaterBaseColor(0,0,$FF,$FF)
call NewSoundEnvironment("Default")
call SetAmbientDaySound("FelwoodDay")
call SetAmbientNightSound("FelwoodNight")
call SetMapMusic("Music",true,0)
set yE=CreateSound("Abilities\\Spells\\Human\\Avatar\\Avatar.wav",false,true,true,$A,$A,"SpellsEAX")
call SetSoundParamsFromLabel(yE,"Avatar")
call SetSoundDuration(yE,$C7F)
set zE=CreateSound("Abilities\\Spells\\NightElf\\Blink\\BlinkArrival1.wav",false,true,true,$A,$A,"SpellsEAX")
call SetSoundParamsFromLabel(zE,"BlinkTarget")
call SetSoundDuration(zE,$5BA)
call SetSoundPitch(zE,1.6)
set vX=CreateSound("Abilities\\Spells\\Human\\Blizzard\\BlizzardLoop1.wav",true,true,true,$A,$A,"SpellsEAX")
call SetSoundParamsFromLabel(vX,"BlizzardLoop")
call SetSoundDuration(vX,$FA0)
set WN=CreateSound("Buildings\\Undead\\TempleOfTheDamned\\TempleOfTheDamnedWhat.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(WN,"TempleOfTheDamnedWhat")
call SetSoundDuration(WN,$DBE)
call SetSoundDistanceCutoff(WN,2000.)
set YN=CreateSound("Abilities\\Spells\\Human\\Flare\\FlareTarget2.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(YN,"Flare2")
call SetSoundDuration(YN,$540)
call SetSoundDistanceCutoff(YN,2000.)
set ZN=CreateSound("Sounds\\Dominating.mp3",false,false,false,$A,$A,"DefaultEAXON")
call SetSoundDuration(ZN,$70A)
call SetSoundChannel(ZN,0)
call SetSoundVolume(ZN,$7F)
call SetSoundPitch(ZN,1.)
set nX=CreateSound("Sounds\\Double_Kill.mp3",false,false,false,$A,$A,"DefaultEAXON")
call SetSoundDuration(nX,$7DC)
call SetSoundChannel(nX,0)
call SetSoundVolume(nX,$7F)
call SetSoundPitch(nX,1.)
set EX=CreateSound("Sounds\\firstblood.mp3",false,false,false,$A,$A,"DefaultEAXON")
call SetSoundDuration(EX,$61F)
call SetSoundChannel(EX,0)
call SetSoundVolume(EX,$7F)
call SetSoundPitch(EX,1.)
set OX=CreateSound("Units\\Creeps\\GoblinSapper\\GoblinSapperPissed1.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(OX,"GoblinSapperPissed")
call SetSoundDuration(OX,$5EB)
call SetSoundChannel(OX,0)
set AN=CreateSound("Units\\Creeps\\GoblinSapper\\GoblinSapperYesAttack1.wav",false,false,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(AN,"GoblinSapperYesAttack")
call SetSoundDuration(AN,813)
call SetSoundChannel(AN,0)
set BN=CreateSound("Sounds\\GodLike.mp3",false,false,false,$A,$A,"DefaultEAXON")
call SetSoundDuration(BN,$724)
call SetSoundChannel(BN,0)
call SetSoundVolume(BN,$7F)
call SetSoundPitch(BN,1.)
set bX=CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed1.wav",false,true,true,$A,$A,"HeroAcksEAX")
call SetSoundParamsFromLabel(bX,"HEROGoblinALCHEMISTPissed")
call SetSoundDuration(bX,$79C)
set BX=CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed2.wav",false,true,true,$A,$A,"HeroAcksEAX")
call SetSoundParamsFromLabel(BX,"HEROGoblinALCHEMISTPissed")
call SetSoundDuration(BX,$6C5)
set cX=CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed3.wav",false,true,true,$A,$A,"HeroAcksEAX")
call SetSoundParamsFromLabel(cX,"HEROGoblinALCHEMISTPissed")
call SetSoundDuration(cX,$DF2)
set CX=CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed4.wav",false,true,true,$A,$A,"HeroAcksEAX")
call SetSoundParamsFromLabel(CX,"HEROGoblinALCHEMISTPissed")
call SetSoundDuration(CX,$DF8)
set fX=CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed5.wav",false,true,true,$A,$A,"HeroAcksEAX")
call SetSoundParamsFromLabel(fX,"HEROGoblinALCHEMISTPissed")
call SetSoundDuration(fX,$DE6)
set kX=CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed6.wav",false,true,true,$A,$A,"HeroAcksEAX")
call SetSoundParamsFromLabel(kX,"HEROGoblinALCHEMISTPissed")
call SetSoundDuration(kX,$2A73)
set LX=CreateSound("Units\\Orc\\HeroBladeMaster\\HeroBladeMasterPissed1.wav",false,true,true,$A,$A,"HeroAcksEAX")
call SetSoundParamsFromLabel(LX,"HeroBladeMasterPissed")
call SetSoundDuration(LX,$8BB)
set mX=CreateSound("Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed1.wav",false,true,true,$A,$A,"HeroAcksEAX")
call SetSoundParamsFromLabel(mX,"HeroDreadLordPissed")
call SetSoundDuration(mX,$B69)
set MX=CreateSound("Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed2.wav",false,true,true,$A,$A,"HeroAcksEAX")
call SetSoundParamsFromLabel(MX,"HeroDreadLordPissed")
call SetSoundDuration(MX,7125)
set PX=CreateSound("Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed3.wav",false,true,true,$A,$A,"HeroAcksEAX")
call SetSoundParamsFromLabel(PX,"HeroDreadLordPissed")
call SetSoundDuration(PX,$F9E)
set qX=CreateSound("Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed4.wav",false,true,true,$A,$A,"HeroAcksEAX")
call SetSoundParamsFromLabel(qX,"HeroDreadLordPissed")
call SetSoundDuration(qX,$6BF)
set QX=CreateSound("Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed5.wav",false,true,true,$A,$A,"HeroAcksEAX")
call SetSoundParamsFromLabel(QX,"HeroDreadLordPissed")
call SetSoundDuration(QX,8893)
set tX=CreateSound("Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed6.wav",false,true,true,$A,$A,"HeroAcksEAX")
call SetSoundParamsFromLabel(tX,"HeroDreadLordPissed")
call SetSoundDuration(tX,6066)
set TX=CreateSound("Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed7.wav",false,true,true,$A,$A,"HeroAcksEAX")
call SetSoundParamsFromLabel(TX,"HeroDreadLordPissed")
call SetSoundDuration(TX,$4FD)
set CN=CreateSound("Sounds\\HolyShit.mp3",false,false,false,$A,$A,"DefaultEAXON")
call SetSoundDuration(CN,$915)
call SetSoundChannel(CN,0)
call SetSoundVolume(CN,$7F)
call SetSoundPitch(CN,1.)
set UX=CreateSound("Buildings\\NightElf\\MoonWell\\MoonWellWhat1.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(UX,"MoonWellWhat")
call SetSoundDuration(UX,$B9C)
call SetSoundDistances(UX,600.,10000.)
call SetSoundDistanceCutoff(UX,2000.)
set JO=CreateSound("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaos.wav",false,true,true,$A,$A,"SpellsEAX")
call SetSoundParamsFromLabel(JO,"MarkOfChaos")
call SetSoundDuration(JO,$FA0)
set TO=CreateSound("Sounds\\Killing_Spree.mp3",false,false,false,$A,$A,"DefaultEAXON")
call SetSoundDuration(TO,$949)
call SetSoundChannel(TO,0)
call SetSoundVolume(TO,$7F)
call SetSoundPitch(TO,1.)
set oO=CreateSound("Sound\\Buildings\\Death\\NightElfBuildingDeathSmall1.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(oO,"DeathNightElfBuildingCancel")
call SetSoundDuration(oO,$E5B)
set VO=CreateSound("Sounds\\MegaKill.mp3",false,false,false,$A,$A,"DefaultEAXON")
call SetSoundDuration(VO,$A34)
call SetSoundChannel(VO,0)
call SetSoundVolume(VO,$7F)
call SetSoundPitch(VO,1.)
set aO=CreateSound("Abilities\\Spells\\NightElf\\ShadowMeld\\ShadowMeld1.wav",false,true,true,$A,$A,"SpellsEAX")
call SetSoundParamsFromLabel(aO,"ShadowMeld")
call SetSoundDuration(aO,941)
set YO=CreateSound("Sounds\\MonsterKill.mp3",false,false,false,$A,$A,"DefaultEAXON")
call SetSoundDuration(YO,$D10)
call SetSoundChannel(YO,0)
call SetSoundVolume(YO,$7F)
call SetSoundPitch(YO,1.)
set EO=CreateSound("Units\\Creeps\\Ogre\\OgrePissed1.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(EO,"OgrePissed")
call SetSoundDuration(EO,$CED)
set XO=CreateSound("Sounds\\Ownage.mp3",false,false,false,$A,$A,"DefaultEAXON")
call SetSoundDuration(XO,$A1A)
call SetSoundChannel(XO,0)
call SetSoundVolume(XO,$7F)
call SetSoundPitch(XO,1.)
set OO=CreateSound("Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed1.wav",false,true,true,$A,$A,"HeroAcksEAX")
call SetSoundParamsFromLabel(OO,"PandarenBrewmasterPissed")
call SetSoundDuration(OO,$90C)
set AO=CreateSound("Abilities\\Spells\\Human\\Polymorph\\PolymorphDone.wav",false,true,true,$A,$A,"SpellsEAX")
call SetSoundParamsFromLabel(AO,"PolymorphDone")
call SetSoundDuration(AO,$5DA)
set NO=CreateSound("Buildings\\Naga\\TempleofTides\\TempleOfTidesWhat1.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(NO,"TempleOfTidesWhat")
call SetSoundDuration(NO,$D9B)
call SetSoundDistanceCutoff(NO,2000.)
set bO=CreateSound("Buildings\\Undead\\TombOfRelics\\TombOfRelicsWhat1.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(bO,"TombOfRelicsWhat")
call SetSoundDuration(bO,$BF9)
call SetSoundDistanceCutoff(bO,2000.)
set BO=CreateSound("Abilities\\Spells\\Orc\\Disenchant\\Disenchant.wav",false,true,true,$A,$A,"SpellsEAX")
call SetSoundParamsFromLabel(BO,"Disenchant")
call SetSoundDuration(BO,$7FB)
set cO=CreateSound("Sound\\Interface\\Rescue.wav",false,false,false,$A,$A,"")
call SetSoundParamsFromLabel(cO,"Rescue")
call SetSoundDuration(cO,$ED4)
set CO=CreateSound("Units\\Human\\Rifleman\\RiflemanPissed1.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(CO,"RiflemanPissed")
call SetSoundDuration(CO,$C56)
set fO=CreateSound("Units\\Human\\Rifleman\\RiflemanPissed2.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(fO,"RiflemanPissed")
call SetSoundDuration(fO,$51A)
set FO=CreateSound("Units\\Human\\Rifleman\\RiflemanPissed3.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(FO,"RiflemanPissed")
call SetSoundDuration(FO,$A40)
set gO=CreateSound("Units\\Human\\Rifleman\\RiflemanPissed4.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(gO,"RiflemanPissed")
call SetSoundDuration(gO,$EC9)
set hO=CreateSound("Units\\Human\\Rifleman\\RiflemanPissed5.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(hO,"RiflemanPissed")
call SetSoundDuration(hO,4168)
set HO=CreateSound("Units\\Human\\Rifleman\\RiflemanPissed6.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(HO,"RiflemanPissed")
call SetSoundDuration(HO,$AFA)
set kO=CreateSound("Units\\Human\\Rifleman\\RiflemanPissed7.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(kO,"RiflemanPissed")
call SetSoundDuration(kO,4609)
set lO=CreateSound("Units\\Human\\Rifleman\\RiflemanPissed8.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(lO,"RiflemanPissed")
call SetSoundDuration(lO,5480)
set mO=CreateSound("Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed1.wav",false,true,true,$A,$A,"HeroAcksEAX")
call SetSoundParamsFromLabel(mO,"HeroShadowHunterPissed")
call SetSoundDuration(mO,$8F5)
set pO=CreateSound("Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed2.wav",false,true,true,$A,$A,"HeroAcksEAX")
call SetSoundParamsFromLabel(pO,"HeroShadowHunterPissed")
call SetSoundDuration(pO,$6FD)
set qO=CreateSound("Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed3.wav",false,true,true,$A,$A,"HeroAcksEAX")
call SetSoundParamsFromLabel(qO,"HeroShadowHunterPissed")
call SetSoundDuration(qO,$8FD)
set QO=CreateSound("Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed4.wav",false,true,true,$A,$A,"HeroAcksEAX")
call SetSoundParamsFromLabel(QO,"HeroShadowHunterPissed")
call SetSoundDuration(QO,$AC0)
set tO=CreateSound("Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed5.wav",false,true,true,$A,$A,"HeroAcksEAX")
call SetSoundParamsFromLabel(tO,"HeroShadowHunterPissed")
call SetSoundDuration(tO,$C39)
set UO=CreateSound("Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed6.wav",false,true,true,$A,$A,"HeroAcksEAX")
call SetSoundParamsFromLabel(UO,"HeroShadowHunterPissed")
call SetSoundDuration(UO,$682)
set wO=CreateSound("Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed7.wav",false,true,true,$A,$A,"HeroAcksEAX")
call SetSoundParamsFromLabel(wO,"HeroShadowHunterPissed")
call SetSoundDuration(wO,$4A3)
set WO=CreateSound("Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed8.wav",false,true,true,$A,$A,"HeroAcksEAX")
call SetSoundParamsFromLabel(WO,"HeroShadowHunterPissed")
call SetSoundDuration(WO,$864)
set zO=CreateSound("Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed9.wav",false,true,true,$A,$A,"HeroAcksEAX")
call SetSoundParamsFromLabel(zO,"HeroShadowHunterPissed")
call SetSoundDuration(zO,$7EA)
set vR=CreateSound("Abilities\\Spells\\Undead\\Sleep\\SleepBirth1.wav",false,true,true,$A,$A,"SpellsEAX")
call SetSoundParamsFromLabel(vR,"Sleep")
call SetSoundDuration(vR,$C83)
set eR=CreateSound("Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed1.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(eR,"SpellBreakerPissed")
call SetSoundDuration(eR,$F3D)
set oR=CreateSound("Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed2.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(oR,"SpellBreakerPissed")
call SetSoundDuration(oR,$D27)
set rR=CreateSound("Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed3.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(rR,"SpellBreakerPissed")
call SetSoundDuration(rR,$E43)
set aR=CreateSound("Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed4.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(aR,"SpellBreakerPissed")
call SetSoundDuration(aR,$9BA)
set RR=CreateSound("Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed5.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(RR,"SpellBreakerPissed")
call SetSoundDuration(RR,$3842)
set bR=CreateSound("Abilities\\Spells\\Undead\\DevourMagic\\DevourMagic.wav",false,true,true,$A,$A,"MissilesEAX")
call SetSoundParamsFromLabel(bR,"DevourMagicLaunch")
call SetSoundDuration(bR,$4C9)
set BR=CreateSound("Abilities\\Spells\\Other\\BlackArrow\\TheBlackArrow.wav",false,true,true,$A,$A,"MissilesEAX")
call SetSoundParamsFromLabel(BR,"BlackArrowHit")
call SetSoundDuration(BR,$6F0)
call SetSoundVolume(BR,50)
set ZO=CreateSound("Sound\\Ambient\\DoodadEffects\\TheHornOfCenarius.wav",false,false,false,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(ZO,"HornOfCenariusSound")
call SetSoundDuration(ZO,$2F59)
call SetSoundVolume(ZO,115)
set CR=CreateSound("Sounds\\triple_kill.mp3",false,false,false,$A,$A,"DefaultEAXON")
call SetSoundDuration(CR,$773)
call SetSoundChannel(CR,0)
call SetSoundVolume(CR,$7F)
call SetSoundPitch(CR,1.)
set LO=CreateSound("Sounds\\Unstoppable.mp3",false,false,false,$A,$A,"DefaultEAXON")
call SetSoundDuration(LO,$7F6)
call SetSoundChannel(LO,0)
call SetSoundVolume(LO,$7F)
call SetSoundPitch(LO,1.)
set DP=CreateSound("Abilities\\Spells\\Human\\DivineShield\\PaladinDivineShieldDeath1.wav",false,true,true,$A,$A,"SpellsEAX")
call SetSoundParamsFromLabel(DP,"DivineShieldDeath")
call SetSoundDuration(DP,$413)
call SetSoundDistanceCutoff(DP,1500.)
set hR=CreateSound("Abilities\\Spells\\Items\\AIso\\SoulGem.wav",false,true,true,$A,$A,"SpellsEAX")
call SetSoundParamsFromLabel(hR,"SoulGem")
call SetSoundDuration(hR,4474)
set EP=CreateSound("Sounds\\WhickedSick.mp3",false,false,false,$A,$A,"DefaultEAXON")
call SetSoundDuration(EP,$A34)
call SetSoundChannel(EP,0)
call SetSoundVolume(EP,$7F)
call SetSoundPitch(EP,1.)
set JR=CreateSound("Units\\Orc\\WitchDoctor\\WitchDoctorPissed1.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(JR,"WitchDoctorPissed")
call SetSoundDuration(JR,$502)
set lR=CreateSound("Units\\Orc\\WitchDoctor\\WitchDoctorPissed2.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(lR,"WitchDoctorPissed")
call SetSoundDuration(lR,$4E0)
set LR=CreateSound("Units\\Orc\\WitchDoctor\\WitchDoctorPissed3.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(LR,"WitchDoctorPissed")
call SetSoundDuration(LR,$5F4)
set mR=CreateSound("Units\\Orc\\WitchDoctor\\WitchDoctorPissed4.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(mR,"WitchDoctorPissed")
call SetSoundDuration(mR,$4B0)
set pR=CreateSound("Units\\Orc\\WitchDoctor\\WitchDoctorPissed5.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(pR,"WitchDoctorPissed")
call SetSoundDuration(pR,$ACA)
set PR=CreateSound("Units\\Orc\\WitchDoctor\\WitchDoctorPissed6.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(PR,"WitchDoctorPissed")
call SetSoundDuration(PR,$B21)
set qR=CreateSound("Units\\Creeps\\GoblinSapper\\GoblinSapperYesAttack4.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(qR,"GoblinSapperYesAttack")
call SetSoundDuration(qR,$443)
call SetSoundChannel(qR,0)
set QR=CreateSound("Abilities\\Spells\\NightElf\\shadowstrike\\ShadowStrikeBirth1.wav",false,true,true,$A,$A,"SpellsEAX")
call SetSoundParamsFromLabel(QR,"ShadowStrikeBirth")
call SetSoundDuration(QR,$892)
call SetSoundPitch(QR,1.2)
set sR=CreateSound("Abilities\\Spells\\NightElf\\CorrosiveBreath\\CorrosiveBreathMissileLaunch1.wav",false,true,true,$A,$A,"SpellsEAX")
call SetSoundParamsFromLabel(sR,"CorrosiveBreathMissileLaunch")
call SetSoundDuration(sR,$515)
call SetSoundPitch(sR,1.2)
set SR=CreateSound("Sound\\Interface\\Warning\\NightElf\\SentinelAllyHeroDies1.wav",false,false,false,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(SR,"AllyHeroDiesNightElf")
call SetSoundDuration(SR,$7AB)
call SetSoundVolume(SR,$7F)
set UR=CreateSound("Sound\\Interface\\Warning\\Undead\\NecromancerAllyHeroDies1.wav",false,false,false,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(UR,"AllyHeroDiesUndead")
call SetSoundDuration(UR,$78D)
call SetSoundVolume(UR,$7F)
set WR=CreateSound("Abilities\\Spells\\Human\\ReviveHuman\\ReviveHuman.wav",false,false,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(WR,"ReviveHuman")
call SetSoundDuration(WR,$C7C)
call SetSoundChannel(WR,8)
set zR=CreateSound("Sound\\Interface\\SecretFound.wav",false,false,false,$A,$A,"")
call SetSoundParamsFromLabel(zR,"SecretFound")
call SetSoundDuration(zR,$9DD)
set GP=CreateSound("Sounds\\UltraKill.mp3",false,false,false,$A,$A,"")
call SetSoundDuration(GP,$7A6)
call SetSoundChannel(GP,0)
call SetSoundVolume(GP,$7F)
call SetSoundPitch(GP,1.)
set IP=CreateSound("Sounds\\Rampage.mp3",false,false,false,$A,$A,"")
call SetSoundDuration(IP,$4AB)
call SetSoundChannel(IP,0)
call SetSoundVolume(IP,$7F)
call SetSoundPitch(IP,1.)
set eI=CreateSound("Units\\Orc\\AncestralGuardian\\AncestralGuardianAttack1.wav",false,true,true,$A,$A,"CombatSoundsEAX")
call SetSoundParamsFromLabel(eI,"AncestralGuardianAttack1")
call SetSoundDuration(eI,$49D)
set oI=CreateSound("Abilities\\Spells\\Human\\Feedback\\Feedback.wav",false,true,true,$A,$A,"SpellsEAX")
call SetSoundParamsFromLabel(oI,"Feedback")
call SetSoundDuration(oI,$4C6)
set JP=CreateSound("Units\\Undead\\Abomination\\AbominationPissed5.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(JP,"AbominationPissed")
call SetSoundDuration(JP,$6C7)
set KP=CreateSound("Sound\\Units\\Death\\ArtilleryCorpseExplodeDeath1.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(KP,"ArtilleryExplodeDeath")
call SetSoundDuration(KP,$5CE)
set RI=CreateSound("Units\\Undead\\CryptFiend\\CryptFiendPissed2.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(RI,"CryptFiendPissed")
call SetSoundDuration(RI,$DD5)
set OP=CreateSound("Units\\Undead\\Banshee\\BansheeDeath.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(OP,"BansheeDeath")
call SetSoundDuration(OP,$94C)
set V74=CreateSound("Abilities\\Spells\\Human\\FlameStrike\\FlameStrikeTargetWaveNonLoop1.wav",false,true,true,$A,$A,"SpellsEAX")
call SetSoundParamsFromLabel(V74,"FlameStrikeTarget")
call SetSoundDuration(V74,$787)
set V84=CreateSound("Abilities\\Spells\\Other\\Volcano\\VolcanoLoop.wav",false,false,false,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(V84,"VolcanoLoop")
call SetSoundDuration(V84,7616)
set V94=CreateSound("Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.wav",false,false,false,$A,$A,"SpellsEAX")
call SetSoundParamsFromLabel(V94,"ThunderClap")
call SetSoundDuration(V94,$D7B)
set VD4=CreateSound("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImage.wav",false,true,true,$A,$A,"SpellsEAX")
call SetSoundParamsFromLabel(VD4,"MirrorImage")
call SetSoundDuration(VD4,$6DC)
set VE4=CreateSound("Abilities\\Spells\\Human\\CloudOfFog\\CloudOfFogLoop1.wav",true,true,true,$A,$A,"SpellsEAX")
call SetSoundParamsFromLabel(VE4,"CloudOfFogLoop")
call SetSoundDuration(VE4,$7F6)
call SetSoundPitch(VE4,.9)
set VM4=CreateSound("Units\\Human\\Gyrocopter\\GyrocopterPissed1.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(VM4,"GyrocopterPissed")
call SetSoundDuration(VM4,$F49)
set VN4="Sound\\Music\\mp3Music\\Tension.mp3"
set VO4="Sound\\Music\\mp3Music\\ArthasTheme.mp3"
set VP4="Sound\\Music\\mp3Music\\NightElfDefeat.mp3"
set VQ4="Sound\\Music\\mp3Music\\NightElfVictory.mp3"
set VR4=CreateSound("Sound\\Interface\\SecretFound.wav",false,false,false,$A,$A,"")
call SetSoundParamsFromLabel(VR4,"SecretFound")
call SetSoundDuration(VR4,$9DD)
set VS4=CreateSound("Sound\\Interface\\Hint.wav",false,false,false,$A,$A,"")
call SetSoundParamsFromLabel(VS4,"Hint")
call SetSoundDuration(VS4,$7D6)
set WZ4=CreateSound("war3mapImported\\pl_impact_stun.mp3",false,true,true,$A,$A,"SpellsEAX")
call SetSoundDuration(WZ4,$53C)
call SetSoundChannel(WZ4,$B)
call SetSoundVolume(WZ4,$7F)
call SetSoundPitch(WZ4,1.)
call SetSoundDistances(WZ4,600.,10000.)
call SetSoundDistanceCutoff(WZ4,2000.)
call SetSoundConeAngles(WZ4,.0,.0,$7F)
call SetSoundConeOrientation(WZ4,.0,.0,.0)
set WA4=CreateSound("Sound\\Buildings\\Fire\\OrcHumanLargeBuildingFire1.wav",true,true,true,$A,$A,"SpellsEAX")
call SetSoundParamsFromLabel(WA4,"HumanFireLarge")
call SetSoundDuration(WA4,$D8F)
set WB4=CreateSound("Units\\Human\\Phoenix\\PhoenixEggWhat1.wav",false,false,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(WB4,"PhoenixEggWhat")
call SetSoundDuration(WB4,$62B)
call SetSoundChannel(WB4,0)
set YB4=CreateSound("Abilities\\Spells\\NightElf\\BattleRoar\\BattleRoar.wav",false,true,true,$A,$A,"SpellsEAX")
call SetSoundParamsFromLabel(YB4,"BattleRoar")
call SetSoundDuration(YB4,$7C7)
set YC4=CreateSound("Buildings\\Undead\\Ziggurat\\ZigguratUpgrade.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(YC4,"ZigguratUpgradeWhat")
call SetSoundDuration(YC4,4203)
call SetSoundDistances(YC4,600.,10000.)
call SetSoundDistanceCutoff(YC4,3000.)
set Y34=CreateSound("Abilities\\Spells\\Human\\SpellSteal\\SpellStealMissile.wav",false,true,true,$A,$A,"SpellsEAX")
call SetSoundParamsFromLabel(Y34,"SpellStealMissileLaunch")
call SetSoundDuration(Y34,$605)
set Y64=CreateSound("Abilities\\Spells\\Human\\SpellSteal\\SpellStealTarget.wav",false,true,true,$A,$A,"SpellsEAX")
call SetSoundParamsFromLabel(Y64,"SpellStealTarget")
call SetSoundDuration(Y64,984)
set YL4=CreateSound("Abilities\\Spells\\Undead\\UndeadMine\\AcolyteMining.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundParamsFromLabel(YL4,"AcolyteMining")
call SetSoundDuration(YL4,4233)
call SetSoundChannel(YL4,0)
set Y14=CreateSound("Abilities\\Weapons\\AvengerMissile\\DestroyerMissile.wav",false,true,true,$A,$A,"MissilesEAX")
call SetSoundParamsFromLabel(Y14,"DestroyerMissileLaunch")
call SetSoundDuration(Y14,817)
set Y04=CreateSound("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouch.wav",false,true,true,$A,$A,"SpellsEAX")
call SetSoundParamsFromLabel(Y04,"SpiritTouch")
call SetSoundDuration(Y04,$7FB)
call SetSoundChannel(Y04,$B)
set Y54=CreateSound("Abilities\\Spells\\Human\\FlameStrike\\FlameStrikeTargetWaveNonLoop1.wav",false,true,true,$A,$A,"SpellsEAX")
call SetSoundParamsFromLabel(Y54,"FlameStrikeTarget")
call SetSoundDuration(Y54,$787)
set GOO=CreateSound("Abilities\\Spells\\Items\\ResourceItems\\ReceiveGold.wav",false,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(GOO,"ReceiveGold")
call SetSoundDuration(GOO,589)
set BGO=CreateSound("Abilities\\Spells\\Human\\InnerFire\\InnerFireBirth.wav",false,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(BGO,"InnerFire")
call SetSoundDuration(BGO,2096)
set pH=Rect(6900.,-7800.,7600.,-7000.)
set go=Rect(6176.,3136.,6400.,3392.)
set jo=Rect(3616.,3584.,3872.,3872.)
set lo=Rect(2304.,5280.,2752.,5728.)
set L9=Rect(6176.,5952.,6624.,6240.)
set Qo=Rect(-4224.,-6848.,-3968.,-6592.)
set to=Rect(-6304.,-4384.,-6080.,-4224.)
set Uo=Rect(-4928.,-5760.,-4736.,-5536.)
set wo=Rect(6048.,3424.,6304.,3776.)
set zo=Rect(4128.,3776.,4352.,4032.)
set er=Rect(2752.,5408.,3040.,5632.)
set ED=Rect(-7040.,-6912.,-6688.,-6656.)
set ar=Rect(-3648.,-6880.,-3424.,-6688.)
set Er=Rect(-6336.,-4224.,-5984.,-3904.)
set Xr=Rect(-4896.,-5504.,-4608.,-5184.)
set FD=Rect(2784.,-2656.,2912.,-2528.)
set GD=Rect(5696.,5504.,7296.,7392.)
set HD=Rect(-7680.,-8032.,-6176.,-6240.)
set MD=Rect(-2304.,1408.,-2176.,1536.)
set Br=Rect(4320.,-992.,4448.,-832.)
set cr=Rect(-3232.,-704.,-3072.,-544.)
set Cr=Rect(1440.,-4096.,1728.,-3872.)
set fr0=Rect(-4576.,3328.,-4448.,3488.)
set Fr=Rect(-3264.,4192.,-2912.,4320.)
set Hr=Rect(2880.,-5152.,3104.,-4992.)
set jr=Rect(-1760.,2304.,-1472.,2464.)
set Jr=Rect(4352.,-3968.,4480.,-3840.)
set lr=Rect(1152.,2976.,1344.,3104.)
set mr=Rect(-512.,-3552.,-384.,-3456.)
set pr=Rect(-7104.,6656.,-6848.,6912.)
set qr=Rect(-7104.,6656.,-6880.,6880.)
set ND=Rect(4192.,-2368.,4256.,-2304.)
set Sr=Rect(3520.,-1440.,4640.,-768.)
set Ur=Rect(-3328.,-1056.,-2464.,-32.)
set Wr=Rect(1056.,-4992.,2272.,-3552.)
set zr=Rect(-5024.,3136.,-3648.,4128.)
set Zr=Rect(-3456.,3936.,-2656.,4992.)
set vi=Rect(2304.,-5920.,3552.,-4832.)
set ei=Rect(-1952.,2016.,-928.,3040.)
set xi=Rect(416.,2624.,1632.,3712.)
set oi=Rect(3776.,-4928.,5024.,-3680.)
set ai=Rect(-1024.,-3808.,96.,-2848.)
set OD=Rect(-7936.,-7776.,-5920.,-5760.)
set PD=Rect(5504.,5184.,7744.,7136.)
set Ai=Rect(-800.,3072.,64.,4032.)
set Ni=Rect(-384.,3392.,-192.,3520.)
set bi=Rect(-2080.,-5024.,-1152.,-4000.)
set Bi=Rect(-1696.,-4928.,-1472.,-4768.)
set bi0=Rect(3520.,-416.,4768.,736.)
set Bi0=Rect(4384.,64.,4512.,256.)
set bi1=Rect(-4480.,-192.,-3328.,1024.)
set Bi1=Rect(-3712.,192.,-3584.,384.)
set QD=Rect(-576.,-736.,-416.,-576.)
set TD=Rect(3360.,-2752.,4608.,-2016.)
set di=Rect(3360.,-2752.,4608.,-2016.)
set fi=Rect(3360.,-2752.,4608.,-2016.)
set Fi=Rect(3360.,-2752.,4608.,-2016.)
set Gi=Rect(3360.,-2752.,4608.,-2016.)
set Ji=Rect(3360.,-2752.,4608.,-2016.)
set li=Rect(3360.,-2752.,4608.,-2016.)
set Li=Rect(3360.,-2752.,4608.,-2016.)
set pi=Rect(3360.,-2752.,4608.,-2016.)
set WD=Rect(-8160.,-8192.,-3712.,-4352.)
set XD=Rect(-8192.,-4960.,-4640.,-3552.)
set YD=Rect(-4000.,-7744.,-3072.,-5152.)
set ZD=Rect(2304.,4064.,8032.,7776.)
set AD=Rect(4640.,1952.,8000.,4384.)
set BD=Rect(3136.,2816.,5216.,4960.)
set LD=Rect(-7968.,5216.,-7456.,5920.)
set KE=Rect(-8064.,2880.,-7648.,4512.)
set RE=Rect(-3296.,3712.,-2688.,3968.)
set SE=Rect(-2400.,2016.,-1952.,2624.)
set TE=Rect(-2016.,1600.,-1216.,2048.)
set WE=Rect(-2144.,2528.,-1888.,2944.)
set YE=Rect(-1280.,1728.,-736.,2176.)
set ZE=Rect(-1696.,-768.,-1376.,-448.)
set EF=Rect(-576.,.0,-352.,256.)
set FF=Rect(3104.,-2784.,3680.,-2304.)
set GF=Rect(3584.,-3040.,4480.,-2656.)
set HF=Rect(4960.,-3104.,5632.,-2816.)
set JF=Rect(4896.,-3744.,5280.,-3456.)
set KF=Rect(7488.,-3520.,8192.,-2336.)
set MF=Rect(6656.,-3328.,7808.,-2656.)
set NF=Rect(7104.,-8192.,8192.,-5920.)
set OF=Rect(5952.,-8192.,7200.,-7712.)
set PF=Rect(7168.,-6240.,8128.,-5184.)
set QF=Rect(5824.,-8032.,6400.,-7776.)
set RF=Rect(6976.,-6560.,7488.,-5920.)
set SF=Rect(-5856.,2944.,-5600.,3200.)
set TF=Rect(6784.,-7776.,7264.,-7456.)
set UF=Rect(-8128.,-8192.,5536.,-7744.)
set WF=Rect(2368.,-7904.,2688.,-7584.)
set XF=Rect(-1664.,-7808.,-1344.,-7552.)
set YF=Rect(-2944.,-8192.,-1664.,-7680.)
set ZF=Rect(-4000.,-8192.,-3168.,-7616.)
set BF=Rect(-5760.,-8000.,-5184.,-7584.)
set CF=Rect(-3296.,3744.,-3104.,3872.)
set LF=Rect(-8192.,-8192.,-6720.,-7744.)
set DGg=Rect(-8192.,-6432.,-7456.,-4928.)
set EG=Rect(-8192.,-8128.,-7904.,8160.)
set FG=Rect(-7744.,3936.,-7328.,5600.)
set GG=Rect(-7680.,1984.,-6560.,2816.)
set JG=Rect(-7776.,1696.,-6944.,2176.)
set MG=Rect(-8032.,-3040.,-7680.,-2720.)
set OG=Rect(-7904.,-2656.,-7552.,-2336.)
set PG=Rect(-3936.,-2720.,-3584.,-2400.)
set QG=Rect(-3168.,-1952.,-2912.,-1696.)
set RG=Rect(-4128.,-1632.,-3776.,-1152.)
set SG=Rect(-4992.,-1792.,-3968.,-1440.)
set TG=Rect(-5536.,-1664.,-4832.,-1280.)
set UG=Rect(-2304.,3872.,-2048.,4096.)
set VG=Rect(-5664.,-1440.,-5344.,.0)
set WG=Rect(-5824.,-1504.,-5472.,-544.)
set XG=Rect(-5216.,-1216.,-4480.,-384.)
set ZG=Rect(-5632.,448.,-5152.,1856.)
set AG=Rect(-5856.,1440.,-5248.,2592.)
set BG=Rect(-5408.,1888.,-4928.,2368.)
set CG=Rect(-5056.,1664.,-4064.,2144.)
set LG=Rect(-4320.,1344.,-3808.,1952.)
set DH=Rect(-4224.,1440.,-3200.,2016.)
set EH=Rect(-2112.,3424.,-1856.,3744.)
set HH=Rect(-2400.,640.,-2208.,896.)
set OH=Rect(-3392.,640.,-3200.,896.)
set PH=Rect(-3744.,-1024.,-3232.,384.)
set QH=Rect(-2016.,-5504.,-1664.,-4768.)
set RH=Rect(-1760.,-5248.,-1312.,-4800.)
set TH=Rect(896.,-3328.,1088.,-3072.)
set UH=Rect(2368.,-3808.,2688.,-3360.)
set WH=Rect(1952.,-3744.,2208.,-3456.)
set XH=Rect(-768.,-1344.,-480.,-1024.)
set YH=Rect(1152.,-6560.,1376.,-6272.)
set ZH=Rect(1216.,-6368.,1504.,-6176.)
set AH=Rect(-1376.,-6784.,-1184.,-6528.)
set CH=Rect(7616.,-6528.,8192.,8160.)
set DI=Rect(7072.,-2304.,7264.,-2048.)
set EI=Rect(-7872.,7872.,8192.,8192.)
set GI=Rect(1792.,7776.,2112.,8192.)
set HI=Rect(-2656.,.0,-2496.,256.)
set II=Rect(-768.,7232.,-416.,7424.)
set JI=Rect(-7968.,5472.,-7648.,5792.)
set NI=Rect(1120.,7904.,1312.,8160.)
set PI=Rect(736.,4480.,1120.,4800.)
set SI=Rect(2208.,4928.,2400.,5152.)
set TI=Rect(576.,4384.,1120.,4928.)
set UI=Rect(2560.,4160.,2784.,4576.)
set WI=Rect(-5984.,-3776.,-5504.,-3232.)
set XI=Rect(576.,4256.,1024.,4672.)
set YI=Rect(544.,4352.,992.,4768.)
set BI=Rect(704.,2496.,1376.,2784.)
set CI=Rect(-2240.,1792.,-1856.,2240.)
set LI=Rect(-1472.,1472.,-992.,1728.)
set TJ=Rect(2368.,-3200.,2656.,-2880.)
set MK=Rect(2624.,-3584.,2816.,-2848.)
set UK=Rect(2464.,-3392.,2656.,-3136.)
set YK=Rect(2784.,-3232.,2976.,-2976.)
set SM=Rect(2784.,-3424.,2976.,-3168.)
set TM=Rect(7328.,7808.,8192.,8192.)
set UM=Rect(1984.,7584.,3296.,8192.)
set WM=Rect(2240.,7392.,2560.,8192.)
set YM=Rect(-1888.,416.,-1696.,576.)
set ZM=Rect(7776.,2720.,8192.,3648.)
set JN=Rect(5280.,640.,5664.,1184.)
set MN=Rect(-3104.,2720.,-2624.,3232.)
set UH=Rect(2816.,-3488.,3008.,-3232.)
set WH=Rect(1568.,-2976.,1760.,-2656.)
set TJ=Rect(2368.,-3264.,2656.,-2944.)
set MK=Rect(2624.,-3648.,2816.,-2912.)
set UK=Rect(2464.,-3456.,2656.,-3200.)
set UF=Rect(-8192.,-8128.,5472.,-7648.)
set eE=Rect(-8192.,-3712.,-7008.,-2144.)
set oE=Rect(-3360.,-8192.,-1472.,-7648.)
set aE=Rect(-2528.,-7840.,-1696.,-7488.)
set nE=Rect(-2336.,-7584.,-1600.,-7456.)
set VE=Rect(-8192.,2016.,-6816.,2880.)
set EE=Rect(6880.,-3328.,8000.,-2624.)
set XE=Rect(3904.,2976.,4160.,3264.)
set OE=Rect(2336.,5952.,2592.,6240.)
set IE=Rect(6304.,1984.,6560.,2272.)
set AE=Rect(-3328.,-6912.,-3072.,-6624.)
set bE=Rect(-4384.,-4800.,-4128.,-4512.)
set BE=Rect(-6432.,-3840.,-6176.,-3552.)
set cE=Rect(-7584.,6176.,-6304.,7552.)
set CE=Rect(2208.,-1152.,2720.,-352.)
set dE=Rect(2560.,-1440.,2976.,-1024.)
set fE=Rect(-1088.,5376.,768.,6624.)
set FE=Rect(1600.,1024.,3456.,2432.)
set gE=Rect(5504.,-1056.,7200.,512.)
set GE=Rect(-6944.,-1792.,-5248.,-224.)
set JE=Rect(-1536.,-7424.,640.,-6048.)
set lE=Rect(-3328.,-7200.,-2464.,-6368.)
set LE=Rect(-4288.,-4544.,-3424.,-3712.)
set ME=Rect(-6784.,-3616.,-5920.,-2784.)
set pE=Rect(1472.,5440.,2336.,6272.)
set PE=Rect(2656.,2336.,3520.,3168.)
set qE=Rect(5984.,1152.,6848.,1984.)
set QE=Rect(-4128.,-3712.,-2496.,-2272.)
set TN=Rect(-8192.,-8128.,-5120.,-5536.)
set UN=Rect(4608.,4352.,8192.,8192.)
set cz=Rect(3536.,3148.,6248.,5832.)
set Cz=Rect(-6348.,-6900.,-3628.,-4480.)
set BKDD1 = Rect(608.,4320.,1120.,4768.) 
set BKDD2 = Rect(-3840.,1440.,-3328.,1888.) 
set BKDD3 = Rect(2400.,-3360.,2912.,-2912.) 
set BKDD4 = Rect(-1888.,-5280.,-1376.,- 4832.) 
set BKDD = CreateRegion() 
call RegionAddRect(BKDD,BKDD1) 
call RegionAddRect(BKDD,BKDD2) 
call RegionAddRect(BKDD,BKDD3) 
call RegionAddRect(BKDD,BKDD4)
set He=Rect(.0,.0,.0,.0)
set Q24=null
set iL=Condition(function DTF)
set Q_4=Condition(function FAF)
set ip=Condition(function DUF)
set iP=Condition(function FKF)
set LX4=Condition(function G_F)
set Ha=Location(.0,.0)
set HA=Location(.0,.0)
set Hb=Location(.0,.0)
set HB=Location(.0,.0)
set p=Player($F)
set B74=CreateUnit(p,1966092378,7360.,-4416.,270.)
call SetUnitColor(B74,ConvertPlayerColor($C))
set B44=CreateUnit(p,1966092378,-7296.,4224.,270.)
call SetUnitColor(B44,ConvertPlayerColor($C))
set IF4=CreateUnit(p,1848657231,-7168.,6464.,270.)
call SetUnitColor(IF4,ConvertPlayerColor(0))
set wJ=CreateUnit(p,1848652102,-7424.,-6976.,270.)
set SJ=CreateUnit(p,1848657231,-7360.,6464.,270.)
call SetUnitColor(SJ,ConvertPlayerColor(0))
set WJ=CreateUnit(p,1848652102,-7424.,-6592.,270.)
set yJ=CreateUnit(p,1848652102,-7424.,-6464.,270.)
set qK=CreateUnit(p,1848657231,-7360.,6784.,270.)
call SetUnitColor(qK,ConvertPlayerColor(0))
set LK=CreateUnit(p,1848657231,-6848.,6784.,270.)
call SetUnitColor(LK,ConvertPlayerColor(0))
set zJ=CreateUnit(p,1848652102,-7424.,-6720.,270.)
set ZJ=CreateUnit(p,1848652102,-7424.,-6848.,270.)
set vk=CreateUnit(p,1852206952,-7262.,-7136.,270.)
set u=CreateUnit(p,1967339316,3200.,-64.,270.)
set cJ=CreateUnit(p,1848657231,-6848.,6464.,270.)
call SetUnitColor(cJ,ConvertPlayerColor(0))
set FK=CreateUnit(p,1848652102,7040.,6272.,270.)
set gK=CreateUnit(p,1848652102,7040.,5888.,270.)
set GK=CreateUnit(p,1848652102,7040.,5760.,270.)
set JK=CreateUnit(p,1848652102,7040.,6016.,270.)
set fK=CreateUnit(p,1848652102,7040.,6144.,270.)
set lK=CreateUnit(p,1852073580,6784.,6368.,270.)
set gJ=CreateUnit(p,1848657231,-7360.,7104.,270.)
call SetUnitColor(gJ,ConvertPlayerColor(0))
set PK=CreateUnit(p,1848657231,-7168.,7104.,270.)
call SetUnitColor(PK,ConvertPlayerColor(0))
set u=CreateUnit(p,1967339316,-4544.,1152.,270.)
set tJ=CreateUnit(p,1848657231,-7168.,6784.,270.)
call SetUnitColor(tJ,ConvertPlayerColor(0))
set Cl=CreateUnit(p,1848657231,-6848.,7104.,270.)
call SetUnitColor(Cl,ConvertPlayerColor(0))
set B94=CreateUnit(p,1966092592,-7296.,4416.,270.)
call SetUnitColor(B94,ConvertPlayerColor($C))
set B84=CreateUnit(p,1966092592,7360.,-4224.,270.)
call SetUnitColor(B84,ConvertPlayerColor($C))
set W34=CreateUnit(p,1848657231,-6656.,7104.,270.)
call SetUnitColor(W34,ConvertPlayerColor(0))
set W64=CreateUnit(p,1848657231,-6656.,6464.,270.)
call SetUnitColor(W64,ConvertPlayerColor(0))
set WC4=CreateUnit(p,1848657231,-6656.,6784.,270.)
call SetUnitColor(WC4,ConvertPlayerColor(0))
set p=Player(0)
set ek=CreateUnit(p,1849897784,-7264.,-6880.,270.)
call SetUnitColor(ek,ConvertPlayerColor(0))
set xk=CreateUnit(p,1848652107,-7264.,-6688.,270.)
call SetUnitColor(xk,ConvertPlayerColor(0))
set ak=CreateUnit(p,1848651833,-6688.,-6368.,270.)
call SetUnitColor(ak,ConvertPlayerColor(0))
set LJ=CreateUnit(p,1848651864,-7200.,-6368.,270.)
call SetUnitColor(LJ,ConvertPlayerColor(0))
set JJ=CreateUnit(p,1848651862,-6944.,-6368.,270.)
call SetUnitColor(JJ,ConvertPlayerColor(0))
set GJ=CreateUnit(p,1848651863,-7328.,-6368.,270.)
call SetUnitColor(GJ,ConvertPlayerColor(0))
set GJJ=CreateUnit(p,'n2O0',-6520.,-6850.,270.)
call SetUnitColor(GJJ,ConvertPlayerColor(0))
set dJ=CreateUnit(p,1848651826,-6816.,-6368.,270.)
call SetUnitColor(dJ,ConvertPlayerColor(0))
set Wk=CreateUnit(p,1697657397,-6624.,-7136.,270.)
set ik=CreateUnit(p,1749236021,-6880.,-7136.,270.)
call SetUnitColor(ik,ConvertPlayerColor(0))
set BJ=CreateUnit(p,1702129516,-5632.,-6144.,270.)
set Ak=CreateUnit(p,1697656915,-4448.,-4960.,270.)
set bk=CreateUnit(p,1697656915,-5280.,-6112.,270.)
set Nk=CreateUnit(p,1697656915,-6368.,-4256.,270.)
set Bk=CreateUnit(p,1697656915,-5600.,-5728.,270.)
set ck=CreateUnit(p,1700884333,-6080.,-4480.,270.)
set Ck=CreateUnit(p,1700884325,-6656.,-4480.,270.)
set fk=CreateUnit(p,1700884333,-4416.,-5312.,270.)
set Gk=CreateUnit(p,1700884325,-4864.,-4992.,270.)
set Fk=CreateUnit(p,1697656915,-3744.,-6816.,270.)
set dk=CreateUnit(p,1700884333,-4032.,-7040.,270.)
set gk=CreateUnit(p,1700884325,-4032.,-6528.,270.)
set lk=CreateUnit(p,1701670775,-5792.,-5408.,270.)
set Jk=CreateUnit(p,1701670775,-6624.,-5088.,270.)
set jk=CreateUnit(p,1701670775,-5088.,-5536.,270.)
set Lk=CreateUnit(p,1701670775,-5344.,-3936.,270.)
set pk=CreateUnit(p,1701670775,-5088.,-4576.,270.)
set Pk=CreateUnit(p,1701670775,-3936.,-5344.,270.)
set qk=CreateUnit(p,1701670775,-4512.,-7072.,270.)
set Qk=CreateUnit(p,1701670775,-4896.,-6240.,270.)
set Sk=CreateUnit(p,1701670775,-3808.,-5856.,270.)
set tk=CreateUnit(p,1701670775,-5472.,-4704.,270.)
set Uk=CreateUnit(p,1701670775,-4512.,-5856.,270.)
set wk=CreateUnit(p,1700884343,-4544.,-6528.,270.)
set Rk=CreateUnit(p,1697656915,-6112.,-1248.,270.)
set ok=CreateUnit(p,1700884343,-6080.,-5120.,270.)
set Ok=CreateUnit(p,1697656915,-6112.,1568.,270.)
set Ek=CreateUnit(p,1697656915,-1504.,-1824.,270.)
set Vk=CreateUnit(p,1697656915,-544.,-6688.,270.)
set nk=CreateUnit(p,1697656915,4960.,-6752.,270.)
set MJ=CreateUnit(p,1697656915,-3488.,-3296.,270.)
set dl=CreateUnit(p,1848657989,-7072.,-6368.,270.)
call SetUnitColor(dl,ConvertPlayerColor(0))
set p=Player(1)
set zk=CreateUnit(p,1701080930,-6400.,-5696.,270.)
set yk=CreateUnit(p,1701080930,-5248.,-6848.,270.)
set p=Player(6)
set XK=CreateUnit(p,1848651826,5920.,5970.,270.)
call SetUnitColor(XK,ConvertPlayerColor(6))
set OK=CreateUnit(p,1848651863,6090.,6368.,270.)
call SetUnitColor(OK,ConvertPlayerColor(6))
set OKK=CreateUnit(p,'n2O0',6434.,5578.,270.)
call SetUnitColor(OKK,ConvertPlayerColor(6))
set AK=CreateUnit(p,1848651862,5920.,6098.,270.)
call SetUnitColor(AK,ConvertPlayerColor(6))
set NK=CreateUnit(p,1848651864,5920.,6354.,270.)
call SetUnitColor(NK,ConvertPlayerColor(6))
set dK=CreateUnit(p,1849897784,6496.,6368.,270.)
call SetUnitColor(dK,ConvertPlayerColor(6))
set CK=CreateUnit(p,1848652107,6304.,6368.,270.)
call SetUnitColor(CK,ConvertPlayerColor(6))
set QK=CreateUnit(p,1970496880,4352.,3584.,270.)
set BK=CreateUnit(p,1848651833,5920.,5842.,270.)
call SetUnitColor(BK,ConvertPlayerColor(6))
set cK=CreateUnit(p,1849897781,6816.,5984.,270.)
call SetUnitColor(cK,ConvertPlayerColor(6))
set QJ=CreateUnit(p,1848657989,5920.,6226.,270.)
call SetUnitColor(QJ,ConvertPlayerColor(6))
set bK=CreateUnit(p,1966092369,6816.,5664.,270.)
set qJ=CreateUnit(p,1966092365,6048.,-2080.,270.)
set PJ=CreateUnit(p,1966092356,6304.,-96.,270.)
set ol=CreateUnit(p,1970956647,4384.,4256.,270.)
set WK=CreateUnit(p,1970172012,5184.,4864.,220.)
set zK=CreateUnit(p,1970564964,3904.,3904.,270.)
set ZK=CreateUnit(p,1966092365,1056.,-96.,270.)
set vl=CreateUnit(p,1966092356,2528.,1824.,270.)
set el=CreateUnit(p,1966092366,3936.,3488.,270.)
set xl=CreateUnit(p,1966092372,4832.,4832.,270.)
set SK=CreateUnit(p,1966092372,5152.,4512.,270.)
set rl=CreateUnit(p,1970956647,3168.,4064.,270.)
set al=CreateUnit(p,1970956647,5728.,4000.,270.)
set EK=CreateUnit(p,1966092366,2976.,5792.,270.)
set VK=CreateUnit(p,1970496880,3392.,5504.,270.)
set aK=CreateUnit(p,1970564964,3392.,6080.,270.)
set xK=CreateUnit(p,1970956647,4128.,6240.,270.)
set eK=CreateUnit(p,1970495856,3968.,5888.,270.)
set Vl=CreateUnit(p,1969385326,4992.,5952.,270.)
set El=CreateUnit(p,1970956647,2656.,4704.,270.)
set Xl=CreateUnit(p,1970956647,5536.,2464.,270.)
set Ol=CreateUnit(p,1970956647,4064.,5280.,270.)
set Rl=CreateUnit(p,1970956647,3488.,4832.,270.)
set Al=CreateUnit(p,1970495856,6400.,3584.,270.)
set Nl=CreateUnit(p,1970564964,6080.,2944.,270.)
set bl=CreateUnit(p,1970496880,6656.,2880.,270.)
set Bl=CreateUnit(p,1966092366,6368.,2528.,270.)
set cl=CreateUnit(p,1970956647,5024.,3744.,270.)
set vK=CreateUnit(p,1970956647,6880.,3936.,270.)
set wK=CreateUnit(p,1969385326,6464.,4608.,270.)
set TK=CreateUnit(p,1970956647,4640.,2848.,270.)
set HJ=CreateUnit(p,1966092365,-4704.,5920.,270.)
set UJ=CreateUnit(p,1966092356,32.,5920.,270.)
set p=Player($F)
set DJ=CreateUnit(p,1697656900,-6000.,5550.,212.15)
set lJ=CreateUnit(p,1697656898,-561.7,-651.7,325.6)
set FJ=CreateUnit(p,1697656897,5320.,-6650.,64.)
set fJ=CreateUnit(p,1697656888,-5467.9,-5891.1,307.304)
set CJ=CreateUnit(p,1697656881,4901.8,4536.6,212.11)
call ConfigureNeutralVictim()
set bH=Filter(function TO7)
set filterIssueHauntOrderAtLocBJ=Filter(function IssueHauntOrderAtLocBJFilter)
set filterEnumDestructablesInCircleBJ=Filter(function L4)
set filterGetUnitsInRectOfPlayer=Filter(function GetUnitsInRectOfPlayerFilter)
set filterGetUnitsOfTypeIdAll=Filter(function GetUnitsOfTypeIdAllFilter)
set filterGetUnitsOfPlayerAndTypeId=Filter(function GetUnitsOfPlayerAndTypeIdFilter)
set filterMeleeTrainedUnitIsHeroBJ=Filter(function MeleeTrainedUnitIsHeroBJFilter)
set filterLivingPlayerUnitsOfTypeId=Filter(function LivingPlayerUnitsOfTypeIdFilter)
set YC7=0
loop
exitwhen YC7==16
set bj_FORCE_PLAYER[YC7]=CreateForce()
call ForceAddPlayer(bj_FORCE_PLAYER[YC7],Player(YC7))
set YC7=YC7+1
endloop
set bj_FORCE_ALL_PLAYERS=CreateForce()
call ForceEnumPlayers(bj_FORCE_ALL_PLAYERS,null)
set bj_cineModePriorSpeed=GetGameSpeed()
set bj_cineModePriorFogSetting=IsFogEnabled()
set bj_cineModePriorMaskSetting=IsFogMaskEnabled()
set YC7=0
loop
exitwhen YC7>=bj_MAX_QUEUED_TRIGGERS
set bj_queuedExecTriggers[YC7]=null
set bj_queuedExecUseConds[YC7]=false
set YC7=YC7+1
endloop
set bj_isSinglePlayer=false
set LAG=0
set YC7=0
loop
exitwhen YC7>=$C
if(GetPlayerController(Player(YC7))==MAP_CONTROL_USER and GetPlayerSlotState(Player(YC7))==PLAYER_SLOT_STATE_PLAYING)then
set LAG=LAG+1
endif
set YC7=YC7+1
endloop
set T64[0]=""
set T64[1]="CLG.Pajkatt"
set T64[2]="CLG.Mirakel"
set T64[3]="CLG.Akke"
set T64[4]="CLG.MiSeRy"
set T64[5]="CLG.Lacoste"
set T64[6]="Darer.M"
set T64[7]="Darer.G"
set T64[8]="Darer.Artstyle"
set T64[9]="Darer.Funn1k"
set T64[$A]="M5.Admiration"
set T64[$B]="M5.Vigoss"
set T64[$C]="M5.Bl00DAnGeL-"
set T64[$D]="M5.PGG"
set T64[$E]="M5.Silent"
set T64[$F]="Na`Vi.XBOCT"
set T64[16]="Na`Vi.Dendi"
set T64[17]="Na`Vi.Puppey"
set T64[18]="Na`Vi.LighTofHeaveN"
set T64[19]="Na`Vi.ARS-ART"
set T64[20]="EG.Fear"
set T64[21]="EG.Bulba"
set T64[22]="EG.Maelk"
set T64[23]="EG.DeMoN"
set T64[24]="EG.Universe"
set T64[25]="IG.Ferrari_430"
set T64[26]="IG.Faith"
set T64[27]="IG.Zhou"
set T64[28]="IG.ChuaN"
set T64[29]="IG.YYF"
set T64[30]="LGD.xiao8"
set T64[31]="LGD.Sylar"
set T64[32]="LGD.Yao"
set T64[33]="LGD.DD"
set T64[34]="LGD.ddc"
set T64[35]="EHOME.357"
set T64[36]="EHOME.KingJ"
set T64[37]="EHOME.LaNm"
set T64[38]="EHOME.MMY!"
set T64[39]="EHOME.PCT"
set T64[40]="DK.Super"
set T64[41]="DK.Zippo"
set T64[42]="DK.LongDD"
set T64[43]="DK.Burning"
set T64[44]="DK.rOtk"
set T64[45]="AL.bleek"
set T64[46]="AL.Musica"
set T64[47]="AL.Snoopy"
set T64[48]="AL.Shatan"
set T64[49]="AL.Godot"
set T64[50]="TZ.iceiceice"
set T64[51]="TZ.xFreedom"
set T64[52]="TZ.xy-"
set T64[53]="TZ.YamateH"
set T64[54]="TZ.Ice"
set T64[55]="TongFu.Kabu"
set T64[56]="TongFu.SanSheng"
set T64[57]="13abyKnight"
set T64[58]="dLxYan"
set T64[59]="TongFu.Awoke"
set T64[60]="Green"
set T64[61]="TongFu.Mu"
set T64[62]="TongFu.Hao"
set T64[63]="MS.SexyBamboe"
set T64[64]="Bane"
set T64[65]="MS.Black^"
set T64[66]="MS.1437"
set T64[67]="MS.KuroKy"
set T64[68]="MS.SingSing"
set T64[69]="Yrk"
set T64[70]="sExtasY"
set T64[71]="Tayschrenn"
set T64[72]="theCupofteA"
set T64[73]="idef!x"
set T64[74]="kEEper"
set T64[75]="nEKro"
set T64[76]="Tulex"
set T64[77]="Warlog"
set T64[78]="Radge"
set T64[79]="Bu1LD0z3R"
set T64[80]="r1sk"
set T64[81]="Toneeh"
set T64[82]="Mr.Escobar"
set T64[83]="Ghost0"
set T64[84]="Blackshatan"
set T64[85]="TeG-Hyperion"
set T64[86]="TeG-Ly0n"
set T64[87]="TeG-ppasarel"
set T64[88]="Ro-Coco"
set T64[89]="TeG-RMP"
set T64[90]="TeG-jackass"
set T64[91]="NozG"
set T64[92]="lacosteeeee"
set T64[93]="NlKE"
set T64[94]="Swoopie"
set T64[95]="Soundchaosdebug"
set T64[96]="Luck_Duck"
set T64[97]="Simba"
set T64[98]="AMXZAKU"
set T64[99]="HurDur"
set T64[100]="Zaetr"
set T64[101]="Dargon_Knight"
set T64[102]="Ciel"
set T64[103]="SaDJ0KeR"
set T64[104]="Phaselock"
set T64[105]="PleaseBugMeNot"
set T64[106]="changeling"
set T64[107]="Deel"
set T64[108]="xbox619"
set T64[109]="Uncle_Zhuge"
set T64[110]="Thedeath"
set T64[111]="gAmmAlysE"
set T64[112]="Ace_Tobi"
set T64[113]="RisingDemon"
set T64[114]="Harreke"
set T64[115]="cipd"
set T64[116]="Sebra"
set T64[117]="Simple-.-"
set T64[118]="gaibo1"
set T64[119]="Cloud_str"
set bj_isSinglePlayer=(LAG==1)
set bj_rescueSound=CreateSoundFromLabel("Rescue",false,false,false,$2710,$2710)
set bj_questDiscoveredSound=CreateSoundFromLabel("QuestNew",false,false,false,$2710,$2710)
set bj_questUpdatedSound=CreateSoundFromLabel("QuestUpdate",false,false,false,$2710,$2710)
set bj_questCompletedSound=CreateSoundFromLabel("QuestCompleted",false,false,false,$2710,$2710)
set bj_questFailedSound=CreateSoundFromLabel("QuestFailed",false,false,false,$2710,$2710)
set bj_questHintSound=CreateSoundFromLabel("Hint",false,false,false,$2710,$2710)
set bj_questSecretSound=CreateSoundFromLabel("SecretFound",false,false,false,$2710,$2710)
set bj_questItemAcquiredSound=CreateSoundFromLabel("ItemReward",false,false,false,$2710,$2710)
set bj_questWarningSound=CreateSoundFromLabel("Warning",false,false,false,$2710,$2710)
set bj_victoryDialogSound=CreateSoundFromLabel("QuestCompleted",false,false,false,$2710,$2710)
set bj_defeatDialogSound=CreateSoundFromLabel("QuestFailed",false,false,false,$2710,$2710)
call DelayedSuspendDecayCreate()
set LBG=VersionGet()
if(LBG==VERSION_REIGN_OF_CHAOS)then
set bj_MELEE_MAX_TWINKED_HEROES=bj_MELEE_MAX_TWINKED_HEROES_V0
else
set bj_MELEE_MAX_TWINKED_HEROES=bj_MELEE_MAX_TWINKED_HEROES_V1
endif
call InitQueuedTriggers()
call InitRescuableBehaviorBJ()
call InitDNCSounds()
call InitMapRects()
call InitSummonableCaps()
call V5()
set XYF=0
loop
set bj_stockAllowedPermanent[XYF]=false
set bj_stockAllowedCharged[XYF]=false
set bj_stockAllowedArtifact[XYF]=false
set XYF=XYF+1
exitwhen XYF>$A
endloop
call SetAllItemTypeSlots($B)
call SetAllUnitTypeSlots($B)
set bj_stockUpdateTimer=CreateTimer()
call TimerStart(bj_stockUpdateTimer,bj_STOCK_RESTOCK_INITIAL_DELAY,false,function X3F)
set bj_stockItemPurchased=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(bj_stockItemPurchased,Player($F),EVENT_PLAYER_UNIT_SELL_ITEM,null)
call TriggerAddAction(bj_stockItemPurchased,function RemovePurchasedItem)
call DetectGameStarted()
set i=0
set i=0
loop
exitwhen(i>16)
set K[i]=0
set M[i]=0
set H[i]=0
set i=i+1
endloop
set i=0
loop
exitwhen(i>100)
set J[i]=false
set je[i]=0
set i=i+1
endloop
set i=0
loop
exitwhen(i>4)
set N[i]=0
set i=i+1
endloop
set i=0
loop
exitwhen(i>2)
set L[i]=0
set S7[i]=0
set i=i+1
endloop
set i=0
loop
exitwhen(i>$C)
set Q[i]=""
set A[i]=CreateTimer()
set T[i]=0
set V[i]=0
set GZ[i]=false
set GZ[256+i]=false
set GZ[272+i]=false
set GZ[304+i]=false
set G0[48+i]=false
set G0[i]=false
set hG[i]=0
set eY[80+i]=3
set eY[i]=0
set eY[544+i]=0
set h4[i]=null
set G57[i]=null
set hq[288+i]=.0
set hq[304+i]=.0
set hq[640+i]=.0
set hq[656+i]=.0
set HC[i]=Location(.0,.0)
set HC[16+i]=Location(.0,.0)
set HC[32+i]=Location(.0,.0)
set HC[48+i]=Location(.0,.0)
set HC[256+i]=Location(.0,.0)
set h9[i]=null
set h8[i]=null
set eY[$D0+i]=0
set eY[$E0+i]=0
set eY[$F0+i]=$F423F
set hG[$C0+i]=0
set hG[288+i]=0
set hq[624+i]=0
set B24[i]=false
set B24[16+i]=false
set B24[32+i]=false
set B24[48+i]=false
set B24[64+i]=true
set B24[112+i]=true
set LU4[48+i]=-1
set LU4[64+i]=-1
set G0[$E0+i]=false
set h8[$90+i]=null
set GZ[$B0+i]=false
set G97[i]=0
set G97[16+i]=0
set G97[32+i]=0
set G97[48+i]=0
set G97[96+i]=0
set G97[112+i]=0
set G97[$A0+i]=0
set G97[$B0+i]=0
set G97[$F0+i]=0
set G97[272+i]=0
set G97[288+i]=0
set G97[464+i]=0
set GE7[48+i]=false
set GE7[320+i]=true
set G97[$D0+i]=StringHash("aiBuy|"+I2S(i))
set G97[$E0+i]=StringHash("aiBuyS|"+I2S(i))
set G97[256+i]=StringHash("aiBuyBear|"+I2S(i))
set G97[352+i]=StringHash("aiIt#|"+I2S(i))
set G97[368+i]=StringHash("aiIt#copy|"+I2S(i))
set G97[448+i]=StringHash("aiBuyLux|"+I2S(i))
set i=i+1
endloop
set i=0
loop
exitwhen(i>$D)
set I[i]=false
set U[i]=CreateTimer()
set W4[i]=false
set T7[i]=0
set U7[i]=0
set Be[i]=0
set oo[i]=false
set i=i+1
endloop
set W=CreateTimer()
set i=0
loop
exitwhen(i>1)
set F[i]=0
set mx[i]=false
set B8[i]=0
set eo[i]=false
set i=i+1
endloop
set X4=$96
set av=true
set Ev=true
set Ov=true
set Rv=true
set Av=true
set Nv=true
set bv=true
set Bv=true
set cv=true
set Cv=true
set Dv=true
set fv=true
set D7=3
set E7=1
set i=0
set t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,GetWorldBounds())
call TriggerAddCondition(t,Condition(function FGe))
set JJe=CreateTrigger()
call TriggerAddCondition(JJe,Condition(function Ffe))
loop
exitwhen(i>17)
set M7[i]=null
set i=i+1
endloop
set X7=CreateForce()
set Y7=CreateForce()
set R8=CreateGroup()
set L8=CreateForce()
set E9=.0
set F9=true
set G9=true
set i=0
loop
exitwhen(i>$E)
set P9[i]=false
set i=i+1
endloop
set i=0
loop
exitwhen(i>$F)
set C9[i]="Here"
set i=i+1
endloop
call X97()
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,15.,true)
call TriggerAddCondition(t,Condition(function l8))
set t=null
set IG4[0]=false
set IG4[1]=false
set IG4[2]=false
set IG4[3]=false
set IG4[4]=false
set IG4[5]=false
set IG4[6]=false
set IG4[7]=false
set IG4[8]=false
set IG4[9]=false
set IG4[$A]=false
set IG4[$B]=false
set IG4[$C]=false
set IG4[$D]=false
set IG4[$E]=false
set IG4[$F]=false
set IG4[16]=false
call LNG()
call YY8(1110455898)
call YY8(1112560453)
call YY8(1110455889)
call YY8(1112757326)
call YY8(1112044643)
call YY8(1110458957)
call YY8(1110458962)
call YY8(1110459185)
call YY8(1111844210)
call YY8(1110454869)
call YY8(1110456133)
call YY8(1110459206)
call YY8(1110455885)
call YY8(1110456142)
call YY8(1110456403)
call YY8(1110454353)
call YY8(1110456114)
call YY8(1112891758)
call YY8(1110456629)
call YY8(1110456371)
call YY8(1110454870)
call YY8(1110454617)
call YY8(1112432994)
call YY8(1110456402)
call YY8(1110455862)
call YY8(1110455113)
call YY8(1110455859)
call YY8(1113943649)
call YY8(1113943655)
call YY8(1110455107)
call YY8(1110454348)
call YY8(1112040289)
call YY8(1113813860)
call YY8(1110456121)
call YY8(1110458961)
call YY8(1110458937)
call YY8(1114665575)
call YY8(1110456397)
call YY8(1110454855)
call YY8(1110454616)
call YY8(1110454596)
call YY8(1110456626)
call YY8(1110458705)
call YY8(1111847784)
call YY8(1110454321)
call YY8(1110454583)
call YY8(1110458693)
call YY8(1110458692)
call YY8(1110456399)
call YY8(1114010223)
call YY8(1110454839)
call YY8(1110454840)
call YY8(1110455624)
call YY8(1110458963)
call YY8(1113813609)
call YY8(1110458950)
call YY8(1110458949)
call YY8(1110456624)
call YY8(1110454328)
call YY8(1110455362)
call YY8(1110454854)
call YY8(1112896368)
call YY8(1114993524)
call YY8(1110459203)
call YY8(1111716457)
call YY8(1110455114)
call YY8(1111847784)
call YY8(1110454321)
call YY8(1110458705)
call YY8(1113943649)
call YY8(1113943655)
call YY8(1110456120)
call YY8(1113875828)
call YY8(1110454356)
call YY8(1114860655)
call YY8(1112433768)
call YY8(1093749828)
call YY8(1110459204)
call YY8(1093749313)
call YY8(1110455347)
call YY8(1112436833)
call YY8(1110454606)
call YY8(1112105826)
call YY8(1110455377)
call YY8(1110454339)
call YY8(1110456651)
call YY8(1110455091)
call YY8(1110456390)
call YY8(1110456389)
call YY8(1114664809)
call YY8(1110458701)
call YY8(1112437348)
call YY8(1110454344)
call YY8(1112500344)
call YY8(1110455110)
call YY8(1110454862)
call YY8(1110459703)
call YY8(1110455876)
call YY8(1110458958)
call YY8(1110456657)
call YY8(1110459465)
call YY8(1110458946)
call YY8(1110456650)
call YY8(1110458694)
call YY8(1110456386)
call YY8(1110456113)
call YY8(1110456398)
call YY8('B0HQ')
call YY8(1110454857)
call YY8(1110456401)
call YY8(1110459186)
call YY8(1110455891)
call YY8(1110454867)
call YY8(1110454871)
call YY8(1110455633)
call YY8(1110454852)
call YY8(1110458969)
call YY8(1110454864)
call YY8(1110455622)
call YY8(1110459728)
call YY8(1110459730)
call YY8(1110459732)
call YY8(1110459982)
call YY8(1110459993)
call YY8(1110459988)
call YY8(1110459994)
call YY8(1110460208)
call YY8(1110459957)
call YY8('A1G5')
call YY8('A1G3')
call YY8('A1G6')
call YY8('A1G4')
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YC8))
set t=null
call FlushGameCache(InitGameCache("dr.x"))
set IV4=InitGameCache("dr.x")
set H64[0]=1093744454
set H64[1]=1093744455
set H64[2]=1093744456
set H64[3]=1093744451
set H64[4]=1093744452
set H64[5]=1093744453
set H64[6]=1093744458
set H64[7]=1093744457
set H64[8]=1093744460
set TK4[0]=1093751109
set TK4[1]=1093751110
set TK4[2]=1093751113
set TK4[3]=1093751115
set TK4[4]=1093751114
set TK4[5]=1093751112
set TK4[6]=1093751119
set TK4[7]=1093751118
set TK4[8]=1093751117
set TK4[9]=1093751111
set TK4[$A]=1093751121
set HL4[0]=1093748555
set HL4[1]=1093748556
set HL4[2]=1093748554
set HL4[3]=1093748560
set HL4[4]=1093748557
set HL4[5]=1093748558
set HL4[6]=1093748559
set HL4[7]=1093748553
set HL4[8]=1093748561
set H14[0]=1093747533
set H14[1]=1093747531
set H14[2]=1093747526
set H14[3]=1093747529
set H14[4]=1093747527
set H14[5]=1093747528
set U9=CreateTrigger()
call TriggerAddCondition(U9,Condition(function CX7))
set V9[0]=1747990855
set X9[0]=50
set V9[1]=1747990868
set X9[1]=100
set V9[2]=1747990854
set X9[2]=$96
set V9[3]=1747990856
set X9[3]=$C8
set V9[4]=1747990853
set X9[4]=$FA
set V9[5]=1747990852
set X9[5]=300
set V9[6]=1747990851
set X9[6]=350
set V9[7]=1747990850
set X9[7]=400
set V9[8]=1747990841
set X9[8]=450
set V9[9]=1747990849
set X9[9]=500
set V9[$A]=1747990858
set X9[$A]=550
set V9[$B]=1747990859
set X9[$B]=600
set V9[$C]=1747990860
set X9[$C]=650
set V9[$D]=1747990861
set X9[$D]=700
set V9[$E]=1747990862
set X9[$E]=750
set V9[$F]=1747990863
set X9[$F]=800
set V9[16]=1747990864
set X9[16]=850
set V9[17]=1747990865
set X9[17]=900
set V9[18]=1747990866
set X9[18]=950
set V9[19]=1747990867
set X9[19]=$3E8
set V9[20]=1747990857
set X9[20]=$41A
set V9[21]=1747990874
set X9[21]=$44C
set V9[22]=1747990872
set X9[22]=$47E
set V9[23]=1747992881
set X9[23]=$4B0
set V9[24]=1747992882
set X9[24]=$4E2
set V9[25]=1747992886
set X9[25]=$514
set V9[26]=1747992883
set X9[26]=$546
set V9[27]=1747992884
set X9[27]=$578
set V9[28]=1747990873
set X9[28]=$5AA
set V9[29]=1747990870
set X9[29]=$5DC
set V9[30]=1747992880
set X9[30]=$60E
set V9[31]=1747990869
set X9[31]=$640
set V9[32]=1747992902
set X9[32]=$672
set V9[33]=1747992900
set X9[33]=$6A4
set V9[34]=1747992901
set X9[34]=$6D6
set V9[35]=1747992899
set X9[35]=$708
set V9[36]=1747992898
set X9[36]=$73A
set V9[37]=1747992897
set X9[37]=$76C
set V9[38]=1747992889
set X9[38]=$79E
set V9[39]=1747992903
set X9[39]=$7D0
set V9[40]=1747992887
set X9[40]=$802
set V9[41]=1747992911
set X9[41]=$834
set V9[42]=1747992921
set X9[42]=$866
set V9[43]=1747992904
set X9[43]=$898
set V9[44]=1747992905
set X9[44]=$8CA
set V9[45]=1747992906
set X9[45]=$8FC
set V9[46]=1747992912
set X9[46]=$92E
set V9[47]=1747992913
set X9[47]=$960
set V9[48]=1747992907
set X9[48]=$992
set V9[49]=1747992914
set X9[49]=$9C4
set V9[50]=1747992908
set X9[50]=$9F6
set V9[51]=1747992915
set X9[51]=$A28
set V9[52]=1747990871
set X9[52]=$A5A
set V9[53]=1747992909
set X9[53]=$A8C
set V9[54]=1747992888
set X9[54]=$ABE
set V9[55]=1747992916
set X9[55]=$AF0
set V9[56]=1747992917
set X9[56]=$B22
set V9[57]=1747992910
set X9[57]=$B54
set V9[58]=1747992918
set X9[58]=$B86
set V9[59]=1747992919
set X9[59]=$BB8
set W9[0]=V9[CO7(1)]
set W9[1]=V9[CO7(1)]
set W9[2]=V9[CO7(1)]
set W9[3]=V9[CO7(1)]
set W9[4]=V9[CO7(1)]
set W9[5]=V9[CO7(1)]
set W9[6]=V9[CO7(1)]
set W9[7]=V9[CO7(1)]
set W9[8]=V9[CO7(1)]
set W9[9]=V9[CO7(1)]
set W9[$A]=V9[CO7(1)]
set W9[$B]=V9[CO7(1)]
set W9[$C]=V9[CO7(1)]
set W9[$D]=V9[CO7(1)]
set W9[$E]=V9[CO7(1)]
set HSS[0]=false
set HSS[1]=false
set HSS[2]=false
set HSS[3]=false
set HSS[4]=false
set HSS[5]=false
set HSS[6]=false
set HSS[7]=false
set HSS[8]=false
set HSS[9]=false
set HSS[10]=false
set HSS[11]=false
set HSS[12]=false
set HSS[13]=false
set HSS[14]=false
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call YB7(t,EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddCondition(t,Condition(function H01))
set t=null
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call YB7(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function OPv))
set t=null
set L7=InitHashtable()
set W=CreateTimer()
set IW4=Rect(-7040,-7680,7040,7168)
call SetFloatGameState(GAME_STATE_TIME_OF_DAY,6.)
call SuspendTimeOfDay(false)
call SetTimeOfDayScale(.5)
call SetSkyModel("Environment\\Sky\\FoggedSky\\FoggedSky.mdl")
call SetCreepCampFilterState(true)
set vo="Normal Mode"
call TimerStart(W,99999.,false,null)
set Bo=AddWeatherEffect(bj_mapInitialPlayableArea,1380018290)
set bo=AddWeatherEffect(bj_mapInitialPlayableArea,1397645939)
set fL=AddWeatherEffect(bj_mapInitialPlayableArea,1280470369)
set FL=AddWeatherEffect(bj_mapInitialPlayableArea,1464822903)
set Z7[0]=Player(0)
set Z7[1]=Player(1)
set Z7[2]=Player(2)
set Z7[3]=Player(3)
set Z7[4]=Player(4)
set Z7[5]=Player(5)
set A7[0]=Player(6)
set A7[1]=Player(7)
set A7[2]=Player(8)
set A7[3]=Player(9)
set A7[4]=Player($A)
set A7[5]=Player($B)
set B7=Player($C)
set C7=Player($F)
call SetUnitPathing(fJ,false)
call SetUnitPathing(FJ,false)
call SetUnitPathing(lJ,false)
call SetUnitPathing(DJ,false)
call SetUnitPathing(CJ,false)
call YT8(CJ,true)
call YT8(DJ,true)
call YT8(lJ,true)
call YT8(FJ,true)
call YT8(fJ,true)
set Z=GetUnitLoc(CJ)
set vv=GetUnitLoc(fJ)
set ev=GetUnitLoc(lJ)
set ov=GetUnitLoc(DJ)
set rv=GetUnitLoc(FJ)
set N8=1093678663
set O8[1]=vv
set O8[2]=ov
set O8[3]=ev
set O8[4]=rv
set O8[5]=Z
set Jv=GetRectCenter(jo)
set lv=GetRectCenter(lo)
set Lv=GetRectCenter(go)
set mv=GetRectCenter(zo)
set qv=GetRectCenter(er)
set pv=GetRectCenter(wo)
set Qv=GetRectCenter(Xr)
set tv=GetRectCenter(Er)
set sv=GetRectCenter(ar)
set Tv=GetRectCenter(Uo)
set Wv=GetRectCenter(to)
set Uv=GetRectCenter(Qo)
set F7=GetRectCenter(MD)
set G7=GetRectCenter(FD)
set Y8=true
set IX4=GetUnitX(vk)
set IY4=GetUnitY(vk)
set ML=GetUnitX(ik)
set PL=GetUnitY(ik)
set QL=GetUnitX(xk)
set SL=GetUnitY(xk)
set tL=GetUnitX(ek)
set TL=GetUnitY(ek)
set UL=GetUnitX(Wk)
set wL=GetUnitY(Wk)
set zL=GetUnitX(JJ)
set vm=GetUnitY(JJ)
set em=GetUnitX(GJ)
set xm=GetUnitY(GJ)
set om=GetUnitX(dJ)
set rm=GetUnitY(dJ)
set im=GetUnitX(LJ)
set am=GetUnitY(LJ)
set Vm=GetUnitX(ak)
set Em=GetUnitY(ak)
set Xm=GetUnitX(dl)
set Om=GetUnitY(dl)
set Am=GetUnitX(BJ)
set Nm=GetUnitY(BJ)
set bm=GetUnitX(Ok)
set Bm=GetUnitY(Ok)
set cm=GetUnitX(Ek)
set Cm=GetUnitY(Ek)
set dm=GetUnitX(nk)
set fm=GetUnitY(nk)
set Fm=GetUnitX(Rk)
set hm=GetUnitY(Rk)
set Jm=GetUnitX(MJ)
set lm=GetUnitY(MJ)
set Mm=GetUnitX(Vk)
set pm=GetUnitY(Vk)
set Pm=GetUnitX(Nk)
set Qm=GetUnitY(Nk)
set Tm=GetUnitX(Ak)
set Um=GetUnitY(Ak)
set wm=GetUnitX(Fk)
set Wm=GetUnitY(Fk)
set zm=GetUnitX(Bk)
set vM=GetUnitY(Bk)
set eM=GetUnitX(bk)
set oM=GetUnitY(bk)
set rM=GetUnitX(ck)
set iM=GetUnitY(ck)
set aM=GetUnitX(fk)
set nM=GetUnitY(fk)
set VM=GetUnitX(dk)
set XMM=GetUnitY(dk)
set AMM=GetUnitX(Ck)
set bM=GetUnitY(Ck)
set BMM=GetUnitX(Gk)
set cM=GetUnitY(Gk)
set dM=GetUnitX(gk)
set fM=GetUnitY(gk)
set gM=GetUnitX(lk)
set hM=GetUnitY(lk)
set HM=GetUnitX(Jk)
set JM=GetUnitY(Jk)
set kM=GetUnitX(Lk)
set lM=GetUnitY(Lk)
set pM=GetUnitX(pk)
set sM=GetUnitY(pk)
set tM=GetUnitX(Pk)
set wM=GetUnitY(Pk)
set zM=GetUnitX(jk)
set vp=GetUnitY(jk)
set ep=GetUnitX(Qk)
set op=GetUnitY(Qk)
set rp=GetUnitX(Sk)
set ap=GetUnitY(Sk)
set Vp=GetUnitX(qk)
set Ep=GetUnitY(qk)
set Xp=GetUnitX(tk)
set Rp=GetUnitY(tk)
set Ap=GetUnitX(Uk)
set bp=GetUnitY(Uk)
set Bp=GetUnitX(ok)
set cp=GetUnitY(ok)
set Cp=GetUnitX(wk)
set dp=GetUnitY(wk)
set fp=GetUnitX(zk)
set Fp=GetUnitY(zk)
set gp=GetUnitX(yk)
set Hp=GetUnitY(yk)
call RemoveUnit(Nk)
call RemoveUnit(Ck)
call RemoveUnit(ck)
call RemoveUnit(Ak)
call RemoveUnit(Gk)
call RemoveUnit(fk)
call RemoveUnit(Fk)
call RemoveUnit(gk)
call RemoveUnit(dk)
call RemoveUnit(ok)
call RemoveUnit(wk)
call RemoveUnit(BJ)
call RemoveUnit(Bk)
call RemoveUnit(bk)
call RemoveUnit(lk)
call RemoveUnit(Jk)
call RemoveUnit(Lk)
call RemoveUnit(pk)
call RemoveUnit(Pk)
call RemoveUnit(jk)
call RemoveUnit(Qk)
call RemoveUnit(Sk)
call RemoveUnit(qk)
call RemoveUnit(tk)
call RemoveUnit(Uk)
call RemoveUnit(ak)
call RemoveUnit(dl)
call RemoveUnit(LJ)
call RemoveUnit(dJ)
call RemoveUnit(GJ)
call RemoveUnit(GJJ)
call RemoveUnit(JJ)
call RemoveUnit(xk)
call RemoveUnit(ek)
call RemoveUnit(vk)
call RemoveUnit(ik)
call RemoveUnit(Wk)
call RemoveUnit(Ok)
call RemoveUnit(Ek)
call RemoveUnit(nk)
call RemoveUnit(Rk)
call RemoveUnit(MJ)
call RemoveUnit(Vk)
call RemoveUnit(zk)
call RemoveUnit(yk)
set IZ4=CreateUnit(Z7[0],1852206952,IX4,IY4,270)
set I34=CreateUnit(C7,1749236021,ML,PL,270)
set IL4=CreateUnit(C7,1848652107,QL,SL,270)
set I04=CreateUnit(C7,1849897784,tL,TL,270)
set I_4=CreateUnit(C7,1697657397,UL,wL,270)
set J44=CreateUnit(C7,1848651862,zL,vm,270)
set J74=CreateUnit(C7,1848651863,em,xm,270)
set UJ74=CreateUnit(C7,'n2O0',-6520.,-6850.,270)
set J84=CreateUnit(C7,1848651826,om,rm,270)
set J94=CreateUnit(C7,1848651864,im,am,270)
set JD4=CreateUnit(C7,1848651833,Vm,Em,270)
set JE4=CreateUnit(C7,1848657989,Xm,Om,270)
set JF4=CreateUnit(Z7[0],1702129516,Am,Nm,270)
set JG4=CreateUnit(Z7[0],1697656914,bm,Bm,90)
set JH4=CreateUnit(Z7[0],1697656914,cm,Cm,45)
set JI4=CreateUnit(Z7[0],1697656914,dm,fm,0)
set JJ4=CreateUnit(Z7[0],1697657137,Fm,hm,90)
set JK4=CreateUnit(Z7[0],1697657137,Jm,lm,45)
set JM4=CreateUnit(Z7[0],1697657137,Mm,pm,0)
set JN4=CreateUnit(Z7[0],1697656915,Pm,Qm,90)
set JO4=CreateUnit(Z7[0],1697656915,Tm,Um,45)
set JP4=CreateUnit(Z7[0],1697656915,wm,Wm,0)
set JQ4=CreateUnit(Z7[0],1697657145,zm,vM,45)
set JR4=CreateUnit(Z7[0],1697657145,eM,oM,45)
set JS4=CreateUnit(Z7[0],1700884333,rM,iM,90)
set JT4=CreateUnit(Z7[0],1700884333,aM,nM,45)
set JU4=CreateUnit(Z7[0],1700884333,VM,XMM,0)
set JV4=CreateUnit(Z7[0],1700884325,AMM,bM,90)
set JW4=CreateUnit(Z7[0],1700884325,BMM,cM,45)
set JX4=CreateUnit(Z7[0],1700884325,dM,fM,0)
set fP=CreateUnit(Z7[0],1701670775,gM,hM,270)
set FP=CreateUnit(Z7[0],1701670775,HM,JM,270)
set lP=CreateUnit(Z7[0],1701670775,kM,lM,270)
set LP=CreateUnit(Z7[0],1701670775,pM,sM,270)
set MP=CreateUnit(Z7[0],1701670775,tM,wM,270)
set pP=CreateUnit(Z7[0],1701670775,zM,vp,270)
set PP=CreateUnit(Z7[0],1701670775,ep,op,270)
set qP=CreateUnit(Z7[0],1701670775,rp,ap,270)
set QP=CreateUnit(Z7[0],1701670775,Vp,Ep,270)
set sP=CreateUnit(Z7[0],1701670775,Xp,Rp,270)
set tP=CreateUnit(Z7[0],1701670775,Ap,bp,270)
set WP=CreateUnit(Z7[0],1700884343,Bp,cp,270)
set zP=CreateUnit(Z7[0],1700884343,Cp,dp,270)
set vq=CreateUnit(Z7[0],1701080930,fp,Fp,270)
set eq=CreateUnit(Z7[0],1701080930,gp,Hp,270)
set QQ4=Rect(GetRectMinX(bj_mapInitialPlayableArea),GetRectMinY(bj_mapInitialPlayableArea),GetUnitX(JN4)+800,GetUnitY(JN4)+800)
set QR4=Rect(GetRectMinX(bj_mapInitialPlayableArea),GetRectMinY(bj_mapInitialPlayableArea),GetUnitX(JO4)+$46C,GetUnitY(JO4)+$46C)
set QS4=Rect(GetRectMinX(bj_mapInitialPlayableArea),GetRectMinY(bj_mapInitialPlayableArea),GetUnitX(JP4)+800,GetUnitY(JP4)+800)
call SetPlayerAbilityAvailable(C7,1098018609,false)
call SetUnitColor(I34,gL)
call SetUnitColor(I_4,gL)
call SetUnitColor(I04,JL)
call SetUnitColor(IL4,JL)
call SetUnitColor(J44,JL)
call SetUnitColor(J74,JL)
call SetUnitColor(UJ74,JL)
call SetUnitColor(J84,JL)
call SetUnitColor(J94,JL)
call SetUnitColor(JD4,JL)
call YT8(JG4,true)
call YT8(JH4,true)
call YT8(JI4,true)
call YT8(JJ4,true)
call YT8(JK4,true)
call YT8(JM4,true)
call YT8(JN4,true)
call YT8(JO4,true)
call YT8(JP4,true)
call YT8(JQ4,true)
call YT8(JR4,true)
call YT8(JF4,true)
call YT8(JS4,true)
call YT8(JT4,true)
call YT8(JU4,true)
call YT8(JV4,true)
call YT8(JW4,true)
call YT8(JX4,true)
call YT8(WP,true)
call YT8(zP,true)
call YT8(vq,true)
call YT8(eq,true)
call YT8(fP,true)
call YT8(FP,true)
call YT8(lP,true)
call YT8(LP,true)
call YT8(MP,true)
call YT8(pP,true)
call YT8(PP,true)
call YT8(qP,true)
call YT8(QP,true)
call YT8(sP,true)
call YT8(tP,true)
set JY4=GetUnitX(lK)
set JZ4=GetUnitY(lK)
set rq=GetUnitX(cK)
set iq=GetUnitY(cK)
set aq=GetUnitX(CK)
set Eq=GetUnitY(CK)
set Rq=GetUnitX(dK)
set Aq=GetUnitY(dK)
set Nq=GetUnitX(bK)
set bq=GetUnitY(bK)
set Bq=GetUnitX(AK)
set cq=GetUnitY(AK)
set Cq=GetUnitX(OK)
set Dq=GetUnitY(OK)
set fq=GetUnitX(XK)
set Fq=GetUnitY(XK)
set Hq=GetUnitX(NK)
set jq=GetUnitY(NK)
set Jq=GetUnitX(BK)
set Mq=GetUnitY(BK)
set qq=GetUnitX(QJ)
set Qq=GetUnitY(QJ)
set Sq=GetUnitX(WK)
set tq=GetUnitY(WK)
set Uq=GetUnitX(HJ)
set zq=GetUnitY(HJ)
set Zq=GetUnitX(ZK)
set vQ=GetUnitY(ZK)
set eQ=GetUnitX(qJ)
set xQ=GetUnitY(qJ)
set oQ=GetUnitX(UJ)
set iQ=GetUnitY(UJ)
set aQ=GetUnitX(vl)
set EQ=GetUnitY(vl)
set OQ=GetUnitX(PJ)
set RQ=GetUnitY(PJ)
set AQ=GetUnitX(EK)
set NQ=GetUnitY(EK)
set bQ=GetUnitX(el)
set BQ=GetUnitY(el)
set cQ=GetUnitX(Bl)
set CQ=GetUnitY(Bl)
set fQ=GetUnitX(xl)
set FQ=GetUnitY(xl)
set hQ=GetUnitX(SK)
set HQ=GetUnitY(SK)
set lQ=GetUnitX(VK)
set LQ=GetUnitY(VK)
set mQ=GetUnitX(QK)
set MQ=GetUnitY(QK)
set PQ=GetUnitX(bl)
set QQ=GetUnitY(bl)
set SQ=GetUnitX(aK)
set UQ=GetUnitY(aK)
set WQ=GetUnitX(zK)
set zQ=GetUnitY(zK)
set ZQ=GetUnitX(Nl)
set vs=GetUnitY(Nl)
set es=GetUnitX(El)
set os=GetUnitY(El)
set rs=GetUnitX(rl)
set as=GetUnitY(rl)
set ns=GetUnitX(Rl)
set Vs=GetUnitY(Rl)
set Es=GetUnitX(xK)
set Xs=GetUnitY(xK)
set Rs=GetUnitX(Ol)
set As=GetUnitY(Ol)
set Ns=GetUnitX(ol)
set bs=GetUnitY(ol)
set Bs=GetUnitX(al)
set cs=GetUnitY(al)
set Cs=GetUnitX(Xl)
set Ds=GetUnitY(Xl)
set fs=GetUnitX(cl)
set Fs=GetUnitY(cl)
set Hs=GetUnitX(vK)
set js=GetUnitY(vK)
set Js=GetUnitX(TK)
set Ks=GetUnitY(TK)
set ls=GetUnitX(eK)
set Ls=GetUnitY(eK)
set ms=GetUnitX(Al)
set Ms=GetUnitY(Al)
set ps=GetUnitX(Vl)
set Ps=GetUnitY(Vl)
set Qs=GetUnitX(wK)
set Ss=GetUnitY(wK)
call RemoveUnit(El)
call RemoveUnit(rl)
call RemoveUnit(Rl)
call RemoveUnit(xK)
call RemoveUnit(Ol)
call RemoveUnit(ol)
call RemoveUnit(al)
call RemoveUnit(Xl)
call RemoveUnit(cl)
call RemoveUnit(vK)
call RemoveUnit(TK)
call RemoveUnit(HJ)
call RemoveUnit(UJ)
call RemoveUnit(EK)
call RemoveUnit(ZK)
call RemoveUnit(vl)
call RemoveUnit(el)
call RemoveUnit(qJ)
call RemoveUnit(PJ)
call RemoveUnit(Bl)
call RemoveUnit(xl)
call RemoveUnit(SK)
call RemoveUnit(VK)
call RemoveUnit(QK)
call RemoveUnit(bl)
call RemoveUnit(aK)
call RemoveUnit(zK)
call RemoveUnit(Nl)
call RemoveUnit(eK)
call RemoveUnit(Al)
call RemoveUnit(Vl)
call RemoveUnit(wK)
call RemoveUnit(WK)
call RemoveUnit(AK)
call RemoveUnit(OK)
call RemoveUnit(OKK)
call RemoveUnit(XK)
call RemoveUnit(NK)
call RemoveUnit(BK)
call RemoveUnit(QJ)
call RemoveUnit(dK)
call RemoveUnit(CK)
call RemoveUnit(lK)
call RemoveUnit(cK)
call RemoveUnit(bK)
set JA4=CreateUnit(A7[0],1852073580,JY4,JZ4,270)
set JB4=CreateUnit(C7,1849897781,rq,iq,270)
set zs=CreateUnit(C7,1848652107,aq,Eq,270)
set Zs=CreateUnit(C7,1849897784,Rq,Aq,270)
set JC4=CreateUnit(C7,1966092369,Nq,bq,270)
set eS=CreateUnit(C7,1848651862,Bq,cq,0)
set oS=CreateUnit(C7,1848651863,Cq,Dq,0)
set oSS=CreateUnit(C7,'n2O0',6434.,5578.,0)
set rS=CreateUnit(C7,1848651826,fq,Fq,0)
set aS=CreateUnit(C7,1848651864,Hq,jq,0)
set nS=CreateUnit(C7,1848651833,Jq,Mq,0)
set VS=CreateUnit(C7,1848657989,qq,Qq,0)
set J34=CreateUnit(A7[0],1970172012,Sq,tq,$DC)
set J64=CreateUnit(A7[0],1966092365,Uq,zq,270)
set JL4=CreateUnit(A7[0],1966092365,Zq,vQ,270)
set J14=CreateUnit(A7[0],1966092365,eQ,xQ,270)
set J04=CreateUnit(A7[0],1966092356,oQ,iQ,270)
set J54=CreateUnit(A7[0],1966092356,aQ,EQ,270)
set J24=CreateUnit(A7[0],1966092356,OQ,RQ,270)
set J_4=CreateUnit(A7[0],1966092366,AQ,NQ,270)
set K44=CreateUnit(A7[0],1966092366,bQ,BQ,270)
set K74=CreateUnit(A7[0],1966092366,cQ,CQ,270)
set K84=CreateUnit(A7[0],1966092372,fQ,FQ,270)
set K94=CreateUnit(A7[0],1966092372,hQ,HQ,270)
set KD4=CreateUnit(A7[0],1970496880,lQ,LQ,270)
set KE4=CreateUnit(A7[0],1970496880,mQ,MQ,270)
set KF4=CreateUnit(A7[0],1970496880,PQ,QQ,270)
set KG4=CreateUnit(A7[0],1970564964,SQ,UQ,270)
set KH4=CreateUnit(A7[0],1970564964,WQ,zQ,270)
set KI4=CreateUnit(A7[0],1970564964,ZQ,vs,270)
call IQ7()
set PS=CreateUnit(A7[0],1970956647,es,os,270)
set QS=CreateUnit(A7[0],1970956647,rs,as,270)
set SS=CreateUnit(A7[0],1970956647,ns,Vs,270)
set tS=CreateUnit(A7[0],1970956647,Es,Xs,270)
set TS=CreateUnit(A7[0],1970956647,Rs,As,270)
set US=CreateUnit(A7[0],1970956647,Ns,bs,270)
set WS=CreateUnit(A7[0],1970956647,Bs,cs,270)
set ZS=CreateUnit(A7[0],1970956647,Cs,Ds,270)
set vt=CreateUnit(A7[0],1970956647,fs,Fs,270)
set et=CreateUnit(A7[0],1970956647,Hs,js,270)
set xt=CreateUnit(A7[0],1970956647,Js,Ks,270)
set ot=CreateUnit(A7[0],1970495856,ls,Ls,270)
set rt=CreateUnit(A7[0],1970495856,ms,Ms,270)
set at=CreateUnit(A7[0],1969385326,ps,Ps,270)
set Vt=CreateUnit(A7[0],1969385326,Qs,Ss,270)
set QN4=Rect(GetUnitX(J_4)-800,GetUnitY(J_4)-800,GetRectMaxX(bj_mapInitialPlayableArea),GetRectMaxY(bj_mapInitialPlayableArea))
set QO4=Rect(GetUnitX(K44)-$46C,GetUnitY(K44)-$46C,GetRectMaxX(bj_mapInitialPlayableArea),GetRectMaxY(bj_mapInitialPlayableArea))
set QP4=Rect(GetUnitX(K74)-800,GetUnitY(K74)-800,GetRectMaxX(bj_mapInitialPlayableArea),GetRectMaxY(bj_mapInitialPlayableArea))
call SetUnitColor(JB4,hL)
call SetUnitColor(Zs,JL)
call SetUnitColor(zs,JL)
call SetUnitColor(eS,JL)
call SetUnitColor(oS,JL)
call SetUnitColor(oSS,JL)
call SetUnitColor(rS,JL)
call SetUnitColor(aS,JL)
call SetUnitColor(nS,JL)
call YT8(J64,true)
call YT8(JL4,true)
call YT8(J14,true)
call YT8(J04,true)
call YT8(J54,true)
call YT8(J24,true)
call YT8(J_4,true)
call YT8(K44,true)
call YT8(K74,true)
call YT8(K84,true)
call YT8(K94,true)
call YT8(J34,true)
call YT8(KD4,true)
call YT8(KE4,true)
call YT8(KF4,true)
call YT8(KG4,true)
call YT8(KH4,true)
call YT8(KI4,true)
call YT8(ot,true)
call YT8(rt,true)
call YT8(at,true)
call YT8(Vt,true)
call YT8(PS,true)
call YT8(QS,true)
call YT8(SS,true)
call YT8(tS,true)
call YT8(TS,true)
call YT8(US,true)
call YT8(WS,true)
call YT8(ZS,true)
call YT8(vt,true)
call YT8(et,true)
call YT8(xt,true)
set LCG=GetUnitX(wJ)
set L3G=GetUnitY(wJ)
set L6G=GetUnitX(ZJ)
set LLG=GetUnitY(ZJ)
set L1G=GetUnitX(zJ)
set L0G=GetUnitY(zJ)
set L5G=GetUnitX(WJ)
set L2G=GetUnitY(WJ)
set L_G=GetUnitX(yJ)
set D4H=GetUnitY(yJ)
set D7H=GetUnitX(FK)
set D8H=GetUnitY(FK)
set D9H=GetUnitX(fK)
set DDH=GetUnitY(fK)
set DEH=GetUnitX(JK)
set DFH=GetUnitY(JK)
set DGH=GetUnitX(gK)
set DHH=GetUnitY(gK)
set DIH=GetUnitX(GK)
set DJH=GetUnitY(GK)
set LO7=125
call RemoveUnit(wJ)
call RemoveUnit(ZJ)
call RemoveUnit(zJ)
call RemoveUnit(WJ)
call RemoveUnit(yJ)
call RemoveUnit(FK)
call RemoveUnit(fK)
call RemoveUnit(JK)
call RemoveUnit(gK)
call RemoveUnit(GK)
set KJ4=CreateUnit(Player(1),1852010352,LCG,L3G,270)
call UnitAddAbility(KJ4,1093743665)
call ClearSelectionForPlayer(Player(1))
call SelectUnitAddForPlayer(KJ4,Player(1))
if GetLocalPlayer()==Player(1)then
call SetUnitVertexColor(KJ4,$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KJ4,$FF,$FF,$FF,LO7)
endif
set KK4=CreateUnit(Player(2),1852010352,L6G,LLG,270)
call UnitAddAbility(KK4,1093743665)
call ClearSelectionForPlayer(Player(2))
call SelectUnitAddForPlayer(KK4,Player(2))
if GetLocalPlayer()==Player(2)then
call SetUnitVertexColor(KK4,$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KK4,$FF,$FF,$FF,LO7)
endif
set KM4=CreateUnit(Player(3),1852010352,L1G,L0G,270)
call UnitAddAbility(KM4,1093743665)
call ClearSelectionForPlayer(Player(3))
call SelectUnitAddForPlayer(KM4,Player(3))
if GetLocalPlayer()==Player(3)then
call SetUnitVertexColor(KM4,$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KM4,$FF,$FF,$FF,LO7)
endif
set KN4=CreateUnit(Player(4),1852010352,L5G,L2G,270)
call UnitAddAbility(KN4,1093743665)
call ClearSelectionForPlayer(Player(4))
call SelectUnitAddForPlayer(KN4,Player(4))
if GetLocalPlayer()==Player(4)then
call SetUnitVertexColor(KN4,$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KN4,$FF,$FF,$FF,LO7)
endif
set KO4=CreateUnit(Player(5),1852010352,L_G,D4H,270)
call UnitAddAbility(KO4,1093743665)
call ClearSelectionForPlayer(Player(5))
call SelectUnitAddForPlayer(KO4,Player(5))
if GetLocalPlayer()==Player(5)then
call SetUnitVertexColor(KO4,$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KO4,$FF,$FF,$FF,LO7)
endif
set KP4=CreateUnit(Player(7),1852010352,D7H,D8H,270)
call UnitAddAbility(KP4,1093752649)
call ClearSelectionForPlayer(Player(7))
call SelectUnitAddForPlayer(KP4,Player(7))
if GetLocalPlayer()==Player(7)then
call SetUnitVertexColor(KP4,$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KP4,$FF,$FF,$FF,LO7)
endif
set KQ4=CreateUnit(Player(8),1852010352,D9H,DDH,270)
call UnitAddAbility(KQ4,1093752649)
call ClearSelectionForPlayer(Player(8))
call SelectUnitAddForPlayer(KQ4,Player(8))
if GetLocalPlayer()==Player(8)then
call SetUnitVertexColor(KQ4,$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KQ4,$FF,$FF,$FF,LO7)
endif
set KR4=CreateUnit(Player(9),1852010352,DEH,DFH,270)
call UnitAddAbility(KR4,1093752649)
call ClearSelectionForPlayer(Player(9))
call SelectUnitAddForPlayer(KR4,Player(9))
if GetLocalPlayer()==Player(9)then
call SetUnitVertexColor(KR4,$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KR4,$FF,$FF,$FF,LO7)
endif
set KS4=CreateUnit(Player($A),1852010352,DGH,DHH,270)
call UnitAddAbility(KS4,1093752649)
call ClearSelectionForPlayer(Player($A))
call SelectUnitAddForPlayer(KS4,Player($A))
if GetLocalPlayer()==Player($A)then
call SetUnitVertexColor(KS4,$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KS4,$FF,$FF,$FF,LO7)
endif
set KT4=CreateUnit(Player($B),1852010352,DIH,DJH,270)
call UnitAddAbility(KT4,1093752649)
call ClearSelectionForPlayer(Player($B))
call SelectUnitAddForPlayer(KT4,Player($B))
if GetLocalPlayer()==Player($B)then
call SetUnitVertexColor(KT4,$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KT4,$FF,$FF,$FF,LO7)
endif
set KU4[1]=KJ4
set KU4[2]=KK4
set KU4[3]=KM4
set KU4[4]=KN4
set KU4[5]=KO4
set KU4[7]=KP4
set KU4[8]=KQ4
set KU4[9]=KR4
set KU4[$A]=KS4
set KU4[$B]=KT4
set KV4[1]=GetUnitX(KJ4)
set KV4[2]=GetUnitX(KK4)
set KV4[3]=GetUnitX(KM4)
set KV4[4]=GetUnitX(KN4)
set KV4[5]=GetUnitX(KO4)
set KV4[7]=GetUnitX(KP4)
set KV4[8]=GetUnitX(KQ4)
set KV4[9]=GetUnitX(KR4)
set KV4[$A]=GetUnitX(KS4)
set KV4[$B]=GetUnitX(KT4)
set KW4[1]=GetUnitY(KJ4)
set KW4[2]=GetUnitY(KK4)
set KW4[3]=GetUnitY(KM4)
set KW4[4]=GetUnitY(KN4)
set KW4[5]=GetUnitY(KO4)
set KW4[7]=GetUnitY(KP4)
set KW4[8]=GetUnitY(KQ4)
set KW4[9]=GetUnitY(KR4)
set KW4[$A]=GetUnitY(KS4)
set KW4[$B]=GetUnitY(KT4)
call LS7()
call LX7()
call XY7(1702061422,"stand 4")
call XY7(1697656918,"stand 4")
call XY7(1701081721,"spell")
call XY7(1697656919,"spell")
call XY7(1969711215,"stand victory")
call XY7(1966092337,"stand victory")
call XY7(1970169187,"stand channel")
call XY7(1966092338,"stand channel")
call XU7(1848651853,.4,1848651853)
call XU7(1697657426,.5,1697657426)
call XU7(1697657428,1.2,1697657428)
call XU7(1697657427,.5,1697657427)
call XU7(1697657648,.5,1697657648)
call XU7(1848659027,1,1848659027)
set t=CreateTrigger()
set j8=Player($F)
set DKH=GetUnitX(qK)
set DMH=GetUnitY(qK)
set DNH=GetUnitX(tJ)
set DOH=GetUnitY(tJ)
set DPH=GetUnitX(LK)
set DQH=GetUnitY(LK)
set DRH=GetUnitX(SJ)
set DSH=GetUnitY(SJ)
set DTH=GetUnitX(IF4)
set DUH=GetUnitY(IF4)
set DVH=GetUnitX(cJ)
set DWH=GetUnitY(cJ)
set DXH=GetUnitX(gJ)
set DYH=GetUnitY(gJ)
set DZH=GetUnitX(PK)
set DAH=GetUnitY(PK)
set DBH=GetUnitX(Cl)
set DCH=GetUnitY(Cl)
set DLH=GetUnitX(WC4)
set D1H=GetUnitY(WC4)
set D3H=GetUnitX(W64)
set D6H=GetUnitY(W64)
set D0H=GetUnitX(W34)
set D5H=GetUnitY(W34)
call RemoveUnit(qK)
call RemoveUnit(IF4)
call RemoveUnit(tJ)
call RemoveUnit(SJ)
call RemoveUnit(LK)
call RemoveUnit(cJ)
call RemoveUnit(gJ)
call RemoveUnit(PK)
call RemoveUnit(Cl)
call RemoveUnit(WC4)
call RemoveUnit(W64)
call RemoveUnit(W34)
set MP4=CreateUnit(j8,1848651832,DRH,DSH,270)
set MQ4=CreateUnit(j8,1848657738,DTH,DUH,270)
set MR4=CreateUnit(j8,1848652100,DVH,DWH,270)
set MS4=CreateUnit(j8,1848659016,D3H,D6H,270)
set MT4=CreateUnit(j8,1848652110,DKH,DMH,270)
set MU4=CreateUnit(j8,1848651831,DNH,DOH,270)
set MV4=CreateUnit(j8,1848651829,DPH,DQH,270)
set MW4=CreateUnit(j8,1848659017,DLH,D1H,270)
set MX4=CreateUnit(j8,1848652098,DXH,DYH,270)
set MY4=CreateUnit(j8,1848652112,DZH,DAH,270)
set MZ4=CreateUnit(j8,1848657739,DBH,DCH,270)
set MA4=CreateUnit(j8,1848659018,D0H,D5H,270)
call SetUnitColor(MP4,ConvertPlayerColor(1))
call SetUnitColor(MQ4,ConvertPlayerColor(1))
call SetUnitColor(MR4,ConvertPlayerColor(9))
call SetUnitColor(MS4,ConvertPlayerColor(9))
call SetUnitColor(MT4,ConvertPlayerColor(6))
call SetUnitColor(MU4,ConvertPlayerColor(6))
call SetUnitColor(MV4,ConvertPlayerColor($A))
call SetUnitColor(MW4,ConvertPlayerColor($A))
call SetUnitColor(MX4,ConvertPlayerColor(0))
call SetUnitColor(MY4,ConvertPlayerColor(0))
call SetUnitColor(MZ4,ConvertPlayerColor($B))
call SetUnitColor(MA4,ConvertPlayerColor($B))
set BZ4[1]=MP4
set BZ4[2]=MQ4
set BZ4[3]=MR4
set BZ4[4]=MS4
set BZ4[5]=MT4
set BZ4[6]=MU4
set BZ4[7]=MV4
set BZ4[8]=MW4
set BZ4[9]=MX4
set BZ4[$A]=MY4
set BZ4[$B]=MZ4
set BZ4[$C]=MA4
call PI9()
call PH9()
set t=null
call LA7()
call L57()
set ZR=CreateTrigger()
call TriggerRegisterTimerEventSingle(ZR,.01)
call TriggerAddAction(ZR,function L27)
set t=CreateTrigger()
call TriggerRegisterPlayerEventLeave(t,Z7[1])
call TriggerRegisterPlayerEventLeave(t,Z7[2])
call TriggerRegisterPlayerEventLeave(t,Z7[3])
call TriggerRegisterPlayerEventLeave(t,Z7[4])
call TriggerRegisterPlayerEventLeave(t,Z7[5])
call TriggerRegisterPlayerEventLeave(t,A7[1])
call TriggerRegisterPlayerEventLeave(t,A7[2])
call TriggerRegisterPlayerEventLeave(t,A7[3])
call TriggerRegisterPlayerEventLeave(t,A7[4])
call TriggerRegisterPlayerEventLeave(t,A7[5])
call TriggerAddAction(t,function DJ8)
if V8 then
call D48()
set t=CreateTrigger()
if IsPlayerObserver(KX4)then
call TriggerRegisterPlayerEventLeave(t,KX4)
endif
if IsPlayerObserver(KY4)then
call TriggerRegisterPlayerEventLeave(t,KY4)
endif
call TriggerAddAction(t,function DD8)
endif
set U2[0]=false
set U2[1]=false
set U2[2]=false
set U2[3]=false
set U2[4]=false
set U2[5]=false
set U2[6]=false
set U2[7]=false
set U2[8]=false
set U2[9]=false
set U2[$A]=false
set U2[$B]=false
set U2[$C]=false
set U2[$D]=false
set U2[$E]=false
set U2[$F]=false
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_HERO_REVIVE_FINISH)
call TriggerAddAction(t,function O6G)
set t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,bj_mapInitialPlayableArea)
call TriggerAddCondition(t,Condition(function PL8))
call TriggerAddAction(t,function QS8)
set ML4=t
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerAddAction(t,function QX8)
call TriggerAddCondition(t,Condition(function QW8))
set M04=t
set M54=CreateTrigger()
call TriggerRegisterTimerEvent(M54,.6,true)
call TriggerAddCondition(M54,Condition(function QY8))
call DisableTrigger(M54)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddAction(t,function YL8)
set M24=t
call YP8(0,0,false)
call ExecuteFunc("R7d")
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.5,true)
call YB7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerAddCondition(t,Condition(function QC8))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0.1,true)
call TriggerAddCondition(t,Condition(function PW1))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_PAWN_ITEM)
call TriggerAddCondition(t,Condition(function PV1))
set t=null
call X_7(1093809990)
call X_7(1093810008)
call X_7(1093809992)
call X_7(1093817434)
call X_7(1093810006)
call X_7(1093809991)
call X_7(1093809993)
call X_7(1093809995)
call X_7(1093809994)
set DS=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(DS,Z7[0],EVENT_PLAYER_UNIT_DEATH,Condition(function TO7))
call TriggerRegisterPlayerUnitEvent(DS,A7[0],EVENT_PLAYER_UNIT_DEATH,Condition(function TO7))
call TriggerRegisterPlayerUnitEvent(DS,B7,EVENT_PLAYER_UNIT_DEATH,Condition(function TO7))
call TriggerAddAction(DS,function QL8)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function VP8))
set t=null
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function WM8))
call TriggerAddAction(t,function WU8)
set ES=t
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function XK8))
set t=null
set NZ4=CreateTrigger()
call TriggerAddCondition(NZ4,Condition(function XQ8))
set ZI=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(ZI,B7,EVENT_PLAYER_UNIT_DEATH,Condition(function TO7))
call TriggerAddCondition(ZI,Condition(function XV8))
call TriggerAddAction(ZI,function XY8)
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,Z7[0],EVENT_PLAYER_UNIT_DEATH,Condition(function TO7))
call TriggerRegisterPlayerUnitEvent(t,A7[0],EVENT_PLAYER_UNIT_DEATH,Condition(function TO7))
call TriggerAddCondition(t,Condition(function XL8))
set t=CreateTrigger()
call TriggerAddCondition(t,Condition(function YG8))
call TriggerRegisterTimerEvent(t,6,false)
set t=null
set EV=EV+1
set SU[EV]=1227900486
set ZU[EV]=1227900487
set AU[EV]=0
set BU[EV]=0
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSelectHeroOn.blp"
set LU[EV]=0
set EV=EV+1
set SU[EV]=1227895377
set ZU[EV]=1227895375
set AU[EV]=1747988785
set BU[EV]=1227894849
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNBootsOfSpeed.blp"
set LU[EV]=0
set FV=EV
set EV=EV+1
set SU[EV]=1227895379
set ZU[EV]=1227895376
set AU[EV]=1747988786
set BU[EV]=1227899713
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNGlove.blp"
set LU[EV]=0
set JV=EV
set EV=EV+1
set SU[EV]=1227895374
set ZU[EV]=1227895378
set AU[EV]=1747988787
set BU[EV]=1227899731
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNBoots.blp"
set LU[EV]=0
set MV=EV
set EV=EV+1
set SU[EV]=1227895384
set ZU[EV]=1227895385
set AU[EV]=1747988789
set BU[EV]=1227899956
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNCirclet.blp"
set LU[EV]=0
set NV=EV
set EV=EV+1
set SU[EV]=1227895386
set ZU[EV]=1227895859
set AU[EV]=1747988790
set BU[EV]=1227899734
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNBelt.blp"
set LU[EV]=0
set OV=EV
set EV=EV+1
set SU[EV]=1227895600
set ZU[EV]=1227895860
set AU[EV]=1747988791
set BU[EV]=1227899954
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_ThrowingKnife_03.blp"
set LU[EV]=0
set QV=EV
set EV=EV+1
set SU[EV]=1227895601
set ZU[EV]=1227895861
set AU[EV]=1747988792
set BU[EV]=1227899957
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNClawsOfAttack.blp"
set LU[EV]=0
set SV=EV
set EV=EV+1
set SU[EV]=1227895602
set ZU[EV]=1227895862
set AU[EV]=1747988793
set BU[EV]=1227899738
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSteelMelee.blp"
set LU[EV]=0
set TV=EV
set EV=EV+1
set SU[EV]=1227895603
set ZU[EV]=1227895863
set AU[EV]=1747988801
set BU[EV]=1227899959
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Chest_Chain_12.blp"
set LU[EV]=0
set UV=EV
set EV=EV+1
set SU[EV]=1227895604
set ZU[EV]=1227895864
set AU[EV]=1747988802
set BU[EV]=1227899736
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_19.blp"
set LU[EV]=0
set XV=EV
set EV=EV+1
set SU[EV]=1227895605
set ZU[EV]=1227895865
set AU[EV]=1747988803
set BU[EV]=1227899721
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNFrostMourne.blp"
set LU[EV]=0
set AV=EV
set EV=EV+1
set SU[EV]=1227895606
set ZU[EV]=1227895873
set AU[EV]=1747988804
set BU[EV]=1227899720
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Weapon_Bow_06.blp"
set LU[EV]=0
set BV=EV
set EV=EV+1
set SU[EV]=1227895607
set ZU[EV]=1227895874
set AU[EV]=1747988805
set BU[EV]=1227899730
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNEnchantedGemstone.blp"
set LU[EV]=0
set CV=EV
set EV=EV+1
set SU[EV]=1227895608
set ZU[EV]=1227895875
set AU[EV]=1747988806
set BU[EV]=1227899722
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNGauntletsOfOgrePower.blp"
set LU[EV]=0
set LV=EV
set EV=EV+1
set SU[EV]=1227895609
set ZU[EV]=1227895876
set AU[EV]=1747988807
set BU[EV]=1227899975
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNGem.blp"
set LU[EV]=0
set EW=EV
set EV=EV+1
set SU[EV]=1227902291
set ZU[EV]=1227902290
set AU[EV]=0
set BU[EV]=1227902292
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNGem.blp"
set LU[EV]=0
set HW=EV
set EV=EV+1
set EV=EV+1
set SU[EV]=1227895618
set ZU[EV]=1227895877
set AU[EV]=1747988808
set BU[EV]=1227899969
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNHelmutPurple.blp"
set LU[EV]=0
set NW=EV
set EV=EV+1
set SU[EV]=1227895619
set ZU[EV]=1227895878
set AU[EV]=1747988809
set BU[EV]=1227899729
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNPeriapt1.blp"
set LU[EV]=0
set OW=EV
set EV=EV+1
set SU[EV]=1227895620
set ZU[EV]=1227895879
set AU[EV]=1747988810
set BU[EV]=1227899733
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNNatureTouchGrow.blp"
set LU[EV]=0
set QW=EV
set EV=EV+1
set SU[EV]=1227895621
set ZU[EV]=1227895880
set AU[EV]=1747988811
set BU[EV]=1227899703
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNDaggerOfEscape.blp"
set LU[EV]=$E
set RW=EV
set EV=EV+1
set SU[EV]=1227895621
set ZU[EV]=1227895881
set AU[EV]=1747988811
set BU[EV]=1227899976
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNDaggerOfEscape.blp"
set LU[EV]=0
set TW=EV
set EV=EV+1
set SU[EV]=1227895622
set ZU[EV]=1227895882
set AU[EV]=1747988812
set BU[EV]=1227899725
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNMantleOfIntelligence.blp"
set LU[EV]=0
set UW=EV
set EV=EV+1
set SU[EV]=1227895623
set ZU[EV]=1227895883
set AU[EV]=1747988813
set BU[EV]=1227899716
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNUndeadShrine.blp"
set LU[EV]=0
set VW=EV
set EV=EV+1
set SU[EV]=1227895624
set ZU[EV]=1227895884
set AU[EV]=1747988814
set BU[EV]=1227899719
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSpiritWalkerMasterTraining.blp"
set LU[EV]=0
set YW=EV
set EV=EV+1
set SU[EV]=1227895625
set ZU[EV]=1227895885
set AU[EV]=1747988815
set BU[EV]=1227899952
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNHammer.blp"
set LU[EV]=0
set ZW=EV
set EV=EV+1
set SU[EV]=1227895626
set ZU[EV]=1227895886
set AU[EV]=1747988816
set BU[EV]=1227899726
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNStaffOfNegation.blp"
set LU[EV]=0
set GX=EV
set EV=EV+1
set SU[EV]=1227895627
set ZU[EV]=1227895887
set AU[EV]=1747988817
set BU[EV]=1227899960
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSpiritWalkerAdeptTraining.tga"
set LU[EV]=0
set NX=EV
set EV=EV+1
set SU[EV]=1227895628
set ZU[EV]=1227895888
set AU[EV]=1747988818
set BU[EV]=1227899717
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Misc_Cape_08.blp"
set LU[EV]=0
set RX=EV
set EV=EV+1
set SU[EV]=1227895629
set ZU[EV]=1227895889
set AU[EV]=1747988819
set BU[EV]=1227899970
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Chest_Plate13.blp"
set LU[EV]=0
set SX=EV
set EV=EV+1
set SU[EV]=1227895630
set ZU[EV]=1227895890
set AU[EV]=1747988820
set BU[EV]=1227899724
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNUsedSoulGem.blp"
set LU[EV]=0
set WX=EV
set EV=EV+1
set SU[EV]=1227895632
set ZU[EV]=1227895891
set AU[EV]=1747988821
set BU[EV]=1227899737
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNAlleriaFlute.blp"
set LU[EV]=0
set YX=EV
set EV=EV+1
set SU[EV]=1227895633
set ZU[EV]=1227895892
set AU[EV]=1747988822
set BU[EV]=1227899977
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNGoldRing.blp"
set LU[EV]=0
set ZX=EV
set EV=EV+1
set SU[EV]=1227895634
set ZU[EV]=1227895893
set AU[EV]=1747988823
set BU[EV]=1227899735
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNRingPurple.blp"
set LU[EV]=0
set AX=EV
set EV=EV+1
set SU[EV]=1227895635
set ZU[EV]=1227895894
set AU[EV]=1747988824
set BU[EV]=1227899978
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNRingSkull.blp"
set LU[EV]=0
set GY=EV
set EV=EV+1
set SU[EV]=1227895636
set ZU[EV]=1227895895
set AU[EV]=1747988825
set BU[EV]=1227899728
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNRobeOfTheMagi.blp"
set LU[EV]=0
set HY=EV
set EV=EV+1
set SU[EV]=1227895637
set ZU[EV]=1227895896
set AU[EV]=1747988826
set BU[EV]=1227899715
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNStaffOfTeleportation.blp"
set LU[EV]=0
set SY=EV
set EV=EV+1
set SU[EV]=1227895638
set ZU[EV]=1227895897
set AU[EV]=1747989040
set BU[EV]=1227899701
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSlippersOfAgility.blp"
set LU[EV]=0
set UY=EV
set EV=EV+1
set SU[EV]=1227895639
set ZU[EV]=1227895898
set AU[EV]=1747989041
set BU[EV]=1227899979
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSobiMask.blp"
set LU[EV]=0
set ZY=EV
set EV=EV+1
set SU[EV]=1227895640
set ZU[EV]=1227896112
set AU[EV]=1747989042
set BU[EV]=1227899953
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNWandOfCyclone.blp"
set LU[EV]=0
set DZ=EV
set EV=EV+1
set SU[EV]=1227895617
set ZU[EV]=1227896113
set AU[EV]=1747989043
set BU[EV]=1227899961
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSteelArmor.blp"
set LU[EV]=0
set EZ=EV
set EV=EV+1
set SU[EV]=1227901762
set ZU[EV]=1227901761
set AU[EV]=0
set BU[EV]=1227901763
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSteelArmor.blp"
set LU[EV]=0
set HZ=EV
set EV=EV+1
set SU[EV]=1227895641
set ZU[EV]=1227896114
set AU[EV]=1747989044
set BU[EV]=1227899705
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNOrbofSlowness.blp"
set LU[EV]=0
set NZ=EV
set EV=EV+1
set SU[EV]=1227895642
set ZU[EV]=1227896115
set AU[EV]=1747989045
set BU[EV]=1227899723
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSoulGem.blp"
set LU[EV]=0
set OZ=EV
set EV=EV+1
set SU[EV]=1227895856
set ZU[EV]=1227896116
set AU[EV]=1747989046
set BU[EV]=1227899980
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNPeriapt.blp"
set LU[EV]=0
set RZ=EV
set EV=EV+1
set SU[EV]=1227895857
set ZU[EV]=1227896117
set AU[EV]=1747989047
set BU[EV]=1227899958
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSteelRanged.blp"
set LU[EV]=0
set UZ=EV
set EV=EV+1
set SU[EV]=1227894860
set ZU[EV]=1227899222
set AU[EV]=1747989058
set BU[EV]=0
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNBottle0.blp"
set LU[EV]=0
set XZ=EV
set EV=EV+1
set SU[EV]=1227896133
set ZU[EV]=1227899213
set AU[EV]=0
set BU[EV]=1227899982
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNBottle0.blp"
set LU[EV]=0
set AZ=EV
set EV=EV+1
set SU[EV]=1227899221
set ZU[EV]=1227899214
set AU[EV]=0
set BU[EV]=1227899983
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNBottle1.blp"
set LU[EV]=0
set BZ=EV
set EV=EV+1
set SU[EV]=1227899219
set ZU[EV]=1227899215
set AU[EV]=0
set BU[EV]=1227899984
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNBottle2.blp"
set LU[EV]=0
set CZ=EV
set EV=EV+1
set SU[EV]=1227899220
set ZU[EV]=1227899216
set AU[EV]=0
set BU[EV]=1227899985
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNBottle3.blp"
set LU[EV]=0
set IA=EV
set EV=EV+1
set SU[EV]=1227900759
set ZU[EV]=1227900761
set AU[EV]=0
set BU[EV]=1227900979
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNBottle_Illusion.blp"
set LU[EV]=0
set YA=EV
set EV=EV+1
set SU[EV]=1227903051
set ZU[EV]=1227903052
set AU[EV]=0
set BU[EV]=1227903053
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNBountyBottleON.blp"
set LU[EV]=0
set HJ0=EV
set EV=EV+1
set SU[EV]=1227903286
set ZU[EV]=1227903287
set AU[EV]=0
set BU[EV]=1227903288
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNBountyBottleON.blp"
set LU[EV]=0
set HJ1=EV
set EV=EV+1
set SU[EV]=1227900978
set ZU[EV]=1227900760
set AU[EV]=0
set BU[EV]=1227899986
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNBottle_Regeneration.blp"
set LU[EV]=0
set WA=EV
set EV=EV+1
set SU[EV]=1227900758
set ZU[EV]=1227900977
set AU[EV]=0
set BU[EV]=1227900980
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNBottle_Haste.blp"
set LU[EV]=0
set QA=EV
set EV=EV+1
set SU[EV]=1227899218
set ZU[EV]=1227900976
set AU[EV]=0
set BU[EV]=1227900982
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNBottle_DoubleDamage.blp"
set LU[EV]=0
set NA=EV
set EV=EV+1
set SU[EV]=1227899217
set ZU[EV]=1227900762
set AU[EV]=0
set BU[EV]=1227900981
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNBottle_Invisibility.blp"
set LU[EV]=0
set JA=EV
set EV=EV+1
set SU[EV]=1227900740
set ZU[EV]=1227900739
set AU[EV]=1747990324
set BU[EV]=1227900741
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNWand.blp"
set LU[EV]=13
set ZA=EV
set EV=EV+1
set SU[EV]=1227900995
set ZU[EV]=1227900994
set AU[EV]=0
set BU[EV]=1227900993
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNStarWand.blp"
set LU[EV]=13
set DT4=EV
set EV=EV+1
set SU[EV]=1227901012
set ZU[EV]=1227901010
set AU[EV]=1747990359
set BU[EV]=1227901014
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNOrcMeleeUpTwo.blp"
set LU[EV]=5
set BA=EV
set EV=EV+1
set SU[EV]=1227901013
set ZU[EV]=1227901008
set AU[EV]=0
set BU[EV]=1227901015
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNOrcMeleeUpTwo.blp"
set LU[EV]=5
set GB=EV
set EV=EV+1
set SU[EV]=1227902516
set ZU[EV]=1227902515
set AU[EV]=0
set BU[EV]=1227902517
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNPoisonBlade.blp"
set LU[EV]=30
set QB=EV
set EV=EV+1
set SU[EV]=1227902519
set ZU[EV]=1227902518
set AU[EV]=0
set BU[EV]=1227902520
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNPoisonBlade.blp"
set LU[EV]=30
set RB=EV
set EV=EV+1
set SU[EV]=1227901495
set ZU[EV]=1227901494
set AU[EV]=1747990579
set BU[EV]=1227901496
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNAmulet.blp"
set LU[EV]=0
set JB=EV
set EV=EV+1
set SU[EV]=1227901514
set ZU[EV]=1227901513
set AU[EV]=1747990583
set BU[EV]=1227901515
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNGreenStaff.blp"
set LU[EV]=30
set DA4=EV
set EV=EV+1
set SU[EV]=1227903033
set ZU[EV]=1227903042
set AU[EV]=1747993929
set BU[EV]=1227903041
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNPendantOfMana.blp"
set LU[EV]=0
set W3=EV
set EV=EV+1
set SU[EV]=1227902273
set ZU[EV]=1227902265
set AU[EV]=1747993421
set BU[EV]=1227902274
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNOrbOfVenom.blp"
set LU[EV]=0
set E_4=EV
set EV=EV+1
set SU[EV]=1227902276
set ZU[EV]=1227902277
set AU[EV]=0
set BU[EV]=1227902275
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNOrbOfVenom.blp"
set LU[EV]=0
set F44=EV
set EV=EV+1
set SU[EV]=1227896119
set ZU[EV]=1227896131
set AU[EV]=1747989057
set BU[EV]=0
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNAncientOfTheEarth.blp"
set LU[EV]=0
set TC=EV
set EV=EV+1
set SU[EV]=1227895858
set ZU[EV]=1227896132
set AU[EV]=1747989048
set BU[EV]=0
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNLesserClarityPotion.blp"
set LU[EV]=0
set OC=EV
set EV=EV+1
set SU[EV]=1227901007
set ZU[EV]=1227901006
set AU[EV]=1747990358
set BU[EV]=0
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNVialFull.blp"
set LU[EV]=0
set PC=EV
set EV=EV+1
set SU[EV]=1227896118
set ZU[EV]=1227896134
set AU[EV]=1747989049
set BU[EV]=0
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNHealingSalve.blp"
set LU[EV]=0
set QC=EV
set EV=EV+1
set SU[EV]=1227896120
set ZU[EV]=1227896135
set AU[EV]=1747989059
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSentryWard.blp"
set LU[EV]=0
set VC=EV
set EV=EV+1
set SU[EV]=1227896121
set ZU[EV]=1227896136
set AU[EV]=1747989060
set BU[EV]=0
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNBlueSentryWard.blp"
set LU[EV]=0
set WC=EV
set EV=EV+1
set SU[EV]=1227896129
set ZU[EV]=1227896137
set AU[EV]=1747989061
set BU[EV]=0
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNScrollUber.blp"
set LU[EV]=70
set XC=EV
set EV=EV+1
set SU[EV]=1227896130
set ZU[EV]=1227896138
set AU[EV]=1747989062
set BU[EV]=0
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNCritterChicken.blp"
set LU[EV]=0
set ZC=EV
set EV=EV+1
set SU[EV]=1227899440
set ZU[EV]=1227899441
set AU[EV]=0
set BU[EV]=0
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNCheese.blp"
set LU[EV]=0
set AC=EV
set EV=EV+1
set SU[EV]=1227900743
set ZU[EV]=1227900742
set AU[EV]=1747990325
set BU[EV]=0
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNPotionOfDivinity.blp"
set LU[EV]=30
set BC=EV
set EV=EV+1
set SU[EV]=1227900745
set ZU[EV]=1227900744
set AU[EV]=1747990326
set BU[EV]=0
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNDustOfAppearance.blp"
set LU[EV]=60
set CC=EV
set EV=EV+1
set SU[EV]=1227901780
set ZU[EV]=1227901779
set AU[EV]=1747993145
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNWandOfManaSteal.blp"
set LU[EV]=0
set LC=EV
set EV=EV+1
set SU[EV]=1227902534
set ZU[EV]=1227902535
set AU[EV]=1747993651
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSmokePotion.blp"
set LU[EV]=90
set H3=EV
set EV=EV+1
set SU[EV]=1227896369
set ZU[EV]=1227896370
set AU[EV]=0
set BU[EV]=1227895114
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNOrbOfFire.blp"
set LU[EV]=0
set Y3=EV
set EV=EV+1
set SU[EV]=1227896372
set ZU[EV]=1227896371
set AU[EV]=0
set BU[EV]=1227895115
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Helmet_17.blp"
set LU[EV]=0
set Z3=EV
set EV=EV+1
set SU[EV]=1227896373
set ZU[EV]=1227896374
set AU[EV]=0
set BU[EV]=1227895116
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNThoriumArmor.blp"
set LU[EV]=25
set B3=EV
set EV=EV+1
set SU[EV]=1227896376
set ZU[EV]=1227896375
set AU[EV]=0
set BU[EV]=1227895117
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNRingVioletSpider.tga"
set LU[EV]=0
set C3=EV
set EV=EV+1
set SU[EV]=1227896377
set ZU[EV]=1227896385
set AU[EV]=0
set BU[EV]=1227899702
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNRingVioletSpider.tga"
set LU[EV]=0
set E6=EV
set EV=EV+1
set SU[EV]=1227896387
set ZU[EV]=1227896386
set AU[EV]=0
set BU[EV]=1227895120
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNAbility_Rogue_Sprint.blp"
set LU[EV]=60
set F6=EV
set EV=EV+1
set SU[EV]=1227903048
set ZU[EV]=1227903047
set AU[EV]=0
set BU[EV]=1227903049
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNAbilityDFX.blp"
set LU[EV]=45
set FF6=EV
set EV=EV+1
set SU[EV]=1227895631
set ZU[EV]=1227895380
set AU[EV]=0
set BU[EV]=1227895122
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNWirtsLegGreen.blp"
set LU[EV]=0
set G6=EV
set EV=EV+1
set SU[EV]=1227895381
set ZU[EV]=1227896153
set AU[EV]=0
set BU[EV]=1227895121
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNWirtsLeg.blp"
set LU[EV]=0
set H6=EV
set EV=EV+1
set SU[EV]=1227896368
set ZU[EV]=1227896154
set AU[EV]=0
set BU[EV]=1227895123
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNWirtsLegBlue.blp"
set LU[EV]=0
set N6=EV
set EV=EV+1
set SU[EV]=1227896389
set ZU[EV]=1227896388
set AU[EV]=0
set BU[EV]=1227895124
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNGoldGloves.BLP"
set LU[EV]=100
set S6=EV
set EV=EV+1
set SU[EV]=1227902543
set ZU[EV]=1227902542
set AU[EV]=0
set BU[EV]=1227902544
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNGoldGloves.BLP"
set LU[EV]=100
set V6=EV
set EV=EV+1
set SU[EV]=1227896391
set ZU[EV]=1227896390
set AU[EV]=0
set BU[EV]=1227895125
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Mace_10.blp"
set LU[EV]=0
set W6=EV
set EV=EV+1
set SU[EV]=1227896393
set ZU[EV]=1227896392
set AU[EV]=0
set BU[EV]=1227895126
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNRunedBracers.blp"
set LU[EV]=0
set A6=EV
set EV=EV+1
set SU[EV]=1227896395
set ZU[EV]=1227896394
set AU[EV]=0
set BU[EV]=1227895127
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNRevenant.blp"
set LU[EV]=0
set DL=EV
set EV=EV+1
set SU[EV]=1227896397
set ZU[EV]=1227896396
set AU[EV]=0
set BU[EV]=1227895128
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNTalisman.tga"
set LU[EV]=0
set HL=EV
set EV=EV+1
set SU[EV]=1227896902
set ZU[EV]=1227896903
set AU[EV]=0
set BU[EV]=1227895129
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_10.blp"
set LU[EV]=0
set OL=EV
set EV=EV+1
set SU[EV]=1227896905
set ZU[EV]=1227896904
set AU[EV]=0
set BU[EV]=1227895130
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNJapaneseSword.BLP"
set LU[EV]=0
set RL=EV
set EV=EV+1
set SU[EV]=1227903054
set ZU[EV]=1227903055
set AU[EV]=0
set BU[EV]=1227903056
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSilverEdge.BLP"
set LU[EV]=24
set RLL=EV
set EV=EV+1
set SU[EV]=1227896906
set ZU[EV]=1227896907
set AU[EV]=0
set BU[EV]=1227895344
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Hammer_10.blp"
set LU[EV]=0
set WL=EV
set EV=EV+1
set SU[EV]=1227896909
set ZU[EV]=1227896908
set AU[EV]=0
set BU[EV]=1227899704
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Hammer_10.blp"
set LU[EV]=0
set ZL=EV
set EV=EV+1
set SU[EV]=1227896910
set ZU[EV]=1227896911
set AU[EV]=0
set BU[EV]=1227895345
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Chest_Plate06.blp"
set LU[EV]=22
set AL=EV
set EV=EV+1
set SU[EV]=1227896913
set ZU[EV]=1227896912
set AU[EV]=0
set BU[EV]=1227895346
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNStormHammer.blp"
set LU[EV]=0
set LL=EV
set EV=EV+1
set SU[EV]=1227896915
set ZU[EV]=1227896914
set AU[EV]=0
set BU[EV]=1227895347
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_11.blp"
set LU[EV]=$C
set D1=EV
set EV=EV+1
set SU[EV]=1227901506
set ZU[EV]=1227901497
set AU[EV]=0
set BU[EV]=1227901508
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNDiffusal2.blp"
set LU[EV]=$C
set E1=EV
set EV=EV+1
set SU[EV]=1227900247
set ZU[EV]=1227900246
set AU[EV]=0
set BU[EV]=1227900248
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_11.blp"
set LU[EV]=0
set F1=EV
set EV=EV+1
set SU[EV]=1227901507
set ZU[EV]=1227901505
set AU[EV]=0
set BU[EV]=1227901509
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNDiffusal2.blp"
set LU[EV]=0
set H1=EV
set EV=EV+1
set SU[EV]=1227896917
set ZU[EV]=1227896916
set AU[EV]=0
set BU[EV]=1227895348
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Helmet_13.blp"
set LU[EV]=60
set J1=EV
set EV=EV+1
set SU[EV]=1227896919
set ZU[EV]=1227896918
set AU[EV]=0
set BU[EV]=1227899727
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Helmet_13.blp"
set LU[EV]=0
set O1=EV
set EV=EV+1
set SU[EV]=1227896920
set ZU[EV]=1227896921
set AU[EV]=0
set BU[EV]=1227895349
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNHelmOfValor.blp"
set LU[EV]=22
set P1=EV
set EV=EV+1
set SU[EV]=1227897136
set ZU[EV]=1227896922
set AU[EV]=0
set BU[EV]=1227895350
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNStaffofpurification.blp"
set LU[EV]=23
set Q1=EV
set EV=EV+1
set SU[EV]=1227897138
set ZU[EV]=1227897137
set AU[EV]=0
set BU[EV]=1227895351
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNPhilosophersStone.blp"
set LU[EV]=0
set R1=EV
set EV=EV+1
set SU[EV]=1227903811
set ZU[EV]=1227903812
set AU[EV]=0
set BU[EV]=1227903813
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNLLX.blp"
set LU[EV]=0
set R1Q=EV
set EV=EV+1
set SU[EV]=1227897140
set ZU[EV]=1227897139
set AU[EV]=0
set BU[EV]=1227895352
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSpellShieldAmulet.blp"
set LU[EV]=45
set T1=EV
set EV=EV+1
set SU[EV]=1227897142
set ZU[EV]=1227897141
set AU[EV]=0
set BU[EV]=1227895353
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSpell_Holy_BlessingOfStrength.blp"
set LU[EV]=0
set U1=EV
set EV=EV+1
set SU[EV]=1227897144
set ZU[EV]=1227897143
set AU[EV]=0
set BU[EV]=1227895361
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNAbility_Gouge.blp"
set LU[EV]=0
set V1=EV
set EV=EV+1
set SU[EV]=1227897153
set ZU[EV]=1227897145
set AU[EV]=0
set BU[EV]=1227895362
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_ThrowingAxe_06.blp"
set LU[EV]=0
set X1=EV
set EV=EV+1
set SU[EV]=1227897154
set ZU[EV]=1227897155
set AU[EV]=0
set BU[EV]=1227895363
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNThoriumMelee.blp"
set LU[EV]=0
set A1=EV
set EV=EV+1
set SU[EV]=1227900722
set ZU[EV]=1227900506
set AU[EV]=0
set BU[EV]=1227900728
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"
set LU[EV]=80
set D0=EV
set EV=EV+1
set SU[EV]=1227900726
set ZU[EV]=1227900720
set AU[EV]=0
set BU[EV]=1227900729
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"
set LU[EV]=75
set E0=EV
set EV=EV+1
set SU[EV]=1227897157
set ZU[EV]=1227900505
set AU[EV]=0
set BU[EV]=1227900727
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"
set LU[EV]=70
set J0=EV
set EV=EV+1
set SU[EV]=1227900725
set ZU[EV]=1227900499
set AU[EV]=0
set BU[EV]=1227895364
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"
set LU[EV]=65
set N0=EV
set EV=EV+1
set SU[EV]=1227900723
set ZU[EV]=1227897156
set AU[EV]=0
set BU[EV]=1227900738
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"
set LU[EV]=60
set O0=EV
set EV=EV+1
set SU[EV]=1227900724
set ZU[EV]=1227900721
set AU[EV]=0
set BU[EV]=1227900737
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"
set LU[EV]=55
set R0=EV
set EV=EV+1
set SU[EV]=1227903030
set ZU[EV]=1227903032
set AU[EV]=0
set BU[EV]=1227903031
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"
set LU[EV]=50
set T0=EV
set EV=EV+1
set SU[EV]=1227899224
set ZU[EV]=1227899223
set AU[EV]=0
set BU[EV]=0
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNArcaniteArmor.blp"
set LU[EV]=0
set X0=EV
set EV=EV+1
set SU[EV]=1227897159
set ZU[EV]=1227897158
set AU[EV]=0
set BU[EV]=1227895365
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_ThrowingAxe_02.blp"
set LU[EV]=35
set Y0=EV
set EV=EV+1
set SU[EV]=1227902294
set ZU[EV]=1227902293
set AU[EV]=0
set BU[EV]=1227902295
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_ThrowingAxe_02.blp"
set LU[EV]=50
set B0=EV
set EV=EV+1
set SU[EV]=1227897161
set ZU[EV]=1227897160
set AU[EV]=0
set BU[EV]=1227895366
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNLothars.BLP"
set LU[EV]=28
set C0=EV
set EV=EV+1
set SU[EV]=1227897163
set ZU[EV]=1227897165
set AU[EV]=0
set BU[EV]=1227895111
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_06.blp"
set LU[EV]=40
set F5=EV
set EV=EV+1
set SU[EV]=1227897162
set ZU[EV]=1227897168
set AU[EV]=0
set BU[EV]=1227895367
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_06.blp"
set LU[EV]=36
set G5=EV
set EV=EV+1
set SU[EV]=1227897169
set ZU[EV]=1227897166
set AU[EV]=0
set BU[EV]=1227899971
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_06.blp"
set LU[EV]=32
set J5=EV
set EV=EV+1
set SU[EV]=1227897171
set ZU[EV]=1227897167
set AU[EV]=0
set BU[EV]=1227899972
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_06.blp"
set LU[EV]=28
set M5=EV
set EV=EV+1
set SU[EV]=1227897170
set ZU[EV]=1227897164
set AU[EV]=0
set BU[EV]=1227899955
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_06.blp"
set LU[EV]=24
set N5=EV
set EV=EV+1
set SU[EV]=1227897173
set ZU[EV]=1227897172
set AU[EV]=0
set BU[EV]=1227895368
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNNecromancerAdept.blp"
set LU[EV]=90
set R5=EV
set EV=EV+1
set SU[EV]=1227897174
set ZU[EV]=1227897176
set AU[EV]=0
set BU[EV]=1227895369
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNBookOfTheDead.blp"
set LU[EV]=90
set S5=EV
set EV=EV+1
set SU[EV]=1227897175
set ZU[EV]=1227897177
set AU[EV]=0
set BU[EV]=1227895370
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNNecromancerMaster.blp"
set LU[EV]=90
set T5=EV
set EV=EV+1
set SU[EV]=1227899184
set ZU[EV]=1227897178
set AU[EV]=0
set BU[EV]=1227899471
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNOrb of Water.blp"
set LU[EV]=13
set W5=EV
set EV=EV+1
set SU[EV]=1227901003
set ZU[EV]=1227901002
set AU[EV]=0
set BU[EV]=1227901004
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNOrb of Water.blp"
set LU[EV]=13
set A5=EV
set EV=EV+1
set SU[EV]=1227899186
set ZU[EV]=1227899185
set AU[EV]=0
set BU[EV]=1227899472
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_25.blp"
set LU[EV]=0
set B5=EV
set EV=EV+1
set SU[EV]=1227902025
set ZU[EV]=1227902026
set AU[EV]=0
set BU[EV]=1227902027
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_25.blp"
set LU[EV]=0
set C5=EV
set EV=EV+1
set SU[EV]=1227899188
set ZU[EV]=1227899187
set AU[EV]=0
set BU[EV]=1227899473
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Weapon_Crossbow_10.blp"
set LU[EV]=0
set L5=EV
set EV=EV+1
set SU[EV]=1227899190
set ZU[EV]=1227899189
set AU[EV]=0
set BU[EV]=1227899474
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Weapon_Halberd_10ON.blp"
set LU[EV]=0
set E2=EV
set EV=EV+1
set SU[EV]=1227901752
set ZU[EV]=1227901751
set AU[EV]=0
set BU[EV]=1227901753
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Weapon_Halberd_10OFF.blp"
set LU[EV]=0
set F2=EV
set EV=EV+1
set SU[EV]=1227899191
set ZU[EV]=1227899192
set AU[EV]=0
set BU[EV]=1227899475
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNTransmuteON.blp"
set LU[EV]=0
set H2=EV
set EV=EV+1
set SU[EV]=1227901777
set ZU[EV]=1227901776
set AU[EV]=0
set BU[EV]=1227901778
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNTransmuteOFF.blp"
set LU[EV]=0
set P2=EV
set EV=EV+1
set SU[EV]=1227899201
set ZU[EV]=1227899193
set AU[EV]=0
set BU[EV]=1227899476
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNHeartOfAszune.blp"
set LU[EV]=0
set R2=EV
set EV=EV+1
set SU[EV]=1227899201
set ZU[EV]=1227901772
set BU[EV]=1227901773
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNHeartOfAszune.blp"
set LU[EV]=0
set S2=EV
set EV=EV+1
set SU[EV]=1227899203
set ZU[EV]=1227899202
set AU[EV]=0
set BU[EV]=1227899477
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNHornOfDoom.blp"
set LU[EV]=35
set T2=EV
set EV=EV+1
set SU[EV]=1227899204
set ZU[EV]=1227899205
set AU[EV]=0
set BU[EV]=1227899478
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNIceShard.blp"
set LU[EV]=0
set W2=EV
set EV=EV+1
set SU[EV]=1227899207
set ZU[EV]=1227899206
set AU[EV]=0
set BU[EV]=1227899732
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNIceShard.blp"
set LU[EV]=0
set X2=EV
set EV=EV+1
set SU[EV]=1227899208
set ZU[EV]=1227899209
set AU[EV]=0
set BU[EV]=1227899479
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_ThrowingKnife_04.blp"
set LU[EV]=35
set Z2=EV
set EV=EV+1
set SU[EV]=1227899448
set ZU[EV]=1227899225
set AU[EV]=0
set BU[EV]=1227894850
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set FR4=EV
set EV=EV+1
set SU[EV]=1227899211
set ZU[EV]=1227899210
set AU[EV]=0
set BU[EV]=1227899480
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNHeartOfSearinox.blp"
set LU[EV]=$D2
set D44=EV
set EV=EV+1
set SU[EV]=1227896651
set ZU[EV]=1227899212
set AU[EV]=0
set BU[EV]=1227899481
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_09.blp"
set LU[EV]=35
set D74=EV
set EV=EV+1
set SU[EV]=1227899458
set ZU[EV]=1227899457
set AU[EV]=0
set BU[EV]=1227899482
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNAdvancedUnholyArmor.blp"
set LU[EV]=0
set D84=EV
set EV=EV+1
set SU[EV]=1227903066
set ZU[EV]=1227903280
set AU[EV]=0
set BU[EV]=1227903281
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNCrimsonGuard.blp"
set LU[EV]=60
set EZB=EV
set EV=EV+1
set SU[EV]=1227902021
set ZU[EV]=1227902019
set AU[EV]=0
set BU[EV]=1227902020
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNAdvancedUnholyArmor.blp"
set LU[EV]=0
set D94=EV
set EV=EV+1
set SU[EV]=1227899459
set ZU[EV]=1227899460
set AU[EV]=0
set BU[EV]=1227894851
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNArcaneRing.blp"
set LU[EV]=33
set DD4=EV
set EV=EV+1
set SU[EV]=1227899462
set ZU[EV]=1227899461
set AU[EV]=0
set BU[EV]=1227899696
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNThunderMallet.blp"
set LU[EV]=35
set DE4=EV
set EV=EV+1
set SU[EV]=1227895092
set ZU[EV]=1227895108
set AU[EV]=0
set BU[EV]=0
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNRavenForm.blp"
set LU[EV]=0
set DF4=EV
set EV=EV+1
set SU[EV]=1227899464
set ZU[EV]=1227899463
set AU[EV]=0
set BU[EV]=1227899697
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNCloakOfFlames.blp"
set LU[EV]=0
set DG4=EV
set EV=EV+1
set SU[EV]=1227899465
set ZU[EV]=1227899466
set AU[EV]=0
set BU[EV]=1227899698
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Chest_Chain_14.blp"
set LU[EV]=0
set DH4=EV
set EV=EV+1
set SU[EV]=1227899468
set ZU[EV]=1227899467
set AU[EV]=0
set BU[EV]=1227899699
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Misc_Gem_Bloodstone_02.blp"
set LU[EV]=0
set DI4=EV
set EV=EV+1
set SU[EV]=1227899470
set ZU[EV]=1227899469
set AU[EV]=0
set BU[EV]=1227899700
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNHoodOfCunning.blp"
set LU[EV]=0
set DJ4=EV
set EV=EV+1
set SU[EV]=1227894867
set ZU[EV]=1227894861
set AU[EV]=0
set BU[EV]=1227895107
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNImprovedUnholyStrength.blp"
set LU[EV]=0
set DK4=EV
set EV=EV+1
set SU[EV]=1227894868
set ZU[EV]=1227894865
set AU[EV]=0
set BU[EV]=1227895109
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNUnholyStrength.blp"
set LU[EV]=0
set DM4=EV
set EV=EV+1
set SU[EV]=1227894870
set ZU[EV]=1227894862
set AU[EV]=0
set BU[EV]=1227895110
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNImprovedUnholyStrength.blp"
set LU[EV]=0
set DN4=EV
set EV=EV+1
set SU[EV]=1227894871
set ZU[EV]=1227894866
set AU[EV]=0
set BU[EV]=1227899973
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNUnholyStrength.blp"
set LU[EV]=0
set DO4=EV
set EV=EV+1
set SU[EV]=1227894872
set ZU[EV]=1227894874
set AU[EV]=0
set BU[EV]=1227899718
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNAdvancedMoonArmor.blp"
set LU[EV]=30
set DP4=EV
set EV=EV+1
set SU[EV]=1227894873
set ZU[EV]=1227895088
set AU[EV]=0
set BU[EV]=1227899974
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNAdvancedMoonArmor.blp"
set LU[EV]=0
set DQ4=EV
set EV=EV+1
set SU[EV]=1227895091
set ZU[EV]=1227895090
set AU[EV]=0
set BU[EV]=1227899714
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNStaffOfSilence.blp"
set LU[EV]=18
set DR4=EV
set EV=EV+1
set SU[EV]=1227900747
set ZU[EV]=1227900746
set AU[EV]=0
set BU[EV]=1227900748
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNPhaseBoots.blp"
set LU[EV]=8
set DS4=EV
set EV=EV+1
set SU[EV]=1227900999
set ZU[EV]=1227901001
set AU[EV]=0
set BU[EV]=1227901000
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNForceStaff.blp"
set LU[EV]=25
set DU4=EV
set EV=EV+1
set SU[EV]=1227901232
set ZU[EV]=1227901750
set AU[EV]=0
set BU[EV]=1227901234
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNPipeOfInsight.blp"
set LU[EV]=25
set DV4=EV
set EV=EV+1
set SU[EV]=1227901511
set ZU[EV]=1227901510
set AU[EV]=0
set BU[EV]=1227901512
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNImprovedUnholyArmor.blp"
set LU[EV]=$C
set DW4=EV
set EV=EV+1
set SU[EV]=1227901764
set ZU[EV]=1227901766
set AU[EV]=0
set BU[EV]=1227901765
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNImprovedUnholyArmor.blp"
set LU[EV]=$C
set DX4=EV
set EV=EV+1
set SU[EV]=1227901784
set ZU[EV]=1227901785
set AU[EV]=0
set BU[EV]=1227901786
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNUrnOfKelThuzad.blp"
set LU[EV]=8
set DY4=EV
set EV=EV+1
set SU[EV]=1227902023
set ZU[EV]=1227902022
set AU[EV]=0
set BU[EV]=1227902024
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNUrnOfKelThuzad.blp"
set LU[EV]=0
set DZ4=EV
set EV=EV+1
set SU[EV]=1227902032
set ZU[EV]=1227902028
set AU[EV]=0
set BU[EV]=1227902033
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSoulRing.blp"
set LU[EV]=25
set E54=EV
set EV=EV+1
set SU[EV]=1227902034
set ZU[EV]=1227902036
set AU[EV]=0
set BU[EV]=1227902035
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNGhostBlade.blp"
set LU[EV]=30
set E24=EV
set EV=EV+1
set SU[EV]=1227902282
set ZU[EV]=1227902281
set AU[EV]=0
set BU[EV]=1227902283
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNArcaneBoots.blp"
set LU[EV]=45
set F74=EV
set EV=EV+1
set SU[EV]=1227902513
set ZU[EV]=1227902512
set AU[EV]=0
set BU[EV]=1227902514
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNMedalionOfCourage.blp"
set LU[EV]=7
set M3=EV
set EV=EV+1
set SU[EV]=1227903305
set ZU[EV]=1227903306
set AU[EV]=0
set BU[EV]=1227903307
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSolarCrest.blp"
set LU[EV]=7
set R03=EV
set EV=EV+1
set SU[EV]=1227902532
set ZU[EV]=1227902533
set AU[EV]=0
set BU[EV]=1227902531
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNJanggo.blp"
set LU[EV]=30
set VB=EV
set EV=EV+1
set SU[EV]=1227902540
set ZU[EV]=1227902539
set AU[EV]=0
set BU[EV]=1227902541
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNJanggo.blp"
set LU[EV]=0
set WB=EV
set EV=EV+1
set SU[EV]=1227902770
set ZU[EV]=1227902771
set AU[EV]=0
set BU[EV]=1227902772
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNBoneChimes.blp"
set LU[EV]=20
set N3=EV
set EV=EV+1
set SU[EV]=1227902787
set ZU[EV]=1227902789
set AU[EV]=0
set BU[EV]=1227902788
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNBoneChimes.blp"
set LU[EV]=30
set YB=EV
set EV=EV+1
set SU[EV]=1227902790
set ZU[EV]=1227902791
set AU[EV]=0
set BU[EV]=1227902792
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNTranquilBoots.blp"
set LU[EV]=30
set LB=EV
set EV=EV+1
set SU[EV]=1227902794
set ZU[EV]=1227902793
set AU[EV]=0
set BU[EV]=1227902795
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNTranquilBoots.blp"
set LU[EV]=30
set EC=EV
set EV=EV+1
set SU[EV]=1227902797
set ZU[EV]=1227902796
set AU[EV]=0
set BU[EV]=1227902798
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNWitchDoctorMaster.blp"
set LU[EV]=16
set FC=EV
set EV=EV+1
set SU[EV]=1227902800
set ZU[EV]=1227902799
set AU[EV]=0
set BU[EV]=1227902801
set CU[EV]="ReplaceableTextures\\CommandButtons\\MoonShard.blp"
set LU[EV]=20
set GC=EV
set EV=EV+1
set SU[EV]=1227902805
set ZU[EV]=1227902806
set AU[EV]=0
set BU[EV]=1227902807
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNHalberd.blp"
set LU[EV]=30
set R3=EV
set EV=EV+1
set SU[EV]=1227903289
set ZU[EV]=1227903297
set AU[EV]=0
set BU[EV]=1227903298
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNMagicDragonGun.blp"
set LU[EV]=0
set R00=EV
set EV=EV+1
set SU[EV]=1227903299
set ZU[EV]=1227903300
set AU[EV]=0
set BU[EV]=1227903301
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNMagicDragonGun.blp"
set LU[EV]=0
set R01=EV
set EV=EV+1
set SU[EV]=1227902809
set ZU[EV]=1227902808
set AU[EV]=0
set BU[EV]=1227902810
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNAnnihilator.blp"
set LU[EV]=35
set U3=EV
set EV=EV+1
set SU[EV]='I0TA'
set ZU[EV]='I0TB'
set AU[EV]=0
set BU[EV]='I0TC'
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=0
set Rgg=EV
set EV=EV+1
set SU[EV]=1227903024
set ZU[EV]=1227903025
set AU[EV]=0
set BU[EV]=1227903026
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNRingJadeFalcon.blp"
set LU[EV]=0
set JC=EV
set EV=EV+1
set SU[EV]=1227903027
set ZU[EV]=1227903028
set AU[EV]=0
set BU[EV]=1227903029
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNRingJadeFalcon.blp"
set LU[EV]=0
set NC=EV
set EV=EV+1
set SU[EV]='I0QO'
set ZU[EV]='I0QP'
set AU[EV]=0
set BU[EV]='I0QQ'
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNGuardianGreaves.blp"
set LU[EV]=40
set R06=EV
set EV=EV+1
set SU[EV]='I0QU'
set ZU[EV]='I0QV'
set AU[EV]=0
set BU[EV]='I0QW'
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNHTGZ.blp"
set LU[EV]=0
set R11=EV
set EV=EV+1
set SU[EV]='I0TD'
set ZU[EV]='I0TE'
set AU[EV]=0
set BU[EV]='I0TF'
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNBloodThorn.blp"
set LU[EV]=11
set R7t=EV
set EV=EV+1
set SU[EV]='I0QL'
set ZU[EV]='I0QM'
set AU[EV]=0
set BU[EV]='I0QN'
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNGlimmerCape.blp"
set LU[EV]=16
set R0A=EV
set EV=EV+1
set SU[EV]=1227903576
set ZU[EV]=1227903577
set AU[EV]=0
set BU[EV]=0
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNScrollUber.blp"
set LU[EV]=15
set YC=EV
set EV=EV+1
set SU[EV]=0
set ZU[EV]=0
set AU[EV]=1747989063
set CU[EV]=""
set LU[EV]=0
set EV=EV+1
set SU[EV]=0
set ZU[EV]=0
set AU[EV]=1747990582
set CU[EV]=""
set LU[EV]=0
set EV=EV+1
set SU[EV]=1227896140
set ZU[EV]=1227896146
set AU[EV]=1747989064
set BU[EV]=1227899987
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set DB4=EV
set EV=EV+1
set SU[EV]='I0QR'
set ZU[EV]='I0QS'
set AU[EV]='h0ES'
set BU[EV]='I0QT'
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set R05=EV
set EV=EV+1
set SU[EV]='I0QX'
set ZU[EV]='I0QY'
set AU[EV]='h0ET'
set BU[EV]='I0QZ'
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set R10=EV
set EV=EV+1
set SU[EV]='I0TG'
set ZU[EV]='I0TH'
set AU[EV]='h0F3'
set BU[EV]='I0TI'
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set R7u=EV
set EV=EV+1
set SU[EV]=1227896141
set ZU[EV]=1227896147
set AU[EV]=1747989065
set BU[EV]=1227899988
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set DC4=EV
set EV=EV+1
set SU[EV]=0
set ZU[EV]=0
set AU[EV]=1747989066
set CU[EV]=""
set LU[EV]=0
set EV=EV+1
set SU[EV]=1227896143
set ZU[EV]=1227896148
set AU[EV]=1747989067
set BU[EV]=1227899989
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set D34=EV
set EV=EV+1
set AU[EV]=1747988788
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set D64=EV
set EV=EV+1
set SU[EV]=1227896144
set ZU[EV]=1227896149
set AU[EV]=1747989068
set BU[EV]=1227899991
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set DL4=EV
set EV=EV+1
set SU[EV]=0
set ZU[EV]=0
set AU[EV]=1747989069
set CU[EV]=""
set LU[EV]=0
set EV=EV+1
set SU[EV]=1227896139
set ZU[EV]=1227896150
set AU[EV]=1747989070
set BU[EV]=1227899992
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set D04=EV
set EV=EV+1
set SU[EV]=1227896142
set ZU[EV]=1227896151
set AU[EV]=1747989071
set BU[EV]=1227899993
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set D54=EV
set EV=EV+1
set SU[EV]=1227896145
set ZU[EV]=1227896152
set AU[EV]=1747989072
set BU[EV]=1227899994
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set D24=EV
set EV=EV+1
set SU[EV]=1227896398
set ZU[EV]=1227896399
set AU[EV]=1747989073
set BU[EV]=1227900208
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set D_4=EV
set EV=EV+1
set SU[EV]=1227896401
set ZU[EV]=1227896400
set AU[EV]=1747989074
set BU[EV]=1227900209
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set E44=EV
set EV=EV+1
set SU[EV]=1227903057
set ZU[EV]=1227903058
set AU[EV]=1747993931
set BU[EV]=1227903059
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set EZZ=EV
set EV=EV+1
set SU[EV]=1227903063
set ZU[EV]=1227903064
set AU[EV]=1747993933
set BU[EV]=1227903065
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set EZA=EV
set EV=EV+1
set SU[EV]=1227903060
set ZU[EV]=1227903061
set AU[EV]=1747993932
set BU[EV]=1227903062
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNEnchantedMango.blp"
set LU[EV]=0
set EZY=EV
set EV=EV+1
set SU[EV]=1227903302
set ZU[EV]=1227903303
set AU[EV]=1747993936
set BU[EV]=1227903304
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNFaerieFire.blp"
set LU[EV]=5
set R02=EV
set EV=EV+1
set SU[EV]=1227896402
set ZU[EV]=1227896403
set AU[EV]=1747989075
set BU[EV]=1227900210
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set E74=EV
set EV=EV+1
set SU[EV]=0
set ZU[EV]=0
set AU[EV]=1747989076
set CU[EV]=""
set LU[EV]=0
set EV=EV+1
set SU[EV]=1227896407
set ZU[EV]=1227896406
set AU[EV]=1747989077
set BU[EV]=1227900212
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set E84=EV
set EV=EV+1
set SU[EV]=1227896408
set ZU[EV]=1227896409
set AU[EV]=1747989078
set BU[EV]=1227900213
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set E94=EV
set EV=EV+1
set SU[EV]=0
set ZU[EV]=0
set AU[EV]=1747989079
set CU[EV]=""
set LU[EV]=0
set EV=EV+1
set SU[EV]=1227896624
set ZU[EV]=1227896410
set AU[EV]=1747989080
set BU[EV]=1227900214
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set ED4=EV
set EV=EV+1
set SU[EV]=1227896625
set ZU[EV]=1227896626
set AU[EV]=1747989081
set BU[EV]=1227900215
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set EE4=EV
set EV=EV+1
set SU[EV]=1227903282
set ZU[EV]=1227903283
set AU[EV]=1747989332
set BU[EV]=1227903284
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set EEO=EV
set EV=EV+1
set SU[EV]=0
set ZU[EV]=0
set AU[EV]=1747989082
set CU[EV]=""
set LU[EV]=0
set EV=EV+1
set SU[EV]=1227896628
set ZU[EV]=1227896627
set AU[EV]=1747989296
set BU[EV]=1227900216
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set EF4=EV
set EV=EV+1
set AU[EV]=1747989297
set CU[EV]=""
set LU[EV]=0
set EG4=EV
set EV=EV+1
set SU[EV]=1227896630
set ZU[EV]=1227896662
set AU[EV]=1747993946
set BU[EV]=1227900225
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNBlightStone.blp"
set LU[EV]=0
set EH4=EV
set EV=EV+1
set SU[EV]=0
set ZU[EV]=0
set AU[EV]=1747989299
set CU[EV]=""
set LU[EV]=0
set EV=EV+1
set SU[EV]=1227896631
set ZU[EV]=1227896663
set AU[EV]=1747989300
set BU[EV]=1227900226
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set EI4=EV
set EV=EV+1
set SU[EV]=1227896632
set ZU[EV]=1227896664
set AU[EV]=1747989301
set BU[EV]=1227900227
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set EJ4=EV
set EV=EV+1
set SU[EV]=1227896633
set ZU[EV]=1227896665
set AU[EV]=1747989302
set BU[EV]=1227900228
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set EK4=EV
set EV=EV+1
set SU[EV]=1227896641
set ZU[EV]=1227896666
set AU[EV]=1747993921
set BU[EV]=1227900229
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set EM4=EV
set EV=EV+1
set SU[EV]='I0SK'
set ZU[EV]='I0SL'
set AU[EV]='h0F0'
set BU[EV]='I0SM'
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSTOW.blp"
set LU[EV]=0
set R35=EV
set EV=EV+1
set SU[EV]='I0SN'
set ZU[EV]='I0SO'
set AU[EV]='h0F1'
set BU[EV]='I0SP'
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNNOK.blp"
set LU[EV]=0
set R41=EV
set EV=EV+1
set SU[EV]=1227896642
set ZU[EV]=1227896880
set AU[EV]=1747989304
set BU[EV]=1227900230
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set EN4=EV
set EV=EV+1
set SU[EV]=1227896643
set ZU[EV]=1227896881
set AU[EV]=1747989305
set BU[EV]=1227900231
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set EO4=EV
set EV=EV+1
set SU[EV]=1227896644
set ZU[EV]=1227896882
set AU[EV]=1747989313
set BU[EV]=1227900232
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set EP4=EV
set EV=EV+1
set SU[EV]=0
set ZU[EV]=0
set AU[EV]=1747989315
set CU[EV]=""
set LU[EV]=0
set EV=EV+1
set SU[EV]=1227896645
set ZU[EV]=1227896883
set AU[EV]=1747989316
set BU[EV]=1227900233
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set EQ4=EV
set EV=EV+1
set SU[EV]=0
set ZU[EV]=0
set AU[EV]=1747989317
set CU[EV]=""
set LU[EV]=0
set EV=EV+1
set SU[EV]=1227896647
set ZU[EV]=1227896646
set AU[EV]=1747989318
set BU[EV]=1227900234
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set ER4=EV
set EV=EV+1
set SU[EV]=1227896648
set ZU[EV]=1227896884
set AU[EV]=1747989319
set BU[EV]=1227900235
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set ES4=EV
set EV=EV+1
set SU[EV]=1227896655
set ZU[EV]=1227896885
set AU[EV]=1747989320
set BU[EV]=1227900236
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set ET4=EV
set EV=EV+1
set AU[EV]=1747989322
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set EU4=EV
set EV=EV+1
set SU[EV]=1227896650
set ZU[EV]=1227896888
set AU[EV]=1747989324
set BU[EV]=1227900239
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set EV4=EV
set EV=EV+1
set SU[EV]=0
set ZU[EV]=0
set AU[EV]=1747989325
set CU[EV]=""
set LU[EV]=0
set EV=EV+1
set SU[EV]=0
set ZU[EV]=0
set AU[EV]=1747989326
set CU[EV]=""
set LU[EV]=0
set EV=EV+1
set SU[EV]=1227896653
set ZU[EV]=1227896889
set AU[EV]=1747989327
set BU[EV]=1227900240
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set EW4=EV
set EV=EV+1
set SU[EV]=1227896656
set ZU[EV]=1227896897
set AU[EV]=1747989329
set BU[EV]=1227900241
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set EX4=EV
set EV=EV+1
set SU[EV]=1227896657
set ZU[EV]=1227896898
set AU[EV]=1747989330
set BU[EV]=1227900242
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set EY4=EV
set EV=EV+1
set SU[EV]=1227896658
set ZU[EV]=1227896899
set AU[EV]=1747989331
set BU[EV]=1227900243
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set EZ4=EV
set EV=EV+1
set SU[EV]=0
set ZU[EV]=0
set AU[EV]=1747989332
set CU[EV]=""
set LU[EV]=0
set EV=EV+1
set SU[EV]=0
set ZU[EV]=0
set AU[EV]=1747989333
set CU[EV]=""
set LU[EV]=0
set EV=EV+1
set SU[EV]=1227896659
set ZU[EV]=1227896900
set AU[EV]=1747989334
set BU[EV]=1227900244
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set EA4=EV
set EV=EV+1
set SU[EV]=1227896660
set ZU[EV]=1227896901
set AU[EV]=1747989335
set BU[EV]=1227900245
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set EB4=EV
set EV=EV+1
set SU[EV]=0
set ZU[EV]=0
set AU[EV]=1747990329
set CU[EV]=""
set LU[EV]=0
set EV=EV+1
set SU[EV]=1227900984
set ZU[EV]=1227900983
set AU[EV]=17479903550
set BU[EV]=1227900985
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set EC4=EV
set EV=EV+1
set SU[EV]=1227900996
set ZU[EV]=1227900998
set AU[EV]=1747990356
set BU[EV]=1227900997
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set E34=EV
set EV=EV+1
set SU[EV]=1227903044
set ZU[EV]=1227903045
set AU[EV]=0
set BU[EV]=1227903046
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set FH4=EV
set EV=EV+1
set SU[EV]=1227901016
set ZU[EV]=1227901018
set AU[EV]=1747990360
set BU[EV]=1227901017
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set E64=EV
set EV=EV+1
set SU[EV]=1227896652
set ZU[EV]=1227901774
set AU[EV]=1747989328
set BU[EV]=1227901775
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set EL4=EV
set EV=EV+1
set SU[EV]=1227901783
set ZU[EV]=1227901782
set AU[EV]=1747993153
set BU[EV]=1227901781
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set E14=EV
set EV=EV+1
set SU[EV]=1227902029
set ZU[EV]=1227902030
set AU[EV]=1747993169
set BU[EV]=1227902031
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set E04=EV
set EV=EV+1
set SU[EV]=1227902521
set ZU[EV]=1227902529
set AU[EV]=1747993649
set BU[EV]=1227902530
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set F84=EV
set EV=EV+1
set SU[EV]=1227902536
set ZU[EV]=1227902537
set AU[EV]=0
set BU[EV]=1227902538
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set F94=EV
set EV=EV+1
set SU[EV]=1227902773
set ZU[EV]=1227902774
set AU[EV]=1747993668
set BU[EV]=1227902775
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set FD4=EV
set EV=EV+1
set SU[EV]=1227902786
set ZU[EV]=1227902785
set AU[EV]=1747989336
set BU[EV]=1227902777
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
set LU[EV]=0
set FE4=EV
set EV=EV+1
set SU[EV]=0
set ZU[EV]=0
set AU[EV]=1747993684
set CU[EV]=""
set LU[EV]=0
set FF4=EV
set EV=EV+1
set SU[EV]=0
set ZU[EV]=0
set AU[EV]=1747993685
set CU[EV]=""
set LU[EV]=0
set FG4=EV
set EV=EV+1
set SU[EV]=0
set ZU[EV]=0
set AU[EV]=1747993913
set CU[EV]=""
set LU[EV]=0
set EV=EV+1
set SU[EV]=0
set ZU[EV]=0
set AU[EV]=1747993921
set CU[EV]=""
set LU[EV]=0
set EV=EV+1
set SU[EV]=0
set ZU[EV]=0
set AU[EV]=1747993923
set CU[EV]=""
set LU[EV]=0
set t=CreateTrigger()
call TriggerAddCondition(t,Condition(function FB9))
set H04=t
set t=null
set FQ4=FQ4+1
set FJ4[FQ4]=ZX
set FK4[FQ4]=RZ
set FP4[FQ4]=Y3
set FQ4=FQ4+1
set FJ4[FQ4]=GY
set FK4[FQ4]=QW
set FM4[FQ4]=DB4
set FP4[FQ4]=Z3
set FQ4=FQ4+1
set FJ4[FQ4]=UV
set FK4[FQ4]=QW
set FM4[FQ4]=DC4
set FP4[FQ4]=B3
set FQ4=FQ4+1
set FJ4[FQ4]=AX
set FK4[FQ4]=ZY
set FP4[FQ4]=C3
set FQ4=FQ4+1
set FJ4[FQ4]=FV
set FK4[FQ4]=D34
set FP4[FQ4]=F6
set FQ4=FQ4+1
set FJ4[FQ4]=F6
set FK4[FQ4]=D34
set FP4[FQ4]=FF6
set FQ4=FQ4+1
set FJ4[FQ4]=FV
set FK4[FQ4]=MV
set FM4[FQ4]=JV
set FP4[FQ4]=G6
set FQ4=FQ4+1
set FJ4[FQ4]=FV
set FK4[FQ4]=OV
set FM4[FQ4]=JV
set FP4[FQ4]=H6
set FQ4=FQ4+1
set FJ4[FQ4]=FV
set FK4[FQ4]=HY
set FM4[FQ4]=JV
set FP4[FQ4]=N6
set FQ4=FQ4+1
set FJ4[FQ4]=JV
set FK4[FQ4]=DL4
set FP4[FQ4]=S6
set FQ4=FQ4+1
set FJ4[FQ4]=MV
set FK4[FQ4]=NX
set FM4[FQ4]=MV
set FP4[FQ4]=R00
set FQ4=FQ4+1
set FJ4[FQ4]=YX
set FK4[FQ4]=HY
set FM4[FQ4]=ZY
set FP4[FQ4]=W6
set FQ4=FQ4+1
set FJ4[FQ4]=NV
set FK4[FQ4]=LV
set FM4[FQ4]=D04
set FP4[FQ4]=A6
set FQ4=FQ4+1
set FJ4[FQ4]=NV
set FK4[FQ4]=UY
set FM4[FQ4]=D54
set FP4[FQ4]=DL
set FQ4=FQ4+1
set FJ4[FQ4]=NV
set FK4[FQ4]=UW
set FM4[FQ4]=D24
set FP4[FQ4]=HL
set FQ4=FQ4+1
set FJ4[FQ4]=QV
set FK4[FQ4]=MV
set FM4[FQ4]=D_4
set FP4[FQ4]=OL
set FQ4=FQ4+1
set FJ4[FQ4]=NX
set FK4[FQ4]=OV
set FM4[FQ4]=E44
set FP4[FQ4]=RL
set FQ4=FQ4+1
set FJ4[FQ4]=NZ
set FK4[FQ4]=C0
set FM4[FQ4]=EZZ
set FP4[FQ4]=RLL
set FQ4=FQ4+1
set FJ4[FQ4]=UZ
set FK4[FQ4]=OV
set FM4[FQ4]=E74
set FP4[FQ4]=WL
set FQ4=FQ4+1
set FJ4[FQ4]=TV
set FK4[FQ4]=UV
set FM4[FQ4]=HY
set FP4[FQ4]=AL
set FQ4=FQ4+1
set FJ4[FQ4]=ZW
set FK4[FQ4]=JV
set FM4[FQ4]=E84
set FP4[FQ4]=LL
set FQ4=FQ4+1
set FJ4[FQ4]=QV
set FK4[FQ4]=QV
set FM4[FQ4]=HY
set FN4[FQ4]=E94
set FP4[FQ4]=D1
set FQ4=FQ4+1
set FJ4[FQ4]=D1
set FK4[FQ4]=E94
set FP4[FQ4]=E1
set FQ4=FQ4+1
set FJ4[FQ4]=F1
set FK4[FQ4]=E94
set FP4[FQ4]=D1
set FQ4=FQ4+1
set FJ4[FQ4]=H1
set FK4[FQ4]=E94
set FP4[FQ4]=E1
set FQ4=FQ4+1
set FJ4[FQ4]=NW
set FK4[FQ4]=VW
set FP4[FQ4]=J1
set FQ4=FQ4+1
set FJ4[FQ4]=VW
set FK4[FQ4]=ED4
set FP4[FQ4]=P1
set FQ4=FQ4+1
set FJ4[FQ4]=RZ
set FK4[FQ4]=DZ
set FM4[FQ4]=R35
set FN4[FQ4]=EE4
set FP4[FQ4]=Q1
set FQ4=FQ4+1
set FJ4[FQ4]=WX
set FK4[FQ4]=CV
set FM4[FQ4]=OZ
set FP4[FQ4]=R1
set FQ4=FQ4+1
set FJ4[FQ4]=R1
set FK4[FQ4]=GX
set FP4[FQ4]=R1Q
set FQ4=FQ4+1
set FJ4[FQ4]=Z3
set FK4[FQ4]=B3
set FM4[FQ4]=EF4
set FP4[FQ4]=T1
set FQ4=FQ4+1
set FJ4[FQ4]=RL
set FK4[FQ4]=OL
set FP4[FQ4]=U1
set FQ4=FQ4+1
set FJ4[FQ4]=ZW
set FK4[FQ4]=ZW
set FM4[FQ4]=EH4
set FP4[FQ4]=V1
set FQ4=FQ4+1
set FJ4[FQ4]=Y3
set FK4[FQ4]=TV
set FM4[FQ4]=XV
set FN4[FQ4]=BA
set FP4[FQ4]=X1
set FQ4=FQ4+1
set FJ4[FQ4]=Y3
set FK4[FQ4]=TV
set FM4[FQ4]=XV
set FN4[FQ4]=GB
set FP4[FQ4]=X1
set FQ4=FQ4+1
set FJ4[FQ4]=SV
set FK4[FQ4]=TV
set FM4[FQ4]=EI4
set FP4[FQ4]=A1
set FQ4=FQ4+1
set FJ4[FQ4]=ZW
set FK4[FQ4]=NX
set FM4[FQ4]=EJ4
set FP4[FQ4]=D0
set FQ4=FQ4+1
set FK4[FQ4]=R0
set FM4[FQ4]=EJ4
set FP4[FQ4]=D0
set FQ4=FQ4+1
set FJ4[FQ4]=OL
set FK4[FQ4]=NZ
set FM4[FQ4]=EK4
set FP4[FQ4]=B0
set FQ4=FQ4+1
set FJ4[FQ4]=XV
set FK4[FQ4]=W3
set FP4[FQ4]=C0
set FQ4=FQ4+1
set FJ4[FQ4]=DZ
set FK4[FQ4]=HL
set FM4[FQ4]=EN4
set FP4[FQ4]=F5
set FQ4=FQ4+1
set FJ4[FQ4]=F5
set FK4[FQ4]=EN4
set FP4[FQ4]=G5
set FQ4=FQ4+1
set FJ4[FQ4]=G5
set FK4[FQ4]=EN4
set FP4[FQ4]=J5
set FQ4=FQ4+1
set FJ4[FQ4]=J5
set FK4[FQ4]=EN4
set FP4[FQ4]=M5
set FQ4=FQ4+1
set FJ4[FQ4]=M5
set FK4[FQ4]=EN4
set FP4[FQ4]=N5
set FQ4=FQ4+1
set FJ4[FQ4]=DZ
set FK4[FQ4]=OV
set FM4[FQ4]=EO4
set FP4[FQ4]=R5
set FQ4=FQ4+1
set FJ4[FQ4]=R5
set FK4[FQ4]=EO4
set FP4[FQ4]=S5
set FQ4=FQ4+1
set FJ4[FQ4]=S5
set FK4[FQ4]=EO4
set FP4[FQ4]=T5
set FQ4=FQ4+1
set FJ4[FQ4]=NZ
set FK4[FQ4]=Y3
set FM4[FQ4]=EP4
set FP4[FQ4]=W5
set FQ4=FQ4+1
set FJ4[FQ4]=AV
set FK4[FQ4]=SY
set FP4[FQ4]=B5
set FQ4=FQ4+1
set FJ4[FQ4]=A1
set FK4[FQ4]=AV
set FM4[FQ4]=EQ4
set FP4[FQ4]=L5
set FQ4=FQ4+1
set FJ4[FQ4]=AV
set FK4[FQ4]=UZ
set FM4[FQ4]=UZ
set FP4[FQ4]=E2
set FQ4=FQ4+1
set FJ4[FQ4]=SY
set FK4[FQ4]=ER4
set FP4[FQ4]=H2
set FQ4=FQ4+1
set FJ4[FQ4]=YW
set FK4[FQ4]=OZ
set FM4[FQ4]=ES4
set FP4[FQ4]=R2
set FQ4=FQ4+1
set FJ4[FQ4]=YW
set FK4[FQ4]=J1
set FM4[FQ4]=ET4
set FP4[FQ4]=T2
set FQ4=FQ4+1
set FJ4[FQ4]=YW
set FK4[FQ4]=O1
set FM4[FQ4]=ET4
set FP4[FQ4]=T2
set FQ4=FQ4+1
set FJ4[FQ4]=NZ
set FK4[FQ4]=NZ
set FM4[FQ4]=WX
set FN4[FQ4]=E_4
set FP4[FQ4]=W2
set FQ4=FQ4+1
set FJ4[FQ4]=NZ
set FK4[FQ4]=NZ
set FM4[FQ4]=WX
set FN4[FQ4]=F44
set FP4[FQ4]=W2
set FQ4=FQ4+1
set FJ4[FQ4]=BV
set FK4[FQ4]=YX
set FM4[FQ4]=JB
set FP4[FQ4]=Z2
set FQ4=FQ4+1
set FJ4[FQ4]=ZY
set FK4[FQ4]=UV
set FM4[FQ4]=EH4
set FP4[FQ4]=M3
set FQ4=FQ4+1
set FJ4[FQ4]=QV
set FK4[FQ4]=NX
set FM4[FQ4]=WX
set FN4[FQ4]=DZ
set FP4[FQ4]=FR4
set FQ4=FQ4+1
set FJ4[FQ4]=Y3
set FK4[FQ4]=Y3
set FM4[FQ4]=EV4
set FP4[FQ4]=D44
set FQ4=FQ4+1
set FJ4[FQ4]=NZ
set FK4[FQ4]=GX
set FM4[FQ4]=RZ
set FP4[FQ4]=D74
set FQ4=FQ4+1
set FJ4[FQ4]=OZ
set FK4[FQ4]=ZX
set FM4[FQ4]=EZ
set FP4[FQ4]=D84
set FQ4=FQ4+1
set FJ4[FQ4]=B3
set FK4[FQ4]=D84
set FM4[FQ4]=EZA
set FP4[FQ4]=EZB
set FQ4=FQ4+1
set FJ4[FQ4]=OZ
set FK4[FQ4]=ZX
set FM4[FQ4]=HZ
set FP4[FQ4]=D94
set FQ4=FQ4+1
set FJ4[FQ4]=B3
set FK4[FQ4]=D94
set FM4[FQ4]=EZA
set FP4[FQ4]=EZB
set FQ4=FQ4+1
set FJ4[FQ4]=CV
set FK4[FQ4]=AX
set FM4[FQ4]=EW4
set FP4[FQ4]=DD4
set FQ4=FQ4+1
set FJ4[FQ4]=OW
set FK4[FQ4]=LL
set FM4[FQ4]=EL4
set FP4[FQ4]=DE4
set FQ4=FQ4+1
set FJ4[FQ4]=T1
set FK4[FQ4]=F74
set FM4[FQ4]=R05
set FP4[FQ4]=R06
set FQ4=FQ4+1
set FJ4[FQ4]=AX
set FK4[FQ4]=GB
set FM4[FQ4]=R10
set FP4[FQ4]=R11
set FQ4=FQ4+1
set FJ4[FQ4]=A1
set FK4[FQ4]=DR4
set FM4[FQ4]=R7u
set FP4[FQ4]=R7t
set FQ4=FQ4+1
set FJ4[FQ4]=AX
set FK4[FQ4]=BA
set FM4[FQ4]=R10
set FP4[FQ4]=R11
set FQ4=FQ4+1
set FJ4[FQ4]=W3
set FK4[FQ4]=RX
set FP4[FQ4]=R0A
set FQ4=FQ4+1
set FJ4[FQ4]=ZC
set FM4[FQ4]=EX4
set FP4[FQ4]=DF4
set FQ4=FQ4+1
set FJ4[FQ4]=M3
set FM4[FQ4]=JB
set FP4[FQ4]=R03
set FQ4=FQ4+1
set FJ4[FQ4]=GY
set FK4[FQ4]=C3
set FM4[FQ4]=VW
set FN4[FQ4]=EY4
set FP4[FQ4]=DG4
set FQ4=FQ4+1
set FJ4[FQ4]=GY
set FK4[FQ4]=E6
set FM4[FQ4]=VW
set FN4[FQ4]=EY4
set FP4[FQ4]=DG4
set FQ4=FQ4+1
set FJ4[FQ4]=OW
set FK4[FQ4]=SX
set FM4[FQ4]=UV
set FN4[FQ4]=EZ4
set FP4[FQ4]=DH4
set FQ4=FQ4+1
set FJ4[FQ4]=R1
set FK4[FQ4]=E54
set FM4[FQ4]=EEO
set FP4[FQ4]=DI4
set FQ4=FQ4+1
set FJ4[FQ4]=GY
set FK4[FQ4]=ZX
set FM4[FQ4]=RX
set FP4[FQ4]=DJ4
set FQ4=FQ4+1
set FJ4[FQ4]=JV
set FK4[FQ4]=NW
set FM4[FQ4]=SV
set FN4[FQ4]=EA4
set FP4[FQ4]=DM4
set FQ4=FQ4+1
set FJ4[FQ4]=GX
set FK4[FQ4]=SX
set FM4[FQ4]=EB4
set FP4[FQ4]=DP4
set FQ4=FQ4+1
set FJ4[FQ4]=W6
set FK4[FQ4]=W6
set FM4[FQ4]=FE4
set FP4[FQ4]=DR4
set FQ4=FQ4+1
set FJ4[FQ4]=FV
set FK4[FQ4]=SV
set FM4[FQ4]=SV
set FP4[FQ4]=DS4
set FQ4=FQ4+1
set FJ4[FQ4]=ZA
set FK4[FQ4]=QW
set FM4[FQ4]=QW
set FN4[FQ4]=NV
set FP4[FQ4]=DT4
set FQ4=FQ4+1
set FJ4[FQ4]=DZ
set FK4[FQ4]=GY
set FM4[FQ4]=E34
set FP4[FQ4]=DU4
set FQ4=FQ4+1
set FJ4[FQ4]=DJ4
set FK4[FQ4]=Z3
set FM4[FQ4]=E64
set FP4[FQ4]=DV4
set FQ4=FQ4+1
set FJ4[FQ4]=EZ
set FK4[FQ4]=UY
set FM4[FQ4]=UY
set FP4[FQ4]=DW4
set FQ4=FQ4+1
set FJ4[FQ4]=HZ
set FK4[FQ4]=UY
set FM4[FQ4]=UY
set FP4[FQ4]=DW4
set FQ4=FQ4+1
set FJ4[FQ4]=ZY
set FK4[FQ4]=LV
set FM4[FQ4]=LV
set FN4[FQ4]=E14
set FP4[FQ4]=DY4
set FQ4=FQ4+1
set FJ4[FQ4]=ZY
set FK4[FQ4]=GY
set FM4[FQ4]=E04
set FP4[FQ4]=E54
set FQ4=FQ4+1
set FJ4[FQ4]=BV
set FK4[FQ4]=DA4
set FP4[FQ4]=E24
set FQ4=FQ4+1
set FJ4[FQ4]=FV
set FK4[FQ4]=CV
set FP4[FQ4]=F74
set FQ4=FQ4+1
set FJ4[FQ4]=R35
set FK4[FQ4]=A6
set FM4[FQ4]=GY
set FN4[FQ4]=F84
set FP4[FQ4]=VB
set FQ4=FQ4+1
set FJ4[FQ4]=VB
set FK4[FQ4]=F84
set FP4[FQ4]=VB
set FQ4=FQ4+1
set FJ4[FQ4]=WB
set FK4[FQ4]=F84
set FP4[FQ4]=VB
set FQ4=FQ4+1
set FJ4[FQ4]=NW
set FK4[FQ4]=HL
set FM4[FQ4]=FD4
set FP4[FQ4]=N3
set FQ4=FQ4+1
set FJ4[FQ4]=FV
set FK4[FQ4]=AX
set FM4[FQ4]=GY
set FP4[FQ4]=LB
set FQ4=FQ4+1
set FJ4[FQ4]=DZ
set FK4[FQ4]=DZ
set FM4[FQ4]=OZ
set FP4[FQ4]=FC
set FQ4=FQ4+1
set FJ4[FQ4]=RL
set FK4[FQ4]=JB
set FP4[FQ4]=R3
set FQ4=FQ4+1
set FJ4[FQ4]=DA4
set FK4[FQ4]=DA4
set FM4[FQ4]=WX
set FP4[FQ4]=Rgg
set FQ4=FQ4+1
set FJ4[FQ4]=WL
set FK4[FQ4]=D94
set FM4[FQ4]=EM4
set FP4[FQ4]=U3
set FQ4=FQ4+1
set FJ4[FQ4]=ZL
set FK4[FQ4]=D94
set FM4[FQ4]=EM4
set FP4[FQ4]=U3
set FQ4=FQ4+1
set FJ4[FQ4]=WL
set FK4[FQ4]=D84
set FM4[FQ4]=EM4
set FP4[FQ4]=U3
set FQ4=FQ4+1
set FJ4[FQ4]=ZL
set FK4[FQ4]=D84
set FM4[FQ4]=EM4
set FP4[FQ4]=U3
set FQ4=FQ4+1
set FJ4[FQ4]=OW
set FK4[FQ4]=OW
set FP4[FQ4]=GC
set FQ4=FQ4+1
set FJ4[FQ4]=DL
set FK4[FQ4]=C3
set FP4[FQ4]=JC
set FQ4=FQ4+1
set FJ4[FQ4]=DL
set FK4[FQ4]=E6
set FP4[FQ4]=NC
set EV=EV+1
set SU[EV]=1227899226
set ZU[EV]=1227895089
set AU[EV]=0
set BU[EV]=1227900249
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set FS4=EV
set EV=EV+1
set SU[EV]=1227894854
set ZU[EV]=1227894852
set AU[EV]=0
set BU[EV]=1227900250
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set FT4=EV
set EV=EV+1
set SU[EV]=1227895096
set ZU[EV]=1227894841
set AU[EV]=0
set BU[EV]=1227900464
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set FU4=EV
set EV=EV+1
set SU[EV]=1227895097
set ZU[EV]=1227894837
set AU[EV]=0
set BU[EV]=1227900470
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set FV4=EV
set EV=EV+1
set SU[EV]=1227895105
set ZU[EV]=1227894855
set AU[EV]=0
set BU[EV]=1227900465
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set FW4=EV
set EV=EV+1
set SU[EV]=1227895106
set ZU[EV]=1227894836
set AU[EV]=0
set BU[EV]=1227900466
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set FX4=EV
set EV=EV+1
set SU[EV]=1227895112
set ZU[EV]=1227894835
set AU[EV]=0
set BU[EV]=1227900467
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set FY4=EV
set EV=EV+1
set SU[EV]=1227895113
set ZU[EV]=1227894834
set AU[EV]=0
set BU[EV]=1227900469
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set FZ4=EV
set EV=EV+1
set SU[EV]=1227895371
set ZU[EV]=1227894833
set AU[EV]=0
set BU[EV]=1227900468
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set FA4=EV
set EV=EV+1
set SU[EV]=1227895372
set ZU[EV]=1227894857
set AU[EV]=0
set BU[EV]=1227900485
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set FB4=EV
set EV=EV+1
set SU[EV]=1227899442
set ZU[EV]=1227894856
set AU[EV]=0
set BU[EV]=1227900473
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set F34=EV
set EV=EV+1
set SU[EV]=1227899443
set ZU[EV]=1227894864
set AU[EV]=0
set BU[EV]=1227900481
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set F64=EV
set EV=EV+1
set SU[EV]=1227899444
set ZU[EV]=1227894869
set AU[EV]=0
set BU[EV]=1227900471
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set FL4=EV
set EV=EV+1
set SU[EV]=1227899447
set ZU[EV]=1227894832
set AU[EV]=0
set BU[EV]=1227900484
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set F14=EV
set EV=EV+1
set SU[EV]=1227899446
set ZU[EV]=1227895094
set AU[EV]=0
set BU[EV]=1227900483
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set F04=EV
set EV=EV+1
set SU[EV]=1227899445
set ZU[EV]=1227895095
set AU[EV]=0
set BU[EV]=1227900482
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set F54=EV
set EV=EV+1
set SU[EV]=1227899449
set ZU[EV]=1227894863
set AU[EV]=0
set BU[EV]=1227900472
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set F24=EV
set EV=EV+1
set SU[EV]=1227901493
set ZU[EV]=1227901268
set AU[EV]=0
set BU[EV]=1227901258
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set F_4=EV
set EV=EV+1
set SU[EV]=1227901270
set ZU[EV]=1227901269
set AU[EV]=0
set BU[EV]=1227901241
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set G44=EV
set EV=EV+1
set SU[EV]=1227901271
set ZU[EV]=1227901267
set AU[EV]=0
set BU[EV]=1227901257
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set G74=EV
set EV=EV+1
set SU[EV]=1227901272
set ZU[EV]=1227901266
set AU[EV]=0
set BU[EV]=1227901249
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set G84=EV
set EV=EV+1
set SU[EV]=1227901273
set ZU[EV]=1227901265
set AU[EV]=0
set BU[EV]=1227901256
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set G94=EV
set EV=EV+1
set SU[EV]=1227901274
set ZU[EV]=1227901259
set AU[EV]=0
set BU[EV]=1227901255
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set GD4=EV
set EV=EV+1
set SU[EV]=1227901488
set ZU[EV]=1227901260
set AU[EV]=0
set BU[EV]=1227901254
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set GE4=EV
set EV=EV+1
set SU[EV]=1227901489
set ZU[EV]=1227901261
set AU[EV]=0
set BU[EV]=1227901253
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set GG4=EV
set EV=EV+1
set SU[EV]=1227901490
set ZU[EV]=1227901264
set AU[EV]=0
set BU[EV]=1227901252
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set GH4=EV
set EV=EV+1
set SU[EV]=1227901491
set ZU[EV]=1227901263
set AU[EV]=0
set BU[EV]=1227901251
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set GI4=EV
set EV=EV+1
set SU[EV]=1227901492
set ZU[EV]=1227901262
set AU[EV]=0
set BU[EV]=1227901250
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set GJ4=EV
set EV=EV+1
set SU[EV]=1227901238
set ZU[EV]=1227901239
set AU[EV]=0
set BU[EV]=1227901240
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set GK4=EV
set EV=EV+1
set SU[EV]=1227901530
set ZU[EV]=1227901523
set AU[EV]=0
set BU[EV]=1227901522
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set GM4=EV
set EV=EV+1
set SU[EV]=1227901744
set ZU[EV]=1227901524
set AU[EV]=0
set BU[EV]=1227901516
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set GN4=EV
set EV=EV+1
set SU[EV]=1227901745
set ZU[EV]=1227901525
set AU[EV]=0
set BU[EV]=1227901517
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set GO4=EV
set EV=EV+1
set SU[EV]=1227901746
set ZU[EV]=1227901527
set AU[EV]=0
set BU[EV]=1227901518
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set GP4=EV
set EV=EV+1
set SU[EV]=1227901747
set ZU[EV]=1227901526
set AU[EV]=0
set BU[EV]=1227901521
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set GQ4=EV
set EV=EV+1
set SU[EV]=1227901748
set ZU[EV]=1227901529
set AU[EV]=0
set BU[EV]=1227901520
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set GR4=EV
set EV=EV+1
set SU[EV]=1227901749
set ZU[EV]=1227901528
set AU[EV]=0
set BU[EV]=1227901519
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set GS4=EV
set EV=EV+1
set SU[EV]=1227901769
set ZU[EV]=1227901768
set AU[EV]=0
set BU[EV]=1227901770
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set GT4=EV
set EV=EV+1
set SU[EV]=1227902004
set ZU[EV]=1227902005
set AU[EV]=0
set BU[EV]=1227902008
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set FC4=EV
set EV=EV+1
set SU[EV]=1227902003
set ZU[EV]=1227902000
set AU[EV]=0
set BU[EV]=1227902009
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set GU4=EV
set EV=EV+1
set SU[EV]=1227902002
set ZU[EV]=1227902007
set AU[EV]=0
set BU[EV]=1227902017
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set GV4=EV
set EV=EV+1
set SU[EV]=1227902037
set ZU[EV]=1227902038
set AU[EV]=0
set BU[EV]=1227902039
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set GW4=EV
set EV=EV+1
set SU[EV]=1227902257
set ZU[EV]=1227902256
set AU[EV]=0
set BU[EV]=1227902258
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set GY4=EV
set EV=EV+1
set SU[EV]=1227902261
set ZU[EV]=1227902260
set AU[EV]=0
set BU[EV]=1227902259
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set GZ4=EV
set EV=EV+1
set SU[EV]=1227902262
set ZU[EV]=1227902263
set AU[EV]=0
set BU[EV]=1227902264
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set GA4=EV
set EV=EV+1
set SU[EV]=1227902278
set ZU[EV]=1227902279
set AU[EV]=0
set BU[EV]=1227902280
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set GB4=EV
set EV=EV+1
set SU[EV]=1227902285
set ZU[EV]=1227902284
set AU[EV]=0
set BU[EV]=1227902286
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set G34=EV
set EV=EV+1
set SU[EV]=1227902287
set ZU[EV]=1227902288
set AU[EV]=0
set BU[EV]=1227902289
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set G64=EV
set EV=EV+1
set SU[EV]=1227902545
set ZU[EV]=1227902546
set AU[EV]=0
set BU[EV]=1227902547
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set GL4=EV
set EV=EV+1
set SU[EV]=1227902548
set ZU[EV]=1227902549
set AU[EV]=0
set BU[EV]=1227902550
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set G14=EV
set EV=EV+1
set SU[EV]=1227902551
set ZU[EV]=1227902552
set AU[EV]=0
set BU[EV]=1227902553
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set G04=EV
set EV=EV+1
set SU[EV]=1227902554
set ZU[EV]=1227902768
set AU[EV]=0
set BU[EV]=1227902769
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set G54=EV
set EV=EV+1
set SU[EV]=1227902802
set ZU[EV]=1227902803
set AU[EV]=0
set BU[EV]=1227902804
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set G24=EV
set EV=EV+1
set SU[EV]=1227903536
set ZU[EV]=1227903537
set AU[EV]=0
set BU[EV]=1227903538
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set R12=EV
set EV=EV+1
set SU[EV]=1227903539
set ZU[EV]=1227903540
set AU[EV]=0
set BU[EV]=1227903541
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set R13=EV
set EV=EV+1
set SU[EV]=1227903542
set ZU[EV]=1227903543
set AU[EV]=0
set BU[EV]=1227903544
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set R15=EV
set EV=EV+1
set SU[EV]=1227903545
set ZU[EV]=1227903553
set AU[EV]=0
set BU[EV]=1227903554
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set R16=EV
set EV=EV+1
set SU[EV]=1227903555
set ZU[EV]=1227903556
set AU[EV]=0
set BU[EV]=1227903557
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set R1A=EV
set EV=EV+1
set SU[EV]=1227903558
set ZU[EV]=1227903559
set AU[EV]=0
set BU[EV]=1227903560
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set R1C=EV
set EV=EV+1
set SU[EV]=1227903561
set ZU[EV]=1227903562
set AU[EV]=0
set BU[EV]=1227903563
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set R1H=EV
set EV=EV+1
set SU[EV]=1227903564
set ZU[EV]=1227903565
set AU[EV]=0
set BU[EV]=1227903566
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set R1I=EV
set EV=EV+1
set SU[EV]=1227903567
set ZU[EV]=1227903568
set AU[EV]=0
set BU[EV]=1227903569
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set R1J=EV
set EV=EV+1
set SU[EV]=1227903570
set ZU[EV]=1227903571
set AU[EV]=0
set BU[EV]=1227903572
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set R1K=EV
set EV=EV+1
set SU[EV]=1227903573
set ZU[EV]=1227903574
set AU[EV]=0
set BU[EV]=1227903575
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set R1L=EV
set EV=EV+1
set SU[EV]=1227903578
set ZU[EV]=1227903792
set AU[EV]=0
set BU[EV]=1227903793
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set R1M=EV
set EV=EV+1
set SU[EV]=1227903794
set ZU[EV]=1227903795
set AU[EV]=0
set BU[EV]=1227903796
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set R1N=EV
set EV=EV+1
set SU[EV]=1227903797
set ZU[EV]=1227903798
set AU[EV]=0
set BU[EV]=1227903799
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set R1O=EV
set EV=EV+1
set SU[EV]=1227903801
set ZU[EV]=1227903809
set AU[EV]=0
set BU[EV]=1227903810
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set R1P=EV
set EV=EV+1
set SU[EV]='I0SF'
set ZU[EV]='I0SG'
set AU[EV]=0
set BU[EV]='I0SH'
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set R21=EV
set EV=EV+1
set SU[EV]='I0SQ'
set ZU[EV]='I0SR'
set AU[EV]=0
set BU[EV]='I0SS'
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=60
set R3B=EV
set EV=EV+1
set SU[EV]=1227895617
set ZU[EV]=1227896113
set AU[EV]=1747990603
set BU[EV]=1227899961
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSteelArmor.blp"
set LU[EV]=0
set DV[EV]=EZ
set EV=EV+1
set SU[EV]=1227895641
set ZU[EV]=1227896114
set AU[EV]=1747990616
set BU[EV]=1227899705
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNOrbofSlowness.blp"
set LU[EV]=0
set DV[EV]=NZ
set EV=EV+1
set SU[EV]=1227895379
set ZU[EV]=1227895376
set AU[EV]=1747990611
set BU[EV]=1227899713
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNGlove.blp"
set LU[EV]=0
set DV[EV]=JV
set EV=EV+1
set SU[EV]=1227895374
set ZU[EV]=1227895378
set AU[EV]=1747990608
set BU[EV]=1227899731
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNBoots.blp"
set LU[EV]=0
set DV[EV]=MV
set EV=EV+1
set SU[EV]=1227895386
set ZU[EV]=1227895859
set AU[EV]=1747990609
set BU[EV]=1227899734
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNBelt.blp"
set LU[EV]=0
set DV[EV]=OV
set EV=EV+1
set SU[EV]=1227895601
set ZU[EV]=1227895861
set AU[EV]=1747990612
set BU[EV]=1227899957
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNClawsOfAttack.blp"
set LU[EV]=0
set DV[EV]=SV
set EV=EV+1
set SU[EV]=1227895618
set ZU[EV]=1227895877
set AU[EV]=1747990606
set BU[EV]=1227899969
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNHelmutPurple.blp"
set LU[EV]=0
set DV[EV]=NW
set EV=EV+1
set SU[EV]=1227895621
set ZU[EV]=1227895880
set AU[EV]=1747990615
set BU[EV]=1227899703
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNDaggerOfEscape.blp"
set LU[EV]=$E
set DV[EV]=RW
set EV=EV+1
set SU[EV]=1227895623
set ZU[EV]=1227895883
set AU[EV]=1747990607
set BU[EV]=1227899716
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNUndeadShrine.blp"
set LU[EV]=0
set DV[EV]=VW
set EV=EV+1
set SU[EV]=1227895632
set ZU[EV]=1227895891
set AU[EV]=1747990613
set BU[EV]=1227899737
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNAlleriaFlute.blp"
set LU[EV]=0
set DV[EV]=YX
set EV=EV+1
set SU[EV]=1227895633
set ZU[EV]=1227895892
set AU[EV]=1747990599
set BU[EV]=1227899977
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNGoldRing.blp"
set LU[EV]=0
set DV[EV]=ZX
set EV=EV+1
set SU[EV]=1227895635
set ZU[EV]=1227895894
set AU[EV]=1747990604
set BU[EV]=1227899978
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNRingSkull.blp"
set LU[EV]=0
set DV[EV]=GY
set EV=EV+1
set SU[EV]=1227895636
set ZU[EV]=1227895895
set AU[EV]=1747990610
set BU[EV]=1227899728
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNRobeOfTheMagi.blp"
set LU[EV]=0
set DV[EV]=HY
set EV=EV+1
set SU[EV]=1227895638
set ZU[EV]=1227895897
set AU[EV]=1747990597
set BU[EV]=1227899701
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSlippersOfAgility.blp"
set LU[EV]=0
set DV[EV]=UY
set EV=EV+1
set SU[EV]=1227895639
set ZU[EV]=1227895898
set AU[EV]=1747990602
set BU[EV]=1227899979
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSobiMask.blp"
set LU[EV]=0
set DV[EV]=ZY
set EV=EV+1
set SU[EV]=1227900740
set ZU[EV]=1227900739
set AU[EV]=1747990601
set BU[EV]=1227900741
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNWand.blp"
set LU[EV]=0
set DV[EV]=ZA
set EV=EV+1
set SU[EV]=1227901012
set ZU[EV]=1227901010
set AU[EV]=1747990598
set BU[EV]=1227901015
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNOrcMeleeUpTwo.blp"
set LU[EV]=0
set DV[EV]=BA
set EV=EV+1
set SU[EV]=1227901495
set ZU[EV]=1227901494
set AU[EV]=1747990614
set BU[EV]=1227901496
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNAmulet.blp"
set LU[EV]=0
set DV[EV]=JB
set EV=EV+1
set SU[EV]='I040'
set ZU[EV]='I054'
set AU[EV]='h08M'
set BU[EV]='I0DL'
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNPeriapt.blp"
set LU[EV]=0
set DV[EV]=RZ
set EV=EV+1
set SU[EV]=1227896129
set ZU[EV]=1227896137
set AU[EV]=1747990600
set BU[EV]=0
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNScrollUber.blp"
set LU[EV]=70
set DV[EV]=XC
set EV=EV+1
set SU[EV]=1227895607
set ZU[EV]=1227895874
set AU[EV]=1747990835
set BU[EV]=1227899730
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNEnchantedGemstone.blp"
set LU[EV]=0
set DV[EV]=CV
set EV=EV+1
set SU[EV]=1227895377
set ZU[EV]=1227895375
set AU[EV]=1747993167
set BU[EV]=1227894849
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Misc_Cape_08.blp"
set LU[EV]=0
set DV[EV]=FV
set EV=EV+1
set SU[EV]=1227902273
set ZU[EV]=1227902265
set AU[EV]=1747993422
set BU[EV]=1227902274
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNOrbOfVenom.blp"
set LU[EV]=0
set DV[EV]=E_4
set EV=EV+1
set SU[EV]=1227895603
set ZU[EV]=1227895863
set AU[EV]=1747993648
set BU[EV]=1227899959
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNGlove.blp"
set LU[EV]=0
set DV[EV]=UV
set EV=EV+1
set SU[EV]=1228222513
set ZU[EV]=1228222512
set AU[EV]=0
set BU[EV]=1228222514
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
set LU[EV]=0
set GX4=EV
set EV=EV+1
set SU[EV]='I032'
set ZU[EV]='I046'
set AU[EV]='h0F2'
set BU[EV]='I0CZ'
set CU[EV]="ReplaceableTextures\\CommandButtons\\BTNSteelMelee.blp"
set LU[EV]=0
set DV[EV]=TV
call E5()
set C_4=InitHashtable()
call LOG()
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call YB7(t,EVENT_PLAYER_UNIT_DROP_ITEM)
call YB7(t,EVENT_PLAYER_UNIT_PAWN_ITEM)
call TriggerAddCondition(t,Condition(function A9F))
set H94=t
set t=null
call LPG()
call LQG()
call L_F()
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddCondition(t,Condition(function F09))
set BH=t
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1.,true)
call TriggerAddCondition(t,Condition(function FL9))
if M34 then
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call YB7(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call YB7(t,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
call TriggerAddCondition(t,Condition(function AOF))
endif
set t=null
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function RKF))
set t=null
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call YB7(t,EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddCondition(t,Condition(function ARF))
set cH=t
set t=null
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(t,function DL9)
call TriggerAddCondition(t,Condition(function DB9))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1.,true)
call TriggerAddCondition(t,Condition(function D59))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddAction(t,function AU8)
call TriggerAddCondition(t,Condition(function AP8))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.33,true)
call TriggerAddCondition(t,Condition(function BF8))
set t=null
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.75,true)
call TriggerAddCondition(t,Condition(function BJ8))
set t=null
call SetPlayerAbilityAvailable(Z7[1],1093744436,false)
call SetPlayerAbilityAvailable(Z7[2],1093744436,false)
call SetPlayerAbilityAvailable(Z7[3],1093744436,false)
call SetPlayerAbilityAvailable(Z7[4],1093744436,false)
call SetPlayerAbilityAvailable(Z7[5],1093744436,false)
call SetPlayerAbilityAvailable(A7[1],1093744436,false)
call SetPlayerAbilityAvailable(A7[2],1093744436,false)
call SetPlayerAbilityAvailable(A7[3],1093744436,false)
call SetPlayerAbilityAvailable(A7[4],1093744436,false)
call SetPlayerAbilityAvailable(A7[5],1093744436,false)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function BM8))
set t=null
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(t,Condition(function ATF))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddCondition(t,Condition(function ASF))
set t=null
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call YB7(t,EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddCondition(t,Condition(function AVF))
set t=null
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(t,Condition(function AYF))
set t=null
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddCondition(t,Condition(function ORv))
call TriggerAddCondition(t,Condition(function Obv))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function A1F))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VZO))
set t=null
set t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddAction(t,function CJF)
call SetAltMinimapIcon("war3mapImported\\black.blp")
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function E3G))
call SetPlayerAbilityAvailable(Z7[1],1093752406,false)
call SetPlayerAbilityAvailable(Z7[2],1093752406,false)
call SetPlayerAbilityAvailable(Z7[3],1093752406,false)
call SetPlayerAbilityAvailable(Z7[4],1093752406,false)
call SetPlayerAbilityAvailable(Z7[5],1093752406,false)
call SetPlayerAbilityAvailable(A7[1],1093752406,false)
call SetPlayerAbilityAvailable(A7[2],1093752406,false)
call SetPlayerAbilityAvailable(A7[3],1093752406,false)
call SetPlayerAbilityAvailable(A7[4],1093752406,false)
call SetPlayerAbilityAvailable(A7[5],1093752406,false)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddCondition(t,Condition(function E6G))
set t=null
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(t,function CV8)
call TriggerAddCondition(t,Condition(function CU8))
call LVG()
set t=CreateTrigger()
call TriggerRegisterUnitInRange(t,FJ,300,Condition(function TO7))
call TriggerRegisterUnitInRange(t,lJ,300,Condition(function TO7))
call TriggerRegisterUnitInRange(t,DJ,300,Condition(function TO7))
call TriggerAddCondition(t,Condition(function CW8))
set t=null
set GS=CreateTrigger()
call TriggerAddAction(GS,function CX8)
set HS=CreateTrigger()
call TriggerAddAction(HS,function CY8)
set t=CreateTrigger()
set MUD=CreateRegion()
call RegionAddRect(MUD,Xr)
call TriggerRegisterEnterRegion(t,MUD,Condition(function TO7))
set MUD=CreateRegion()
call RegionAddRect(MUD,Uo)
call TriggerRegisterEnterRegion(t,MUD,Condition(function TO7))
set MUD=CreateRegion()
call RegionAddRect(MUD,bE)
call TriggerRegisterEnterRegion(t,MUD,Condition(function TO7))
call TriggerAddCondition(t,Condition(function CZ8))
set t=null
set MUD=null
set t=CreateTrigger()
set MUD=CreateRegion()
call RegionAddRect(MUD,zo)
call TriggerRegisterEnterRegion(t,MUD,Condition(function TO7))
set MUD=CreateRegion()
call RegionAddRect(MUD,jo)
call TriggerRegisterEnterRegion(t,MUD,Condition(function TO7))
set MUD=CreateRegion()
call RegionAddRect(MUD,XE)
call TriggerRegisterEnterRegion(t,MUD,Condition(function TO7))
call TriggerAddCondition(t,Condition(function CA8))
set t=null
set MUD=null
set t=CreateTrigger()
set MUD=CreateRegion()
call RegionAddRect(MUD,Er)
call TriggerRegisterEnterRegion(t,MUD,Condition(function TO7))
set MUD=CreateRegion()
call RegionAddRect(MUD,to)
call TriggerRegisterEnterRegion(t,MUD,Condition(function TO7))
set MUD=CreateRegion()
call RegionAddRect(MUD,BE)
call TriggerRegisterEnterRegion(t,MUD,Condition(function TO7))
call TriggerAddCondition(t,Condition(function CB8))
set t=null
set MUD=null
set t=CreateTrigger()
set MUD=CreateRegion()
call RegionAddRect(MUD,er)
call TriggerRegisterEnterRegion(t,MUD,Condition(function TO7))
set MUD=CreateRegion()
call RegionAddRect(MUD,lo)
call TriggerRegisterEnterRegion(t,MUD,Condition(function TO7))
set MUD=CreateRegion()
call RegionAddRect(MUD,OE)
call TriggerRegisterEnterRegion(t,MUD,Condition(function TO7))
call TriggerAddCondition(t,Condition(function CC8))
set t=null
set MUD=null
set t=CreateTrigger()
set MUD=CreateRegion()
call RegionAddRect(MUD,Qo)
call TriggerRegisterEnterRegion(t,MUD,Condition(function TO7))
set MUD=CreateRegion()
call RegionAddRect(MUD,ar)
call TriggerRegisterEnterRegion(t,MUD,Condition(function TO7))
set MUD=CreateRegion()
call RegionAddRect(MUD,AE)
call TriggerRegisterEnterRegion(t,MUD,Condition(function TO7))
call TriggerAddCondition(t,Condition(function C38))
set t=null
set MUD=null
set t=CreateTrigger()
set MUD=CreateRegion()
call RegionAddRect(MUD,wo)
call TriggerRegisterEnterRegion(t,MUD,Condition(function TO7))
set MUD=CreateRegion()
call RegionAddRect(MUD,go)
call TriggerRegisterEnterRegion(t,MUD,Condition(function TO7))
set MUD=CreateRegion()
call RegionAddRect(MUD,IE)
call TriggerRegisterEnterRegion(t,MUD,Condition(function TO7))
call TriggerAddCondition(t,Condition(function C68))
set t=null
set MUD=null
set JS=CreateTrigger()
call TriggerAddAction(JS,function LD8)
set cA=CreateTrigger()
call TriggerRegisterUnitEvent(cA,JV4,EVENT_UNIT_DEATH)
call TriggerAddAction(cA,function LF8)
set CA=CreateTrigger()
call TriggerRegisterUnitEvent(CA,JW4,EVENT_UNIT_DEATH)
call TriggerAddAction(CA,function LG8)
set dA=CreateTrigger()
call TriggerRegisterUnitEvent(dA,JX4,EVENT_UNIT_DEATH)
call TriggerAddAction(dA,function LH8)
set DA=CreateTrigger()
call TriggerRegisterUnitEvent(DA,JS4,EVENT_UNIT_DEATH)
call TriggerAddAction(DA,function LI8)
set fA=CreateTrigger()
call TriggerRegisterUnitEvent(fA,JT4,EVENT_UNIT_DEATH)
call TriggerAddAction(fA,function LJ8)
set FA=CreateTrigger()
call TriggerRegisterUnitEvent(FA,JU4,EVENT_UNIT_DEATH)
call TriggerAddAction(FA,function LK8)
set gA=CreateTrigger()
call TriggerRegisterUnitEvent(gA,KG4,EVENT_UNIT_DEATH)
call TriggerAddAction(gA,function LM8)
set GA=CreateTrigger()
call TriggerRegisterUnitEvent(GA,KH4,EVENT_UNIT_DEATH)
call TriggerAddAction(GA,function LN8)
set LA=CreateTrigger()
call TriggerRegisterUnitEvent(LA,KI4,EVENT_UNIT_DEATH)
call TriggerAddAction(LA,function LO8)
set mA=CreateTrigger()
call TriggerRegisterUnitEvent(mA,KD4,EVENT_UNIT_DEATH)
call TriggerAddAction(mA,function LP8)
set MA=CreateTrigger()
call TriggerRegisterUnitEvent(MA,KE4,EVENT_UNIT_DEATH)
call TriggerAddAction(MA,function LQ8)
set PA=CreateTrigger()
call TriggerRegisterUnitEvent(PA,KF4,EVENT_UNIT_DEATH)
call TriggerAddAction(PA,function LR8)
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,JF4,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function LS8))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,J34,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function LU8))
set t=null
set SA=CreateTrigger()
call YB7(SA,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(SA,Condition(function LV8))
call TriggerAddAction(SA,function LW8)
set TA=CreateTrigger()
call YB7(TA,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(TA,Condition(function LX8))
call TriggerAddAction(TA,function LY8)
set KS=CreateTrigger()
call TriggerAddAction(KS,function LZ8)
set wA=CreateTrigger()
call TriggerRegisterTimerEventSingle(wA,75.)
call TriggerAddAction(wA,function LA8)
set MS=CreateTrigger()
call TriggerAddCondition(MS,Condition(function DZ9))
set OS=CreateTrigger()
call TriggerAddAction(OS,function DA9)
set vA=CreateTrigger()
call TriggerAddAction(vA,function R78)
set eA=CreateTrigger()
call YB7(eA,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(eA,Condition(function R98))
call TriggerAddAction(eA,function RD8)
set xA=CreateTrigger()
call YB7(xA,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(xA,Condition(function RE8))
call TriggerAddAction(xA,function RF8)
set FS=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(FS,1.)
call TriggerAddAction(FS,function RK8)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SELECTED)
call TriggerAddCondition(t,Condition(function RP9))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_DESELECTED)
call TriggerAddCondition(t,Condition(function RN9))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,JJ4,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,JJ4,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function SE8))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,JK4,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,JK4,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function SF8))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,JM4,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,JM4,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function SG8))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,JN4,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,JN4,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function SH8))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,JO4,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,JO4,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function SI8))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,JP4,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,JP4,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function SJ8))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,JQ4,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,JQ4,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function SK8))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,JR4,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,JR4,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function SM8))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,JS4,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,JS4,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function SN8))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,JT4,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,JT4,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function SO8))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,JU4,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,JU4,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function SP8))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,JV4,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,JV4,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function SQ8))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,JW4,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,JW4,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function SR8))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,JX4,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,JX4,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function SS8))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,J04,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,J04,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function RC8))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,J54,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,J54,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function R38))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,J24,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,J24,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function R68))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,J_4,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,J_4,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function RL8))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,K44,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,K44,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function R18))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,K74,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,K74,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function R08))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,K84,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,K84,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function R58))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,K94,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,K94,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function R28))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,KD4,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,KD4,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function R_8))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,KE4,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,KE4,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function S48))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,KF4,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,KF4,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function S78))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,KG4,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,KG4,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function S88))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,KH4,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,KH4,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function S98))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,KI4,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,KI4,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function SD8))
set VA=CreateTrigger()
call TriggerRegisterTimerEvent(VA,1.,true)
call TriggerAddCondition(VA,Condition(function RZ8))
set t=null
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,5.,true)
call TriggerAddCondition(t,Condition(function SB8))
set t=null
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,4.,true)
call TriggerAddCondition(t,Condition(function S18))
set t=null
set KU=WS7()
set t=CreateTrigger()
set MUD=CreateRegion()
call RegionAddRect(MUD,bj_mapInitialPlayableArea)
call TriggerRegisterEnterRegion(t,MUD,Condition(function TO7))
call TriggerAddCondition(t,Condition(function T78))
set t=null
set MUD=null
set t=CreateTrigger()
call TriggerAddCondition(t,Condition(function T88))
call TriggerRegisterTimerEvent(t,5.,true)
set t=null
call DestroyFogModifier(CreateFogModifierRadius(Z7[0],FOG_OF_WAR_VISIBLE,-4550,$4E2,300,true,true))
call DestroyFogModifier(CreateFogModifierRadius(A7[0],FOG_OF_WAR_VISIBLE,-4550,$4E2,300,true,true))
call DestroyFogModifier(CreateFogModifierRadius(Z7[0],FOG_OF_WAR_VISIBLE,$C80,1,300,true,true))
call DestroyFogModifier(CreateFogModifierRadius(A7[0],FOG_OF_WAR_VISIBLE,$C80,1,300,true,true))
call DestroyFogModifier(CreateFogModifierRadius(Z7[0],FOG_OF_WAR_VISIBLE,-7292,4186,450,true,true))
call DestroyFogModifier(CreateFogModifierRadius(A7[0],FOG_OF_WAR_VISIBLE,-7292,4186,450,true,true))
call DestroyFogModifier(CreateFogModifierRadius(Z7[0],FOG_OF_WAR_VISIBLE,7348,-4334,450,true,true))
call DestroyFogModifier(CreateFogModifierRadius(A7[0],FOG_OF_WAR_VISIBLE,7348,-4334,450,true,true))
call DestroyFogModifier(CreateFogModifierRect(Z7[0],FOG_OF_WAR_VISIBLE,IW4,true,true))
call DestroyFogModifier(CreateFogModifierRect(A7[0],FOG_OF_WAR_VISIBLE,IW4,true,true))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FDG))
set t=null
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,3.5,true)
call TriggerAddCondition(t,Condition(function YK8))
set t=null
set OE4=CreateTrigger()
call TriggerRegisterUnitEvent(OE4,J34,EVENT_UNIT_DEATH)
call TriggerAddAction(OE4,function ZO8)
set OF4=CreateTrigger()
call TriggerRegisterUnitEvent(OF4,JF4,EVENT_UNIT_DEATH)
call TriggerAddAction(OF4,function ZM8)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function A78))
set t=null
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AD8))
set t=null
set OH4=CreateTrigger()
call TriggerAddAction(OH4,function AH8)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FAe))
call ExecuteFunc("NCv")
call ixv()
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,B7,EVENT_PLAYER_UNIT_ATTACKED,Condition(function TO7))
call TriggerAddCondition(t,Condition(function AJ8))
set t=null
set ow=CreateRegion()
call RegionAddRect(ow,Rect(3488.,-2688.,4384.,-2048.))
set oww=CreateRegion()
call RegionAddRect(oww,TD)
set T94=CreateRegion()
call RegionAddRect(T94,TN)
call RegionAddRect(T94,UN)
set EA=CreateTrigger()
call TriggerRegisterEnterRectSimple(EA,bj_mapInitialPlayableArea)
call TriggerAddCondition(EA,Condition(function BN8))
call TriggerAddAction(EA,function BO8)
set OA=CreateTrigger()
call YB7(OA,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(OA,Condition(function BP8))
call TriggerAddAction(OA,function BQ8)
set RA=CreateTrigger()
call YB7(RA,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(RA,Condition(function BR8))
call TriggerAddAction(RA,function BS8)
if(bj_isSinglePlayer and BT8())then
call CP8()
endif
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Le,"-wtf",true)
call TriggerAddAction(t,function CR8)
call TriggerAddCondition(t,Condition(function CQ8))
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,Z7[1],EVENT_PLAYER_HERO_LEVEL,Condition(function TO7))
call TriggerRegisterPlayerUnitEvent(t,Z7[2],EVENT_PLAYER_HERO_LEVEL,Condition(function TO7))
call TriggerRegisterPlayerUnitEvent(t,Z7[3],EVENT_PLAYER_HERO_LEVEL,Condition(function TO7))
call TriggerRegisterPlayerUnitEvent(t,Z7[4],EVENT_PLAYER_HERO_LEVEL,Condition(function TO7))
call TriggerRegisterPlayerUnitEvent(t,Z7[5],EVENT_PLAYER_HERO_LEVEL,Condition(function TO7))
call TriggerRegisterPlayerUnitEvent(t,A7[1],EVENT_PLAYER_HERO_LEVEL,Condition(function TO7))
call TriggerRegisterPlayerUnitEvent(t,A7[2],EVENT_PLAYER_HERO_LEVEL,Condition(function TO7))
call TriggerRegisterPlayerUnitEvent(t,A7[3],EVENT_PLAYER_HERO_LEVEL,Condition(function TO7))
call TriggerRegisterPlayerUnitEvent(t,A7[4],EVENT_PLAYER_HERO_LEVEL,Condition(function TO7))
call TriggerRegisterPlayerUnitEvent(t,A7[5],EVENT_PLAYER_HERO_LEVEL,Condition(function TO7))
call TriggerAddCondition(t,Condition(function CS8))
set t=null
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Le,"-test",true)
call TriggerAddCondition(t,Condition(function CT8))
set t=null
set t=CreateTrigger()
set MUD=CreateRegion()
call RegionAddRect(MUD,GetWorldBounds())
call TriggerRegisterEnterRegion(t,MUD,null)
call TriggerAddCondition(t,Condition(function GX9))
call TriggerAddAction(t,function XXE)
set t=null
set MUD=null
call EHF(JH4,$E,0)
call EHF(JK4,$C,0)
call EHF(JG4,34,1)
call EHF(JJ4,33,1)
call EHF(JI4,55,2)
call EHF(JM4,52,2)
call EHF(JL4,$E,0)
call EHF(J54,16,0)
call EHF(J64,35,1)
call EHF(J04,37,1)
call EHF(J14,57,2)
call EHF(J24,58,2)
set t=CreateTrigger()
call TriggerRegisterUnitInRange(t,FJ,300,Condition(function TO7))
call TriggerRegisterUnitInRange(t,lJ,300,Condition(function TO7))
call TriggerRegisterUnitInRange(t,DJ,300,Condition(function TO7))
call TriggerAddCondition(t,Condition(function GY9))
set t=null
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,25.,false)
call TriggerAddAction(t,function G09)
set t=null
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,2.,false)
call TriggerAddCondition(t,Condition(function GW9))
set t=null
set SC4=CreateRegion()
call RegionAddRect(SC4,HD)
call RegionAddRect(SC4,GD)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,25.,false)
call TriggerAddAction(t,function GL9)
set t=null
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-",false)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-",false)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-",false)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-",false)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-",false)
call TriggerRegisterPlayerChatEvent(t,A7[1],"-",false)
call TriggerRegisterPlayerChatEvent(t,A7[2],"-",false)
call TriggerRegisterPlayerChatEvent(t,A7[3],"-",false)
call TriggerRegisterPlayerChatEvent(t,A7[4],"-",false)
call TriggerRegisterPlayerChatEvent(t,A7[5],"-",false)
call TriggerAddAction(t,function H99)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_FINISH)
call TriggerAddCondition(t,Condition(function KC9))
call TriggerAddAction(t,function K19)
set AW[0]=false
set AW[1]=false
set AW[2]=false
set AW[3]=false
set AW[4]=false
set AW[5]=false
set AW[6]=false
set AW[7]=false
set AW[8]=false
set AW[9]=false
set AW[$A]=false
set AW[$B]=false
set AW[$C]=false
set AW[$D]=false
set AW[$E]=false
set AW[$F]=false
set AW[16]=false
set OL4[0]=false
set OL4[1]=false
set OL4[2]=false
set OL4[3]=false
set OL4[4]=false
set OL4[5]=false
set OL4[6]=false
set OL4[7]=false
set OL4[8]=false
set OL4[9]=false
set OL4[$A]=false
set OL4[$B]=false
set OL4[$C]=false
set OL4[$D]=false
set OL4[$E]=false
set OL4[$F]=false
set OL4[16]=false
set OL4[GetPlayerId(Z7[1])]=true
set OL4[GetPlayerId(Z7[2])]=true
set OL4[GetPlayerId(Z7[3])]=true
set OL4[GetPlayerId(Z7[4])]=true
set OL4[GetPlayerId(Z7[5])]=true
set OL4[GetPlayerId(A7[1])]=true
set OL4[GetPlayerId(A7[2])]=true
set OL4[GetPlayerId(A7[3])]=true
set OL4[GetPlayerId(A7[4])]=true
set OL4[GetPlayerId(A7[5])]=true
call MH9()
set eb[0]=true
set eb[1]=true
set eb[2]=true
set eb[3]=true
set eb[4]=true
set eb[5]=true
set eb[6]=true
set eb[7]=true
set eb[8]=true
set eb[9]=true
set eb[$A]=true
set eb[$B]=true
set eb[$C]=true
set eb[$D]=true
set eb[$E]=true
set eb[$F]=true
set ib[0]=false
set ib[1]=false
set ib[2]=false
set ib[3]=false
set ib[4]=false
set ib[5]=false
set ib[6]=false
set ib[7]=false
set ib[8]=false
set ib[9]=false
set ib[$A]=false
set ib[$B]=false
set ib[$C]=false
set ib[$D]=false
set ib[$E]=false
set CW[GetPlayerId(Z7[1])]=false
set CW[GetPlayerId(Z7[2])]=false
set CW[GetPlayerId(Z7[3])]=false
set CW[GetPlayerId(Z7[4])]=false
set CW[GetPlayerId(Z7[5])]=false
set CW[GetPlayerId(A7[1])]=false
set CW[GetPlayerId(A7[2])]=false
set CW[GetPlayerId(A7[3])]=false
set CW[GetPlayerId(A7[4])]=false
set CW[GetPlayerId(A7[5])]=false
set ab[GetPlayerId(Z7[1])]=false
set ab[GetPlayerId(Z7[2])]=false
set ab[GetPlayerId(Z7[3])]=false
set ab[GetPlayerId(Z7[4])]=false
set ab[GetPlayerId(Z7[5])]=false
set ab[GetPlayerId(A7[1])]=false
set ab[GetPlayerId(A7[2])]=false
set ab[GetPlayerId(A7[3])]=false
set ab[GetPlayerId(A7[4])]=false
set ab[GetPlayerId(A7[5])]=false
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call YB7(t,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call YB7(t,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
call TriggerAddCondition(t,Condition(function H89))
set QT[GetPlayerId(Z7[1])]=false
set QT[GetPlayerId(Z7[2])]=false
set QT[GetPlayerId(Z7[3])]=false
set QT[GetPlayerId(Z7[4])]=false
set QT[GetPlayerId(Z7[5])]=false
set QT[GetPlayerId(A7[1])]=false
set QT[GetPlayerId(A7[2])]=false
set QT[GetPlayerId(A7[3])]=false
set QT[GetPlayerId(A7[4])]=false
set QT[GetPlayerId(A7[5])]=false
set Ob[0]=false
set Ob[1]=false
set Ob[2]=false
set Ob[3]=false
set Ob[4]=false
set Ob[5]=false
set Ob[6]=false
set Ob[7]=false
set Ob[8]=false
set Ob[9]=false
set Ob[$A]=false
set Ob[$B]=false
set Ob[$C]=false
set Ob[$D]=false
set Ob[$E]=false
set Ob[$F]=false
set Ob[16]=false
set Ab[0]=true
set Ab[1]=true
set Ab[2]=true
set Ab[3]=true
set Ab[4]=true
set Ab[5]=true
set Ab[6]=true
set Ab[7]=true
set Ab[8]=true
set Ab[9]=true
set Ab[$A]=true
set Ab[$B]=true
set Ab[$C]=true
set Ab[$D]=true
set Ab[$E]=true
set Ab[$F]=true
set Ab[16]=true
set OT[GetPlayerId(Z7[1])]=false
set OT[GetPlayerId(Z7[2])]=false
set OT[GetPlayerId(Z7[3])]=false
set OT[GetPlayerId(Z7[4])]=false
set OT[GetPlayerId(Z7[5])]=false
set OT[GetPlayerId(A7[1])]=false
set OT[GetPlayerId(A7[2])]=false
set OT[GetPlayerId(A7[3])]=false
set OT[GetPlayerId(A7[4])]=false
set OT[GetPlayerId(A7[5])]=false
call MO9()
set Nb[0]=false
set Nb[1]=false
set Nb[2]=false
set Nb[3]=false
set Nb[4]=false
set Nb[5]=false
set Nb[6]=false
set Nb[7]=false
set Nb[8]=false
set Nb[9]=false
set Nb[$A]=false
set Nb[$B]=false
set Nb[$C]=false
set Nb[$D]=false
set Nb[$E]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Orc\\WitchDoctor\\WitchDoctorPissed1.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Orc\\WitchDoctor\\WitchDoctorPissed2.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Orc\\WitchDoctor\\WitchDoctorPissed3.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Orc\\WitchDoctor\\WitchDoctorPissed4.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Orc\\WitchDoctor\\WitchDoctorPissed5.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Orc\\WitchDoctor\\WitchDoctorPissed6.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed1.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed2.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed3.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed4.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed5.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed6.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed7.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed1.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed2.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed3.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed4.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed5.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed6.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed1.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed2.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed3.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed4.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed5.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Human\\Rifleman\\RiflemanPissed1.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Human\\Rifleman\\RiflemanPissed2.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Human\\Rifleman\\RiflemanPissed3.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Human\\Rifleman\\RiflemanPissed4.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Human\\Rifleman\\RiflemanPissed5.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Human\\Rifleman\\RiflemanPissed6.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Human\\Rifleman\\RiflemanPissed7.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Human\\Rifleman\\RiflemanPissed8.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed1.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed2.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed3.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed4.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed5.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed6.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed7.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed8.wav"
set db[Fb]=false
set Fb=Fb+1
set Cb[Fb]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed9.wav"
set db[Fb]=false
set Cb[Fb]="Units\\Creeps\\Ogre\\OgrePissed1.wav"
set db[Fb]=false
set Cb[Fb]="Units\\Creeps\\Ogre\\OgrePissed2.wav"
set db[Fb]=false
set Cb[Fb]="Units\\Creeps\\Ogre\\OgrePissed3.wav"
set db[Fb]=false
set Cb[Fb]="Units\\Creeps\\Ogre\\OgrePissed4.wav"
set db[Fb]=false
set Cb[Fb]="Units\\Creeps\\Ogre\\OgrePissed5.wav"
set db[Fb]=false
set Cb[Fb]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed1.wav"
set db[Fb]=false
set Cb[Fb]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed2.wav"
set db[Fb]=false
set Cb[Fb]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed3.wav"
set db[Fb]=false
set Cb[Fb]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed4.wav"
set db[Fb]=false
set Cb[Fb]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed5.wav"
set db[Fb]=false
set Cb[Fb]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed6.wav"
set db[Fb]=false
set Cb[Fb]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed7.wav"
set db[Fb]=false
set Cb[Fb]="Units\\Orc\\HeroBladeMaster\\HeroBladeMasterPissed1.wav"
set db[Fb]=false
set Cb[Fb]="Units\\Orc\\HeroBladeMaster\\HeroBladeMasterPissed2.wav"
set db[Fb]=false
set Cb[Fb]="Units\\Orc\\HeroBladeMaster\\HeroBladeMasterPissed3.wav"
set db[Fb]=false
set Cb[Fb]="Units\\Orc\\HeroBladeMaster\\HeroBladeMasterPissed4.wav"
set db[Fb]=false
set Cb[Fb]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed1.wav"
set db[Fb]=false
set Cb[Fb]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed2.wav"
set db[Fb]=false
set Cb[Fb]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed3.wav"
set db[Fb]=false
set Cb[Fb]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed4.wav"
set db[Fb]=false
set Cb[Fb]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed5.wav"
set db[Fb]=false
set Cb[Fb]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed6.wav"
set db[Fb]=false
set Cb[Fb]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed7.wav"
set db[Fb]=false
set Cb[Fb]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed8.wav"
set db[Fb]=false
set RT[0]=false
set RT[1]=false
set RT[2]=false
set RT[3]=false
set RT[4]=false
set RT[5]=false
set RT[6]=false
set RT[7]=false
set RT[8]=false
set RT[9]=false
set RT[$A]=false
set RT[$B]=false
set RT[$C]=false
set RT[$D]=false
set t=CreateTrigger()
set OB7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function N99))
call NQ7(OB7,"T_CurrentX",(0)*1.)
call NQ7(OB7,"T_CurrentY",(0)*1.)
call NQ7(OB7,"T_MaxX",($A0)*1.)
set fb[0]=false
set fb[1]=false
set fb[2]=false
set fb[3]=false
set fb[4]=false
set fb[5]=false
set fb[6]=false
set fb[7]=false
set fb[8]=false
set fb[9]=false
set fb[$A]=false
set fb[$B]=false
set fb[$C]=false
set t=null
set t=CreateTrigger()
call TriggerAddAction(t,function OL9)
call TriggerAddCondition(t,Condition(function NI9))
set YI4=t
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.01,false)
call TriggerAddCondition(t,Condition(function O19))
set t=null
if V8 then
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1.,true)
call TriggerAddCondition(t,Condition(function RM9))
endif
set t=null
set Tj=CreateTrigger()
call TriggerRegisterTimerExpireEvent(Tj,A[1])
call TriggerAddAction(Tj,function RS9)
set Uj=CreateTrigger()
call TriggerRegisterTimerExpireEvent(Uj,A[2])
call TriggerAddAction(Uj,function RT9)
set wj=CreateTrigger()
call TriggerRegisterTimerExpireEvent(wj,A[3])
call TriggerAddAction(wj,function RU9)
set zj=CreateTrigger()
call TriggerRegisterTimerExpireEvent(zj,A[4])
call TriggerAddAction(zj,function RV9)
set Zj=CreateTrigger()
call TriggerRegisterTimerExpireEvent(Zj,A[5])
call TriggerAddAction(Zj,function RW9)
set vJ=CreateTrigger()
call TriggerRegisterTimerExpireEvent(vJ,A[7])
call TriggerAddAction(vJ,function RX9)
set eJ=CreateTrigger()
call TriggerRegisterTimerExpireEvent(eJ,A[8])
call TriggerAddAction(eJ,function RY9)
set xJ=CreateTrigger()
call TriggerRegisterTimerExpireEvent(xJ,A[9])
call TriggerAddAction(xJ,function RZ9)
set oJ=CreateTrigger()
call TriggerRegisterTimerExpireEvent(oJ,A[$A])
call TriggerAddAction(oJ,function RA9)
set iJ=CreateTrigger()
call TriggerRegisterTimerExpireEvent(iJ,A[$B])
call TriggerAddAction(iJ,function RB9)
call LRG()
call LSG()
call LTG()
call LUG()
set OJ=CreateTrigger()
call YB7(OJ,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(OJ,Condition(function QYD))
call TriggerAddAction(OJ,function QZD)
set t=CreateTrigger()
set MUD=CreateRegion()
call RegionAddRect(MUD,GetWorldBounds())
call TriggerRegisterEnterRegion(t,MUD,Condition(function TO7))
call TriggerAddCondition(t,Condition(function SBF))
set t=null
set MUD=null
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function N3G))
set t=null
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(t,function WIE)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call YB7(t,EVENT_PLAYER_UNIT_DROP_ITEM)
call YB7(t,EVENT_PLAYER_UNIT_PAWN_ITEM)
call TriggerAddCondition(t,Condition(function NLG))
set SV4=t
set t=null
set bj[GetPlayerId(Z7[1])]=false
set bj[GetPlayerId(Z7[2])]=false
set bj[GetPlayerId(Z7[3])]=false
set bj[GetPlayerId(Z7[4])]=false
set bj[GetPlayerId(Z7[5])]=false
set bj[GetPlayerId(A7[1])]=false
set bj[GetPlayerId(A7[2])]=false
set bj[GetPlayerId(A7[3])]=false
set bj[GetPlayerId(A7[4])]=false
set bj[GetPlayerId(A7[5])]=false
set NU[0]=GetRandomInt(1,2)
set NU[1]=GetRandomInt(1,2)
set NU[2]=GetRandomInt(1,2)
set NU[3]=GetRandomInt(1,2)
set NU[4]=GetRandomInt(1,2)
set NU[5]=GetRandomInt(1,2)
set NU[6]=GetRandomInt(1,2)
set NU[7]=GetRandomInt(1,2)
set NU[8]=GetRandomInt(1,2)
set NU[9]=GetRandomInt(1,2)
set NU[$A]=GetRandomInt(1,2)
set NU[$B]=GetRandomInt(1,2)
set NU[$C]=GetRandomInt(1,2)
set NU[$D]=GetRandomInt(1,2)
set NU[$E]=GetRandomInt(1,2)
set NU[$F]=GetRandomInt(1,2)
set LY4[0]=$FE
set LY4[1]=$FF
set LY4[2]=257
set LY4[3]=261
set LY4[4]=259
set LY4[5]=262
set LY4[6]=260
set LY4[7]=$FD
set LY4[8]=256
set LY4[9]=258
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,15.,false)
call TriggerAddAction(t,function QM9)
set LQ4=CreateTrigger()
call DisableTrigger(LQ4)
call TriggerRegisterTimerEvent(LQ4,15.,true)
call TriggerAddAction(LQ4,function BLE)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(t,function IHG)
call TriggerRegisterTimerEventPeriodic(HK,5.)
call TriggerAddAction(HK,function X_E)
call TriggerRegisterTimerEventPeriodic(QZ4,5.)
call TriggerAddAction(QZ4,function DCF)
call DisableTrigger(QZ4)
call TriggerRegisterTimerEventPeriodic(Hn,1.)
call TriggerAddAction(Hn,function H5F)
call TriggerRegisterTimerEventPeriodic(HN,1.)
call TriggerAddAction(HN,function I4F)
call TriggerRegisterTimerEventPeriodic(Ho,2.)
call TriggerAddAction(Ho,function IFF)
call DisableTrigger(QB4)
call TriggerRegisterTimerEventPeriodic(QB4,2.)
call TriggerAddAction(QB4,function NBF)
set t=CreateTrigger()
call ky(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(t,function B0E)
set t=CreateTrigger()
call TriggerRegisterUnitInRange(t,JA4,700.,null)
call TriggerAddCondition(t,Condition(function D6))
call TriggerAddAction(t,function LKE)
set t=CreateTrigger()
call TriggerRegisterUnitInRange(t,IZ4,700.,null)
call TriggerAddCondition(t,Condition(function C6))
call TriggerAddAction(t,function LOE)
call DisableTrigger(QC4)
call TriggerRegisterTimerEventPeriodic(QC4,120.)
call TriggerAddAction(QC4,function QTF)
set PB4=$C
set PC4=$C
call CYE()
if GetPlayerController(Z7[1])==MAP_CONTROL_COMPUTER or GetPlayerController(Z7[2])==MAP_CONTROL_COMPUTER or GetPlayerController(Z7[3])==MAP_CONTROL_COMPUTER or GetPlayerController(Z7[4])==MAP_CONTROL_COMPUTER or GetPlayerController(Z7[5])==MAP_CONTROL_COMPUTER or GetPlayerController(A7[1])==MAP_CONTROL_COMPUTER or GetPlayerController(A7[2])==MAP_CONTROL_COMPUTER or GetPlayerController(A7[3])==MAP_CONTROL_COMPUTER or GetPlayerController(A7[4])==MAP_CONTROL_COMPUTER or GetPlayerController(A7[5])==MAP_CONTROL_COMPUTER then
call DisplayTimedTextToPlayer(Le,0,0,10.,"|c00dd8dff"+"你可以为AI设置经验及金钱的获取率|r")
call DisplayTimedTextToPlayer(Le,0,0,10.,"|c00dd8dff"+"更多详情请按F9查看|r")
call DisplayTimedTextToPlayer(Le,0,0,$A," ")
endif
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,30,"TRIGSTR_50016")
set t=CreateTrigger()
call TriggerAddAction(t,function R7P)
call TriggerRegisterTimerEvent(t,30,false)
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_SPELL_ENDCAST)
call YB7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call YB7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function SWF))
set t=CreateTrigger()
call YB7(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(t,Condition(function NAG))
call ExecuteFunc("L77")
set t=null
call ExecuteFunc("IP7")
call R1W()
endfunction
function config takes nothing returns nothing
call SetMapName("TRIGSTR_50000")
call SetMapDescription("TRIGSTR_50001")
call SetPlayers($A)
call SetTeams($A)
call SetGamePlacement(MAP_PLACEMENT_TEAMS_TOGETHER)
call DefineStartLocation(0,-6990.,6840.)
call DefineStartLocation(1,-6990.,6840.)
call DefineStartLocation(2,-6990.,6840.)
call DefineStartLocation(3,-6990.,6840.)
call DefineStartLocation(4,-6990.,6840.)
call DefineStartLocation(5,-6990.,6840.)
call DefineStartLocation(6,-6990.,6840.)
call DefineStartLocation(7,-6990.,6840.)
call DefineStartLocation(8,-6990.,6840.)
call DefineStartLocation(9,-6990.,6840.)
call SetPlayerStartLocation(Player(1),0)
call ForcePlayerStartLocation(Player(1),0)
call SetPlayerColor(Player(1),ConvertPlayerColor(1))
call SetPlayerRacePreference(Player(1),RACE_PREF_NIGHTELF)
call SetPlayerRaceSelectable(Player(1),false)
call SetPlayerController(Player(1),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(2),1)
call ForcePlayerStartLocation(Player(2),1)
call SetPlayerColor(Player(2),ConvertPlayerColor(2))
call SetPlayerRacePreference(Player(2),RACE_PREF_NIGHTELF)
call SetPlayerRaceSelectable(Player(2),false)
call SetPlayerController(Player(2),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(3),2)
call ForcePlayerStartLocation(Player(3),2)
call SetPlayerColor(Player(3),ConvertPlayerColor(3))
call SetPlayerRacePreference(Player(3),RACE_PREF_NIGHTELF)
call SetPlayerRaceSelectable(Player(3),false)
call SetPlayerController(Player(3),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(4),3)
call ForcePlayerStartLocation(Player(4),3)
call SetPlayerColor(Player(4),ConvertPlayerColor(4))
call SetPlayerRacePreference(Player(4),RACE_PREF_NIGHTELF)
call SetPlayerRaceSelectable(Player(4),false)
call SetPlayerController(Player(4),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(5),4)
call ForcePlayerStartLocation(Player(5),4)
call SetPlayerColor(Player(5),ConvertPlayerColor(5))
call SetPlayerRacePreference(Player(5),RACE_PREF_NIGHTELF)
call SetPlayerRaceSelectable(Player(5),false)
call SetPlayerController(Player(5),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(7),5)
call ForcePlayerStartLocation(Player(7),5)
call SetPlayerColor(Player(7),ConvertPlayerColor(7))
call SetPlayerRacePreference(Player(7),RACE_PREF_UNDEAD)
call SetPlayerRaceSelectable(Player(7),false)
call SetPlayerController(Player(7),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(8),6)
call ForcePlayerStartLocation(Player(8),6)
call SetPlayerColor(Player(8),ConvertPlayerColor(8))
call SetPlayerRacePreference(Player(8),RACE_PREF_UNDEAD)
call SetPlayerRaceSelectable(Player(8),false)
call SetPlayerController(Player(8),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(9),7)
call ForcePlayerStartLocation(Player(9),7)
call SetPlayerColor(Player(9),ConvertPlayerColor(9))
call SetPlayerRacePreference(Player(9),RACE_PREF_UNDEAD)
call SetPlayerRaceSelectable(Player(9),false)
call SetPlayerController(Player(9),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player($A),8)
call ForcePlayerStartLocation(Player($A),8)
call SetPlayerColor(Player($A),ConvertPlayerColor($A))
call SetPlayerRacePreference(Player($A),RACE_PREF_UNDEAD)
call SetPlayerRaceSelectable(Player($A),false)
call SetPlayerController(Player($A),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player($B),9)
call ForcePlayerStartLocation(Player($B),9)
call SetPlayerColor(Player($B),ConvertPlayerColor($B))
call SetPlayerRacePreference(Player($B),RACE_PREF_UNDEAD)
call SetPlayerRaceSelectable(Player($B),false)
call SetPlayerController(Player($B),MAP_CONTROL_USER)
call InitCustomTeams()
call SetPlayerAlliance(Player($F),Player(1),ConvertAllianceType(6),true)
call SetPlayerAlliance(Player($F),Player(2),ConvertAllianceType(6),true)
call SetPlayerAlliance(Player($F),Player(3),ConvertAllianceType(6),true)
call SetPlayerAlliance(Player($F),Player(4),ConvertAllianceType(6),true)
call SetPlayerAlliance(Player($F),Player(5),ConvertAllianceType(6),true)
call SetPlayerAlliance(Player($F),Player(7),ConvertAllianceType(6),true)
call SetPlayerAlliance(Player($F),Player(8),ConvertAllianceType(6),true)
call SetPlayerAlliance(Player($F),Player(9),ConvertAllianceType(6),true)
call SetPlayerAlliance(Player($F),Player($A),ConvertAllianceType(6),true)
call SetPlayerAlliance(Player($F),Player($B),ConvertAllianceType(6),true)
call SetStartLocPrioCount(0,9)
call SetStartLocPrio(0,0,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,1,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,2,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,5,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,6,7,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,7,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,8,9,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(1,9)
call SetStartLocPrio(1,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,1,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,2,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,5,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,6,7,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,7,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,8,9,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(2,9)
call SetStartLocPrio(2,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,2,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,5,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,6,7,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,7,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,8,9,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(3,9)
call SetStartLocPrio(3,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,5,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,6,7,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,7,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,8,9,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(4,9)
call SetStartLocPrio(4,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,3,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,5,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,6,7,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,7,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,8,9,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(5,9)
call SetStartLocPrio(5,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,3,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,4,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,5,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,6,7,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,7,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,8,9,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(6,9)
call SetStartLocPrio(6,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,3,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,4,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,5,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,6,7,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,7,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,8,9,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(7,9)
call SetStartLocPrio(7,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7,3,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7,4,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7,5,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7,6,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7,7,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7,8,9,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(8,9)
call SetStartLocPrio(8,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(8,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(8,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(8,3,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(8,4,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(8,5,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(8,6,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(8,7,7,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(8,8,9,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(9,9)
call SetStartLocPrio(9,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(9,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(9,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(9,3,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(9,4,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(9,5,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(9,6,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(9,7,7,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(9,8,8,MAP_LOC_PRIO_HIGH)
endfunction
